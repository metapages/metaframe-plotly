var Xv,fi,Xx,Zx,Zv,Kx,Jx,$x,_d={},Qx=[],TM=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function vc(C,B){for(var e in B)C[e]=B[e];return C}function qx(C){var B=C.parentNode;B&&B.removeChild(C)}function pa(C,B,e){var k,z,l,o={};for(l in B)l=="key"?k=B[l]:l=="ref"?z=B[l]:o[l]=B[l];if(arguments.length>2&&(o.children=arguments.length>3?Xv.call(arguments,2):e),typeof C=="function"&&C.defaultProps!=null)for(l in C.defaultProps)o[l]===void 0&&(o[l]=C.defaultProps[l]);return Kv(C,o,k,z,null)}function Kv(C,B,e,k,z){var l={type:C,props:B,key:e,ref:k,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:z??++Xx};return z==null&&fi.vnode!=null&&fi.vnode(l),l}function Ug(){return{current:null}}function tl(C){return C.children}function Pu(C,B){this.props=C,this.context=B}function Yh(C,B){if(B==null)return C.__?Yh(C.__,C.__.__k.indexOf(C)+1):null;for(var e;B<C.__k.length;B++)if((e=C.__k[B])!=null&&e.__e!=null)return e.__e;return typeof C.type=="function"?Yh(C):null}function eb(C){var B,e;if((C=C.__)!=null&&C.__c!=null){for(C.__e=C.__c.base=null,B=0;B<C.__k.length;B++)if((e=C.__k[B])!=null&&e.__e!=null){C.__e=C.__c.base=e.__e;break}return eb(C)}}function Vg(C){(!C.__d&&(C.__d=!0)&&Zv.push(C)&&!wd.__r++||Jx!==fi.debounceRendering)&&((Jx=fi.debounceRendering)||Kx)(wd)}function wd(){for(var C;wd.__r=Zv.length;)C=Zv.sort(function(B,e){return B.__v.__b-e.__v.__b}),Zv=[],C.some(function(B){var e,k,z,l,o,c;B.__d&&(o=(l=(e=B).__v).__e,(c=e.__P)&&(k=[],(z=vc({},l)).__v=l.__v+1,Hg(c,l,z,e.__n,c.ownerSVGElement!==void 0,l.__h!=null?[o]:null,k,o??Yh(l),l.__h),sb(k,l),l.__e!=o&&eb(l)))})}function tb(C,B,e,k,z,l,o,c,p,t){var n,a,i,r,f,u,s,h=k&&k.__k||Qx,d=h.length;for(e.__k=[],n=0;n<B.length;n++)if((r=e.__k[n]=(r=B[n])==null||typeof r=="boolean"?null:typeof r=="string"||typeof r=="number"||typeof r=="bigint"?Kv(null,r,null,null,r):Array.isArray(r)?Kv(tl,{children:r},null,null,null):r.__b>0?Kv(r.type,r.props,r.key,null,r.__v):r)!=null){if(r.__=e,r.__b=e.__b+1,(i=h[n])===null||i&&r.key==i.key&&r.type===i.type)h[n]=void 0;else for(a=0;a<d;a++){if((i=h[a])&&r.key==i.key&&r.type===i.type){h[a]=void 0;break}i=null}Hg(C,r,i=i||_d,z,l,o,c,p,t),f=r.__e,(a=r.ref)&&i.ref!=a&&(s||(s=[]),i.ref&&s.push(i.ref,null,r),s.push(a,r.__c||f,r)),f!=null?(u==null&&(u=f),typeof r.type=="function"&&r.__k===i.__k?r.__d=p=rb(r,p,C):p=nb(C,r,i,h,f,p),typeof e.type=="function"&&(e.__d=p)):p&&i.__e==p&&p.parentNode!=C&&(p=Yh(i))}for(e.__e=u,n=d;n--;)h[n]!=null&&(typeof e.type=="function"&&h[n].__e!=null&&h[n].__e==e.__d&&(e.__d=Yh(k,n+1)),ub(h[n],h[n]));if(s)for(n=0;n<s.length;n++)lb(s[n],s[++n],s[++n])}function rb(C,B,e){for(var k,z=C.__k,l=0;z&&l<z.length;l++)(k=z[l])&&(k.__=C,B=typeof k.type=="function"?rb(k,B,e):nb(e,k,k,z,k.__e,B));return B}function jf(C,B){return B=B||[],C==null||typeof C=="boolean"||(Array.isArray(C)?C.some(function(e){jf(e,B)}):B.push(C)),B}function nb(C,B,e,k,z,l){var o,c,p;if(B.__d!==void 0)o=B.__d,B.__d=void 0;else if(e==null||z!=l||z.parentNode==null)e:if(l==null||l.parentNode!==C)C.appendChild(z),o=null;else{for(c=l,p=0;(c=c.nextSibling)&&p<k.length;p+=2)if(c==z)break e;C.insertBefore(z,l),o=l}return o!==void 0?o:z.nextSibling}function AM(C,B,e,k,z){var l;for(l in e)l==="children"||l==="key"||l in B||Td(C,l,null,e[l],k);for(l in B)z&&typeof B[l]!="function"||l==="children"||l==="key"||l==="value"||l==="checked"||e[l]===B[l]||Td(C,l,B[l],e[l],k)}function ab(C,B,e){B[0]==="-"?C.setProperty(B,e):C[B]=e==null?"":typeof e!="number"||TM.test(B)?e:e+"px"}function Td(C,B,e,k,z){var l;e:if(B==="style")if(typeof e=="string")C.style.cssText=e;else{if(typeof k=="string"&&(C.style.cssText=k=""),k)for(B in k)e&&B in e||ab(C.style,B,"");if(e)for(B in e)k&&e[B]===k[B]||ab(C.style,B,e[B])}else if(B[0]==="o"&&B[1]==="n")l=B!==(B=B.replace(/Capture$/,"")),B=B.toLowerCase()in C?B.toLowerCase().slice(2):B.slice(2),C.l||(C.l={}),C.l[B+l]=e,e?k||C.addEventListener(B,l?ob:ib,l):C.removeEventListener(B,l?ob:ib,l);else if(B!=="dangerouslySetInnerHTML"){if(z)B=B.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(B!=="href"&&B!=="list"&&B!=="form"&&B!=="tabIndex"&&B!=="download"&&B in C)try{C[B]=e??"";break e}catch{}typeof e=="function"||(e!=null&&(e!==!1||B[0]==="a"&&B[1]==="r")?C.setAttribute(B,e):C.removeAttribute(B))}}function ib(C){this.l[C.type+!1](fi.event?fi.event(C):C)}function ob(C){this.l[C.type+!0](fi.event?fi.event(C):C)}function Hg(C,B,e,k,z,l,o,c,p){var t,n,a,i,r,f,u,s,h,d,y,m=B.type;if(B.constructor!==void 0)return null;e.__h!=null&&(p=e.__h,c=B.__e=e.__e,B.__h=null,l=[c]),(t=fi.__b)&&t(B);try{e:if(typeof m=="function"){if(s=B.props,h=(t=m.contextType)&&k[t.__c],d=t?h?h.props.value:t.__:k,e.__c?u=(n=B.__c=e.__c).__=n.__E:("prototype"in m&&m.prototype.render?B.__c=n=new m(s,d):(B.__c=n=new Pu(s,d),n.constructor=m,n.render=MM),h&&h.sub(n),n.props=s,n.state||(n.state={}),n.context=d,n.__n=k,a=n.__d=!0,n.__h=[]),n.__s==null&&(n.__s=n.state),m.getDerivedStateFromProps!=null&&(n.__s==n.state&&(n.__s=vc({},n.__s)),vc(n.__s,m.getDerivedStateFromProps(s,n.__s))),i=n.props,r=n.state,a)m.getDerivedStateFromProps==null&&n.componentWillMount!=null&&n.componentWillMount(),n.componentDidMount!=null&&n.__h.push(n.componentDidMount);else{if(m.getDerivedStateFromProps==null&&s!==i&&n.componentWillReceiveProps!=null&&n.componentWillReceiveProps(s,d),!n.__e&&n.shouldComponentUpdate!=null&&n.shouldComponentUpdate(s,n.__s,d)===!1||B.__v===e.__v){n.props=s,n.state=n.__s,B.__v!==e.__v&&(n.__d=!1),n.__v=B,B.__e=e.__e,B.__k=e.__k,B.__k.forEach(function(g){g&&(g.__=B)}),n.__h.length&&o.push(n);break e}n.componentWillUpdate!=null&&n.componentWillUpdate(s,n.__s,d),n.componentDidUpdate!=null&&n.__h.push(function(){n.componentDidUpdate(i,r,f)})}n.context=d,n.props=s,n.state=n.__s,(t=fi.__r)&&t(B),n.__d=!1,n.__v=B,n.__P=C,t=n.render(n.props,n.state,n.context),n.state=n.__s,n.getChildContext!=null&&(k=vc(vc({},k),n.getChildContext())),a||n.getSnapshotBeforeUpdate==null||(f=n.getSnapshotBeforeUpdate(i,r)),y=t!=null&&t.type===tl&&t.key==null?t.props.children:t,tb(C,Array.isArray(y)?y:[y],B,e,k,z,l,o,c,p),n.base=B.__e,B.__h=null,n.__h.length&&o.push(n),u&&(n.__E=n.__=null),n.__e=!1}else l==null&&B.__v===e.__v?(B.__k=e.__k,B.__e=e.__e):B.__e=SM(e.__e,B,e,k,z,l,o,p);(t=fi.diffed)&&t(B)}catch(g){B.__v=null,(p||l!=null)&&(B.__e=c,B.__h=!!p,l[l.indexOf(c)]=null),fi.__e(g,B,e)}}function sb(C,B){fi.__c&&fi.__c(B,C),C.some(function(e){try{C=e.__h,e.__h=[],C.some(function(k){k.call(e)})}catch(k){fi.__e(k,e.__v)}})}function SM(C,B,e,k,z,l,o,c){var p,t,n,a=e.props,i=B.props,r=B.type,f=0;if(r==="svg"&&(z=!0),l!=null){for(;f<l.length;f++)if((p=l[f])&&(p===C||(r?p.localName==r:p.nodeType==3))){C=p,l[f]=null;break}}if(C==null){if(r===null)return document.createTextNode(i);C=z?document.createElementNS("http://www.w3.org/2000/svg",r):document.createElement(r,i.is&&i),l=null,c=!1}if(r===null)a===i||c&&C.data===i||(C.data=i);else{if(l=l&&Xv.call(C.childNodes),t=(a=e.props||_d).dangerouslySetInnerHTML,n=i.dangerouslySetInnerHTML,!c){if(l!=null)for(a={},f=0;f<C.attributes.length;f++)a[C.attributes[f].name]=C.attributes[f].value;(n||t)&&(n&&(t&&n.__html==t.__html||n.__html===C.innerHTML)||(C.innerHTML=n&&n.__html||""))}if(AM(C,i,a,z,c),n)B.__k=[];else if(f=B.props.children,tb(C,Array.isArray(f)?f:[f],B,e,k,z&&r!=="foreignObject",l,o,l?l[0]:e.__k&&Yh(e,0),c),l!=null)for(f=l.length;f--;)l[f]!=null&&qx(l[f]);c||("value"in i&&(f=i.value)!==void 0&&(f!==C.value||r==="progress"&&!f)&&Td(C,"value",f,a.value,!1),"checked"in i&&(f=i.checked)!==void 0&&f!==C.checked&&Td(C,"checked",f,a.checked,!1))}return C}function lb(C,B,e){try{typeof C=="function"?C(B):C.current=B}catch(k){fi.__e(k,e)}}function ub(C,B,e){var k,z;if(fi.unmount&&fi.unmount(C),(k=C.ref)&&(k.current&&k.current!==C.__e||lb(k,null,B)),(k=C.__c)!=null){if(k.componentWillUnmount)try{k.componentWillUnmount()}catch(l){fi.__e(l,B)}k.base=k.__P=null}if(k=C.__k)for(z=0;z<k.length;z++)k[z]&&ub(k[z],B,typeof C.type!="function");e||C.__e==null||qx(C.__e),C.__e=C.__d=void 0}function MM(C,B,e){return this.constructor(C,e)}function jh(C,B,e){var k,z,l;fi.__&&fi.__(C,B),z=(k=typeof e=="function")?null:e&&e.__k||B.__k,l=[],Hg(B,C=(!k&&e||B).__k=pa(tl,null,[C]),z||_d,_d,B.ownerSVGElement!==void 0,!k&&e?[e]:z?null:B.firstChild?Xv.call(B.childNodes):null,l,!k&&e?e:z?z.__e:B.firstChild,k),sb(l,C)}function Gg(C,B){jh(C,B,Gg)}function fb(C,B,e){var k,z,l,o=vc({},C.props);for(l in B)l=="key"?k=B[l]:l=="ref"?z=B[l]:o[l]=B[l];return arguments.length>2&&(o.children=arguments.length>3?Xv.call(arguments,2):e),Kv(C.type,o,k||C.key,z||C.ref,null)}function rl(C,B){var e={__c:B="__cC"+$x++,__:C,Consumer:function(k,z){return k.children(z)},Provider:function(k){var z,l;return this.getChildContext||(z=[],(l={})[B]=this,this.getChildContext=function(){return l},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&z.some(Vg)},this.sub=function(o){z.push(o);var c=o.componentWillUnmount;o.componentWillUnmount=function(){z.splice(z.indexOf(o),1),c&&c.call(o)}}),k.children}};return e.Provider.__=e.Consumer.contextType=e}Xv=Qx.slice,fi={__e:function(C,B){for(var e,k,z;B=B.__;)if((e=B.__c)&&!e.__)try{if((k=e.constructor)&&k.getDerivedStateFromError!=null&&(e.setState(k.getDerivedStateFromError(C)),z=e.__d),e.componentDidCatch!=null&&(e.componentDidCatch(C),z=e.__d),z)return e.__E=e}catch(l){C=l}throw C}},Xx=0,Zx=function(C){return C!=null&&C.constructor===void 0},Pu.prototype.setState=function(C,B){var e;e=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=vc({},this.state),typeof C=="function"&&(C=C(vc({},e),this.props)),C&&vc(e,C),C!=null&&this.__v&&(B&&this.__h.push(B),Vg(this))},Pu.prototype.forceUpdate=function(C){this.__v&&(this.__e=!0,C&&this.__h.push(C),Vg(this))},Pu.prototype.render=tl,Zv=[],Kx=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,wd.__r=0,$x=0;var kM=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",render:jh,hydrate:Gg,createElement:pa,h:pa,Fragment:tl,createRef:Ug,get isValidElement(){return Zx},Component:Pu,cloneElement:fb,createContext:rl,toChildArray:jf,get options(){return fi}}),th,xl,cb,Xh=0,Wg=[],hb=fi.__b,vb=fi.__r,pb=fi.diffed,db=fi.__c,gb=fi.unmount;function Zh(C,B){fi.__h&&fi.__h(xl,C,Xh||B),Xh=0;var e=xl.__H||(xl.__H={__:[],__h:[]});return C>=e.__.length&&e.__.push({}),e.__[C]}function Us(C){return Xh=1,Yg(bb,C)}function Yg(C,B,e){var k=Zh(th++,2);return k.t=C,k.__c||(k.__=[e?e(B):bb(void 0,B),function(z){var l=k.t(k.__[0],z);k.__[0]!==l&&(k.__=[l,k.__[1]],k.__c.setState({}))}],k.__c=xl),k.__}function _o(C,B){var e=Zh(th++,3);!fi.__s&&Xg(e.__H,B)&&(e.__=C,e.__H=B,xl.__H.__h.push(e))}function rh(C,B){var e=Zh(th++,4);!fi.__s&&Xg(e.__H,B)&&(e.__=C,e.__H=B,xl.__h.push(e))}function Eo(C){return Xh=5,Vs(function(){return{current:C}},[])}function mb(C,B,e){Xh=6,rh(function(){typeof C=="function"?C(B()):C&&(C.current=B())},e==null?e:e.concat(C))}function Vs(C,B){var e=Zh(th++,7);return Xg(e.__H,B)&&(e.__=C(),e.__H=B,e.__h=C),e.__}function Oo(C,B){return Xh=8,Vs(function(){return C},B)}function wo(C){var B=xl.context[C.__c],e=Zh(th++,9);return e.c=C,B?(e.__==null&&(e.__=!0,B.sub(xl)),B.props.value):C.__}function yb(C,B){fi.useDebugValue&&fi.useDebugValue(B?B(C):C)}function CM(C){var B=Zh(th++,10),e=Us();return B.__=C,xl.componentDidCatch||(xl.componentDidCatch=function(k){B.__&&B.__(k),e[1](k)}),[e[0],function(){e[1](void 0)}]}function EM(){Wg.forEach(function(C){if(C.__P)try{C.__H.__h.forEach(Ad),C.__H.__h.forEach(jg),C.__H.__h=[]}catch(B){C.__H.__h=[],fi.__e(B,C.__v)}}),Wg=[]}fi.__b=function(C){xl=null,hb&&hb(C)},fi.__r=function(C){vb&&vb(C),th=0;var B=(xl=C.__c).__H;B&&(B.__h.forEach(Ad),B.__h.forEach(jg),B.__h=[])},fi.diffed=function(C){pb&&pb(C);var B=C.__c;B&&B.__H&&B.__H.__h.length&&(Wg.push(B)!==1&&cb===fi.requestAnimationFrame||((cb=fi.requestAnimationFrame)||function(e){var k,z=function(){clearTimeout(l),xb&&cancelAnimationFrame(k),setTimeout(e)},l=setTimeout(z,100);xb&&(k=requestAnimationFrame(z))})(EM)),xl=null},fi.__c=function(C,B){B.some(function(e){try{e.__h.forEach(Ad),e.__h=e.__h.filter(function(k){return!k.__||jg(k)})}catch(k){B.some(function(z){z.__h&&(z.__h=[])}),B=[],fi.__e(k,e.__v)}}),db&&db(C,B)},fi.unmount=function(C){gb&&gb(C);var B=C.__c;if(B&&B.__H)try{B.__H.__.forEach(Ad)}catch(e){fi.__e(e,B.__v)}};var xb=typeof requestAnimationFrame=="function";function Ad(C){var B=xl;typeof C.__c=="function"&&C.__c(),xl=B}function jg(C){var B=xl;C.__c=C.__(),xl=B}function Xg(C,B){return!C||C.length!==B.length||B.some(function(e,k){return e!==C[k]})}function bb(C,B){return typeof B=="function"?B(C):B}function _b(C,B){for(var e in B)C[e]=B[e];return C}function Zg(C,B){for(var e in C)if(e!=="__source"&&!(e in B))return!0;for(var k in B)if(k!=="__source"&&C[k]!==B[k])return!0;return!1}function Jv(C){this.props=C}function Kg(C,B){function e(z){var l=this.props.ref,o=l==z.ref;return!o&&l&&(l.call?l(null):l.current=null),B?!B(this.props,z)||!o:Zg(this.props,z)}function k(z){return this.shouldComponentUpdate=e,pa(C,z)}return k.displayName="Memo("+(C.displayName||C.name)+")",k.prototype.isReactComponent=!0,k.__f=!0,k}(Jv.prototype=new Pu).isPureReactComponent=!0,Jv.prototype.shouldComponentUpdate=function(C,B){return Zg(this.props,C)||Zg(this.state,B)};var wb=fi.__b;fi.__b=function(C){C.type&&C.type.__f&&C.ref&&(C.props.ref=C.ref,C.ref=null),wb&&wb(C)};var LM=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Xf(C){function B(e,k){var z=_b({},e);return delete z.ref,C(z,(k=e.ref||k)&&(typeof k!="object"||"current"in k)?k:null)}return B.$$typeof=LM,B.render=B,B.prototype.isReactComponent=B.__f=!0,B.displayName="ForwardRef("+(C.displayName||C.name)+")",B}var Tb=function(C,B){return C==null?null:jf(jf(C).map(B))},Sd={map:Tb,forEach:Tb,count:function(C){return C?jf(C).length:0},only:function(C){var B=jf(C);if(B.length!==1)throw"Children.only";return B[0]},toArray:jf},PM=fi.__e;fi.__e=function(C,B,e){if(C.then){for(var k,z=B;z=z.__;)if((k=z.__c)&&k.__c)return B.__e==null&&(B.__e=e.__e,B.__k=e.__k),k.__c(C,B)}PM(C,B,e)};var Ab=fi.unmount;function $v(){this.__u=0,this.t=null,this.__b=null}function Sb(C){var B=C.__.__c;return B&&B.__e&&B.__e(C)}function Mb(C){var B,e,k;function z(l){if(B||(B=C()).then(function(o){e=o.default||o},function(o){k=o}),k)throw k;if(!e)throw B;return pa(e,l)}return z.displayName="Lazy",z.__f=!0,z}function Kh(){this.u=null,this.o=null}fi.unmount=function(C){var B=C.__c;B&&B.__R&&B.__R(),B&&C.__h===!0&&(C.type=null),Ab&&Ab(C)},($v.prototype=new Pu).__c=function(C,B){var e=B.__c,k=this;k.t==null&&(k.t=[]),k.t.push(e);var z=Sb(k.__v),l=!1,o=function(){l||(l=!0,e.__R=null,z?z(c):c())};e.__R=o;var c=function(){if(!--k.__u){if(k.state.__e){var t=k.state.__e;k.__v.__k[0]=function a(i,r,f){return i&&(i.__v=null,i.__k=i.__k&&i.__k.map(function(u){return a(u,r,f)}),i.__c&&i.__c.__P===r&&(i.__e&&f.insertBefore(i.__e,i.__d),i.__c.__e=!0,i.__c.__P=f)),i}(t,t.__c.__P,t.__c.__O)}var n;for(k.setState({__e:k.__b=null});n=k.t.pop();)n.forceUpdate()}},p=B.__h===!0;k.__u++||p||k.setState({__e:k.__b=k.__v.__k[0]}),C.then(o,o)},$v.prototype.componentWillUnmount=function(){this.t=[]},$v.prototype.render=function(C,B){if(this.__b){if(this.__v.__k){var e=document.createElement("div"),k=this.__v.__k[0].__c;this.__v.__k[0]=function l(o,c,p){return o&&(o.__c&&o.__c.__H&&(o.__c.__H.__.forEach(function(t){typeof t.__c=="function"&&t.__c()}),o.__c.__H=null),(o=_b({},o)).__c!=null&&(o.__c.__P===p&&(o.__c.__P=c),o.__c=null),o.__k=o.__k&&o.__k.map(function(t){return l(t,c,p)})),o}(this.__b,e,k.__O=k.__P)}this.__b=null}var z=B.__e&&pa(tl,null,C.fallback);return z&&(z.__h=null),[pa(tl,null,B.__e?null:C.children),z]};var kb=function(C,B,e){if(++e[1]===e[0]&&C.o.delete(B),C.props.revealOrder&&(C.props.revealOrder[0]!=="t"||!C.o.size))for(e=C.u;e;){for(;e.length>3;)e.pop()();if(e[1]<e[0])break;C.u=e=e[2]}};function RM(C){return this.getChildContext=function(){return C.context},C.children}function DM(C){var B=this,e=C.i;B.componentWillUnmount=function(){jh(null,B.l),B.l=null,B.i=null},B.i&&B.i!==e&&B.componentWillUnmount(),C.__v?(B.l||(B.i=e,B.l={nodeType:1,parentNode:e,childNodes:[],appendChild:function(k){this.childNodes.push(k),B.i.appendChild(k)},insertBefore:function(k,z){this.childNodes.push(k),B.i.appendChild(k)},removeChild:function(k){this.childNodes.splice(this.childNodes.indexOf(k)>>>1,1),B.i.removeChild(k)}}),jh(pa(RM,{context:B.context},C.__v),B.l)):B.l&&B.componentWillUnmount()}function Md(C,B){return pa(DM,{__v:C,i:B})}(Kh.prototype=new Pu).__e=function(C){var B=this,e=Sb(B.__v),k=B.o.get(C);return k[0]++,function(z){var l=function(){B.props.revealOrder?(k.push(z),kb(B,C,k)):z()};e?e(l):l()}},Kh.prototype.render=function(C){this.u=null,this.o=new Map;var B=jf(C.children);C.revealOrder&&C.revealOrder[0]==="b"&&B.reverse();for(var e=B.length;e--;)this.o.set(B[e],this.u=[1,0,this.u]);return C.children},Kh.prototype.componentDidUpdate=Kh.prototype.componentDidMount=function(){var C=this;this.o.forEach(function(B,e){kb(C,e,B)})};var Cb=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,IM=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,FM=typeof document!="undefined",zM=function(C){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(C)};function Eb(C,B,e){return B.__k==null&&(B.textContent=""),jh(C,B),typeof e=="function"&&e(),C?C.__c:null}function Lb(C,B,e){return Gg(C,B),typeof e=="function"&&e(),C?C.__c:null}Pu.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(C){Object.defineProperty(Pu.prototype,C,{configurable:!0,get:function(){return this["UNSAFE_"+C]},set:function(B){Object.defineProperty(this,C,{configurable:!0,writable:!0,value:B})}})});var Pb=fi.event;function OM(){}function BM(){return this.cancelBubble}function NM(){return this.defaultPrevented}fi.event=function(C){return Pb&&(C=Pb(C)),C.persist=OM,C.isPropagationStopped=BM,C.isDefaultPrevented=NM,C.nativeEvent=C};var Rb,Db={configurable:!0,get:function(){return this.class}},Ib=fi.vnode;fi.vnode=function(C){var B=C.type,e=C.props,k=e;if(typeof B=="string"){var z=B.indexOf("-")===-1;for(var l in k={},e){var o=e[l];FM&&l==="children"&&B==="noscript"||l==="value"&&"defaultValue"in e&&o==null||(l==="defaultValue"&&"value"in e&&e.value==null?l="value":l==="download"&&o===!0?o="":/ondoubleclick/i.test(l)?l="ondblclick":/^onchange(textarea|input)/i.test(l+B)&&!zM(e.type)?l="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(l)?l=l.toLowerCase():z&&IM.test(l)?l=l.replace(/[A-Z0-9]/,"-$&").toLowerCase():o===null&&(o=void 0),k[l]=o)}B=="select"&&k.multiple&&Array.isArray(k.value)&&(k.value=jf(e.children).forEach(function(c){c.props.selected=k.value.indexOf(c.props.value)!=-1})),B=="select"&&k.defaultValue!=null&&(k.value=jf(e.children).forEach(function(c){c.props.selected=k.multiple?k.defaultValue.indexOf(c.props.value)!=-1:k.defaultValue==c.props.value})),C.props=k}B&&e.class!=e.className&&(Db.enumerable="className"in e,e.className!=null&&(k.class=e.className),Object.defineProperty(k,"className",Db)),C.$$typeof=Cb,Ib&&Ib(C)};var Fb=fi.__r;fi.__r=function(C){Fb&&Fb(C),Rb=C.__c};var zb={ReactCurrentDispatcher:{current:{readContext:function(C){return Rb.__n[C.__c].props.value}}}},UM="17.0.2";function Ob(C){return pa.bind(null,C)}function Jh(C){return!!C&&C.$$typeof===Cb}function $h(C){return Jh(C)?fb.apply(null,arguments):C}function Bb(C){return!!C.__k&&(jh(null,C),!0)}function Nb(C){return C&&(C.base||C.nodeType===1&&C)||null}var Ub=function(C,B){return C(B)},Vb=function(C,B){return C(B)},VM=tl,nh={useState:Us,useReducer:Yg,useEffect:_o,useLayoutEffect:rh,useRef:Eo,useImperativeHandle:mb,useMemo:Vs,useCallback:Oo,useContext:wo,useDebugValue:yb,version:"17.0.2",Children:Sd,render:Eb,hydrate:Lb,unmountComponentAtNode:Bb,createPortal:Md,createElement:pa,createContext:rl,createFactory:Ob,cloneElement:$h,createRef:Ug,Fragment:tl,isValidElement:Jh,findDOMNode:Nb,Component:Pu,PureComponent:Jv,memo:Kg,forwardRef:Xf,flushSync:Vb,unstable_batchedUpdates:Ub,StrictMode:tl,Suspense:$v,SuspenseList:Kh,lazy:Mb,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:zb},HM=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:nh,version:UM,Children:Sd,render:Eb,hydrate:Lb,unmountComponentAtNode:Bb,createPortal:Md,createFactory:Ob,cloneElement:$h,isValidElement:Jh,findDOMNode:Nb,PureComponent:Jv,memo:Kg,forwardRef:Xf,flushSync:Vb,unstable_batchedUpdates:Ub,StrictMode:VM,Suspense:$v,SuspenseList:Kh,lazy:Mb,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:zb,createElement:pa,createContext:rl,createRef:Ug,Fragment:tl,Component:Pu,useState:Us,useReducer:Yg,useEffect:_o,useLayoutEffect:rh,useRef:Eo,useImperativeHandle:mb,useMemo:Vs,useCallback:Oo,useContext:wo,useDebugValue:yb,useErrorBoundary:CM}),lo=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function GM(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}function Hb(C){if(C.__esModule)return C;var B=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(C).forEach(function(e){var k=Object.getOwnPropertyDescriptor(C,e);Object.defineProperty(B,e,k.get?k:{enumerable:!0,get:function(){return C[e]}})}),B}function kd(C){throw new Error('Could not dynamically require "'+C+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var WM=function(C,B){for(var e=[],k=0;k<C.length;k++){var z=B(C[k],k);YM(z)?e.push.apply(e,z):e.push(z)}return e},YM=Array.isArray||function(C){return Object.prototype.toString.call(C)==="[object Array]"},jM=Gb;function Gb(C,B,e){C instanceof RegExp&&(C=Wb(C,e)),B instanceof RegExp&&(B=Wb(B,e));var k=Yb(C,B,e);return k&&{start:k[0],end:k[1],pre:e.slice(0,k[0]),body:e.slice(k[0]+C.length,k[1]),post:e.slice(k[1]+B.length)}}function Wb(C,B){var e=B.match(C);return e?e[0]:null}Gb.range=Yb;function Yb(C,B,e){var k,z,l,o,c,p=e.indexOf(C),t=e.indexOf(B,p+1),n=p;if(p>=0&&t>0){if(C===B)return[p,t];for(k=[],l=e.length;n>=0&&!c;)n==p?(k.push(n),p=e.indexOf(C,n+1)):k.length==1?c=[k.pop(),t]:(z=k.pop(),z<l&&(l=z,o=t),t=e.indexOf(B,n+1)),n=p<t&&p>=0?p:t;k.length&&(c=[l,o])}return c}var XM=WM,jb=jM,ZM=$M,Xb="\0SLASH"+Math.random()+"\0",Zb="\0OPEN"+Math.random()+"\0",Jg="\0CLOSE"+Math.random()+"\0",Kb="\0COMMA"+Math.random()+"\0",Jb="\0PERIOD"+Math.random()+"\0";function $g(C){return parseInt(C,10)==C?parseInt(C,10):C.charCodeAt(0)}function KM(C){return C.split("\\\\").join(Xb).split("\\{").join(Zb).split("\\}").join(Jg).split("\\,").join(Kb).split("\\.").join(Jb)}function JM(C){return C.split(Xb).join("\\").split(Zb).join("{").split(Jg).join("}").split(Kb).join(",").split(Jb).join(".")}function $b(C){if(!C)return[""];var B=[],e=jb("{","}",C);if(!e)return C.split(",");var k=e.pre,z=e.body,l=e.post,o=k.split(",");o[o.length-1]+="{"+z+"}";var c=$b(l);return l.length&&(o[o.length-1]+=c.shift(),o.push.apply(o,c)),B.push.apply(B,o),B}function $M(C){return C?(C.substr(0,2)==="{}"&&(C="\\{\\}"+C.substr(2)),Qh(KM(C),!0).map(JM)):[]}function QM(C){return"{"+C+"}"}function qM(C){return/^-?0\d/.test(C)}function e4(C,B){return C<=B}function t4(C,B){return C>=B}function Qh(C,B){var e=[],k=jb("{","}",C);if(!k||/\$$/.test(k.pre))return[C];var z=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(k.body),l=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(k.body),o=z||l,c=k.body.indexOf(",")>=0;if(!o&&!c)return k.post.match(/,.*\}/)?(C=k.pre+"{"+k.body+Jg+k.post,Qh(C)):[C];var p;if(o)p=k.body.split(/\.\./);else if(p=$b(k.body),p.length===1&&(p=Qh(p[0],!1).map(QM),p.length===1)){var n=k.post.length?Qh(k.post,!1):[""];return n.map(function(T){return k.pre+p[0]+T})}var t=k.pre,n=k.post.length?Qh(k.post,!1):[""],a;if(o){var i=$g(p[0]),r=$g(p[1]),f=Math.max(p[0].length,p[1].length),u=p.length==3?Math.abs($g(p[2])):1,s=e4,h=r<i;h&&(u*=-1,s=t4);var d=p.some(qM);a=[];for(var y=i;s(y,r);y+=u){var m;if(l)m=String.fromCharCode(y),m==="\\"&&(m="");else if(m=String(y),d){var g=f-m.length;if(g>0){var x=new Array(g+1).join("0");y<0?m="-"+x+m.slice(1):m=x+m}}a.push(m)}}else a=XM(p,function(w){return Qh(w,!1)});for(var A=0;A<a.length;A++)for(var b=0;b<n.length;b++){var S=t+a[A]+n[b];(!B||o||S)&&e.push(S)}return e}var r4=$u;$u.Minimatch=nl;var Qv={sep:"/"};try{Qv=require("path")}catch{}var Qg=$u.GLOBSTAR=nl.GLOBSTAR={},n4=ZM,Qb={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},qg="[^/]",em=qg+"*?",a4="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",i4="(?:(?!(?:\\/|^)\\.).)*?",qb=o4("().*{}+?[]^$\\!");function o4(C){return C.split("").reduce(function(B,e){return B[e]=!0,B},{})}var e2=/\/+/;$u.filter=s4;function s4(C,B){return B=B||{},function(e,k,z){return $u(e,C,B)}}function t2(C,B){C=C||{},B=B||{};var e={};return Object.keys(B).forEach(function(k){e[k]=B[k]}),Object.keys(C).forEach(function(k){e[k]=C[k]}),e}$u.defaults=function(C){if(!C||!Object.keys(C).length)return $u;var B=$u,e=function(z,l,o){return B.minimatch(z,l,t2(C,o))};return e.Minimatch=function(z,l){return new B.Minimatch(z,t2(C,l))},e};nl.defaults=function(C){return!C||!Object.keys(C).length?nl:$u.defaults(C).Minimatch};function $u(C,B,e){if(typeof B!="string")throw new TypeError("glob pattern string required");return e||(e={}),!e.nocomment&&B.charAt(0)==="#"?!1:B.trim()===""?C==="":new nl(B,e).match(C)}function nl(C,B){if(!(this instanceof nl))return new nl(C,B);if(typeof C!="string")throw new TypeError("glob pattern string required");B||(B={}),C=C.trim(),Qv.sep!=="/"&&(C=C.split(Qv.sep).join("/")),this.options=B,this.set=[],this.pattern=C,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}nl.prototype.debug=function(){};nl.prototype.make=l4;function l4(){if(!this._made){var C=this.pattern,B=this.options;if(!B.nocomment&&C.charAt(0)==="#"){this.comment=!0;return}if(!C){this.empty=!0;return}this.parseNegate();var e=this.globSet=this.braceExpand();B.debug&&(this.debug=console.error),this.debug(this.pattern,e),e=this.globParts=e.map(function(k){return k.split(e2)}),this.debug(this.pattern,e),e=e.map(function(k,z,l){return k.map(this.parse,this)},this),this.debug(this.pattern,e),e=e.filter(function(k){return k.indexOf(!1)===-1}),this.debug(this.pattern,e),this.set=e}}nl.prototype.parseNegate=u4;function u4(){var C=this.pattern,B=!1,e=this.options,k=0;if(!e.nonegate){for(var z=0,l=C.length;z<l&&C.charAt(z)==="!";z++)B=!B,k++;k&&(this.pattern=C.substr(k)),this.negate=B}}$u.braceExpand=function(C,B){return r2(C,B)};nl.prototype.braceExpand=r2;function r2(C,B){if(B||(this instanceof nl?B=this.options:B={}),C=typeof C=="undefined"?this.pattern:C,typeof C=="undefined")throw new TypeError("undefined pattern");return B.nobrace||!C.match(/\{.*\}/)?[C]:n4(C)}nl.prototype.parse=f4;var Cd={};function f4(C,B){if(C.length>1024*64)throw new TypeError("pattern is too long");var e=this.options;if(!e.noglobstar&&C==="**")return Qg;if(C==="")return"";var k="",z=!!e.nocase,l=!1,o=[],c=[],p,t=!1,n=-1,a=-1,i=C.charAt(0)==="."?"":e.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",r=this;function f(){if(p){switch(p){case"*":k+=em,z=!0;break;case"?":k+=qg,z=!0;break;default:k+="\\"+p;break}r.debug("clearStateChar %j %j",p,k),p=!1}}for(var u=0,s=C.length,h;u<s&&(h=C.charAt(u));u++){if(this.debug("%s	%s %s %j",C,u,k,h),l&&qb[h]){k+="\\"+h,l=!1;continue}switch(h){case"/":return!1;case"\\":f(),l=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",C,u,k,h),t){this.debug("  in class"),h==="!"&&u===a+1&&(h="^"),k+=h;continue}r.debug("call clearStateChar %j",p),f(),p=h,e.noext&&f();continue;case"(":if(t){k+="(";continue}if(!p){k+="\\(";continue}o.push({type:p,start:u-1,reStart:k.length,open:Qb[p].open,close:Qb[p].close}),k+=p==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",p,k),p=!1;continue;case")":if(t||!o.length){k+="\\)";continue}f(),z=!0;var d=o.pop();k+=d.close,d.type==="!"&&c.push(d),d.reEnd=k.length;continue;case"|":if(t||!o.length||l){k+="\\|",l=!1;continue}f(),k+="|";continue;case"[":if(f(),t){k+="\\"+h;continue}t=!0,a=u,n=k.length,k+=h;continue;case"]":if(u===a+1||!t){k+="\\"+h,l=!1;continue}if(t){var y=C.substring(a+1,u);try{RegExp("["+y+"]")}catch{var m=this.parse(y,Cd);k=k.substr(0,n)+"\\["+m[0]+"\\]",z=z||m[1],t=!1;continue}}z=!0,t=!1,k+=h;continue;default:f(),l?l=!1:qb[h]&&!(h==="^"&&t)&&(k+="\\"),k+=h}}for(t&&(y=C.substr(a+1),m=this.parse(y,Cd),k=k.substr(0,n)+"\\["+m[0],z=z||m[1]),d=o.pop();d;d=o.pop()){var g=k.slice(d.reStart+d.open.length);this.debug("setting tail",k,d),g=g.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(I,F,V){return V||(V="\\"),F+F+V+"|"}),this.debug(`tail=%j
   %s`,g,g,d,k);var x=d.type==="*"?em:d.type==="?"?qg:"\\"+d.type;z=!0,k=k.slice(0,d.reStart)+x+"\\("+g}f(),l&&(k+="\\\\");var A=!1;switch(k.charAt(0)){case".":case"[":case"(":A=!0}for(var b=c.length-1;b>-1;b--){var S=c[b],w=k.slice(0,S.reStart),T=k.slice(S.reStart,S.reEnd-8),_=k.slice(S.reEnd-8,S.reEnd),v=k.slice(S.reEnd);_+=v;var P=w.split("(").length-1,M=v;for(u=0;u<P;u++)M=M.replace(/\)[+*?]?/,"");v=M;var E="";v===""&&B!==Cd&&(E="$");var D=w+T+v+E+_;k=D}if(k!==""&&z&&(k="(?=.)"+k),A&&(k=i+k),B===Cd)return[k,z];if(!z)return v4(C);var N=e.nocase?"i":"";try{var O=new RegExp("^"+k+"$",N)}catch{return new RegExp("$.")}return O._glob=C,O._src=k,O}$u.makeRe=function(C,B){return new nl(C,B||{}).makeRe()};nl.prototype.makeRe=c4;function c4(){if(this.regexp||this.regexp===!1)return this.regexp;var C=this.set;if(!C.length)return this.regexp=!1,this.regexp;var B=this.options,e=B.noglobstar?em:B.dot?a4:i4,k=B.nocase?"i":"",z=C.map(function(l){return l.map(function(o){return o===Qg?e:typeof o=="string"?p4(o):o._src}).join("\\/")}).join("|");z="^(?:"+z+")$",this.negate&&(z="^(?!"+z+").*$");try{this.regexp=new RegExp(z,k)}catch{this.regexp=!1}return this.regexp}$u.match=function(C,B,e){e=e||{};var k=new nl(B,e);return C=C.filter(function(z){return k.match(z)}),k.options.nonull&&!C.length&&C.push(B),C};nl.prototype.match=h4;function h4(C,B){if(this.debug("match",C,this.pattern),this.comment)return!1;if(this.empty)return C==="";if(C==="/"&&B)return!0;var e=this.options;Qv.sep!=="/"&&(C=C.split(Qv.sep).join("/")),C=C.split(e2),this.debug(this.pattern,"split",C);var k=this.set;this.debug(this.pattern,"set",k);var z,l;for(l=C.length-1;l>=0&&(z=C[l],!z);l--);for(l=0;l<k.length;l++){var o=k[l],c=C;e.matchBase&&o.length===1&&(c=[z]);var p=this.matchOne(c,o,B);if(p)return e.flipNegate?!0:!this.negate}return e.flipNegate?!1:this.negate}nl.prototype.matchOne=function(C,B,e){var k=this.options;this.debug("matchOne",{this:this,file:C,pattern:B}),this.debug("matchOne",C.length,B.length);for(var z=0,l=0,o=C.length,c=B.length;z<o&&l<c;z++,l++){this.debug("matchOne loop");var p=B[l],t=C[z];if(this.debug(B,p,t),p===!1)return!1;if(p===Qg){this.debug("GLOBSTAR",[B,p,t]);var n=z,a=l+1;if(a===c){for(this.debug("** at the end");z<o;z++)if(C[z]==="."||C[z]===".."||!k.dot&&C[z].charAt(0)===".")return!1;return!0}for(;n<o;){var i=C[n];if(this.debug(`
globstar while`,C,n,B,a,i),this.matchOne(C.slice(n),B.slice(a),e))return this.debug("globstar found match!",n,o,i),!0;if(i==="."||i===".."||!k.dot&&i.charAt(0)==="."){this.debug("dot detected!",C,n,B,a);break}this.debug("globstar swallow a segment, and continue"),n++}return!!(e&&(this.debug(`
>>> no match, partial?`,C,n,B,a),n===o))}var r;if(typeof p=="string"?(k.nocase?r=t.toLowerCase()===p.toLowerCase():r=t===p,this.debug("string match",p,t,r)):(r=t.match(p),this.debug("pattern match",p,t,r)),!r)return!1}if(z===o&&l===c)return!0;if(z===o)return e;if(l===c){var f=z===o-1&&C[z]==="";return f}throw new Error("wtf?")};function v4(C){return C.replace(/\\(.)/g,"$1")}function p4(C){return C.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}var Ed;(function(C){C.V0_3="0.3",C.V0_4="0.4"})(Ed||(Ed={}));var _f;(function(C){C.V0_2="0.2",C.V0_3="0.3"})(_f||(_f={}));const n2=Object.keys(Ed);Ed.V0_4;const a2=Object.keys(_f),Ld=_f.V0_3;var Ii;(function(C){C.Inputs="inputs",C.Outputs="outputs",C.State="state",C.Definition="definition",C.DefinitionUpdateRequest="definitionupdaterequest",C.Error="error",C.UrlHashUpdate="urlhashupdate",C.Message="Message"})(Ii||(Ii={}));var Kl;(function(C){C.InputsUpdate="InputsUpdate",C.OutputsUpdate="OutputsUpdate",C.SetupIframeClientRequest="SetupIframeClientRequest",C.SetupIframeServerResponseAck="SetupIframeServerResponseAck",C.PluginRequest="SetupIframeServerPluginRequestResponseAck",C.HashParamsUpdate="HashParamsUpdate"})(Kl||(Kl={}));var pc;(function(C){C.InputsUpdate="InputsUpdate",C.MessageAck="MessageAck",C.SetupIframeServerResponse="SetupIframeServerResponse"})(pc||(pc={}));var tm;(function(C){C.State="metapage/state"})(tm||(tm={}));const Zf="metapage/definition",Dc="metapage/state",i2=a2[a2.length-1],d4=n2[n2.length-1];var qv={exports:{}};(function(C,B){(function(e,k){C.exports=k()})(lo,function(){var e=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function k(a,i){return a.indexOf(i)===-1?a.length:a.indexOf(i)}function z(a){var i=a.replace(/^v/,"").replace(/\+.*$/,""),r=k(i,"-"),f=i.substring(0,r).split(".");return f.push(i.substring(r+1)),f}function l(a){return isNaN(Number(a))?a:Number(a)}function o(a){if(typeof a!="string")throw new TypeError("Invalid argument expected string");if(!e.test(a))throw new Error("Invalid argument not valid semver ('"+a+"' received)")}function c(a,i){[a,i].forEach(o);for(var r=z(a),f=z(i),u=0;u<Math.max(r.length-1,f.length-1);u++){var s=parseInt(r[u]||0,10),h=parseInt(f[u]||0,10);if(s>h)return 1;if(h>s)return-1}var d=r[r.length-1],y=f[f.length-1];if(d&&y){var m=d.split(".").map(l),g=y.split(".").map(l);for(u=0;u<Math.max(m.length,g.length);u++){if(m[u]===void 0||typeof g[u]=="string"&&typeof m[u]=="number")return-1;if(g[u]===void 0||typeof m[u]=="string"&&typeof g[u]=="number"||m[u]>g[u])return 1;if(g[u]>m[u])return-1}}else if(d||y)return d?-1:1;return 0}var p=[">",">=","=","<","<="],t={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};function n(a){if(typeof a!="string")throw new TypeError("Invalid operator type, expected string but got "+typeof a);if(p.indexOf(a)===-1)throw new TypeError("Invalid operator, expected one of "+p.join("|"))}return c.validate=function(a){return typeof a=="string"&&e.test(a)},c.compare=function(a,i,r){n(r);var f=c(a,i);return t[r].indexOf(f)>-1},c})})(qv);var Pd={exports:{}};(function(C){var B=Object.prototype.hasOwnProperty,e="~";function k(){}Object.create&&(k.prototype=Object.create(null),new k().__proto__||(e=!1));function z(p,t,n){this.fn=p,this.context=t,this.once=n||!1}function l(p,t,n,a,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var r=new z(n,a||p,i),f=e?e+t:t;return p._events[f]?p._events[f].fn?p._events[f]=[p._events[f],r]:p._events[f].push(r):(p._events[f]=r,p._eventsCount++),p}function o(p,t){--p._eventsCount==0?p._events=new k:delete p._events[t]}function c(){this._events=new k,this._eventsCount=0}c.prototype.eventNames=function(){var t=[],n,a;if(this._eventsCount===0)return t;for(a in n=this._events)B.call(n,a)&&t.push(e?a.slice(1):a);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(n)):t},c.prototype.listeners=function(t){var n=e?e+t:t,a=this._events[n];if(!a)return[];if(a.fn)return[a.fn];for(var i=0,r=a.length,f=new Array(r);i<r;i++)f[i]=a[i].fn;return f},c.prototype.listenerCount=function(t){var n=e?e+t:t,a=this._events[n];return a?a.fn?1:a.length:0},c.prototype.emit=function(t,n,a,i,r,f){var u=e?e+t:t;if(!this._events[u])return!1;var s=this._events[u],h=arguments.length,d,y;if(s.fn){switch(s.once&&this.removeListener(t,s.fn,void 0,!0),h){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,n),!0;case 3:return s.fn.call(s.context,n,a),!0;case 4:return s.fn.call(s.context,n,a,i),!0;case 5:return s.fn.call(s.context,n,a,i,r),!0;case 6:return s.fn.call(s.context,n,a,i,r,f),!0}for(y=1,d=new Array(h-1);y<h;y++)d[y-1]=arguments[y];s.fn.apply(s.context,d)}else{var m=s.length,g;for(y=0;y<m;y++)switch(s[y].once&&this.removeListener(t,s[y].fn,void 0,!0),h){case 1:s[y].fn.call(s[y].context);break;case 2:s[y].fn.call(s[y].context,n);break;case 3:s[y].fn.call(s[y].context,n,a);break;case 4:s[y].fn.call(s[y].context,n,a,i);break;default:if(!d)for(g=1,d=new Array(h-1);g<h;g++)d[g-1]=arguments[g];s[y].fn.apply(s[y].context,d)}}return!0},c.prototype.on=function(t,n,a){return l(this,t,n,a,!1)},c.prototype.once=function(t,n,a){return l(this,t,n,a,!0)},c.prototype.removeListener=function(t,n,a,i){var r=e?e+t:t;if(!this._events[r])return this;if(!n)return o(this,r),this;var f=this._events[r];if(f.fn)f.fn===n&&(!i||f.once)&&(!a||f.context===a)&&o(this,r);else{for(var u=0,s=[],h=f.length;u<h;u++)(f[u].fn!==n||i&&!f[u].once||a&&f[u].context!==a)&&s.push(f[u]);s.length?this._events[r]=s.length===1?s[0]:s:o(this,r)}return this},c.prototype.removeAllListeners=function(t){var n;return t?(n=e?e+t:t,this._events[n]&&o(this,n)):(this._events=new k,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=e,c.EventEmitter=c,C.exports=c})(Pd);var Rd;(function(C){C.mp_debug="mp_debug"})(Rd||(Rd={}));const g4=()=>{try{return window!==window.top}catch{return!1}};class m4 extends Pd.exports.EventEmitter{constructor(){super();this._definition={version:_f.V0_3,metaframes:{}},this.getDefinition=this.getDefinition.bind(this)}error(B){throw"Subclass should implement"}getDefinition(){return this._definition}}var y4=globalThis&&globalThis.__awaiter||function(C,B,e,k){function z(l){return l instanceof e?l:new e(function(o){o(l)})}return new(e||(e=Promise))(function(l,o){function c(n){try{t(k.next(n))}catch(a){o(a)}}function p(n){try{t(k.throw(n))}catch(a){o(a)}}function t(n){n.done?l(n.value):z(n.value).then(c,p)}t((k=k.apply(C,B||[])).next())})};const o2=C=>{if(C===null)throw"Metapage definition cannot be null";if(typeof C=="string")try{C=JSON.parse(C)}catch{throw`Cannot parse into JSON:
${C}`}let B;switch(b4(C.version)){case _f.V0_2:{B=o2(x4(C));break}case _f.V0_3:{B=C;break}default:console.warn(`Metapage definition version=${C.version} but we only know up to version ${Ld}. Assuming the definition is compatible, but it's the future!`),B=C;break}return B},x4=C=>(C.version=_f.V0_3,C),Dd=(C,B)=>{if(!B)return!1;let e=!1;return Object.keys(B).forEach(k=>{e=!0,B[k]===void 0?delete C[k]:C[k]=B[k]}),e},b4=C=>{if(C=="latest")return Ld;if(qv.exports.compare(C,"0.2","<"))throw`Unknown version: ${C}`;return qv.exports.compare(C,"0.2",">=")&&qv.exports.compare(C,_f.V0_3,"<")?_f.V0_2:qv.exports.compare(C,"0.3",">=")?_f.V0_3:(console.log(`Could not match version=${C} to any known version, assuming ${Ld}`),Ld)},rm=()=>{const C=new URLSearchParams(window.location.search).get(Rd.mp_debug);return C==="true"||C==="1"},_4=C=>C.filter(e=>new URLSearchParams(window.location.search).has(e)).length>0,w4=(C=8)=>T4(C),s2="abcdefghijklmnopqrstuvwxyz0123456789",T4=(C=8)=>{for(var B="",e=s2.length,k=0;k<C;k++)B+=s2.charAt(Math.floor(Math.random()*e));return B},nm=(C,B,e)=>{B=B||"000",B&&B.trim()==""&&(B=void 0);let k;if(typeof C=="string"?k=C:typeof C=="number"?k=C+"":k=JSON.stringify(C,null,"  "),B&&B.trim()!=""){var z=`color: #${B}`;e&&(z=`${z}; background: #${e}`),k=`%c${k}`,window.console.log(k,z)}else window.console.log(k)},l2=C=>S4(A4(C)),A4=C=>{var B=0;for(let e=0;e<C.length;e++)B=C.charCodeAt(e)+((B<<5)-B);return B},S4=C=>{var B=(C&16777215).toString(16).toUpperCase();return"00000".substring(0,6-B.length)+B},am=()=>document.readyState=="complete"||document.readyState=="interactive",im=()=>y4(void 0,void 0,void 0,function*(){return am()?Promise.resolve():new Promise(C=>{if(am()){C();return}let B=!1;window.addEventListener("load",()=>{B||(B=!0,C())}),setTimeout(()=>{!B&&am()&&(B=!0,C())},200)})});var u2=globalThis&&globalThis.__awaiter||function(C,B,e,k){function z(l){return l instanceof e?l:new e(function(o){o(l)})}return new(e||(e=Promise))(function(l,o){function c(n){try{t(k.next(n))}catch(a){o(a)}}function p(n){try{t(k.throw(n))}catch(a){o(a)}}function t(n){n.done?l(n.value):z(n.value).then(c,p)}t((k=k.apply(C,B||[])).next())})};class f2 extends Pd.exports.EventEmitter{constructor(B,e,k,z,l,o=!1){super();if(this.inputs={},this.outputs={},this._disposables=[],this._rpcListeners=[],this._loaded=!1,this._onLoaded=[],this._sendInputsAfterRegistration=!1,this._plugin=!1,this._cachedEventInputsUpdate={iframeId:void 0,inputs:void 0},this._cachedEventOutputsUpdate={iframeId:null,inputs:null},!e.startsWith("http")){for(;e.startsWith("/");)e=e.substr(1);e=window.location.protocol+"//"+window.location.hostname+(window.location.port&&window.location.port!=""?":"+window.location.port:"")+"/"+e}this.url=e,this._metapage=B;var c=new URL(this.url);o&&c.searchParams.set(Rd.mp_debug,"true"),this.url=c.href,this.id=k,this._debug=o,this._parentId=z,this._color=l2(this.id),this._consoleBackgroundColor=l,this._iframe=document.createElement("iframe"),this._iframe.name=this.id;const p=this;this.iframe=new Promise(t=>{im().then(()=>u2(this,void 0,void 0,function*(){if(p._iframe){const n=yield p.getDefinition();if(!p._iframe)return;(n==null?void 0:n.allow)&&(p._iframe.allow=n.allow),p._iframe.src=this.url,t(p._iframe)}}))}),this.ack=this.ack.bind(this),this.dispose=this.dispose.bind(this),this.getDefinition=this.getDefinition.bind(this),this.getDefinitionUrl=this.getDefinitionUrl.bind(this),this.setPlugin=this.setPlugin.bind(this),this.hasPermissionsDefinition=this.hasPermissionsDefinition.bind(this),this.hasPermissionsState=this.hasPermissionsState.bind(this),this.log=this.log.bind(this),this.logInternal=this.logInternal.bind(this),this.onInput=this.onInput.bind(this),this.onInputs=this.onInputs.bind(this),this.onOutput=this.onOutput.bind(this),this.onOutputs=this.onOutputs.bind(this),this.register=this.register.bind(this),this.registered=this.registered.bind(this),this.sendInputs=this.sendInputs.bind(this),this.sendOrBufferPostMessage=this.sendOrBufferPostMessage.bind(this),this.sendRpc=this.sendRpc.bind(this),this.sendRpcInternal=this.sendRpcInternal.bind(this),this.setInput=this.setInput.bind(this),this.setInputs=this.setInputs.bind(this),this.setMetapage=this.setMetapage.bind(this),this.setOutput=this.setOutput.bind(this),this.setOutputs=this.setOutputs.bind(this),this.setPlugin=this.setPlugin.bind(this),this.addListenerReturnDisposer=this.addListenerReturnDisposer.bind(this),this.isDisposed=this.isDisposed.bind(this)}addListenerReturnDisposer(B,e){return super.addListener(B,e),()=>{super.removeListener(B,e)}}setPlugin(){if(this._loaded)throw"Cannot setPlugin after MetapageIFrameRpcClient already loaded";return this._plugin=!0,this}setMetapage(B){return this._metapage=B,this}hasPermissionsState(){return this._definition!==void 0&&this._definition.inputs!==void 0&&this._definition.inputs[Dc]!==void 0}hasPermissionsDefinition(){return this._definition!==void 0&&this._definition.inputs!==void 0&&this._definition.inputs[Zf]!==void 0}getDefinitionUrl(){var B=new URL(this.url);return B.pathname=B.pathname+(B.pathname.endsWith("/")?"metaframe.json":"/metaframe.json"),B.href}getDefinition(){return u2(this,void 0,void 0,function*(){if(this._definition)return this._definition;var B=this.getDefinitionUrl();try{const e=yield window.fetch(B);if(e.ok){const k=yield e.json();return this._definition=k,this._definition}else this.emit(Ii.Error,`Failed to fetch: ${B}
Status: ${e.status}
Status text: ${e.statusText}`)}catch(e){this.emit(Ii.Error,`Failed to fetch: ${B}
Error: ${e}`)}})}setInput(B,e){console.assert(!!B);var k={};k[B]=e,this.setInputs(k)}setInputs(B){if(this.log({m:"MetapageIFrameRpcClient",inputs:B}),!Dd(this.inputs,B))return this;if(this._loaded||(this._sendInputsAfterRegistration=!0),this._iframe.parentNode&&this._loaded&&this.sendInputs(B),this.emit(Ii.Inputs,this.inputs),this._metapage.listenerCount(Ii.Inputs)>0){var e={};e[this.id]=B,this._metapage.emit(Ii.Inputs,e)}return this}setOutput(B,e){console.assert(!!B);var k={};k[B]=e,this.setOutputs(k)}setOutputs(B){if(!!Dd(this.outputs,B)&&(this.emit(Ii.Outputs,B),this._metapage.listenerCount(Ii.Outputs)>0)){var e={};e[this.id]=this.outputs,this._metapage.emit(Ii.Outputs,e)}}onInputs(B){return this.addListenerReturnDisposer(Ii.Inputs,B)}onInput(B,e){var k=function(z){z.hasOwnProperty(B)&&e(z[B])};return this.addListenerReturnDisposer(Ii.Inputs,k)}onOutputs(B){return this.addListenerReturnDisposer(Ii.Outputs,B)}onOutput(B,e){var k=function(z){z.hasOwnProperty(B)&&e(z[B])};return this.addListenerReturnDisposer(Ii.Outputs,k)}isDisposed(){return this.inputs===void 0}dispose(){for(super.removeAllListeners();this._disposables&&this._disposables.length>0;){const B=this._disposables.pop();B&&B()}this._rpcListeners=void 0,this.inputs=void 0,this.outputs=void 0,this._iframe&&this._iframe.parentNode&&this._iframe.parentNode.removeChild(this._iframe),this._iframe=void 0,this._bufferMessages=void 0,this._bufferTimeout&&(window.clearInterval(this._bufferTimeout),this._bufferTimeout=void 0),this._metapage=void 0}register(){var B={iframeId:this.id,parentId:this._parentId,plugin:this._plugin,state:{inputs:this.inputs},version:i2};this.sendRpcInternal(pc.SetupIframeServerResponse,B)}registered(B){if(this.log({m:"MetapageIFrameRpcClient.registered",inputs:this.inputs}),!this._loaded){if(!B)throw"Cannot register without a version";for(this.version=B,this._loaded=!0;this._onLoaded&&this._onLoaded.length>0;)this._onLoaded.pop()();this._sendInputsAfterRegistration&&this.sendInputs(this.inputs)}}sendInputs(B){this.sendRpc(pc.InputsUpdate,{inputs:B,parentId:this._parentId})}sendRpc(B,e){if(this._iframe.parentNode&&this._loaded)this.sendRpcInternal(B,e);else{this._metapage.error("sending rpc later");const k=this;this._onLoaded.push(()=>{k.sendRpcInternal(B,e)})}}ack(B){if(this.log("\u2692 \u2692 \u2692 calling ack"),this._debug){this.log("\u2692 \u2692 \u2692 sending ack from client to frame");var e={message:B};this.sendRpc(pc.MessageAck,e)}else this.log("\u2692 \u2692 \u2692 NOT sending ack from client to frame since not debug mode")}log(B){!this._debug||this.logInternal(B)}logInternal(B){let e;typeof B=="string"?e=B:typeof B=="string"?e=B+"":e=JSON.stringify(B),nm(`Metapage[${this._parentId}] Metaframe[${this.id}] ${e}`,this._color,this._consoleBackgroundColor)}sendRpcInternal(B,e){const k={id:"_",iframeId:this.id,jsonrpc:"2.0",method:B,params:e,parentId:this._parentId};this._iframe?this.sendOrBufferPostMessage(k):this._metapage.error(`Cannot send to child iframe messageJSON=${JSON.stringify(k).substr(0,200)}`)}sendOrBufferPostMessage(B){if(this._iframe&&this._iframe.contentWindow)this._iframe.contentWindow.postMessage(B,this.url);else if(this._bufferMessages)this._bufferMessages.push(B);else{this._bufferMessages=[B];const e=this;this._bufferTimeout=window.setInterval(function(){e._iframe&&e._iframe.contentWindow&&(e._bufferMessages.forEach(k=>e._iframe.contentWindow.postMessage(k,e.url)),window.clearInterval(e._bufferTimeout),e._bufferTimeout=void 0,e._bufferMessages=void 0)},0)}}}var M4=globalThis&&globalThis.__awaiter||function(C,B,e,k){function z(l){return l instanceof e?l:new e(function(o){o(l)})}return new(e||(e=Promise))(function(l,o){function c(n){try{t(k.next(n))}catch(a){o(a)}}function p(n){try{t(k.throw(n))}catch(a){o(a)}}function t(n){n.done?l(n.value):z(n.value).then(c,p)}t((k=k.apply(C,B||[])).next())})},c2;(function(C){C.all="all",C.delta="delta"})(c2||(c2={}));const h2=()=>({metaframes:{inputs:{},outputs:{}},plugins:{inputs:{},outputs:{}}}),k4="bcbcbc";class wf extends m4{constructor(B){super();this._state=h2(),this._metaframes={},this._plugins={},this._pluginOrder=[],this.debug=rm(),this._internalReceivedMessageCounter=0,this._cachedInputLookupMap={},this._inputMap={},this._id=B&&B.id?B.id:w4(),this._consoleBackgroundColor=B&&B.color?B.color:k4,this.addPipe=this.addPipe.bind(this),this.dispose=this.dispose.bind(this),this.addMetaframe=this.addMetaframe.bind(this),this.addPlugin=this.addPlugin.bind(this),this.getInputsFromOutput=this.getInputsFromOutput.bind(this),this.getMetaframe=this.getMetaframe.bind(this),this.getMetaframeIds=this.getMetaframeIds.bind(this),this.getMetaframeOrPlugin=this.getMetaframeOrPlugin.bind(this),this.getMetaframes=this.getMetaframes.bind(this),this.getPlugin=this.getPlugin.bind(this),this.getPluginIds=this.getPluginIds.bind(this),this.getState=this.getState.bind(this),this.getStateMetaframes=this.getStateMetaframes.bind(this),this.isValidJSONRpcMessage=this.isValidJSONRpcMessage.bind(this),this.log=this.log.bind(this),this.logInternal=this.logInternal.bind(this),this.metaframeIds=this.metaframeIds.bind(this),this.metaframes=this.metaframes.bind(this),this.onMessage=this.onMessage.bind(this),this.pluginIds=this.pluginIds.bind(this),this.plugins=this.plugins.bind(this),this.removeAll=this.removeAll.bind(this),this.removeMetaframe=this.removeMetaframe.bind(this),this.removePlugin=this.removePlugin.bind(this),this.setDebugFromUrlParams=this.setDebugFromUrlParams.bind(this),this.setDefinition=this.setDefinition.bind(this),this.setInput=this.setInput.bind(this),this.setInputs=this.setInputs.bind(this),this.setInputStateOnly=this.setInputStateOnly.bind(this),this.setMetaframeClientInputAndSentClientEvent=this.setMetaframeClientInputAndSentClientEvent.bind(this),this.setOutputStateOnly=this.setOutputStateOnly.bind(this),this.setState=this.setState.bind(this),this.updatePluginsWithDefinition=this.updatePluginsWithDefinition.bind(this),this._emitDefinitionEvent=this._emitDefinitionEvent.bind(this),im().then(()=>{window.addEventListener("message",this.onMessage),this.log("Initialized")})}static from(B,e){if(B==null)throw"Metapage definition cannot be null";if(typeof B=="string")try{B=JSON.parse(B)}catch{throw"Cannot parse into JSON:\n${metaPageDef}"}var k=new wf;return k.setDefinition(B)}addListenerReturnDisposer(B,e){return super.addListener(B,e),()=>{super.removeListener(B,e)}}setDebugFromUrlParams(){return this.debug=_4(["MP_DEBUG","DEBUG","debug","mp_debug"]),this}getState(){return this._state}setState(B){this._state=B,this.getMetaframeIds().forEach(e=>{this.getMetaframe(e).setInputs(this._state.metaframes.inputs[e]),this.getMetaframe(e).setOutputs(this._state.metaframes.outputs[e])}),this.getPluginIds().forEach(e=>{this.getPlugin(e).setInputs(this._state.plugins.inputs[e]),this.getPlugin(e).setOutputs(this._state.plugins.outputs[e])}),this.emit(Ii.State,this._state)}getStateMetaframes(){return this._state.metaframes}getDefinition(){return this._definition}setDefinition(B,e){const k=o2(B);return k.metaframes&&Object.keys(k.metaframes).forEach(z=>{if(k.plugins&&k.plugins.includes(z))throw this.emitErrorMessage(`Plugin with url=${z} matches metaframe. Metaframe ids and plugin urls are not allowed to collide`),`Plugin with url=${z} matches metaframe. Metaframe ids and plugin urls are not allowed to collide`;var l=k.metaframes[z];if(typeof l!="object")throw this.emitErrorMessage(`Metaframe "${z}" is not an object`),`Metaframe "${z}" is not an object`;if(!l.url)throw this.emitErrorMessage(`Metaframe "${z}" missing field: url`),`Metaframe "${z}" missing field: url`}),this._definition=k,Object.keys(this._metaframes).forEach(z=>{(!k.metaframes||!k.metaframes[z])&&this.removeMetaframe(z)}),Object.keys(this._plugins).forEach(z=>{k.plugins&&!k.plugins.includes(z)&&this.removePlugin(z)}),this._pluginOrder=k.plugins?k.plugins:[],e&&(this._state=e),k.metaframes&&Object.keys(k.metaframes).forEach(z=>{if(!this._metaframes.hasOwnProperty(z)){const l=k.metaframes[z];this.addMetaframe(z,l)}}),k.plugins&&k.plugins.forEach(z=>{this._plugins.hasOwnProperty(z)||this.addPlugin(z)}),window.setTimeout(()=>{this._emitDefinitionEvent(),e&&this.emit(Ii.State,this._state)},0),this}_emitDefinitionEvent(){const B={definition:this._definition,metaframes:this._metaframes,plugins:this._plugins};this.emit(Ii.Definition,B)}addPipe(B,e){this._inputMap[B]||(this._inputMap[B]=[]),this._inputMap[B].push(e)}removeMetaframe(B){!this._metaframes[B]||(this._metaframes[B].dispose(),delete this._metaframes[B],delete this._state.metaframes.inputs[B],delete this._state.metaframes.outputs[B],delete this._inputMap[B],Object.keys(this._inputMap).forEach(e=>{var k;const z=this._inputMap[e];let l=0;for(;l<=z.length;)((k=z[l])===null||k===void 0?void 0:k.metaframe)===B?z.splice(l,1):l++}),this._cachedInputLookupMap={})}removePlugin(B){!this._plugins[B]||(this._plugins[B].dispose(),delete this._plugins[B],delete this._state.plugins.inputs[B],delete this._state.plugins.outputs[B])}removeAll(){Object.keys(this._metaframes).forEach(B=>this._metaframes[B].dispose()),Object.keys(this._plugins).forEach(B=>this._plugins[B].dispose()),this._metaframes={},this._plugins={},this._state=h2(),this._inputMap={},this._cachedInputLookupMap={}}metaframes(){return this.getMetaframes()}metaframeIds(){return this.getMetaframeIds()}getMetaframeIds(){return Object.keys(this._metaframes)}getMetaframes(){return Object.assign({},this._metaframes)}plugins(){return Object.assign({},this._plugins)}pluginIds(){return this.getPluginIds()}getPluginIds(){return this._pluginOrder.slice(0)}getMetaframe(B){return this._metaframes[B]}getPlugin(B){return this._plugins[B]}addMetaframe(B,e){if(!B)throw"addMetaframe missing metaframeId";if(!e)throw"addMetaframe missing definition";if(this._metaframes[B])throw this.emitErrorMessage(`Existing metaframe for id=${B}`),`Existing metaframe for id=${B}`;if(!e.url)throw this.emitErrorMessage(`Metaframe definition missing url id=${B}`),`Metaframe definition missing url id=${B}`;var k=new f2(this,e.url,B,this._id,this._consoleBackgroundColor,this.debug).setMetapage(this);return this._metaframes[B]=k,k.addListener(Ii.Error,z=>{this.emit(Ii.Error,{metaframeId:k.id,metaframeUrl:k.url,error:z})}),e.inputs&&e.inputs.forEach(z=>this.addPipe(B,z)),k.setInputs(this._state.metaframes.inputs[B]),k}addPlugin(B){if(!B)throw"Plugin missing url";const e=new f2(this,B,B,this._id,this._consoleBackgroundColor,this.debug).setInputs(this._state.plugins.inputs[B]).setMetapage(this).setPlugin();return C4(this,e),this._plugins[B]=e,e}dispose(){super.removeAllListeners(),window.removeEventListener("message",this.onMessage),this._metaframes&&Object.keys(this._metaframes).forEach(B=>this._metaframes[B].dispose()),this._plugins&&Object.keys(this._plugins).forEach(B=>this._plugins[B].dispose()),this._id=void 0,this._metaframes=void 0,this._plugins=void 0,this._state=void 0,this._cachedInputLookupMap=void 0,this._inputMap=void 0}log(B,e,k){!this.debug||this.logInternal(B,e,k)}error(B){this.logInternal(B,"f00",this._consoleBackgroundColor),this.emitErrorMessage(`${B}`)}emitErrorMessage(B){this.emit(Ii.Error,B)}getInputsFromOutput(B,e){if(this._cachedInputLookupMap[B]||(this._cachedInputLookupMap[B]={}),!this._cachedInputLookupMap[B][e]){var k=[];this._cachedInputLookupMap[B][e]=k,Object.keys(this._inputMap).forEach(z=>{z!==B&&this._inputMap[z].forEach(l=>{if(l.metaframe==B&&r4(e,l.source)){var o=l.target;(!l.target||l.target.startsWith("*")||l.target==="")&&(o=e),k.push({metaframe:z,pipe:o})}})})}return this._cachedInputLookupMap[B][e]}isValidJSONRpcMessage(B){if(B.jsonrpc!=="2.0")return!1;switch(B.method){case Kl.SetupIframeClientRequest:return!0;default:var k=B.iframeId;return!(k&&!(B.parentId===this._id&&(this._metaframes[k]||this._plugins[k])))}}setInput(B,e,k){this.setInputStateOnly(B,e,k),this.setMetaframeClientInputAndSentClientEvent(B,e,k),this.emit(Ii.State,this._state),this.emit(Ii.Inputs,this._state)}setMetaframeClientInputAndSentClientEvent(B,e,k){if(typeof B=="object"){if(e||k)throw"bad arguments, see API docs";const z=B;Object.keys(z).forEach(l=>{var o=l,c=z[o];if(typeof c!="object")throw"bad arguments, see API docs";var p=this._metaframes[o];p?p.setInputs(c):this.error("No iframe id=$metaframeId")})}else if(typeof B=="string"){const z=this._metaframes[B];if(z==null&&this.error(`No iframe id=${B}`),typeof e=="string")z.setInput(e,k);else if(typeof e=="object")z.setInputs(e);else throw"bad arguments, see API docs"}else throw"bad arguments, see API docs"}setInputs(B,e,k){this.setInput(B,e,k)}setOutputStateOnly(B,e,k){this._setStateOnly(!1,B,e,k)}setInputStateOnly(B,e,k){this._setStateOnly(!0,B,e,k)}_setStateOnly(B,e,k,z){if(typeof e=="object"){if(k||z)throw"If first argument is an object, subsequent args should be undefined";const l=e;Object.keys(l).forEach(o=>{var c=l[o];if(typeof c!="object")throw"Object values must be objects";const p=this._metaframes.hasOwnProperty(o);if(!p&&!this._plugins.hasOwnProperty(o))throw"No metaframe or plugin: ${metaframeId}";const t=p?B?this._state.metaframes.inputs:this._state.metaframes.outputs:B?this._state.plugins.inputs:this._state.plugins.outputs;t[o]=t[o]?t[o]:{},Object.keys(c).forEach(n=>{c[n]===void 0?delete t[o][n]:t[o][n]=c[n]})})}else if(typeof e=="string"){const l=e,o=this._metaframes.hasOwnProperty(l);if(!o&&!this._plugins.hasOwnProperty(l))throw`No metaframe or plugin: ${l}`;const c=o?B?this._state.metaframes.inputs:this._state.metaframes.outputs:B?this._state.plugins.inputs:this._state.plugins.outputs;if(typeof k=="string"){c[l]=c[l]?c[l]:{};const p=k;z===void 0?delete c[l][p]:c[l][p]=z}else if(typeof k=="object"){c[l]=c[l]?c[l]:{};const p=k;Object.keys(p).forEach(t=>{p[t]===void 0?delete c[l][t]:c[l][t]=p[t]})}else throw"Second argument must be a string or an object"}else throw"First argument must be a string or an object"}getMetaframeOrPlugin(B){var e=this._metaframes[B];return e||(e=this._plugins[B]),e}onMessage(B){if(typeof B.data=="object"){const o=B.data;if(!this.isValidJSONRpcMessage(o))return;var e=o.method;const c=o.iframeId;if(!c)return;const p=this.getMetaframeOrPlugin(c),t=this._plugins[c];switch(o._messageCount=++this._internalReceivedMessageCounter,this.debug&&this.log(`processing ${JSON.stringify(o,null,"  ").substr(0,500)}`),e){case Kl.SetupIframeClientRequest:p&&p.register();break;case Kl.SetupIframeServerResponseAck:if(p){const a=o.params;p.registered(a.version)}break;case Kl.OutputsUpdate:const n=o.params;if(this._metaframes[c]){var k=this._metaframes[c];this.setOutputStateOnly(c,n),k.setOutputs(n),this.emit(Ii.State,this._state);var z=!1;const a=Object.keys(n),i={};a.forEach((r,f)=>{const u=this.getInputsFromOutput(c,r);u.length>0&&u.forEach(s=>{i[s.metaframe]||(i[s.metaframe]={}),i[s.metaframe][s.pipe]=n[r],this.setInputStateOnly(s.metaframe,s.pipe,n[r]),z=!0})}),Object.keys(i).forEach(r=>{this._metaframes[r].setInputs(i[r])}),z&&this.emit(Ii.State,this._state),this.debug&&k.ack({jsonrpc:o,state:this._state})}else if(this._plugins[c]){const a=!n[Dc]&&!n[Zf];a&&this.setOutputStateOnly(c,n),this._plugins[c].setOutputs(n),a&&this.emit(Ii.State,this._state),this.debug&&this._plugins[c].ack({jsonrpc:o,state:this._state})}else this.error("missing metaframe/plugin=$metaframeId");break;case Kl.InputsUpdate:var l=o.params;if(this.debug&&this.log(`inputs ${JSON.stringify(l)} from ${c}`),this._metaframes[c])this.setInputStateOnly(c,l),this._metaframes[c].setInputs(l),this.emit(Ii.State,this._state),this.debug&&this._metaframes[c].ack({jsonrpc:o,state:this._state});else if(this._plugins[c]){const a=!l[Dc]&&!l[Zf];a&&this.setInputStateOnly(c,l),this._plugins[c].setInputs(l),a&&this.emit(Ii.State,this._state),this.debug&&this._plugins[c].ack({jsonrpc:o,state:this._state})}else console.error(`InputsUpdate failed no metaframe or plugin id: "${c}"`),this.error(`InputsUpdate failed no metaframe or plugin id: "${c}"`);break;case Kl.PluginRequest:t&&p&&p.hasPermissionsState()&&(p.setInput(Dc,this._state),this.debug&&p.ack({jsonrpc:o,state:this._state}));break;case Kl.HashParamsUpdate:if(!t&&p){const a=o.params,i=new URL(p.url);i.hash=a.hash,p.url=i.href,this._definition.metaframes[a.metaframe].url=i.href,this.emit(Ii.UrlHashUpdate,o.params),this._emitDefinitionEvent()}break;default:this.debug&&this.log(`Unknown RPC method: "${e}"`)}this.emit(Ii.Message,o)}}updatePluginsWithDefinition(){this.getDefinition(),Object.values(this._plugins).forEach(B=>{B.hasPermissionsDefinition()&&E4(B)})}logInternal(B,e,k){k=k||this._consoleBackgroundColor;let z;typeof B=="string"?z=B:typeof B=="number"?z=B+"":z=JSON.stringify(B),z=this._id?`Metapage[${this._id}] ${z}`:z,nm(z,e,k)}}wf.version=i2;wf.DEFINITION=Ii.Definition;wf.DEFINITION_UPDATE_REQUEST=Ii.DefinitionUpdateRequest;wf.ERROR=Ii.Error;wf.INPUTS=Ii.Inputs;wf.MESSAGE=Ii.Message;wf.OUTPUTS=Ii.Outputs;wf.STATE=Ii.State;wf.URL_HASH_UPDATE=Ii.UrlHashUpdate;const C4=(C,B)=>M4(void 0,void 0,void 0,function*(){try{const z=yield B.getDefinition();if(!z)throw`${B.url}`;if(B.isDisposed())return;if(B.hasPermissionsDefinition()){var e=C.addListenerReturnDisposer(Ii.Definition,l=>{B.setInput(Zf,l.definition)});B._disposables.push(e);var k=C.getDefinition();if(k&&(B.setInput(Zf,k),z.outputs)){var e=B.onOutput(Zf,o=>{C.emit(Ii.DefinitionUpdateRequest,o)});B._disposables.push(e)}}if(B.hasPermissionsState()&&z.outputs){var e=B.onOutput(Dc,o=>{C.setState(o)});B._disposables.push(e)}}catch(z){console.error(z),C.emit(Ii.Error,`Failed to get plugin definition from "${B.getDefinitionUrl()}", error=${z}`)}}),E4=C=>{const B=C._metapage.getDefinition();C.setInput(Zf,B)};var L4=globalThis&&globalThis.__awaiter||function(C,B,e,k){function z(l){return l instanceof e?l:new e(function(o){o(l)})}return new(e||(e=Promise))(function(l,o){function c(n){try{t(k.next(n))}catch(a){o(a)}}function p(n){try{t(k.throw(n))}catch(a){o(a)}}function t(n){n.done?l(n.value):z(n.value).then(c,p)}t((k=k.apply(C,B||[])).next())})},Ic;(function(C){C.WaitingForPageLoad="WaitingForPageLoad",C.SentSetupIframeClientRequest="SentSetupIframeClientRequest",C.Ready="Ready"})(Ic||(Ic={}));var al;(function(C){C.Connected="connected",C.Error="error",C.Input="input",C.Inputs="inputs",C.Message="message"})(al||(al={}));class Kf extends Pd.exports.EventEmitter{constructor(B){super();if(this._inputPipeValues={},this._outputPipeValues={},this._state=Ic.WaitingForPageLoad,this._messageSendCount=0,this.debug=rm(),this.id=window.name,this.debug=rm(),this._isIframe=g4(),this.addListener=this.addListener.bind(this),this.dispose=this.dispose.bind(this),this.error=this.error.bind(this),this.getInput=this.getInput.bind(this),this.getInputs=this.getInputs.bind(this),this.getOutput=this.getOutput.bind(this),this.getOutputs=this.getOutputs.bind(this),this.log=this.log.bind(this),this.logInternal=this.logInternal.bind(this),this.onInput=this.onInput.bind(this),this.onInputs=this.onInputs.bind(this),this.onMessage=this.onMessage.bind(this),this.sendRpc=this.sendRpc.bind(this),this.setInput=this.setInput.bind(this),this.setInputs=this.setInputs.bind(this),this.setInternalInputsAndNotify=this.setInternalInputsAndNotify.bind(this),this.setOutput=this.setOutput.bind(this),this.setOutputs=this.setOutputs.bind(this),this.warn=this.warn.bind(this),this._resolveSetupIframeServerResponse=this._resolveSetupIframeServerResponse.bind(this),this.addListenerReturnDisposer=this.addListenerReturnDisposer.bind(this),this.connected=this.connected.bind(this),this.disableNotifyOnHashUrlChange=this.disableNotifyOnHashUrlChange.bind(this),this._onHashUrlChange=this._onHashUrlChange.bind(this),!this._isIframe){this.log("Not an iframe, metaframe code disabled");return}const e=this;im().then(()=>{this.log("pageLoaded"),window.addEventListener("message",this.onMessage),e.sendRpc(Kl.SetupIframeClientRequest,{version:Kf.version}),e._state=Ic.SentSetupIframeClientRequest}),(B==null?void 0:B.disableHashChangeEvent)||window.addEventListener("hashchange",this._onHashUrlChange)}_resolveSetupIframeServerResponse(B){if(this._state===Ic.WaitingForPageLoad)throw"Got message but page has not finished loading, we should never get in this state";this._parentId?this.log("Got JsonRpcMethods.SetupIframeServerResponse but already resolved"):(this._parentVersion=B.version,this.color=l2(this.id),this._parentId=B.parentId,this.log(`metapage[${this._parentId}](v${this._parentVersion?this._parentVersion:"unknown"}) registered`),this._inputPipeValues=B.state&&B.state.inputs?B.state.inputs:this._inputPipeValues,this._state=Ic.Ready,this.sendRpc(Kl.SetupIframeServerResponseAck,{version:Kf.version}),this._inputPipeValues&&Object.keys(this._inputPipeValues).length>0&&(this.emit(al.Inputs,this._inputPipeValues),Object.keys(this._inputPipeValues).forEach(e=>this.emit(al.Input,e,this._inputPipeValues[e]))),this.emit(al.Inputs,this._inputPipeValues),B.plugin&&(this.plugin=new P4(this)),this.emit(al.Connected))}connected(){return L4(this,void 0,void 0,function*(){if(this._state!==Ic.Ready)return new Promise((B,e)=>{let k;k=this.addListenerReturnDisposer(al.Connected,()=>{B(),k()})})})}addListenerReturnDisposer(B,e){return super.addListener(B,e),()=>{super.removeListener(B,e)}}log(B,e,k){!this.debug||this.logInternal(B,e||this.color)}warn(B){!this.debug||this.logInternal(B,"000",this.color)}error(B){this.logInternal(B,this.color,"f00")}logInternal(B,e,k){let z;typeof B=="string"?z=B:typeof B=="number"?z=B+"":z=JSON.stringify(B),e=e&&e+"",z=(this.id?`Metaframe[${this.id}] `:"")+`${z}`,nm(z,e,k)}dispose(){super.removeAllListeners(),window.removeEventListener("message",this.onMessage),this.disableNotifyOnHashUrlChange(),this._inputPipeValues=void 0,this._outputPipeValues=void 0}addListener(B,e){return super.addListener(B,e),B===al.Inputs&&window.setTimeout(()=>{this._inputPipeValues&&e(this._inputPipeValues)},0),this}onInput(B,e){return this.addListenerReturnDisposer(al.Input,(k,z)=>{B===k&&e(z)})}onInputs(B){return this.addListenerReturnDisposer(al.Inputs,B)}setInput(B,e){var k={};k[B]=e,this.setInputs(k)}setInputs(B){this.sendRpc(Kl.InputsUpdate,B)}setInternalInputsAndNotify(B){!Dd(this._inputPipeValues,B)||(Object.keys(B).forEach(e=>this.emit(al.Input,e,B[e])),this.emit(al.Inputs,B))}getInput(B){return console.assert(!!B),this._inputPipeValues[B]}getInputs(){return this._inputPipeValues}getOutput(B){return console.assert(!!B),this._outputPipeValues[B]}setOutput(B,e){console.assert(!!B);var k={};k[B]=e,this.setOutputs(k)}setOutputs(B){!Dd(this._outputPipeValues,B)||this.sendRpc(Kl.OutputsUpdate,B)}getOutputs(){return this._outputPipeValues}disableNotifyOnHashUrlChange(){window.removeEventListener("hashchange",this._onHashUrlChange)}_onHashUrlChange(B){const e={hash:window.location.hash,metaframe:this.id};this.sendRpc(Kl.HashParamsUpdate,e)}sendRpc(B,e){if(this._isIframe){const k={jsonrpc:"2.0",id:++this._messageSendCount,method:B,params:e,iframeId:this.id,parentId:this._parentId};window.parent.postMessage(k,"*")}else this.log("Cannot send JSON-RPC window message: there is no window.parent which means we are not an iframe")}onMessage(B){if(typeof B.data=="object"){let k=B.data;if(k.jsonrpc==="2.0"){var e=k.method;if(!(e==pc.SetupIframeServerResponse||k.parentId==this._parentId&&k.iframeId==this.id)){this.error(`window.message: received message but jsonrpc.parentId=${k.parentId} _parentId=${this._parentId} jsonrpc.iframeId=${k.iframeId} id=${this.id}`);return}switch(e){case pc.SetupIframeServerResponse:this._resolveSetupIframeServerResponse(k.params);break;case pc.InputsUpdate:if(this._state!==Ic.Ready)throw"Got InputsUpdate but metaframe is not MetaframeLoadingState.Ready";this.setInternalInputsAndNotify(k.params.inputs);break;case pc.MessageAck:this.debug&&this.log(`ACK: ${JSON.stringify(k)}`);break;default:this.debug&&this.log(`window.message: unknown JSON-RPC method: ${JSON.stringify(k)}`);break}this.emit(al.Message,k)}}}}Kf.version=d4;Kf.ERROR=al.Error;Kf.CONNECTED=al.Connected;Kf.INPUT=al.Input;Kf.INPUTS=al.Inputs;Kf.MESSAGE=al.Message;class P4{constructor(B){this._metaframe=B,this.requestState=this.requestState.bind(this),this.onState=this.onState.bind(this),this.getState=this.getState.bind(this),this.setState=this.setState.bind(this),this.onDefinition=this.onDefinition.bind(this),this.getDefinition=this.getDefinition.bind(this),this.setDefinition=this.setDefinition.bind(this)}requestState(){var B={method:tm.State};this._metaframe.sendRpc(Kl.PluginRequest,B)}onState(B){const e=this._metaframe.onInput(Dc,B);return this.getState()&&B(this.getState()),e}getState(){return this._metaframe.getInput(Dc)}setState(B){this._metaframe.setOutput(Dc,B)}onDefinition(B){var e=this._metaframe.onInput(Zf,B);return this.getDefinition()&&B(this.getDefinition()),e}setDefinition(B){this._metaframe.setOutput(Zf,B)}getDefinition(){return this._metaframe.getInput(Zf)}}const OB=()=>{try{return window!==window.top}catch{return!1}},R4={inputs:{}},D4={},v2=rl(D4);rl(R4);const BB=()=>wo(v2),NB=C=>{const[B,e]=Us({}),[k,z]=Us(void 0);return _o(()=>{const l=new Kf;return z(l),()=>{l.dispose()}},[z]),_o(()=>{k&&e({metaframe:k})},[k]),nh.createElement(v2.Provider,{value:B},C.children)};function I4(C){if(C.sheet)return C.sheet;for(var B=0;B<document.styleSheets.length;B++)if(document.styleSheets[B].ownerNode===C)return document.styleSheets[B]}function F4(C){var B=document.createElement("style");return B.setAttribute("data-emotion",C.key),C.nonce!==void 0&&B.setAttribute("nonce",C.nonce),B.appendChild(document.createTextNode("")),B.setAttribute("data-s",""),B}var p2=function(){function C(e){var k=this;this._insertTag=function(z){var l;k.tags.length===0?l=k.prepend?k.container.firstChild:k.before:l=k.tags[k.tags.length-1].nextSibling,k.container.insertBefore(z,l),k.tags.push(z)},this.isSpeedy=e.speedy===void 0?!0:e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.before=null}var B=C.prototype;return B.hydrate=function(k){k.forEach(this._insertTag)},B.insert=function(k){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(F4(this));var z=this.tags[this.tags.length-1];if(this.isSpeedy){var l=I4(z);try{l.insertRule(k,l.cssRules.length)}catch{}}else z.appendChild(document.createTextNode(k));this.ctr++},B.flush=function(){this.tags.forEach(function(k){return k.parentNode&&k.parentNode.removeChild(k)}),this.tags=[],this.ctr=0},C}(),zl="-ms-",Id="-moz-",uo="-webkit-",d2="comm",om="rule",sm="decl",z4="@import",O4="@keyframes",B4=Math.abs,Fd=String.fromCharCode;function N4(C,B){return(((B<<2^vu(C,0))<<2^vu(C,1))<<2^vu(C,2))<<2^vu(C,3)}function g2(C){return C.trim()}function U4(C,B){return(C=B.exec(C))?C[0]:C}function To(C,B,e){return C.replace(B,e)}function m2(C,B){return C.indexOf(B)}function vu(C,B){return C.charCodeAt(B)|0}function ep(C,B,e){return C.slice(B,e)}function Jf(C){return C.length}function lm(C){return C.length}function zd(C,B){return B.push(C),C}function V4(C,B){return C.map(B).join("")}var Od=1,qh=1,y2=0,pu=0,Ps=0,ev="";function Bd(C,B,e,k,z,l,o){return{value:C,root:B,parent:e,type:k,props:z,children:l,line:Od,column:qh,length:o,return:""}}function tp(C,B,e){return Bd(C,B.root,B.parent,e,B.props,B.children,0)}function H4(){return Ps}function G4(){return Ps=pu>0?vu(ev,--pu):0,qh--,Ps===10&&(qh=1,Od--),Ps}function Ru(){return Ps=pu<y2?vu(ev,pu++):0,qh++,Ps===10&&(qh=1,Od++),Ps}function $f(){return vu(ev,pu)}function Nd(){return pu}function rp(C,B){return ep(ev,C,B)}function np(C){switch(C){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function x2(C){return Od=qh=1,y2=Jf(ev=C),pu=0,[]}function b2(C){return ev="",C}function um(C){return g2(rp(pu-1,fm(C===91?C+2:C===40?C+1:C)))}function W4(C){for(;(Ps=$f())&&Ps<33;)Ru();return np(C)>2||np(Ps)>3?"":" "}function Y4(C,B){for(;--B&&Ru()&&!(Ps<48||Ps>102||Ps>57&&Ps<65||Ps>70&&Ps<97););return rp(C,Nd()+(B<6&&$f()==32&&Ru()==32))}function fm(C){for(;Ru();)switch(Ps){case C:return pu;case 34:case 39:return fm(C===34||C===39?C:Ps);case 40:C===41&&fm(C);break;case 92:Ru();break}return pu}function j4(C,B){for(;Ru()&&C+Ps!==47+10;)if(C+Ps===42+42&&$f()===47)break;return"/*"+rp(B,pu-1)+"*"+Fd(C===47?C:Ru())}function X4(C){for(;!np($f());)Ru();return rp(C,pu)}function Z4(C){return b2(Ud("",null,null,null,[""],C=x2(C),0,[0],C))}function Ud(C,B,e,k,z,l,o,c,p){for(var t=0,n=0,a=o,i=0,r=0,f=0,u=1,s=1,h=1,d=0,y="",m=z,g=l,x=k,A=y;s;)switch(f=d,d=Ru()){case 34:case 39:case 91:case 40:A+=um(d);break;case 9:case 10:case 13:case 32:A+=W4(f);break;case 92:A+=Y4(Nd()-1,7);continue;case 47:switch($f()){case 42:case 47:zd(K4(j4(Ru(),Nd()),B,e),p);break;default:A+="/"}break;case 123*u:c[t++]=Jf(A)*h;case 125*u:case 59:case 0:switch(d){case 0:case 125:s=0;case 59+n:r>0&&Jf(A)-a&&zd(r>32?w2(A+";",k,e,a-1):w2(To(A," ","")+";",k,e,a-2),p);break;case 59:A+=";";default:if(zd(x=_2(A,B,e,t,n,z,c,y,m=[],g=[],a),l),d===123)if(n===0)Ud(A,B,x,x,m,l,a,c,g);else switch(i){case 100:case 109:case 115:Ud(C,x,x,k&&zd(_2(C,x,x,0,0,z,c,y,z,m=[],a),g),z,g,a,c,k?m:g);break;default:Ud(A,x,x,x,[""],g,a,c,g)}}t=n=r=0,u=h=1,y=A="",a=o;break;case 58:a=1+Jf(A),r=f;default:if(u<1){if(d==123)--u;else if(d==125&&u++==0&&G4()==125)continue}switch(A+=Fd(d),d*u){case 38:h=n>0?1:(A+="\f",-1);break;case 44:c[t++]=(Jf(A)-1)*h,h=1;break;case 64:$f()===45&&(A+=um(Ru())),i=$f(),n=Jf(y=A+=X4(Nd())),d++;break;case 45:f===45&&Jf(A)==2&&(u=0)}}return l}function _2(C,B,e,k,z,l,o,c,p,t,n){for(var a=z-1,i=z===0?l:[""],r=lm(i),f=0,u=0,s=0;f<k;++f)for(var h=0,d=ep(C,a+1,a=B4(u=o[f])),y=C;h<r;++h)(y=g2(u>0?i[h]+" "+d:To(d,/&\f/g,i[h])))&&(p[s++]=y);return Bd(C,B,e,z===0?om:c,p,t,n)}function K4(C,B,e){return Bd(C,B,e,d2,Fd(H4()),ep(C,2,-2),0)}function w2(C,B,e,k){return Bd(C,B,e,sm,ep(C,0,k),ep(C,k+1,-1),k)}function T2(C,B){switch(N4(C,B)){case 5103:return uo+"print-"+C+C;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return uo+C+C;case 5349:case 4246:case 4810:case 6968:case 2756:return uo+C+Id+C+zl+C+C;case 6828:case 4268:return uo+C+zl+C+C;case 6165:return uo+C+zl+"flex-"+C+C;case 5187:return uo+C+To(C,/(\w+).+(:[^]+)/,uo+"box-$1$2"+zl+"flex-$1$2")+C;case 5443:return uo+C+zl+"flex-item-"+To(C,/flex-|-self/,"")+C;case 4675:return uo+C+zl+"flex-line-pack"+To(C,/align-content|flex-|-self/,"")+C;case 5548:return uo+C+zl+To(C,"shrink","negative")+C;case 5292:return uo+C+zl+To(C,"basis","preferred-size")+C;case 6060:return uo+"box-"+To(C,"-grow","")+uo+C+zl+To(C,"grow","positive")+C;case 4554:return uo+To(C,/([^-])(transform)/g,"$1"+uo+"$2")+C;case 6187:return To(To(To(C,/(zoom-|grab)/,uo+"$1"),/(image-set)/,uo+"$1"),C,"")+C;case 5495:case 3959:return To(C,/(image-set\([^]*)/,uo+"$1$`$1");case 4968:return To(To(C,/(.+:)(flex-)?(.*)/,uo+"box-pack:$3"+zl+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+uo+C+C;case 4095:case 3583:case 4068:case 2532:return To(C,/(.+)-inline(.+)/,uo+"$1$2")+C;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Jf(C)-1-B>6)switch(vu(C,B+1)){case 109:if(vu(C,B+4)!==45)break;case 102:return To(C,/(.+:)(.+)-([^]+)/,"$1"+uo+"$2-$3$1"+Id+(vu(C,B+3)==108?"$3":"$2-$3"))+C;case 115:return~m2(C,"stretch")?T2(To(C,"stretch","fill-available"),B)+C:C}break;case 4949:if(vu(C,B+1)!==115)break;case 6444:switch(vu(C,Jf(C)-3-(~m2(C,"!important")&&10))){case 107:return To(C,":",":"+uo)+C;case 101:return To(C,/(.+:)([^;!]+)(;|!.+)?/,"$1"+uo+(vu(C,14)===45?"inline-":"")+"box$3$1"+uo+"$2$3$1"+zl+"$2box$3")+C}break;case 5936:switch(vu(C,B+11)){case 114:return uo+C+zl+To(C,/[svh]\w+-[tblr]{2}/,"tb")+C;case 108:return uo+C+zl+To(C,/[svh]\w+-[tblr]{2}/,"tb-rl")+C;case 45:return uo+C+zl+To(C,/[svh]\w+-[tblr]{2}/,"lr")+C}return uo+C+zl+C+C}return C}function ap(C,B){for(var e="",k=lm(C),z=0;z<k;z++)e+=B(C[z],z,C,B)||"";return e}function J4(C,B,e,k){switch(C.type){case z4:case sm:return C.return=C.return||C.value;case d2:return"";case om:C.value=C.props.join(",")}return Jf(e=ap(C.children,k))?C.return=C.value+"{"+e+"}":""}function $4(C){var B=lm(C);return function(e,k,z,l){for(var o="",c=0;c<B;c++)o+=C[c](e,k,z,l)||"";return o}}function Q4(C){return function(B){B.root||(B=B.return)&&C(B)}}function q4(C,B,e,k){if(!C.return)switch(C.type){case sm:C.return=T2(C.value,C.length);break;case O4:return ap([tp(To(C.value,"@","@"+uo),C,"")],k);case om:if(C.length)return V4(C.props,function(z){switch(U4(z,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ap([tp(To(z,/:(read-\w+)/,":"+Id+"$1"),C,"")],k);case"::placeholder":return ap([tp(To(z,/:(plac\w+)/,":"+uo+"input-$1"),C,""),tp(To(z,/:(plac\w+)/,":"+Id+"$1"),C,""),tp(To(z,/:(plac\w+)/,zl+"input-$1"),C,"")],k)}return""})}}var A2=function(B){var e=new WeakMap;return function(k){if(e.has(k))return e.get(k);var z=B(k);return e.set(k,z),z}};function S2(C){var B=Object.create(null);return function(e){return B[e]===void 0&&(B[e]=C(e)),B[e]}}var ek=function(B,e,k){for(var z=0,l=0;z=l,l=$f(),z===38&&l===12&&(e[k]=1),!np(l);)Ru();return rp(B,pu)},tk=function(B,e){var k=-1,z=44;do switch(np(z)){case 0:z===38&&$f()===12&&(e[k]=1),B[k]+=ek(pu-1,e,k);break;case 2:B[k]+=um(z);break;case 4:if(z===44){B[++k]=$f()===58?"&\f":"",e[k]=B[k].length;break}default:B[k]+=Fd(z)}while(z=Ru());return B},rk=function(B,e){return b2(tk(x2(B),e))},M2=new WeakMap,nk=function(B){if(!(B.type!=="rule"||!B.parent||!B.length)){for(var e=B.value,k=B.parent,z=B.column===k.column&&B.line===k.line;k.type!=="rule";)if(k=k.parent,!k)return;if(!(B.props.length===1&&e.charCodeAt(0)!==58&&!M2.get(k))&&!z){M2.set(B,!0);for(var l=[],o=rk(e,l),c=k.props,p=0,t=0;p<o.length;p++)for(var n=0;n<c.length;n++,t++)B.props[t]=l[p]?o[p].replace(/&\f/g,c[n]):c[n]+" "+o[p]}}},ak=function(B){if(B.type==="decl"){var e=B.value;e.charCodeAt(0)===108&&e.charCodeAt(2)===98&&(B.return="",B.value="")}},ik=[q4],ok=function(B){var e=B.key;if(e==="css"){var k=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(k,function(u){var s=u.getAttribute("data-emotion");s.indexOf(" ")!==-1&&(document.head.appendChild(u),u.setAttribute("data-s",""))})}var z=B.stylisPlugins||ik,l={},o,c=[];o=B.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),function(u){for(var s=u.getAttribute("data-emotion").split(" "),h=1;h<s.length;h++)l[s[h]]=!0;c.push(u)});var p,t=[nk,ak];{var n,a=[J4,Q4(function(u){n.insert(u)})],i=$4(t.concat(z,a)),r=function(s){return ap(Z4(s),i)};p=function(s,h,d,y){n=d,r(s?s+"{"+h.styles+"}":h.styles),y&&(f.inserted[h.name]=!0)}}var f={key:e,sheet:new p2({key:e,container:o,nonce:B.nonce,speedy:B.speedy,prepend:B.prepend}),nonce:B.nonce,inserted:l,registered:{},insert:p};return f.sheet.hydrate(c),f};function ah(){return ah=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},ah.apply(this,arguments)}var k2={exports:{}},Ao={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var il=typeof Symbol=="function"&&Symbol.for,cm=il?Symbol.for("react.element"):60103,hm=il?Symbol.for("react.portal"):60106,Vd=il?Symbol.for("react.fragment"):60107,Hd=il?Symbol.for("react.strict_mode"):60108,Gd=il?Symbol.for("react.profiler"):60114,Wd=il?Symbol.for("react.provider"):60109,Yd=il?Symbol.for("react.context"):60110,vm=il?Symbol.for("react.async_mode"):60111,jd=il?Symbol.for("react.concurrent_mode"):60111,Xd=il?Symbol.for("react.forward_ref"):60112,Zd=il?Symbol.for("react.suspense"):60113,sk=il?Symbol.for("react.suspense_list"):60120,Kd=il?Symbol.for("react.memo"):60115,Jd=il?Symbol.for("react.lazy"):60116,lk=il?Symbol.for("react.block"):60121,uk=il?Symbol.for("react.fundamental"):60117,fk=il?Symbol.for("react.responder"):60118,ck=il?Symbol.for("react.scope"):60119;function Du(C){if(typeof C=="object"&&C!==null){var B=C.$$typeof;switch(B){case cm:switch(C=C.type,C){case vm:case jd:case Vd:case Gd:case Hd:case Zd:return C;default:switch(C=C&&C.$$typeof,C){case Yd:case Xd:case Jd:case Kd:case Wd:return C;default:return B}}case hm:return B}}}function C2(C){return Du(C)===jd}Ao.AsyncMode=vm;Ao.ConcurrentMode=jd;Ao.ContextConsumer=Yd;Ao.ContextProvider=Wd;Ao.Element=cm;Ao.ForwardRef=Xd;Ao.Fragment=Vd;Ao.Lazy=Jd;Ao.Memo=Kd;Ao.Portal=hm;Ao.Profiler=Gd;Ao.StrictMode=Hd;Ao.Suspense=Zd;Ao.isAsyncMode=function(C){return C2(C)||Du(C)===vm};Ao.isConcurrentMode=C2;Ao.isContextConsumer=function(C){return Du(C)===Yd};Ao.isContextProvider=function(C){return Du(C)===Wd};Ao.isElement=function(C){return typeof C=="object"&&C!==null&&C.$$typeof===cm};Ao.isForwardRef=function(C){return Du(C)===Xd};Ao.isFragment=function(C){return Du(C)===Vd};Ao.isLazy=function(C){return Du(C)===Jd};Ao.isMemo=function(C){return Du(C)===Kd};Ao.isPortal=function(C){return Du(C)===hm};Ao.isProfiler=function(C){return Du(C)===Gd};Ao.isStrictMode=function(C){return Du(C)===Hd};Ao.isSuspense=function(C){return Du(C)===Zd};Ao.isValidElementType=function(C){return typeof C=="string"||typeof C=="function"||C===Vd||C===jd||C===Gd||C===Hd||C===Zd||C===sk||typeof C=="object"&&C!==null&&(C.$$typeof===Jd||C.$$typeof===Kd||C.$$typeof===Wd||C.$$typeof===Yd||C.$$typeof===Xd||C.$$typeof===uk||C.$$typeof===fk||C.$$typeof===ck||C.$$typeof===lk)};Ao.typeOf=Du;k2.exports=Ao;var E2=k2.exports,hk={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},vk={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},L2={};L2[E2.ForwardRef]=hk;L2[E2.Memo]=vk;var pk=!0;function dk(C,B,e){var k="";return e.split(" ").forEach(function(z){C[z]!==void 0?B.push(C[z]+";"):k+=z+" "}),k}var P2=function(B,e,k){var z=B.key+"-"+e.name;if((k===!1||pk===!1)&&B.registered[z]===void 0&&(B.registered[z]=e.styles),B.inserted[e.name]===void 0){var l=e;do B.insert(e===l?"."+z:"",l,B.sheet,!0),l=l.next;while(l!==void 0)}};function gk(C){for(var B=0,e,k=0,z=C.length;z>=4;++k,z-=4)e=C.charCodeAt(k)&255|(C.charCodeAt(++k)&255)<<8|(C.charCodeAt(++k)&255)<<16|(C.charCodeAt(++k)&255)<<24,e=(e&65535)*1540483477+((e>>>16)*59797<<16),e^=e>>>24,B=(e&65535)*1540483477+((e>>>16)*59797<<16)^(B&65535)*1540483477+((B>>>16)*59797<<16);switch(z){case 3:B^=(C.charCodeAt(k+2)&255)<<16;case 2:B^=(C.charCodeAt(k+1)&255)<<8;case 1:B^=C.charCodeAt(k)&255,B=(B&65535)*1540483477+((B>>>16)*59797<<16)}return B^=B>>>13,B=(B&65535)*1540483477+((B>>>16)*59797<<16),((B^B>>>15)>>>0).toString(36)}var mk={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},yk=/[A-Z]|^ms/g,xk=/_EMO_([^_]+?)_([^]*?)_EMO_/g,R2=function(B){return B.charCodeAt(1)===45},D2=function(B){return B!=null&&typeof B!="boolean"},pm=S2(function(C){return R2(C)?C:C.replace(yk,"-$&").toLowerCase()}),I2=function(B,e){switch(B){case"animation":case"animationName":if(typeof e=="string")return e.replace(xk,function(k,z,l){return Qf={name:z,styles:l,next:Qf},z})}return mk[B]!==1&&!R2(B)&&typeof e=="number"&&e!==0?e+"px":e};function ip(C,B,e){if(e==null)return"";if(e.__emotion_styles!==void 0)return e;switch(typeof e){case"boolean":return"";case"object":{if(e.anim===1)return Qf={name:e.name,styles:e.styles,next:Qf},e.name;if(e.styles!==void 0){var k=e.next;if(k!==void 0)for(;k!==void 0;)Qf={name:k.name,styles:k.styles,next:Qf},k=k.next;var z=e.styles+";";return z}return bk(C,B,e)}case"function":{if(C!==void 0){var l=Qf,o=e(C);return Qf=l,ip(C,B,o)}break}}if(B==null)return e;var c=B[e];return c!==void 0?c:e}function bk(C,B,e){var k="";if(Array.isArray(e))for(var z=0;z<e.length;z++)k+=ip(C,B,e[z])+";";else for(var l in e){var o=e[l];if(typeof o!="object")B!=null&&B[o]!==void 0?k+=l+"{"+B[o]+"}":D2(o)&&(k+=pm(l)+":"+I2(l,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(B==null||B[o[0]]===void 0))for(var c=0;c<o.length;c++)D2(o[c])&&(k+=pm(l)+":"+I2(l,o[c])+";");else{var p=ip(C,B,o);switch(l){case"animation":case"animationName":{k+=pm(l)+":"+p+";";break}default:k+=l+"{"+p+"}"}}}return k}var F2=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Qf,dm=function(B,e,k){if(B.length===1&&typeof B[0]=="object"&&B[0]!==null&&B[0].styles!==void 0)return B[0];var z=!0,l="";Qf=void 0;var o=B[0];o==null||o.raw===void 0?(z=!1,l+=ip(k,e,o)):l+=o[0];for(var c=1;c<B.length;c++)l+=ip(k,e,B[c]),z&&(l+=o[c]);F2.lastIndex=0;for(var p="",t;(t=F2.exec(l))!==null;)p+="-"+t[1];var n=gk(l)+p;return{name:n,styles:l,next:Qf}},z2=rl(typeof HTMLElement!="undefined"?ok({key:"css"}):null);z2.Provider;var O2=function(B){return Xf(function(e,k){var z=wo(z2);return B(e,z,k)})},op=rl({}),_k=function(B,e){if(typeof e=="function"){var k=e(B);return k}return ah({},B,e)},wk=A2(function(C){return A2(function(B){return _k(C,B)})}),Tk=function(B){var e=wo(op);return B.theme!==e&&(e=wk(e)(B.theme)),pa(op.Provider,{value:e},B.children)},gm=O2(function(C,B){var e=C.styles,k=dm([e],void 0,wo(op)),z=Eo();return rh(function(){var l=B.key+"-global",o=new p2({key:l,nonce:B.sheet.nonce,container:B.sheet.container,speedy:B.sheet.isSpeedy}),c=!1,p=document.querySelector('style[data-emotion="'+l+" "+k.name+'"]');return B.sheet.tags.length&&(o.before=B.sheet.tags[0]),p!==null&&(c=!0,p.setAttribute("data-emotion",l),o.hydrate([p])),z.current=[o,c],function(){o.flush()}},[B]),rh(function(){var l=z.current,o=l[0],c=l[1];if(c){l[1]=!1;return}if(k.next!==void 0&&P2(B,k.next,!0),o.tags.length){var p=o.tags[o.tags.length-1].nextElementSibling;o.before=p,o.flush()}B.insert("",k,o,!1)},[B,k.name]),null});function Ak(){for(var C=arguments.length,B=new Array(C),e=0;e<C;e++)B[e]=arguments[e];return dm(B)}var B2=function(){var B=Ak.apply(void 0,arguments),e="animation-"+B.name;return{name:e,styles:"@keyframes "+e+"{"+B.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},Sk=()=>pa(gm,{styles:`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;      
        -moz-osx-font-smoothing: grayscale; 
        touch-action: manipulation; 
      }

      body {
        position: relative;
        min-height: 100%;
        font-feature-settings: 'kern';
      }

      *,
      *::before,
      *::after {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
      }

      main {
        display: block;
      }

      hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      pre,
      code,
      kbd,
      samp {
        font-family: SFMono-Regular,  Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      b,
      strong {
        font-weight: bold;
      }

      small {
        font-size: 80%;
      }

      sub,
      sup {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      sub {
        bottom: -0.25em;
      }

      sup {
        top: -0.5em;
      }

      img {
        border-style: none;
      }

      button,
      input,
      optgroup,
      select,
      textarea {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      button,
      input {
        overflow: visible;
      }

      button,
      select {
        text-transform: none;
      }

      button::-moz-focus-inner,
      [type="button"]::-moz-focus-inner,
      [type="reset"]::-moz-focus-inner,
      [type="submit"]::-moz-focus-inner {
        border-style: none;
        padding: 0;
      }

      fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      progress {
        vertical-align: baseline;
      }

      textarea {
        overflow: auto;
      }

      [type="checkbox"],
      [type="radio"] {
        box-sizing: border-box;
        padding: 0;
      }

      [type="number"]::-webkit-inner-spin-button,
      [type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      input[type="number"] {
        -moz-appearance: textfield;
      }

      [type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      [type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      details {
        display: block;
      }

      summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      body,
      blockquote,
      dl,
      dd,
      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      hr,
      figure,
      p,
      pre {
        margin: 0;
      }

      button {
        background: transparent;
        padding: 0;
      }

      fieldset {
        margin: 0;
        padding: 0;
      }

      ol,
      ul {
        margin: 0;
        padding: 0;
      }

      textarea {
        resize: vertical;
      }

      button,
      [role="button"] {
        cursor: pointer;
      }

      button::-moz-focus-inner {
        border: 0 !important;
      }

      table {
        border-collapse: collapse;
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-size: inherit;
        font-weight: inherit;
      }

      button,
      input,
      optgroup,
      select,
      textarea {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      img,
      svg,
      video,
      canvas,
      audio,
      iframe,
      embed,
      object {
        display: block;
        vertical-align: middle;
      }

      img,
      video {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible] :focus:not([data-focus-visible-added]) {
        outline: none;
        box-shadow: none;
      }

      select::-ms-expand {
        display: none;
      }
    `}),Mk=Sk;function kk(C){var B=C==null?0:C.length;return B?C[B-1]:void 0}function ih(C){return typeof C=="number"}function N2(C){return Array.isArray(C)}function U2(C){return typeof C=="function"}function qf(C){var B=typeof C;return C!=null&&(B==="object"||B==="function")&&!N2(C)}function Ck(C){return qf(C)&&Object.keys(C).length===0}function mm(C){return Object.prototype.toString.call(C)==="[object String]"}function V2(C){return/^var\(--.+\)$/.test(C)}var $d=!1,ym={exports:{}};(function(C,B){var e=200,k="__lodash_hash_undefined__",z=800,l=16,o=9007199254740991,c="[object Arguments]",p="[object Array]",t="[object AsyncFunction]",n="[object Boolean]",a="[object Date]",i="[object Error]",r="[object Function]",f="[object GeneratorFunction]",u="[object Map]",s="[object Number]",h="[object Null]",d="[object Object]",y="[object Proxy]",m="[object RegExp]",g="[object Set]",x="[object String]",A="[object Undefined]",b="[object WeakMap]",S="[object ArrayBuffer]",w="[object DataView]",T="[object Float32Array]",_="[object Float64Array]",v="[object Int8Array]",P="[object Int16Array]",M="[object Int32Array]",E="[object Uint8Array]",D="[object Uint8ClampedArray]",N="[object Uint16Array]",O="[object Uint32Array]",I=/[\\^$.*+?()[\]{}|]/g,F=/^\[object .+?Constructor\]$/,V=/^(?:0|[1-9]\d*)$/,U={};U[T]=U[_]=U[v]=U[P]=U[M]=U[E]=U[D]=U[N]=U[O]=!0,U[c]=U[p]=U[S]=U[n]=U[w]=U[a]=U[i]=U[r]=U[u]=U[s]=U[d]=U[m]=U[g]=U[x]=U[b]=!1;var j=typeof lo=="object"&&lo&&lo.Object===Object&&lo,Z=typeof self=="object"&&self&&self.Object===Object&&self,te=j||Z||Function("return this")(),re=B&&!B.nodeType&&B,W=re&&!0&&C&&!C.nodeType&&C,J=W&&W.exports===re,le=J&&j.process,ue=function(){try{var Rt=W&&W.require&&W.require("util").types;return Rt||le&&le.binding&&le.binding("util")}catch{}}(),se=ue&&ue.isTypedArray;function G(Rt,qt,br){switch(br.length){case 0:return Rt.call(qt);case 1:return Rt.call(qt,br[0]);case 2:return Rt.call(qt,br[0],br[1]);case 3:return Rt.call(qt,br[0],br[1],br[2])}return Rt.apply(qt,br)}function Y(Rt,qt){for(var br=-1,Hr=Array(Rt);++br<Rt;)Hr[br]=qt(br);return Hr}function ee(Rt){return function(qt){return Rt(qt)}}function $(Rt,qt){return Rt==null?void 0:Rt[qt]}function K(Rt,qt){return function(br){return Rt(qt(br))}}var Q=Array.prototype,ae=Function.prototype,ie=Object.prototype,oe=te["__core-js_shared__"],fe=ae.toString,ye=ie.hasOwnProperty,ce=function(){var Rt=/[^.]+$/.exec(oe&&oe.keys&&oe.keys.IE_PROTO||"");return Rt?"Symbol(src)_1."+Rt:""}(),me=ie.toString,xe=fe.call(Object),ke=RegExp("^"+fe.call(ye).replace(I,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ae=J?te.Buffer:void 0,Oe=te.Symbol,He=te.Uint8Array,Ge=Ae?Ae.allocUnsafe:void 0,_e=K(Object.getPrototypeOf,Object),Ie=Object.create,We=ie.propertyIsEnumerable,et=Q.splice,Ne=Oe?Oe.toStringTag:void 0,De=function(){try{var Rt=Xr(Object,"defineProperty");return Rt({},"",{}),Rt}catch{}}(),Ve=Ae?Ae.isBuffer:void 0,dt=Math.max,Dt=Date.now,Gt=Xr(te,"Map"),Mt=Xr(Object,"create"),zt=function(){function Rt(){}return function(qt){if(!In(qt))return{};if(Ie)return Ie(qt);Rt.prototype=qt;var br=new Rt;return Rt.prototype=void 0,br}}();function Nt(Rt){var qt=-1,br=Rt==null?0:Rt.length;for(this.clear();++qt<br;){var Hr=Rt[qt];this.set(Hr[0],Hr[1])}}function Et(){this.__data__=Mt?Mt(null):{},this.size=0}function At(Rt){var qt=this.has(Rt)&&delete this.__data__[Rt];return this.size-=qt?1:0,qt}function it(Rt){var qt=this.__data__;if(Mt){var br=qt[Rt];return br===k?void 0:br}return ye.call(qt,Rt)?qt[Rt]:void 0}function ht(Rt){var qt=this.__data__;return Mt?qt[Rt]!==void 0:ye.call(qt,Rt)}function $e(Rt,qt){var br=this.__data__;return this.size+=this.has(Rt)?0:1,br[Rt]=Mt&&qt===void 0?k:qt,this}Nt.prototype.clear=Et,Nt.prototype.delete=At,Nt.prototype.get=it,Nt.prototype.has=ht,Nt.prototype.set=$e;function Ee(Rt){var qt=-1,br=Rt==null?0:Rt.length;for(this.clear();++qt<br;){var Hr=Rt[qt];this.set(Hr[0],Hr[1])}}function Xe(){this.__data__=[],this.size=0}function rt(Rt){var qt=this.__data__,br=qe(qt,Rt);if(br<0)return!1;var Hr=qt.length-1;return br==Hr?qt.pop():et.call(qt,br,1),--this.size,!0}function ut(Rt){var qt=this.__data__,br=qe(qt,Rt);return br<0?void 0:qt[br][1]}function Pt(Rt){return qe(this.__data__,Rt)>-1}function kt(Rt,qt){var br=this.__data__,Hr=qe(br,Rt);return Hr<0?(++this.size,br.push([Rt,qt])):br[Hr][1]=qt,this}Ee.prototype.clear=Xe,Ee.prototype.delete=rt,Ee.prototype.get=ut,Ee.prototype.has=Pt,Ee.prototype.set=kt;function Bt(Rt){var qt=-1,br=Rt==null?0:Rt.length;for(this.clear();++qt<br;){var Hr=Rt[qt];this.set(Hr[0],Hr[1])}}function Xt(){this.size=0,this.__data__={hash:new Nt,map:new(Gt||Ee),string:new Nt}}function Ut(Rt){var qt=gn(this,Rt).delete(Rt);return this.size-=qt?1:0,qt}function Jt(Rt){return gn(this,Rt).get(Rt)}function Je(Rt){return gn(this,Rt).has(Rt)}function gt(Rt,qt){var br=gn(this,Rt),Hr=br.size;return br.set(Rt,qt),this.size+=br.size==Hr?0:1,this}Bt.prototype.clear=Xt,Bt.prototype.delete=Ut,Bt.prototype.get=Jt,Bt.prototype.has=Je,Bt.prototype.set=gt;function Ct(Rt){var qt=this.__data__=new Ee(Rt);this.size=qt.size}function or(){this.__data__=new Ee,this.size=0}function gr(Rt){var qt=this.__data__,br=qt.delete(Rt);return this.size=qt.size,br}function lr(Rt){return this.__data__.get(Rt)}function mr(Rt){return this.__data__.has(Rt)}function Fr(Rt,qt){var br=this.__data__;if(br instanceof Ee){var Hr=br.__data__;if(!Gt||Hr.length<e-1)return Hr.push([Rt,qt]),this.size=++br.size,this;br=this.__data__=new Bt(Hr)}return br.set(Rt,qt),this.size=br.size,this}Ct.prototype.clear=or,Ct.prototype.delete=gr,Ct.prototype.get=lr,Ct.prototype.has=mr,Ct.prototype.set=Fr;function Rr(Rt,qt){var br=aa(Rt),Hr=!br&&$n(Rt),ar=!br&&!Hr&&vr(Rt),Qt=!br&&!Hr&&!ar&&qn(Rt),Pr=br||Hr||ar||Qt,Nr=Pr?Y(Rt.length,String):[],Tn=Nr.length;for(var Nn in Rt)(qt||ye.call(Rt,Nn))&&!(Pr&&(Nn=="length"||ar&&(Nn=="offset"||Nn=="parent")||Qt&&(Nn=="buffer"||Nn=="byteLength"||Nn=="byteOffset")||cn(Nn,Tn)))&&Nr.push(Nn);return Nr}function ir(Rt,qt,br){(br!==void 0&&!En(Rt[qt],br)||br===void 0&&!(qt in Rt))&&we(Rt,qt,br)}function Vr(Rt,qt,br){var Hr=Rt[qt];(!(ye.call(Rt,qt)&&En(Hr,br))||br===void 0&&!(qt in Rt))&&we(Rt,qt,br)}function qe(Rt,qt){for(var br=Rt.length;br--;)if(En(Rt[br][0],qt))return br;return-1}function we(Rt,qt,br){qt=="__proto__"&&De?De(Rt,qt,{configurable:!0,enumerable:!0,value:br,writable:!0}):Rt[qt]=br}var Me=yr();function Re(Rt){return Rt==null?Rt===void 0?A:h:Ne&&Ne in Object(Rt)?kr(Rt):Zr(Rt)}function Ye(Rt){return Bn(Rt)&&Re(Rt)==c}function Qe(Rt){if(!In(Rt)||Ot(Rt))return!1;var qt=yn(Rt)?ke:F;return qt.test(Pn(Rt))}function ot(Rt){return Bn(Rt)&&en(Rt.length)&&!!U[Re(Rt)]}function st(Rt){if(!In(Rt))return dr(Rt);var qt=nr(Rt),br=[];for(var Hr in Rt)Hr=="constructor"&&(qt||!ye.call(Rt,Hr))||br.push(Hr);return br}function pt(Rt,qt,br,Hr,ar){Rt!==qt&&Me(qt,function(Qt,Pr){if(ar||(ar=new Ct),In(Qt))wt(Rt,qt,Pr,br,pt,Hr,ar);else{var Nr=Hr?Hr(Ur(Rt,Pr),Qt,Pr+"",Rt,qt,ar):void 0;Nr===void 0&&(Nr=Qt),ir(Rt,Pr,Nr)}},la)}function wt(Rt,qt,br,Hr,ar,Qt,Pr){var Nr=Ur(Rt,br),Tn=Ur(qt,br),Nn=Pr.get(Tn);if(Nn){ir(Rt,br,Nn);return}var Gn=Qt?Qt(Nr,Tn,br+"",Rt,qt,Pr):void 0,Wn=Gn===void 0;if(Wn){var Un=aa(Tn),mn=!Un&&vr(Tn),Fn=!Un&&!mn&&qn(Tn);Gn=Tn,Un||mn||Fn?aa(Nr)?Gn=Nr:ba(Nr)?Gn=Or(Nr):mn?(Wn=!1,Gn=Tr(Tn,!0)):Fn?(Wn=!1,Gn=_r(Tn,!0)):Gn=[]:ha(Tn)||$n(Tn)?(Gn=Nr,$n(Nr)?Gn=Hn(Nr):(!In(Nr)||yn(Nr))&&(Gn=sn(Tn))):Wn=!1}Wn&&(Pr.set(Tn,Gn),ar(Gn,Tn,Hr,Qt,Pr),Pr.delete(Tn)),ir(Rt,br,Gn)}function Yt(Rt,qt){return xr(Lr(Rt,qt,zr),Rt+"")}var wr=De?function(Rt,qt){return De(Rt,"toString",{configurable:!0,enumerable:!1,value:hr(qt),writable:!0})}:zr;function Tr(Rt,qt){if(qt)return Rt.slice();var br=Rt.length,Hr=Ge?Ge(br):new Rt.constructor(br);return Rt.copy(Hr),Hr}function Mr(Rt){var qt=new Rt.constructor(Rt.byteLength);return new He(qt).set(new He(Rt)),qt}function _r(Rt,qt){var br=qt?Mr(Rt.buffer):Rt.buffer;return new Rt.constructor(br,Rt.byteOffset,Rt.length)}function Or(Rt,qt){var br=-1,Hr=Rt.length;for(qt||(qt=Array(Hr));++br<Hr;)qt[br]=Rt[br];return qt}function nn(Rt,qt,br,Hr){var ar=!br;br||(br={});for(var Qt=-1,Pr=qt.length;++Qt<Pr;){var Nr=qt[Qt],Tn=Hr?Hr(br[Nr],Rt[Nr],Nr,br,Rt):void 0;Tn===void 0&&(Tn=Rt[Nr]),ar?we(br,Nr,Tn):Vr(br,Nr,Tn)}return br}function Sr(Rt){return Yt(function(qt,br){var Hr=-1,ar=br.length,Qt=ar>1?br[ar-1]:void 0,Pr=ar>2?br[2]:void 0;for(Qt=Rt.length>3&&typeof Qt=="function"?(ar--,Qt):void 0,Pr&&$r(br[0],br[1],Pr)&&(Qt=ar<3?void 0:Qt,ar=1),qt=Object(qt);++Hr<ar;){var Nr=br[Hr];Nr&&Rt(qt,Nr,Hr,Qt)}return qt})}function yr(Rt){return function(qt,br,Hr){for(var ar=-1,Qt=Object(qt),Pr=Hr(qt),Nr=Pr.length;Nr--;){var Tn=Pr[Rt?Nr:++ar];if(br(Qt[Tn],Tn,Qt)===!1)break}return qt}}function gn(Rt,qt){var br=Rt.__data__;return at(qt)?br[typeof qt=="string"?"string":"hash"]:br.map}function Xr(Rt,qt){var br=$(Rt,qt);return Qe(br)?br:void 0}function kr(Rt){var qt=ye.call(Rt,Ne),br=Rt[Ne];try{Rt[Ne]=void 0;var Hr=!0}catch{}var ar=me.call(Rt);return Hr&&(qt?Rt[Ne]=br:delete Rt[Ne]),ar}function sn(Rt){return typeof Rt.constructor=="function"&&!nr(Rt)?zt(_e(Rt)):{}}function cn(Rt,qt){var br=typeof Rt;return qt=qt??o,!!qt&&(br=="number"||br!="symbol"&&V.test(Rt))&&Rt>-1&&Rt%1==0&&Rt<qt}function $r(Rt,qt,br){if(!In(br))return!1;var Hr=typeof qt;return(Hr=="number"?Ca(br)&&cn(qt,br.length):Hr=="string"&&qt in br)?En(br[qt],Rt):!1}function at(Rt){var qt=typeof Rt;return qt=="string"||qt=="number"||qt=="symbol"||qt=="boolean"?Rt!=="__proto__":Rt===null}function Ot(Rt){return!!ce&&ce in Rt}function nr(Rt){var qt=Rt&&Rt.constructor,br=typeof qt=="function"&&qt.prototype||ie;return Rt===br}function dr(Rt){var qt=[];if(Rt!=null)for(var br in Object(Rt))qt.push(br);return qt}function Zr(Rt){return me.call(Rt)}function Lr(Rt,qt,br){return qt=dt(qt===void 0?Rt.length-1:qt,0),function(){for(var Hr=arguments,ar=-1,Qt=dt(Hr.length-qt,0),Pr=Array(Qt);++ar<Qt;)Pr[ar]=Hr[qt+ar];ar=-1;for(var Nr=Array(qt+1);++ar<qt;)Nr[ar]=Hr[ar];return Nr[qt]=br(Pr),G(Rt,this,Nr)}}function Ur(Rt,qt){if(!(qt==="constructor"&&typeof Rt[qt]=="function")&&qt!="__proto__")return Rt[qt]}var xr=on(wr);function on(Rt){var qt=0,br=0;return function(){var Hr=Dt(),ar=l-(Hr-br);if(br=Hr,ar>0){if(++qt>=z)return arguments[0]}else qt=0;return Rt.apply(void 0,arguments)}}function Pn(Rt){if(Rt!=null){try{return fe.call(Rt)}catch{}try{return Rt+""}catch{}}return""}function En(Rt,qt){return Rt===qt||Rt!==Rt&&qt!==qt}var $n=Ye(function(){return arguments}())?Ye:function(Rt){return Bn(Rt)&&ye.call(Rt,"callee")&&!We.call(Rt,"callee")},aa=Array.isArray;function Ca(Rt){return Rt!=null&&en(Rt.length)&&!yn(Rt)}function ba(Rt){return Bn(Rt)&&Ca(Rt)}var vr=Ve||ln;function yn(Rt){if(!In(Rt))return!1;var qt=Re(Rt);return qt==r||qt==f||qt==t||qt==y}function en(Rt){return typeof Rt=="number"&&Rt>-1&&Rt%1==0&&Rt<=o}function In(Rt){var qt=typeof Rt;return Rt!=null&&(qt=="object"||qt=="function")}function Bn(Rt){return Rt!=null&&typeof Rt=="object"}function ha(Rt){if(!Bn(Rt)||Re(Rt)!=d)return!1;var qt=_e(Rt);if(qt===null)return!0;var br=ye.call(qt,"constructor")&&qt.constructor;return typeof br=="function"&&br instanceof br&&fe.call(br)==xe}var qn=se?ee(se):ot;function Hn(Rt){return nn(Rt,la(Rt))}function la(Rt){return Ca(Rt)?Rr(Rt,!0):st(Rt)}var da=Sr(function(Rt,qt,br,Hr){pt(Rt,qt,br,Hr)});function hr(Rt){return function(){return Rt}}function zr(Rt){return Rt}function ln(){return!1}C.exports=da})(ym,ym.exports);var Fc=ym.exports;function H2(C,B){var e={};return Object.keys(C).forEach(k=>{B.includes(k)||(e[k]=C[k])}),e}function Ek(C,B){var e={};return B.forEach(k=>{k in C&&(e[k]=C[k])}),e}function Lk(C,B,e,k){var z=typeof B=="string"?B.split("."):[B];for(k=0;k<z.length&&C;k+=1)C=C[z[k]];return C===void 0?e:C}var Pk=C=>{var B=new WeakMap,e=(k,z,l,o)=>{if(typeof k=="undefined")return C(k,z,l);B.has(k)||B.set(k,new Map);var c=B.get(k);if(c.has(z))return c.get(z);var p=C(k,z,l,o);return c.set(z,p),p};return e},Qd=Pk(Lk);function G2(C,B){var e={};return Object.keys(C).forEach(k=>{var z=C[k],l=B(z,k,C);l&&(e[k]=z)}),e}var W2=C=>G2(C,B=>B!=null),xm=C=>Object.keys(C),Rk=C=>C.reduce((B,e)=>{var[k,z]=e;return B[k]=z,B},{});function Dk(C){var B=parseFloat(C.toString()),e=C.toString().replace(String(B),"");return{unitless:!e,value:B,unit:e}}function bm(C){if(C==null)return C;var{unitless:B}=Dk(C);return B||ih(C)?C+"px":C}var Y2=(C,B)=>parseInt(C[1],10)>parseInt(B[1],10)?1:-1,_m=C=>Rk(Object.entries(C).sort(Y2));function j2(C){var B=_m(C);return Object.assign(Object.values(B),B)}function Ik(C){var B=Object.keys(_m(C));return new Set(B)}function Fk(C){var B;if(!C)return C;C=(B=bm(C))!=null?B:C;var e=C.endsWith("px")?-1:-.0635;return ih(C)?""+(C+e):C.replace(/([0-9]+\.?[0-9]*)/,k=>""+(parseFloat(k)+e))}function qd(C,B){var e=[];return C&&e.push("@media screen and (min-width: "+bm(C)+")"),e.length>0&&B&&e.push("and"),B&&e.push("@media screen and (max-width: "+bm(B)+")"),e.join(" ")}function zk(C){var B;if(!C)return null;C.base=(B=C.base)!=null?B:"0px";var e=j2(C),k=Object.entries(C).sort(Y2).map((o,c,p)=>{var t,[n,a]=o,[,i]=(t=p[c+1])!=null?t:[];return i=parseFloat(i)>0?Fk(i):void 0,{breakpoint:n,minW:a,maxW:i,maxWQuery:qd(null,i),minWQuery:qd(a),minMaxQuery:qd(a,i)}}),z=Ik(C),l=Array.from(z.values());return{keys:z,normalized:e,isResponsive(o){var c=Object.keys(o);return c.length>0&&c.every(p=>z.has(p))},asObject:_m(C),asArray:j2(C),details:k,media:[null,...e.map(o=>qd(o)).slice(1)],toArrayValue(o){if(!qf(o))throw new Error("toArrayValue: value must be an object");for(var c=l.map(p=>{var t;return(t=o[p])!=null?t:null});kk(c)===null;)c.pop();return c},toObjectValue(o){if(!Array.isArray(o))throw new Error("toObjectValue: value must be an array");return o.reduce((c,p,t)=>{var n=l[t];return n!=null&&p!=null&&(c[n]=p),c},{})}}}function X2(C){return C!=null&&typeof C=="object"&&"nodeType"in C&&C.nodeType===Node.ELEMENT_NODE}function wm(C){var B;if(!X2(C))return!1;var e=(B=C.ownerDocument.defaultView)!=null?B:window;return C instanceof e.HTMLElement}function Z2(C){var B;return X2(C)&&(B=C.ownerDocument)!=null?B:document}function Ok(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}var tv=Ok(),K2=C=>C?"":void 0,ec=function(){for(var B=arguments.length,e=new Array(B),k=0;k<B;k++)e[k]=arguments[k];return e.filter(Boolean).join(" ")},Bk=C=>C.hasAttribute("tabindex");function Nk(C){return Boolean(C.getAttribute("disabled"))===!0||Boolean(C.getAttribute("aria-disabled"))===!0}function Uk(C){return wm(C)&&C.tagName.toLowerCase()==="input"&&"select"in C}function Vk(C){var B=wm(C)?Z2(C):document;return B.activeElement===C}function J2(C){return C.parentElement&&J2(C.parentElement)?!0:C.hidden}function Hk(C){var B=C.getAttribute("contenteditable");return B!=="false"&&B!=null}function Gk(C){if(!wm(C)||J2(C)||Nk(C))return!1;var{localName:B}=C,e=["input","select","textarea","button"];if(e.indexOf(B)>=0)return!0;var k={a:()=>C.hasAttribute("href"),audio:()=>C.hasAttribute("controls"),video:()=>C.hasAttribute("controls")};return B in k?k[B]():Hk(C)?!0:Bk(C)}var Wk=["input:not([disabled])","select:not([disabled])","textarea:not([disabled])","embed","iframe","object","a[href]","area[href]","button:not([disabled])","[tabindex]","audio[controls]","video[controls]","*[tabindex]:not([aria-disabled])","*[contenteditable]"],Yk=Wk.join();function jk(C){var B=Array.from(C.querySelectorAll(Yk));return B.unshift(C),B.filter(Gk).filter(e=>window.getComputedStyle(e).display!=="none")}function tc(C){for(var B=arguments.length,e=new Array(B>1?B-1:0),k=1;k<B;k++)e[k-1]=arguments[k];return U2(C)?C(...e):C}function sp(){for(var C=arguments.length,B=new Array(C),e=0;e<C;e++)B[e]=arguments[e];return function(z){B.some(l=>(l==null||l(z),z==null?void 0:z.defaultPrevented))}}function Xk(C){var B;return function(){if(C){for(var k=arguments.length,z=new Array(k),l=0;l<k;l++)z[l]=arguments[l];B=C.apply(this,z),C=null}return B}}var lp=()=>{},$2=Xk(C=>()=>{var{condition:B,message:e}=C;B&&$d&&console.warn(e)});function Zk(C,B){B===void 0&&(B={});var{isActive:e=Vk,nextTick:k,preventScroll:z=!0,selectTextIfInput:l=!0}=B;if(!C||e(C))return-1;function o(){if(!C){$2({condition:!0,message:"[chakra-ui]: can't call focus() on `null` or `undefined` element"});return}if(Kk())C.focus({preventScroll:z});else if(C.focus(),z){var c=Jk(C);$k(c)}Uk(C)&&l&&C.select()}return k?requestAnimationFrame(o):(o(),-1)}var e0=null;function Kk(){if(e0==null){e0=!1;try{var C=document.createElement("div");C.focus({get preventScroll(){return e0=!0,!0}})}catch{}}return e0}function Jk(C){for(var B,e=Z2(C),k=(B=e.defaultView)!=null?B:window,z=C.parentNode,l=[],o=e.scrollingElement||e.documentElement;z instanceof k.HTMLElement&&z!==o;)(z.offsetHeight<z.scrollHeight||z.offsetWidth<z.scrollWidth)&&l.push({element:z,scrollTop:z.scrollTop,scrollLeft:z.scrollLeft}),z=z.parentNode;return o instanceof k.HTMLElement&&l.push({element:o,scrollTop:o.scrollTop,scrollLeft:o.scrollLeft}),l}function $k(C){for(var{element:B,scrollTop:e,scrollLeft:k}of C)B.scrollTop=e,B.scrollLeft=k}var Q2=1/60*1e3,Qk=typeof performance!="undefined"?function(){return performance.now()}:function(){return Date.now()},q2=typeof window!="undefined"?function(C){return window.requestAnimationFrame(C)}:function(C){return setTimeout(function(){return C(Qk())},Q2)};function qk(C){var B=[],e=[],k=0,z=!1,l=new WeakSet,o={schedule:function(c,p,t){p===void 0&&(p=!1),t===void 0&&(t=!1);var n=t&&z,a=n?B:e;return p&&l.add(c),a.indexOf(c)===-1&&(a.push(c),n&&z&&(k=B.length)),c},cancel:function(c){var p=e.indexOf(c);p!==-1&&e.splice(p,1),l.delete(c)},process:function(c){var p;if(z=!0,p=[e,B],B=p[0],e=p[1],e.length=0,k=B.length,k)for(var t=0;t<k;t++){var n=B[t];n(c),l.has(n)&&(o.schedule(n),C())}z=!1}};return o}var eC=40,Tm=!0,up=!1,Am=!1,rv={delta:0,timestamp:0},fp=["read","update","preRender","render","postRender"],t0=fp.reduce(function(C,B){return C[B]=qk(function(){return up=!0}),C},{}),rc=fp.reduce(function(C,B){var e=t0[B];return C[B]=function(k,z,l){return z===void 0&&(z=!1),l===void 0&&(l=!1),up||rC(),e.schedule(k,z,l)},C},{}),cp=fp.reduce(function(C,B){return C[B]=t0[B].cancel,C},{}),nv=fp.reduce(function(C,B){return C[B]=function(){return t0[B].process(rv)},C},{}),tC=function(C){return t0[C].process(rv)},e_=function(C){up=!1,rv.delta=Tm?Q2:Math.max(Math.min(C-rv.timestamp,eC),1),rv.timestamp=C,Am=!0,fp.forEach(tC),Am=!1,up&&(Tm=!1,q2(e_))},rC=function(){up=!0,Tm=!0,Am||q2(e_)},r0=function(){return rv};function nC(C,B){function e(k,z){return z===void 0&&(z=[]),N2(k)?k.map((l,o)=>e(l,[...z,String(o)])):qf(k)?Object.fromEntries(Object.entries(k).map(l=>{var[o,c]=l;return[o,e(c,[...z,o])]})):B(k,z)}return e(C)}function aC(C,B){if(C!=null){if(U2(C)){C(B);return}try{C.current=B}catch{throw new Error("Cannot assign value '"+B+"' to ref '"+C+"'")}}}function t_(){for(var C=arguments.length,B=new Array(C),e=0;e<C;e++)B[e]=arguments[e];return k=>{B.forEach(z=>aC(z,k))}}function av(C){C===void 0&&(C={});var{strict:B=!0,errorMessage:e="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:k}=C,z=rl(void 0);z.displayName=k;function l(){var o=wo(z);if(!o&&B){var c=new Error(e);throw c.name="ContextError",Error.captureStackTrace==null||Error.captureStackTrace(c,l),c}return o}return[z.Provider,l,z]}var[iC,oC]=av({strict:!1,name:"PortalManagerContext"});function r_(C){var{children:B,zIndex:e}=C;return pa(iC,{value:{zIndex:e}},B)}$d&&(r_.displayName="PortalManager");var Sm=tv?rh:_o,n_={prefix:Math.round(Math.random()*1e10),current:0},Mm=rl(n_),sC=Kg(C=>{var{children:B}=C,e=wo(Mm),k=e===n_,z=Vs(()=>({prefix:k?0:++e.prefix,current:0}),[k,e]);return pa(Mm.Provider,{value:z},B)});function lC(C,B){var e=wo(Mm);return Vs(()=>C||[B,e.prefix,++e.current].filter(Boolean).join("-"),[C,B])}function uC(C){for(var B=arguments.length,e=new Array(B>1?B-1:0),k=1;k<B;k++)e[k-1]=arguments[k];var z=lC(C);return Vs(()=>e.map(l=>l+"-"+z),[z,e])}function fC(C,B){return B===void 0&&(B=[]),_o(()=>()=>C(),B)}function a_(){var C=Eo(!1),[B,e]=Us(0);return fC(()=>{C.current=!0}),Oo(()=>{C.current||e(B+1)},[B])}function cC(C,B){if(C!=null){if(typeof C=="function"){C(B);return}try{C.current=B}catch{throw new Error("Cannot assign value '"+B+"' to ref '"+C+"'")}}}function hC(){for(var C=arguments.length,B=new Array(C),e=0;e<C;e++)B[e]=arguments[e];return Vs(()=>B.every(k=>k==null)?null:k=>{B.forEach(z=>{z&&cC(z,k)})},B)}function km(){return km=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},km.apply(this,arguments)}function vC(C,B){if(C==null)return{};var e={},k=Object.keys(C),z,l;for(l=0;l<k.length;l++)z=k[l],!(B.indexOf(z)>=0)&&(e[z]=C[z]);return e}var[i_,pC]=av({strict:!1,name:"PortalContext"}),Cm="chakra-portal",dC=".chakra-portal",gC=C=>pa("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:C.zIndex,top:0,left:0,right:0}},C.children),mC=C=>{var{appendToParentPortal:B,children:e}=C,k=Eo(null),z=Eo(null),l=a_(),o=pC(),c=oC();Sm(()=>{if(!!k.current){var t=k.current.ownerDocument,n=B?o??t.body:t.body;if(!!n){z.current=t.createElement("div"),z.current.className=Cm,n.appendChild(z.current),l();var a=z.current;return()=>{n.contains(a)&&n.removeChild(a)}}}},[]);var p=c!=null&&c.zIndex?pa(gC,{zIndex:c==null?void 0:c.zIndex},e):e;return z.current?Md(pa(i_,{value:z.current},p),z.current):pa("span",{ref:k})},yC=C=>{var{children:B,containerRef:e,appendToParentPortal:k}=C,z=e.current,l=z??(tv?document.body:void 0),o=Vs(()=>{var p=z==null?void 0:z.ownerDocument.createElement("div");return p&&(p.className=Cm),p},[z]),c=a_();return Sm(()=>{c()},[]),Sm(()=>{if(!(!o||!l))return l.appendChild(o),()=>{l.removeChild(o)}},[o,l]),l&&o?Md(pa(i_,{value:k?o:null},B),o):null};function n0(C){var{containerRef:B}=C,e=vC(C,["containerRef"]);return B?pa(yC,km({containerRef:B},e)):pa(mC,e)}n0.defaultProps={appendToParentPortal:!0};n0.className=Cm;n0.selector=dC;var a0={light:"chakra-ui-light",dark:"chakra-ui-dark"},xC={classList:{add:lp,remove:lp}},bC=()=>tv?document.body:xC;function _C(C){var B=bC();B.classList.add(C?a0.dark:a0.light),B.classList.remove(C?a0.light:a0.dark)}function wC(C){var B=window.matchMedia==null?void 0:window.matchMedia(C);if(!!B)return!!B.media===B.matches}var o_={light:"(prefers-color-scheme: light)",dark:"(prefers-color-scheme: dark)"};function TC(C){var B,e=(B=wC(o_.dark))!=null?B:C==="dark";return e?"dark":"light"}function AC(C){if(!("matchMedia"in window))return lp;var B=window.matchMedia(o_.dark),e=()=>{C(B.matches?"dark":"light")};return e(),B.addListener(e),()=>{B.removeListener(e)}}var s_={get:()=>document.documentElement.style.getPropertyValue("--chakra-ui-color-mode"),set:C=>{tv&&document.documentElement.style.setProperty("--chakra-ui-color-mode",C)}},l_=()=>typeof Storage!="undefined",u_="chakra-ui-color-mode",SC={get(C){if(!l_())return C;try{var B=localStorage.getItem(u_);return B??C}catch{return C}},set(C){if(!!l_())try{localStorage.setItem(u_,C)}catch{}},type:"localStorage"},Em=rl({});$d&&(Em.displayName="ColorModeContext");var f_=()=>{var C=wo(Em);if(C===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return C};function c_(C){var{value:B,children:e,options:{useSystemColorMode:k,initialColorMode:z},colorModeManager:l=SC}=C,[o,c]=Us(l.type==="cookie"?l.get(z):z);_o(()=>{if(tv&&l.type==="localStorage"){var a=k?TC(z):s_.get()||l.get();a&&c(a)}},[l,k,z]),_o(()=>{var a=o==="dark";_C(a),s_.set(a?"dark":"light")},[o]);var p=Oo(a=>{l.set(a),c(a)},[l]),t=Oo(()=>{p(o==="light"?"dark":"light")},[o,p]);_o(()=>{var a;return k&&(a=AC(p)),()=>{a&&k&&a()}},[p,k]);var n=Vs(()=>({colorMode:B??o,toggleColorMode:B?lp:t,setColorMode:B?lp:p}),[o,p,t,B]);return pa(Em.Provider,{value:n},e)}$d&&(c_.displayName="ColorModeProvider");var MC=(C,B)=>e=>{var k=String(B),z=C?C+"."+k:k;return qf(e.__cssMap)&&z in e.__cssMap?e.__cssMap[z].varRef:B};function hp(C){var{scale:B,transform:e,compose:k}=C,z=(l,o)=>{var c,p=MC(B,l)(o),t=(c=e==null?void 0:e(p,o))!=null?c:p;return k&&(t=k(t,o)),t};return z}function Tf(C,B){return e=>{var k={property:e,scale:C};return k.transform=hp({scale:C,transform:B}),k}}var kC=C=>{var{rtl:B,ltr:e}=C;return k=>k.direction==="rtl"?B:e};function CC(C){var{property:B,scale:e,transform:k}=C;return{scale:e,property:kC(B),transform:e?hp({scale:e,compose:k}):k}}var h_=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function EC(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...h_].join(" ")}function LC(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...h_].join(" ")}var PC={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},RC={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function DC(C){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":C,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}var IC={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},v_="& > :not(style) ~ :not(style)",FC={[v_]:{marginInlineStart:"calc(var(--chakra-space-x) * calc(1 - var(--chakra-space-x-reverse)))",marginInlineEnd:"calc(var(--chakra-space-x) * var(--chakra-space-x-reverse))"}},zC={[v_]:{marginTop:"calc(var(--chakra-space-y) * calc(1 - var(--chakra-space-y-reverse)))",marginBottom:"calc(var(--chakra-space-y) * var(--chakra-space-y-reverse))"}};function Lm(C,B){Lm=function(p,t){return new l(p,void 0,t)};var e=Pm(RegExp),k=RegExp.prototype,z=new WeakMap;function l(c,p,t){var n=e.call(this,c,p);return z.set(n,t||z.get(c)),n}OC(l,e),l.prototype.exec=function(c){var p=k.exec.call(this,c);return p&&(p.groups=o(p,this)),p},l.prototype[Symbol.replace]=function(c,p){if(typeof p=="string"){var t=z.get(this);return k[Symbol.replace].call(this,c,p.replace(/\$<([^>]+)>/g,function(a,i){return"$"+t[i]}))}else if(typeof p=="function"){var n=this;return k[Symbol.replace].call(this,c,function(){var a=[];return a.push.apply(a,arguments),typeof a[a.length-1]!="object"&&a.push(o(a,n)),p.apply(this,a)})}else return k[Symbol.replace].call(this,c,p)};function o(c,p){var t=z.get(p);return Object.keys(t).reduce(function(n,a){return n[a]=c[t[a]],n},Object.create(null))}return Lm.apply(this,arguments)}function OC(C,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function");C.prototype=Object.create(B&&B.prototype,{constructor:{value:C,writable:!0,configurable:!0}}),B&&vp(C,B)}function Pm(C){var B=typeof Map=="function"?new Map:void 0;return Pm=function(k){if(k===null||!NC(k))return k;if(typeof k!="function")throw new TypeError("Super expression must either be null or a function");if(typeof B!="undefined"){if(B.has(k))return B.get(k);B.set(k,z)}function z(){return i0(k,arguments,Rm(this).constructor)}return z.prototype=Object.create(k.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),vp(z,k)},Pm(C)}function i0(C,B,e){return BC()?i0=Reflect.construct:i0=function(z,l,o){var c=[null];c.push.apply(c,l);var p=Function.bind.apply(z,c),t=new p;return o&&vp(t,o.prototype),t},i0.apply(null,arguments)}function BC(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function NC(C){return Function.toString.call(C).indexOf("[native code]")!==-1}function vp(C,B){return vp=Object.setPrototypeOf||function(k,z){return k.__proto__=z,k},vp(C,B)}function Rm(C){return Rm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Rm(C)}var Dm={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},UC=new Set(Object.values(Dm)),p_=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),VC=C=>C.trim();function HC(C,B){var e,k;if(C==null||p_.has(C))return C;var z=Lm(/(^[\x2DA-Za-z]+)\(((.*))\)/g,{type:1,values:2}),{type:l,values:o}=(e=(k=z.exec(C))==null?void 0:k.groups)!=null?e:{};if(!l||!o)return C;var c=l.includes("-gradient")?l:l+"-gradient",[p,...t]=o.split(",").map(VC).filter(Boolean);if((t==null?void 0:t.length)===0)return C;var n=p in Dm?Dm[p]:p;t.unshift(n);var a=t.map(i=>{if(UC.has(i))return i;var r=i.indexOf(" "),[f,u]=r!==-1?[i.substr(0,r),i.substr(r+1)]:[i],s=d_(u)?u:u&&u.split(" "),h="colors."+f,d=h in B.__cssMap?B.__cssMap[h].varRef:f;return s?[d,s].join(" "):d});return c+"("+a.join(", ")+")"}var d_=C=>mm(C)&&C.includes("(")&&C.includes(")"),GC=(C,B)=>HC(C,B??{}),WC=C=>{var B=parseFloat(C.toString()),e=C.toString().replace(String(B),"");return{unitless:!e,value:B,unit:e}},nc=C=>B=>C+"("+B+")",So={filter(C){return C!=="auto"?C:PC},backdropFilter(C){return C!=="auto"?C:RC},ring(C){return DC(So.px(C))},bgClip(C){return C==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:C}},transform(C){return C==="auto"?EC():C==="auto-gpu"?LC():C},px(C){if(C==null)return C;var{unitless:B}=WC(C);return B||ih(C)?C+"px":C},fraction(C){return!ih(C)||C>1?C:C*100+"%"},float(C,B){var e={left:"right",right:"left"};return B.direction==="rtl"?e[C]:C},degree(C){if(V2(C)||C==null)return C;var B=mm(C)&&!C.endsWith("deg");return ih(C)||B?C+"deg":C},gradient:GC,blur:nc("blur"),opacity:nc("opacity"),brightness:nc("brightness"),contrast:nc("contrast"),dropShadow:nc("drop-shadow"),grayscale:nc("grayscale"),hueRotate:nc("hue-rotate"),invert:nc("invert"),saturate:nc("saturate"),sepia:nc("sepia"),bgImage(C){if(C==null)return C;var B=d_(C)||p_.has(C);return B?C:"url("+C+")"},outline(C){var B=String(C)==="0"||String(C)==="none";return C!==null&&B?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:C}},flexDirection(C){var B,{space:e,divide:k}=(B=IC[C])!=null?B:{},z={flexDirection:C};return e&&(z[e]=1),k&&(z[k]=1),z}};function Im(){return Im=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},Im.apply(this,arguments)}var Mn={borderWidths:Tf("borderWidths"),borderStyles:Tf("borderStyles"),colors:Tf("colors"),borders:Tf("borders"),radii:Tf("radii",So.px),space:Tf("space",So.px),spaceT:Tf("space",So.px),degreeT(C){return{property:C,transform:So.degree}},prop(C,B,e){return Im({property:C,scale:B},B&&{transform:hp({scale:B,transform:e})})},propT(C,B){return{property:C,transform:B}},sizes:Tf("sizes",So.px),sizesT:Tf("sizes",So.fraction),shadows:Tf("shadows"),logical:CC,blur:Tf("blur",So.blur)},o0={background:Mn.colors("background"),backgroundColor:Mn.colors("backgroundColor"),backgroundImage:Mn.propT("backgroundImage",So.bgImage),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:So.bgClip},bgSize:Mn.prop("backgroundSize"),bgPosition:Mn.prop("backgroundPosition"),bg:Mn.colors("background"),bgColor:Mn.colors("backgroundColor"),bgPos:Mn.prop("backgroundPosition"),bgRepeat:Mn.prop("backgroundRepeat"),bgAttachment:Mn.prop("backgroundAttachment"),bgGradient:Mn.propT("backgroundImage",So.gradient),bgClip:{transform:So.bgClip}};Object.assign(o0,{bgImage:o0.backgroundImage,bgImg:o0.backgroundImage});var fo={border:Mn.borders("border"),borderWidth:Mn.borderWidths("borderWidth"),borderStyle:Mn.borderStyles("borderStyle"),borderColor:Mn.colors("borderColor"),borderRadius:Mn.radii("borderRadius"),borderTop:Mn.borders("borderTop"),borderBlockStart:Mn.borders("borderBlockStart"),borderTopLeftRadius:Mn.radii("borderTopLeftRadius"),borderStartStartRadius:Mn.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:Mn.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:Mn.radii("borderTopRightRadius"),borderStartEndRadius:Mn.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:Mn.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:Mn.borders("borderRight"),borderInlineEnd:Mn.borders("borderInlineEnd"),borderBottom:Mn.borders("borderBottom"),borderBlockEnd:Mn.borders("borderBlockEnd"),borderBottomLeftRadius:Mn.radii("borderBottomLeftRadius"),borderBottomRightRadius:Mn.radii("borderBottomRightRadius"),borderLeft:Mn.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:Mn.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:Mn.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:Mn.borders(["borderLeft","borderRight"]),borderInline:Mn.borders("borderInline"),borderY:Mn.borders(["borderTop","borderBottom"]),borderBlock:Mn.borders("borderBlock"),borderTopWidth:Mn.borderWidths("borderTopWidth"),borderBlockStartWidth:Mn.borderWidths("borderBlockStartWidth"),borderTopColor:Mn.colors("borderTopColor"),borderBlockStartColor:Mn.colors("borderBlockStartColor"),borderTopStyle:Mn.borderStyles("borderTopStyle"),borderBlockStartStyle:Mn.borderStyles("borderBlockStartStyle"),borderBottomWidth:Mn.borderWidths("borderBottomWidth"),borderBlockEndWidth:Mn.borderWidths("borderBlockEndWidth"),borderBottomColor:Mn.colors("borderBottomColor"),borderBlockEndColor:Mn.colors("borderBlockEndColor"),borderBottomStyle:Mn.borderStyles("borderBottomStyle"),borderBlockEndStyle:Mn.borderStyles("borderBlockEndStyle"),borderLeftWidth:Mn.borderWidths("borderLeftWidth"),borderInlineStartWidth:Mn.borderWidths("borderInlineStartWidth"),borderLeftColor:Mn.colors("borderLeftColor"),borderInlineStartColor:Mn.colors("borderInlineStartColor"),borderLeftStyle:Mn.borderStyles("borderLeftStyle"),borderInlineStartStyle:Mn.borderStyles("borderInlineStartStyle"),borderRightWidth:Mn.borderWidths("borderRightWidth"),borderInlineEndWidth:Mn.borderWidths("borderInlineEndWidth"),borderRightColor:Mn.colors("borderRightColor"),borderInlineEndColor:Mn.colors("borderInlineEndColor"),borderRightStyle:Mn.borderStyles("borderRightStyle"),borderInlineEndStyle:Mn.borderStyles("borderInlineEndStyle"),borderTopRadius:Mn.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:Mn.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:Mn.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:Mn.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(fo,{rounded:fo.borderRadius,roundedTop:fo.borderTopRadius,roundedTopLeft:fo.borderTopLeftRadius,roundedTopRight:fo.borderTopRightRadius,roundedTopStart:fo.borderStartStartRadius,roundedTopEnd:fo.borderStartEndRadius,roundedBottom:fo.borderBottomRadius,roundedBottomLeft:fo.borderBottomLeftRadius,roundedBottomRight:fo.borderBottomRightRadius,roundedBottomStart:fo.borderEndStartRadius,roundedBottomEnd:fo.borderEndEndRadius,roundedLeft:fo.borderLeftRadius,roundedRight:fo.borderRightRadius,roundedStart:fo.borderInlineStartRadius,roundedEnd:fo.borderInlineEndRadius,borderStart:fo.borderInlineStart,borderEnd:fo.borderInlineEnd,borderTopStartRadius:fo.borderStartStartRadius,borderTopEndRadius:fo.borderStartEndRadius,borderBottomStartRadius:fo.borderEndStartRadius,borderBottomEndRadius:fo.borderEndEndRadius,borderStartRadius:fo.borderInlineStartRadius,borderEndRadius:fo.borderInlineEndRadius,borderStartWidth:fo.borderInlineStartWidth,borderEndWidth:fo.borderInlineEndWidth,borderStartColor:fo.borderInlineStartColor,borderEndColor:fo.borderInlineEndColor,borderStartStyle:fo.borderInlineStartStyle,borderEndStyle:fo.borderInlineEndStyle});var YC={color:Mn.colors("color"),textColor:Mn.colors("color"),fill:Mn.colors("fill"),stroke:Mn.colors("stroke")},Fm={boxShadow:Mn.shadows("boxShadow"),mixBlendMode:!0,blendMode:Mn.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:Mn.prop("backgroundBlendMode"),opacity:!0};Object.assign(Fm,{shadow:Fm.boxShadow});var jC={filter:{transform:So.filter},blur:Mn.blur("--chakra-blur"),brightness:Mn.propT("--chakra-brightness",So.brightness),contrast:Mn.propT("--chakra-contrast",So.contrast),hueRotate:Mn.degreeT("--chakra-hue-rotate"),invert:Mn.propT("--chakra-invert",So.invert),saturate:Mn.propT("--chakra-saturate",So.saturate),dropShadow:Mn.propT("--chakra-drop-shadow",So.dropShadow),backdropFilter:{transform:So.backdropFilter},backdropBlur:Mn.blur("--chakra-backdrop-blur"),backdropBrightness:Mn.propT("--chakra-backdrop-brightness",So.brightness),backdropContrast:Mn.propT("--chakra-backdrop-contrast",So.contrast),backdropHueRotate:Mn.degreeT("--chakra-backdrop-hue-rotate"),backdropInvert:Mn.propT("--chakra-backdrop-invert",So.invert),backdropSaturate:Mn.propT("--chakra-backdrop-saturate",So.saturate)},s0={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:So.flexDirection},experimental_spaceX:{static:FC,transform:hp({scale:"space",transform:C=>C!==null?{"--chakra-space-x":C}:null})},experimental_spaceY:{static:zC,transform:hp({scale:"space",transform:C=>C!=null?{"--chakra-space-y":C}:null})},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:Mn.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0};Object.assign(s0,{flexDir:s0.flexDirection});var g_={gridGap:Mn.space("gridGap"),gridColumnGap:Mn.space("gridColumnGap"),gridRowGap:Mn.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},XC={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:So.outline},outlineOffset:!0,outlineColor:Mn.colors("outlineColor")},Qu={width:Mn.sizesT("width"),inlineSize:Mn.sizesT("inlineSize"),height:Mn.sizes("height"),blockSize:Mn.sizes("blockSize"),boxSize:Mn.sizes(["width","height"]),minWidth:Mn.sizes("minWidth"),minInlineSize:Mn.sizes("minInlineSize"),minHeight:Mn.sizes("minHeight"),minBlockSize:Mn.sizes("minBlockSize"),maxWidth:Mn.sizes("maxWidth"),maxInlineSize:Mn.sizes("maxInlineSize"),maxHeight:Mn.sizes("maxHeight"),maxBlockSize:Mn.sizes("maxBlockSize"),d:Mn.prop("display"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:Mn.propT("float",So.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(Qu,{w:Qu.width,h:Qu.height,minW:Qu.minWidth,maxW:Qu.maxWidth,minH:Qu.minHeight,maxH:Qu.maxHeight,overscroll:Qu.overscrollBehavior,overscrollX:Qu.overscrollBehaviorX,overscrollY:Qu.overscrollBehaviorY});var ZC={listStyleType:!0,listStylePosition:!0,listStylePos:Mn.prop("listStylePosition"),listStyleImage:!0,listStyleImg:Mn.prop("listStyleImage")},KC={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},JC={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},zm=(C,B,e)=>{var k={},z=Qd(C,B,{});for(var l in z){var o=l in e&&e[l]!=null;o||(k[l]=z[l])}return k},$C={srOnly:{transform(C){return C===!0?KC:C==="focusable"?JC:{}}},layerStyle:{processResult:!0,transform:(C,B,e)=>zm(B,"layerStyles."+C,e)},textStyle:{processResult:!0,transform:(C,B,e)=>zm(B,"textStyles."+C,e)},apply:{processResult:!0,transform:(C,B,e)=>zm(B,C,e)}},pp={position:!0,pos:Mn.prop("position"),zIndex:Mn.prop("zIndex","zIndices"),inset:Mn.spaceT(["top","right","bottom","left"]),insetX:Mn.spaceT(["left","right"]),insetInline:Mn.spaceT("insetInline"),insetY:Mn.spaceT(["top","bottom"]),insetBlock:Mn.spaceT("insetBlock"),top:Mn.spaceT("top"),insetBlockStart:Mn.spaceT("insetBlockStart"),bottom:Mn.spaceT("bottom"),insetBlockEnd:Mn.spaceT("insetBlockEnd"),left:Mn.spaceT("left"),insetInlineStart:Mn.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:Mn.spaceT("right"),insetInlineEnd:Mn.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(pp,{insetStart:pp.insetInlineStart,insetEnd:pp.insetInlineEnd});var QC={ring:{transform:So.ring},ringColor:Mn.colors("--chakra-ring-color"),ringOffset:Mn.prop("--chakra-ring-offset-width"),ringOffsetColor:Mn.colors("--chakra-ring-offset-color"),ringInset:Mn.prop("--chakra-ring-inset")},Wo={margin:Mn.spaceT("margin"),marginTop:Mn.spaceT("marginTop"),marginBlockStart:Mn.spaceT("marginBlockStart"),marginRight:Mn.spaceT("marginRight"),marginInlineEnd:Mn.spaceT("marginInlineEnd"),marginBottom:Mn.spaceT("marginBottom"),marginBlockEnd:Mn.spaceT("marginBlockEnd"),marginLeft:Mn.spaceT("marginLeft"),marginInlineStart:Mn.spaceT("marginInlineStart"),marginX:Mn.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:Mn.spaceT("marginInline"),marginY:Mn.spaceT(["marginTop","marginBottom"]),marginBlock:Mn.spaceT("marginBlock"),padding:Mn.space("padding"),paddingTop:Mn.space("paddingTop"),paddingBlockStart:Mn.space("paddingBlockStart"),paddingRight:Mn.space("paddingRight"),paddingBottom:Mn.space("paddingBottom"),paddingBlockEnd:Mn.space("paddingBlockEnd"),paddingLeft:Mn.space("paddingLeft"),paddingInlineStart:Mn.space("paddingInlineStart"),paddingInlineEnd:Mn.space("paddingInlineEnd"),paddingX:Mn.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:Mn.space("paddingInline"),paddingY:Mn.space(["paddingTop","paddingBottom"]),paddingBlock:Mn.space("paddingBlock")};Object.assign(Wo,{m:Wo.margin,mt:Wo.marginTop,mr:Wo.marginRight,me:Wo.marginInlineEnd,marginEnd:Wo.marginInlineEnd,mb:Wo.marginBottom,ml:Wo.marginLeft,ms:Wo.marginInlineStart,marginStart:Wo.marginInlineStart,mx:Wo.marginX,my:Wo.marginY,p:Wo.padding,pt:Wo.paddingTop,py:Wo.paddingY,px:Wo.paddingX,pb:Wo.paddingBottom,pl:Wo.paddingLeft,ps:Wo.paddingInlineStart,paddingStart:Wo.paddingInlineStart,pr:Wo.paddingRight,pe:Wo.paddingInlineEnd,paddingEnd:Wo.paddingInlineEnd});var qC={textDecorationColor:Mn.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:Mn.shadows("textShadow")},eE={clipPath:!0,transform:Mn.propT("transform",So.transform),transformOrigin:!0,translateX:Mn.spaceT("--chakra-translate-x"),translateY:Mn.spaceT("--chakra-translate-y"),skewX:Mn.degreeT("--chakra-skew-x"),skewY:Mn.degreeT("--chakra-skew-y"),scaleX:Mn.prop("--chakra-scale-x"),scaleY:Mn.prop("--chakra-scale-y"),scale:Mn.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:Mn.degreeT("--chakra-rotate")},tE={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:Mn.prop("transitionDuration","transition.duration"),transitionProperty:Mn.prop("transitionProperty","transition.property"),transitionTimingFunction:Mn.prop("transitionTimingFunction","transition.easing")},rE={fontFamily:Mn.prop("fontFamily","fonts"),fontSize:Mn.prop("fontSize","fontSizes",So.px),fontWeight:Mn.prop("fontWeight","fontWeights"),lineHeight:Mn.prop("lineHeight","lineHeights"),letterSpacing:Mn.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"},isTruncated:{transform(C){if(C===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}}},iv={hover:C=>C+":hover &, "+C+"[data-hover] &",focus:C=>C+":focus &, "+C+"[data-focus] &",active:C=>C+":active &, "+C+"[data-active] &",disabled:C=>C+":disabled &, "+C+"[data-disabled] &",invalid:C=>C+":invalid &, "+C+"[data-invalid] &",checked:C=>C+":checked &, "+C+"[data-checked] &",indeterminate:C=>C+":indeterminate &, "+C+"[aria-checked=mixed] &, "+C+"[data-indeterminate] &",readOnly:C=>C+":read-only &, "+C+"[readonly] &, "+C+"[data-read-only] &",expanded:C=>C+":read-only &, "+C+"[aria-expanded=true] &, "+C+"[data-expanded] &"},ov=C=>nE(C,"[role=group]","[data-group]",".group"),nE=function(B){for(var e=arguments.length,k=new Array(e>1?e-1:0),z=1;z<e;z++)k[z-1]=arguments[z];return k.map(B).join(", ")},Om={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible",_disabled:"&[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:ov(iv.hover),_groupFocus:ov(iv.focus),_groupActive:ov(iv.active),_groupDisabled:ov(iv.disabled),_groupInvalid:ov(iv.invalid),_groupChecked:ov(iv.checked),_placeholder:"&::placeholder",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &",_mediaDark:"@media (prefers-color-scheme: dark)",_dark:".chakra-ui-dark &, [data-theme=dark] &, &[data-theme=dark]",_light:".chakra-ui-light &, [data-theme=light] &, &[data-theme=light]"},aE=xm(Om);function Bm(){return Bm=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},Bm.apply(this,arguments)}var Nm=Fc({},o0,fo,YC,s0,Qu,jC,QC,XC,g_,$C,pp,Fm,Wo,rE,qC,eE,ZC,tE),iE=Object.assign({},Wo,Qu,s0,g_,pp);xm(iE);var oE=[...xm(Nm),...aE],sE=Bm({},Nm,Om),lE=C=>C in sE,uE=C=>B=>{if(!B.__breakpoints)return C;var{isResponsive:e,toArrayValue:k,media:z}=B.__breakpoints,l={};for(var o in C){var c=tc(C[o],B);if(c!=null){if(c=qf(c)&&e(c)?k(c):c,!Array.isArray(c)){l[o]=c;continue}for(var p=c.slice(0,z.length).length,t=0;t<p;t+=1){var n=z==null?void 0:z[t];if(!n){l[o]=c[t];continue}l[n]=l[n]||{},c[t]!=null&&(l[n][o]=c[t])}}}return l},fE=(C,B)=>C.startsWith("--")&&mm(B)&&!V2(B),cE=(C,B)=>{var e,k;if(B==null)return B;var z=t=>{var n,a;return(n=C.__cssMap)==null||(a=n[t])==null?void 0:a.varRef},l=t=>{var n;return(n=z(t))!=null?n:t},o=B.split(",").map(t=>t.trim()),[c,p]=o;return B=(e=(k=z(c))!=null?k:l(p))!=null?e:l(B),B};function hE(C){var{configs:B={},pseudos:e={},theme:k}=C,z=function l(o,c){c===void 0&&(c=!1);var p=tc(o,k),t=uE(p)(k),n={};for(var a in t){var i,r,f,u,s,h=t[a],d=tc(h,k);a in e&&(a=e[a]),fE(a,d)&&(d=cE(k,d));var y=B[a];if(y===!0&&(y={property:a}),qf(d)){var m;n[a]=(m=n[a])!=null?m:{},n[a]=Fc({},n[a],l(d,!0));continue}var g=(i=(r=y)==null||r.transform==null?void 0:r.transform(d,k,p))!=null?i:d;g=(f=y)!=null&&f.processResult?l(g,!0):g;var x=tc((u=y)==null?void 0:u.property,k);if(!c&&(s=y)!=null&&s.static){var A=tc(y.static,k);n=Fc({},n,A)}if(x&&Array.isArray(x)){for(var b of x)n[b]=g;continue}if(x){x==="&"&&qf(g)?n=Fc({},n,g):n[x]=g;continue}if(qf(g)){n=Fc({},n,g);continue}n[a]=g}return n};return z}var m_=C=>B=>{var e=hE({theme:B,pseudos:Om,configs:Nm});return e(C)};function y_(C){return qf(C)&&C.reference?C.reference:String(C)}var l0=function(B){for(var e=arguments.length,k=new Array(e>1?e-1:0),z=1;z<e;z++)k[z-1]=arguments[z];return k.map(y_).join(" "+B+" ").replace(/calc/g,"")},x_=function(){for(var B=arguments.length,e=new Array(B),k=0;k<B;k++)e[k]=arguments[k];return"calc("+l0("+",...e)+")"},b_=function(){for(var B=arguments.length,e=new Array(B),k=0;k<B;k++)e[k]=arguments[k];return"calc("+l0("-",...e)+")"},Um=function(){for(var B=arguments.length,e=new Array(B),k=0;k<B;k++)e[k]=arguments[k];return"calc("+l0("*",...e)+")"},__=function(){for(var B=arguments.length,e=new Array(B),k=0;k<B;k++)e[k]=arguments[k];return"calc("+l0("/",...e)+")"},w_=C=>{var B=y_(C);return B!=null&&!Number.isNaN(parseFloat(B))?String(B).startsWith("-")?String(B).slice(1):"-"+B:Um(B,-1)},oh=Object.assign(C=>({add:function(){for(var e=arguments.length,k=new Array(e),z=0;z<e;z++)k[z]=arguments[z];return oh(x_(C,...k))},subtract:function(){for(var e=arguments.length,k=new Array(e),z=0;z<e;z++)k[z]=arguments[z];return oh(b_(C,...k))},multiply:function(){for(var e=arguments.length,k=new Array(e),z=0;z<e;z++)k[z]=arguments[z];return oh(Um(C,...k))},divide:function(){for(var e=arguments.length,k=new Array(e),z=0;z<e;z++)k[z]=arguments[z];return oh(__(C,...k))},negate:()=>oh(w_(C)),toString:()=>C.toString()}),{add:x_,subtract:b_,multiply:Um,divide:__,negate:w_});function vE(C,B){return B===void 0&&(B="-"),C.replace(/\s+/g,B)}function T_(C){var B=vE(C.toString());if(B.includes("\\."))return C;var e=!Number.isInteger(parseFloat(C.toString()));return e?B.replace(".","\\."):C}function pE(C,B){return B===void 0&&(B=""),[B,T_(C)].filter(Boolean).join("-")}function dE(C,B){return"var("+T_(C)+(B?", "+B:"")+")"}function gE(C,B){return B===void 0&&(B=""),"--"+pE(C,B)}function A_(C,B,e){var k=gE(C,e);return{variable:k,reference:dE(k,B)}}function Vm(){return Vm=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},Vm.apply(this,arguments)}function mE(C,B){var e={cssMap:{},cssVars:{}};return nC(C,(k,z)=>{var l,[o]=z,c=(l=Hm[o])!=null?l:Hm.defaultHandler,{cssVars:p,cssMap:t}=c(z,k,B);Object.assign(e.cssVars,p),Object.assign(e.cssMap,t)}),e}var Hm={space:(C,B,e)=>{var k=Hm.defaultHandler(C,B,e),[z,...l]=C,o=z+".-"+l.join("."),c=C.join("-"),{variable:p,reference:t}=A_(c,void 0,e.cssVarPrefix),n=oh.negate(B),a=oh.negate(t);return{cssVars:k.cssVars,cssMap:Vm({},k.cssMap,{[o]:{value:""+n,var:""+p,varRef:a}})}},defaultHandler:(C,B,e)=>{var k=C.join("."),z=C.join("-"),{variable:l,reference:o}=A_(z,void 0,e.cssVarPrefix);return{cssVars:{[l]:B},cssMap:{[k]:{value:B,var:l,varRef:o}}}}};function yE(C,B){if(C==null)return{};var e={},k=Object.keys(C),z,l;for(l=0;l<k.length;l++)z=k[l],!(B.indexOf(z)>=0)&&(e[z]=C[z]);return e}var xE=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur"];function bE(C){var B=xE;return Ek(C,B)}function _E(C){var B=yE(C,["__cssMap","__cssVars","__breakpoints"]);return B}function Gm(){return Gm=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},Gm.apply(this,arguments)}function wE(C){var B,e=_E(C),k=bE(e),z=(B=e.config)==null?void 0:B.cssVarPrefix,{cssMap:l,cssVars:o}=mE(k,{cssVarPrefix:z}),c={"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"};return Object.assign(e,{__cssVars:Gm({},c,o),__cssMap:l,__breakpoints:zk(e.breakpoints)}),e}var TE=typeof Element!="undefined",AE=typeof Map=="function",SE=typeof Set=="function",ME=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function u0(C,B){if(C===B)return!0;if(C&&B&&typeof C=="object"&&typeof B=="object"){if(C.constructor!==B.constructor)return!1;var e,k,z;if(Array.isArray(C)){if(e=C.length,e!=B.length)return!1;for(k=e;k--!=0;)if(!u0(C[k],B[k]))return!1;return!0}var l;if(AE&&C instanceof Map&&B instanceof Map){if(C.size!==B.size)return!1;for(l=C.entries();!(k=l.next()).done;)if(!B.has(k.value[0]))return!1;for(l=C.entries();!(k=l.next()).done;)if(!u0(k.value[1],B.get(k.value[0])))return!1;return!0}if(SE&&C instanceof Set&&B instanceof Set){if(C.size!==B.size)return!1;for(l=C.entries();!(k=l.next()).done;)if(!B.has(k.value[0]))return!1;return!0}if(ME&&ArrayBuffer.isView(C)&&ArrayBuffer.isView(B)){if(e=C.length,e!=B.length)return!1;for(k=e;k--!=0;)if(C[k]!==B[k])return!1;return!0}if(C.constructor===RegExp)return C.source===B.source&&C.flags===B.flags;if(C.valueOf!==Object.prototype.valueOf)return C.valueOf()===B.valueOf();if(C.toString!==Object.prototype.toString)return C.toString()===B.toString();if(z=Object.keys(C),e=z.length,e!==Object.keys(B).length)return!1;for(k=e;k--!=0;)if(!Object.prototype.hasOwnProperty.call(B,z[k]))return!1;if(TE&&C instanceof Element)return!1;for(k=e;k--!=0;)if(!((z[k]==="_owner"||z[k]==="__v"||z[k]==="__o")&&C.$$typeof)&&!u0(C[z[k]],B[z[k]]))return!1;return!0}return C!==C&&B!==B}var kE=function(B,e){try{return u0(B,e)}catch(k){if((k.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw k}},CE=C=>{var{cssVarsRoot:B=":host, :root",theme:e,children:k}=C,z=Vs(()=>wE(e),[e]);return pa(Tk,{theme:z},pa(gm,{styles:l=>({[B]:l.__cssVars})}),k)};function S_(){var C=wo(op);if(!C)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return C}var[EE,f0]=av({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "}),LE=()=>{var{colorMode:C}=f_();return pa(gm,{styles:B=>{var e=Qd(B,"styles.global"),k=tc(e,{theme:B,colorMode:C});if(!!k){var z=m_(k)(B);return z}}})},PE=["a","b","article","aside","blockquote","button","caption","cite","circle","code","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","img","input","kbd","label","li","main","mark","nav","ol","p","path","pre","q","rect","s","svg","section","select","strong","small","span","sub","sup","table","tbody","td","textarea","tfoot","th","thead","tr","ul"];function Wm(C){return H2(C,["styleConfig","size","variant","colorScheme"])}function Ym(){return Ym=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},Ym.apply(this,arguments)}function RE(){var C=f_(),B=S_();return Ym({},C,{theme:B})}var DE=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,IE=S2(function(C){return DE.test(C)||C.charCodeAt(0)===111&&C.charCodeAt(1)===110&&C.charCodeAt(2)<91}),FE=IE,zE=function(B){return B!=="theme"},M_=function(B){return typeof B=="string"&&B.charCodeAt(0)>96?FE:zE},k_=function(B,e,k){var z;if(e){var l=e.shouldForwardProp;z=B.__emotion_forwardProp&&l?function(o){return B.__emotion_forwardProp(o)&&l(o)}:l}return typeof z!="function"&&k&&(z=B.__emotion_forwardProp),z},OE=function C(B,e){var k=B.__emotion_real===B,z=k&&B.__emotion_base||B,l,o;e!==void 0&&(l=e.label,o=e.target);var c=k_(B,e,k),p=c||M_(z),t=!p("as");return function(){var n=arguments,a=k&&B.__emotion_styles!==void 0?B.__emotion_styles.slice(0):[];if(l!==void 0&&a.push("label:"+l+";"),n[0]==null||n[0].raw===void 0)a.push.apply(a,n);else{a.push(n[0][0]);for(var i=n.length,r=1;r<i;r++)a.push(n[r],n[0][r])}var f=O2(function(u,s,h){var d=t&&u.as||z,y="",m=[],g=u;if(u.theme==null){g={};for(var x in u)g[x]=u[x];g.theme=wo(op)}typeof u.className=="string"?y=dk(s.registered,m,u.className):u.className!=null&&(y=u.className+" ");var A=dm(a.concat(m),s.registered,g);P2(s,A,typeof d=="string"),y+=s.key+"-"+A.name,o!==void 0&&(y+=" "+o);var b=t&&c===void 0?M_(d):p,S={};for(var w in u)t&&w==="as"||b(w)&&(S[w]=u[w]);S.className=y,S.ref=h;var T=pa(d,S);return T});return f.displayName=l!==void 0?l:"Styled("+(typeof z=="string"?z:z.displayName||z.name||"Component")+")",f.defaultProps=B.defaultProps,f.__emotion_real=f,f.__emotion_base=z,f.__emotion_styles=a,f.__emotion_forwardProp=c,Object.defineProperty(f,"toString",{value:function(){return"."+o}}),f.withComponent=function(u,s){return C(u,ah({},e,s,{shouldForwardProp:k_(f,s,!0)})).apply(void 0,a)},f}},BE=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],jm=OE.bind();BE.forEach(function(C){jm[C]=jm(C)});var NE=new Set([...oE,"textStyle","layerStyle","apply","isTruncated","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),UE=new Set(["htmlWidth","htmlHeight","htmlSize"]),VE=C=>UE.has(C)||!NE.has(C);function C_(C,B){if(C==null)return{};var e={},k=Object.keys(C),z,l;for(l=0;l<k.length;l++)z=k[l],!(B.indexOf(z)>=0)&&(e[z]=C[z]);return e}var HE=C=>{var{baseStyle:B}=C;return e=>{var{css:k,__css:z,sx:l}=e,o=C_(e,["theme","css","__css","sx"]),c=G2(o,(a,i)=>lE(i)),p=tc(B,e),t=Object.assign({},z,p,W2(c),l),n=m_(t)(e.theme);return k?[n,k]:n}};function GE(C,B){var e=B??{},{baseStyle:k}=e,z=C_(e,["baseStyle"]);z.shouldForwardProp||(z.shouldForwardProp=VE);var l=HE({baseStyle:k});return jm(C,z)(l)}var Ol=GE;PE.forEach(C=>{Ol[C]=Ol(C)});function ac(C){return Xf(C)}function WE(C,B){if(C==null)return{};var e={},k=Object.keys(C),z,l;for(l=0;l<k.length;l++)z=k[l],!(B.indexOf(z)>=0)&&(e[z]=C[z]);return e}function c0(C,B,e){var k;B===void 0&&(B={}),e===void 0&&(e={});var{styleConfig:z}=B,l=WE(B,["styleConfig"]),{theme:o,colorMode:c}=RE(),p=Qd(o,"components."+C),t=z||p,n=Fc({theme:o,colorMode:c},(k=t==null?void 0:t.defaultProps)!=null?k:{},W2(H2(l,["children"]))),a=Eo({});if(t){var i,r,f,u,s,h,d=tc((i=t.baseStyle)!=null?i:{},n),y=tc((r=(f=t.variants)==null?void 0:f[n.variant])!=null?r:{},n),m=tc((u=(s=t.sizes)==null?void 0:s[n.size])!=null?u:{},n),g=Fc({},d,m,y);(h=e)!=null&&h.isMultiPart&&t.parts&&t.parts.forEach(A=>{var b;g[A]=(b=g[A])!=null?b:{}});var x=kE(a.current,g);x||(a.current=g)}return a.current}function YE(C,B){return c0(C,B,{isMultiPart:!0})}var jE={body:{classList:{add(){},remove(){}}},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}}},E_=jE,sv=()=>{},XE={document:E_,navigator:{userAgent:""},CustomEvent:function(){return this},addEventListener:sv,removeEventListener:sv,getComputedStyle(){return{getPropertyValue(){return""}}},matchMedia(){return{matches:!1,addListener:sv,removeListener:sv}},requestAnimationFrame(C){return typeof setTimeout=="undefined"?(C(),null):setTimeout(C,0)},cancelAnimationFrame(C){typeof setTimeout!="undefined"&&clearTimeout(C)},setTimeout:()=>0,clearTimeout:sv,setInterval:()=>0,clearInterval:sv},ZE=XE,KE={window:ZE,document:E_},L_=tv?{window,document}:KE,JE=rl(L_);function $E(C){var{children:B,environment:e}=C,[k,z]=Us(null),l=Vs(()=>{var c,p=k==null?void 0:k.ownerDocument,t=k==null?void 0:k.ownerDocument.defaultView,n=p?{document:p,window:t}:void 0,a=(c=e??n)!=null?c:L_;return a},[k,e]),o=!k&&!e;return nh.createElement(JE.Provider,{value:l},B,o&&nh.createElement("span",{ref:c=>{c&&z(c)}}))}var QE=C=>{var{children:B,colorModeManager:e,portalZIndex:k,resetCSS:z=!0,theme:l={},environment:o,cssVarsRoot:c}=C,p=pa($E,{environment:o},B);return pa(sC,null,pa(CE,{theme:l,cssVarsRoot:c},pa(c_,{colorModeManager:e,options:l.config},z&&pa(Mk,null),pa(LE,null),k?pa(r_,{zIndex:k},p):p)))};function bl(C,B){qE(C)&&(C="100%");var e=e6(C);return C=B===360?C:Math.min(B,Math.max(0,parseFloat(C))),e&&(C=parseInt(String(C*B),10)/100),Math.abs(C-B)<1e-6?1:(B===360?C=(C<0?C%B+B:C%B)/parseFloat(String(B)):C=C%B/parseFloat(String(B)),C)}function h0(C){return Math.min(1,Math.max(0,C))}function qE(C){return typeof C=="string"&&C.indexOf(".")!==-1&&parseFloat(C)===1}function e6(C){return typeof C=="string"&&C.indexOf("%")!==-1}function P_(C){return C=parseFloat(C),(isNaN(C)||C<0||C>1)&&(C=1),C}function v0(C){return C<=1?Number(C)*100+"%":C}function sh(C){return C.length===1?"0"+C:String(C)}function t6(C,B,e){return{r:bl(C,255)*255,g:bl(B,255)*255,b:bl(e,255)*255}}function R_(C,B,e){C=bl(C,255),B=bl(B,255),e=bl(e,255);var k=Math.max(C,B,e),z=Math.min(C,B,e),l=0,o=0,c=(k+z)/2;if(k===z)o=0,l=0;else{var p=k-z;switch(o=c>.5?p/(2-k-z):p/(k+z),k){case C:l=(B-e)/p+(B<e?6:0);break;case B:l=(e-C)/p+2;break;case e:l=(C-B)/p+4;break}l/=6}return{h:l,s:o,l:c}}function Xm(C,B,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?C+(B-C)*(6*e):e<1/2?B:e<2/3?C+(B-C)*(2/3-e)*6:C}function r6(C,B,e){var k,z,l;if(C=bl(C,360),B=bl(B,100),e=bl(e,100),B===0)z=e,l=e,k=e;else{var o=e<.5?e*(1+B):e+B-e*B,c=2*e-o;k=Xm(c,o,C+1/3),z=Xm(c,o,C),l=Xm(c,o,C-1/3)}return{r:k*255,g:z*255,b:l*255}}function D_(C,B,e){C=bl(C,255),B=bl(B,255),e=bl(e,255);var k=Math.max(C,B,e),z=Math.min(C,B,e),l=0,o=k,c=k-z,p=k===0?0:c/k;if(k===z)l=0;else{switch(k){case C:l=(B-e)/c+(B<e?6:0);break;case B:l=(e-C)/c+2;break;case e:l=(C-B)/c+4;break}l/=6}return{h:l,s:p,v:o}}function n6(C,B,e){C=bl(C,360)*6,B=bl(B,100),e=bl(e,100);var k=Math.floor(C),z=C-k,l=e*(1-B),o=e*(1-z*B),c=e*(1-(1-z)*B),p=k%6,t=[e,o,l,l,c,e][p],n=[c,e,e,o,l,l][p],a=[l,l,c,e,e,o][p];return{r:t*255,g:n*255,b:a*255}}function I_(C,B,e,k){var z=[sh(Math.round(C).toString(16)),sh(Math.round(B).toString(16)),sh(Math.round(e).toString(16))];return k&&z[0].startsWith(z[0].charAt(1))&&z[1].startsWith(z[1].charAt(1))&&z[2].startsWith(z[2].charAt(1))?z[0].charAt(0)+z[1].charAt(0)+z[2].charAt(0):z.join("")}function a6(C,B,e,k,z){var l=[sh(Math.round(C).toString(16)),sh(Math.round(B).toString(16)),sh(Math.round(e).toString(16)),sh(i6(k))];return z&&l[0].startsWith(l[0].charAt(1))&&l[1].startsWith(l[1].charAt(1))&&l[2].startsWith(l[2].charAt(1))&&l[3].startsWith(l[3].charAt(1))?l[0].charAt(0)+l[1].charAt(0)+l[2].charAt(0)+l[3].charAt(0):l.join("")}function i6(C){return Math.round(parseFloat(C)*255).toString(16)}function F_(C){return Iu(C)/255}function Iu(C){return parseInt(C,16)}function o6(C){return{r:C>>16,g:(C&65280)>>8,b:C&255}}var Zm={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function s6(C){var B={r:0,g:0,b:0},e=1,k=null,z=null,l=null,o=!1,c=!1;return typeof C=="string"&&(C=f6(C)),typeof C=="object"&&(dc(C.r)&&dc(C.g)&&dc(C.b)?(B=t6(C.r,C.g,C.b),o=!0,c=String(C.r).substr(-1)==="%"?"prgb":"rgb"):dc(C.h)&&dc(C.s)&&dc(C.v)?(k=v0(C.s),z=v0(C.v),B=n6(C.h,k,z),o=!0,c="hsv"):dc(C.h)&&dc(C.s)&&dc(C.l)&&(k=v0(C.s),l=v0(C.l),B=r6(C.h,k,l),o=!0,c="hsl"),Object.prototype.hasOwnProperty.call(C,"a")&&(e=C.a)),e=P_(e),{ok:o,format:C.format||c,r:Math.min(255,Math.max(B.r,0)),g:Math.min(255,Math.max(B.g,0)),b:Math.min(255,Math.max(B.b,0)),a:e}}var l6="[-\\+]?\\d+%?",u6="[-\\+]?\\d*\\.\\d+%?",zc="(?:"+u6+")|(?:"+l6+")",Km="[\\s|\\(]+("+zc+")[,|\\s]+("+zc+")[,|\\s]+("+zc+")\\s*\\)?",Jm="[\\s|\\(]+("+zc+")[,|\\s]+("+zc+")[,|\\s]+("+zc+")[,|\\s]+("+zc+")\\s*\\)?",Af={CSS_UNIT:new RegExp(zc),rgb:new RegExp("rgb"+Km),rgba:new RegExp("rgba"+Jm),hsl:new RegExp("hsl"+Km),hsla:new RegExp("hsla"+Jm),hsv:new RegExp("hsv"+Km),hsva:new RegExp("hsva"+Jm),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function f6(C){if(C=C.trim().toLowerCase(),C.length===0)return!1;var B=!1;if(Zm[C])C=Zm[C],B=!0;else if(C==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var e=Af.rgb.exec(C);return e?{r:e[1],g:e[2],b:e[3]}:(e=Af.rgba.exec(C),e?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=Af.hsl.exec(C),e?{h:e[1],s:e[2],l:e[3]}:(e=Af.hsla.exec(C),e?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=Af.hsv.exec(C),e?{h:e[1],s:e[2],v:e[3]}:(e=Af.hsva.exec(C),e?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=Af.hex8.exec(C),e?{r:Iu(e[1]),g:Iu(e[2]),b:Iu(e[3]),a:F_(e[4]),format:B?"name":"hex8"}:(e=Af.hex6.exec(C),e?{r:Iu(e[1]),g:Iu(e[2]),b:Iu(e[3]),format:B?"name":"hex"}:(e=Af.hex4.exec(C),e?{r:Iu(e[1]+e[1]),g:Iu(e[2]+e[2]),b:Iu(e[3]+e[3]),a:F_(e[4]+e[4]),format:B?"name":"hex8"}:(e=Af.hex3.exec(C),e?{r:Iu(e[1]+e[1]),g:Iu(e[2]+e[2]),b:Iu(e[3]+e[3]),format:B?"name":"hex"}:!1)))))))))}function dc(C){return Boolean(Af.CSS_UNIT.exec(String(C)))}var dp=function(){function C(B,e){B===void 0&&(B=""),e===void 0&&(e={});var k;if(B instanceof C)return B;typeof B=="number"&&(B=o6(B)),this.originalInput=B;var z=s6(B);this.originalInput=B,this.r=z.r,this.g=z.g,this.b=z.b,this.a=z.a,this.roundA=Math.round(100*this.a)/100,this.format=(k=e.format)!==null&&k!==void 0?k:z.format,this.gradientType=e.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=z.ok}return C.prototype.isDark=function(){return this.getBrightness()<128},C.prototype.isLight=function(){return!this.isDark()},C.prototype.getBrightness=function(){var B=this.toRgb();return(B.r*299+B.g*587+B.b*114)/1e3},C.prototype.getLuminance=function(){var B=this.toRgb(),e,k,z,l=B.r/255,o=B.g/255,c=B.b/255;return l<=.03928?e=l/12.92:e=Math.pow((l+.055)/1.055,2.4),o<=.03928?k=o/12.92:k=Math.pow((o+.055)/1.055,2.4),c<=.03928?z=c/12.92:z=Math.pow((c+.055)/1.055,2.4),.2126*e+.7152*k+.0722*z},C.prototype.getAlpha=function(){return this.a},C.prototype.setAlpha=function(B){return this.a=P_(B),this.roundA=Math.round(100*this.a)/100,this},C.prototype.toHsv=function(){var B=D_(this.r,this.g,this.b);return{h:B.h*360,s:B.s,v:B.v,a:this.a}},C.prototype.toHsvString=function(){var B=D_(this.r,this.g,this.b),e=Math.round(B.h*360),k=Math.round(B.s*100),z=Math.round(B.v*100);return this.a===1?"hsv("+e+", "+k+"%, "+z+"%)":"hsva("+e+", "+k+"%, "+z+"%, "+this.roundA+")"},C.prototype.toHsl=function(){var B=R_(this.r,this.g,this.b);return{h:B.h*360,s:B.s,l:B.l,a:this.a}},C.prototype.toHslString=function(){var B=R_(this.r,this.g,this.b),e=Math.round(B.h*360),k=Math.round(B.s*100),z=Math.round(B.l*100);return this.a===1?"hsl("+e+", "+k+"%, "+z+"%)":"hsla("+e+", "+k+"%, "+z+"%, "+this.roundA+")"},C.prototype.toHex=function(B){return B===void 0&&(B=!1),I_(this.r,this.g,this.b,B)},C.prototype.toHexString=function(B){return B===void 0&&(B=!1),"#"+this.toHex(B)},C.prototype.toHex8=function(B){return B===void 0&&(B=!1),a6(this.r,this.g,this.b,this.a,B)},C.prototype.toHex8String=function(B){return B===void 0&&(B=!1),"#"+this.toHex8(B)},C.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},C.prototype.toRgbString=function(){var B=Math.round(this.r),e=Math.round(this.g),k=Math.round(this.b);return this.a===1?"rgb("+B+", "+e+", "+k+")":"rgba("+B+", "+e+", "+k+", "+this.roundA+")"},C.prototype.toPercentageRgb=function(){var B=function(e){return Math.round(bl(e,255)*100)+"%"};return{r:B(this.r),g:B(this.g),b:B(this.b),a:this.a}},C.prototype.toPercentageRgbString=function(){var B=function(e){return Math.round(bl(e,255)*100)};return this.a===1?"rgb("+B(this.r)+"%, "+B(this.g)+"%, "+B(this.b)+"%)":"rgba("+B(this.r)+"%, "+B(this.g)+"%, "+B(this.b)+"%, "+this.roundA+")"},C.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var B="#"+I_(this.r,this.g,this.b,!1),e=0,k=Object.entries(Zm);e<k.length;e++){var z=k[e],l=z[0],o=z[1];if(B===o)return l}return!1},C.prototype.toString=function(B){var e=Boolean(B);B=B??this.format;var k=!1,z=this.a<1&&this.a>=0,l=!e&&z&&(B.startsWith("hex")||B==="name");return l?B==="name"&&this.a===0?this.toName():this.toRgbString():(B==="rgb"&&(k=this.toRgbString()),B==="prgb"&&(k=this.toPercentageRgbString()),(B==="hex"||B==="hex6")&&(k=this.toHexString()),B==="hex3"&&(k=this.toHexString(!0)),B==="hex4"&&(k=this.toHex8String(!0)),B==="hex8"&&(k=this.toHex8String()),B==="name"&&(k=this.toName()),B==="hsl"&&(k=this.toHslString()),B==="hsv"&&(k=this.toHsvString()),k||this.toHexString())},C.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},C.prototype.clone=function(){return new C(this.toString())},C.prototype.lighten=function(B){B===void 0&&(B=10);var e=this.toHsl();return e.l+=B/100,e.l=h0(e.l),new C(e)},C.prototype.brighten=function(B){B===void 0&&(B=10);var e=this.toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(255*-(B/100)))),e.g=Math.max(0,Math.min(255,e.g-Math.round(255*-(B/100)))),e.b=Math.max(0,Math.min(255,e.b-Math.round(255*-(B/100)))),new C(e)},C.prototype.darken=function(B){B===void 0&&(B=10);var e=this.toHsl();return e.l-=B/100,e.l=h0(e.l),new C(e)},C.prototype.tint=function(B){return B===void 0&&(B=10),this.mix("white",B)},C.prototype.shade=function(B){return B===void 0&&(B=10),this.mix("black",B)},C.prototype.desaturate=function(B){B===void 0&&(B=10);var e=this.toHsl();return e.s-=B/100,e.s=h0(e.s),new C(e)},C.prototype.saturate=function(B){B===void 0&&(B=10);var e=this.toHsl();return e.s+=B/100,e.s=h0(e.s),new C(e)},C.prototype.greyscale=function(){return this.desaturate(100)},C.prototype.spin=function(B){var e=this.toHsl(),k=(e.h+B)%360;return e.h=k<0?360+k:k,new C(e)},C.prototype.mix=function(B,e){e===void 0&&(e=50);var k=this.toRgb(),z=new C(B).toRgb(),l=e/100,o={r:(z.r-k.r)*l+k.r,g:(z.g-k.g)*l+k.g,b:(z.b-k.b)*l+k.b,a:(z.a-k.a)*l+k.a};return new C(o)},C.prototype.analogous=function(B,e){B===void 0&&(B=6),e===void 0&&(e=30);var k=this.toHsl(),z=360/e,l=[this];for(k.h=(k.h-(z*B>>1)+720)%360;--B;)k.h=(k.h+z)%360,l.push(new C(k));return l},C.prototype.complement=function(){var B=this.toHsl();return B.h=(B.h+180)%360,new C(B)},C.prototype.monochromatic=function(B){B===void 0&&(B=6);for(var e=this.toHsv(),k=e.h,z=e.s,l=e.v,o=[],c=1/B;B--;)o.push(new C({h:k,s:z,v:l})),l=(l+c)%1;return o},C.prototype.splitcomplement=function(){var B=this.toHsl(),e=B.h;return[this,new C({h:(e+72)%360,s:B.s,l:B.l}),new C({h:(e+216)%360,s:B.s,l:B.l})]},C.prototype.onBackground=function(B){var e=this.toRgb(),k=new C(B).toRgb();return new C({r:k.r+(e.r-k.r)*e.a,g:k.g+(e.g-k.g)*e.a,b:k.b+(e.b-k.b)*e.a})},C.prototype.triad=function(){return this.polyad(3)},C.prototype.tetrad=function(){return this.polyad(4)},C.prototype.polyad=function(B){for(var e=this.toHsl(),k=e.h,z=[this],l=360/B,o=1;o<B;o++)z.push(new C({h:(k+o*l)%360,s:e.s,l:e.l}));return z},C.prototype.equals=function(B){return this.toRgbString()===new C(B).toRgbString()},C}();function z_(C){if(C===void 0&&(C={}),C.count!==void 0&&C.count!==null){var B=C.count,e=[];for(C.count=void 0;B>e.length;)C.count=null,C.seed&&(C.seed+=1),e.push(z_(C));return C.count=B,e}var k=c6(C.hue,C.seed),z=h6(k,C),l=v6(k,z,C),o={h:k,s:z,v:l};return C.alpha!==void 0&&(o.a=C.alpha),new dp(o)}function c6(C,B){var e=d6(C),k=p0(e,B);return k<0&&(k=360+k),k}function h6(C,B){if(B.hue==="monochrome")return 0;if(B.luminosity==="random")return p0([0,100],B.seed);var e=O_(C).saturationRange,k=e[0],z=e[1];switch(B.luminosity){case"bright":k=55;break;case"dark":k=z-10;break;case"light":z=55;break}return p0([k,z],B.seed)}function v6(C,B,e){var k=p6(C,B),z=100;switch(e.luminosity){case"dark":z=k+20;break;case"light":k=(z+k)/2;break;case"random":k=0,z=100;break}return p0([k,z],e.seed)}function p6(C,B){for(var e=O_(C).lowerBounds,k=0;k<e.length-1;k++){var z=e[k][0],l=e[k][1],o=e[k+1][0],c=e[k+1][1];if(B>=z&&B<=o){var p=(c-l)/(o-z),t=l-p*z;return p*B+t}}return 0}function d6(C){var B=parseInt(C,10);if(!Number.isNaN(B)&&B<360&&B>0)return[B,B];if(typeof C=="string"){var e=N_.find(function(o){return o.name===C});if(e){var k=B_(e);if(k.hueRange)return k.hueRange}var z=new dp(C);if(z.isValid){var l=z.toHsv().h;return[l,l]}}return[0,360]}function O_(C){C>=334&&C<=360&&(C-=360);for(var B=0,e=N_;B<e.length;B++){var k=e[B],z=B_(k);if(z.hueRange&&C>=z.hueRange[0]&&C<=z.hueRange[1])return z}throw Error("Color not found")}function p0(C,B){if(B===void 0)return Math.floor(C[0]+Math.random()*(C[1]+1-C[0]));var e=C[1]||1,k=C[0]||0;B=(B*9301+49297)%233280;var z=B/233280;return Math.floor(k+z*(e-k))}function B_(C){var B=C.lowerBounds[0][0],e=C.lowerBounds[C.lowerBounds.length-1][0],k=C.lowerBounds[C.lowerBounds.length-1][1],z=C.lowerBounds[0][1];return{name:C.name,hueRange:C.hueRange,lowerBounds:C.lowerBounds,saturationRange:[B,e],brightnessRange:[k,z]}}var N_=[{name:"monochrome",hueRange:null,lowerBounds:[[0,0],[100,0]]},{name:"red",hueRange:[-26,18],lowerBounds:[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]},{name:"orange",hueRange:[19,46],lowerBounds:[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]},{name:"yellow",hueRange:[47,62],lowerBounds:[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]},{name:"green",hueRange:[63,178],lowerBounds:[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]},{name:"blue",hueRange:[179,257],lowerBounds:[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]},{name:"purple",hueRange:[258,282],lowerBounds:[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]},{name:"pink",hueRange:[283,334],lowerBounds:[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]}],Hs=(C,B,e)=>{var k=Qd(C,"colors."+B,B),{isValid:z}=new dp(k);return z?k:e},g6=C=>B=>{var e=Hs(B,C),k=new dp(e).isDark();return k?"dark":"light"},m6=C=>B=>g6(C)(B)==="dark",lv=(C,B)=>e=>{var k=Hs(e,C);return new dp(k).setAlpha(B).toRgbString()};function U_(C,B){return C===void 0&&(C="1rem"),B===void 0&&(B="rgba(255, 255, 255, 0.15)"),{backgroundImage:`linear-gradient(
    45deg,
    `+B+` 25%,
    transparent 25%,
    transparent 50%,
    `+B+` 50%,
    `+B+` 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:C+" "+C}}function y6(C){var B=z_().toHexString();return!C||Ck(C)?B:C.string&&C.colors?b6(C.string,C.colors):C.string&&!C.colors?x6(C.string):C.colors&&!C.string?_6(C.colors):B}function x6(C){var B=0;if(C.length===0)return B.toString();for(var e=0;e<C.length;e+=1)B=C.charCodeAt(e)+((B<<5)-B),B=B&B;for(var k="#",z=0;z<3;z+=1){var l=B>>z*8&255;k+=("00"+l.toString(16)).substr(-2)}return k}function b6(C,B){var e=0;if(C.length===0)return B[0];for(var k=0;k<C.length;k+=1)e=C.charCodeAt(k)+((e<<5)-e),e=e&e;return e=(e%B.length+B.length)%B.length,B[e]}function _6(C){return C[Math.floor(Math.random()*C.length)]}function oa(C,B){return e=>e.colorMode==="dark"?B:C}function gp(C){var{orientation:B,vertical:e,horizontal:k}=C;return B?B==="vertical"?e:k:{}}function $m(){return $m=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},$m.apply(this,arguments)}var w6=C=>($2({condition:!0,message:["[chakra-ui]: createBreakpoints(...) will be deprecated pretty soon","simply pass the breakpoints as an object. Remove the createBreakpoint(..) call"].join("")}),$m({base:"0em"},C));function lh(C,B,e){return B in C?Object.defineProperty(C,B,{value:e,enumerable:!0,configurable:!0,writable:!0}):C[B]=e,C}class T6{constructor(B){var e=this;this.name=B,lh(this,"map",{}),lh(this,"called",!1),lh(this,"assert",()=>{if(!this.called){this.called=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}),lh(this,"parts",function(){e.assert();for(var k=arguments.length,z=new Array(k),l=0;l<k;l++)z[l]=arguments[l];for(var o of z)e.map[o]=e.toPart(o);return e}),lh(this,"extend",function(){for(var k=arguments.length,z=new Array(k),l=0;l<k;l++)z[l]=arguments[l];for(var o of z)o in e.map||(e.map[o]=e.toPart(o));return e}),lh(this,"toPart",k=>{var z=["container","root"].includes(k??"")?[this.name]:[this.name,k],l=z.filter(Boolean).join("__"),o="chakra-"+l,c={className:o,selector:"."+o,toString:()=>k};return c}),lh(this,"__type",{})}get selectors(){var B=Object.fromEntries(Object.entries(this.map).map(e=>{var[k,z]=e;return[k,z.selector]}));return B}get classNames(){var B=Object.fromEntries(Object.entries(this.map).map(e=>{var[k,z]=e;return[k,z.className]}));return B}get keys(){return Object.keys(this.map)}}function Do(C){return new T6(C)}function V_(C){return qf(C)&&C.reference?C.reference:String(C)}var d0=function(B){for(var e=arguments.length,k=new Array(e>1?e-1:0),z=1;z<e;z++)k[z-1]=arguments[z];return k.map(V_).join(" "+B+" ").replace(/calc/g,"")},H_=function(){for(var B=arguments.length,e=new Array(B),k=0;k<B;k++)e[k]=arguments[k];return"calc("+d0("+",...e)+")"},G_=function(){for(var B=arguments.length,e=new Array(B),k=0;k<B;k++)e[k]=arguments[k];return"calc("+d0("-",...e)+")"},Qm=function(){for(var B=arguments.length,e=new Array(B),k=0;k<B;k++)e[k]=arguments[k];return"calc("+d0("*",...e)+")"},W_=function(){for(var B=arguments.length,e=new Array(B),k=0;k<B;k++)e[k]=arguments[k];return"calc("+d0("/",...e)+")"},Y_=C=>{var B=V_(C);return B!=null&&!Number.isNaN(parseFloat(B))?String(B).startsWith("-")?String(B).slice(1):"-"+B:Qm(B,-1)},gc=Object.assign(C=>({add:function(){for(var e=arguments.length,k=new Array(e),z=0;z<e;z++)k[z]=arguments[z];return gc(H_(C,...k))},subtract:function(){for(var e=arguments.length,k=new Array(e),z=0;z<e;z++)k[z]=arguments[z];return gc(G_(C,...k))},multiply:function(){for(var e=arguments.length,k=new Array(e),z=0;z<e;z++)k[z]=arguments[z];return gc(Qm(C,...k))},divide:function(){for(var e=arguments.length,k=new Array(e),z=0;z<e;z++)k[z]=arguments[z];return gc(W_(C,...k))},negate:()=>gc(Y_(C)),toString:()=>C.toString()}),{add:H_,subtract:G_,multiply:Qm,divide:W_,negate:Y_});function A6(C){return!Number.isInteger(parseFloat(C.toString()))}function S6(C,B){return B===void 0&&(B="-"),C.replace(/\s+/g,B)}function j_(C){var B=S6(C.toString());return B.includes("\\.")?C:A6(C)?B.replace(".","\\."):C}function M6(C,B){return B===void 0&&(B=""),[B,j_(C)].filter(Boolean).join("-")}function k6(C,B){return"var("+j_(C)+(B?", "+B:"")+")"}function C6(C,B){return B===void 0&&(B=""),"--"+M6(C,B)}function Fu(C,B){var e=C6(C,B==null?void 0:B.prefix);return{variable:e,reference:k6(e,E6(B==null?void 0:B.fallback))}}function E6(C){return typeof C=="string"?C:C==null?void 0:C.reference}var L6=Do("accordion").parts("container","item","button","panel").extend("icon"),P6=Do("alert").parts("title","description","container").extend("icon"),R6=Do("avatar").parts("label","badge","container").extend("excessLabel","group"),D6=Do("breadcrumb").parts("link","item","container").extend("separator");Do("button").parts();var I6=Do("checkbox").parts("control","icon","container").extend("label");Do("progress").parts("track","filledTrack").extend("label");var F6=Do("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),z6=Do("editable").parts("preview","input"),O6=Do("form").parts("container","requiredIndicator","helperText"),B6=Do("formError").parts("text","icon"),N6=Do("input").parts("addon","field","element"),U6=Do("list").parts("container","item","icon"),V6=Do("menu").parts("button","list","item").extend("groupTitle","command","divider"),H6=Do("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),G6=Do("numberinput").parts("root","field","stepperGroup","stepper");Do("pininput").parts("field");var W6=Do("popover").parts("content","header","body","footer").extend("popper","arrow"),Y6=Do("progress").parts("label","filledTrack","track"),j6=Do("radio").parts("container","control","label"),X6=Do("select").parts("field","icon"),Z6=Do("slider").parts("container","track","thumb","filledTrack"),K6=Do("stat").parts("container","label","helpText","number","icon"),J6=Do("switch").parts("container","track","thumb"),$6=Do("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),Q6=Do("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),q6=Do("tag").parts("container","label","closeButton"),eL={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},tL={transitionProperty:"common",transitionDuration:"normal",fontSize:"1rem",_focus:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:4,py:2},rL={pt:2,px:4,pb:5},nL={fontSize:"1.25em"},aL={container:eL,button:tL,panel:rL,icon:nL},iL={parts:L6.keys,baseStyle:aL},oL={container:{px:4,py:3},title:{fontWeight:"bold",lineHeight:6,marginEnd:2},description:{lineHeight:6},icon:{flexShrink:0,marginEnd:3,w:5,h:6}};function qm(C){var{theme:B,colorScheme:e}=C,k=Hs(B,e+".100",e),z=lv(e+".200",.16)(B);return oa(k,z)(C)}var sL=C=>{var{colorScheme:B}=C;return{container:{bg:qm(C)},icon:{color:oa(B+".500",B+".200")(C)}}},lL=C=>{var{colorScheme:B}=C;return{container:{paddingStart:3,borderStartWidth:"4px",borderStartColor:oa(B+".500",B+".200")(C),bg:qm(C)},icon:{color:oa(B+".500",B+".200")(C)}}},uL=C=>{var{colorScheme:B}=C;return{container:{pt:2,borderTopWidth:"4px",borderTopColor:oa(B+".500",B+".200")(C),bg:qm(C)},icon:{color:oa(B+".500",B+".200")(C)}}},fL=C=>{var{colorScheme:B}=C;return{container:{bg:oa(B+".500",B+".200")(C),color:oa("white","gray.900")(C)}}},cL={subtle:sL,"left-accent":lL,"top-accent":uL,solid:fL},hL={variant:"subtle",colorScheme:"blue"},vL={parts:P6.keys,baseStyle:oL,variants:cL,defaultProps:hL},X_={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"};function ey(){return ey=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},ey.apply(this,arguments)}var pL={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem"},dL={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},gL=ey({},X_,pL,{container:dL}),Z_=gL,mL=C=>({transform:"translate(25%, 25%)",borderRadius:"full",border:"0.2em solid",borderColor:oa("white","gray.800")(C)}),yL=C=>({bg:oa("gray.200","whiteAlpha.400")(C)}),xL=C=>{var{name:B,theme:e}=C,k=B?y6({string:B}):"gray.400",z=m6(k)(e),l="white";z||(l="gray.800");var o=oa("white","gray.800")(C);return{bg:k,color:l,borderColor:o,verticalAlign:"top"}},bL=C=>({badge:mL(C),excessLabel:yL(C),container:xL(C)});function Oc(C){var B=Z_[C];return{container:{width:C,height:C,fontSize:"calc("+(B??C)+" / 2.5)"},excessLabel:{width:C,height:C},label:{fontSize:"calc("+(B??C)+" / 2.5)",lineHeight:C!=="100%"?B??C:void 0}}}var _L={"2xs":Oc("4"),xs:Oc("6"),sm:Oc("8"),md:Oc("12"),lg:Oc("16"),xl:Oc("24"),"2xl":Oc("32"),full:Oc("100%")},wL={size:"md"},TL={parts:R6.keys,baseStyle:bL,sizes:_L,defaultProps:wL},AL={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold"},SL=C=>{var{colorScheme:B,theme:e}=C,k=lv(B+".500",.6)(e);return{bg:oa(B+".500",k)(C),color:oa("white","whiteAlpha.800")(C)}},ML=C=>{var{colorScheme:B,theme:e}=C,k=lv(B+".200",.16)(e);return{bg:oa(B+".100",k)(C),color:oa(B+".800",B+".200")(C)}},kL=C=>{var{colorScheme:B,theme:e}=C,k=lv(B+".200",.8)(e),z=Hs(e,B+".500"),l=oa(z,k)(C);return{color:l,boxShadow:"inset 0 0 0px 1px "+l}},CL={solid:SL,subtle:ML,outline:kL},EL={variant:"subtle",colorScheme:"gray"},mp={baseStyle:AL,variants:CL,defaultProps:EL},LL={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focus:{boxShadow:"outline"}},PL={link:LL},RL={parts:D6.keys,baseStyle:PL};function ty(){return ty=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},ty.apply(this,arguments)}var DL={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focus:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},K_=C=>{var{colorScheme:B,theme:e}=C;if(B==="gray")return{color:oa("inherit","whiteAlpha.900")(C),_hover:{bg:oa("gray.100","whiteAlpha.200")(C)},_active:{bg:oa("gray.200","whiteAlpha.300")(C)}};var k=lv(B+".200",.12)(e),z=lv(B+".200",.24)(e);return{color:oa(B+".600",B+".200")(C),bg:"transparent",_hover:{bg:oa(B+".50",k)(C)},_active:{bg:oa(B+".100",z)(C)}}},IL=C=>{var{colorScheme:B}=C,e=oa("gray.200","whiteAlpha.300")(C);return ty({border:"1px solid",borderColor:B==="gray"?e:"currentColor"},K_(C))},FL={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},zL=C=>{var B,{colorScheme:e}=C;if(e==="gray"){var k=oa("gray.100","whiteAlpha.200")(C);return{bg:k,_hover:{bg:oa("gray.200","whiteAlpha.300")(C),_disabled:{bg:k}},_active:{bg:oa("gray.300","whiteAlpha.400")(C)}}}var{bg:z=e+".500",color:l="white",hoverBg:o=e+".600",activeBg:c=e+".700"}=(B=FL[e])!=null?B:{},p=oa(z,e+".200")(C);return{bg:p,color:oa(l,"gray.800")(C),_hover:{bg:oa(o,e+".300")(C),_disabled:{bg:p}},_active:{bg:oa(c,e+".400")(C)}}},OL=C=>{var{colorScheme:B}=C;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:oa(B+".500",B+".200")(C),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:oa(B+".700",B+".500")(C)}}},BL={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:0,p:0},NL={ghost:K_,outline:IL,solid:zL,link:OL,unstyled:BL},UL={lg:{h:12,minW:12,fontSize:"lg",px:6},md:{h:10,minW:10,fontSize:"md",px:4},sm:{h:8,minW:8,fontSize:"sm",px:3},xs:{h:6,minW:6,fontSize:"xs",px:2}},VL={variant:"solid",size:"md",colorScheme:"gray"},HL={baseStyle:DL,variants:NL,sizes:UL,defaultProps:VL},GL=C=>{var{colorScheme:B}=C;return{w:"100%",transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:oa(B+".500",B+".200")(C),borderColor:oa(B+".500",B+".200")(C),color:oa("white","gray.900")(C),_hover:{bg:oa(B+".600",B+".300")(C),borderColor:oa(B+".600",B+".300")(C)},_disabled:{borderColor:oa("gray.200","transparent")(C),bg:oa("gray.200","whiteAlpha.300")(C),color:oa("gray.500","whiteAlpha.500")(C)}},_indeterminate:{bg:oa(B+".500",B+".200")(C),borderColor:oa(B+".500",B+".200")(C),color:oa("white","gray.900")(C)},_disabled:{bg:oa("gray.100","whiteAlpha.100")(C),borderColor:oa("gray.100","transparent")(C)},_focus:{boxShadow:"outline"},_invalid:{borderColor:oa("red.500","red.300")(C)}}},WL={userSelect:"none",_disabled:{opacity:.4}},YL={transitionProperty:"transform",transitionDuration:"normal"},jL=C=>({icon:YL,control:GL(C),label:WL}),XL={sm:{control:{h:3,w:3},label:{fontSize:"sm"},icon:{fontSize:"0.45rem"}},md:{control:{w:4,h:4},label:{fontSize:"md"},icon:{fontSize:"0.625rem"}},lg:{control:{w:5,h:5},label:{fontSize:"lg"},icon:{fontSize:"0.625rem"}}},ZL={size:"md",colorScheme:"blue"},ry={parts:I6.keys,baseStyle:jL,sizes:XL,defaultProps:ZL},yp=Fu("close-button-size"),KL=C=>{var B=oa("blackAlpha.100","whiteAlpha.100")(C),e=oa("blackAlpha.200","whiteAlpha.200")(C);return{w:[yp.reference],h:[yp.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{bg:B},_active:{bg:e},_focus:{boxShadow:"outline"}}},JL={lg:{[yp.variable]:"40px",fontSize:"16px"},md:{[yp.variable]:"32px",fontSize:"12px"},sm:{[yp.variable]:"24px",fontSize:"10px"}},$L={size:"md"},QL={baseStyle:KL,sizes:JL,defaultProps:$L},{variants:qL,defaultProps:eP}=mp,tP={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm"},rP={baseStyle:tP,variants:qL,defaultProps:eP},nP={w:"100%",mx:"auto",maxW:"60ch",px:"1rem"},aP={baseStyle:nP},iP={opacity:.6,borderColor:"inherit"},oP={borderStyle:"solid"},sP={borderStyle:"dashed"},lP={solid:oP,dashed:sP},uP={variant:"solid"},fP={baseStyle:iP,variants:lP,defaultProps:uP};function ny(){return ny=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},ny.apply(this,arguments)}function uv(C){return C==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:C}}}var cP={bg:"blackAlpha.600",zIndex:"overlay"},hP={display:"flex",zIndex:"modal",justifyContent:"center"},vP=C=>{var{isFullHeight:B}=C;return ny({},B&&{height:"100vh"},{zIndex:"modal",maxH:"100vh",bg:oa("white","gray.700")(C),color:"inherit",boxShadow:oa("lg","dark-lg")(C)})},pP={px:6,py:4,fontSize:"xl",fontWeight:"semibold"},dP={position:"absolute",top:2,insetEnd:3},gP={px:6,py:2,flex:1,overflow:"auto"},mP={px:6,py:4},yP=C=>({overlay:cP,dialogContainer:hP,dialog:vP(C),header:pP,closeButton:dP,body:gP,footer:mP}),xP={xs:uv("xs"),sm:uv("md"),md:uv("lg"),lg:uv("2xl"),xl:uv("4xl"),full:uv("full")},bP={size:"xs"},_P={parts:F6.keys,baseStyle:yP,sizes:xP,defaultProps:bP},wP={borderRadius:"md",py:"3px",transitionProperty:"common",transitionDuration:"normal"},TP={borderRadius:"md",py:"3px",transitionProperty:"common",transitionDuration:"normal",width:"full",_focus:{boxShadow:"outline"},_placeholder:{opacity:.6}},AP={preview:wP,input:TP},SP={parts:z6.keys,baseStyle:AP},MP=C=>({marginStart:1,color:oa("red.500","red.300")(C)}),kP=C=>({mt:2,color:oa("gray.500","whiteAlpha.600")(C),lineHeight:"normal",fontSize:"sm"}),CP=C=>({container:{width:"100%",position:"relative"},requiredIndicator:MP(C),helperText:kP(C)}),EP={parts:O6.keys,baseStyle:CP},LP={fontSize:"md",marginEnd:3,mb:2,fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},PP={baseStyle:LP},RP={fontFamily:"heading",fontWeight:"bold"},DP={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},IP={size:"xl"},FP={baseStyle:RP,sizes:DP,defaultProps:IP},zP={field:{width:"100%",minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal"}},Bc={lg:{fontSize:"lg",px:4,h:12,borderRadius:"md"},md:{fontSize:"md",px:4,h:10,borderRadius:"md"},sm:{fontSize:"sm",px:3,h:8,borderRadius:"sm"},xs:{fontSize:"xs",px:2,h:6,borderRadius:"sm"}},OP={lg:{field:Bc.lg,addon:Bc.lg},md:{field:Bc.md,addon:Bc.md},sm:{field:Bc.sm,addon:Bc.sm},xs:{field:Bc.xs,addon:Bc.xs}};function ay(C){var{focusBorderColor:B,errorBorderColor:e}=C;return{focusBorderColor:B||oa("blue.500","blue.300")(C),errorBorderColor:e||oa("red.500","red.300")(C)}}var BP=C=>{var{theme:B}=C,{focusBorderColor:e,errorBorderColor:k}=ay(C);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:oa("gray.300","whiteAlpha.400")(C)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_disabled:{opacity:.4,cursor:"not-allowed"},_invalid:{borderColor:Hs(B,k),boxShadow:"0 0 0 1px "+Hs(B,k)},_focus:{zIndex:1,borderColor:Hs(B,e),boxShadow:"0 0 0 1px "+Hs(B,e)}},addon:{border:"1px solid",borderColor:oa("inherit","whiteAlpha.50")(C),bg:oa("gray.100","whiteAlpha.300")(C)}}},NP=C=>{var{theme:B}=C,{focusBorderColor:e,errorBorderColor:k}=ay(C);return{field:{border:"2px solid",borderColor:"transparent",bg:oa("gray.100","whiteAlpha.50")(C),_hover:{bg:oa("gray.200","whiteAlpha.100")(C)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_disabled:{opacity:.4,cursor:"not-allowed"},_invalid:{borderColor:Hs(B,k)},_focus:{bg:"transparent",borderColor:Hs(B,e)}},addon:{border:"2px solid",borderColor:"transparent",bg:oa("gray.100","whiteAlpha.50")(C)}}},UP=C=>{var{theme:B}=C,{focusBorderColor:e,errorBorderColor:k}=ay(C);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:0,px:0,bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Hs(B,k),boxShadow:"0px 1px 0px 0px "+Hs(B,k)},_focus:{borderColor:Hs(B,e),boxShadow:"0px 1px 0px 0px "+Hs(B,e)}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:0,px:0,bg:"transparent"}}},VP={field:{bg:"transparent",px:0,height:"auto"},addon:{bg:"transparent",px:0,height:"auto"}},HP={outline:BP,filled:NP,flushed:UP,unstyled:VP},GP={size:"md",variant:"outline"},Zo={parts:N6.keys,baseStyle:zP,sizes:OP,variants:HP,defaultProps:GP},WP=C=>({bg:oa("gray.100","whiteAlpha")(C),borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"}),YP={baseStyle:WP},jP={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focus:{boxShadow:"outline"}},XP={baseStyle:jP},ZP={marginEnd:"0.5rem",display:"inline",verticalAlign:"text-bottom"},KP={container:{},item:{},icon:ZP},JP={parts:U6.keys,baseStyle:KP},$P=C=>({bg:oa("#fff","gray.700")(C),boxShadow:oa("sm","dark-lg")(C),color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px"}),QP=C=>({py:"0.4rem",px:"0.8rem",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{bg:oa("gray.100","whiteAlpha.100")(C)},_active:{bg:oa("gray.200","whiteAlpha.200")(C)},_expanded:{bg:oa("gray.100","whiteAlpha.100")(C)},_disabled:{opacity:.4,cursor:"not-allowed"}}),qP={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},e8={opacity:.6},t8={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"0.5rem",opacity:.6},r8={transitionProperty:"common",transitionDuration:"normal"},n8=C=>({button:r8,list:$P(C),item:QP(C),groupTitle:qP,command:e8,divider:t8}),a8={parts:V6.keys,baseStyle:n8},i8={bg:"blackAlpha.600",zIndex:"modal"},o8=C=>{var{isCentered:B,scrollBehavior:e}=C;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:B?"center":"flex-start",overflow:e==="inside"?"hidden":"auto"}},s8=C=>{var{scrollBehavior:B}=C;return{borderRadius:"md",bg:oa("white","gray.700")(C),color:"inherit",my:"3.75rem",zIndex:"modal",maxH:B==="inside"?"calc(100% - 7.5rem)":void 0,boxShadow:oa("lg","dark-lg")(C)}},l8={px:6,py:4,fontSize:"xl",fontWeight:"semibold"},u8={position:"absolute",top:2,insetEnd:3},f8=C=>{var{scrollBehavior:B}=C;return{px:6,py:2,flex:1,overflow:B==="inside"?"auto":void 0}},c8={px:6,py:4},h8=C=>({overlay:i8,dialogContainer:o8(C),dialog:s8(C),header:l8,closeButton:u8,body:f8(C),footer:c8});function Sf(C){return C==="full"?{dialog:{maxW:"100vw",minH:"100vh",my:0}}:{dialog:{maxW:C}}}var v8={xs:Sf("xs"),sm:Sf("sm"),md:Sf("md"),lg:Sf("lg"),xl:Sf("xl"),"2xl":Sf("2xl"),"3xl":Sf("3xl"),"4xl":Sf("4xl"),"5xl":Sf("5xl"),"6xl":Sf("6xl"),full:Sf("full")},p8={size:"md"},d8={parts:H6.keys,baseStyle:h8,sizes:v8,defaultProps:p8},g8={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2","3":".75rem","4":"1rem","5":"1.25rem","6":"1.5rem","7":"1.75rem","8":"2rem","9":"2.25rem","10":"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},J_=g8,$_,Q_;function iy(){return iy=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},iy.apply(this,arguments)}var{variants:m8,defaultProps:y8}=Zo,oy=Fu("number-input-stepper-width"),q_=Fu("number-input-input-padding"),x8=gc(oy).add("0.5rem").toString(),b8={[oy.variable]:"24px",[q_.variable]:x8},_8=($_=(Q_=Zo.baseStyle)==null?void 0:Q_.field)!=null?$_:{},w8={width:[oy.reference]},T8=C=>({borderStart:"1px solid",borderStartColor:oa("inherit","whiteAlpha.300")(C),color:oa("inherit","whiteAlpha.800")(C),_active:{bg:oa("gray.200","whiteAlpha.300")(C)},_disabled:{opacity:.4,cursor:"not-allowed"}}),A8=C=>({root:b8,field:_8,stepperGroup:w8,stepper:T8(C)});function g0(C){var B,e,k=Zo.sizes[C],z={lg:"md",md:"md",sm:"sm",xs:"sm"},l=(B=(e=k.field)==null?void 0:e.fontSize)!=null?B:"md",o=J_.fontSizes[l.toString()];return{field:iy({},k.field,{paddingInlineEnd:q_.reference,verticalAlign:"top"}),stepper:{fontSize:gc(o).multiply(.75).toString(),_first:{borderTopEndRadius:z[C]},_last:{borderBottomEndRadius:z[C],mt:"-1px",borderTopWidth:1}}}}var S8={xs:g0("xs"),sm:g0("sm"),md:g0("md"),lg:g0("lg")},M8={parts:G6.keys,baseStyle:A8,sizes:S8,variants:m8,defaultProps:y8},ew;function sy(){return sy=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},sy.apply(this,arguments)}var k8=sy({},Zo.baseStyle.field,{textAlign:"center"}),C8={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},E8={outline:C=>{var B;return(B=Zo.variants.outline(C).field)!=null?B:{}},flushed:C=>{var B;return(B=Zo.variants.flushed(C).field)!=null?B:{}},filled:C=>{var B;return(B=Zo.variants.filled(C).field)!=null?B:{}},unstyled:(ew=Zo.variants.unstyled.field)!=null?ew:{}},L8=Zo.defaultProps,P8={baseStyle:k8,sizes:C8,variants:E8,defaultProps:L8},ly=Fu("popper-bg"),R8=Fu("popper-arrow-bg"),D8=Fu("popper-arrow-shadow-color"),I8={zIndex:10},F8=C=>{var B=oa("white","gray.700")(C),e=oa("gray.200","whiteAlpha.300")(C);return{[ly.variable]:"colors."+B,bg:ly.reference,[R8.variable]:ly.reference,[D8.variable]:"colors."+e,width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focus:{outline:0,boxShadow:"outline"}}},z8={px:3,py:2,borderBottomWidth:"1px"},O8={px:3,py:2},B8={px:3,py:2,borderTopWidth:"1px"},N8=C=>({popper:I8,content:F8(C),header:z8,body:O8,footer:B8,arrow:{}}),U8={parts:W6.keys,baseStyle:N8};function m0(){return m0=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},m0.apply(this,arguments)}function V8(C){var{colorScheme:B,theme:e,isIndeterminate:k,hasStripe:z}=C,l=oa(U_(),U_("1rem","rgba(0,0,0,0.1)"))(C),o=oa(B+".500",B+".200")(C),c=`linear-gradient(
    to right,
    transparent 0%,
    `+Hs(e,o)+` 50%,
    transparent 100%
  )`,p=!k&&z;return m0({},p&&l,k?{bgImage:c}:{bgColor:o})}var H8={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},G8=C=>({bg:oa("gray.100","whiteAlpha.300")(C)}),W8=C=>m0({transitionProperty:"common",transitionDuration:"slow"},V8(C)),Y8=C=>({label:H8,filledTrack:W8(C),track:G8(C)}),j8={xs:{track:{h:"0.25rem"}},sm:{track:{h:"0.5rem"}},md:{track:{h:"0.75rem"}},lg:{track:{h:"1rem"}}},X8={size:"md",colorScheme:"blue"},Z8={parts:Y6.keys,sizes:j8,baseStyle:Y8,defaultProps:X8};function y0(){return y0=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},y0.apply(this,arguments)}var K8=C=>{var{control:B={}}=ry.baseStyle(C);return y0({},B,{borderRadius:"full",_checked:y0({},B._checked,{_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}})})},J8=C=>({label:ry.baseStyle(C).label,control:K8(C)}),$8={md:{control:{w:4,h:4},label:{fontSize:"md"}},lg:{control:{w:5,h:5},label:{fontSize:"lg"}},sm:{control:{width:3,height:3},label:{fontSize:"sm"}}},Q8={size:"md",colorScheme:"blue"},q8={parts:j6.keys,baseStyle:J8,sizes:$8,defaultProps:Q8};function xp(){return xp=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},xp.apply(this,arguments)}var eR=C=>xp({},Zo.baseStyle.field,{bg:oa("white","gray.700")(C),appearance:"none",paddingBottom:"1px",lineHeight:"normal","> option, > optgroup":{bg:oa("white","gray.700")(C)}}),tR={width:"1.5rem",height:"100%",insetEnd:"0.5rem",position:"relative",color:"currentColor",fontSize:"1.25rem",_disabled:{opacity:.5}},rR=C=>({field:eR(C),icon:tR}),nR=xp({},Zo.sizes,{xs:xp({},Zo.sizes.xs,{icon:{insetEnd:"0.25rem"}})}),aR={parts:X6.keys,baseStyle:rR,sizes:nR,variants:Zo.variants,defaultProps:Zo.defaultProps},iR=(C,B)=>B2({from:{borderColor:C,background:C},to:{borderColor:B,background:B}}),oR=C=>{var B=oa("gray.100","gray.800")(C),e=oa("gray.400","gray.600")(C),{startColor:k=B,endColor:z=e,speed:l,theme:o}=C,c=Hs(o,k),p=Hs(o,z);return{opacity:.7,borderRadius:"2px",borderColor:c,background:p,animation:l+"s linear infinite alternate "+iR(c,p)}},sR={baseStyle:oR},lR=C=>({borderRadius:"md",fontWeight:"semibold",_focus:{boxShadow:"outline",padding:"1rem",position:"fixed",top:"1.5rem",insetStart:"1.5rem",bg:oa("white","gray.700")(C)}}),uR={baseStyle:lR};function x0(){return x0=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},x0.apply(this,arguments)}function fR(C){return gp({orientation:C.orientation,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}})}var cR=C=>{var{orientation:B}=C;return x0({display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"}},gp({orientation:B,vertical:{h:"100%"},horizontal:{w:"100%"}}))},hR=C=>({overflow:"hidden",borderRadius:"sm",bg:oa("gray.200","whiteAlpha.200")(C),_disabled:{bg:oa("gray.300","whiteAlpha.300")(C)}}),vR=C=>x0({display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focus:{boxShadow:"outline"},_disabled:{bg:"gray.300"}},fR(C)),pR=C=>{var{colorScheme:B}=C;return{width:"inherit",height:"inherit",bg:oa(B+".500",B+".200")(C)}},dR=C=>({container:cR(C),track:hR(C),thumb:vR(C),filledTrack:pR(C)}),gR=C=>({thumb:{w:"16px",h:"16px"},track:gp({orientation:C.orientation,horizontal:{h:"4px"},vertical:{w:"4px"}})}),mR=C=>({thumb:{w:"14px",h:"14px"},track:gp({orientation:C.orientation,horizontal:{h:"4px"},vertical:{w:"4px"}})}),yR=C=>({thumb:{w:"10px",h:"10px"},track:gp({orientation:C.orientation,horizontal:{h:"2px"},vertical:{w:"2px"}})}),xR={lg:gR,md:mR,sm:yR},bR={size:"md",colorScheme:"blue"},_R={parts:Z6.keys,sizes:xR,baseStyle:dR,defaultProps:bR},uh=Fu("spinner-size"),wR={width:[uh.reference],height:[uh.reference]},TR={xs:{[uh.variable]:"0.75rem"},sm:{[uh.variable]:"1rem"},md:{[uh.variable]:"1.5rem"},lg:{[uh.variable]:"2rem"},xl:{[uh.variable]:"3rem"}},AR={size:"md"},SR={baseStyle:wR,sizes:TR,defaultProps:AR},MR={fontWeight:"medium"},kR={opacity:.8,marginBottom:2},CR={verticalAlign:"baseline",fontWeight:"semibold"},ER={marginEnd:1,w:"14px",h:"14px",verticalAlign:"middle"},LR={container:{},label:MR,helpText:kR,number:CR,icon:ER},PR={md:{label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}}},RR={size:"md"},DR={parts:K6.keys,baseStyle:LR,sizes:PR,defaultProps:RR},bp=Fu("switch-track-width"),fh=Fu("switch-track-height"),uy=Fu("switch-track-diff"),IR=gc.subtract(bp,fh),fy=Fu("switch-thumb-x"),FR=C=>{var{colorScheme:B}=C;return{borderRadius:"full",p:"2px",width:[bp.reference],height:[fh.reference],transitionProperty:"common",transitionDuration:"fast",bg:oa("gray.300","whiteAlpha.400")(C),_focus:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{bg:oa(B+".500",B+".200")(C)}}},zR={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[fh.reference],height:[fh.reference],_checked:{transform:"translateX("+fy.reference+")"}},OR=C=>({container:{[uy.variable]:IR,[fy.variable]:uy.reference,_rtl:{[fy.variable]:gc(uy).negate().toString()}},track:FR(C),thumb:zR}),BR={sm:{container:{[bp.variable]:"1.375rem",[fh.variable]:"0.75rem"}},md:{container:{[bp.variable]:"1.875rem",[fh.variable]:"1rem"}},lg:{container:{[bp.variable]:"2.875rem",[fh.variable]:"1.5rem"}}},NR={size:"md",colorScheme:"blue"},UR={parts:J6.keys,baseStyle:OR,sizes:BR,defaultProps:NR};function fv(){return fv=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},fv.apply(this,arguments)}var VR={table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}},b0={"&[data-is-numeric=true]":{textAlign:"end"}},HR=C=>{var{colorScheme:B}=C;return{th:fv({color:oa("gray.600","gray.400")(C),borderBottom:"1px",borderColor:oa(B+".100",B+".700")(C)},b0),td:fv({borderBottom:"1px",borderColor:oa(B+".100",B+".700")(C)},b0),caption:{color:oa("gray.600","gray.100")(C)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}},GR=C=>{var{colorScheme:B}=C;return{th:fv({color:oa("gray.600","gray.400")(C),borderBottom:"1px",borderColor:oa(B+".100",B+".700")(C)},b0),td:fv({borderBottom:"1px",borderColor:oa(B+".100",B+".700")(C)},b0),caption:{color:oa("gray.600","gray.100")(C)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:oa(B+".100",B+".700")(C)},td:{background:oa(B+".100",B+".700")(C)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}},WR={simple:HR,striped:GR,unstyled:{}},YR={sm:{th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}},md:{th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}},lg:{th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}}},jR={variant:"simple",size:"md",colorScheme:"gray"},XR={parts:$6.keys,baseStyle:VR,variants:WR,sizes:YR,defaultProps:jR},ZR=C=>{var{orientation:B}=C;return{display:B==="vertical"?"flex":"block"}},KR=C=>{var{isFitted:B}=C;return{flex:B?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focus:{zIndex:1,boxShadow:"outline"}}},JR=C=>{var{align:B="start",orientation:e}=C,k={end:"flex-end",center:"center",start:"flex-start"};return{justifyContent:k[B],flexDirection:e==="vertical"?"column":"row"}},$R={p:4},QR=C=>({root:ZR(C),tab:KR(C),tablist:JR(C),tabpanel:$R}),qR={sm:{tab:{py:1,px:4,fontSize:"sm"}},md:{tab:{fontSize:"md",py:2,px:4}},lg:{tab:{fontSize:"lg",py:3,px:4}}},eD=C=>{var{colorScheme:B,orientation:e}=C,k=e==="vertical",z=e==="vertical"?"borderStart":"borderBottom",l=k?"marginStart":"marginBottom";return{tablist:{[z]:"2px solid",borderColor:"inherit"},tab:{[z]:"2px solid",borderColor:"transparent",[l]:"-2px",_selected:{color:oa(B+".600",B+".300")(C),borderColor:"currentColor"},_active:{bg:oa("gray.200","whiteAlpha.300")(C)},_disabled:{opacity:.4,cursor:"not-allowed"}}}},tD=C=>{var{colorScheme:B}=C;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",_selected:{color:oa(B+".600",B+".300")(C),borderColor:"inherit",borderBottomColor:oa("white","gray.800")(C)}},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}},rD=C=>{var{colorScheme:B}=C;return{tab:{border:"1px solid",borderColor:"inherit",bg:oa("gray.50","whiteAlpha.50")(C),mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{bg:oa("#fff","gray.800")(C),color:oa(B+".600",B+".300")(C),borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"}},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}},nD=C=>{var{colorScheme:B,theme:e}=C;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:Hs(e,B+".700"),bg:Hs(e,B+".100")}}}},aD=C=>{var{colorScheme:B}=C;return{tab:{borderRadius:"full",fontWeight:"semibold",color:oa("gray.600","inherit")(C),_selected:{color:oa("#fff","gray.800")(C),bg:oa(B+".600",B+".300")(C)}}}},iD={},oD={line:eD,enclosed:tD,"enclosed-colored":rD,"soft-rounded":nD,"solid-rounded":aD,unstyled:iD},sD={size:"md",variant:"line",colorScheme:"blue"},lD={parts:Q6.keys,baseStyle:QR,sizes:qR,variants:oD,defaultProps:sD},uD={fontWeight:"medium",lineHeight:1.2,outline:0,_focus:{boxShadow:"outline"}},fD={lineHeight:1.2,overflow:"visible"},cD={fontSize:"18px",w:"1.25rem",h:"1.25rem",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"0.375rem",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focus:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},hD={container:uD,label:fD,closeButton:cD},vD={sm:{container:{minH:"1.25rem",minW:"1.25rem",fontSize:"xs",px:2,borderRadius:"md"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}},md:{container:{minH:"1.5rem",minW:"1.5rem",fontSize:"sm",borderRadius:"md",px:2}},lg:{container:{minH:8,minW:8,fontSize:"md",borderRadius:"md",px:3}}},pD={subtle:C=>({container:mp.variants.subtle(C)}),solid:C=>({container:mp.variants.solid(C)}),outline:C=>({container:mp.variants.outline(C)})},dD={size:"md",variant:"subtle",colorScheme:"gray"},gD={parts:q6.keys,variants:pD,baseStyle:hD,sizes:vD,defaultProps:dD},tw,rw,nw,aw,iw;function cy(){return cy=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},cy.apply(this,arguments)}var mD=cy({},Zo.baseStyle.field,{paddingY:"8px",minHeight:"80px",lineHeight:"short",verticalAlign:"top"}),yD={outline:C=>{var B;return(B=Zo.variants.outline(C).field)!=null?B:{}},flushed:C=>{var B;return(B=Zo.variants.flushed(C).field)!=null?B:{}},filled:C=>{var B;return(B=Zo.variants.filled(C).field)!=null?B:{}},unstyled:(tw=Zo.variants.unstyled.field)!=null?tw:{}},xD={xs:(rw=Zo.sizes.xs.field)!=null?rw:{},sm:(nw=Zo.sizes.sm.field)!=null?nw:{},md:(aw=Zo.sizes.md.field)!=null?aw:{},lg:(iw=Zo.sizes.lg.field)!=null?iw:{}},bD={size:"md",variant:"outline"},_D={baseStyle:mD,sizes:xD,variants:yD,defaultProps:bD},hy=Fu("tooltip-bg"),wD=Fu("popper-arrow-bg"),TD=C=>{var B=oa("gray.700","gray.300")(C);return{[hy.variable]:"colors."+B,px:"8px",py:"2px",bg:[hy.reference],[wD.variable]:[hy.reference],color:oa("whiteAlpha.900","gray.900")(C),borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"320px",zIndex:"tooltip"}},AD={baseStyle:TD},SD=C=>({color:oa("red.500","red.300")(C),mt:2,fontSize:"sm"}),MD=C=>({marginEnd:"0.5em",color:oa("red.500","red.300")(C)}),kD=C=>({text:SD(C),icon:MD(C)}),CD={parts:B6.keys,baseStyle:kD},ED={Accordion:iL,Alert:vL,Avatar:TL,Badge:mp,Breadcrumb:RL,Button:HL,Checkbox:ry,CloseButton:QL,Code:rP,Container:aP,Divider:fP,Drawer:_P,Editable:SP,Form:EP,FormLabel:PP,Heading:FP,Input:Zo,Kbd:YP,Link:XP,List:JP,Menu:a8,Modal:d8,NumberInput:M8,PinInput:P8,Popover:U8,Progress:Z8,Radio:q8,Select:aR,Skeleton:sR,SkipLink:uR,Slider:_R,Spinner:SR,Stat:DR,Switch:UR,Table:XR,Tabs:lD,Tag:gD,Textarea:_D,Tooltip:AD,FormError:CD},LD={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},PD=LD,RD=w6({sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"}),DD=RD,ID={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},FD=ID,zD={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},OD=zD,BD={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},ND=BD,UD={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},VD={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},HD={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},GD={property:UD,easing:VD,duration:HD},WD=GD,YD={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},jD=YD,XD={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},ZD=XD;function vy(){return vy=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},vy.apply(this,arguments)}var KD=vy({breakpoints:DD,zIndices:jD,radii:OD,blur:ZD,colors:FD},J_,{sizes:Z_,shadows:ND,space:X_,borders:PD,transition:WD}),JD=KD,$D={global:C=>({body:{fontFamily:"body",color:oa("gray.800","whiteAlpha.900")(C),bg:oa("white","gray.800")(C),transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:oa("gray.400","whiteAlpha.400")(C)},"*, *::before, &::after":{borderColor:oa("gray.200","whiteAlpha.300")(C),wordWrap:"break-word"}})},QD=$D;function py(){return py=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},py.apply(this,arguments)}var qD="ltr",eI={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},tI=py({direction:qD},JD,{components:ED,styles:QD,config:eI}),rI=tI,nI=QE;nI.defaultProps={theme:rI};function _p(){return _p=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},_p.apply(this,arguments)}function aI(C,B){if(C==null)return{};var e={},k=Object.keys(C),z,l;for(l=0;l<k.length;l++)z=k[l],!(B.indexOf(z)>=0)&&(e[z]=C[z]);return e}var ow={path:pa("g",{stroke:"currentColor",strokeWidth:"1.5"},pa("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),pa("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),pa("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})),viewBox:"0 0 24 24"},sw=ac((C,B)=>{var{as:e,viewBox:k,color:z="currentColor",focusable:l=!1,children:o,className:c,__css:p}=C,t=aI(C,["as","viewBox","color","focusable","children","className","__css"]),n=ec("chakra-icon",c),a=_p({w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:z},p),i={ref:B,focusable:l,className:n,__css:a},r=k??ow.viewBox;if(e&&typeof e!="string")return pa(Ol.svg,_p({as:e},i,t));var f=o??ow.path;return pa(Ol.svg,_p({verticalAlign:"middle",viewBox:r},i,t),f)});function dy(){return dy=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},dy.apply(this,arguments)}function iI(C){var{viewBox:B="0 0 24 24",d:e,path:k,displayName:z,defaultProps:l={}}=C,o=ac((c,p)=>pa(sw,dy({ref:p,viewBox:B},l,c),k??pa("path",{fill:"currentColor",d:e})));return o}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var gy=function(C,B){return gy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,k){e.__proto__=k}||function(e,k){for(var z in k)Object.prototype.hasOwnProperty.call(k,z)&&(e[z]=k[z])},gy(C,B)};function lw(C,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");gy(C,B);function e(){this.constructor=C}C.prototype=B===null?Object.create(B):(e.prototype=B.prototype,new e)}var ya=function(){return ya=Object.assign||function(B){for(var e,k=1,z=arguments.length;k<z;k++){e=arguments[k];for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(B[l]=e[l])}return B},ya.apply(this,arguments)};function zu(C,B){var e={};for(var k in C)Object.prototype.hasOwnProperty.call(C,k)&&B.indexOf(k)<0&&(e[k]=C[k]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var z=0,k=Object.getOwnPropertySymbols(C);z<k.length;z++)B.indexOf(k[z])<0&&Object.prototype.propertyIsEnumerable.call(C,k[z])&&(e[k[z]]=C[k[z]]);return e}function as(C,B){var e=typeof Symbol=="function"&&C[Symbol.iterator];if(!e)return C;var k=e.call(C),z,l=[],o;try{for(;(B===void 0||B-- >0)&&!(z=k.next()).done;)l.push(z.value)}catch(c){o={error:c}}finally{try{z&&!z.done&&(e=k.return)&&e.call(k)}finally{if(o)throw o.error}}return l}function Jl(C,B,e){if(e||arguments.length===2)for(var k=0,z=B.length,l;k<z;k++)(l||!(k in B))&&(l||(l=Array.prototype.slice.call(B,0,k)),l[k]=B[k]);return C.concat(l||Array.prototype.slice.call(B))}var mc=function(C){return{isEnabled:function(B){return C.some(function(e){return!!B[e]})}}},my={measureLayout:mc(["layout","layoutId","drag","_layoutResetTransform"]),animation:mc(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag"]),exit:mc(["exit"]),drag:mc(["drag","dragControls"]),focus:mc(["whileFocus"]),hover:mc(["whileHover","onHoverStart","onHoverEnd"]),tap:mc(["whileTap","onTap","onTapStart","onTapCancel"]),pan:mc(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),layoutAnimation:mc(["layout","layoutId"])};function oI(C){for(var B in C){var e=C[B];e!==null&&(my[B].Component=e)}}var wp=function(){},uw=rl({strict:!1}),fw=Object.keys(my),sI=fw.length;function lI(C,B,e){var k=[];if(wo(uw),!B)return null;for(var z=0;z<sI;z++){var l=fw[z],o=my[l],c=o.isEnabled,p=o.Component;c(C)&&p&&k.push(pa(p,ya({key:l},C,{visualElement:B})))}return k}var _0=rl({transformPagePoint:function(C){return C},isStatic:!1}),w0=rl({});function uI(){return wo(w0).visualElement}var Tp=rl(null);function Ap(C){var B=Eo(null);return B.current===null&&(B.current=C()),B.current}function yy(){var C=wo(Tp);if(C===null)return[!0,null];var B=C.isPresent,e=C.onExitComplete,k=C.register,z=vI();_o(function(){return k(z)},[]);var l=function(){return e==null?void 0:e(z)};return!B&&e?[!1,l]:[!0]}function fI(C){return C===null?!0:C.isPresent}var cI=0,hI=function(){return cI++},vI=function(){return Ap(hI)},pI=rl(null),Sp=typeof window!="undefined",cw=Sp?rh:_o;function dI(C){var B=C.layoutId,e=wo(pI);return e&&B!==void 0?e+"-"+B:B}function gI(C,B,e,k){var z=wo(_0),l=wo(uw),o=uI(),c=wo(Tp),p=dI(e),t=Eo(void 0);k||(k=l.renderer),!t.current&&k&&(t.current=k(C,{visualState:B,parent:o,props:ya(ya({},e),{layoutId:p}),presenceId:c==null?void 0:c.id,blockInitialAnimation:(c==null?void 0:c.initial)===!1}));var n=t.current;return cw(function(){!n||(n.setProps(ya(ya(ya({},z),e),{layoutId:p})),n.isPresent=fI(c),n.isPresenceRoot=!o||o.presenceId!==(c==null?void 0:c.id),n.syncRender())}),_o(function(){var a;!n||(a=n.animationState)===null||a===void 0||a.animateChanges()}),cw(function(){return function(){return n==null?void 0:n.notifyUnmount()}},[]),n}function xy(C){return typeof C=="object"&&Object.prototype.hasOwnProperty.call(C,"current")}function mI(C,B,e){return Oo(function(k){var z;k&&((z=C.mount)===null||z===void 0||z.call(C,k)),B&&(k?B.mount(k):B.unmount()),e&&(typeof e=="function"?e(k):xy(e)&&(e.current=k))},[B])}function hw(C){return Array.isArray(C)}function Mf(C){return typeof C=="string"||hw(C)}function yI(C){var B={};return C.forEachValue(function(e,k){return B[k]=e.get()}),B}function xI(C){var B={};return C.forEachValue(function(e,k){return B[k]=e.getVelocity()}),B}function vw(C,B,e,k,z){var l;return k===void 0&&(k={}),z===void 0&&(z={}),typeof B=="string"&&(B=(l=C.variants)===null||l===void 0?void 0:l[B]),typeof B=="function"?B(e??C.custom,k,z):B}function T0(C,B,e){var k=C.getProps();return vw(k,B,e??k.custom,yI(C),xI(C))}function A0(C){var B;return typeof((B=C.animate)===null||B===void 0?void 0:B.start)=="function"||Mf(C.initial)||Mf(C.animate)||Mf(C.whileHover)||Mf(C.whileDrag)||Mf(C.whileTap)||Mf(C.whileFocus)||Mf(C.exit)}function pw(C){return Boolean(A0(C)||C.variants)}function bI(C,B){if(A0(C)){var e=C.initial,k=C.animate;return{initial:e===!1||Mf(e)?e:void 0,animate:Mf(k)?k:void 0}}return C.inherit!==!1?B:{}}function _I(C,B){var e=bI(C,wo(w0)),k=e.initial,z=e.animate;return Vs(function(){return{initial:k,animate:z}},B?[dw(k),dw(z)]:[])}function dw(C){return Array.isArray(C)?C.join(" "):C}function wI(C){var B=C.preloadedFeatures,e=C.createVisualElement,k=C.useRender,z=C.useVisualState,l=C.Component;B&&oI(B);function o(c,p){var t=wo(_0).isStatic,n=null,a=_I(c,t),i=z(c,t);return!t&&Sp&&(a.visualElement=gI(l,i,c,e),n=lI(c,a.visualElement)),pa(tl,null,pa(w0.Provider,{value:a},k(l,c,mI(i,a.visualElement,p),i,t)),n)}return Xf(o)}function TI(C){function B(k,z){return z===void 0&&(z={}),wI(C(k,z))}var e=new Map;return new Proxy(B,{get:function(k,z){return e.has(z)||e.set(z,B(z)),e.get(z)}})}var AI=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function by(C){return typeof C!="string"||C.includes("-")?!1:!!(AI.indexOf(C)>-1||/[A-Z]/.test(C))}var Mp={};function SI(C){for(var B in C)Mp[B]=C[B]}var MI=["","X","Y","Z"],kI=["translate","scale","rotate","skew"],kp=["transformPerspective","x","y","z"];kI.forEach(function(C){return MI.forEach(function(B){return kp.push(C+B)})});function CI(C,B){return kp.indexOf(C)-kp.indexOf(B)}var EI=new Set(kp);function S0(C){return EI.has(C)}var LI=new Set(["originX","originY","originZ"]);function gw(C){return LI.has(C)}function mw(C,B){var e=B.layout,k=B.layoutId;return S0(C)||gw(C)||(e||k!==void 0)&&(!!Mp[C]||C==="opacity")}var Nc=function(C){return C!==null&&typeof C=="object"&&C.getVelocity},PI={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function RI(C,B,e,k){var z=C.transform,l=C.transformKeys,o=B.enableHardwareAcceleration,c=o===void 0?!0:o,p=B.allowTransformNone,t=p===void 0?!0:p,n="";l.sort(CI);for(var a=!1,i=l.length,r=0;r<i;r++){var f=l[r];n+=(PI[f]||f)+"("+z[f]+") ",f==="z"&&(a=!0)}return!a&&c?n+="translateZ(0)":n=n.trim(),k?n=k(z,e?"":n):t&&e&&(n="none"),n}function DI(C){var B=C.originX,e=B===void 0?"50%":B,k=C.originY,z=k===void 0?"50%":k,l=C.originZ,o=l===void 0?0:l;return e+" "+z+" "+o}function yw(C){return C.startsWith("--")}var II=function(C,B){return B&&typeof C=="number"?B.transform(C):C},xw=function(C,B){return function(e){return Math.max(Math.min(e,B),C)}},Cp=function(C){return C%1?Number(C.toFixed(5)):C},Ep=/(-)?([\d]*\.?[\d])+/g,_y=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,FI=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function Lp(C){return typeof C=="string"}var ch={test:function(C){return typeof C=="number"},parse:parseFloat,transform:function(C){return C}},Pp=ya(ya({},ch),{transform:xw(0,1)}),M0=ya(ya({},ch),{default:1}),Rp=function(C){return{test:function(B){return Lp(B)&&B.endsWith(C)&&B.split(" ").length===1},parse:parseFloat,transform:function(B){return""+B+C}}},Uc=Rp("deg"),cv=Rp("%"),pi=Rp("px"),zI=Rp("vh"),OI=Rp("vw"),bw=ya(ya({},cv),{parse:function(C){return cv.parse(C)/100},transform:function(C){return cv.transform(C*100)}}),wy=function(C,B){return function(e){return Boolean(Lp(e)&&FI.test(e)&&e.startsWith(C)||B&&Object.prototype.hasOwnProperty.call(e,B))}},_w=function(C,B,e){return function(k){var z;if(!Lp(k))return k;var l=k.match(Ep),o=l[0],c=l[1],p=l[2],t=l[3];return z={},z[C]=parseFloat(o),z[B]=parseFloat(c),z[e]=parseFloat(p),z.alpha=t!==void 0?parseFloat(t):1,z}},hv={test:wy("hsl","hue"),parse:_w("hue","saturation","lightness"),transform:function(C){var B=C.hue,e=C.saturation,k=C.lightness,z=C.alpha,l=z===void 0?1:z;return"hsla("+Math.round(B)+", "+cv.transform(Cp(e))+", "+cv.transform(Cp(k))+", "+Cp(Pp.transform(l))+")"}},BI=xw(0,255),Ty=ya(ya({},ch),{transform:function(C){return Math.round(BI(C))}}),vv={test:wy("rgb","red"),parse:_w("red","green","blue"),transform:function(C){var B=C.red,e=C.green,k=C.blue,z=C.alpha,l=z===void 0?1:z;return"rgba("+Ty.transform(B)+", "+Ty.transform(e)+", "+Ty.transform(k)+", "+Cp(Pp.transform(l))+")"}};function NI(C){var B="",e="",k="",z="";return C.length>5?(B=C.substr(1,2),e=C.substr(3,2),k=C.substr(5,2),z=C.substr(7,2)):(B=C.substr(1,1),e=C.substr(2,1),k=C.substr(3,1),z=C.substr(4,1),B+=B,e+=e,k+=k,z+=z),{red:parseInt(B,16),green:parseInt(e,16),blue:parseInt(k,16),alpha:z?parseInt(z,16)/255:1}}var Ay={test:wy("#"),parse:NI,transform:vv.transform},$l={test:function(C){return vv.test(C)||Ay.test(C)||hv.test(C)},parse:function(C){return vv.test(C)?vv.parse(C):hv.test(C)?hv.parse(C):Ay.parse(C)},transform:function(C){return Lp(C)?C:C.hasOwnProperty("red")?vv.transform(C):hv.transform(C)}},ww="${c}",Tw="${n}";function UI(C){var B,e,k,z;return isNaN(C)&&Lp(C)&&((e=(B=C.match(Ep))===null||B===void 0?void 0:B.length)!==null&&e!==void 0?e:0)+((z=(k=C.match(_y))===null||k===void 0?void 0:k.length)!==null&&z!==void 0?z:0)>0}function Aw(C){var B=[],e=0,k=C.match(_y);k&&(e=k.length,C=C.replace(_y,ww),B.push.apply(B,k.map($l.parse)));var z=C.match(Ep);return z&&(C=C.replace(Ep,Tw),B.push.apply(B,z.map(ch.parse))),{values:B,numColors:e,tokenised:C}}function Sw(C){return Aw(C).values}function Mw(C){var B=Aw(C),e=B.values,k=B.numColors,z=B.tokenised,l=e.length;return function(o){for(var c=z,p=0;p<l;p++)c=c.replace(p<k?ww:Tw,p<k?$l.transform(o[p]):Cp(o[p]));return c}}var VI=function(C){return typeof C=="number"?0:C};function HI(C){var B=Sw(C),e=Mw(C);return e(B.map(VI))}var yc={test:UI,parse:Sw,createTransformer:Mw,getAnimatableNone:HI},GI=new Set(["brightness","contrast","saturate","opacity"]);function WI(C){var B=C.slice(0,-1).split("("),e=B[0],k=B[1];if(e==="drop-shadow")return C;var z=(k.match(Ep)||[])[0];if(!z)return C;var l=k.replace(z,""),o=GI.has(e)?1:0;return z!==k&&(o*=100),e+"("+o+l+")"}var YI=/([a-z-]*)\(.*?\)/g,Sy=ya(ya({},yc),{getAnimatableNone:function(C){var B=C.match(YI);return B?B.map(WI).join(" "):C}}),kw=ya(ya({},ch),{transform:Math.round}),Cw={borderWidth:pi,borderTopWidth:pi,borderRightWidth:pi,borderBottomWidth:pi,borderLeftWidth:pi,borderRadius:pi,radius:pi,borderTopLeftRadius:pi,borderTopRightRadius:pi,borderBottomRightRadius:pi,borderBottomLeftRadius:pi,width:pi,maxWidth:pi,height:pi,maxHeight:pi,size:pi,top:pi,right:pi,bottom:pi,left:pi,padding:pi,paddingTop:pi,paddingRight:pi,paddingBottom:pi,paddingLeft:pi,margin:pi,marginTop:pi,marginRight:pi,marginBottom:pi,marginLeft:pi,rotate:Uc,rotateX:Uc,rotateY:Uc,rotateZ:Uc,scale:M0,scaleX:M0,scaleY:M0,scaleZ:M0,skew:Uc,skewX:Uc,skewY:Uc,distance:pi,translateX:pi,translateY:pi,translateZ:pi,x:pi,y:pi,z:pi,perspective:pi,transformPerspective:pi,opacity:Pp,originX:bw,originY:bw,originZ:pi,zIndex:kw,fillOpacity:Pp,strokeOpacity:Pp,numOctaves:kw};function My(C,B,e,k,z,l,o,c){var p,t=C.style,n=C.vars,a=C.transform,i=C.transformKeys,r=C.transformOrigin;i.length=0;var f=!1,u=!1,s=!0;for(var h in B){var d=B[h];if(yw(h)){n[h]=d;continue}var y=Cw[h],m=II(d,y);if(S0(h)){if(f=!0,a[h]=m,i.push(h),!s)continue;d!==((p=y.default)!==null&&p!==void 0?p:0)&&(s=!1)}else if(gw(h))r[h]=m,u=!0;else if((e==null?void 0:e.isHydrated)&&(k==null?void 0:k.isHydrated)&&Mp[h]){var g=Mp[h].process(d,k,e),x=Mp[h].applyTo;if(x)for(var A=x.length,b=0;b<A;b++)t[x[b]]=g;else t[h]=g}else t[h]=m}k&&e&&o&&c?(t.transform=o(k.deltaFinal,k.treeScale,f?a:void 0),l&&(t.transform=l(a,t.transform)),t.transformOrigin=c(k)):(f&&(t.transform=RI(C,z,s,l)),u&&(t.transformOrigin=DI(r)))}var ky=function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function Ew(C,B,e){for(var k in B)!Nc(B[k])&&!mw(k,e)&&(C[k]=B[k])}function jI(C,B,e){var k=C.transformTemplate;return Vs(function(){var z=ky();My(z,B,void 0,void 0,{enableHardwareAcceleration:!e},k);var l=z.vars,o=z.style;return ya(ya({},l),o)},[B])}function XI(C,B,e){var k=C.style||{},z={};return Ew(z,k,C),Object.assign(z,jI(C,B,e)),C.transformValues&&(z=C.transformValues(z)),z}function ZI(C,B,e){var k={},z=XI(C,B,e);return Boolean(C.drag)&&(k.draggable=!1,z.userSelect=z.WebkitUserSelect=z.WebkitTouchCallout="none",z.touchAction=C.drag===!0?"none":"pan-"+(C.drag==="x"?"y":"x")),k.style=z,k}var KI=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","_layoutResetTransform","onLayoutAnimationComplete","onViewportBoxUpdate","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover"]);function k0(C){return KI.has(C)}var Lw=function(C){return!k0(C)};try{var JI=require("@emotion/is-prop-valid").default;Lw=function(C){return C.startsWith("on")?!k0(C):JI(C)}}catch{}function $I(C,B,e){var k={};for(var z in C)(Lw(z)||e===!0&&k0(z)||!B&&!k0(z))&&(k[z]=C[z]);return k}function Pw(C,B,e){return typeof C=="string"?C:pi.transform(B+e*C)}function QI(C,B,e){var k=Pw(B,C.x,C.width),z=Pw(e,C.y,C.height);return k+" "+z}var Cy=function(C,B){return pi.transform(C*B)},qI={offset:"stroke-dashoffset",array:"stroke-dasharray"},e9={offset:"strokeDashoffset",array:"strokeDasharray"};function t9(C,B,e,k,z,l){k===void 0&&(k=1),z===void 0&&(z=0),l===void 0&&(l=!0);var o=l?qI:e9;C[o.offset]=Cy(-z,B);var c=Cy(e,B),p=Cy(k,B);C[o.array]=c+" "+p}function Ey(C,B,e,k,z,l,o,c){var p=B.attrX,t=B.attrY,n=B.originX,a=B.originY,i=B.pathLength,r=B.pathSpacing,f=r===void 0?1:r,u=B.pathOffset,s=u===void 0?0:u,h=zu(B,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]);My(C,h,e,k,z,l,o,c),C.attrs=C.style,C.style={};var d=C.attrs,y=C.style,m=C.dimensions,g=C.totalPathLength;d.transform&&(m&&(y.transform=d.transform),delete d.transform),m&&(n!==void 0||a!==void 0||y.transform)&&(y.transformOrigin=QI(m,n!==void 0?n:.5,a!==void 0?a:.5)),p!==void 0&&(d.x=p),t!==void 0&&(d.y=t),g!==void 0&&i!==void 0&&t9(d,g,i,f,s,!1)}var Rw=function(){return ya(ya({},ky()),{attrs:{}})};function r9(C,B){var e=Vs(function(){var z=Rw();return Ey(z,B,void 0,void 0,{enableHardwareAcceleration:!1},C.transformTemplate),ya(ya({},z.attrs),{style:ya({},z.style)})},[B]);if(C.style){var k={};Ew(k,C.style,C),e.style=ya(ya({},k),e.style)}return e}function n9(C){C===void 0&&(C=!1);var B=function(e,k,z,l,o){var c=l.latestValues,p=by(e)?r9:ZI,t=p(k,c,o),n=$I(k,typeof e=="string",C),a=ya(ya(ya({},n),t),{ref:z});return pa(e,a)};return B}var a9=/([a-z])([A-Z])/g,i9="$1-$2",Dw=function(C){return C.replace(a9,i9).toLowerCase()};function Iw(C,B){var e=B.style,k=B.vars;Object.assign(C.style,e);for(var z in k)C.style.setProperty(z,k[z])}var Fw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform"]);function zw(C,B){Iw(C,B);for(var e in B.attrs)C.setAttribute(Fw.has(e)?e:Dw(e),B.attrs[e])}function Ly(C){var B=C.style,e={};for(var k in B)(Nc(B[k])||mw(k,C))&&(e[k]=B[k]);return e}function Ow(C){var B=Ly(C);for(var e in C)if(Nc(C[e])){var k=e==="x"||e==="y"?"attr"+e.toUpperCase():e;B[k]=C[e]}return B}function Py(C){return typeof C=="object"&&typeof C.start=="function"}var Dp=function(C){return Array.isArray(C)},o9=function(C){return Boolean(C&&typeof C=="object"&&C.mix&&C.toValue)},s9=function(C){return Dp(C)?C[C.length-1]||0:C};function l9(C){var B=Nc(C)?C.get():C;return o9(B)?B.toValue():B}function Bw(C,B,e,k){var z=C.scrapeMotionValuesFromProps,l=C.createRenderState,o=C.onMount,c={latestValues:u9(B,e,k,z),renderState:l()};return o&&(c.mount=function(p){return o(B,p,c)}),c}var Nw=function(C){return function(B,e){var k=wo(w0),z=wo(Tp);return e?Bw(C,B,k,z):Ap(function(){return Bw(C,B,k,z)})}};function u9(C,B,e,k){var z={},l=(e==null?void 0:e.initial)===!1,o=k(C);for(var c in o)z[c]=l9(o[c]);var p=C.initial,t=C.animate,n=A0(C),a=pw(C);B&&a&&!n&&C.inherit!==!1&&(p??(p=B.initial),t??(t=B.animate));var i=l||p===!1?t:p;if(i&&typeof i!="boolean"&&!Py(i)){var r=Array.isArray(i)?i:[i];r.forEach(function(f){var u=vw(C,f);if(!!u){var s=u.transitionEnd;u.transition;var h=zu(u,["transitionEnd","transition"]);for(var d in h)z[d]=h[d];for(var d in s)z[d]=s[d]}})}return z}var f9={useVisualState:Nw({scrapeMotionValuesFromProps:Ow,createRenderState:Rw,onMount:function(C,B,e){var k=e.renderState,z=e.latestValues;try{k.dimensions=typeof B.getBBox=="function"?B.getBBox():B.getBoundingClientRect()}catch{k.dimensions={x:0,y:0,width:0,height:0}}c9(B)&&(k.totalPathLength=B.getTotalLength()),Ey(k,z,void 0,void 0,{enableHardwareAcceleration:!1},C.transformTemplate),zw(B,k)}})};function c9(C){return C.tagName==="path"}var h9={useVisualState:Nw({scrapeMotionValuesFromProps:Ly,createRenderState:ky})};function v9(C,B,e,k){var z=B.forwardMotionProps,l=z===void 0?!1:z,o=by(C)?f9:h9;return ya(ya({},o),{preloadedFeatures:e,useRender:n9(l),createVisualElement:k,Component:C})}var fs;(function(C){C.Animate="animate",C.Hover="whileHover",C.Tap="whileTap",C.Drag="whileDrag",C.Focus="whileFocus",C.Exit="exit"})(fs||(fs={}));function Ry(C,B,e,k){return C.addEventListener(B,e,k),function(){return C.removeEventListener(B,e,k)}}function Dy(C,B,e,k){_o(function(){var z=C.current;if(e&&z)return Ry(z,B,e,k)},[C,B,e,k])}function p9(C){var B=C.whileFocus,e=C.visualElement,k=function(){var l;(l=e.animationState)===null||l===void 0||l.setActive(fs.Focus,!0)},z=function(){var l;(l=e.animationState)===null||l===void 0||l.setActive(fs.Focus,!1)};Dy(e,"focus",B?k:void 0),Dy(e,"blur",B?z:void 0)}function Uw(C){return typeof PointerEvent!="undefined"&&C instanceof PointerEvent?C.pointerType==="mouse":C instanceof MouseEvent}function Vw(C){var B=!!C.touches;return B}function d9(C){return function(B){var e=B instanceof MouseEvent,k=!e||e&&B.button===0;k&&C(B)}}var g9={pageX:0,pageY:0};function m9(C,B){B===void 0&&(B="page");var e=C.touches[0]||C.changedTouches[0],k=e||g9;return{x:k[B+"X"],y:k[B+"Y"]}}function y9(C,B){return B===void 0&&(B="page"),{x:C[B+"X"],y:C[B+"Y"]}}function Iy(C,B){return B===void 0&&(B="page"),{point:Vw(C)?m9(C,B):y9(C,B)}}function x9(C){return Iy(C,"client")}var Hw=function(C,B){B===void 0&&(B=!1);var e=function(k){return C(k,Iy(k))};return B?d9(e):e},b9=function(){return Sp&&window.onpointerdown===null},_9=function(){return Sp&&window.ontouchstart===null},w9=function(){return Sp&&window.onmousedown===null},T9={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},A9={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function Gw(C){return b9()?C:_9()?A9[C]:w9()?T9[C]:C}function pv(C,B,e,k){return Ry(C,Gw(B),Hw(e,B==="pointerdown"),k)}function C0(C,B,e,k){return Dy(C,Gw(B),e&&Hw(e,B==="pointerdown"),k)}function Ww(C){var B=null;return function(){var e=function(){B=null};return B===null?(B=C,e):!1}}var Yw=Ww("dragHorizontal"),jw=Ww("dragVertical");function Xw(C){var B=!1;if(C==="y")B=jw();else if(C==="x")B=Yw();else{var e=Yw(),k=jw();e&&k?B=function(){e(),k()}:(e&&e(),k&&k())}return B}function Zw(){var C=Xw(!0);return C?(C(),!1):!0}function Kw(C,B,e){return function(k,z){var l;!Uw(k)||Zw()||(e==null||e(k,z),(l=C.animationState)===null||l===void 0||l.setActive(fs.Hover,B))}}function S9(C){var B=C.onHoverStart,e=C.onHoverEnd,k=C.whileHover,z=C.visualElement;C0(z,"pointerenter",B||k?Kw(z,!0,B):void 0),C0(z,"pointerleave",e||k?Kw(z,!1,e):void 0)}var Jw=function(C,B){return B?C===B?!0:Jw(C,B.parentElement):!1};function Fy(C){return _o(function(){return function(){return C()}},[])}var E0=function(C,B,e){return Math.min(Math.max(e,C),B)},zy=.001,M9=.01,k9=10,C9=.05,E9=1;function L9(C){var B=C.duration,e=B===void 0?800:B,k=C.bounce,z=k===void 0?.25:k,l=C.velocity,o=l===void 0?0:l,c=C.mass,p=c===void 0?1:c,t,n,a=1-z;a=E0(C9,E9,a),e=E0(M9,k9,e/1e3),a<1?(t=function(u){var s=u*a,h=s*e,d=s-o,y=Oy(u,a),m=Math.exp(-h);return zy-d/y*m},n=function(u){var s=u*a,h=s*e,d=h*o+o,y=Math.pow(a,2)*Math.pow(u,2)*e,m=Math.exp(-h),g=Oy(Math.pow(u,2),a),x=-t(u)+zy>0?-1:1;return x*((d-y)*m)/g}):(t=function(u){var s=Math.exp(-u*e),h=(u-o)*e+1;return-zy+s*h},n=function(u){var s=Math.exp(-u*e),h=(o-u)*(e*e);return s*h});var i=5/e,r=R9(t,n,i);if(e=e*1e3,isNaN(r))return{stiffness:100,damping:10,duration:e};var f=Math.pow(r,2)*p;return{stiffness:f,damping:a*2*Math.sqrt(p*f),duration:e}}var P9=12;function R9(C,B,e){for(var k=e,z=1;z<P9;z++)k=k-C(k)/B(k);return k}function Oy(C,B){return C*Math.sqrt(1-B*B)}var D9=["duration","bounce"],I9=["stiffness","damping","mass"];function $w(C,B){return B.some(function(e){return C[e]!==void 0})}function F9(C){var B=ya({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},C);if(!$w(C,I9)&&$w(C,D9)){var e=L9(C);B=ya(ya(ya({},B),e),{velocity:0,mass:1}),B.isResolvedFromDuration=!0}return B}function By(C){var B=C.from,e=B===void 0?0:B,k=C.to,z=k===void 0?1:k,l=C.restSpeed,o=l===void 0?2:l,c=C.restDelta,p=zu(C,["from","to","restSpeed","restDelta"]),t={done:!1,value:e},n=F9(p),a=n.stiffness,i=n.damping,r=n.mass,f=n.velocity,u=n.duration,s=n.isResolvedFromDuration,h=Qw,d=Qw;function y(){var m=f?-(f/1e3):0,g=z-e,x=i/(2*Math.sqrt(a*r)),A=Math.sqrt(a/r)/1e3;if(c??(c=Math.abs(z-e)<=1?.01:.4),x<1){var b=Oy(A,x);h=function(w){var T=Math.exp(-x*A*w);return z-T*((m+x*A*g)/b*Math.sin(b*w)+g*Math.cos(b*w))},d=function(w){var T=Math.exp(-x*A*w);return x*A*T*(Math.sin(b*w)*(m+x*A*g)/b+g*Math.cos(b*w))-T*(Math.cos(b*w)*(m+x*A*g)-b*g*Math.sin(b*w))}}else if(x===1)h=function(w){return z-Math.exp(-A*w)*(g+(m+A*g)*w)};else{var S=A*Math.sqrt(x*x-1);h=function(w){var T=Math.exp(-x*A*w),_=Math.min(S*w,300);return z-T*((m+x*A*g)*Math.sinh(_)+S*g*Math.cosh(_))/S}}}return y(),{next:function(m){var g=h(m);if(s)t.done=m>=u;else{var x=d(m)*1e3,A=Math.abs(x)<=o,b=Math.abs(z-g)<=c;t.done=A&&b}return t.value=t.done?z:g,t},flipTarget:function(){var m;f=-f,m=[z,e],e=m[0],z=m[1],y()}}}By.needsInterpolation=function(C,B){return typeof C=="string"||typeof B=="string"};var Qw=function(C){return 0},Ip=function(C,B,e){var k=B-C;return k===0?1:(e-C)/k},du=function(C,B,e){return-e*C+e*B+C},z9=function(C,B,e){var k=C*C,z=B*B;return Math.sqrt(Math.max(0,e*(z-k)+k))},O9=[Ay,vv,hv],qw=function(C){return O9.find(function(B){return B.test(C)})},e3=function(C,B){var e=qw(C),k=qw(B);wp(e.transform===k.transform);var z=e.parse(C),l=k.parse(B),o=ya({},z),c=e===hv?du:z9;return function(p){for(var t in o)t!=="alpha"&&(o[t]=c(z[t],l[t],p));return o.alpha=du(z.alpha,l.alpha,p),e.transform(o)}},Ny=function(C){return typeof C=="number"},B9=function(C,B){return function(e){return B(C(e))}},Fp=function(){for(var C=[],B=0;B<arguments.length;B++)C[B]=arguments[B];return C.reduce(B9)};function t3(C,B){return Ny(C)?function(e){return du(C,B,e)}:$l.test(C)?e3(C,B):a3(C,B)}var r3=function(C,B){var e=Jl([],C),k=e.length,z=C.map(function(l,o){return t3(l,B[o])});return function(l){for(var o=0;o<k;o++)e[o]=z[o](l);return e}},N9=function(C,B){var e=ya(ya({},C),B),k={};for(var z in e)C[z]!==void 0&&B[z]!==void 0&&(k[z]=t3(C[z],B[z]));return function(l){for(var o in k)e[o]=k[o](l);return e}};function n3(C){for(var B=yc.parse(C),e=B.length,k=0,z=0,l=0,o=0;o<e;o++)k||typeof B[o]=="number"?k++:B[o].hue!==void 0?l++:z++;return{parsed:B,numNumbers:k,numRGB:z,numHSL:l}}var a3=function(C,B){var e=yc.createTransformer(B),k=n3(C),z=n3(B);return Fp(r3(k.parsed,z.parsed),e)},U9=function(C,B){return function(e){return du(C,B,e)}};function V9(C){if(typeof C=="number")return U9;if(typeof C=="string")return $l.test(C)?e3:a3;if(Array.isArray(C))return r3;if(typeof C=="object")return N9}function H9(C,B,e){for(var k=[],z=e||V9(C[0]),l=C.length-1,o=0;o<l;o++){var c=z(C[o],C[o+1]);if(B){var p=Array.isArray(B)?B[o]:B;c=Fp(p,c)}k.push(c)}return k}function G9(C,B){var e=C[0],k=C[1],z=B[0];return function(l){return z(Ip(e,k,l))}}function W9(C,B){var e=C.length,k=e-1;return function(z){var l=0,o=!1;if(z<=C[0]?o=!0:z>=C[k]&&(l=k-1,o=!0),!o){for(var c=1;c<e&&!(C[c]>z||c===k);c++);l=c-1}var p=Ip(C[l],C[l+1],z);return B[l](p)}}function i3(C,B,e){var k=e===void 0?{}:e,z=k.clamp,l=z===void 0?!0:z,o=k.ease,c=k.mixer,p=C.length;wp(p===B.length),wp(!o||!Array.isArray(o)||o.length===p-1),C[0]>C[p-1]&&(C=[].concat(C),B=[].concat(B),C.reverse(),B.reverse());var t=H9(B,o,c),n=p===2?G9(C,t):W9(C,t);return l?function(a){return n(E0(C[0],C[p-1],a))}:n}var L0=function(C){return function(B){return 1-C(1-B)}},Uy=function(C){return function(B){return B<=.5?C(2*B)/2:(2-C(2*(1-B)))/2}},Y9=function(C){return function(B){return Math.pow(B,C)}},o3=function(C){return function(B){return B*B*((C+1)*B-C)}},j9=function(C){var B=o3(C);return function(e){return(e*=2)<1?.5*B(e):.5*(2-Math.pow(2,-10*(e-1)))}},s3=1.525,X9=4/11,Z9=8/11,K9=9/10,l3=function(C){return C},Vy=Y9(2),J9=L0(Vy),u3=Uy(Vy),f3=function(C){return 1-Math.sin(Math.acos(C))},c3=L0(f3),$9=Uy(c3),Hy=o3(s3),Q9=L0(Hy),q9=Uy(Hy),e7=j9(s3),t7=4356/361,r7=35442/1805,n7=16061/1805,P0=function(C){if(C===1||C===0)return C;var B=C*C;return C<X9?7.5625*B:C<Z9?9.075*B-9.9*C+3.4:C<K9?t7*B-r7*C+n7:10.8*C*C-20.52*C+10.72},a7=L0(P0),i7=function(C){return C<.5?.5*(1-P0(1-C*2)):.5*P0(C*2-1)+.5};function o7(C,B){return C.map(function(){return B||u3}).splice(0,C.length-1)}function s7(C){var B=C.length;return C.map(function(e,k){return k!==0?k/(B-1):0})}function l7(C,B){return C.map(function(e){return e*B})}function R0(C){var B=C.from,e=B===void 0?0:B,k=C.to,z=k===void 0?1:k,l=C.ease,o=C.offset,c=C.duration,p=c===void 0?300:c,t={done:!1,value:e},n=Array.isArray(z)?z:[e,z],a=l7(o&&o.length===n.length?o:s7(n),p);function i(){return i3(a,n,{ease:Array.isArray(l)?l:o7(n,l)})}var r=i();return{next:function(f){return t.value=r(f),t.done=f>=p,t},flipTarget:function(){n.reverse(),r=i()}}}function u7(C){var B=C.velocity,e=B===void 0?0:B,k=C.from,z=k===void 0?0:k,l=C.power,o=l===void 0?.8:l,c=C.timeConstant,p=c===void 0?350:c,t=C.restDelta,n=t===void 0?.5:t,a=C.modifyTarget,i={done:!1,value:z},r=o*e,f=z+r,u=a===void 0?f:a(f);return u!==f&&(r=u-z),{next:function(s){var h=-r*Math.exp(-s/p);return i.done=!(h>n||h<-n),i.value=i.done?u:u+h,i},flipTarget:function(){}}}var h3={keyframes:R0,spring:By,decay:u7};function f7(C){if(Array.isArray(C.to))return R0;if(h3[C.type])return h3[C.type];var B=new Set(Object.keys(C));return B.has("ease")||B.has("duration")&&!B.has("dampingRatio")?R0:B.has("dampingRatio")||B.has("stiffness")||B.has("mass")||B.has("damping")||B.has("restSpeed")||B.has("restDelta")?By:R0}function v3(C,B,e){return e===void 0&&(e=0),C-B-e}function c7(C,B,e,k){return e===void 0&&(e=0),k===void 0&&(k=!0),k?v3(B+-C,B,e):B-(C-B)+e}function h7(C,B,e,k){return k?C>=B+e:C<=-e}var v7=function(C){var B=function(e){var k=e.delta;return C(k)};return{start:function(){return rc.update(B,!0)},stop:function(){return cp.update(B)}}};function p3(C){var B,e,k=C.from,z=C.autoplay,l=z===void 0?!0:z,o=C.driver,c=o===void 0?v7:o,p=C.elapsed,t=p===void 0?0:p,n=C.repeat,a=n===void 0?0:n,i=C.repeatType,r=i===void 0?"loop":i,f=C.repeatDelay,u=f===void 0?0:f,s=C.onPlay,h=C.onStop,d=C.onComplete,y=C.onRepeat,m=C.onUpdate,g=zu(C,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]),x=g.to,A,b=0,S=g.duration,w,T=!1,_=!0,v,P=f7(g);((e=(B=P).needsInterpolation)===null||e===void 0?void 0:e.call(B,k,x))&&(v=i3([0,100],[k,x],{clamp:!1}),k=0,x=100);var M=P(ya(ya({},g),{from:k,to:x}));function E(){b++,r==="reverse"?(_=b%2==0,t=c7(t,S,u,_)):(t=v3(t,S,u),r==="mirror"&&M.flipTarget()),T=!1,y&&y()}function D(){A.stop(),d&&d()}function N(I){if(_||(I=-I),t+=I,!T){var F=M.next(Math.max(0,t));w=F.value,v&&(w=v(w)),T=_?F.done:t<=0}m==null||m(w),T&&(b===0&&(S??(S=t)),b<a?h7(t,S,u,_)&&E():D())}function O(){s==null||s(),A=c(N),A.start()}return l&&O(),{stop:function(){h==null||h(),A.stop()}}}function d3(C,B){return B?C*(1e3/B):0}function p7(C){var B=C.from,e=B===void 0?0:B,k=C.velocity,z=k===void 0?0:k,l=C.min,o=C.max,c=C.power,p=c===void 0?.8:c,t=C.timeConstant,n=t===void 0?750:t,a=C.bounceStiffness,i=a===void 0?500:a,r=C.bounceDamping,f=r===void 0?10:r,u=C.restDelta,s=u===void 0?1:u,h=C.modifyTarget,d=C.driver,y=C.onUpdate,m=C.onComplete,g;function x(E){return l!==void 0&&E<l||o!==void 0&&E>o}function A(E){return l===void 0?o:o===void 0||Math.abs(l-E)<Math.abs(o-E)?l:o}function b(E){g==null||g.stop(),g=p3(ya(ya({},E),{driver:d,onUpdate:function(D){var N;y==null||y(D),(N=E.onUpdate)===null||N===void 0||N.call(E,D)},onComplete:m}))}function S(E){b(ya({type:"spring",stiffness:i,damping:f,restDelta:s},E))}if(x(e))S({from:e,velocity:z,to:A(e)});else{var w=p*z+e;typeof h!="undefined"&&(w=h(w));var T=A(w),_=T===l?-1:1,v,P,M=function(E){v=P,P=E,z=d3(E-v,r0().delta),(_===1&&E>T||_===-1&&E<T)&&S({from:E,to:T,velocity:z})};b({type:"decay",from:e,velocity:z,timeConstant:n,power:p,restDelta:s,modifyTarget:h,onUpdate:x(w)?M:void 0})}return{stop:function(){return g==null?void 0:g.stop()}}}var Gy=function(C){return C.hasOwnProperty("x")&&C.hasOwnProperty("y")},g3=function(C){return Gy(C)&&C.hasOwnProperty("z")},D0=function(C,B){return Math.abs(C-B)};function m3(C,B){if(Ny(C)&&Ny(B))return D0(C,B);if(Gy(C)&&Gy(B)){var e=D0(C.x,B.x),k=D0(C.y,B.y),z=g3(C)&&g3(B)?D0(C.z,B.z):0;return Math.sqrt(Math.pow(e,2)+Math.pow(k,2)+Math.pow(z,2))}}var y3=function(C,B){return 1-3*B+3*C},x3=function(C,B){return 3*B-6*C},b3=function(C){return 3*C},I0=function(C,B,e){return((y3(B,e)*C+x3(B,e))*C+b3(B))*C},_3=function(C,B,e){return 3*y3(B,e)*C*C+2*x3(B,e)*C+b3(B)},d7=1e-7,g7=10;function m7(C,B,e,k,z){var l,o,c=0;do o=B+(e-B)/2,l=I0(o,k,z)-C,l>0?e=o:B=o;while(Math.abs(l)>d7&&++c<g7);return o}var y7=8,x7=.001;function b7(C,B,e,k){for(var z=0;z<y7;++z){var l=_3(B,e,k);if(l===0)return B;var o=I0(B,e,k)-C;B-=o/l}return B}var F0=11,z0=1/(F0-1);function _7(C,B,e,k){if(C===B&&e===k)return l3;for(var z=new Float32Array(F0),l=0;l<F0;++l)z[l]=I0(l*z0,C,e);function o(c){for(var p=0,t=1,n=F0-1;t!==n&&z[t]<=c;++t)p+=z0;--t;var a=(c-z[t])/(z[t+1]-z[t]),i=p+a*z0,r=_3(i,C,e);return r>=x7?b7(c,i,C,e):r===0?i:m7(c,p,p+z0,C,e)}return function(c){return c===0||c===1?c:I0(o(c),B,k)}}function w7(C){var B=C.onTap,e=C.onTapStart,k=C.onTapCancel,z=C.whileTap,l=C.visualElement,o=B||e||k||z,c=Eo(!1),p=Eo(null);function t(){var f;(f=p.current)===null||f===void 0||f.call(p),p.current=null}function n(){var f;return t(),c.current=!1,(f=l.animationState)===null||f===void 0||f.setActive(fs.Tap,!1),!Zw()}function a(f,u){!n()||(Jw(l.getInstance(),f.target)?B==null||B(f,u):k==null||k(f,u))}function i(f,u){!n()||k==null||k(f,u)}function r(f,u){var s;t(),!c.current&&(c.current=!0,p.current=Fp(pv(window,"pointerup",a),pv(window,"pointercancel",i)),e==null||e(f,u),(s=l.animationState)===null||s===void 0||s.setActive(fs.Tap,!0))}C0(l,"pointerdown",o?r:void 0),Fy(t)}var hh=function(C){return function(B){return C(B),null}},T7={tap:hh(w7),focus:hh(p9),hover:hh(S9)};function w3(C,B){if(!Array.isArray(B))return!1;var e=B.length;if(e!==C.length)return!1;for(var k=0;k<e;k++)if(B[k]!==C[k])return!1;return!0}var O0=function(C){return C*1e3},A7={linear:l3,easeIn:Vy,easeInOut:u3,easeOut:J9,circIn:f3,circInOut:$9,circOut:c3,backIn:Hy,backInOut:q9,backOut:Q9,anticipate:e7,bounceIn:a7,bounceInOut:i7,bounceOut:P0},T3=function(C){if(Array.isArray(C)){wp(C.length===4);var B=as(C,4),e=B[0],k=B[1],z=B[2],l=B[3];return _7(e,k,z,l)}else if(typeof C=="string")return A7[C];return C},S7=function(C){return Array.isArray(C)&&typeof C[0]!="number"},A3=function(C,B){return C==="zIndex"?!1:!!(typeof B=="number"||Array.isArray(B)||typeof B=="string"&&yc.test(B)&&!B.startsWith("url("))},vh=function(){return{type:"spring",stiffness:500,damping:25,restDelta:.5,restSpeed:10}},B0=function(C){return{type:"spring",stiffness:550,damping:C===0?2*Math.sqrt(550):30,restDelta:.01,restSpeed:10}},Wy=function(){return{type:"keyframes",ease:"linear",duration:.3}},M7=function(C){return{type:"keyframes",duration:.8,values:C}},S3={x:vh,y:vh,z:vh,rotate:vh,rotateX:vh,rotateY:vh,rotateZ:vh,scaleX:B0,scaleY:B0,scale:B0,opacity:Wy,backgroundColor:Wy,color:Wy,default:B0},k7=function(C,B){var e;return Dp(B)?e=M7:e=S3[C]||S3.default,ya({to:B},e(B))},C7=ya(ya({},Cw),{color:$l,backgroundColor:$l,outlineColor:$l,fill:$l,stroke:$l,borderColor:$l,borderTopColor:$l,borderRightColor:$l,borderBottomColor:$l,borderLeftColor:$l,filter:Sy,WebkitFilter:Sy}),Yy=function(C){return C7[C]};function jy(C,B){var e,k=Yy(C);return k!==Sy&&(k=yc),(e=k.getAnimatableNone)===null||e===void 0?void 0:e.call(k,B)}function E7(C){C.when,C.delay,C.delayChildren,C.staggerChildren,C.staggerDirection,C.repeat,C.repeatType,C.repeatDelay,C.from;var B=zu(C,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys(B).length}function L7(C){var B=C.ease,e=C.times,k=C.yoyo,z=C.flip,l=C.loop,o=zu(C,["ease","times","yoyo","flip","loop"]),c=ya({},o);return e&&(c.offset=e),o.duration&&(c.duration=O0(o.duration)),o.repeatDelay&&(c.repeatDelay=O0(o.repeatDelay)),B&&(c.ease=S7(B)?B.map(T3):T3(B)),o.type==="tween"&&(c.type="keyframes"),(k||l||z)&&(k?c.repeatType="reverse":l?c.repeatType="loop":z&&(c.repeatType="mirror"),c.repeat=l||k||z||o.repeat),o.type!=="spring"&&(c.type="keyframes"),c}function P7(C,B){var e,k=Xy(C,B)||{};return(e=k.delay)!==null&&e!==void 0?e:0}function R7(C){return Array.isArray(C.to)&&C.to[0]===null&&(C.to=Jl([],as(C.to)),C.to[0]=C.from),C}function D7(C,B,e){var k;return Array.isArray(B.to)&&((k=C.duration)!==null&&k!==void 0||(C.duration=.8)),R7(B),E7(C)||(C=ya(ya({},C),k7(e,B.to))),ya(ya({},B),L7(C))}function I7(C,B,e,k,z){var l,o=Xy(k,C),c=(l=o.from)!==null&&l!==void 0?l:B.get(),p=A3(C,e);c==="none"&&p&&typeof e=="string"?c=jy(C,e):M3(c)&&typeof e=="string"?c=k3(e):!Array.isArray(e)&&M3(e)&&typeof c=="string"&&(e=k3(c));var t=A3(C,c);function n(){var i={from:c,to:e,velocity:B.getVelocity(),onComplete:z,onUpdate:function(r){return B.set(r)}};return o.type==="inertia"||o.type==="decay"?p7(ya(ya({},i),o)):p3(ya(ya({},D7(o,i,C)),{onUpdate:function(r){var f;i.onUpdate(r),(f=o.onUpdate)===null||f===void 0||f.call(o,r)},onComplete:function(){var r;i.onComplete(),(r=o.onComplete)===null||r===void 0||r.call(o)}}))}function a(){var i;return B.set(e),z(),(i=o==null?void 0:o.onComplete)===null||i===void 0||i.call(o),{stop:function(){}}}return!t||!p||o.type===!1?a:n}function M3(C){return C===0||typeof C=="string"&&parseFloat(C)===0&&C.indexOf(" ")===-1}function k3(C){return typeof C=="number"?0:jy("",C)}function Xy(C,B){return C[B]||C.default||C}function N0(C,B,e,k){return k===void 0&&(k={}),B.start(function(z){var l,o,c=I7(C,B,e,k,z),p=P7(k,C),t=function(){return o=c()};return p?l=setTimeout(t,O0(p)):t(),function(){clearTimeout(l),o==null||o.stop()}})}var F7=function(C){return/^\-?\d*\.?\d+$/.test(C)};function C3(C,B){C.indexOf(B)===-1&&C.push(B)}function E3(C,B){var e=C.indexOf(B);e>-1&&C.splice(e,1)}var U0=function(){function C(){this.subscriptions=[]}return C.prototype.add=function(B){var e=this;return C3(this.subscriptions,B),function(){return E3(e.subscriptions,B)}},C.prototype.notify=function(B,e,k){var z=this.subscriptions.length;if(!!z)if(z===1)this.subscriptions[0](B,e,k);else for(var l=0;l<z;l++){var o=this.subscriptions[l];o&&o(B,e,k)}},C.prototype.getSize=function(){return this.subscriptions.length},C.prototype.clear=function(){this.subscriptions.length=0},C}(),z7=function(C){return!isNaN(parseFloat(C))},O7=function(){function C(B){var e=this;this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new U0,this.velocityUpdateSubscribers=new U0,this.renderSubscribers=new U0,this.canTrackVelocity=!1,this.updateAndNotify=function(k,z){z===void 0&&(z=!0),e.prev=e.current,e.current=k;var l=r0(),o=l.delta,c=l.timestamp;e.lastUpdated!==c&&(e.timeDelta=o,e.lastUpdated=c,rc.postRender(e.scheduleVelocityCheck)),e.prev!==e.current&&e.updateSubscribers.notify(e.current),e.velocityUpdateSubscribers.getSize()&&e.velocityUpdateSubscribers.notify(e.getVelocity()),z&&e.renderSubscribers.notify(e.current)},this.scheduleVelocityCheck=function(){return rc.postRender(e.velocityCheck)},this.velocityCheck=function(k){var z=k.timestamp;z!==e.lastUpdated&&(e.prev=e.current,e.velocityUpdateSubscribers.notify(e.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=B,this.canTrackVelocity=z7(this.current)}return C.prototype.onChange=function(B){return this.updateSubscribers.add(B)},C.prototype.clearListeners=function(){this.updateSubscribers.clear()},C.prototype.onRenderRequest=function(B){return B(this.get()),this.renderSubscribers.add(B)},C.prototype.attach=function(B){this.passiveEffect=B},C.prototype.set=function(B,e){e===void 0&&(e=!0),!e||!this.passiveEffect?this.updateAndNotify(B,e):this.passiveEffect(B,this.updateAndNotify)},C.prototype.get=function(){return this.current},C.prototype.getPrevious=function(){return this.prev},C.prototype.getVelocity=function(){return this.canTrackVelocity?d3(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},C.prototype.start=function(B){var e=this;return this.stop(),new Promise(function(k){e.hasAnimated=!0,e.stopAnimation=B(k)}).then(function(){return e.clearAnimation()})},C.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},C.prototype.isAnimating=function(){return!!this.stopAnimation},C.prototype.clearAnimation=function(){this.stopAnimation=null},C.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},C}();function ph(C){return new O7(C)}var L3=function(C){return function(B){return B.test(C)}},B7={test:function(C){return C==="auto"},parse:function(C){return C}},P3=[ch,pi,cv,Uc,OI,zI,B7],V0=function(C){return P3.find(L3(C))},N7=Jl(Jl([],as(P3)),[$l,yc]),U7=function(C){return N7.find(L3(C))};function V7(C,B,e){C.hasValue(B)?C.getValue(B).set(e):C.addValue(B,ph(e))}function H7(C,B){var e=T0(C,B),k=e?C.makeTargetAnimatable(e,!1):{},z=k.transitionEnd,l=z===void 0?{}:z;k.transition;var o=zu(k,["transitionEnd","transition"]);o=ya(ya({},o),l);for(var c in o){var p=s9(o[c]);V7(C,c,p)}}function G7(C,B,e){var k,z,l,o,c=Object.keys(B).filter(function(r){return!C.hasValue(r)}),p=c.length;if(!!p)for(var t=0;t<p;t++){var n=c[t],a=B[n],i=null;Array.isArray(a)&&(i=a[0]),i===null&&(i=(z=(k=e[n])!==null&&k!==void 0?k:C.readValue(n))!==null&&z!==void 0?z:B[n]),i!=null&&(typeof i=="string"&&F7(i)?i=parseFloat(i):!U7(i)&&yc.test(a)&&(i=jy(n,a)),C.addValue(n,ph(i)),(l=(o=e)[n])!==null&&l!==void 0||(o[n]=i),C.setBaseTarget(n,i))}}function W7(C,B){if(!!B){var e=B[C]||B.default||B;return e.from}}function Y7(C,B,e){var k,z,l={};for(var o in C)l[o]=(k=W7(o,B))!==null&&k!==void 0?k:(z=e.getValue(o))===null||z===void 0?void 0:z.get();return l}function j7(C,B,e){e===void 0&&(e={}),C.notifyAnimationStart();var k;if(Array.isArray(B)){var z=B.map(function(o){return Zy(C,o,e)});k=Promise.all(z)}else if(typeof B=="string")k=Zy(C,B,e);else{var l=typeof B=="function"?T0(C,B,e.custom):B;k=R3(C,l,e)}return k.then(function(){return C.notifyAnimationComplete(B)})}function Zy(C,B,e){var k;e===void 0&&(e={});var z=T0(C,B,e.custom),l=(z||{}).transition,o=l===void 0?C.getDefaultTransition()||{}:l;e.transitionOverride&&(o=e.transitionOverride);var c=z?function(){return R3(C,z,e)}:function(){return Promise.resolve()},p=((k=C.variantChildren)===null||k===void 0?void 0:k.size)?function(r){r===void 0&&(r=0);var f=o.delayChildren,u=f===void 0?0:f,s=o.staggerChildren,h=o.staggerDirection;return X7(C,B,u+r,s,h,e)}:function(){return Promise.resolve()},t=o.when;if(t){var n=as(t==="beforeChildren"?[c,p]:[p,c],2),a=n[0],i=n[1];return a().then(i)}else return Promise.all([c(),p(e.delay)])}function R3(C,B,e){var k,z=e===void 0?{}:e,l=z.delay,o=l===void 0?0:l,c=z.transitionOverride,p=z.type,t=C.makeTargetAnimatable(B),n=t.transition,a=n===void 0?C.getDefaultTransition():n,i=t.transitionEnd,r=zu(t,["transition","transitionEnd"]);c&&(a=c);var f=[],u=p&&((k=C.animationState)===null||k===void 0?void 0:k.getState()[p]);for(var s in r){var h=C.getValue(s),d=r[s];if(!(!h||d===void 0||u&&K7(u,s))){var y=N0(s,h,d,ya({delay:o},a));f.push(y)}}return Promise.all(f).then(function(){i&&H7(C,i)})}function X7(C,B,e,k,z,l){e===void 0&&(e=0),k===void 0&&(k=0),z===void 0&&(z=1);var o=[],c=(C.variantChildren.size-1)*k,p=z===1?function(t){return t===void 0&&(t=0),t*k}:function(t){return t===void 0&&(t=0),c-t*k};return Array.from(C.variantChildren).sort(Z7).forEach(function(t,n){o.push(Zy(t,B,ya(ya({},l),{delay:e+p(n)})).then(function(){return t.notifyAnimationComplete(B)}))}),Promise.all(o)}function Z7(C,B){return C.sortNodePosition(B)}function K7(C,B){var e=C.protectedKeys,k=C.needsAnimating,z=e.hasOwnProperty(B)&&k[B]!==!0;return k[B]=!1,z}var Ky=[fs.Animate,fs.Hover,fs.Tap,fs.Drag,fs.Focus,fs.Exit],J7=Jl([],as(Ky)).reverse(),$7=Ky.length;function Q7(C){return function(B){return Promise.all(B.map(function(e){var k=e.animation,z=e.options;return j7(C,k,z)}))}}function q7(C){var B=Q7(C),e=tF(),k={},z=!0,l=function(n,a){var i=T0(C,a);if(i){i.transition;var r=i.transitionEnd,f=zu(i,["transition","transitionEnd"]);n=ya(ya(ya({},n),f),r)}return n};function o(n){return k[n]!==void 0}function c(n){B=n(C)}function p(n,a){for(var i,r=C.getProps(),f=C.getVariantContext(!0)||{},u=[],s=new Set,h={},d=1/0,y=function(A){var b=J7[A],S=e[b],w=(i=r[b])!==null&&i!==void 0?i:f[b],T=Mf(w),_=b===a?S.isActive:null;_===!1&&(d=A);var v=w===f[b]&&w!==r[b]&&T;if(v&&z&&C.manuallyAnimateOnMount&&(v=!1),S.protectedKeys=ya({},h),!S.isActive&&_===null||!w&&!S.prevProp||Py(w)||typeof w=="boolean")return"continue";var P=eF(S.prevProp,w)||b===a&&S.isActive&&!v&&T||A>d&&T,M=Array.isArray(w)?w:[w],E=M.reduce(l,{});_===!1&&(E={});var D=S.prevResolvedValues,N=D===void 0?{}:D,O=ya(ya({},N),E),I=function(j){P=!0,s.delete(j),S.needsAnimating[j]=!0};for(var F in O){var V=E[F],U=N[F];h.hasOwnProperty(F)||(V!==U?Dp(V)&&Dp(U)?w3(V,U)?S.protectedKeys[F]=!0:I(F):V!==void 0?I(F):s.add(F):V!==void 0&&s.has(F)?I(F):S.protectedKeys[F]=!0)}S.prevProp=w,S.prevResolvedValues=E,S.isActive&&(h=ya(ya({},h),E)),z&&C.blockInitialAnimation&&(P=!1),P&&!v&&u.push.apply(u,Jl([],as(M.map(function(j){return{animation:j,options:ya({type:b},n)}}))))},m=0;m<$7;m++)y(m);if(k=ya({},h),s.size){var g={};s.forEach(function(A){var b=C.getBaseTarget(A);b!==void 0&&(g[A]=b)}),u.push({animation:g})}var x=Boolean(u.length);return z&&r.initial===!1&&!C.manuallyAnimateOnMount&&(x=!1),z=!1,x?B(u):Promise.resolve()}function t(n,a,i){var r;return e[n].isActive===a?Promise.resolve():((r=C.variantChildren)===null||r===void 0||r.forEach(function(f){var u;return(u=f.animationState)===null||u===void 0?void 0:u.setActive(n,a)}),e[n].isActive=a,p(i,n))}return{isAnimated:o,animateChanges:p,setActive:t,setAnimateFunction:c,getState:function(){return e}}}function eF(C,B){return typeof B=="string"?B!==C:hw(B)?!w3(B,C):!1}function dv(C){return C===void 0&&(C=!1),{isActive:C,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function tF(){var C;return C={},C[fs.Animate]=dv(!0),C[fs.Hover]=dv(),C[fs.Tap]=dv(),C[fs.Drag]=dv(),C[fs.Focus]=dv(),C[fs.Exit]=dv(),C}var rF={animation:hh(function(C){var B=C.visualElement,e=C.animate;B.animationState||(B.animationState=q7(B)),Py(e)&&_o(function(){return e.subscribe(B)},[e])}),exit:hh(function(C){var B=C.custom,e=C.visualElement,k=as(yy(),2),z=k[0],l=k[1],o=wo(Tp);_o(function(){var c,p,t=(c=e.animationState)===null||c===void 0?void 0:c.setActive(fs.Exit,!z,{custom:(p=o==null?void 0:o.custom)!==null&&p!==void 0?p:B});!z&&(t==null||t.then(l))},[z])})},D3=function(){function C(B,e,k){var z=this,l=k===void 0?{}:k,o=l.transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(!!(z.lastMoveEvent&&z.lastMoveEventInfo)){var i=$y(z.lastMoveEventInfo,z.history),r=z.startEvent!==null,f=m3(i.offset,{x:0,y:0})>=3;if(!(!r&&!f)){var u=i.point,s=r0().timestamp;z.history.push(ya(ya({},u),{timestamp:s}));var h=z.handlers,d=h.onStart,y=h.onMove;r||(d&&d(z.lastMoveEvent,i),z.startEvent=z.lastMoveEvent),y&&y(z.lastMoveEvent,i)}}},this.handlePointerMove=function(i,r){if(z.lastMoveEvent=i,z.lastMoveEventInfo=Jy(r,z.transformPagePoint),Uw(i)&&i.buttons===0){z.handlePointerUp(i,r);return}rc.update(z.updatePoint,!0)},this.handlePointerUp=function(i,r){z.end();var f=z.handlers,u=f.onEnd,s=f.onSessionEnd,h=$y(Jy(r,z.transformPagePoint),z.history);z.startEvent&&u&&u(i,h),s&&s(i,h)},!(Vw(B)&&B.touches.length>1)){this.handlers=e,this.transformPagePoint=o;var c=Iy(B),p=Jy(c,this.transformPagePoint),t=p.point,n=r0().timestamp;this.history=[ya(ya({},t),{timestamp:n})];var a=e.onSessionStart;a&&a(B,$y(p,this.history)),this.removeListeners=Fp(pv(window,"pointermove",this.handlePointerMove),pv(window,"pointerup",this.handlePointerUp),pv(window,"pointercancel",this.handlePointerUp))}}return C.prototype.updateHandlers=function(B){this.handlers=B},C.prototype.end=function(){this.removeListeners&&this.removeListeners(),cp.update(this.updatePoint)},C}();function Jy(C,B){return B?{point:B(C.point)}:C}function I3(C,B){return{x:C.x-B.x,y:C.y-B.y}}function $y(C,B){var e=C.point;return{point:e,delta:I3(e,F3(B)),offset:I3(e,nF(B)),velocity:aF(B,.1)}}function nF(C){return C[0]}function F3(C){return C[C.length-1]}function aF(C,B){if(C.length<2)return{x:0,y:0};for(var e=C.length-1,k=null,z=F3(C);e>=0&&(k=C[e],!(z.timestamp-k.timestamp>O0(B)));)e--;if(!k)return{x:0,y:0};var l=(z.timestamp-k.timestamp)/1e3;if(l===0)return{x:0,y:0};var o={x:(z.x-k.x)/l,y:(z.y-k.y)/l};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function iF(C){return C}function z3(C){var B=C.top,e=C.left,k=C.right,z=C.bottom;return{x:{min:e,max:k},y:{min:B,max:z}}}function oF(C){var B=C.x,e=C.y;return{top:e.min,bottom:e.max,left:B.min,right:B.max}}function sF(C,B){var e=C.top,k=C.left,z=C.bottom,l=C.right;B===void 0&&(B=iF);var o=B({x:k,y:e}),c=B({x:l,y:z});return{top:o.y,left:o.x,bottom:c.y,right:c.x}}function Vc(){return{x:{min:0,max:1},y:{min:0,max:1}}}function lF(C){return{x:ya({},C.x),y:ya({},C.y)}}var O3={translate:0,scale:1,origin:0,originPoint:0};function B3(){return{x:ya({},O3),y:ya({},O3)}}function gu(C){return[C("x"),C("y")]}function N3(C,B,e){var k=B.min,z=B.max;return k!==void 0&&C<k?C=e?du(k,C,e.min):Math.max(C,k):z!==void 0&&C>z&&(C=e?du(z,C,e.max):Math.min(C,z)),C}function uF(C,B,e,k,z){var l=C-B*e;return k?N3(l,k,z):l}function U3(C,B,e){return{min:B!==void 0?C.min+B:void 0,max:e!==void 0?C.max+e-(C.max-C.min):void 0}}function fF(C,B){var e=B.top,k=B.left,z=B.bottom,l=B.right;return{x:U3(C.x,k,l),y:U3(C.y,e,z)}}function V3(C,B){var e,k=B.min-C.min,z=B.max-C.max;return B.max-B.min<C.max-C.min&&(e=as([z,k],2),k=e[0],z=e[1]),{min:C.min+k,max:C.min+z}}function cF(C,B){return{x:V3(C.x,B.x),y:V3(C.y,B.y)}}function hF(C,B,e){var k=C.max-C.min,z=du(B.min,B.max-k,e);return{min:z,max:z+k}}function vF(C,B){var e={};return B.min!==void 0&&(e.min=B.min-C.min),B.max!==void 0&&(e.max=B.max-C.min),e}var H3=.35;function pF(C){return C===!1?C=0:C===!0&&(C=H3),{x:G3(C,"left","right"),y:G3(C,"top","bottom")}}function G3(C,B,e){return{min:W3(C,B),max:W3(C,e)}}function W3(C,B){var e;return typeof C=="number"?C:(e=C[B])!==null&&e!==void 0?e:0}function Y3(C,B){var e=C.getBoundingClientRect();return z3(sF(e,B))}var dF=function(C){return E0(0,1,C)};function j3(C,B,e){return B===void 0&&(B=0),e===void 0&&(e=.01),m3(C,B)<e}function zp(C){return C.max-C.min}function gF(C,B){var e=.5,k=zp(C),z=zp(B);return z>k?e=Ip(B.min,B.max-k,C.min):k>z&&(e=Ip(C.min,C.max-z,B.min)),dF(e)}function X3(C,B,e,k){k===void 0&&(k=.5),C.origin=k,C.originPoint=du(B.min,B.max,C.origin),C.scale=zp(e)/zp(B),j3(C.scale,1,1e-4)&&(C.scale=1),C.translate=du(e.min,e.max,C.origin)-C.originPoint,j3(C.translate)&&(C.translate=0)}function Z3(C,B,e,k){X3(C.x,B.x,e.x,K3(k.originX)),X3(C.y,B.y,e.y,K3(k.originY))}function K3(C){return typeof C=="number"?C:.5}function J3(C,B,e){C.min=e.min+B.min,C.max=C.min+zp(B)}function mF(C,B){J3(C.target.x,C.relativeTarget.x,B.target.x),J3(C.target.y,C.relativeTarget.y,B.target.y)}var Qy=function(C,B){return C.depth-B.depth};function $3(C){var B=C.projection.isEnabled;return B||C.shouldResetTransform()}function H0(C,B){B===void 0&&(B=[]);var e=C.parent;return e&&H0(e,B),$3(C)&&B.push(C),B}function yF(C){var B=[],e=function(k){$3(k)&&B.push(k),k.children.forEach(e)};return C.children.forEach(e),B.sort(Qy)}function G0(C){if(!C.shouldResetTransform()){var B=C.getLayoutState();C.notifyBeforeLayoutMeasure(B.layout),B.isHydrated=!0,B.layout=C.measureViewportBox(),B.layoutCorrected=lF(B.layout),C.notifyLayoutMeasure(B.layout,C.prevViewportBox||B.layout),rc.update(function(){return C.rebaseProjectionTarget()})}}function xF(C){C.shouldResetTransform()||(C.prevViewportBox=C.measureViewportBox(!1),C.rebaseProjectionTarget(!1,C.prevViewportBox))}function bF(C,B,e,k){C.min=du(B.min,e.min,k),C.max=du(B.max,e.max,k)}function Q3(C,B){return{min:B.min-C.min,max:B.max-C.min}}function gv(C,B){return{x:Q3(C.x,B.x),y:Q3(C.y,B.y)}}function _F(C,B){var e=C.getLayoutId(),k=B.getLayoutId();return e!==k||k===void 0&&C!==B}function q3(C){var B=C.getProps(),e=B.drag,k=B._dragX;return e&&!k}function eT(C,B){C.min=B.min,C.max=B.max}function wF(C,B){eT(C.x,B.x),eT(C.y,B.y)}function W0(C,B,e){var k=C-e,z=B*k;return e+z}function tT(C,B,e,k,z){return z!==void 0&&(C=W0(C,z,k)),W0(C,e,k)+B}function qy(C,B,e,k,z){B===void 0&&(B=0),e===void 0&&(e=1),C.min=tT(C.min,B,e,k,z),C.max=tT(C.max,B,e,k,z)}function TF(C,B){var e=B.x,k=B.y;qy(C.x,e.translate,e.scale,e.originPoint),qy(C.y,k.translate,k.scale,k.originPoint)}function rT(C,B,e,k){var z=as(k,3),l=z[0],o=z[1],c=z[2];C.min=B.min,C.max=B.max;var p=e[c]!==void 0?e[c]:.5,t=du(B.min,B.max,p);qy(C,e[l],e[o],t,e.scale)}var nT=["x","scaleX","originX"],aT=["y","scaleY","originY"];function e1(C,B,e){rT(C.x,B.x,e,nT),rT(C.y,B.y,e,aT)}function iT(C,B,e,k,z){return C-=B,C=W0(C,1/e,k),z!==void 0&&(C=W0(C,1/z,k)),C}function AF(C,B,e,k,z){B===void 0&&(B=0),e===void 0&&(e=1),k===void 0&&(k=.5);var l=du(C.min,C.max,k)-B;C.min=iT(C.min,B,e,l,z),C.max=iT(C.max,B,e,l,z)}function oT(C,B,e){var k=as(e,3),z=k[0],l=k[1],o=k[2];AF(C,B[z],B[l],B[o],B.scale)}function sT(C,B){oT(C.x,B,nT),oT(C.y,B,aT)}function SF(C,B,e){var k=e.length;if(!!k){B.x=B.y=1;for(var z,l,o=0;o<k;o++)z=e[o],l=z.getLayoutState().delta,B.x*=l.x.scale,B.y*=l.y.scale,TF(C,l),q3(z)&&e1(C,C,z.getLatestValues())}}function MF(C,B){B===void 0&&(B=!0);var e=C.getProjectionParent();if(!e)return!1;var k;return B?(k=gv(e.projection.target,C.projection.target),sT(k,e.getLatestValues())):k=gv(e.getLayoutState().layout,C.getLayoutState().layout),gu(function(z){return C.setProjectionTargetAxis(z,k[z].min,k[z].max,!0)}),!0}var Op=new Set;function lT(C,B,e){C[e]||(C[e]=[]),C[e].push(B)}function t1(C){return Op.add(C),function(){return Op.delete(C)}}function r1(){if(!!Op.size){var C=0,B=[[]],e=[],k=function(c){return lT(B,c,C)},z=function(c){lT(e,c,C),C++};Op.forEach(function(c){c(k,z),C=0}),Op.clear();for(var l=e.length,o=0;o<=l;o++)B[o]&&B[o].forEach(uT),e[o]&&e[o].forEach(uT)}}var uT=function(C){return C()},kF=new WeakMap,fT,CF=function(){function C(B){var e=B.visualElement;this.isDragging=!1,this.currentDirection=null,this.constraints=!1,this.elastic=Vc(),this.props={},this.hasMutatedConstraints=!1,this.cursorProgress={x:.5,y:.5},this.originPoint={},this.openGlobalLock=null,this.panSession=null,this.visualElement=e,this.visualElement.enableLayoutProjection(),kF.set(e,this)}return C.prototype.start=function(B,e){var k=this,z=e===void 0?{}:e,l=z.snapToCursor,o=l===void 0?!1:l,c=z.cursorProgress,p=function(r){var f;k.stopMotion();var u=x9(r).point;(f=k.cancelLayout)===null||f===void 0||f.call(k),k.cancelLayout=t1(function(s,h){var d=H0(k.visualElement),y=yF(k.visualElement),m=Jl(Jl([],as(d)),as(y)),g=!1;k.isLayoutDrag()&&k.visualElement.lockProjectionTarget(),h(function(){m.forEach(function(x){return x.resetTransform()})}),s(function(){G0(k.visualElement),y.forEach(G0)}),h(function(){m.forEach(function(x){return x.restoreTransform()}),o&&(g=k.snapToCursor(u))}),s(function(){var x=Boolean(k.getAxisMotionValue("x")&&!k.isExternalDrag());x||k.visualElement.rebaseProjectionTarget(!0,k.visualElement.measureViewportBox(!1)),k.visualElement.scheduleUpdateLayoutProjection();var A=k.visualElement.projection;gu(function(b){if(!g){var S=A.target[b],w=S.min,T=S.max;k.cursorProgress[b]=c?c[b]:Ip(w,T,u[b])}var _=k.getAxisMotionValue(b);_&&(k.originPoint[b]=_.get())})}),h(function(){nv.update(),nv.preRender(),nv.render(),nv.postRender()}),s(function(){return k.resolveDragConstraints()})})},t=function(r,f){var u,s,h,d=k.props,y=d.drag,m=d.dragPropagation;y&&!m&&(k.openGlobalLock&&k.openGlobalLock(),k.openGlobalLock=Xw(y),!k.openGlobalLock)||(r1(),k.isDragging=!0,k.currentDirection=null,(s=(u=k.props).onDragStart)===null||s===void 0||s.call(u,r,f),(h=k.visualElement.animationState)===null||h===void 0||h.setActive(fs.Drag,!0))},n=function(r,f){var u,s,h,d,y=k.props,m=y.dragPropagation,g=y.dragDirectionLock;if(!(!m&&!k.openGlobalLock)){var x=f.offset;if(g&&k.currentDirection===null){k.currentDirection=EF(x),k.currentDirection!==null&&((s=(u=k.props).onDirectionLock)===null||s===void 0||s.call(u,k.currentDirection));return}k.updateAxis("x",f.point,x),k.updateAxis("y",f.point,x),(d=(h=k.props).onDrag)===null||d===void 0||d.call(h,r,f),fT=r}},a=function(r,f){return k.stop(r,f)},i=this.props.transformPagePoint;this.panSession=new D3(B,{onSessionStart:p,onStart:t,onMove:n,onSessionEnd:a},{transformPagePoint:i})},C.prototype.resolveDragConstraints=function(){var B=this,e=this.props,k=e.dragConstraints,z=e.dragElastic,l=this.visualElement.getLayoutState().layoutCorrected;k?this.constraints=xy(k)?this.resolveRefConstraints(l,k):fF(l,k):this.constraints=!1,this.elastic=pF(z),this.constraints&&!this.hasMutatedConstraints&&gu(function(o){B.getAxisMotionValue(o)&&(B.constraints[o]=vF(l[o],B.constraints[o]))})},C.prototype.resolveRefConstraints=function(B,e){var k=this.props,z=k.onMeasureDragConstraints,l=k.transformPagePoint,o=e.current;this.constraintsBox=Y3(o,l);var c=cF(B,this.constraintsBox);if(z){var p=z(oF(c));this.hasMutatedConstraints=!!p,p&&(c=z3(p))}return c},C.prototype.cancelDrag=function(){var B,e;this.visualElement.unlockProjectionTarget(),(B=this.cancelLayout)===null||B===void 0||B.call(this),this.isDragging=!1,this.panSession&&this.panSession.end(),this.panSession=null,!this.props.dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),(e=this.visualElement.animationState)===null||e===void 0||e.setActive(fs.Drag,!1)},C.prototype.stop=function(B,e){var k,z,l;(k=this.panSession)===null||k===void 0||k.end(),this.panSession=null;var o=this.isDragging;if(this.cancelDrag(),!!o){var c=e.velocity;this.animateDragEnd(c),(l=(z=this.props).onDragEnd)===null||l===void 0||l.call(z,B,e)}},C.prototype.snapToCursor=function(B){var e=this;return gu(function(k){var z=e.props.drag;if(!!Y0(k,z,e.currentDirection)){var l=e.getAxisMotionValue(k);if(l){var o=e.visualElement.getLayoutState().layout,c=o[k].max-o[k].min,p=o[k].min+c/2,t=B[k]-p;e.originPoint[k]=B[k],l.set(t)}else return e.cursorProgress[k]=.5,!0}}).includes(!0)},C.prototype.updateAxis=function(B,e,k){var z=this.props.drag;if(!!Y0(B,z,this.currentDirection))return this.getAxisMotionValue(B)?this.updateAxisMotionValue(B,k):this.updateVisualElementAxis(B,e)},C.prototype.updateAxisMotionValue=function(B,e){var k=this.getAxisMotionValue(B);if(!(!e||!k)){var z=this.originPoint[B]+e[B],l=this.constraints?N3(z,this.constraints[B],this.elastic[B]):z;k.set(l)}},C.prototype.updateVisualElementAxis=function(B,e){var k,z=this.visualElement.getLayoutState().layout[B],l=z.max-z.min,o=this.cursorProgress[B],c=uF(e[B],l,o,(k=this.constraints)===null||k===void 0?void 0:k[B],this.elastic[B]);this.visualElement.setProjectionTargetAxis(B,c,c+l)},C.prototype.setProps=function(B){var e=B.drag,k=e===void 0?!1:e,z=B.dragDirectionLock,l=z===void 0?!1:z,o=B.dragPropagation,c=o===void 0?!1:o,p=B.dragConstraints,t=p===void 0?!1:p,n=B.dragElastic,a=n===void 0?H3:n,i=B.dragMomentum,r=i===void 0?!0:i,f=zu(B,["drag","dragDirectionLock","dragPropagation","dragConstraints","dragElastic","dragMomentum"]);this.props=ya({drag:k,dragDirectionLock:l,dragPropagation:c,dragConstraints:t,dragElastic:a,dragMomentum:r},f)},C.prototype.getAxisMotionValue=function(B){var e=this.props,k=e.layout,z=e.layoutId,l="_drag"+B.toUpperCase();if(this.props[l])return this.props[l];if(!k&&z===void 0)return this.visualElement.getValue(B,0)},C.prototype.isLayoutDrag=function(){return!this.getAxisMotionValue("x")},C.prototype.isExternalDrag=function(){var B=this.props,e=B._dragX,k=B._dragY;return e||k},C.prototype.animateDragEnd=function(B){var e=this,k=this.props,z=k.drag,l=k.dragMomentum,o=k.dragElastic,c=k.dragTransition,p=MF(this.visualElement,this.isLayoutDrag()&&!this.isExternalDrag()),t=this.constraints||{};if(p&&Object.keys(t).length&&this.isLayoutDrag()){var n=this.visualElement.getProjectionParent();if(n){var a=gv(n.projection.targetFinal,t);gu(function(r){var f=a[r],u=f.min,s=f.max;t[r]={min:isNaN(u)?void 0:u,max:isNaN(s)?void 0:s}})}}var i=gu(function(r){var f;if(!!Y0(r,z,e.currentDirection)){var u=(f=t==null?void 0:t[r])!==null&&f!==void 0?f:{},s=o?200:1e6,h=o?40:1e7,d=ya(ya({type:"inertia",velocity:l?B[r]:0,bounceStiffness:s,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10},c),u);return e.getAxisMotionValue(r)?e.startAxisValueAnimation(r,d):e.visualElement.startLayoutAnimation(r,d,p)}});return Promise.all(i).then(function(){var r,f;(f=(r=e.props).onDragTransitionEnd)===null||f===void 0||f.call(r)})},C.prototype.stopMotion=function(){var B=this;gu(function(e){var k=B.getAxisMotionValue(e);k?k.stop():B.visualElement.stopLayoutAnimation()})},C.prototype.startAxisValueAnimation=function(B,e){var k=this.getAxisMotionValue(B);if(!!k){var z=k.get();return k.set(z),k.set(z),N0(B,k,0,e)}},C.prototype.scalePoint=function(){var B=this,e=this.props,k=e.drag,z=e.dragConstraints;if(!(!xy(z)||!this.constraintsBox)){this.stopMotion();var l={x:0,y:0};gu(function(o){l[o]=gF(B.visualElement.projection.target[o],B.constraintsBox[o])}),this.updateConstraints(function(){gu(function(o){if(!!Y0(o,k,null)){var c=hF(B.visualElement.projection.target[o],B.constraintsBox[o],l[o]),p=c.min,t=c.max;B.visualElement.setProjectionTargetAxis(o,p,t)}})}),setTimeout(r1,1)}},C.prototype.updateConstraints=function(B){var e=this;this.cancelLayout=t1(function(k,z){var l=H0(e.visualElement);z(function(){return l.forEach(function(o){return o.resetTransform()})}),k(function(){return G0(e.visualElement)}),z(function(){return l.forEach(function(o){return o.restoreTransform()})}),k(function(){e.resolveDragConstraints()}),B&&z(B)})},C.prototype.mount=function(B){var e=this,k=B.getInstance(),z=pv(k,"pointerdown",function(p){var t=e.props,n=t.drag,a=t.dragListener,i=a===void 0?!0:a;n&&i&&e.start(p)}),l=Ry(window,"resize",function(){e.scalePoint()}),o=B.onLayoutUpdate(function(){e.isDragging&&e.resolveDragConstraints()}),c=B.prevDragCursor;return c&&this.start(fT,{cursorProgress:c}),function(){z==null||z(),l==null||l(),o==null||o(),e.cancelDrag()}},C}();function Y0(C,B,e){return(B===!0||B===C)&&(e===null||e===C)}function EF(C,B){B===void 0&&(B=10);var e=null;return Math.abs(C.y)>B?e="y":Math.abs(C.x)>B&&(e="x"),e}function LF(C){var B=C.dragControls,e=C.visualElement,k=wo(_0).transformPagePoint,z=Ap(function(){return new CF({visualElement:e})});z.setProps(ya(ya({},C),{transformPagePoint:k})),_o(function(){return B&&B.subscribe(z)},[z]),_o(function(){return z.mount(e)},[])}function PF(C){var B=C.onPan,e=C.onPanStart,k=C.onPanEnd,z=C.onPanSessionStart,l=C.visualElement,o=B||e||k||z,c=Eo(null),p=wo(_0).transformPagePoint,t={onSessionStart:z,onStart:e,onMove:B,onEnd:function(a,i){c.current=null,k&&k(a,i)}};_o(function(){c.current!==null&&c.current.updateHandlers(t)});function n(a){c.current=new D3(a,t,{transformPagePoint:p})}C0(l,"pointerdown",o&&n),Fy(function(){return c.current&&c.current.end()})}var RF={pan:hh(PF),drag:hh(LF)},Bp;(function(C){C[C.Entering=0]="Entering",C[C.Present=1]="Present",C[C.Exiting=2]="Exiting"})(Bp||(Bp={}));var n1;(function(C){C[C.Hide=0]="Hide",C[C.Show=1]="Show"})(n1||(n1={}));function a1(C){return typeof C=="string"&&C.startsWith("var(--")}var cT=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function DF(C){var B=cT.exec(C);if(!B)return[,];var e=as(B,3),k=e[1],z=e[2];return[k,z]}function i1(C,B,e){var k=as(DF(C),2),z=k[0],l=k[1];if(!!z){var o=window.getComputedStyle(B).getPropertyValue(z);return o?o.trim():a1(l)?i1(l,B):l}}function IF(C,B,e){var k,z=zu(B,[]),l=C.getInstance();if(!(l instanceof HTMLElement))return{target:z,transitionEnd:e};e&&(e=ya({},e)),C.forEachValue(function(t){var n=t.get();if(!!a1(n)){var a=i1(n,l);a&&t.set(a)}});for(var o in z){var c=z[o];if(!!a1(c)){var p=i1(c,l);!p||(z[o]=p,e&&((k=e[o])!==null&&k!==void 0||(e[o]=c)))}}return{target:z,transitionEnd:e}}function hT(C,B){return C/(B.max-B.min)*100}function FF(C,B,e){var k=e.target;if(typeof C=="string")if(pi.test(C))C=parseFloat(C);else return C;var z=hT(C,k.x),l=hT(C,k.y);return z+"% "+l+"%"}var vT="_$css";function zF(C,B){var e=B.delta,k=B.treeScale,z=C,l=C.includes("var("),o=[];l&&(C=C.replace(cT,function(u){return o.push(u),vT}));var c=yc.parse(C);if(c.length>5)return z;var p=yc.createTransformer(C),t=typeof c[0]!="number"?1:0,n=e.x.scale*k.x,a=e.y.scale*k.y;c[0+t]/=n,c[1+t]/=a;var i=du(n,a,.5);typeof c[2+t]=="number"&&(c[2+t]/=i),typeof c[3+t]=="number"&&(c[3+t]/=i);var r=p(c);if(l){var f=0;r=r.replace(vT,function(){var u=o[f];return f++,u})}return r}var Np={process:FF},OF={borderRadius:ya(ya({},Np),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:Np,borderTopRightRadius:Np,borderBottomLeftRadius:Np,borderBottomRightRadius:Np,boxShadow:{process:zF}},pT=1e3,BF=function(C){lw(B,C);function B(){var e=C!==null&&C.apply(this,arguments)||this;return e.frameTarget=Vc(),e.currentAnimationTarget=Vc(),e.isAnimating={x:!1,y:!1},e.stopAxisAnimation={x:void 0,y:void 0},e.isAnimatingTree=!1,e.animate=function(k,z,l){l===void 0&&(l={});var o=l.originBox,c=l.targetBox,p=l.visibilityAction,t=l.shouldStackAnimate,n=l.onComplete,a=l.prevParent,i=zu(l,["originBox","targetBox","visibilityAction","shouldStackAnimate","onComplete","prevParent"]),r=e.props,f=r.visualElement,u=r.layout;if(t===!1)return e.isAnimatingTree=!1,e.safeToRemove();if(!(e.isAnimatingTree&&t!==!0)){t&&(e.isAnimatingTree=!0),z=o||z,k=c||k;var s=!1,h=f.getProjectionParent();if(h){var d=h.prevViewportBox,y=h.getLayoutState().layout;a&&(c&&(y=a.getLayoutState().layout),o&&!_F(a,h)&&a.prevViewportBox&&(d=a.prevViewportBox)),d&&HF(a,o,c)&&(s=!0,z=gv(d,z),k=gv(y,k))}var m=UF(z,k),g=gu(function(x){var A,b;if(u==="position"){var S=k[x].max-k[x].min;z[x].max=z[x].min+S}if(!f.projection.isTargetLocked)if(p!==void 0)f.setVisibility(p===n1.Show);else return m?e.animateAxis(x,k[x],z[x],ya(ya({},i),{isRelative:s})):((b=(A=e.stopAxisAnimation)[x])===null||b===void 0||b.call(A),f.setProjectionTargetAxis(x,k[x].min,k[x].max,s))});return f.syncRender(),Promise.all(g).then(function(){e.isAnimatingTree=!1,n&&n(),f.notifyLayoutAnimationComplete()})}},e}return B.prototype.componentDidMount=function(){var e=this,k=this.props.visualElement;k.animateMotionValue=N0,k.enableLayoutProjection(),this.unsubLayoutReady=k.onLayoutUpdate(this.animate),k.layoutSafeToRemove=function(){return e.safeToRemove()},SI(OF)},B.prototype.componentWillUnmount=function(){var e=this;this.unsubLayoutReady(),gu(function(k){var z,l;return(l=(z=e.stopAxisAnimation)[k])===null||l===void 0?void 0:l.call(z)})},B.prototype.animateAxis=function(e,k,z,l){var o=this,c,p,t=l===void 0?{}:l,n=t.transition,a=t.isRelative;if(!(this.isAnimating[e]&&Up(k,this.currentAnimationTarget[e]))){(p=(c=this.stopAxisAnimation)[e])===null||p===void 0||p.call(c),this.isAnimating[e]=!0;var i=this.props.visualElement,r=this.frameTarget[e],f=i.getProjectionAnimationProgress()[e];f.clearListeners(),f.set(0),f.set(0);var u=function(){var y=f.get()/pT;bF(r,z,k,y),i.setProjectionTargetAxis(e,r.min,r.max,a)};u();var s=f.onChange(u);this.stopAxisAnimation[e]=function(){o.isAnimating[e]=!1,f.stop(),s()},this.currentAnimationTarget[e]=k;var h=n||i.getDefaultTransition()||VF,d=N0(e==="x"?"layoutX":"layoutY",f,pT,h&&Xy(h,"layout")).then(this.stopAxisAnimation[e]);return d}},B.prototype.safeToRemove=function(){var e,k;(k=(e=this.props).safeToRemove)===null||k===void 0||k.call(e)},B.prototype.render=function(){return null},B}(Pu);function NF(C){var B=as(yy(),2),e=B[1];return pa(BF,ya({},C,{safeToRemove:e}))}function UF(C,B){return!gT(C)&&!gT(B)&&(!Up(C.x,B.x)||!Up(C.y,B.y))}var dT={min:0,max:0};function gT(C){return Up(C.x,dT)&&Up(C.y,dT)}function Up(C,B){return C.min===B.min&&C.max===B.max}var VF={duration:.45,ease:[.4,0,.1,1]};function HF(C,B,e){return C||!C&&!(B||e)}var GF={layoutReady:function(C){return C.notifyLayoutReady()}};function mT(){var C=new Set;return{add:function(B){return C.add(B)},flush:function(B){var e=B===void 0?GF:B,k=e.layoutReady,z=e.parent;t1(function(l,o){var c=Array.from(C).sort(Qy),p=z?H0(z):[];o(function(){var t=Jl(Jl([],as(p)),as(c));t.forEach(function(n){return n.resetTransform()})}),l(function(){c.forEach(G0)}),o(function(){p.forEach(function(t){return t.restoreTransform()}),c.forEach(k)}),l(function(){c.forEach(function(t){t.isPresent&&(t.presence=Bp.Present)})}),o(function(){nv.preRender(),nv.render()}),l(function(){rc.postRender(function(){return c.forEach(WF)}),C.clear()})}),r1()}}}function WF(C){C.prevViewportBox=C.projection.target}var yT=rl(mT()),YF=rl(mT());function dh(C){return!!C.forceUpdate}var jF=function(C){lw(B,C);function B(){return C!==null&&C.apply(this,arguments)||this}return B.prototype.componentDidMount=function(){var e=this.props,k=e.syncLayout,z=e.framerSyncLayout,l=e.visualElement;dh(k)&&k.register(l),dh(z)&&z.register(l),l.onUnmount(function(){dh(k)&&k.remove(l),dh(z)&&z.remove(l)})},B.prototype.getSnapshotBeforeUpdate=function(){var e=this.props,k=e.syncLayout,z=e.visualElement;return dh(k)?k.syncUpdate():(xF(z),k.add(z)),null},B.prototype.componentDidUpdate=function(){var e=this.props.syncLayout;dh(e)||e.flush()},B.prototype.render=function(){return null},B}(nh.Component);function XF(C){var B=wo(yT),e=wo(YF);return nh.createElement(jF,ya({},C,{syncLayout:B,framerSyncLayout:e}))}var ZF={measureLayout:XF,layoutAnimation:NF},KF=function(){return{isEnabled:!1,isHydrated:!1,isTargetLocked:!1,target:Vc(),targetFinal:Vc()}};function xT(){return{isHydrated:!1,layout:Vc(),layoutCorrected:Vc(),treeScale:{x:1,y:1},delta:B3(),deltaFinal:B3(),deltaTransform:""}}var bT=xT();function j0(C,B,e){var k=C.x,z=C.y,l=k.translate/B.x,o=z.translate/B.y,c="translate3d("+l+"px, "+o+"px, 0) ";if(e){var p=e.rotate,t=e.rotateX,n=e.rotateY;p&&(c+="rotate("+p+") "),t&&(c+="rotateX("+t+") "),n&&(c+="rotateY("+n+") ")}return c+="scale("+k.scale+", "+z.scale+")",!e&&c===JF?"":c}function _T(C){var B=C.deltaFinal;return B.x.origin*100+"% "+B.y.origin*100+"% 0"}var JF=j0(bT.delta,bT.treeScale,{x:1,y:1}),X0=["LayoutMeasure","BeforeLayoutMeasure","LayoutUpdate","ViewportBoxUpdate","Update","Render","AnimationComplete","LayoutAnimationComplete","AnimationStart","SetAxisTarget","Unmount"];function $F(){var C=X0.map(function(){return new U0}),B={},e={clearAllListeners:function(){return C.forEach(function(k){return k.clear()})},updatePropListeners:function(k){return X0.forEach(function(z){var l;(l=B[z])===null||l===void 0||l.call(B);var o="on"+z,c=k[o];c&&(B[z]=e[o](c))})}};return C.forEach(function(k,z){e["on"+X0[z]]=function(l){return k.add(l)},e["notify"+X0[z]]=function(){for(var l=[],o=0;o<arguments.length;o++)l[o]=arguments[o];return k.notify.apply(k,Jl([],as(l)))}}),e}function QF(C,B,e){var k;for(var z in B){var l=B[z],o=e[z];if(Nc(l))C.addValue(z,l);else if(Nc(o))C.addValue(z,ph(l));else if(o!==l)if(C.hasValue(z)){var c=C.getValue(z);!c.hasAnimated&&c.set(l)}else C.addValue(z,ph((k=C.getStaticValue(z))!==null&&k!==void 0?k:l))}for(var z in e)B[z]===void 0&&C.removeValue(z);return B}function qF(C,B,e,k){var z=C.delta,l=C.layout,o=C.layoutCorrected,c=C.treeScale,p=B.target;wF(o,l),SF(o,c,e),Z3(z,o,p,k)}var ez=function(){function C(){this.children=[],this.isDirty=!1}return C.prototype.add=function(B){C3(this.children,B),this.isDirty=!0},C.prototype.remove=function(B){E3(this.children,B),this.isDirty=!0},C.prototype.forEach=function(B){this.isDirty&&this.children.sort(Qy),this.isDirty=!1,this.children.forEach(B)},C}();function tz(C){var B=C.getProjectionParent();if(!B){C.rebaseProjectionTarget();return}var e=gv(B.getLayoutState().layout,C.getLayoutState().layout);gu(function(k){C.setProjectionTargetAxis(k,e[k].min,e[k].max,!0)})}var wT=function(C){var B=C.treeType,e=B===void 0?"":B,k=C.build,z=C.getBaseTarget,l=C.makeTargetAnimatable,o=C.measureViewportBox,c=C.render,p=C.readValueFromInstance,t=C.resetTransform,n=C.restoreTransform,a=C.removeValueFromRenderState,i=C.sortNodePosition,r=C.scrapeMotionValuesFromProps;return function(f,u){var s=f.parent,h=f.props,d=f.presenceId,y=f.blockInitialAnimation,m=f.visualState;u===void 0&&(u={});var g=m.latestValues,x=m.renderState,A,b=$F(),S=KF(),w,T=S,_=g,v,P=xT(),M,E=!1,D=new Map,N=new Map,O={},I,F=ya({},g),V;function U(){!A||(Y.isProjectionReady()&&(e1(T.targetFinal,T.target,_),Z3(P.deltaFinal,P.layoutCorrected,T.targetFinal,g)),j(),c(A,x))}function j(){var ee=g;if(M&&M.isActive()){var $=M.getCrossfadeState(Y);$&&(ee=$)}k(Y,x,ee,T,P,u,h)}function Z(){b.notifyUpdate(g)}function te(){if(!!Y.isProjectionReady()){var ee=P.delta,$=P.treeScale,K=$.x,Q=$.y,ae=P.deltaTransform;qF(P,T,Y.path,g),E&&Y.notifyViewportBoxUpdate(T.target,ee),E=!1;var ie=j0(ee,$);(ie!==ae||K!==$.x||Q!==$.y)&&Y.scheduleRender(),P.deltaTransform=ie}}function re(){Y.layoutTree.forEach(nz)}function W(ee,$){var K=$.onChange(function(ae){g[ee]=ae,h.onUpdate&&rc.update(Z,!1,!0)}),Q=$.onRenderRequest(Y.scheduleRender);N.set(ee,function(){K(),Q()})}var J=r(h);for(var le in J){var ue=J[le];g[le]!==void 0&&Nc(ue)&&ue.set(g[le],!1)}var se=A0(h),G=pw(h),Y=ya(ya({treeType:e,current:null,depth:s?s.depth+1:0,parent:s,children:new Set,path:s?Jl(Jl([],as(s.path)),[s]):[],layoutTree:s?s.layoutTree:new ez,presenceId:d,projection:S,variantChildren:G?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:Boolean(s==null?void 0:s.isMounted()),blockInitialAnimation:y,isMounted:function(){return Boolean(A)},mount:function(ee){A=Y.current=ee,Y.pointTo(Y),G&&s&&!se&&(V=s==null?void 0:s.addVariantChild(Y)),s==null||s.children.add(Y)},unmount:function(){cp.update(Z),cp.render(U),cp.preRender(Y.updateLayoutProjection),N.forEach(function(ee){return ee()}),Y.stopLayoutAnimation(),Y.layoutTree.remove(Y),V==null||V(),s==null||s.children.delete(Y),v==null||v(),b.clearAllListeners()},addVariantChild:function(ee){var $,K=Y.getClosestVariantNode();if(K)return($=K.variantChildren)===null||$===void 0||$.add(ee),function(){return K.variantChildren.delete(ee)}},sortNodePosition:function(ee){return!i||e!==ee.treeType?0:i(Y.getInstance(),ee.getInstance())},getClosestVariantNode:function(){return G?Y:s==null?void 0:s.getClosestVariantNode()},scheduleUpdateLayoutProjection:s?s.scheduleUpdateLayoutProjection:function(){return rc.preRender(Y.updateTreeLayoutProjection,!1,!0)},getLayoutId:function(){return h.layoutId},getInstance:function(){return A},getStaticValue:function(ee){return g[ee]},setStaticValue:function(ee,$){return g[ee]=$},getLatestValues:function(){return g},setVisibility:function(ee){Y.isVisible!==ee&&(Y.isVisible=ee,Y.scheduleRender())},makeTargetAnimatable:function(ee,$){return $===void 0&&($=!0),l(Y,ee,h,$)},addValue:function(ee,$){Y.hasValue(ee)&&Y.removeValue(ee),D.set(ee,$),g[ee]=$.get(),W(ee,$)},removeValue:function(ee){var $;D.delete(ee),($=N.get(ee))===null||$===void 0||$(),N.delete(ee),delete g[ee],a(ee,x)},hasValue:function(ee){return D.has(ee)},getValue:function(ee,$){var K=D.get(ee);return K===void 0&&$!==void 0&&(K=ph($),Y.addValue(ee,K)),K},forEachValue:function(ee){return D.forEach(ee)},readValue:function(ee){var $;return($=g[ee])!==null&&$!==void 0?$:p(A,ee,u)},setBaseTarget:function(ee,$){F[ee]=$},getBaseTarget:function(ee){if(z){var $=z(h,ee);if($!==void 0&&!Nc($))return $}return F[ee]}},b),{build:function(){return j(),x},scheduleRender:function(){rc.render(U,!1,!0)},syncRender:U,setProps:function(ee){h=ee,b.updatePropListeners(ee),O=QF(Y,r(h),O)},getProps:function(){return h},getVariant:function(ee){var $;return($=h.variants)===null||$===void 0?void 0:$[ee]},getDefaultTransition:function(){return h.transition},getVariantContext:function(ee){if(ee===void 0&&(ee=!1),ee)return s==null?void 0:s.getVariantContext();if(!se){var $=(s==null?void 0:s.getVariantContext())||{};return h.initial!==void 0&&($.initial=h.initial),$}for(var K={},Q=0;Q<az;Q++){var ae=TT[Q],ie=h[ae];(Mf(ie)||ie===!1)&&(K[ae]=ie)}return K},enableLayoutProjection:function(){S.isEnabled=!0,Y.layoutTree.add(Y)},lockProjectionTarget:function(){S.isTargetLocked=!0},unlockProjectionTarget:function(){Y.stopLayoutAnimation(),S.isTargetLocked=!1},getLayoutState:function(){return P},setCrossfader:function(ee){M=ee},isProjectionReady:function(){return S.isEnabled&&S.isHydrated&&P.isHydrated},startLayoutAnimation:function(ee,$,K){K===void 0&&(K=!1);var Q=Y.getProjectionAnimationProgress()[ee],ae=K?S.relativeTarget[ee]:S.target[ee],ie=ae.min,oe=ae.max,fe=oe-ie;return Q.clearListeners(),Q.set(ie),Q.set(ie),Q.onChange(function(ye){Y.setProjectionTargetAxis(ee,ye,ye+fe,K)}),Y.animateMotionValue(ee,Q,0,$)},stopLayoutAnimation:function(){gu(function(ee){return Y.getProjectionAnimationProgress()[ee].stop()})},measureViewportBox:function(ee){ee===void 0&&(ee=!0);var $=o(A,u);return ee||sT($,g),$},getProjectionAnimationProgress:function(){return I||(I={x:ph(0),y:ph(0)}),I},setProjectionTargetAxis:function(ee,$,K,Q){Q===void 0&&(Q=!1);var ae;Q?(S.relativeTarget||(S.relativeTarget=Vc()),ae=S.relativeTarget[ee]):(S.relativeTarget=void 0,ae=S.target[ee]),S.isHydrated=!0,ae.min=$,ae.max=K,E=!0,b.notifySetAxisTarget()},rebaseProjectionTarget:function(ee,$){$===void 0&&($=P.layout);var K=Y.getProjectionAnimationProgress(),Q=K.x,ae=K.y,ie=!S.relativeTarget&&!S.isTargetLocked&&!Q.isAnimating()&&!ae.isAnimating();(ee||ie)&&gu(function(oe){var fe=$[oe],ye=fe.min,ce=fe.max;Y.setProjectionTargetAxis(oe,ye,ce)})},notifyLayoutReady:function(ee){tz(Y),Y.notifyLayoutUpdate(P.layout,Y.prevViewportBox||P.layout,ee)},resetTransform:function(){return t(Y,A,h)},restoreTransform:function(){return n(A,x)},updateLayoutProjection:te,updateTreeLayoutProjection:function(){Y.layoutTree.forEach(rz),rc.preRender(re,!1,!0)},getProjectionParent:function(){if(w===void 0){for(var ee=!1,$=Y.path.length-1;$>=0;$--){var K=Y.path[$];if(K.projection.isEnabled){ee=K;break}}w=ee}return w},resolveRelativeTargetBox:function(){var ee=Y.getProjectionParent();if(!(!S.relativeTarget||!ee)&&(mF(S,ee.projection),q3(ee))){var $=S.target;e1($,$,ee.getLatestValues())}},shouldResetTransform:function(){return Boolean(h._layoutResetTransform)},pointTo:function(ee){T=ee.projection,_=ee.getLatestValues(),v==null||v(),v=Fp(ee.onSetAxisTarget(Y.scheduleUpdateLayoutProjection),ee.onLayoutAnimationComplete(function(){var $;Y.isPresent?Y.presence=Bp.Present:($=Y.layoutSafeToRemove)===null||$===void 0||$.call(Y)}))},isPresent:!0,presence:Bp.Entering});return Y}};function rz(C){C.resolveRelativeTargetBox()}function nz(C){C.updateLayoutProjection()}var TT=Jl(["initial"],as(Ky)),az=TT.length,iz=new Set(["width","height","top","left","right","bottom","x","y"]),AT=function(C){return iz.has(C)},oz=function(C){return Object.keys(C).some(AT)},ST=function(C,B){C.set(B,!1),C.set(B)},MT=function(C){return C===ch||C===pi},kT;(function(C){C.width="width",C.height="height",C.left="left",C.right="right",C.top="top",C.bottom="bottom"})(kT||(kT={}));var CT=function(C,B){return parseFloat(C.split(", ")[B])},ET=function(C,B){return function(e,k){var z=k.transform;if(z==="none"||!z)return 0;var l=z.match(/^matrix3d\((.+)\)$/);if(l)return CT(l[1],B);var o=z.match(/^matrix\((.+)\)$/);return o?CT(o[1],C):0}},sz=new Set(["x","y","z"]),lz=kp.filter(function(C){return!sz.has(C)});function uz(C){var B=[];return lz.forEach(function(e){var k=C.getValue(e);k!==void 0&&(B.push([e,k.get()]),k.set(e.startsWith("scale")?1:0))}),B.length&&C.syncRender(),B}var LT={width:function(C){var B=C.x;return B.max-B.min},height:function(C){var B=C.y;return B.max-B.min},top:function(C,B){var e=B.top;return parseFloat(e)},left:function(C,B){var e=B.left;return parseFloat(e)},bottom:function(C,B){var e=C.y,k=B.top;return parseFloat(k)+(e.max-e.min)},right:function(C,B){var e=C.x,k=B.left;return parseFloat(k)+(e.max-e.min)},x:ET(4,13),y:ET(5,14)},fz=function(C,B,e){var k=B.measureViewportBox(),z=B.getInstance(),l=getComputedStyle(z),o=l.display,c=l.top,p=l.left,t=l.bottom,n=l.right,a=l.transform,i={top:c,left:p,bottom:t,right:n,transform:a};o==="none"&&B.setStaticValue("display",C.display||"block"),B.syncRender();var r=B.measureViewportBox();return e.forEach(function(f){var u=B.getValue(f);ST(u,LT[f](k,i)),C[f]=LT[f](r,l)}),C},cz=function(C,B,e,k){e===void 0&&(e={}),k===void 0&&(k={}),B=ya({},B),k=ya({},k);var z=Object.keys(B).filter(AT),l=[],o=!1,c=[];if(z.forEach(function(t){var n=C.getValue(t);if(!!C.hasValue(t)){var a=e[t],i=B[t],r=V0(a),f;if(Dp(i))for(var u=i.length,s=i[0]===null?1:0;s<u;s++)f?wp(V0(i[s])===f):f=V0(i[s]);else f=V0(i);if(r!==f)if(MT(r)&&MT(f)){var h=n.get();typeof h=="string"&&n.set(parseFloat(h)),typeof i=="string"?B[t]=parseFloat(i):Array.isArray(i)&&f===pi&&(B[t]=i.map(parseFloat))}else(r==null?void 0:r.transform)&&(f==null?void 0:f.transform)&&(a===0||i===0)?a===0?n.set(f.transform(a)):B[t]=r.transform(i):(o||(l=uz(C),o=!0),c.push(t),k[t]=k[t]!==void 0?k[t]:B[t],ST(n,i))}}),c.length){var p=fz(B,C,c);return l.length&&l.forEach(function(t){var n=as(t,2),a=n[0],i=n[1];C.getValue(a).set(i)}),C.syncRender(),{target:p,transitionEnd:k}}else return{target:B,transitionEnd:k}};function hz(C,B,e,k){return oz(B)?cz(C,B,e,k):{target:B,transitionEnd:k}}var vz=function(C,B,e,k){var z=IF(C,B,k);return B=z.target,k=z.transitionEnd,hz(C,B,e,k)};function pz(C){return window.getComputedStyle(C)}var PT={treeType:"dom",readValueFromInstance:function(C,B){if(S0(B)){var e=Yy(B);return e&&e.default||0}else{var k=pz(C);return(yw(B)?k.getPropertyValue(B):k[B])||0}},sortNodePosition:function(C,B){return C.compareDocumentPosition(B)&2?1:-1},getBaseTarget:function(C,B){var e;return(e=C.style)===null||e===void 0?void 0:e[B]},measureViewportBox:function(C,B){var e=B.transformPagePoint;return Y3(C,e)},resetTransform:function(C,B,e){var k=e.transformTemplate;B.style.transform=k?k({},""):"none",C.scheduleRender()},restoreTransform:function(C,B){C.style.transform=B.style.transform},removeValueFromRenderState:function(C,B){var e=B.vars,k=B.style;delete e[C],delete k[C]},makeTargetAnimatable:function(C,B,e,k){var z=e.transformValues;k===void 0&&(k=!0);var l=B.transition,o=B.transitionEnd,c=zu(B,["transition","transitionEnd"]),p=Y7(c,l||{},C);if(z&&(o&&(o=z(o)),c&&(c=z(c)),p&&(p=z(p))),k){G7(C,c,p);var t=vz(C,c,p,o);o=t.transitionEnd,c=t.target}return ya({transition:l,transitionEnd:o},c)},scrapeMotionValuesFromProps:Ly,build:function(C,B,e,k,z,l,o){C.isVisible!==void 0&&(B.style.visibility=C.isVisible?"visible":"hidden");var c=k.isEnabled&&z.isHydrated;My(B,e,k,z,l,o.transformTemplate,c?j0:void 0,c?_T:void 0)},render:Iw},dz=wT(PT),gz=wT(ya(ya({},PT),{getBaseTarget:function(C,B){return C[B]},readValueFromInstance:function(C,B){var e;return S0(B)?((e=Yy(B))===null||e===void 0?void 0:e.default)||0:(B=Fw.has(B)?B:Dw(B),C.getAttribute(B))},scrapeMotionValuesFromProps:Ow,build:function(C,B,e,k,z,l,o){var c=k.isEnabled&&z.isHydrated;Ey(B,e,k,z,l,o.transformTemplate,c?j0:void 0,c?_T:void 0)},render:zw})),mz=function(C,B){return by(C)?gz(B,{enableHardwareAcceleration:!1}):dz(B,{enableHardwareAcceleration:!0})},yz=ya(ya(ya(ya({},rF),T7),RF),ZF),RT=TI(function(C,B){return v9(C,B,yz,mz)});function xz(){var C=Eo(!1),B=as(Us(0),2),e=B[0],k=B[1];return Fy(function(){return C.current=!0}),Oo(function(){!C.current&&k(e+1)},[e])}var DT=0;function bz(){var C=DT;return DT++,C}var o1=function(C){var B=C.children,e=C.initial,k=C.isPresent,z=C.onExitComplete,l=C.custom,o=C.presenceAffectsLayout,c=Ap(_z),p=Ap(bz),t=Vs(function(){return{id:p,initial:e,isPresent:k,custom:l,onExitComplete:function(n){c.set(n,!0);var a=!0;c.forEach(function(i){i||(a=!1)}),a&&(z==null||z())},register:function(n){return c.set(n,!1),function(){return c.delete(n)}}}},o?void 0:[k]);return Vs(function(){c.forEach(function(n,a){return c.set(a,!1)})},[k]),_o(function(){!k&&!c.size&&(z==null||z())},[k]),pa(Tp.Provider,{value:t},B)};function _z(){return new Map}function mv(C){return C.key||""}function wz(C,B){C.forEach(function(e){var k=mv(e);B.set(k,e)})}function Tz(C){var B=[];return Sd.forEach(C,function(e){Jh(e)&&B.push(e)}),B}var IT=function(C){var B=C.children,e=C.custom,k=C.initial,z=k===void 0?!0:k,l=C.onExitComplete,o=C.exitBeforeEnter,c=C.presenceAffectsLayout,p=c===void 0?!0:c,t=xz(),n=wo(yT);dh(n)&&(t=n.forceUpdate);var a=Eo(!0),i=Tz(B),r=Eo(i),f=Eo(new Map).current,u=Eo(new Set).current;if(wz(i,f),a.current)return a.current=!1,pa(tl,null,i.map(function(x){return pa(o1,{key:mv(x),isPresent:!0,initial:z?void 0:!1,presenceAffectsLayout:p},x)}));for(var s=Jl([],as(i)),h=r.current.map(mv),d=i.map(mv),y=h.length,m=0;m<y;m++){var g=h[m];d.indexOf(g)===-1?u.add(g):u.delete(g)}return o&&u.size&&(s=[]),u.forEach(function(x){if(d.indexOf(x)===-1){var A=f.get(x);if(!!A){var b=h.indexOf(x),S=function(){f.delete(x),u.delete(x);var w=r.current.findIndex(function(T){return T.key===x});r.current.splice(w,1),u.size||(r.current=i,t(),l&&l())};s.splice(b,0,pa(o1,{key:mv(A),isPresent:!1,onExitComplete:S,custom:e,presenceAffectsLayout:p},A))}}}),s=s.map(function(x){var A=x.key;return u.has(A)?x:pa(o1,{key:mv(x),isPresent:!0,presenceAffectsLayout:p},x)}),r.current=s,pa(tl,null,u.size?s:s.map(function(x){return $h(x)}))};function Z0(){return Z0=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},Z0.apply(this,arguments)}var s1={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]},Vp={scale:{enter:{scale:1},exit:{scale:.95}},fade:{enter:{opacity:1},exit:{opacity:0}},pushLeft:{enter:{x:"100%"},exit:{x:"-30%"}},pushRight:{enter:{x:"-100%"},exit:{x:"30%"}},pushUp:{enter:{y:"100%"},exit:{y:"-30%"}},pushDown:{enter:{y:"-100%"},exit:{y:"30%"}},slideLeft:{position:{left:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"-100%",y:0}},slideRight:{position:{right:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"100%",y:0}},slideUp:{position:{top:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"-100%"}},slideDown:{position:{bottom:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"100%"}}};function l1(C){var B,e=(B=C==null?void 0:C.direction)!=null?B:"right";switch(e){case"right":return Vp.slideRight;case"left":return Vp.slideLeft;case"bottom":return Vp.slideDown;case"top":return Vp.slideUp;default:return Vp.slideRight}}var FT={enter:{duration:.2,ease:s1.easeOut},exit:{duration:.1,ease:s1.easeIn}},K0={enter:(C,B)=>Z0({},C,{delay:ih(B)?B:B==null?void 0:B.enter}),exit:(C,B)=>Z0({},C,{delay:ih(B)?B:B==null?void 0:B.exit})},Az={enter:function(B){var e,{transition:k,transitionEnd:z,delay:l}=B===void 0?{}:B;return{opacity:1,transition:(e=k==null?void 0:k.enter)!=null?e:K0.enter(FT.enter,l),transitionEnd:z==null?void 0:z.enter}},exit:function(B){var e,{transition:k,transitionEnd:z,delay:l}=B===void 0?{}:B;return{opacity:0,transition:(e=k==null?void 0:k.exit)!=null?e:K0.exit(FT.exit,l),transitionEnd:z==null?void 0:z.exit}}},Sz={initial:"exit",animate:"enter",exit:"exit",variants:Az};function Mz(C,B){if(C==null)return{};var e={},k=Object.keys(C),z,l;for(l=0;l<k.length;l++)z=k[l],!(B.indexOf(z)>=0)&&(e[z]=C[z]);return e}function Hp(){return Hp=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},Hp.apply(this,arguments)}var zT={exit:{duration:.15,ease:s1.easeInOut},enter:{type:"spring",damping:25,stiffness:180}},kz={exit:C=>{var B,{direction:e,transition:k,transitionEnd:z,delay:l}=C,{exit:o}=l1({direction:e});return Hp({},o,{transition:(B=k==null?void 0:k.exit)!=null?B:K0.exit(zT.exit,l),transitionEnd:z==null?void 0:z.exit})},enter:C=>{var B,{direction:e,transitionEnd:k,transition:z,delay:l}=C,{enter:o}=l1({direction:e});return Hp({},o,{transition:(B=z==null?void 0:z.enter)!=null?B:K0.enter(zT.enter,l),transitionEnd:k==null?void 0:k.enter})}},Cz=Xf((C,B)=>{var{direction:e="right",style:k,unmountOnExit:z,in:l,className:o,transition:c,transitionEnd:p,delay:t}=C,n=Mz(C,["direction","style","unmountOnExit","in","className","transition","transitionEnd","delay"]),a=l1({direction:e}),i=Object.assign({position:"fixed"},a.position,k),r=z?l&&z:!0,f=l||z?"enter":"exit",u={transitionEnd:p,transition:c,direction:e,delay:t};return pa(IT,{custom:u},r&&pa(RT.div,Hp({ref:B,initial:"exit",className:ec("chakra-slide",o),animate:f,exit:"exit",custom:u,variants:kz,style:i},n)))}),[UB,Ez]=av({strict:!1,name:"ButtonGroupContext"}),OT={border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},Lz=Ol("span",{baseStyle:OT});Ol("input",{baseStyle:OT});function J0(){return J0=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},J0.apply(this,arguments)}function Pz(C,B){if(C==null)return{};var e={},k=Object.keys(C),z,l;for(l=0;l<k.length;l++)z=k[l],!(B.indexOf(z)>=0)&&(e[z]=C[z]);return e}var Rz=B2({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),Dz=ac((C,B)=>{var e=c0("Spinner",C),k=Wm(C),{label:z="Loading...",thickness:l="2px",speed:o="0.45s",emptyColor:c="transparent",className:p}=k,t=Pz(k,["label","thickness","speed","emptyColor","className"]),n=ec("chakra-spinner",p),a=J0({display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:l,borderBottomColor:c,borderLeftColor:c,animation:Rz+" "+o+" linear infinite"},e);return pa(Ol.div,J0({ref:B,__css:a,className:n},t),z&&pa(Lz,null,z))});function $0(){return $0=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},$0.apply(this,arguments)}function Iz(C,B){if(C==null)return{};var e={},k=Object.keys(C),z,l;for(l=0;l<k.length;l++)z=k[l],!(B.indexOf(z)>=0)&&(e[z]=C[z]);return e}var BT=C=>{var{label:B,placement:e,children:k=pa(Dz,{color:"currentColor",width:"1em",height:"1em"}),className:z,__css:l}=C,o=Iz(C,["label","placement","spacing","children","className","__css"]),c=ec("chakra-button__spinner",z),p=e==="start"?"marginEnd":"marginStart",t=Vs(()=>$0({display:"flex",alignItems:"center",position:B?"relative":"absolute",[p]:B?"0.5rem":0,fontSize:"1em",lineHeight:"normal"},l),[l,B,p]);return pa(Ol.div,$0({className:c},o,{__css:t}),k)};function u1(){return u1=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},u1.apply(this,arguments)}function Fz(C,B){if(C==null)return{};var e={},k=Object.keys(C),z,l;for(l=0;l<k.length;l++)z=k[l],!(B.indexOf(z)>=0)&&(e[z]=C[z]);return e}var NT=C=>{var{children:B,className:e}=C,k=Fz(C,["children","className"]),z=Jh(B)?$h(B,{"aria-hidden":!0,focusable:!1}):B,l=ec("chakra-button__icon",e);return pa(Ol.span,u1({display:"inline-flex",alignSelf:"center",flexShrink:0},k,{className:l}),z)};function zz(C){var[B,e]=Us(!C),k=Oo(l=>{!l||e(l.tagName==="BUTTON")},[]),z=B?"button":void 0;return{ref:k,type:z}}function Oz(C,B){if(C==null)return{};var e={},k=Object.keys(C),z,l;for(l=0;l<k.length;l++)z=k[l],!(B.indexOf(z)>=0)&&(e[z]=C[z]);return e}function Gp(){return Gp=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},Gp.apply(this,arguments)}var Bz=ac((C,B)=>{var e=Ez(),k=c0("Button",Gp({},e,C)),z=Wm(C),{isDisabled:l=e==null?void 0:e.isDisabled,isLoading:o,isActive:c,isFullWidth:p,children:t,leftIcon:n,rightIcon:a,loadingText:i,iconSpacing:r="0.5rem",type:f,spinner:u,spinnerPlacement:s="start",className:h,as:d}=z,y=Oz(z,["isDisabled","isLoading","isActive","isFullWidth","children","leftIcon","rightIcon","loadingText","iconSpacing","type","spinner","spinnerPlacement","className","as"]),m=Vs(()=>{var b,S=Fc({},(b=k==null?void 0:k._focus)!=null?b:{},{zIndex:1});return Gp({display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",width:p?"100%":"auto"},k,!!e&&{_focus:S})},[k,e,p]),{ref:g,type:x}=zz(d),A={rightIcon:a,leftIcon:n,iconSpacing:r,children:t};return pa(Ol.button,Gp({disabled:l||o,ref:hC(B,g),as:d,type:f??x,"data-active":K2(c),"data-loading":K2(o),__css:m,className:ec("chakra-button",h)},y),o&&s==="start"&&pa(BT,{className:"chakra-button__spinner--start",label:i,placement:"start"},u),o?i||pa(Ol.span,{opacity:0},pa(UT,A)):pa(UT,A),o&&s==="end"&&pa(BT,{className:"chakra-button__spinner--end",label:i,placement:"end"},u))});function UT(C){var{leftIcon:B,rightIcon:e,children:k,iconSpacing:z}=C;return pa(tl,null,B&&pa(NT,{marginEnd:z},B),k,e&&pa(NT,{marginStart:z},e))}function f1(){return f1=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},f1.apply(this,arguments)}function Nz(C,B){if(C==null)return{};var e={},k=Object.keys(C),z,l;for(l=0;l<k.length;l++)z=k[l],!(B.indexOf(z)>=0)&&(e[z]=C[z]);return e}var VB=ac((C,B)=>{var{icon:e,children:k,isRound:z,"aria-label":l}=C,o=Nz(C,["icon","children","isRound","aria-label"]),c=e||k,p=Jh(c)?$h(c,{"aria-hidden":!0,focusable:!1}):null;return pa(Bz,f1({padding:"0",borderRadius:z?"full":void 0,ref:B,"aria-label":l},o),p)});function Uz(C,B){if(C==null)return{};var e={},k=Object.keys(C),z,l;for(l=0;l<k.length;l++)z=k[l],!(B.indexOf(z)>=0)&&(e[z]=C[z]);return e}function Wp(){return Wp=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},Wp.apply(this,arguments)}var Vz=C=>pa(sw,Wp({focusable:"false","aria-hidden":!0},C),pa("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})),Hz=ac((C,B)=>{var e=c0("CloseButton",C),k=Wm(C),{children:z,isDisabled:l,__css:o}=k,c=Uz(k,["children","isDisabled","__css"]),p={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return pa(Ol.button,Wp({type:"button","aria-label":"Close",ref:B,disabled:l,__css:Wp({},p,e,o)},c),z||pa(Vz,{width:"1em",height:"1em"}))});function Gz(C,B){if(C==null)return{};var e={},k=Object.keys(C),z,l;for(l=0;l<k.length;l++)z=k[l],!(B.indexOf(z)>=0)&&(e[z]=C[z]);return e}var VT={exports:{}},Wz="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Yz=Wz,jz=Yz;function HT(){}function GT(){}GT.resetWarningCache=HT;var Xz=function(){function C(k,z,l,o,c,p){if(p!==jz){var t=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw t.name="Invariant Violation",t}}C.isRequired=C;function B(){return C}var e={array:C,bool:C,func:C,number:C,object:C,string:C,symbol:C,any:C,arrayOf:B,element:C,elementType:C,instanceOf:B,node:C,objectOf:B,oneOf:B,oneOfType:B,shape:B,exact:B,checkPropTypes:GT,resetWarningCache:HT};return e.PropTypes=e,e};VT.exports=Xz();var c1="data-focus-lock",WT="data-focus-lock-disabled",Zz="data-no-focus-lock",Kz="data-autofocus-inside";function Jz(C,B){return typeof C=="function"?C(B):C&&(C.current=B),C}function $z(C,B){var e=Us(function(){return{value:C,callback:B,facade:{get current(){return e.value},set current(k){var z=e.value;z!==k&&(e.value=k,e.callback(k,z))}}}})[0];return e.callback=B,e.facade}function YT(C,B){return $z(B,function(e){return C.forEach(function(k){return Jz(k,e)})})}var h1={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Q0=function(){return Q0=Object.assign||function(B){for(var e,k=1,z=arguments.length;k<z;k++){e=arguments[k];for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(B[l]=e[l])}return B},Q0.apply(this,arguments)};function Qz(C,B){var e={};for(var k in C)Object.prototype.hasOwnProperty.call(C,k)&&B.indexOf(k)<0&&(e[k]=C[k]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var z=0,k=Object.getOwnPropertySymbols(C);z<k.length;z++)B.indexOf(k[z])<0&&Object.prototype.propertyIsEnumerable.call(C,k[z])&&(e[k[z]]=C[k[z]]);return e}function jT(C){return C}function XT(C,B){B===void 0&&(B=jT);var e=[],k=!1,z={read:function(){if(k)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return e.length?e[e.length-1]:C},useMedium:function(l){var o=B(l,k);return e.push(o),function(){e=e.filter(function(c){return c!==o})}},assignSyncMedium:function(l){for(k=!0;e.length;){var o=e;e=[],o.forEach(l)}e={push:function(c){return l(c)},filter:function(){return e}}},assignMedium:function(l){k=!0;var o=[];if(e.length){var c=e;e=[],c.forEach(l),o=e}var p=function(){var n=o;o=[],n.forEach(l)},t=function(){return Promise.resolve().then(p)};t(),e={push:function(n){o.push(n),t()},filter:function(n){return o=o.filter(n),e}}}};return z}function v1(C,B){return B===void 0&&(B=jT),XT(C,B)}function ZT(C){C===void 0&&(C={});var B=XT(null);return B.options=Q0({async:!0,ssr:!1},C),B}var KT=function(C){var B=C.sideCar,e=Qz(C,["sideCar"]);if(!B)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var k=B.read();if(!k)throw new Error("Sidecar medium not found");return pa(k,Q0({},e))};KT.isSideCarExport=!0;function qz(C,B){return C.useMedium(B),KT}var JT=v1({},function(C){var B=C.target,e=C.currentTarget;return{target:B,currentTarget:e}}),$T=v1(),eO=v1(),tO=ZT({async:!0}),rO=[],p1=Xf(function(B,e){var k,z=Us(),l=z[0],o=z[1],c=Eo(),p=Eo(!1),t=Eo(null),n=B.children,a=B.disabled,i=B.noFocusGuards,r=B.persistentFocus,f=B.crossFrame,u=B.autoFocus;B.allowTextSelection;var s=B.group,h=B.className,d=B.whiteList,y=B.shards,m=y===void 0?rO:y,g=B.as,x=g===void 0?"div":g,A=B.lockProps,b=A===void 0?{}:A,S=B.sideCar,w=B.returnFocus,T=B.onActivation,_=B.onDeactivation,v=Us({}),P=v[0],M=Oo(function(){t.current=t.current||document&&document.activeElement,c.current&&T&&T(c.current),p.current=!0},[T]),E=Oo(function(){p.current=!1,_&&_(c.current)},[_]),D=Oo(function(Z){var te=t.current;if(Boolean(w)&&te&&te.focus){var re=typeof w=="object"?w:void 0;t.current=null,Z?Promise.resolve().then(function(){return te.focus(re)}):te.focus(re)}},[w]),N=Oo(function(Z){p.current&&JT.useMedium(Z)},[]),O=$T.useMedium,I=Oo(function(Z){c.current!==Z&&(c.current=Z,o(Z))},[]),F=ah((k={},k[WT]=a&&"disabled",k[c1]=s,k),b),V=i!==!0,U=V&&i!=="tail",j=YT([e,I]);return pa(tl,null,V&&[pa("div",{key:"guard-first","data-focus-guard":!0,tabIndex:a?-1:0,style:h1}),pa("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:a?-1:1,style:h1})],!a&&pa(S,{id:P,sideCar:tO,observed:l,disabled:a,persistentFocus:r,crossFrame:f,autoFocus:u,whiteList:d,shards:m,onActivation:M,onDeactivation:E,returnFocus:D}),pa(x,ah({ref:j},F,{className:h,onBlur:O,onFocus:N}),n),U&&pa("div",{"data-focus-guard":!0,tabIndex:a?-1:0,style:h1}))});p1.propTypes={};p1.defaultProps={children:void 0,disabled:!1,returnFocus:!1,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};var QT=p1;function d1(C,B){return d1=Object.setPrototypeOf||function(k,z){return k.__proto__=z,k},d1(C,B)}function nO(C,B){C.prototype=Object.create(B.prototype),C.prototype.constructor=C,d1(C,B)}function aO(C,B,e){return B in C?Object.defineProperty(C,B,{value:e,enumerable:!0,configurable:!0,writable:!0}):C[B]=e,C}function iO(C,B){function e(k){return k.displayName||k.name||"Component"}return function(z){var l=[],o;function c(){o=C(l.map(function(t){return t.props})),B(o)}var p=function(t){nO(n,t);function n(){return t.apply(this,arguments)||this}n.peek=function(){return o};var a=n.prototype;return a.componentDidMount=function(){l.push(this),c()},a.componentDidUpdate=function(){c()},a.componentWillUnmount=function(){var r=l.indexOf(this);l.splice(r,1),c()},a.render=function(){return nh.createElement(z,this.props)},n}(Jv);return aO(p,"displayName","SideEffect("+e(z)+")"),p}}var Hc=function(C){for(var B=Array(C.length),e=0;e<C.length;++e)B[e]=C[e];return B},g1=function(C){return Array.isArray(C)?C:[C]},oO=function(C){for(var B=new Set,e=C.length,k=0;k<e;k+=1)for(var z=k+1;z<e;z+=1){var l=C[k].compareDocumentPosition(C[z]);(l&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&B.add(z),(l&Node.DOCUMENT_POSITION_CONTAINS)>0&&B.add(k)}return C.filter(function(o,c){return!B.has(c)})},qT=function(C){return C.parentNode?qT(C.parentNode):C},m1=function(C){var B=g1(C);return B.filter(Boolean).reduce(function(e,k){var z=k.getAttribute(c1);return e.push.apply(e,z?oO(Hc(qT(k).querySelectorAll("["+c1+'="'+z+'"]:not(['+WT+'="disabled"])'))):[k]),e},[])},sO=function(C){return!C||!C.getPropertyValue?!1:C.getPropertyValue("display")==="none"||C.getPropertyValue("visibility")==="hidden"},e5=function(C){return!C||C===document||C&&C.nodeType===Node.DOCUMENT_NODE||!sO(window.getComputedStyle(C,null))&&e5(C.parentNode&&C.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?C.parentNode.host:C.parentNode)},lO=function(C){return!((C.tagName==="INPUT"||C.tagName==="BUTTON")&&(C.type==="hidden"||C.disabled))},y1=function(C){return Boolean(C&&C.dataset&&C.dataset.focusGuard)},q0=function(C){return!y1(C)},uO=function(C){return Boolean(C)},fO=function(C,B){var e=C.tabIndex-B.tabIndex,k=C.index-B.index;if(e){if(!C.tabIndex)return 1;if(!B.tabIndex)return-1}return e||k},t5=function(C,B,e){return Hc(C).map(function(k,z){return{node:k,index:z,tabIndex:e&&k.tabIndex===-1?(k.dataset||{}).focusGuard?0:-1:k.tabIndex}}).filter(function(k){return!B||k.tabIndex>=0}).sort(fO)},cO=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],x1=cO.join(","),hO=x1+", [data-focus-guard]",b1=function(C,B){return C.reduce(function(e,k){return e.concat(Hc(k.querySelectorAll(B?hO:x1)),k.parentNode?Hc(k.parentNode.querySelectorAll(x1)).filter(function(z){return z===k}):[])},[])},vO=function(C){var B=C.querySelectorAll("["+Kz+"]");return Hc(B).map(function(e){return b1([e])}).reduce(function(e,k){return e.concat(k)},[])},_1=function(C){return Hc(C).filter(function(B){return e5(B)}).filter(function(B){return lO(B)})},w1=function(C,B){return t5(_1(b1(C,B)),!0,B)},r5=function(C){return t5(_1(b1(C)),!1)},pO=function(C){return _1(vO(C))},T1=function(C,B){return B===void 0&&(B=[]),B.push(C),C.parentNode&&T1(C.parentNode,B),B},A1=function(C,B){for(var e=T1(C),k=T1(B),z=0;z<e.length;z+=1){var l=e[z];if(k.indexOf(l)>=0)return l}return!1},n5=function(C,B,e){var k=g1(C),z=g1(B),l=k[0],o=!1;return z.filter(Boolean).forEach(function(c){o=A1(o||c,c)||o,e.filter(Boolean).forEach(function(p){var t=A1(l,p);t&&(!o||t.contains(o)?o=t:o=A1(t,o))})}),o},dO=function(C){return C.reduce(function(B,e){return B.concat(pO(e))},[])},gO=function(C){var B=m1(C).filter(q0),e=n5(C,C,B),k=w1([e],!0),z=w1(B).filter(function(l){var o=l.node;return q0(o)}).map(function(l){var o=l.node;return o});return k.map(function(l){var o=l.node,c=l.index;return{node:o,index:c,lockItem:z.indexOf(o)>=0,guard:y1(o)}})},mO=function(C){return C===document.activeElement},yO=function(C){return Boolean(Hc(C.querySelectorAll("iframe")).some(function(B){return mO(B)}))},a5=function(C){var B=document&&document.activeElement;return!B||B.dataset&&B.dataset.focusGuard?!1:m1(C).reduce(function(e,k){return e||k.contains(B)||yO(k)},!1)},xO=function(){return document&&Hc(document.querySelectorAll("["+Zz+"]")).some(function(C){return C.contains(document.activeElement)})},i5=function(C){return C.tagName==="INPUT"&&C.type==="radio"},bO=function(C,B){return B.filter(i5).filter(function(e){return e.name===C.name}).filter(function(e){return e.checked})[0]||C},S1=function(C,B){return i5(C)&&C.name?bO(C,B):C},_O=function(C){var B=new Set;return C.forEach(function(e){return B.add(S1(e,C))}),C.filter(function(e){return B.has(e)})},o5=function(C){return C[0]&&C.length>1?S1(C[0],C):C[0]},s5=function(C,B){return C.length>1?C.indexOf(S1(C[B],C)):B},l5="NEW_FOCUS",wO=function(C,B,e,k){var z=C.length,l=C[0],o=C[z-1],c=y1(e);if(!(C.indexOf(e)>=0)){var p=B.indexOf(e),t=k?B.indexOf(k):p,n=k?C.indexOf(k):-1,a=p-t,i=B.indexOf(l),r=B.indexOf(o),f=_O(B),u=f.indexOf(e)-(k?f.indexOf(k):p),s=s5(C,0),h=s5(C,z-1);if(p===-1||n===-1)return l5;if(!a&&n>=0)return n;if(p<=i&&c&&Math.abs(a)>1)return h;if(p>=r&&c&&Math.abs(a)>1)return s;if(a&&Math.abs(u)>1)return n;if(p<=i)return h;if(p>r)return s;if(a)return Math.abs(a)>1?n:(z+n+a)%z}},TO=function(C){return function(B){return B.autofocus||B.dataset&&!!B.dataset.autofocus||C.indexOf(B)>=0}},AO=function(C,B){var e=new Map;return B.forEach(function(k){return e.set(k.node,k)}),C.map(function(k){return e.get(k)}).filter(uO)},SO=function(C,B){var e=document&&document.activeElement,k=m1(C).filter(q0),z=n5(e||C,C,k),l=r5(k),o=w1(k).filter(function(i){var r=i.node;return q0(r)});if(!(!o[0]&&(o=l,!o[0]))){var c=r5([z]).map(function(i){var r=i.node;return r}),p=AO(c,o),t=p.map(function(i){var r=i.node;return r}),n=wO(t,c,e,B);if(n===l5){var a=l.map(function(i){var r=i.node;return r}).filter(TO(dO(k)));return{node:a&&a.length?o5(a):o5(t)}}return n===void 0?n:p[n]}},MO=function(C){C.focus(),"contentWindow"in C&&C.contentWindow&&C.contentWindow.focus()},M1=0,k1=!1,kO=function(C,B){var e=SO(C,B);if(!k1&&e){if(M1>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),k1=!0,setTimeout(function(){k1=!1},1);return}M1++,MO(e.node),M1--}},u5=kO;function f5(C){var B=window,e=B.setImmediate;typeof e!="undefined"?e(C):setTimeout(C,1)}var CO=function(){return document&&document.activeElement===document.body},EO=function(){return CO()||xO()},yv=null,xv=null,bv=null,Yp=!1,LO=function(){return!0},PO=function(B){return(yv.whiteList||LO)(B)},RO=function(B,e){bv={observerNode:B,portaledElement:e}},DO=function(B){return bv&&bv.portaledElement===B};function c5(C,B,e,k){var z=null,l=C;do{var o=k[l];if(o.guard)o.node.dataset.focusAutoGuard&&(z=o);else if(o.lockItem){if(l!==C)return;z=null}else break}while((l+=e)!==B);z&&(z.node.tabIndex=0)}var IO=function(B){return B&&"current"in B?B.current:B},FO=function(B){return B?Boolean(Yp):Yp==="meanwhile"},eg=function(){var B=!1;if(yv){var e=yv,k=e.observed,z=e.persistentFocus,l=e.autoFocus,o=e.shards,c=e.crossFrame,p=k||bv&&bv.portaledElement,t=document&&document.activeElement;if(p){var n=[p].concat(o.map(IO).filter(Boolean));if((!t||PO(t))&&(z||FO(c)||!EO()||!xv&&l)&&(p&&!(a5(n)||DO(t))&&(document&&!xv&&t&&!l?(t.blur&&t.blur(),document.body.focus()):(B=u5(n,xv),bv={})),Yp=!1,xv=document&&document.activeElement),document){var a=document&&document.activeElement,i=gO(n),r=i.map(function(f){var u=f.node;return u}).indexOf(a);r>-1&&(i.filter(function(f){var u=f.guard,s=f.node;return u&&s.dataset.focusAutoGuard}).forEach(function(f){var u=f.node;return u.removeAttribute("tabIndex")}),c5(r,i.length,1,i),c5(r,-1,-1,i))}}}return B},h5=function(B){eg()&&B&&(B.stopPropagation(),B.preventDefault())},C1=function(){return f5(eg)},zO=function(B){var e=B.target,k=B.currentTarget;k.contains(e)||RO(k,e)},OO=function(){return null},v5=function(){Yp="just",setTimeout(function(){Yp="meanwhile"},0)},BO=function(){document.addEventListener("focusin",h5,!0),document.addEventListener("focusout",C1),window.addEventListener("blur",v5)},NO=function(){document.removeEventListener("focusin",h5,!0),document.removeEventListener("focusout",C1),window.removeEventListener("blur",v5)};function UO(C){return C.filter(function(B){var e=B.disabled;return!e})}function VO(C){var B=C.slice(-1)[0];B&&!yv&&BO();var e=yv,k=e&&B&&B.id===e.id;yv=B,e&&!k&&(e.onDeactivation(),C.filter(function(z){var l=z.id;return l===e.id}).length||e.returnFocus(!B)),B?(xv=null,(!k||e.observed!==B.observed)&&B.onActivation(),eg(),f5(eg)):(NO(),xv=null)}JT.assignSyncMedium(zO);$T.assignMedium(C1);eO.assignMedium(function(C){return C({moveFocusInside:u5,focusInside:a5})});var HO=iO(UO,VO)(OO),p5=Xf(function(B,e){return pa(QT,ah({sideCar:HO,ref:e},B))}),d5=QT.propTypes||{};d5.sideCar;Gz(d5,["sideCar"]);p5.propTypes={};var GO=p5,WO=C=>{var{initialFocusRef:B,finalFocusRef:e,contentRef:k,restoreFocus:z,children:l,isDisabled:o,autoFocus:c,persistentFocus:p,lockFocusAcrossFrames:t}=C,n=Oo(()=>{if(B!=null&&B.current)B.current.focus();else if(k!=null&&k.current){var r=jk(k.current);r.length===0&&Zk(k.current,{nextTick:!0})}},[B,k]),a=Oo(()=>{var r;e==null||(r=e.current)==null||r.focus()},[e]),i=z&&!e;return pa(GO,{crossFrame:t,persistentFocus:p,autoFocus:c,disabled:o,onActivation:n,onDeactivation:a,returnFocus:i},l)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _v=function(){return _v=Object.assign||function(B){for(var e,k=1,z=arguments.length;k<z;k++){e=arguments[k];for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&(B[l]=e[l])}return B},_v.apply(this,arguments)};function YO(C,B){var e={};for(var k in C)Object.prototype.hasOwnProperty.call(C,k)&&B.indexOf(k)<0&&(e[k]=C[k]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var z=0,k=Object.getOwnPropertySymbols(C);z<k.length;z++)B.indexOf(k[z])<0&&Object.prototype.propertyIsEnumerable.call(C,k[z])&&(e[k[z]]=C[k[z]]);return e}var tg="right-scroll-bar-position",rg="width-before-scroll-bar",jO="with-scroll-bars-hidden",XO="--removed-body-scroll-bar-size",g5=ZT(),E1=function(){},ng=Xf(function(C,B){var e=Eo(null),k=Us({onScrollCapture:E1,onWheelCapture:E1,onTouchMoveCapture:E1}),z=k[0],l=k[1],o=C.forwardProps,c=C.children,p=C.className,t=C.removeScrollBar,n=C.enabled,a=C.shards,i=C.sideCar,r=C.noIsolation,f=C.inert,u=C.allowPinchZoom,s=C.as,h=s===void 0?"div":s,d=YO(C,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),y=i,m=YT([e,B]),g=_v({},d,z);return pa(tl,null,n&&pa(y,{sideCar:g5,removeScrollBar:t,shards:a,noIsolation:r,inert:f,setCallbacks:l,allowPinchZoom:!!u,lockRef:e}),o?$h(Sd.only(c),_v({},g,{ref:m})):pa(h,_v({},g,{className:p,ref:m}),c))});ng.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ng.classNames={fullWidth:rg,zeroRight:tg};var ZO=function(){if(typeof __webpack_nonce__!="undefined")return __webpack_nonce__};function KO(){if(!document)return null;var C=document.createElement("style");C.type="text/css";var B=ZO();return B&&C.setAttribute("nonce",B),C}function JO(C,B){C.styleSheet?C.styleSheet.cssText=B:C.appendChild(document.createTextNode(B))}function $O(C){var B=document.head||document.getElementsByTagName("head")[0];B.appendChild(C)}var QO=function(){var C=0,B=null;return{add:function(e){C==0&&(B=KO())&&(JO(B,e),$O(B)),C++},remove:function(){C--,!C&&B&&(B.parentNode&&B.parentNode.removeChild(B),B=null)}}},qO=function(){var C=QO();return function(B){_o(function(){return C.add(B),function(){C.remove()}},[])}},m5=function(){var C=qO(),B=function(e){var k=e.styles;return C(k),null};return B},eB={left:0,top:0,right:0,gap:0},L1=function(C){return parseInt(C||"",10)||0},tB=function(C){var B=window.getComputedStyle(document.body),e=B[C==="padding"?"paddingLeft":"marginLeft"],k=B[C==="padding"?"paddingTop":"marginTop"],z=B[C==="padding"?"paddingRight":"marginRight"];return[L1(e),L1(k),L1(z)]},y5=function(C){if(C===void 0&&(C="margin"),typeof window=="undefined")return eB;var B=tB(C),e=document.documentElement.clientWidth,k=window.innerWidth;return{left:B[0],top:B[1],right:B[2],gap:Math.max(0,k-e+B[2]-B[0])}},rB=m5(),nB=function(C,B,e,k){var z=C.left,l=C.top,o=C.right,c=C.gap;return e===void 0&&(e="margin"),`
  .`+jO+` {
   overflow: hidden `+k+`;
   padding-right: `+c+"px "+k+`;
  }
  body {
    overflow: hidden `+k+`;
    `+[B&&"position: relative "+k+";",e==="margin"&&`
    padding-left: `+z+`px;
    padding-top: `+l+`px;
    padding-right: `+o+`px;
    margin-left:0;
    margin-top:0;
    margin-right: `+c+"px "+k+`;
    `,e==="padding"&&"padding-right: "+c+"px "+k+";"].filter(Boolean).join("")+`
  }
  
  .`+tg+` {
    right: `+c+"px "+k+`;
  }
  
  .`+rg+` {
    margin-right: `+c+"px "+k+`;
  }
  
  .`+tg+" ."+tg+` {
    right: 0 `+k+`;
  }
  
  .`+rg+" ."+rg+` {
    margin-right: 0 `+k+`;
  }
  
  body {
    `+XO+": "+c+`px;
  }
`},aB=function(C){var B=Us(y5(C.gapMode)),e=B[0],k=B[1];_o(function(){k(y5(C.gapMode))},[C.gapMode]);var z=C.noRelative,l=C.noImportant,o=C.gapMode,c=o===void 0?"margin":o;return pa(rB,{styles:nB(e,!z,c,l?"":"!important")})},iB=function(C){var B=window.getComputedStyle(C);return B.overflowY!=="hidden"&&!(B.overflowY===B.overflowX&&B.overflowY==="visible")},oB=function(C){var B=window.getComputedStyle(C);return B.overflowX!=="hidden"&&!(B.overflowY===B.overflowX&&B.overflowX==="visible")},x5=function(C,B){var e=B;do{var k=b5(C,e);if(k){var z=_5(C,e),l=z[1],o=z[2];if(l>o)return!0}e=e.parentNode}while(e&&e!==document.body);return!1},sB=function(C){var B=C.scrollTop,e=C.scrollHeight,k=C.clientHeight;return[B,e,k]},lB=function(C){var B=C.scrollLeft,e=C.scrollWidth,k=C.clientWidth;return[B,e,k]},b5=function(C,B){return C==="v"?iB(B):oB(B)},_5=function(C,B){return C==="v"?sB(B):lB(B)},uB=function(C,B,e,k,z){var l=k,o=e.target,c=B.contains(o),p=!1,t=l>0,n=0,a=0;do{var i=_5(C,o),r=i[0],f=i[1],u=i[2],s=f-u-r;(r||s)&&b5(C,o)&&(n+=s,a+=r),o=o.parentNode}while(!c&&o!==document.body||c&&(B.contains(o)||B===o));return(t&&(z&&n===0||!z&&l>n)||!t&&(z&&a===0||!z&&-l>a))&&(p=!0),p},P1=!1;if(typeof window!="undefined")try{var ag=Object.defineProperty({},"passive",{get:function(){return P1=!0,!0}});window.addEventListener("test",ag,ag),window.removeEventListener("test",ag,ag)}catch{P1=!1}var wv=P1?{passive:!1}:!1,ig=function(C){return"changedTouches"in C?[C.changedTouches[0].clientX,C.changedTouches[0].clientY]:[0,0]},w5=function(C){return[C.deltaX,C.deltaY]},T5=function(C){return C&&"current"in C?C.current:C},fB=function(C,B){return C[0]===B[0]&&C[1]===B[1]},cB=function(C){return`
  .block-interactivity-`+C+` {pointer-events: none;}
  .allow-interactivity-`+C+` {pointer-events: all;}
`},hB=0,Tv=[];function vB(C){var B=Eo([]),e=Eo([0,0]),k=Eo(),z=Us(hB++)[0],l=Us(function(){return m5()})[0],o=Eo(C);_o(function(){o.current=C},[C]),_o(function(){if(C.inert){document.body.classList.add("block-interactivity-"+z);var u=[C.lockRef.current].concat((C.shards||[]).map(T5)).filter(Boolean);return u.forEach(function(s){return s.classList.add("allow-interactivity-"+z)}),function(){document.body.classList.remove("block-interactivity-"+z),u.forEach(function(s){return s.classList.remove("allow-interactivity-"+z)})}}},[C.inert,C.lockRef.current,C.shards]);var c=Oo(function(u,s){if("touches"in u&&u.touches.length===2)return!o.current.allowPinchZoom;var h=ig(u),d=e.current,y="deltaX"in u?u.deltaX:d[0]-h[0],m="deltaY"in u?u.deltaY:d[1]-h[1],g,x=u.target,A=Math.abs(y)>Math.abs(m)?"h":"v",b=x5(A,x);if(!b)return!0;if(b?g=A:(g=A==="v"?"h":"v",b=x5(A,x)),!b)return!1;if(!k.current&&"changedTouches"in u&&(y||m)&&(k.current=g),!g)return!0;var S=k.current||g;return uB(S,s,u,S==="h"?y:m,!0)},[]),p=Oo(function(u){var s=u;if(!(!Tv.length||Tv[Tv.length-1]!==l)){var h="deltaY"in s?w5(s):ig(s),d=B.current.filter(function(g){return g.name===s.type&&g.target===s.target&&fB(g.delta,h)})[0];if(d&&d.should){s.preventDefault();return}if(!d){var y=(o.current.shards||[]).map(T5).filter(Boolean).filter(function(g){return g.contains(s.target)}),m=y.length>0?c(s,y[0]):!o.current.noIsolation;m&&s.preventDefault()}}},[]),t=Oo(function(u,s,h,d){var y={name:u,delta:s,target:h,should:d};B.current.push(y),setTimeout(function(){B.current=B.current.filter(function(m){return m!==y})},1)},[]),n=Oo(function(u){e.current=ig(u),k.current=void 0},[]),a=Oo(function(u){t(u.type,w5(u),u.target,c(u,C.lockRef.current))},[]),i=Oo(function(u){t(u.type,ig(u),u.target,c(u,C.lockRef.current))},[]);_o(function(){return Tv.push(l),C.setCallbacks({onScrollCapture:a,onWheelCapture:a,onTouchMoveCapture:i}),document.addEventListener("wheel",p,wv),document.addEventListener("touchmove",p,wv),document.addEventListener("touchstart",n,wv),function(){Tv=Tv.filter(function(u){return u!==l}),document.removeEventListener("wheel",p,wv),document.removeEventListener("touchmove",p,wv),document.removeEventListener("touchstart",n,wv)}},[]);var r=C.removeScrollBar,f=C.inert;return pa(tl,null,f?pa(l,{styles:cB(z)}):null,r?pa(aB,{gapMode:"margin"}):null)}var pB=qz(g5,vB),A5=Xf(function(C,B){return pa(ng,_v({},C,{ref:B,sideCar:pB}))});A5.classNames=ng.classNames;var dB=A5,gB=function(C){if(typeof document=="undefined")return null;var B=Array.isArray(C)?C[0]:C;return B.ownerDocument.body},Av=new WeakMap,og=new WeakMap,sg={},R1=0,mB=function(C,B,e){B===void 0&&(B=gB(C)),e===void 0&&(e="data-aria-hidden");var k=Array.isArray(C)?C:[C];sg[e]||(sg[e]=new WeakMap);var z=sg[e],l=[],o=new Set,c=function(t){!t||o.has(t)||(o.add(t),c(t.parentNode))};k.forEach(c);var p=function(t){!t||k.indexOf(t)>=0||Array.prototype.forEach.call(t.children,function(n){if(o.has(n))p(n);else{var a=n.getAttribute("aria-hidden"),i=a!==null&&a!=="false",r=(Av.get(n)||0)+1,f=(z.get(n)||0)+1;Av.set(n,r),z.set(n,f),l.push(n),r===1&&i&&og.set(n,!0),f===1&&n.setAttribute(e,"true"),i||n.setAttribute("aria-hidden","true")}})};return p(B),o.clear(),R1++,function(){l.forEach(function(t){var n=Av.get(t)-1,a=z.get(t)-1;Av.set(t,n),z.set(t,a),n||(og.has(t)||t.removeAttribute("aria-hidden"),og.delete(t)),a||t.removeAttribute(e)}),R1--,R1||(Av=new WeakMap,Av=new WeakMap,og=new WeakMap,sg={})}};function yB(C,B,e){return B in C?Object.defineProperty(C,B,{value:e,enumerable:!0,configurable:!0,writable:!0}):C[B]=e,C}class xB{constructor(){yB(this,"modals",void 0),this.modals=[]}add(B){this.modals.push(B)}remove(B){this.modals=this.modals.filter(e=>e!==B)}isTopModal(B){var e=this.modals[this.modals.length-1];return e===B}}var D1=new xB;function bB(C,B){_o(()=>(B&&D1.add(C),()=>{D1.remove(C)}),[B,C])}function lg(){return lg=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},lg.apply(this,arguments)}function _B(C){var{isOpen:B,onClose:e,id:k,closeOnOverlayClick:z=!0,closeOnEsc:l=!0,useInert:o=!0,onOverlayClick:c,onEsc:p}=C,t=Eo(null),n=Eo(null),[a,i,r]=uC(k,"chakra-modal","chakra-modal--header","chakra-modal--body");wB(t,B&&o),bB(t,B);var f=Eo(null),u=Oo(b=>{f.current=b.target},[]),s=Oo(b=>{b.key==="Escape"&&(b.stopPropagation(),l&&(e==null||e()),p==null||p())},[l,e,p]),[h,d]=Us(!1),[y,m]=Us(!1),g=Oo(function(b,S){return b===void 0&&(b={}),S===void 0&&(S=null),lg({role:"dialog"},b,{ref:t_(S,t),id:a,tabIndex:-1,"aria-modal":!0,"aria-labelledby":h?i:void 0,"aria-describedby":y?r:void 0,onClick:sp(b.onClick,w=>w.stopPropagation())})},[r,y,a,i,h]),x=Oo(b=>{b.stopPropagation(),f.current===b.target&&(!D1.isTopModal(t)||(z&&(e==null||e()),c==null||c()))},[e,z,c]),A=Oo(function(b,S){return b===void 0&&(b={}),S===void 0&&(S=null),lg({},b,{ref:t_(S,n),onClick:sp(b.onClick,x),onKeyDown:sp(b.onKeyDown,s),onMouseDown:sp(b.onMouseDown,u)})},[s,u,x]);return{isOpen:B,onClose:e,headerId:i,bodyId:r,setBodyMounted:m,setHeaderMounted:d,dialogRef:t,overlayRef:n,getDialogProps:g,getDialogContainerProps:A}}function wB(C,B){_o(()=>{if(!!C.current){var e=null;return B&&C.current&&(e=mB(C.current)),()=>{B&&(e==null||e())}}},[B,C])}function I1(C,B){if(C==null)return{};var e={},k=Object.keys(C),z,l;for(l=0;l<k.length;l++)z=k[l],!(B.indexOf(z)>=0)&&(e[z]=C[z]);return e}function gh(){return gh=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},gh.apply(this,arguments)}var[TB,jp]=av({strict:!0,name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap modal components in `<Modal />`"}),S5=C=>{var{portalProps:B,children:e,autoFocus:k,trapFocus:z,initialFocusRef:l,finalFocusRef:o,returnFocusOnClose:c,blockScrollOnMount:p,allowPinchZoom:t,preserveScrollBarGap:n,motionPreset:a,lockFocusAcrossFrames:i}=C,r=YE("Modal",C),f=_B(C),u=gh({},f,{autoFocus:k,trapFocus:z,initialFocusRef:l,finalFocusRef:o,returnFocusOnClose:c,blockScrollOnMount:p,allowPinchZoom:t,preserveScrollBarGap:n,motionPreset:a,lockFocusAcrossFrames:i});return pa(TB,{value:u},pa(EE,{value:r},pa(IT,null,u.isOpen&&pa(n0,B,e))))};S5.defaultProps={lockFocusAcrossFrames:!0,returnFocusOnClose:!0,scrollBehavior:"outside",trapFocus:!0,autoFocus:!0,blockScrollOnMount:!0,allowPinchZoom:!1,motionPreset:"scale"};var AB=Ol(RT.div);function SB(C){var{autoFocus:B,trapFocus:e,dialogRef:k,initialFocusRef:z,blockScrollOnMount:l,allowPinchZoom:o,finalFocusRef:c,returnFocusOnClose:p,preserveScrollBarGap:t,lockFocusAcrossFrames:n}=jp(),[a,i]=yy();return _o(()=>{!a&&i&&setTimeout(i)},[a,i]),pa(WO,{autoFocus:B,isDisabled:!e,initialFocusRef:z,finalFocusRef:c,restoreFocus:p,contentRef:k,lockFocusAcrossFrames:n},pa(dB,{removeScrollBar:!t,allowPinchZoom:o,enabled:l,forwardProps:!0},C.children))}var HB=ac((C,B)=>{var{className:e}=C,k=I1(C,["className","transition"]),z=ec("chakra-modal__overlay",e),l=f0(),o=gh({pos:"fixed",left:"0",top:"0",w:"100vw",h:"100vh"},l.overlay),{motionPreset:c}=jp(),p=c==="none"?{}:Sz;return pa(AB,gh({},p,{__css:o,ref:B,className:z},k))}),GB=ac((C,B)=>{var{className:e}=C,k=I1(C,["className"]),{bodyId:z,setBodyMounted:l}=jp();_o(()=>(l(!0),()=>l(!1)),[l]);var o=ec("chakra-modal__body",e),c=f0();return pa(Ol.div,gh({ref:B,className:o,id:z},k,{__css:c.body}))}),WB=ac((C,B)=>{var{onClick:e,className:k}=C,z=I1(C,["onClick","className"]),{onClose:l}=jp(),o=ec("chakra-modal__close-btn",k),c=f0();return pa(Hz,gh({ref:B,__css:c.closeButton,className:o,onClick:sp(e,p=>{p.stopPropagation(),l()})},z))});function mh(){return mh=Object.assign||function(C){for(var B=1;B<arguments.length;B++){var e=arguments[B];for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(C[k]=e[k])}return C},mh.apply(this,arguments)}function M5(C,B){if(C==null)return{};var e={},k=Object.keys(C),z,l;for(l=0;l<k.length;l++)z=k[l],!(B.indexOf(z)>=0)&&(e[z]=C[z]);return e}var[MB,kB]=av(),CB={start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}};function EB(C,B){var e,k;if(!!C)return(e=(k=CB[C])==null?void 0:k[B])!=null?e:C}function YB(C){var B,{isOpen:e,onClose:k,placement:z="right",children:l}=C,o=M5(C,["isOpen","onClose","placement","children"]),c=S_(),p=(B=c.components)==null?void 0:B.Drawer,t=EB(z,c.direction);return pa(MB,{value:{placement:t}},pa(S5,mh({isOpen:e,onClose:k,styleConfig:p},o),l))}var LB=Ol(Cz),jB=ac((C,B)=>{var{className:e,children:k}=C,z=M5(C,["className","children"]),{getDialogProps:l,getDialogContainerProps:o,isOpen:c}=jp(),p=l(z,B),t=o(),n=ec("chakra-modal__content",e),a=f0(),i=mh({display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0},a.dialog),r=mh({display:"flex",width:"100vw",height:"100vh",position:"fixed",left:0,top:0},a.dialogContainer),{placement:f}=kB();return pa(Ol.div,mh({},t,{className:"chakra-modal__content-container",__css:r}),pa(SB,null,pa(LB,mh({direction:f,in:c,className:n},p,{__css:i}),k)))}),k5={},C5={},PB=Hb(HM);(function(C){function B(g){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?B=function(A){return typeof A}:B=function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},B(g)}Object.defineProperty(C,"__esModule",{value:!0}),C.default=m;var e=o(PB),k=z(VT.exports);function z(g){return g&&g.__esModule?g:{default:g}}function l(){if(typeof WeakMap!="function")return null;var g=new WeakMap;return l=function(){return g},g}function o(g){if(g&&g.__esModule)return g;if(g===null||B(g)!=="object"&&typeof g!="function")return{default:g};var x=l();if(x&&x.has(g))return x.get(g);var A={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in g)if(Object.prototype.hasOwnProperty.call(g,S)){var w=b?Object.getOwnPropertyDescriptor(g,S):null;w&&(w.get||w.set)?Object.defineProperty(A,S,w):A[S]=g[S]}return A.default=g,x&&x.set(g,A),A}function c(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function p(g,x){for(var A=0;A<x.length;A++){var b=x[A];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}function t(g,x,A){return x&&p(g.prototype,x),A&&p(g,A),g}function n(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),x&&a(g,x)}function a(g,x){return a=Object.setPrototypeOf||function(b,S){return b.__proto__=S,b},a(g,x)}function i(g){var x=u();return function(){var b=s(g),S;if(x){var w=s(this).constructor;S=Reflect.construct(b,arguments,w)}else S=b.apply(this,arguments);return r(this,S)}}function r(g,x){return x&&(B(x)==="object"||typeof x=="function")?x:f(g)}function f(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function u(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function s(g){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)},s(g)}var h=["AfterExport","AfterPlot","Animated","AnimatingFrame","AnimationInterrupted","AutoSize","BeforeExport","BeforeHover","ButtonClicked","Click","ClickAnnotation","Deselect","DoubleClick","Framework","Hover","LegendClick","LegendDoubleClick","Relayout","Relayouting","Restyle","Redraw","Selected","Selecting","SliderChange","SliderEnd","SliderStart","SunburstClick","Transitioning","TransitionInterrupted","Unhover"],d=["plotly_restyle","plotly_redraw","plotly_relayout","plotly_relayouting","plotly_doubleclick","plotly_animated","plotly_sunburstclick"],y=typeof window!="undefined";function m(g){var x=function(A){n(S,A);var b=i(S);function S(w){var T;return c(this,S),T=b.call(this,w),T.p=Promise.resolve(),T.resizeHandler=null,T.handlers={},T.syncWindowResize=T.syncWindowResize.bind(f(T)),T.syncEventHandlers=T.syncEventHandlers.bind(f(T)),T.attachUpdateEvents=T.attachUpdateEvents.bind(f(T)),T.getRef=T.getRef.bind(f(T)),T.handleUpdate=T.handleUpdate.bind(f(T)),T.figureCallback=T.figureCallback.bind(f(T)),T.updatePlotly=T.updatePlotly.bind(f(T)),T}return t(S,[{key:"updatePlotly",value:function(T,_,v){var P=this;this.p=this.p.then(function(){if(!P.unmounting){if(!P.el)throw new Error("Missing element reference");return g.react(P.el,{data:P.props.data,layout:P.props.layout,config:P.props.config,frames:P.props.frames})}}).then(function(){P.unmounting||(P.syncWindowResize(T),P.syncEventHandlers(),P.figureCallback(_),v&&P.attachUpdateEvents())}).catch(function(M){P.props.onError&&P.props.onError(M)})}},{key:"componentDidMount",value:function(){this.unmounting=!1,this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(T){this.unmounting=!1;var _=T.frames&&T.frames.length?T.frames.length:0,v=this.props.frames&&this.props.frames.length?this.props.frames.length:0,P=!(T.layout===this.props.layout&&T.data===this.props.data&&T.config===this.props.config&&v===_),M=T.revision!==void 0,E=T.revision!==this.props.revision;!P&&(!M||M&&!E)||this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0,this.figureCallback(this.props.onPurge),this.resizeHandler&&y&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.removeUpdateEvents(),g.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var T=this;!this.el||!this.el.removeListener||d.forEach(function(_){T.el.on(_,T.handleUpdate)})}},{key:"removeUpdateEvents",value:function(){var T=this;!this.el||!this.el.removeListener||d.forEach(function(_){T.el.removeListener(_,T.handleUpdate)})}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(T){if(typeof T=="function"){var _=this.el,v=_.data,P=_.layout,M=this.el._transitionData?this.el._transitionData._frames:null,E={data:v,layout:P,frames:M};T(E,this.el)}}},{key:"syncWindowResize",value:function(T){var _=this;!y||(this.props.useResizeHandler&&!this.resizeHandler?(this.resizeHandler=function(){return g.Plots.resize(_.el)},window.addEventListener("resize",this.resizeHandler),T&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(T){this.el=T,this.props.debug&&y&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var T=this;h.forEach(function(_){var v=T.props["on"+_],P=T.handlers[_],M=Boolean(P);v&&!M?T.addEventHandler(_,v):!v&&M?T.removeEventHandler(_):v&&M&&v!==P&&(T.removeEventHandler(_),T.addEventHandler(_,v))})}},{key:"addEventHandler",value:function(T,_){this.handlers[T]=_,this.el.on(this.getPlotlyEventName(T),this.handlers[T])}},{key:"removeEventHandler",value:function(T){this.el.removeListener(this.getPlotlyEventName(T),this.handlers[T]),delete this.handlers[T]}},{key:"getPlotlyEventName",value:function(T){return"plotly_"+T.toLowerCase()}},{key:"render",value:function(){return e.default.createElement("div",{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]),S}(e.Component);return x.propTypes={data:k.default.arrayOf(k.default.object),config:k.default.object,layout:k.default.object,frames:k.default.arrayOf(k.default.object),revision:k.default.number,onInitialized:k.default.func,onPurge:k.default.func,onError:k.default.func,onUpdate:k.default.func,debug:k.default.bool,style:k.default.object,className:k.default.string,useResizeHandler:k.default.bool,divId:k.default.string},h.forEach(function(A){x.propTypes["on"+A]=k.default.func}),x.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}},x}})(C5);var E5={exports:{}};(function(C,B){(function(e){C.exports=e()})(function(){return function(){function e(k,z,l){function o(t,n){if(!z[t]){if(!k[t]){var a=typeof kd=="function"&&kd;if(!n&&a)return a(t,!0);if(c)return c(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var r=z[t]={exports:{}};k[t][0].call(r.exports,function(f){var u=k[t][1][f];return o(u||f)},r,r.exports,e,k,z,l)}return z[t].exports}for(var c=typeof kd=="function"&&kd,p=0;p<l.length;p++)o(l[p]);return o}return e}()({1:[function(e,k,z){var l=e("../src/lib"),o={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var c in o){var p=c.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");l.addStyleRule(p,o[c])}},{"../src/lib":503}],2:[function(e,k,z){k.exports=e("../src/transforms/aggregate")},{"../src/transforms/aggregate":1114}],3:[function(e,k,z){k.exports=e("../src/traces/bar")},{"../src/traces/bar":656}],4:[function(e,k,z){k.exports=e("../src/traces/barpolar")},{"../src/traces/barpolar":669}],5:[function(e,k,z){k.exports=e("../src/traces/box")},{"../src/traces/box":679}],6:[function(e,k,z){k.exports=e("../src/components/calendars")},{"../src/components/calendars":364}],7:[function(e,k,z){k.exports=e("../src/traces/candlestick")},{"../src/traces/candlestick":688}],8:[function(e,k,z){k.exports=e("../src/traces/carpet")},{"../src/traces/carpet":707}],9:[function(e,k,z){k.exports=e("../src/traces/choropleth")},{"../src/traces/choropleth":721}],10:[function(e,k,z){k.exports=e("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":728}],11:[function(e,k,z){k.exports=e("../src/traces/cone")},{"../src/traces/cone":734}],12:[function(e,k,z){k.exports=e("../src/traces/contour")},{"../src/traces/contour":749}],13:[function(e,k,z){k.exports=e("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":760}],14:[function(e,k,z){k.exports=e("../src/core")},{"../src/core":481}],15:[function(e,k,z){k.exports=e("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":768}],16:[function(e,k,z){k.exports=e("../src/transforms/filter")},{"../src/transforms/filter":1115}],17:[function(e,k,z){k.exports=e("../src/traces/funnel")},{"../src/traces/funnel":778}],18:[function(e,k,z){k.exports=e("../src/traces/funnelarea")},{"../src/traces/funnelarea":787}],19:[function(e,k,z){k.exports=e("../src/transforms/groupby")},{"../src/transforms/groupby":1116}],20:[function(e,k,z){k.exports=e("../src/traces/heatmap")},{"../src/traces/heatmap":800}],21:[function(e,k,z){k.exports=e("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":811}],22:[function(e,k,z){k.exports=e("../src/traces/histogram")},{"../src/traces/histogram":823}],23:[function(e,k,z){k.exports=e("../src/traces/histogram2d")},{"../src/traces/histogram2d":829}],24:[function(e,k,z){k.exports=e("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":833}],25:[function(e,k,z){k.exports=e("../src/traces/icicle")},{"../src/traces/icicle":839}],26:[function(e,k,z){k.exports=e("../src/traces/image")},{"../src/traces/image":852}],27:[function(e,k,z){var l=e("./core");l.register([e("./bar"),e("./box"),e("./heatmap"),e("./histogram"),e("./histogram2d"),e("./histogram2dcontour"),e("./contour"),e("./scatterternary"),e("./violin"),e("./funnel"),e("./waterfall"),e("./image"),e("./pie"),e("./sunburst"),e("./treemap"),e("./icicle"),e("./funnelarea"),e("./scatter3d"),e("./surface"),e("./isosurface"),e("./volume"),e("./mesh3d"),e("./cone"),e("./streamtube"),e("./scattergeo"),e("./choropleth"),e("./scattergl"),e("./splom"),e("./pointcloud"),e("./heatmapgl"),e("./parcoords"),e("./parcats"),e("./scattermapbox"),e("./choroplethmapbox"),e("./densitymapbox"),e("./sankey"),e("./indicator"),e("./table"),e("./carpet"),e("./scattercarpet"),e("./contourcarpet"),e("./ohlc"),e("./candlestick"),e("./scatterpolar"),e("./scatterpolargl"),e("./barpolar"),e("./scattersmith"),e("./aggregate"),e("./filter"),e("./groupby"),e("./sort"),e("./calendars")]),k.exports=l},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(e,k,z){k.exports=e("../src/traces/indicator")},{"../src/traces/indicator":860}],29:[function(e,k,z){k.exports=e("../src/traces/isosurface")},{"../src/traces/isosurface":866}],30:[function(e,k,z){k.exports=e("../src/traces/mesh3d")},{"../src/traces/mesh3d":871}],31:[function(e,k,z){k.exports=e("../src/traces/ohlc")},{"../src/traces/ohlc":876}],32:[function(e,k,z){k.exports=e("../src/traces/parcats")},{"../src/traces/parcats":885}],33:[function(e,k,z){k.exports=e("../src/traces/parcoords")},{"../src/traces/parcoords":895}],34:[function(e,k,z){k.exports=e("../src/traces/pie")},{"../src/traces/pie":906}],35:[function(e,k,z){k.exports=e("../src/traces/pointcloud")},{"../src/traces/pointcloud":915}],36:[function(e,k,z){k.exports=e("../src/traces/sankey")},{"../src/traces/sankey":921}],37:[function(e,k,z){k.exports=e("../src/traces/scatter3d")},{"../src/traces/scatter3d":959}],38:[function(e,k,z){k.exports=e("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":966}],39:[function(e,k,z){k.exports=e("../src/traces/scattergeo")},{"../src/traces/scattergeo":974}],40:[function(e,k,z){k.exports=e("../src/traces/scattergl")},{"../src/traces/scattergl":987}],41:[function(e,k,z){k.exports=e("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":997}],42:[function(e,k,z){k.exports=e("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1005}],43:[function(e,k,z){k.exports=e("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1012}],44:[function(e,k,z){k.exports=e("../src/traces/scattersmith")},{"../src/traces/scattersmith":1019}],45:[function(e,k,z){k.exports=e("../src/traces/scatterternary")},{"../src/traces/scatterternary":1027}],46:[function(e,k,z){k.exports=e("../src/transforms/sort")},{"../src/transforms/sort":1118}],47:[function(e,k,z){k.exports=e("../src/traces/splom")},{"../src/traces/splom":1036}],48:[function(e,k,z){k.exports=e("../src/traces/streamtube")},{"../src/traces/streamtube":1044}],49:[function(e,k,z){k.exports=e("../src/traces/sunburst")},{"../src/traces/sunburst":1052}],50:[function(e,k,z){k.exports=e("../src/traces/surface")},{"../src/traces/surface":1061}],51:[function(e,k,z){k.exports=e("../src/traces/table")},{"../src/traces/table":1069}],52:[function(e,k,z){k.exports=e("../src/traces/treemap")},{"../src/traces/treemap":1080}],53:[function(e,k,z){k.exports=e("../src/traces/violin")},{"../src/traces/violin":1093}],54:[function(e,k,z){k.exports=e("../src/traces/volume")},{"../src/traces/volume":1101}],55:[function(e,k,z){k.exports=e("../src/traces/waterfall")},{"../src/traces/waterfall":1109}],56:[function(e,k,z){(function(l,o){typeof z=="object"&&typeof k!="undefined"?o(z,e("d3-array"),e("d3-collection"),e("d3-shape"),e("elementary-circuits-directed-graph")):o(l.d3=l.d3||{},l.d3,l.d3,l.d3,null)})(this,function(l,o,c,p,t){t=t&&t.hasOwnProperty("default")?t.default:t;function n(ce){return ce.target.depth}function a(ce){return ce.depth}function i(ce,me){return me-1-ce.height}function r(ce,me){return ce.sourceLinks.length?ce.depth:me-1}function f(ce){return ce.targetLinks.length?ce.depth:ce.sourceLinks.length?o.min(ce.sourceLinks,n)-1:0}function u(ce){return function(){return ce}}var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ce){return typeof ce}:function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce};function h(ce,me){return y(ce.source,me.source)||ce.index-me.index}function d(ce,me){return y(ce.target,me.target)||ce.index-me.index}function y(ce,me){return ce.partOfCycle===me.partOfCycle?ce.y0-me.y0:ce.circularLinkType==="top"||me.circularLinkType==="bottom"?-1:1}function m(ce){return ce.value}function g(ce){return(ce.y0+ce.y1)/2}function x(ce){return g(ce.source)}function A(ce){return g(ce.target)}function b(ce){return ce.index}function S(ce){return ce.nodes}function w(ce){return ce.links}function T(ce,me){var xe=ce.get(me);if(!xe)throw new Error("missing: "+me);return xe}function _(ce,me){return me(ce)}var v=25,P=10,M=.3;function E(){var ce=0,me=0,xe=1,ke=1,Ae=24,Oe,He=b,Ge=r,_e=S,Ie=w,We=32,et=2,Ne,De=null;function Ve(){var At={nodes:_e.apply(null,arguments),links:Ie.apply(null,arguments)};dt(At),D(At,He,De),Dt(At),zt(At),N(At,He),Nt(At,We,He),Et(At);for(var it=4,ht=0;ht<it;ht++)Q(At,ke,He),ae(At,ke,He),ee(At,me,ke,He),Q(At,ke,He),ae(At,ke,He);return ye(At,me,ke),j(At,et,ke,He),At}Ve.nodeId=function(At){return arguments.length?(He=typeof At=="function"?At:u(At),Ve):He},Ve.nodeAlign=function(At){return arguments.length?(Ge=typeof At=="function"?At:u(At),Ve):Ge},Ve.nodeWidth=function(At){return arguments.length?(Ae=+At,Ve):Ae},Ve.nodePadding=function(At){return arguments.length?(Oe=+At,Ve):Oe},Ve.nodes=function(At){return arguments.length?(_e=typeof At=="function"?At:u(At),Ve):_e},Ve.links=function(At){return arguments.length?(Ie=typeof At=="function"?At:u(At),Ve):Ie},Ve.size=function(At){return arguments.length?(ce=me=0,xe=+At[0],ke=+At[1],Ve):[xe-ce,ke-me]},Ve.extent=function(At){return arguments.length?(ce=+At[0][0],xe=+At[1][0],me=+At[0][1],ke=+At[1][1],Ve):[[ce,me],[xe,ke]]},Ve.iterations=function(At){return arguments.length?(We=+At,Ve):We},Ve.circularLinkGap=function(At){return arguments.length?(et=+At,Ve):et},Ve.nodePaddingRatio=function(At){return arguments.length?(Ne=+At,Ve):Ne},Ve.sortNodes=function(At){return arguments.length?(De=At,Ve):De},Ve.update=function(At){return N(At,He),Et(At),At.links.forEach(function(it){it.circular&&(it.circularLinkType=it.y0+it.y1<ke?"top":"bottom",it.source.circularLinkType=it.circularLinkType,it.target.circularLinkType=it.circularLinkType)}),Q(At,ke,He,!1),ae(At,ke,He),j(At,et,ke,He),At};function dt(At){At.nodes.forEach(function(ht,$e){ht.index=$e,ht.sourceLinks=[],ht.targetLinks=[]});var it=c.map(At.nodes,He);return At.links.forEach(function(ht,$e){ht.index=$e;var Ee=ht.source,Xe=ht.target;(typeof Ee=="undefined"?"undefined":s(Ee))!=="object"&&(Ee=ht.source=T(it,Ee)),(typeof Xe=="undefined"?"undefined":s(Xe))!=="object"&&(Xe=ht.target=T(it,Xe)),Ee.sourceLinks.push(ht),Xe.targetLinks.push(ht)}),At}function Dt(At){At.nodes.forEach(function(it){it.partOfCycle=!1,it.value=Math.max(o.sum(it.sourceLinks,m),o.sum(it.targetLinks,m)),it.sourceLinks.forEach(function(ht){ht.circular&&(it.partOfCycle=!0,it.circularLinkType=ht.circularLinkType)}),it.targetLinks.forEach(function(ht){ht.circular&&(it.partOfCycle=!0,it.circularLinkType=ht.circularLinkType)})})}function Gt(At){var it=0,ht=0,$e=0,Ee=0,Xe=o.max(At.nodes,function(rt){return rt.column});return At.links.forEach(function(rt){rt.circular&&(rt.circularLinkType=="top"?it=it+rt.width:ht=ht+rt.width,rt.target.column==0&&(Ee=Ee+rt.width),rt.source.column==Xe&&($e=$e+rt.width))}),it=it>0?it+v+P:it,ht=ht>0?ht+v+P:ht,$e=$e>0?$e+v+P:$e,Ee=Ee>0?Ee+v+P:Ee,{top:it,bottom:ht,left:Ee,right:$e}}function Mt(At,it){var ht=o.max(At.nodes,function(kt){return kt.column}),$e=xe-ce,Ee=ke-me,Xe=$e+it.right+it.left,rt=Ee+it.top+it.bottom,ut=$e/Xe,Pt=Ee/rt;return ce=ce*ut+it.left,xe=it.right==0?xe:xe*ut,me=me*Pt+it.top,ke=ke*Pt,At.nodes.forEach(function(kt){kt.x0=ce+kt.column*((xe-ce-Ae)/ht),kt.x1=kt.x0+Ae}),Pt}function zt(At){var it,ht,$e;for(it=At.nodes,ht=[],$e=0;it.length;++$e,it=ht,ht=[])it.forEach(function(Ee){Ee.depth=$e,Ee.sourceLinks.forEach(function(Xe){ht.indexOf(Xe.target)<0&&!Xe.circular&&ht.push(Xe.target)})});for(it=At.nodes,ht=[],$e=0;it.length;++$e,it=ht,ht=[])it.forEach(function(Ee){Ee.height=$e,Ee.targetLinks.forEach(function(Xe){ht.indexOf(Xe.source)<0&&!Xe.circular&&ht.push(Xe.source)})});At.nodes.forEach(function(Ee){Ee.column=Math.floor(Ge.call(null,Ee,$e))})}function Nt(At,it,ht){var $e=c.nest().key(function(kt){return kt.column}).sortKeys(o.ascending).entries(At.nodes).map(function(kt){return kt.values});rt(ht),Pt();for(var Ee=1,Xe=it;Xe>0;--Xe)ut(Ee*=.99,ht),Pt();function rt(kt){if(Ne){var Bt=1/0;$e.forEach(function(Je){var gt=ke*Ne/(Je.length+1);Bt=gt<Bt?gt:Bt}),Oe=Bt}var Xt=o.min($e,function(Je){return(ke-me-(Je.length-1)*Oe)/o.sum(Je,m)});Xt=Xt*M,At.links.forEach(function(Je){Je.width=Je.value*Xt});var Ut=Gt(At),Jt=Mt(At,Ut);Xt=Xt*Jt,At.links.forEach(function(Je){Je.width=Je.value*Xt}),$e.forEach(function(Je){var gt=Je.length;Je.forEach(function(Ct,or){Ct.depth==$e.length-1&&gt==1||Ct.depth==0&&gt==1?(Ct.y0=ke/2-Ct.value*Xt,Ct.y1=Ct.y0+Ct.value*Xt):Ct.partOfCycle?F(Ct,kt)==0?(Ct.y0=ke/2+or,Ct.y1=Ct.y0+Ct.value*Xt):Ct.circularLinkType=="top"?(Ct.y0=me+or,Ct.y1=Ct.y0+Ct.value*Xt):(Ct.y0=ke-Ct.value*Xt-or,Ct.y1=Ct.y0+Ct.value*Xt):Ut.top==0||Ut.bottom==0?(Ct.y0=(ke-me)/gt*or,Ct.y1=Ct.y0+Ct.value*Xt):(Ct.y0=(ke-me)/2-gt/2+or,Ct.y1=Ct.y0+Ct.value*Xt)})})}function ut(kt,Bt){var Xt=$e.length;$e.forEach(function(Ut){var Jt=Ut.length,Je=Ut[0].depth;Ut.forEach(function(gt){var Ct;if((gt.sourceLinks.length||gt.targetLinks.length)&&!(gt.partOfCycle&&F(gt,Bt)>0))if(Je==0&&Jt==1)Ct=gt.y1-gt.y0,gt.y0=ke/2-Ct/2,gt.y1=ke/2+Ct/2;else if(Je==Xt-1&&Jt==1)Ct=gt.y1-gt.y0,gt.y0=ke/2-Ct/2,gt.y1=ke/2+Ct/2;else{var or=0,gr=o.mean(gt.sourceLinks,A),lr=o.mean(gt.targetLinks,x);gr&&lr?or=(gr+lr)/2:or=gr||lr;var mr=(or-g(gt))*kt;gt.y0+=mr,gt.y1+=mr}})})}function Pt(){$e.forEach(function(kt){var Bt,Xt,Ut=me,Jt=kt.length,Je;for(kt.sort(y),Je=0;Je<Jt;++Je)Bt=kt[Je],Xt=Ut-Bt.y0,Xt>0&&(Bt.y0+=Xt,Bt.y1+=Xt),Ut=Bt.y1+Oe;if(Xt=Ut-Oe-ke,Xt>0)for(Ut=Bt.y0-=Xt,Bt.y1-=Xt,Je=Jt-2;Je>=0;--Je)Bt=kt[Je],Xt=Bt.y1+Oe-Ut,Xt>0&&(Bt.y0-=Xt,Bt.y1-=Xt),Ut=Bt.y0})}}function Et(At){At.nodes.forEach(function(it){it.sourceLinks.sort(d),it.targetLinks.sort(h)}),At.nodes.forEach(function(it){var ht=it.y0,$e=ht,Ee=it.y1,Xe=Ee;it.sourceLinks.forEach(function(rt){rt.circular?(rt.y0=Ee-rt.width/2,Ee=Ee-rt.width):(rt.y0=ht+rt.width/2,ht+=rt.width)}),it.targetLinks.forEach(function(rt){rt.circular?(rt.y1=Xe-rt.width/2,Xe=Xe-rt.width):(rt.y1=$e+rt.width/2,$e+=rt.width)})})}return Ve}function D(ce,me,xe){var ke=0;if(xe===null){for(var Ae=[],Oe=0;Oe<ce.links.length;Oe++){var He=ce.links[Oe],Ge=He.source.index,_e=He.target.index;Ae[Ge]||(Ae[Ge]=[]),Ae[_e]||(Ae[_e]=[]),Ae[Ge].indexOf(_e)===-1&&Ae[Ge].push(_e)}var Ie=t(Ae);Ie.sort(function(De,Ve){return De.length-Ve.length});var We={};for(Oe=0;Oe<Ie.length;Oe++){var et=Ie[Oe],Ne=et.slice(-2);We[Ne[0]]||(We[Ne[0]]={}),We[Ne[0]][Ne[1]]=!0}ce.links.forEach(function(De){var Ve=De.target.index,dt=De.source.index;Ve===dt||We[dt]&&We[dt][Ve]?(De.circular=!0,De.circularLinkID=ke,ke=ke+1):De.circular=!1})}else ce.links.forEach(function(De){De.source[xe]<De.target[xe]?De.circular=!1:(De.circular=!0,De.circularLinkID=ke,ke=ke+1)})}function N(ce,me){var xe=0,ke=0;ce.links.forEach(function(Ae){Ae.circular&&(Ae.source.circularLinkType||Ae.target.circularLinkType?Ae.circularLinkType=Ae.source.circularLinkType?Ae.source.circularLinkType:Ae.target.circularLinkType:Ae.circularLinkType=xe<ke?"top":"bottom",Ae.circularLinkType=="top"?xe=xe+1:ke=ke+1,ce.nodes.forEach(function(Oe){(_(Oe,me)==_(Ae.source,me)||_(Oe,me)==_(Ae.target,me))&&(Oe.circularLinkType=Ae.circularLinkType)}))}),ce.links.forEach(function(Ae){Ae.circular&&(Ae.source.circularLinkType==Ae.target.circularLinkType&&(Ae.circularLinkType=Ae.source.circularLinkType),fe(Ae,me)&&(Ae.circularLinkType=Ae.source.circularLinkType))})}function O(ce){var me=Math.abs(ce.y1-ce.y0),xe=Math.abs(ce.target.x0-ce.source.x1);return Math.atan(xe/me)}function I(ce,me){return ce.source.column<me.target.column?!1:!(ce.target.column>me.source.column)}function F(ce,me){var xe=0;ce.sourceLinks.forEach(function(Ae){xe=Ae.circular&&!fe(Ae,me)?xe+1:xe});var ke=0;return ce.targetLinks.forEach(function(Ae){ke=Ae.circular&&!fe(Ae,me)?ke+1:ke}),xe+ke}function V(ce){var me=ce.source.sourceLinks,xe=0;me.forEach(function(Oe){xe=Oe.circular?xe+1:xe});var ke=ce.target.targetLinks,Ae=0;return ke.forEach(function(Oe){Ae=Oe.circular?Ae+1:Ae}),!(xe>1||Ae>1)}function U(ce,me,xe){return ce.sort(te),ce.forEach(function(ke,Ae){var Oe=0;if(fe(ke,xe)&&V(ke))ke.circularPathData.verticalBuffer=Oe+ke.width/2;else{var He=0;for(He;He<Ae;He++)if(I(ce[Ae],ce[He])){var Ge=ce[He].circularPathData.verticalBuffer+ce[He].width/2+me;Oe=Ge>Oe?Ge:Oe}ke.circularPathData.verticalBuffer=Oe+ke.width/2}}),ce}function j(ce,me,xe,ke){var Ae=5,Oe=o.min(ce.links,function(_e){return _e.source.y0});ce.links.forEach(function(_e){_e.circular&&(_e.circularPathData={})});var He=ce.links.filter(function(_e){return _e.circularLinkType=="top"});U(He,me,ke);var Ge=ce.links.filter(function(_e){return _e.circularLinkType=="bottom"});U(Ge,me,ke),ce.links.forEach(function(_e){if(_e.circular){if(_e.circularPathData.arcRadius=_e.width+P,_e.circularPathData.leftNodeBuffer=Ae,_e.circularPathData.rightNodeBuffer=Ae,_e.circularPathData.sourceWidth=_e.source.x1-_e.source.x0,_e.circularPathData.sourceX=_e.source.x0+_e.circularPathData.sourceWidth,_e.circularPathData.targetX=_e.target.x0,_e.circularPathData.sourceY=_e.y0,_e.circularPathData.targetY=_e.y1,fe(_e,ke)&&V(_e))_e.circularPathData.leftSmallArcRadius=P+_e.width/2,_e.circularPathData.leftLargeArcRadius=P+_e.width/2,_e.circularPathData.rightSmallArcRadius=P+_e.width/2,_e.circularPathData.rightLargeArcRadius=P+_e.width/2,_e.circularLinkType=="bottom"?(_e.circularPathData.verticalFullExtent=_e.source.y1+v+_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.rightLargeArcRadius):(_e.circularPathData.verticalFullExtent=_e.source.y0-v-_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.rightLargeArcRadius);else{var Ie=_e.source.column,We=_e.circularLinkType,et=ce.links.filter(function(Ve){return Ve.source.column==Ie&&Ve.circularLinkType==We});_e.circularLinkType=="bottom"?et.sort(W):et.sort(re);var Ne=0;et.forEach(function(Ve,dt){Ve.circularLinkID==_e.circularLinkID&&(_e.circularPathData.leftSmallArcRadius=P+_e.width/2+Ne,_e.circularPathData.leftLargeArcRadius=P+_e.width/2+dt*me+Ne),Ne=Ne+Ve.width}),Ie=_e.target.column,et=ce.links.filter(function(Ve){return Ve.target.column==Ie&&Ve.circularLinkType==We}),_e.circularLinkType=="bottom"?et.sort(le):et.sort(J),Ne=0,et.forEach(function(Ve,dt){Ve.circularLinkID==_e.circularLinkID&&(_e.circularPathData.rightSmallArcRadius=P+_e.width/2+Ne,_e.circularPathData.rightLargeArcRadius=P+_e.width/2+dt*me+Ne),Ne=Ne+Ve.width}),_e.circularLinkType=="bottom"?(_e.circularPathData.verticalFullExtent=Math.max(xe,_e.source.y1,_e.target.y1)+v+_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.rightLargeArcRadius):(_e.circularPathData.verticalFullExtent=Oe-v-_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.rightLargeArcRadius)}_e.circularPathData.leftInnerExtent=_e.circularPathData.sourceX+_e.circularPathData.leftNodeBuffer,_e.circularPathData.rightInnerExtent=_e.circularPathData.targetX-_e.circularPathData.rightNodeBuffer,_e.circularPathData.leftFullExtent=_e.circularPathData.sourceX+_e.circularPathData.leftLargeArcRadius+_e.circularPathData.leftNodeBuffer,_e.circularPathData.rightFullExtent=_e.circularPathData.targetX-_e.circularPathData.rightLargeArcRadius-_e.circularPathData.rightNodeBuffer}if(_e.circular)_e.path=Z(_e);else{var De=p.linkHorizontal().source(function(Ve){var dt=Ve.source.x0+(Ve.source.x1-Ve.source.x0),Dt=Ve.y0;return[dt,Dt]}).target(function(Ve){var dt=Ve.target.x0,Dt=Ve.y1;return[dt,Dt]});_e.path=De(_e)}})}function Z(ce){var me="";return ce.circularLinkType=="top"?me="M"+ce.circularPathData.sourceX+" "+ce.circularPathData.sourceY+" L"+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.sourceY+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftSmallArcRadius+" 0 0 0 "+ce.circularPathData.leftFullExtent+" "+(ce.circularPathData.sourceY-ce.circularPathData.leftSmallArcRadius)+" L"+ce.circularPathData.leftFullExtent+" "+ce.circularPathData.verticalLeftInnerExtent+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftLargeArcRadius+" 0 0 0 "+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.verticalFullExtent+" L"+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.verticalFullExtent+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightLargeArcRadius+" 0 0 0 "+ce.circularPathData.rightFullExtent+" "+ce.circularPathData.verticalRightInnerExtent+" L"+ce.circularPathData.rightFullExtent+" "+(ce.circularPathData.targetY-ce.circularPathData.rightSmallArcRadius)+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightSmallArcRadius+" 0 0 0 "+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.targetY+" L"+ce.circularPathData.targetX+" "+ce.circularPathData.targetY:me="M"+ce.circularPathData.sourceX+" "+ce.circularPathData.sourceY+" L"+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.sourceY+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftSmallArcRadius+" 0 0 1 "+ce.circularPathData.leftFullExtent+" "+(ce.circularPathData.sourceY+ce.circularPathData.leftSmallArcRadius)+" L"+ce.circularPathData.leftFullExtent+" "+ce.circularPathData.verticalLeftInnerExtent+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftLargeArcRadius+" 0 0 1 "+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.verticalFullExtent+" L"+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.verticalFullExtent+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightLargeArcRadius+" 0 0 1 "+ce.circularPathData.rightFullExtent+" "+ce.circularPathData.verticalRightInnerExtent+" L"+ce.circularPathData.rightFullExtent+" "+(ce.circularPathData.targetY+ce.circularPathData.rightSmallArcRadius)+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightSmallArcRadius+" 0 0 1 "+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.targetY+" L"+ce.circularPathData.targetX+" "+ce.circularPathData.targetY,me}function te(ce,me){return ue(ce)==ue(me)?ce.circularLinkType=="bottom"?W(ce,me):re(ce,me):ue(me)-ue(ce)}function re(ce,me){return ce.y0-me.y0}function W(ce,me){return me.y0-ce.y0}function J(ce,me){return ce.y1-me.y1}function le(ce,me){return me.y1-ce.y1}function ue(ce){return ce.target.column-ce.source.column}function se(ce){return ce.target.x0-ce.source.x1}function G(ce,me){var xe=O(ce),ke=se(me)/Math.tan(xe),Ae=oe(ce)=="up"?ce.y1+ke:ce.y1-ke;return Ae}function Y(ce,me){var xe=O(ce),ke=se(me)/Math.tan(xe),Ae=oe(ce)=="up"?ce.y1-ke:ce.y1+ke;return Ae}function ee(ce,me,xe,ke){ce.links.forEach(function(Ae){if(!Ae.circular&&Ae.target.column-Ae.source.column>1){var Oe=Ae.source.column+1,He=Ae.target.column-1,Ge=1,_e=He-Oe+1;for(Ge=1;Oe<=He;Oe++,Ge++)ce.nodes.forEach(function(Ie){if(Ie.column==Oe){var We=Ge/(_e+1),et=Math.pow(1-We,3),Ne=3*We*Math.pow(1-We,2),De=3*Math.pow(We,2)*(1-We),Ve=Math.pow(We,3),dt=et*Ae.y0+Ne*Ae.y0+De*Ae.y1+Ve*Ae.y1,Dt=dt-Ae.width/2,Gt=dt+Ae.width/2,Mt;Dt>Ie.y0&&Dt<Ie.y1?(Mt=Ie.y1-Dt+10,Mt=Ie.circularLinkType=="bottom"?Mt:-Mt,Ie=K(Ie,Mt,me,xe),ce.nodes.forEach(function(zt){_(zt,ke)==_(Ie,ke)||zt.column!=Ie.column||$(Ie,zt)&&K(zt,Mt,me,xe)})):Gt>Ie.y0&&Gt<Ie.y1?(Mt=Gt-Ie.y0+10,Ie=K(Ie,Mt,me,xe),ce.nodes.forEach(function(zt){_(zt,ke)==_(Ie,ke)||zt.column!=Ie.column||zt.y0<Ie.y1&&zt.y1>Ie.y1&&K(zt,Mt,me,xe)})):Dt<Ie.y0&&Gt>Ie.y1&&(Mt=Gt-Ie.y0+10,Ie=K(Ie,Mt,me,xe),ce.nodes.forEach(function(zt){_(zt,ke)==_(Ie,ke)||zt.column!=Ie.column||zt.y0<Ie.y1&&zt.y1>Ie.y1&&K(zt,Mt,me,xe)}))}})}})}function $(ce,me){return ce.y0>me.y0&&ce.y0<me.y1||ce.y1>me.y0&&ce.y1<me.y1?!0:ce.y0<me.y0&&ce.y1>me.y1}function K(ce,me,xe,ke){return ce.y0+me>=xe&&ce.y1+me<=ke&&(ce.y0=ce.y0+me,ce.y1=ce.y1+me,ce.targetLinks.forEach(function(Ae){Ae.y1=Ae.y1+me}),ce.sourceLinks.forEach(function(Ae){Ae.y0=Ae.y0+me})),ce}function Q(ce,me,xe,ke){ce.nodes.forEach(function(Ae){ke&&Ae.y+(Ae.y1-Ae.y0)>me&&(Ae.y=Ae.y-(Ae.y+(Ae.y1-Ae.y0)-me));var Oe=ce.links.filter(function(_e){return _(_e.source,xe)==_(Ae,xe)}),He=Oe.length;He>1&&Oe.sort(function(_e,Ie){if(!_e.circular&&!Ie.circular){if(_e.target.column==Ie.target.column)return _e.y1-Ie.y1;if(ie(_e,Ie)){if(_e.target.column>Ie.target.column){var We=Y(Ie,_e);return _e.y1-We}if(Ie.target.column>_e.target.column){var et=Y(_e,Ie);return et-Ie.y1}}else return _e.y1-Ie.y1}if(_e.circular&&!Ie.circular)return _e.circularLinkType=="top"?-1:1;if(Ie.circular&&!_e.circular)return Ie.circularLinkType=="top"?1:-1;if(_e.circular&&Ie.circular)return _e.circularLinkType===Ie.circularLinkType&&_e.circularLinkType=="top"?_e.target.column===Ie.target.column?_e.target.y1-Ie.target.y1:Ie.target.column-_e.target.column:_e.circularLinkType===Ie.circularLinkType&&_e.circularLinkType=="bottom"?_e.target.column===Ie.target.column?Ie.target.y1-_e.target.y1:_e.target.column-Ie.target.column:_e.circularLinkType=="top"?-1:1});var Ge=Ae.y0;Oe.forEach(function(_e){_e.y0=Ge+_e.width/2,Ge=Ge+_e.width}),Oe.forEach(function(_e,Ie){if(_e.circularLinkType=="bottom"){var We=Ie+1,et=0;for(We;We<He;We++)et=et+Oe[We].width;_e.y0=Ae.y1-et-_e.width/2}})})}function ae(ce,me,xe){ce.nodes.forEach(function(ke){var Ae=ce.links.filter(function(Ge){return _(Ge.target,xe)==_(ke,xe)}),Oe=Ae.length;Oe>1&&Ae.sort(function(Ge,_e){if(!Ge.circular&&!_e.circular){if(Ge.source.column==_e.source.column)return Ge.y0-_e.y0;if(ie(Ge,_e)){if(_e.source.column<Ge.source.column){var Ie=G(_e,Ge);return Ge.y0-Ie}if(Ge.source.column<_e.source.column){var We=G(Ge,_e);return We-_e.y0}}else return Ge.y0-_e.y0}if(Ge.circular&&!_e.circular)return Ge.circularLinkType=="top"?-1:1;if(_e.circular&&!Ge.circular)return _e.circularLinkType=="top"?1:-1;if(Ge.circular&&_e.circular)return Ge.circularLinkType===_e.circularLinkType&&Ge.circularLinkType=="top"?Ge.source.column===_e.source.column?Ge.source.y1-_e.source.y1:Ge.source.column-_e.source.column:Ge.circularLinkType===_e.circularLinkType&&Ge.circularLinkType=="bottom"?Ge.source.column===_e.source.column?Ge.source.y1-_e.source.y1:_e.source.column-Ge.source.column:Ge.circularLinkType=="top"?-1:1});var He=ke.y0;Ae.forEach(function(Ge){Ge.y1=He+Ge.width/2,He=He+Ge.width}),Ae.forEach(function(Ge,_e){if(Ge.circularLinkType=="bottom"){var Ie=_e+1,We=0;for(Ie;Ie<Oe;Ie++)We=We+Ae[Ie].width;Ge.y1=ke.y1-We-Ge.width/2}})})}function ie(ce,me){return oe(ce)==oe(me)}function oe(ce){return ce.y0-ce.y1>0?"up":"down"}function fe(ce,me){return _(ce.source,me)==_(ce.target,me)}function ye(ce,me,xe){var ke=ce.nodes,Ae=ce.links,Oe=!1,He=!1;if(Ae.forEach(function(Ne){Ne.circularLinkType=="top"?Oe=!0:Ne.circularLinkType=="bottom"&&(He=!0)}),Oe==!1||He==!1){var Ge=o.min(ke,function(Ne){return Ne.y0}),_e=o.max(ke,function(Ne){return Ne.y1}),Ie=_e-Ge,We=xe-me,et=We/Ie;ke.forEach(function(Ne){var De=(Ne.y1-Ne.y0)*et;Ne.y0=(Ne.y0-Ge)*et,Ne.y1=Ne.y0+De}),Ae.forEach(function(Ne){Ne.y0=(Ne.y0-Ge)*et,Ne.y1=(Ne.y1-Ge)*et,Ne.width=Ne.width*et})}}l.sankeyCircular=E,l.sankeyCenter=f,l.sankeyLeft=a,l.sankeyRight=i,l.sankeyJustify=r,Object.defineProperty(l,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(e,k,z){(function(l,o){typeof z=="object"&&typeof k!="undefined"?o(z,e("d3-array"),e("d3-collection"),e("d3-shape")):o(l.d3=l.d3||{},l.d3,l.d3,l.d3)})(this,function(l,o,c,p){function t(P){return P.target.depth}function n(P){return P.depth}function a(P,M){return M-1-P.height}function i(P,M){return P.sourceLinks.length?P.depth:M-1}function r(P){return P.targetLinks.length?P.depth:P.sourceLinks.length?o.min(P.sourceLinks,t)-1:0}function f(P){return function(){return P}}function u(P,M){return h(P.source,M.source)||P.index-M.index}function s(P,M){return h(P.target,M.target)||P.index-M.index}function h(P,M){return P.y0-M.y0}function d(P){return P.value}function y(P){return(P.y0+P.y1)/2}function m(P){return y(P.source)*P.value}function g(P){return y(P.target)*P.value}function x(P){return P.index}function A(P){return P.nodes}function b(P){return P.links}function S(P,M){var E=P.get(M);if(!E)throw new Error("missing: "+M);return E}var w=function(){var P=0,M=0,E=1,D=1,N=24,O=8,I=x,F=i,V=A,U=b,j=32,Z=2/3;function te(){var se={nodes:V.apply(null,arguments),links:U.apply(null,arguments)};return re(se),W(se),J(se),le(se),ue(se),se}te.update=function(se){return ue(se),se},te.nodeId=function(se){return arguments.length?(I=typeof se=="function"?se:f(se),te):I},te.nodeAlign=function(se){return arguments.length?(F=typeof se=="function"?se:f(se),te):F},te.nodeWidth=function(se){return arguments.length?(N=+se,te):N},te.nodePadding=function(se){return arguments.length?(O=+se,te):O},te.nodes=function(se){return arguments.length?(V=typeof se=="function"?se:f(se),te):V},te.links=function(se){return arguments.length?(U=typeof se=="function"?se:f(se),te):U},te.size=function(se){return arguments.length?(P=M=0,E=+se[0],D=+se[1],te):[E-P,D-M]},te.extent=function(se){return arguments.length?(P=+se[0][0],E=+se[1][0],M=+se[0][1],D=+se[1][1],te):[[P,M],[E,D]]},te.iterations=function(se){return arguments.length?(j=+se,te):j};function re(se){se.nodes.forEach(function(Y,ee){Y.index=ee,Y.sourceLinks=[],Y.targetLinks=[]});var G=c.map(se.nodes,I);se.links.forEach(function(Y,ee){Y.index=ee;var $=Y.source,K=Y.target;typeof $!="object"&&($=Y.source=S(G,$)),typeof K!="object"&&(K=Y.target=S(G,K)),$.sourceLinks.push(Y),K.targetLinks.push(Y)})}function W(se){se.nodes.forEach(function(G){G.value=Math.max(o.sum(G.sourceLinks,d),o.sum(G.targetLinks,d))})}function J(se){var G,Y,ee;for(G=se.nodes,Y=[],ee=0;G.length;++ee,G=Y,Y=[])G.forEach(function(K){K.depth=ee,K.sourceLinks.forEach(function(Q){Y.indexOf(Q.target)<0&&Y.push(Q.target)})});for(G=se.nodes,Y=[],ee=0;G.length;++ee,G=Y,Y=[])G.forEach(function(K){K.height=ee,K.targetLinks.forEach(function(Q){Y.indexOf(Q.source)<0&&Y.push(Q.source)})});var $=(E-P-N)/(ee-1);se.nodes.forEach(function(K){K.x1=(K.x0=P+Math.max(0,Math.min(ee-1,Math.floor(F.call(null,K,ee))))*$)+N})}function le(se){var G=c.nest().key(function(ie){return ie.x0}).sortKeys(o.ascending).entries(se.nodes).map(function(ie){return ie.values});$(),ae();for(var Y=1,ee=j;ee>0;--ee)Q(Y*=.99),ae(),K(Y),ae();function $(){var ie=o.max(G,function(ye){return ye.length}),oe=Z*(D-M)/(ie-1);O>oe&&(O=oe);var fe=o.min(G,function(ye){return(D-M-(ye.length-1)*O)/o.sum(ye,d)});G.forEach(function(ye){ye.forEach(function(ce,me){ce.y1=(ce.y0=me)+ce.value*fe})}),se.links.forEach(function(ye){ye.width=ye.value*fe})}function K(ie){G.forEach(function(oe){oe.forEach(function(fe){if(fe.targetLinks.length){var ye=(o.sum(fe.targetLinks,m)/o.sum(fe.targetLinks,d)-y(fe))*ie;fe.y0+=ye,fe.y1+=ye}})})}function Q(ie){G.slice().reverse().forEach(function(oe){oe.forEach(function(fe){if(fe.sourceLinks.length){var ye=(o.sum(fe.sourceLinks,g)/o.sum(fe.sourceLinks,d)-y(fe))*ie;fe.y0+=ye,fe.y1+=ye}})})}function ae(){G.forEach(function(ie){var oe,fe,ye=M,ce=ie.length,me;for(ie.sort(h),me=0;me<ce;++me)oe=ie[me],fe=ye-oe.y0,fe>0&&(oe.y0+=fe,oe.y1+=fe),ye=oe.y1+O;if(fe=ye-O-D,fe>0)for(ye=oe.y0-=fe,oe.y1-=fe,me=ce-2;me>=0;--me)oe=ie[me],fe=oe.y1+O-ye,fe>0&&(oe.y0-=fe,oe.y1-=fe),ye=oe.y0})}}function ue(se){se.nodes.forEach(function(G){G.sourceLinks.sort(s),G.targetLinks.sort(u)}),se.nodes.forEach(function(G){var Y=G.y0,ee=Y;G.sourceLinks.forEach(function($){$.y0=Y+$.width/2,Y+=$.width}),G.targetLinks.forEach(function($){$.y1=ee+$.width/2,ee+=$.width})})}return te};function T(P){return[P.source.x1,P.y0]}function _(P){return[P.target.x0,P.y1]}var v=function(){return p.linkHorizontal().source(T).target(_)};l.sankey=w,l.sankeyCenter=r,l.sankeyLeft=n,l.sankeyRight=a,l.sankeyJustify=i,l.sankeyLinkHorizontal=v,Object.defineProperty(l,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(e,k,z){(function(){var l={version:"3.8.0"},o=[].slice,c=function(he){return o.call(he)},p=self.document;function t(he){return he&&(he.ownerDocument||he.document||he).documentElement}function n(he){return he&&(he.ownerDocument&&he.ownerDocument.defaultView||he.document&&he||he.defaultView)}if(p)try{c(p.documentElement.childNodes)[0].nodeType}catch{c=function(Te){for(var Le=Te.length,Ue=new Array(Le);Le--;)Ue[Le]=Te[Le];return Ue}}if(Date.now||(Date.now=function(){return+new Date}),p)try{p.createElement("DIV").style.setProperty("opacity",0,"")}catch{var a=this.Element.prototype,i=a.setAttribute,r=a.setAttributeNS,f=this.CSSStyleDeclaration.prototype,u=f.setProperty;a.setAttribute=function(Te,Le){i.call(this,Te,Le+"")},a.setAttributeNS=function(Te,Le,Ue){r.call(this,Te,Le,Ue+"")},f.setProperty=function(Te,Le,Ue){u.call(this,Te,Le+"",Ue)}}l.ascending=s;function s(he,Te){return he<Te?-1:he>Te?1:he>=Te?0:NaN}l.descending=function(he,Te){return Te<he?-1:Te>he?1:Te>=he?0:NaN},l.min=function(he,Te){var Le=-1,Ue=he.length,Be,Ke;if(arguments.length===1){for(;++Le<Ue;)if((Ke=he[Le])!=null&&Ke>=Ke){Be=Ke;break}for(;++Le<Ue;)(Ke=he[Le])!=null&&Be>Ke&&(Be=Ke)}else{for(;++Le<Ue;)if((Ke=Te.call(he,he[Le],Le))!=null&&Ke>=Ke){Be=Ke;break}for(;++Le<Ue;)(Ke=Te.call(he,he[Le],Le))!=null&&Be>Ke&&(Be=Ke)}return Be},l.max=function(he,Te){var Le=-1,Ue=he.length,Be,Ke;if(arguments.length===1){for(;++Le<Ue;)if((Ke=he[Le])!=null&&Ke>=Ke){Be=Ke;break}for(;++Le<Ue;)(Ke=he[Le])!=null&&Ke>Be&&(Be=Ke)}else{for(;++Le<Ue;)if((Ke=Te.call(he,he[Le],Le))!=null&&Ke>=Ke){Be=Ke;break}for(;++Le<Ue;)(Ke=Te.call(he,he[Le],Le))!=null&&Ke>Be&&(Be=Ke)}return Be},l.extent=function(he,Te){var Le=-1,Ue=he.length,Be,Ke,yt;if(arguments.length===1){for(;++Le<Ue;)if((Ke=he[Le])!=null&&Ke>=Ke){Be=yt=Ke;break}for(;++Le<Ue;)(Ke=he[Le])!=null&&(Be>Ke&&(Be=Ke),yt<Ke&&(yt=Ke))}else{for(;++Le<Ue;)if((Ke=Te.call(he,he[Le],Le))!=null&&Ke>=Ke){Be=yt=Ke;break}for(;++Le<Ue;)(Ke=Te.call(he,he[Le],Le))!=null&&(Be>Ke&&(Be=Ke),yt<Ke&&(yt=Ke))}return[Be,yt]};function h(he){return he===null?NaN:+he}function d(he){return!isNaN(he)}l.sum=function(he,Te){var Le=0,Ue=he.length,Be,Ke=-1;if(arguments.length===1)for(;++Ke<Ue;)d(Be=+he[Ke])&&(Le+=Be);else for(;++Ke<Ue;)d(Be=+Te.call(he,he[Ke],Ke))&&(Le+=Be);return Le},l.mean=function(he,Te){var Le=0,Ue=he.length,Be,Ke=-1,yt=Ue;if(arguments.length===1)for(;++Ke<Ue;)d(Be=h(he[Ke]))?Le+=Be:--yt;else for(;++Ke<Ue;)d(Be=h(Te.call(he,he[Ke],Ke)))?Le+=Be:--yt;if(yt)return Le/yt},l.quantile=function(he,Te){var Le=(he.length-1)*Te+1,Ue=Math.floor(Le),Be=+he[Ue-1],Ke=Le-Ue;return Ke?Be+Ke*(he[Ue]-Be):Be},l.median=function(he,Te){var Le=[],Ue=he.length,Be,Ke=-1;if(arguments.length===1)for(;++Ke<Ue;)d(Be=h(he[Ke]))&&Le.push(Be);else for(;++Ke<Ue;)d(Be=h(Te.call(he,he[Ke],Ke)))&&Le.push(Be);if(Le.length)return l.quantile(Le.sort(s),.5)},l.variance=function(he,Te){var Le=he.length,Ue=0,Be,Ke,yt=0,vt=-1,Lt=0;if(arguments.length===1)for(;++vt<Le;)d(Be=h(he[vt]))&&(Ke=Be-Ue,Ue+=Ke/++Lt,yt+=Ke*(Be-Ue));else for(;++vt<Le;)d(Be=h(Te.call(he,he[vt],vt)))&&(Ke=Be-Ue,Ue+=Ke/++Lt,yt+=Ke*(Be-Ue));if(Lt>1)return yt/(Lt-1)},l.deviation=function(){var he=l.variance.apply(this,arguments);return he&&Math.sqrt(he)};function y(he){return{left:function(Te,Le,Ue,Be){for(arguments.length<3&&(Ue=0),arguments.length<4&&(Be=Te.length);Ue<Be;){var Ke=Ue+Be>>>1;he(Te[Ke],Le)<0?Ue=Ke+1:Be=Ke}return Ue},right:function(Te,Le,Ue,Be){for(arguments.length<3&&(Ue=0),arguments.length<4&&(Be=Te.length);Ue<Be;){var Ke=Ue+Be>>>1;he(Te[Ke],Le)>0?Be=Ke:Ue=Ke+1}return Ue}}}var m=y(s);l.bisectLeft=m.left,l.bisect=l.bisectRight=m.right,l.bisector=function(he){return y(he.length===1?function(Te,Le){return s(he(Te),Le)}:he)},l.shuffle=function(he,Te,Le){(Ue=arguments.length)<3&&(Le=he.length,Ue<2&&(Te=0));for(var Ue=Le-Te,Be,Ke;Ue;)Ke=Math.random()*Ue--|0,Be=he[Ue+Te],he[Ue+Te]=he[Ke+Te],he[Ke+Te]=Be;return he},l.permute=function(he,Te){for(var Le=Te.length,Ue=new Array(Le);Le--;)Ue[Le]=he[Te[Le]];return Ue},l.pairs=function(he){for(var Te=0,Le=he.length-1,Ue=he[0],Be=new Array(Le<0?0:Le);Te<Le;)Be[Te]=[Ue,Ue=he[++Te]];return Be},l.transpose=function(he){if(!(Ke=he.length))return[];for(var Te=-1,Le=l.min(he,g),Ue=new Array(Le);++Te<Le;)for(var Be=-1,Ke,yt=Ue[Te]=new Array(Ke);++Be<Ke;)yt[Be]=he[Be][Te];return Ue};function g(he){return he.length}l.zip=function(){return l.transpose(arguments)},l.keys=function(he){var Te=[];for(var Le in he)Te.push(Le);return Te},l.values=function(he){var Te=[];for(var Le in he)Te.push(he[Le]);return Te},l.entries=function(he){var Te=[];for(var Le in he)Te.push({key:Le,value:he[Le]});return Te},l.merge=function(he){for(var Te=he.length,Le,Ue=-1,Be=0,Ke,yt;++Ue<Te;)Be+=he[Ue].length;for(Ke=new Array(Be);--Te>=0;)for(yt=he[Te],Le=yt.length;--Le>=0;)Ke[--Be]=yt[Le];return Ke};var x=Math.abs;l.range=function(he,Te,Le){if(arguments.length<3&&(Le=1,arguments.length<2&&(Te=he,he=0)),(Te-he)/Le==1/0)throw new Error("infinite range");var Ue=[],Be=A(x(Le)),Ke=-1,yt;if(he*=Be,Te*=Be,Le*=Be,Le<0)for(;(yt=he+Le*++Ke)>Te;)Ue.push(yt/Be);else for(;(yt=he+Le*++Ke)<Te;)Ue.push(yt/Be);return Ue};function A(he){for(var Te=1;he*Te%1;)Te*=10;return Te}function b(he,Te){for(var Le in Te)Object.defineProperty(he.prototype,Le,{value:Te[Le],enumerable:!1})}l.map=function(he,Te){var Le=new S;if(he instanceof S)he.forEach(function(vt,Lt){Le.set(vt,Lt)});else if(Array.isArray(he)){var Ue=-1,Be=he.length,Ke;if(arguments.length===1)for(;++Ue<Be;)Le.set(Ue,he[Ue]);else for(;++Ue<Be;)Le.set(Te.call(he,Ke=he[Ue],Ue),Ke)}else for(var yt in he)Le.set(yt,he[yt]);return Le};function S(){this._=Object.create(null)}var w="__proto__",T="\0";b(S,{has:P,get:function(he){return this._[_(he)]},set:function(he,Te){return this._[_(he)]=Te},remove:M,keys:E,values:function(){var he=[];for(var Te in this._)he.push(this._[Te]);return he},entries:function(){var he=[];for(var Te in this._)he.push({key:v(Te),value:this._[Te]});return he},size:D,empty:N,forEach:function(he){for(var Te in this._)he.call(this,v(Te),this._[Te])}});function _(he){return(he+="")===w||he[0]===T?T+he:he}function v(he){return(he+="")[0]===T?he.slice(1):he}function P(he){return _(he)in this._}function M(he){return(he=_(he))in this._&&delete this._[he]}function E(){var he=[];for(var Te in this._)he.push(v(Te));return he}function D(){var he=0;for(var Te in this._)++he;return he}function N(){for(var he in this._)return!1;return!0}l.nest=function(){var he={},Te=[],Le=[],Ue,Be;function Ke(vt,Lt,Vt){if(Vt>=Te.length)return Be?Be.call(he,Lt):Ue?Lt.sort(Ue):Lt;for(var jt=-1,Zt=Lt.length,Ar=Te[Vt++],tn,pn,Cr,Yr=new S,Jr;++jt<Zt;)(Jr=Yr.get(tn=Ar(pn=Lt[jt])))?Jr.push(pn):Yr.set(tn,[pn]);return vt?(pn=vt(),Cr=function(fn,vn){pn.set(fn,Ke(vt,vn,Vt))}):(pn={},Cr=function(fn,vn){pn[fn]=Ke(vt,vn,Vt)}),Yr.forEach(Cr),pn}function yt(vt,Lt){if(Lt>=Te.length)return vt;var Vt=[],jt=Le[Lt++];return vt.forEach(function(Zt,Ar){Vt.push({key:Zt,values:yt(Ar,Lt)})}),jt?Vt.sort(function(Zt,Ar){return jt(Zt.key,Ar.key)}):Vt}return he.map=function(vt,Lt){return Ke(Lt,vt,0)},he.entries=function(vt){return yt(Ke(l.map,vt,0),0)},he.key=function(vt){return Te.push(vt),he},he.sortKeys=function(vt){return Le[Te.length-1]=vt,he},he.sortValues=function(vt){return Ue=vt,he},he.rollup=function(vt){return Be=vt,he},he},l.set=function(he){var Te=new O;if(he)for(var Le=0,Ue=he.length;Le<Ue;++Le)Te.add(he[Le]);return Te};function O(){this._=Object.create(null)}b(O,{has:P,add:function(he){return this._[_(he+="")]=!0,he},remove:M,values:E,size:D,empty:N,forEach:function(he){for(var Te in this._)he.call(this,v(Te))}}),l.behavior={};function I(he){return he}l.rebind=function(he,Te){for(var Le=1,Ue=arguments.length,Be;++Le<Ue;)he[Be=arguments[Le]]=F(he,Te,Te[Be]);return he};function F(he,Te,Le){return function(){var Ue=Le.apply(Te,arguments);return Ue===Te?he:Ue}}function V(he,Te){if(Te in he)return Te;Te=Te.charAt(0).toUpperCase()+Te.slice(1);for(var Le=0,Ue=U.length;Le<Ue;++Le){var Be=U[Le]+Te;if(Be in he)return Be}}var U=["webkit","ms","moz","Moz","o","O"];function j(){}l.dispatch=function(){for(var he=new Z,Te=-1,Le=arguments.length;++Te<Le;)he[arguments[Te]]=te(he);return he};function Z(){}Z.prototype.on=function(he,Te){var Le=he.indexOf("."),Ue="";if(Le>=0&&(Ue=he.slice(Le+1),he=he.slice(0,Le)),he)return arguments.length<2?this[he].on(Ue):this[he].on(Ue,Te);if(arguments.length===2){if(Te==null)for(he in this)this.hasOwnProperty(he)&&this[he].on(Ue,null);return this}};function te(he){var Te=[],Le=new S;function Ue(){for(var Be=Te,Ke=-1,yt=Be.length,vt;++Ke<yt;)(vt=Be[Ke].on)&&vt.apply(this,arguments);return he}return Ue.on=function(Be,Ke){var yt=Le.get(Be),vt;return arguments.length<2?yt&&yt.on:(yt&&(yt.on=null,Te=Te.slice(0,vt=Te.indexOf(yt)).concat(Te.slice(vt+1)),Le.remove(Be)),Ke&&Te.push(Le.set(Be,{on:Ke})),he)},Ue}l.event=null;function re(){l.event.preventDefault()}function W(){for(var he=l.event,Te;Te=he.sourceEvent;)he=Te;return he}function J(he){for(var Te=new Z,Le=0,Ue=arguments.length;++Le<Ue;)Te[arguments[Le]]=te(Te);return Te.of=function(Be,Ke){return function(yt){try{var vt=yt.sourceEvent=l.event;yt.target=he,l.event=yt,Te[yt.type].apply(Be,Ke)}finally{l.event=vt}}},Te}l.requote=function(he){return he.replace(le,"\\$&")};var le=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ue=function(he,Te){for(var Le in Te)he[Le]=Te[Le]};function se(he){return ue(he,$),he}var G=function(he,Te){return Te.querySelector(he)},Y=function(he,Te){return Te.querySelectorAll(he)},ee=function(he,Te){var Le=he.matches||he[V(he,"matchesSelector")];return ee=function(Ue,Be){return Le.call(Ue,Be)},ee(he,Te)};typeof Sizzle=="function"&&(G=function(he,Te){return Sizzle(he,Te)[0]||null},Y=Sizzle,ee=Sizzle.matchesSelector),l.selection=function(){return l.select(p.documentElement)};var $=l.selection.prototype=[];$.select=function(he){var Te=[],Le,Ue,Be,Ke;he=K(he);for(var yt=-1,vt=this.length;++yt<vt;){Te.push(Le=[]),Le.parentNode=(Be=this[yt]).parentNode;for(var Lt=-1,Vt=Be.length;++Lt<Vt;)(Ke=Be[Lt])?(Le.push(Ue=he.call(Ke,Ke.__data__,Lt,yt)),Ue&&"__data__"in Ke&&(Ue.__data__=Ke.__data__)):Le.push(null)}return se(Te)};function K(he){return typeof he=="function"?he:function(){return G(he,this)}}$.selectAll=function(he){var Te=[],Le,Ue;he=Q(he);for(var Be=-1,Ke=this.length;++Be<Ke;)for(var yt=this[Be],vt=-1,Lt=yt.length;++vt<Lt;)(Ue=yt[vt])&&(Te.push(Le=c(he.call(Ue,Ue.__data__,vt,Be))),Le.parentNode=Ue);return se(Te)};function Q(he){return typeof he=="function"?he:function(){return Y(he,this)}}var ae="http://www.w3.org/1999/xhtml",ie={svg:"http://www.w3.org/2000/svg",xhtml:ae,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};l.ns={prefix:ie,qualify:function(he){var Te=he.indexOf(":"),Le=he;return Te>=0&&(Le=he.slice(0,Te))!=="xmlns"&&(he=he.slice(Te+1)),ie.hasOwnProperty(Le)?{space:ie[Le],local:he}:he}},$.attr=function(he,Te){if(arguments.length<2){if(typeof he=="string"){var Le=this.node();return he=l.ns.qualify(he),he.local?Le.getAttributeNS(he.space,he.local):Le.getAttribute(he)}for(Te in he)this.each(oe(Te,he[Te]));return this}return this.each(oe(he,Te))};function oe(he,Te){he=l.ns.qualify(he);function Le(){this.removeAttribute(he)}function Ue(){this.removeAttributeNS(he.space,he.local)}function Be(){this.setAttribute(he,Te)}function Ke(){this.setAttributeNS(he.space,he.local,Te)}function yt(){var Lt=Te.apply(this,arguments);Lt==null?this.removeAttribute(he):this.setAttribute(he,Lt)}function vt(){var Lt=Te.apply(this,arguments);Lt==null?this.removeAttributeNS(he.space,he.local):this.setAttributeNS(he.space,he.local,Lt)}return Te==null?he.local?Ue:Le:typeof Te=="function"?he.local?vt:yt:he.local?Ke:Be}function fe(he){return he.trim().replace(/\s+/g," ")}$.classed=function(he,Te){if(arguments.length<2){if(typeof he=="string"){var Le=this.node(),Ue=(he=ce(he)).length,Be=-1;if(Te=Le.classList){for(;++Be<Ue;)if(!Te.contains(he[Be]))return!1}else for(Te=Le.getAttribute("class");++Be<Ue;)if(!ye(he[Be]).test(Te))return!1;return!0}for(Te in he)this.each(me(Te,he[Te]));return this}return this.each(me(he,Te))};function ye(he){return new RegExp("(?:^|\\s+)"+l.requote(he)+"(?:\\s+|$)","g")}function ce(he){return(he+"").trim().split(/^|\s+/)}function me(he,Te){he=ce(he).map(xe);var Le=he.length;function Ue(){for(var Ke=-1;++Ke<Le;)he[Ke](this,Te)}function Be(){for(var Ke=-1,yt=Te.apply(this,arguments);++Ke<Le;)he[Ke](this,yt)}return typeof Te=="function"?Be:Ue}function xe(he){var Te=ye(he);return function(Le,Ue){if(Be=Le.classList)return Ue?Be.add(he):Be.remove(he);var Be=Le.getAttribute("class")||"";Ue?(Te.lastIndex=0,Te.test(Be)||Le.setAttribute("class",fe(Be+" "+he))):Le.setAttribute("class",fe(Be.replace(Te," ")))}}$.style=function(he,Te,Le){var Ue=arguments.length;if(Ue<3){if(typeof he!="string"){Ue<2&&(Te="");for(Le in he)this.each(ke(Le,he[Le],Te));return this}if(Ue<2){var Be=this.node();return n(Be).getComputedStyle(Be,null).getPropertyValue(he)}Le=""}return this.each(ke(he,Te,Le))};function ke(he,Te,Le){function Ue(){this.style.removeProperty(he)}function Be(){this.style.setProperty(he,Te,Le)}function Ke(){var yt=Te.apply(this,arguments);yt==null?this.style.removeProperty(he):this.style.setProperty(he,yt,Le)}return Te==null?Ue:typeof Te=="function"?Ke:Be}$.property=function(he,Te){if(arguments.length<2){if(typeof he=="string")return this.node()[he];for(Te in he)this.each(Ae(Te,he[Te]));return this}return this.each(Ae(he,Te))};function Ae(he,Te){function Le(){delete this[he]}function Ue(){this[he]=Te}function Be(){var Ke=Te.apply(this,arguments);Ke==null?delete this[he]:this[he]=Ke}return Te==null?Le:typeof Te=="function"?Be:Ue}$.text=function(he){return arguments.length?this.each(typeof he=="function"?function(){var Te=he.apply(this,arguments);this.textContent=Te??""}:he==null?function(){this.textContent=""}:function(){this.textContent=he}):this.node().textContent},$.html=function(he){return arguments.length?this.each(typeof he=="function"?function(){var Te=he.apply(this,arguments);this.innerHTML=Te??""}:he==null?function(){this.innerHTML=""}:function(){this.innerHTML=he}):this.node().innerHTML},$.append=function(he){return he=Oe(he),this.select(function(){return this.appendChild(he.apply(this,arguments))})};function Oe(he){function Te(){var Ue=this.ownerDocument,Be=this.namespaceURI;return Be===ae&&Ue.documentElement.namespaceURI===ae?Ue.createElement(he):Ue.createElementNS(Be,he)}function Le(){return this.ownerDocument.createElementNS(he.space,he.local)}return typeof he=="function"?he:(he=l.ns.qualify(he)).local?Le:Te}$.insert=function(he,Te){return he=Oe(he),Te=K(Te),this.select(function(){return this.insertBefore(he.apply(this,arguments),Te.apply(this,arguments)||null)})},$.remove=function(){return this.each(He)};function He(){var he=this.parentNode;he&&he.removeChild(this)}$.data=function(he,Te){var Le=-1,Ue=this.length,Be,Ke;if(!arguments.length){for(he=new Array(Ue=(Be=this[0]).length);++Le<Ue;)(Ke=Be[Le])&&(he[Le]=Ke.__data__);return he}function yt(jt,Zt){var Ar,tn=jt.length,pn=Zt.length,Cr=Math.min(tn,pn),Yr=new Array(pn),Jr=new Array(pn),fn=new Array(tn),vn,Qr;if(Te){var jn=new S,ia=new Array(tn),Ma;for(Ar=-1;++Ar<tn;)(vn=jt[Ar])&&(jn.has(Ma=Te.call(vn,vn.__data__,Ar))?fn[Ar]=vn:jn.set(Ma,vn),ia[Ar]=Ma);for(Ar=-1;++Ar<pn;)(vn=jn.get(Ma=Te.call(Zt,Qr=Zt[Ar],Ar)))?vn!==!0&&(Yr[Ar]=vn,vn.__data__=Qr):Jr[Ar]=Ge(Qr),jn.set(Ma,!0);for(Ar=-1;++Ar<tn;)Ar in ia&&jn.get(ia[Ar])!==!0&&(fn[Ar]=jt[Ar])}else{for(Ar=-1;++Ar<Cr;)vn=jt[Ar],Qr=Zt[Ar],vn?(vn.__data__=Qr,Yr[Ar]=vn):Jr[Ar]=Ge(Qr);for(;Ar<pn;++Ar)Jr[Ar]=Ge(Zt[Ar]);for(;Ar<tn;++Ar)fn[Ar]=jt[Ar]}Jr.update=Yr,Jr.parentNode=Yr.parentNode=fn.parentNode=jt.parentNode,vt.push(Jr),Lt.push(Yr),Vt.push(fn)}var vt=et([]),Lt=se([]),Vt=se([]);if(typeof he=="function")for(;++Le<Ue;)yt(Be=this[Le],he.call(Be,Be.parentNode.__data__,Le));else for(;++Le<Ue;)yt(Be=this[Le],he);return Lt.enter=function(){return vt},Lt.exit=function(){return Vt},Lt};function Ge(he){return{__data__:he}}$.datum=function(he){return arguments.length?this.property("__data__",he):this.property("__data__")},$.filter=function(he){var Te=[],Le,Ue,Be;typeof he!="function"&&(he=_e(he));for(var Ke=0,yt=this.length;Ke<yt;Ke++){Te.push(Le=[]),Le.parentNode=(Ue=this[Ke]).parentNode;for(var vt=0,Lt=Ue.length;vt<Lt;vt++)(Be=Ue[vt])&&he.call(Be,Be.__data__,vt,Ke)&&Le.push(Be)}return se(Te)};function _e(he){return function(){return ee(this,he)}}$.order=function(){for(var he=-1,Te=this.length;++he<Te;)for(var Le=this[he],Ue=Le.length-1,Be=Le[Ue],Ke;--Ue>=0;)(Ke=Le[Ue])&&(Be&&Be!==Ke.nextSibling&&Be.parentNode.insertBefore(Ke,Be),Be=Ke);return this},$.sort=function(he){he=Ie.apply(this,arguments);for(var Te=-1,Le=this.length;++Te<Le;)this[Te].sort(he);return this.order()};function Ie(he){return arguments.length||(he=s),function(Te,Le){return Te&&Le?he(Te.__data__,Le.__data__):!Te-!Le}}$.each=function(he){return We(this,function(Te,Le,Ue){he.call(Te,Te.__data__,Le,Ue)})};function We(he,Te){for(var Le=0,Ue=he.length;Le<Ue;Le++)for(var Be=he[Le],Ke=0,yt=Be.length,vt;Ke<yt;Ke++)(vt=Be[Ke])&&Te(vt,Ke,Le);return he}$.call=function(he){var Te=c(arguments);return he.apply(Te[0]=this,Te),this},$.empty=function(){return!this.node()},$.node=function(){for(var he=0,Te=this.length;he<Te;he++)for(var Le=this[he],Ue=0,Be=Le.length;Ue<Be;Ue++){var Ke=Le[Ue];if(Ke)return Ke}return null},$.size=function(){var he=0;return We(this,function(){++he}),he};function et(he){return ue(he,Ne),he}var Ne=[];l.selection.enter=et,l.selection.enter.prototype=Ne,Ne.append=$.append,Ne.empty=$.empty,Ne.node=$.node,Ne.call=$.call,Ne.size=$.size,Ne.select=function(he){for(var Te=[],Le,Ue,Be,Ke,yt,vt=-1,Lt=this.length;++vt<Lt;){Be=(Ke=this[vt]).update,Te.push(Le=[]),Le.parentNode=Ke.parentNode;for(var Vt=-1,jt=Ke.length;++Vt<jt;)(yt=Ke[Vt])?(Le.push(Be[Vt]=Ue=he.call(Ke.parentNode,yt.__data__,Vt,vt)),Ue.__data__=yt.__data__):Le.push(null)}return se(Te)},Ne.insert=function(he,Te){return arguments.length<2&&(Te=De(this)),$.insert.call(this,he,Te)};function De(he){var Te,Le;return function(Ue,Be,Ke){var yt=he[Ke].update,vt=yt.length,Lt;for(Ke!=Le&&(Le=Ke,Te=0),Be>=Te&&(Te=Be+1);!(Lt=yt[Te])&&++Te<vt;);return Lt}}l.select=function(he){var Te;return typeof he=="string"?(Te=[G(he,p)],Te.parentNode=p.documentElement):(Te=[he],Te.parentNode=t(he)),se([Te])},l.selectAll=function(he){var Te;return typeof he=="string"?(Te=c(Y(he,p)),Te.parentNode=p.documentElement):(Te=c(he),Te.parentNode=null),se([Te])},$.on=function(he,Te,Le){var Ue=arguments.length;if(Ue<3){if(typeof he!="string"){Ue<2&&(Te=!1);for(Le in he)this.each(Ve(Le,he[Le],Te));return this}if(Ue<2)return(Ue=this.node()["__on"+he])&&Ue._;Le=!1}return this.each(Ve(he,Te,Le))};function Ve(he,Te,Le){var Ue="__on"+he,Be=he.indexOf("."),Ke=Dt;Be>0&&(he=he.slice(0,Be));var yt=dt.get(he);yt&&(he=yt,Ke=Gt);function vt(){var jt=this[Ue];jt&&(this.removeEventListener(he,jt,jt.$),delete this[Ue])}function Lt(){var jt=Ke(Te,c(arguments));vt.call(this),this.addEventListener(he,this[Ue]=jt,jt.$=Le),jt._=Te}function Vt(){var jt=new RegExp("^__on([^.]+)"+l.requote(he)+"$"),Zt;for(var Ar in this)if(Zt=Ar.match(jt)){var tn=this[Ar];this.removeEventListener(Zt[1],tn,tn.$),delete this[Ar]}}return Be?Te?Lt:vt:Te?j:Vt}var dt=l.map({mouseenter:"mouseover",mouseleave:"mouseout"});p&&dt.forEach(function(he){"on"+he in p&&dt.remove(he)});function Dt(he,Te){return function(Le){var Ue=l.event;l.event=Le,Te[0]=this.__data__;try{he.apply(this,Te)}finally{l.event=Ue}}}function Gt(he,Te){var Le=Dt(he,Te);return function(Ue){var Be=this,Ke=Ue.relatedTarget;(!Ke||Ke!==Be&&!(Ke.compareDocumentPosition(Be)&8))&&Le.call(Be,Ue)}}var Mt,zt=0;function Nt(he){var Te=".dragsuppress-"+ ++zt,Le="click"+Te,Ue=l.select(n(he)).on("touchmove"+Te,re).on("dragstart"+Te,re).on("selectstart"+Te,re);if(Mt==null&&(Mt="onselectstart"in he?!1:V(he.style,"userSelect")),Mt){var Be=t(he).style,Ke=Be[Mt];Be[Mt]="none"}return function(yt){if(Ue.on(Te,null),Mt&&(Be[Mt]=Ke),yt){var vt=function(){Ue.on(Le,null)};Ue.on(Le,function(){re(),vt()},!0),setTimeout(vt,0)}}}l.mouse=function(he){return At(he,W())};var Et=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function At(he,Te){Te.changedTouches&&(Te=Te.changedTouches[0]);var Le=he.ownerSVGElement||he;if(Le.createSVGPoint){var Ue=Le.createSVGPoint();if(Et<0){var Be=n(he);if(Be.scrollX||Be.scrollY){Le=l.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Ke=Le[0][0].getScreenCTM();Et=!(Ke.f||Ke.e),Le.remove()}}return Et?(Ue.x=Te.pageX,Ue.y=Te.pageY):(Ue.x=Te.clientX,Ue.y=Te.clientY),Ue=Ue.matrixTransform(he.getScreenCTM().inverse()),[Ue.x,Ue.y]}var yt=he.getBoundingClientRect();return[Te.clientX-yt.left-he.clientLeft,Te.clientY-yt.top-he.clientTop]}l.touch=function(he,Te,Le){if(arguments.length<3&&(Le=Te,Te=W().changedTouches),Te){for(var Ue=0,Be=Te.length,Ke;Ue<Be;++Ue)if((Ke=Te[Ue]).identifier===Le)return At(he,Ke)}},l.behavior.drag=function(){var he=J(Be,"drag","dragstart","dragend"),Te=null,Le=Ke(j,l.mouse,n,"mousemove","mouseup"),Ue=Ke(it,l.touch,I,"touchmove","touchend");function Be(){this.on("mousedown.drag",Le).on("touchstart.drag",Ue)}function Ke(yt,vt,Lt,Vt,jt){return function(){var Zt=this,Ar=l.event.target.correspondingElement||l.event.target,tn=Zt.parentNode,pn=he.of(Zt,arguments),Cr=0,Yr=yt(),Jr=".drag"+(Yr==null?"":"-"+Yr),fn,vn=l.select(Lt(Ar)).on(Vt+Jr,ia).on(jt+Jr,Ma),Qr=Nt(Ar),jn=vt(tn,Yr);Te?(fn=Te.apply(Zt,arguments),fn=[fn.x-jn[0],fn.y-jn[1]]):fn=[0,0],pn({type:"dragstart"});function ia(){var ua=vt(tn,Yr),Ra,va;!ua||(Ra=ua[0]-jn[0],va=ua[1]-jn[1],Cr|=Ra|va,jn=ua,pn({type:"drag",x:ua[0]+fn[0],y:ua[1]+fn[1],dx:Ra,dy:va}))}function Ma(){!vt(tn,Yr)||(vn.on(Vt+Jr,null).on(jt+Jr,null),Qr(Cr),pn({type:"dragend"}))}}}return Be.origin=function(yt){return arguments.length?(Te=yt,Be):Te},l.rebind(Be,he,"on")};function it(){return l.event.changedTouches[0].identifier}l.touches=function(he,Te){return arguments.length<2&&(Te=W().touches),Te?c(Te).map(function(Le){var Ue=At(he,Le);return Ue.identifier=Le.identifier,Ue}):[]};var ht=1e-6,$e=ht*ht,Ee=Math.PI,Xe=2*Ee,rt=Xe-ht,ut=Ee/2,Pt=Ee/180,kt=180/Ee;function Bt(he,Te,Le){return(Te[0]-he[0])*(Le[1]-he[1])-(Te[1]-he[1])*(Le[0]-he[0])}function Xt(he){return he>1?ut:he<-1?-ut:Math.asin(he)}function Ut(he){return((he=Math.exp(he))-1/he)/2}function Jt(he){return((he=Math.exp(he))+1/he)/2}function Je(he){return((he=Math.exp(2*he))-1)/(he+1)}var gt=Math.SQRT2,Ct=2,or=4;l.interpolateZoom=function(he,Te){var Le=he[0],Ue=he[1],Be=he[2],Ke=Te[0],yt=Te[1],vt=Te[2],Lt=Ke-Le,Vt=yt-Ue,jt=Lt*Lt+Vt*Vt,Zt,Ar;if(jt<$e)Ar=Math.log(vt/Be)/gt,Zt=function(fn){return[Le+fn*Lt,Ue+fn*Vt,Be*Math.exp(gt*fn*Ar)]};else{var tn=Math.sqrt(jt),pn=(vt*vt-Be*Be+or*jt)/(2*Be*Ct*tn),Cr=(vt*vt-Be*Be-or*jt)/(2*vt*Ct*tn),Yr=Math.log(Math.sqrt(pn*pn+1)-pn),Jr=Math.log(Math.sqrt(Cr*Cr+1)-Cr);Ar=(Jr-Yr)/gt,Zt=function(fn){var vn=fn*Ar,Qr=Jt(Yr),jn=Be/(Ct*tn)*(Qr*Je(gt*vn+Yr)-Ut(Yr));return[Le+jn*Lt,Ue+jn*Vt,Be*Qr/Jt(gt*vn+Yr)]}}return Zt.duration=Ar*1e3,Zt},l.behavior.zoom=function(){var he={x:0,y:0,k:1},Te,Le,Ue,Be=[960,500],Ke=gr,yt=250,vt=0,Lt="mousedown.zoom",Vt="mousemove.zoom",jt="mouseup.zoom",Zt,Ar="touchstart.zoom",tn,pn=J(vn,"zoomstart","zoom","zoomend"),Cr,Yr,Jr,fn;mr||(mr="onwheel"in p?(lr=function(){return-l.event.deltaY*(l.event.deltaMode?120:1)},"wheel"):"onmousewheel"in p?(lr=function(){return l.event.wheelDelta},"mousewheel"):(lr=function(){return-l.event.detail},"MozMousePixelScroll"));function vn(ga){ga.on(Lt,ei).on(mr+".zoom",xo).on("dblclick.zoom",Bi).on(Ar,xi)}vn.event=function(ga){ga.each(function(){var oi=pn.of(this,arguments),Ka=he;Za?l.select(this).transition().each("start.zoom",function(){he=this.__chart__||{x:0,y:0,k:1},va(oi)}).tween("zoom:zoom",function(){var Ci=Be[0],ui=Be[1],vo=Le?Le[0]:Ci/2,to=Le?Le[1]:ui/2,Co=l.interpolateZoom([(vo-he.x)/he.k,(to-he.y)/he.k,Ci/he.k],[(vo-Ka.x)/Ka.k,(to-Ka.y)/Ka.k,Ci/Ka.k]);return function(os){var Qo=Co(os),ss=Ci/Qo[2];this.__chart__=he={x:vo-Qo[0]*ss,y:to-Qo[1]*ss,k:ss},Wa(oi)}}).each("interrupt.zoom",function(){za(oi)}).each("end.zoom",function(){za(oi)}):(this.__chart__=he,va(oi),Wa(oi),za(oi))})},vn.translate=function(ga){return arguments.length?(he={x:+ga[0],y:+ga[1],k:he.k},Ra(),vn):[he.x,he.y]},vn.scale=function(ga){return arguments.length?(he={x:he.x,y:he.y,k:null},ia(+ga),Ra(),vn):he.k},vn.scaleExtent=function(ga){return arguments.length?(Ke=ga==null?gr:[+ga[0],+ga[1]],vn):Ke},vn.center=function(ga){return arguments.length?(Ue=ga&&[+ga[0],+ga[1]],vn):Ue},vn.size=function(ga){return arguments.length?(Be=ga&&[+ga[0],+ga[1]],vn):Be},vn.duration=function(ga){return arguments.length?(yt=+ga,vn):yt},vn.x=function(ga){return arguments.length?(Yr=ga,Cr=ga.copy(),he={x:0,y:0,k:1},vn):Yr},vn.y=function(ga){return arguments.length?(fn=ga,Jr=ga.copy(),he={x:0,y:0,k:1},vn):fn};function Qr(ga){return[(ga[0]-he.x)/he.k,(ga[1]-he.y)/he.k]}function jn(ga){return[ga[0]*he.k+he.x,ga[1]*he.k+he.y]}function ia(ga){he.k=Math.max(Ke[0],Math.min(Ke[1],ga))}function Ma(ga,oi){oi=jn(oi),he.x+=ga[0]-oi[0],he.y+=ga[1]-oi[1]}function ua(ga,oi,Ka,Ci){ga.__chart__={x:he.x,y:he.y,k:he.k},ia(Math.pow(2,Ci)),Ma(Le=oi,Ka),ga=l.select(ga),yt>0&&(ga=ga.transition().duration(yt)),ga.call(vn.event)}function Ra(){Yr&&Yr.domain(Cr.range().map(function(ga){return(ga-he.x)/he.k}).map(Cr.invert)),fn&&fn.domain(Jr.range().map(function(ga){return(ga-he.y)/he.k}).map(Jr.invert))}function va(ga){vt++||ga({type:"zoomstart"})}function Wa(ga){Ra(),ga({type:"zoom",scale:he.k,translate:[he.x,he.y]})}function za(ga){--vt||(ga({type:"zoomend"}),Le=null)}function ei(){var ga=this,oi=pn.of(ga,arguments),Ka=0,Ci=l.select(n(ga)).on(Vt,to).on(jt,Co),ui=Qr(l.mouse(ga)),vo=Nt(ga);Dn.call(ga),va(oi);function to(){Ka=1,Ma(l.mouse(ga),ui),Wa(oi)}function Co(){Ci.on(Vt,null).on(jt,null),vo(Ka),za(oi)}}function xi(){var ga=this,oi=pn.of(ga,arguments),Ka={},Ci=0,ui,vo=".zoom-"+l.event.changedTouches[0].identifier,to="touchmove"+vo,Co="touchend"+vo,os=[],Qo=l.select(ga),ss=Nt(ga);Hi(),va(oi),Qo.on(Lt,null).on(Ar,Hi);function Xi(){var Ro=l.touches(ga);return ui=he.k,Ro.forEach(function(io){io.identifier in Ka&&(Ka[io.identifier]=Qr(io))}),Ro}function Hi(){var Ro=l.event.target;l.select(Ro).on(to,Na).on(Co,Ja),os.push(Ro);for(var io=l.event.changedTouches,jo=0,Ji=io.length;jo<Ji;++jo)Ka[io[jo].identifier]=null;var ls=Xi(),Bs=Date.now();if(ls.length===1){if(Bs-tn<500){var ku=ls[0];ua(ga,ku,Ka[ku.identifier],Math.floor(Math.log(he.k)/Math.LN2)+1),re()}tn=Bs}else if(ls.length>1){var ku=ls[0],$i=ls[1],bc=ku[0]-$i[0],lu=ku[1]-$i[1];Ci=bc*bc+lu*lu}}function Na(){var Ro=l.touches(ga),io,jo,Ji,ls;Dn.call(ga);for(var Bs=0,ku=Ro.length;Bs<ku;++Bs,ls=null)if(Ji=Ro[Bs],ls=Ka[Ji.identifier]){if(jo)break;io=Ji,jo=ls}if(ls){var $i=($i=Ji[0]-io[0])*$i+($i=Ji[1]-io[1])*$i,bc=Ci&&Math.sqrt($i/Ci);io=[(io[0]+Ji[0])/2,(io[1]+Ji[1])/2],jo=[(jo[0]+ls[0])/2,(jo[1]+ls[1])/2],ia(bc*ui)}tn=null,Ma(io,jo),Wa(oi)}function Ja(){if(l.event.touches.length){for(var Ro=l.event.changedTouches,io=0,jo=Ro.length;io<jo;++io)delete Ka[Ro[io].identifier];for(var Ji in Ka)return void Xi()}l.selectAll(os).on(vo,null),Qo.on(Lt,ei).on(Ar,xi),ss(),za(oi)}}function xo(){var ga=pn.of(this,arguments);Zt?clearTimeout(Zt):(Dn.call(this),Te=Qr(Le=Ue||l.mouse(this)),va(ga)),Zt=setTimeout(function(){Zt=null,za(ga)},50),re(),ia(Math.pow(2,lr()*.002)*he.k),Ma(Le,Te),Wa(ga)}function Bi(){var ga=l.mouse(this),oi=Math.log(he.k)/Math.LN2;ua(this,ga,Qr(ga),l.event.shiftKey?Math.ceil(oi)-1:Math.floor(oi)+1)}return l.rebind(vn,pn,"on")};var gr=[0,1/0],lr,mr;l.color=Fr;function Fr(){}Fr.prototype.toString=function(){return this.rgb()+""},l.hsl=Rr;function Rr(he,Te,Le){return this instanceof Rr?(this.h=+he,this.s=+Te,void(this.l=+Le)):arguments.length<2?he instanceof Rr?new Rr(he.h,he.s,he.l):gn(""+he,Xr,Rr):new Rr(he,Te,Le)}var ir=Rr.prototype=new Fr;ir.brighter=function(he){return he=Math.pow(.7,arguments.length?he:1),new Rr(this.h,this.s,this.l/he)},ir.darker=function(he){return he=Math.pow(.7,arguments.length?he:1),new Rr(this.h,this.s,he*this.l)},ir.rgb=function(){return Vr(this.h,this.s,this.l)};function Vr(he,Te,Le){var Ue,Be;he=isNaN(he)?0:(he%=360)<0?he+360:he,Te=isNaN(Te)||Te<0?0:Te>1?1:Te,Le=Le<0?0:Le>1?1:Le,Be=Le<=.5?Le*(1+Te):Le+Te-Le*Te,Ue=2*Le-Be;function Ke(vt){return vt>360?vt-=360:vt<0&&(vt+=360),vt<60?Ue+(Be-Ue)*vt/60:vt<180?Be:vt<240?Ue+(Be-Ue)*(240-vt)/60:Ue}function yt(vt){return Math.round(Ke(vt)*255)}return new _r(yt(he+120),yt(he),yt(he-120))}l.hcl=qe;function qe(he,Te,Le){return this instanceof qe?(this.h=+he,this.c=+Te,void(this.l=+Le)):arguments.length<2?he instanceof qe?new qe(he.h,he.c,he.l):he instanceof Re?Yt(he.l,he.a,he.b):Yt((he=kr((he=l.rgb(he)).r,he.g,he.b)).l,he.a,he.b):new qe(he,Te,Le)}var we=qe.prototype=new Fr;we.brighter=function(he){return new qe(this.h,this.c,Math.min(100,this.l+Ye*(arguments.length?he:1)))},we.darker=function(he){return new qe(this.h,this.c,Math.max(0,this.l-Ye*(arguments.length?he:1)))},we.rgb=function(){return Me(this.h,this.c,this.l).rgb()};function Me(he,Te,Le){return isNaN(he)&&(he=0),isNaN(Te)&&(Te=0),new Re(Le,Math.cos(he*=Pt)*Te,Math.sin(he)*Te)}l.lab=Re;function Re(he,Te,Le){return this instanceof Re?(this.l=+he,this.a=+Te,void(this.b=+Le)):arguments.length<2?he instanceof Re?new Re(he.l,he.a,he.b):he instanceof qe?Me(he.h,he.c,he.l):kr((he=_r(he)).r,he.g,he.b):new Re(he,Te,Le)}var Ye=18,Qe=.95047,ot=1,st=1.08883,pt=Re.prototype=new Fr;pt.brighter=function(he){return new Re(Math.min(100,this.l+Ye*(arguments.length?he:1)),this.a,this.b)},pt.darker=function(he){return new Re(Math.max(0,this.l-Ye*(arguments.length?he:1)),this.a,this.b)},pt.rgb=function(){return wt(this.l,this.a,this.b)};function wt(he,Te,Le){var Ue=(he+16)/116,Be=Ue+Te/500,Ke=Ue-Le/200;return Be=wr(Be)*Qe,Ue=wr(Ue)*ot,Ke=wr(Ke)*st,new _r(Mr(3.2404542*Be-1.5371385*Ue-.4985314*Ke),Mr(-.969266*Be+1.8760108*Ue+.041556*Ke),Mr(.0556434*Be-.2040259*Ue+1.0572252*Ke))}function Yt(he,Te,Le){return he>0?new qe(Math.atan2(Le,Te)*kt,Math.sqrt(Te*Te+Le*Le),he):new qe(NaN,NaN,he)}function wr(he){return he>.206893034?he*he*he:(he-4/29)/7.787037}function Tr(he){return he>.008856?Math.pow(he,1/3):7.787037*he+4/29}function Mr(he){return Math.round(255*(he<=.00304?12.92*he:1.055*Math.pow(he,1/2.4)-.055))}l.rgb=_r;function _r(he,Te,Le){return this instanceof _r?(this.r=~~he,this.g=~~Te,void(this.b=~~Le)):arguments.length<2?he instanceof _r?new _r(he.r,he.g,he.b):gn(""+he,_r,Vr):new _r(he,Te,Le)}function Or(he){return new _r(he>>16,he>>8&255,he&255)}function nn(he){return Or(he)+""}var Sr=_r.prototype=new Fr;Sr.brighter=function(he){he=Math.pow(.7,arguments.length?he:1);var Te=this.r,Le=this.g,Ue=this.b,Be=30;return!Te&&!Le&&!Ue?new _r(Be,Be,Be):(Te&&Te<Be&&(Te=Be),Le&&Le<Be&&(Le=Be),Ue&&Ue<Be&&(Ue=Be),new _r(Math.min(255,Te/he),Math.min(255,Le/he),Math.min(255,Ue/he)))},Sr.darker=function(he){return he=Math.pow(.7,arguments.length?he:1),new _r(he*this.r,he*this.g,he*this.b)},Sr.hsl=function(){return Xr(this.r,this.g,this.b)},Sr.toString=function(){return"#"+yr(this.r)+yr(this.g)+yr(this.b)};function yr(he){return he<16?"0"+Math.max(0,he).toString(16):Math.min(255,he).toString(16)}function gn(he,Te,Le){var Ue=0,Be=0,Ke=0,yt,vt,Lt;if(yt=/([a-z]+)\((.*)\)/.exec(he=he.toLowerCase()),yt)switch(vt=yt[2].split(","),yt[1]){case"hsl":return Le(parseFloat(vt[0]),parseFloat(vt[1])/100,parseFloat(vt[2])/100);case"rgb":return Te(cn(vt[0]),cn(vt[1]),cn(vt[2]))}return(Lt=$r.get(he))?Te(Lt.r,Lt.g,Lt.b):(he!=null&&he.charAt(0)==="#"&&!isNaN(Lt=parseInt(he.slice(1),16))&&(he.length===4?(Ue=(Lt&3840)>>4,Ue=Ue>>4|Ue,Be=Lt&240,Be=Be>>4|Be,Ke=Lt&15,Ke=Ke<<4|Ke):he.length===7&&(Ue=(Lt&16711680)>>16,Be=(Lt&65280)>>8,Ke=Lt&255)),Te(Ue,Be,Ke))}function Xr(he,Te,Le){var Ue=Math.min(he/=255,Te/=255,Le/=255),Be=Math.max(he,Te,Le),Ke=Be-Ue,yt,vt,Lt=(Be+Ue)/2;return Ke?(vt=Lt<.5?Ke/(Be+Ue):Ke/(2-Be-Ue),he==Be?yt=(Te-Le)/Ke+(Te<Le?6:0):Te==Be?yt=(Le-he)/Ke+2:yt=(he-Te)/Ke+4,yt*=60):(yt=NaN,vt=Lt>0&&Lt<1?0:yt),new Rr(yt,vt,Lt)}function kr(he,Te,Le){he=sn(he),Te=sn(Te),Le=sn(Le);var Ue=Tr((.4124564*he+.3575761*Te+.1804375*Le)/Qe),Be=Tr((.2126729*he+.7151522*Te+.072175*Le)/ot),Ke=Tr((.0193339*he+.119192*Te+.9503041*Le)/st);return Re(116*Be-16,500*(Ue-Be),200*(Be-Ke))}function sn(he){return(he/=255)<=.04045?he/12.92:Math.pow((he+.055)/1.055,2.4)}function cn(he){var Te=parseFloat(he);return he.charAt(he.length-1)==="%"?Math.round(Te*2.55):Te}var $r=l.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});$r.forEach(function(he,Te){$r.set(he,Or(Te))});function at(he){return typeof he=="function"?he:function(){return he}}l.functor=at,l.xhr=Ot(I);function Ot(he){return function(Te,Le,Ue){return arguments.length===2&&typeof Le=="function"&&(Ue=Le,Le=null),nr(Te,Le,he,Ue)}}function nr(he,Te,Le,Ue){var Be={},Ke=l.dispatch("beforesend","progress","load","error"),yt={},vt=new XMLHttpRequest,Lt=null;self.XDomainRequest&&!("withCredentials"in vt)&&/^(http(s)?:)?\/\//.test(he)&&(vt=new XDomainRequest),"onload"in vt?vt.onload=vt.onerror=Vt:vt.onreadystatechange=function(){vt.readyState>3&&Vt()};function Vt(){var jt=vt.status,Zt;if(!jt&&Zr(vt)||jt>=200&&jt<300||jt===304){try{Zt=Le.call(Be,vt)}catch(Ar){Ke.error.call(Be,Ar);return}Ke.load.call(Be,Zt)}else Ke.error.call(Be,vt)}return vt.onprogress=function(jt){var Zt=l.event;l.event=jt;try{Ke.progress.call(Be,vt)}finally{l.event=Zt}},Be.header=function(jt,Zt){return jt=(jt+"").toLowerCase(),arguments.length<2?yt[jt]:(Zt==null?delete yt[jt]:yt[jt]=Zt+"",Be)},Be.mimeType=function(jt){return arguments.length?(Te=jt==null?null:jt+"",Be):Te},Be.responseType=function(jt){return arguments.length?(Lt=jt,Be):Lt},Be.response=function(jt){return Le=jt,Be},["get","post"].forEach(function(jt){Be[jt]=function(){return Be.send.apply(Be,[jt].concat(c(arguments)))}}),Be.send=function(jt,Zt,Ar){if(arguments.length===2&&typeof Zt=="function"&&(Ar=Zt,Zt=null),vt.open(jt,he,!0),Te!=null&&!("accept"in yt)&&(yt.accept=Te+",*/*"),vt.setRequestHeader)for(var tn in yt)vt.setRequestHeader(tn,yt[tn]);return Te!=null&&vt.overrideMimeType&&vt.overrideMimeType(Te),Lt!=null&&(vt.responseType=Lt),Ar!=null&&Be.on("error",Ar).on("load",function(pn){Ar(null,pn)}),Ke.beforesend.call(Be,vt),vt.send(Zt??null),Be},Be.abort=function(){return vt.abort(),Be},l.rebind(Be,Ke,"on"),Ue==null?Be:Be.get(dr(Ue))}function dr(he){return he.length===1?function(Te,Le){he(Te==null?Le:null)}:he}function Zr(he){var Te=he.responseType;return Te&&Te!=="text"?he.response:he.responseText}l.dsv=function(he,Te){var Le=new RegExp('["'+he+`
]`),Ue=he.charCodeAt(0);function Be(Vt,jt,Zt){arguments.length<3&&(Zt=jt,jt=null);var Ar=nr(Vt,Te,jt==null?Ke:yt(jt),Zt);return Ar.row=function(tn){return arguments.length?Ar.response((jt=tn)==null?Ke:yt(tn)):jt},Ar}function Ke(Vt){return Be.parse(Vt.responseText)}function yt(Vt){return function(jt){return Be.parse(jt.responseText,Vt)}}Be.parse=function(Vt,jt){var Zt;return Be.parseRows(Vt,function(Ar,tn){if(Zt)return Zt(Ar,tn-1);var pn=function(Cr){for(var Yr={},Jr=Ar.length,fn=0;fn<Jr;++fn)Yr[Ar[fn]]=Cr[fn];return Yr};Zt=jt?function(Cr,Yr){return jt(pn(Cr),Yr)}:pn})},Be.parseRows=function(Vt,jt){var Zt={},Ar={},tn=[],pn=Vt.length,Cr=0,Yr=0,Jr,fn;function vn(){if(Cr>=pn)return Ar;if(fn)return fn=!1,Zt;var jn=Cr;if(Vt.charCodeAt(jn)===34){for(var ia=jn;ia++<pn;)if(Vt.charCodeAt(ia)===34){if(Vt.charCodeAt(ia+1)!==34)break;++ia}Cr=ia+2;var Ma=Vt.charCodeAt(ia+1);return Ma===13?(fn=!0,Vt.charCodeAt(ia+2)===10&&++Cr):Ma===10&&(fn=!0),Vt.slice(jn+1,ia).replace(/""/g,'"')}for(;Cr<pn;){var Ma=Vt.charCodeAt(Cr++),ua=1;if(Ma===10)fn=!0;else if(Ma===13)fn=!0,Vt.charCodeAt(Cr)===10&&(++Cr,++ua);else if(Ma!==Ue)continue;return Vt.slice(jn,Cr-ua)}return Vt.slice(jn)}for(;(Jr=vn())!==Ar;){for(var Qr=[];Jr!==Zt&&Jr!==Ar;)Qr.push(Jr),Jr=vn();jt&&(Qr=jt(Qr,Yr++))==null||tn.push(Qr)}return tn},Be.format=function(Vt){if(Array.isArray(Vt[0]))return Be.formatRows(Vt);var jt=new O,Zt=[];return Vt.forEach(function(Ar){for(var tn in Ar)jt.has(tn)||Zt.push(jt.add(tn))}),[Zt.map(Lt).join(he)].concat(Vt.map(function(Ar){return Zt.map(function(tn){return Lt(Ar[tn])}).join(he)})).join(`
`)},Be.formatRows=function(Vt){return Vt.map(vt).join(`
`)};function vt(Vt){return Vt.map(Lt).join(he)}function Lt(Vt){return Le.test(Vt)?'"'+Vt.replace(/\"/g,'""')+'"':Vt}return Be},l.csv=l.dsv(",","text/csv"),l.tsv=l.dsv("	","text/tab-separated-values");var Lr,Ur,xr,on,Pn=this[V(this,"requestAnimationFrame")]||function(he){setTimeout(he,17)};l.timer=function(){En.apply(this,arguments)};function En(he,Te,Le){var Ue=arguments.length;Ue<2&&(Te=0),Ue<3&&(Le=Date.now());var Be=Le+Te,Ke={c:he,t:Be,n:null};return Ur?Ur.n=Ke:Lr=Ke,Ur=Ke,xr||(on=clearTimeout(on),xr=1,Pn($n)),Ke}function $n(){var he=aa(),Te=Ca()-he;Te>24?(isFinite(Te)&&(clearTimeout(on),on=setTimeout($n,Te)),xr=0):(xr=1,Pn($n))}l.timer.flush=function(){aa(),Ca()};function aa(){for(var he=Date.now(),Te=Lr;Te;)he>=Te.t&&Te.c(he-Te.t)&&(Te.c=null),Te=Te.n;return he}function Ca(){for(var he,Te=Lr,Le=1/0;Te;)Te.c?(Te.t<Le&&(Le=Te.t),Te=(he=Te).n):Te=he?he.n=Te.n:Lr=Te.n;return Ur=he,Le}l.round=function(he,Te){return Te?Math.round(he*(Te=Math.pow(10,Te)))/Te:Math.round(he)},l.geom={};function ba(he){return he[0]}function vr(he){return he[1]}l.geom.hull=function(he){var Te=ba,Le=vr;if(arguments.length)return Ue(he);function Ue(Be){if(Be.length<3)return[];var Ke=at(Te),yt=at(Le),vt,Lt=Be.length,Vt=[],jt=[];for(vt=0;vt<Lt;vt++)Vt.push([+Ke.call(this,Be[vt],vt),+yt.call(this,Be[vt],vt),vt]);for(Vt.sort(en),vt=0;vt<Lt;vt++)jt.push([Vt[vt][0],-Vt[vt][1]]);var Zt=yn(Vt),Ar=yn(jt),tn=Ar[0]===Zt[0],pn=Ar[Ar.length-1]===Zt[Zt.length-1],Cr=[];for(vt=Zt.length-1;vt>=0;--vt)Cr.push(Be[Vt[Zt[vt]][2]]);for(vt=+tn;vt<Ar.length-pn;++vt)Cr.push(Be[Vt[Ar[vt]][2]]);return Cr}return Ue.x=function(Be){return arguments.length?(Te=Be,Ue):Te},Ue.y=function(Be){return arguments.length?(Le=Be,Ue):Le},Ue};function yn(he){for(var Te=he.length,Le=[0,1],Ue=2,Be=2;Be<Te;Be++){for(;Ue>1&&Bt(he[Le[Ue-2]],he[Le[Ue-1]],he[Be])<=0;)--Ue;Le[Ue++]=Be}return Le.slice(0,Ue)}function en(he,Te){return he[0]-Te[0]||he[1]-Te[1]}l.geom.polygon=function(he){return ue(he,In),he};var In=l.geom.polygon.prototype=[];In.area=function(){for(var he=-1,Te=this.length,Le,Ue=this[Te-1],Be=0;++he<Te;)Le=Ue,Ue=this[he],Be+=Le[1]*Ue[0]-Le[0]*Ue[1];return Be*.5},In.centroid=function(he){var Te=-1,Le=this.length,Ue=0,Be=0,Ke,yt=this[Le-1],vt;for(arguments.length||(he=-1/(6*this.area()));++Te<Le;)Ke=yt,yt=this[Te],vt=Ke[0]*yt[1]-yt[0]*Ke[1],Ue+=(Ke[0]+yt[0])*vt,Be+=(Ke[1]+yt[1])*vt;return[Ue*he,Be*he]},In.clip=function(he){for(var Te,Le=qn(he),Ue=-1,Be=this.length-qn(this),Ke,yt,vt=this[Be-1],Lt,Vt,jt;++Ue<Be;){for(Te=he.slice(),he.length=0,Lt=this[Ue],Vt=Te[(yt=Te.length-Le)-1],Ke=-1;++Ke<yt;)jt=Te[Ke],Bn(jt,vt,Lt)?(Bn(Vt,vt,Lt)||he.push(ha(Vt,jt,vt,Lt)),he.push(jt)):Bn(Vt,vt,Lt)&&he.push(ha(Vt,jt,vt,Lt)),Vt=jt;Le&&he.push(he[0]),vt=Lt}return he};function Bn(he,Te,Le){return(Le[0]-Te[0])*(he[1]-Te[1])<(Le[1]-Te[1])*(he[0]-Te[0])}function ha(he,Te,Le,Ue){var Be=he[0],Ke=Le[0],yt=Te[0]-Be,vt=Ue[0]-Ke,Lt=he[1],Vt=Le[1],jt=Te[1]-Lt,Zt=Ue[1]-Vt,Ar=(vt*(Lt-Vt)-Zt*(Be-Ke))/(Zt*yt-vt*jt);return[Be+Ar*yt,Lt+Ar*jt]}function qn(he){var Te=he[0],Le=he[he.length-1];return!(Te[0]-Le[0]||Te[1]-Le[1])}var Hn,la,da,hr=[],zr,ln,Rt=[];function qt(){no(this),this.edge=this.site=this.circle=null}function br(he){var Te=hr.pop()||new qt;return Te.site=he,Te}function Hr(he){mn(he),da.remove(he),hr.push(he),no(he)}function ar(he){var Te=he.circle,Le=Te.x,Ue=Te.cy,Be={x:Le,y:Ue},Ke=he.P,yt=he.N,vt=[he];Hr(he);for(var Lt=Ke;Lt.circle&&x(Le-Lt.circle.x)<ht&&x(Ue-Lt.circle.cy)<ht;)Ke=Lt.P,vt.unshift(Lt),Hr(Lt),Lt=Ke;vt.unshift(Lt),mn(Lt);for(var Vt=yt;Vt.circle&&x(Le-Vt.circle.x)<ht&&x(Ue-Vt.circle.cy)<ht;)yt=Vt.N,vt.push(Vt),Hr(Vt),Vt=yt;vt.push(Vt),mn(Vt);var jt=vt.length,Zt;for(Zt=1;Zt<jt;++Zt)Vt=vt[Zt],Lt=vt[Zt-1],Ko(Vt.edge,Lt.site,Vt.site,Be);Lt=vt[0],Vt=vt[jt-1],Vt.edge=Pa(Lt.site,Vt.site,null,Be),Un(Lt),Un(Vt)}function Qt(he){for(var Te=he.x,Le=he.y,Ue,Be,Ke,yt,vt=da._;vt;)if(Ke=Pr(vt,Le)-Te,Ke>ht)vt=vt.L;else if(yt=Te-Nr(vt,Le),yt>ht){if(!vt.R){Ue=vt;break}vt=vt.R}else{Ke>-ht?(Ue=vt.P,Be=vt):yt>-ht?(Ue=vt,Be=vt.N):Ue=Be=vt;break}var Lt=br(he);if(da.insert(Ue,Lt),!(!Ue&&!Be)){if(Ue===Be){mn(Ue),Be=br(Ue.site),da.insert(Lt,Be),Lt.edge=Be.edge=Pa(Ue.site,Lt.site),Un(Ue),Un(Be);return}if(!Be){Lt.edge=Pa(Ue.site,Lt.site);return}mn(Ue),mn(Be);var Vt=Ue.site,jt=Vt.x,Zt=Vt.y,Ar=he.x-jt,tn=he.y-Zt,pn=Be.site,Cr=pn.x-jt,Yr=pn.y-Zt,Jr=2*(Ar*Yr-tn*Cr),fn=Ar*Ar+tn*tn,vn=Cr*Cr+Yr*Yr,Qr={x:(Yr*fn-tn*vn)/Jr+jt,y:(Ar*vn-Cr*fn)/Jr+Zt};Ko(Be.edge,Vt,pn,Qr),Lt.edge=Pa(Vt,he,null,Qr),Be.edge=Pa(he,pn,null,Qr),Un(Ue),Un(Be)}}function Pr(he,Te){var Le=he.site,Ue=Le.x,Be=Le.y,Ke=Be-Te;if(!Ke)return Ue;var yt=he.P;if(!yt)return-1/0;Le=yt.site;var vt=Le.x,Lt=Le.y,Vt=Lt-Te;if(!Vt)return vt;var jt=vt-Ue,Zt=1/Ke-1/Vt,Ar=jt/Vt;return Zt?(-Ar+Math.sqrt(Ar*Ar-2*Zt*(jt*jt/(-2*Vt)-Lt+Vt/2+Be-Ke/2)))/Zt+Ue:(Ue+vt)/2}function Nr(he,Te){var Le=he.N;if(Le)return Pr(Le,Te);var Ue=he.site;return Ue.y===Te?Ue.x:1/0}function Tn(he){this.site=he,this.edges=[]}Tn.prototype.prepare=function(){for(var he=this.edges,Te=he.length,Le;Te--;)Le=he[Te].edge,(!Le.b||!Le.a)&&he.splice(Te,1);return he.sort(Gn),he.length};function Nn(he){for(var Te=he[0][0],Le=he[1][0],Ue=he[0][1],Be=he[1][1],Ke,yt,vt,Lt,Vt=la,jt=Vt.length,Zt,Ar,tn,pn,Cr,Yr;jt--;)if(Zt=Vt[jt],!(!Zt||!Zt.prepare()))for(tn=Zt.edges,pn=tn.length,Ar=0;Ar<pn;)Yr=tn[Ar].end(),vt=Yr.x,Lt=Yr.y,Cr=tn[++Ar%pn].start(),Ke=Cr.x,yt=Cr.y,(x(vt-Ke)>ht||x(Lt-yt)>ht)&&(tn.splice(Ar,0,new cs(_l(Zt.site,Yr,x(vt-Te)<ht&&Be-Lt>ht?{x:Te,y:x(Ke-Te)<ht?yt:Be}:x(Lt-Be)<ht&&Le-vt>ht?{x:x(yt-Be)<ht?Ke:Le,y:Be}:x(vt-Le)<ht&&Lt-Ue>ht?{x:Le,y:x(Ke-Le)<ht?yt:Ue}:x(Lt-Ue)<ht&&vt-Te>ht?{x:x(yt-Ue)<ht?Ke:Te,y:Ue}:null),Zt.site,null)),++pn)}function Gn(he,Te){return Te.angle-he.angle}function Wn(){no(this),this.x=this.y=this.arc=this.site=this.cy=null}function Un(he){var Te=he.P,Le=he.N;if(!(!Te||!Le)){var Ue=Te.site,Be=he.site,Ke=Le.site;if(Ue!==Ke){var yt=Be.x,vt=Be.y,Lt=Ue.x-yt,Vt=Ue.y-vt,jt=Ke.x-yt,Zt=Ke.y-vt,Ar=2*(Lt*Zt-Vt*jt);if(!(Ar>=-$e)){var tn=Lt*Lt+Vt*Vt,pn=jt*jt+Zt*Zt,Cr=(Zt*tn-Vt*pn)/Ar,Yr=(Lt*pn-jt*tn)/Ar,Zt=Yr+vt,Jr=Rt.pop()||new Wn;Jr.arc=he,Jr.site=Be,Jr.x=Cr+yt,Jr.y=Zt+Math.sqrt(Cr*Cr+Yr*Yr),Jr.cy=Zt,he.circle=Jr;for(var fn=null,vn=ln._;vn;)if(Jr.y<vn.y||Jr.y===vn.y&&Jr.x<=vn.x)if(vn.L)vn=vn.L;else{fn=vn.P;break}else if(vn.R)vn=vn.R;else{fn=vn;break}ln.insert(fn,Jr),fn||(zr=Jr)}}}}function mn(he){var Te=he.circle;Te&&(Te.P||(zr=Te.N),ln.remove(Te),Rt.push(Te),no(Te),he.circle=null)}function Fn(he,Te,Le,Ue){return function(Be){var Ke=Be.a,yt=Be.b,vt=Ke.x,Lt=Ke.y,Vt=yt.x,jt=yt.y,Zt=0,Ar=1,tn=Vt-vt,pn=jt-Lt,Cr;if(Cr=he-vt,!(!tn&&Cr>0)){if(Cr/=tn,tn<0){if(Cr<Zt)return;Cr<Ar&&(Ar=Cr)}else if(tn>0){if(Cr>Ar)return;Cr>Zt&&(Zt=Cr)}if(Cr=Le-vt,!(!tn&&Cr<0)){if(Cr/=tn,tn<0){if(Cr>Ar)return;Cr>Zt&&(Zt=Cr)}else if(tn>0){if(Cr<Zt)return;Cr<Ar&&(Ar=Cr)}if(Cr=Te-Lt,!(!pn&&Cr>0)){if(Cr/=pn,pn<0){if(Cr<Zt)return;Cr<Ar&&(Ar=Cr)}else if(pn>0){if(Cr>Ar)return;Cr>Zt&&(Zt=Cr)}if(Cr=Ue-Lt,!(!pn&&Cr<0)){if(Cr/=pn,pn<0){if(Cr>Ar)return;Cr>Zt&&(Zt=Cr)}else if(pn>0){if(Cr<Zt)return;Cr<Ar&&(Ar=Cr)}return Zt>0&&(Be.a={x:vt+Zt*tn,y:Lt+Zt*pn}),Ar<1&&(Be.b={x:vt+Ar*tn,y:Lt+Ar*pn}),Be}}}}}}function Xn(he){for(var Te=Hn,Le=Fn(he[0][0],he[0][1],he[1][0],he[1][1]),Ue=Te.length,Be;Ue--;)Be=Te[Ue],(!ca(Be,he)||!Le(Be)||x(Be.a.x-Be.b.x)<ht&&x(Be.a.y-Be.b.y)<ht)&&(Be.a=Be.b=null,Te.splice(Ue,1))}function ca(he,Te){var Le=he.b;if(Le)return!0;var Ue=he.a,Be=Te[0][0],Ke=Te[1][0],yt=Te[0][1],vt=Te[1][1],Lt=he.l,Vt=he.r,jt=Lt.x,Zt=Lt.y,Ar=Vt.x,tn=Vt.y,pn=(jt+Ar)/2,Cr=(Zt+tn)/2,Yr,Jr;if(tn===Zt){if(pn<Be||pn>=Ke)return;if(jt>Ar){if(!Ue)Ue={x:pn,y:yt};else if(Ue.y>=vt)return;Le={x:pn,y:vt}}else{if(!Ue)Ue={x:pn,y:vt};else if(Ue.y<yt)return;Le={x:pn,y:yt}}}else if(Yr=(jt-Ar)/(tn-Zt),Jr=Cr-Yr*pn,Yr<-1||Yr>1)if(jt>Ar){if(!Ue)Ue={x:(yt-Jr)/Yr,y:yt};else if(Ue.y>=vt)return;Le={x:(vt-Jr)/Yr,y:vt}}else{if(!Ue)Ue={x:(vt-Jr)/Yr,y:vt};else if(Ue.y<yt)return;Le={x:(yt-Jr)/Yr,y:yt}}else if(Zt<tn){if(!Ue)Ue={x:Be,y:Yr*Be+Jr};else if(Ue.x>=Ke)return;Le={x:Ke,y:Yr*Ke+Jr}}else{if(!Ue)Ue={x:Ke,y:Yr*Ke+Jr};else if(Ue.x<Be)return;Le={x:Be,y:Yr*Be+Jr}}return he.a=Ue,he.b=Le,!0}function ja(he,Te){this.l=he,this.r=Te,this.a=this.b=null}function Pa(he,Te,Le,Ue){var Be=new ja(he,Te);return Hn.push(Be),Le&&Ko(Be,he,Te,Le),Ue&&Ko(Be,Te,he,Ue),la[he.i].edges.push(new cs(Be,he,Te)),la[Te.i].edges.push(new cs(Be,Te,he)),Be}function _l(he,Te,Le){var Ue=new ja(he,null);return Ue.a=Te,Ue.b=Le,Hn.push(Ue),Ue}function Ko(he,Te,Le,Ue){!he.a&&!he.b?(he.a=Ue,he.l=Te,he.r=Le):he.l===Le?he.b=Ue:he.a=Ue}function cs(he,Te,Le){var Ue=he.a,Be=he.b;this.edge=he,this.site=Te,this.angle=Le?Math.atan2(Le.y-Te.y,Le.x-Te.x):he.l===Te?Math.atan2(Be.x-Ue.x,Ue.y-Be.y):Math.atan2(Ue.x-Be.x,Be.y-Ue.y)}cs.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function Gs(){this._=null}function no(he){he.U=he.C=he.L=he.R=he.P=he.N=null}Gs.prototype={insert:function(he,Te){var Le,Ue,Be;if(he){if(Te.P=he,Te.N=he.N,he.N&&(he.N.P=Te),he.N=Te,he.R){for(he=he.R;he.L;)he=he.L;he.L=Te}else he.R=Te;Le=he}else this._?(he=sl(this._),Te.P=null,Te.N=he,he.P=he.L=Te,Le=he):(Te.P=Te.N=null,this._=Te,Le=null);for(Te.L=Te.R=null,Te.U=Le,Te.C=!0,he=Te;Le&&Le.C;)Ue=Le.U,Le===Ue.L?(Be=Ue.R,Be&&Be.C?(Le.C=Be.C=!1,Ue.C=!0,he=Ue):(he===Le.R&&(Fi(this,Le),he=Le,Le=he.U),Le.C=!1,Ue.C=!0,ol(this,Ue))):(Be=Ue.L,Be&&Be.C?(Le.C=Be.C=!1,Ue.C=!0,he=Ue):(he===Le.L&&(ol(this,Le),he=Le,Le=he.U),Le.C=!1,Ue.C=!0,Fi(this,Ue))),Le=he.U;this._.C=!1},remove:function(he){he.N&&(he.N.P=he.P),he.P&&(he.P.N=he.N),he.N=he.P=null;var Te=he.U,Le,Ue=he.L,Be=he.R,Ke,yt;if(Ue?Be?Ke=sl(Be):Ke=Ue:Ke=Be,Te?Te.L===he?Te.L=Ke:Te.R=Ke:this._=Ke,Ue&&Be?(yt=Ke.C,Ke.C=he.C,Ke.L=Ue,Ue.U=Ke,Ke!==Be?(Te=Ke.U,Ke.U=he.U,he=Ke.R,Te.L=he,Ke.R=Be,Be.U=Ke):(Ke.U=Te,Te=Ke,he=Ke.R)):(yt=he.C,he=Ke),he&&(he.U=Te),!yt){if(he&&he.C){he.C=!1;return}do{if(he===this._)break;if(he===Te.L){if(Le=Te.R,Le.C&&(Le.C=!1,Te.C=!0,Fi(this,Te),Le=Te.R),Le.L&&Le.L.C||Le.R&&Le.R.C){(!Le.R||!Le.R.C)&&(Le.L.C=!1,Le.C=!0,ol(this,Le),Le=Te.R),Le.C=Te.C,Te.C=Le.R.C=!1,Fi(this,Te),he=this._;break}}else if(Le=Te.L,Le.C&&(Le.C=!1,Te.C=!0,ol(this,Te),Le=Te.L),Le.L&&Le.L.C||Le.R&&Le.R.C){(!Le.L||!Le.L.C)&&(Le.R.C=!1,Le.C=!0,Fi(this,Le),Le=Te.L),Le.C=Te.C,Te.C=Le.L.C=!1,ol(this,Te),he=this._;break}Le.C=!0,he=Te,Te=Te.U}while(!he.C);he&&(he.C=!1)}}};function Fi(he,Te){var Le=Te,Ue=Te.R,Be=Le.U;Be?Be.L===Le?Be.L=Ue:Be.R=Ue:he._=Ue,Ue.U=Be,Le.U=Ue,Le.R=Ue.L,Le.R&&(Le.R.U=Le),Ue.L=Le}function ol(he,Te){var Le=Te,Ue=Te.L,Be=Le.U;Be?Be.L===Le?Be.L=Ue:Be.R=Ue:he._=Ue,Ue.U=Be,Le.U=Ue,Le.L=Ue.R,Le.L&&(Le.L.U=Le),Ue.R=Le}function sl(he){for(;he.L;)he=he.L;return he}function hs(he,Te){var Le=he.sort(Bl).pop(),Ue,Be,Ke;for(Hn=[],la=new Array(he.length),da=new Gs,ln=new Gs;;)if(Ke=zr,Le&&(!Ke||Le.y<Ke.y||Le.y===Ke.y&&Le.x<Ke.x))(Le.x!==Ue||Le.y!==Be)&&(la[Le.i]=new Tn(Le),Qt(Le),Ue=Le.x,Be=Le.y),Le=he.pop();else if(Ke)ar(Ke.arc);else break;Te&&(Xn(Te),Nn(Te));var yt={cells:la,edges:Hn};return da=ln=Hn=la=null,yt}function Bl(he,Te){return Te.y-he.y||Te.x-he.x}l.geom.voronoi=function(he){var Te=ba,Le=vr,Ue=Te,Be=Le,Ke=Ql;if(he)return yt(he);function yt(Lt){var Vt=new Array(Lt.length),jt=Ke[0][0],Zt=Ke[0][1],Ar=Ke[1][0],tn=Ke[1][1];return hs(vt(Lt),Ke).cells.forEach(function(pn,Cr){var Yr=pn.edges,Jr=pn.site,fn=Vt[Cr]=Yr.length?Yr.map(function(vn){var Qr=vn.start();return[Qr.x,Qr.y]}):Jr.x>=jt&&Jr.x<=Ar&&Jr.y>=Zt&&Jr.y<=tn?[[jt,tn],[Ar,tn],[Ar,Zt],[jt,Zt]]:[];fn.point=Lt[Cr]}),Vt}function vt(Lt){return Lt.map(function(Vt,jt){return{x:Math.round(Ue(Vt,jt)/ht)*ht,y:Math.round(Be(Vt,jt)/ht)*ht,i:jt}})}return yt.links=function(Lt){return hs(vt(Lt)).edges.filter(function(Vt){return Vt.l&&Vt.r}).map(function(Vt){return{source:Lt[Vt.l.i],target:Lt[Vt.r.i]}})},yt.triangles=function(Lt){var Vt=[];return hs(vt(Lt)).cells.forEach(function(jt,Zt){for(var Ar=jt.site,tn=jt.edges.sort(Gn),pn=-1,Cr=tn.length,Yr,Jr=tn[Cr-1].edge,fn=Jr.l===Ar?Jr.r:Jr.l;++pn<Cr;)Yr=fn,Jr=tn[pn].edge,fn=Jr.l===Ar?Jr.r:Jr.l,Zt<Yr.i&&Zt<fn.i&&Ou(Ar,Yr,fn)<0&&Vt.push([Lt[Zt],Lt[Yr.i],Lt[fn.i]])}),Vt},yt.x=function(Lt){return arguments.length?(Ue=at(Te=Lt),yt):Te},yt.y=function(Lt){return arguments.length?(Be=at(Le=Lt),yt):Le},yt.clipExtent=function(Lt){return arguments.length?(Ke=Lt??Ql,yt):Ke===Ql?null:Ke},yt.size=function(Lt){return arguments.length?yt.clipExtent(Lt&&[[0,0],Lt]):Ke===Ql?null:Ke&&Ke[1]},yt};var Ql=[[-1e6,-1e6],[1e6,1e6]];function Ou(he,Te,Le){return(he.x-Le.x)*(Te.y-he.y)-(he.x-Te.x)*(Le.y-he.y)}l.geom.delaunay=function(he){return l.geom.voronoi().triangles(he)},l.geom.quadtree=function(he,Te,Le,Ue,Be){var Ke=ba,yt=vr,vt;if(vt=arguments.length)return Ke=di,yt=wl,vt===3&&(Be=Le,Ue=Te,Le=Te=0),Lt(he);function Lt(Vt){var jt,Zt=at(Ke),Ar=at(yt),tn,pn,Cr,Yr,Jr,fn,vn,Qr;if(Te!=null)Jr=Te,fn=Le,vn=Ue,Qr=Be;else if(vn=Qr=-(Jr=fn=1/0),tn=[],pn=[],Yr=Vt.length,vt)for(Cr=0;Cr<Yr;++Cr)jt=Vt[Cr],jt.x<Jr&&(Jr=jt.x),jt.y<fn&&(fn=jt.y),jt.x>vn&&(vn=jt.x),jt.y>Qr&&(Qr=jt.y),tn.push(jt.x),pn.push(jt.y);else for(Cr=0;Cr<Yr;++Cr){var jn=+Zt(jt=Vt[Cr],Cr),ia=+Ar(jt,Cr);jn<Jr&&(Jr=jn),ia<fn&&(fn=ia),jn>vn&&(vn=jn),ia>Qr&&(Qr=ia),tn.push(jn),pn.push(ia)}var Ma=vn-Jr,ua=Qr-fn;Ma>ua?Qr=fn+Ma:vn=Jr+ua;function Ra(za,ei,xi,xo,Bi,ga,oi,Ka){if(!(isNaN(xi)||isNaN(xo)))if(za.leaf){var Ci=za.x,ui=za.y;if(Ci!=null)if(x(Ci-xi)+x(ui-xo)<.01)va(za,ei,xi,xo,Bi,ga,oi,Ka);else{var vo=za.point;za.x=za.y=za.point=null,va(za,vo,Ci,ui,Bi,ga,oi,Ka),va(za,ei,xi,xo,Bi,ga,oi,Ka)}else za.x=xi,za.y=xo,za.point=ei}else va(za,ei,xi,xo,Bi,ga,oi,Ka)}function va(za,ei,xi,xo,Bi,ga,oi,Ka){var Ci=(Bi+oi)*.5,ui=(ga+Ka)*.5,vo=xi>=Ci,to=xo>=ui,Co=to<<1|vo;za.leaf=!1,za=za.nodes[Co]||(za.nodes[Co]=ll()),vo?Bi=Ci:oi=Ci,to?ga=ui:Ka=ui,Ra(za,ei,xi,xo,Bi,ga,oi,Ka)}var Wa=ll();if(Wa.add=function(za){Ra(Wa,za,+Zt(za,++Cr),+Ar(za,Cr),Jr,fn,vn,Qr)},Wa.visit=function(za){Wi(za,Wa,Jr,fn,vn,Qr)},Wa.find=function(za){return Bo(Wa,za[0],za[1],Jr,fn,vn,Qr)},Cr=-1,Te==null){for(;++Cr<Yr;)Ra(Wa,Vt[Cr],tn[Cr],pn[Cr],Jr,fn,vn,Qr);--Cr}else Vt.forEach(Wa.add);return tn=pn=Vt=jt=null,Wa}return Lt.x=function(Vt){return arguments.length?(Ke=Vt,Lt):Ke},Lt.y=function(Vt){return arguments.length?(yt=Vt,Lt):yt},Lt.extent=function(Vt){return arguments.length?(Vt==null?Te=Le=Ue=Be=null:(Te=+Vt[0][0],Le=+Vt[0][1],Ue=+Vt[1][0],Be=+Vt[1][1]),Lt):Te==null?null:[[Te,Le],[Ue,Be]]},Lt.size=function(Vt){return arguments.length?(Vt==null?Te=Le=Ue=Be=null:(Te=Le=0,Ue=+Vt[0],Be=+Vt[1]),Lt):Te==null?null:[Ue-Te,Be-Le]},Lt};function di(he){return he.x}function wl(he){return he.y}function ll(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Wi(he,Te,Le,Ue,Be,Ke){if(!he(Te,Le,Ue,Be,Ke)){var yt=(Le+Be)*.5,vt=(Ue+Ke)*.5,Lt=Te.nodes;Lt[0]&&Wi(he,Lt[0],Le,Ue,yt,vt),Lt[1]&&Wi(he,Lt[1],yt,Ue,Be,vt),Lt[2]&&Wi(he,Lt[2],Le,vt,yt,Ke),Lt[3]&&Wi(he,Lt[3],yt,vt,Be,Ke)}}function Bo(he,Te,Le,Ue,Be,Ke,yt){var vt=1/0,Lt;return function Vt(jt,Zt,Ar,tn,pn){if(!(Zt>Ke||Ar>yt||tn<Ue||pn<Be)){if(Cr=jt.point){var Cr,Yr=Te-jt.x,Jr=Le-jt.y,fn=Yr*Yr+Jr*Jr;if(fn<vt){var vn=Math.sqrt(vt=fn);Ue=Te-vn,Be=Le-vn,Ke=Te+vn,yt=Le+vn,Lt=Cr}}for(var Qr=jt.nodes,jn=(Zt+tn)*.5,ia=(Ar+pn)*.5,Ma=Te>=jn,ua=Le>=ia,Ra=ua<<1|Ma,va=Ra+4;Ra<va;++Ra)if(jt=Qr[Ra&3])switch(Ra&3){case 0:Vt(jt,Zt,Ar,jn,ia);break;case 1:Vt(jt,jn,Ar,tn,ia);break;case 2:Vt(jt,Zt,ia,jn,pn);break;case 3:Vt(jt,jn,ia,tn,pn);break}}}(he,Ue,Be,Ke,yt),Lt}l.interpolateRgb=ql;function ql(he,Te){he=l.rgb(he),Te=l.rgb(Te);var Le=he.r,Ue=he.g,Be=he.b,Ke=Te.r-Le,yt=Te.g-Ue,vt=Te.b-Be;return function(Lt){return"#"+yr(Math.round(Le+Ke*Lt))+yr(Math.round(Ue+yt*Lt))+yr(Math.round(Be+vt*Lt))}}l.interpolateObject=Rs;function Rs(he,Te){var Le={},Ue={},Be;for(Be in he)Be in Te?Le[Be]=co(he[Be],Te[Be]):Ue[Be]=he[Be];for(Be in Te)Be in he||(Ue[Be]=Te[Be]);return function(Ke){for(Be in Le)Ue[Be]=Le[Be](Ke);return Ue}}l.interpolateNumber=zi;function zi(he,Te){return he=+he,Te=+Te,function(Le){return he*(1-Le)+Te*Le}}l.interpolateString=Nl;function Nl(he,Te){var Le=qi.lastIndex=Ui.lastIndex=0,Ue,Be,Ke,yt=-1,vt=[],Lt=[];for(he=he+"",Te=Te+"";(Ue=qi.exec(he))&&(Be=Ui.exec(Te));)(Ke=Be.index)>Le&&(Ke=Te.slice(Le,Ke),vt[yt]?vt[yt]+=Ke:vt[++yt]=Ke),(Ue=Ue[0])===(Be=Be[0])?vt[yt]?vt[yt]+=Be:vt[++yt]=Be:(vt[++yt]=null,Lt.push({i:yt,x:zi(Ue,Be)})),Le=Ui.lastIndex;return Le<Te.length&&(Ke=Te.slice(Le),vt[yt]?vt[yt]+=Ke:vt[++yt]=Ke),vt.length<2?Lt[0]?(Te=Lt[0].x,function(Vt){return Te(Vt)+""}):function(){return Te}:(Te=Lt.length,function(Vt){for(var jt=0,Zt;jt<Te;++jt)vt[(Zt=Lt[jt]).i]=Zt.x(Vt);return vt.join("")})}var qi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ui=new RegExp(qi.source,"g");l.interpolate=co;function co(he,Te){for(var Le=l.interpolators.length,Ue;--Le>=0&&!(Ue=l.interpolators[Le](he,Te)););return Ue}l.interpolators=[function(he,Te){var Le=typeof Te;return(Le==="string"?$r.has(Te.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(Te)?ql:Nl:Te instanceof Fr?ql:Array.isArray(Te)?eo:Le==="object"&&isNaN(Te)?Rs:zi)(he,Te)}],l.interpolateArray=eo;function eo(he,Te){var Le=[],Ue=[],Be=he.length,Ke=Te.length,yt=Math.min(he.length,Te.length),vt;for(vt=0;vt<yt;++vt)Le.push(co(he[vt],Te[vt]));for(;vt<Be;++vt)Ue[vt]=he[vt];for(;vt<Ke;++vt)Ue[vt]=Te[vt];return function(Lt){for(vt=0;vt<yt;++vt)Ue[vt]=Le[vt](Lt);return Ue}}var xs=function(){return I},Tl=l.map({linear:xs,poly:Ws,quad:function(){return No},cubic:function(){return kf},sin:function(){return mu},exp:function(){return Cf},circle:function(){return Ef},elastic:Al,back:yu,bounce:function(){return Ys}}),qu=l.map({in:I,out:ef,"in-out":ul,"out-in":function(he){return ul(ef(he))}});l.ease=function(he){var Te=he.indexOf("-"),Le=Te>=0?he.slice(0,Te):he,Ue=Te>=0?he.slice(Te+1):"in";return Le=Tl.get(Le)||xs,Ue=qu.get(Ue)||I,vs(Ue(Le.apply(null,o.call(arguments,1))))};function vs(he){return function(Te){return Te<=0?0:Te>=1?1:he(Te)}}function ef(he){return function(Te){return 1-he(1-Te)}}function ul(he){return function(Te){return .5*(Te<.5?he(2*Te):2-he(2-2*Te))}}function No(he){return he*he}function kf(he){return he*he*he}function fl(he){if(he<=0)return 0;if(he>=1)return 1;var Te=he*he,Le=Te*he;return 4*(he<.5?Le:3*(he-Te)+Le-.75)}function Ws(he){return function(Te){return Math.pow(Te,he)}}function mu(he){return 1-Math.cos(he*ut)}function Cf(he){return Math.pow(2,10*(he-1))}function Ef(he){return 1-Math.sqrt(1-he*he)}function Al(he,Te){var Le;return arguments.length<2&&(Te=.45),arguments.length?Le=Te/Xe*Math.asin(1/he):(he=1,Le=Te/4),function(Ue){return 1+he*Math.pow(2,-10*Ue)*Math.sin((Ue-Le)*Xe/Te)}}function yu(he){return he||(he=1.70158),function(Te){return Te*Te*((he+1)*Te-he)}}function Ys(he){return he<1/2.75?7.5625*he*he:he<2/2.75?7.5625*(he-=1.5/2.75)*he+.75:he<2.5/2.75?7.5625*(he-=2.25/2.75)*he+.9375:7.5625*(he-=2.625/2.75)*he+.984375}l.interpolateHcl=Bu;function Bu(he,Te){he=l.hcl(he),Te=l.hcl(Te);var Le=he.h,Ue=he.c,Be=he.l,Ke=Te.h-Le,yt=Te.c-Ue,vt=Te.l-Be;return isNaN(yt)&&(yt=0,Ue=isNaN(Ue)?Te.c:Ue),isNaN(Ke)?(Ke=0,Le=isNaN(Le)?Te.h:Le):Ke>180?Ke-=360:Ke<-180&&(Ke+=360),function(Lt){return Me(Le+Ke*Lt,Ue+yt*Lt,Be+vt*Lt)+""}}l.interpolateHsl=Ul;function Ul(he,Te){he=l.hsl(he),Te=l.hsl(Te);var Le=he.h,Ue=he.s,Be=he.l,Ke=Te.h-Le,yt=Te.s-Ue,vt=Te.l-Be;return isNaN(yt)&&(yt=0,Ue=isNaN(Ue)?Te.s:Ue),isNaN(Ke)?(Ke=0,Le=isNaN(Le)?Te.h:Le):Ke>180?Ke-=360:Ke<-180&&(Ke+=360),function(Lt){return Vr(Le+Ke*Lt,Ue+yt*Lt,Be+vt*Lt)+""}}l.interpolateLab=Nu;function Nu(he,Te){he=l.lab(he),Te=l.lab(Te);var Le=he.l,Ue=he.a,Be=he.b,Ke=Te.l-Le,yt=Te.a-Ue,vt=Te.b-Be;return function(Lt){return wt(Le+Ke*Lt,Ue+yt*Lt,Be+vt*Lt)+""}}l.interpolateRound=tf;function tf(he,Te){return Te-=he,function(Le){return Math.round(he+Te*Le)}}l.transform=function(he){var Te=p.createElementNS(l.ns.prefix.svg,"g");return(l.transform=function(Le){if(Le!=null){Te.setAttribute("transform",Le);var Ue=Te.transform.baseVal.consolidate()}return new xu(Ue?Ue.matrix:bu)})(he)};function xu(he){var Te=[he.a,he.b],Le=[he.c,he.d],Ue=Sl(Te),Be=Lf(Te,Le),Ke=Sl(Uu(Le,Te,-Be))||0;Te[0]*Le[1]<Le[0]*Te[1]&&(Te[0]*=-1,Te[1]*=-1,Ue*=-1,Be*=-1),this.rotate=(Ue?Math.atan2(Te[1],Te[0]):Math.atan2(-Le[0],Le[1]))*kt,this.translate=[he.e,he.f],this.scale=[Ue,Ke],this.skew=Ke?Math.atan2(Be,Ke)*kt:0}xu.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Lf(he,Te){return he[0]*Te[0]+he[1]*Te[1]}function Sl(he){var Te=Math.sqrt(Lf(he,he));return Te&&(he[0]/=Te,he[1]/=Te),Te}function Uu(he,Te,Le){return he[0]+=Le*Te[0],he[1]+=Le*Te[1],he}var bu={a:1,b:0,c:0,d:1,e:0,f:0};l.interpolateTransform=_u;function Ds(he){return he.length?he.pop()+",":""}function eu(he,Te,Le,Ue){if(he[0]!==Te[0]||he[1]!==Te[1]){var Be=Le.push("translate(",null,",",null,")");Ue.push({i:Be-4,x:zi(he[0],Te[0])},{i:Be-2,x:zi(he[1],Te[1])})}else(Te[0]||Te[1])&&Le.push("translate("+Te+")")}function Vu(he,Te,Le,Ue){he!==Te?(he-Te>180?Te+=360:Te-he>180&&(he+=360),Ue.push({i:Le.push(Ds(Le)+"rotate(",null,")")-2,x:zi(he,Te)})):Te&&Le.push(Ds(Le)+"rotate("+Te+")")}function rf(he,Te,Le,Ue){he!==Te?Ue.push({i:Le.push(Ds(Le)+"skewX(",null,")")-2,x:zi(he,Te)}):Te&&Le.push(Ds(Le)+"skewX("+Te+")")}function nf(he,Te,Le,Ue){if(he[0]!==Te[0]||he[1]!==Te[1]){var Be=Le.push(Ds(Le)+"scale(",null,",",null,")");Ue.push({i:Be-4,x:zi(he[0],Te[0])},{i:Be-2,x:zi(he[1],Te[1])})}else(Te[0]!==1||Te[1]!==1)&&Le.push(Ds(Le)+"scale("+Te+")")}function _u(he,Te){var Le=[],Ue=[];return he=l.transform(he),Te=l.transform(Te),eu(he.translate,Te.translate,Le,Ue),Vu(he.rotate,Te.rotate,Le,Ue),rf(he.skew,Te.skew,Le,Ue),nf(he.scale,Te.scale,Le,Ue),he=Te=null,function(Be){for(var Ke=-1,yt=Ue.length,vt;++Ke<yt;)Le[(vt=Ue[Ke]).i]=vt.x(Be);return Le.join("")}}function Pf(he,Te){return Te=(Te-=he=+he)||1/Te,function(Le){return(Le-he)/Te}}function af(he,Te){return Te=(Te-=he=+he)||1/Te,function(Le){return Math.max(0,Math.min(1,(Le-he)/Te))}}l.layout={},l.layout.bundle=function(){return function(he){for(var Te=[],Le=-1,Ue=he.length;++Le<Ue;)Te.push(ps(he[Le]));return Te}};function ps(he){for(var Te=he.source,Le=he.target,Ue=Hl(Te,Le),Be=[Te];Te!==Ue;)Te=Te.parent,Be.push(Te);for(var Ke=Be.length;Le!==Ue;)Be.splice(Ke,0,Le),Le=Le.parent;return Be}function Vl(he){for(var Te=[],Le=he.parent;Le!=null;)Te.push(he),he=Le,Le=Le.parent;return Te.push(he),Te}function Hl(he,Te){if(he===Te)return he;for(var Le=Vl(he),Ue=Vl(Te),Be=Le.pop(),Ke=Ue.pop(),yt=null;Be===Ke;)yt=Be,Be=Le.pop(),Ke=Ue.pop();return yt}l.layout.chord=function(){var he={},Te,Le,Ue,Be,Ke=0,yt,vt,Lt;function Vt(){var Zt={},Ar=[],tn=l.range(Be),pn=[],Cr,Yr,Jr,fn,vn;for(Te=[],Le=[],Cr=0,fn=-1;++fn<Be;){for(Yr=0,vn=-1;++vn<Be;)Yr+=Ue[fn][vn];Ar.push(Yr),pn.push(l.range(Be)),Cr+=Yr}for(yt&&tn.sort(function(Wa,za){return yt(Ar[Wa],Ar[za])}),vt&&pn.forEach(function(Wa,za){Wa.sort(function(ei,xi){return vt(Ue[za][ei],Ue[za][xi])})}),Cr=(Xe-Ke*Be)/Cr,Yr=0,fn=-1;++fn<Be;){for(Jr=Yr,vn=-1;++vn<Be;){var Qr=tn[fn],jn=pn[Qr][vn],ia=Ue[Qr][jn],Ma=Yr,ua=Yr+=ia*Cr;Zt[Qr+"-"+jn]={index:Qr,subindex:jn,startAngle:Ma,endAngle:ua,value:ia}}Le[Qr]={index:Qr,startAngle:Jr,endAngle:Yr,value:Ar[Qr]},Yr+=Ke}for(fn=-1;++fn<Be;)for(vn=fn-1;++vn<Be;){var Ra=Zt[fn+"-"+vn],va=Zt[vn+"-"+fn];(Ra.value||va.value)&&Te.push(Ra.value<va.value?{source:va,target:Ra}:{source:Ra,target:va})}Lt&&jt()}function jt(){Te.sort(function(Zt,Ar){return Lt((Zt.source.value+Zt.target.value)/2,(Ar.source.value+Ar.target.value)/2)})}return he.matrix=function(Zt){return arguments.length?(Be=(Ue=Zt)&&Ue.length,Te=Le=null,he):Ue},he.padding=function(Zt){return arguments.length?(Ke=Zt,Te=Le=null,he):Ke},he.sortGroups=function(Zt){return arguments.length?(yt=Zt,Te=Le=null,he):yt},he.sortSubgroups=function(Zt){return arguments.length?(vt=Zt,Te=null,he):vt},he.sortChords=function(Zt){return arguments.length?(Lt=Zt,Te&&jt(),he):Lt},he.chords=function(){return Te||Vt(),Te},he.groups=function(){return Le||Vt(),Le},he},l.layout.force=function(){var he={},Te=l.dispatch("start","tick","end"),Le,Ue=[1,1],Be,Ke,yt=.9,vt=Xs,Lt=po,Vt=-30,jt=tu,Zt=.1,Ar=.64,tn=[],pn=[],Cr,Yr,Jr;function fn(Qr){return function(jn,ia,Ma,ua){if(jn.point!==Qr){var Ra=jn.cx-Qr.x,va=jn.cy-Qr.y,Wa=ua-ia,za=Ra*Ra+va*va;if(Wa*Wa/Ar<za){if(za<jt){var ei=jn.charge/za;Qr.px-=Ra*ei,Qr.py-=va*ei}return!0}if(jn.point&&za&&za<jt){var ei=jn.pointCharge/za;Qr.px-=Ra*ei,Qr.py-=va*ei}}return!jn.charge}}he.tick=function(){if((Ke*=.99)<.005)return Le=null,Te.end({type:"end",alpha:Ke=0}),!0;var Qr=tn.length,jn=pn.length,ia,Ma,ua,Ra,va,Wa,za,ei,xi;for(Ma=0;Ma<jn;++Ma)ua=pn[Ma],Ra=ua.source,va=ua.target,ei=va.x-Ra.x,xi=va.y-Ra.y,(Wa=ei*ei+xi*xi)&&(Wa=Ke*Yr[Ma]*((Wa=Math.sqrt(Wa))-Cr[Ma])/Wa,ei*=Wa,xi*=Wa,va.x-=ei*(za=Ra.weight+va.weight?Ra.weight/(Ra.weight+va.weight):.5),va.y-=xi*za,Ra.x+=ei*(za=1-za),Ra.y+=xi*za);if((za=Ke*Zt)&&(ei=Ue[0]/2,xi=Ue[1]/2,Ma=-1,za))for(;++Ma<Qr;)ua=tn[Ma],ua.x+=(ei-ua.x)*za,ua.y+=(xi-ua.y)*za;if(Vt)for(js(ia=l.geom.quadtree(tn),Ke,Jr),Ma=-1;++Ma<Qr;)(ua=tn[Ma]).fixed||ia.visit(fn(ua));for(Ma=-1;++Ma<Qr;)ua=tn[Ma],ua.fixed?(ua.x=ua.px,ua.y=ua.py):(ua.x-=(ua.px-(ua.px=ua.x))*yt,ua.y-=(ua.py-(ua.py=ua.y))*yt);Te.tick({type:"tick",alpha:Ke})},he.nodes=function(Qr){return arguments.length?(tn=Qr,he):tn},he.links=function(Qr){return arguments.length?(pn=Qr,he):pn},he.size=function(Qr){return arguments.length?(Ue=Qr,he):Ue},he.linkDistance=function(Qr){return arguments.length?(vt=typeof Qr=="function"?Qr:+Qr,he):vt},he.distance=he.linkDistance,he.linkStrength=function(Qr){return arguments.length?(Lt=typeof Qr=="function"?Qr:+Qr,he):Lt},he.friction=function(Qr){return arguments.length?(yt=+Qr,he):yt},he.charge=function(Qr){return arguments.length?(Vt=typeof Qr=="function"?Qr:+Qr,he):Vt},he.chargeDistance=function(Qr){return arguments.length?(jt=Qr*Qr,he):Math.sqrt(jt)},he.gravity=function(Qr){return arguments.length?(Zt=+Qr,he):Zt},he.theta=function(Qr){return arguments.length?(Ar=Qr*Qr,he):Math.sqrt(Ar)},he.alpha=function(Qr){return arguments.length?(Qr=+Qr,Ke?Qr>0?Ke=Qr:(Le.c=null,Le.t=NaN,Le=null,Te.end({type:"end",alpha:Ke=0})):Qr>0&&(Te.start({type:"start",alpha:Ke=Qr}),Le=En(he.tick)),he):Ke},he.start=function(){var Qr,jn=tn.length,ia=pn.length,Ma=Ue[0],ua=Ue[1],Ra,va;for(Qr=0;Qr<jn;++Qr)(va=tn[Qr]).index=Qr,va.weight=0;for(Qr=0;Qr<ia;++Qr)va=pn[Qr],typeof va.source=="number"&&(va.source=tn[va.source]),typeof va.target=="number"&&(va.target=tn[va.target]),++va.source.weight,++va.target.weight;for(Qr=0;Qr<jn;++Qr)va=tn[Qr],isNaN(va.x)&&(va.x=Wa("x",Ma)),isNaN(va.y)&&(va.y=Wa("y",ua)),isNaN(va.px)&&(va.px=va.x),isNaN(va.py)&&(va.py=va.y);if(Cr=[],typeof vt=="function")for(Qr=0;Qr<ia;++Qr)Cr[Qr]=+vt.call(this,pn[Qr],Qr);else for(Qr=0;Qr<ia;++Qr)Cr[Qr]=vt;if(Yr=[],typeof Lt=="function")for(Qr=0;Qr<ia;++Qr)Yr[Qr]=+Lt.call(this,pn[Qr],Qr);else for(Qr=0;Qr<ia;++Qr)Yr[Qr]=Lt;if(Jr=[],typeof Vt=="function")for(Qr=0;Qr<jn;++Qr)Jr[Qr]=+Vt.call(this,tn[Qr],Qr);else for(Qr=0;Qr<jn;++Qr)Jr[Qr]=Vt;function Wa(za,ei){if(!Ra){for(Ra=new Array(jn),Bi=0;Bi<jn;++Bi)Ra[Bi]=[];for(Bi=0;Bi<ia;++Bi){var xi=pn[Bi];Ra[xi.source.index].push(xi.target),Ra[xi.target.index].push(xi.source)}}for(var xo=Ra[Qr],Bi=-1,ga=xo.length,oi;++Bi<ga;)if(!isNaN(oi=xo[Bi][za]))return oi;return Math.random()*ei}return he.resume()},he.resume=function(){return he.alpha(.1)},he.stop=function(){return he.alpha(0)},he.drag=function(){if(Be||(Be=l.behavior.drag().origin(I).on("dragstart.force",Hu).on("drag.force",vn).on("dragend.force",Is)),!arguments.length)return Be;this.on("mouseover.force",Uo).on("mouseout.force",wu).call(Be)};function vn(Qr){Qr.px=l.event.x,Qr.py=l.event.y,he.resume()}return l.rebind(he,Te,"on")};function Hu(he){he.fixed|=2}function Is(he){he.fixed&=~6}function Uo(he){he.fixed|=4,he.px=he.x,he.py=he.y}function wu(he){he.fixed&=~4}function js(he,Te,Le){var Ue=0,Be=0;if(he.charge=0,!he.leaf)for(var Ke=he.nodes,yt=Ke.length,vt=-1,Lt;++vt<yt;)Lt=Ke[vt],Lt!=null&&(js(Lt,Te,Le),he.charge+=Lt.charge,Ue+=Lt.charge*Lt.cx,Be+=Lt.charge*Lt.cy);if(he.point){he.leaf||(he.point.x+=Math.random()-.5,he.point.y+=Math.random()-.5);var Vt=Te*Le[he.point.index];he.charge+=he.pointCharge=Vt,Ue+=Vt*he.point.x,Be+=Vt*he.point.y}he.cx=Ue/he.charge,he.cy=Be/he.charge}var Xs=20,po=1,tu=1/0;l.layout.hierarchy=function(){var he=Tu,Te=nu,Le=Gl;function Ue(Be){var Ke=[Be],yt=[],vt;for(Be.depth=0;(vt=Ke.pop())!=null;)if(yt.push(vt),(Vt=Te.call(Ue,vt,vt.depth))&&(Lt=Vt.length)){for(var Lt,Vt,jt;--Lt>=0;)Ke.push(jt=Vt[Lt]),jt.parent=vt,jt.depth=vt.depth+1;Le&&(vt.value=0),vt.children=Vt}else Le&&(vt.value=+Le.call(Ue,vt,vt.depth)||0),delete vt.children;return Fs(Be,function(Zt){var Ar,tn;he&&(Ar=Zt.children)&&Ar.sort(he),Le&&(tn=Zt.parent)&&(tn.value+=Zt.value)}),yt}return Ue.sort=function(Be){return arguments.length?(he=Be,Ue):he},Ue.children=function(Be){return arguments.length?(Te=Be,Ue):Te},Ue.value=function(Be){return arguments.length?(Le=Be,Ue):Le},Ue.revalue=function(Be){return Le&&(Ml(Be,function(Ke){Ke.children&&(Ke.value=0)}),Fs(Be,function(Ke){var yt;Ke.children||(Ke.value=+Le.call(Ue,Ke,Ke.depth)||0),(yt=Ke.parent)&&(yt.value+=Ke.value)})),Be},Ue};function ru(he,Te){return l.rebind(he,Te,"sort","children","value"),he.nodes=he,he.links=au,he}function Ml(he,Te){for(var Le=[he];(he=Le.pop())!=null;)if(Te(he),(Be=he.children)&&(Ue=Be.length))for(var Ue,Be;--Ue>=0;)Le.push(Be[Ue])}function Fs(he,Te){for(var Le=[he],Ue=[];(he=Le.pop())!=null;)if(Ue.push(he),(yt=he.children)&&(Ke=yt.length))for(var Be=-1,Ke,yt;++Be<Ke;)Le.push(yt[Be]);for(;(he=Ue.pop())!=null;)Te(he)}function nu(he){return he.children}function Gl(he){return he.value}function Tu(he,Te){return Te.value-he.value}function au(he){return l.merge(he.map(function(Te){return(Te.children||[]).map(function(Le){return{source:Te,target:Le}})}))}l.layout.partition=function(){var he=l.layout.hierarchy(),Te=[1,1];function Le(Ke,yt,vt,Lt){var Vt=Ke.children;if(Ke.x=yt,Ke.y=Ke.depth*Lt,Ke.dx=vt,Ke.dy=Lt,Vt&&(Zt=Vt.length)){var jt=-1,Zt,Ar,tn;for(vt=Ke.value?vt/Ke.value:0;++jt<Zt;)Le(Ar=Vt[jt],yt,tn=Ar.value*vt,Lt),yt+=tn}}function Ue(Ke){var yt=Ke.children,vt=0;if(yt&&(Vt=yt.length))for(var Lt=-1,Vt;++Lt<Vt;)vt=Math.max(vt,Ue(yt[Lt]));return 1+vt}function Be(Ke,yt){var vt=he.call(this,Ke,yt);return Le(vt[0],0,Te[0],Te[1]/Ue(vt[0])),vt}return Be.size=function(Ke){return arguments.length?(Te=Ke,Be):Te},ru(Be,he)},l.layout.pie=function(){var he=Number,Te=kl,Le=0,Ue=Xe,Be=0;function Ke(yt){var vt=yt.length,Lt=yt.map(function(fn,vn){return+he.call(Ke,fn,vn)}),Vt=+(typeof Le=="function"?Le.apply(this,arguments):Le),jt=(typeof Ue=="function"?Ue.apply(this,arguments):Ue)-Vt,Zt=Math.min(Math.abs(jt)/vt,+(typeof Be=="function"?Be.apply(this,arguments):Be)),Ar=Zt*(jt<0?-1:1),tn=l.sum(Lt),pn=tn?(jt-vt*Ar)/tn:0,Cr=l.range(vt),Yr=[],Jr;return Te!=null&&Cr.sort(Te===kl?function(fn,vn){return Lt[vn]-Lt[fn]}:function(fn,vn){return Te(yt[fn],yt[vn])}),Cr.forEach(function(fn){Yr[fn]={data:yt[fn],value:Jr=Lt[fn],startAngle:Vt,endAngle:Vt+=Jr*pn+Ar,padAngle:Zt}}),Yr}return Ke.value=function(yt){return arguments.length?(he=yt,Ke):he},Ke.sort=function(yt){return arguments.length?(Te=yt,Ke):Te},Ke.startAngle=function(yt){return arguments.length?(Le=yt,Ke):Le},Ke.endAngle=function(yt){return arguments.length?(Ue=yt,Ke):Ue},Ke.padAngle=function(yt){return arguments.length?(Be=yt,Ke):Be},Ke};var kl={};l.layout.stack=function(){var he=I,Te=iu,Le=Cl,Ue=ic,Be=Rf,Ke=bs;function yt(vt,Lt){if(!(pn=vt.length))return vt;var Vt=vt.map(function(fn,vn){return he.call(yt,fn,vn)}),jt=Vt.map(function(fn){return fn.map(function(vn,Qr){return[Be.call(yt,vn,Qr),Ke.call(yt,vn,Qr)]})}),Zt=Te.call(yt,jt,Lt);Vt=l.permute(Vt,Zt),jt=l.permute(jt,Zt);var Ar=Le.call(yt,jt,Lt),tn=Vt[0].length,pn,Cr,Yr,Jr;for(Yr=0;Yr<tn;++Yr)for(Ue.call(yt,Vt[0][Yr],Jr=Ar[Yr],jt[0][Yr][1]),Cr=1;Cr<pn;++Cr)Ue.call(yt,Vt[Cr][Yr],Jr+=jt[Cr-1][Yr][1],jt[Cr][Yr][1]);return vt}return yt.values=function(vt){return arguments.length?(he=vt,yt):he},yt.order=function(vt){return arguments.length?(Te=typeof vt=="function"?vt:Gu.get(vt)||iu,yt):Te},yt.offset=function(vt){return arguments.length?(Le=typeof vt=="function"?vt:Wl.get(vt)||Cl,yt):Le},yt.x=function(vt){return arguments.length?(Be=vt,yt):Be},yt.y=function(vt){return arguments.length?(Ke=vt,yt):Ke},yt.out=function(vt){return arguments.length?(Ue=vt,yt):Ue},yt};function Rf(he){return he.x}function bs(he){return he.y}function ic(he,Te,Le){he.y0=Te,he.y=Le}var Gu=l.map({"inside-out":function(he){var Te=he.length,Le,Ue,Be=he.map(ou),Ke=he.map(of),yt=l.range(Te).sort(function(Zt,Ar){return Be[Zt]-Be[Ar]}),vt=0,Lt=0,Vt=[],jt=[];for(Le=0;Le<Te;++Le)Ue=yt[Le],vt<Lt?(vt+=Ke[Ue],Vt.push(Ue)):(Lt+=Ke[Ue],jt.push(Ue));return jt.reverse().concat(Vt)},reverse:function(he){return l.range(he.length).reverse()},default:iu}),Wl=l.map({silhouette:function(he){var Te=he.length,Le=he[0].length,Ue=[],Be=0,Ke,yt,vt,Lt=[];for(yt=0;yt<Le;++yt){for(Ke=0,vt=0;Ke<Te;Ke++)vt+=he[Ke][yt][1];vt>Be&&(Be=vt),Ue.push(vt)}for(yt=0;yt<Le;++yt)Lt[yt]=(Be-Ue[yt])/2;return Lt},wiggle:function(he){var Te=he.length,Le=he[0],Ue=Le.length,Be,Ke,yt,vt,Lt,Vt,jt,Zt,Ar,tn=[];for(tn[0]=Zt=Ar=0,Ke=1;Ke<Ue;++Ke){for(Be=0,vt=0;Be<Te;++Be)vt+=he[Be][Ke][1];for(Be=0,Lt=0,jt=Le[Ke][0]-Le[Ke-1][0];Be<Te;++Be){for(yt=0,Vt=(he[Be][Ke][1]-he[Be][Ke-1][1])/(2*jt);yt<Be;++yt)Vt+=(he[yt][Ke][1]-he[yt][Ke-1][1])/jt;Lt+=Vt*he[Be][Ke][1]}tn[Ke]=Zt-=vt?Lt/vt*jt:0,Zt<Ar&&(Ar=Zt)}for(Ke=0;Ke<Ue;++Ke)tn[Ke]-=Ar;return tn},expand:function(he){var Te=he.length,Le=he[0].length,Ue=1/Te,Be,Ke,yt,vt=[];for(Ke=0;Ke<Le;++Ke){for(Be=0,yt=0;Be<Te;Be++)yt+=he[Be][Ke][1];if(yt)for(Be=0;Be<Te;Be++)he[Be][Ke][1]/=yt;else for(Be=0;Be<Te;Be++)he[Be][Ke][1]=Ue}for(Ke=0;Ke<Le;++Ke)vt[Ke]=0;return vt},zero:Cl});function iu(he){return l.range(he.length)}function Cl(he){for(var Te=-1,Le=he[0].length,Ue=[];++Te<Le;)Ue[Te]=0;return Ue}function ou(he){for(var Te=1,Le=0,Ue=he[0][1],Be,Ke=he.length;Te<Ke;++Te)(Be=he[Te][1])>Ue&&(Le=Te,Ue=Be);return Le}function of(he){return he.reduce(sf,0)}function sf(he,Te){return he+Te[1]}l.layout.histogram=function(){var he=!0,Te=Number,Le=Yl,Ue=oc;function Be(Ke,yt){for(var vt=[],Lt=Ke.map(Te,this),Vt=Le.call(this,Lt,yt),jt=Ue.call(this,Vt,Lt,yt),Zt,yt=-1,Ar=Lt.length,tn=jt.length-1,pn=he?1:1/Ar,Cr;++yt<tn;)Zt=vt[yt]=[],Zt.dx=jt[yt+1]-(Zt.x=jt[yt]),Zt.y=0;if(tn>0)for(yt=-1;++yt<Ar;)Cr=Lt[yt],Cr>=Vt[0]&&Cr<=Vt[1]&&(Zt=vt[l.bisect(jt,Cr,1,tn)-1],Zt.y+=pn,Zt.push(Ke[yt]));return vt}return Be.value=function(Ke){return arguments.length?(Te=Ke,Be):Te},Be.range=function(Ke){return arguments.length?(Le=at(Ke),Be):Le},Be.bins=function(Ke){return arguments.length?(Ue=typeof Ke=="number"?function(yt){return Oi(yt,Ke)}:at(Ke),Be):Ue},Be.frequency=function(Ke){return arguments.length?(he=!!Ke,Be):he},Be};function oc(he,Te){return Oi(he,Math.ceil(Math.log(Te.length)/Math.LN2+1))}function Oi(he,Te){for(var Le=-1,Ue=+he[0],Be=(he[1]-Ue)/Te,Ke=[];++Le<=Te;)Ke[Le]=Be*Le+Ue;return Ke}function Yl(he){return[l.min(he),l.max(he)]}l.layout.pack=function(){var he=l.layout.hierarchy().sort(El),Te=0,Le=[1,1],Ue;function Be(Ke,yt){var vt=he.call(this,Ke,yt),Lt=vt[0],Vt=Le[0],jt=Le[1],Zt=Ue==null?Math.sqrt:typeof Ue=="function"?Ue:function(){return Ue};if(Lt.x=Lt.y=0,Fs(Lt,function(tn){tn.r=+Zt(tn.value)}),Fs(Lt,go),Te){var Ar=Te*(Ue?1:Math.max(2*Lt.r/Vt,2*Lt.r/jt))/2;Fs(Lt,function(tn){tn.r+=Ar}),Fs(Lt,go),Fs(Lt,function(tn){tn.r-=Ar})}return cl(Lt,Vt/2,jt/2,Ue?1:1/Math.max(2*Lt.r/Vt,2*Lt.r/jt)),vt}return Be.size=function(Ke){return arguments.length?(Le=Ke,Be):Le},Be.radius=function(Ke){return arguments.length?(Ue=Ke==null||typeof Ke=="function"?Ke:+Ke,Be):Ue},Be.padding=function(Ke){return arguments.length?(Te=+Ke,Be):Te},ru(Be,he)};function El(he,Te){return he.value-Te.value}function ds(he,Te){var Le=he._pack_next;he._pack_next=Te,Te._pack_prev=he,Te._pack_next=Le,Le._pack_prev=Te}function _s(he,Te){he._pack_next=Te,Te._pack_prev=he}function su(he,Te){var Le=Te.x-he.x,Ue=Te.y-he.y,Be=he.r+Te.r;return .999*Be*Be>Le*Le+Ue*Ue}function go(he){if(!(Te=he.children)||!(Ar=Te.length))return;var Te,Le=1/0,Ue=-1/0,Be=1/0,Ke=-1/0,yt,vt,Lt,Vt,jt,Zt,Ar;function tn(Qr){Le=Math.min(Qr.x-Qr.r,Le),Ue=Math.max(Qr.x+Qr.r,Ue),Be=Math.min(Qr.y-Qr.r,Be),Ke=Math.max(Qr.y+Qr.r,Ke)}if(Te.forEach(lf),yt=Te[0],yt.x=-yt.r,yt.y=0,tn(yt),Ar>1&&(vt=Te[1],vt.x=vt.r,vt.y=0,tn(vt),Ar>2))for(Lt=Te[2],hl(yt,vt,Lt),tn(Lt),ds(yt,Lt),yt._pack_prev=Lt,ds(Lt,vt),vt=yt._pack_next,Vt=3;Vt<Ar;Vt++){hl(yt,vt,Lt=Te[Vt]);var pn=0,Cr=1,Yr=1;for(jt=vt._pack_next;jt!==vt;jt=jt._pack_next,Cr++)if(su(jt,Lt)){pn=1;break}if(pn==1)for(Zt=yt._pack_prev;Zt!==jt._pack_prev&&!su(Zt,Lt);Zt=Zt._pack_prev,Yr++);pn?(Cr<Yr||Cr==Yr&&vt.r<yt.r?_s(yt,vt=jt):_s(yt=Zt,vt),Vt--):(ds(yt,Lt),vt=Lt,tn(Lt))}var Jr=(Le+Ue)/2,fn=(Be+Ke)/2,vn=0;for(Vt=0;Vt<Ar;Vt++)Lt=Te[Vt],Lt.x-=Jr,Lt.y-=fn,vn=Math.max(vn,Lt.r+Math.sqrt(Lt.x*Lt.x+Lt.y*Lt.y));he.r=vn,Te.forEach(ws)}function lf(he){he._pack_next=he._pack_prev=he}function ws(he){delete he._pack_next,delete he._pack_prev}function cl(he,Te,Le,Ue){var Be=he.children;if(he.x=Te+=Ue*he.x,he.y=Le+=Ue*he.y,he.r*=Ue,Be)for(var Ke=-1,yt=Be.length;++Ke<yt;)cl(Be[Ke],Te,Le,Ue)}function hl(he,Te,Le){var Ue=he.r+Le.r,Be=Te.x-he.x,Ke=Te.y-he.y;if(Ue&&(Be||Ke)){var yt=Te.r+Le.r,vt=Be*Be+Ke*Ke;yt*=yt,Ue*=Ue;var Lt=.5+(Ue-yt)/(2*vt),Vt=Math.sqrt(Math.max(0,2*yt*(Ue+vt)-(Ue-=vt)*Ue-yt*yt))/(2*vt);Le.x=he.x+Lt*Be+Vt*Ke,Le.y=he.y+Lt*Ke-Vt*Be}else Le.x=he.x+Ue,Le.y=he.y}l.layout.tree=function(){var he=l.layout.hierarchy().sort(null).value(null),Te=Zs,Le=[1,1],Ue=null;function Be(jt,Zt){var Ar=he.call(this,jt,Zt),tn=Ar[0],pn=Ke(tn);if(Fs(pn,yt),pn.parent.m=-pn.z,Ml(pn,vt),Ue)Ml(tn,Vt);else{var Cr=tn,Yr=tn,Jr=tn;Ml(tn,function(jn){jn.x<Cr.x&&(Cr=jn),jn.x>Yr.x&&(Yr=jn),jn.depth>Jr.depth&&(Jr=jn)});var fn=Te(Cr,Yr)/2-Cr.x,vn=Le[0]/(Yr.x+Te(Yr,Cr)/2+fn),Qr=Le[1]/(Jr.depth||1);Ml(tn,function(jn){jn.x=(jn.x+fn)*vn,jn.y=jn.depth*Qr})}return Ar}function Ke(jt){for(var Zt={A:null,children:[jt]},Ar=[Zt],tn;(tn=Ar.pop())!=null;)for(var pn=tn.children,Cr,Yr=0,Jr=pn.length;Yr<Jr;++Yr)Ar.push((pn[Yr]=Cr={_:pn[Yr],parent:tn,children:(Cr=pn[Yr].children)&&Cr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Yr}).a=Cr);return Zt.children[0]}function yt(jt){var Zt=jt.children,Ar=jt.parent.children,tn=jt.i?Ar[jt.i-1]:null;if(Zt.length){As(jt);var pn=(Zt[0].z+Zt[Zt.length-1].z)/2;tn?(jt.z=tn.z+Te(jt._,tn._),jt.m=jt.z-pn):jt.z=pn}else tn&&(jt.z=tn.z+Te(jt._,tn._));jt.parent.A=Lt(jt,tn,jt.parent.A||Ar[0])}function vt(jt){jt._.x=jt.z+jt.parent.m,jt.m+=jt.parent.m}function Lt(jt,Zt,Ar){if(Zt){for(var tn=jt,pn=jt,Cr=Zt,Yr=tn.parent.children[0],Jr=tn.m,fn=pn.m,vn=Cr.m,Qr=Yr.m,jn;Cr=Yi(Cr),tn=Ts(tn),Cr&&tn;)Yr=Ts(Yr),pn=Yi(pn),pn.a=jt,jn=Cr.z+vn-tn.z-Jr+Te(Cr._,tn._),jn>0&&(Vo(uf(Cr,jt,Ar),jt,jn),Jr+=jn,fn+=jn),vn+=Cr.m,Jr+=tn.m,Qr+=Yr.m,fn+=pn.m;Cr&&!Yi(pn)&&(pn.t=Cr,pn.m+=vn-fn),tn&&!Ts(Yr)&&(Yr.t=tn,Yr.m+=Jr-Qr,Ar=jt)}return Ar}function Vt(jt){jt.x*=Le[0],jt.y=jt.depth*Le[1]}return Be.separation=function(jt){return arguments.length?(Te=jt,Be):Te},Be.size=function(jt){return arguments.length?(Ue=(Le=jt)==null?Vt:null,Be):Ue?null:Le},Be.nodeSize=function(jt){return arguments.length?(Ue=(Le=jt)==null?null:Vt,Be):Ue?Le:null},ru(Be,he)};function Zs(he,Te){return he.parent==Te.parent?1:2}function Ts(he){var Te=he.children;return Te.length?Te[0]:he.t}function Yi(he){var Te=he.children,Le;return(Le=Te.length)?Te[Le-1]:he.t}function Vo(he,Te,Le){var Ue=Le/(Te.i-he.i);Te.c-=Ue,Te.s+=Le,he.c+=Ue,Te.z+=Le,Te.m+=Le}function As(he){for(var Te=0,Le=0,Ue=he.children,Be=Ue.length,Ke;--Be>=0;)Ke=Ue[Be],Ke.z+=Te,Ke.m+=Te,Te+=Ke.s+(Le+=Ke.c)}function uf(he,Te,Le){return he.a.parent===Te.parent?he.a:Le}l.layout.cluster=function(){var he=l.layout.hierarchy().sort(null).value(null),Te=Zs,Le=[1,1],Ue=!1;function Be(Ke,yt){var vt=he.call(this,Ke,yt),Lt=vt[0],Vt,jt=0;Fs(Lt,function(Cr){var Yr=Cr.children;Yr&&Yr.length?(Cr.x=ff(Yr),Cr.y=Au(Yr)):(Cr.x=Vt?jt+=Te(Cr,Vt):0,Cr.y=0,Vt=Cr)});var Zt=xt(Lt),Ar=Ft(Lt),tn=Zt.x-Te(Zt,Ar)/2,pn=Ar.x+Te(Ar,Zt)/2;return Fs(Lt,Ue?function(Cr){Cr.x=(Cr.x-Lt.x)*Le[0],Cr.y=(Lt.y-Cr.y)*Le[1]}:function(Cr){Cr.x=(Cr.x-tn)/(pn-tn)*Le[0],Cr.y=(1-(Lt.y?Cr.y/Lt.y:1))*Le[1]}),vt}return Be.separation=function(Ke){return arguments.length?(Te=Ke,Be):Te},Be.size=function(Ke){return arguments.length?(Ue=(Le=Ke)==null,Be):Ue?null:Le},Be.nodeSize=function(Ke){return arguments.length?(Ue=(Le=Ke)!=null,Be):Ue?Le:null},ru(Be,he)};function Au(he){return 1+l.max(he,function(Te){return Te.y})}function ff(he){return he.reduce(function(Te,Le){return Te+Le.x},0)/he.length}function xt(he){var Te=he.children;return Te&&Te.length?xt(Te[0]):he}function Ft(he){var Te=he.children,Le;return Te&&(Le=Te.length)?Ft(Te[Le-1]):he}l.layout.treemap=function(){var he=l.layout.hierarchy(),Te=Math.round,Le=[1,1],Ue=null,Be=sr,Ke=!1,yt,vt="squarify",Lt=.5*(1+Math.sqrt(5));function Vt(Cr,Yr){for(var Jr=-1,fn=Cr.length,vn,Qr;++Jr<fn;)Qr=(vn=Cr[Jr]).value*(Yr<0?0:Yr),vn.area=isNaN(Qr)||Qr<=0?0:Qr}function jt(Cr){var Yr=Cr.children;if(Yr&&Yr.length){var Jr=Be(Cr),fn=[],vn=Yr.slice(),Qr,jn=1/0,ia,Ma=vt==="slice"?Jr.dx:vt==="dice"?Jr.dy:vt==="slice-dice"?Cr.depth&1?Jr.dy:Jr.dx:Math.min(Jr.dx,Jr.dy),ua;for(Vt(vn,Jr.dx*Jr.dy/Cr.value),fn.area=0;(ua=vn.length)>0;)fn.push(Qr=vn[ua-1]),fn.area+=Qr.area,vt!=="squarify"||(ia=Ar(fn,Ma))<=jn?(vn.pop(),jn=ia):(fn.area-=fn.pop().area,tn(fn,Ma,Jr,!1),Ma=Math.min(Jr.dx,Jr.dy),fn.length=fn.area=0,jn=1/0);fn.length&&(tn(fn,Ma,Jr,!0),fn.length=fn.area=0),Yr.forEach(jt)}}function Zt(Cr){var Yr=Cr.children;if(Yr&&Yr.length){var Jr=Be(Cr),fn=Yr.slice(),vn,Qr=[];for(Vt(fn,Jr.dx*Jr.dy/Cr.value),Qr.area=0;vn=fn.pop();)Qr.push(vn),Qr.area+=vn.area,vn.z!=null&&(tn(Qr,vn.z?Jr.dx:Jr.dy,Jr,!fn.length),Qr.length=Qr.area=0);Yr.forEach(Zt)}}function Ar(Cr,Yr){for(var Jr=Cr.area,fn,vn=0,Qr=1/0,jn=-1,ia=Cr.length;++jn<ia;)!(fn=Cr[jn].area)||(fn<Qr&&(Qr=fn),fn>vn&&(vn=fn));return Jr*=Jr,Yr*=Yr,Jr?Math.max(Yr*vn*Lt/Jr,Jr/(Yr*Qr*Lt)):1/0}function tn(Cr,Yr,Jr,fn){var vn=-1,Qr=Cr.length,jn=Jr.x,ia=Jr.y,Ma=Yr?Te(Cr.area/Yr):0,ua;if(Yr==Jr.dx){for((fn||Ma>Jr.dy)&&(Ma=Jr.dy);++vn<Qr;)ua=Cr[vn],ua.x=jn,ua.y=ia,ua.dy=Ma,jn+=ua.dx=Math.min(Jr.x+Jr.dx-jn,Ma?Te(ua.area/Ma):0);ua.z=!0,ua.dx+=Jr.x+Jr.dx-jn,Jr.y+=Ma,Jr.dy-=Ma}else{for((fn||Ma>Jr.dx)&&(Ma=Jr.dx);++vn<Qr;)ua=Cr[vn],ua.x=jn,ua.y=ia,ua.dx=Ma,ia+=ua.dy=Math.min(Jr.y+Jr.dy-ia,Ma?Te(ua.area/Ma):0);ua.z=!1,ua.dy+=Jr.y+Jr.dy-ia,Jr.x+=Ma,Jr.dx-=Ma}}function pn(Cr){var Yr=yt||he(Cr),Jr=Yr[0];return Jr.x=Jr.y=0,Jr.value?(Jr.dx=Le[0],Jr.dy=Le[1]):Jr.dx=Jr.dy=0,yt&&he.revalue(Jr),Vt([Jr],Jr.dx*Jr.dy/Jr.value),(yt?Zt:jt)(Jr),Ke&&(yt=Yr),Yr}return pn.size=function(Cr){return arguments.length?(Le=Cr,pn):Le},pn.padding=function(Cr){if(!arguments.length)return Ue;function Yr(vn){var Qr=Cr.call(pn,vn,vn.depth);return Qr==null?sr(vn):$t(vn,typeof Qr=="number"?[Qr,Qr,Qr,Qr]:Qr)}function Jr(vn){return $t(vn,Cr)}var fn;return Be=(Ue=Cr)==null?sr:(fn=typeof Cr)==="function"?Yr:(fn==="number"&&(Cr=[Cr,Cr,Cr,Cr]),Jr),pn},pn.round=function(Cr){return arguments.length?(Te=Cr?Math.round:Number,pn):Te!=Number},pn.sticky=function(Cr){return arguments.length?(Ke=Cr,yt=null,pn):Ke},pn.ratio=function(Cr){return arguments.length?(Lt=Cr,pn):Lt},pn.mode=function(Cr){return arguments.length?(vt=Cr+"",pn):vt},ru(pn,he)};function sr(he){return{x:he.x,y:he.y,dx:he.dx,dy:he.dy}}function $t(he,Te){var Le=he.x+Te[3],Ue=he.y+Te[0],Be=he.dx-Te[1]-Te[3],Ke=he.dy-Te[0]-Te[2];return Be<0&&(Le+=Be/2,Be=0),Ke<0&&(Ue+=Ke/2,Ke=0),{x:Le,y:Ue,dx:Be,dy:Ke}}l.random={normal:function(he,Te){var Le=arguments.length;return Le<2&&(Te=1),Le<1&&(he=0),function(){var Ue,Be,Ke;do Ue=Math.random()*2-1,Be=Math.random()*2-1,Ke=Ue*Ue+Be*Be;while(!Ke||Ke>1);return he+Te*Ue*Math.sqrt(-2*Math.log(Ke)/Ke)}},logNormal:function(){var he=l.random.normal.apply(l,arguments);return function(){return Math.exp(he())}},bates:function(he){var Te=l.random.irwinHall(he);return function(){return Te()/he}},irwinHall:function(he){return function(){for(var Te=0,Le=0;Le<he;Le++)Te+=Math.random();return Te}}},l.scale={};function Ir(he){var Te=he[0],Le=he[he.length-1];return Te<Le?[Te,Le]:[Le,Te]}function un(he){return he.rangeExtent?he.rangeExtent():Ir(he.range())}function xn(he,Te,Le,Ue){var Be=Le(he[0],he[1]),Ke=Ue(Te[0],Te[1]);return function(yt){return Ke(Be(yt))}}function An(he,Te){var Le=0,Ue=he.length-1,Be=he[Le],Ke=he[Ue],yt;return Ke<Be&&(yt=Le,Le=Ue,Ue=yt,yt=Be,Be=Ke,Ke=yt),he[Le]=Te.floor(Be),he[Ue]=Te.ceil(Ke),he}function Ln(he){return he?{floor:function(Te){return Math.floor(Te/he)*he},ceil:function(Te){return Math.ceil(Te/he)*he}}:Yn}var Yn={floor:I,ceil:I};function bn(he,Te,Le,Ue){var Be=[],Ke=[],yt=0,vt=Math.min(he.length,Te.length)-1;for(he[vt]<he[0]&&(he=he.slice().reverse(),Te=Te.slice().reverse());++yt<=vt;)Be.push(Le(he[yt-1],he[yt])),Ke.push(Ue(Te[yt-1],Te[yt]));return function(Lt){var Vt=l.bisect(he,Lt,1,vt)-1;return Ke[Vt](Be[Vt](Lt))}}l.scale.linear=function(){return On([0,1],[0,1],co,!1)};function On(he,Te,Le,Ue){var Be,Ke;function yt(){var Lt=Math.min(he.length,Te.length)>2?bn:xn,Vt=Ue?af:Pf;return Be=Lt(he,Te,Vt,Le),Ke=Lt(Te,he,Vt,co),vt}function vt(Lt){return Be(Lt)}return vt.invert=function(Lt){return Ke(Lt)},vt.domain=function(Lt){return arguments.length?(he=Lt.map(Number),yt()):he},vt.range=function(Lt){return arguments.length?(Te=Lt,yt()):Te},vt.rangeRound=function(Lt){return vt.range(Lt).interpolate(tf)},vt.clamp=function(Lt){return arguments.length?(Ue=Lt,yt()):Ue},vt.interpolate=function(Lt){return arguments.length?(Le=Lt,yt()):Le},vt.ticks=function(Lt){return Ua(he,Lt)},vt.tickFormat=function(Lt,Vt){return d3_scale_linearTickFormat(he,Lt,Vt)},vt.nice=function(Lt){return Zn(he,Lt),yt()},vt.copy=function(){return On(he,Te,Le,Ue)},yt()}function Rn(he,Te){return l.rebind(he,Te,"range","rangeRound","interpolate","clamp")}function Zn(he,Te){return An(he,Ln(ra(he,Te)[2])),An(he,Ln(ra(he,Te)[2])),he}function ra(he,Te){Te==null&&(Te=10);var Le=Ir(he),Ue=Le[1]-Le[0],Be=Math.pow(10,Math.floor(Math.log(Ue/Te)/Math.LN10)),Ke=Te/Ue*Be;return Ke<=.15?Be*=10:Ke<=.35?Be*=5:Ke<=.75&&(Be*=2),Le[0]=Math.ceil(Le[0]/Be)*Be,Le[1]=Math.floor(Le[1]/Be)*Be+Be*.5,Le[2]=Be,Le}function Ua(he,Te){return l.range.apply(l,ra(he,Te))}l.scale.log=function(){return Da(l.scale.linear().domain([0,1]),10,!0,[1,10])};function Da(he,Te,Le,Ue){function Be(vt){return(Le?Math.log(vt<0?0:vt):-Math.log(vt>0?0:-vt))/Math.log(Te)}function Ke(vt){return Le?Math.pow(Te,vt):-Math.pow(Te,-vt)}function yt(vt){return he(Be(vt))}return yt.invert=function(vt){return Ke(he.invert(vt))},yt.domain=function(vt){return arguments.length?(Le=vt[0]>=0,he.domain((Ue=vt.map(Number)).map(Be)),yt):Ue},yt.base=function(vt){return arguments.length?(Te=+vt,he.domain(Ue.map(Be)),yt):Te},yt.nice=function(){var vt=An(Ue.map(Be),Le?Math:Va);return he.domain(vt),Ue=vt.map(Ke),yt},yt.ticks=function(){var vt=Ir(Ue),Lt=[],Vt=vt[0],jt=vt[1],Zt=Math.floor(Be(Vt)),Ar=Math.ceil(Be(jt)),tn=Te%1?2:Te;if(isFinite(Ar-Zt)){if(Le){for(;Zt<Ar;Zt++)for(var pn=1;pn<tn;pn++)Lt.push(Ke(Zt)*pn);Lt.push(Ke(Zt))}else for(Lt.push(Ke(Zt));Zt++<Ar;)for(var pn=tn-1;pn>0;pn--)Lt.push(Ke(Zt)*pn);for(Zt=0;Lt[Zt]<Vt;Zt++);for(Ar=Lt.length;Lt[Ar-1]>jt;Ar--);Lt=Lt.slice(Zt,Ar)}return Lt},yt.copy=function(){return Da(he.copy(),Te,Le,Ue)},Rn(yt,he)}var Va={floor:function(he){return-Math.ceil(-he)},ceil:function(he){return-Math.floor(-he)}};l.scale.pow=function(){return Ha(l.scale.linear(),1,[0,1])};function Ha(he,Te,Le){var Ue=ea(Te),Be=ea(1/Te);function Ke(yt){return he(Ue(yt))}return Ke.invert=function(yt){return Be(he.invert(yt))},Ke.domain=function(yt){return arguments.length?(he.domain((Le=yt.map(Number)).map(Ue)),Ke):Le},Ke.ticks=function(yt){return Ua(Le,yt)},Ke.tickFormat=function(yt,vt){return d3_scale_linearTickFormat(Le,yt,vt)},Ke.nice=function(yt){return Ke.domain(Zn(Le,yt))},Ke.exponent=function(yt){return arguments.length?(Ue=ea(Te=yt),Be=ea(1/Te),he.domain(Le.map(Ue)),Ke):Te},Ke.copy=function(){return Ha(he.copy(),Te,Le)},Rn(Ke,he)}function ea(he){return function(Te){return Te<0?-Math.pow(-Te,he):Math.pow(Te,he)}}l.scale.sqrt=function(){return l.scale.pow().exponent(.5)},l.scale.ordinal=function(){return xa([],{t:"range",a:[[]]})};function xa(he,Te){var Le,Ue,Be;function Ke(vt){return Ue[((Le.get(vt)||(Te.t==="range"?Le.set(vt,he.push(vt)):NaN))-1)%Ue.length]}function yt(vt,Lt){return l.range(he.length).map(function(Vt){return vt+Lt*Vt})}return Ke.domain=function(vt){if(!arguments.length)return he;he=[],Le=new S;for(var Lt=-1,Vt=vt.length,jt;++Lt<Vt;)Le.has(jt=vt[Lt])||Le.set(jt,he.push(jt));return Ke[Te.t].apply(Ke,Te.a)},Ke.range=function(vt){return arguments.length?(Ue=vt,Be=0,Te={t:"range",a:arguments},Ke):Ue},Ke.rangePoints=function(vt,Lt){arguments.length<2&&(Lt=0);var Vt=vt[0],jt=vt[1],Zt=he.length<2?(Vt=(Vt+jt)/2,0):(jt-Vt)/(he.length-1+Lt);return Ue=yt(Vt+Zt*Lt/2,Zt),Be=0,Te={t:"rangePoints",a:arguments},Ke},Ke.rangeRoundPoints=function(vt,Lt){arguments.length<2&&(Lt=0);var Vt=vt[0],jt=vt[1],Zt=he.length<2?(Vt=jt=Math.round((Vt+jt)/2),0):(jt-Vt)/(he.length-1+Lt)|0;return Ue=yt(Vt+Math.round(Zt*Lt/2+(jt-Vt-(he.length-1+Lt)*Zt)/2),Zt),Be=0,Te={t:"rangeRoundPoints",a:arguments},Ke},Ke.rangeBands=function(vt,Lt,Vt){arguments.length<2&&(Lt=0),arguments.length<3&&(Vt=Lt);var jt=vt[1]<vt[0],Zt=vt[jt-0],Ar=vt[1-jt],tn=(Ar-Zt)/(he.length-Lt+2*Vt);return Ue=yt(Zt+tn*Vt,tn),jt&&Ue.reverse(),Be=tn*(1-Lt),Te={t:"rangeBands",a:arguments},Ke},Ke.rangeRoundBands=function(vt,Lt,Vt){arguments.length<2&&(Lt=0),arguments.length<3&&(Vt=Lt);var jt=vt[1]<vt[0],Zt=vt[jt-0],Ar=vt[1-jt],tn=Math.floor((Ar-Zt)/(he.length-Lt+2*Vt));return Ue=yt(Zt+Math.round((Ar-Zt-(he.length-Lt)*tn)/2),tn),jt&&Ue.reverse(),Be=Math.round(tn*(1-Lt)),Te={t:"rangeRoundBands",a:arguments},Ke},Ke.rangeBand=function(){return Be},Ke.rangeExtent=function(){return Ir(Te.a[0])},Ke.copy=function(){return xa(he,Te)},Ke.domain(he)}l.scale.category10=function(){return l.scale.ordinal().range(Xa)},l.scale.category20=function(){return l.scale.ordinal().range(qa)},l.scale.category20b=function(){return l.scale.ordinal().range(mi)},l.scale.category20c=function(){return l.scale.ordinal().range(yi)};var Xa=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(nn),qa=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(nn),mi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(nn),yi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(nn);l.scale.quantile=function(){return bi([],[])};function bi(he,Te){var Le;function Ue(){var Ke=0,yt=Te.length;for(Le=[];++Ke<yt;)Le[Ke-1]=l.quantile(he,Ke/yt);return Be}function Be(Ke){if(!isNaN(Ke=+Ke))return Te[l.bisect(Le,Ke)]}return Be.domain=function(Ke){return arguments.length?(he=Ke.map(h).filter(d).sort(s),Ue()):he},Be.range=function(Ke){return arguments.length?(Te=Ke,Ue()):Te},Be.quantiles=function(){return Le},Be.invertExtent=function(Ke){return Ke=Te.indexOf(Ke),Ke<0?[NaN,NaN]:[Ke>0?Le[Ke-1]:he[0],Ke<Le.length?Le[Ke]:he[he.length-1]]},Be.copy=function(){return bi(he,Te)},Ue()}l.scale.quantize=function(){return Mi(0,1,[0,1])};function Mi(he,Te,Le){var Ue,Be;function Ke(vt){return Le[Math.max(0,Math.min(Be,Math.floor(Ue*(vt-he))))]}function yt(){return Ue=Le.length/(Te-he),Be=Le.length-1,Ke}return Ke.domain=function(vt){return arguments.length?(he=+vt[0],Te=+vt[vt.length-1],yt()):[he,Te]},Ke.range=function(vt){return arguments.length?(Le=vt,yt()):Le},Ke.invertExtent=function(vt){return vt=Le.indexOf(vt),vt=vt<0?NaN:vt/Ue+he,[vt,vt+1/Ue]},Ke.copy=function(){return Mi(he,Te,Le)},yt()}l.scale.threshold=function(){return li([.5],[0,1])};function li(he,Te){function Le(Ue){if(Ue<=Ue)return Te[l.bisect(he,Ue)]}return Le.domain=function(Ue){return arguments.length?(he=Ue,Le):he},Le.range=function(Ue){return arguments.length?(Te=Ue,Le):Te},Le.invertExtent=function(Ue){return Ue=Te.indexOf(Ue),[he[Ue-1],he[Ue]]},Le.copy=function(){return li(he,Te)},Le}l.scale.identity=function(){return Lo([0,1])};function Lo(he){function Te(Le){return+Le}return Te.invert=Te,Te.domain=Te.range=function(Le){return arguments.length?(he=Le.map(Te),Te):he},Te.ticks=function(Le){return Ua(he,Le)},Te.tickFormat=function(Le,Ue){return d3_scale_linearTickFormat(he,Le,Ue)},Te.copy=function(){return Lo(he)},Te}l.svg={};function ao(){return 0}l.svg.arc=function(){var he=_a,Te=_i,Le=ao,Ue=Qa,Be=mo,Ke=Mo,yt=Ss;function vt(){var Vt=Math.max(0,+he.apply(this,arguments)),jt=Math.max(0,+Te.apply(this,arguments)),Zt=Be.apply(this,arguments)-ut,Ar=Ke.apply(this,arguments)-ut,tn=Math.abs(Ar-Zt),pn=Zt>Ar?0:1;if(jt<Vt&&(Cr=jt,jt=Vt,Vt=Cr),tn>=rt)return Lt(jt,pn)+(Vt?Lt(Vt,1-pn):"")+"Z";var Cr,Yr,Jr,fn,vn=0,Qr=0,jn,ia,Ma,ua,Ra,va,Wa,za,ei=[];if((fn=(+yt.apply(this,arguments)||0)/2)&&(Jr=Ue===Qa?Math.sqrt(Vt*Vt+jt*jt):+Ue.apply(this,arguments),pn||(Qr*=-1),jt&&(Qr=Xt(Jr/jt*Math.sin(fn))),Vt&&(vn=Xt(Jr/Vt*Math.sin(fn)))),jt){jn=jt*Math.cos(Zt+Qr),ia=jt*Math.sin(Zt+Qr),Ma=jt*Math.cos(Ar-Qr),ua=jt*Math.sin(Ar-Qr);var xi=Math.abs(Ar-Zt-2*Qr)<=Ee?0:1;if(Qr&&Ks(jn,ia,Ma,ua)===pn^xi){var xo=(Zt+Ar)/2;jn=jt*Math.cos(xo),ia=jt*Math.sin(xo),Ma=ua=null}}else jn=ia=0;if(Vt){Ra=Vt*Math.cos(Ar-vn),va=Vt*Math.sin(Ar-vn),Wa=Vt*Math.cos(Zt+vn),za=Vt*Math.sin(Zt+vn);var Bi=Math.abs(Zt-Ar+2*vn)<=Ee?0:1;if(vn&&Ks(Ra,va,Wa,za)===1-pn^Bi){var ga=(Zt+Ar)/2;Ra=Vt*Math.cos(ga),va=Vt*Math.sin(ga),Wa=za=null}}else Ra=va=0;if(tn>ht&&(Cr=Math.min(Math.abs(jt-Vt)/2,+Le.apply(this,arguments)))>.001){Yr=Vt<jt^pn?0:1;var oi=Cr,Ka=Cr;if(tn<Ee){var Ci=Wa==null?[Ra,va]:Ma==null?[jn,ia]:ha([jn,ia],[Wa,za],[Ma,ua],[Ra,va]),ui=jn-Ci[0],vo=ia-Ci[1],to=Ma-Ci[0],Co=ua-Ci[1],os=1/Math.sin(Math.acos((ui*to+vo*Co)/(Math.sqrt(ui*ui+vo*vo)*Math.sqrt(to*to+Co*Co)))/2),Qo=Math.sqrt(Ci[0]*Ci[0]+Ci[1]*Ci[1]);Ka=Math.min(Cr,(Vt-Qo)/(os-1)),oi=Math.min(Cr,(jt-Qo)/(os+1))}if(Ma!=null){var ss=Jo(Wa==null?[Ra,va]:[Wa,za],[jn,ia],jt,oi,pn),Xi=Jo([Ma,ua],[Ra,va],jt,oi,pn);Cr===oi?ei.push("M",ss[0],"A",oi,",",oi," 0 0,",Yr," ",ss[1],"A",jt,",",jt," 0 ",1-pn^Ks(ss[1][0],ss[1][1],Xi[1][0],Xi[1][1]),",",pn," ",Xi[1],"A",oi,",",oi," 0 0,",Yr," ",Xi[0]):ei.push("M",ss[0],"A",oi,",",oi," 0 1,",Yr," ",Xi[0])}else ei.push("M",jn,",",ia);if(Wa!=null){var Hi=Jo([jn,ia],[Wa,za],Vt,-Ka,pn),Na=Jo([Ra,va],Ma==null?[jn,ia]:[Ma,ua],Vt,-Ka,pn);Cr===Ka?ei.push("L",Na[0],"A",Ka,",",Ka," 0 0,",Yr," ",Na[1],"A",Vt,",",Vt," 0 ",pn^Ks(Na[1][0],Na[1][1],Hi[1][0],Hi[1][1]),",",1-pn," ",Hi[1],"A",Ka,",",Ka," 0 0,",Yr," ",Hi[0]):ei.push("L",Na[0],"A",Ka,",",Ka," 0 0,",Yr," ",Hi[0])}else ei.push("L",Ra,",",va)}else ei.push("M",jn,",",ia),Ma!=null&&ei.push("A",jt,",",jt," 0 ",xi,",",pn," ",Ma,",",ua),ei.push("L",Ra,",",va),Wa!=null&&ei.push("A",Vt,",",Vt," 0 ",Bi,",",1-pn," ",Wa,",",za);return ei.push("Z"),ei.join("")}function Lt(Vt,jt){return"M0,"+Vt+"A"+Vt+","+Vt+" 0 1,"+jt+" 0,"+-Vt+"A"+Vt+","+Vt+" 0 1,"+jt+" 0,"+Vt}return vt.innerRadius=function(Vt){return arguments.length?(he=at(Vt),vt):he},vt.outerRadius=function(Vt){return arguments.length?(Te=at(Vt),vt):Te},vt.cornerRadius=function(Vt){return arguments.length?(Le=at(Vt),vt):Le},vt.padRadius=function(Vt){return arguments.length?(Ue=Vt==Qa?Qa:at(Vt),vt):Ue},vt.startAngle=function(Vt){return arguments.length?(Be=at(Vt),vt):Be},vt.endAngle=function(Vt){return arguments.length?(Ke=at(Vt),vt):Ke},vt.padAngle=function(Vt){return arguments.length?(yt=at(Vt),vt):yt},vt.centroid=function(){var Vt=(+he.apply(this,arguments)+ +Te.apply(this,arguments))/2,jt=(+Be.apply(this,arguments)+ +Ke.apply(this,arguments))/2-ut;return[Math.cos(jt)*Vt,Math.sin(jt)*Vt]},vt};var Qa="auto";function _a(he){return he.innerRadius}function _i(he){return he.outerRadius}function mo(he){return he.startAngle}function Mo(he){return he.endAngle}function Ss(he){return he&&he.padAngle}function Ks(he,Te,Le,Ue){return(he-Le)*Te-(Te-Ue)*he>0?0:1}function Jo(he,Te,Le,Ue,Be){var Ke=he[0]-Te[0],yt=he[1]-Te[1],vt=(Be?Ue:-Ue)/Math.sqrt(Ke*Ke+yt*yt),Lt=vt*yt,Vt=-vt*Ke,jt=he[0]+Lt,Zt=he[1]+Vt,Ar=Te[0]+Lt,tn=Te[1]+Vt,pn=(jt+Ar)/2,Cr=(Zt+tn)/2,Yr=Ar-jt,Jr=tn-Zt,fn=Yr*Yr+Jr*Jr,vn=Le-Ue,Qr=jt*tn-Ar*Zt,jn=(Jr<0?-1:1)*Math.sqrt(Math.max(0,vn*vn*fn-Qr*Qr)),ia=(Qr*Jr-Yr*jn)/fn,Ma=(-Qr*Yr-Jr*jn)/fn,ua=(Qr*Jr+Yr*jn)/fn,Ra=(-Qr*Yr+Jr*jn)/fn,va=ia-pn,Wa=Ma-Cr,za=ua-pn,ei=Ra-Cr;return va*va+Wa*Wa>za*za+ei*ei&&(ia=ua,Ma=Ra),[[ia-Lt,Ma-Vt],[ia*Le/vn,Ma*Le/vn]]}function Ll(){return!0}function zs(he){var Te=ba,Le=vr,Ue=Ll,Be=Po,Ke=Be.key,yt=.7;function vt(Lt){var Vt=[],jt=[],Zt=-1,Ar=Lt.length,tn,pn=at(Te),Cr=at(Le);function Yr(){Vt.push("M",Be(he(jt),yt))}for(;++Zt<Ar;)Ue.call(this,tn=Lt[Zt],Zt)?jt.push([+pn.call(this,tn,Zt),+Cr.call(this,tn,Zt)]):jt.length&&(Yr(),jt=[]);return jt.length&&Yr(),Vt.length?Vt.join(""):null}return vt.x=function(Lt){return arguments.length?(Te=Lt,vt):Te},vt.y=function(Lt){return arguments.length?(Le=Lt,vt):Le},vt.defined=function(Lt){return arguments.length?(Ue=Lt,vt):Ue},vt.interpolate=function(Lt){return arguments.length?(typeof Lt=="function"?Ke=Be=Lt:Ke=(Be=Ms.get(Lt)||Po).key,vt):Ke},vt.tension=function(Lt){return arguments.length?(yt=Lt,vt):yt},vt}l.svg.line=function(){return zs(I)};var Ms=l.map({linear:Po,"linear-closed":Su,step:Wu,"step-before":ks,"step-after":cf,basis:Js,"basis-open":sc,"basis-closed":Ff,bundle:zf,cardinal:Df,"cardinal-open":Mu,"cardinal-closed":Gc,monotone:je});Ms.forEach(function(he,Te){Te.key=he,Te.closed=/-closed$/.test(he)});function Po(he){return he.length>1?he.join("L"):he+"Z"}function Su(he){return he.join("L")+"Z"}function Wu(he){for(var Te=0,Le=he.length,Ue=he[0],Be=[Ue[0],",",Ue[1]];++Te<Le;)Be.push("H",(Ue[0]+(Ue=he[Te])[0])/2,"V",Ue[1]);return Le>1&&Be.push("H",Ue[0]),Be.join("")}function ks(he){for(var Te=0,Le=he.length,Ue=he[0],Be=[Ue[0],",",Ue[1]];++Te<Le;)Be.push("V",(Ue=he[Te])[1],"H",Ue[0]);return Be.join("")}function cf(he){for(var Te=0,Le=he.length,Ue=he[0],Be=[Ue[0],",",Ue[1]];++Te<Le;)Be.push("H",(Ue=he[Te])[0],"V",Ue[1]);return Be.join("")}function Mu(he,Te){return he.length<4?Po(he):he[1]+hf(he.slice(1,-1),If(he,Te))}function Gc(he,Te){return he.length<3?Su(he):he[0]+hf((he.push(he[0]),he),If([he[he.length-2]].concat(he,[he[1]]),Te))}function Df(he,Te){return he.length<3?Po(he):he[0]+hf(he,If(he,Te))}function hf(he,Te){if(Te.length<1||he.length!=Te.length&&he.length!=Te.length+2)return Po(he);var Le=he.length!=Te.length,Ue="",Be=he[0],Ke=he[1],yt=Te[0],vt=yt,Lt=1;if(Le&&(Ue+="Q"+(Ke[0]-yt[0]*2/3)+","+(Ke[1]-yt[1]*2/3)+","+Ke[0]+","+Ke[1],Be=he[1],Lt=2),Te.length>1){vt=Te[1],Ke=he[Lt],Lt++,Ue+="C"+(Be[0]+yt[0])+","+(Be[1]+yt[1])+","+(Ke[0]-vt[0])+","+(Ke[1]-vt[1])+","+Ke[0]+","+Ke[1];for(var Vt=2;Vt<Te.length;Vt++,Lt++)Ke=he[Lt],vt=Te[Vt],Ue+="S"+(Ke[0]-vt[0])+","+(Ke[1]-vt[1])+","+Ke[0]+","+Ke[1]}if(Le){var jt=he[Lt];Ue+="Q"+(Ke[0]+vt[0]*2/3)+","+(Ke[1]+vt[1]*2/3)+","+jt[0]+","+jt[1]}return Ue}function If(he,Te){for(var Le=[],Ue=(1-Te)/2,Be,Ke=he[0],yt=he[1],vt=1,Lt=he.length;++vt<Lt;)Be=Ke,Ke=yt,yt=he[vt],Le.push([Ue*(yt[0]-Be[0]),Ue*(yt[1]-Be[1])]);return Le}function Js(he){if(he.length<3)return Po(he);var Te=1,Le=he.length,Ue=he[0],Be=Ue[0],Ke=Ue[1],yt=[Be,Be,Be,(Ue=he[1])[0]],vt=[Ke,Ke,Ke,Ue[1]],Lt=[Be,",",Ke,"L",$o(Os,yt),",",$o(Os,vt)];for(he.push(he[Le-1]);++Te<=Le;)Ue=he[Te],yt.shift(),yt.push(Ue[0]),vt.shift(),vt.push(Ue[1]),vf(Lt,yt,vt);return he.pop(),Lt.push("L",Ue),Lt.join("")}function sc(he){if(he.length<4)return Po(he);for(var Te=[],Le=-1,Ue=he.length,Be,Ke=[0],yt=[0];++Le<3;)Be=he[Le],Ke.push(Be[0]),yt.push(Be[1]);for(Te.push($o(Os,Ke)+","+$o(Os,yt)),--Le;++Le<Ue;)Be=he[Le],Ke.shift(),Ke.push(Be[0]),yt.shift(),yt.push(Be[1]),vf(Te,Ke,yt);return Te.join("")}function Ff(he){for(var Te,Le=-1,Ue=he.length,Be=Ue+4,Ke,yt=[],vt=[];++Le<4;)Ke=he[Le%Ue],yt.push(Ke[0]),vt.push(Ke[1]);for(Te=[$o(Os,yt),",",$o(Os,vt)],--Le;++Le<Be;)Ke=he[Le%Ue],yt.shift(),yt.push(Ke[0]),vt.shift(),vt.push(Ke[1]),vf(Te,yt,vt);return Te.join("")}function zf(he,Te){var Le=he.length-1;if(Le)for(var Ue=he[0][0],Be=he[0][1],Ke=he[Le][0]-Ue,yt=he[Le][1]-Be,vt=-1,Lt,Vt;++vt<=Le;)Lt=he[vt],Vt=vt/Le,Lt[0]=Te*Lt[0]+(1-Te)*(Ue+Vt*Ke),Lt[1]=Te*Lt[1]+(1-Te)*(Be+Vt*yt);return Js(he)}function $o(he,Te){return he[0]*Te[0]+he[1]*Te[1]+he[2]*Te[2]+he[3]*Te[3]}var Of=[0,2/3,1/3,0],xc=[0,1/3,2/3,0],Os=[0,1/6,2/3,1/6];function vf(he,Te,Le){he.push("C",$o(Of,Te),",",$o(Of,Le),",",$o(xc,Te),",",$o(xc,Le),",",$o(Os,Te),",",$o(Os,Le))}function pf(he,Te){return(Te[1]-he[1])/(Te[0]-he[0])}function Bf(he){for(var Te=0,Le=he.length-1,Ue=[],Be=he[0],Ke=he[1],yt=Ue[0]=pf(Be,Ke);++Te<Le;)Ue[Te]=(yt+(yt=pf(Be=Ke,Ke=he[Te+1])))/2;return Ue[Te]=yt,Ue}function Fe(he){for(var Te=[],Le,Ue,Be,Ke,yt=Bf(he),vt=-1,Lt=he.length-1;++vt<Lt;)Le=pf(he[vt],he[vt+1]),x(Le)<ht?yt[vt]=yt[vt+1]=0:(Ue=yt[vt]/Le,Be=yt[vt+1]/Le,Ke=Ue*Ue+Be*Be,Ke>9&&(Ke=Le*3/Math.sqrt(Ke),yt[vt]=Ke*Ue,yt[vt+1]=Ke*Be));for(vt=-1;++vt<=Lt;)Ke=(he[Math.min(Lt,vt+1)][0]-he[Math.max(0,vt-1)][0])/(6*(1+yt[vt]*yt[vt])),Te.push([Ke||0,yt[vt]*Ke||0]);return Te}function je(he){return he.length<3?Po(he):he[0]+hf(he,Fe(he))}l.svg.line.radial=function(){var he=zs(nt);return he.radius=he.x,delete he.x,he.angle=he.y,delete he.y,he};function nt(he){for(var Te,Le=-1,Ue=he.length,Be,Ke;++Le<Ue;)Te=he[Le],Be=Te[0],Ke=Te[1]-ut,Te[0]=Be*Math.cos(Ke),Te[1]=Be*Math.sin(Ke);return he}function lt(he){var Te=ba,Le=ba,Ue=0,Be=vr,Ke=Ll,yt=Po,vt=yt.key,Lt=yt,Vt="L",jt=.7;function Zt(Ar){var tn=[],pn=[],Cr=[],Yr=-1,Jr=Ar.length,fn,vn=at(Te),Qr=at(Ue),jn=Te===Le?function(){return Ma}:at(Le),ia=Ue===Be?function(){return ua}:at(Be),Ma,ua;function Ra(){tn.push("M",yt(he(Cr),jt),Vt,Lt(he(pn.reverse()),jt),"Z")}for(;++Yr<Jr;)Ke.call(this,fn=Ar[Yr],Yr)?(pn.push([Ma=+vn.call(this,fn,Yr),ua=+Qr.call(this,fn,Yr)]),Cr.push([+jn.call(this,fn,Yr),+ia.call(this,fn,Yr)])):pn.length&&(Ra(),pn=[],Cr=[]);return pn.length&&Ra(),tn.length?tn.join(""):null}return Zt.x=function(Ar){return arguments.length?(Te=Le=Ar,Zt):Le},Zt.x0=function(Ar){return arguments.length?(Te=Ar,Zt):Te},Zt.x1=function(Ar){return arguments.length?(Le=Ar,Zt):Le},Zt.y=function(Ar){return arguments.length?(Ue=Be=Ar,Zt):Be},Zt.y0=function(Ar){return arguments.length?(Ue=Ar,Zt):Ue},Zt.y1=function(Ar){return arguments.length?(Be=Ar,Zt):Be},Zt.defined=function(Ar){return arguments.length?(Ke=Ar,Zt):Ke},Zt.interpolate=function(Ar){return arguments.length?(typeof Ar=="function"?vt=yt=Ar:vt=(yt=Ms.get(Ar)||Po).key,Lt=yt.reverse||yt,Vt=yt.closed?"M":"L",Zt):vt},Zt.tension=function(Ar){return arguments.length?(jt=Ar,Zt):jt},Zt}ks.reverse=cf,cf.reverse=ks,l.svg.area=function(){return lt(I)},l.svg.area.radial=function(){var he=lt(nt);return he.radius=he.x,delete he.x,he.innerRadius=he.x0,delete he.x0,he.outerRadius=he.x1,delete he.x1,he.angle=he.y,delete he.y,he.startAngle=he.y0,delete he.y0,he.endAngle=he.y1,delete he.y1,he};function _t(he){return he.source}function bt(he){return he.target}l.svg.chord=function(){var he=_t,Te=bt,Le=Tt,Ue=mo,Be=Mo;function Ke(jt,Zt){var Ar=yt(this,he,jt,Zt),tn=yt(this,Te,jt,Zt);return"M"+Ar.p0+Lt(Ar.r,Ar.p1,Ar.a1-Ar.a0)+(vt(Ar,tn)?Vt(Ar.r,Ar.p1,Ar.r,Ar.p0):Vt(Ar.r,Ar.p1,tn.r,tn.p0)+Lt(tn.r,tn.p1,tn.a1-tn.a0)+Vt(tn.r,tn.p1,Ar.r,Ar.p0))+"Z"}function yt(jt,Zt,Ar,tn){var pn=Zt.call(jt,Ar,tn),Cr=Le.call(jt,pn,tn),Yr=Ue.call(jt,pn,tn)-ut,Jr=Be.call(jt,pn,tn)-ut;return{r:Cr,a0:Yr,a1:Jr,p0:[Cr*Math.cos(Yr),Cr*Math.sin(Yr)],p1:[Cr*Math.cos(Jr),Cr*Math.sin(Jr)]}}function vt(jt,Zt){return jt.a0==Zt.a0&&jt.a1==Zt.a1}function Lt(jt,Zt,Ar){return"A"+jt+","+jt+" 0 "+ +(Ar>Ee)+",1 "+Zt}function Vt(jt,Zt,Ar,tn){return"Q 0,0 "+tn}return Ke.radius=function(jt){return arguments.length?(Le=at(jt),Ke):Le},Ke.source=function(jt){return arguments.length?(he=at(jt),Ke):he},Ke.target=function(jt){return arguments.length?(Te=at(jt),Ke):Te},Ke.startAngle=function(jt){return arguments.length?(Ue=at(jt),Ke):Ue},Ke.endAngle=function(jt){return arguments.length?(Be=at(jt),Ke):Be},Ke};function Tt(he){return he.radius}l.svg.diagonal=function(){var he=_t,Te=bt,Le=rr;function Ue(Be,Ke){var yt=he.call(this,Be,Ke),vt=Te.call(this,Be,Ke),Lt=(yt.y+vt.y)/2,Vt=[yt,{x:yt.x,y:Lt},{x:vt.x,y:Lt},vt];return Vt=Vt.map(Le),"M"+Vt[0]+"C"+Vt[1]+" "+Vt[2]+" "+Vt[3]}return Ue.source=function(Be){return arguments.length?(he=at(Be),Ue):he},Ue.target=function(Be){return arguments.length?(Te=at(Be),Ue):Te},Ue.projection=function(Be){return arguments.length?(Le=Be,Ue):Le},Ue};function rr(he){return[he.x,he.y]}l.svg.diagonal.radial=function(){var he=l.svg.diagonal(),Te=rr,Le=he.projection;return he.projection=function(Ue){return arguments.length?Le(fr(Te=Ue)):Te},he};function fr(he){return function(){var Te=he.apply(this,arguments),Le=Te[0],Ue=Te[1]-ut;return[Le*Math.cos(Ue),Le*Math.sin(Ue)]}}l.svg.symbol=function(){var he=pr,Te=er;function Le(Ue,Be){return(Kr.get(he.call(this,Ue,Be))||Dr)(Te.call(this,Ue,Be))}return Le.type=function(Ue){return arguments.length?(he=at(Ue),Le):he},Le.size=function(Ue){return arguments.length?(Te=at(Ue),Le):Te},Le};function er(){return 64}function pr(){return"circle"}function Dr(he){var Te=Math.sqrt(he/Ee);return"M0,"+Te+"A"+Te+","+Te+" 0 1,1 0,"+-Te+"A"+Te+","+Te+" 0 1,1 0,"+Te+"Z"}var Kr=l.map({circle:Dr,cross:function(he){var Te=Math.sqrt(he/5)/2;return"M"+-3*Te+","+-Te+"H"+-Te+"V"+-3*Te+"H"+Te+"V"+-Te+"H"+3*Te+"V"+Te+"H"+Te+"V"+3*Te+"H"+-Te+"V"+Te+"H"+-3*Te+"Z"},diamond:function(he){var Te=Math.sqrt(he/(2*wn)),Le=Te*wn;return"M0,"+-Te+"L"+Le+",0 0,"+Te+" "+-Le+",0Z"},square:function(he){var Te=Math.sqrt(he)/2;return"M"+-Te+","+-Te+"L"+Te+","+-Te+" "+Te+","+Te+" "+-Te+","+Te+"Z"},"triangle-down":function(he){var Te=Math.sqrt(he/an),Le=Te*an/2;return"M0,"+Le+"L"+Te+","+-Le+" "+-Te+","+-Le+"Z"},"triangle-up":function(he){var Te=Math.sqrt(he/an),Le=Te*an/2;return"M0,"+-Le+"L"+Te+","+Le+" "+-Te+","+Le+"Z"}});l.svg.symbolTypes=Kr.keys();var an=Math.sqrt(3),wn=Math.tan(30*Pt);$.transition=function(he){for(var Te=Za||++$a,Le=ai(he),Ue=[],Be,Ke,yt=ri||{time:Date.now(),ease:fl,delay:0,duration:250},vt=-1,Lt=this.length;++vt<Lt;){Ue.push(Be=[]);for(var Vt=this[vt],jt=-1,Zt=Vt.length;++jt<Zt;)(Ke=Vt[jt])&&ji(Ke,jt,Le,Te,yt),Be.push(Ke)}return wa(Ue,Le,Te)},$.interrupt=function(he){return this.each(he==null?Dn:Jn(ai(he)))};var Dn=Jn(ai());function Jn(he){return function(){var Te,Le,Ue;(Te=this[he])&&(Ue=Te[Le=Te.active])&&(Ue.timer.c=null,Ue.timer.t=NaN,--Te.count?delete Te[Le]:delete this[he],Te.active+=.5,Ue.event&&Ue.event.interrupt.call(this,this.__data__,Ue.index))}}function wa(he,Te,Le){return ue(he,Aa),he.namespace=Te,he.id=Le,he}var Aa=[],$a=0,Za,ri;Aa.call=$.call,Aa.empty=$.empty,Aa.node=$.node,Aa.size=$.size,l.transition=function(he,Te){return he&&he.transition?Za?he.transition(Te):he:l.selection().transition(he)},l.transition.prototype=Aa,Aa.select=function(he){var Te=this.id,Le=this.namespace,Ue=[],Be,Ke,yt;he=K(he);for(var vt=-1,Lt=this.length;++vt<Lt;){Ue.push(Be=[]);for(var Vt=this[vt],jt=-1,Zt=Vt.length;++jt<Zt;)(yt=Vt[jt])&&(Ke=he.call(yt,yt.__data__,jt,vt))?("__data__"in yt&&(Ke.__data__=yt.__data__),ji(Ke,jt,Le,Te,yt[Le][Te]),Be.push(Ke)):Be.push(null)}return wa(Ue,Le,Te)},Aa.selectAll=function(he){var Te=this.id,Le=this.namespace,Ue=[],Be,Ke,yt,vt,Lt;he=Q(he);for(var Vt=-1,jt=this.length;++Vt<jt;)for(var Zt=this[Vt],Ar=-1,tn=Zt.length;++Ar<tn;)if(yt=Zt[Ar]){Lt=yt[Le][Te],Ke=he.call(yt,yt.__data__,Ar,Vt),Ue.push(Be=[]);for(var pn=-1,Cr=Ke.length;++pn<Cr;)(vt=Ke[pn])&&ji(vt,pn,Le,Te,Lt),Be.push(vt)}return wa(Ue,Le,Te)},Aa.filter=function(he){var Te=[],Le,Ue,Be;typeof he!="function"&&(he=_e(he));for(var Ke=0,yt=this.length;Ke<yt;Ke++){Te.push(Le=[]);for(var Ue=this[Ke],vt=0,Lt=Ue.length;vt<Lt;vt++)(Be=Ue[vt])&&he.call(Be,Be.__data__,vt,Ke)&&Le.push(Be)}return wa(Te,this.namespace,this.id)},Aa.tween=function(he,Te){var Le=this.id,Ue=this.namespace;return arguments.length<2?this.node()[Ue][Le].tween.get(he):We(this,Te==null?function(Be){Be[Ue][Le].tween.remove(he)}:function(Be){Be[Ue][Le].tween.set(he,Te)})};function vi(he,Te,Le,Ue){var Be=he.id,Ke=he.namespace;return We(he,typeof Le=="function"?function(yt,vt,Lt){yt[Ke][Be].tween.set(Te,Ue(Le.call(yt,yt.__data__,vt,Lt)))}:(Le=Ue(Le),function(yt){yt[Ke][Be].tween.set(Te,Le)}))}Aa.attr=function(he,Te){if(arguments.length<2){for(Te in he)this.attr(Te,he[Te]);return this}var Le=he=="transform"?_u:co,Ue=l.ns.qualify(he);function Be(){this.removeAttribute(Ue)}function Ke(){this.removeAttributeNS(Ue.space,Ue.local)}function yt(Lt){return Lt==null?Be:(Lt+="",function(){var Vt=this.getAttribute(Ue),jt;return Vt!==Lt&&(jt=Le(Vt,Lt),function(Zt){this.setAttribute(Ue,jt(Zt))})})}function vt(Lt){return Lt==null?Ke:(Lt+="",function(){var Vt=this.getAttributeNS(Ue.space,Ue.local),jt;return Vt!==Lt&&(jt=Le(Vt,Lt),function(Zt){this.setAttributeNS(Ue.space,Ue.local,jt(Zt))})})}return vi(this,"attr."+he,Te,Ue.local?vt:yt)},Aa.attrTween=function(he,Te){var Le=l.ns.qualify(he);function Ue(Ke,yt){var vt=Te.call(this,Ke,yt,this.getAttribute(Le));return vt&&function(Lt){this.setAttribute(Le,vt(Lt))}}function Be(Ke,yt){var vt=Te.call(this,Ke,yt,this.getAttributeNS(Le.space,Le.local));return vt&&function(Lt){this.setAttributeNS(Le.space,Le.local,vt(Lt))}}return this.tween("attr."+he,Le.local?Be:Ue)},Aa.style=function(he,Te,Le){var Ue=arguments.length;if(Ue<3){if(typeof he!="string"){Ue<2&&(Te="");for(Le in he)this.style(Le,he[Le],Te);return this}Le=""}function Be(){this.style.removeProperty(he)}function Ke(yt){return yt==null?Be:(yt+="",function(){var vt=n(this).getComputedStyle(this,null).getPropertyValue(he),Lt;return vt!==yt&&(Lt=co(vt,yt),function(Vt){this.style.setProperty(he,Lt(Vt),Le)})})}return vi(this,"style."+he,Te,Ke)},Aa.styleTween=function(he,Te,Le){arguments.length<3&&(Le="");function Ue(Be,Ke){var yt=Te.call(this,Be,Ke,n(this).getComputedStyle(this,null).getPropertyValue(he));return yt&&function(vt){this.style.setProperty(he,yt(vt),Le)}}return this.tween("style."+he,Ue)},Aa.text=function(he){return vi(this,"text",he,ho)};function ho(he){return he==null&&(he=""),function(){this.textContent=he}}Aa.remove=function(){var he=this.namespace;return this.each("end.transition",function(){var Te;this[he].count<2&&(Te=this.parentNode)&&Te.removeChild(this)})},Aa.ease=function(he){var Te=this.id,Le=this.namespace;return arguments.length<1?this.node()[Le][Te].ease:(typeof he!="function"&&(he=l.ease.apply(l,arguments)),We(this,function(Ue){Ue[Le][Te].ease=he}))},Aa.delay=function(he){var Te=this.id,Le=this.namespace;return arguments.length<1?this.node()[Le][Te].delay:We(this,typeof he=="function"?function(Ue,Be,Ke){Ue[Le][Te].delay=+he.call(Ue,Ue.__data__,Be,Ke)}:(he=+he,function(Ue){Ue[Le][Te].delay=he}))},Aa.duration=function(he){var Te=this.id,Le=this.namespace;return arguments.length<1?this.node()[Le][Te].duration:We(this,typeof he=="function"?function(Ue,Be,Ke){Ue[Le][Te].duration=Math.max(1,he.call(Ue,Ue.__data__,Be,Ke))}:(he=Math.max(1,he),function(Ue){Ue[Le][Te].duration=he}))},Aa.each=function(he,Te){var Le=this.id,Ue=this.namespace;if(arguments.length<2){var Be=ri,Ke=Za;try{Za=Le,We(this,function(yt,vt,Lt){ri=yt[Ue][Le],he.call(yt,yt.__data__,vt,Lt)})}finally{ri=Be,Za=Ke}}else We(this,function(yt){var vt=yt[Ue][Le];(vt.event||(vt.event=l.dispatch("start","end","interrupt"))).on(he,Te)});return this},Aa.transition=function(){for(var he=this.id,Te=++$a,Le=this.namespace,Ue=[],Be,Ke,yt,vt,Lt=0,Vt=this.length;Lt<Vt;Lt++){Ue.push(Be=[]);for(var Ke=this[Lt],jt=0,Zt=Ke.length;jt<Zt;jt++)(yt=Ke[jt])&&(vt=yt[Le][he],ji(yt,jt,Le,Te,{time:vt.time,ease:vt.ease,delay:vt.delay+vt.duration,duration:vt.duration})),Be.push(yt)}return wa(Ue,Le,Te)};function ai(he){return he==null?"__transition__":"__transition_"+he+"__"}function ji(he,Te,Le,Ue,Be){var Ke=he[Le]||(he[Le]={active:0,count:0}),yt=Ke[Ue],vt,Lt,Vt,jt,Zt;function Ar(Cr){var Yr=yt.delay;if(Lt.t=Yr+vt,Yr<=Cr)return tn(Cr-Yr);Lt.c=tn}function tn(Cr){var Yr=Ke.active,Jr=Ke[Yr];Jr&&(Jr.timer.c=null,Jr.timer.t=NaN,--Ke.count,delete Ke[Yr],Jr.event&&Jr.event.interrupt.call(he,he.__data__,Jr.index));for(var fn in Ke)if(+fn<Ue){var vn=Ke[fn];vn.timer.c=null,vn.timer.t=NaN,--Ke.count,delete Ke[fn]}Lt.c=pn,En(function(){return Lt.c&&pn(Cr||1)&&(Lt.c=null,Lt.t=NaN),1},0,vt),Ke.active=Ue,yt.event&&yt.event.start.call(he,he.__data__,Te),Zt=[],yt.tween.forEach(function(Qr,jn){(jn=jn.call(he,he.__data__,Te))&&Zt.push(jn)}),jt=yt.ease,Vt=yt.duration}function pn(Cr){for(var Yr=Cr/Vt,Jr=jt(Yr),fn=Zt.length;fn>0;)Zt[--fn].call(he,Jr);if(Yr>=1)return yt.event&&yt.event.end.call(he,he.__data__,Te),--Ke.count?delete Ke[Ue]:delete he[Le],1}yt||(vt=Be.time,Lt=En(Ar,0,vt),yt=Ke[Ue]={tween:new S,time:vt,timer:Lt,delay:Be.delay,duration:Be.duration,ease:Be.ease,index:Te},Be=null,++Ke.count)}l.svg.axis=function(){var he=l.scale.linear(),Te=yo,Le=6,Ue=6,Be=3,Ke=[10],yt=null,vt;function Lt(Vt){Vt.each(function(){var jt=l.select(this),Zt=this.__chart__||he,Ar=this.__chart__=he.copy(),tn=yt??(Ar.ticks?Ar.ticks.apply(Ar,Ke):Ar.domain()),pn=vt??(Ar.tickFormat?Ar.tickFormat.apply(Ar,Ke):I),Cr=jt.selectAll(".tick").data(tn,Ar),Yr=Cr.enter().insert("g",".domain").attr("class","tick").style("opacity",ht),Jr=l.transition(Cr.exit()).style("opacity",ht).remove(),fn=l.transition(Cr.order()).style("opacity",1),vn=Math.max(Le,0)+Be,Qr,jn=un(Ar),ia=jt.selectAll(".domain").data([0]),Ma=(ia.enter().append("path").attr("class","domain"),l.transition(ia));Yr.append("line"),Yr.append("text");var ua=Yr.select("line"),Ra=fn.select("line"),va=Cr.select("text").text(pn),Wa=Yr.select("text"),za=fn.select("text"),ei=Te==="top"||Te==="left"?-1:1,xi,xo,Bi,ga;if(Te==="bottom"||Te==="top"?(Qr=wi,xi="x",Bi="y",xo="x2",ga="y2",va.attr("dy",ei<0?"0em":".71em").style("text-anchor","middle"),Ma.attr("d","M"+jn[0]+","+ei*Ue+"V0H"+jn[1]+"V"+ei*Ue)):(Qr=ki,xi="y",Bi="x",xo="y2",ga="x2",va.attr("dy",".32em").style("text-anchor",ei<0?"end":"start"),Ma.attr("d","M"+ei*Ue+","+jn[0]+"H0V"+jn[1]+"H"+ei*Ue)),ua.attr(ga,ei*Le),Wa.attr(Bi,ei*vn),Ra.attr(xo,0).attr(ga,ei*Le),za.attr(xi,0).attr(Bi,ei*vn),Ar.rangeBand){var oi=Ar,Ka=oi.rangeBand()/2;Zt=Ar=function(Ci){return oi(Ci)+Ka}}else Zt.rangeBand?Zt=Ar:Jr.call(Qr,Ar,Zt);Yr.call(Qr,Zt,Ar),fn.call(Qr,Ar,Ar)})}return Lt.scale=function(Vt){return arguments.length?(he=Vt,Lt):he},Lt.orient=function(Vt){return arguments.length?(Te=Vt in Io?Vt+"":yo,Lt):Te},Lt.ticks=function(){return arguments.length?(Ke=c(arguments),Lt):Ke},Lt.tickValues=function(Vt){return arguments.length?(yt=Vt,Lt):yt},Lt.tickFormat=function(Vt){return arguments.length?(vt=Vt,Lt):vt},Lt.tickSize=function(Vt){var jt=arguments.length;return jt?(Le=+Vt,Ue=+arguments[jt-1],Lt):Le},Lt.innerTickSize=function(Vt){return arguments.length?(Le=+Vt,Lt):Le},Lt.outerTickSize=function(Vt){return arguments.length?(Ue=+Vt,Lt):Ue},Lt.tickPadding=function(Vt){return arguments.length?(Be=+Vt,Lt):Be},Lt.tickSubdivide=function(){return arguments.length&&Lt},Lt};var yo="bottom",Io={top:1,right:1,bottom:1,left:1};function wi(he,Te,Le){he.attr("transform",function(Ue){var Be=Te(Ue);return"translate("+(isFinite(Be)?Be:Le(Ue))+",0)"})}function ki(he,Te,Le){he.attr("transform",function(Ue){var Be=Te(Ue);return"translate(0,"+(isFinite(Be)?Be:Le(Ue))+")"})}l.svg.brush=function(){var he=J(jt,"brushstart","brush","brushend"),Te=null,Le=null,Ue=[0,0],Be=[0,0],Ke,yt,vt=!0,Lt=!0,Vt=ko[0];function jt(Cr){Cr.each(function(){var Yr=l.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",pn).on("touchstart.brush",pn),Jr=Yr.selectAll(".background").data([0]);Jr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Yr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var fn=Yr.selectAll(".resize").data(Vt,I);fn.exit().remove(),fn.enter().append("g").attr("class",function(ia){return"resize "+ia}).style("cursor",function(ia){return Cs[ia]}).append("rect").attr("x",function(ia){return/[ew]$/.test(ia)?-3:null}).attr("y",function(ia){return/^[ns]/.test(ia)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),fn.style("display",jt.empty()?"none":null);var vn=l.transition(Yr),Qr=l.transition(Jr),jn;Te&&(jn=un(Te),Qr.attr("x",jn[0]).attr("width",jn[1]-jn[0]),Ar(vn)),Le&&(jn=un(Le),Qr.attr("y",jn[0]).attr("height",jn[1]-jn[0]),tn(vn)),Zt(vn)})}jt.event=function(Cr){Cr.each(function(){var Yr=he.of(this,arguments),Jr={x:Ue,y:Be,i:Ke,j:yt},fn=this.__chart__||Jr;this.__chart__=Jr,Za?l.select(this).transition().each("start.brush",function(){Ke=fn.i,yt=fn.j,Ue=fn.x,Be=fn.y,Yr({type:"brushstart"})}).tween("brush:brush",function(){var vn=eo(Ue,Jr.x),Qr=eo(Be,Jr.y);return Ke=yt=null,function(jn){Ue=Jr.x=vn(jn),Be=Jr.y=Qr(jn),Yr({type:"brush",mode:"resize"})}}).each("end.brush",function(){Ke=Jr.i,yt=Jr.j,Yr({type:"brush",mode:"resize"}),Yr({type:"brushend"})}):(Yr({type:"brushstart"}),Yr({type:"brush",mode:"resize"}),Yr({type:"brushend"}))})};function Zt(Cr){Cr.selectAll(".resize").attr("transform",function(Yr){return"translate("+Ue[+/e$/.test(Yr)]+","+Be[+/^s/.test(Yr)]+")"})}function Ar(Cr){Cr.select(".extent").attr("x",Ue[0]),Cr.selectAll(".extent,.n>rect,.s>rect").attr("width",Ue[1]-Ue[0])}function tn(Cr){Cr.select(".extent").attr("y",Be[0]),Cr.selectAll(".extent,.e>rect,.w>rect").attr("height",Be[1]-Be[0])}function pn(){var Cr=this,Yr=l.select(l.event.target),Jr=he.of(Cr,arguments),fn=l.select(Cr),vn=Yr.datum(),Qr=!/^(n|s)$/.test(vn)&&Te,jn=!/^(e|w)$/.test(vn)&&Le,ia=Yr.classed("extent"),Ma=Nt(Cr),ua,Ra=l.mouse(Cr),va,Wa=l.select(n(Cr)).on("keydown.brush",xi).on("keyup.brush",xo);if(l.event.changedTouches?Wa.on("touchmove.brush",Bi).on("touchend.brush",oi):Wa.on("mousemove.brush",Bi).on("mouseup.brush",oi),fn.interrupt().selectAll("*").interrupt(),ia)Ra[0]=Ue[0]-Ra[0],Ra[1]=Be[0]-Ra[1];else if(vn){var za=+/w$/.test(vn),ei=+/^n/.test(vn);va=[Ue[1-za]-Ra[0],Be[1-ei]-Ra[1]],Ra[0]=Ue[za],Ra[1]=Be[ei]}else l.event.altKey&&(ua=Ra.slice());fn.style("pointer-events","none").selectAll(".resize").style("display",null),l.select("body").style("cursor",Yr.style("cursor")),Jr({type:"brushstart"}),Bi();function xi(){l.event.keyCode==32&&(ia||(ua=null,Ra[0]-=Ue[1],Ra[1]-=Be[1],ia=2),re())}function xo(){l.event.keyCode==32&&ia==2&&(Ra[0]+=Ue[1],Ra[1]+=Be[1],ia=0,re())}function Bi(){var Ka=l.mouse(Cr),Ci=!1;va&&(Ka[0]+=va[0],Ka[1]+=va[1]),ia||(l.event.altKey?(ua||(ua=[(Ue[0]+Ue[1])/2,(Be[0]+Be[1])/2]),Ra[0]=Ue[+(Ka[0]<ua[0])],Ra[1]=Be[+(Ka[1]<ua[1])]):ua=null),Qr&&ga(Ka,Te,0)&&(Ar(fn),Ci=!0),jn&&ga(Ka,Le,1)&&(tn(fn),Ci=!0),Ci&&(Zt(fn),Jr({type:"brush",mode:ia?"move":"resize"}))}function ga(Ka,Ci,ui){var vo=un(Ci),to=vo[0],Co=vo[1],os=Ra[ui],Qo=ui?Be:Ue,ss=Qo[1]-Qo[0],Xi,Hi;if(ia&&(to-=os,Co-=ss+os),Xi=(ui?Lt:vt)?Math.max(to,Math.min(Co,Ka[ui])):Ka[ui],ia?Hi=(Xi+=os)+ss:(ua&&(os=Math.max(to,Math.min(Co,2*ua[ui]-Xi))),os<Xi?(Hi=Xi,Xi=os):Hi=os),Qo[0]!=Xi||Qo[1]!=Hi)return ui?yt=null:Ke=null,Qo[0]=Xi,Qo[1]=Hi,!0}function oi(){Bi(),fn.style("pointer-events","all").selectAll(".resize").style("display",jt.empty()?"none":null),l.select("body").style("cursor",null),Wa.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Ma(),Jr({type:"brushend"})}}return jt.x=function(Cr){return arguments.length?(Te=Cr,Vt=ko[!Te<<1|!Le],jt):Te},jt.y=function(Cr){return arguments.length?(Le=Cr,Vt=ko[!Te<<1|!Le],jt):Le},jt.clamp=function(Cr){return arguments.length?(Te&&Le?(vt=!!Cr[0],Lt=!!Cr[1]):Te?vt=!!Cr:Le&&(Lt=!!Cr),jt):Te&&Le?[vt,Lt]:Te?vt:Le?Lt:null},jt.extent=function(Cr){var Yr,Jr,fn,vn,Qr;return arguments.length?(Te&&(Yr=Cr[0],Jr=Cr[1],Le&&(Yr=Yr[0],Jr=Jr[0]),Ke=[Yr,Jr],Te.invert&&(Yr=Te(Yr),Jr=Te(Jr)),Jr<Yr&&(Qr=Yr,Yr=Jr,Jr=Qr),(Yr!=Ue[0]||Jr!=Ue[1])&&(Ue=[Yr,Jr])),Le&&(fn=Cr[0],vn=Cr[1],Te&&(fn=fn[1],vn=vn[1]),yt=[fn,vn],Le.invert&&(fn=Le(fn),vn=Le(vn)),vn<fn&&(Qr=fn,fn=vn,vn=Qr),(fn!=Be[0]||vn!=Be[1])&&(Be=[fn,vn])),jt):(Te&&(Ke?(Yr=Ke[0],Jr=Ke[1]):(Yr=Ue[0],Jr=Ue[1],Te.invert&&(Yr=Te.invert(Yr),Jr=Te.invert(Jr)),Jr<Yr&&(Qr=Yr,Yr=Jr,Jr=Qr))),Le&&(yt?(fn=yt[0],vn=yt[1]):(fn=Be[0],vn=Be[1],Le.invert&&(fn=Le.invert(fn),vn=Le.invert(vn)),vn<fn&&(Qr=fn,fn=vn,vn=Qr))),Te&&Le?[[Yr,fn],[Jr,vn]]:Te?[Yr,Jr]:Le&&[fn,vn])},jt.clear=function(){return jt.empty()||(Ue=[0,0],Be=[0,0],Ke=yt=null),jt},jt.empty=function(){return!!Te&&Ue[0]==Ue[1]||!!Le&&Be[0]==Be[1]},l.rebind(jt,he,"on")};var Cs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ko=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];l.text=Ot(function(he){return he.responseText}),l.json=function(he,Te){return nr(he,"application/json",Yo,Te)};function Yo(he){return JSON.parse(he.responseText)}l.html=function(he,Te){return nr(he,"text/html",is,Te)};function is(he){var Te=p.createRange();return Te.selectNode(p.body),Te.createContextualFragment(he.responseText)}l.xml=Ot(function(he){return he.responseXML}),typeof k=="object"&&k.exports?k.exports=l:this.d3=l}).apply(self)},{}],59:[function(e,k,z){k.exports=e("./quad")},{"./quad":60}],60:[function(e,k,z){var l=e("binary-search-bounds"),o=e("clamp"),c=e("parse-rect"),p=e("array-bounds"),t=e("pick-by-alias"),n=e("defined"),a=e("flatten-vertex-data"),i=e("is-obj"),r=e("dtype"),f=e("math-log2"),u=1073741824;k.exports=function(d,y){y||(y={}),d=a(d,"float64"),y=t(y,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var m=n(y.maxDepth,255),g=n(y.bounds,p(d,2));g[0]===g[2]&&g[2]++,g[1]===g[3]&&g[3]++;var x=s(d,g),A=d.length>>>1,b;y.dtype||(y.dtype="array"),typeof y.dtype=="string"?b=new(r(y.dtype))(A):y.dtype&&(b=y.dtype,Array.isArray(b)&&(b.length=A));for(var S=0;S<A;++S)b[S]=S;var w=[],T=[],_=[],v=[];I(0,0,1,b,0,1);for(var P=0,M=0;M<w.length;M++){var E=w[M];if(b.set)b.set(E,P);else for(var D=0,N=E.length;D<N;D++)b[D+P]=E[D];var O=P+w[M].length;v[M]=[P,O],P=O}return b.range=F,b;function I(j,Z,te,re,W,J){if(!re.length)return null;var le=w[W]||(w[W]=[]),ue=_[W]||(_[W]=[]),se=T[W]||(T[W]=[]),G=le.length;if(W++,W>m||J>u){for(var Y=0;Y<re.length;Y++)le.push(re[Y]),ue.push(J),se.push(null,null,null,null);return G}if(le.push(re[0]),ue.push(J),re.length<=1)return se.push(null,null,null,null),G;for(var ee=te*.5,$=j+ee,K=Z+ee,Q=[],ae=[],ie=[],oe=[],fe=1,ye=re.length;fe<ye;fe++){var ce=re[fe],me=x[ce*2],xe=x[ce*2+1];me<$?xe<K?Q.push(ce):ae.push(ce):xe<K?ie.push(ce):oe.push(ce)}return J<<=2,se.push(I(j,Z,ee,Q,W,J),I(j,K,ee,ae,W,J+1),I($,Z,ee,ie,W,J+2),I($,K,ee,oe,W,J+3)),G}function F(){for(var j=[],Z=arguments.length;Z--;)j[Z]=arguments[Z];var te;if(i(j[j.length-1])){var re=j.pop();!j.length&&(re.x!=null||re.l!=null||re.left!=null)&&(j=[re],te={}),te=t(re,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else te={};j.length||(j=g);var W=c.apply(void 0,j),J=[Math.min(W.x,W.x+W.width),Math.min(W.y,W.y+W.height),Math.max(W.x,W.x+W.width),Math.max(W.y,W.y+W.height)],le=J[0],ue=J[1],se=J[2],G=J[3],Y=s([le,ue,se,G],g),ee=Y[0],$=Y[1],K=Y[2],Q=Y[3],ae=n(te.level,w.length);if(te.d!=null){var ie;typeof te.d=="number"?ie=[te.d,te.d]:te.d.length&&(ie=te.d),ae=Math.min(Math.max(Math.ceil(-f(Math.abs(ie[0])/(g[2]-g[0]))),Math.ceil(-f(Math.abs(ie[1])/(g[3]-g[1])))),ae)}if(ae=Math.min(ae,w.length),te.lod)return V(ee,$,K,Q,ae);var oe=[];fe(0,0,1,0,0,1);function fe(ce,me,xe,ke,Ae,Oe){if(!(Ae===null||Oe===null)){var He=ce+xe,Ge=me+xe;if(!(ee>He||$>Ge||K<ce||Q<me)&&!(ke>=ae)&&Ae!==Oe){var _e=w[ke];Oe===void 0&&(Oe=_e.length);for(var Ie=Ae;Ie<Oe;Ie++){var We=_e[Ie],et=d[We*2],Ne=d[We*2+1];et>=le&&et<=se&&Ne>=ue&&Ne<=G&&oe.push(We)}var De=T[ke],Ve=De[Ae*4+0],dt=De[Ae*4+1],Dt=De[Ae*4+2],Gt=De[Ae*4+3],Mt=ye(De,Ae+1),zt=xe*.5,Nt=ke+1;fe(ce,me,zt,Nt,Ve,dt||Dt||Gt||Mt),fe(ce,me+zt,zt,Nt,dt,Dt||Gt||Mt),fe(ce+zt,me,zt,Nt,Dt,Gt||Mt),fe(ce+zt,me+zt,zt,Nt,Gt,Mt)}}}function ye(ce,me){for(var xe=null,ke=0;xe===null;)if(xe=ce[me*4+ke],ke++,ke>ce.length)return null;return xe}return oe}function V(j,Z,te,re,W){for(var J=[],le=0;le<W;le++){var ue=_[le],se=v[le][0],G=U(j,Z,le),Y=U(te,re,le),ee=l.ge(ue,G),$=l.gt(ue,Y,ee,ue.length-1);J[le]=[ee+se,$+se]}return J}function U(j,Z,te){for(var re=1,W=.5,J=.5,le=.5,ue=0;ue<te;ue++)re<<=2,re+=j<W?Z<J?0:1:Z<J?2:3,le*=.5,W+=j<W?-le:le,J+=Z<J?-le:le;return re}};function s(h,d){for(var y=d[0],m=d[1],g=d[2],x=d[3],A=1/(g-y),b=1/(x-m),S=new Array(h.length),w=0,T=h.length/2;w<T;w++)S[2*w]=o((h[2*w]-y)*A,0,1),S[2*w+1]=o((h[2*w+1]-m)*b,0,1);return S}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(e,k,z){Object.defineProperty(z,"__esModule",{value:!0});var l=e("@turf/meta"),o=6378137;function c(i){return l.geomReduce(i,function(r,f){return r+p(f)},0)}z.default=c;function p(i){var r=0,f;switch(i.type){case"Polygon":return t(i.coordinates);case"MultiPolygon":for(f=0;f<i.coordinates.length;f++)r+=t(i.coordinates[f]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function t(i){var r=0;if(i&&i.length>0){r+=Math.abs(n(i[0]));for(var f=1;f<i.length;f++)r-=Math.abs(n(i[f]))}return r}function n(i){var r,f,u,s,h,d,y,m=0,g=i.length;if(g>2){for(y=0;y<g;y++)y===g-2?(s=g-2,h=g-1,d=0):y===g-1?(s=g-1,h=0,d=1):(s=y,h=y+1,d=y+2),r=i[s],f=i[h],u=i[d],m+=(a(u[0])-a(r[0]))*Math.sin(a(f[1]));m=m*o*o/2}return m}function a(i){return i*Math.PI/180}},{"@turf/meta":63}],62:[function(e,k,z){Object.defineProperty(z,"__esModule",{value:!0}),z.earthRadius=63710088e-1,z.factors={centimeters:z.earthRadius*100,centimetres:z.earthRadius*100,degrees:z.earthRadius/111325,feet:z.earthRadius*3.28084,inches:z.earthRadius*39.37,kilometers:z.earthRadius/1e3,kilometres:z.earthRadius/1e3,meters:z.earthRadius,metres:z.earthRadius,miles:z.earthRadius/1609.344,millimeters:z.earthRadius*1e3,millimetres:z.earthRadius*1e3,nauticalmiles:z.earthRadius/1852,radians:1,yards:z.earthRadius*1.0936},z.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/z.earthRadius,yards:1.0936133},z.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function l(M,E,D){D===void 0&&(D={});var N={type:"Feature"};return(D.id===0||D.id)&&(N.id=D.id),D.bbox&&(N.bbox=D.bbox),N.properties=E||{},N.geometry=M,N}z.feature=l;function o(M,E,D){switch(M){case"Point":return c(E).geometry;case"LineString":return a(E).geometry;case"Polygon":return t(E).geometry;case"MultiPoint":return u(E).geometry;case"MultiLineString":return f(E).geometry;case"MultiPolygon":return s(E).geometry;default:throw new Error(M+" is invalid")}}z.geometry=o;function c(M,E,D){if(D===void 0&&(D={}),!M)throw new Error("coordinates is required");if(!Array.isArray(M))throw new Error("coordinates must be an Array");if(M.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!T(M[0])||!T(M[1]))throw new Error("coordinates must contain numbers");var N={type:"Point",coordinates:M};return l(N,E,D)}z.point=c;function p(M,E,D){return D===void 0&&(D={}),r(M.map(function(N){return c(N,E)}),D)}z.points=p;function t(M,E,D){D===void 0&&(D={});for(var N=0,O=M;N<O.length;N++){var I=O[N];if(I.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var F=0;F<I[I.length-1].length;F++)if(I[I.length-1][F]!==I[0][F])throw new Error("First and last Position are not equivalent.")}var V={type:"Polygon",coordinates:M};return l(V,E,D)}z.polygon=t;function n(M,E,D){return D===void 0&&(D={}),r(M.map(function(N){return t(N,E)}),D)}z.polygons=n;function a(M,E,D){if(D===void 0&&(D={}),M.length<2)throw new Error("coordinates must be an array of two or more positions");var N={type:"LineString",coordinates:M};return l(N,E,D)}z.lineString=a;function i(M,E,D){return D===void 0&&(D={}),r(M.map(function(N){return a(N,E)}),D)}z.lineStrings=i;function r(M,E){E===void 0&&(E={});var D={type:"FeatureCollection"};return E.id&&(D.id=E.id),E.bbox&&(D.bbox=E.bbox),D.features=M,D}z.featureCollection=r;function f(M,E,D){D===void 0&&(D={});var N={type:"MultiLineString",coordinates:M};return l(N,E,D)}z.multiLineString=f;function u(M,E,D){D===void 0&&(D={});var N={type:"MultiPoint",coordinates:M};return l(N,E,D)}z.multiPoint=u;function s(M,E,D){D===void 0&&(D={});var N={type:"MultiPolygon",coordinates:M};return l(N,E,D)}z.multiPolygon=s;function h(M,E,D){D===void 0&&(D={});var N={type:"GeometryCollection",geometries:M};return l(N,E,D)}z.geometryCollection=h;function d(M,E){if(E===void 0&&(E=0),E&&!(E>=0))throw new Error("precision must be a positive number");var D=Math.pow(10,E||0);return Math.round(M*D)/D}z.round=d;function y(M,E){E===void 0&&(E="kilometers");var D=z.factors[E];if(!D)throw new Error(E+" units is invalid");return M*D}z.radiansToLength=y;function m(M,E){E===void 0&&(E="kilometers");var D=z.factors[E];if(!D)throw new Error(E+" units is invalid");return M/D}z.lengthToRadians=m;function g(M,E){return A(m(M,E))}z.lengthToDegrees=g;function x(M){var E=M%360;return E<0&&(E+=360),E}z.bearingToAzimuth=x;function A(M){var E=M%(2*Math.PI);return E*180/Math.PI}z.radiansToDegrees=A;function b(M){var E=M%360;return E*Math.PI/180}z.degreesToRadians=b;function S(M,E,D){if(E===void 0&&(E="kilometers"),D===void 0&&(D="kilometers"),!(M>=0))throw new Error("length must be a positive number");return y(m(M,E),D)}z.convertLength=S;function w(M,E,D){if(E===void 0&&(E="meters"),D===void 0&&(D="kilometers"),!(M>=0))throw new Error("area must be a positive number");var N=z.areaFactors[E];if(!N)throw new Error("invalid original units");var O=z.areaFactors[D];if(!O)throw new Error("invalid final units");return M/N*O}z.convertArea=w;function T(M){return!isNaN(M)&&M!==null&&!Array.isArray(M)}z.isNumber=T;function _(M){return!!M&&M.constructor===Object}z.isObject=_;function v(M){if(!M)throw new Error("bbox is required");if(!Array.isArray(M))throw new Error("bbox must be an Array");if(M.length!==4&&M.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");M.forEach(function(E){if(!T(E))throw new Error("bbox must only contain numbers")})}z.validateBBox=v;function P(M){if(!M)throw new Error("id is required");if(["string","number"].indexOf(typeof M)===-1)throw new Error("id must be a number or a string")}z.validateId=P},{}],63:[function(e,k,z){Object.defineProperty(z,"__esModule",{value:!0});var l=e("@turf/helpers");function o(A,b,S){if(A!==null)for(var w,T,_,v,P,M,E,D=0,N=0,O,I=A.type,F=I==="FeatureCollection",V=I==="Feature",U=F?A.features.length:1,j=0;j<U;j++){E=F?A.features[j].geometry:V?A.geometry:A,O=E?E.type==="GeometryCollection":!1,P=O?E.geometries.length:1;for(var Z=0;Z<P;Z++){var te=0,re=0;if(v=O?E.geometries[Z]:E,v!==null){M=v.coordinates;var W=v.type;switch(D=S&&(W==="Polygon"||W==="MultiPolygon")?1:0,W){case null:break;case"Point":if(b(M,N,j,te,re)===!1)return!1;N++,te++;break;case"LineString":case"MultiPoint":for(w=0;w<M.length;w++){if(b(M[w],N,j,te,re)===!1)return!1;N++,W==="MultiPoint"&&te++}W==="LineString"&&te++;break;case"Polygon":case"MultiLineString":for(w=0;w<M.length;w++){for(T=0;T<M[w].length-D;T++){if(b(M[w][T],N,j,te,re)===!1)return!1;N++}W==="MultiLineString"&&te++,W==="Polygon"&&re++}W==="Polygon"&&te++;break;case"MultiPolygon":for(w=0;w<M.length;w++){for(re=0,T=0;T<M[w].length;T++){for(_=0;_<M[w][T].length-D;_++){if(b(M[w][T][_],N,j,te,re)===!1)return!1;N++}re++}te++}break;case"GeometryCollection":for(w=0;w<v.geometries.length;w++)if(o(v.geometries[w],b,S)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function c(A,b,S,w){var T=S;return o(A,function(_,v,P,M,E){v===0&&S===void 0?T=_:T=b(T,_,v,P,M,E)},w),T}function p(A,b){var S;switch(A.type){case"FeatureCollection":for(S=0;S<A.features.length&&b(A.features[S].properties,S)!==!1;S++);break;case"Feature":b(A.properties,0);break}}function t(A,b,S){var w=S;return p(A,function(T,_){_===0&&S===void 0?w=T:w=b(w,T,_)}),w}function n(A,b){if(A.type==="Feature")b(A,0);else if(A.type==="FeatureCollection")for(var S=0;S<A.features.length&&b(A.features[S],S)!==!1;S++);}function a(A,b,S){var w=S;return n(A,function(T,_){_===0&&S===void 0?w=T:w=b(w,T,_)}),w}function i(A){var b=[];return o(A,function(S){b.push(S)}),b}function r(A,b){var S,w,T,_,v,P,M,E,D,N,O=0,I=A.type==="FeatureCollection",F=A.type==="Feature",V=I?A.features.length:1;for(S=0;S<V;S++){for(P=I?A.features[S].geometry:F?A.geometry:A,E=I?A.features[S].properties:F?A.properties:{},D=I?A.features[S].bbox:F?A.bbox:void 0,N=I?A.features[S].id:F?A.id:void 0,M=P?P.type==="GeometryCollection":!1,v=M?P.geometries.length:1,T=0;T<v;T++){if(_=M?P.geometries[T]:P,_===null){if(b(null,O,E,D,N)===!1)return!1;continue}switch(_.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(b(_,O,E,D,N)===!1)return!1;break}case"GeometryCollection":{for(w=0;w<_.geometries.length;w++)if(b(_.geometries[w],O,E,D,N)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}O++}}function f(A,b,S){var w=S;return r(A,function(T,_,v,P,M){_===0&&S===void 0?w=T:w=b(w,T,_,v,P,M)}),w}function u(A,b){r(A,function(S,w,T,_,v){var P=S===null?null:S.type;switch(P){case null:case"Point":case"LineString":case"Polygon":return b(l.feature(S,T,{bbox:_,id:v}),w,0)===!1?!1:void 0}var M;switch(P){case"MultiPoint":M="Point";break;case"MultiLineString":M="LineString";break;case"MultiPolygon":M="Polygon";break}for(var E=0;E<S.coordinates.length;E++){var D=S.coordinates[E],N={type:M,coordinates:D};if(b(l.feature(N,T),w,E)===!1)return!1}})}function s(A,b,S){var w=S;return u(A,function(T,_,v){_===0&&v===0&&S===void 0?w=T:w=b(w,T,_,v)}),w}function h(A,b){u(A,function(S,w,T){var _=0;if(!!S.geometry){var v=S.geometry.type;if(!(v==="Point"||v==="MultiPoint")){var P,M=0,E=0,D=0;if(o(S,function(N,O,I,F,V){if(P===void 0||w>M||F>E||V>D){P=N,M=w,E=F,D=V,_=0;return}var U=l.lineString([P,N],S.properties);if(b(U,w,T,V,_)===!1)return!1;_++,P=N})===!1)return!1}}})}function d(A,b,S){var w=S,T=!1;return h(A,function(_,v,P,M,E){T===!1&&S===void 0?w=_:w=b(w,_,v,P,M,E),T=!0}),w}function y(A,b){if(!A)throw new Error("geojson is required");u(A,function(S,w,T){if(S.geometry!==null){var _=S.geometry.type,v=S.geometry.coordinates;switch(_){case"LineString":if(b(S,w,T,0,0)===!1)return!1;break;case"Polygon":for(var P=0;P<v.length;P++)if(b(l.lineString(v[P],S.properties),w,T,P)===!1)return!1;break}}})}function m(A,b,S){var w=S;return y(A,function(T,_,v,P){_===0&&S===void 0?w=T:w=b(w,T,_,v,P)}),w}function g(A,b){if(b=b||{},!l.isObject(b))throw new Error("options is invalid");var S=b.featureIndex||0,w=b.multiFeatureIndex||0,T=b.geometryIndex||0,_=b.segmentIndex||0,v=b.properties,P;switch(A.type){case"FeatureCollection":S<0&&(S=A.features.length+S),v=v||A.features[S].properties,P=A.features[S].geometry;break;case"Feature":v=v||A.properties,P=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":P=A;break;default:throw new Error("geojson is invalid")}if(P===null)return null;var M=P.coordinates;switch(P.type){case"Point":case"MultiPoint":return null;case"LineString":return _<0&&(_=M.length+_-1),l.lineString([M[_],M[_+1]],v,b);case"Polygon":return T<0&&(T=M.length+T),_<0&&(_=M[T].length+_-1),l.lineString([M[T][_],M[T][_+1]],v,b);case"MultiLineString":return w<0&&(w=M.length+w),_<0&&(_=M[w].length+_-1),l.lineString([M[w][_],M[w][_+1]],v,b);case"MultiPolygon":return w<0&&(w=M.length+w),T<0&&(T=M[w].length+T),_<0&&(_=M[w][T].length-_-1),l.lineString([M[w][T][_],M[w][T][_+1]],v,b)}throw new Error("geojson is invalid")}function x(A,b){if(b=b||{},!l.isObject(b))throw new Error("options is invalid");var S=b.featureIndex||0,w=b.multiFeatureIndex||0,T=b.geometryIndex||0,_=b.coordIndex||0,v=b.properties,P;switch(A.type){case"FeatureCollection":S<0&&(S=A.features.length+S),v=v||A.features[S].properties,P=A.features[S].geometry;break;case"Feature":v=v||A.properties,P=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":P=A;break;default:throw new Error("geojson is invalid")}if(P===null)return null;var M=P.coordinates;switch(P.type){case"Point":return l.point(M,v,b);case"MultiPoint":return w<0&&(w=M.length+w),l.point(M[w],v,b);case"LineString":return _<0&&(_=M.length+_),l.point(M[_],v,b);case"Polygon":return T<0&&(T=M.length+T),_<0&&(_=M[T].length+_),l.point(M[T][_],v,b);case"MultiLineString":return w<0&&(w=M.length+w),_<0&&(_=M[w].length+_),l.point(M[w][_],v,b);case"MultiPolygon":return w<0&&(w=M.length+w),T<0&&(T=M[w].length+T),_<0&&(_=M[w][T].length-_),l.point(M[w][T][_],v,b)}throw new Error("geojson is invalid")}z.coordEach=o,z.coordReduce=c,z.propEach=p,z.propReduce=t,z.featureEach=n,z.featureReduce=a,z.coordAll=i,z.geomEach=r,z.geomReduce=f,z.flattenEach=u,z.flattenReduce=s,z.segmentEach=h,z.segmentReduce=d,z.lineEach=y,z.lineReduce=m,z.findSegment=g,z.findPoint=x},{"@turf/helpers":62}],64:[function(e,k,z){Object.defineProperty(z,"__esModule",{value:!0});var l=e("@turf/meta");function o(c){var p=[1/0,1/0,-1/0,-1/0];return l.coordEach(c,function(t){p[0]>t[0]&&(p[0]=t[0]),p[1]>t[1]&&(p[1]=t[1]),p[2]<t[0]&&(p[2]=t[0]),p[3]<t[1]&&(p[3]=t[1])}),p}o.default=o,z.default=o},{"@turf/meta":66}],65:[function(e,k,z){arguments[4][62][0].apply(z,arguments)},{dup:62}],66:[function(e,k,z){arguments[4][63][0].apply(z,arguments)},{"@turf/helpers":65,dup:63}],67:[function(e,k,z){Object.defineProperty(z,"__esModule",{value:!0});var l=e("@turf/meta"),o=e("@turf/helpers");function c(p,t){t===void 0&&(t={});var n=0,a=0,i=0;return l.coordEach(p,function(r){n+=r[0],a+=r[1],i++}),o.point([n/i,a/i],t.properties)}z.default=c},{"@turf/helpers":68,"@turf/meta":69}],68:[function(e,k,z){Object.defineProperty(z,"__esModule",{value:!0}),z.earthRadius=63710088e-1,z.factors={centimeters:z.earthRadius*100,centimetres:z.earthRadius*100,degrees:z.earthRadius/111325,feet:z.earthRadius*3.28084,inches:z.earthRadius*39.37,kilometers:z.earthRadius/1e3,kilometres:z.earthRadius/1e3,meters:z.earthRadius,metres:z.earthRadius,miles:z.earthRadius/1609.344,millimeters:z.earthRadius*1e3,millimetres:z.earthRadius*1e3,nauticalmiles:z.earthRadius/1852,radians:1,yards:z.earthRadius/1.0936},z.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/z.earthRadius,yards:1/1.0936},z.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function l(V,U,j){j===void 0&&(j={});var Z={type:"Feature"};return(j.id===0||j.id)&&(Z.id=j.id),j.bbox&&(Z.bbox=j.bbox),Z.properties=U||{},Z.geometry=V,Z}z.feature=l;function o(V,U,j){switch(V){case"Point":return c(U).geometry;case"LineString":return a(U).geometry;case"Polygon":return t(U).geometry;case"MultiPoint":return u(U).geometry;case"MultiLineString":return f(U).geometry;case"MultiPolygon":return s(U).geometry;default:throw new Error(V+" is invalid")}}z.geometry=o;function c(V,U,j){j===void 0&&(j={});var Z={type:"Point",coordinates:V};return l(Z,U,j)}z.point=c;function p(V,U,j){return j===void 0&&(j={}),r(V.map(function(Z){return c(Z,U)}),j)}z.points=p;function t(V,U,j){j===void 0&&(j={});for(var Z=0,te=V;Z<te.length;Z++){var re=te[Z];if(re.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var W=0;W<re[re.length-1].length;W++)if(re[re.length-1][W]!==re[0][W])throw new Error("First and last Position are not equivalent.")}var J={type:"Polygon",coordinates:V};return l(J,U,j)}z.polygon=t;function n(V,U,j){return j===void 0&&(j={}),r(V.map(function(Z){return t(Z,U)}),j)}z.polygons=n;function a(V,U,j){if(j===void 0&&(j={}),V.length<2)throw new Error("coordinates must be an array of two or more positions");var Z={type:"LineString",coordinates:V};return l(Z,U,j)}z.lineString=a;function i(V,U,j){return j===void 0&&(j={}),r(V.map(function(Z){return a(Z,U)}),j)}z.lineStrings=i;function r(V,U){U===void 0&&(U={});var j={type:"FeatureCollection"};return U.id&&(j.id=U.id),U.bbox&&(j.bbox=U.bbox),j.features=V,j}z.featureCollection=r;function f(V,U,j){j===void 0&&(j={});var Z={type:"MultiLineString",coordinates:V};return l(Z,U,j)}z.multiLineString=f;function u(V,U,j){j===void 0&&(j={});var Z={type:"MultiPoint",coordinates:V};return l(Z,U,j)}z.multiPoint=u;function s(V,U,j){j===void 0&&(j={});var Z={type:"MultiPolygon",coordinates:V};return l(Z,U,j)}z.multiPolygon=s;function h(V,U,j){j===void 0&&(j={});var Z={type:"GeometryCollection",geometries:V};return l(Z,U,j)}z.geometryCollection=h;function d(V,U){if(U===void 0&&(U=0),U&&!(U>=0))throw new Error("precision must be a positive number");var j=Math.pow(10,U||0);return Math.round(V*j)/j}z.round=d;function y(V,U){U===void 0&&(U="kilometers");var j=z.factors[U];if(!j)throw new Error(U+" units is invalid");return V*j}z.radiansToLength=y;function m(V,U){U===void 0&&(U="kilometers");var j=z.factors[U];if(!j)throw new Error(U+" units is invalid");return V/j}z.lengthToRadians=m;function g(V,U){return A(m(V,U))}z.lengthToDegrees=g;function x(V){var U=V%360;return U<0&&(U+=360),U}z.bearingToAzimuth=x;function A(V){var U=V%(2*Math.PI);return U*180/Math.PI}z.radiansToDegrees=A;function b(V){var U=V%360;return U*Math.PI/180}z.degreesToRadians=b;function S(V,U,j){if(U===void 0&&(U="kilometers"),j===void 0&&(j="kilometers"),!(V>=0))throw new Error("length must be a positive number");return y(m(V,U),j)}z.convertLength=S;function w(V,U,j){if(U===void 0&&(U="meters"),j===void 0&&(j="kilometers"),!(V>=0))throw new Error("area must be a positive number");var Z=z.areaFactors[U];if(!Z)throw new Error("invalid original units");var te=z.areaFactors[j];if(!te)throw new Error("invalid final units");return V/Z*te}z.convertArea=w;function T(V){return!isNaN(V)&&V!==null&&!Array.isArray(V)&&!/^\s*$/.test(V)}z.isNumber=T;function _(V){return!!V&&V.constructor===Object}z.isObject=_;function v(V){if(!V)throw new Error("bbox is required");if(!Array.isArray(V))throw new Error("bbox must be an Array");if(V.length!==4&&V.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");V.forEach(function(U){if(!T(U))throw new Error("bbox must only contain numbers")})}z.validateBBox=v;function P(V){if(!V)throw new Error("id is required");if(["string","number"].indexOf(typeof V)===-1)throw new Error("id must be a number or a string")}z.validateId=P;function M(){throw new Error("method has been renamed to `radiansToDegrees`")}z.radians2degrees=M;function E(){throw new Error("method has been renamed to `degreesToRadians`")}z.degrees2radians=E;function D(){throw new Error("method has been renamed to `lengthToDegrees`")}z.distanceToDegrees=D;function N(){throw new Error("method has been renamed to `lengthToRadians`")}z.distanceToRadians=N;function O(){throw new Error("method has been renamed to `radiansToLength`")}z.radiansToDistance=O;function I(){throw new Error("method has been renamed to `bearingToAzimuth`")}z.bearingToAngle=I;function F(){throw new Error("method has been renamed to `convertLength`")}z.convertDistance=F},{}],69:[function(e,k,z){Object.defineProperty(z,"__esModule",{value:!0});var l=e("@turf/helpers");function o(A,b,S){if(A!==null)for(var w,T,_,v,P,M,E,D=0,N=0,O,I=A.type,F=I==="FeatureCollection",V=I==="Feature",U=F?A.features.length:1,j=0;j<U;j++){E=F?A.features[j].geometry:V?A.geometry:A,O=E?E.type==="GeometryCollection":!1,P=O?E.geometries.length:1;for(var Z=0;Z<P;Z++){var te=0,re=0;if(v=O?E.geometries[Z]:E,v!==null){M=v.coordinates;var W=v.type;switch(D=S&&(W==="Polygon"||W==="MultiPolygon")?1:0,W){case null:break;case"Point":if(b(M,N,j,te,re)===!1)return!1;N++,te++;break;case"LineString":case"MultiPoint":for(w=0;w<M.length;w++){if(b(M[w],N,j,te,re)===!1)return!1;N++,W==="MultiPoint"&&te++}W==="LineString"&&te++;break;case"Polygon":case"MultiLineString":for(w=0;w<M.length;w++){for(T=0;T<M[w].length-D;T++){if(b(M[w][T],N,j,te,re)===!1)return!1;N++}W==="MultiLineString"&&te++,W==="Polygon"&&re++}W==="Polygon"&&te++;break;case"MultiPolygon":for(w=0;w<M.length;w++){for(re=0,T=0;T<M[w].length;T++){for(_=0;_<M[w][T].length-D;_++){if(b(M[w][T][_],N,j,te,re)===!1)return!1;N++}re++}te++}break;case"GeometryCollection":for(w=0;w<v.geometries.length;w++)if(o(v.geometries[w],b,S)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function c(A,b,S,w){var T=S;return o(A,function(_,v,P,M,E){v===0&&S===void 0?T=_:T=b(T,_,v,P,M,E)},w),T}function p(A,b){var S;switch(A.type){case"FeatureCollection":for(S=0;S<A.features.length&&b(A.features[S].properties,S)!==!1;S++);break;case"Feature":b(A.properties,0);break}}function t(A,b,S){var w=S;return p(A,function(T,_){_===0&&S===void 0?w=T:w=b(w,T,_)}),w}function n(A,b){if(A.type==="Feature")b(A,0);else if(A.type==="FeatureCollection")for(var S=0;S<A.features.length&&b(A.features[S],S)!==!1;S++);}function a(A,b,S){var w=S;return n(A,function(T,_){_===0&&S===void 0?w=T:w=b(w,T,_)}),w}function i(A){var b=[];return o(A,function(S){b.push(S)}),b}function r(A,b){var S,w,T,_,v,P,M,E,D,N,O=0,I=A.type==="FeatureCollection",F=A.type==="Feature",V=I?A.features.length:1;for(S=0;S<V;S++){for(P=I?A.features[S].geometry:F?A.geometry:A,E=I?A.features[S].properties:F?A.properties:{},D=I?A.features[S].bbox:F?A.bbox:void 0,N=I?A.features[S].id:F?A.id:void 0,M=P?P.type==="GeometryCollection":!1,v=M?P.geometries.length:1,T=0;T<v;T++){if(_=M?P.geometries[T]:P,_===null){if(b(null,O,E,D,N)===!1)return!1;continue}switch(_.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(b(_,O,E,D,N)===!1)return!1;break}case"GeometryCollection":{for(w=0;w<_.geometries.length;w++)if(b(_.geometries[w],O,E,D,N)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}O++}}function f(A,b,S){var w=S;return r(A,function(T,_,v,P,M){_===0&&S===void 0?w=T:w=b(w,T,_,v,P,M)}),w}function u(A,b){r(A,function(S,w,T,_,v){var P=S===null?null:S.type;switch(P){case null:case"Point":case"LineString":case"Polygon":return b(l.feature(S,T,{bbox:_,id:v}),w,0)===!1?!1:void 0}var M;switch(P){case"MultiPoint":M="Point";break;case"MultiLineString":M="LineString";break;case"MultiPolygon":M="Polygon";break}for(var E=0;E<S.coordinates.length;E++){var D=S.coordinates[E],N={type:M,coordinates:D};if(b(l.feature(N,T),w,E)===!1)return!1}})}function s(A,b,S){var w=S;return u(A,function(T,_,v){_===0&&v===0&&S===void 0?w=T:w=b(w,T,_,v)}),w}function h(A,b){u(A,function(S,w,T){var _=0;if(!!S.geometry){var v=S.geometry.type;if(!(v==="Point"||v==="MultiPoint")){var P,M=0,E=0,D=0;if(o(S,function(N,O,I,F,V){if(P===void 0||w>M||F>E||V>D){P=N,M=w,E=F,D=V,_=0;return}var U=l.lineString([P,N],S.properties);if(b(U,w,T,V,_)===!1)return!1;_++,P=N})===!1)return!1}}})}function d(A,b,S){var w=S,T=!1;return h(A,function(_,v,P,M,E){T===!1&&S===void 0?w=_:w=b(w,_,v,P,M,E),T=!0}),w}function y(A,b){if(!A)throw new Error("geojson is required");u(A,function(S,w,T){if(S.geometry!==null){var _=S.geometry.type,v=S.geometry.coordinates;switch(_){case"LineString":if(b(S,w,T,0,0)===!1)return!1;break;case"Polygon":for(var P=0;P<v.length;P++)if(b(l.lineString(v[P],S.properties),w,T,P)===!1)return!1;break}}})}function m(A,b,S){var w=S;return y(A,function(T,_,v,P){_===0&&S===void 0?w=T:w=b(w,T,_,v,P)}),w}function g(A,b){if(b=b||{},!l.isObject(b))throw new Error("options is invalid");var S=b.featureIndex||0,w=b.multiFeatureIndex||0,T=b.geometryIndex||0,_=b.segmentIndex||0,v=b.properties,P;switch(A.type){case"FeatureCollection":S<0&&(S=A.features.length+S),v=v||A.features[S].properties,P=A.features[S].geometry;break;case"Feature":v=v||A.properties,P=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":P=A;break;default:throw new Error("geojson is invalid")}if(P===null)return null;var M=P.coordinates;switch(P.type){case"Point":case"MultiPoint":return null;case"LineString":return _<0&&(_=M.length+_-1),l.lineString([M[_],M[_+1]],v,b);case"Polygon":return T<0&&(T=M.length+T),_<0&&(_=M[T].length+_-1),l.lineString([M[T][_],M[T][_+1]],v,b);case"MultiLineString":return w<0&&(w=M.length+w),_<0&&(_=M[w].length+_-1),l.lineString([M[w][_],M[w][_+1]],v,b);case"MultiPolygon":return w<0&&(w=M.length+w),T<0&&(T=M[w].length+T),_<0&&(_=M[w][T].length-_-1),l.lineString([M[w][T][_],M[w][T][_+1]],v,b)}throw new Error("geojson is invalid")}function x(A,b){if(b=b||{},!l.isObject(b))throw new Error("options is invalid");var S=b.featureIndex||0,w=b.multiFeatureIndex||0,T=b.geometryIndex||0,_=b.coordIndex||0,v=b.properties,P;switch(A.type){case"FeatureCollection":S<0&&(S=A.features.length+S),v=v||A.features[S].properties,P=A.features[S].geometry;break;case"Feature":v=v||A.properties,P=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":P=A;break;default:throw new Error("geojson is invalid")}if(P===null)return null;var M=P.coordinates;switch(P.type){case"Point":return l.point(M,v,b);case"MultiPoint":return w<0&&(w=M.length+w),l.point(M[w],v,b);case"LineString":return _<0&&(_=M.length+_),l.point(M[_],v,b);case"Polygon":return T<0&&(T=M.length+T),_<0&&(_=M[T].length+_),l.point(M[T][_],v,b);case"MultiLineString":return w<0&&(w=M.length+w),_<0&&(_=M[w].length+_),l.point(M[w][_],v,b);case"MultiPolygon":return w<0&&(w=M.length+w),T<0&&(T=M[w].length+T),_<0&&(_=M[w][T].length-_),l.point(M[w][T][_],v,b)}throw new Error("geojson is invalid")}z.coordEach=o,z.coordReduce=c,z.propEach=p,z.propReduce=t,z.featureEach=n,z.featureReduce=a,z.coordAll=i,z.geomEach=r,z.geomReduce=f,z.flattenEach=u,z.flattenReduce=s,z.segmentEach=h,z.segmentReduce=d,z.lineEach=y,z.lineReduce=m,z.findSegment=g,z.findPoint=x},{"@turf/helpers":68}],70:[function(e,k,z){k.exports=l;function l(o){var c=0,p=0,t=0,n=0;return o.map(function(a){a=a.slice();var i=a[0],r=i.toUpperCase();if(i!=r)switch(a[0]=r,i){case"a":a[6]+=t,a[7]+=n;break;case"v":a[1]+=n;break;case"h":a[1]+=t;break;default:for(var f=1;f<a.length;)a[f++]+=t,a[f++]+=n}switch(r){case"Z":t=c,n=p;break;case"H":t=a[1];break;case"V":n=a[1];break;case"M":t=c=a[1],n=p=a[2];break;default:t=a[a.length-2],n=a[a.length-1]}return a})}},{}],71:[function(e,k,z){k.exports=l;function l(o,c){if(!o||o.length==null)throw Error("Argument should be an array");c==null?c=1:c=Math.floor(c);for(var p=Array(c*2),t=0;t<c;t++){for(var n=-1/0,a=1/0,i=t,r=o.length;i<r;i+=c)o[i]>n&&(n=o[i]),o[i]<a&&(a=o[i]);p[t]=a,p[c+t]=n}return p}},{}],72:[function(e,k,z){k.exports=function(l,o,c){if(typeof Array.prototype.findIndex=="function")return l.findIndex(o,c);if(typeof o!="function")throw new TypeError("predicate must be a function");var p=Object(l),t=p.length;if(t===0)return-1;for(var n=0;n<t;n++)if(o.call(c,p[n],n,p))return n;return-1}},{}],73:[function(e,k,z){var l=e("array-bounds");k.exports=o;function o(c,p,t){if(!c||c.length==null)throw Error("Argument should be an array");p==null&&(p=1),t==null&&(t=l(c,p));for(var n=0;n<p;n++){var a=t[p+n],i=t[n],r=n,f=c.length;if(a===1/0&&i===-1/0)for(r=n;r<f;r+=p)c[r]=c[r]===a?1:c[r]===i?0:.5;else if(a===1/0)for(r=n;r<f;r+=p)c[r]=c[r]===a?1:0;else if(i===-1/0)for(r=n;r<f;r+=p)c[r]=c[r]===i?0:1;else{var u=a-i;for(r=n;r<f;r+=p)isNaN(c[r])||(c[r]=u===0?.5:(c[r]-i)/u)}}return c}},{"array-bounds":71}],74:[function(e,k,z){k.exports=function(o,c){var p=typeof o=="number",t=typeof c=="number";p&&!t?(c=o,o=0):!p&&!t&&(o=0,c=0),o=o|0,c=c|0;var n=c-o;if(n<0)throw new Error("array length must be positive");for(var a=new Array(n),i=0,r=o;i<n;i++,r++)a[i]=r;return a}},{}],75:[function(e,k,z){(function(l){(function(){var o=e("object-assign");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function c(E,D){if(E===D)return 0;for(var N=E.length,O=D.length,I=0,F=Math.min(N,O);I<F;++I)if(E[I]!==D[I]){N=E[I],O=D[I];break}return N<O?-1:O<N?1:0}function p(E){return l.Buffer&&typeof l.Buffer.isBuffer=="function"?l.Buffer.isBuffer(E):!!(E!=null&&E._isBuffer)}var t=e("util/"),n=Object.prototype.hasOwnProperty,a=Array.prototype.slice,i=function(){return function(){}.name==="foo"}();function r(E){return Object.prototype.toString.call(E)}function f(E){return p(E)||typeof l.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(E):E?!!(E instanceof DataView||E.buffer&&E.buffer instanceof ArrayBuffer):!1}var u=k.exports=x,s=/\s*function\s+([^\(\s]*)\s*/;function h(E){if(!!t.isFunction(E)){if(i)return E.name;var D=E.toString(),N=D.match(s);return N&&N[1]}}u.AssertionError=function(D){this.name="AssertionError",this.actual=D.actual,this.expected=D.expected,this.operator=D.operator,D.message?(this.message=D.message,this.generatedMessage=!1):(this.message=m(this),this.generatedMessage=!0);var N=D.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,N);else{var O=new Error;if(O.stack){var I=O.stack,F=h(N),V=I.indexOf(`
`+F);if(V>=0){var U=I.indexOf(`
`,V+1);I=I.substring(U+1)}this.stack=I}}},t.inherits(u.AssertionError,Error);function d(E,D){return typeof E=="string"?E.length<D?E:E.slice(0,D):E}function y(E){if(i||!t.isFunction(E))return t.inspect(E);var D=h(E),N=D?": "+D:"";return"[Function"+N+"]"}function m(E){return d(y(E.actual),128)+" "+E.operator+" "+d(y(E.expected),128)}function g(E,D,N,O,I){throw new u.AssertionError({message:N,actual:E,expected:D,operator:O,stackStartFunction:I})}u.fail=g;function x(E,D){E||g(E,!0,D,"==",u.ok)}u.ok=x,u.equal=function(D,N,O){D!=N&&g(D,N,O,"==",u.equal)},u.notEqual=function(D,N,O){D==N&&g(D,N,O,"!=",u.notEqual)},u.deepEqual=function(D,N,O){A(D,N,!1)||g(D,N,O,"deepEqual",u.deepEqual)},u.deepStrictEqual=function(D,N,O){A(D,N,!0)||g(D,N,O,"deepStrictEqual",u.deepStrictEqual)};function A(E,D,N,O){if(E===D)return!0;if(p(E)&&p(D))return c(E,D)===0;if(t.isDate(E)&&t.isDate(D))return E.getTime()===D.getTime();if(t.isRegExp(E)&&t.isRegExp(D))return E.source===D.source&&E.global===D.global&&E.multiline===D.multiline&&E.lastIndex===D.lastIndex&&E.ignoreCase===D.ignoreCase;if((E===null||typeof E!="object")&&(D===null||typeof D!="object"))return N?E===D:E==D;if(f(E)&&f(D)&&r(E)===r(D)&&!(E instanceof Float32Array||E instanceof Float64Array))return c(new Uint8Array(E.buffer),new Uint8Array(D.buffer))===0;if(p(E)!==p(D))return!1;O=O||{actual:[],expected:[]};var I=O.actual.indexOf(E);return I!==-1&&I===O.expected.indexOf(D)?!0:(O.actual.push(E),O.expected.push(D),S(E,D,N,O))}function b(E){return Object.prototype.toString.call(E)=="[object Arguments]"}function S(E,D,N,O){if(E==null||D===null||D===void 0)return!1;if(t.isPrimitive(E)||t.isPrimitive(D))return E===D;if(N&&Object.getPrototypeOf(E)!==Object.getPrototypeOf(D))return!1;var I=b(E),F=b(D);if(I&&!F||!I&&F)return!1;if(I)return E=a.call(E),D=a.call(D),A(E,D,N);var V=M(E),U=M(D),j,Z;if(V.length!==U.length)return!1;for(V.sort(),U.sort(),Z=V.length-1;Z>=0;Z--)if(V[Z]!==U[Z])return!1;for(Z=V.length-1;Z>=0;Z--)if(j=V[Z],!A(E[j],D[j],N,O))return!1;return!0}u.notDeepEqual=function(D,N,O){A(D,N,!1)&&g(D,N,O,"notDeepEqual",u.notDeepEqual)},u.notDeepStrictEqual=w;function w(E,D,N){A(E,D,!0)&&g(E,D,N,"notDeepStrictEqual",w)}u.strictEqual=function(D,N,O){D!==N&&g(D,N,O,"===",u.strictEqual)},u.notStrictEqual=function(D,N,O){D===N&&g(D,N,O,"!==",u.notStrictEqual)};function T(E,D){if(!E||!D)return!1;if(Object.prototype.toString.call(D)=="[object RegExp]")return D.test(E);try{if(E instanceof D)return!0}catch{}return Error.isPrototypeOf(D)?!1:D.call({},E)===!0}function _(E){var D;try{E()}catch(N){D=N}return D}function v(E,D,N,O){var I;if(typeof D!="function")throw new TypeError('"block" argument must be a function');typeof N=="string"&&(O=N,N=null),I=_(D),O=(N&&N.name?" ("+N.name+").":".")+(O?" "+O:"."),E&&!I&&g(I,N,"Missing expected exception"+O);var F=typeof O=="string",V=!E&&t.isError(I),U=!E&&I&&!N;if((V&&F&&T(I,N)||U)&&g(I,N,"Got unwanted exception"+O),E&&I&&N&&!T(I,N)||!E&&I)throw I}u.throws=function(E,D,N){v(!0,E,D,N)},u.doesNotThrow=function(E,D,N){v(!1,E,D,N)},u.ifError=function(E){if(E)throw E};function P(E,D){E||g(E,!0,D,"==",P)}u.strict=o(P,u,{equal:u.strictEqual,deepEqual:u.deepStrictEqual,notEqual:u.notStrictEqual,notDeepEqual:u.notDeepStrictEqual}),u.strict.strict=u.strict;var M=Object.keys||function(E){var D=[];for(var N in E)n.call(E,N)&&D.push(N);return D}}).call(this)}).call(this,typeof lo!="undefined"?lo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"object-assign":247,"util/":78}],76:[function(e,k,z){typeof Object.create=="function"?k.exports=function(o,c){o.super_=c,o.prototype=Object.create(c.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}})}:k.exports=function(o,c){o.super_=c;var p=function(){};p.prototype=c.prototype,o.prototype=new p,o.prototype.constructor=o}},{}],77:[function(e,k,z){k.exports=function(o){return o&&typeof o=="object"&&typeof o.copy=="function"&&typeof o.fill=="function"&&typeof o.readUInt8=="function"}},{}],78:[function(e,k,z){(function(l,o){(function(){var c=/%[sdj%]/g;z.format=function(U){if(!S(U)){for(var j=[],Z=0;Z<arguments.length;Z++)j.push(n(arguments[Z]));return j.join(" ")}for(var Z=1,te=arguments,re=te.length,W=String(U).replace(c,function(le){if(le==="%%")return"%";if(Z>=re)return le;switch(le){case"%s":return String(te[Z++]);case"%d":return Number(te[Z++]);case"%j":try{return JSON.stringify(te[Z++])}catch{return"[Circular]"}default:return le}}),J=te[Z];Z<re;J=te[++Z])x(J)||!v(J)?W+=" "+J:W+=" "+n(J);return W},z.deprecate=function(U,j){if(T(o.process))return function(){return z.deprecate(U,j).apply(this,arguments)};if(l.noDeprecation===!0)return U;var Z=!1;function te(){if(!Z){if(l.throwDeprecation)throw new Error(j);l.traceDeprecation?console.trace(j):console.error(j),Z=!0}return U.apply(this,arguments)}return te};var p={},t;z.debuglog=function(U){if(T(t)&&(t=""),U=U.toUpperCase(),!p[U])if(new RegExp("\\b"+U+"\\b","i").test(t)){var j=l.pid;p[U]=function(){var Z=z.format.apply(z,arguments);console.error("%s %d: %s",U,j,Z)}}else p[U]=function(){};return p[U]};function n(U,j){var Z={seen:[],stylize:i};return arguments.length>=3&&(Z.depth=arguments[2]),arguments.length>=4&&(Z.colors=arguments[3]),g(j)?Z.showHidden=j:j&&z._extend(Z,j),T(Z.showHidden)&&(Z.showHidden=!1),T(Z.depth)&&(Z.depth=2),T(Z.colors)&&(Z.colors=!1),T(Z.customInspect)&&(Z.customInspect=!0),Z.colors&&(Z.stylize=a),f(Z,U,Z.depth)}z.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(U,j){var Z=n.styles[j];return Z?"["+n.colors[Z][0]+"m"+U+"["+n.colors[Z][1]+"m":U}function i(U,j){return U}function r(U){var j={};return U.forEach(function(Z,te){j[Z]=!0}),j}function f(U,j,Z){if(U.customInspect&&j&&E(j.inspect)&&j.inspect!==z.inspect&&!(j.constructor&&j.constructor.prototype===j)){var te=j.inspect(Z,U);return S(te)||(te=f(U,te,Z)),te}var re=u(U,j);if(re)return re;var W=Object.keys(j),J=r(W);if(U.showHidden&&(W=Object.getOwnPropertyNames(j)),M(j)&&(W.indexOf("message")>=0||W.indexOf("description")>=0))return s(j);if(W.length===0){if(E(j)){var le=j.name?": "+j.name:"";return U.stylize("[Function"+le+"]","special")}if(_(j))return U.stylize(RegExp.prototype.toString.call(j),"regexp");if(P(j))return U.stylize(Date.prototype.toString.call(j),"date");if(M(j))return s(j)}var ue="",se=!1,G=["{","}"];if(m(j)&&(se=!0,G=["[","]"]),E(j)){var Y=j.name?": "+j.name:"";ue=" [Function"+Y+"]"}if(_(j)&&(ue=" "+RegExp.prototype.toString.call(j)),P(j)&&(ue=" "+Date.prototype.toUTCString.call(j)),M(j)&&(ue=" "+s(j)),W.length===0&&(!se||j.length==0))return G[0]+ue+G[1];if(Z<0)return _(j)?U.stylize(RegExp.prototype.toString.call(j),"regexp"):U.stylize("[Object]","special");U.seen.push(j);var ee;return se?ee=h(U,j,Z,J,W):ee=W.map(function($){return d(U,j,Z,J,$,se)}),U.seen.pop(),y(ee,ue,G)}function u(U,j){if(T(j))return U.stylize("undefined","undefined");if(S(j)){var Z="'"+JSON.stringify(j).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return U.stylize(Z,"string")}if(b(j))return U.stylize(""+j,"number");if(g(j))return U.stylize(""+j,"boolean");if(x(j))return U.stylize("null","null")}function s(U){return"["+Error.prototype.toString.call(U)+"]"}function h(U,j,Z,te,re){for(var W=[],J=0,le=j.length;J<le;++J)V(j,String(J))?W.push(d(U,j,Z,te,String(J),!0)):W.push("");return re.forEach(function(ue){ue.match(/^\d+$/)||W.push(d(U,j,Z,te,ue,!0))}),W}function d(U,j,Z,te,re,W){var J,le,ue;if(ue=Object.getOwnPropertyDescriptor(j,re)||{value:j[re]},ue.get?ue.set?le=U.stylize("[Getter/Setter]","special"):le=U.stylize("[Getter]","special"):ue.set&&(le=U.stylize("[Setter]","special")),V(te,re)||(J="["+re+"]"),le||(U.seen.indexOf(ue.value)<0?(x(Z)?le=f(U,ue.value,null):le=f(U,ue.value,Z-1),le.indexOf(`
`)>-1&&(W?le=le.split(`
`).map(function(se){return"  "+se}).join(`
`).substr(2):le=`
`+le.split(`
`).map(function(se){return"   "+se}).join(`
`))):le=U.stylize("[Circular]","special")),T(J)){if(W&&re.match(/^\d+$/))return le;J=JSON.stringify(""+re),J.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(J=J.substr(1,J.length-2),J=U.stylize(J,"name")):(J=J.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),J=U.stylize(J,"string"))}return J+": "+le}function y(U,j,Z){var te=U.reduce(function(re,W){return W.indexOf(`
`)>=0,re+W.replace(/\u001b\[\d\d?m/g,"").length+1},0);return te>60?Z[0]+(j===""?"":j+`
 `)+" "+U.join(`,
  `)+" "+Z[1]:Z[0]+j+" "+U.join(", ")+" "+Z[1]}function m(U){return Array.isArray(U)}z.isArray=m;function g(U){return typeof U=="boolean"}z.isBoolean=g;function x(U){return U===null}z.isNull=x;function A(U){return U==null}z.isNullOrUndefined=A;function b(U){return typeof U=="number"}z.isNumber=b;function S(U){return typeof U=="string"}z.isString=S;function w(U){return typeof U=="symbol"}z.isSymbol=w;function T(U){return U===void 0}z.isUndefined=T;function _(U){return v(U)&&N(U)==="[object RegExp]"}z.isRegExp=_;function v(U){return typeof U=="object"&&U!==null}z.isObject=v;function P(U){return v(U)&&N(U)==="[object Date]"}z.isDate=P;function M(U){return v(U)&&(N(U)==="[object Error]"||U instanceof Error)}z.isError=M;function E(U){return typeof U=="function"}z.isFunction=E;function D(U){return U===null||typeof U=="boolean"||typeof U=="number"||typeof U=="string"||typeof U=="symbol"||typeof U=="undefined"}z.isPrimitive=D,z.isBuffer=e("./support/isBuffer");function N(U){return Object.prototype.toString.call(U)}function O(U){return U<10?"0"+U.toString(10):U.toString(10)}var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function F(){var U=new Date,j=[O(U.getHours()),O(U.getMinutes()),O(U.getSeconds())].join(":");return[U.getDate(),I[U.getMonth()],j].join(" ")}z.log=function(){console.log("%s - %s",F(),z.format.apply(z,arguments))},z.inherits=e("inherits"),z._extend=function(U,j){if(!j||!v(j))return U;for(var Z=Object.keys(j),te=Z.length;te--;)U[Z[te]]=j[Z[te]];return U};function V(U,j){return Object.prototype.hasOwnProperty.call(U,j)}}).call(this)}).call(this,e("_process"),typeof lo!="undefined"?lo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./support/isBuffer":77,_process:277,inherits:76}],79:[function(e,k,z){z.byteLength=i,z.toByteArray=f,z.fromByteArray=h;for(var l=[],o=[],c=typeof Uint8Array!="undefined"?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=p.length;t<n;++t)l[t]=p[t],o[p.charCodeAt(t)]=t;o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63;function a(d){var y=d.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=d.indexOf("=");m===-1&&(m=y);var g=m===y?0:4-m%4;return[m,g]}function i(d){var y=a(d),m=y[0],g=y[1];return(m+g)*3/4-g}function r(d,y,m){return(y+m)*3/4-m}function f(d){var y,m=a(d),g=m[0],x=m[1],A=new c(r(d,g,x)),b=0,S=x>0?g-4:g,w;for(w=0;w<S;w+=4)y=o[d.charCodeAt(w)]<<18|o[d.charCodeAt(w+1)]<<12|o[d.charCodeAt(w+2)]<<6|o[d.charCodeAt(w+3)],A[b++]=y>>16&255,A[b++]=y>>8&255,A[b++]=y&255;return x===2&&(y=o[d.charCodeAt(w)]<<2|o[d.charCodeAt(w+1)]>>4,A[b++]=y&255),x===1&&(y=o[d.charCodeAt(w)]<<10|o[d.charCodeAt(w+1)]<<4|o[d.charCodeAt(w+2)]>>2,A[b++]=y>>8&255,A[b++]=y&255),A}function u(d){return l[d>>18&63]+l[d>>12&63]+l[d>>6&63]+l[d&63]}function s(d,y,m){for(var g,x=[],A=y;A<m;A+=3)g=(d[A]<<16&16711680)+(d[A+1]<<8&65280)+(d[A+2]&255),x.push(u(g));return x.join("")}function h(d){for(var y,m=d.length,g=m%3,x=[],A=16383,b=0,S=m-g;b<S;b+=A)x.push(s(d,b,b+A>S?S:b+A));return g===1?(y=d[m-1],x.push(l[y>>2]+l[y<<4&63]+"==")):g===2&&(y=(d[m-2]<<8)+d[m-1],x.push(l[y>>10]+l[y>>4&63]+l[y<<2&63]+"=")),x.join("")}},{}],80:[function(e,k,z){function l(a,i,r,f,u){for(var s=u+1;f<=u;){var h=f+u>>>1,d=a[h],y=r!==void 0?r(d,i):d-i;y>=0?(s=h,u=h-1):f=h+1}return s}function o(a,i,r,f,u){for(var s=u+1;f<=u;){var h=f+u>>>1,d=a[h],y=r!==void 0?r(d,i):d-i;y>0?(s=h,u=h-1):f=h+1}return s}function c(a,i,r,f,u){for(var s=f-1;f<=u;){var h=f+u>>>1,d=a[h],y=r!==void 0?r(d,i):d-i;y<0?(s=h,f=h+1):u=h-1}return s}function p(a,i,r,f,u){for(var s=f-1;f<=u;){var h=f+u>>>1,d=a[h],y=r!==void 0?r(d,i):d-i;y<=0?(s=h,f=h+1):u=h-1}return s}function t(a,i,r,f,u){for(;f<=u;){var s=f+u>>>1,h=a[s],d=r!==void 0?r(h,i):h-i;if(d===0)return s;d<=0?f=s+1:u=s-1}return-1}function n(a,i,r,f,u,s){return typeof r=="function"?s(a,i,r,f===void 0?0:f|0,u===void 0?a.length-1:u|0):s(a,i,void 0,r===void 0?0:r|0,f===void 0?a.length-1:f|0)}k.exports={ge:function(a,i,r,f,u){return n(a,i,r,f,u,l)},gt:function(a,i,r,f,u){return n(a,i,r,f,u,o)},lt:function(a,i,r,f,u){return n(a,i,r,f,u,c)},le:function(a,i,r,f,u){return n(a,i,r,f,u,p)},eq:function(a,i,r,f,u){return n(a,i,r,f,u,t)}}},{}],81:[function(e,k,z){var l=32;z.INT_BITS=l,z.INT_MAX=2147483647,z.INT_MIN=-1<<l-1,z.sign=function(p){return(p>0)-(p<0)},z.abs=function(p){var t=p>>l-1;return(p^t)-t},z.min=function(p,t){return t^(p^t)&-(p<t)},z.max=function(p,t){return p^(p^t)&-(p<t)},z.isPow2=function(p){return!(p&p-1)&&!!p},z.log2=function(p){var t,n;return t=(p>65535)<<4,p>>>=t,n=(p>255)<<3,p>>>=n,t|=n,n=(p>15)<<2,p>>>=n,t|=n,n=(p>3)<<1,p>>>=n,t|=n,t|p>>1},z.log10=function(p){return p>=1e9?9:p>=1e8?8:p>=1e7?7:p>=1e6?6:p>=1e5?5:p>=1e4?4:p>=1e3?3:p>=100?2:p>=10?1:0},z.popCount=function(p){return p=p-(p>>>1&1431655765),p=(p&858993459)+(p>>>2&858993459),(p+(p>>>4)&252645135)*16843009>>>24};function o(p){var t=32;return p&=-p,p&&t--,p&65535&&(t-=16),p&16711935&&(t-=8),p&252645135&&(t-=4),p&858993459&&(t-=2),p&1431655765&&(t-=1),t}z.countTrailingZeros=o,z.nextPow2=function(p){return p+=p===0,--p,p|=p>>>1,p|=p>>>2,p|=p>>>4,p|=p>>>8,p|=p>>>16,p+1},z.prevPow2=function(p){return p|=p>>>1,p|=p>>>2,p|=p>>>4,p|=p>>>8,p|=p>>>16,p-(p>>>1)},z.parity=function(p){return p^=p>>>16,p^=p>>>8,p^=p>>>4,p&=15,27030>>>p&1};var c=new Array(256);(function(p){for(var t=0;t<256;++t){var n=t,a=t,i=7;for(n>>>=1;n;n>>>=1)a<<=1,a|=n&1,--i;p[t]=a<<i&255}})(c),z.reverse=function(p){return c[p&255]<<24|c[p>>>8&255]<<16|c[p>>>16&255]<<8|c[p>>>24&255]},z.interleave2=function(p,t){return p&=65535,p=(p|p<<8)&16711935,p=(p|p<<4)&252645135,p=(p|p<<2)&858993459,p=(p|p<<1)&1431655765,t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,p|t<<1},z.deinterleave2=function(p,t){return p=p>>>t&1431655765,p=(p|p>>>1)&858993459,p=(p|p>>>2)&252645135,p=(p|p>>>4)&16711935,p=(p|p>>>16)&65535,p<<16>>16},z.interleave3=function(p,t,n){return p&=1023,p=(p|p<<16)&4278190335,p=(p|p<<8)&251719695,p=(p|p<<4)&3272356035,p=(p|p<<2)&1227133513,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,p|=t<<1,n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,p|n<<2},z.deinterleave3=function(p,t){return p=p>>>t&1227133513,p=(p|p>>>2)&3272356035,p=(p|p>>>4)&251719695,p=(p|p>>>8)&4278190335,p=(p|p>>>16)&1023,p<<22>>22},z.nextCombination=function(p){var t=p|p-1;return t+1|(~t&-~t)-1>>>o(p)+1}},{}],82:[function(e,k,z){var l=e("clamp");k.exports=c;var o=1e20;function c(n,a){a||(a={});var i=a.cutoff==null?.25:a.cutoff,r=a.radius==null?8:a.radius,f=a.channel||0,u,s,h,d,y,m,g,x,A,b,S;if(ArrayBuffer.isView(n)||Array.isArray(n)){if(!a.width||!a.height)throw Error("For raw data width and height should be provided by options");u=a.width,s=a.height,d=n,a.stride?m=a.stride:m=Math.floor(n.length/u/s)}else window.HTMLCanvasElement&&n instanceof window.HTMLCanvasElement?(x=n,g=x.getContext("2d"),u=x.width,s=x.height,A=g.getImageData(0,0,u,s),d=A.data,m=4):window.CanvasRenderingContext2D&&n instanceof window.CanvasRenderingContext2D?(x=n.canvas,g=n,u=x.width,s=x.height,A=g.getImageData(0,0,u,s),d=A.data,m=4):window.ImageData&&n instanceof window.ImageData&&(A=n,u=n.width,s=n.height,d=A.data,m=4);if(h=Math.max(u,s),window.Uint8ClampedArray&&d instanceof window.Uint8ClampedArray||window.Uint8Array&&d instanceof window.Uint8Array)for(y=d,d=Array(u*s),b=0,S=y.length;b<S;b++)d[b]=y[b*m+f]/255;else if(m!==1)throw Error("Raw data can have only 1 value per pixel");var w=Array(u*s),T=Array(u*s),_=Array(h),v=Array(h),P=Array(h+1),M=Array(h);for(b=0,S=u*s;b<S;b++){var E=d[b];w[b]=E===1?0:E===0?o:Math.pow(Math.max(0,.5-E),2),T[b]=E===1?o:E===0?0:Math.pow(Math.max(0,E-.5),2)}p(w,u,s,_,v,M,P),p(T,u,s,_,v,M,P);var D=window.Float32Array?new Float32Array(u*s):new Array(u*s);for(b=0,S=u*s;b<S;b++)D[b]=l(1-((w[b]-T[b])/r+i),0,1);return D}function p(n,a,i,r,f,u,s){for(var h=0;h<a;h++){for(var d=0;d<i;d++)r[d]=n[d*a+h];for(t(r,f,u,s,i),d=0;d<i;d++)n[d*a+h]=f[d]}for(d=0;d<i;d++){for(h=0;h<a;h++)r[h]=n[d*a+h];for(t(r,f,u,s,a),h=0;h<a;h++)n[d*a+h]=Math.sqrt(f[h])}}function t(n,a,i,r,f){i[0]=0,r[0]=-o,r[1]=+o;for(var u=1,s=0;u<f;u++){for(var h=(n[u]+u*u-(n[i[s]]+i[s]*i[s]))/(2*u-2*i[s]);h<=r[s];)s--,h=(n[u]+u*u-(n[i[s]]+i[s]*i[s]))/(2*u-2*i[s]);s++,i[s]=u,r[s]=h,r[s+1]=+o}for(u=0,s=0;u<f;u++){for(;r[s+1]<u;)s++;a[u]=(u-i[s])*(u-i[s])+n[i[s]]}}},{clamp:86}],83:[function(e,k,z){},{}],84:[function(e,k,z){var l=typeof Reflect=="object"?Reflect:null,o=l&&typeof l.apply=="function"?l.apply:function(b,S,w){return Function.prototype.apply.call(b,S,w)},c;l&&typeof l.ownKeys=="function"?c=l.ownKeys:Object.getOwnPropertySymbols?c=function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:c=function(b){return Object.getOwnPropertyNames(b)};function p(A){console&&console.warn&&console.warn(A)}var t=Number.isNaN||function(b){return b!==b};function n(){n.init.call(this)}k.exports=n,k.exports.once=x,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._eventsCount=0,n.prototype._maxListeners=void 0;var a=10;function i(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(A){if(typeof A!="number"||A<0||t(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");a=A}}),n.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},n.prototype.setMaxListeners=function(b){if(typeof b!="number"||b<0||t(b))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+b+".");return this._maxListeners=b,this};function r(A){return A._maxListeners===void 0?n.defaultMaxListeners:A._maxListeners}n.prototype.getMaxListeners=function(){return r(this)},n.prototype.emit=function(b){for(var S=[],w=1;w<arguments.length;w++)S.push(arguments[w]);var T=b==="error",_=this._events;if(_!==void 0)T=T&&_.error===void 0;else if(!T)return!1;if(T){var v;if(S.length>0&&(v=S[0]),v instanceof Error)throw v;var P=new Error("Unhandled error."+(v?" ("+v.message+")":""));throw P.context=v,P}var M=_[b];if(M===void 0)return!1;if(typeof M=="function")o(M,this,S);else for(var E=M.length,D=y(M,E),w=0;w<E;++w)o(D[w],this,S);return!0};function f(A,b,S,w){var T,_,v;if(i(S),_=A._events,_===void 0?(_=A._events=Object.create(null),A._eventsCount=0):(_.newListener!==void 0&&(A.emit("newListener",b,S.listener?S.listener:S),_=A._events),v=_[b]),v===void 0)v=_[b]=S,++A._eventsCount;else if(typeof v=="function"?v=_[b]=w?[S,v]:[v,S]:w?v.unshift(S):v.push(S),T=r(A),T>0&&v.length>T&&!v.warned){v.warned=!0;var P=new Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(b)+" listeners added. Use emitter.setMaxListeners() to increase limit");P.name="MaxListenersExceededWarning",P.emitter=A,P.type=b,P.count=v.length,p(P)}return A}n.prototype.addListener=function(b,S){return f(this,b,S,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(b,S){return f(this,b,S,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function s(A,b,S){var w={fired:!1,wrapFn:void 0,target:A,type:b,listener:S},T=u.bind(w);return T.listener=S,w.wrapFn=T,T}n.prototype.once=function(b,S){return i(S),this.on(b,s(this,b,S)),this},n.prototype.prependOnceListener=function(b,S){return i(S),this.prependListener(b,s(this,b,S)),this},n.prototype.removeListener=function(b,S){var w,T,_,v,P;if(i(S),T=this._events,T===void 0)return this;if(w=T[b],w===void 0)return this;if(w===S||w.listener===S)--this._eventsCount==0?this._events=Object.create(null):(delete T[b],T.removeListener&&this.emit("removeListener",b,w.listener||S));else if(typeof w!="function"){for(_=-1,v=w.length-1;v>=0;v--)if(w[v]===S||w[v].listener===S){P=w[v].listener,_=v;break}if(_<0)return this;_===0?w.shift():m(w,_),w.length===1&&(T[b]=w[0]),T.removeListener!==void 0&&this.emit("removeListener",b,P||S)}return this},n.prototype.off=n.prototype.removeListener,n.prototype.removeAllListeners=function(b){var S,w,T;if(w=this._events,w===void 0)return this;if(w.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):w[b]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete w[b]),this;if(arguments.length===0){var _=Object.keys(w),v;for(T=0;T<_.length;++T)v=_[T],v!=="removeListener"&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(S=w[b],typeof S=="function")this.removeListener(b,S);else if(S!==void 0)for(T=S.length-1;T>=0;T--)this.removeListener(b,S[T]);return this};function h(A,b,S){var w=A._events;if(w===void 0)return[];var T=w[b];return T===void 0?[]:typeof T=="function"?S?[T.listener||T]:[T]:S?g(T):y(T,T.length)}n.prototype.listeners=function(b){return h(this,b,!0)},n.prototype.rawListeners=function(b){return h(this,b,!1)},n.listenerCount=function(A,b){return typeof A.listenerCount=="function"?A.listenerCount(b):d.call(A,b)},n.prototype.listenerCount=d;function d(A){var b=this._events;if(b!==void 0){var S=b[A];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}n.prototype.eventNames=function(){return this._eventsCount>0?c(this._events):[]};function y(A,b){for(var S=new Array(b),w=0;w<b;++w)S[w]=A[w];return S}function m(A,b){for(;b+1<A.length;b++)A[b]=A[b+1];A.pop()}function g(A){for(var b=new Array(A.length),S=0;S<b.length;++S)b[S]=A[S].listener||A[S];return b}function x(A,b){return new Promise(function(S,w){function T(){_!==void 0&&A.removeListener("error",_),S([].slice.call(arguments))}var _;b!=="error"&&(_=function(P){A.removeListener(b,T),w(P)},A.once("error",_)),A.once(b,T)})}},{}],85:[function(e,k,z){(function(l){(function(){var o=e("base64-js"),c=e("ieee754");z.Buffer=a,z.SlowBuffer=g,z.INSPECT_MAX_BYTES=50;var p=2147483647;z.kMaxLength=p,a.TYPED_ARRAY_SUPPORT=t(),!a.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function t(){try{var ie=new Uint8Array(1);return ie.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ie.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.byteOffset}});function n(ie){if(ie>p)throw new RangeError('The value "'+ie+'" is invalid for option "size"');var oe=new Uint8Array(ie);return oe.__proto__=a.prototype,oe}function a(ie,oe,fe){if(typeof ie=="number"){if(typeof oe=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(ie)}return i(ie,oe,fe)}typeof Symbol!="undefined"&&Symbol.species!=null&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192;function i(ie,oe,fe){if(typeof ie=="string")return s(ie,oe);if(ArrayBuffer.isView(ie))return h(ie);if(ie==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie);if(Q(ie,ArrayBuffer)||ie&&Q(ie.buffer,ArrayBuffer))return d(ie,oe,fe);if(typeof ie=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ye=ie.valueOf&&ie.valueOf();if(ye!=null&&ye!==ie)return a.from(ye,oe,fe);var ce=y(ie);if(ce)return ce;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof ie[Symbol.toPrimitive]=="function")return a.from(ie[Symbol.toPrimitive]("string"),oe,fe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie)}a.from=function(ie,oe,fe){return i(ie,oe,fe)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array;function r(ie){if(typeof ie!="number")throw new TypeError('"size" argument must be of type number');if(ie<0)throw new RangeError('The value "'+ie+'" is invalid for option "size"')}function f(ie,oe,fe){return r(ie),ie<=0?n(ie):oe!==void 0?typeof fe=="string"?n(ie).fill(oe,fe):n(ie).fill(oe):n(ie)}a.alloc=function(ie,oe,fe){return f(ie,oe,fe)};function u(ie){return r(ie),n(ie<0?0:m(ie)|0)}a.allocUnsafe=function(ie){return u(ie)},a.allocUnsafeSlow=function(ie){return u(ie)};function s(ie,oe){if((typeof oe!="string"||oe==="")&&(oe="utf8"),!a.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);var fe=x(ie,oe)|0,ye=n(fe),ce=ye.write(ie,oe);return ce!==fe&&(ye=ye.slice(0,ce)),ye}function h(ie){for(var oe=ie.length<0?0:m(ie.length)|0,fe=n(oe),ye=0;ye<oe;ye+=1)fe[ye]=ie[ye]&255;return fe}function d(ie,oe,fe){if(oe<0||ie.byteLength<oe)throw new RangeError('"offset" is outside of buffer bounds');if(ie.byteLength<oe+(fe||0))throw new RangeError('"length" is outside of buffer bounds');var ye;return oe===void 0&&fe===void 0?ye=new Uint8Array(ie):fe===void 0?ye=new Uint8Array(ie,oe):ye=new Uint8Array(ie,oe,fe),ye.__proto__=a.prototype,ye}function y(ie){if(a.isBuffer(ie)){var oe=m(ie.length)|0,fe=n(oe);return fe.length===0||ie.copy(fe,0,0,oe),fe}if(ie.length!==void 0)return typeof ie.length!="number"||ae(ie.length)?n(0):h(ie);if(ie.type==="Buffer"&&Array.isArray(ie.data))return h(ie.data)}function m(ie){if(ie>=p)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p.toString(16)+" bytes");return ie|0}function g(ie){return+ie!=ie&&(ie=0),a.alloc(+ie)}a.isBuffer=function(oe){return oe!=null&&oe._isBuffer===!0&&oe!==a.prototype},a.compare=function(oe,fe){if(Q(oe,Uint8Array)&&(oe=a.from(oe,oe.offset,oe.byteLength)),Q(fe,Uint8Array)&&(fe=a.from(fe,fe.offset,fe.byteLength)),!a.isBuffer(oe)||!a.isBuffer(fe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(oe===fe)return 0;for(var ye=oe.length,ce=fe.length,me=0,xe=Math.min(ye,ce);me<xe;++me)if(oe[me]!==fe[me]){ye=oe[me],ce=fe[me];break}return ye<ce?-1:ce<ye?1:0},a.isEncoding=function(oe){switch(String(oe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(oe,fe){if(!Array.isArray(oe))throw new TypeError('"list" argument must be an Array of Buffers');if(oe.length===0)return a.alloc(0);var ye;if(fe===void 0)for(fe=0,ye=0;ye<oe.length;++ye)fe+=oe[ye].length;var ce=a.allocUnsafe(fe),me=0;for(ye=0;ye<oe.length;++ye){var xe=oe[ye];if(Q(xe,Uint8Array)&&(xe=a.from(xe)),!a.isBuffer(xe))throw new TypeError('"list" argument must be an Array of Buffers');xe.copy(ce,me),me+=xe.length}return ce};function x(ie,oe){if(a.isBuffer(ie))return ie.length;if(ArrayBuffer.isView(ie)||Q(ie,ArrayBuffer))return ie.byteLength;if(typeof ie!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ie);var fe=ie.length,ye=arguments.length>2&&arguments[2]===!0;if(!ye&&fe===0)return 0;for(var ce=!1;;)switch(oe){case"ascii":case"latin1":case"binary":return fe;case"utf8":case"utf-8":return G(ie).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe*2;case"hex":return fe>>>1;case"base64":return $(ie).length;default:if(ce)return ye?-1:G(ie).length;oe=(""+oe).toLowerCase(),ce=!0}}a.byteLength=x;function A(ie,oe,fe){var ye=!1;if((oe===void 0||oe<0)&&(oe=0),oe>this.length||((fe===void 0||fe>this.length)&&(fe=this.length),fe<=0)||(fe>>>=0,oe>>>=0,fe<=oe))return"";for(ie||(ie="utf8");;)switch(ie){case"hex":return U(this,oe,fe);case"utf8":case"utf-8":return N(this,oe,fe);case"ascii":return F(this,oe,fe);case"latin1":case"binary":return V(this,oe,fe);case"base64":return D(this,oe,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,oe,fe);default:if(ye)throw new TypeError("Unknown encoding: "+ie);ie=(ie+"").toLowerCase(),ye=!0}}a.prototype._isBuffer=!0;function b(ie,oe,fe){var ye=ie[oe];ie[oe]=ie[fe],ie[fe]=ye}a.prototype.swap16=function(){var oe=this.length;if(oe%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var fe=0;fe<oe;fe+=2)b(this,fe,fe+1);return this},a.prototype.swap32=function(){var oe=this.length;if(oe%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var fe=0;fe<oe;fe+=4)b(this,fe,fe+3),b(this,fe+1,fe+2);return this},a.prototype.swap64=function(){var oe=this.length;if(oe%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var fe=0;fe<oe;fe+=8)b(this,fe,fe+7),b(this,fe+1,fe+6),b(this,fe+2,fe+5),b(this,fe+3,fe+4);return this},a.prototype.toString=function(){var oe=this.length;return oe===0?"":arguments.length===0?N(this,0,oe):A.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(oe){if(!a.isBuffer(oe))throw new TypeError("Argument must be a Buffer");return this===oe?!0:a.compare(this,oe)===0},a.prototype.inspect=function(){var oe="",fe=z.INSPECT_MAX_BYTES;return oe=this.toString("hex",0,fe).replace(/(.{2})/g,"$1 ").trim(),this.length>fe&&(oe+=" ... "),"<Buffer "+oe+">"},a.prototype.compare=function(oe,fe,ye,ce,me){if(Q(oe,Uint8Array)&&(oe=a.from(oe,oe.offset,oe.byteLength)),!a.isBuffer(oe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof oe);if(fe===void 0&&(fe=0),ye===void 0&&(ye=oe?oe.length:0),ce===void 0&&(ce=0),me===void 0&&(me=this.length),fe<0||ye>oe.length||ce<0||me>this.length)throw new RangeError("out of range index");if(ce>=me&&fe>=ye)return 0;if(ce>=me)return-1;if(fe>=ye)return 1;if(fe>>>=0,ye>>>=0,ce>>>=0,me>>>=0,this===oe)return 0;for(var xe=me-ce,ke=ye-fe,Ae=Math.min(xe,ke),Oe=this.slice(ce,me),He=oe.slice(fe,ye),Ge=0;Ge<Ae;++Ge)if(Oe[Ge]!==He[Ge]){xe=Oe[Ge],ke=He[Ge];break}return xe<ke?-1:ke<xe?1:0};function S(ie,oe,fe,ye,ce){if(ie.length===0)return-1;if(typeof fe=="string"?(ye=fe,fe=0):fe>2147483647?fe=2147483647:fe<-2147483648&&(fe=-2147483648),fe=+fe,ae(fe)&&(fe=ce?0:ie.length-1),fe<0&&(fe=ie.length+fe),fe>=ie.length){if(ce)return-1;fe=ie.length-1}else if(fe<0)if(ce)fe=0;else return-1;if(typeof oe=="string"&&(oe=a.from(oe,ye)),a.isBuffer(oe))return oe.length===0?-1:w(ie,oe,fe,ye,ce);if(typeof oe=="number")return oe=oe&255,typeof Uint8Array.prototype.indexOf=="function"?ce?Uint8Array.prototype.indexOf.call(ie,oe,fe):Uint8Array.prototype.lastIndexOf.call(ie,oe,fe):w(ie,[oe],fe,ye,ce);throw new TypeError("val must be string, number or Buffer")}function w(ie,oe,fe,ye,ce){var me=1,xe=ie.length,ke=oe.length;if(ye!==void 0&&(ye=String(ye).toLowerCase(),ye==="ucs2"||ye==="ucs-2"||ye==="utf16le"||ye==="utf-16le")){if(ie.length<2||oe.length<2)return-1;me=2,xe/=2,ke/=2,fe/=2}function Ae(Ie,We){return me===1?Ie[We]:Ie.readUInt16BE(We*me)}var Oe;if(ce){var He=-1;for(Oe=fe;Oe<xe;Oe++)if(Ae(ie,Oe)===Ae(oe,He===-1?0:Oe-He)){if(He===-1&&(He=Oe),Oe-He+1===ke)return He*me}else He!==-1&&(Oe-=Oe-He),He=-1}else for(fe+ke>xe&&(fe=xe-ke),Oe=fe;Oe>=0;Oe--){for(var Ge=!0,_e=0;_e<ke;_e++)if(Ae(ie,Oe+_e)!==Ae(oe,_e)){Ge=!1;break}if(Ge)return Oe}return-1}a.prototype.includes=function(oe,fe,ye){return this.indexOf(oe,fe,ye)!==-1},a.prototype.indexOf=function(oe,fe,ye){return S(this,oe,fe,ye,!0)},a.prototype.lastIndexOf=function(oe,fe,ye){return S(this,oe,fe,ye,!1)};function T(ie,oe,fe,ye){fe=Number(fe)||0;var ce=ie.length-fe;ye?(ye=Number(ye),ye>ce&&(ye=ce)):ye=ce;var me=oe.length;ye>me/2&&(ye=me/2);for(var xe=0;xe<ye;++xe){var ke=parseInt(oe.substr(xe*2,2),16);if(ae(ke))return xe;ie[fe+xe]=ke}return xe}function _(ie,oe,fe,ye){return K(G(oe,ie.length-fe),ie,fe,ye)}function v(ie,oe,fe,ye){return K(Y(oe),ie,fe,ye)}function P(ie,oe,fe,ye){return v(ie,oe,fe,ye)}function M(ie,oe,fe,ye){return K($(oe),ie,fe,ye)}function E(ie,oe,fe,ye){return K(ee(oe,ie.length-fe),ie,fe,ye)}a.prototype.write=function(oe,fe,ye,ce){if(fe===void 0)ce="utf8",ye=this.length,fe=0;else if(ye===void 0&&typeof fe=="string")ce=fe,ye=this.length,fe=0;else if(isFinite(fe))fe=fe>>>0,isFinite(ye)?(ye=ye>>>0,ce===void 0&&(ce="utf8")):(ce=ye,ye=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var me=this.length-fe;if((ye===void 0||ye>me)&&(ye=me),oe.length>0&&(ye<0||fe<0)||fe>this.length)throw new RangeError("Attempt to write outside buffer bounds");ce||(ce="utf8");for(var xe=!1;;)switch(ce){case"hex":return T(this,oe,fe,ye);case"utf8":case"utf-8":return _(this,oe,fe,ye);case"ascii":return v(this,oe,fe,ye);case"latin1":case"binary":return P(this,oe,fe,ye);case"base64":return M(this,oe,fe,ye);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,oe,fe,ye);default:if(xe)throw new TypeError("Unknown encoding: "+ce);ce=(""+ce).toLowerCase(),xe=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D(ie,oe,fe){return oe===0&&fe===ie.length?o.fromByteArray(ie):o.fromByteArray(ie.slice(oe,fe))}function N(ie,oe,fe){fe=Math.min(ie.length,fe);for(var ye=[],ce=oe;ce<fe;){var me=ie[ce],xe=null,ke=me>239?4:me>223?3:me>191?2:1;if(ce+ke<=fe){var Ae,Oe,He,Ge;switch(ke){case 1:me<128&&(xe=me);break;case 2:Ae=ie[ce+1],(Ae&192)==128&&(Ge=(me&31)<<6|Ae&63,Ge>127&&(xe=Ge));break;case 3:Ae=ie[ce+1],Oe=ie[ce+2],(Ae&192)==128&&(Oe&192)==128&&(Ge=(me&15)<<12|(Ae&63)<<6|Oe&63,Ge>2047&&(Ge<55296||Ge>57343)&&(xe=Ge));break;case 4:Ae=ie[ce+1],Oe=ie[ce+2],He=ie[ce+3],(Ae&192)==128&&(Oe&192)==128&&(He&192)==128&&(Ge=(me&15)<<18|(Ae&63)<<12|(Oe&63)<<6|He&63,Ge>65535&&Ge<1114112&&(xe=Ge))}}xe===null?(xe=65533,ke=1):xe>65535&&(xe-=65536,ye.push(xe>>>10&1023|55296),xe=56320|xe&1023),ye.push(xe),ce+=ke}return I(ye)}var O=4096;function I(ie){var oe=ie.length;if(oe<=O)return String.fromCharCode.apply(String,ie);for(var fe="",ye=0;ye<oe;)fe+=String.fromCharCode.apply(String,ie.slice(ye,ye+=O));return fe}function F(ie,oe,fe){var ye="";fe=Math.min(ie.length,fe);for(var ce=oe;ce<fe;++ce)ye+=String.fromCharCode(ie[ce]&127);return ye}function V(ie,oe,fe){var ye="";fe=Math.min(ie.length,fe);for(var ce=oe;ce<fe;++ce)ye+=String.fromCharCode(ie[ce]);return ye}function U(ie,oe,fe){var ye=ie.length;(!oe||oe<0)&&(oe=0),(!fe||fe<0||fe>ye)&&(fe=ye);for(var ce="",me=oe;me<fe;++me)ce+=se(ie[me]);return ce}function j(ie,oe,fe){for(var ye=ie.slice(oe,fe),ce="",me=0;me<ye.length;me+=2)ce+=String.fromCharCode(ye[me]+ye[me+1]*256);return ce}a.prototype.slice=function(oe,fe){var ye=this.length;oe=~~oe,fe=fe===void 0?ye:~~fe,oe<0?(oe+=ye,oe<0&&(oe=0)):oe>ye&&(oe=ye),fe<0?(fe+=ye,fe<0&&(fe=0)):fe>ye&&(fe=ye),fe<oe&&(fe=oe);var ce=this.subarray(oe,fe);return ce.__proto__=a.prototype,ce};function Z(ie,oe,fe){if(ie%1!=0||ie<0)throw new RangeError("offset is not uint");if(ie+oe>fe)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUIntLE=function(oe,fe,ye){oe=oe>>>0,fe=fe>>>0,ye||Z(oe,fe,this.length);for(var ce=this[oe],me=1,xe=0;++xe<fe&&(me*=256);)ce+=this[oe+xe]*me;return ce},a.prototype.readUIntBE=function(oe,fe,ye){oe=oe>>>0,fe=fe>>>0,ye||Z(oe,fe,this.length);for(var ce=this[oe+--fe],me=1;fe>0&&(me*=256);)ce+=this[oe+--fe]*me;return ce},a.prototype.readUInt8=function(oe,fe){return oe=oe>>>0,fe||Z(oe,1,this.length),this[oe]},a.prototype.readUInt16LE=function(oe,fe){return oe=oe>>>0,fe||Z(oe,2,this.length),this[oe]|this[oe+1]<<8},a.prototype.readUInt16BE=function(oe,fe){return oe=oe>>>0,fe||Z(oe,2,this.length),this[oe]<<8|this[oe+1]},a.prototype.readUInt32LE=function(oe,fe){return oe=oe>>>0,fe||Z(oe,4,this.length),(this[oe]|this[oe+1]<<8|this[oe+2]<<16)+this[oe+3]*16777216},a.prototype.readUInt32BE=function(oe,fe){return oe=oe>>>0,fe||Z(oe,4,this.length),this[oe]*16777216+(this[oe+1]<<16|this[oe+2]<<8|this[oe+3])},a.prototype.readIntLE=function(oe,fe,ye){oe=oe>>>0,fe=fe>>>0,ye||Z(oe,fe,this.length);for(var ce=this[oe],me=1,xe=0;++xe<fe&&(me*=256);)ce+=this[oe+xe]*me;return me*=128,ce>=me&&(ce-=Math.pow(2,8*fe)),ce},a.prototype.readIntBE=function(oe,fe,ye){oe=oe>>>0,fe=fe>>>0,ye||Z(oe,fe,this.length);for(var ce=fe,me=1,xe=this[oe+--ce];ce>0&&(me*=256);)xe+=this[oe+--ce]*me;return me*=128,xe>=me&&(xe-=Math.pow(2,8*fe)),xe},a.prototype.readInt8=function(oe,fe){return oe=oe>>>0,fe||Z(oe,1,this.length),this[oe]&128?(255-this[oe]+1)*-1:this[oe]},a.prototype.readInt16LE=function(oe,fe){oe=oe>>>0,fe||Z(oe,2,this.length);var ye=this[oe]|this[oe+1]<<8;return ye&32768?ye|4294901760:ye},a.prototype.readInt16BE=function(oe,fe){oe=oe>>>0,fe||Z(oe,2,this.length);var ye=this[oe+1]|this[oe]<<8;return ye&32768?ye|4294901760:ye},a.prototype.readInt32LE=function(oe,fe){return oe=oe>>>0,fe||Z(oe,4,this.length),this[oe]|this[oe+1]<<8|this[oe+2]<<16|this[oe+3]<<24},a.prototype.readInt32BE=function(oe,fe){return oe=oe>>>0,fe||Z(oe,4,this.length),this[oe]<<24|this[oe+1]<<16|this[oe+2]<<8|this[oe+3]},a.prototype.readFloatLE=function(oe,fe){return oe=oe>>>0,fe||Z(oe,4,this.length),c.read(this,oe,!0,23,4)},a.prototype.readFloatBE=function(oe,fe){return oe=oe>>>0,fe||Z(oe,4,this.length),c.read(this,oe,!1,23,4)},a.prototype.readDoubleLE=function(oe,fe){return oe=oe>>>0,fe||Z(oe,8,this.length),c.read(this,oe,!0,52,8)},a.prototype.readDoubleBE=function(oe,fe){return oe=oe>>>0,fe||Z(oe,8,this.length),c.read(this,oe,!1,52,8)};function te(ie,oe,fe,ye,ce,me){if(!a.isBuffer(ie))throw new TypeError('"buffer" argument must be a Buffer instance');if(oe>ce||oe<me)throw new RangeError('"value" argument is out of bounds');if(fe+ye>ie.length)throw new RangeError("Index out of range")}a.prototype.writeUIntLE=function(oe,fe,ye,ce){if(oe=+oe,fe=fe>>>0,ye=ye>>>0,!ce){var me=Math.pow(2,8*ye)-1;te(this,oe,fe,ye,me,0)}var xe=1,ke=0;for(this[fe]=oe&255;++ke<ye&&(xe*=256);)this[fe+ke]=oe/xe&255;return fe+ye},a.prototype.writeUIntBE=function(oe,fe,ye,ce){if(oe=+oe,fe=fe>>>0,ye=ye>>>0,!ce){var me=Math.pow(2,8*ye)-1;te(this,oe,fe,ye,me,0)}var xe=ye-1,ke=1;for(this[fe+xe]=oe&255;--xe>=0&&(ke*=256);)this[fe+xe]=oe/ke&255;return fe+ye},a.prototype.writeUInt8=function(oe,fe,ye){return oe=+oe,fe=fe>>>0,ye||te(this,oe,fe,1,255,0),this[fe]=oe&255,fe+1},a.prototype.writeUInt16LE=function(oe,fe,ye){return oe=+oe,fe=fe>>>0,ye||te(this,oe,fe,2,65535,0),this[fe]=oe&255,this[fe+1]=oe>>>8,fe+2},a.prototype.writeUInt16BE=function(oe,fe,ye){return oe=+oe,fe=fe>>>0,ye||te(this,oe,fe,2,65535,0),this[fe]=oe>>>8,this[fe+1]=oe&255,fe+2},a.prototype.writeUInt32LE=function(oe,fe,ye){return oe=+oe,fe=fe>>>0,ye||te(this,oe,fe,4,4294967295,0),this[fe+3]=oe>>>24,this[fe+2]=oe>>>16,this[fe+1]=oe>>>8,this[fe]=oe&255,fe+4},a.prototype.writeUInt32BE=function(oe,fe,ye){return oe=+oe,fe=fe>>>0,ye||te(this,oe,fe,4,4294967295,0),this[fe]=oe>>>24,this[fe+1]=oe>>>16,this[fe+2]=oe>>>8,this[fe+3]=oe&255,fe+4},a.prototype.writeIntLE=function(oe,fe,ye,ce){if(oe=+oe,fe=fe>>>0,!ce){var me=Math.pow(2,8*ye-1);te(this,oe,fe,ye,me-1,-me)}var xe=0,ke=1,Ae=0;for(this[fe]=oe&255;++xe<ye&&(ke*=256);)oe<0&&Ae===0&&this[fe+xe-1]!==0&&(Ae=1),this[fe+xe]=(oe/ke>>0)-Ae&255;return fe+ye},a.prototype.writeIntBE=function(oe,fe,ye,ce){if(oe=+oe,fe=fe>>>0,!ce){var me=Math.pow(2,8*ye-1);te(this,oe,fe,ye,me-1,-me)}var xe=ye-1,ke=1,Ae=0;for(this[fe+xe]=oe&255;--xe>=0&&(ke*=256);)oe<0&&Ae===0&&this[fe+xe+1]!==0&&(Ae=1),this[fe+xe]=(oe/ke>>0)-Ae&255;return fe+ye},a.prototype.writeInt8=function(oe,fe,ye){return oe=+oe,fe=fe>>>0,ye||te(this,oe,fe,1,127,-128),oe<0&&(oe=255+oe+1),this[fe]=oe&255,fe+1},a.prototype.writeInt16LE=function(oe,fe,ye){return oe=+oe,fe=fe>>>0,ye||te(this,oe,fe,2,32767,-32768),this[fe]=oe&255,this[fe+1]=oe>>>8,fe+2},a.prototype.writeInt16BE=function(oe,fe,ye){return oe=+oe,fe=fe>>>0,ye||te(this,oe,fe,2,32767,-32768),this[fe]=oe>>>8,this[fe+1]=oe&255,fe+2},a.prototype.writeInt32LE=function(oe,fe,ye){return oe=+oe,fe=fe>>>0,ye||te(this,oe,fe,4,2147483647,-2147483648),this[fe]=oe&255,this[fe+1]=oe>>>8,this[fe+2]=oe>>>16,this[fe+3]=oe>>>24,fe+4},a.prototype.writeInt32BE=function(oe,fe,ye){return oe=+oe,fe=fe>>>0,ye||te(this,oe,fe,4,2147483647,-2147483648),oe<0&&(oe=4294967295+oe+1),this[fe]=oe>>>24,this[fe+1]=oe>>>16,this[fe+2]=oe>>>8,this[fe+3]=oe&255,fe+4};function re(ie,oe,fe,ye,ce,me){if(fe+ye>ie.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("Index out of range")}function W(ie,oe,fe,ye,ce){return oe=+oe,fe=fe>>>0,ce||re(ie,oe,fe,4),c.write(ie,oe,fe,ye,23,4),fe+4}a.prototype.writeFloatLE=function(oe,fe,ye){return W(this,oe,fe,!0,ye)},a.prototype.writeFloatBE=function(oe,fe,ye){return W(this,oe,fe,!1,ye)};function J(ie,oe,fe,ye,ce){return oe=+oe,fe=fe>>>0,ce||re(ie,oe,fe,8),c.write(ie,oe,fe,ye,52,8),fe+8}a.prototype.writeDoubleLE=function(oe,fe,ye){return J(this,oe,fe,!0,ye)},a.prototype.writeDoubleBE=function(oe,fe,ye){return J(this,oe,fe,!1,ye)},a.prototype.copy=function(oe,fe,ye,ce){if(!a.isBuffer(oe))throw new TypeError("argument should be a Buffer");if(ye||(ye=0),!ce&&ce!==0&&(ce=this.length),fe>=oe.length&&(fe=oe.length),fe||(fe=0),ce>0&&ce<ye&&(ce=ye),ce===ye||oe.length===0||this.length===0)return 0;if(fe<0)throw new RangeError("targetStart out of bounds");if(ye<0||ye>=this.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("sourceEnd out of bounds");ce>this.length&&(ce=this.length),oe.length-fe<ce-ye&&(ce=oe.length-fe+ye);var me=ce-ye;if(this===oe&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(fe,ye,ce);else if(this===oe&&ye<fe&&fe<ce)for(var xe=me-1;xe>=0;--xe)oe[xe+fe]=this[xe+ye];else Uint8Array.prototype.set.call(oe,this.subarray(ye,ce),fe);return me},a.prototype.fill=function(oe,fe,ye,ce){if(typeof oe=="string"){if(typeof fe=="string"?(ce=fe,fe=0,ye=this.length):typeof ye=="string"&&(ce=ye,ye=this.length),ce!==void 0&&typeof ce!="string")throw new TypeError("encoding must be a string");if(typeof ce=="string"&&!a.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);if(oe.length===1){var me=oe.charCodeAt(0);(ce==="utf8"&&me<128||ce==="latin1")&&(oe=me)}}else typeof oe=="number"&&(oe=oe&255);if(fe<0||this.length<fe||this.length<ye)throw new RangeError("Out of range index");if(ye<=fe)return this;fe=fe>>>0,ye=ye===void 0?this.length:ye>>>0,oe||(oe=0);var xe;if(typeof oe=="number")for(xe=fe;xe<ye;++xe)this[xe]=oe;else{var ke=a.isBuffer(oe)?oe:a.from(oe,ce),Ae=ke.length;if(Ae===0)throw new TypeError('The value "'+oe+'" is invalid for argument "value"');for(xe=0;xe<ye-fe;++xe)this[xe+fe]=ke[xe%Ae]}return this};var le=/[^+/0-9A-Za-z-_]/g;function ue(ie){if(ie=ie.split("=")[0],ie=ie.trim().replace(le,""),ie.length<2)return"";for(;ie.length%4!=0;)ie=ie+"=";return ie}function se(ie){return ie<16?"0"+ie.toString(16):ie.toString(16)}function G(ie,oe){oe=oe||1/0;for(var fe,ye=ie.length,ce=null,me=[],xe=0;xe<ye;++xe){if(fe=ie.charCodeAt(xe),fe>55295&&fe<57344){if(!ce){if(fe>56319){(oe-=3)>-1&&me.push(239,191,189);continue}else if(xe+1===ye){(oe-=3)>-1&&me.push(239,191,189);continue}ce=fe;continue}if(fe<56320){(oe-=3)>-1&&me.push(239,191,189),ce=fe;continue}fe=(ce-55296<<10|fe-56320)+65536}else ce&&(oe-=3)>-1&&me.push(239,191,189);if(ce=null,fe<128){if((oe-=1)<0)break;me.push(fe)}else if(fe<2048){if((oe-=2)<0)break;me.push(fe>>6|192,fe&63|128)}else if(fe<65536){if((oe-=3)<0)break;me.push(fe>>12|224,fe>>6&63|128,fe&63|128)}else if(fe<1114112){if((oe-=4)<0)break;me.push(fe>>18|240,fe>>12&63|128,fe>>6&63|128,fe&63|128)}else throw new Error("Invalid code point")}return me}function Y(ie){for(var oe=[],fe=0;fe<ie.length;++fe)oe.push(ie.charCodeAt(fe)&255);return oe}function ee(ie,oe){for(var fe,ye,ce,me=[],xe=0;xe<ie.length&&!((oe-=2)<0);++xe)fe=ie.charCodeAt(xe),ye=fe>>8,ce=fe%256,me.push(ce),me.push(ye);return me}function $(ie){return o.toByteArray(ue(ie))}function K(ie,oe,fe,ye){for(var ce=0;ce<ye&&!(ce+fe>=oe.length||ce>=ie.length);++ce)oe[ce+fe]=ie[ce];return ce}function Q(ie,oe){return ie instanceof oe||ie!=null&&ie.constructor!=null&&ie.constructor.name!=null&&ie.constructor.name===oe.name}function ae(ie){return ie!==ie}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(e,k,z){k.exports=l;function l(o,c,p){return c<p?o<c?c:o>p?p:o:o<p?p:o>c?c:o}},{}],87:[function(e,k,z){var l=e("clamp");k.exports=o,k.exports.to=o,k.exports.from=c;function o(p,t){t==null&&(t=!0);var n=p[0],a=p[1],i=p[2],r=p[3];r==null&&(r=t?1:255),t&&(n*=255,a*=255,i*=255,r*=255),n=l(n,0,255)&255,a=l(a,0,255)&255,i=l(i,0,255)&255,r=l(r,0,255)&255;var f=n*16777216+(a<<16)+(i<<8)+r;return f}function c(p,t){p=+p;var n=p>>>24,a=(p&16711680)>>>16,i=(p&65280)>>>8,r=p&255;return t===!1?[n,a,i,r]:[n/255,a/255,i/255,r/255]}},{clamp:86}],88:[function(e,k,z){k.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(e,k,z){var l=e("color-rgba"),o=e("clamp"),c=e("dtype");k.exports=function(n,a){(a==="float"||!a)&&(a="array"),a==="uint"&&(a="uint8"),a==="uint_clamped"&&(a="uint8_clamped");var i=c(a),r=new i(4),f=a!=="uint8"&&a!=="uint8_clamped";return(!n.length||typeof n=="string")&&(n=l(n),n[0]/=255,n[1]/=255,n[2]/=255),p(n)?(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3]!=null?n[3]:255,f&&(r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255),r):(f?(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3]!=null?n[3]:1):(r[0]=o(Math.floor(n[0]*255),0,255),r[1]=o(Math.floor(n[1]*255),0,255),r[2]=o(Math.floor(n[2]*255),0,255),r[3]=n[3]==null?255:o(Math.floor(n[3]*255),0,255)),r)};function p(t){return!!(t instanceof Uint8Array||t instanceof Uint8ClampedArray||Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(e,k,z){(function(l){(function(){var o=e("color-name"),c=e("is-plain-obj"),p=e("defined");k.exports=n;var t={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function n(a){var i,r=[],f=1,u;if(typeof a=="string")if(o[a])r=o[a].slice(),u="rgb";else if(a==="transparent")f=0,u="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(a)){var s=a.slice(1),h=s.length,d=h<=4;f=1,d?(r=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],h===4&&(f=parseInt(s[3]+s[3],16)/255)):(r=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],h===8&&(f=parseInt(s[6]+s[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),u="rgb"}else if(i=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(a)){var y=i[1],m=y==="rgb",s=y.replace(/a$/,"");u=s;var h=s==="cmyk"?4:s==="gray"?1:3;r=i[2].trim().split(/\s*,\s*/).map(function(b,S){if(/%$/.test(b))return S===h?parseFloat(b)/100:s==="rgb"?parseFloat(b)*255/100:parseFloat(b);if(s[S]==="h"){if(/deg$/.test(b))return parseFloat(b);if(t[b]!==void 0)return t[b]}return parseFloat(b)}),y===s&&r.push(1),f=m||r[h]===void 0?1:r[h],r=r.slice(0,h)}else a.length>10&&/[0-9](?:\s|\/)/.test(a)&&(r=a.match(/([0-9]+)/g).map(function(x){return parseFloat(x)}),u=a.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(a))u="rgb",r=[a>>>16,(a&65280)>>>8,a&255];else if(c(a)){var g=p(a.r,a.red,a.R,null);g!==null?(u="rgb",r=[g,p(a.g,a.green,a.G),p(a.b,a.blue,a.B)]):(u="hsl",r=[p(a.h,a.hue,a.H),p(a.s,a.saturation,a.S),p(a.l,a.lightness,a.L,a.b,a.brightness)]),f=p(a.a,a.alpha,a.opacity,1),a.opacity!=null&&(f/=100)}else(Array.isArray(a)||l.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(a))&&(r=[a[0],a[1],a[2]],u="rgb",f=a.length===4?a[3]:1);return{space:u,values:r,alpha:f}}}).call(this)}).call(this,typeof lo!="undefined"?lo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(e,k,z){var l=e("color-parse"),o=e("color-space/hsl"),c=e("clamp");k.exports=function(t){var n,a=l(t);return a.space?(n=Array(3),n[0]=c(a.values[0],0,255),n[1]=c(a.values[1],0,255),n[2]=c(a.values[2],0,255),a.space[0]==="h"&&(n=o.rgb(n)),n.push(c(a.alpha,0,1)),n):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(e,k,z){var l=e("./rgb");k.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(o){var c=o[0]/360,p=o[1]/100,t=o[2]/100,n,a,i,r,f;if(p===0)return f=t*255,[f,f,f];t<.5?a=t*(1+p):a=t+p-t*p,n=2*t-a,r=[0,0,0];for(var u=0;u<3;u++)i=c+1/3*-(u-1),i<0?i++:i>1&&i--,6*i<1?f=n+(a-n)*6*i:2*i<1?f=a:3*i<2?f=n+(a-n)*(2/3-i)*6:f=n,r[u]=f*255;return r}},l.hsl=function(o){var c=o[0]/255,p=o[1]/255,t=o[2]/255,n=Math.min(c,p,t),a=Math.max(c,p,t),i=a-n,r,f,u;return a===n?r=0:c===a?r=(p-t)/i:p===a?r=2+(t-c)/i:t===a&&(r=4+(c-p)/i),r=Math.min(r*60,360),r<0&&(r+=360),u=(n+a)/2,a===n?f=0:u<=.5?f=i/(a+n):f=i/(2-a-n),[r,f*100,u*100]}},{"./rgb":93}],93:[function(e,k,z){k.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(e,k,z){k.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(e,k,z){k.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(e,k,z){k.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(e,k,z){k.exports=["normal","italic","oblique"]},{}],98:[function(e,k,z){k.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(e,k,z){k.exports={parse:e("./parse"),stringify:e("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(e,k,z){var l=e("css-font-size-keywords");k.exports={isSize:function(c){return/^[\d\.]/.test(c)||c.indexOf("/")!==-1||l.indexOf(c)!==-1}}},{"css-font-size-keywords":95}],101:[function(e,k,z){var l=e("unquote"),o=e("css-global-keywords"),c=e("css-system-font-keywords"),p=e("css-font-weight-keywords"),t=e("css-font-style-keywords"),n=e("css-font-stretch-keywords"),a=e("string-split-by"),i=e("./lib/util").isSize;k.exports=f;var r=f.cache={};function f(s){if(typeof s!="string")throw new Error("Font argument must be a string.");if(r[s])return r[s];if(s==="")throw new Error("Cannot parse an empty string.");if(c.indexOf(s)!==-1)return r[s]={system:s};for(var h={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},d=a(s,/\s+/),y;y=d.shift();){if(o.indexOf(y)!==-1)return["style","variant","weight","stretch"].forEach(function(g){h[g]=y}),r[s]=h;if(t.indexOf(y)!==-1){h.style=y;continue}if(y==="normal"||y==="small-caps"){h.variant=y;continue}if(n.indexOf(y)!==-1){h.stretch=y;continue}if(p.indexOf(y)!==-1){h.weight=y;continue}if(i(y)){var m=a(y,"/");if(h.size=m[0],m[1]!=null?h.lineHeight=u(m[1]):d[0]==="/"&&(d.shift(),h.lineHeight=u(d.shift())),!d.length)throw new Error("Missing required font-family.");return h.family=a(d.join(" "),/\s*,\s*/).map(l),r[s]=h}throw new Error("Unknown or unsupported font token: "+y)}throw new Error("Missing required font-size.")}function u(s){var h=parseFloat(s);return h.toString()===s?h:s}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":305,unquote:328}],102:[function(e,k,z){var l=e("pick-by-alias"),o=e("./lib/util").isSize,c=s(e("css-global-keywords")),p=s(e("css-system-font-keywords")),t=s(e("css-font-weight-keywords")),n=s(e("css-font-style-keywords")),a=s(e("css-font-stretch-keywords")),i={normal:1,"small-caps":1},r={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},f={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};k.exports=function(d){if(d=l(d,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),d.system)return d.system&&u(d.system,p),d.system;if(u(d.style,n),u(d.variant,i),u(d.weight,t),u(d.stretch,a),d.size==null&&(d.size=f.size),typeof d.size=="number"&&(d.size+="px"),!o)throw Error("Bad size value `"+d.size+"`");d.family||(d.family=f.family),Array.isArray(d.family)&&(d.family.length||(d.family=[f.family]),d.family=d.family.map(function(m){return r[m]?m:'"'+m+'"'}).join(", "));var y=[];return y.push(d.style),d.variant!==d.style&&y.push(d.variant),d.weight!==d.variant&&d.weight!==d.style&&y.push(d.weight),d.stretch!==d.weight&&d.stretch!==d.variant&&d.stretch!==d.style&&y.push(d.stretch),y.push(d.size+(d.lineHeight==null||d.lineHeight==="normal"||d.lineHeight+""=="1"?"":"/"+d.lineHeight)),y.push(d.family),y.filter(Boolean).join(" ")};function u(h,d){if(h&&!d[h]&&!c[h])throw Error("Unknown keyword `"+h+"`");return h}function s(h){for(var d={},y=0;y<h.length;y++)d[h[y]]=1;return d}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(e,k,z){k.exports=["inherit","initial","unset"]},{}],104:[function(e,k,z){k.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(e,k,z){var l=e("type/value/is"),o=e("type/value/ensure"),c=e("type/plain-function/ensure"),p=e("es5-ext/object/copy"),t=e("es5-ext/object/normalize-options"),n=e("es5-ext/object/map"),a=Function.prototype.bind,i=Object.defineProperty,r=Object.prototype.hasOwnProperty,f;f=function(u,s,h){var d=o(s)&&c(s.value),y;return y=p(s),delete y.writable,delete y.value,y.get=function(){return!h.overwriteDefinition&&r.call(this,u)?d:(s.value=a.call(d,h.resolveContext?h.resolveContext(this):this),i(this,u,s),this[u])},y},k.exports=function(u){var s=t(arguments[1]);return l(s.resolveContext)&&c(s.resolveContext),n(u,function(h,d){return f(d,h,s)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":321,"type/value/ensure":325,"type/value/is":326}],106:[function(e,k,z){var l=e("type/value/is"),o=e("type/plain-function/is"),c=e("es5-ext/object/assign"),p=e("es5-ext/object/normalize-options"),t=e("es5-ext/string/#/contains"),n=k.exports=function(a,i){var r,f,u,s,h;return arguments.length<2||typeof a!="string"?(s=i,i=a,a=null):s=arguments[2],l(a)?(r=t.call(a,"c"),f=t.call(a,"e"),u=t.call(a,"w")):(r=u=!0,f=!1),h={value:i,configurable:r,enumerable:f,writable:u},s?c(p(s),h):h};n.gs=function(a,i,r){var f,u,s,h;return typeof a!="string"?(s=r,r=i,i=a,a=null):s=arguments[3],l(i)?o(i)?l(r)?o(r)||(s=r,r=void 0):r=void 0:(s=i,i=r=void 0):i=void 0,l(a)?(f=t.call(a,"c"),u=t.call(a,"e")):(f=!0,u=!1),h={get:i,set:r,configurable:f,enumerable:u},s?c(p(s),h):h}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":322,"type/value/is":326}],107:[function(e,k,z){(function(l,o){o(typeof z=="object"&&typeof k!="undefined"?z:l.d3=l.d3||{})})(this,function(l){function o(G,Y){return G<Y?-1:G>Y?1:G>=Y?0:NaN}function c(G){return G.length===1&&(G=p(G)),{left:function(Y,ee,$,K){for($==null&&($=0),K==null&&(K=Y.length);$<K;){var Q=$+K>>>1;G(Y[Q],ee)<0?$=Q+1:K=Q}return $},right:function(Y,ee,$,K){for($==null&&($=0),K==null&&(K=Y.length);$<K;){var Q=$+K>>>1;G(Y[Q],ee)>0?K=Q:$=Q+1}return $}}}function p(G){return function(Y,ee){return o(G(Y),ee)}}var t=c(o),n=t.right,a=t.left;function i(G,Y){Y==null&&(Y=r);for(var ee=0,$=G.length-1,K=G[0],Q=new Array($<0?0:$);ee<$;)Q[ee]=Y(K,K=G[++ee]);return Q}function r(G,Y){return[G,Y]}function f(G,Y,ee){var $=G.length,K=Y.length,Q=new Array($*K),ae,ie,oe,fe;for(ee==null&&(ee=r),ae=oe=0;ae<$;++ae)for(fe=G[ae],ie=0;ie<K;++ie,++oe)Q[oe]=ee(fe,Y[ie]);return Q}function u(G,Y){return Y<G?-1:Y>G?1:Y>=G?0:NaN}function s(G){return G===null?NaN:+G}function h(G,Y){var ee=G.length,$=0,K=-1,Q=0,ae,ie,oe=0;if(Y==null)for(;++K<ee;)isNaN(ae=s(G[K]))||(ie=ae-Q,Q+=ie/++$,oe+=ie*(ae-Q));else for(;++K<ee;)isNaN(ae=s(Y(G[K],K,G)))||(ie=ae-Q,Q+=ie/++$,oe+=ie*(ae-Q));if($>1)return oe/($-1)}function d(G,Y){var ee=h(G,Y);return ee&&Math.sqrt(ee)}function y(G,Y){var ee=G.length,$=-1,K,Q,ae;if(Y==null){for(;++$<ee;)if((K=G[$])!=null&&K>=K)for(Q=ae=K;++$<ee;)(K=G[$])!=null&&(Q>K&&(Q=K),ae<K&&(ae=K))}else for(;++$<ee;)if((K=Y(G[$],$,G))!=null&&K>=K)for(Q=ae=K;++$<ee;)(K=Y(G[$],$,G))!=null&&(Q>K&&(Q=K),ae<K&&(ae=K));return[Q,ae]}var m=Array.prototype,g=m.slice,x=m.map;function A(G){return function(){return G}}function b(G){return G}function S(G,Y,ee){G=+G,Y=+Y,ee=(K=arguments.length)<2?(Y=G,G=0,1):K<3?1:+ee;for(var $=-1,K=Math.max(0,Math.ceil((Y-G)/ee))|0,Q=new Array(K);++$<K;)Q[$]=G+$*ee;return Q}var w=Math.sqrt(50),T=Math.sqrt(10),_=Math.sqrt(2);function v(G,Y,ee){var $,K=-1,Q,ae,ie;if(Y=+Y,G=+G,ee=+ee,G===Y&&ee>0)return[G];if(($=Y<G)&&(Q=G,G=Y,Y=Q),(ie=P(G,Y,ee))===0||!isFinite(ie))return[];if(ie>0)for(G=Math.ceil(G/ie),Y=Math.floor(Y/ie),ae=new Array(Q=Math.ceil(Y-G+1));++K<Q;)ae[K]=(G+K)*ie;else for(G=Math.floor(G*ie),Y=Math.ceil(Y*ie),ae=new Array(Q=Math.ceil(G-Y+1));++K<Q;)ae[K]=(G-K)/ie;return $&&ae.reverse(),ae}function P(G,Y,ee){var $=(Y-G)/Math.max(0,ee),K=Math.floor(Math.log($)/Math.LN10),Q=$/Math.pow(10,K);return K>=0?(Q>=w?10:Q>=T?5:Q>=_?2:1)*Math.pow(10,K):-Math.pow(10,-K)/(Q>=w?10:Q>=T?5:Q>=_?2:1)}function M(G,Y,ee){var $=Math.abs(Y-G)/Math.max(0,ee),K=Math.pow(10,Math.floor(Math.log($)/Math.LN10)),Q=$/K;return Q>=w?K*=10:Q>=T?K*=5:Q>=_&&(K*=2),Y<G?-K:K}function E(G){return Math.ceil(Math.log(G.length)/Math.LN2)+1}function D(){var G=b,Y=y,ee=E;function $(K){var Q,ae=K.length,ie,oe=new Array(ae);for(Q=0;Q<ae;++Q)oe[Q]=G(K[Q],Q,K);var fe=Y(oe),ye=fe[0],ce=fe[1],me=ee(oe,ye,ce);Array.isArray(me)||(me=M(ye,ce,me),me=S(Math.ceil(ye/me)*me,ce,me));for(var xe=me.length;me[0]<=ye;)me.shift(),--xe;for(;me[xe-1]>ce;)me.pop(),--xe;var ke=new Array(xe+1),Ae;for(Q=0;Q<=xe;++Q)Ae=ke[Q]=[],Ae.x0=Q>0?me[Q-1]:ye,Ae.x1=Q<xe?me[Q]:ce;for(Q=0;Q<ae;++Q)ie=oe[Q],ye<=ie&&ie<=ce&&ke[n(me,ie,0,xe)].push(K[Q]);return ke}return $.value=function(K){return arguments.length?(G=typeof K=="function"?K:A(K),$):G},$.domain=function(K){return arguments.length?(Y=typeof K=="function"?K:A([K[0],K[1]]),$):Y},$.thresholds=function(K){return arguments.length?(ee=typeof K=="function"?K:Array.isArray(K)?A(g.call(K)):A(K),$):ee},$}function N(G,Y,ee){if(ee==null&&(ee=s),!!($=G.length)){if((Y=+Y)<=0||$<2)return+ee(G[0],0,G);if(Y>=1)return+ee(G[$-1],$-1,G);var $,K=($-1)*Y,Q=Math.floor(K),ae=+ee(G[Q],Q,G),ie=+ee(G[Q+1],Q+1,G);return ae+(ie-ae)*(K-Q)}}function O(G,Y,ee){return G=x.call(G,s).sort(o),Math.ceil((ee-Y)/(2*(N(G,.75)-N(G,.25))*Math.pow(G.length,-1/3)))}function I(G,Y,ee){return Math.ceil((ee-Y)/(3.5*d(G)*Math.pow(G.length,-1/3)))}function F(G,Y){var ee=G.length,$=-1,K,Q;if(Y==null){for(;++$<ee;)if((K=G[$])!=null&&K>=K)for(Q=K;++$<ee;)(K=G[$])!=null&&K>Q&&(Q=K)}else for(;++$<ee;)if((K=Y(G[$],$,G))!=null&&K>=K)for(Q=K;++$<ee;)(K=Y(G[$],$,G))!=null&&K>Q&&(Q=K);return Q}function V(G,Y){var ee=G.length,$=ee,K=-1,Q,ae=0;if(Y==null)for(;++K<ee;)isNaN(Q=s(G[K]))?--$:ae+=Q;else for(;++K<ee;)isNaN(Q=s(Y(G[K],K,G)))?--$:ae+=Q;if($)return ae/$}function U(G,Y){var ee=G.length,$=-1,K,Q=[];if(Y==null)for(;++$<ee;)isNaN(K=s(G[$]))||Q.push(K);else for(;++$<ee;)isNaN(K=s(Y(G[$],$,G)))||Q.push(K);return N(Q.sort(o),.5)}function j(G){for(var Y=G.length,ee,$=-1,K=0,Q,ae;++$<Y;)K+=G[$].length;for(Q=new Array(K);--Y>=0;)for(ae=G[Y],ee=ae.length;--ee>=0;)Q[--K]=ae[ee];return Q}function Z(G,Y){var ee=G.length,$=-1,K,Q;if(Y==null){for(;++$<ee;)if((K=G[$])!=null&&K>=K)for(Q=K;++$<ee;)(K=G[$])!=null&&Q>K&&(Q=K)}else for(;++$<ee;)if((K=Y(G[$],$,G))!=null&&K>=K)for(Q=K;++$<ee;)(K=Y(G[$],$,G))!=null&&Q>K&&(Q=K);return Q}function te(G,Y){for(var ee=Y.length,$=new Array(ee);ee--;)$[ee]=G[Y[ee]];return $}function re(G,Y){if(!!(ee=G.length)){var ee,$=0,K=0,Q,ae=G[K];for(Y==null&&(Y=o);++$<ee;)(Y(Q=G[$],ae)<0||Y(ae,ae)!==0)&&(ae=Q,K=$);if(Y(ae,ae)===0)return K}}function W(G,Y,ee){for(var $=(ee??G.length)-(Y=Y==null?0:+Y),K,Q;$;)Q=Math.random()*$--|0,K=G[$+Y],G[$+Y]=G[Q+Y],G[Q+Y]=K;return G}function J(G,Y){var ee=G.length,$=-1,K,Q=0;if(Y==null)for(;++$<ee;)(K=+G[$])&&(Q+=K);else for(;++$<ee;)(K=+Y(G[$],$,G))&&(Q+=K);return Q}function le(G){if(!(Q=G.length))return[];for(var Y=-1,ee=Z(G,ue),$=new Array(ee);++Y<ee;)for(var K=-1,Q,ae=$[Y]=new Array(Q);++K<Q;)ae[K]=G[K][Y];return $}function ue(G){return G.length}function se(){return le(arguments)}l.bisect=n,l.bisectRight=n,l.bisectLeft=a,l.ascending=o,l.bisector=c,l.cross=f,l.descending=u,l.deviation=d,l.extent=y,l.histogram=D,l.thresholdFreedmanDiaconis=O,l.thresholdScott=I,l.thresholdSturges=E,l.max=F,l.mean=V,l.median=U,l.merge=j,l.min=Z,l.pairs=i,l.permute=te,l.quantile=N,l.range=S,l.scan=re,l.shuffle=W,l.sum=J,l.ticks=v,l.tickIncrement=P,l.tickStep=M,l.transpose=le,l.variance=h,l.zip=se,Object.defineProperty(l,"__esModule",{value:!0})})},{}],108:[function(e,k,z){(function(l,o){o(typeof z=="object"&&typeof k!="undefined"?z:l.d3=l.d3||{})})(this,function(l){var o="$";function c(){}c.prototype=p.prototype={constructor:c,has:function(m){return o+m in this},get:function(m){return this[o+m]},set:function(m,g){return this[o+m]=g,this},remove:function(m){var g=o+m;return g in this&&delete this[g]},clear:function(){for(var m in this)m[0]===o&&delete this[m]},keys:function(){var m=[];for(var g in this)g[0]===o&&m.push(g.slice(1));return m},values:function(){var m=[];for(var g in this)g[0]===o&&m.push(this[g]);return m},entries:function(){var m=[];for(var g in this)g[0]===o&&m.push({key:g.slice(1),value:this[g]});return m},size:function(){var m=0;for(var g in this)g[0]===o&&++m;return m},empty:function(){for(var m in this)if(m[0]===o)return!1;return!0},each:function(m){for(var g in this)g[0]===o&&m(this[g],g.slice(1),this)}};function p(m,g){var x=new c;if(m instanceof c)m.each(function(T,_){x.set(_,T)});else if(Array.isArray(m)){var A=-1,b=m.length,S;if(g==null)for(;++A<b;)x.set(A,m[A]);else for(;++A<b;)x.set(g(S=m[A],A,m),S)}else if(m)for(var w in m)x.set(w,m[w]);return x}function t(){var m=[],g=[],x,A,b;function S(T,_,v,P){if(_>=m.length)return x!=null&&T.sort(x),A!=null?A(T):T;for(var M=-1,E=T.length,D=m[_++],N,O,I=p(),F,V=v();++M<E;)(F=I.get(N=D(O=T[M])+""))?F.push(O):I.set(N,[O]);return I.each(function(U,j){P(V,j,S(U,_,v,P))}),V}function w(T,_){if(++_>m.length)return T;var v,P=g[_-1];return A!=null&&_>=m.length?v=T.entries():(v=[],T.each(function(M,E){v.push({key:E,values:w(M,_)})})),P!=null?v.sort(function(M,E){return P(M.key,E.key)}):v}return b={object:function(T){return S(T,0,n,a)},map:function(T){return S(T,0,i,r)},entries:function(T){return w(S(T,0,i,r),0)},key:function(T){return m.push(T),b},sortKeys:function(T){return g[m.length-1]=T,b},sortValues:function(T){return x=T,b},rollup:function(T){return A=T,b}}}function n(){return{}}function a(m,g,x){m[g]=x}function i(){return p()}function r(m,g,x){m.set(g,x)}function f(){}var u=p.prototype;f.prototype=s.prototype={constructor:f,has:u.has,add:function(m){return m+="",this[o+m]=m,this},remove:u.remove,clear:u.clear,values:u.keys,size:u.size,empty:u.empty,each:u.each};function s(m,g){var x=new f;if(m instanceof f)m.each(function(S){x.add(S)});else if(m){var A=-1,b=m.length;if(g==null)for(;++A<b;)x.add(m[A]);else for(;++A<b;)x.add(g(m[A],A,m))}return x}function h(m){var g=[];for(var x in m)g.push(x);return g}function d(m){var g=[];for(var x in m)g.push(m[x]);return g}function y(m){var g=[];for(var x in m)g.push({key:x,value:m[x]});return g}l.nest=t,l.set=s,l.map=p,l.keys=h,l.values=d,l.entries=y,Object.defineProperty(l,"__esModule",{value:!0})})},{}],109:[function(e,k,z){(function(l,o){typeof z=="object"&&typeof k!="undefined"?o(z):(l=l||self,o(l.d3=l.d3||{}))})(this,function(l){function o(De,Ve,dt){De.prototype=Ve.prototype=dt,dt.constructor=De}function c(De,Ve){var dt=Object.create(De.prototype);for(var Dt in Ve)dt[Dt]=Ve[Dt];return dt}function p(){}var t=.7,n=1/t,a="\\s*([+-]?\\d+)\\s*",i="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",f=/^#([0-9a-f]{3,8})$/,u=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),s=new RegExp("^rgb\\("+[r,r,r]+"\\)$"),h=new RegExp("^rgba\\("+[a,a,a,i]+"\\)$"),d=new RegExp("^rgba\\("+[r,r,r,i]+"\\)$"),y=new RegExp("^hsl\\("+[i,r,r]+"\\)$"),m=new RegExp("^hsla\\("+[i,r,r,i]+"\\)$"),g={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};o(p,S,{copy:function(De){return Object.assign(new this.constructor,this,De)},displayable:function(){return this.rgb().displayable()},hex:x,formatHex:x,formatHsl:A,formatRgb:b,toString:b});function x(){return this.rgb().formatHex()}function A(){return O(this).formatHsl()}function b(){return this.rgb().formatRgb()}function S(De){var Ve,dt;return De=(De+"").trim().toLowerCase(),(Ve=f.exec(De))?(dt=Ve[1].length,Ve=parseInt(Ve[1],16),dt===6?w(Ve):dt===3?new P(Ve>>8&15|Ve>>4&240,Ve>>4&15|Ve&240,(Ve&15)<<4|Ve&15,1):dt===8?T(Ve>>24&255,Ve>>16&255,Ve>>8&255,(Ve&255)/255):dt===4?T(Ve>>12&15|Ve>>8&240,Ve>>8&15|Ve>>4&240,Ve>>4&15|Ve&240,((Ve&15)<<4|Ve&15)/255):null):(Ve=u.exec(De))?new P(Ve[1],Ve[2],Ve[3],1):(Ve=s.exec(De))?new P(Ve[1]*255/100,Ve[2]*255/100,Ve[3]*255/100,1):(Ve=h.exec(De))?T(Ve[1],Ve[2],Ve[3],Ve[4]):(Ve=d.exec(De))?T(Ve[1]*255/100,Ve[2]*255/100,Ve[3]*255/100,Ve[4]):(Ve=y.exec(De))?N(Ve[1],Ve[2]/100,Ve[3]/100,1):(Ve=m.exec(De))?N(Ve[1],Ve[2]/100,Ve[3]/100,Ve[4]):g.hasOwnProperty(De)?w(g[De]):De==="transparent"?new P(NaN,NaN,NaN,0):null}function w(De){return new P(De>>16&255,De>>8&255,De&255,1)}function T(De,Ve,dt,Dt){return Dt<=0&&(De=Ve=dt=NaN),new P(De,Ve,dt,Dt)}function _(De){return De instanceof p||(De=S(De)),De?(De=De.rgb(),new P(De.r,De.g,De.b,De.opacity)):new P}function v(De,Ve,dt,Dt){return arguments.length===1?_(De):new P(De,Ve,dt,Dt??1)}function P(De,Ve,dt,Dt){this.r=+De,this.g=+Ve,this.b=+dt,this.opacity=+Dt}o(P,v,c(p,{brighter:function(De){return De=De==null?n:Math.pow(n,De),new P(this.r*De,this.g*De,this.b*De,this.opacity)},darker:function(De){return De=De==null?t:Math.pow(t,De),new P(this.r*De,this.g*De,this.b*De,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M,formatHex:M,formatRgb:E,toString:E}));function M(){return"#"+D(this.r)+D(this.g)+D(this.b)}function E(){var De=this.opacity;return De=isNaN(De)?1:Math.max(0,Math.min(1,De)),(De===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(De===1?")":", "+De+")")}function D(De){return De=Math.max(0,Math.min(255,Math.round(De)||0)),(De<16?"0":"")+De.toString(16)}function N(De,Ve,dt,Dt){return Dt<=0?De=Ve=dt=NaN:dt<=0||dt>=1?De=Ve=NaN:Ve<=0&&(De=NaN),new F(De,Ve,dt,Dt)}function O(De){if(De instanceof F)return new F(De.h,De.s,De.l,De.opacity);if(De instanceof p||(De=S(De)),!De)return new F;if(De instanceof F)return De;De=De.rgb();var Ve=De.r/255,dt=De.g/255,Dt=De.b/255,Gt=Math.min(Ve,dt,Dt),Mt=Math.max(Ve,dt,Dt),zt=NaN,Nt=Mt-Gt,Et=(Mt+Gt)/2;return Nt?(Ve===Mt?zt=(dt-Dt)/Nt+(dt<Dt)*6:dt===Mt?zt=(Dt-Ve)/Nt+2:zt=(Ve-dt)/Nt+4,Nt/=Et<.5?Mt+Gt:2-Mt-Gt,zt*=60):Nt=Et>0&&Et<1?0:zt,new F(zt,Nt,Et,De.opacity)}function I(De,Ve,dt,Dt){return arguments.length===1?O(De):new F(De,Ve,dt,Dt??1)}function F(De,Ve,dt,Dt){this.h=+De,this.s=+Ve,this.l=+dt,this.opacity=+Dt}o(F,I,c(p,{brighter:function(De){return De=De==null?n:Math.pow(n,De),new F(this.h,this.s,this.l*De,this.opacity)},darker:function(De){return De=De==null?t:Math.pow(t,De),new F(this.h,this.s,this.l*De,this.opacity)},rgb:function(){var De=this.h%360+(this.h<0)*360,Ve=isNaN(De)||isNaN(this.s)?0:this.s,dt=this.l,Dt=dt+(dt<.5?dt:1-dt)*Ve,Gt=2*dt-Dt;return new P(V(De>=240?De-240:De+120,Gt,Dt),V(De,Gt,Dt),V(De<120?De+240:De-120,Gt,Dt),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var De=this.opacity;return De=isNaN(De)?1:Math.max(0,Math.min(1,De)),(De===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(De===1?")":", "+De+")")}}));function V(De,Ve,dt){return(De<60?Ve+(dt-Ve)*De/60:De<180?dt:De<240?Ve+(dt-Ve)*(240-De)/60:Ve)*255}var U=Math.PI/180,j=180/Math.PI,Z=18,te=.96422,re=1,W=.82521,J=4/29,le=6/29,ue=3*le*le,se=le*le*le;function G(De){if(De instanceof $)return new $(De.l,De.a,De.b,De.opacity);if(De instanceof ce)return me(De);De instanceof P||(De=_(De));var Ve=ie(De.r),dt=ie(De.g),Dt=ie(De.b),Gt=K((.2225045*Ve+.7168786*dt+.0606169*Dt)/re),Mt,zt;return Ve===dt&&dt===Dt?Mt=zt=Gt:(Mt=K((.4360747*Ve+.3850649*dt+.1430804*Dt)/te),zt=K((.0139322*Ve+.0971045*dt+.7141733*Dt)/W)),new $(116*Gt-16,500*(Mt-Gt),200*(Gt-zt),De.opacity)}function Y(De,Ve){return new $(De,0,0,Ve??1)}function ee(De,Ve,dt,Dt){return arguments.length===1?G(De):new $(De,Ve,dt,Dt??1)}function $(De,Ve,dt,Dt){this.l=+De,this.a=+Ve,this.b=+dt,this.opacity=+Dt}o($,ee,c(p,{brighter:function(De){return new $(this.l+Z*(De??1),this.a,this.b,this.opacity)},darker:function(De){return new $(this.l-Z*(De??1),this.a,this.b,this.opacity)},rgb:function(){var De=(this.l+16)/116,Ve=isNaN(this.a)?De:De+this.a/500,dt=isNaN(this.b)?De:De-this.b/200;return Ve=te*Q(Ve),De=re*Q(De),dt=W*Q(dt),new P(ae(3.1338561*Ve-1.6168667*De-.4906146*dt),ae(-.9787684*Ve+1.9161415*De+.033454*dt),ae(.0719453*Ve-.2289914*De+1.4052427*dt),this.opacity)}}));function K(De){return De>se?Math.pow(De,1/3):De/ue+J}function Q(De){return De>le?De*De*De:ue*(De-J)}function ae(De){return 255*(De<=.0031308?12.92*De:1.055*Math.pow(De,1/2.4)-.055)}function ie(De){return(De/=255)<=.04045?De/12.92:Math.pow((De+.055)/1.055,2.4)}function oe(De){if(De instanceof ce)return new ce(De.h,De.c,De.l,De.opacity);if(De instanceof $||(De=G(De)),De.a===0&&De.b===0)return new ce(NaN,0<De.l&&De.l<100?0:NaN,De.l,De.opacity);var Ve=Math.atan2(De.b,De.a)*j;return new ce(Ve<0?Ve+360:Ve,Math.sqrt(De.a*De.a+De.b*De.b),De.l,De.opacity)}function fe(De,Ve,dt,Dt){return arguments.length===1?oe(De):new ce(dt,Ve,De,Dt??1)}function ye(De,Ve,dt,Dt){return arguments.length===1?oe(De):new ce(De,Ve,dt,Dt??1)}function ce(De,Ve,dt,Dt){this.h=+De,this.c=+Ve,this.l=+dt,this.opacity=+Dt}function me(De){if(isNaN(De.h))return new $(De.l,0,0,De.opacity);var Ve=De.h*U;return new $(De.l,Math.cos(Ve)*De.c,Math.sin(Ve)*De.c,De.opacity)}o(ce,ye,c(p,{brighter:function(De){return new ce(this.h,this.c,this.l+Z*(De??1),this.opacity)},darker:function(De){return new ce(this.h,this.c,this.l-Z*(De??1),this.opacity)},rgb:function(){return me(this).rgb()}}));var xe=-.14861,ke=1.78277,Ae=-.29227,Oe=-.90649,He=1.97294,Ge=He*Oe,_e=He*ke,Ie=ke*Ae-Oe*xe;function We(De){if(De instanceof Ne)return new Ne(De.h,De.s,De.l,De.opacity);De instanceof P||(De=_(De));var Ve=De.r/255,dt=De.g/255,Dt=De.b/255,Gt=(Ie*Dt+Ge*Ve-_e*dt)/(Ie+Ge-_e),Mt=Dt-Gt,zt=(He*(dt-Gt)-Ae*Mt)/Oe,Nt=Math.sqrt(zt*zt+Mt*Mt)/(He*Gt*(1-Gt)),Et=Nt?Math.atan2(zt,Mt)*j-120:NaN;return new Ne(Et<0?Et+360:Et,Nt,Gt,De.opacity)}function et(De,Ve,dt,Dt){return arguments.length===1?We(De):new Ne(De,Ve,dt,Dt??1)}function Ne(De,Ve,dt,Dt){this.h=+De,this.s=+Ve,this.l=+dt,this.opacity=+Dt}o(Ne,et,c(p,{brighter:function(De){return De=De==null?n:Math.pow(n,De),new Ne(this.h,this.s,this.l*De,this.opacity)},darker:function(De){return De=De==null?t:Math.pow(t,De),new Ne(this.h,this.s,this.l*De,this.opacity)},rgb:function(){var De=isNaN(this.h)?0:(this.h+120)*U,Ve=+this.l,dt=isNaN(this.s)?0:this.s*Ve*(1-Ve),Dt=Math.cos(De),Gt=Math.sin(De);return new P(255*(Ve+dt*(xe*Dt+ke*Gt)),255*(Ve+dt*(Ae*Dt+Oe*Gt)),255*(Ve+dt*(He*Dt)),this.opacity)}})),l.color=S,l.cubehelix=et,l.gray=Y,l.hcl=ye,l.hsl=I,l.lab=ee,l.lch=fe,l.rgb=v,Object.defineProperty(l,"__esModule",{value:!0})})},{}],110:[function(e,k,z){(function(l,o){typeof z=="object"&&typeof k!="undefined"?o(z):(l=l||self,o(l.d3=l.d3||{}))})(this,function(l){var o={value:function(){}};function c(){for(var i=0,r=arguments.length,f={},u;i<r;++i){if(!(u=arguments[i]+"")||u in f||/[\s.]/.test(u))throw new Error("illegal type: "+u);f[u]=[]}return new p(f)}function p(i){this._=i}function t(i,r){return i.trim().split(/^|\s+/).map(function(f){var u="",s=f.indexOf(".");if(s>=0&&(u=f.slice(s+1),f=f.slice(0,s)),f&&!r.hasOwnProperty(f))throw new Error("unknown type: "+f);return{type:f,name:u}})}p.prototype=c.prototype={constructor:p,on:function(i,r){var f=this._,u=t(i+"",f),s,h=-1,d=u.length;if(arguments.length<2){for(;++h<d;)if((s=(i=u[h]).type)&&(s=n(f[s],i.name)))return s;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++h<d;)if(s=(i=u[h]).type)f[s]=a(f[s],i.name,r);else if(r==null)for(s in f)f[s]=a(f[s],i.name,null);return this},copy:function(){var i={},r=this._;for(var f in r)i[f]=r[f].slice();return new p(i)},call:function(i,r){if((s=arguments.length-2)>0)for(var f=new Array(s),u=0,s,h;u<s;++u)f[u]=arguments[u+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(h=this._[i],u=0,s=h.length;u<s;++u)h[u].value.apply(r,f)},apply:function(i,r,f){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var u=this._[i],s=0,h=u.length;s<h;++s)u[s].value.apply(r,f)}};function n(i,r){for(var f=0,u=i.length,s;f<u;++f)if((s=i[f]).name===r)return s.value}function a(i,r,f){for(var u=0,s=i.length;u<s;++u)if(i[u].name===r){i[u]=o,i=i.slice(0,u).concat(i.slice(u+1));break}return f!=null&&i.push({name:r,value:f}),i}l.dispatch=c,Object.defineProperty(l,"__esModule",{value:!0})})},{}],111:[function(e,k,z){(function(l,o){typeof z=="object"&&typeof k!="undefined"?o(z,e("d3-quadtree"),e("d3-collection"),e("d3-dispatch"),e("d3-timer")):o(l.d3=l.d3||{},l.d3,l.d3,l.d3,l.d3)})(this,function(l,o,c,p,t){function n(_,v){var P;_==null&&(_=0),v==null&&(v=0);function M(){var E,D=P.length,N,O=0,I=0;for(E=0;E<D;++E)N=P[E],O+=N.x,I+=N.y;for(O=O/D-_,I=I/D-v,E=0;E<D;++E)N=P[E],N.x-=O,N.y-=I}return M.initialize=function(E){P=E},M.x=function(E){return arguments.length?(_=+E,M):_},M.y=function(E){return arguments.length?(v=+E,M):v},M}function a(_){return function(){return _}}function i(){return(Math.random()-.5)*1e-6}function r(_){return _.x+_.vx}function f(_){return _.y+_.vy}function u(_){var v,P,M=1,E=1;typeof _!="function"&&(_=a(_==null?1:+_));function D(){for(var I,F=v.length,V,U,j,Z,te,re,W=0;W<E;++W)for(V=o.quadtree(v,r,f).visitAfter(N),I=0;I<F;++I)U=v[I],te=P[U.index],re=te*te,j=U.x+U.vx,Z=U.y+U.vy,V.visit(J);function J(le,ue,se,G,Y){var ee=le.data,$=le.r,K=te+$;if(ee){if(ee.index>U.index){var Q=j-ee.x-ee.vx,ae=Z-ee.y-ee.vy,ie=Q*Q+ae*ae;ie<K*K&&(Q===0&&(Q=i(),ie+=Q*Q),ae===0&&(ae=i(),ie+=ae*ae),ie=(K-(ie=Math.sqrt(ie)))/ie*M,U.vx+=(Q*=ie)*(K=($*=$)/(re+$)),U.vy+=(ae*=ie)*K,ee.vx-=Q*(K=1-K),ee.vy-=ae*K)}return}return ue>j+K||G<j-K||se>Z+K||Y<Z-K}}function N(I){if(I.data)return I.r=P[I.data.index];for(var F=I.r=0;F<4;++F)I[F]&&I[F].r>I.r&&(I.r=I[F].r)}function O(){if(!!v){var I,F=v.length,V;for(P=new Array(F),I=0;I<F;++I)V=v[I],P[V.index]=+_(V,I,v)}}return D.initialize=function(I){v=I,O()},D.iterations=function(I){return arguments.length?(E=+I,D):E},D.strength=function(I){return arguments.length?(M=+I,D):M},D.radius=function(I){return arguments.length?(_=typeof I=="function"?I:a(+I),O(),D):_},D}function s(_){return _.index}function h(_,v){var P=_.get(v);if(!P)throw new Error("missing: "+v);return P}function d(_){var v=s,P=V,M,E=a(30),D,N,O,I,F=1;_==null&&(_=[]);function V(re){return 1/Math.min(O[re.source.index],O[re.target.index])}function U(re){for(var W=0,J=_.length;W<F;++W)for(var le=0,ue,se,G,Y,ee,$,K;le<J;++le)ue=_[le],se=ue.source,G=ue.target,Y=G.x+G.vx-se.x-se.vx||i(),ee=G.y+G.vy-se.y-se.vy||i(),$=Math.sqrt(Y*Y+ee*ee),$=($-D[le])/$*re*M[le],Y*=$,ee*=$,G.vx-=Y*(K=I[le]),G.vy-=ee*K,se.vx+=Y*(K=1-K),se.vy+=ee*K}function j(){if(!!N){var re,W=N.length,J=_.length,le=c.map(N,v),ue;for(re=0,O=new Array(W);re<J;++re)ue=_[re],ue.index=re,typeof ue.source!="object"&&(ue.source=h(le,ue.source)),typeof ue.target!="object"&&(ue.target=h(le,ue.target)),O[ue.source.index]=(O[ue.source.index]||0)+1,O[ue.target.index]=(O[ue.target.index]||0)+1;for(re=0,I=new Array(J);re<J;++re)ue=_[re],I[re]=O[ue.source.index]/(O[ue.source.index]+O[ue.target.index]);M=new Array(J),Z(),D=new Array(J),te()}}function Z(){if(!!N)for(var re=0,W=_.length;re<W;++re)M[re]=+P(_[re],re,_)}function te(){if(!!N)for(var re=0,W=_.length;re<W;++re)D[re]=+E(_[re],re,_)}return U.initialize=function(re){N=re,j()},U.links=function(re){return arguments.length?(_=re,j(),U):_},U.id=function(re){return arguments.length?(v=re,U):v},U.iterations=function(re){return arguments.length?(F=+re,U):F},U.strength=function(re){return arguments.length?(P=typeof re=="function"?re:a(+re),Z(),U):P},U.distance=function(re){return arguments.length?(E=typeof re=="function"?re:a(+re),te(),U):E},U}function y(_){return _.x}function m(_){return _.y}var g=10,x=Math.PI*(3-Math.sqrt(5));function A(_){var v,P=1,M=.001,E=1-Math.pow(M,1/300),D=0,N=.6,O=c.map(),I=t.timer(V),F=p.dispatch("tick","end");_==null&&(_=[]);function V(){U(),F.call("tick",v),P<M&&(I.stop(),F.call("end",v))}function U(te){var re,W=_.length,J;te===void 0&&(te=1);for(var le=0;le<te;++le)for(P+=(D-P)*E,O.each(function(ue){ue(P)}),re=0;re<W;++re)J=_[re],J.fx==null?J.x+=J.vx*=N:(J.x=J.fx,J.vx=0),J.fy==null?J.y+=J.vy*=N:(J.y=J.fy,J.vy=0);return v}function j(){for(var te=0,re=_.length,W;te<re;++te){if(W=_[te],W.index=te,W.fx!=null&&(W.x=W.fx),W.fy!=null&&(W.y=W.fy),isNaN(W.x)||isNaN(W.y)){var J=g*Math.sqrt(te),le=te*x;W.x=J*Math.cos(le),W.y=J*Math.sin(le)}(isNaN(W.vx)||isNaN(W.vy))&&(W.vx=W.vy=0)}}function Z(te){return te.initialize&&te.initialize(_),te}return j(),v={tick:U,restart:function(){return I.restart(V),v},stop:function(){return I.stop(),v},nodes:function(te){return arguments.length?(_=te,j(),O.each(Z),v):_},alpha:function(te){return arguments.length?(P=+te,v):P},alphaMin:function(te){return arguments.length?(M=+te,v):M},alphaDecay:function(te){return arguments.length?(E=+te,v):+E},alphaTarget:function(te){return arguments.length?(D=+te,v):D},velocityDecay:function(te){return arguments.length?(N=1-te,v):1-N},force:function(te,re){return arguments.length>1?(re==null?O.remove(te):O.set(te,Z(re)),v):O.get(te)},find:function(te,re,W){var J=0,le=_.length,ue,se,G,Y,ee;for(W==null?W=1/0:W*=W,J=0;J<le;++J)Y=_[J],ue=te-Y.x,se=re-Y.y,G=ue*ue+se*se,G<W&&(ee=Y,W=G);return ee},on:function(te,re){return arguments.length>1?(F.on(te,re),v):F.on(te)}}}function b(){var _,v,P,M=a(-30),E,D=1,N=1/0,O=.81;function I(j){var Z,te=_.length,re=o.quadtree(_,y,m).visitAfter(V);for(P=j,Z=0;Z<te;++Z)v=_[Z],re.visit(U)}function F(){if(!!_){var j,Z=_.length,te;for(E=new Array(Z),j=0;j<Z;++j)te=_[j],E[te.index]=+M(te,j,_)}}function V(j){var Z=0,te,re,W=0,J,le,ue;if(j.length){for(J=le=ue=0;ue<4;++ue)(te=j[ue])&&(re=Math.abs(te.value))&&(Z+=te.value,W+=re,J+=re*te.x,le+=re*te.y);j.x=J/W,j.y=le/W}else{te=j,te.x=te.data.x,te.y=te.data.y;do Z+=E[te.data.index];while(te=te.next)}j.value=Z}function U(j,Z,te,re){if(!j.value)return!0;var W=j.x-v.x,J=j.y-v.y,le=re-Z,ue=W*W+J*J;if(le*le/O<ue)return ue<N&&(W===0&&(W=i(),ue+=W*W),J===0&&(J=i(),ue+=J*J),ue<D&&(ue=Math.sqrt(D*ue)),v.vx+=W*j.value*P/ue,v.vy+=J*j.value*P/ue),!0;if(j.length||ue>=N)return;(j.data!==v||j.next)&&(W===0&&(W=i(),ue+=W*W),J===0&&(J=i(),ue+=J*J),ue<D&&(ue=Math.sqrt(D*ue)));do j.data!==v&&(le=E[j.data.index]*P/ue,v.vx+=W*le,v.vy+=J*le);while(j=j.next)}return I.initialize=function(j){_=j,F()},I.strength=function(j){return arguments.length?(M=typeof j=="function"?j:a(+j),F(),I):M},I.distanceMin=function(j){return arguments.length?(D=j*j,I):Math.sqrt(D)},I.distanceMax=function(j){return arguments.length?(N=j*j,I):Math.sqrt(N)},I.theta=function(j){return arguments.length?(O=j*j,I):Math.sqrt(O)},I}function S(_,v,P){var M,E=a(.1),D,N;typeof _!="function"&&(_=a(+_)),v==null&&(v=0),P==null&&(P=0);function O(F){for(var V=0,U=M.length;V<U;++V){var j=M[V],Z=j.x-v||1e-6,te=j.y-P||1e-6,re=Math.sqrt(Z*Z+te*te),W=(N[V]-re)*D[V]*F/re;j.vx+=Z*W,j.vy+=te*W}}function I(){if(!!M){var F,V=M.length;for(D=new Array(V),N=new Array(V),F=0;F<V;++F)N[F]=+_(M[F],F,M),D[F]=isNaN(N[F])?0:+E(M[F],F,M)}}return O.initialize=function(F){M=F,I()},O.strength=function(F){return arguments.length?(E=typeof F=="function"?F:a(+F),I(),O):E},O.radius=function(F){return arguments.length?(_=typeof F=="function"?F:a(+F),I(),O):_},O.x=function(F){return arguments.length?(v=+F,O):v},O.y=function(F){return arguments.length?(P=+F,O):P},O}function w(_){var v=a(.1),P,M,E;typeof _!="function"&&(_=a(_==null?0:+_));function D(O){for(var I=0,F=P.length,V;I<F;++I)V=P[I],V.vx+=(E[I]-V.x)*M[I]*O}function N(){if(!!P){var O,I=P.length;for(M=new Array(I),E=new Array(I),O=0;O<I;++O)M[O]=isNaN(E[O]=+_(P[O],O,P))?0:+v(P[O],O,P)}}return D.initialize=function(O){P=O,N()},D.strength=function(O){return arguments.length?(v=typeof O=="function"?O:a(+O),N(),D):v},D.x=function(O){return arguments.length?(_=typeof O=="function"?O:a(+O),N(),D):_},D}function T(_){var v=a(.1),P,M,E;typeof _!="function"&&(_=a(_==null?0:+_));function D(O){for(var I=0,F=P.length,V;I<F;++I)V=P[I],V.vy+=(E[I]-V.y)*M[I]*O}function N(){if(!!P){var O,I=P.length;for(M=new Array(I),E=new Array(I),O=0;O<I;++O)M[O]=isNaN(E[O]=+_(P[O],O,P))?0:+v(P[O],O,P)}}return D.initialize=function(O){P=O,N()},D.strength=function(O){return arguments.length?(v=typeof O=="function"?O:a(+O),N(),D):v},D.y=function(O){return arguments.length?(_=typeof O=="function"?O:a(+O),N(),D):_},D}l.forceCenter=n,l.forceCollide=u,l.forceLink=d,l.forceManyBody=b,l.forceRadial=S,l.forceSimulation=A,l.forceX=w,l.forceY=T,Object.defineProperty(l,"__esModule",{value:!0})})},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(e,k,z){(function(l,o){typeof z=="object"&&typeof k!="undefined"?o(z):(l=typeof globalThis!="undefined"?globalThis:l||self,o(l.d3=l.d3||{}))})(this,function(l){function o(_){return Math.abs(_=Math.round(_))>=1e21?_.toLocaleString("en").replace(/,/g,""):_.toString(10)}function c(_,v){if((P=(_=v?_.toExponential(v-1):_.toExponential()).indexOf("e"))<0)return null;var P,M=_.slice(0,P);return[M.length>1?M[0]+M.slice(2):M,+_.slice(P+1)]}function p(_){return _=c(Math.abs(_)),_?_[1]:NaN}function t(_,v){return function(P,M){for(var E=P.length,D=[],N=0,O=_[0],I=0;E>0&&O>0&&(I+O+1>M&&(O=Math.max(1,M-I)),D.push(P.substring(E-=O,E+O)),!((I+=O+1)>M));)O=_[N=(N+1)%_.length];return D.reverse().join(v)}}function n(_){return function(v){return v.replace(/[0-9]/g,function(P){return _[+P]})}}var a=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function i(_){if(!(v=a.exec(_)))throw new Error("invalid format: "+_);var v;return new r({fill:v[1],align:v[2],sign:v[3],symbol:v[4],zero:v[5],width:v[6],comma:v[7],precision:v[8]&&v[8].slice(1),trim:v[9],type:v[10]})}i.prototype=r.prototype;function r(_){this.fill=_.fill===void 0?" ":_.fill+"",this.align=_.align===void 0?">":_.align+"",this.sign=_.sign===void 0?"-":_.sign+"",this.symbol=_.symbol===void 0?"":_.symbol+"",this.zero=!!_.zero,this.width=_.width===void 0?void 0:+_.width,this.comma=!!_.comma,this.precision=_.precision===void 0?void 0:+_.precision,this.trim=!!_.trim,this.type=_.type===void 0?"":_.type+""}r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function f(_){e:for(var v=_.length,P=1,M=-1,E;P<v;++P)switch(_[P]){case".":M=E=P;break;case"0":M===0&&(M=P),E=P;break;default:if(!+_[P])break e;M>0&&(M=0);break}return M>0?_.slice(0,M)+_.slice(E+1):_}var u;function s(_,v){var P=c(_,v);if(!P)return _+"";var M=P[0],E=P[1],D=E-(u=Math.max(-8,Math.min(8,Math.floor(E/3)))*3)+1,N=M.length;return D===N?M:D>N?M+new Array(D-N+1).join("0"):D>0?M.slice(0,D)+"."+M.slice(D):"0."+new Array(1-D).join("0")+c(_,Math.max(0,v+D-1))[0]}function h(_,v){var P=c(_,v);if(!P)return _+"";var M=P[0],E=P[1];return E<0?"0."+new Array(-E).join("0")+M:M.length>E+1?M.slice(0,E+1)+"."+M.slice(E+1):M+new Array(E-M.length+2).join("0")}var d={"%":function(_,v){return(_*100).toFixed(v)},b:function(_){return Math.round(_).toString(2)},c:function(_){return _+""},d:o,e:function(_,v){return _.toExponential(v)},f:function(_,v){return _.toFixed(v)},g:function(_,v){return _.toPrecision(v)},o:function(_){return Math.round(_).toString(8)},p:function(_,v){return h(_*100,v)},r:h,s,X:function(_){return Math.round(_).toString(16).toUpperCase()},x:function(_){return Math.round(_).toString(16)}};function y(_){return _}var m=Array.prototype.map,g=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function x(_){var v=_.grouping===void 0||_.thousands===void 0?y:t(m.call(_.grouping,Number),_.thousands+""),P=_.currency===void 0?"":_.currency[0]+"",M=_.currency===void 0?"":_.currency[1]+"",E=_.decimal===void 0?".":_.decimal+"",D=_.numerals===void 0?y:n(m.call(_.numerals,String)),N=_.percent===void 0?"%":_.percent+"",O=_.minus===void 0?"-":_.minus+"",I=_.nan===void 0?"NaN":_.nan+"";function F(U){U=i(U);var j=U.fill,Z=U.align,te=U.sign,re=U.symbol,W=U.zero,J=U.width,le=U.comma,ue=U.precision,se=U.trim,G=U.type;G==="n"?(le=!0,G="g"):d[G]||(ue===void 0&&(ue=12),se=!0,G="g"),(W||j==="0"&&Z==="=")&&(W=!0,j="0",Z="=");var Y=re==="$"?P:re==="#"&&/[boxX]/.test(G)?"0"+G.toLowerCase():"",ee=re==="$"?M:/[%p]/.test(G)?N:"",$=d[G],K=/[defgprs%]/.test(G);ue=ue===void 0?6:/[gprs]/.test(G)?Math.max(1,Math.min(21,ue)):Math.max(0,Math.min(20,ue));function Q(ae){var ie=Y,oe=ee,fe,ye,ce;if(G==="c")oe=$(ae)+oe,ae="";else{ae=+ae;var me=ae<0||1/ae<0;if(ae=isNaN(ae)?I:$(Math.abs(ae),ue),se&&(ae=f(ae)),me&&+ae==0&&te!=="+"&&(me=!1),ie=(me?te==="("?te:O:te==="-"||te==="("?"":te)+ie,oe=(G==="s"?g[8+u/3]:"")+oe+(me&&te==="("?")":""),K){for(fe=-1,ye=ae.length;++fe<ye;)if(ce=ae.charCodeAt(fe),48>ce||ce>57){oe=(ce===46?E+ae.slice(fe+1):ae.slice(fe))+oe,ae=ae.slice(0,fe);break}}}le&&!W&&(ae=v(ae,1/0));var xe=ie.length+ae.length+oe.length,ke=xe<J?new Array(J-xe+1).join(j):"";switch(le&&W&&(ae=v(ke+ae,ke.length?J-oe.length:1/0),ke=""),Z){case"<":ae=ie+ae+oe+ke;break;case"=":ae=ie+ke+ae+oe;break;case"^":ae=ke.slice(0,xe=ke.length>>1)+ie+ae+oe+ke.slice(xe);break;default:ae=ke+ie+ae+oe;break}return D(ae)}return Q.toString=function(){return U+""},Q}function V(U,j){var Z=F((U=i(U),U.type="f",U)),te=Math.max(-8,Math.min(8,Math.floor(p(j)/3)))*3,re=Math.pow(10,-te),W=g[8+te/3];return function(J){return Z(re*J)+W}}return{format:F,formatPrefix:V}}var A;b({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function b(_){return A=x(_),l.format=A.format,l.formatPrefix=A.formatPrefix,A}function S(_){return Math.max(0,-p(Math.abs(_)))}function w(_,v){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(p(v)/3)))*3-p(Math.abs(_)))}function T(_,v){return _=Math.abs(_),v=Math.abs(v)-_,Math.max(0,p(v)-p(_))+1}l.FormatSpecifier=r,l.formatDefaultLocale=b,l.formatLocale=x,l.formatSpecifier=i,l.precisionFixed=S,l.precisionPrefix=w,l.precisionRound=T,Object.defineProperty(l,"__esModule",{value:!0})})},{}],113:[function(e,k,z){(function(l,o){typeof z=="object"&&typeof k!="undefined"?o(z,e("d3-geo"),e("d3-array")):o(l.d3=l.d3||{},l.d3,l.d3)})(this,function(l,o,c){var p=Math.abs,t=Math.atan,n=Math.atan2,a=Math.cos,i=Math.exp,r=Math.floor,f=Math.log,u=Math.max,s=Math.min,h=Math.pow,d=Math.round,y=Math.sign||function(Fe){return Fe>0?1:Fe<0?-1:0},m=Math.sin,g=Math.tan,x=1e-6,A=1e-12,b=Math.PI,S=b/2,w=b/4,T=Math.SQRT1_2,_=I(2),v=I(b),P=b*2,M=180/b,E=b/180;function D(Fe){return Fe?Fe/Math.sin(Fe):1}function N(Fe){return Fe>1?S:Fe<-1?-S:Math.asin(Fe)}function O(Fe){return Fe>1?0:Fe<-1?b:Math.acos(Fe)}function I(Fe){return Fe>0?Math.sqrt(Fe):0}function F(Fe){return Fe=i(2*Fe),(Fe-1)/(Fe+1)}function V(Fe){return(i(Fe)-i(-Fe))/2}function U(Fe){return(i(Fe)+i(-Fe))/2}function j(Fe){return f(Fe+I(Fe*Fe+1))}function Z(Fe){return f(Fe+I(Fe*Fe-1))}function te(Fe){var je=g(Fe/2),nt=2*f(a(Fe/2))/(je*je);function lt(_t,bt){var Tt=a(_t),rr=a(bt),fr=m(bt),er=rr*Tt,pr=-((1-er?f((1+er)/2)/(1-er):-.5)+nt/(1+er));return[pr*rr*m(_t),pr*fr]}return lt.invert=function(_t,bt){var Tt=I(_t*_t+bt*bt),rr=-Fe/2,fr=50,er;if(!Tt)return[0,0];do{var pr=rr/2,Dr=a(pr),Kr=m(pr),an=Kr/Dr,wn=-f(p(Dr));rr-=er=(2/an*wn-nt*an-Tt)/(-wn/(Kr*Kr)+1-nt/(2*Dr*Dr))*(Dr<0?.7:1)}while(p(er)>x&&--fr>0);var Dn=m(rr);return[n(_t*Dn,Tt*a(rr)),N(bt*Dn/Tt)]},lt}function re(){var Fe=S,je=o.geoProjectionMutator(te),nt=je(Fe);return nt.radius=function(lt){return arguments.length?je(Fe=lt*E):Fe*M},nt.scale(179.976).clipAngle(147)}function W(Fe,je){var nt=a(je),lt=D(O(nt*a(Fe/=2)));return[2*nt*m(Fe)*lt,m(je)*lt]}W.invert=function(Fe,je){if(!(Fe*Fe+4*je*je>b*b+x)){var nt=Fe,lt=je,_t=25;do{var bt=m(nt),Tt=m(nt/2),rr=a(nt/2),fr=m(lt),er=a(lt),pr=m(2*lt),Dr=fr*fr,Kr=er*er,an=Tt*Tt,wn=1-Kr*rr*rr,Dn=wn?O(er*rr)*I(Jn=1/wn):Jn=0,Jn,wa=2*Dn*er*Tt-Fe,Aa=Dn*fr-je,$a=Jn*(Kr*an+Dn*er*rr*Dr),Za=Jn*(.5*bt*pr-Dn*2*fr*Tt),ri=Jn*.25*(pr*Tt-Dn*fr*Kr*bt),vi=Jn*(Dr*rr+Dn*an*er),ho=Za*ri-vi*$a;if(!ho)break;var ai=(Aa*Za-wa*vi)/ho,ji=(wa*ri-Aa*$a)/ho;nt-=ai,lt-=ji}while((p(ai)>x||p(ji)>x)&&--_t>0);return[nt,lt]}};function J(){return o.geoProjection(W).scale(152.63)}function le(Fe){var je=m(Fe),nt=a(Fe),lt=Fe>=0?1:-1,_t=g(lt*Fe),bt=(1+je-nt)/2;function Tt(rr,fr){var er=a(fr),pr=a(rr/=2);return[(1+er)*m(rr),(lt*fr>-n(pr,_t)-.001?0:-lt*10)+bt+m(fr)*nt-(1+er)*je*pr]}return Tt.invert=function(rr,fr){var er=0,pr=0,Dr=50;do{var Kr=a(er),an=m(er),wn=a(pr),Dn=m(pr),Jn=1+wn,wa=Jn*an-rr,Aa=bt+Dn*nt-Jn*je*Kr-fr,$a=Jn*Kr/2,Za=-an*Dn,ri=je*Jn*an/2,vi=nt*wn+je*Kr*Dn,ho=Za*ri-vi*$a,ai=(Aa*Za-wa*vi)/ho/2,ji=(wa*ri-Aa*$a)/ho;p(ji)>2&&(ji/=2),er-=ai,pr-=ji}while((p(ai)>x||p(ji)>x)&&--Dr>0);return lt*pr>-n(a(er),_t)-.001?[er*2,pr]:null},Tt}function ue(){var Fe=20*E,je=Fe>=0?1:-1,nt=g(je*Fe),lt=o.geoProjectionMutator(le),_t=lt(Fe),bt=_t.stream;return _t.parallel=function(Tt){return arguments.length?(nt=g((je=(Fe=Tt*E)>=0?1:-1)*Fe),lt(Fe)):Fe*M},_t.stream=function(Tt){var rr=_t.rotate(),fr=bt(Tt),er=(_t.rotate([0,0]),bt(Tt)),pr=_t.precision();return _t.rotate(rr),fr.sphere=function(){er.polygonStart(),er.lineStart();for(var Dr=je*-180;je*Dr<180;Dr+=je*90)er.point(Dr,je*90);if(Fe)for(;je*(Dr-=3*je*pr)>=-180;)er.point(Dr,je*-n(a(Dr*E/2),nt)*M);er.lineEnd(),er.polygonEnd()},fr},_t.scale(218.695).center([0,28.0974])}function se(Fe,je){var nt=g(je/2),lt=I(1-nt*nt),_t=1+lt*a(Fe/=2),bt=m(Fe)*lt/_t,Tt=nt/_t,rr=bt*bt,fr=Tt*Tt;return[4/3*bt*(3+rr-3*fr),4/3*Tt*(3+3*rr-fr)]}se.invert=function(Fe,je){if(Fe*=3/8,je*=3/8,!Fe&&p(je)>1)return null;var nt=Fe*Fe,lt=je*je,_t=1+nt+lt,bt=I((_t-I(_t*_t-4*je*je))/2),Tt=N(bt)/3,rr=bt?Z(p(je/bt))/3:j(p(Fe))/3,fr=a(Tt),er=U(rr),pr=er*er-fr*fr;return[y(Fe)*2*n(V(rr)*fr,.25-pr),y(je)*2*n(er*m(Tt),.25+pr)]};function G(){return o.geoProjection(se).scale(66.1603)}var Y=I(8),ee=f(1+_);function $(Fe,je){var nt=p(je);return nt<w?[Fe,f(g(w+je/2))]:[Fe*a(nt)*(2*_-1/m(nt)),y(je)*(2*_*(nt-w)-f(g(nt/2)))]}$.invert=function(Fe,je){if((bt=p(je))<ee)return[Fe,2*t(i(je))-S];var nt=w,lt=25,_t,bt;do{var Tt=a(nt/2),rr=g(nt/2);nt-=_t=(Y*(nt-w)-f(rr)-bt)/(Y-Tt*Tt/(2*rr))}while(p(_t)>A&&--lt>0);return[Fe/(a(nt)*(Y-1/m(nt))),y(je)*nt]};function K(){return o.geoProjection($).scale(112.314)}function Q(Fe){var je=2*b/Fe;function nt(lt,_t){var bt=o.geoAzimuthalEquidistantRaw(lt,_t);if(p(lt)>S){var Tt=n(bt[1],bt[0]),rr=I(bt[0]*bt[0]+bt[1]*bt[1]),fr=je*d((Tt-S)/je)+S,er=n(m(Tt-=fr),2-a(Tt));Tt=fr+N(b/rr*m(er))-er,bt[0]=rr*a(Tt),bt[1]=rr*m(Tt)}return bt}return nt.invert=function(lt,_t){var bt=I(lt*lt+_t*_t);if(bt>S){var Tt=n(_t,lt),rr=je*d((Tt-S)/je)+S,fr=Tt>rr?-1:1,er=bt*a(rr-Tt),pr=1/g(fr*O((er-b)/I(b*(b-2*er)+bt*bt)));Tt=rr+2*t((pr+fr*I(pr*pr-3))/3),lt=bt*a(Tt),_t=bt*m(Tt)}return o.geoAzimuthalEquidistantRaw.invert(lt,_t)},nt}function ae(){var Fe=5,je=o.geoProjectionMutator(Q),nt=je(Fe),lt=nt.stream,_t=.01,bt=-a(_t*E),Tt=m(_t*E);return nt.lobes=function(rr){return arguments.length?je(Fe=+rr):Fe},nt.stream=function(rr){var fr=nt.rotate(),er=lt(rr),pr=(nt.rotate([0,0]),lt(rr));return nt.rotate(fr),er.sphere=function(){pr.polygonStart(),pr.lineStart();for(var Dr=0,Kr=360/Fe,an=2*b/Fe,wn=90-180/Fe,Dn=S;Dr<Fe;++Dr,wn-=Kr,Dn-=an)pr.point(n(Tt*a(Dn),bt)*M,N(Tt*m(Dn))*M),wn<-90?(pr.point(-90,-180-wn-_t),pr.point(-90,-180-wn+_t)):(pr.point(90,wn+_t),pr.point(90,wn-_t));pr.lineEnd(),pr.polygonEnd()},er},nt.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)}function ie(Fe,je){if(arguments.length<2&&(je=Fe),je===1)return o.geoAzimuthalEqualAreaRaw;if(je===1/0)return oe;function nt(lt,_t){var bt=o.geoAzimuthalEqualAreaRaw(lt/je,_t);return bt[0]*=Fe,bt}return nt.invert=function(lt,_t){var bt=o.geoAzimuthalEqualAreaRaw.invert(lt/Fe,_t);return bt[0]*=je,bt},nt}function oe(Fe,je){return[Fe*a(je)/a(je/=2),2*m(je)]}oe.invert=function(Fe,je){var nt=2*N(je/2);return[Fe*a(nt/2)/a(nt),nt]};function fe(){var Fe=2,je=o.geoProjectionMutator(ie),nt=je(Fe);return nt.coefficient=function(lt){return arguments.length?je(Fe=+lt):Fe},nt.scale(169.529)}function ye(Fe,je,nt){var lt=100,_t,bt,Tt;nt=nt===void 0?0:+nt,je=+je;do bt=Fe(nt),Tt=Fe(nt+x),bt===Tt&&(Tt=bt+x),nt-=_t=-1*x*(bt-je)/(bt-Tt);while(lt-- >0&&p(_t)>x);return lt<0?NaN:nt}function ce(Fe,je,nt){return je===void 0&&(je=40),nt===void 0&&(nt=A),function(lt,_t,bt,Tt){var rr,fr,er;bt=bt===void 0?0:+bt,Tt=Tt===void 0?0:+Tt;for(var pr=0;pr<je;pr++){var Dr=Fe(bt,Tt),Kr=Dr[0]-lt,an=Dr[1]-_t;if(p(Kr)<nt&&p(an)<nt)break;var wn=Kr*Kr+an*an;if(wn>rr){bt-=fr/=2,Tt-=er/=2;continue}rr=wn;var Dn=(bt>0?-1:1)*nt,Jn=(Tt>0?-1:1)*nt,wa=Fe(bt+Dn,Tt),Aa=Fe(bt,Tt+Jn),$a=(wa[0]-Dr[0])/Dn,Za=(wa[1]-Dr[1])/Dn,ri=(Aa[0]-Dr[0])/Jn,vi=(Aa[1]-Dr[1])/Jn,ho=vi*$a-Za*ri,ai=(p(ho)<.5?.5:1)/ho;if(fr=(an*ri-Kr*vi)*ai,er=(Kr*Za-an*$a)*ai,bt+=fr,Tt+=er,p(fr)<nt&&p(er)<nt)break}return[bt,Tt]}}function me(){var Fe=ie(1.68,2),je=1.4,nt=12;function lt(_t,bt){if(_t+bt<-je){var Tt=(_t-bt+1.6)*(_t+bt+je)/8;_t+=Tt,bt-=.8*Tt*m(bt+b/2)}var rr=Fe(_t,bt),fr=(1-a(_t*bt))/nt;return rr[1]<0&&(rr[0]*=1+fr),rr[1]>0&&(rr[1]*=1+fr/1.5*rr[0]*rr[0]),rr}return lt.invert=ce(lt),lt}function xe(){return o.geoProjection(me()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function ke(Fe,je){var nt=Fe*m(je),lt=30,_t;do je-=_t=(je+m(je)-nt)/(1+a(je));while(p(_t)>x&&--lt>0);return je/2}function Ae(Fe,je,nt){function lt(_t,bt){return[Fe*_t*a(bt=ke(nt,bt)),je*m(bt)]}return lt.invert=function(_t,bt){return bt=N(bt/je),[_t/(Fe*a(bt)),N((2*bt+m(2*bt))/nt)]},lt}var Oe=Ae(_/S,_,b);function He(){return o.geoProjection(Oe).scale(169.529)}var Ge=2.00276,_e=1.11072;function Ie(Fe,je){var nt=ke(b,je);return[Ge*Fe/(1/a(je)+_e/a(nt)),(je+_*m(nt))/Ge]}Ie.invert=function(Fe,je){var nt=Ge*je,lt=je<0?-w:w,_t=25,bt,Tt;do Tt=nt-_*m(lt),lt-=bt=(m(2*lt)+2*lt-b*m(Tt))/(2*a(2*lt)+2+b*a(Tt)*_*a(lt));while(p(bt)>x&&--_t>0);return Tt=nt-_*m(lt),[Fe*(1/a(Tt)+_e/a(lt))/Ge,Tt]};function We(){return o.geoProjection(Ie).scale(160.857)}function et(Fe){var je=0,nt=o.geoProjectionMutator(Fe),lt=nt(je);return lt.parallel=function(_t){return arguments.length?nt(je=_t*E):je*M},lt}function Ne(Fe,je){return[Fe*a(je),je]}Ne.invert=function(Fe,je){return[Fe/a(je),je]};function De(){return o.geoProjection(Ne).scale(152.63)}function Ve(Fe){if(!Fe)return Ne;var je=1/g(Fe);function nt(lt,_t){var bt=je+Fe-_t,Tt=bt&&lt*a(_t)/bt;return[bt*m(Tt),je-bt*a(Tt)]}return nt.invert=function(lt,_t){var bt=I(lt*lt+(_t=je-_t)*_t),Tt=je+Fe-bt;return[bt/a(Tt)*n(lt,_t),Tt]},nt}function dt(){return et(Ve).scale(123.082).center([0,26.1441]).parallel(45)}function Dt(Fe){function je(nt,lt){var _t=S-lt,bt=_t&&nt*Fe*m(_t)/_t;return[_t*m(bt)/Fe,S-_t*a(bt)]}return je.invert=function(nt,lt){var _t=nt*Fe,bt=S-lt,Tt=I(_t*_t+bt*bt),rr=n(_t,bt);return[(Tt?Tt/m(Tt):1)*rr/Fe,S-Tt]},je}function Gt(){var Fe=.5,je=o.geoProjectionMutator(Dt),nt=je(Fe);return nt.fraction=function(lt){return arguments.length?je(Fe=+lt):Fe},nt.scale(158.837)}var Mt=Ae(1,4/b,b);function zt(){return o.geoProjection(Mt).scale(152.63)}function Nt(Fe,je,nt,lt,_t,bt){var Tt=a(bt),rr;if(p(Fe)>1||p(bt)>1)rr=O(nt*_t+je*lt*Tt);else{var fr=m(Fe/2),er=m(bt/2);rr=2*N(I(fr*fr+je*lt*er*er))}return p(rr)>x?[rr,n(lt*m(bt),je*_t-nt*lt*Tt)]:[0,0]}function Et(Fe,je,nt){return O((Fe*Fe+je*je-nt*nt)/(2*Fe*je))}function At(Fe){return Fe-2*b*r((Fe+b)/(2*b))}function it(Fe,je,nt){for(var lt=[[Fe[0],Fe[1],m(Fe[1]),a(Fe[1])],[je[0],je[1],m(je[1]),a(je[1])],[nt[0],nt[1],m(nt[1]),a(nt[1])]],_t=lt[2],bt,Tt=0;Tt<3;++Tt,_t=bt)bt=lt[Tt],_t.v=Nt(bt[1]-_t[1],_t[3],_t[2],bt[3],bt[2],bt[0]-_t[0]),_t.point=[0,0];var rr=Et(lt[0].v[0],lt[2].v[0],lt[1].v[0]),fr=Et(lt[0].v[0],lt[1].v[0],lt[2].v[0]),er=b-rr;lt[2].point[1]=0,lt[0].point[0]=-(lt[1].point[0]=lt[0].v[0]/2);var pr=[lt[2].point[0]=lt[0].point[0]+lt[2].v[0]*a(rr),2*(lt[0].point[1]=lt[1].point[1]=lt[2].v[0]*m(rr))];function Dr(Kr,an){var wn=m(an),Dn=a(an),Jn=new Array(3),wa;for(wa=0;wa<3;++wa){var Aa=lt[wa];if(Jn[wa]=Nt(an-Aa[1],Aa[3],Aa[2],Dn,wn,Kr-Aa[0]),!Jn[wa][0])return Aa.point;Jn[wa][1]=At(Jn[wa][1]-Aa.v[1])}var $a=pr.slice();for(wa=0;wa<3;++wa){var Za=wa==2?0:wa+1,ri=Et(lt[wa].v[0],Jn[wa][0],Jn[Za][0]);Jn[wa][1]<0&&(ri=-ri),wa?wa==1?(ri=fr-ri,$a[0]-=Jn[wa][0]*a(ri),$a[1]-=Jn[wa][0]*m(ri)):(ri=er-ri,$a[0]+=Jn[wa][0]*a(ri),$a[1]+=Jn[wa][0]*m(ri)):($a[0]+=Jn[wa][0]*a(ri),$a[1]-=Jn[wa][0]*m(ri))}return $a[0]/=3,$a[1]/=3,$a}return Dr}function ht(Fe){return Fe[0]*=E,Fe[1]*=E,Fe}function $e(){return Ee([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Ee(Fe,je,nt){var lt=o.geoCentroid({type:"MultiPoint",coordinates:[Fe,je,nt]}),_t=[-lt[0],-lt[1]],bt=o.geoRotation(_t),Tt=it(ht(bt(Fe)),ht(bt(je)),ht(bt(nt)));Tt.invert=ce(Tt);var rr=o.geoProjection(Tt).rotate(_t),fr=rr.center;return delete rr.rotate,rr.center=function(er){return arguments.length?fr(bt(er)):bt.invert(fr())},rr.clipAngle(90)}function Xe(Fe,je){var nt=I(1-m(je));return[2/v*Fe*nt,v*(1-nt)]}Xe.invert=function(Fe,je){var nt=(nt=je/v-1)*nt;return[nt>0?Fe*I(b/nt)/2:0,N(1-nt)]};function rt(){return o.geoProjection(Xe).scale(95.6464).center([0,30])}function ut(Fe){var je=g(Fe);function nt(lt,_t){return[lt,(lt?lt/m(lt):1)*(m(_t)*a(lt)-je*a(_t))]}return nt.invert=je?function(lt,_t){lt&&(_t*=m(lt)/lt);var bt=a(lt);return[lt,2*n(I(bt*bt+je*je-_t*_t)-bt,je-_t)]}:function(lt,_t){return[lt,N(lt?_t*g(lt)/lt:_t)]},nt}function Pt(){return et(ut).scale(249.828).clipAngle(90)}var kt=I(3);function Bt(Fe,je){return[kt*Fe*(2*a(2*je/3)-1)/v,kt*v*m(je/3)]}Bt.invert=function(Fe,je){var nt=3*N(je/(kt*v));return[v*Fe/(kt*(2*a(2*nt/3)-1)),nt]};function Xt(){return o.geoProjection(Bt).scale(156.19)}function Ut(Fe){var je=a(Fe);function nt(lt,_t){return[lt*je,m(_t)/je]}return nt.invert=function(lt,_t){return[lt/je,N(_t*je)]},nt}function Jt(){return et(Ut).parallel(38.58).scale(195.044)}function Je(Fe){var je=a(Fe);function nt(lt,_t){return[lt*je,(1+je)*g(_t/2)]}return nt.invert=function(lt,_t){return[lt/je,t(_t/(1+je))*2]},nt}function gt(){return et(Je).scale(124.75)}function Ct(Fe,je){var nt=I(8/(3*b));return[nt*Fe*(1-p(je)/b),nt*je]}Ct.invert=function(Fe,je){var nt=I(8/(3*b)),lt=je/nt;return[Fe/(nt*(1-p(lt)/b)),lt]};function or(){return o.geoProjection(Ct).scale(165.664)}function gr(Fe,je){var nt=I(4-3*m(p(je)));return[2/I(6*b)*Fe*nt,y(je)*I(2*b/3)*(2-nt)]}gr.invert=function(Fe,je){var nt=2-p(je)/I(2*b/3);return[Fe*I(6*b)/(2*nt),y(je)*N((4-nt*nt)/3)]};function lr(){return o.geoProjection(gr).scale(165.664)}function mr(Fe,je){var nt=I(b*(4+b));return[2/nt*Fe*(1+I(1-4*je*je/(b*b))),4/nt*je]}mr.invert=function(Fe,je){var nt=I(b*(4+b))/2;return[Fe*nt/(1+I(1-je*je*(4+b)/(4*b))),je*nt/2]};function Fr(){return o.geoProjection(mr).scale(180.739)}function Rr(Fe,je){var nt=(2+S)*m(je);je/=2;for(var lt=0,_t=1/0;lt<10&&p(_t)>x;lt++){var bt=a(je);je-=_t=(je+m(je)*(bt+2)-nt)/(2*bt*(1+bt))}return[2/I(b*(4+b))*Fe*(1+a(je)),2*I(b/(4+b))*m(je)]}Rr.invert=function(Fe,je){var nt=je*I((4+b)/b)/2,lt=N(nt),_t=a(lt);return[Fe/(2/I(b*(4+b))*(1+_t)),N((lt+nt*(_t+2))/(2+S))]};function ir(){return o.geoProjection(Rr).scale(180.739)}function Vr(Fe,je){return[Fe*(1+a(je))/I(2+b),2*je/I(2+b)]}Vr.invert=function(Fe,je){var nt=I(2+b),lt=je*nt/2;return[nt*Fe/(1+a(lt)),lt]};function qe(){return o.geoProjection(Vr).scale(173.044)}function we(Fe,je){for(var nt=(1+S)*m(je),lt=0,_t=1/0;lt<10&&p(_t)>x;lt++)je-=_t=(je+m(je)-nt)/(1+a(je));return nt=I(2+b),[Fe*(1+a(je))/nt,2*je/nt]}we.invert=function(Fe,je){var nt=1+S,lt=I(nt/2);return[Fe*2*lt/(1+a(je*=lt)),N((je+m(je))/nt)]};function Me(){return o.geoProjection(we).scale(173.044)}var Re=3+2*_;function Ye(Fe,je){var nt=m(Fe/=2),lt=a(Fe),_t=I(a(je)),bt=a(je/=2),Tt=m(je)/(bt+_*lt*_t),rr=I(2/(1+Tt*Tt)),fr=I((_*bt+(lt+nt)*_t)/(_*bt+(lt-nt)*_t));return[Re*(rr*(fr-1/fr)-2*f(fr)),Re*(rr*Tt*(fr+1/fr)-2*t(Tt))]}Ye.invert=function(Fe,je){if(!(bt=se.invert(Fe/1.2,je*1.065)))return null;var nt=bt[0],lt=bt[1],_t=20,bt;Fe/=Re,je/=Re;do{var Tt=nt/2,rr=lt/2,fr=m(Tt),er=a(Tt),pr=m(rr),Dr=a(rr),Kr=a(lt),an=I(Kr),wn=pr/(Dr+_*er*an),Dn=wn*wn,Jn=I(2/(1+Dn)),wa=_*Dr+(er+fr)*an,Aa=_*Dr+(er-fr)*an,$a=wa/Aa,Za=I($a),ri=Za-1/Za,vi=Za+1/Za,ho=Jn*ri-2*f(Za)-Fe,ai=Jn*wn*vi-2*t(wn)-je,ji=pr&&T*an*fr*Dn/pr,yo=(_*er*Dr+an)/(2*(Dr+_*er*an)*(Dr+_*er*an)*an),Io=-.5*wn*Jn*Jn*Jn,wi=Io*ji,ki=Io*yo,Cs=(Cs=2*Dr+_*an*(er-fr))*Cs*Za,ko=(_*er*Dr*an+Kr)/Cs,Yo=-(_*fr*pr)/(an*Cs),is=ri*wi-2*ko/Za+Jn*(ko+ko/$a),he=ri*ki-2*Yo/Za+Jn*(Yo+Yo/$a),Te=wn*vi*wi-2*ji/(1+Dn)+Jn*vi*ji+Jn*wn*(ko-ko/$a),Le=wn*vi*ki-2*yo/(1+Dn)+Jn*vi*yo+Jn*wn*(Yo-Yo/$a),Ue=he*Te-Le*is;if(!Ue)break;var Be=(ai*he-ho*Le)/Ue,Ke=(ho*Te-ai*is)/Ue;nt-=Be,lt=u(-S,s(S,lt-Ke))}while((p(Be)>x||p(Ke)>x)&&--_t>0);return p(p(lt)-S)<x?[0,lt]:_t&&[nt,lt]};function Qe(){return o.geoProjection(Ye).scale(62.5271)}var ot=a(35*E);function st(Fe,je){var nt=g(je/2);return[Fe*ot*I(1-nt*nt),(1+ot)*nt]}st.invert=function(Fe,je){var nt=je/(1+ot);return[Fe&&Fe/(ot*I(1-nt*nt)),2*t(nt)]};function pt(){return o.geoProjection(st).scale(137.152)}function wt(Fe,je){var nt=je/2,lt=a(nt);return[2*Fe/v*a(je)*lt*lt,v*g(nt)]}wt.invert=function(Fe,je){var nt=t(je/v),lt=a(nt),_t=2*nt;return[Fe*v/2/(a(_t)*lt*lt),_t]};function Yt(){return o.geoProjection(wt).scale(135.264)}function wr(Fe){var je=1-Fe,nt=bt(b,0)[0]-bt(-b,0)[0],lt=bt(0,S)[1]-bt(0,-S)[1],_t=I(2*lt/nt);function bt(fr,er){var pr=a(er),Dr=m(er);return[pr/(je+Fe*pr)*fr,je*er+Fe*Dr]}function Tt(fr,er){var pr=bt(fr,er);return[pr[0]*_t,pr[1]/_t]}function rr(fr){return Tt(0,fr)[1]}return Tt.invert=function(fr,er){var pr=ye(rr,er),Dr=fr/_t*(Fe+je/a(pr));return[Dr,pr]},Tt}function Tr(){var Fe=.5,je=o.geoProjectionMutator(wr),nt=je(Fe);return nt.alpha=function(lt){return arguments.length?je(Fe=+lt):Fe},nt.scale(168.725)}function Mr(Fe){return[Fe[0]/2,N(g(Fe[1]/2*E))*M]}function _r(Fe){return[Fe[0]*2,2*t(m(Fe[1]*E))*M]}function Or(Fe){Fe==null&&(Fe=o.geoOrthographic);var je=Fe(),nt=o.geoEquirectangular().scale(M).precision(0).clipAngle(null).translate([0,0]);function lt(bt){return je(Mr(bt))}je.invert&&(lt.invert=function(bt){return _r(je.invert(bt))}),lt.stream=function(bt){var Tt=je.stream(bt),rr=nt.stream({point:function(fr,er){Tt.point(fr/2,N(g(-er/2*E))*M)},lineStart:function(){Tt.lineStart()},lineEnd:function(){Tt.lineEnd()},polygonStart:function(){Tt.polygonStart()},polygonEnd:function(){Tt.polygonEnd()}});return rr.sphere=Tt.sphere,rr};function _t(bt){lt[bt]=function(){return arguments.length?(je[bt].apply(je,arguments),lt):je[bt]()}}return lt.rotate=function(bt){return arguments.length?(nt.rotate(bt),lt):nt.rotate()},lt.center=function(bt){return arguments.length?(je.center(Mr(bt)),lt):_r(je.center())},_t("angle"),_t("clipAngle"),_t("clipExtent"),_t("fitExtent"),_t("fitHeight"),_t("fitSize"),_t("fitWidth"),_t("scale"),_t("translate"),_t("precision"),lt.scale(249.5)}function nn(Fe,je){var nt=2*b/je,lt=Fe*Fe;function _t(bt,Tt){var rr=o.geoAzimuthalEquidistantRaw(bt,Tt),fr=rr[0],er=rr[1],pr=fr*fr+er*er;if(pr>lt){var Dr=I(pr),Kr=n(er,fr),an=nt*d(Kr/nt),wn=Kr-an,Dn=Fe*a(wn),Jn=(Fe*m(wn)-wn*m(Dn))/(S-Dn),wa=Sr(wn,Jn),Aa=(b-Fe)/yr(wa,Dn,b);fr=Dr;var $a=50,Za;do fr-=Za=(Fe+yr(wa,Dn,fr)*Aa-Dr)/(wa(fr)*Aa);while(p(Za)>x&&--$a>0);er=wn*m(fr),fr<S&&(er-=Jn*(fr-S));var ri=m(an),vi=a(an);rr[0]=fr*vi-er*ri,rr[1]=fr*ri+er*vi}return rr}return _t.invert=function(bt,Tt){var rr=bt*bt+Tt*Tt;if(rr>lt){var fr=I(rr),er=n(Tt,bt),pr=nt*d(er/nt),Dr=er-pr;bt=fr*a(Dr),Tt=fr*m(Dr);for(var Kr=bt-S,an=m(bt),wn=Tt/an,Dn=bt<S?1/0:0,Jn=10;;){var wa=Fe*m(wn),Aa=Fe*a(wn),$a=m(Aa),Za=S-Aa,ri=(wa-wn*$a)/Za,vi=Sr(wn,ri);if(p(Dn)<A||!--Jn)break;wn-=Dn=(wn*an-ri*Kr-Tt)/(an-Kr*2*(Za*(Aa+wn*wa*a(Aa)-$a)-wa*(wa-wn*$a))/(Za*Za))}fr=Fe+yr(vi,Aa,bt)*(b-Fe)/yr(vi,Aa,b),er=pr+wn,bt=fr*a(er),Tt=fr*m(er)}return o.geoAzimuthalEquidistantRaw.invert(bt,Tt)},_t}function Sr(Fe,je){return function(nt){var lt=Fe*a(nt);return nt<S&&(lt-=je),I(1+lt*lt)}}function yr(Fe,je,nt){for(var lt=50,_t=(nt-je)/lt,bt=Fe(je)+Fe(nt),Tt=1,rr=je;Tt<lt;++Tt)bt+=2*Fe(rr+=_t);return bt*.5*_t}function gn(){var Fe=6,je=30*E,nt=a(je),lt=m(je),_t=o.geoProjectionMutator(nn),bt=_t(je,Fe),Tt=bt.stream,rr=.01,fr=-a(rr*E),er=m(rr*E);return bt.radius=function(pr){return arguments.length?(nt=a(je=pr*E),lt=m(je),_t(je,Fe)):je*M},bt.lobes=function(pr){return arguments.length?_t(je,Fe=+pr):Fe},bt.stream=function(pr){var Dr=bt.rotate(),Kr=Tt(pr),an=(bt.rotate([0,0]),Tt(pr));return bt.rotate(Dr),Kr.sphere=function(){an.polygonStart(),an.lineStart();for(var wn=0,Dn=2*b/Fe,Jn=0;wn<Fe;++wn,Jn-=Dn)an.point(n(er*a(Jn),fr)*M,N(er*m(Jn))*M),an.point(n(lt*a(Jn-Dn/2),nt)*M,N(lt*m(Jn-Dn/2))*M);an.lineEnd(),an.polygonEnd()},Kr},bt.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)}function Xr(Fe,je,nt,lt,_t,bt,Tt,rr){arguments.length<8&&(rr=0);function fr(er,pr){if(!pr)return[Fe*er/b,0];var Dr=pr*pr,Kr=Fe+Dr*(je+Dr*(nt+Dr*lt)),an=pr*(_t-1+Dr*(bt-rr+Dr*Tt)),wn=(Kr*Kr+an*an)/(2*an),Dn=er*N(Kr/wn)/b;return[wn*m(Dn),pr*(1+Dr*rr)+wn*(1-a(Dn))]}return fr.invert=function(er,pr){var Dr=b*er/Fe,Kr=pr,an,wn,Dn=50;do{var Jn=Kr*Kr,wa=Fe+Jn*(je+Jn*(nt+Jn*lt)),Aa=Kr*(_t-1+Jn*(bt-rr+Jn*Tt)),$a=wa*wa+Aa*Aa,Za=2*Aa,ri=$a/Za,vi=ri*ri,ho=N(wa/ri)/b,ai=Dr*ho,ji=wa*wa,yo=(2*je+Jn*(4*nt+Jn*6*lt))*Kr,Io=_t+Jn*(3*bt+Jn*5*Tt),wi=2*(wa*yo+Aa*(Io-1)),ki=2*(Io-1),Cs=(wi*Za-$a*ki)/(Za*Za),ko=a(ai),Yo=m(ai),is=ri*ko,he=ri*Yo,Te=Dr/b*(1/I(1-ji/vi))*(yo*ri-wa*Cs)/vi,Le=he-er,Ue=Kr*(1+Jn*rr)+ri-is-pr,Be=Cs*Yo+is*Te,Ke=is*ho,yt=1+Cs-(Cs*ko-he*Te),vt=he*ho,Lt=Be*vt-yt*Ke;if(!Lt)break;Dr-=an=(Ue*Be-Le*yt)/Lt,Kr-=wn=(Le*vt-Ue*Ke)/Lt}while((p(an)>x||p(wn)>x)&&--Dn>0);return[Dr,Kr]},fr}var kr=Xr(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function sn(){return o.geoProjection(kr).scale(149.995)}var cn=Xr(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function $r(){return o.geoProjection(cn).scale(153.93)}var at=Xr(5/6*b,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Ot(){return o.geoProjection(at).scale(130.945)}function nr(Fe,je){var nt=Fe*Fe,lt=je*je;return[Fe*(1-.162388*lt)*(.87-952426e-9*nt*nt),je*(1+lt/12)]}nr.invert=function(Fe,je){var nt=Fe,lt=je,_t=50,bt;do{var Tt=lt*lt;lt-=bt=(lt*(1+Tt/12)-je)/(1+Tt/4)}while(p(bt)>x&&--_t>0);_t=50,Fe/=1-.162388*Tt;do{var rr=(rr=nt*nt)*rr;nt-=bt=(nt*(.87-952426e-9*rr)-Fe)/(.87-.00476213*rr)}while(p(bt)>x&&--_t>0);return[nt,lt]};function dr(){return o.geoProjection(nr).scale(131.747)}var Zr=Xr(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Lr(){return o.geoProjection(Zr).scale(131.087)}function Ur(Fe){var je=Fe(S,0)[0]-Fe(-S,0)[0];function nt(lt,_t){var bt=lt>0?-.5:.5,Tt=Fe(lt+bt*b,_t);return Tt[0]-=bt*je,Tt}return Fe.invert&&(nt.invert=function(lt,_t){var bt=lt>0?-.5:.5,Tt=Fe.invert(lt+bt*je,_t),rr=Tt[0]-bt*b;return rr<-b?rr+=2*b:rr>b&&(rr-=2*b),Tt[0]=rr,Tt}),nt}function xr(Fe,je){var nt=y(Fe),lt=y(je),_t=a(je),bt=a(Fe)*_t,Tt=m(Fe)*_t,rr=m(lt*je);Fe=p(n(Tt,rr)),je=N(bt),p(Fe-S)>x&&(Fe%=S);var fr=on(Fe>b/4?S-Fe:Fe,je);return Fe>b/4&&(rr=fr[0],fr[0]=-fr[1],fr[1]=-rr),fr[0]*=nt,fr[1]*=-lt,fr}xr.invert=function(Fe,je){p(Fe)>1&&(Fe=y(Fe)*2-Fe),p(je)>1&&(je=y(je)*2-je);var nt=y(Fe),lt=y(je),_t=-nt*Fe,bt=-lt*je,Tt=bt/_t<1,rr=Pn(Tt?bt:_t,Tt?_t:bt),fr=rr[0],er=rr[1],pr=a(er);return Tt&&(fr=-S-fr),[nt*(n(m(fr)*pr,-m(er))+b),lt*N(a(fr)*pr)]};function on(Fe,je){if(je===S)return[0,0];var nt=m(je),lt=nt*nt,_t=lt*lt,bt=1+_t,Tt=1+3*_t,rr=1-_t,fr=N(1/I(bt)),er=rr+lt*bt*fr,pr=(1-nt)/er,Dr=I(pr),Kr=pr*bt,an=I(Kr),wn=Dr*rr,Dn,Jn;if(Fe===0)return[0,-(wn+lt*an)];var wa=a(je),Aa=1/wa,$a=2*nt*wa,Za=(-3*lt+fr*Tt)*$a,ri=(-er*wa-(1-nt)*Za)/(er*er),vi=.5*ri/Dr,ho=rr*vi-2*lt*Dr*$a,ai=lt*bt*ri+pr*Tt*$a,ji=-Aa*$a,yo=-Aa*ai,Io=-2*Aa*ho,wi=4*Fe/b,ki;if(Fe>.222*b||je<b/4&&Fe>.175*b){if(Dn=(wn+lt*I(Kr*(1+_t)-wn*wn))/(1+_t),Fe>b/4)return[Dn,Dn];var Cs=Dn,ko=.5*Dn;Dn=.5*(ko+Cs),Jn=50;do{var Yo=I(Kr-Dn*Dn),is=Dn*(Io+ji*Yo)+yo*N(Dn/an)-wi;if(!is)break;is<0?ko=Dn:Cs=Dn,Dn=.5*(ko+Cs)}while(p(Cs-ko)>x&&--Jn>0)}else{Dn=x,Jn=25;do{var he=Dn*Dn,Te=I(Kr-he),Le=Io+ji*Te,Ue=Dn*Le+yo*N(Dn/an)-wi,Be=Le+(yo-ji*he)/Te;Dn-=ki=Te?Ue/Be:0}while(p(ki)>x&&--Jn>0)}return[Dn,-wn-lt*I(Kr-Dn*Dn)]}function Pn(Fe,je){for(var nt=0,lt=1,_t=.5,bt=50;;){var Tt=_t*_t,rr=I(_t),fr=N(1/I(1+Tt)),er=1-Tt+_t*(1+Tt)*fr,pr=(1-rr)/er,Dr=I(pr),Kr=pr*(1+Tt),an=Dr*(1-Tt),wn=Kr-Fe*Fe,Dn=I(wn),Jn=je+an+_t*Dn;if(p(lt-nt)<A||--bt==0||Jn===0)break;Jn>0?nt=_t:lt=_t,_t=.5*(nt+lt)}if(!bt)return null;var wa=N(rr),Aa=a(wa),$a=1/Aa,Za=2*rr*Aa,ri=(-3*_t+fr*(1+3*Tt))*Za,vi=(-er*Aa-(1-rr)*ri)/(er*er),ho=.5*vi/Dr,ai=(1-Tt)*ho-2*_t*Dr*Za,ji=-2*$a*ai,yo=-$a*Za,Io=-$a*(_t*(1+Tt)*vi+pr*(1+3*Tt)*Za);return[b/4*(Fe*(ji+yo*Dn)+Io*N(Fe/I(Kr))),wa]}function En(){return o.geoProjection(Ur(xr)).scale(239.75)}function $n(Fe,je,nt){var lt,_t,bt;return Fe?(lt=aa(Fe,nt),je?(_t=aa(je,1-nt),bt=_t[1]*_t[1]+nt*lt[0]*lt[0]*_t[0]*_t[0],[[lt[0]*_t[2]/bt,lt[1]*lt[2]*_t[0]*_t[1]/bt],[lt[1]*_t[1]/bt,-lt[0]*lt[2]*_t[0]*_t[2]/bt],[lt[2]*_t[1]*_t[2]/bt,-nt*lt[0]*lt[1]*_t[0]/bt]]):[[lt[0],0],[lt[1],0],[lt[2],0]]):(_t=aa(je,1-nt),[[0,_t[0]/_t[1]],[1/_t[1],0],[_t[2]/_t[1],0]])}function aa(Fe,je){var nt,lt,_t,bt,Tt;if(je<x)return bt=m(Fe),lt=a(Fe),nt=je*(Fe-bt*lt)/4,[bt-nt*lt,lt+nt*bt,1-je*bt*bt/2,Fe-nt];if(je>=1-x)return nt=(1-je)/4,lt=U(Fe),bt=F(Fe),_t=1/lt,Tt=lt*V(Fe),[bt+nt*(Tt-Fe)/(lt*lt),_t-nt*bt*_t*(Tt-Fe),_t+nt*bt*_t*(Tt+Fe),2*t(i(Fe))-S+nt*(Tt-Fe)/lt];var rr=[1,0,0,0,0,0,0,0,0],fr=[I(je),0,0,0,0,0,0,0,0],er=0;for(lt=I(1-je),Tt=1;p(fr[er]/rr[er])>x&&er<8;)nt=rr[er++],fr[er]=(nt-lt)/2,rr[er]=(nt+lt)/2,lt=I(nt*lt),Tt*=2;_t=Tt*rr[er]*Fe;do bt=fr[er]*m(lt=_t)/rr[er],_t=(N(bt)+_t)/2;while(--er);return[m(_t),bt=a(_t),bt/a(_t-lt),_t]}function Ca(Fe,je,nt){var lt=p(Fe),_t=p(je),bt=V(_t);if(lt){var Tt=1/m(lt),rr=1/(g(lt)*g(lt)),fr=-(rr+nt*(bt*bt*Tt*Tt)-1+nt),er=(nt-1)*rr,pr=(-fr+I(fr*fr-4*er))/2;return[ba(t(1/I(pr)),nt)*y(Fe),ba(t(I((pr/rr-1)/nt)),1-nt)*y(je)]}return[0,ba(t(bt),1-nt)*y(je)]}function ba(Fe,je){if(!je)return Fe;if(je===1)return f(g(Fe/2+w));for(var nt=1,lt=I(1-je),_t=I(je),bt=0;p(_t)>x;bt++){if(Fe%b){var Tt=t(lt*g(Fe)/nt);Tt<0&&(Tt+=b),Fe+=Tt+~~(Fe/b)*b}else Fe+=Fe;_t=(nt+lt)/2,lt=I(nt*lt),_t=((nt=_t)-lt)/2}return Fe/(h(2,bt)*nt)}function vr(Fe,je){var nt=(_-1)/(_+1),lt=I(1-nt*nt),_t=ba(S,lt*lt),bt=-1,Tt=f(g(b/4+p(je)/2)),rr=i(bt*Tt)/I(nt),fr=yn(rr*a(bt*Fe),rr*m(bt*Fe)),er=Ca(fr[0],fr[1],lt*lt);return[-er[1],(je>=0?1:-1)*(.5*_t-er[0])]}function yn(Fe,je){var nt=Fe*Fe,lt=je+1,_t=1-nt-je*je;return[.5*((Fe>=0?S:-S)-n(_t,2*Fe)),-.25*f(_t*_t+4*nt)+.5*f(lt*lt+nt)]}function en(Fe,je){var nt=je[0]*je[0]+je[1]*je[1];return[(Fe[0]*je[0]+Fe[1]*je[1])/nt,(Fe[1]*je[0]-Fe[0]*je[1])/nt]}vr.invert=function(Fe,je){var nt=(_-1)/(_+1),lt=I(1-nt*nt),_t=ba(S,lt*lt),bt=-1,Tt=$n(.5*_t-je,-Fe,lt*lt),rr=en(Tt[0],Tt[1]),fr=n(rr[1],rr[0])/bt;return[fr,2*t(i(.5/bt*f(nt*rr[0]*rr[0]+nt*rr[1]*rr[1])))-S]};function In(){return o.geoProjection(Ur(vr)).scale(151.496)}function Bn(Fe){var je=m(Fe),nt=a(Fe),lt=ha(Fe);lt.invert=ha(-Fe);function _t(bt,Tt){var rr=lt(bt,Tt);bt=rr[0],Tt=rr[1];var fr=m(Tt),er=a(Tt),pr=a(bt),Dr=O(je*fr+nt*er*pr),Kr=m(Dr),an=p(Kr)>x?Dr/Kr:1;return[an*nt*m(bt),(p(bt)>S?an:-an)*(je*er-nt*fr*pr)]}return _t.invert=function(bt,Tt){var rr=I(bt*bt+Tt*Tt),fr=-m(rr),er=a(rr),pr=rr*er,Dr=-Tt*fr,Kr=rr*je,an=I(pr*pr+Dr*Dr-Kr*Kr),wn=n(pr*Kr+Dr*an,Dr*Kr-pr*an),Dn=(rr>S?-1:1)*n(bt*fr,rr*a(wn)*er+Tt*m(wn)*fr);return lt.invert(Dn,wn)},_t}function ha(Fe){var je=m(Fe),nt=a(Fe);return function(lt,_t){var bt=a(_t),Tt=a(lt)*bt,rr=m(lt)*bt,fr=m(_t);return[n(rr,Tt*nt-fr*je),N(fr*nt+Tt*je)]}}function qn(){var Fe=0,je=o.geoProjectionMutator(Bn),nt=je(Fe),lt=nt.rotate,_t=nt.stream,bt=o.geoCircle();return nt.parallel=function(Tt){if(!arguments.length)return Fe*M;var rr=nt.rotate();return je(Fe=Tt*E).rotate(rr)},nt.rotate=function(Tt){return arguments.length?(lt.call(nt,[Tt[0],Tt[1]-Fe*M]),bt.center([-Tt[0],-Tt[1]]),nt):(Tt=lt.call(nt),Tt[1]+=Fe*M,Tt)},nt.stream=function(Tt){return Tt=_t(Tt),Tt.sphere=function(){Tt.polygonStart();var rr=.01,fr=bt.radius(90-rr)().coordinates[0],er=fr.length-1,pr=-1,Dr;for(Tt.lineStart();++pr<er;)Tt.point((Dr=fr[pr])[0],Dr[1]);for(Tt.lineEnd(),fr=bt.radius(90+rr)().coordinates[0],er=fr.length-1,Tt.lineStart();--pr>=0;)Tt.point((Dr=fr[pr])[0],Dr[1]);Tt.lineEnd(),Tt.polygonEnd()},Tt},nt.scale(79.4187).parallel(45).clipAngle(180-.001)}var Hn=3,la=N(1-1/Hn)*M,da=Ut(0);function hr(Fe){var je=la*E,nt=Xe(b,je)[0]-Xe(-b,je)[0],lt=da(0,je)[1],_t=Xe(0,je)[1],bt=v-_t,Tt=P/Fe,rr=4/P,fr=lt+bt*bt*4/P;function er(pr,Dr){var Kr,an=p(Dr);if(an>je){var wn=s(Fe-1,u(0,r((pr+b)/Tt)));pr+=b*(Fe-1)/Fe-wn*Tt,Kr=Xe(pr,an),Kr[0]=Kr[0]*P/nt-P*(Fe-1)/(2*Fe)+wn*P/Fe,Kr[1]=lt+(Kr[1]-_t)*4*bt/P,Dr<0&&(Kr[1]=-Kr[1])}else Kr=da(pr,Dr);return Kr[0]*=rr,Kr[1]/=fr,Kr}return er.invert=function(pr,Dr){pr/=rr,Dr*=fr;var Kr=p(Dr);if(Kr>lt){var an=s(Fe-1,u(0,r((pr+b)/Tt)));pr=(pr+b*(Fe-1)/Fe-an*Tt)*nt/P;var wn=Xe.invert(pr,.25*(Kr-lt)*P/bt+_t);return wn[0]-=b*(Fe-1)/Fe-an*Tt,Dr<0&&(wn[1]=-wn[1]),wn}return da.invert(pr,Dr)},er}function zr(Fe,je){return[Fe,je&1?90-x:la]}function ln(Fe,je){return[Fe,je&1?-90+x:-la]}function Rt(Fe){return[Fe[0]*(1-x),Fe[1]]}function qt(Fe){var je=[].concat(c.range(-180,180+Fe/2,Fe).map(zr),c.range(180,-180-Fe/2,-Fe).map(ln));return{type:"Polygon",coordinates:[Fe===180?je.map(Rt):je]}}function br(){var Fe=4,je=o.geoProjectionMutator(hr),nt=je(Fe),lt=nt.stream;return nt.lobes=function(_t){return arguments.length?je(Fe=+_t):Fe},nt.stream=function(_t){var bt=nt.rotate(),Tt=lt(_t),rr=(nt.rotate([0,0]),lt(_t));return nt.rotate(bt),Tt.sphere=function(){o.geoStream(qt(180/Fe),rr)},Tt},nt.scale(239.75)}function Hr(Fe){var je=1+Fe,nt=m(1/je),lt=N(nt),_t=2*I(b/(bt=b+4*lt*je)),bt,Tt=.5*_t*(je+I(Fe*(2+Fe))),rr=Fe*Fe,fr=je*je;function er(pr,Dr){var Kr=1-m(Dr),an,wn;if(Kr&&Kr<2){var Dn=S-Dr,Jn=25,wa;do{var Aa=m(Dn),$a=a(Dn),Za=lt+n(Aa,je-$a),ri=1+fr-2*je*$a;Dn-=wa=(Dn-rr*lt-je*Aa+ri*Za-.5*Kr*bt)/(2*je*Aa*Za)}while(p(wa)>A&&--Jn>0);an=_t*I(ri),wn=pr*Za/b}else an=_t*(Fe+Kr),wn=pr*lt/b;return[an*m(wn),Tt-an*a(wn)]}return er.invert=function(pr,Dr){var Kr=pr*pr+(Dr-=Tt)*Dr,an=(1+fr-Kr/(_t*_t))/(2*je),wn=O(an),Dn=m(wn),Jn=lt+n(Dn,je-an);return[N(pr/I(Kr))*b/Jn,N(1-2*(wn-rr*lt-je*Dn+(1+fr-2*je*an)*Jn)/bt)]},er}function ar(){var Fe=1,je=o.geoProjectionMutator(Hr),nt=je(Fe);return nt.ratio=function(lt){return arguments.length?je(Fe=+lt):Fe},nt.scale(167.774).center([0,18.67])}var Qt=.7109889596207567,Pr=.0528035274542;function Nr(Fe,je){return je>-Qt?(Fe=Oe(Fe,je),Fe[1]+=Pr,Fe):Ne(Fe,je)}Nr.invert=function(Fe,je){return je>-Qt?Oe.invert(Fe,je-Pr):Ne.invert(Fe,je)};function Tn(){return o.geoProjection(Nr).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function Nn(Fe,je){return p(je)>Qt?(Fe=Oe(Fe,je),Fe[1]-=je>0?Pr:-Pr,Fe):Ne(Fe,je)}Nn.invert=function(Fe,je){return p(je)>Qt?Oe.invert(Fe,je+(je>0?Pr:-Pr)):Ne.invert(Fe,je)};function Gn(){return o.geoProjection(Nn).scale(152.63)}function Wn(Fe,je,nt,lt){var _t=I(4*b/(2*nt+(1+Fe-je/2)*m(2*nt)+(Fe+je)/2*m(4*nt)+je/2*m(6*nt))),bt=I(lt*m(nt)*I((1+Fe*a(2*nt)+je*a(4*nt))/(1+Fe+je))),Tt=nt*fr(1);function rr(Dr){return I(1+Fe*a(2*Dr)+je*a(4*Dr))}function fr(Dr){var Kr=Dr*nt;return(2*Kr+(1+Fe-je/2)*m(2*Kr)+(Fe+je)/2*m(4*Kr)+je/2*m(6*Kr))/nt}function er(Dr){return rr(Dr)*m(Dr)}var pr=function(Dr,Kr){var an=nt*ye(fr,Tt*m(Kr)/nt,Kr/b);isNaN(an)&&(an=nt*y(Kr));var wn=_t*rr(an);return[wn*bt*Dr/b*a(an),wn/bt*m(an)]};return pr.invert=function(Dr,Kr){var an=ye(er,Kr*bt/_t);return[Dr*b/(a(an)*_t*bt*rr(an)),N(nt*fr(an/nt)/Tt)]},nt===0&&(_t=I(lt/b),pr=function(Dr,Kr){return[Dr*_t,m(Kr)/_t]},pr.invert=function(Dr,Kr){return[Dr/_t,N(Kr*_t)]}),pr}function Un(){var Fe=1,je=0,nt=45*E,lt=2,_t=o.geoProjectionMutator(Wn),bt=_t(Fe,je,nt,lt);return bt.a=function(Tt){return arguments.length?_t(Fe=+Tt,je,nt,lt):Fe},bt.b=function(Tt){return arguments.length?_t(Fe,je=+Tt,nt,lt):je},bt.psiMax=function(Tt){return arguments.length?_t(Fe,je,nt=+Tt*E,lt):nt*M},bt.ratio=function(Tt){return arguments.length?_t(Fe,je,nt,lt=+Tt):lt},bt.scale(180.739)}function mn(Fe,je,nt,lt,_t,bt,Tt,rr,fr,er,pr){if(pr.nanEncountered)return NaN;var Dr,Kr,an,wn,Dn,Jn,wa,Aa,$a,Za;if(Dr=nt-je,Kr=Fe(je+Dr*.25),an=Fe(nt-Dr*.25),isNaN(Kr)){pr.nanEncountered=!0;return}if(isNaN(an)){pr.nanEncountered=!0;return}return wn=Dr*(lt+4*Kr+_t)/12,Dn=Dr*(_t+4*an+bt)/12,Jn=wn+Dn,Za=(Jn-Tt)/15,er>fr?(pr.maxDepthCount++,Jn+Za):Math.abs(Za)<rr?Jn+Za:(wa=je+Dr*.5,Aa=mn(Fe,je,wa,lt,Kr,_t,wn,rr*.5,fr,er+1,pr),isNaN(Aa)?(pr.nanEncountered=!0,NaN):($a=mn(Fe,wa,nt,_t,an,bt,Dn,rr*.5,fr,er+1,pr),isNaN($a)?(pr.nanEncountered=!0,NaN):Aa+$a))}function Fn(Fe,je,nt,lt,_t){var bt={maxDepthCount:0,nanEncountered:!1};lt===void 0&&(lt=1e-8),_t===void 0&&(_t=20);var Tt=Fe(je),rr=Fe(.5*(je+nt)),fr=Fe(nt),er=(Tt+4*rr+fr)*(nt-je)/6,pr=mn(Fe,je,nt,Tt,rr,fr,er,lt,_t,1,bt);return pr}function Xn(Fe,je,nt){function lt(an){return Fe+(1-Fe)*h(1-h(an,je),1/je)}function _t(an){return Fn(lt,0,an,1e-4)}for(var bt=1/_t(1),Tt=1e3,rr=(1+1e-8)*bt,fr=[],er=0;er<=Tt;er++)fr.push(_t(er/Tt)*rr);function pr(an){var wn=0,Dn=Tt,Jn=Tt>>1;do fr[Jn]>an?Dn=Jn:wn=Jn,Jn=wn+Dn>>1;while(Jn>wn);var wa=fr[Jn+1]-fr[Jn];return wa&&(wa=(an-fr[Jn+1])/wa),(Jn+1+wa)/Tt}var Dr=2*pr(1)/b*bt/nt,Kr=function(an,wn){var Dn=pr(p(m(wn))),Jn=lt(Dn)*an;return Dn/=Dr,[Jn,wn>=0?Dn:-Dn]};return Kr.invert=function(an,wn){var Dn;return wn*=Dr,p(wn)<1&&(Dn=y(wn)*N(_t(p(wn))*bt)),[an/lt(p(wn)),Dn]},Kr}function ca(){var Fe=0,je=2.5,nt=1.183136,lt=o.geoProjectionMutator(Xn),_t=lt(Fe,je,nt);return _t.alpha=function(bt){return arguments.length?lt(Fe=+bt,je,nt):Fe},_t.k=function(bt){return arguments.length?lt(Fe,je=+bt,nt):je},_t.gamma=function(bt){return arguments.length?lt(Fe,je,nt=+bt):nt},_t.scale(152.63)}function ja(Fe,je){return p(Fe[0]-je[0])<x&&p(Fe[1]-je[1])<x}function Pa(Fe,je){for(var nt=-1,lt=Fe.length,_t=Fe[0],bt,Tt,rr,fr=[];++nt<lt;){bt=Fe[nt],Tt=(bt[0]-_t[0])/je,rr=(bt[1]-_t[1])/je;for(var er=0;er<je;++er)fr.push([_t[0]+er*Tt,_t[1]+er*rr]);_t=bt}return fr.push(bt),fr}function _l(Fe){var je=[],nt,lt,_t,bt,Tt,rr,fr,er=Fe[0].length;for(fr=0;fr<er;++fr)nt=Fe[0][fr],lt=nt[0][0],_t=nt[0][1],bt=nt[1][1],Tt=nt[2][0],rr=nt[2][1],je.push(Pa([[lt+x,_t+x],[lt+x,bt-x],[Tt-x,bt-x],[Tt-x,rr+x]],30));for(fr=Fe[1].length-1;fr>=0;--fr)nt=Fe[1][fr],lt=nt[0][0],_t=nt[0][1],bt=nt[1][1],Tt=nt[2][0],rr=nt[2][1],je.push(Pa([[Tt-x,rr-x],[Tt-x,bt+x],[lt+x,bt+x],[lt+x,_t-x]],30));return{type:"Polygon",coordinates:[c.merge(je)]}}function Ko(Fe,je,nt){var lt,_t;function bt(fr,er){for(var pr=er<0?-1:1,Dr=je[+(er<0)],Kr=0,an=Dr.length-1;Kr<an&&fr>Dr[Kr][2][0];++Kr);var wn=Fe(fr-Dr[Kr][1][0],er);return wn[0]+=Fe(Dr[Kr][1][0],pr*er>pr*Dr[Kr][0][1]?Dr[Kr][0][1]:er)[0],wn}nt?bt.invert=nt(bt):Fe.invert&&(bt.invert=function(fr,er){for(var pr=_t[+(er<0)],Dr=je[+(er<0)],Kr=0,an=pr.length;Kr<an;++Kr){var wn=pr[Kr];if(wn[0][0]<=fr&&fr<wn[1][0]&&wn[0][1]<=er&&er<wn[1][1]){var Dn=Fe.invert(fr-Fe(Dr[Kr][1][0],0)[0],er);return Dn[0]+=Dr[Kr][1][0],ja(bt(Dn[0],Dn[1]),[fr,er])?Dn:null}}});var Tt=o.geoProjection(bt),rr=Tt.stream;return Tt.stream=function(fr){var er=Tt.rotate(),pr=rr(fr),Dr=(Tt.rotate([0,0]),rr(fr));return Tt.rotate(er),pr.sphere=function(){o.geoStream(lt,Dr)},pr},Tt.lobes=function(fr){return arguments.length?(lt=_l(fr),je=fr.map(function(er){return er.map(function(pr){return[[pr[0][0]*E,pr[0][1]*E],[pr[1][0]*E,pr[1][1]*E],[pr[2][0]*E,pr[2][1]*E]]})}),_t=je.map(function(er){return er.map(function(pr){var Dr=Fe(pr[0][0],pr[0][1])[0],Kr=Fe(pr[2][0],pr[2][1])[0],an=Fe(pr[1][0],pr[0][1])[1],wn=Fe(pr[1][0],pr[1][1])[1],Dn;return an>wn&&(Dn=an,an=wn,wn=Dn),[[Dr,an],[Kr,wn]]})}),Tt):je.map(function(er){return er.map(function(pr){return[[pr[0][0]*M,pr[0][1]*M],[pr[1][0]*M,pr[1][1]*M],[pr[2][0]*M,pr[2][1]*M]]})})},je!=null&&Tt.lobes(je),Tt}var cs=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Gs(){return Ko(Ie,cs).scale(160.857)}var no=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Fi(){return Ko(Nn,no).scale(152.63)}var ol=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function sl(){return Ko(Oe,ol).scale(169.529)}var hs=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Bl(){return Ko(Oe,hs).scale(169.529).rotate([20,0])}var Ql=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Ou(){return Ko(Nr,Ql,ce).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var di=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function wl(){return Ko(Ne,di).scale(152.63).rotate([-20,0])}function ll(Fe,je){return[3/P*Fe*I(b*b/3-je*je),je]}ll.invert=function(Fe,je){return[P/3*Fe/I(b*b/3-je*je),je]};function Wi(){return o.geoProjection(ll).scale(158.837)}function Bo(Fe){function je(nt,lt){if(p(p(lt)-S)<x)return[0,lt<0?-2:2];var _t=m(lt),bt=h((1+_t)/(1-_t),Fe/2),Tt=.5*(bt+1/bt)+a(nt*=Fe);return[2*m(nt)/Tt,(bt-1/bt)/Tt]}return je.invert=function(nt,lt){var _t=p(lt);if(p(_t-2)<x)return nt?null:[0,y(lt)*S];if(_t>2)return null;nt/=2,lt/=2;var bt=nt*nt,Tt=lt*lt,rr=2*lt/(1+bt+Tt);return rr=h((1+rr)/(1-rr),1/Fe),[n(2*nt,1-bt-Tt)/Fe,N((rr-1)/(rr+1))]},je}function ql(){var Fe=.5,je=o.geoProjectionMutator(Bo),nt=je(Fe);return nt.spacing=function(lt){return arguments.length?je(Fe=+lt):Fe},nt.scale(124.75)}var Rs=b/_;function zi(Fe,je){return[Fe*(1+I(a(je)))/2,je/(a(je/2)*a(Fe/6))]}zi.invert=function(Fe,je){var nt=p(Fe),lt=p(je),_t=x,bt=S;lt<Rs?bt*=lt/Rs:_t+=6*O(Rs/lt);for(var Tt=0;Tt<25;Tt++){var rr=m(bt),fr=I(a(bt)),er=m(bt/2),pr=a(bt/2),Dr=m(_t/6),Kr=a(_t/6),an=.5*_t*(1+fr)-nt,wn=bt/(pr*Kr)-lt,Dn=fr?-.25*_t*rr/fr:0,Jn=.5*(1+fr),wa=(1+.5*bt*er/pr)/(pr*Kr),Aa=bt/pr*(Dr/6)/(Kr*Kr),$a=Dn*Aa-wa*Jn,Za=(an*Aa-wn*Jn)/$a,ri=(wn*Dn-an*wa)/$a;if(bt-=Za,_t-=ri,p(Za)<x&&p(ri)<x)break}return[Fe<0?-_t:_t,je<0?-bt:bt]};function Nl(){return o.geoProjection(zi).scale(97.2672)}function qi(Fe,je){var nt=Fe*Fe,lt=je*je;return[Fe*(.975534+lt*(-.119161+nt*-.0143059+lt*-.0547009)),je*(1.00384+nt*(.0802894+lt*-.02855+nt*199025e-9)+lt*(.0998909+lt*-.0491032))]}qi.invert=function(Fe,je){var nt=y(Fe)*b,lt=je/2,_t=50;do{var bt=nt*nt,Tt=lt*lt,rr=nt*lt,fr=nt*(.975534+Tt*(-.119161+bt*-.0143059+Tt*-.0547009))-Fe,er=lt*(1.00384+bt*(.0802894+Tt*-.02855+bt*199025e-9)+Tt*(.0998909+Tt*-.0491032))-je,pr=.975534-Tt*(.119161+3*bt*.0143059+Tt*.0547009),Dr=-rr*(2*.119161+4*.0547009*Tt+2*.0143059*bt),Kr=rr*(2*.0802894+4*199025e-9*bt+2*-.02855*Tt),an=1.00384+bt*(.0802894+199025e-9*bt)+Tt*(3*(.0998909-.02855*bt)-5*.0491032*Tt),wn=Dr*Kr-an*pr,Dn=(er*Dr-fr*an)/wn,Jn=(fr*Kr-er*pr)/wn;nt-=Dn,lt-=Jn}while((p(Dn)>x||p(Jn)>x)&&--_t>0);return _t&&[nt,lt]};function Ui(){return o.geoProjection(qi).scale(139.98)}function co(Fe,je){return[m(Fe)/a(je),g(je)*a(Fe)]}co.invert=function(Fe,je){var nt=Fe*Fe,lt=je*je,_t=lt+1,bt=nt+_t,Tt=Fe?T*I((bt-I(bt*bt-4*nt))/nt):1/I(_t);return[N(Fe*Tt),y(je)*O(Tt)]};function eo(){return o.geoProjection(co).scale(144.049).clipAngle(90-.001)}function xs(Fe){var je=a(Fe),nt=g(w+Fe/2);function lt(_t,bt){var Tt=bt-Fe,rr=p(Tt)<x?_t*je:p(rr=w+bt/2)<x||p(p(rr)-S)<x?0:_t*Tt/f(g(rr)/nt);return[rr,Tt]}return lt.invert=function(_t,bt){var Tt,rr=bt+Fe;return[p(bt)<x?_t/je:p(Tt=w+rr/2)<x||p(p(Tt)-S)<x?0:_t*f(g(Tt)/nt)/bt,rr]},lt}function Tl(){return et(xs).parallel(40).scale(158.837)}function qu(Fe,je){return[Fe,1.25*f(g(w+.4*je))]}qu.invert=function(Fe,je){return[Fe,2.5*t(i(.8*je))-.625*b]};function vs(){return o.geoProjection(qu).scale(108.318)}function ef(Fe){var je=Fe.length-1;function nt(lt,_t){for(var bt=a(_t),Tt=2/(1+bt*a(lt)),rr=Tt*bt*m(lt),fr=Tt*m(_t),er=je,pr=Fe[er],Dr=pr[0],Kr=pr[1],an;--er>=0;)pr=Fe[er],Dr=pr[0]+rr*(an=Dr)-fr*Kr,Kr=pr[1]+rr*Kr+fr*an;return Dr=rr*(an=Dr)-fr*Kr,Kr=rr*Kr+fr*an,[Dr,Kr]}return nt.invert=function(lt,_t){var bt=20,Tt=lt,rr=_t;do{for(var fr=je,er=Fe[fr],pr=er[0],Dr=er[1],Kr=0,an=0,wn;--fr>=0;)er=Fe[fr],Kr=pr+Tt*(wn=Kr)-rr*an,an=Dr+Tt*an+rr*wn,pr=er[0]+Tt*(wn=pr)-rr*Dr,Dr=er[1]+Tt*Dr+rr*wn;Kr=pr+Tt*(wn=Kr)-rr*an,an=Dr+Tt*an+rr*wn,pr=Tt*(wn=pr)-rr*Dr-lt,Dr=Tt*Dr+rr*wn-_t;var Dn=Kr*Kr+an*an,Jn,wa;Tt-=Jn=(pr*Kr+Dr*an)/Dn,rr-=wa=(Dr*Kr-pr*an)/Dn}while(p(Jn)+p(wa)>x*x&&--bt>0);if(bt){var Aa=I(Tt*Tt+rr*rr),$a=2*t(Aa*.5),Za=m($a);return[n(Tt*Za,Aa*a($a)),Aa?N(rr*Za/Aa):0]}},nt}var ul=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],No=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],kf=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],fl=[[.9245,0],[0,0],[.01943,0]],Ws=[[.721316,0],[0,0],[-.00881625,-.00617325]];function mu(){return Ys(ul,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function Cf(){return Ys(No,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Ef(){return Ys(kf,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Al(){return Ys(fl,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function yu(){return Ys(Ws,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Ys(Fe,je){var nt=o.geoProjection(ef(Fe)).rotate(je).clipAngle(90),lt=o.geoRotation(je),_t=nt.center;return delete nt.rotate,nt.center=function(bt){return arguments.length?_t(lt(bt)):lt.invert(_t())},nt}var Bu=I(6),Ul=I(7);function Nu(Fe,je){var nt=N(7*m(je)/(3*Bu));return[Bu*Fe*(2*a(2*nt/3)-1)/Ul,9*m(nt/3)/Ul]}Nu.invert=function(Fe,je){var nt=3*N(je*Ul/9);return[Fe*Ul/(Bu*(2*a(2*nt/3)-1)),N(m(nt)*3*Bu/7)]};function tf(){return o.geoProjection(Nu).scale(164.859)}function xu(Fe,je){for(var nt=(1+T)*m(je),lt=je,_t=0,bt;_t<25&&(lt-=bt=(m(lt/2)+m(lt)-nt)/(.5*a(lt/2)+a(lt)),!(p(bt)<x));_t++);return[Fe*(1+2*a(lt)/a(lt/2))/(3*_),2*I(3)*m(lt/2)/I(2+_)]}xu.invert=function(Fe,je){var nt=je*I(2+_)/(2*I(3)),lt=2*N(nt);return[3*_*Fe/(1+2*a(lt)/a(lt/2)),N((nt+m(lt))/(1+T))]};function Lf(){return o.geoProjection(xu).scale(188.209)}function Sl(Fe,je){for(var nt=I(6/(4+b)),lt=(1+b/4)*m(je),_t=je/2,bt=0,Tt;bt<25&&(_t-=Tt=(_t/2+m(_t)-lt)/(.5+a(_t)),!(p(Tt)<x));bt++);return[nt*(.5+a(_t))*Fe/1.5,nt*_t]}Sl.invert=function(Fe,je){var nt=I(6/(4+b)),lt=je/nt;return p(p(lt)-S)<x&&(lt=lt<0?-S:S),[1.5*Fe/(nt*(.5+a(lt))),N((lt/2+m(lt))/(1+b/4))]};function Uu(){return o.geoProjection(Sl).scale(166.518)}function bu(Fe,je){var nt=je*je,lt=nt*nt,_t=nt*lt;return[Fe*(.84719-.13063*nt+_t*_t*(-.04515+.05494*nt-.02326*lt+.00331*_t)),je*(1.01183+lt*lt*(-.02625+.01926*nt-.00396*lt))]}bu.invert=function(Fe,je){var nt=je,lt=25,_t,bt,Tt,rr;do bt=nt*nt,Tt=bt*bt,nt-=_t=(nt*(1.01183+Tt*Tt*(-.02625+.01926*bt-.00396*Tt))-je)/(1.01183+Tt*Tt*(9*-.02625+11*.01926*bt+13*-.00396*Tt));while(p(_t)>A&&--lt>0);return bt=nt*nt,Tt=bt*bt,rr=bt*Tt,[Fe/(.84719-.13063*bt+rr*rr*(-.04515+.05494*bt-.02326*Tt+.00331*rr)),nt]};function Ds(){return o.geoProjection(bu).scale(175.295)}function eu(Fe,je){return[Fe*(1+a(je))/2,2*(je-g(je/2))]}eu.invert=function(Fe,je){for(var nt=je/2,lt=0,_t=1/0;lt<10&&p(_t)>x;++lt){var bt=a(je/2);je-=_t=(je-g(je/2)-nt)/(1-.5/(bt*bt))}return[2*Fe/(1+a(je)),je]};function Vu(){return o.geoProjection(eu).scale(152.63)}var rf=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function nf(){return Ko(ie(1/0),rf).rotate([20,0]).scale(152.63)}function _u(Fe,je){var nt=m(je),lt=a(je),_t=y(Fe);if(Fe===0||p(je)===S)return[0,je];if(je===0)return[Fe,0];if(p(Fe)===S)return[Fe*lt,S*nt];var bt=b/(2*Fe)-2*Fe/b,Tt=2*je/b,rr=(1-Tt*Tt)/(nt-Tt),fr=bt*bt,er=rr*rr,pr=1+fr/er,Dr=1+er/fr,Kr=(bt*nt/rr-bt/2)/pr,an=(er*nt/fr+rr/2)/Dr,wn=Kr*Kr+lt*lt/pr,Dn=an*an-(er*nt*nt/fr+rr*nt-1)/Dr;return[S*(Kr+I(wn)*_t),S*(an+I(Dn<0?0:Dn)*y(-je*bt)*_t)]}_u.invert=function(Fe,je){Fe/=S,je/=S;var nt=Fe*Fe,lt=je*je,_t=nt+lt,bt=b*b;return[Fe?(_t-1+I((1-_t)*(1-_t)+4*nt))/(2*Fe)*S:0,ye(function(Tt){return _t*(b*m(Tt)-2*Tt)*b+4*Tt*Tt*(je-m(Tt))+2*b*Tt-bt*je},0)]};function Pf(){return o.geoProjection(_u).scale(127.267)}var af=1.0148,ps=.23185,Vl=-.14499,Hl=.02406,Hu=af,Is=5*ps,Uo=7*Vl,wu=9*Hl,js=1.790857183;function Xs(Fe,je){var nt=je*je;return[Fe,je*(af+nt*nt*(ps+nt*(Vl+Hl*nt)))]}Xs.invert=function(Fe,je){je>js?je=js:je<-js&&(je=-js);var nt=je,lt;do{var _t=nt*nt;nt-=lt=(nt*(af+_t*_t*(ps+_t*(Vl+Hl*_t)))-je)/(Hu+_t*_t*(Is+_t*(Uo+wu*_t)))}while(p(lt)>x);return[Fe,nt]};function po(){return o.geoProjection(Xs).scale(139.319)}function tu(Fe,je){if(p(je)<x)return[Fe,0];var nt=g(je),lt=Fe*m(je);return[m(lt)/nt,je+(1-a(lt))/nt]}tu.invert=function(Fe,je){if(p(je)<x)return[Fe,0];var nt=Fe*Fe+je*je,lt=je*.5,_t=10,bt;do{var Tt=g(lt),rr=1/a(lt),fr=nt-2*je*lt+lt*lt;lt-=bt=(Tt*fr+2*(lt-je))/(2+fr*rr*rr+2*(lt-je)*Tt)}while(p(bt)>x&&--_t>0);return Tt=g(lt),[(p(je)<p(lt+1/Tt)?N(Fe*Tt):y(je)*y(Fe)*(O(p(Fe*Tt))+S))/m(lt),lt]};function ru(){return o.geoProjection(tu).scale(103.74)}function Ml(Fe,je){var nt=Gl(Fe[1],Fe[0]),lt=Gl(je[1],je[0]),_t=au(nt,lt),bt=Tu(nt)/Tu(lt);return nu([1,0,Fe[0][0],0,1,Fe[0][1]],nu([bt,0,0,0,bt,0],nu([a(_t),m(_t),0,-m(_t),a(_t),0],[1,0,-je[0][0],0,1,-je[0][1]])))}function Fs(Fe){var je=1/(Fe[0]*Fe[4]-Fe[1]*Fe[3]);return[je*Fe[4],-je*Fe[1],je*(Fe[1]*Fe[5]-Fe[2]*Fe[4]),-je*Fe[3],je*Fe[0],je*(Fe[2]*Fe[3]-Fe[0]*Fe[5])]}function nu(Fe,je){return[Fe[0]*je[0]+Fe[1]*je[3],Fe[0]*je[1]+Fe[1]*je[4],Fe[0]*je[2]+Fe[1]*je[5]+Fe[2],Fe[3]*je[0]+Fe[4]*je[3],Fe[3]*je[1]+Fe[4]*je[4],Fe[3]*je[2]+Fe[4]*je[5]+Fe[5]]}function Gl(Fe,je){return[Fe[0]-je[0],Fe[1]-je[1]]}function Tu(Fe){return I(Fe[0]*Fe[0]+Fe[1]*Fe[1])}function au(Fe,je){return n(Fe[0]*je[1]-Fe[1]*je[0],Fe[0]*je[0]+Fe[1]*je[1])}function kl(Fe,je,nt){lt(Fe,{transform:null});function lt(er,pr){if(er.edges=Gu(er.face),pr.face){var Dr=er.shared=ic(er.face,pr.face),Kr=Ml(Dr.map(pr.project),Dr.map(er.project));er.transform=pr.transform?nu(pr.transform,Kr):Kr;for(var an=pr.edges,wn=0,Dn=an.length;wn<Dn;++wn)bs(Dr[0],an[wn][1])&&bs(Dr[1],an[wn][0])&&(an[wn]=er),bs(Dr[0],an[wn][0])&&bs(Dr[1],an[wn][1])&&(an[wn]=er);for(an=er.edges,wn=0,Dn=an.length;wn<Dn;++wn)bs(Dr[0],an[wn][0])&&bs(Dr[1],an[wn][1])&&(an[wn]=pr),bs(Dr[0],an[wn][1])&&bs(Dr[1],an[wn][0])&&(an[wn]=pr)}else er.transform=pr.transform;return er.children&&er.children.forEach(function(Jn){lt(Jn,er)}),er}function _t(er,pr){var Dr=je(er,pr),Kr=Dr.project([er*M,pr*M]),an;return(an=Dr.transform)?[an[0]*Kr[0]+an[1]*Kr[1]+an[2],-(an[3]*Kr[0]+an[4]*Kr[1]+an[5])]:(Kr[1]=-Kr[1],Kr)}Wl(Fe)&&(_t.invert=function(er,pr){var Dr=bt(Fe,[er,-pr]);return Dr&&(Dr[0]*=E,Dr[1]*=E,Dr)});function bt(er,pr){var Dr=er.project.invert,Kr=er.transform,an=pr;if(Kr&&(Kr=Fs(Kr),an=[Kr[0]*an[0]+Kr[1]*an[1]+Kr[2],Kr[3]*an[0]+Kr[4]*an[1]+Kr[5]]),Dr&&er===Tt(wn=Dr(an)))return wn;for(var wn,Dn=er.children,Jn=0,wa=Dn&&Dn.length;Jn<wa;++Jn)if(wn=bt(Dn[Jn],pr))return wn}function Tt(er){return je(er[0]*E,er[1]*E)}var rr=o.geoProjection(_t),fr=rr.stream;return rr.stream=function(er){var pr=rr.rotate(),Dr=fr(er),Kr=(rr.rotate([0,0]),fr(er));return rr.rotate(pr),Dr.sphere=function(){Kr.polygonStart(),Kr.lineStart(),Rf(Kr,Fe),Kr.lineEnd(),Kr.polygonEnd()},Dr},rr.angle(nt==null?-30:nt*M)}function Rf(Fe,je,nt){var lt,_t=je.edges,bt=_t.length,Tt,rr={type:"MultiPoint",coordinates:je.face},fr=je.face.filter(function(Dn){return p(Dn[1])!==90}),er=o.geoBounds({type:"MultiPoint",coordinates:fr}),pr=!1,Dr=-1,Kr=er[1][0]-er[0][0],an=Kr===180||Kr===360?[(er[0][0]+er[1][0])/2,(er[0][1]+er[1][1])/2]:o.geoCentroid(rr);if(nt)for(;++Dr<bt&&_t[Dr]!==nt;);++Dr;for(var wn=0;wn<bt;++wn)Tt=_t[(wn+Dr)%bt],Array.isArray(Tt)?(pr||(Fe.point((lt=o.geoInterpolate(Tt[0],an)(x))[0],lt[1]),pr=!0),Fe.point((lt=o.geoInterpolate(Tt[1],an)(x))[0],lt[1])):(pr=!1,Tt!==nt&&Rf(Fe,Tt,je))}function bs(Fe,je){return Fe&&je&&Fe[0]===je[0]&&Fe[1]===je[1]}function ic(Fe,je){for(var nt,lt,_t=Fe.length,bt=null,Tt=0;Tt<_t;++Tt){nt=Fe[Tt];for(var rr=je.length;--rr>=0;)if(lt=je[rr],nt[0]===lt[0]&&nt[1]===lt[1]){if(bt)return[bt,nt];bt=nt}}}function Gu(Fe){for(var je=Fe.length,nt=[],lt=Fe[je-1],_t=0;_t<je;++_t)nt.push([lt,lt=Fe[_t]]);return nt}function Wl(Fe){return Fe.project.invert||Fe.children&&Fe.children.some(Wl)}var iu=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Cl=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Fe){return Fe.map(function(je){return iu[je]})});function ou(Fe){Fe=Fe||function(nt){var lt=o.geoCentroid({type:"MultiPoint",coordinates:nt});return o.geoGnomonic().scale(1).translate([0,0]).rotate([-lt[0],-lt[1]])};var je=Cl.map(function(nt){return{face:nt,project:Fe(nt)}});return[-1,0,0,1,0,1,4,5].forEach(function(nt,lt){var _t=je[nt];_t&&(_t.children||(_t.children=[])).push(je[lt])}),kl(je[0],function(nt,lt){return je[nt<-b/2?lt<0?6:4:nt<0?lt<0?2:0:nt<b/2?lt<0?3:1:lt<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var of=2/I(3);function sf(Fe,je){var nt=Xe(Fe,je);return[nt[0]*of,nt[1]]}sf.invert=function(Fe,je){return Xe.invert(Fe/of,je)};function oc(Fe){Fe=Fe||function(nt){var lt=o.geoCentroid({type:"MultiPoint",coordinates:nt});return o.geoProjection(sf).translate([0,0]).scale(1).rotate(lt[1]>0?[-lt[0],0]:[180-lt[0],180])};var je=Cl.map(function(nt){return{face:nt,project:Fe(nt)}});return[-1,0,0,1,0,1,4,5].forEach(function(nt,lt){var _t=je[nt];_t&&(_t.children||(_t.children=[])).push(je[lt])}),kl(je[0],function(nt,lt){return je[nt<-b/2?lt<0?6:4:nt<0?lt<0?2:0:nt<b/2?lt<0?3:1:lt<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Oi(Fe){Fe=Fe||function(Tt){var rr=Tt.length===6?o.geoCentroid({type:"MultiPoint",coordinates:Tt}):Tt[0];return o.geoGnomonic().scale(1).translate([0,0]).rotate([-rr[0],-rr[1]])};var je=Cl.map(function(Tt){for(var rr=Tt.map(_s),fr=rr.length,er=rr[fr-1],pr,Dr=[],Kr=0;Kr<fr;++Kr)pr=rr[Kr],Dr.push(ds([er[0]*.9486832980505138+pr[0]*.31622776601683794,er[1]*.9486832980505138+pr[1]*.31622776601683794,er[2]*.9486832980505138+pr[2]*.31622776601683794]),ds([pr[0]*.9486832980505138+er[0]*.31622776601683794,pr[1]*.9486832980505138+er[1]*.31622776601683794,pr[2]*.9486832980505138+er[2]*.31622776601683794])),er=pr;return Dr}),nt=[],lt=[-1,0,0,1,0,1,4,5];je.forEach(function(Tt,rr){for(var fr=Cl[rr],er=fr.length,pr=nt[rr]=[],Dr=0;Dr<er;++Dr)je.push([fr[Dr],Tt[(Dr*2+2)%(2*er)],Tt[(Dr*2+1)%(2*er)]]),lt.push(rr),pr.push(El(_s(Tt[(Dr*2+2)%(2*er)]),_s(Tt[(Dr*2+1)%(2*er)])))});var _t=je.map(function(Tt){return{project:Fe(Tt),face:Tt}});lt.forEach(function(Tt,rr){var fr=_t[Tt];fr&&(fr.children||(fr.children=[])).push(_t[rr])});function bt(Tt,rr){var fr=a(rr),er=[fr*a(Tt),fr*m(Tt),m(rr)],pr=Tt<-b/2?rr<0?6:4:Tt<0?rr<0?2:0:Tt<b/2?rr<0?3:1:rr<0?7:5,Dr=nt[pr];return _t[Yl(Dr[0],er)<0?8+3*pr:Yl(Dr[1],er)<0?8+3*pr+1:Yl(Dr[2],er)<0?8+3*pr+2:pr]}return kl(_t[0],bt).angle(-30).scale(110.625).center([0,45])}function Yl(Fe,je){for(var nt=0,lt=Fe.length,_t=0;nt<lt;++nt)_t+=Fe[nt]*je[nt];return _t}function El(Fe,je){return[Fe[1]*je[2]-Fe[2]*je[1],Fe[2]*je[0]-Fe[0]*je[2],Fe[0]*je[1]-Fe[1]*je[0]]}function ds(Fe){return[n(Fe[1],Fe[0])*M,N(u(-1,s(1,Fe[2])))*M]}function _s(Fe){var je=Fe[0]*E,nt=Fe[1]*E,lt=a(nt);return[lt*a(je),lt*m(je),m(nt)]}function su(){}function go(Fe){if((nt=Fe.length)<4)return!1;for(var je=0,nt,lt=Fe[nt-1][1]*Fe[0][0]-Fe[nt-1][0]*Fe[0][1];++je<nt;)lt+=Fe[je-1][1]*Fe[je][0]-Fe[je-1][0]*Fe[je][1];return lt<=0}function lf(Fe,je){for(var nt=je[0],lt=je[1],_t=!1,bt=0,Tt=Fe.length,rr=Tt-1;bt<Tt;rr=bt++){var fr=Fe[bt],er=fr[0],pr=fr[1],Dr=Fe[rr],Kr=Dr[0],an=Dr[1];pr>lt^an>lt&&nt<(Kr-er)*(lt-pr)/(an-pr)+er&&(_t=!_t)}return _t}function ws(Fe,je){var nt=je.stream,lt;if(!nt)throw new Error("invalid projection");switch(Fe&&Fe.type){case"Feature":lt=hl;break;case"FeatureCollection":lt=cl;break;default:lt=Ts;break}return lt(Fe,nt)}function cl(Fe,je){return{type:"FeatureCollection",features:Fe.features.map(function(nt){return hl(nt,je)})}}function hl(Fe,je){return{type:"Feature",id:Fe.id,properties:Fe.properties,geometry:Ts(Fe.geometry,je)}}function Zs(Fe,je){return{type:"GeometryCollection",geometries:Fe.geometries.map(function(nt){return Ts(nt,je)})}}function Ts(Fe,je){if(!Fe)return null;if(Fe.type==="GeometryCollection")return Zs(Fe,je);var nt;switch(Fe.type){case"Point":nt=As;break;case"MultiPoint":nt=As;break;case"LineString":nt=uf;break;case"MultiLineString":nt=uf;break;case"Polygon":nt=Au;break;case"MultiPolygon":nt=Au;break;case"Sphere":nt=Au;break;default:return null}return o.geoStream(Fe,je(nt)),nt.result()}var Yi=[],Vo=[],As={point:function(Fe,je){Yi.push([Fe,je])},result:function(){var Fe=Yi.length?Yi.length<2?{type:"Point",coordinates:Yi[0]}:{type:"MultiPoint",coordinates:Yi}:null;return Yi=[],Fe}},uf={lineStart:su,point:function(Fe,je){Yi.push([Fe,je])},lineEnd:function(){Yi.length&&(Vo.push(Yi),Yi=[])},result:function(){var Fe=Vo.length?Vo.length<2?{type:"LineString",coordinates:Vo[0]}:{type:"MultiLineString",coordinates:Vo}:null;return Vo=[],Fe}},Au={polygonStart:su,lineStart:su,point:function(Fe,je){Yi.push([Fe,je])},lineEnd:function(){var Fe=Yi.length;if(Fe){do Yi.push(Yi[0].slice());while(++Fe<4);Vo.push(Yi),Yi=[]}},polygonEnd:su,result:function(){if(!Vo.length)return null;var Fe=[],je=[];return Vo.forEach(function(nt){go(nt)?Fe.push([nt]):je.push(nt)}),je.forEach(function(nt){var lt=nt[0];Fe.some(function(_t){if(lf(_t[0],lt))return _t.push(nt),!0})||Fe.push([nt])}),Vo=[],Fe.length?Fe.length>1?{type:"MultiPolygon",coordinates:Fe}:{type:"Polygon",coordinates:Fe[0]}:null}};function ff(Fe){var je=Fe(S,0)[0]-Fe(-S,0)[0];function nt(lt,_t){var bt=p(lt)<S,Tt=Fe(bt?lt:lt>0?lt-b:lt+b,_t),rr=(Tt[0]-Tt[1])*T,fr=(Tt[0]+Tt[1])*T;if(bt)return[rr,fr];var er=je*T,pr=rr>0^fr>0?-1:1;return[pr*rr-y(fr)*er,pr*fr-y(rr)*er]}return Fe.invert&&(nt.invert=function(lt,_t){var bt=(lt+_t)*T,Tt=(_t-lt)*T,rr=p(bt)<.5*je&&p(Tt)<.5*je;if(!rr){var fr=je*T,er=bt>0^Tt>0?-1:1,pr=-er*lt+(Tt>0?1:-1)*fr,Dr=-er*_t+(bt>0?1:-1)*fr;bt=(-pr-Dr)*T,Tt=(pr-Dr)*T}var Kr=Fe.invert(bt,Tt);return rr||(Kr[0]+=bt>0?b:-b),Kr}),o.geoProjection(nt).rotate([-90,-90,45]).clipAngle(180-.001)}function xt(){return ff(xr).scale(176.423)}function Ft(){return ff(vr).scale(111.48)}function sr(Fe,je){if(!(0<=(je=+je)&&je<=20))throw new Error("invalid digits");function nt(er){var pr=er.length,Dr=2,Kr=new Array(pr);for(Kr[0]=+er[0].toFixed(je),Kr[1]=+er[1].toFixed(je);Dr<pr;)Kr[Dr]=er[Dr],++Dr;return Kr}function lt(er){return er.map(nt)}function _t(er){for(var pr=nt(er[0]),Dr=[pr],Kr=1;Kr<er.length;Kr++){var an=nt(er[Kr]);(an.length>2||an[0]!=pr[0]||an[1]!=pr[1])&&(Dr.push(an),pr=an)}return Dr.length===1&&er.length>1&&Dr.push(nt(er[er.length-1])),Dr}function bt(er){return er.map(_t)}function Tt(er){if(er==null)return er;var pr;switch(er.type){case"GeometryCollection":pr={type:"GeometryCollection",geometries:er.geometries.map(Tt)};break;case"Point":pr={type:"Point",coordinates:nt(er.coordinates)};break;case"MultiPoint":pr={type:er.type,coordinates:lt(er.coordinates)};break;case"LineString":pr={type:er.type,coordinates:_t(er.coordinates)};break;case"MultiLineString":case"Polygon":pr={type:er.type,coordinates:bt(er.coordinates)};break;case"MultiPolygon":pr={type:"MultiPolygon",coordinates:er.coordinates.map(bt)};break;default:return er}return er.bbox!=null&&(pr.bbox=er.bbox),pr}function rr(er){var pr={type:"Feature",properties:er.properties,geometry:Tt(er.geometry)};return er.id!=null&&(pr.id=er.id),er.bbox!=null&&(pr.bbox=er.bbox),pr}if(Fe!=null)switch(Fe.type){case"Feature":return rr(Fe);case"FeatureCollection":{var fr={type:"FeatureCollection",features:Fe.features.map(rr)};return Fe.bbox!=null&&(fr.bbox=Fe.bbox),fr}default:return Tt(Fe)}return Fe}function $t(Fe){var je=m(Fe);function nt(lt,_t){var bt=je?g(lt*je/2)/je:lt/2;if(!_t)return[2*bt,-Fe];var Tt=2*t(bt*m(_t)),rr=1/g(_t);return[m(Tt)*rr,_t+(1-a(Tt))*rr-Fe]}return nt.invert=function(lt,_t){if(p(_t+=Fe)<x)return[je?2*t(je*lt/2)/je:lt,0];var bt=lt*lt+_t*_t,Tt=0,rr=10,fr;do{var er=g(Tt),pr=1/a(Tt),Dr=bt-2*_t*Tt+Tt*Tt;Tt-=fr=(er*Dr+2*(Tt-_t))/(2+Dr*pr*pr+2*(Tt-_t)*er)}while(p(fr)>x&&--rr>0);var Kr=lt*(er=g(Tt)),an=g(p(_t)<p(Tt+1/er)?N(Kr)*.5:O(Kr)*.5+b/4)/m(Tt);return[je?2*t(je*an)/je:2*an,Tt]},nt}function Ir(){return et($t).scale(131.215)}var un=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];un.forEach(function(Fe){Fe[1]*=1.0144});function xn(Fe,je){var nt=s(18,p(je)*36/b),lt=r(nt),_t=nt-lt,bt=(Dr=un[lt])[0],Tt=Dr[1],rr=(Dr=un[++lt])[0],fr=Dr[1],er=(Dr=un[s(19,++lt)])[0],pr=Dr[1],Dr;return[Fe*(rr+_t*(er-bt)/2+_t*_t*(er-2*rr+bt)/2),(je>0?S:-S)*(fr+_t*(pr-Tt)/2+_t*_t*(pr-2*fr+Tt)/2)]}xn.invert=function(Fe,je){var nt=je/S,lt=nt*90,_t=s(18,p(lt/5)),bt=u(0,r(_t));do{var Tt=un[bt][1],rr=un[bt+1][1],fr=un[s(19,bt+2)][1],er=fr-Tt,pr=fr-2*rr+Tt,Dr=2*(p(nt)-rr)/er,Kr=pr/er,an=Dr*(1-Kr*Dr*(1-2*Kr*Dr));if(an>=0||bt===1){lt=(je>=0?5:-5)*(an+_t);var wn=50,Dn;do _t=s(18,p(lt)/5),bt=r(_t),an=_t-bt,Tt=un[bt][1],rr=un[bt+1][1],fr=un[s(19,bt+2)][1],lt-=(Dn=(je>=0?S:-S)*(rr+an*(fr-Tt)/2+an*an*(fr-2*rr+Tt)/2)-je)*M;while(p(Dn)>A&&--wn>0);break}}while(--bt>=0);var Jn=un[bt][0],wa=un[bt+1][0],Aa=un[s(19,bt+2)][0];return[Fe/(wa+an*(Aa-Jn)/2+an*an*(Aa-2*wa+Jn)/2),lt*E]};function An(){return o.geoProjection(xn).scale(152.63)}function Ln(Fe){function je(nt,lt){var _t=a(lt),bt=(Fe-1)/(Fe-_t*a(nt));return[bt*_t*m(nt),bt*m(lt)]}return je.invert=function(nt,lt){var _t=nt*nt+lt*lt,bt=I(_t),Tt=(Fe-I(1-_t*(Fe+1)/(Fe-1)))/((Fe-1)/bt+bt/(Fe-1));return[n(nt*Tt,bt*I(1-Tt*Tt)),bt?N(lt*Tt/bt):0]},je}function Yn(Fe,je){var nt=Ln(Fe);if(!je)return nt;var lt=a(je),_t=m(je);function bt(Tt,rr){var fr=nt(Tt,rr),er=fr[1],pr=er*_t/(Fe-1)+lt;return[fr[0]*lt/pr,er/pr]}return bt.invert=function(Tt,rr){var fr=(Fe-1)/(Fe-1-rr*_t);return nt.invert(fr*Tt,fr*rr*lt)},bt}function bn(){var Fe=2,je=0,nt=o.geoProjectionMutator(Yn),lt=nt(Fe,je);return lt.distance=function(_t){return arguments.length?nt(Fe=+_t,je):Fe},lt.tilt=function(_t){return arguments.length?nt(Fe,je=_t*E):je*M},lt.scale(432.147).clipAngle(O(1/Fe)*M-1e-6)}var On=1e-4,Rn=1e4,Zn=-180,ra=Zn+On,Ua=180,Da=Ua-On,Va=-90,Ha=Va+On,ea=90,xa=ea-On;function Xa(Fe){return Fe.length>0}function qa(Fe){return Math.floor(Fe*Rn)/Rn}function mi(Fe){return Fe===Va||Fe===ea?[0,Fe]:[Zn,qa(Fe)]}function yi(Fe){var je=Fe[0],nt=Fe[1],lt=!1;return je<=ra?(je=Zn,lt=!0):je>=Da&&(je=Ua,lt=!0),nt<=Ha?(nt=Va,lt=!0):nt>=xa&&(nt=ea,lt=!0),lt?[je,nt]:Fe}function bi(Fe){return Fe.map(yi)}function Mi(Fe,je,nt){for(var lt=0,_t=Fe.length;lt<_t;++lt){var bt=Fe[lt].slice();nt.push({index:-1,polygon:je,ring:bt});for(var Tt=0,rr=bt.length;Tt<rr;++Tt){var fr=bt[Tt],er=fr[0],pr=fr[1];if(er<=ra||er>=Da||pr<=Ha||pr>=xa){bt[Tt]=yi(fr);for(var Dr=Tt+1;Dr<rr;++Dr){var Kr=bt[Dr],an=Kr[0],wn=Kr[1];if(an>ra&&an<Da&&wn>Ha&&wn<xa)break}if(Dr===Tt+1)continue;if(Tt){var Dn={index:-1,polygon:je,ring:bt.slice(0,Tt+1)};Dn.ring[Dn.ring.length-1]=mi(pr),nt[nt.length-1]=Dn}else nt.pop();if(Dr>=rr)break;nt.push({index:-1,polygon:je,ring:bt=bt.slice(Dr-1)}),bt[0]=mi(bt[0][1]),Tt=-1,rr=bt.length}}}}function li(Fe){var je,nt=Fe.length,lt={},_t={},bt,Tt,rr,fr,er;for(je=0;je<nt;++je){if(bt=Fe[je],Tt=bt.ring[0],fr=bt.ring[bt.ring.length-1],Tt[0]===fr[0]&&Tt[1]===fr[1]){bt.polygon.push(bt.ring),Fe[je]=null;continue}bt.index=je,lt[Tt]=_t[fr]=bt}for(je=0;je<nt;++je)if(bt=Fe[je],bt){if(Tt=bt.ring[0],fr=bt.ring[bt.ring.length-1],rr=_t[Tt],er=lt[fr],delete lt[Tt],delete _t[fr],Tt[0]===fr[0]&&Tt[1]===fr[1]){bt.polygon.push(bt.ring);continue}rr?(delete _t[Tt],delete lt[rr.ring[0]],rr.ring.pop(),Fe[rr.index]=null,bt={index:-1,polygon:rr.polygon,ring:rr.ring.concat(bt.ring)},rr===er?bt.polygon.push(bt.ring):(bt.index=nt++,Fe.push(lt[bt.ring[0]]=_t[bt.ring[bt.ring.length-1]]=bt))):er?(delete lt[fr],delete _t[er.ring[er.ring.length-1]],bt.ring.pop(),bt={index:nt++,polygon:er.polygon,ring:bt.ring.concat(er.ring)},Fe[er.index]=null,Fe.push(lt[bt.ring[0]]=_t[bt.ring[bt.ring.length-1]]=bt)):(bt.ring.push(bt.ring[0]),bt.polygon.push(bt.ring))}}function Lo(Fe){var je={type:"Feature",geometry:ao(Fe.geometry)};return Fe.id!=null&&(je.id=Fe.id),Fe.bbox!=null&&(je.bbox=Fe.bbox),Fe.properties!=null&&(je.properties=Fe.properties),je}function ao(Fe){if(Fe==null)return Fe;var je,nt,lt,_t;switch(Fe.type){case"GeometryCollection":je={type:"GeometryCollection",geometries:Fe.geometries.map(ao)};break;case"Point":je={type:"Point",coordinates:yi(Fe.coordinates)};break;case"MultiPoint":case"LineString":je={type:Fe.type,coordinates:bi(Fe.coordinates)};break;case"MultiLineString":je={type:"MultiLineString",coordinates:Fe.coordinates.map(bi)};break;case"Polygon":{var bt=[];Mi(Fe.coordinates,bt,nt=[]),li(nt),je={type:"Polygon",coordinates:bt};break}case"MultiPolygon":{nt=[],lt=-1,_t=Fe.coordinates.length;for(var Tt=new Array(_t);++lt<_t;)Mi(Fe.coordinates[lt],Tt[lt]=[],nt);li(nt),je={type:"MultiPolygon",coordinates:Tt.filter(Xa)};break}default:return Fe}return Fe.bbox!=null&&(je.bbox=Fe.bbox),je}function Qa(Fe){if(Fe==null)return Fe;switch(Fe.type){case"Feature":return Lo(Fe);case"FeatureCollection":{var je={type:"FeatureCollection",features:Fe.features.map(Lo)};return Fe.bbox!=null&&(je.bbox=Fe.bbox),je}default:return ao(Fe)}}function _a(Fe,je){var nt=g(je/2),lt=m(w*nt);return[Fe*(.74482-.34588*lt*lt),1.70711*nt]}_a.invert=function(Fe,je){var nt=je/1.70711,lt=m(w*nt);return[Fe/(.74482-.34588*lt*lt),2*t(nt)]};function _i(){return o.geoProjection(_a).scale(146.153)}function mo(Fe,je,nt){var lt=o.geoInterpolate(je,nt),_t=lt(.5),bt=o.geoRotation([-_t[0],-_t[1]])(je),Tt=lt.distance/2,rr=-N(m(bt[1]*E)/m(Tt)),fr=[-_t[0],-_t[1],-(bt[0]>0?b-rr:rr)*M],er=o.geoProjection(Fe(Tt)).rotate(fr),pr=o.geoRotation(fr),Dr=er.center;return delete er.rotate,er.center=function(Kr){return arguments.length?Dr(pr(Kr)):pr.invert(Dr())},er.clipAngle(90)}function Mo(Fe){var je=a(Fe);function nt(lt,_t){var bt=o.geoGnomonicRaw(lt,_t);return bt[0]*=je,bt}return nt.invert=function(lt,_t){return o.geoGnomonicRaw.invert(lt/je,_t)},nt}function Ss(){return Ks([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Ks(Fe,je){return mo(Mo,Fe,je)}function Jo(Fe){if(!(Fe*=2))return o.geoAzimuthalEquidistantRaw;var je=-Fe/2,nt=-je,lt=Fe*Fe,_t=g(nt),bt=.5/m(nt);function Tt(rr,fr){var er=O(a(fr)*a(rr-je)),pr=O(a(fr)*a(rr-nt)),Dr=fr<0?-1:1;return er*=er,pr*=pr,[(er-pr)/(2*Fe),Dr*I(4*lt*pr-(lt-er+pr)*(lt-er+pr))/(2*Fe)]}return Tt.invert=function(rr,fr){var er=fr*fr,pr=a(I(er+(Kr=rr+je)*Kr)),Dr=a(I(er+(Kr=rr+nt)*Kr)),Kr,an;return[n(an=pr-Dr,Kr=(pr+Dr)*_t),(fr<0?-1:1)*O(I(Kr*Kr+an*an)*bt)]},Tt}function Ll(){return zs([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function zs(Fe,je){return mo(Jo,Fe,je)}function Ms(Fe,je){if(p(je)<x)return[Fe,0];var nt=p(je/S),lt=N(nt);if(p(Fe)<x||p(p(je)-S)<x)return[0,y(je)*b*g(lt/2)];var _t=a(lt),bt=p(b/Fe-Fe/b)/2,Tt=bt*bt,rr=_t/(nt+_t-1),fr=rr*(2/nt-1),er=fr*fr,pr=er+Tt,Dr=rr-er,Kr=Tt+rr;return[y(Fe)*b*(bt*Dr+I(Tt*Dr*Dr-pr*(rr*rr-er)))/pr,y(je)*b*(fr*Kr-bt*I((Tt+1)*pr-Kr*Kr))/pr]}Ms.invert=function(Fe,je){if(p(je)<x)return[Fe,0];if(p(Fe)<x)return[0,S*m(2*t(je/b))];var nt=(Fe/=b)*Fe,lt=(je/=b)*je,_t=nt+lt,bt=_t*_t,Tt=-p(je)*(1+_t),rr=Tt-2*lt+nt,fr=-2*Tt+1+2*lt+bt,er=lt/fr+(2*rr*rr*rr/(fr*fr*fr)-9*Tt*rr/(fr*fr))/27,pr=(Tt-rr*rr/(3*fr))/fr,Dr=2*I(-pr/3),Kr=O(3*er/(pr*Dr))/3;return[b*(_t-1+I(1+2*(nt-lt)+bt))/(2*Fe),y(je)*b*(-Dr*a(Kr+b/3)-rr/(3*fr))]};function Po(){return o.geoProjection(Ms).scale(79.4183)}function Su(Fe,je){if(p(je)<x)return[Fe,0];var nt=p(je/S),lt=N(nt);if(p(Fe)<x||p(p(je)-S)<x)return[0,y(je)*b*g(lt/2)];var _t=a(lt),bt=p(b/Fe-Fe/b)/2,Tt=bt*bt,rr=_t*(I(1+Tt)-bt*_t)/(1+Tt*nt*nt);return[y(Fe)*b*rr,y(je)*b*I(1-rr*(2*bt+rr))]}Su.invert=function(Fe,je){if(!Fe)return[0,S*m(2*t(je/b))];var nt=p(Fe/b),lt=(1-nt*nt-(je/=b)*je)/(2*nt),_t=lt*lt,bt=I(_t+1);return[y(Fe)*b*(bt-lt),y(je)*S*m(2*n(I((1-2*lt*nt)*(lt+bt)-nt),I(bt+lt+nt)))]};function Wu(){return o.geoProjection(Su).scale(79.4183)}function ks(Fe,je){if(p(je)<x)return[Fe,0];var nt=je/S,lt=N(nt);if(p(Fe)<x||p(p(je)-S)<x)return[0,b*g(lt/2)];var _t=(b/Fe-Fe/b)/2,bt=nt/(1+a(lt));return[b*(y(Fe)*I(_t*_t+1-bt*bt)-_t),b*bt]}ks.invert=function(Fe,je){if(!je)return[Fe,0];var nt=je/b,lt=(b*b*(1-nt*nt)-Fe*Fe)/(2*b*Fe);return[Fe?b*(y(Fe)*I(lt*lt+1)-lt):0,S*m(2*t(nt))]};function cf(){return o.geoProjection(ks).scale(79.4183)}function Mu(Fe,je){if(!je)return[Fe,0];var nt=p(je);if(!Fe||nt===S)return[0,je];var lt=nt/S,_t=lt*lt,bt=(8*lt-_t*(_t+2)-5)/(2*_t*(lt-1)),Tt=bt*bt,rr=lt*bt,fr=_t+Tt+2*rr,er=lt+3*bt,pr=Fe/S,Dr=pr+1/pr,Kr=y(p(Fe)-S)*I(Dr*Dr-4),an=Kr*Kr,wn=fr*(_t+Tt*an-1)+(1-_t)*(_t*(er*er+4*Tt)+12*rr*Tt+4*Tt*Tt),Dn=(Kr*(fr+Tt-1)+2*I(wn))/(4*fr+an);return[y(Fe)*S*Dn,y(je)*S*I(1+Kr*p(Dn)-Dn*Dn)]}Mu.invert=function(Fe,je){var nt;if(!Fe||!je)return[Fe,je];je/=b;var lt=y(Fe)*Fe/S,_t=(lt*lt-1+4*je*je)/p(lt),bt=_t*_t,Tt=2*je,rr=50;do{var fr=Tt*Tt,er=(8*Tt-fr*(fr+2)-5)/(2*fr*(Tt-1)),pr=(3*Tt-fr*Tt-10)/(2*fr*Tt),Dr=er*er,Kr=Tt*er,an=Tt+er,wn=an*an,Dn=Tt+3*er,Jn=wn*(fr+Dr*bt-1)+(1-fr)*(fr*(Dn*Dn+4*Dr)+Dr*(12*Kr+4*Dr)),wa=-2*an*(4*Kr*Dr+(1-4*fr+3*fr*fr)*(1+pr)+Dr*(-6+14*fr-bt+(-8+8*fr-2*bt)*pr)+Kr*(-8+12*fr+(-10+10*fr-bt)*pr)),Aa=I(Jn),$a=_t*(wn+Dr-1)+2*Aa-lt*(4*wn+bt),Za=_t*(2*er*pr+2*an*(1+pr))+wa/Aa-8*an*(_t*(-1+Dr+wn)+2*Aa)*(1+pr)/(bt+4*wn);Tt-=nt=$a/Za}while(nt>x&&--rr>0);return[y(Fe)*(I(_t*_t+4)+_t)*b/4,S*Tt]};function Gc(){return o.geoProjection(Mu).scale(127.16)}function Df(Fe,je,nt,lt,_t){function bt(Tt,rr){var fr=nt*m(lt*rr),er=I(1-fr*fr),pr=I(2/(1+er*a(Tt*=_t)));return[Fe*er*pr*m(Tt),je*fr*pr]}return bt.invert=function(Tt,rr){var fr=Tt/Fe,er=rr/je,pr=I(fr*fr+er*er),Dr=2*N(pr/2);return[n(Tt*g(Dr),Fe*pr)/_t,pr&&N(rr*m(Dr)/(je*nt*pr))/lt]},bt}function hf(Fe,je,nt,lt){var _t=b/3;Fe=u(Fe,x),je=u(je,x),Fe=s(Fe,S),je=s(je,b-x),nt=u(nt,0),nt=s(nt,100-x),lt=u(lt,x);var bt=nt/100+1,Tt=lt/100,rr=O(bt*a(_t))/_t,fr=m(Fe)/m(rr*S),er=je/b,pr=I(Tt*m(Fe/2)/m(je/2)),Dr=pr/I(er*fr*rr),Kr=1/(pr*I(er*fr*rr));return Df(Dr,Kr,fr,rr,er)}function If(){var Fe=65*E,je=60*E,nt=20,lt=200,_t=o.geoProjectionMutator(hf),bt=_t(Fe,je,nt,lt);return bt.poleline=function(Tt){return arguments.length?_t(Fe=+Tt*E,je,nt,lt):Fe*M},bt.parallels=function(Tt){return arguments.length?_t(Fe,je=+Tt*E,nt,lt):je*M},bt.inflation=function(Tt){return arguments.length?_t(Fe,je,nt=+Tt,lt):nt},bt.ratio=function(Tt){return arguments.length?_t(Fe,je,nt,lt=+Tt):lt},bt.scale(163.775)}function Js(){return If().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var sc=4*b+3*I(3),Ff=2*I(2*b*I(3)/sc),zf=Ae(Ff*I(3)/b,Ff,sc/6);function $o(){return o.geoProjection(zf).scale(176.84)}function Of(Fe,je){return[Fe*I(1-3*je*je/(b*b)),je]}Of.invert=function(Fe,je){return[Fe/I(1-3*je*je/(b*b)),je]};function xc(){return o.geoProjection(Of).scale(152.63)}function Os(Fe,je){var nt=a(je),lt=a(Fe)*nt,_t=1-lt,bt=a(Fe=n(m(Fe)*nt,-m(je))),Tt=m(Fe);return nt=I(1-lt*lt),[Tt*nt-bt*_t,-bt*nt-Tt*_t]}Os.invert=function(Fe,je){var nt=(Fe*Fe+je*je)/-2,lt=I(-nt*(2+nt)),_t=je*nt+Fe*lt,bt=Fe*nt-je*lt,Tt=I(bt*bt+_t*_t);return[n(lt*_t,Tt*(1+nt)),Tt?-N(lt*bt/Tt):0]};function vf(){return o.geoProjection(Os).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)}function pf(Fe,je){var nt=W(Fe,je);return[(nt[0]+Fe/S)/2,(nt[1]+je)/2]}pf.invert=function(Fe,je){var nt=Fe,lt=je,_t=25;do{var bt=a(lt),Tt=m(lt),rr=m(2*lt),fr=Tt*Tt,er=bt*bt,pr=m(nt),Dr=a(nt/2),Kr=m(nt/2),an=Kr*Kr,wn=1-er*Dr*Dr,Dn=wn?O(bt*Dr)*I(Jn=1/wn):Jn=0,Jn,wa=.5*(2*Dn*bt*Kr+nt/S)-Fe,Aa=.5*(Dn*Tt+lt)-je,$a=.5*Jn*(er*an+Dn*bt*Dr*fr)+.5/S,Za=Jn*(pr*rr/4-Dn*Tt*Kr),ri=.125*Jn*(rr*Kr-Dn*Tt*er*pr),vi=.5*Jn*(fr*Dr+Dn*an*bt)+.5,ho=Za*ri-vi*$a,ai=(Aa*Za-wa*vi)/ho,ji=(wa*ri-Aa*$a)/ho;nt-=ai,lt-=ji}while((p(ai)>x||p(ji)>x)&&--_t>0);return[nt,lt]};function Bf(){return o.geoProjection(pf).scale(158.837)}l.geoNaturalEarth=o.geoNaturalEarth1,l.geoNaturalEarthRaw=o.geoNaturalEarth1Raw,l.geoAiry=re,l.geoAiryRaw=te,l.geoAitoff=J,l.geoAitoffRaw=W,l.geoArmadillo=ue,l.geoArmadilloRaw=le,l.geoAugust=G,l.geoAugustRaw=se,l.geoBaker=K,l.geoBakerRaw=$,l.geoBerghaus=ae,l.geoBerghausRaw=Q,l.geoBertin1953=xe,l.geoBertin1953Raw=me,l.geoBoggs=We,l.geoBoggsRaw=Ie,l.geoBonne=dt,l.geoBonneRaw=Ve,l.geoBottomley=Gt,l.geoBottomleyRaw=Dt,l.geoBromley=zt,l.geoBromleyRaw=Mt,l.geoChamberlin=Ee,l.geoChamberlinRaw=it,l.geoChamberlinAfrica=$e,l.geoCollignon=rt,l.geoCollignonRaw=Xe,l.geoCraig=Pt,l.geoCraigRaw=ut,l.geoCraster=Xt,l.geoCrasterRaw=Bt,l.geoCylindricalEqualArea=Jt,l.geoCylindricalEqualAreaRaw=Ut,l.geoCylindricalStereographic=gt,l.geoCylindricalStereographicRaw=Je,l.geoEckert1=or,l.geoEckert1Raw=Ct,l.geoEckert2=lr,l.geoEckert2Raw=gr,l.geoEckert3=Fr,l.geoEckert3Raw=mr,l.geoEckert4=ir,l.geoEckert4Raw=Rr,l.geoEckert5=qe,l.geoEckert5Raw=Vr,l.geoEckert6=Me,l.geoEckert6Raw=we,l.geoEisenlohr=Qe,l.geoEisenlohrRaw=Ye,l.geoFahey=pt,l.geoFaheyRaw=st,l.geoFoucaut=Yt,l.geoFoucautRaw=wt,l.geoFoucautSinusoidal=Tr,l.geoFoucautSinusoidalRaw=wr,l.geoGilbert=Or,l.geoGingery=gn,l.geoGingeryRaw=nn,l.geoGinzburg4=sn,l.geoGinzburg4Raw=kr,l.geoGinzburg5=$r,l.geoGinzburg5Raw=cn,l.geoGinzburg6=Ot,l.geoGinzburg6Raw=at,l.geoGinzburg8=dr,l.geoGinzburg8Raw=nr,l.geoGinzburg9=Lr,l.geoGinzburg9Raw=Zr,l.geoGringorten=En,l.geoGringortenRaw=xr,l.geoGuyou=In,l.geoGuyouRaw=vr,l.geoHammer=fe,l.geoHammerRaw=ie,l.geoHammerRetroazimuthal=qn,l.geoHammerRetroazimuthalRaw=Bn,l.geoHealpix=br,l.geoHealpixRaw=hr,l.geoHill=ar,l.geoHillRaw=Hr,l.geoHomolosine=Gn,l.geoHomolosineRaw=Nn,l.geoHufnagel=Un,l.geoHufnagelRaw=Wn,l.geoHyperelliptical=ca,l.geoHyperellipticalRaw=Xn,l.geoInterrupt=Ko,l.geoInterruptedBoggs=Gs,l.geoInterruptedHomolosine=Fi,l.geoInterruptedMollweide=sl,l.geoInterruptedMollweideHemispheres=Bl,l.geoInterruptedSinuMollweide=Ou,l.geoInterruptedSinusoidal=wl,l.geoKavrayskiy7=Wi,l.geoKavrayskiy7Raw=ll,l.geoLagrange=ql,l.geoLagrangeRaw=Bo,l.geoLarrivee=Nl,l.geoLarriveeRaw=zi,l.geoLaskowski=Ui,l.geoLaskowskiRaw=qi,l.geoLittrow=eo,l.geoLittrowRaw=co,l.geoLoximuthal=Tl,l.geoLoximuthalRaw=xs,l.geoMiller=vs,l.geoMillerRaw=qu,l.geoModifiedStereographic=Ys,l.geoModifiedStereographicRaw=ef,l.geoModifiedStereographicAlaska=mu,l.geoModifiedStereographicGs48=Cf,l.geoModifiedStereographicGs50=Ef,l.geoModifiedStereographicMiller=Al,l.geoModifiedStereographicLee=yu,l.geoMollweide=He,l.geoMollweideRaw=Oe,l.geoMtFlatPolarParabolic=tf,l.geoMtFlatPolarParabolicRaw=Nu,l.geoMtFlatPolarQuartic=Lf,l.geoMtFlatPolarQuarticRaw=xu,l.geoMtFlatPolarSinusoidal=Uu,l.geoMtFlatPolarSinusoidalRaw=Sl,l.geoNaturalEarth2=Ds,l.geoNaturalEarth2Raw=bu,l.geoNellHammer=Vu,l.geoNellHammerRaw=eu,l.geoInterruptedQuarticAuthalic=nf,l.geoNicolosi=Pf,l.geoNicolosiRaw=_u,l.geoPatterson=po,l.geoPattersonRaw=Xs,l.geoPolyconic=ru,l.geoPolyconicRaw=tu,l.geoPolyhedral=kl,l.geoPolyhedralButterfly=ou,l.geoPolyhedralCollignon=oc,l.geoPolyhedralWaterman=Oi,l.geoProject=ws,l.geoGringortenQuincuncial=xt,l.geoPeirceQuincuncial=Ft,l.geoPierceQuincuncial=Ft,l.geoQuantize=sr,l.geoQuincuncial=ff,l.geoRectangularPolyconic=Ir,l.geoRectangularPolyconicRaw=$t,l.geoRobinson=An,l.geoRobinsonRaw=xn,l.geoSatellite=bn,l.geoSatelliteRaw=Yn,l.geoSinuMollweide=Tn,l.geoSinuMollweideRaw=Nr,l.geoSinusoidal=De,l.geoSinusoidalRaw=Ne,l.geoStitch=Qa,l.geoTimes=_i,l.geoTimesRaw=_a,l.geoTwoPointAzimuthal=Ks,l.geoTwoPointAzimuthalRaw=Mo,l.geoTwoPointAzimuthalUsa=Ss,l.geoTwoPointEquidistant=zs,l.geoTwoPointEquidistantRaw=Jo,l.geoTwoPointEquidistantUsa=Ll,l.geoVanDerGrinten=Po,l.geoVanDerGrintenRaw=Ms,l.geoVanDerGrinten2=Wu,l.geoVanDerGrinten2Raw=Su,l.geoVanDerGrinten3=cf,l.geoVanDerGrinten3Raw=ks,l.geoVanDerGrinten4=Gc,l.geoVanDerGrinten4Raw=Mu,l.geoWagner=If,l.geoWagner7=Js,l.geoWagnerRaw=hf,l.geoWagner4=$o,l.geoWagner4Raw=zf,l.geoWagner6=xc,l.geoWagner6Raw=Of,l.geoWiechel=vf,l.geoWiechelRaw=Os,l.geoWinkel3=Bf,l.geoWinkel3Raw=pf,Object.defineProperty(l,"__esModule",{value:!0})})},{"d3-array":107,"d3-geo":114}],114:[function(e,k,z){(function(l,o){typeof z=="object"&&typeof k!="undefined"?o(z,e("d3-array")):(l=l||self,o(l.d3=l.d3||{},l.d3))})(this,function(l,o){function c(){return new p}function p(){this.reset()}p.prototype={constructor:p,reset:function(){this.s=this.t=0},add:function(xt){n(t,xt,this.t),n(this,t.s,this.s),this.s?this.t+=t.t:this.s=t.t},valueOf:function(){return this.s}};var t=new p;function n(xt,Ft,sr){var $t=xt.s=Ft+sr,Ir=$t-Ft,un=$t-Ir;xt.t=Ft-un+(sr-Ir)}var a=1e-6,i=1e-12,r=Math.PI,f=r/2,u=r/4,s=r*2,h=180/r,d=r/180,y=Math.abs,m=Math.atan,g=Math.atan2,x=Math.cos,A=Math.ceil,b=Math.exp,S=Math.log,w=Math.pow,T=Math.sin,_=Math.sign||function(xt){return xt>0?1:xt<0?-1:0},v=Math.sqrt,P=Math.tan;function M(xt){return xt>1?0:xt<-1?r:Math.acos(xt)}function E(xt){return xt>1?f:xt<-1?-f:Math.asin(xt)}function D(xt){return(xt=T(xt/2))*xt}function N(){}function O(xt,Ft){xt&&F.hasOwnProperty(xt.type)&&F[xt.type](xt,Ft)}var I={Feature:function(xt,Ft){O(xt.geometry,Ft)},FeatureCollection:function(xt,Ft){for(var sr=xt.features,$t=-1,Ir=sr.length;++$t<Ir;)O(sr[$t].geometry,Ft)}},F={Sphere:function(xt,Ft){Ft.sphere()},Point:function(xt,Ft){xt=xt.coordinates,Ft.point(xt[0],xt[1],xt[2])},MultiPoint:function(xt,Ft){for(var sr=xt.coordinates,$t=-1,Ir=sr.length;++$t<Ir;)xt=sr[$t],Ft.point(xt[0],xt[1],xt[2])},LineString:function(xt,Ft){V(xt.coordinates,Ft,0)},MultiLineString:function(xt,Ft){for(var sr=xt.coordinates,$t=-1,Ir=sr.length;++$t<Ir;)V(sr[$t],Ft,0)},Polygon:function(xt,Ft){U(xt.coordinates,Ft)},MultiPolygon:function(xt,Ft){for(var sr=xt.coordinates,$t=-1,Ir=sr.length;++$t<Ir;)U(sr[$t],Ft)},GeometryCollection:function(xt,Ft){for(var sr=xt.geometries,$t=-1,Ir=sr.length;++$t<Ir;)O(sr[$t],Ft)}};function V(xt,Ft,sr){var $t=-1,Ir=xt.length-sr,un;for(Ft.lineStart();++$t<Ir;)un=xt[$t],Ft.point(un[0],un[1],un[2]);Ft.lineEnd()}function U(xt,Ft){var sr=-1,$t=xt.length;for(Ft.polygonStart();++sr<$t;)V(xt[sr],Ft,1);Ft.polygonEnd()}function j(xt,Ft){xt&&I.hasOwnProperty(xt.type)?I[xt.type](xt,Ft):O(xt,Ft)}var Z=c(),te=c(),re,W,J,le,ue,se={point:N,lineStart:N,lineEnd:N,polygonStart:function(){Z.reset(),se.lineStart=G,se.lineEnd=Y},polygonEnd:function(){var xt=+Z;te.add(xt<0?s+xt:xt),this.lineStart=this.lineEnd=this.point=N},sphere:function(){te.add(s)}};function G(){se.point=ee}function Y(){$(re,W)}function ee(xt,Ft){se.point=$,re=xt,W=Ft,xt*=d,Ft*=d,J=xt,le=x(Ft=Ft/2+u),ue=T(Ft)}function $(xt,Ft){xt*=d,Ft*=d,Ft=Ft/2+u;var sr=xt-J,$t=sr>=0?1:-1,Ir=$t*sr,un=x(Ft),xn=T(Ft),An=ue*xn,Ln=le*un+An*x(Ir),Yn=An*$t*T(Ir);Z.add(g(Yn,Ln)),J=xt,le=un,ue=xn}function K(xt){return te.reset(),j(xt,se),te*2}function Q(xt){return[g(xt[1],xt[0]),E(xt[2])]}function ae(xt){var Ft=xt[0],sr=xt[1],$t=x(sr);return[$t*x(Ft),$t*T(Ft),T(sr)]}function ie(xt,Ft){return xt[0]*Ft[0]+xt[1]*Ft[1]+xt[2]*Ft[2]}function oe(xt,Ft){return[xt[1]*Ft[2]-xt[2]*Ft[1],xt[2]*Ft[0]-xt[0]*Ft[2],xt[0]*Ft[1]-xt[1]*Ft[0]]}function fe(xt,Ft){xt[0]+=Ft[0],xt[1]+=Ft[1],xt[2]+=Ft[2]}function ye(xt,Ft){return[xt[0]*Ft,xt[1]*Ft,xt[2]*Ft]}function ce(xt){var Ft=v(xt[0]*xt[0]+xt[1]*xt[1]+xt[2]*xt[2]);xt[0]/=Ft,xt[1]/=Ft,xt[2]/=Ft}var me,xe,ke,Ae,Oe,He,Ge,_e,Ie=c(),We,et,Ne={point:De,lineStart:dt,lineEnd:Dt,polygonStart:function(){Ne.point=Gt,Ne.lineStart=Mt,Ne.lineEnd=zt,Ie.reset(),se.polygonStart()},polygonEnd:function(){se.polygonEnd(),Ne.point=De,Ne.lineStart=dt,Ne.lineEnd=Dt,Z<0?(me=-(ke=180),xe=-(Ae=90)):Ie>a?Ae=90:Ie<-a&&(xe=-90),et[0]=me,et[1]=ke},sphere:function(){me=-(ke=180),xe=-(Ae=90)}};function De(xt,Ft){We.push(et=[me=xt,ke=xt]),Ft<xe&&(xe=Ft),Ft>Ae&&(Ae=Ft)}function Ve(xt,Ft){var sr=ae([xt*d,Ft*d]);if(_e){var $t=oe(_e,sr),Ir=[$t[1],-$t[0],0],un=oe(Ir,$t);ce(un),un=Q(un);var xn=xt-Oe,An=xn>0?1:-1,Ln=un[0]*h*An,Yn,bn=y(xn)>180;bn^(An*Oe<Ln&&Ln<An*xt)?(Yn=un[1]*h,Yn>Ae&&(Ae=Yn)):(Ln=(Ln+360)%360-180,bn^(An*Oe<Ln&&Ln<An*xt)?(Yn=-un[1]*h,Yn<xe&&(xe=Yn)):(Ft<xe&&(xe=Ft),Ft>Ae&&(Ae=Ft))),bn?xt<Oe?Nt(me,xt)>Nt(me,ke)&&(ke=xt):Nt(xt,ke)>Nt(me,ke)&&(me=xt):ke>=me?(xt<me&&(me=xt),xt>ke&&(ke=xt)):xt>Oe?Nt(me,xt)>Nt(me,ke)&&(ke=xt):Nt(xt,ke)>Nt(me,ke)&&(me=xt)}else We.push(et=[me=xt,ke=xt]);Ft<xe&&(xe=Ft),Ft>Ae&&(Ae=Ft),_e=sr,Oe=xt}function dt(){Ne.point=Ve}function Dt(){et[0]=me,et[1]=ke,Ne.point=De,_e=null}function Gt(xt,Ft){if(_e){var sr=xt-Oe;Ie.add(y(sr)>180?sr+(sr>0?360:-360):sr)}else He=xt,Ge=Ft;se.point(xt,Ft),Ve(xt,Ft)}function Mt(){se.lineStart()}function zt(){Gt(He,Ge),se.lineEnd(),y(Ie)>a&&(me=-(ke=180)),et[0]=me,et[1]=ke,_e=null}function Nt(xt,Ft){return(Ft-=xt)<0?Ft+360:Ft}function Et(xt,Ft){return xt[0]-Ft[0]}function At(xt,Ft){return xt[0]<=xt[1]?xt[0]<=Ft&&Ft<=xt[1]:Ft<xt[0]||xt[1]<Ft}function it(xt){var Ft,sr,$t,Ir,un,xn,An;if(Ae=ke=-(me=xe=1/0),We=[],j(xt,Ne),sr=We.length){for(We.sort(Et),Ft=1,$t=We[0],un=[$t];Ft<sr;++Ft)Ir=We[Ft],At($t,Ir[0])||At($t,Ir[1])?(Nt($t[0],Ir[1])>Nt($t[0],$t[1])&&($t[1]=Ir[1]),Nt(Ir[0],$t[1])>Nt($t[0],$t[1])&&($t[0]=Ir[0])):un.push($t=Ir);for(xn=-1/0,sr=un.length-1,Ft=0,$t=un[sr];Ft<=sr;$t=Ir,++Ft)Ir=un[Ft],(An=Nt($t[1],Ir[0]))>xn&&(xn=An,me=Ir[0],ke=$t[1])}return We=et=null,me===1/0||xe===1/0?[[NaN,NaN],[NaN,NaN]]:[[me,xe],[ke,Ae]]}var ht,$e,Ee,Xe,rt,ut,Pt,kt,Bt,Xt,Ut,Jt,Je,gt,Ct,or,gr={sphere:N,point:lr,lineStart:Fr,lineEnd:Vr,polygonStart:function(){gr.lineStart=qe,gr.lineEnd=we},polygonEnd:function(){gr.lineStart=Fr,gr.lineEnd=Vr}};function lr(xt,Ft){xt*=d,Ft*=d;var sr=x(Ft);mr(sr*x(xt),sr*T(xt),T(Ft))}function mr(xt,Ft,sr){++ht,Ee+=(xt-Ee)/ht,Xe+=(Ft-Xe)/ht,rt+=(sr-rt)/ht}function Fr(){gr.point=Rr}function Rr(xt,Ft){xt*=d,Ft*=d;var sr=x(Ft);gt=sr*x(xt),Ct=sr*T(xt),or=T(Ft),gr.point=ir,mr(gt,Ct,or)}function ir(xt,Ft){xt*=d,Ft*=d;var sr=x(Ft),$t=sr*x(xt),Ir=sr*T(xt),un=T(Ft),xn=g(v((xn=Ct*un-or*Ir)*xn+(xn=or*$t-gt*un)*xn+(xn=gt*Ir-Ct*$t)*xn),gt*$t+Ct*Ir+or*un);$e+=xn,ut+=xn*(gt+(gt=$t)),Pt+=xn*(Ct+(Ct=Ir)),kt+=xn*(or+(or=un)),mr(gt,Ct,or)}function Vr(){gr.point=lr}function qe(){gr.point=Me}function we(){Re(Jt,Je),gr.point=lr}function Me(xt,Ft){Jt=xt,Je=Ft,xt*=d,Ft*=d,gr.point=Re;var sr=x(Ft);gt=sr*x(xt),Ct=sr*T(xt),or=T(Ft),mr(gt,Ct,or)}function Re(xt,Ft){xt*=d,Ft*=d;var sr=x(Ft),$t=sr*x(xt),Ir=sr*T(xt),un=T(Ft),xn=Ct*un-or*Ir,An=or*$t-gt*un,Ln=gt*Ir-Ct*$t,Yn=v(xn*xn+An*An+Ln*Ln),bn=E(Yn),On=Yn&&-bn/Yn;Bt+=On*xn,Xt+=On*An,Ut+=On*Ln,$e+=bn,ut+=bn*(gt+(gt=$t)),Pt+=bn*(Ct+(Ct=Ir)),kt+=bn*(or+(or=un)),mr(gt,Ct,or)}function Ye(xt){ht=$e=Ee=Xe=rt=ut=Pt=kt=Bt=Xt=Ut=0,j(xt,gr);var Ft=Bt,sr=Xt,$t=Ut,Ir=Ft*Ft+sr*sr+$t*$t;return Ir<i&&(Ft=ut,sr=Pt,$t=kt,$e<a&&(Ft=Ee,sr=Xe,$t=rt),Ir=Ft*Ft+sr*sr+$t*$t,Ir<i)?[NaN,NaN]:[g(sr,Ft)*h,E($t/v(Ir))*h]}function Qe(xt){return function(){return xt}}function ot(xt,Ft){function sr($t,Ir){return $t=xt($t,Ir),Ft($t[0],$t[1])}return xt.invert&&Ft.invert&&(sr.invert=function($t,Ir){return $t=Ft.invert($t,Ir),$t&&xt.invert($t[0],$t[1])}),sr}function st(xt,Ft){return[y(xt)>r?xt+Math.round(-xt/s)*s:xt,Ft]}st.invert=st;function pt(xt,Ft,sr){return(xt%=s)?Ft||sr?ot(Yt(xt),wr(Ft,sr)):Yt(xt):Ft||sr?wr(Ft,sr):st}function wt(xt){return function(Ft,sr){return Ft+=xt,[Ft>r?Ft-s:Ft<-r?Ft+s:Ft,sr]}}function Yt(xt){var Ft=wt(xt);return Ft.invert=wt(-xt),Ft}function wr(xt,Ft){var sr=x(xt),$t=T(xt),Ir=x(Ft),un=T(Ft);function xn(An,Ln){var Yn=x(Ln),bn=x(An)*Yn,On=T(An)*Yn,Rn=T(Ln),Zn=Rn*sr+bn*$t;return[g(On*Ir-Zn*un,bn*sr-Rn*$t),E(Zn*Ir+On*un)]}return xn.invert=function(An,Ln){var Yn=x(Ln),bn=x(An)*Yn,On=T(An)*Yn,Rn=T(Ln),Zn=Rn*Ir-On*un;return[g(On*Ir+Rn*un,bn*sr+Zn*$t),E(Zn*sr-bn*$t)]},xn}function Tr(xt){xt=pt(xt[0]*d,xt[1]*d,xt.length>2?xt[2]*d:0);function Ft(sr){return sr=xt(sr[0]*d,sr[1]*d),sr[0]*=h,sr[1]*=h,sr}return Ft.invert=function(sr){return sr=xt.invert(sr[0]*d,sr[1]*d),sr[0]*=h,sr[1]*=h,sr},Ft}function Mr(xt,Ft,sr,$t,Ir,un){if(!!sr){var xn=x(Ft),An=T(Ft),Ln=$t*sr;Ir==null?(Ir=Ft+$t*s,un=Ft-Ln/2):(Ir=_r(xn,Ir),un=_r(xn,un),($t>0?Ir<un:Ir>un)&&(Ir+=$t*s));for(var Yn,bn=Ir;$t>0?bn>un:bn<un;bn-=Ln)Yn=Q([xn,-An*x(bn),-An*T(bn)]),xt.point(Yn[0],Yn[1])}}function _r(xt,Ft){Ft=ae(Ft),Ft[0]-=xt,ce(Ft);var sr=M(-Ft[1]);return((-Ft[2]<0?-sr:sr)+s-a)%s}function Or(){var xt=Qe([0,0]),Ft=Qe(90),sr=Qe(6),$t,Ir,un={point:xn};function xn(Ln,Yn){$t.push(Ln=Ir(Ln,Yn)),Ln[0]*=h,Ln[1]*=h}function An(){var Ln=xt.apply(this,arguments),Yn=Ft.apply(this,arguments)*d,bn=sr.apply(this,arguments)*d;return $t=[],Ir=pt(-Ln[0]*d,-Ln[1]*d,0).invert,Mr(un,Yn,bn,1),Ln={type:"Polygon",coordinates:[$t]},$t=Ir=null,Ln}return An.center=function(Ln){return arguments.length?(xt=typeof Ln=="function"?Ln:Qe([+Ln[0],+Ln[1]]),An):xt},An.radius=function(Ln){return arguments.length?(Ft=typeof Ln=="function"?Ln:Qe(+Ln),An):Ft},An.precision=function(Ln){return arguments.length?(sr=typeof Ln=="function"?Ln:Qe(+Ln),An):sr},An}function nn(){var xt=[],Ft;return{point:function(sr,$t,Ir){Ft.push([sr,$t,Ir])},lineStart:function(){xt.push(Ft=[])},lineEnd:N,rejoin:function(){xt.length>1&&xt.push(xt.pop().concat(xt.shift()))},result:function(){var sr=xt;return xt=[],Ft=null,sr}}}function Sr(xt,Ft){return y(xt[0]-Ft[0])<a&&y(xt[1]-Ft[1])<a}function yr(xt,Ft,sr,$t){this.x=xt,this.z=Ft,this.o=sr,this.e=$t,this.v=!1,this.n=this.p=null}function gn(xt,Ft,sr,$t,Ir){var un=[],xn=[],An,Ln;if(xt.forEach(function(ra){if(!((Ua=ra.length-1)<=0)){var Ua,Da=ra[0],Va=ra[Ua],Ha;if(Sr(Da,Va)){if(!Da[2]&&!Va[2]){for(Ir.lineStart(),An=0;An<Ua;++An)Ir.point((Da=ra[An])[0],Da[1]);Ir.lineEnd();return}Va[0]+=2*a}un.push(Ha=new yr(Da,ra,null,!0)),xn.push(Ha.o=new yr(Da,null,Ha,!1)),un.push(Ha=new yr(Va,ra,null,!1)),xn.push(Ha.o=new yr(Va,null,Ha,!0))}}),!!un.length){for(xn.sort(Ft),Xr(un),Xr(xn),An=0,Ln=xn.length;An<Ln;++An)xn[An].e=sr=!sr;for(var Yn=un[0],bn,On;;){for(var Rn=Yn,Zn=!0;Rn.v;)if((Rn=Rn.n)===Yn)return;bn=Rn.z,Ir.lineStart();do{if(Rn.v=Rn.o.v=!0,Rn.e){if(Zn)for(An=0,Ln=bn.length;An<Ln;++An)Ir.point((On=bn[An])[0],On[1]);else $t(Rn.x,Rn.n.x,1,Ir);Rn=Rn.n}else{if(Zn)for(bn=Rn.p.z,An=bn.length-1;An>=0;--An)Ir.point((On=bn[An])[0],On[1]);else $t(Rn.x,Rn.p.x,-1,Ir);Rn=Rn.p}Rn=Rn.o,bn=Rn.z,Zn=!Zn}while(!Rn.v);Ir.lineEnd()}}}function Xr(xt){if(!!(Ft=xt.length)){for(var Ft,sr=0,$t=xt[0],Ir;++sr<Ft;)$t.n=Ir=xt[sr],Ir.p=$t,$t=Ir;$t.n=Ir=xt[0],Ir.p=$t}}var kr=c();function sn(xt){return y(xt[0])<=r?xt[0]:_(xt[0])*((y(xt[0])+r)%s-r)}function cn(xt,Ft){var sr=sn(Ft),$t=Ft[1],Ir=T($t),un=[T(sr),-x(sr),0],xn=0,An=0;kr.reset(),Ir===1?$t=f+a:Ir===-1&&($t=-f-a);for(var Ln=0,Yn=xt.length;Ln<Yn;++Ln)if(!!(On=(bn=xt[Ln]).length))for(var bn,On,Rn=bn[On-1],Zn=sn(Rn),ra=Rn[1]/2+u,Ua=T(ra),Da=x(ra),Va=0;Va<On;++Va,Zn=ea,Ua=Xa,Da=qa,Rn=Ha){var Ha=bn[Va],ea=sn(Ha),xa=Ha[1]/2+u,Xa=T(xa),qa=x(xa),mi=ea-Zn,yi=mi>=0?1:-1,bi=yi*mi,Mi=bi>r,li=Ua*Xa;if(kr.add(g(li*yi*T(bi),Da*qa+li*x(bi))),xn+=Mi?mi+yi*s:mi,Mi^Zn>=sr^ea>=sr){var Lo=oe(ae(Rn),ae(Ha));ce(Lo);var ao=oe(un,Lo);ce(ao);var Qa=(Mi^mi>=0?-1:1)*E(ao[2]);($t>Qa||$t===Qa&&(Lo[0]||Lo[1]))&&(An+=Mi^mi>=0?1:-1)}}return(xn<-a||xn<a&&kr<-a)^An&1}function $r(xt,Ft,sr,$t){return function(Ir){var un=Ft(Ir),xn=nn(),An=Ft(xn),Ln=!1,Yn,bn,On,Rn={point:Zn,lineStart:Ua,lineEnd:Da,polygonStart:function(){Rn.point=Va,Rn.lineStart=Ha,Rn.lineEnd=ea,bn=[],Yn=[]},polygonEnd:function(){Rn.point=Zn,Rn.lineStart=Ua,Rn.lineEnd=Da,bn=o.merge(bn);var xa=cn(Yn,$t);bn.length?(Ln||(Ir.polygonStart(),Ln=!0),gn(bn,Ot,xa,sr,Ir)):xa&&(Ln||(Ir.polygonStart(),Ln=!0),Ir.lineStart(),sr(null,null,1,Ir),Ir.lineEnd()),Ln&&(Ir.polygonEnd(),Ln=!1),bn=Yn=null},sphere:function(){Ir.polygonStart(),Ir.lineStart(),sr(null,null,1,Ir),Ir.lineEnd(),Ir.polygonEnd()}};function Zn(xa,Xa){xt(xa,Xa)&&Ir.point(xa,Xa)}function ra(xa,Xa){un.point(xa,Xa)}function Ua(){Rn.point=ra,un.lineStart()}function Da(){Rn.point=Zn,un.lineEnd()}function Va(xa,Xa){On.push([xa,Xa]),An.point(xa,Xa)}function Ha(){An.lineStart(),On=[]}function ea(){Va(On[0][0],On[0][1]),An.lineEnd();var xa=An.clean(),Xa=xn.result(),qa,mi=Xa.length,yi,bi,Mi;if(On.pop(),Yn.push(On),On=null,!!mi){if(xa&1){if(bi=Xa[0],(yi=bi.length-1)>0){for(Ln||(Ir.polygonStart(),Ln=!0),Ir.lineStart(),qa=0;qa<yi;++qa)Ir.point((Mi=bi[qa])[0],Mi[1]);Ir.lineEnd()}return}mi>1&&xa&2&&Xa.push(Xa.pop().concat(Xa.shift())),bn.push(Xa.filter(at))}}return Rn}}function at(xt){return xt.length>1}function Ot(xt,Ft){return((xt=xt.x)[0]<0?xt[1]-f-a:f-xt[1])-((Ft=Ft.x)[0]<0?Ft[1]-f-a:f-Ft[1])}var nr=$r(function(){return!0},dr,Lr,[-r,-f]);function dr(xt){var Ft=NaN,sr=NaN,$t=NaN,Ir;return{lineStart:function(){xt.lineStart(),Ir=1},point:function(un,xn){var An=un>0?r:-r,Ln=y(un-Ft);y(Ln-r)<a?(xt.point(Ft,sr=(sr+xn)/2>0?f:-f),xt.point($t,sr),xt.lineEnd(),xt.lineStart(),xt.point(An,sr),xt.point(un,sr),Ir=0):$t!==An&&Ln>=r&&(y(Ft-$t)<a&&(Ft-=$t*a),y(un-An)<a&&(un-=An*a),sr=Zr(Ft,sr,un,xn),xt.point($t,sr),xt.lineEnd(),xt.lineStart(),xt.point(An,sr),Ir=0),xt.point(Ft=un,sr=xn),$t=An},lineEnd:function(){xt.lineEnd(),Ft=sr=NaN},clean:function(){return 2-Ir}}}function Zr(xt,Ft,sr,$t){var Ir,un,xn=T(xt-sr);return y(xn)>a?m((T(Ft)*(un=x($t))*T(sr)-T($t)*(Ir=x(Ft))*T(xt))/(Ir*un*xn)):(Ft+$t)/2}function Lr(xt,Ft,sr,$t){var Ir;if(xt==null)Ir=sr*f,$t.point(-r,Ir),$t.point(0,Ir),$t.point(r,Ir),$t.point(r,0),$t.point(r,-Ir),$t.point(0,-Ir),$t.point(-r,-Ir),$t.point(-r,0),$t.point(-r,Ir);else if(y(xt[0]-Ft[0])>a){var un=xt[0]<Ft[0]?r:-r;Ir=sr*un/2,$t.point(-un,Ir),$t.point(0,Ir),$t.point(un,Ir)}else $t.point(Ft[0],Ft[1])}function Ur(xt){var Ft=x(xt),sr=6*d,$t=Ft>0,Ir=y(Ft)>a;function un(bn,On,Rn,Zn){Mr(Zn,xt,sr,Rn,bn,On)}function xn(bn,On){return x(bn)*x(On)>Ft}function An(bn){var On,Rn,Zn,ra,Ua;return{lineStart:function(){ra=Zn=!1,Ua=1},point:function(Da,Va){var Ha=[Da,Va],ea,xa=xn(Da,Va),Xa=$t?xa?0:Yn(Da,Va):xa?Yn(Da+(Da<0?r:-r),Va):0;if(!On&&(ra=Zn=xa)&&bn.lineStart(),xa!==Zn&&(ea=Ln(On,Ha),(!ea||Sr(On,ea)||Sr(Ha,ea))&&(Ha[2]=1)),xa!==Zn)Ua=0,xa?(bn.lineStart(),ea=Ln(Ha,On),bn.point(ea[0],ea[1])):(ea=Ln(On,Ha),bn.point(ea[0],ea[1],2),bn.lineEnd()),On=ea;else if(Ir&&On&&$t^xa){var qa;!(Xa&Rn)&&(qa=Ln(Ha,On,!0))&&(Ua=0,$t?(bn.lineStart(),bn.point(qa[0][0],qa[0][1]),bn.point(qa[1][0],qa[1][1]),bn.lineEnd()):(bn.point(qa[1][0],qa[1][1]),bn.lineEnd(),bn.lineStart(),bn.point(qa[0][0],qa[0][1],3)))}xa&&(!On||!Sr(On,Ha))&&bn.point(Ha[0],Ha[1]),On=Ha,Zn=xa,Rn=Xa},lineEnd:function(){Zn&&bn.lineEnd(),On=null},clean:function(){return Ua|(ra&&Zn)<<1}}}function Ln(bn,On,Rn){var Zn=ae(bn),ra=ae(On),Ua=[1,0,0],Da=oe(Zn,ra),Va=ie(Da,Da),Ha=Da[0],ea=Va-Ha*Ha;if(!ea)return!Rn&&bn;var xa=Ft*Va/ea,Xa=-Ft*Ha/ea,qa=oe(Ua,Da),mi=ye(Ua,xa),yi=ye(Da,Xa);fe(mi,yi);var bi=qa,Mi=ie(mi,bi),li=ie(bi,bi),Lo=Mi*Mi-li*(ie(mi,mi)-1);if(!(Lo<0)){var ao=v(Lo),Qa=ye(bi,(-Mi-ao)/li);if(fe(Qa,mi),Qa=Q(Qa),!Rn)return Qa;var _a=bn[0],_i=On[0],mo=bn[1],Mo=On[1],Ss;_i<_a&&(Ss=_a,_a=_i,_i=Ss);var Ks=_i-_a,Jo=y(Ks-r)<a,Ll=Jo||Ks<a;if(!Jo&&Mo<mo&&(Ss=mo,mo=Mo,Mo=Ss),Ll?Jo?mo+Mo>0^Qa[1]<(y(Qa[0]-_a)<a?mo:Mo):mo<=Qa[1]&&Qa[1]<=Mo:Ks>r^(_a<=Qa[0]&&Qa[0]<=_i)){var zs=ye(bi,(-Mi+ao)/li);return fe(zs,mi),[Qa,Q(zs)]}}}function Yn(bn,On){var Rn=$t?xt:r-xt,Zn=0;return bn<-Rn?Zn|=1:bn>Rn&&(Zn|=2),On<-Rn?Zn|=4:On>Rn&&(Zn|=8),Zn}return $r(xn,An,un,$t?[0,-xt]:[-r,xt-r])}function xr(xt,Ft,sr,$t,Ir,un){var xn=xt[0],An=xt[1],Ln=Ft[0],Yn=Ft[1],bn=0,On=1,Rn=Ln-xn,Zn=Yn-An,ra;if(ra=sr-xn,!(!Rn&&ra>0)){if(ra/=Rn,Rn<0){if(ra<bn)return;ra<On&&(On=ra)}else if(Rn>0){if(ra>On)return;ra>bn&&(bn=ra)}if(ra=Ir-xn,!(!Rn&&ra<0)){if(ra/=Rn,Rn<0){if(ra>On)return;ra>bn&&(bn=ra)}else if(Rn>0){if(ra<bn)return;ra<On&&(On=ra)}if(ra=$t-An,!(!Zn&&ra>0)){if(ra/=Zn,Zn<0){if(ra<bn)return;ra<On&&(On=ra)}else if(Zn>0){if(ra>On)return;ra>bn&&(bn=ra)}if(ra=un-An,!(!Zn&&ra<0)){if(ra/=Zn,Zn<0){if(ra>On)return;ra>bn&&(bn=ra)}else if(Zn>0){if(ra<bn)return;ra<On&&(On=ra)}return bn>0&&(xt[0]=xn+bn*Rn,xt[1]=An+bn*Zn),On<1&&(Ft[0]=xn+On*Rn,Ft[1]=An+On*Zn),!0}}}}}var on=1e9,Pn=-on;function En(xt,Ft,sr,$t){function Ir(Yn,bn){return xt<=Yn&&Yn<=sr&&Ft<=bn&&bn<=$t}function un(Yn,bn,On,Rn){var Zn=0,ra=0;if(Yn==null||(Zn=xn(Yn,On))!==(ra=xn(bn,On))||Ln(Yn,bn)<0^On>0)do Rn.point(Zn===0||Zn===3?xt:sr,Zn>1?$t:Ft);while((Zn=(Zn+On+4)%4)!==ra);else Rn.point(bn[0],bn[1])}function xn(Yn,bn){return y(Yn[0]-xt)<a?bn>0?0:3:y(Yn[0]-sr)<a?bn>0?2:1:y(Yn[1]-Ft)<a?bn>0?1:0:bn>0?3:2}function An(Yn,bn){return Ln(Yn.x,bn.x)}function Ln(Yn,bn){var On=xn(Yn,1),Rn=xn(bn,1);return On!==Rn?On-Rn:On===0?bn[1]-Yn[1]:On===1?Yn[0]-bn[0]:On===2?Yn[1]-bn[1]:bn[0]-Yn[0]}return function(Yn){var bn=Yn,On=nn(),Rn,Zn,ra,Ua,Da,Va,Ha,ea,xa,Xa,qa,mi={point:yi,lineStart:Lo,lineEnd:ao,polygonStart:Mi,polygonEnd:li};function yi(_a,_i){Ir(_a,_i)&&bn.point(_a,_i)}function bi(){for(var _a=0,_i=0,mo=Zn.length;_i<mo;++_i)for(var Mo=Zn[_i],Ss=1,Ks=Mo.length,Jo=Mo[0],Ll,zs,Ms=Jo[0],Po=Jo[1];Ss<Ks;++Ss)Ll=Ms,zs=Po,Jo=Mo[Ss],Ms=Jo[0],Po=Jo[1],zs<=$t?Po>$t&&(Ms-Ll)*($t-zs)>(Po-zs)*(xt-Ll)&&++_a:Po<=$t&&(Ms-Ll)*($t-zs)<(Po-zs)*(xt-Ll)&&--_a;return _a}function Mi(){bn=On,Rn=[],Zn=[],qa=!0}function li(){var _a=bi(),_i=qa&&_a,mo=(Rn=o.merge(Rn)).length;(_i||mo)&&(Yn.polygonStart(),_i&&(Yn.lineStart(),un(null,null,1,Yn),Yn.lineEnd()),mo&&gn(Rn,An,_a,un,Yn),Yn.polygonEnd()),bn=Yn,Rn=Zn=ra=null}function Lo(){mi.point=Qa,Zn&&Zn.push(ra=[]),Xa=!0,xa=!1,Ha=ea=NaN}function ao(){Rn&&(Qa(Ua,Da),Va&&xa&&On.rejoin(),Rn.push(On.result())),mi.point=yi,xa&&bn.lineEnd()}function Qa(_a,_i){var mo=Ir(_a,_i);if(Zn&&ra.push([_a,_i]),Xa)Ua=_a,Da=_i,Va=mo,Xa=!1,mo&&(bn.lineStart(),bn.point(_a,_i));else if(mo&&xa)bn.point(_a,_i);else{var Mo=[Ha=Math.max(Pn,Math.min(on,Ha)),ea=Math.max(Pn,Math.min(on,ea))],Ss=[_a=Math.max(Pn,Math.min(on,_a)),_i=Math.max(Pn,Math.min(on,_i))];xr(Mo,Ss,xt,Ft,sr,$t)?(xa||(bn.lineStart(),bn.point(Mo[0],Mo[1])),bn.point(Ss[0],Ss[1]),mo||bn.lineEnd(),qa=!1):mo&&(bn.lineStart(),bn.point(_a,_i),qa=!1)}Ha=_a,ea=_i,xa=mo}return mi}}function $n(){var xt=0,Ft=0,sr=960,$t=500,Ir,un,xn;return xn={stream:function(An){return Ir&&un===An?Ir:Ir=En(xt,Ft,sr,$t)(un=An)},extent:function(An){return arguments.length?(xt=+An[0][0],Ft=+An[0][1],sr=+An[1][0],$t=+An[1][1],Ir=un=null,xn):[[xt,Ft],[sr,$t]]}}}var aa=c(),Ca,ba,vr,yn={sphere:N,point:N,lineStart:en,lineEnd:N,polygonStart:N,polygonEnd:N};function en(){yn.point=Bn,yn.lineEnd=In}function In(){yn.point=yn.lineEnd=N}function Bn(xt,Ft){xt*=d,Ft*=d,Ca=xt,ba=T(Ft),vr=x(Ft),yn.point=ha}function ha(xt,Ft){xt*=d,Ft*=d;var sr=T(Ft),$t=x(Ft),Ir=y(xt-Ca),un=x(Ir),xn=T(Ir),An=$t*xn,Ln=vr*sr-ba*$t*un,Yn=ba*sr+vr*$t*un;aa.add(g(v(An*An+Ln*Ln),Yn)),Ca=xt,ba=sr,vr=$t}function qn(xt){return aa.reset(),j(xt,yn),+aa}var Hn=[null,null],la={type:"LineString",coordinates:Hn};function da(xt,Ft){return Hn[0]=xt,Hn[1]=Ft,qn(la)}var hr={Feature:function(xt,Ft){return ln(xt.geometry,Ft)},FeatureCollection:function(xt,Ft){for(var sr=xt.features,$t=-1,Ir=sr.length;++$t<Ir;)if(ln(sr[$t].geometry,Ft))return!0;return!1}},zr={Sphere:function(){return!0},Point:function(xt,Ft){return Rt(xt.coordinates,Ft)},MultiPoint:function(xt,Ft){for(var sr=xt.coordinates,$t=-1,Ir=sr.length;++$t<Ir;)if(Rt(sr[$t],Ft))return!0;return!1},LineString:function(xt,Ft){return qt(xt.coordinates,Ft)},MultiLineString:function(xt,Ft){for(var sr=xt.coordinates,$t=-1,Ir=sr.length;++$t<Ir;)if(qt(sr[$t],Ft))return!0;return!1},Polygon:function(xt,Ft){return br(xt.coordinates,Ft)},MultiPolygon:function(xt,Ft){for(var sr=xt.coordinates,$t=-1,Ir=sr.length;++$t<Ir;)if(br(sr[$t],Ft))return!0;return!1},GeometryCollection:function(xt,Ft){for(var sr=xt.geometries,$t=-1,Ir=sr.length;++$t<Ir;)if(ln(sr[$t],Ft))return!0;return!1}};function ln(xt,Ft){return xt&&zr.hasOwnProperty(xt.type)?zr[xt.type](xt,Ft):!1}function Rt(xt,Ft){return da(xt,Ft)===0}function qt(xt,Ft){for(var sr,$t,Ir,un=0,xn=xt.length;un<xn;un++){if($t=da(xt[un],Ft),$t===0||un>0&&(Ir=da(xt[un],xt[un-1]),Ir>0&&sr<=Ir&&$t<=Ir&&(sr+$t-Ir)*(1-Math.pow((sr-$t)/Ir,2))<i*Ir))return!0;sr=$t}return!1}function br(xt,Ft){return!!cn(xt.map(Hr),ar(Ft))}function Hr(xt){return xt=xt.map(ar),xt.pop(),xt}function ar(xt){return[xt[0]*d,xt[1]*d]}function Qt(xt,Ft){return(xt&&hr.hasOwnProperty(xt.type)?hr[xt.type]:ln)(xt,Ft)}function Pr(xt,Ft,sr){var $t=o.range(xt,Ft-a,sr).concat(Ft);return function(Ir){return $t.map(function(un){return[Ir,un]})}}function Nr(xt,Ft,sr){var $t=o.range(xt,Ft-a,sr).concat(Ft);return function(Ir){return $t.map(function(un){return[un,Ir]})}}function Tn(){var xt,Ft,sr,$t,Ir,un,xn,An,Ln=10,Yn=Ln,bn=90,On=360,Rn,Zn,ra,Ua,Da=2.5;function Va(){return{type:"MultiLineString",coordinates:Ha()}}function Ha(){return o.range(A($t/bn)*bn,sr,bn).map(ra).concat(o.range(A(An/On)*On,xn,On).map(Ua)).concat(o.range(A(Ft/Ln)*Ln,xt,Ln).filter(function(ea){return y(ea%bn)>a}).map(Rn)).concat(o.range(A(un/Yn)*Yn,Ir,Yn).filter(function(ea){return y(ea%On)>a}).map(Zn))}return Va.lines=function(){return Ha().map(function(ea){return{type:"LineString",coordinates:ea}})},Va.outline=function(){return{type:"Polygon",coordinates:[ra($t).concat(Ua(xn).slice(1),ra(sr).reverse().slice(1),Ua(An).reverse().slice(1))]}},Va.extent=function(ea){return arguments.length?Va.extentMajor(ea).extentMinor(ea):Va.extentMinor()},Va.extentMajor=function(ea){return arguments.length?($t=+ea[0][0],sr=+ea[1][0],An=+ea[0][1],xn=+ea[1][1],$t>sr&&(ea=$t,$t=sr,sr=ea),An>xn&&(ea=An,An=xn,xn=ea),Va.precision(Da)):[[$t,An],[sr,xn]]},Va.extentMinor=function(ea){return arguments.length?(Ft=+ea[0][0],xt=+ea[1][0],un=+ea[0][1],Ir=+ea[1][1],Ft>xt&&(ea=Ft,Ft=xt,xt=ea),un>Ir&&(ea=un,un=Ir,Ir=ea),Va.precision(Da)):[[Ft,un],[xt,Ir]]},Va.step=function(ea){return arguments.length?Va.stepMajor(ea).stepMinor(ea):Va.stepMinor()},Va.stepMajor=function(ea){return arguments.length?(bn=+ea[0],On=+ea[1],Va):[bn,On]},Va.stepMinor=function(ea){return arguments.length?(Ln=+ea[0],Yn=+ea[1],Va):[Ln,Yn]},Va.precision=function(ea){return arguments.length?(Da=+ea,Rn=Pr(un,Ir,90),Zn=Nr(Ft,xt,Da),ra=Pr(An,xn,90),Ua=Nr($t,sr,Da),Va):Da},Va.extentMajor([[-180,-90+a],[180,90-a]]).extentMinor([[-180,-80-a],[180,80+a]])}function Nn(){return Tn()()}function Gn(xt,Ft){var sr=xt[0]*d,$t=xt[1]*d,Ir=Ft[0]*d,un=Ft[1]*d,xn=x($t),An=T($t),Ln=x(un),Yn=T(un),bn=xn*x(sr),On=xn*T(sr),Rn=Ln*x(Ir),Zn=Ln*T(Ir),ra=2*E(v(D(un-$t)+xn*Ln*D(Ir-sr))),Ua=T(ra),Da=ra?function(Va){var Ha=T(Va*=ra)/Ua,ea=T(ra-Va)/Ua,xa=ea*bn+Ha*Rn,Xa=ea*On+Ha*Zn,qa=ea*An+Ha*Yn;return[g(Xa,xa)*h,g(qa,v(xa*xa+Xa*Xa))*h]}:function(){return[sr*h,$t*h]};return Da.distance=ra,Da}function Wn(xt){return xt}var Un=c(),mn=c(),Fn,Xn,ca,ja,Pa={point:N,lineStart:N,lineEnd:N,polygonStart:function(){Pa.lineStart=_l,Pa.lineEnd=Gs},polygonEnd:function(){Pa.lineStart=Pa.lineEnd=Pa.point=N,Un.add(y(mn)),mn.reset()},result:function(){var xt=Un/2;return Un.reset(),xt}};function _l(){Pa.point=Ko}function Ko(xt,Ft){Pa.point=cs,Fn=ca=xt,Xn=ja=Ft}function cs(xt,Ft){mn.add(ja*xt-ca*Ft),ca=xt,ja=Ft}function Gs(){cs(Fn,Xn)}var no=1/0,Fi=no,ol=-no,sl=ol,hs={point:Bl,lineStart:N,lineEnd:N,polygonStart:N,polygonEnd:N,result:function(){var xt=[[no,Fi],[ol,sl]];return ol=sl=-(Fi=no=1/0),xt}};function Bl(xt,Ft){xt<no&&(no=xt),xt>ol&&(ol=xt),Ft<Fi&&(Fi=Ft),Ft>sl&&(sl=Ft)}var Ql=0,Ou=0,di=0,wl=0,ll=0,Wi=0,Bo=0,ql=0,Rs=0,zi,Nl,qi,Ui,co={point:eo,lineStart:xs,lineEnd:vs,polygonStart:function(){co.lineStart=ef,co.lineEnd=ul},polygonEnd:function(){co.point=eo,co.lineStart=xs,co.lineEnd=vs},result:function(){var xt=Rs?[Bo/Rs,ql/Rs]:Wi?[wl/Wi,ll/Wi]:di?[Ql/di,Ou/di]:[NaN,NaN];return Ql=Ou=di=wl=ll=Wi=Bo=ql=Rs=0,xt}};function eo(xt,Ft){Ql+=xt,Ou+=Ft,++di}function xs(){co.point=Tl}function Tl(xt,Ft){co.point=qu,eo(qi=xt,Ui=Ft)}function qu(xt,Ft){var sr=xt-qi,$t=Ft-Ui,Ir=v(sr*sr+$t*$t);wl+=Ir*(qi+xt)/2,ll+=Ir*(Ui+Ft)/2,Wi+=Ir,eo(qi=xt,Ui=Ft)}function vs(){co.point=eo}function ef(){co.point=No}function ul(){kf(zi,Nl)}function No(xt,Ft){co.point=kf,eo(zi=qi=xt,Nl=Ui=Ft)}function kf(xt,Ft){var sr=xt-qi,$t=Ft-Ui,Ir=v(sr*sr+$t*$t);wl+=Ir*(qi+xt)/2,ll+=Ir*(Ui+Ft)/2,Wi+=Ir,Ir=Ui*xt-qi*Ft,Bo+=Ir*(qi+xt),ql+=Ir*(Ui+Ft),Rs+=Ir*3,eo(qi=xt,Ui=Ft)}function fl(xt){this._context=xt}fl.prototype={_radius:4.5,pointRadius:function(xt){return this._radius=xt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(xt,Ft){switch(this._point){case 0:{this._context.moveTo(xt,Ft),this._point=1;break}case 1:{this._context.lineTo(xt,Ft);break}default:{this._context.moveTo(xt+this._radius,Ft),this._context.arc(xt,Ft,this._radius,0,s);break}}},result:N};var Ws=c(),mu,Cf,Ef,Al,yu,Ys={point:N,lineStart:function(){Ys.point=Bu},lineEnd:function(){mu&&Ul(Cf,Ef),Ys.point=N},polygonStart:function(){mu=!0},polygonEnd:function(){mu=null},result:function(){var xt=+Ws;return Ws.reset(),xt}};function Bu(xt,Ft){Ys.point=Ul,Cf=Al=xt,Ef=yu=Ft}function Ul(xt,Ft){Al-=xt,yu-=Ft,Ws.add(v(Al*Al+yu*yu)),Al=xt,yu=Ft}function Nu(){this._string=[]}Nu.prototype={_radius:4.5,_circle:tf(4.5),pointRadius:function(xt){return(xt=+xt)!==this._radius&&(this._radius=xt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(xt,Ft){switch(this._point){case 0:{this._string.push("M",xt,",",Ft),this._point=1;break}case 1:{this._string.push("L",xt,",",Ft);break}default:{this._circle==null&&(this._circle=tf(this._radius)),this._string.push("M",xt,",",Ft,this._circle);break}}},result:function(){if(this._string.length){var xt=this._string.join("");return this._string=[],xt}else return null}};function tf(xt){return"m0,"+xt+"a"+xt+","+xt+" 0 1,1 0,"+-2*xt+"a"+xt+","+xt+" 0 1,1 0,"+2*xt+"z"}function xu(xt,Ft){var sr=4.5,$t,Ir;function un(xn){return xn&&(typeof sr=="function"&&Ir.pointRadius(+sr.apply(this,arguments)),j(xn,$t(Ir))),Ir.result()}return un.area=function(xn){return j(xn,$t(Pa)),Pa.result()},un.measure=function(xn){return j(xn,$t(Ys)),Ys.result()},un.bounds=function(xn){return j(xn,$t(hs)),hs.result()},un.centroid=function(xn){return j(xn,$t(co)),co.result()},un.projection=function(xn){return arguments.length?($t=xn==null?(xt=null,Wn):(xt=xn).stream,un):xt},un.context=function(xn){return arguments.length?(Ir=xn==null?(Ft=null,new Nu):new fl(Ft=xn),typeof sr!="function"&&Ir.pointRadius(sr),un):Ft},un.pointRadius=function(xn){return arguments.length?(sr=typeof xn=="function"?xn:(Ir.pointRadius(+xn),+xn),un):sr},un.projection(xt).context(Ft)}function Lf(xt){return{stream:Sl(xt)}}function Sl(xt){return function(Ft){var sr=new Uu;for(var $t in xt)sr[$t]=xt[$t];return sr.stream=Ft,sr}}function Uu(){}Uu.prototype={constructor:Uu,point:function(xt,Ft){this.stream.point(xt,Ft)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function bu(xt,Ft,sr){var $t=xt.clipExtent&&xt.clipExtent();return xt.scale(150).translate([0,0]),$t!=null&&xt.clipExtent(null),j(sr,xt.stream(hs)),Ft(hs.result()),$t!=null&&xt.clipExtent($t),xt}function Ds(xt,Ft,sr){return bu(xt,function($t){var Ir=Ft[1][0]-Ft[0][0],un=Ft[1][1]-Ft[0][1],xn=Math.min(Ir/($t[1][0]-$t[0][0]),un/($t[1][1]-$t[0][1])),An=+Ft[0][0]+(Ir-xn*($t[1][0]+$t[0][0]))/2,Ln=+Ft[0][1]+(un-xn*($t[1][1]+$t[0][1]))/2;xt.scale(150*xn).translate([An,Ln])},sr)}function eu(xt,Ft,sr){return Ds(xt,[[0,0],Ft],sr)}function Vu(xt,Ft,sr){return bu(xt,function($t){var Ir=+Ft,un=Ir/($t[1][0]-$t[0][0]),xn=(Ir-un*($t[1][0]+$t[0][0]))/2,An=-un*$t[0][1];xt.scale(150*un).translate([xn,An])},sr)}function rf(xt,Ft,sr){return bu(xt,function($t){var Ir=+Ft,un=Ir/($t[1][1]-$t[0][1]),xn=-un*$t[0][0],An=(Ir-un*($t[1][1]+$t[0][1]))/2;xt.scale(150*un).translate([xn,An])},sr)}var nf=16,_u=x(30*d);function Pf(xt,Ft){return+Ft?ps(xt,Ft):af(xt)}function af(xt){return Sl({point:function(Ft,sr){Ft=xt(Ft,sr),this.stream.point(Ft[0],Ft[1])}})}function ps(xt,Ft){function sr($t,Ir,un,xn,An,Ln,Yn,bn,On,Rn,Zn,ra,Ua,Da){var Va=Yn-$t,Ha=bn-Ir,ea=Va*Va+Ha*Ha;if(ea>4*Ft&&Ua--){var xa=xn+Rn,Xa=An+Zn,qa=Ln+ra,mi=v(xa*xa+Xa*Xa+qa*qa),yi=E(qa/=mi),bi=y(y(qa)-1)<a||y(un-On)<a?(un+On)/2:g(Xa,xa),Mi=xt(bi,yi),li=Mi[0],Lo=Mi[1],ao=li-$t,Qa=Lo-Ir,_a=Ha*ao-Va*Qa;(_a*_a/ea>Ft||y((Va*ao+Ha*Qa)/ea-.5)>.3||xn*Rn+An*Zn+Ln*ra<_u)&&(sr($t,Ir,un,xn,An,Ln,li,Lo,bi,xa/=mi,Xa/=mi,qa,Ua,Da),Da.point(li,Lo),sr(li,Lo,bi,xa,Xa,qa,Yn,bn,On,Rn,Zn,ra,Ua,Da))}}return function($t){var Ir,un,xn,An,Ln,Yn,bn,On,Rn,Zn,ra,Ua,Da={point:Va,lineStart:Ha,lineEnd:xa,polygonStart:function(){$t.polygonStart(),Da.lineStart=Xa},polygonEnd:function(){$t.polygonEnd(),Da.lineStart=Ha}};function Va(yi,bi){yi=xt(yi,bi),$t.point(yi[0],yi[1])}function Ha(){On=NaN,Da.point=ea,$t.lineStart()}function ea(yi,bi){var Mi=ae([yi,bi]),li=xt(yi,bi);sr(On,Rn,bn,Zn,ra,Ua,On=li[0],Rn=li[1],bn=yi,Zn=Mi[0],ra=Mi[1],Ua=Mi[2],nf,$t),$t.point(On,Rn)}function xa(){Da.point=Va,$t.lineEnd()}function Xa(){Ha(),Da.point=qa,Da.lineEnd=mi}function qa(yi,bi){ea(Ir=yi,bi),un=On,xn=Rn,An=Zn,Ln=ra,Yn=Ua,Da.point=ea}function mi(){sr(On,Rn,bn,Zn,ra,Ua,un,xn,Ir,An,Ln,Yn,nf,$t),Da.lineEnd=xa,xa()}return Da}}var Vl=Sl({point:function(xt,Ft){this.stream.point(xt*d,Ft*d)}});function Hl(xt){return Sl({point:function(Ft,sr){var $t=xt(Ft,sr);return this.stream.point($t[0],$t[1])}})}function Hu(xt,Ft,sr,$t,Ir){function un(xn,An){return xn*=$t,An*=Ir,[Ft+xt*xn,sr-xt*An]}return un.invert=function(xn,An){return[(xn-Ft)/xt*$t,(sr-An)/xt*Ir]},un}function Is(xt,Ft,sr,$t,Ir,un){var xn=x(un),An=T(un),Ln=xn*xt,Yn=An*xt,bn=xn/xt,On=An/xt,Rn=(An*sr-xn*Ft)/xt,Zn=(An*Ft+xn*sr)/xt;function ra(Ua,Da){return Ua*=$t,Da*=Ir,[Ln*Ua-Yn*Da+Ft,sr-Yn*Ua-Ln*Da]}return ra.invert=function(Ua,Da){return[$t*(bn*Ua-On*Da+Rn),Ir*(Zn-On*Ua-bn*Da)]},ra}function Uo(xt){return wu(function(){return xt})()}function wu(xt){var Ft,sr=150,$t=480,Ir=250,un=0,xn=0,An=0,Ln=0,Yn=0,bn,On=0,Rn=1,Zn=1,ra=null,Ua=nr,Da=null,Va,Ha,ea,xa=Wn,Xa=.5,qa,mi,yi,bi,Mi;function li(_a){return yi(_a[0]*d,_a[1]*d)}function Lo(_a){return _a=yi.invert(_a[0],_a[1]),_a&&[_a[0]*h,_a[1]*h]}li.stream=function(_a){return bi&&Mi===_a?bi:bi=Vl(Hl(bn)(Ua(qa(xa(Mi=_a)))))},li.preclip=function(_a){return arguments.length?(Ua=_a,ra=void 0,Qa()):Ua},li.postclip=function(_a){return arguments.length?(xa=_a,Da=Va=Ha=ea=null,Qa()):xa},li.clipAngle=function(_a){return arguments.length?(Ua=+_a?Ur(ra=_a*d):(ra=null,nr),Qa()):ra*h},li.clipExtent=function(_a){return arguments.length?(xa=_a==null?(Da=Va=Ha=ea=null,Wn):En(Da=+_a[0][0],Va=+_a[0][1],Ha=+_a[1][0],ea=+_a[1][1]),Qa()):Da==null?null:[[Da,Va],[Ha,ea]]},li.scale=function(_a){return arguments.length?(sr=+_a,ao()):sr},li.translate=function(_a){return arguments.length?($t=+_a[0],Ir=+_a[1],ao()):[$t,Ir]},li.center=function(_a){return arguments.length?(un=_a[0]%360*d,xn=_a[1]%360*d,ao()):[un*h,xn*h]},li.rotate=function(_a){return arguments.length?(An=_a[0]%360*d,Ln=_a[1]%360*d,Yn=_a.length>2?_a[2]%360*d:0,ao()):[An*h,Ln*h,Yn*h]},li.angle=function(_a){return arguments.length?(On=_a%360*d,ao()):On*h},li.reflectX=function(_a){return arguments.length?(Rn=_a?-1:1,ao()):Rn<0},li.reflectY=function(_a){return arguments.length?(Zn=_a?-1:1,ao()):Zn<0},li.precision=function(_a){return arguments.length?(qa=Pf(mi,Xa=_a*_a),Qa()):v(Xa)},li.fitExtent=function(_a,_i){return Ds(li,_a,_i)},li.fitSize=function(_a,_i){return eu(li,_a,_i)},li.fitWidth=function(_a,_i){return Vu(li,_a,_i)},li.fitHeight=function(_a,_i){return rf(li,_a,_i)};function ao(){var _a=Is(sr,0,0,Rn,Zn,On).apply(null,Ft(un,xn)),_i=(On?Is:Hu)(sr,$t-_a[0],Ir-_a[1],Rn,Zn,On);return bn=pt(An,Ln,Yn),mi=ot(Ft,_i),yi=ot(bn,mi),qa=Pf(mi,Xa),Qa()}function Qa(){return bi=Mi=null,li}return function(){return Ft=xt.apply(this,arguments),li.invert=Ft.invert&&Lo,ao()}}function js(xt){var Ft=0,sr=r/3,$t=wu(xt),Ir=$t(Ft,sr);return Ir.parallels=function(un){return arguments.length?$t(Ft=un[0]*d,sr=un[1]*d):[Ft*h,sr*h]},Ir}function Xs(xt){var Ft=x(xt);function sr($t,Ir){return[$t*Ft,T(Ir)/Ft]}return sr.invert=function($t,Ir){return[$t/Ft,E(Ir*Ft)]},sr}function po(xt,Ft){var sr=T(xt),$t=(sr+T(Ft))/2;if(y($t)<a)return Xs(xt);var Ir=1+sr*(2*$t-sr),un=v(Ir)/$t;function xn(An,Ln){var Yn=v(Ir-2*$t*T(Ln))/$t;return[Yn*T(An*=$t),un-Yn*x(An)]}return xn.invert=function(An,Ln){var Yn=un-Ln,bn=g(An,y(Yn))*_(Yn);return Yn*$t<0&&(bn-=r*_(An)*_(Yn)),[bn/$t,E((Ir-(An*An+Yn*Yn)*$t*$t)/(2*$t))]},xn}function tu(){return js(po).scale(155.424).center([0,33.6442])}function ru(){return tu().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Ml(xt){var Ft=xt.length;return{point:function(sr,$t){for(var Ir=-1;++Ir<Ft;)xt[Ir].point(sr,$t)},sphere:function(){for(var sr=-1;++sr<Ft;)xt[sr].sphere()},lineStart:function(){for(var sr=-1;++sr<Ft;)xt[sr].lineStart()},lineEnd:function(){for(var sr=-1;++sr<Ft;)xt[sr].lineEnd()},polygonStart:function(){for(var sr=-1;++sr<Ft;)xt[sr].polygonStart()},polygonEnd:function(){for(var sr=-1;++sr<Ft;)xt[sr].polygonEnd()}}}function Fs(){var xt,Ft,sr=ru(),$t,Ir=tu().rotate([154,0]).center([-2,58.5]).parallels([55,65]),un,xn=tu().rotate([157,0]).center([-3,19.9]).parallels([8,18]),An,Ln,Yn={point:function(Rn,Zn){Ln=[Rn,Zn]}};function bn(Rn){var Zn=Rn[0],ra=Rn[1];return Ln=null,$t.point(Zn,ra),Ln||(un.point(Zn,ra),Ln)||(An.point(Zn,ra),Ln)}bn.invert=function(Rn){var Zn=sr.scale(),ra=sr.translate(),Ua=(Rn[0]-ra[0])/Zn,Da=(Rn[1]-ra[1])/Zn;return(Da>=.12&&Da<.234&&Ua>=-.425&&Ua<-.214?Ir:Da>=.166&&Da<.234&&Ua>=-.214&&Ua<-.115?xn:sr).invert(Rn)},bn.stream=function(Rn){return xt&&Ft===Rn?xt:xt=Ml([sr.stream(Ft=Rn),Ir.stream(Rn),xn.stream(Rn)])},bn.precision=function(Rn){return arguments.length?(sr.precision(Rn),Ir.precision(Rn),xn.precision(Rn),On()):sr.precision()},bn.scale=function(Rn){return arguments.length?(sr.scale(Rn),Ir.scale(Rn*.35),xn.scale(Rn),bn.translate(sr.translate())):sr.scale()},bn.translate=function(Rn){if(!arguments.length)return sr.translate();var Zn=sr.scale(),ra=+Rn[0],Ua=+Rn[1];return $t=sr.translate(Rn).clipExtent([[ra-.455*Zn,Ua-.238*Zn],[ra+.455*Zn,Ua+.238*Zn]]).stream(Yn),un=Ir.translate([ra-.307*Zn,Ua+.201*Zn]).clipExtent([[ra-.425*Zn+a,Ua+.12*Zn+a],[ra-.214*Zn-a,Ua+.234*Zn-a]]).stream(Yn),An=xn.translate([ra-.205*Zn,Ua+.212*Zn]).clipExtent([[ra-.214*Zn+a,Ua+.166*Zn+a],[ra-.115*Zn-a,Ua+.234*Zn-a]]).stream(Yn),On()},bn.fitExtent=function(Rn,Zn){return Ds(bn,Rn,Zn)},bn.fitSize=function(Rn,Zn){return eu(bn,Rn,Zn)},bn.fitWidth=function(Rn,Zn){return Vu(bn,Rn,Zn)},bn.fitHeight=function(Rn,Zn){return rf(bn,Rn,Zn)};function On(){return xt=Ft=null,bn}return bn.scale(1070)}function nu(xt){return function(Ft,sr){var $t=x(Ft),Ir=x(sr),un=xt($t*Ir);return[un*Ir*T(Ft),un*T(sr)]}}function Gl(xt){return function(Ft,sr){var $t=v(Ft*Ft+sr*sr),Ir=xt($t),un=T(Ir),xn=x(Ir);return[g(Ft*un,$t*xn),E($t&&sr*un/$t)]}}var Tu=nu(function(xt){return v(2/(1+xt))});Tu.invert=Gl(function(xt){return 2*E(xt/2)});function au(){return Uo(Tu).scale(124.75).clipAngle(180-.001)}var kl=nu(function(xt){return(xt=M(xt))&&xt/T(xt)});kl.invert=Gl(function(xt){return xt});function Rf(){return Uo(kl).scale(79.4188).clipAngle(180-.001)}function bs(xt,Ft){return[xt,S(P((f+Ft)/2))]}bs.invert=function(xt,Ft){return[xt,2*m(b(Ft))-f]};function ic(){return Gu(bs).scale(961/s)}function Gu(xt){var Ft=Uo(xt),sr=Ft.center,$t=Ft.scale,Ir=Ft.translate,un=Ft.clipExtent,xn=null,An,Ln,Yn;Ft.scale=function(On){return arguments.length?($t(On),bn()):$t()},Ft.translate=function(On){return arguments.length?(Ir(On),bn()):Ir()},Ft.center=function(On){return arguments.length?(sr(On),bn()):sr()},Ft.clipExtent=function(On){return arguments.length?(On==null?xn=An=Ln=Yn=null:(xn=+On[0][0],An=+On[0][1],Ln=+On[1][0],Yn=+On[1][1]),bn()):xn==null?null:[[xn,An],[Ln,Yn]]};function bn(){var On=r*$t(),Rn=Ft(Tr(Ft.rotate()).invert([0,0]));return un(xn==null?[[Rn[0]-On,Rn[1]-On],[Rn[0]+On,Rn[1]+On]]:xt===bs?[[Math.max(Rn[0]-On,xn),An],[Math.min(Rn[0]+On,Ln),Yn]]:[[xn,Math.max(Rn[1]-On,An)],[Ln,Math.min(Rn[1]+On,Yn)]])}return bn()}function Wl(xt){return P((f+xt)/2)}function iu(xt,Ft){var sr=x(xt),$t=xt===Ft?T(xt):S(sr/x(Ft))/S(Wl(Ft)/Wl(xt)),Ir=sr*w(Wl(xt),$t)/$t;if(!$t)return bs;function un(xn,An){Ir>0?An<-f+a&&(An=-f+a):An>f-a&&(An=f-a);var Ln=Ir/w(Wl(An),$t);return[Ln*T($t*xn),Ir-Ln*x($t*xn)]}return un.invert=function(xn,An){var Ln=Ir-An,Yn=_($t)*v(xn*xn+Ln*Ln),bn=g(xn,y(Ln))*_(Ln);return Ln*$t<0&&(bn-=r*_(xn)*_(Ln)),[bn/$t,2*m(w(Ir/Yn,1/$t))-f]},un}function Cl(){return js(iu).scale(109.5).parallels([30,30])}function ou(xt,Ft){return[xt,Ft]}ou.invert=ou;function of(){return Uo(ou).scale(152.63)}function sf(xt,Ft){var sr=x(xt),$t=xt===Ft?T(xt):(sr-x(Ft))/(Ft-xt),Ir=sr/$t+xt;if(y($t)<a)return ou;function un(xn,An){var Ln=Ir-An,Yn=$t*xn;return[Ln*T(Yn),Ir-Ln*x(Yn)]}return un.invert=function(xn,An){var Ln=Ir-An,Yn=g(xn,y(Ln))*_(Ln);return Ln*$t<0&&(Yn-=r*_(xn)*_(Ln)),[Yn/$t,Ir-_($t)*v(xn*xn+Ln*Ln)]},un}function oc(){return js(sf).scale(131.154).center([0,13.9389])}var Oi=1.340264,Yl=-.081106,El=893e-6,ds=.003796,_s=v(3)/2,su=12;function go(xt,Ft){var sr=E(_s*T(Ft)),$t=sr*sr,Ir=$t*$t*$t;return[xt*x(sr)/(_s*(Oi+3*Yl*$t+Ir*(7*El+9*ds*$t))),sr*(Oi+Yl*$t+Ir*(El+ds*$t))]}go.invert=function(xt,Ft){for(var sr=Ft,$t=sr*sr,Ir=$t*$t*$t,un=0,xn,An,Ln;un<su&&(An=sr*(Oi+Yl*$t+Ir*(El+ds*$t))-Ft,Ln=Oi+3*Yl*$t+Ir*(7*El+9*ds*$t),sr-=xn=An/Ln,$t=sr*sr,Ir=$t*$t*$t,!(y(xn)<i));++un);return[_s*xt*(Oi+3*Yl*$t+Ir*(7*El+9*ds*$t))/x(sr),E(T(sr)/_s)]};function lf(){return Uo(go).scale(177.158)}function ws(xt,Ft){var sr=x(Ft),$t=x(xt)*sr;return[sr*T(xt)/$t,T(Ft)/$t]}ws.invert=Gl(m);function cl(){return Uo(ws).scale(144.049).clipAngle(60)}function hl(){var xt=1,Ft=0,sr=0,$t=1,Ir=1,un=0,xn,An,Ln=null,Yn,bn,On,Rn=1,Zn=1,ra=Sl({point:function(xa,Xa){var qa=ea([xa,Xa]);this.stream.point(qa[0],qa[1])}}),Ua=Wn,Da,Va;function Ha(){return Rn=xt*$t,Zn=xt*Ir,Da=Va=null,ea}function ea(xa){var Xa=xa[0]*Rn,qa=xa[1]*Zn;if(un){var mi=qa*xn-Xa*An;Xa=Xa*xn+qa*An,qa=mi}return[Xa+Ft,qa+sr]}return ea.invert=function(xa){var Xa=xa[0]-Ft,qa=xa[1]-sr;if(un){var mi=qa*xn+Xa*An;Xa=Xa*xn-qa*An,qa=mi}return[Xa/Rn,qa/Zn]},ea.stream=function(xa){return Da&&Va===xa?Da:Da=ra(Ua(Va=xa))},ea.postclip=function(xa){return arguments.length?(Ua=xa,Ln=Yn=bn=On=null,Ha()):Ua},ea.clipExtent=function(xa){return arguments.length?(Ua=xa==null?(Ln=Yn=bn=On=null,Wn):En(Ln=+xa[0][0],Yn=+xa[0][1],bn=+xa[1][0],On=+xa[1][1]),Ha()):Ln==null?null:[[Ln,Yn],[bn,On]]},ea.scale=function(xa){return arguments.length?(xt=+xa,Ha()):xt},ea.translate=function(xa){return arguments.length?(Ft=+xa[0],sr=+xa[1],Ha()):[Ft,sr]},ea.angle=function(xa){return arguments.length?(un=xa%360*d,An=T(un),xn=x(un),Ha()):un*h},ea.reflectX=function(xa){return arguments.length?($t=xa?-1:1,Ha()):$t<0},ea.reflectY=function(xa){return arguments.length?(Ir=xa?-1:1,Ha()):Ir<0},ea.fitExtent=function(xa,Xa){return Ds(ea,xa,Xa)},ea.fitSize=function(xa,Xa){return eu(ea,xa,Xa)},ea.fitWidth=function(xa,Xa){return Vu(ea,xa,Xa)},ea.fitHeight=function(xa,Xa){return rf(ea,xa,Xa)},ea}function Zs(xt,Ft){var sr=Ft*Ft,$t=sr*sr;return[xt*(.8707-.131979*sr+$t*(-.013791+$t*(.003971*sr-.001529*$t))),Ft*(1.007226+sr*(.015085+$t*(-.044475+.028874*sr-.005916*$t)))]}Zs.invert=function(xt,Ft){var sr=Ft,$t=25,Ir;do{var un=sr*sr,xn=un*un;sr-=Ir=(sr*(1.007226+un*(.015085+xn*(-.044475+.028874*un-.005916*xn)))-Ft)/(1.007226+un*(.015085*3+xn*(-.044475*7+.028874*9*un-.005916*11*xn)))}while(y(Ir)>a&&--$t>0);return[xt/(.8707+(un=sr*sr)*(-.131979+un*(-.013791+un*un*un*(.003971-.001529*un)))),sr]};function Ts(){return Uo(Zs).scale(175.295)}function Yi(xt,Ft){return[x(Ft)*T(xt),T(Ft)]}Yi.invert=Gl(E);function Vo(){return Uo(Yi).scale(249.5).clipAngle(90+a)}function As(xt,Ft){var sr=x(Ft),$t=1+x(xt)*sr;return[sr*T(xt)/$t,T(Ft)/$t]}As.invert=Gl(function(xt){return 2*m(xt)});function uf(){return Uo(As).scale(250).clipAngle(142)}function Au(xt,Ft){return[S(P((f+Ft)/2)),-xt]}Au.invert=function(xt,Ft){return[-Ft,2*m(b(xt))-f]};function ff(){var xt=Gu(Au),Ft=xt.center,sr=xt.rotate;return xt.center=function($t){return arguments.length?Ft([-$t[1],$t[0]]):($t=Ft(),[$t[1],-$t[0]])},xt.rotate=function($t){return arguments.length?sr([$t[0],$t[1],$t.length>2?$t[2]+90:90]):($t=sr(),[$t[0],$t[1],$t[2]-90])},sr([0,0,90]).scale(159.155)}l.geoAlbers=ru,l.geoAlbersUsa=Fs,l.geoArea=K,l.geoAzimuthalEqualArea=au,l.geoAzimuthalEqualAreaRaw=Tu,l.geoAzimuthalEquidistant=Rf,l.geoAzimuthalEquidistantRaw=kl,l.geoBounds=it,l.geoCentroid=Ye,l.geoCircle=Or,l.geoClipAntimeridian=nr,l.geoClipCircle=Ur,l.geoClipExtent=$n,l.geoClipRectangle=En,l.geoConicConformal=Cl,l.geoConicConformalRaw=iu,l.geoConicEqualArea=tu,l.geoConicEqualAreaRaw=po,l.geoConicEquidistant=oc,l.geoConicEquidistantRaw=sf,l.geoContains=Qt,l.geoDistance=da,l.geoEqualEarth=lf,l.geoEqualEarthRaw=go,l.geoEquirectangular=of,l.geoEquirectangularRaw=ou,l.geoGnomonic=cl,l.geoGnomonicRaw=ws,l.geoGraticule=Tn,l.geoGraticule10=Nn,l.geoIdentity=hl,l.geoInterpolate=Gn,l.geoLength=qn,l.geoMercator=ic,l.geoMercatorRaw=bs,l.geoNaturalEarth1=Ts,l.geoNaturalEarth1Raw=Zs,l.geoOrthographic=Vo,l.geoOrthographicRaw=Yi,l.geoPath=xu,l.geoProjection=Uo,l.geoProjectionMutator=wu,l.geoRotation=Tr,l.geoStereographic=uf,l.geoStereographicRaw=As,l.geoStream=j,l.geoTransform=Lf,l.geoTransverseMercator=ff,l.geoTransverseMercatorRaw=Au,Object.defineProperty(l,"__esModule",{value:!0})})},{"d3-array":107}],115:[function(e,k,z){(function(l,o){typeof z=="object"&&typeof k!="undefined"?o(z):(l=l||self,o(l.d3=l.d3||{}))})(this,function(l){function o($e,Ee){return $e.parent===Ee.parent?1:2}function c($e){return $e.reduce(p,0)/$e.length}function p($e,Ee){return $e+Ee.x}function t($e){return 1+$e.reduce(n,0)}function n($e,Ee){return Math.max($e,Ee.y)}function a($e){for(var Ee;Ee=$e.children;)$e=Ee[0];return $e}function i($e){for(var Ee;Ee=$e.children;)$e=Ee[Ee.length-1];return $e}function r(){var $e=o,Ee=1,Xe=1,rt=!1;function ut(Pt){var kt,Bt=0;Pt.eachAfter(function(gt){var Ct=gt.children;Ct?(gt.x=c(Ct),gt.y=t(Ct)):(gt.x=kt?Bt+=$e(gt,kt):0,gt.y=0,kt=gt)});var Xt=a(Pt),Ut=i(Pt),Jt=Xt.x-$e(Xt,Ut)/2,Je=Ut.x+$e(Ut,Xt)/2;return Pt.eachAfter(rt?function(gt){gt.x=(gt.x-Pt.x)*Ee,gt.y=(Pt.y-gt.y)*Xe}:function(gt){gt.x=(gt.x-Jt)/(Je-Jt)*Ee,gt.y=(1-(Pt.y?gt.y/Pt.y:1))*Xe})}return ut.separation=function(Pt){return arguments.length?($e=Pt,ut):$e},ut.size=function(Pt){return arguments.length?(rt=!1,Ee=+Pt[0],Xe=+Pt[1],ut):rt?null:[Ee,Xe]},ut.nodeSize=function(Pt){return arguments.length?(rt=!0,Ee=+Pt[0],Xe=+Pt[1],ut):rt?[Ee,Xe]:null},ut}function f($e){var Ee=0,Xe=$e.children,rt=Xe&&Xe.length;if(!rt)Ee=1;else for(;--rt>=0;)Ee+=Xe[rt].value;$e.value=Ee}function u(){return this.eachAfter(f)}function s($e){var Ee=this,Xe,rt=[Ee],ut,Pt,kt;do for(Xe=rt.reverse(),rt=[];Ee=Xe.pop();)if($e(Ee),ut=Ee.children,ut)for(Pt=0,kt=ut.length;Pt<kt;++Pt)rt.push(ut[Pt]);while(rt.length);return this}function h($e){for(var Ee=this,Xe=[Ee],rt,ut;Ee=Xe.pop();)if($e(Ee),rt=Ee.children,rt)for(ut=rt.length-1;ut>=0;--ut)Xe.push(rt[ut]);return this}function d($e){for(var Ee=this,Xe=[Ee],rt=[],ut,Pt,kt;Ee=Xe.pop();)if(rt.push(Ee),ut=Ee.children,ut)for(Pt=0,kt=ut.length;Pt<kt;++Pt)Xe.push(ut[Pt]);for(;Ee=rt.pop();)$e(Ee);return this}function y($e){return this.eachAfter(function(Ee){for(var Xe=+$e(Ee.data)||0,rt=Ee.children,ut=rt&&rt.length;--ut>=0;)Xe+=rt[ut].value;Ee.value=Xe})}function m($e){return this.eachBefore(function(Ee){Ee.children&&Ee.children.sort($e)})}function g($e){for(var Ee=this,Xe=x(Ee,$e),rt=[Ee];Ee!==Xe;)Ee=Ee.parent,rt.push(Ee);for(var ut=rt.length;$e!==Xe;)rt.splice(ut,0,$e),$e=$e.parent;return rt}function x($e,Ee){if($e===Ee)return $e;var Xe=$e.ancestors(),rt=Ee.ancestors(),ut=null;for($e=Xe.pop(),Ee=rt.pop();$e===Ee;)ut=$e,$e=Xe.pop(),Ee=rt.pop();return ut}function A(){for(var $e=this,Ee=[$e];$e=$e.parent;)Ee.push($e);return Ee}function b(){var $e=[];return this.each(function(Ee){$e.push(Ee)}),$e}function S(){var $e=[];return this.eachBefore(function(Ee){Ee.children||$e.push(Ee)}),$e}function w(){var $e=this,Ee=[];return $e.each(function(Xe){Xe!==$e&&Ee.push({source:Xe.parent,target:Xe})}),Ee}function T($e,Ee){var Xe=new E($e),rt=+$e.value&&(Xe.value=$e.value),ut,Pt=[Xe],kt,Bt,Xt,Ut;for(Ee==null&&(Ee=v);ut=Pt.pop();)if(rt&&(ut.value=+ut.data.value),(Bt=Ee(ut.data))&&(Ut=Bt.length))for(ut.children=new Array(Ut),Xt=Ut-1;Xt>=0;--Xt)Pt.push(kt=ut.children[Xt]=new E(Bt[Xt])),kt.parent=ut,kt.depth=ut.depth+1;return Xe.eachBefore(M)}function _(){return T(this).eachBefore(P)}function v($e){return $e.children}function P($e){$e.data=$e.data.data}function M($e){var Ee=0;do $e.height=Ee;while(($e=$e.parent)&&$e.height<++Ee)}function E($e){this.data=$e,this.depth=this.height=0,this.parent=null}E.prototype=T.prototype={constructor:E,count:u,each:s,eachAfter:d,eachBefore:h,sum:y,sort:m,path:g,ancestors:A,descendants:b,leaves:S,links:w,copy:_};var D=Array.prototype.slice;function N($e){for(var Ee=$e.length,Xe,rt;Ee;)rt=Math.random()*Ee--|0,Xe=$e[Ee],$e[Ee]=$e[rt],$e[rt]=Xe;return $e}function O($e){for(var Ee=0,Xe=($e=N(D.call($e))).length,rt=[],ut,Pt;Ee<Xe;)ut=$e[Ee],Pt&&V(Pt,ut)?++Ee:(Pt=j(rt=I(rt,ut)),Ee=0);return Pt}function I($e,Ee){var Xe,rt;if(U(Ee,$e))return[Ee];for(Xe=0;Xe<$e.length;++Xe)if(F(Ee,$e[Xe])&&U(te($e[Xe],Ee),$e))return[$e[Xe],Ee];for(Xe=0;Xe<$e.length-1;++Xe)for(rt=Xe+1;rt<$e.length;++rt)if(F(te($e[Xe],$e[rt]),Ee)&&F(te($e[Xe],Ee),$e[rt])&&F(te($e[rt],Ee),$e[Xe])&&U(re($e[Xe],$e[rt],Ee),$e))return[$e[Xe],$e[rt],Ee];throw new Error}function F($e,Ee){var Xe=$e.r-Ee.r,rt=Ee.x-$e.x,ut=Ee.y-$e.y;return Xe<0||Xe*Xe<rt*rt+ut*ut}function V($e,Ee){var Xe=$e.r-Ee.r+1e-6,rt=Ee.x-$e.x,ut=Ee.y-$e.y;return Xe>0&&Xe*Xe>rt*rt+ut*ut}function U($e,Ee){for(var Xe=0;Xe<Ee.length;++Xe)if(!V($e,Ee[Xe]))return!1;return!0}function j($e){switch($e.length){case 1:return Z($e[0]);case 2:return te($e[0],$e[1]);case 3:return re($e[0],$e[1],$e[2])}}function Z($e){return{x:$e.x,y:$e.y,r:$e.r}}function te($e,Ee){var Xe=$e.x,rt=$e.y,ut=$e.r,Pt=Ee.x,kt=Ee.y,Bt=Ee.r,Xt=Pt-Xe,Ut=kt-rt,Jt=Bt-ut,Je=Math.sqrt(Xt*Xt+Ut*Ut);return{x:(Xe+Pt+Xt/Je*Jt)/2,y:(rt+kt+Ut/Je*Jt)/2,r:(Je+ut+Bt)/2}}function re($e,Ee,Xe){var rt=$e.x,ut=$e.y,Pt=$e.r,kt=Ee.x,Bt=Ee.y,Xt=Ee.r,Ut=Xe.x,Jt=Xe.y,Je=Xe.r,gt=rt-kt,Ct=rt-Ut,or=ut-Bt,gr=ut-Jt,lr=Xt-Pt,mr=Je-Pt,Fr=rt*rt+ut*ut-Pt*Pt,Rr=Fr-kt*kt-Bt*Bt+Xt*Xt,ir=Fr-Ut*Ut-Jt*Jt+Je*Je,Vr=Ct*or-gt*gr,qe=(or*ir-gr*Rr)/(Vr*2)-rt,we=(gr*lr-or*mr)/Vr,Me=(Ct*Rr-gt*ir)/(Vr*2)-ut,Re=(gt*mr-Ct*lr)/Vr,Ye=we*we+Re*Re-1,Qe=2*(Pt+qe*we+Me*Re),ot=qe*qe+Me*Me-Pt*Pt,st=-(Ye?(Qe+Math.sqrt(Qe*Qe-4*Ye*ot))/(2*Ye):ot/Qe);return{x:rt+qe+we*st,y:ut+Me+Re*st,r:st}}function W($e,Ee,Xe){var rt=$e.x-Ee.x,ut,Pt,kt=$e.y-Ee.y,Bt,Xt,Ut=rt*rt+kt*kt;Ut?(Pt=Ee.r+Xe.r,Pt*=Pt,Xt=$e.r+Xe.r,Xt*=Xt,Pt>Xt?(ut=(Ut+Xt-Pt)/(2*Ut),Bt=Math.sqrt(Math.max(0,Xt/Ut-ut*ut)),Xe.x=$e.x-ut*rt-Bt*kt,Xe.y=$e.y-ut*kt+Bt*rt):(ut=(Ut+Pt-Xt)/(2*Ut),Bt=Math.sqrt(Math.max(0,Pt/Ut-ut*ut)),Xe.x=Ee.x+ut*rt-Bt*kt,Xe.y=Ee.y+ut*kt+Bt*rt)):(Xe.x=Ee.x+Xe.r,Xe.y=Ee.y)}function J($e,Ee){var Xe=$e.r+Ee.r-1e-6,rt=Ee.x-$e.x,ut=Ee.y-$e.y;return Xe>0&&Xe*Xe>rt*rt+ut*ut}function le($e){var Ee=$e._,Xe=$e.next._,rt=Ee.r+Xe.r,ut=(Ee.x*Xe.r+Xe.x*Ee.r)/rt,Pt=(Ee.y*Xe.r+Xe.y*Ee.r)/rt;return ut*ut+Pt*Pt}function ue($e){this._=$e,this.next=null,this.previous=null}function se($e){if(!(ut=$e.length))return 0;var Ee,Xe,rt,ut,Pt,kt,Bt,Xt,Ut,Jt,Je;if(Ee=$e[0],Ee.x=0,Ee.y=0,!(ut>1))return Ee.r;if(Xe=$e[1],Ee.x=-Xe.r,Xe.x=Ee.r,Xe.y=0,!(ut>2))return Ee.r+Xe.r;W(Xe,Ee,rt=$e[2]),Ee=new ue(Ee),Xe=new ue(Xe),rt=new ue(rt),Ee.next=rt.previous=Xe,Xe.next=Ee.previous=rt,rt.next=Xe.previous=Ee;e:for(Bt=3;Bt<ut;++Bt){W(Ee._,Xe._,rt=$e[Bt]),rt=new ue(rt),Xt=Xe.next,Ut=Ee.previous,Jt=Xe._.r,Je=Ee._.r;do if(Jt<=Je){if(J(Xt._,rt._)){Xe=Xt,Ee.next=Xe,Xe.previous=Ee,--Bt;continue e}Jt+=Xt._.r,Xt=Xt.next}else{if(J(Ut._,rt._)){Ee=Ut,Ee.next=Xe,Xe.previous=Ee,--Bt;continue e}Je+=Ut._.r,Ut=Ut.previous}while(Xt!==Ut.next);for(rt.previous=Ee,rt.next=Xe,Ee.next=Xe.previous=Xe=rt,Pt=le(Ee);(rt=rt.next)!==Xe;)(kt=le(rt))<Pt&&(Ee=rt,Pt=kt);Xe=Ee.next}for(Ee=[Xe._],rt=Xe;(rt=rt.next)!==Xe;)Ee.push(rt._);for(rt=O(Ee),Bt=0;Bt<ut;++Bt)Ee=$e[Bt],Ee.x-=rt.x,Ee.y-=rt.y;return rt.r}function G($e){return se($e),$e}function Y($e){return $e==null?null:ee($e)}function ee($e){if(typeof $e!="function")throw new Error;return $e}function $(){return 0}function K($e){return function(){return $e}}function Q($e){return Math.sqrt($e.value)}function ae(){var $e=null,Ee=1,Xe=1,rt=$;function ut(Pt){return Pt.x=Ee/2,Pt.y=Xe/2,$e?Pt.eachBefore(ie($e)).eachAfter(oe(rt,.5)).eachBefore(fe(1)):Pt.eachBefore(ie(Q)).eachAfter(oe($,1)).eachAfter(oe(rt,Pt.r/Math.min(Ee,Xe))).eachBefore(fe(Math.min(Ee,Xe)/(2*Pt.r))),Pt}return ut.radius=function(Pt){return arguments.length?($e=Y(Pt),ut):$e},ut.size=function(Pt){return arguments.length?(Ee=+Pt[0],Xe=+Pt[1],ut):[Ee,Xe]},ut.padding=function(Pt){return arguments.length?(rt=typeof Pt=="function"?Pt:K(+Pt),ut):rt},ut}function ie($e){return function(Ee){Ee.children||(Ee.r=Math.max(0,+$e(Ee)||0))}}function oe($e,Ee){return function(Xe){if(rt=Xe.children){var rt,ut,Pt=rt.length,kt=$e(Xe)*Ee||0,Bt;if(kt)for(ut=0;ut<Pt;++ut)rt[ut].r+=kt;if(Bt=se(rt),kt)for(ut=0;ut<Pt;++ut)rt[ut].r-=kt;Xe.r=Bt+kt}}}function fe($e){return function(Ee){var Xe=Ee.parent;Ee.r*=$e,Xe&&(Ee.x=Xe.x+$e*Ee.x,Ee.y=Xe.y+$e*Ee.y)}}function ye($e){$e.x0=Math.round($e.x0),$e.y0=Math.round($e.y0),$e.x1=Math.round($e.x1),$e.y1=Math.round($e.y1)}function ce($e,Ee,Xe,rt,ut){for(var Pt=$e.children,kt,Bt=-1,Xt=Pt.length,Ut=$e.value&&(rt-Ee)/$e.value;++Bt<Xt;)kt=Pt[Bt],kt.y0=Xe,kt.y1=ut,kt.x0=Ee,kt.x1=Ee+=kt.value*Ut}function me(){var $e=1,Ee=1,Xe=0,rt=!1;function ut(kt){var Bt=kt.height+1;return kt.x0=kt.y0=Xe,kt.x1=$e,kt.y1=Ee/Bt,kt.eachBefore(Pt(Ee,Bt)),rt&&kt.eachBefore(ye),kt}function Pt(kt,Bt){return function(Xt){Xt.children&&ce(Xt,Xt.x0,kt*(Xt.depth+1)/Bt,Xt.x1,kt*(Xt.depth+2)/Bt);var Ut=Xt.x0,Jt=Xt.y0,Je=Xt.x1-Xe,gt=Xt.y1-Xe;Je<Ut&&(Ut=Je=(Ut+Je)/2),gt<Jt&&(Jt=gt=(Jt+gt)/2),Xt.x0=Ut,Xt.y0=Jt,Xt.x1=Je,Xt.y1=gt}}return ut.round=function(kt){return arguments.length?(rt=!!kt,ut):rt},ut.size=function(kt){return arguments.length?($e=+kt[0],Ee=+kt[1],ut):[$e,Ee]},ut.padding=function(kt){return arguments.length?(Xe=+kt,ut):Xe},ut}var xe="$",ke={depth:-1},Ae={};function Oe($e){return $e.id}function He($e){return $e.parentId}function Ge(){var $e=Oe,Ee=He;function Xe(rt){var ut,Pt,kt=rt.length,Bt,Xt,Ut,Jt=new Array(kt),Je,gt,Ct={};for(Pt=0;Pt<kt;++Pt)ut=rt[Pt],Ut=Jt[Pt]=new E(ut),(Je=$e(ut,Pt,rt))!=null&&(Je+="")&&(gt=xe+(Ut.id=Je),Ct[gt]=gt in Ct?Ae:Ut);for(Pt=0;Pt<kt;++Pt)if(Ut=Jt[Pt],Je=Ee(rt[Pt],Pt,rt),Je==null||!(Je+="")){if(Bt)throw new Error("multiple roots");Bt=Ut}else{if(Xt=Ct[xe+Je],!Xt)throw new Error("missing: "+Je);if(Xt===Ae)throw new Error("ambiguous: "+Je);Xt.children?Xt.children.push(Ut):Xt.children=[Ut],Ut.parent=Xt}if(!Bt)throw new Error("no root");if(Bt.parent=ke,Bt.eachBefore(function(or){or.depth=or.parent.depth+1,--kt}).eachBefore(M),Bt.parent=null,kt>0)throw new Error("cycle");return Bt}return Xe.id=function(rt){return arguments.length?($e=ee(rt),Xe):$e},Xe.parentId=function(rt){return arguments.length?(Ee=ee(rt),Xe):Ee},Xe}function _e($e,Ee){return $e.parent===Ee.parent?1:2}function Ie($e){var Ee=$e.children;return Ee?Ee[0]:$e.t}function We($e){var Ee=$e.children;return Ee?Ee[Ee.length-1]:$e.t}function et($e,Ee,Xe){var rt=Xe/(Ee.i-$e.i);Ee.c-=rt,Ee.s+=Xe,$e.c+=rt,Ee.z+=Xe,Ee.m+=Xe}function Ne($e){for(var Ee=0,Xe=0,rt=$e.children,ut=rt.length,Pt;--ut>=0;)Pt=rt[ut],Pt.z+=Ee,Pt.m+=Ee,Ee+=Pt.s+(Xe+=Pt.c)}function De($e,Ee,Xe){return $e.a.parent===Ee.parent?$e.a:Xe}function Ve($e,Ee){this._=$e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Ee}Ve.prototype=Object.create(E.prototype);function dt($e){for(var Ee=new Ve($e,0),Xe,rt=[Ee],ut,Pt,kt,Bt;Xe=rt.pop();)if(Pt=Xe._.children)for(Xe.children=new Array(Bt=Pt.length),kt=Bt-1;kt>=0;--kt)rt.push(ut=Xe.children[kt]=new Ve(Pt[kt],kt)),ut.parent=Xe;return(Ee.parent=new Ve(null,0)).children=[Ee],Ee}function Dt(){var $e=_e,Ee=1,Xe=1,rt=null;function ut(Ut){var Jt=dt(Ut);if(Jt.eachAfter(Pt),Jt.parent.m=-Jt.z,Jt.eachBefore(kt),rt)Ut.eachBefore(Xt);else{var Je=Ut,gt=Ut,Ct=Ut;Ut.eachBefore(function(Fr){Fr.x<Je.x&&(Je=Fr),Fr.x>gt.x&&(gt=Fr),Fr.depth>Ct.depth&&(Ct=Fr)});var or=Je===gt?1:$e(Je,gt)/2,gr=or-Je.x,lr=Ee/(gt.x+or+gr),mr=Xe/(Ct.depth||1);Ut.eachBefore(function(Fr){Fr.x=(Fr.x+gr)*lr,Fr.y=Fr.depth*mr})}return Ut}function Pt(Ut){var Jt=Ut.children,Je=Ut.parent.children,gt=Ut.i?Je[Ut.i-1]:null;if(Jt){Ne(Ut);var Ct=(Jt[0].z+Jt[Jt.length-1].z)/2;gt?(Ut.z=gt.z+$e(Ut._,gt._),Ut.m=Ut.z-Ct):Ut.z=Ct}else gt&&(Ut.z=gt.z+$e(Ut._,gt._));Ut.parent.A=Bt(Ut,gt,Ut.parent.A||Je[0])}function kt(Ut){Ut._.x=Ut.z+Ut.parent.m,Ut.m+=Ut.parent.m}function Bt(Ut,Jt,Je){if(Jt){for(var gt=Ut,Ct=Ut,or=Jt,gr=gt.parent.children[0],lr=gt.m,mr=Ct.m,Fr=or.m,Rr=gr.m,ir;or=We(or),gt=Ie(gt),or&&gt;)gr=Ie(gr),Ct=We(Ct),Ct.a=Ut,ir=or.z+Fr-gt.z-lr+$e(or._,gt._),ir>0&&(et(De(or,Ut,Je),Ut,ir),lr+=ir,mr+=ir),Fr+=or.m,lr+=gt.m,Rr+=gr.m,mr+=Ct.m;or&&!We(Ct)&&(Ct.t=or,Ct.m+=Fr-mr),gt&&!Ie(gr)&&(gr.t=gt,gr.m+=lr-Rr,Je=Ut)}return Je}function Xt(Ut){Ut.x*=Ee,Ut.y=Ut.depth*Xe}return ut.separation=function(Ut){return arguments.length?($e=Ut,ut):$e},ut.size=function(Ut){return arguments.length?(rt=!1,Ee=+Ut[0],Xe=+Ut[1],ut):rt?null:[Ee,Xe]},ut.nodeSize=function(Ut){return arguments.length?(rt=!0,Ee=+Ut[0],Xe=+Ut[1],ut):rt?[Ee,Xe]:null},ut}function Gt($e,Ee,Xe,rt,ut){for(var Pt=$e.children,kt,Bt=-1,Xt=Pt.length,Ut=$e.value&&(ut-Xe)/$e.value;++Bt<Xt;)kt=Pt[Bt],kt.x0=Ee,kt.x1=rt,kt.y0=Xe,kt.y1=Xe+=kt.value*Ut}var Mt=(1+Math.sqrt(5))/2;function zt($e,Ee,Xe,rt,ut,Pt){for(var kt=[],Bt=Ee.children,Xt,Ut,Jt=0,Je=0,gt=Bt.length,Ct,or,gr=Ee.value,lr,mr,Fr,Rr,ir,Vr,qe;Jt<gt;){Ct=ut-Xe,or=Pt-rt;do lr=Bt[Je++].value;while(!lr&&Je<gt);for(mr=Fr=lr,Vr=Math.max(or/Ct,Ct/or)/(gr*$e),qe=lr*lr*Vr,ir=Math.max(Fr/qe,qe/mr);Je<gt;++Je){if(lr+=Ut=Bt[Je].value,Ut<mr&&(mr=Ut),Ut>Fr&&(Fr=Ut),qe=lr*lr*Vr,Rr=Math.max(Fr/qe,qe/mr),Rr>ir){lr-=Ut;break}ir=Rr}kt.push(Xt={value:lr,dice:Ct<or,children:Bt.slice(Jt,Je)}),Xt.dice?ce(Xt,Xe,rt,ut,gr?rt+=or*lr/gr:Pt):Gt(Xt,Xe,rt,gr?Xe+=Ct*lr/gr:ut,Pt),gr-=lr,Jt=Je}return kt}var Nt=function $e(Ee){function Xe(rt,ut,Pt,kt,Bt){zt(Ee,rt,ut,Pt,kt,Bt)}return Xe.ratio=function(rt){return $e((rt=+rt)>1?rt:1)},Xe}(Mt);function Et(){var $e=Nt,Ee=!1,Xe=1,rt=1,ut=[0],Pt=$,kt=$,Bt=$,Xt=$,Ut=$;function Jt(gt){return gt.x0=gt.y0=0,gt.x1=Xe,gt.y1=rt,gt.eachBefore(Je),ut=[0],Ee&&gt.eachBefore(ye),gt}function Je(gt){var Ct=ut[gt.depth],or=gt.x0+Ct,gr=gt.y0+Ct,lr=gt.x1-Ct,mr=gt.y1-Ct;lr<or&&(or=lr=(or+lr)/2),mr<gr&&(gr=mr=(gr+mr)/2),gt.x0=or,gt.y0=gr,gt.x1=lr,gt.y1=mr,gt.children&&(Ct=ut[gt.depth+1]=Pt(gt)/2,or+=Ut(gt)-Ct,gr+=kt(gt)-Ct,lr-=Bt(gt)-Ct,mr-=Xt(gt)-Ct,lr<or&&(or=lr=(or+lr)/2),mr<gr&&(gr=mr=(gr+mr)/2),$e(gt,or,gr,lr,mr))}return Jt.round=function(gt){return arguments.length?(Ee=!!gt,Jt):Ee},Jt.size=function(gt){return arguments.length?(Xe=+gt[0],rt=+gt[1],Jt):[Xe,rt]},Jt.tile=function(gt){return arguments.length?($e=ee(gt),Jt):$e},Jt.padding=function(gt){return arguments.length?Jt.paddingInner(gt).paddingOuter(gt):Jt.paddingInner()},Jt.paddingInner=function(gt){return arguments.length?(Pt=typeof gt=="function"?gt:K(+gt),Jt):Pt},Jt.paddingOuter=function(gt){return arguments.length?Jt.paddingTop(gt).paddingRight(gt).paddingBottom(gt).paddingLeft(gt):Jt.paddingTop()},Jt.paddingTop=function(gt){return arguments.length?(kt=typeof gt=="function"?gt:K(+gt),Jt):kt},Jt.paddingRight=function(gt){return arguments.length?(Bt=typeof gt=="function"?gt:K(+gt),Jt):Bt},Jt.paddingBottom=function(gt){return arguments.length?(Xt=typeof gt=="function"?gt:K(+gt),Jt):Xt},Jt.paddingLeft=function(gt){return arguments.length?(Ut=typeof gt=="function"?gt:K(+gt),Jt):Ut},Jt}function At($e,Ee,Xe,rt,ut){var Pt=$e.children,kt,Bt=Pt.length,Xt,Ut=new Array(Bt+1);for(Ut[0]=Xt=kt=0;kt<Bt;++kt)Ut[kt+1]=Xt+=Pt[kt].value;Jt(0,Bt,$e.value,Ee,Xe,rt,ut);function Jt(Je,gt,Ct,or,gr,lr,mr){if(Je>=gt-1){var Fr=Pt[Je];Fr.x0=or,Fr.y0=gr,Fr.x1=lr,Fr.y1=mr;return}for(var Rr=Ut[Je],ir=Ct/2+Rr,Vr=Je+1,qe=gt-1;Vr<qe;){var we=Vr+qe>>>1;Ut[we]<ir?Vr=we+1:qe=we}ir-Ut[Vr-1]<Ut[Vr]-ir&&Je+1<Vr&&--Vr;var Me=Ut[Vr]-Rr,Re=Ct-Me;if(lr-or>mr-gr){var Ye=(or*Re+lr*Me)/Ct;Jt(Je,Vr,Me,or,gr,Ye,mr),Jt(Vr,gt,Re,Ye,gr,lr,mr)}else{var Qe=(gr*Re+mr*Me)/Ct;Jt(Je,Vr,Me,or,gr,lr,Qe),Jt(Vr,gt,Re,or,Qe,lr,mr)}}}function it($e,Ee,Xe,rt,ut){($e.depth&1?Gt:ce)($e,Ee,Xe,rt,ut)}var ht=function $e(Ee){function Xe(rt,ut,Pt,kt,Bt){if((Xt=rt._squarify)&&Xt.ratio===Ee)for(var Xt,Ut,Jt,Je,gt=-1,Ct,or=Xt.length,gr=rt.value;++gt<or;){for(Ut=Xt[gt],Jt=Ut.children,Je=Ut.value=0,Ct=Jt.length;Je<Ct;++Je)Ut.value+=Jt[Je].value;Ut.dice?ce(Ut,ut,Pt,kt,Pt+=(Bt-Pt)*Ut.value/gr):Gt(Ut,ut,Pt,ut+=(kt-ut)*Ut.value/gr,Bt),gr-=Ut.value}else rt._squarify=Xt=zt(Ee,rt,ut,Pt,kt,Bt),Xt.ratio=Ee}return Xe.ratio=function(rt){return $e((rt=+rt)>1?rt:1)},Xe}(Mt);l.cluster=r,l.hierarchy=T,l.pack=ae,l.packEnclose=O,l.packSiblings=G,l.partition=me,l.stratify=Ge,l.tree=Dt,l.treemap=Et,l.treemapBinary=At,l.treemapDice=ce,l.treemapResquarify=ht,l.treemapSlice=Gt,l.treemapSliceDice=it,l.treemapSquarify=Nt,Object.defineProperty(l,"__esModule",{value:!0})})},{}],116:[function(e,k,z){(function(l,o){typeof z=="object"&&typeof k!="undefined"?o(z,e("d3-color")):(l=l||self,o(l.d3=l.d3||{},l.d3))})(this,function(l,o){function c(_e,Ie,We,et,Ne){var De=_e*_e,Ve=De*_e;return((1-3*_e+3*De-Ve)*Ie+(4-6*De+3*Ve)*We+(1+3*_e+3*De-3*Ve)*et+Ve*Ne)/6}function p(_e){var Ie=_e.length-1;return function(We){var et=We<=0?We=0:We>=1?(We=1,Ie-1):Math.floor(We*Ie),Ne=_e[et],De=_e[et+1],Ve=et>0?_e[et-1]:2*Ne-De,dt=et<Ie-1?_e[et+2]:2*De-Ne;return c((We-et/Ie)*Ie,Ve,Ne,De,dt)}}function t(_e){var Ie=_e.length;return function(We){var et=Math.floor(((We%=1)<0?++We:We)*Ie),Ne=_e[(et+Ie-1)%Ie],De=_e[et%Ie],Ve=_e[(et+1)%Ie],dt=_e[(et+2)%Ie];return c((We-et/Ie)*Ie,Ne,De,Ve,dt)}}function n(_e){return function(){return _e}}function a(_e,Ie){return function(We){return _e+We*Ie}}function i(_e,Ie,We){return _e=Math.pow(_e,We),Ie=Math.pow(Ie,We)-_e,We=1/We,function(et){return Math.pow(_e+et*Ie,We)}}function r(_e,Ie){var We=Ie-_e;return We?a(_e,We>180||We<-180?We-360*Math.round(We/360):We):n(isNaN(_e)?Ie:_e)}function f(_e){return(_e=+_e)==1?u:function(Ie,We){return We-Ie?i(Ie,We,_e):n(isNaN(Ie)?We:Ie)}}function u(_e,Ie){var We=Ie-_e;return We?a(_e,We):n(isNaN(_e)?Ie:_e)}var s=function _e(Ie){var We=f(Ie);function et(Ne,De){var Ve=We((Ne=o.rgb(Ne)).r,(De=o.rgb(De)).r),dt=We(Ne.g,De.g),Dt=We(Ne.b,De.b),Gt=u(Ne.opacity,De.opacity);return function(Mt){return Ne.r=Ve(Mt),Ne.g=dt(Mt),Ne.b=Dt(Mt),Ne.opacity=Gt(Mt),Ne+""}}return et.gamma=_e,et}(1);function h(_e){return function(Ie){var We=Ie.length,et=new Array(We),Ne=new Array(We),De=new Array(We),Ve,dt;for(Ve=0;Ve<We;++Ve)dt=o.rgb(Ie[Ve]),et[Ve]=dt.r||0,Ne[Ve]=dt.g||0,De[Ve]=dt.b||0;return et=_e(et),Ne=_e(Ne),De=_e(De),dt.opacity=1,function(Dt){return dt.r=et(Dt),dt.g=Ne(Dt),dt.b=De(Dt),dt+""}}}var d=h(p),y=h(t);function m(_e,Ie){Ie||(Ie=[]);var We=_e?Math.min(Ie.length,_e.length):0,et=Ie.slice(),Ne;return function(De){for(Ne=0;Ne<We;++Ne)et[Ne]=_e[Ne]*(1-De)+Ie[Ne]*De;return et}}function g(_e){return ArrayBuffer.isView(_e)&&!(_e instanceof DataView)}function x(_e,Ie){return(g(Ie)?m:A)(_e,Ie)}function A(_e,Ie){var We=Ie?Ie.length:0,et=_e?Math.min(We,_e.length):0,Ne=new Array(et),De=new Array(We),Ve;for(Ve=0;Ve<et;++Ve)Ne[Ve]=E(_e[Ve],Ie[Ve]);for(;Ve<We;++Ve)De[Ve]=Ie[Ve];return function(dt){for(Ve=0;Ve<et;++Ve)De[Ve]=Ne[Ve](dt);return De}}function b(_e,Ie){var We=new Date;return _e=+_e,Ie=+Ie,function(et){return We.setTime(_e*(1-et)+Ie*et),We}}function S(_e,Ie){return _e=+_e,Ie=+Ie,function(We){return _e*(1-We)+Ie*We}}function w(_e,Ie){var We={},et={},Ne;(_e===null||typeof _e!="object")&&(_e={}),(Ie===null||typeof Ie!="object")&&(Ie={});for(Ne in Ie)Ne in _e?We[Ne]=E(_e[Ne],Ie[Ne]):et[Ne]=Ie[Ne];return function(De){for(Ne in We)et[Ne]=We[Ne](De);return et}}var T=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_=new RegExp(T.source,"g");function v(_e){return function(){return _e}}function P(_e){return function(Ie){return _e(Ie)+""}}function M(_e,Ie){var We=T.lastIndex=_.lastIndex=0,et,Ne,De,Ve=-1,dt=[],Dt=[];for(_e=_e+"",Ie=Ie+"";(et=T.exec(_e))&&(Ne=_.exec(Ie));)(De=Ne.index)>We&&(De=Ie.slice(We,De),dt[Ve]?dt[Ve]+=De:dt[++Ve]=De),(et=et[0])===(Ne=Ne[0])?dt[Ve]?dt[Ve]+=Ne:dt[++Ve]=Ne:(dt[++Ve]=null,Dt.push({i:Ve,x:S(et,Ne)})),We=_.lastIndex;return We<Ie.length&&(De=Ie.slice(We),dt[Ve]?dt[Ve]+=De:dt[++Ve]=De),dt.length<2?Dt[0]?P(Dt[0].x):v(Ie):(Ie=Dt.length,function(Gt){for(var Mt=0,zt;Mt<Ie;++Mt)dt[(zt=Dt[Mt]).i]=zt.x(Gt);return dt.join("")})}function E(_e,Ie){var We=typeof Ie,et;return Ie==null||We==="boolean"?n(Ie):(We==="number"?S:We==="string"?(et=o.color(Ie))?(Ie=et,s):M:Ie instanceof o.color?s:Ie instanceof Date?b:g(Ie)?m:Array.isArray(Ie)?A:typeof Ie.valueOf!="function"&&typeof Ie.toString!="function"||isNaN(Ie)?w:S)(_e,Ie)}function D(_e){var Ie=_e.length;return function(We){return _e[Math.max(0,Math.min(Ie-1,Math.floor(We*Ie)))]}}function N(_e,Ie){var We=r(+_e,+Ie);return function(et){var Ne=We(et);return Ne-360*Math.floor(Ne/360)}}function O(_e,Ie){return _e=+_e,Ie=+Ie,function(We){return Math.round(_e*(1-We)+Ie*We)}}var I=180/Math.PI,F={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function V(_e,Ie,We,et,Ne,De){var Ve,dt,Dt;return(Ve=Math.sqrt(_e*_e+Ie*Ie))&&(_e/=Ve,Ie/=Ve),(Dt=_e*We+Ie*et)&&(We-=_e*Dt,et-=Ie*Dt),(dt=Math.sqrt(We*We+et*et))&&(We/=dt,et/=dt,Dt/=dt),_e*et<Ie*We&&(_e=-_e,Ie=-Ie,Dt=-Dt,Ve=-Ve),{translateX:Ne,translateY:De,rotate:Math.atan2(Ie,_e)*I,skewX:Math.atan(Dt)*I,scaleX:Ve,scaleY:dt}}var U,j,Z,te;function re(_e){return _e==="none"?F:(U||(U=document.createElement("DIV"),j=document.documentElement,Z=document.defaultView),U.style.transform=_e,_e=Z.getComputedStyle(j.appendChild(U),null).getPropertyValue("transform"),j.removeChild(U),_e=_e.slice(7,-1).split(","),V(+_e[0],+_e[1],+_e[2],+_e[3],+_e[4],+_e[5]))}function W(_e){return _e==null||(te||(te=document.createElementNS("http://www.w3.org/2000/svg","g")),te.setAttribute("transform",_e),!(_e=te.transform.baseVal.consolidate()))?F:(_e=_e.matrix,V(_e.a,_e.b,_e.c,_e.d,_e.e,_e.f))}function J(_e,Ie,We,et){function Ne(Gt){return Gt.length?Gt.pop()+" ":""}function De(Gt,Mt,zt,Nt,Et,At){if(Gt!==zt||Mt!==Nt){var it=Et.push("translate(",null,Ie,null,We);At.push({i:it-4,x:S(Gt,zt)},{i:it-2,x:S(Mt,Nt)})}else(zt||Nt)&&Et.push("translate("+zt+Ie+Nt+We)}function Ve(Gt,Mt,zt,Nt){Gt!==Mt?(Gt-Mt>180?Mt+=360:Mt-Gt>180&&(Gt+=360),Nt.push({i:zt.push(Ne(zt)+"rotate(",null,et)-2,x:S(Gt,Mt)})):Mt&&zt.push(Ne(zt)+"rotate("+Mt+et)}function dt(Gt,Mt,zt,Nt){Gt!==Mt?Nt.push({i:zt.push(Ne(zt)+"skewX(",null,et)-2,x:S(Gt,Mt)}):Mt&&zt.push(Ne(zt)+"skewX("+Mt+et)}function Dt(Gt,Mt,zt,Nt,Et,At){if(Gt!==zt||Mt!==Nt){var it=Et.push(Ne(Et)+"scale(",null,",",null,")");At.push({i:it-4,x:S(Gt,zt)},{i:it-2,x:S(Mt,Nt)})}else(zt!==1||Nt!==1)&&Et.push(Ne(Et)+"scale("+zt+","+Nt+")")}return function(Gt,Mt){var zt=[],Nt=[];return Gt=_e(Gt),Mt=_e(Mt),De(Gt.translateX,Gt.translateY,Mt.translateX,Mt.translateY,zt,Nt),Ve(Gt.rotate,Mt.rotate,zt,Nt),dt(Gt.skewX,Mt.skewX,zt,Nt),Dt(Gt.scaleX,Gt.scaleY,Mt.scaleX,Mt.scaleY,zt,Nt),Gt=Mt=null,function(Et){for(var At=-1,it=Nt.length,ht;++At<it;)zt[(ht=Nt[At]).i]=ht.x(Et);return zt.join("")}}}var le=J(re,"px, ","px)","deg)"),ue=J(W,", ",")",")"),se=Math.SQRT2,G=2,Y=4,ee=1e-12;function $(_e){return((_e=Math.exp(_e))+1/_e)/2}function K(_e){return((_e=Math.exp(_e))-1/_e)/2}function Q(_e){return((_e=Math.exp(2*_e))-1)/(_e+1)}function ae(_e,Ie){var We=_e[0],et=_e[1],Ne=_e[2],De=Ie[0],Ve=Ie[1],dt=Ie[2],Dt=De-We,Gt=Ve-et,Mt=Dt*Dt+Gt*Gt,zt,Nt;if(Mt<ee)Nt=Math.log(dt/Ne)/se,zt=function(Ee){return[We+Ee*Dt,et+Ee*Gt,Ne*Math.exp(se*Ee*Nt)]};else{var Et=Math.sqrt(Mt),At=(dt*dt-Ne*Ne+Y*Mt)/(2*Ne*G*Et),it=(dt*dt-Ne*Ne-Y*Mt)/(2*dt*G*Et),ht=Math.log(Math.sqrt(At*At+1)-At),$e=Math.log(Math.sqrt(it*it+1)-it);Nt=($e-ht)/se,zt=function(Ee){var Xe=Ee*Nt,rt=$(ht),ut=Ne/(G*Et)*(rt*Q(se*Xe+ht)-K(ht));return[We+ut*Dt,et+ut*Gt,Ne*rt/$(se*Xe+ht)]}}return zt.duration=Nt*1e3,zt}function ie(_e){return function(Ie,We){var et=_e((Ie=o.hsl(Ie)).h,(We=o.hsl(We)).h),Ne=u(Ie.s,We.s),De=u(Ie.l,We.l),Ve=u(Ie.opacity,We.opacity);return function(dt){return Ie.h=et(dt),Ie.s=Ne(dt),Ie.l=De(dt),Ie.opacity=Ve(dt),Ie+""}}}var oe=ie(r),fe=ie(u);function ye(_e,Ie){var We=u((_e=o.lab(_e)).l,(Ie=o.lab(Ie)).l),et=u(_e.a,Ie.a),Ne=u(_e.b,Ie.b),De=u(_e.opacity,Ie.opacity);return function(Ve){return _e.l=We(Ve),_e.a=et(Ve),_e.b=Ne(Ve),_e.opacity=De(Ve),_e+""}}function ce(_e){return function(Ie,We){var et=_e((Ie=o.hcl(Ie)).h,(We=o.hcl(We)).h),Ne=u(Ie.c,We.c),De=u(Ie.l,We.l),Ve=u(Ie.opacity,We.opacity);return function(dt){return Ie.h=et(dt),Ie.c=Ne(dt),Ie.l=De(dt),Ie.opacity=Ve(dt),Ie+""}}}var me=ce(r),xe=ce(u);function ke(_e){return function Ie(We){We=+We;function et(Ne,De){var Ve=_e((Ne=o.cubehelix(Ne)).h,(De=o.cubehelix(De)).h),dt=u(Ne.s,De.s),Dt=u(Ne.l,De.l),Gt=u(Ne.opacity,De.opacity);return function(Mt){return Ne.h=Ve(Mt),Ne.s=dt(Mt),Ne.l=Dt(Math.pow(Mt,We)),Ne.opacity=Gt(Mt),Ne+""}}return et.gamma=Ie,et}(1)}var Ae=ke(r),Oe=ke(u);function He(_e,Ie){for(var We=0,et=Ie.length-1,Ne=Ie[0],De=new Array(et<0?0:et);We<et;)De[We]=_e(Ne,Ne=Ie[++We]);return function(Ve){var dt=Math.max(0,Math.min(et-1,Math.floor(Ve*=et)));return De[dt](Ve-dt)}}function Ge(_e,Ie){for(var We=new Array(Ie),et=0;et<Ie;++et)We[et]=_e(et/(Ie-1));return We}l.interpolate=E,l.interpolateArray=x,l.interpolateBasis=p,l.interpolateBasisClosed=t,l.interpolateCubehelix=Ae,l.interpolateCubehelixLong=Oe,l.interpolateDate=b,l.interpolateDiscrete=D,l.interpolateHcl=me,l.interpolateHclLong=xe,l.interpolateHsl=oe,l.interpolateHslLong=fe,l.interpolateHue=N,l.interpolateLab=ye,l.interpolateNumber=S,l.interpolateNumberArray=m,l.interpolateObject=w,l.interpolateRgb=s,l.interpolateRgbBasis=d,l.interpolateRgbBasisClosed=y,l.interpolateRound=O,l.interpolateString=M,l.interpolateTransformCss=le,l.interpolateTransformSvg=ue,l.interpolateZoom=ae,l.piecewise=He,l.quantize=Ge,Object.defineProperty(l,"__esModule",{value:!0})})},{"d3-color":109}],117:[function(e,k,z){(function(l,o){typeof z=="object"&&typeof k!="undefined"?o(z):(l=l||self,o(l.d3=l.d3||{}))})(this,function(l){var o=Math.PI,c=2*o,p=1e-6,t=c-p;function n(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function a(){return new n}n.prototype=a.prototype={constructor:n,moveTo:function(i,r){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+r)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(i,r){this._+="L"+(this._x1=+i)+","+(this._y1=+r)},quadraticCurveTo:function(i,r,f,u){this._+="Q"+ +i+","+ +r+","+(this._x1=+f)+","+(this._y1=+u)},bezierCurveTo:function(i,r,f,u,s,h){this._+="C"+ +i+","+ +r+","+ +f+","+ +u+","+(this._x1=+s)+","+(this._y1=+h)},arcTo:function(i,r,f,u,s){i=+i,r=+r,f=+f,u=+u,s=+s;var h=this._x1,d=this._y1,y=f-i,m=u-r,g=h-i,x=d-r,A=g*g+x*x;if(s<0)throw new Error("negative radius: "+s);if(this._x1===null)this._+="M"+(this._x1=i)+","+(this._y1=r);else if(A>p)if(!(Math.abs(x*y-m*g)>p)||!s)this._+="L"+(this._x1=i)+","+(this._y1=r);else{var b=f-h,S=u-d,w=y*y+m*m,T=b*b+S*S,_=Math.sqrt(w),v=Math.sqrt(A),P=s*Math.tan((o-Math.acos((w+A-T)/(2*_*v)))/2),M=P/v,E=P/_;Math.abs(M-1)>p&&(this._+="L"+(i+M*g)+","+(r+M*x)),this._+="A"+s+","+s+",0,0,"+ +(x*b>g*S)+","+(this._x1=i+E*y)+","+(this._y1=r+E*m)}},arc:function(i,r,f,u,s,h){i=+i,r=+r,f=+f,h=!!h;var d=f*Math.cos(u),y=f*Math.sin(u),m=i+d,g=r+y,x=1^h,A=h?u-s:s-u;if(f<0)throw new Error("negative radius: "+f);this._x1===null?this._+="M"+m+","+g:(Math.abs(this._x1-m)>p||Math.abs(this._y1-g)>p)&&(this._+="L"+m+","+g),!!f&&(A<0&&(A=A%c+c),A>t?this._+="A"+f+","+f+",0,1,"+x+","+(i-d)+","+(r-y)+"A"+f+","+f+",0,1,"+x+","+(this._x1=m)+","+(this._y1=g):A>p&&(this._+="A"+f+","+f+",0,"+ +(A>=o)+","+x+","+(this._x1=i+f*Math.cos(s))+","+(this._y1=r+f*Math.sin(s))))},rect:function(i,r,f,u){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+r)+"h"+ +f+"v"+ +u+"h"+-f+"Z"},toString:function(){return this._}},l.path=a,Object.defineProperty(l,"__esModule",{value:!0})})},{}],118:[function(e,k,z){(function(l,o){typeof z=="object"&&typeof k!="undefined"?o(z):(l=l||self,o(l.d3=l.d3||{}))})(this,function(l){function o(_){var v=+this._x.call(null,_),P=+this._y.call(null,_);return c(this.cover(v,P),v,P,_)}function c(_,v,P,M){if(isNaN(v)||isNaN(P))return _;var E,D=_._root,N={data:M},O=_._x0,I=_._y0,F=_._x1,V=_._y1,U,j,Z,te,re,W,J,le;if(!D)return _._root=N,_;for(;D.length;)if((re=v>=(U=(O+F)/2))?O=U:F=U,(W=P>=(j=(I+V)/2))?I=j:V=j,E=D,!(D=D[J=W<<1|re]))return E[J]=N,_;if(Z=+_._x.call(null,D.data),te=+_._y.call(null,D.data),v===Z&&P===te)return N.next=D,E?E[J]=N:_._root=N,_;do E=E?E[J]=new Array(4):_._root=new Array(4),(re=v>=(U=(O+F)/2))?O=U:F=U,(W=P>=(j=(I+V)/2))?I=j:V=j;while((J=W<<1|re)==(le=(te>=j)<<1|Z>=U));return E[le]=D,E[J]=N,_}function p(_){var v,P,M=_.length,E,D,N=new Array(M),O=new Array(M),I=1/0,F=1/0,V=-1/0,U=-1/0;for(P=0;P<M;++P)isNaN(E=+this._x.call(null,v=_[P]))||isNaN(D=+this._y.call(null,v))||(N[P]=E,O[P]=D,E<I&&(I=E),E>V&&(V=E),D<F&&(F=D),D>U&&(U=D));if(I>V||F>U)return this;for(this.cover(I,F).cover(V,U),P=0;P<M;++P)c(this,N[P],O[P],_[P]);return this}function t(_,v){if(isNaN(_=+_)||isNaN(v=+v))return this;var P=this._x0,M=this._y0,E=this._x1,D=this._y1;if(isNaN(P))E=(P=Math.floor(_))+1,D=(M=Math.floor(v))+1;else{for(var N=E-P,O=this._root,I,F;P>_||_>=E||M>v||v>=D;)switch(F=(v<M)<<1|_<P,I=new Array(4),I[F]=O,O=I,N*=2,F){case 0:E=P+N,D=M+N;break;case 1:P=E-N,D=M+N;break;case 2:E=P+N,M=D-N;break;case 3:P=E-N,M=D-N;break}this._root&&this._root.length&&(this._root=O)}return this._x0=P,this._y0=M,this._x1=E,this._y1=D,this}function n(){var _=[];return this.visit(function(v){if(!v.length)do _.push(v.data);while(v=v.next)}),_}function a(_){return arguments.length?this.cover(+_[0][0],+_[0][1]).cover(+_[1][0],+_[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function i(_,v,P,M,E){this.node=_,this.x0=v,this.y0=P,this.x1=M,this.y1=E}function r(_,v,P){var M,E=this._x0,D=this._y0,N,O,I,F,V=this._x1,U=this._y1,j=[],Z=this._root,te,re;for(Z&&j.push(new i(Z,E,D,V,U)),P==null?P=1/0:(E=_-P,D=v-P,V=_+P,U=v+P,P*=P);te=j.pop();)if(!(!(Z=te.node)||(N=te.x0)>V||(O=te.y0)>U||(I=te.x1)<E||(F=te.y1)<D))if(Z.length){var W=(N+I)/2,J=(O+F)/2;j.push(new i(Z[3],W,J,I,F),new i(Z[2],N,J,W,F),new i(Z[1],W,O,I,J),new i(Z[0],N,O,W,J)),(re=(v>=J)<<1|_>=W)&&(te=j[j.length-1],j[j.length-1]=j[j.length-1-re],j[j.length-1-re]=te)}else{var le=_-+this._x.call(null,Z.data),ue=v-+this._y.call(null,Z.data),se=le*le+ue*ue;if(se<P){var G=Math.sqrt(P=se);E=_-G,D=v-G,V=_+G,U=v+G,M=Z.data}}return M}function f(_){if(isNaN(V=+this._x.call(null,_))||isNaN(U=+this._y.call(null,_)))return this;var v,P=this._root,M,E,D,N=this._x0,O=this._y0,I=this._x1,F=this._y1,V,U,j,Z,te,re,W,J;if(!P)return this;if(P.length)for(;;){if((te=V>=(j=(N+I)/2))?N=j:I=j,(re=U>=(Z=(O+F)/2))?O=Z:F=Z,v=P,!(P=P[W=re<<1|te]))return this;if(!P.length)break;(v[W+1&3]||v[W+2&3]||v[W+3&3])&&(M=v,J=W)}for(;P.data!==_;)if(E=P,!(P=P.next))return this;return(D=P.next)&&delete P.next,E?(D?E.next=D:delete E.next,this):v?(D?v[W]=D:delete v[W],(P=v[0]||v[1]||v[2]||v[3])&&P===(v[3]||v[2]||v[1]||v[0])&&!P.length&&(M?M[J]=P:this._root=P),this):(this._root=D,this)}function u(_){for(var v=0,P=_.length;v<P;++v)this.remove(_[v]);return this}function s(){return this._root}function h(){var _=0;return this.visit(function(v){if(!v.length)do++_;while(v=v.next)}),_}function d(_){var v=[],P,M=this._root,E,D,N,O,I;for(M&&v.push(new i(M,this._x0,this._y0,this._x1,this._y1));P=v.pop();)if(!_(M=P.node,D=P.x0,N=P.y0,O=P.x1,I=P.y1)&&M.length){var F=(D+O)/2,V=(N+I)/2;(E=M[3])&&v.push(new i(E,F,V,O,I)),(E=M[2])&&v.push(new i(E,D,V,F,I)),(E=M[1])&&v.push(new i(E,F,N,O,V)),(E=M[0])&&v.push(new i(E,D,N,F,V))}return this}function y(_){var v=[],P=[],M;for(this._root&&v.push(new i(this._root,this._x0,this._y0,this._x1,this._y1));M=v.pop();){var E=M.node;if(E.length){var D,N=M.x0,O=M.y0,I=M.x1,F=M.y1,V=(N+I)/2,U=(O+F)/2;(D=E[0])&&v.push(new i(D,N,O,V,U)),(D=E[1])&&v.push(new i(D,V,O,I,U)),(D=E[2])&&v.push(new i(D,N,U,V,F)),(D=E[3])&&v.push(new i(D,V,U,I,F))}P.push(M)}for(;M=P.pop();)_(M.node,M.x0,M.y0,M.x1,M.y1);return this}function m(_){return _[0]}function g(_){return arguments.length?(this._x=_,this):this._x}function x(_){return _[1]}function A(_){return arguments.length?(this._y=_,this):this._y}function b(_,v,P){var M=new S(v??m,P??x,NaN,NaN,NaN,NaN);return _==null?M:M.addAll(_)}function S(_,v,P,M,E,D){this._x=_,this._y=v,this._x0=P,this._y0=M,this._x1=E,this._y1=D,this._root=void 0}function w(_){for(var v={data:_.data},P=v;_=_.next;)P=P.next={data:_.data};return v}var T=b.prototype=S.prototype;T.copy=function(){var _=new S(this._x,this._y,this._x0,this._y0,this._x1,this._y1),v=this._root,P,M;if(!v)return _;if(!v.length)return _._root=w(v),_;for(P=[{source:v,target:_._root=new Array(4)}];v=P.pop();)for(var E=0;E<4;++E)(M=v.source[E])&&(M.length?P.push({source:M,target:v.target[E]=new Array(4)}):v.target[E]=w(M));return _},T.add=o,T.addAll=p,T.cover=t,T.data=n,T.extent=a,T.find=r,T.remove=f,T.removeAll=u,T.root=s,T.size=h,T.visit=d,T.visitAfter=y,T.x=g,T.y=A,l.quadtree=b,Object.defineProperty(l,"__esModule",{value:!0})})},{}],119:[function(e,k,z){(function(l,o){typeof z=="object"&&typeof k!="undefined"?o(z,e("d3-path")):(l=l||self,o(l.d3=l.d3||{},l.d3))})(this,function(l,o){function c(at){return function(){return at}}var p=Math.abs,t=Math.atan2,n=Math.cos,a=Math.max,i=Math.min,r=Math.sin,f=Math.sqrt,u=1e-12,s=Math.PI,h=s/2,d=2*s;function y(at){return at>1?0:at<-1?s:Math.acos(at)}function m(at){return at>=1?h:at<=-1?-h:Math.asin(at)}function g(at){return at.innerRadius}function x(at){return at.outerRadius}function A(at){return at.startAngle}function b(at){return at.endAngle}function S(at){return at&&at.padAngle}function w(at,Ot,nr,dr,Zr,Lr,Ur,xr){var on=nr-at,Pn=dr-Ot,En=Ur-Zr,$n=xr-Lr,aa=$n*on-En*Pn;if(!(aa*aa<u))return aa=(En*(Ot-Lr)-$n*(at-Zr))/aa,[at+aa*on,Ot+aa*Pn]}function T(at,Ot,nr,dr,Zr,Lr,Ur){var xr=at-nr,on=Ot-dr,Pn=(Ur?Lr:-Lr)/f(xr*xr+on*on),En=Pn*on,$n=-Pn*xr,aa=at+En,Ca=Ot+$n,ba=nr+En,vr=dr+$n,yn=(aa+ba)/2,en=(Ca+vr)/2,In=ba-aa,Bn=vr-Ca,ha=In*In+Bn*Bn,qn=Zr-Lr,Hn=aa*vr-ba*Ca,la=(Bn<0?-1:1)*f(a(0,qn*qn*ha-Hn*Hn)),da=(Hn*Bn-In*la)/ha,hr=(-Hn*In-Bn*la)/ha,zr=(Hn*Bn+In*la)/ha,ln=(-Hn*In+Bn*la)/ha,Rt=da-yn,qt=hr-en,br=zr-yn,Hr=ln-en;return Rt*Rt+qt*qt>br*br+Hr*Hr&&(da=zr,hr=ln),{cx:da,cy:hr,x01:-En,y01:-$n,x11:da*(Zr/qn-1),y11:hr*(Zr/qn-1)}}function _(){var at=g,Ot=x,nr=c(0),dr=null,Zr=A,Lr=b,Ur=S,xr=null;function on(){var Pn,En,$n=+at.apply(this,arguments),aa=+Ot.apply(this,arguments),Ca=Zr.apply(this,arguments)-h,ba=Lr.apply(this,arguments)-h,vr=p(ba-Ca),yn=ba>Ca;if(xr||(xr=Pn=o.path()),aa<$n&&(En=aa,aa=$n,$n=En),!(aa>u))xr.moveTo(0,0);else if(vr>d-u)xr.moveTo(aa*n(Ca),aa*r(Ca)),xr.arc(0,0,aa,Ca,ba,!yn),$n>u&&(xr.moveTo($n*n(ba),$n*r(ba)),xr.arc(0,0,$n,ba,Ca,yn));else{var en=Ca,In=ba,Bn=Ca,ha=ba,qn=vr,Hn=vr,la=Ur.apply(this,arguments)/2,da=la>u&&(dr?+dr.apply(this,arguments):f($n*$n+aa*aa)),hr=i(p(aa-$n)/2,+nr.apply(this,arguments)),zr=hr,ln=hr,Rt,qt;if(da>u){var br=m(da/$n*r(la)),Hr=m(da/aa*r(la));(qn-=br*2)>u?(br*=yn?1:-1,Bn+=br,ha-=br):(qn=0,Bn=ha=(Ca+ba)/2),(Hn-=Hr*2)>u?(Hr*=yn?1:-1,en+=Hr,In-=Hr):(Hn=0,en=In=(Ca+ba)/2)}var ar=aa*n(en),Qt=aa*r(en),Pr=$n*n(ha),Nr=$n*r(ha);if(hr>u){var Tn=aa*n(In),Nn=aa*r(In),Gn=$n*n(Bn),Wn=$n*r(Bn),Un;if(vr<s&&(Un=w(ar,Qt,Gn,Wn,Tn,Nn,Pr,Nr))){var mn=ar-Un[0],Fn=Qt-Un[1],Xn=Tn-Un[0],ca=Nn-Un[1],ja=1/r(y((mn*Xn+Fn*ca)/(f(mn*mn+Fn*Fn)*f(Xn*Xn+ca*ca)))/2),Pa=f(Un[0]*Un[0]+Un[1]*Un[1]);zr=i(hr,($n-Pa)/(ja-1)),ln=i(hr,(aa-Pa)/(ja+1))}}Hn>u?ln>u?(Rt=T(Gn,Wn,ar,Qt,aa,ln,yn),qt=T(Tn,Nn,Pr,Nr,aa,ln,yn),xr.moveTo(Rt.cx+Rt.x01,Rt.cy+Rt.y01),ln<hr?xr.arc(Rt.cx,Rt.cy,ln,t(Rt.y01,Rt.x01),t(qt.y01,qt.x01),!yn):(xr.arc(Rt.cx,Rt.cy,ln,t(Rt.y01,Rt.x01),t(Rt.y11,Rt.x11),!yn),xr.arc(0,0,aa,t(Rt.cy+Rt.y11,Rt.cx+Rt.x11),t(qt.cy+qt.y11,qt.cx+qt.x11),!yn),xr.arc(qt.cx,qt.cy,ln,t(qt.y11,qt.x11),t(qt.y01,qt.x01),!yn))):(xr.moveTo(ar,Qt),xr.arc(0,0,aa,en,In,!yn)):xr.moveTo(ar,Qt),!($n>u)||!(qn>u)?xr.lineTo(Pr,Nr):zr>u?(Rt=T(Pr,Nr,Tn,Nn,$n,-zr,yn),qt=T(ar,Qt,Gn,Wn,$n,-zr,yn),xr.lineTo(Rt.cx+Rt.x01,Rt.cy+Rt.y01),zr<hr?xr.arc(Rt.cx,Rt.cy,zr,t(Rt.y01,Rt.x01),t(qt.y01,qt.x01),!yn):(xr.arc(Rt.cx,Rt.cy,zr,t(Rt.y01,Rt.x01),t(Rt.y11,Rt.x11),!yn),xr.arc(0,0,$n,t(Rt.cy+Rt.y11,Rt.cx+Rt.x11),t(qt.cy+qt.y11,qt.cx+qt.x11),yn),xr.arc(qt.cx,qt.cy,zr,t(qt.y11,qt.x11),t(qt.y01,qt.x01),!yn))):xr.arc(0,0,$n,ha,Bn,yn)}if(xr.closePath(),Pn)return xr=null,Pn+""||null}return on.centroid=function(){var Pn=(+at.apply(this,arguments)+ +Ot.apply(this,arguments))/2,En=(+Zr.apply(this,arguments)+ +Lr.apply(this,arguments))/2-s/2;return[n(En)*Pn,r(En)*Pn]},on.innerRadius=function(Pn){return arguments.length?(at=typeof Pn=="function"?Pn:c(+Pn),on):at},on.outerRadius=function(Pn){return arguments.length?(Ot=typeof Pn=="function"?Pn:c(+Pn),on):Ot},on.cornerRadius=function(Pn){return arguments.length?(nr=typeof Pn=="function"?Pn:c(+Pn),on):nr},on.padRadius=function(Pn){return arguments.length?(dr=Pn==null?null:typeof Pn=="function"?Pn:c(+Pn),on):dr},on.startAngle=function(Pn){return arguments.length?(Zr=typeof Pn=="function"?Pn:c(+Pn),on):Zr},on.endAngle=function(Pn){return arguments.length?(Lr=typeof Pn=="function"?Pn:c(+Pn),on):Lr},on.padAngle=function(Pn){return arguments.length?(Ur=typeof Pn=="function"?Pn:c(+Pn),on):Ur},on.context=function(Pn){return arguments.length?(xr=Pn??null,on):xr},on}function v(at){this._context=at}v.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ot){switch(at=+at,Ot=+Ot,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ot):this._context.moveTo(at,Ot);break;case 1:this._point=2;default:this._context.lineTo(at,Ot);break}}};function P(at){return new v(at)}function M(at){return at[0]}function E(at){return at[1]}function D(){var at=M,Ot=E,nr=c(!0),dr=null,Zr=P,Lr=null;function Ur(xr){var on,Pn=xr.length,En,$n=!1,aa;for(dr==null&&(Lr=Zr(aa=o.path())),on=0;on<=Pn;++on)!(on<Pn&&nr(En=xr[on],on,xr))===$n&&(($n=!$n)?Lr.lineStart():Lr.lineEnd()),$n&&Lr.point(+at(En,on,xr),+Ot(En,on,xr));if(aa)return Lr=null,aa+""||null}return Ur.x=function(xr){return arguments.length?(at=typeof xr=="function"?xr:c(+xr),Ur):at},Ur.y=function(xr){return arguments.length?(Ot=typeof xr=="function"?xr:c(+xr),Ur):Ot},Ur.defined=function(xr){return arguments.length?(nr=typeof xr=="function"?xr:c(!!xr),Ur):nr},Ur.curve=function(xr){return arguments.length?(Zr=xr,dr!=null&&(Lr=Zr(dr)),Ur):Zr},Ur.context=function(xr){return arguments.length?(xr==null?dr=Lr=null:Lr=Zr(dr=xr),Ur):dr},Ur}function N(){var at=M,Ot=null,nr=c(0),dr=E,Zr=c(!0),Lr=null,Ur=P,xr=null;function on(En){var $n,aa,Ca,ba=En.length,vr,yn=!1,en,In=new Array(ba),Bn=new Array(ba);for(Lr==null&&(xr=Ur(en=o.path())),$n=0;$n<=ba;++$n){if(!($n<ba&&Zr(vr=En[$n],$n,En))===yn)if(yn=!yn)aa=$n,xr.areaStart(),xr.lineStart();else{for(xr.lineEnd(),xr.lineStart(),Ca=$n-1;Ca>=aa;--Ca)xr.point(In[Ca],Bn[Ca]);xr.lineEnd(),xr.areaEnd()}yn&&(In[$n]=+at(vr,$n,En),Bn[$n]=+nr(vr,$n,En),xr.point(Ot?+Ot(vr,$n,En):In[$n],dr?+dr(vr,$n,En):Bn[$n]))}if(en)return xr=null,en+""||null}function Pn(){return D().defined(Zr).curve(Ur).context(Lr)}return on.x=function(En){return arguments.length?(at=typeof En=="function"?En:c(+En),Ot=null,on):at},on.x0=function(En){return arguments.length?(at=typeof En=="function"?En:c(+En),on):at},on.x1=function(En){return arguments.length?(Ot=En==null?null:typeof En=="function"?En:c(+En),on):Ot},on.y=function(En){return arguments.length?(nr=typeof En=="function"?En:c(+En),dr=null,on):nr},on.y0=function(En){return arguments.length?(nr=typeof En=="function"?En:c(+En),on):nr},on.y1=function(En){return arguments.length?(dr=En==null?null:typeof En=="function"?En:c(+En),on):dr},on.lineX0=on.lineY0=function(){return Pn().x(at).y(nr)},on.lineY1=function(){return Pn().x(at).y(dr)},on.lineX1=function(){return Pn().x(Ot).y(nr)},on.defined=function(En){return arguments.length?(Zr=typeof En=="function"?En:c(!!En),on):Zr},on.curve=function(En){return arguments.length?(Ur=En,Lr!=null&&(xr=Ur(Lr)),on):Ur},on.context=function(En){return arguments.length?(En==null?Lr=xr=null:xr=Ur(Lr=En),on):Lr},on}function O(at,Ot){return Ot<at?-1:Ot>at?1:Ot>=at?0:NaN}function I(at){return at}function F(){var at=I,Ot=O,nr=null,dr=c(0),Zr=c(d),Lr=c(0);function Ur(xr){var on,Pn=xr.length,En,$n,aa=0,Ca=new Array(Pn),ba=new Array(Pn),vr=+dr.apply(this,arguments),yn=Math.min(d,Math.max(-d,Zr.apply(this,arguments)-vr)),en,In=Math.min(Math.abs(yn)/Pn,Lr.apply(this,arguments)),Bn=In*(yn<0?-1:1),ha;for(on=0;on<Pn;++on)(ha=ba[Ca[on]=on]=+at(xr[on],on,xr))>0&&(aa+=ha);for(Ot!=null?Ca.sort(function(qn,Hn){return Ot(ba[qn],ba[Hn])}):nr!=null&&Ca.sort(function(qn,Hn){return nr(xr[qn],xr[Hn])}),on=0,$n=aa?(yn-Pn*Bn)/aa:0;on<Pn;++on,vr=en)En=Ca[on],ha=ba[En],en=vr+(ha>0?ha*$n:0)+Bn,ba[En]={data:xr[En],index:on,value:ha,startAngle:vr,endAngle:en,padAngle:In};return ba}return Ur.value=function(xr){return arguments.length?(at=typeof xr=="function"?xr:c(+xr),Ur):at},Ur.sortValues=function(xr){return arguments.length?(Ot=xr,nr=null,Ur):Ot},Ur.sort=function(xr){return arguments.length?(nr=xr,Ot=null,Ur):nr},Ur.startAngle=function(xr){return arguments.length?(dr=typeof xr=="function"?xr:c(+xr),Ur):dr},Ur.endAngle=function(xr){return arguments.length?(Zr=typeof xr=="function"?xr:c(+xr),Ur):Zr},Ur.padAngle=function(xr){return arguments.length?(Lr=typeof xr=="function"?xr:c(+xr),Ur):Lr},Ur}var V=j(P);function U(at){this._curve=at}U.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(at,Ot){this._curve.point(Ot*Math.sin(at),Ot*-Math.cos(at))}};function j(at){function Ot(nr){return new U(at(nr))}return Ot._curve=at,Ot}function Z(at){var Ot=at.curve;return at.angle=at.x,delete at.x,at.radius=at.y,delete at.y,at.curve=function(nr){return arguments.length?Ot(j(nr)):Ot()._curve},at}function te(){return Z(D().curve(V))}function re(){var at=N().curve(V),Ot=at.curve,nr=at.lineX0,dr=at.lineX1,Zr=at.lineY0,Lr=at.lineY1;return at.angle=at.x,delete at.x,at.startAngle=at.x0,delete at.x0,at.endAngle=at.x1,delete at.x1,at.radius=at.y,delete at.y,at.innerRadius=at.y0,delete at.y0,at.outerRadius=at.y1,delete at.y1,at.lineStartAngle=function(){return Z(nr())},delete at.lineX0,at.lineEndAngle=function(){return Z(dr())},delete at.lineX1,at.lineInnerRadius=function(){return Z(Zr())},delete at.lineY0,at.lineOuterRadius=function(){return Z(Lr())},delete at.lineY1,at.curve=function(Ur){return arguments.length?Ot(j(Ur)):Ot()._curve},at}function W(at,Ot){return[(Ot=+Ot)*Math.cos(at-=Math.PI/2),Ot*Math.sin(at)]}var J=Array.prototype.slice;function le(at){return at.source}function ue(at){return at.target}function se(at){var Ot=le,nr=ue,dr=M,Zr=E,Lr=null;function Ur(){var xr,on=J.call(arguments),Pn=Ot.apply(this,on),En=nr.apply(this,on);if(Lr||(Lr=xr=o.path()),at(Lr,+dr.apply(this,(on[0]=Pn,on)),+Zr.apply(this,on),+dr.apply(this,(on[0]=En,on)),+Zr.apply(this,on)),xr)return Lr=null,xr+""||null}return Ur.source=function(xr){return arguments.length?(Ot=xr,Ur):Ot},Ur.target=function(xr){return arguments.length?(nr=xr,Ur):nr},Ur.x=function(xr){return arguments.length?(dr=typeof xr=="function"?xr:c(+xr),Ur):dr},Ur.y=function(xr){return arguments.length?(Zr=typeof xr=="function"?xr:c(+xr),Ur):Zr},Ur.context=function(xr){return arguments.length?(Lr=xr??null,Ur):Lr},Ur}function G(at,Ot,nr,dr,Zr){at.moveTo(Ot,nr),at.bezierCurveTo(Ot=(Ot+dr)/2,nr,Ot,Zr,dr,Zr)}function Y(at,Ot,nr,dr,Zr){at.moveTo(Ot,nr),at.bezierCurveTo(Ot,nr=(nr+Zr)/2,dr,nr,dr,Zr)}function ee(at,Ot,nr,dr,Zr){var Lr=W(Ot,nr),Ur=W(Ot,nr=(nr+Zr)/2),xr=W(dr,nr),on=W(dr,Zr);at.moveTo(Lr[0],Lr[1]),at.bezierCurveTo(Ur[0],Ur[1],xr[0],xr[1],on[0],on[1])}function $(){return se(G)}function K(){return se(Y)}function Q(){var at=se(ee);return at.angle=at.x,delete at.x,at.radius=at.y,delete at.y,at}var ae={draw:function(at,Ot){var nr=Math.sqrt(Ot/s);at.moveTo(nr,0),at.arc(0,0,nr,0,d)}},ie={draw:function(at,Ot){var nr=Math.sqrt(Ot/5)/2;at.moveTo(-3*nr,-nr),at.lineTo(-nr,-nr),at.lineTo(-nr,-3*nr),at.lineTo(nr,-3*nr),at.lineTo(nr,-nr),at.lineTo(3*nr,-nr),at.lineTo(3*nr,nr),at.lineTo(nr,nr),at.lineTo(nr,3*nr),at.lineTo(-nr,3*nr),at.lineTo(-nr,nr),at.lineTo(-3*nr,nr),at.closePath()}},oe=Math.sqrt(1/3),fe=oe*2,ye={draw:function(at,Ot){var nr=Math.sqrt(Ot/fe),dr=nr*oe;at.moveTo(0,-nr),at.lineTo(dr,0),at.lineTo(0,nr),at.lineTo(-dr,0),at.closePath()}},ce=.8908130915292852,me=Math.sin(s/10)/Math.sin(7*s/10),xe=Math.sin(d/10)*me,ke=-Math.cos(d/10)*me,Ae={draw:function(at,Ot){var nr=Math.sqrt(Ot*ce),dr=xe*nr,Zr=ke*nr;at.moveTo(0,-nr),at.lineTo(dr,Zr);for(var Lr=1;Lr<5;++Lr){var Ur=d*Lr/5,xr=Math.cos(Ur),on=Math.sin(Ur);at.lineTo(on*nr,-xr*nr),at.lineTo(xr*dr-on*Zr,on*dr+xr*Zr)}at.closePath()}},Oe={draw:function(at,Ot){var nr=Math.sqrt(Ot),dr=-nr/2;at.rect(dr,dr,nr,nr)}},He=Math.sqrt(3),Ge={draw:function(at,Ot){var nr=-Math.sqrt(Ot/(He*3));at.moveTo(0,nr*2),at.lineTo(-He*nr,-nr),at.lineTo(He*nr,-nr),at.closePath()}},_e=-.5,Ie=Math.sqrt(3)/2,We=1/Math.sqrt(12),et=(We/2+1)*3,Ne={draw:function(at,Ot){var nr=Math.sqrt(Ot/et),dr=nr/2,Zr=nr*We,Lr=dr,Ur=nr*We+nr,xr=-Lr,on=Ur;at.moveTo(dr,Zr),at.lineTo(Lr,Ur),at.lineTo(xr,on),at.lineTo(_e*dr-Ie*Zr,Ie*dr+_e*Zr),at.lineTo(_e*Lr-Ie*Ur,Ie*Lr+_e*Ur),at.lineTo(_e*xr-Ie*on,Ie*xr+_e*on),at.lineTo(_e*dr+Ie*Zr,_e*Zr-Ie*dr),at.lineTo(_e*Lr+Ie*Ur,_e*Ur-Ie*Lr),at.lineTo(_e*xr+Ie*on,_e*on-Ie*xr),at.closePath()}},De=[ae,ie,ye,Oe,Ae,Ge,Ne];function Ve(){var at=c(ae),Ot=c(64),nr=null;function dr(){var Zr;if(nr||(nr=Zr=o.path()),at.apply(this,arguments).draw(nr,+Ot.apply(this,arguments)),Zr)return nr=null,Zr+""||null}return dr.type=function(Zr){return arguments.length?(at=typeof Zr=="function"?Zr:c(Zr),dr):at},dr.size=function(Zr){return arguments.length?(Ot=typeof Zr=="function"?Zr:c(+Zr),dr):Ot},dr.context=function(Zr){return arguments.length?(nr=Zr??null,dr):nr},dr}function dt(){}function Dt(at,Ot,nr){at._context.bezierCurveTo((2*at._x0+at._x1)/3,(2*at._y0+at._y1)/3,(at._x0+2*at._x1)/3,(at._y0+2*at._y1)/3,(at._x0+4*at._x1+Ot)/6,(at._y0+4*at._y1+nr)/6)}function Gt(at){this._context=at}Gt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Dt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ot){switch(at=+at,Ot=+Ot,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ot):this._context.moveTo(at,Ot);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Dt(this,at,Ot);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Ot}};function Mt(at){return new Gt(at)}function zt(at){this._context=at}zt.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(at,Ot){switch(at=+at,Ot=+Ot,this._point){case 0:this._point=1,this._x2=at,this._y2=Ot;break;case 1:this._point=2,this._x3=at,this._y3=Ot;break;case 2:this._point=3,this._x4=at,this._y4=Ot,this._context.moveTo((this._x0+4*this._x1+at)/6,(this._y0+4*this._y1+Ot)/6);break;default:Dt(this,at,Ot);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Ot}};function Nt(at){return new zt(at)}function Et(at){this._context=at}Et.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ot){switch(at=+at,Ot=+Ot,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var nr=(this._x0+4*this._x1+at)/6,dr=(this._y0+4*this._y1+Ot)/6;this._line?this._context.lineTo(nr,dr):this._context.moveTo(nr,dr);break;case 3:this._point=4;default:Dt(this,at,Ot);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Ot}};function At(at){return new Et(at)}function it(at,Ot){this._basis=new Gt(at),this._beta=Ot}it.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var at=this._x,Ot=this._y,nr=at.length-1;if(nr>0)for(var dr=at[0],Zr=Ot[0],Lr=at[nr]-dr,Ur=Ot[nr]-Zr,xr=-1,on;++xr<=nr;)on=xr/nr,this._basis.point(this._beta*at[xr]+(1-this._beta)*(dr+on*Lr),this._beta*Ot[xr]+(1-this._beta)*(Zr+on*Ur));this._x=this._y=null,this._basis.lineEnd()},point:function(at,Ot){this._x.push(+at),this._y.push(+Ot)}};var ht=function at(Ot){function nr(dr){return Ot===1?new Gt(dr):new it(dr,Ot)}return nr.beta=function(dr){return at(+dr)},nr}(.85);function $e(at,Ot,nr){at._context.bezierCurveTo(at._x1+at._k*(at._x2-at._x0),at._y1+at._k*(at._y2-at._y0),at._x2+at._k*(at._x1-Ot),at._y2+at._k*(at._y1-nr),at._x2,at._y2)}function Ee(at,Ot){this._context=at,this._k=(1-Ot)/6}Ee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:$e(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ot){switch(at=+at,Ot=+Ot,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ot):this._context.moveTo(at,Ot);break;case 1:this._point=2,this._x1=at,this._y1=Ot;break;case 2:this._point=3;default:$e(this,at,Ot);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ot}};var Xe=function at(Ot){function nr(dr){return new Ee(dr,Ot)}return nr.tension=function(dr){return at(+dr)},nr}(0);function rt(at,Ot){this._context=at,this._k=(1-Ot)/6}rt.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(at,Ot){switch(at=+at,Ot=+Ot,this._point){case 0:this._point=1,this._x3=at,this._y3=Ot;break;case 1:this._point=2,this._context.moveTo(this._x4=at,this._y4=Ot);break;case 2:this._point=3,this._x5=at,this._y5=Ot;break;default:$e(this,at,Ot);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ot}};var ut=function at(Ot){function nr(dr){return new rt(dr,Ot)}return nr.tension=function(dr){return at(+dr)},nr}(0);function Pt(at,Ot){this._context=at,this._k=(1-Ot)/6}Pt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ot){switch(at=+at,Ot=+Ot,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:$e(this,at,Ot);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ot}};var kt=function at(Ot){function nr(dr){return new Pt(dr,Ot)}return nr.tension=function(dr){return at(+dr)},nr}(0);function Bt(at,Ot,nr){var dr=at._x1,Zr=at._y1,Lr=at._x2,Ur=at._y2;if(at._l01_a>u){var xr=2*at._l01_2a+3*at._l01_a*at._l12_a+at._l12_2a,on=3*at._l01_a*(at._l01_a+at._l12_a);dr=(dr*xr-at._x0*at._l12_2a+at._x2*at._l01_2a)/on,Zr=(Zr*xr-at._y0*at._l12_2a+at._y2*at._l01_2a)/on}if(at._l23_a>u){var Pn=2*at._l23_2a+3*at._l23_a*at._l12_a+at._l12_2a,En=3*at._l23_a*(at._l23_a+at._l12_a);Lr=(Lr*Pn+at._x1*at._l23_2a-Ot*at._l12_2a)/En,Ur=(Ur*Pn+at._y1*at._l23_2a-nr*at._l12_2a)/En}at._context.bezierCurveTo(dr,Zr,Lr,Ur,at._x2,at._y2)}function Xt(at,Ot){this._context=at,this._alpha=Ot}Xt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ot){if(at=+at,Ot=+Ot,this._point){var nr=this._x2-at,dr=this._y2-Ot;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(nr*nr+dr*dr,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ot):this._context.moveTo(at,Ot);break;case 1:this._point=2;break;case 2:this._point=3;default:Bt(this,at,Ot);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ot}};var Ut=function at(Ot){function nr(dr){return Ot?new Xt(dr,Ot):new Ee(dr,0)}return nr.alpha=function(dr){return at(+dr)},nr}(.5);function Jt(at,Ot){this._context=at,this._alpha=Ot}Jt.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(at,Ot){if(at=+at,Ot=+Ot,this._point){var nr=this._x2-at,dr=this._y2-Ot;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(nr*nr+dr*dr,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=at,this._y3=Ot;break;case 1:this._point=2,this._context.moveTo(this._x4=at,this._y4=Ot);break;case 2:this._point=3,this._x5=at,this._y5=Ot;break;default:Bt(this,at,Ot);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ot}};var Je=function at(Ot){function nr(dr){return Ot?new Jt(dr,Ot):new rt(dr,0)}return nr.alpha=function(dr){return at(+dr)},nr}(.5);function gt(at,Ot){this._context=at,this._alpha=Ot}gt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ot){if(at=+at,Ot=+Ot,this._point){var nr=this._x2-at,dr=this._y2-Ot;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(nr*nr+dr*dr,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Bt(this,at,Ot);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ot}};var Ct=function at(Ot){function nr(dr){return Ot?new gt(dr,Ot):new Pt(dr,0)}return nr.alpha=function(dr){return at(+dr)},nr}(.5);function or(at){this._context=at}or.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(at,Ot){at=+at,Ot=+Ot,this._point?this._context.lineTo(at,Ot):(this._point=1,this._context.moveTo(at,Ot))}};function gr(at){return new or(at)}function lr(at){return at<0?-1:1}function mr(at,Ot,nr){var dr=at._x1-at._x0,Zr=Ot-at._x1,Lr=(at._y1-at._y0)/(dr||Zr<0&&-0),Ur=(nr-at._y1)/(Zr||dr<0&&-0),xr=(Lr*Zr+Ur*dr)/(dr+Zr);return(lr(Lr)+lr(Ur))*Math.min(Math.abs(Lr),Math.abs(Ur),.5*Math.abs(xr))||0}function Fr(at,Ot){var nr=at._x1-at._x0;return nr?(3*(at._y1-at._y0)/nr-Ot)/2:Ot}function Rr(at,Ot,nr){var dr=at._x0,Zr=at._y0,Lr=at._x1,Ur=at._y1,xr=(Lr-dr)/3;at._context.bezierCurveTo(dr+xr,Zr+xr*Ot,Lr-xr,Ur-xr*nr,Lr,Ur)}function ir(at){this._context=at}ir.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Rr(this,this._t0,Fr(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ot){var nr=NaN;if(at=+at,Ot=+Ot,!(at===this._x1&&Ot===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ot):this._context.moveTo(at,Ot);break;case 1:this._point=2;break;case 2:this._point=3,Rr(this,Fr(this,nr=mr(this,at,Ot)),nr);break;default:Rr(this,this._t0,nr=mr(this,at,Ot));break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Ot,this._t0=nr}}};function Vr(at){this._context=new qe(at)}(Vr.prototype=Object.create(ir.prototype)).point=function(at,Ot){ir.prototype.point.call(this,Ot,at)};function qe(at){this._context=at}qe.prototype={moveTo:function(at,Ot){this._context.moveTo(Ot,at)},closePath:function(){this._context.closePath()},lineTo:function(at,Ot){this._context.lineTo(Ot,at)},bezierCurveTo:function(at,Ot,nr,dr,Zr,Lr){this._context.bezierCurveTo(Ot,at,dr,nr,Lr,Zr)}};function we(at){return new ir(at)}function Me(at){return new Vr(at)}function Re(at){this._context=at}Re.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var at=this._x,Ot=this._y,nr=at.length;if(nr)if(this._line?this._context.lineTo(at[0],Ot[0]):this._context.moveTo(at[0],Ot[0]),nr===2)this._context.lineTo(at[1],Ot[1]);else for(var dr=Ye(at),Zr=Ye(Ot),Lr=0,Ur=1;Ur<nr;++Lr,++Ur)this._context.bezierCurveTo(dr[0][Lr],Zr[0][Lr],dr[1][Lr],Zr[1][Lr],at[Ur],Ot[Ur]);(this._line||this._line!==0&&nr===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(at,Ot){this._x.push(+at),this._y.push(+Ot)}};function Ye(at){var Ot,nr=at.length-1,dr,Zr=new Array(nr),Lr=new Array(nr),Ur=new Array(nr);for(Zr[0]=0,Lr[0]=2,Ur[0]=at[0]+2*at[1],Ot=1;Ot<nr-1;++Ot)Zr[Ot]=1,Lr[Ot]=4,Ur[Ot]=4*at[Ot]+2*at[Ot+1];for(Zr[nr-1]=2,Lr[nr-1]=7,Ur[nr-1]=8*at[nr-1]+at[nr],Ot=1;Ot<nr;++Ot)dr=Zr[Ot]/Lr[Ot-1],Lr[Ot]-=dr,Ur[Ot]-=dr*Ur[Ot-1];for(Zr[nr-1]=Ur[nr-1]/Lr[nr-1],Ot=nr-2;Ot>=0;--Ot)Zr[Ot]=(Ur[Ot]-Zr[Ot+1])/Lr[Ot];for(Lr[nr-1]=(at[nr]+Zr[nr-1])/2,Ot=0;Ot<nr-1;++Ot)Lr[Ot]=2*at[Ot+1]-Zr[Ot+1];return[Zr,Lr]}function Qe(at){return new Re(at)}function ot(at,Ot){this._context=at,this._t=Ot}ot.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(at,Ot){switch(at=+at,Ot=+Ot,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ot):this._context.moveTo(at,Ot);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Ot),this._context.lineTo(at,Ot);else{var nr=this._x*(1-this._t)+at*this._t;this._context.lineTo(nr,this._y),this._context.lineTo(nr,Ot)}break}}this._x=at,this._y=Ot}};function st(at){return new ot(at,.5)}function pt(at){return new ot(at,0)}function wt(at){return new ot(at,1)}function Yt(at,Ot){if((Ur=at.length)>1)for(var nr=1,dr,Zr,Lr=at[Ot[0]],Ur,xr=Lr.length;nr<Ur;++nr)for(Zr=Lr,Lr=at[Ot[nr]],dr=0;dr<xr;++dr)Lr[dr][1]+=Lr[dr][0]=isNaN(Zr[dr][1])?Zr[dr][0]:Zr[dr][1]}function wr(at){for(var Ot=at.length,nr=new Array(Ot);--Ot>=0;)nr[Ot]=Ot;return nr}function Tr(at,Ot){return at[Ot]}function Mr(){var at=c([]),Ot=wr,nr=Yt,dr=Tr;function Zr(Lr){var Ur=at.apply(this,arguments),xr,on=Lr.length,Pn=Ur.length,En=new Array(Pn),$n;for(xr=0;xr<Pn;++xr){for(var aa=Ur[xr],Ca=En[xr]=new Array(on),ba=0,vr;ba<on;++ba)Ca[ba]=vr=[0,+dr(Lr[ba],aa,ba,Lr)],vr.data=Lr[ba];Ca.key=aa}for(xr=0,$n=Ot(En);xr<Pn;++xr)En[$n[xr]].index=xr;return nr(En,$n),En}return Zr.keys=function(Lr){return arguments.length?(at=typeof Lr=="function"?Lr:c(J.call(Lr)),Zr):at},Zr.value=function(Lr){return arguments.length?(dr=typeof Lr=="function"?Lr:c(+Lr),Zr):dr},Zr.order=function(Lr){return arguments.length?(Ot=Lr==null?wr:typeof Lr=="function"?Lr:c(J.call(Lr)),Zr):Ot},Zr.offset=function(Lr){return arguments.length?(nr=Lr??Yt,Zr):nr},Zr}function _r(at,Ot){if((dr=at.length)>0){for(var nr,dr,Zr=0,Lr=at[0].length,Ur;Zr<Lr;++Zr){for(Ur=nr=0;nr<dr;++nr)Ur+=at[nr][Zr][1]||0;if(Ur)for(nr=0;nr<dr;++nr)at[nr][Zr][1]/=Ur}Yt(at,Ot)}}function Or(at,Ot){if((on=at.length)>0)for(var nr,dr=0,Zr,Lr,Ur,xr,on,Pn=at[Ot[0]].length;dr<Pn;++dr)for(Ur=xr=0,nr=0;nr<on;++nr)(Lr=(Zr=at[Ot[nr]][dr])[1]-Zr[0])>0?(Zr[0]=Ur,Zr[1]=Ur+=Lr):Lr<0?(Zr[1]=xr,Zr[0]=xr+=Lr):(Zr[0]=0,Zr[1]=Lr)}function nn(at,Ot){if((Zr=at.length)>0){for(var nr=0,dr=at[Ot[0]],Zr,Lr=dr.length;nr<Lr;++nr){for(var Ur=0,xr=0;Ur<Zr;++Ur)xr+=at[Ur][nr][1]||0;dr[nr][1]+=dr[nr][0]=-xr/2}Yt(at,Ot)}}function Sr(at,Ot){if(!(!((Ur=at.length)>0)||!((Lr=(Zr=at[Ot[0]]).length)>0))){for(var nr=0,dr=1,Zr,Lr,Ur;dr<Lr;++dr){for(var xr=0,on=0,Pn=0;xr<Ur;++xr){for(var En=at[Ot[xr]],$n=En[dr][1]||0,aa=En[dr-1][1]||0,Ca=($n-aa)/2,ba=0;ba<xr;++ba){var vr=at[Ot[ba]],yn=vr[dr][1]||0,en=vr[dr-1][1]||0;Ca+=yn-en}on+=$n,Pn+=Ca*$n}Zr[dr-1][1]+=Zr[dr-1][0]=nr,on&&(nr-=Pn/on)}Zr[dr-1][1]+=Zr[dr-1][0]=nr,Yt(at,Ot)}}function yr(at){var Ot=at.map(gn);return wr(at).sort(function(nr,dr){return Ot[nr]-Ot[dr]})}function gn(at){for(var Ot=-1,nr=0,dr=at.length,Zr,Lr=-1/0;++Ot<dr;)(Zr=+at[Ot][1])>Lr&&(Lr=Zr,nr=Ot);return nr}function Xr(at){var Ot=at.map(kr);return wr(at).sort(function(nr,dr){return Ot[nr]-Ot[dr]})}function kr(at){for(var Ot=0,nr=-1,dr=at.length,Zr;++nr<dr;)(Zr=+at[nr][1])&&(Ot+=Zr);return Ot}function sn(at){return Xr(at).reverse()}function cn(at){var Ot=at.length,nr,dr,Zr=at.map(kr),Lr=yr(at),Ur=0,xr=0,on=[],Pn=[];for(nr=0;nr<Ot;++nr)dr=Lr[nr],Ur<xr?(Ur+=Zr[dr],on.push(dr)):(xr+=Zr[dr],Pn.push(dr));return Pn.reverse().concat(on)}function $r(at){return wr(at).reverse()}l.arc=_,l.area=N,l.areaRadial=re,l.curveBasis=Mt,l.curveBasisClosed=Nt,l.curveBasisOpen=At,l.curveBundle=ht,l.curveCardinal=Xe,l.curveCardinalClosed=ut,l.curveCardinalOpen=kt,l.curveCatmullRom=Ut,l.curveCatmullRomClosed=Je,l.curveCatmullRomOpen=Ct,l.curveLinear=P,l.curveLinearClosed=gr,l.curveMonotoneX=we,l.curveMonotoneY=Me,l.curveNatural=Qe,l.curveStep=st,l.curveStepAfter=wt,l.curveStepBefore=pt,l.line=D,l.lineRadial=te,l.linkHorizontal=$,l.linkRadial=Q,l.linkVertical=K,l.pie=F,l.pointRadial=W,l.radialArea=re,l.radialLine=te,l.stack=Mr,l.stackOffsetDiverging=Or,l.stackOffsetExpand=_r,l.stackOffsetNone=Yt,l.stackOffsetSilhouette=nn,l.stackOffsetWiggle=Sr,l.stackOrderAppearance=yr,l.stackOrderAscending=Xr,l.stackOrderDescending=sn,l.stackOrderInsideOut=cn,l.stackOrderNone=wr,l.stackOrderReverse=$r,l.symbol=Ve,l.symbolCircle=ae,l.symbolCross=ie,l.symbolDiamond=ye,l.symbolSquare=Oe,l.symbolStar=Ae,l.symbolTriangle=Ge,l.symbolWye=Ne,l.symbols=De,Object.defineProperty(l,"__esModule",{value:!0})})},{"d3-path":117}],120:[function(e,k,z){(function(l,o){typeof z=="object"&&typeof k!="undefined"?o(z,e("d3-time")):(l=l||self,o(l.d3=l.d3||{},l.d3))})(this,function(l,o){function c(it){if(0<=it.y&&it.y<100){var ht=new Date(-1,it.m,it.d,it.H,it.M,it.S,it.L);return ht.setFullYear(it.y),ht}return new Date(it.y,it.m,it.d,it.H,it.M,it.S,it.L)}function p(it){if(0<=it.y&&it.y<100){var ht=new Date(Date.UTC(-1,it.m,it.d,it.H,it.M,it.S,it.L));return ht.setUTCFullYear(it.y),ht}return new Date(Date.UTC(it.y,it.m,it.d,it.H,it.M,it.S,it.L))}function t(it,ht,$e){return{y:it,m:ht,d:$e,H:0,M:0,S:0,L:0}}function n(it){var ht=it.dateTime,$e=it.date,Ee=it.time,Xe=it.periods,rt=it.days,ut=it.shortDays,Pt=it.months,kt=it.shortMonths,Bt=h(Xe),Xt=d(Xe),Ut=h(rt),Jt=d(rt),Je=h(ut),gt=d(ut),Ct=h(Pt),or=d(Pt),gr=h(kt),lr=d(kt),mr={a:wt,A:Yt,b:wr,B:Tr,c:null,d:U,e:U,f:W,H:j,I:Z,j:te,L:re,m:J,M:le,p:Mr,q:_r,Q:Ve,s:dt,S:ue,u:se,U:G,V:Y,w:ee,W:$,x:null,X:null,y:K,Y:Q,Z:ae,"%":De},Fr={a:Or,A:nn,b:Sr,B:yr,c:null,d:ie,e:ie,f:me,H:oe,I:fe,j:ye,L:ce,m:xe,M:ke,p:gn,q:Xr,Q:Ve,s:dt,S:Ae,u:Oe,U:He,V:Ge,w:_e,W:Ie,x:null,X:null,y:We,Y:et,Z:Ne,"%":De},Rr={a:Me,A:Re,b:Ye,B:Qe,c:ot,d:v,e:v,f:O,H:M,I:M,j:P,L:N,m:_,M:E,p:we,q:T,Q:F,s:V,S:D,u:m,U:g,V:x,w:y,W:A,x:st,X:pt,y:S,Y:b,Z:w,"%":I};mr.x=ir($e,mr),mr.X=ir(Ee,mr),mr.c=ir(ht,mr),Fr.x=ir($e,Fr),Fr.X=ir(Ee,Fr),Fr.c=ir(ht,Fr);function ir(kr,sn){return function(cn){var $r=[],at=-1,Ot=0,nr=kr.length,dr,Zr,Lr;for(cn instanceof Date||(cn=new Date(+cn));++at<nr;)kr.charCodeAt(at)===37&&($r.push(kr.slice(Ot,at)),(Zr=a[dr=kr.charAt(++at)])!=null?dr=kr.charAt(++at):Zr=dr==="e"?" ":"0",(Lr=sn[dr])&&(dr=Lr(cn,Zr)),$r.push(dr),Ot=at+1);return $r.push(kr.slice(Ot,at)),$r.join("")}}function Vr(kr,sn){return function(cn){var $r=t(1900,void 0,1),at=qe($r,kr,cn+="",0),Ot,nr;if(at!=cn.length)return null;if("Q"in $r)return new Date($r.Q);if("s"in $r)return new Date($r.s*1e3+("L"in $r?$r.L:0));if(sn&&!("Z"in $r)&&($r.Z=0),"p"in $r&&($r.H=$r.H%12+$r.p*12),$r.m===void 0&&($r.m="q"in $r?$r.q:0),"V"in $r){if($r.V<1||$r.V>53)return null;"w"in $r||($r.w=1),"Z"in $r?(Ot=p(t($r.y,0,1)),nr=Ot.getUTCDay(),Ot=nr>4||nr===0?o.utcMonday.ceil(Ot):o.utcMonday(Ot),Ot=o.utcDay.offset(Ot,($r.V-1)*7),$r.y=Ot.getUTCFullYear(),$r.m=Ot.getUTCMonth(),$r.d=Ot.getUTCDate()+($r.w+6)%7):(Ot=c(t($r.y,0,1)),nr=Ot.getDay(),Ot=nr>4||nr===0?o.timeMonday.ceil(Ot):o.timeMonday(Ot),Ot=o.timeDay.offset(Ot,($r.V-1)*7),$r.y=Ot.getFullYear(),$r.m=Ot.getMonth(),$r.d=Ot.getDate()+($r.w+6)%7)}else("W"in $r||"U"in $r)&&("w"in $r||($r.w="u"in $r?$r.u%7:"W"in $r?1:0),nr="Z"in $r?p(t($r.y,0,1)).getUTCDay():c(t($r.y,0,1)).getDay(),$r.m=0,$r.d="W"in $r?($r.w+6)%7+$r.W*7-(nr+5)%7:$r.w+$r.U*7-(nr+6)%7);return"Z"in $r?($r.H+=$r.Z/100|0,$r.M+=$r.Z%100,p($r)):c($r)}}function qe(kr,sn,cn,$r){for(var at=0,Ot=sn.length,nr=cn.length,dr,Zr;at<Ot;){if($r>=nr)return-1;if(dr=sn.charCodeAt(at++),dr===37){if(dr=sn.charAt(at++),Zr=Rr[dr in a?sn.charAt(at++):dr],!Zr||($r=Zr(kr,cn,$r))<0)return-1}else if(dr!=cn.charCodeAt($r++))return-1}return $r}function we(kr,sn,cn){var $r=Bt.exec(sn.slice(cn));return $r?(kr.p=Xt[$r[0].toLowerCase()],cn+$r[0].length):-1}function Me(kr,sn,cn){var $r=Je.exec(sn.slice(cn));return $r?(kr.w=gt[$r[0].toLowerCase()],cn+$r[0].length):-1}function Re(kr,sn,cn){var $r=Ut.exec(sn.slice(cn));return $r?(kr.w=Jt[$r[0].toLowerCase()],cn+$r[0].length):-1}function Ye(kr,sn,cn){var $r=gr.exec(sn.slice(cn));return $r?(kr.m=lr[$r[0].toLowerCase()],cn+$r[0].length):-1}function Qe(kr,sn,cn){var $r=Ct.exec(sn.slice(cn));return $r?(kr.m=or[$r[0].toLowerCase()],cn+$r[0].length):-1}function ot(kr,sn,cn){return qe(kr,ht,sn,cn)}function st(kr,sn,cn){return qe(kr,$e,sn,cn)}function pt(kr,sn,cn){return qe(kr,Ee,sn,cn)}function wt(kr){return ut[kr.getDay()]}function Yt(kr){return rt[kr.getDay()]}function wr(kr){return kt[kr.getMonth()]}function Tr(kr){return Pt[kr.getMonth()]}function Mr(kr){return Xe[+(kr.getHours()>=12)]}function _r(kr){return 1+~~(kr.getMonth()/3)}function Or(kr){return ut[kr.getUTCDay()]}function nn(kr){return rt[kr.getUTCDay()]}function Sr(kr){return kt[kr.getUTCMonth()]}function yr(kr){return Pt[kr.getUTCMonth()]}function gn(kr){return Xe[+(kr.getUTCHours()>=12)]}function Xr(kr){return 1+~~(kr.getUTCMonth()/3)}return{format:function(kr){var sn=ir(kr+="",mr);return sn.toString=function(){return kr},sn},parse:function(kr){var sn=Vr(kr+="",!1);return sn.toString=function(){return kr},sn},utcFormat:function(kr){var sn=ir(kr+="",Fr);return sn.toString=function(){return kr},sn},utcParse:function(kr){var sn=Vr(kr+="",!0);return sn.toString=function(){return kr},sn}}}var a={"-":"",_:" ","0":"0"},i=/^\s*\d+/,r=/^%/,f=/[\\^$*+?|[\]().{}]/g;function u(it,ht,$e){var Ee=it<0?"-":"",Xe=(Ee?-it:it)+"",rt=Xe.length;return Ee+(rt<$e?new Array($e-rt+1).join(ht)+Xe:Xe)}function s(it){return it.replace(f,"\\$&")}function h(it){return new RegExp("^(?:"+it.map(s).join("|")+")","i")}function d(it){for(var ht={},$e=-1,Ee=it.length;++$e<Ee;)ht[it[$e].toLowerCase()]=$e;return ht}function y(it,ht,$e){var Ee=i.exec(ht.slice($e,$e+1));return Ee?(it.w=+Ee[0],$e+Ee[0].length):-1}function m(it,ht,$e){var Ee=i.exec(ht.slice($e,$e+1));return Ee?(it.u=+Ee[0],$e+Ee[0].length):-1}function g(it,ht,$e){var Ee=i.exec(ht.slice($e,$e+2));return Ee?(it.U=+Ee[0],$e+Ee[0].length):-1}function x(it,ht,$e){var Ee=i.exec(ht.slice($e,$e+2));return Ee?(it.V=+Ee[0],$e+Ee[0].length):-1}function A(it,ht,$e){var Ee=i.exec(ht.slice($e,$e+2));return Ee?(it.W=+Ee[0],$e+Ee[0].length):-1}function b(it,ht,$e){var Ee=i.exec(ht.slice($e,$e+4));return Ee?(it.y=+Ee[0],$e+Ee[0].length):-1}function S(it,ht,$e){var Ee=i.exec(ht.slice($e,$e+2));return Ee?(it.y=+Ee[0]+(+Ee[0]>68?1900:2e3),$e+Ee[0].length):-1}function w(it,ht,$e){var Ee=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(ht.slice($e,$e+6));return Ee?(it.Z=Ee[1]?0:-(Ee[2]+(Ee[3]||"00")),$e+Ee[0].length):-1}function T(it,ht,$e){var Ee=i.exec(ht.slice($e,$e+1));return Ee?(it.q=Ee[0]*3-3,$e+Ee[0].length):-1}function _(it,ht,$e){var Ee=i.exec(ht.slice($e,$e+2));return Ee?(it.m=Ee[0]-1,$e+Ee[0].length):-1}function v(it,ht,$e){var Ee=i.exec(ht.slice($e,$e+2));return Ee?(it.d=+Ee[0],$e+Ee[0].length):-1}function P(it,ht,$e){var Ee=i.exec(ht.slice($e,$e+3));return Ee?(it.m=0,it.d=+Ee[0],$e+Ee[0].length):-1}function M(it,ht,$e){var Ee=i.exec(ht.slice($e,$e+2));return Ee?(it.H=+Ee[0],$e+Ee[0].length):-1}function E(it,ht,$e){var Ee=i.exec(ht.slice($e,$e+2));return Ee?(it.M=+Ee[0],$e+Ee[0].length):-1}function D(it,ht,$e){var Ee=i.exec(ht.slice($e,$e+2));return Ee?(it.S=+Ee[0],$e+Ee[0].length):-1}function N(it,ht,$e){var Ee=i.exec(ht.slice($e,$e+3));return Ee?(it.L=+Ee[0],$e+Ee[0].length):-1}function O(it,ht,$e){var Ee=i.exec(ht.slice($e,$e+6));return Ee?(it.L=Math.floor(Ee[0]/1e3),$e+Ee[0].length):-1}function I(it,ht,$e){var Ee=r.exec(ht.slice($e,$e+1));return Ee?$e+Ee[0].length:-1}function F(it,ht,$e){var Ee=i.exec(ht.slice($e));return Ee?(it.Q=+Ee[0],$e+Ee[0].length):-1}function V(it,ht,$e){var Ee=i.exec(ht.slice($e));return Ee?(it.s=+Ee[0],$e+Ee[0].length):-1}function U(it,ht){return u(it.getDate(),ht,2)}function j(it,ht){return u(it.getHours(),ht,2)}function Z(it,ht){return u(it.getHours()%12||12,ht,2)}function te(it,ht){return u(1+o.timeDay.count(o.timeYear(it),it),ht,3)}function re(it,ht){return u(it.getMilliseconds(),ht,3)}function W(it,ht){return re(it,ht)+"000"}function J(it,ht){return u(it.getMonth()+1,ht,2)}function le(it,ht){return u(it.getMinutes(),ht,2)}function ue(it,ht){return u(it.getSeconds(),ht,2)}function se(it){var ht=it.getDay();return ht===0?7:ht}function G(it,ht){return u(o.timeSunday.count(o.timeYear(it)-1,it),ht,2)}function Y(it,ht){var $e=it.getDay();return it=$e>=4||$e===0?o.timeThursday(it):o.timeThursday.ceil(it),u(o.timeThursday.count(o.timeYear(it),it)+(o.timeYear(it).getDay()===4),ht,2)}function ee(it){return it.getDay()}function $(it,ht){return u(o.timeMonday.count(o.timeYear(it)-1,it),ht,2)}function K(it,ht){return u(it.getFullYear()%100,ht,2)}function Q(it,ht){return u(it.getFullYear()%1e4,ht,4)}function ae(it){var ht=it.getTimezoneOffset();return(ht>0?"-":(ht*=-1,"+"))+u(ht/60|0,"0",2)+u(ht%60,"0",2)}function ie(it,ht){return u(it.getUTCDate(),ht,2)}function oe(it,ht){return u(it.getUTCHours(),ht,2)}function fe(it,ht){return u(it.getUTCHours()%12||12,ht,2)}function ye(it,ht){return u(1+o.utcDay.count(o.utcYear(it),it),ht,3)}function ce(it,ht){return u(it.getUTCMilliseconds(),ht,3)}function me(it,ht){return ce(it,ht)+"000"}function xe(it,ht){return u(it.getUTCMonth()+1,ht,2)}function ke(it,ht){return u(it.getUTCMinutes(),ht,2)}function Ae(it,ht){return u(it.getUTCSeconds(),ht,2)}function Oe(it){var ht=it.getUTCDay();return ht===0?7:ht}function He(it,ht){return u(o.utcSunday.count(o.utcYear(it)-1,it),ht,2)}function Ge(it,ht){var $e=it.getUTCDay();return it=$e>=4||$e===0?o.utcThursday(it):o.utcThursday.ceil(it),u(o.utcThursday.count(o.utcYear(it),it)+(o.utcYear(it).getUTCDay()===4),ht,2)}function _e(it){return it.getUTCDay()}function Ie(it,ht){return u(o.utcMonday.count(o.utcYear(it)-1,it),ht,2)}function We(it,ht){return u(it.getUTCFullYear()%100,ht,2)}function et(it,ht){return u(it.getUTCFullYear()%1e4,ht,4)}function Ne(){return"+0000"}function De(){return"%"}function Ve(it){return+it}function dt(it){return Math.floor(+it/1e3)}var Dt;Gt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Gt(it){return Dt=n(it),l.timeFormat=Dt.format,l.timeParse=Dt.parse,l.utcFormat=Dt.utcFormat,l.utcParse=Dt.utcParse,Dt}var Mt="%Y-%m-%dT%H:%M:%S.%LZ";function zt(it){return it.toISOString()}var Nt=Date.prototype.toISOString?zt:l.utcFormat(Mt);function Et(it){var ht=new Date(it);return isNaN(ht)?null:ht}var At=+new Date("2000-01-01T00:00:00.000Z")?Et:l.utcParse(Mt);l.isoFormat=Nt,l.isoParse=At,l.timeFormatDefaultLocale=Gt,l.timeFormatLocale=n,Object.defineProperty(l,"__esModule",{value:!0})})},{"d3-time":121}],121:[function(e,k,z){(function(l,o){typeof z=="object"&&typeof k!="undefined"?o(z):(l=l||self,o(l.d3=l.d3||{}))})(this,function(l){var o=new Date,c=new Date;function p(_e,Ie,We,et){function Ne(De){return _e(De=arguments.length===0?new Date:new Date(+De)),De}return Ne.floor=function(De){return _e(De=new Date(+De)),De},Ne.ceil=function(De){return _e(De=new Date(De-1)),Ie(De,1),_e(De),De},Ne.round=function(De){var Ve=Ne(De),dt=Ne.ceil(De);return De-Ve<dt-De?Ve:dt},Ne.offset=function(De,Ve){return Ie(De=new Date(+De),Ve==null?1:Math.floor(Ve)),De},Ne.range=function(De,Ve,dt){var Dt=[],Gt;if(De=Ne.ceil(De),dt=dt==null?1:Math.floor(dt),!(De<Ve)||!(dt>0))return Dt;do Dt.push(Gt=new Date(+De)),Ie(De,dt),_e(De);while(Gt<De&&De<Ve);return Dt},Ne.filter=function(De){return p(function(Ve){if(Ve>=Ve)for(;_e(Ve),!De(Ve);)Ve.setTime(Ve-1)},function(Ve,dt){if(Ve>=Ve)if(dt<0)for(;++dt<=0;)for(;Ie(Ve,-1),!De(Ve););else for(;--dt>=0;)for(;Ie(Ve,1),!De(Ve););})},We&&(Ne.count=function(De,Ve){return o.setTime(+De),c.setTime(+Ve),_e(o),_e(c),Math.floor(We(o,c))},Ne.every=function(De){return De=Math.floor(De),!isFinite(De)||!(De>0)?null:De>1?Ne.filter(et?function(Ve){return et(Ve)%De==0}:function(Ve){return Ne.count(0,Ve)%De==0}):Ne}),Ne}var t=p(function(){},function(_e,Ie){_e.setTime(+_e+Ie)},function(_e,Ie){return Ie-_e});t.every=function(_e){return _e=Math.floor(_e),!isFinite(_e)||!(_e>0)?null:_e>1?p(function(Ie){Ie.setTime(Math.floor(Ie/_e)*_e)},function(Ie,We){Ie.setTime(+Ie+We*_e)},function(Ie,We){return(We-Ie)/_e}):t};var n=t.range,a=1e3,i=6e4,r=36e5,f=864e5,u=6048e5,s=p(function(_e){_e.setTime(_e-_e.getMilliseconds())},function(_e,Ie){_e.setTime(+_e+Ie*a)},function(_e,Ie){return(Ie-_e)/a},function(_e){return _e.getUTCSeconds()}),h=s.range,d=p(function(_e){_e.setTime(_e-_e.getMilliseconds()-_e.getSeconds()*a)},function(_e,Ie){_e.setTime(+_e+Ie*i)},function(_e,Ie){return(Ie-_e)/i},function(_e){return _e.getMinutes()}),y=d.range,m=p(function(_e){_e.setTime(_e-_e.getMilliseconds()-_e.getSeconds()*a-_e.getMinutes()*i)},function(_e,Ie){_e.setTime(+_e+Ie*r)},function(_e,Ie){return(Ie-_e)/r},function(_e){return _e.getHours()}),g=m.range,x=p(function(_e){_e.setHours(0,0,0,0)},function(_e,Ie){_e.setDate(_e.getDate()+Ie)},function(_e,Ie){return(Ie-_e-(Ie.getTimezoneOffset()-_e.getTimezoneOffset())*i)/f},function(_e){return _e.getDate()-1}),A=x.range;function b(_e){return p(function(Ie){Ie.setDate(Ie.getDate()-(Ie.getDay()+7-_e)%7),Ie.setHours(0,0,0,0)},function(Ie,We){Ie.setDate(Ie.getDate()+We*7)},function(Ie,We){return(We-Ie-(We.getTimezoneOffset()-Ie.getTimezoneOffset())*i)/u})}var S=b(0),w=b(1),T=b(2),_=b(3),v=b(4),P=b(5),M=b(6),E=S.range,D=w.range,N=T.range,O=_.range,I=v.range,F=P.range,V=M.range,U=p(function(_e){_e.setDate(1),_e.setHours(0,0,0,0)},function(_e,Ie){_e.setMonth(_e.getMonth()+Ie)},function(_e,Ie){return Ie.getMonth()-_e.getMonth()+(Ie.getFullYear()-_e.getFullYear())*12},function(_e){return _e.getMonth()}),j=U.range,Z=p(function(_e){_e.setMonth(0,1),_e.setHours(0,0,0,0)},function(_e,Ie){_e.setFullYear(_e.getFullYear()+Ie)},function(_e,Ie){return Ie.getFullYear()-_e.getFullYear()},function(_e){return _e.getFullYear()});Z.every=function(_e){return!isFinite(_e=Math.floor(_e))||!(_e>0)?null:p(function(Ie){Ie.setFullYear(Math.floor(Ie.getFullYear()/_e)*_e),Ie.setMonth(0,1),Ie.setHours(0,0,0,0)},function(Ie,We){Ie.setFullYear(Ie.getFullYear()+We*_e)})};var te=Z.range,re=p(function(_e){_e.setUTCSeconds(0,0)},function(_e,Ie){_e.setTime(+_e+Ie*i)},function(_e,Ie){return(Ie-_e)/i},function(_e){return _e.getUTCMinutes()}),W=re.range,J=p(function(_e){_e.setUTCMinutes(0,0,0)},function(_e,Ie){_e.setTime(+_e+Ie*r)},function(_e,Ie){return(Ie-_e)/r},function(_e){return _e.getUTCHours()}),le=J.range,ue=p(function(_e){_e.setUTCHours(0,0,0,0)},function(_e,Ie){_e.setUTCDate(_e.getUTCDate()+Ie)},function(_e,Ie){return(Ie-_e)/f},function(_e){return _e.getUTCDate()-1}),se=ue.range;function G(_e){return p(function(Ie){Ie.setUTCDate(Ie.getUTCDate()-(Ie.getUTCDay()+7-_e)%7),Ie.setUTCHours(0,0,0,0)},function(Ie,We){Ie.setUTCDate(Ie.getUTCDate()+We*7)},function(Ie,We){return(We-Ie)/u})}var Y=G(0),ee=G(1),$=G(2),K=G(3),Q=G(4),ae=G(5),ie=G(6),oe=Y.range,fe=ee.range,ye=$.range,ce=K.range,me=Q.range,xe=ae.range,ke=ie.range,Ae=p(function(_e){_e.setUTCDate(1),_e.setUTCHours(0,0,0,0)},function(_e,Ie){_e.setUTCMonth(_e.getUTCMonth()+Ie)},function(_e,Ie){return Ie.getUTCMonth()-_e.getUTCMonth()+(Ie.getUTCFullYear()-_e.getUTCFullYear())*12},function(_e){return _e.getUTCMonth()}),Oe=Ae.range,He=p(function(_e){_e.setUTCMonth(0,1),_e.setUTCHours(0,0,0,0)},function(_e,Ie){_e.setUTCFullYear(_e.getUTCFullYear()+Ie)},function(_e,Ie){return Ie.getUTCFullYear()-_e.getUTCFullYear()},function(_e){return _e.getUTCFullYear()});He.every=function(_e){return!isFinite(_e=Math.floor(_e))||!(_e>0)?null:p(function(Ie){Ie.setUTCFullYear(Math.floor(Ie.getUTCFullYear()/_e)*_e),Ie.setUTCMonth(0,1),Ie.setUTCHours(0,0,0,0)},function(Ie,We){Ie.setUTCFullYear(Ie.getUTCFullYear()+We*_e)})};var Ge=He.range;l.timeDay=x,l.timeDays=A,l.timeFriday=P,l.timeFridays=F,l.timeHour=m,l.timeHours=g,l.timeInterval=p,l.timeMillisecond=t,l.timeMilliseconds=n,l.timeMinute=d,l.timeMinutes=y,l.timeMonday=w,l.timeMondays=D,l.timeMonth=U,l.timeMonths=j,l.timeSaturday=M,l.timeSaturdays=V,l.timeSecond=s,l.timeSeconds=h,l.timeSunday=S,l.timeSundays=E,l.timeThursday=v,l.timeThursdays=I,l.timeTuesday=T,l.timeTuesdays=N,l.timeWednesday=_,l.timeWednesdays=O,l.timeWeek=S,l.timeWeeks=E,l.timeYear=Z,l.timeYears=te,l.utcDay=ue,l.utcDays=se,l.utcFriday=ae,l.utcFridays=xe,l.utcHour=J,l.utcHours=le,l.utcMillisecond=t,l.utcMilliseconds=n,l.utcMinute=re,l.utcMinutes=W,l.utcMonday=ee,l.utcMondays=fe,l.utcMonth=Ae,l.utcMonths=Oe,l.utcSaturday=ie,l.utcSaturdays=ke,l.utcSecond=s,l.utcSeconds=h,l.utcSunday=Y,l.utcSundays=oe,l.utcThursday=Q,l.utcThursdays=me,l.utcTuesday=$,l.utcTuesdays=ye,l.utcWednesday=K,l.utcWednesdays=ce,l.utcWeek=Y,l.utcWeeks=oe,l.utcYear=He,l.utcYears=Ge,Object.defineProperty(l,"__esModule",{value:!0})})},{}],122:[function(e,k,z){arguments[4][121][0].apply(z,arguments)},{dup:121}],123:[function(e,k,z){(function(l,o){typeof z=="object"&&typeof k!="undefined"?o(z):(l=l||self,o(l.d3=l.d3||{}))})(this,function(l){var o=0,c=0,p=0,t=1e3,n,a,i=0,r=0,f=0,u=typeof performance=="object"&&performance.now?performance:Date,s=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(_){setTimeout(_,17)};function h(){return r||(s(d),r=u.now()+f)}function d(){r=0}function y(){this._call=this._time=this._next=null}y.prototype=m.prototype={constructor:y,restart:function(_,v,P){if(typeof _!="function")throw new TypeError("callback is not a function");P=(P==null?h():+P)+(v==null?0:+v),!this._next&&a!==this&&(a?a._next=this:n=this,a=this),this._call=_,this._time=P,S()},stop:function(){this._call&&(this._call=null,this._time=1/0,S())}};function m(_,v,P){var M=new y;return M.restart(_,v,P),M}function g(){h(),++o;for(var _=n,v;_;)(v=r-_._time)>=0&&_._call.call(null,v),_=_._next;--o}function x(){r=(i=u.now())+f,o=c=0;try{g()}finally{o=0,b(),r=0}}function A(){var _=u.now(),v=_-i;v>t&&(f-=v,i=_)}function b(){for(var _,v=n,P,M=1/0;v;)v._call?(M>v._time&&(M=v._time),_=v,v=v._next):(P=v._next,v._next=null,v=_?_._next=P:n=P);a=_,S(M)}function S(_){if(!o){c&&(c=clearTimeout(c));var v=_-r;v>24?(_<1/0&&(c=setTimeout(x,_-u.now()-f)),p&&(p=clearInterval(p))):(p||(i=u.now(),p=setInterval(A,t)),o=1,s(x))}}function w(_,v,P){var M=new y;return v=v==null?0:+v,M.restart(function(E){M.stop(),_(E+v)},v,P),M}function T(_,v,P){var M=new y,E=v;return v==null?(M.restart(_,v,P),M):(v=+v,P=P==null?h():+P,M.restart(function D(N){N+=E,M.restart(D,E+=v,P),_(N)},v,P),M)}l.interval=T,l.now=h,l.timeout=w,l.timer=m,l.timerFlush=g,Object.defineProperty(l,"__esModule",{value:!0})})},{}],124:[function(e,k,z){k.exports=function(){for(var l=0;l<arguments.length;l++)if(arguments[l]!==void 0)return arguments[l]}},{}],125:[function(e,k,z){k.exports=p;var l=p.canvas=document.createElement("canvas"),o=l.getContext("2d"),c=t([32,126]);p.createPairs=t,p.ascii=c;function p(n,a){Array.isArray(n)&&(n=n.join(", "));var i={},r,f=16,u=.05;a&&(a.length===2&&typeof a[0]=="number"?r=t(a):Array.isArray(a)?r=a:(a.o?r=t(a.o):a.pairs&&(r=a.pairs),a.fontSize&&(f=a.fontSize),a.threshold!=null&&(u=a.threshold))),r||(r=c),o.font=f+"px "+n;for(var s=0;s<r.length;s++){var h=r[s],d=o.measureText(h[0]).width+o.measureText(h[1]).width,y=o.measureText(h).width;if(Math.abs(d-y)>f*u){var m=(y-d)/f;i[h]=m*1e3}}return i}function t(n){for(var a=[],i=n[0];i<=n[1];i++)for(var r=String.fromCharCode(i),f=n[0];f<n[1];f++){var u=String.fromCharCode(f),s=r+u;a.push(s)}return a}},{}],126:[function(e,k,z){var l=e("abs-svg-path"),o=e("normalize-svg-path"),c={M:"moveTo",C:"bezierCurveTo"};k.exports=function(p,t){p.beginPath(),o(l(t)).forEach(function(n){var a=n[0],i=n.slice(1);p[c[a]].apply(p,i)}),p.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(e,k,z){k.exports=function(l){switch(l){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(e,k,z){function l(p,t,n){var a=p[n]|0;if(a<=0)return[];var i=new Array(a),r;if(n===p.length-1)for(r=0;r<a;++r)i[r]=t;else for(r=0;r<a;++r)i[r]=l(p,t,n+1);return i}function o(p,t){var n,a;for(n=new Array(p),a=0;a<p;++a)n[a]=t;return n}function c(p,t){switch(typeof t=="undefined"&&(t=0),typeof p){case"number":if(p>0)return o(p|0,t);break;case"object":if(typeof p.length=="number")return l(p,t,0);break}return[]}k.exports=c},{}],129:[function(e,k,z){k.exports=l,k.exports.default=l;function l(F,V,U){U=U||2;var j=V&&V.length,Z=j?V[0]*U:F.length,te=o(F,0,Z,U,!0),re=[];if(!te||te.next===te.prev)return re;var W,J,le,ue,se,G,Y;if(j&&(te=r(F,V,te,U)),F.length>80*U){W=le=F[0],J=ue=F[1];for(var ee=U;ee<Z;ee+=U)se=F[ee],G=F[ee+1],se<W&&(W=se),G<J&&(J=G),se>le&&(le=se),G>ue&&(ue=G);Y=Math.max(le-W,ue-J),Y=Y!==0?1/Y:0}return p(te,re,U,W,J,Y),re}function o(F,V,U,j,Z){var te,re;if(Z===I(F,V,U,j)>0)for(te=V;te<U;te+=j)re=D(te,F[te],F[te+1],re);else for(te=U-j;te>=V;te-=j)re=D(te,F[te],F[te+1],re);return re&&S(re,re.next)&&(N(re),re=re.next),re}function c(F,V){if(!F)return F;V||(V=F);var U=F,j;do if(j=!1,!U.steiner&&(S(U,U.next)||b(U.prev,U,U.next)===0)){if(N(U),U=V=U.prev,U===U.next)break;j=!0}else U=U.next;while(j||U!==V);return V}function p(F,V,U,j,Z,te,re){if(!!F){!re&&te&&d(F,j,Z,te);for(var W=F,J,le;F.prev!==F.next;){if(J=F.prev,le=F.next,te?n(F,j,Z,te):t(F)){V.push(J.i/U),V.push(F.i/U),V.push(le.i/U),N(F),F=le.next,W=le.next;continue}if(F=le,F===W){re?re===1?(F=a(c(F),V,U),p(F,V,U,j,Z,te,2)):re===2&&i(F,V,U,j,Z,te):p(c(F),V,U,j,Z,te,1);break}}}}function t(F){var V=F.prev,U=F,j=F.next;if(b(V,U,j)>=0)return!1;for(var Z=F.next.next;Z!==F.prev;){if(x(V.x,V.y,U.x,U.y,j.x,j.y,Z.x,Z.y)&&b(Z.prev,Z,Z.next)>=0)return!1;Z=Z.next}return!0}function n(F,V,U,j){var Z=F.prev,te=F,re=F.next;if(b(Z,te,re)>=0)return!1;for(var W=Z.x<te.x?Z.x<re.x?Z.x:re.x:te.x<re.x?te.x:re.x,J=Z.y<te.y?Z.y<re.y?Z.y:re.y:te.y<re.y?te.y:re.y,le=Z.x>te.x?Z.x>re.x?Z.x:re.x:te.x>re.x?te.x:re.x,ue=Z.y>te.y?Z.y>re.y?Z.y:re.y:te.y>re.y?te.y:re.y,se=m(W,J,V,U,j),G=m(le,ue,V,U,j),Y=F.prevZ,ee=F.nextZ;Y&&Y.z>=se&&ee&&ee.z<=G;){if(Y!==F.prev&&Y!==F.next&&x(Z.x,Z.y,te.x,te.y,re.x,re.y,Y.x,Y.y)&&b(Y.prev,Y,Y.next)>=0||(Y=Y.prevZ,ee!==F.prev&&ee!==F.next&&x(Z.x,Z.y,te.x,te.y,re.x,re.y,ee.x,ee.y)&&b(ee.prev,ee,ee.next)>=0))return!1;ee=ee.nextZ}for(;Y&&Y.z>=se;){if(Y!==F.prev&&Y!==F.next&&x(Z.x,Z.y,te.x,te.y,re.x,re.y,Y.x,Y.y)&&b(Y.prev,Y,Y.next)>=0)return!1;Y=Y.prevZ}for(;ee&&ee.z<=G;){if(ee!==F.prev&&ee!==F.next&&x(Z.x,Z.y,te.x,te.y,re.x,re.y,ee.x,ee.y)&&b(ee.prev,ee,ee.next)>=0)return!1;ee=ee.nextZ}return!0}function a(F,V,U){var j=F;do{var Z=j.prev,te=j.next.next;!S(Z,te)&&w(Z,j,j.next,te)&&P(Z,te)&&P(te,Z)&&(V.push(Z.i/U),V.push(j.i/U),V.push(te.i/U),N(j),N(j.next),j=F=te),j=j.next}while(j!==F);return c(j)}function i(F,V,U,j,Z,te){var re=F;do{for(var W=re.next.next;W!==re.prev;){if(re.i!==W.i&&A(re,W)){var J=E(re,W);re=c(re,re.next),J=c(J,J.next),p(re,V,U,j,Z,te),p(J,V,U,j,Z,te);return}W=W.next}re=re.next}while(re!==F)}function r(F,V,U,j){var Z=[],te,re,W,J,le;for(te=0,re=V.length;te<re;te++)W=V[te]*j,J=te<re-1?V[te+1]*j:F.length,le=o(F,W,J,j,!1),le===le.next&&(le.steiner=!0),Z.push(g(le));for(Z.sort(f),te=0;te<Z.length;te++)u(Z[te],U),U=c(U,U.next);return U}function f(F,V){return F.x-V.x}function u(F,V){if(V=s(F,V),V){var U=E(V,F);c(V,V.next),c(U,U.next)}}function s(F,V){var U=V,j=F.x,Z=F.y,te=-1/0,re;do{if(Z<=U.y&&Z>=U.next.y&&U.next.y!==U.y){var W=U.x+(Z-U.y)*(U.next.x-U.x)/(U.next.y-U.y);if(W<=j&&W>te){if(te=W,W===j){if(Z===U.y)return U;if(Z===U.next.y)return U.next}re=U.x<U.next.x?U:U.next}}U=U.next}while(U!==V);if(!re)return null;if(j===te)return re;var J=re,le=re.x,ue=re.y,se=1/0,G;U=re;do j>=U.x&&U.x>=le&&j!==U.x&&x(Z<ue?j:te,Z,le,ue,Z<ue?te:j,Z,U.x,U.y)&&(G=Math.abs(Z-U.y)/(j-U.x),P(U,F)&&(G<se||G===se&&(U.x>re.x||U.x===re.x&&h(re,U)))&&(re=U,se=G)),U=U.next;while(U!==J);return re}function h(F,V){return b(F.prev,F,V.prev)<0&&b(V.next,F,F.next)<0}function d(F,V,U,j){var Z=F;do Z.z===null&&(Z.z=m(Z.x,Z.y,V,U,j)),Z.prevZ=Z.prev,Z.nextZ=Z.next,Z=Z.next;while(Z!==F);Z.prevZ.nextZ=null,Z.prevZ=null,y(Z)}function y(F){var V,U,j,Z,te,re,W,J,le=1;do{for(U=F,F=null,te=null,re=0;U;){for(re++,j=U,W=0,V=0;V<le&&(W++,j=j.nextZ,!!j);V++);for(J=le;W>0||J>0&&j;)W!==0&&(J===0||!j||U.z<=j.z)?(Z=U,U=U.nextZ,W--):(Z=j,j=j.nextZ,J--),te?te.nextZ=Z:F=Z,Z.prevZ=te,te=Z;U=j}te.nextZ=null,le*=2}while(re>1);return F}function m(F,V,U,j,Z){return F=32767*(F-U)*Z,V=32767*(V-j)*Z,F=(F|F<<8)&16711935,F=(F|F<<4)&252645135,F=(F|F<<2)&858993459,F=(F|F<<1)&1431655765,V=(V|V<<8)&16711935,V=(V|V<<4)&252645135,V=(V|V<<2)&858993459,V=(V|V<<1)&1431655765,F|V<<1}function g(F){var V=F,U=F;do(V.x<U.x||V.x===U.x&&V.y<U.y)&&(U=V),V=V.next;while(V!==F);return U}function x(F,V,U,j,Z,te,re,W){return(Z-re)*(V-W)-(F-re)*(te-W)>=0&&(F-re)*(j-W)-(U-re)*(V-W)>=0&&(U-re)*(te-W)-(Z-re)*(j-W)>=0}function A(F,V){return F.next.i!==V.i&&F.prev.i!==V.i&&!v(F,V)&&(P(F,V)&&P(V,F)&&M(F,V)&&(b(F.prev,F,V.prev)||b(F,V.prev,V))||S(F,V)&&b(F.prev,F,F.next)>0&&b(V.prev,V,V.next)>0)}function b(F,V,U){return(V.y-F.y)*(U.x-V.x)-(V.x-F.x)*(U.y-V.y)}function S(F,V){return F.x===V.x&&F.y===V.y}function w(F,V,U,j){var Z=_(b(F,V,U)),te=_(b(F,V,j)),re=_(b(U,j,F)),W=_(b(U,j,V));return!!(Z!==te&&re!==W||Z===0&&T(F,U,V)||te===0&&T(F,j,V)||re===0&&T(U,F,j)||W===0&&T(U,V,j))}function T(F,V,U){return V.x<=Math.max(F.x,U.x)&&V.x>=Math.min(F.x,U.x)&&V.y<=Math.max(F.y,U.y)&&V.y>=Math.min(F.y,U.y)}function _(F){return F>0?1:F<0?-1:0}function v(F,V){var U=F;do{if(U.i!==F.i&&U.next.i!==F.i&&U.i!==V.i&&U.next.i!==V.i&&w(U,U.next,F,V))return!0;U=U.next}while(U!==F);return!1}function P(F,V){return b(F.prev,F,F.next)<0?b(F,V,F.next)>=0&&b(F,F.prev,V)>=0:b(F,V,F.prev)<0||b(F,F.next,V)<0}function M(F,V){var U=F,j=!1,Z=(F.x+V.x)/2,te=(F.y+V.y)/2;do U.y>te!=U.next.y>te&&U.next.y!==U.y&&Z<(U.next.x-U.x)*(te-U.y)/(U.next.y-U.y)+U.x&&(j=!j),U=U.next;while(U!==F);return j}function E(F,V){var U=new O(F.i,F.x,F.y),j=new O(V.i,V.x,V.y),Z=F.next,te=V.prev;return F.next=V,V.prev=F,U.next=Z,Z.prev=U,j.next=U,U.prev=j,te.next=j,j.prev=te,j}function D(F,V,U,j){var Z=new O(F,V,U);return j?(Z.next=j.next,Z.prev=j,j.next.prev=Z,j.next=Z):(Z.prev=Z,Z.next=Z),Z}function N(F){F.next.prev=F.prev,F.prev.next=F.next,F.prevZ&&(F.prevZ.nextZ=F.nextZ),F.nextZ&&(F.nextZ.prevZ=F.prevZ)}function O(F,V,U){this.i=F,this.x=V,this.y=U,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}l.deviation=function(F,V,U,j){var Z=V&&V.length,te=Z?V[0]*U:F.length,re=Math.abs(I(F,0,te,U));if(Z)for(var W=0,J=V.length;W<J;W++){var le=V[W]*U,ue=W<J-1?V[W+1]*U:F.length;re-=Math.abs(I(F,le,ue,U))}var se=0;for(W=0;W<j.length;W+=3){var G=j[W]*U,Y=j[W+1]*U,ee=j[W+2]*U;se+=Math.abs((F[G]-F[ee])*(F[Y+1]-F[G+1])-(F[G]-F[Y])*(F[ee+1]-F[G+1]))}return re===0&&se===0?0:Math.abs((se-re)/re)};function I(F,V,U,j){for(var Z=0,te=V,re=U-j;te<U;te+=j)Z+=(F[re]-F[te])*(F[te+1]+F[re+1]),re=te;return Z}l.flatten=function(F){for(var V=F[0][0].length,U={vertices:[],holes:[],dimensions:V},j=0,Z=0;Z<F.length;Z++){for(var te=0;te<F[Z].length;te++)for(var re=0;re<V;re++)U.vertices.push(F[Z][te][re]);Z>0&&(j+=F[Z-1].length,U.holes.push(j))}return U}},{}],130:[function(e,k,z){var l=e("strongly-connected-components");k.exports=function(c,p){var t=[],n=[],a=[],i={},r=[],f;function u(S){a[S]=!1,i.hasOwnProperty(S)&&Object.keys(i[S]).forEach(function(w){delete i[S][w],a[w]&&u(w)})}function s(S){var w=!1;n.push(S),a[S]=!0;var T,_;for(T=0;T<r[S].length;T++)_=r[S][T],_===f?(h(f,n),w=!0):a[_]||(w=s(_));if(w)u(S);else for(T=0;T<r[S].length;T++){_=r[S][T];var v=i[_];v||(v={},i[_]=v),v[_]=!0}return n.pop(),w}function h(S,w){var T=[].concat(w).concat(S);p?p(s):t.push(T)}function d(S){for(var w=0;w<c.length;w++)w<S&&(c[w]=[]),c[w]=c[w].filter(function(T){return T>=S})}function y(S){d(S);for(var w=c,T=l(w),_=T.components.filter(function(O){return O.length>1}),v=1/0,P,M=0;M<_.length;M++)for(var E=0;E<_[M].length;E++)_[M][E]<v&&(v=_[M][E],P=M);var D=_[P];if(!D)return!1;var N=c.map(function(O,I){return D.indexOf(I)===-1?[]:O.filter(function(F){return D.indexOf(F)!==-1})});return{leastVertex:v,adjList:N}}f=0;for(var m=c.length;f<m;){var g=y(f);if(f=g.leastVertex,r=g.adjList,r){for(var x=0;x<r.length;x++)for(var A=0;A<r[x].length;A++){var b=r[x][A];a[+b]=!1,i[b]={}}s(f),f=f+1}else f=m}if(!p)return t}},{"strongly-connected-components":306}],131:[function(e,k,z){var l=e("../../object/valid-value");k.exports=function(){return l(this).length=0,this}},{"../../object/valid-value":162}],132:[function(e,k,z){k.exports=e("./is-implemented")()?Array.from:e("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(e,k,z){k.exports=function(){var l=Array.from,o,c;return typeof l!="function"?!1:(o=["raz","dwa"],c=l(o),Boolean(c&&c!==o&&c[1]==="dwa"))}},{}],134:[function(e,k,z){var l=e("es6-symbol").iterator,o=e("../../function/is-arguments"),c=e("../../function/is-function"),p=e("../../number/to-pos-integer"),t=e("../../object/valid-callable"),n=e("../../object/valid-value"),a=e("../../object/is-value"),i=e("../../string/is-string"),r=Array.isArray,f=Function.prototype.call,u={configurable:!0,enumerable:!0,writable:!0,value:null},s=Object.defineProperty;k.exports=function(h){var d=arguments[1],y=arguments[2],m,g,x,A,b,S,w,T,_,v;if(h=Object(n(h)),a(d)&&t(d),!this||this===Array||!c(this)){if(!d){if(o(h))return b=h.length,b!==1?Array.apply(null,h):(A=new Array(1),A[0]=h[0],A);if(r(h)){for(A=new Array(b=h.length),g=0;g<b;++g)A[g]=h[g];return A}}A=[]}else m=this;if(!r(h)){if((_=h[l])!==void 0){for(w=t(_).call(h),m&&(A=new m),T=w.next(),g=0;!T.done;)v=d?f.call(d,y,T.value,g):T.value,m?(u.value=v,s(A,g,u)):A[g]=v,T=w.next(),++g;b=g}else if(i(h)){for(b=h.length,m&&(A=new m),g=0,x=0;g<b;++g)v=h[g],g+1<b&&(S=v.charCodeAt(0),S>=55296&&S<=56319&&(v+=h[++g])),v=d?f.call(d,y,v,x):v,m?(u.value=v,s(A,x,u)):A[x]=v,++x;b=x}}if(b===void 0)for(b=p(h.length),m&&(A=new m(b)),g=0;g<b;++g)v=d?f.call(d,y,h[g],g):h[g],m?(u.value=v,s(A,g,u)):A[g]=v;return m&&(u.value=null,A.length=b),A}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(e,k,z){var l=Object.prototype.toString,o=l.call(function(){return arguments}());k.exports=function(c){return l.call(c)===o}},{}],136:[function(e,k,z){var l=Object.prototype.toString,o=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);k.exports=function(c){return typeof c=="function"&&o(l.call(c))}},{}],137:[function(e,k,z){k.exports=function(){}},{}],138:[function(e,k,z){k.exports=e("./is-implemented")()?Math.sign:e("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(e,k,z){k.exports=function(){var l=Math.sign;return typeof l!="function"?!1:l(10)===1&&l(-20)===-1}},{}],140:[function(e,k,z){k.exports=function(l){return l=Number(l),isNaN(l)||l===0?l:l>0?1:-1}},{}],141:[function(e,k,z){var l=e("../math/sign"),o=Math.abs,c=Math.floor;k.exports=function(p){return isNaN(p)?0:(p=Number(p),p===0||!isFinite(p)?p:l(p)*c(o(p)))}},{"../math/sign":138}],142:[function(e,k,z){var l=e("./to-integer"),o=Math.max;k.exports=function(c){return o(0,l(c))}},{"./to-integer":141}],143:[function(e,k,z){var l=e("./valid-callable"),o=e("./valid-value"),c=Function.prototype.bind,p=Function.prototype.call,t=Object.keys,n=Object.prototype.propertyIsEnumerable;k.exports=function(a,i){return function(r,f){var u,s=arguments[2],h=arguments[3];return r=Object(o(r)),l(f),u=t(r),h&&u.sort(typeof h=="function"?c.call(h,r):void 0),typeof a!="function"&&(a=u[a]),p.call(a,u,function(d,y){return n.call(r,d)?p.call(f,s,r[d],d,r,y):i})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(e,k,z){k.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(e,k,z){k.exports=function(){var l=Object.assign,o;return typeof l!="function"?!1:(o={foo:"raz"},l(o,{bar:"dwa"},{trzy:"trzy"}),o.foo+o.bar+o.trzy==="razdwatrzy")}},{}],146:[function(e,k,z){var l=e("../keys"),o=e("../valid-value"),c=Math.max;k.exports=function(p,t){var n,a,i=c(arguments.length,2),r;for(p=Object(o(p)),r=function(f){try{p[f]=t[f]}catch(u){n||(n=u)}},a=1;a<i;++a)t=arguments[a],l(t).forEach(r);if(n!==void 0)throw n;return p}},{"../keys":152,"../valid-value":162}],147:[function(e,k,z){var l=e("../array/from"),o=e("./assign"),c=e("./valid-value");k.exports=function(p){var t=Object(c(p)),n=arguments[1],a=Object(arguments[2]);if(t!==p&&!n)return t;var i={};return n?l(n,function(r){(a.ensure||r in p)&&(i[r]=p[r])}):o(i,p),i}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(e,k,z){var l=Object.create,o;e("./set-prototype-of/is-implemented")()||(o=e("./set-prototype-of/shim")),k.exports=function(){var c,p,t;return!o||o.level!==1?l:(c={},p={},t={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(n){if(n==="__proto__"){p[n]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}p[n]=t}),Object.defineProperties(c,p),Object.defineProperty(o,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:c}),function(n,a){return l(n===null?c:n,a)})}()},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(e,k,z){k.exports=e("./_iterate")("forEach")},{"./_iterate":143}],150:[function(e,k,z){var l=e("./is-value"),o={function:!0,object:!0};k.exports=function(c){return l(c)&&o[typeof c]||!1}},{"./is-value":151}],151:[function(e,k,z){var l=e("../function/noop")();k.exports=function(o){return o!==l&&o!==null}},{"../function/noop":137}],152:[function(e,k,z){k.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(e,k,z){k.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],154:[function(e,k,z){var l=e("../is-value"),o=Object.keys;k.exports=function(c){return o(l(c)?Object(c):c)}},{"../is-value":151}],155:[function(e,k,z){var l=e("./valid-callable"),o=e("./for-each"),c=Function.prototype.call;k.exports=function(p,t){var n={},a=arguments[2];return l(t),o(p,function(i,r,f,u){n[r]=c.call(t,a,i,r,f,u)}),n}},{"./for-each":149,"./valid-callable":160}],156:[function(e,k,z){var l=e("./is-value"),o=Array.prototype.forEach,c=Object.create,p=function(t,n){var a;for(a in t)n[a]=t[a]};k.exports=function(t){var n=c(null);return o.call(arguments,function(a){!l(a)||p(Object(a),n)}),n}},{"./is-value":151}],157:[function(e,k,z){k.exports=e("./is-implemented")()?Object.setPrototypeOf:e("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(e,k,z){var l=Object.create,o=Object.getPrototypeOf,c={};k.exports=function(){var p=Object.setPrototypeOf,t=arguments[0]||l;return typeof p!="function"?!1:o(p(t(null),c))===c}},{}],159:[function(e,k,z){var l=e("../is-object"),o=e("../valid-value"),c=Object.prototype.isPrototypeOf,p=Object.defineProperty,t={configurable:!0,enumerable:!1,writable:!0,value:void 0},n;n=function(a,i){if(o(a),i===null||l(i))return a;throw new TypeError("Prototype must be null or an object")},k.exports=function(a){var i,r;return a?(a.level===2?a.set?(r=a.set,i=function(f,u){return r.call(n(f,u),u),f}):i=function(f,u){return n(f,u).__proto__=u,f}:i=function f(u,s){var h;return n(u,s),h=c.call(f.nullPolyfill,u),h&&delete f.nullPolyfill.__proto__,s===null&&(s=f.nullPolyfill),u.__proto__=s,h&&p(f.nullPolyfill,"__proto__",t),u},Object.defineProperty(i,"level",{configurable:!1,enumerable:!1,writable:!1,value:a.level})):null}(function(){var a=Object.create(null),i={},r,f=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(f){try{r=f.set,r.call(a,i)}catch{}if(Object.getPrototypeOf(a)===i)return{set:r,level:2}}return a.__proto__=i,Object.getPrototypeOf(a)===i?{level:2}:(a={},a.__proto__=i,Object.getPrototypeOf(a)===i?{level:1}:!1)}()),e("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(e,k,z){k.exports=function(l){if(typeof l!="function")throw new TypeError(l+" is not a function");return l}},{}],161:[function(e,k,z){var l=e("./is-object");k.exports=function(o){if(!l(o))throw new TypeError(o+" is not an Object");return o}},{"./is-object":150}],162:[function(e,k,z){var l=e("./is-value");k.exports=function(o){if(!l(o))throw new TypeError("Cannot use null or undefined");return o}},{"./is-value":151}],163:[function(e,k,z){k.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(e,k,z){var l="razdwatrzy";k.exports=function(){return typeof l.contains!="function"?!1:l.contains("dwa")===!0&&l.contains("foo")===!1}},{}],165:[function(e,k,z){var l=String.prototype.indexOf;k.exports=function(o){return l.call(this,o,arguments[1])>-1}},{}],166:[function(e,k,z){var l=Object.prototype.toString,o=l.call("");k.exports=function(c){return typeof c=="string"||c&&typeof c=="object"&&(c instanceof String||l.call(c)===o)||!1}},{}],167:[function(e,k,z){var l=Object.create(null),o=Math.random;k.exports=function(){var c;do c=o().toString(36).slice(2);while(l[c]);return c}},{}],168:[function(e,k,z){var l=e("es5-ext/object/set-prototype-of"),o=e("es5-ext/string/#/contains"),c=e("d"),p=e("es6-symbol"),t=e("./"),n=Object.defineProperty,a;a=k.exports=function(i,r){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");t.call(this,i),r?o.call(r,"key+value")?r="key+value":o.call(r,"key")?r="key":r="value":r="value",n(this,"__kind__",c("",r))},l&&l(a,t),delete a.prototype.constructor,a.prototype=Object.create(t.prototype,{_resolve:c(function(i){return this.__kind__==="value"?this.__list__[i]:this.__kind__==="key+value"?[i,this.__list__[i]]:i})}),n(a.prototype,p.toStringTag,c("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(e,k,z){var l=e("es5-ext/function/is-arguments"),o=e("es5-ext/object/valid-callable"),c=e("es5-ext/string/is-string"),p=e("./get"),t=Array.isArray,n=Function.prototype.call,a=Array.prototype.some;k.exports=function(i,r){var f,u=arguments[2],s,h,d,y,m,g,x;if(t(i)||l(i)?f="array":c(i)?f="string":i=p(i),o(r),h=function(){d=!0},f==="array"){a.call(i,function(A){return n.call(r,u,A,h),d});return}if(f==="string"){for(m=i.length,y=0;y<m&&(g=i[y],y+1<m&&(x=g.charCodeAt(0),x>=55296&&x<=56319&&(g+=i[++y])),n.call(r,u,g,h),!d);++y);return}for(s=i.next();!s.done;){if(n.call(r,u,s.value,h),d)return;s=i.next()}}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(e,k,z){var l=e("es5-ext/function/is-arguments"),o=e("es5-ext/string/is-string"),c=e("./array"),p=e("./string"),t=e("./valid-iterable"),n=e("es6-symbol").iterator;k.exports=function(a){return typeof t(a)[n]=="function"?a[n]():l(a)?new c(a):o(a)?new p(a):new c(a)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(e,k,z){var l=e("es5-ext/array/#/clear"),o=e("es5-ext/object/assign"),c=e("es5-ext/object/valid-callable"),p=e("es5-ext/object/valid-value"),t=e("d"),n=e("d/auto-bind"),a=e("es6-symbol"),i=Object.defineProperty,r=Object.defineProperties,f;k.exports=f=function(u,s){if(!(this instanceof f))throw new TypeError("Constructor requires 'new'");r(this,{__list__:t("w",p(u)),__context__:t("w",s),__nextIndex__:t("w",0)}),!!s&&(c(s.on),s.on("_add",this._onAdd),s.on("_delete",this._onDelete),s.on("_clear",this._onClear))},delete f.prototype.constructor,r(f.prototype,o({_next:t(function(){var u;if(!!this.__list__){if(this.__redo__&&(u=this.__redo__.shift(),u!==void 0))return u;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:t(function(){return this._createResult(this._next())}),_createResult:t(function(u){return u===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(u)}}),_resolve:t(function(u){return this.__list__[u]}),_unBind:t(function(){this.__list__=null,delete this.__redo__,!!this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:t(function(){return"[object "+(this[a.toStringTag]||"Object")+"]"})},n({_onAdd:t(function(u){if(!(u>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){i(this,"__redo__",t("c",[u]));return}this.__redo__.forEach(function(s,h){s>=u&&(this.__redo__[h]=++s)},this),this.__redo__.push(u)}}),_onDelete:t(function(u){var s;u>=this.__nextIndex__||(--this.__nextIndex__,!!this.__redo__&&(s=this.__redo__.indexOf(u),s!==-1&&this.__redo__.splice(s,1),this.__redo__.forEach(function(h,d){h>u&&(this.__redo__[d]=--h)},this)))}),_onClear:t(function(){this.__redo__&&l.call(this.__redo__),this.__nextIndex__=0})}))),i(f.prototype,a.iterator,t(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(e,k,z){var l=e("es5-ext/function/is-arguments"),o=e("es5-ext/object/is-value"),c=e("es5-ext/string/is-string"),p=e("es6-symbol").iterator,t=Array.isArray;k.exports=function(n){return o(n)?t(n)||c(n)||l(n)?!0:typeof n[p]=="function":!1}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(e,k,z){var l=e("es5-ext/object/set-prototype-of"),o=e("d"),c=e("es6-symbol"),p=e("./"),t=Object.defineProperty,n;n=k.exports=function(a){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");a=String(a),p.call(this,a),t(this,"__length__",o("",a.length))},l&&l(n,p),delete n.prototype.constructor,n.prototype=Object.create(p.prototype,{_next:o(function(){if(!!this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:o(function(a){var i=this.__list__[a],r;return this.__nextIndex__===this.__length__?i:(r=i.charCodeAt(0),r>=55296&&r<=56319?i+this.__list__[this.__nextIndex__++]:i)})}),t(n.prototype,c.toStringTag,o("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(e,k,z){var l=e("./is-iterable");k.exports=function(o){if(!l(o))throw new TypeError(o+" is not iterable");return o}},{"./is-iterable":172}],175:[function(e,k,z){k.exports=e("./is-implemented")()?e("ext/global-this").Symbol:e("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(e,k,z){var l=e("ext/global-this"),o={object:!0,symbol:!0};k.exports=function(){var c=l.Symbol,p;if(typeof c!="function")return!1;p=c("test symbol");try{String(p)}catch{return!1}return!(!o[typeof c.iterator]||!o[typeof c.toPrimitive]||!o[typeof c.toStringTag])}},{"ext/global-this":188}],177:[function(e,k,z){k.exports=function(l){return l?typeof l=="symbol"?!0:!l.constructor||l.constructor.name!=="Symbol"?!1:l[l.constructor.toStringTag]==="Symbol":!1}},{}],178:[function(e,k,z){var l=e("d"),o=Object.create,c=Object.defineProperty,p=Object.prototype,t=o(null);k.exports=function(n){for(var a=0,i,r;t[n+(a||"")];)++a;return n+=a||"",t[n]=!0,i="@@"+n,c(p,i,l.gs(null,function(f){r||(r=!0,c(this,i,l(f)),r=!1)})),i}},{d:106}],179:[function(e,k,z){var l=e("d"),o=e("ext/global-this").Symbol;k.exports=function(c){return Object.defineProperties(c,{hasInstance:l("",o&&o.hasInstance||c("hasInstance")),isConcatSpreadable:l("",o&&o.isConcatSpreadable||c("isConcatSpreadable")),iterator:l("",o&&o.iterator||c("iterator")),match:l("",o&&o.match||c("match")),replace:l("",o&&o.replace||c("replace")),search:l("",o&&o.search||c("search")),species:l("",o&&o.species||c("species")),split:l("",o&&o.split||c("split")),toPrimitive:l("",o&&o.toPrimitive||c("toPrimitive")),toStringTag:l("",o&&o.toStringTag||c("toStringTag")),unscopables:l("",o&&o.unscopables||c("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(e,k,z){var l=e("d"),o=e("../../../validate-symbol"),c=Object.create(null);k.exports=function(p){return Object.defineProperties(p,{for:l(function(t){return c[t]?c[t]:c[t]=p(String(t))}),keyFor:l(function(t){var n;o(t);for(n in c)if(c[n]===t)return n})})}},{"../../../validate-symbol":182,d:106}],181:[function(e,k,z){var l=e("d"),o=e("./validate-symbol"),c=e("ext/global-this").Symbol,p=e("./lib/private/generate-name"),t=e("./lib/private/setup/standard-symbols"),n=e("./lib/private/setup/symbol-registry"),a=Object.create,i=Object.defineProperties,r=Object.defineProperty,f,u,s;if(typeof c=="function")try{String(c()),s=!0}catch{}else c=null;u=function(d){if(this instanceof u)throw new TypeError("Symbol is not a constructor");return f(d)},k.exports=f=function h(d){var y;if(this instanceof h)throw new TypeError("Symbol is not a constructor");return s?c(d):(y=a(u.prototype),d=d===void 0?"":String(d),i(y,{__description__:l("",d),__name__:l("",p(d))}))},t(f),n(f),i(u.prototype,{constructor:l(f),toString:l("",function(){return this.__name__})}),i(f.prototype,{toString:l(function(){return"Symbol ("+o(this).__description__+")"}),valueOf:l(function(){return o(this)})}),r(f.prototype,f.toPrimitive,l("",function(){var h=o(this);return typeof h=="symbol"?h:h.toString()})),r(f.prototype,f.toStringTag,l("c","Symbol")),r(u.prototype,f.toStringTag,l("c",f.prototype[f.toStringTag])),r(u.prototype,f.toPrimitive,l("c",f.prototype[f.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(e,k,z){var l=e("./is-symbol");k.exports=function(o){if(!l(o))throw new TypeError(o+" is not a symbol");return o}},{"./is-symbol":177}],183:[function(e,k,z){k.exports=e("./is-implemented")()?WeakMap:e("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(e,k,z){k.exports=function(){var l,o;if(typeof WeakMap!="function")return!1;try{l=new WeakMap([[o={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(l)!=="[object WeakMap]"||typeof l.set!="function"||l.set({},1)!==l||typeof l.delete!="function"||typeof l.has!="function"||l.get(o)!=="one")}},{}],185:[function(e,k,z){k.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},{}],186:[function(e,k,z){var l=e("es5-ext/object/is-value"),o=e("es5-ext/object/set-prototype-of"),c=e("es5-ext/object/valid-object"),p=e("es5-ext/object/valid-value"),t=e("es5-ext/string/random-uniq"),n=e("d"),a=e("es6-iterator/get"),i=e("es6-iterator/for-of"),r=e("es6-symbol").toStringTag,f=e("./is-native-implemented"),u=Array.isArray,s=Object.defineProperty,h=Object.prototype.hasOwnProperty,d=Object.getPrototypeOf,y;k.exports=y=function(){var m=arguments[0],g;if(!(this instanceof y))throw new TypeError("Constructor requires 'new'");return g=f&&o&&WeakMap!==y?o(new WeakMap,d(this)):this,l(m)&&(u(m)||(m=a(m))),s(g,"__weakMapData__",n("c","$weakMap$"+t())),m&&i(m,function(x){p(x),g.set(x[0],x[1])}),g},f&&(o&&o(y,WeakMap),y.prototype=Object.create(WeakMap.prototype,{constructor:n(y)})),Object.defineProperties(y.prototype,{delete:n(function(m){return h.call(c(m),this.__weakMapData__)?(delete m[this.__weakMapData__],!0):!1}),get:n(function(m){if(!!h.call(c(m),this.__weakMapData__))return m[this.__weakMapData__]}),has:n(function(m){return h.call(c(m),this.__weakMapData__)}),set:n(function(m,g){return s(c(m),this.__weakMapData__,n("c",g)),this}),toString:n(function(){return"[object WeakMap]"})}),s(y.prototype,r,n("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(e,k,z){var l=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};k.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return l()}try{return __global__||l()}finally{delete Object.prototype.__global__}}()},{}],188:[function(e,k,z){k.exports=e("./is-implemented")()?globalThis:e("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(e,k,z){k.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},{}],190:[function(e,k,z){var l=e("is-string-blank");k.exports=function(o){var c=typeof o;if(c==="string"){var p=o;if(o=+o,o===0&&l(p))return!1}else if(c!=="number")return!1;return o-o<1}},{"is-string-blank":237}],191:[function(e,k,z){var l=e("dtype");k.exports=o;function o(c,p,t){if(!c)throw new TypeError("must specify data as first parameter");if(t=+(t||0)|0,Array.isArray(c)&&c[0]&&typeof c[0][0]=="number"){var n=c[0].length,a=c.length*n,i,r,f,u;(!p||typeof p=="string")&&(p=new(l(p||"float32"))(a+t));var s=p.length-t;if(a!==s)throw new Error("source length "+a+" ("+n+"x"+c.length+") does not match destination length "+s);for(i=0,f=t;i<c.length;i++)for(r=0;r<n;r++)p[f++]=c[i][r]===null?NaN:c[i][r]}else if(!p||typeof p=="string"){var h=l(p||"float32");if(Array.isArray(c)||p==="array")for(p=new h(c.length+t),i=0,f=t,u=p.length;f<u;f++,i++)p[f]=c[i]===null?NaN:c[i];else t===0?p=new h(c):(p=new h(c.length+t),p.set(c,t))}else p.set(c,t);return p}},{dtype:127}],192:[function(e,k,z){var l=e("css-font/stringify"),o=[32,126];k.exports=c;function c(p){p=p||{};var t=p.shape?p.shape:p.canvas?[p.canvas.width,p.canvas.height]:[512,512],n=p.canvas||document.createElement("canvas"),a=p.font,i=typeof p.step=="number"?[p.step,p.step]:p.step||[32,32],r=p.chars||o;if(a&&typeof a!="string"&&(a=l(a)),!Array.isArray(r))r=String(r).split("");else if(r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"){for(var f=[],u=r[0],s=0;u<=r[1];u++)f[s++]=String.fromCharCode(u);r=f}t=t.slice(),n.width=t[0],n.height=t[1];var h=n.getContext("2d");h.fillStyle="#000",h.fillRect(0,0,n.width,n.height),h.font=a,h.textAlign="center",h.textBaseline="middle",h.fillStyle="#fff";for(var d=i[0]/2,y=i[1]/2,u=0;u<r.length;u++)h.fillText(r[u],d,y),(d+=i[0])>t[0]-i[0]/2&&(d=i[0]/2,y+=i[1]);return n}},{"css-font/stringify":102}],193:[function(e,k,z){k.exports=l,l.canvas=document.createElement("canvas"),l.cache={};function l(t,n){n||(n={}),(typeof t=="string"||Array.isArray(t))&&(n.family=t);var a=Array.isArray(n.family)?n.family.join(", "):n.family;if(!a)throw Error("`family` must be defined");var i=n.size||n.fontSize||n.em||48,r=n.weight||n.fontWeight||"",f=n.style||n.fontStyle||"",t=[f,r,i].join(" ")+"px "+a,u=n.origin||"top";if(l.cache[a]&&i<=l.cache[a].em)return o(l.cache[a],u);var s=n.canvas||l.canvas,h=s.getContext("2d"),d={upper:n.upper!==void 0?n.upper:"H",lower:n.lower!==void 0?n.lower:"x",descent:n.descent!==void 0?n.descent:"p",ascent:n.ascent!==void 0?n.ascent:"h",tittle:n.tittle!==void 0?n.tittle:"i",overshoot:n.overshoot!==void 0?n.overshoot:"O"},y=Math.ceil(i*1.5);s.height=y,s.width=y*.5,h.font=t;var m="H",g={top:0};h.clearRect(0,0,y,y),h.textBaseline="top",h.fillStyle="black",h.fillText(m,0,0);var x=c(h.getImageData(0,0,y,y));h.clearRect(0,0,y,y),h.textBaseline="bottom",h.fillText(m,0,y);var A=c(h.getImageData(0,0,y,y));g.lineHeight=g.bottom=y-A+x,h.clearRect(0,0,y,y),h.textBaseline="alphabetic",h.fillText(m,0,y);var b=c(h.getImageData(0,0,y,y)),S=y-b-1+x;g.baseline=g.alphabetic=S,h.clearRect(0,0,y,y),h.textBaseline="middle",h.fillText(m,0,y*.5);var w=c(h.getImageData(0,0,y,y));g.median=g.middle=y-w-1+x-y*.5,h.clearRect(0,0,y,y),h.textBaseline="hanging",h.fillText(m,0,y*.5);var T=c(h.getImageData(0,0,y,y));g.hanging=y-T-1+x-y*.5,h.clearRect(0,0,y,y),h.textBaseline="ideographic",h.fillText(m,0,y);var _=c(h.getImageData(0,0,y,y));if(g.ideographic=y-_-1+x,d.upper&&(h.clearRect(0,0,y,y),h.textBaseline="top",h.fillText(d.upper,0,0),g.upper=c(h.getImageData(0,0,y,y)),g.capHeight=g.baseline-g.upper),d.lower&&(h.clearRect(0,0,y,y),h.textBaseline="top",h.fillText(d.lower,0,0),g.lower=c(h.getImageData(0,0,y,y)),g.xHeight=g.baseline-g.lower),d.tittle&&(h.clearRect(0,0,y,y),h.textBaseline="top",h.fillText(d.tittle,0,0),g.tittle=c(h.getImageData(0,0,y,y))),d.ascent&&(h.clearRect(0,0,y,y),h.textBaseline="top",h.fillText(d.ascent,0,0),g.ascent=c(h.getImageData(0,0,y,y))),d.descent&&(h.clearRect(0,0,y,y),h.textBaseline="top",h.fillText(d.descent,0,0),g.descent=p(h.getImageData(0,0,y,y))),d.overshoot){h.clearRect(0,0,y,y),h.textBaseline="top",h.fillText(d.overshoot,0,0);var v=p(h.getImageData(0,0,y,y));g.overshoot=v-S}for(var P in g)g[P]/=i;return g.em=i,l.cache[a]=g,o(g,u)}function o(t,n){var a={};typeof n=="string"&&(n=t[n]);for(var i in t)i!=="em"&&(a[i]=t[i]-n);return a}function c(t){for(var n=t.height,a=t.data,i=3;i<a.length;i+=4)if(a[i]!==0)return Math.floor((i-3)*.25/n)}function p(t){for(var n=t.height,a=t.data,i=a.length-1;i>0;i-=4)if(a[i]!==0)return Math.floor((i-3)*.25/n)}},{}],194:[function(e,k,z){k.exports=l;function l(o,c){if(typeof o!="string")throw new TypeError("must specify type string");if(c=c||{},typeof document=="undefined"&&!c.canvas)return null;var p=c.canvas||document.createElement("canvas");typeof c.width=="number"&&(p.width=c.width),typeof c.height=="number"&&(p.height=c.height);var t=c,n;try{var a=[o];o.indexOf("webgl")===0&&a.push("experimental-"+o);for(var i=0;i<a.length;i++)if(n=p.getContext(a[i],t),n)return n}catch{n=null}return n||null}},{}],195:[function(e,k,z){k.exports=l;function l(o,c){var p=c[0],t=c[1],n=c[2],a=c[3],i=c[4],r=c[5],f=c[6],u=c[7],s=c[8],h=c[9],d=c[10],y=c[11],m=c[12],g=c[13],x=c[14],A=c[15];return o[0]=r*(d*A-y*x)-h*(f*A-u*x)+g*(f*y-u*d),o[1]=-(t*(d*A-y*x)-h*(n*A-a*x)+g*(n*y-a*d)),o[2]=t*(f*A-u*x)-r*(n*A-a*x)+g*(n*u-a*f),o[3]=-(t*(f*y-u*d)-r*(n*y-a*d)+h*(n*u-a*f)),o[4]=-(i*(d*A-y*x)-s*(f*A-u*x)+m*(f*y-u*d)),o[5]=p*(d*A-y*x)-s*(n*A-a*x)+m*(n*y-a*d),o[6]=-(p*(f*A-u*x)-i*(n*A-a*x)+m*(n*u-a*f)),o[7]=p*(f*y-u*d)-i*(n*y-a*d)+s*(n*u-a*f),o[8]=i*(h*A-y*g)-s*(r*A-u*g)+m*(r*y-u*h),o[9]=-(p*(h*A-y*g)-s*(t*A-a*g)+m*(t*y-a*h)),o[10]=p*(r*A-u*g)-i*(t*A-a*g)+m*(t*u-a*r),o[11]=-(p*(r*y-u*h)-i*(t*y-a*h)+s*(t*u-a*r)),o[12]=-(i*(h*x-d*g)-s*(r*x-f*g)+m*(r*d-f*h)),o[13]=p*(h*x-d*g)-s*(t*x-n*g)+m*(t*d-n*h),o[14]=-(p*(r*x-f*g)-i*(t*x-n*g)+m*(t*f-n*r)),o[15]=p*(r*d-f*h)-i*(t*d-n*h)+s*(t*f-n*r),o}},{}],196:[function(e,k,z){k.exports=l;function l(o){var c=new Float32Array(16);return c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[3],c[4]=o[4],c[5]=o[5],c[6]=o[6],c[7]=o[7],c[8]=o[8],c[9]=o[9],c[10]=o[10],c[11]=o[11],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15],c}},{}],197:[function(e,k,z){k.exports=l;function l(o,c){return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],o[9]=c[9],o[10]=c[10],o[11]=c[11],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15],o}},{}],198:[function(e,k,z){k.exports=l;function l(){var o=new Float32Array(16);return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],199:[function(e,k,z){k.exports=l;function l(o){var c=o[0],p=o[1],t=o[2],n=o[3],a=o[4],i=o[5],r=o[6],f=o[7],u=o[8],s=o[9],h=o[10],d=o[11],y=o[12],m=o[13],g=o[14],x=o[15],A=c*i-p*a,b=c*r-t*a,S=c*f-n*a,w=p*r-t*i,T=p*f-n*i,_=t*f-n*r,v=u*m-s*y,P=u*g-h*y,M=u*x-d*y,E=s*g-h*m,D=s*x-d*m,N=h*x-d*g;return A*N-b*D+S*E+w*M-T*P+_*v}},{}],200:[function(e,k,z){k.exports=l;function l(o,c){var p=c[0],t=c[1],n=c[2],a=c[3],i=p+p,r=t+t,f=n+n,u=p*i,s=t*i,h=t*r,d=n*i,y=n*r,m=n*f,g=a*i,x=a*r,A=a*f;return o[0]=1-h-m,o[1]=s+A,o[2]=d-x,o[3]=0,o[4]=s-A,o[5]=1-u-m,o[6]=y+g,o[7]=0,o[8]=d+x,o[9]=y-g,o[10]=1-u-h,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],201:[function(e,k,z){k.exports=l;function l(o,c,p){var t,n,a,i=p[0],r=p[1],f=p[2],u=Math.sqrt(i*i+r*r+f*f);return Math.abs(u)<1e-6?null:(u=1/u,i*=u,r*=u,f*=u,t=Math.sin(c),n=Math.cos(c),a=1-n,o[0]=i*i*a+n,o[1]=r*i*a+f*t,o[2]=f*i*a-r*t,o[3]=0,o[4]=i*r*a-f*t,o[5]=r*r*a+n,o[6]=f*r*a+i*t,o[7]=0,o[8]=i*f*a+r*t,o[9]=r*f*a-i*t,o[10]=f*f*a+n,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o)}},{}],202:[function(e,k,z){k.exports=l;function l(o,c,p){var t=c[0],n=c[1],a=c[2],i=c[3],r=t+t,f=n+n,u=a+a,s=t*r,h=t*f,d=t*u,y=n*f,m=n*u,g=a*u,x=i*r,A=i*f,b=i*u;return o[0]=1-(y+g),o[1]=h+b,o[2]=d-A,o[3]=0,o[4]=h-b,o[5]=1-(s+g),o[6]=m+x,o[7]=0,o[8]=d+A,o[9]=m-x,o[10]=1-(s+y),o[11]=0,o[12]=p[0],o[13]=p[1],o[14]=p[2],o[15]=1,o}},{}],203:[function(e,k,z){k.exports=l;function l(o,c){return o[0]=c[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=c[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=c[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],204:[function(e,k,z){k.exports=l;function l(o,c){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=c[0],o[13]=c[1],o[14]=c[2],o[15]=1,o}},{}],205:[function(e,k,z){k.exports=l;function l(o,c){var p=Math.sin(c),t=Math.cos(c);return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=t,o[6]=p,o[7]=0,o[8]=0,o[9]=-p,o[10]=t,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],206:[function(e,k,z){k.exports=l;function l(o,c){var p=Math.sin(c),t=Math.cos(c);return o[0]=t,o[1]=0,o[2]=-p,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=p,o[9]=0,o[10]=t,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],207:[function(e,k,z){k.exports=l;function l(o,c){var p=Math.sin(c),t=Math.cos(c);return o[0]=t,o[1]=p,o[2]=0,o[3]=0,o[4]=-p,o[5]=t,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],208:[function(e,k,z){k.exports=l;function l(o,c,p,t,n,a,i){var r=1/(p-c),f=1/(n-t),u=1/(a-i);return o[0]=a*2*r,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a*2*f,o[6]=0,o[7]=0,o[8]=(p+c)*r,o[9]=(n+t)*f,o[10]=(i+a)*u,o[11]=-1,o[12]=0,o[13]=0,o[14]=i*a*2*u,o[15]=0,o}},{}],209:[function(e,k,z){k.exports=l;function l(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}},{}],210:[function(e,k,z){k.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotation:e("./fromRotation"),fromRotationTranslation:e("./fromRotationTranslation"),fromScaling:e("./fromScaling"),fromTranslation:e("./fromTranslation"),fromXRotation:e("./fromXRotation"),fromYRotation:e("./fromYRotation"),fromZRotation:e("./fromZRotation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(e,k,z){k.exports=l;function l(o,c){var p=c[0],t=c[1],n=c[2],a=c[3],i=c[4],r=c[5],f=c[6],u=c[7],s=c[8],h=c[9],d=c[10],y=c[11],m=c[12],g=c[13],x=c[14],A=c[15],b=p*r-t*i,S=p*f-n*i,w=p*u-a*i,T=t*f-n*r,_=t*u-a*r,v=n*u-a*f,P=s*g-h*m,M=s*x-d*m,E=s*A-y*m,D=h*x-d*g,N=h*A-y*g,O=d*A-y*x,I=b*O-S*N+w*D+T*E-_*M+v*P;return I?(I=1/I,o[0]=(r*O-f*N+u*D)*I,o[1]=(n*N-t*O-a*D)*I,o[2]=(g*v-x*_+A*T)*I,o[3]=(d*_-h*v-y*T)*I,o[4]=(f*E-i*O-u*M)*I,o[5]=(p*O-n*E+a*M)*I,o[6]=(x*w-m*v-A*S)*I,o[7]=(s*v-d*w+y*S)*I,o[8]=(i*N-r*E+u*P)*I,o[9]=(t*E-p*N-a*P)*I,o[10]=(m*_-g*w+A*b)*I,o[11]=(h*w-s*_-y*b)*I,o[12]=(r*M-i*D-f*P)*I,o[13]=(p*D-t*M+n*P)*I,o[14]=(g*S-m*T-x*b)*I,o[15]=(s*T-h*S+d*b)*I,o):null}},{}],212:[function(e,k,z){var l=e("./identity");k.exports=o;function o(c,p,t,n){var a,i,r,f,u,s,h,d,y,m,g=p[0],x=p[1],A=p[2],b=n[0],S=n[1],w=n[2],T=t[0],_=t[1],v=t[2];return Math.abs(g-T)<1e-6&&Math.abs(x-_)<1e-6&&Math.abs(A-v)<1e-6?l(c):(h=g-T,d=x-_,y=A-v,m=1/Math.sqrt(h*h+d*d+y*y),h*=m,d*=m,y*=m,a=S*y-w*d,i=w*h-b*y,r=b*d-S*h,m=Math.sqrt(a*a+i*i+r*r),m?(m=1/m,a*=m,i*=m,r*=m):(a=0,i=0,r=0),f=d*r-y*i,u=y*a-h*r,s=h*i-d*a,m=Math.sqrt(f*f+u*u+s*s),m?(m=1/m,f*=m,u*=m,s*=m):(f=0,u=0,s=0),c[0]=a,c[1]=f,c[2]=h,c[3]=0,c[4]=i,c[5]=u,c[6]=d,c[7]=0,c[8]=r,c[9]=s,c[10]=y,c[11]=0,c[12]=-(a*g+i*x+r*A),c[13]=-(f*g+u*x+s*A),c[14]=-(h*g+d*x+y*A),c[15]=1,c)}},{"./identity":209}],213:[function(e,k,z){k.exports=l;function l(o,c,p){var t=c[0],n=c[1],a=c[2],i=c[3],r=c[4],f=c[5],u=c[6],s=c[7],h=c[8],d=c[9],y=c[10],m=c[11],g=c[12],x=c[13],A=c[14],b=c[15],S=p[0],w=p[1],T=p[2],_=p[3];return o[0]=S*t+w*r+T*h+_*g,o[1]=S*n+w*f+T*d+_*x,o[2]=S*a+w*u+T*y+_*A,o[3]=S*i+w*s+T*m+_*b,S=p[4],w=p[5],T=p[6],_=p[7],o[4]=S*t+w*r+T*h+_*g,o[5]=S*n+w*f+T*d+_*x,o[6]=S*a+w*u+T*y+_*A,o[7]=S*i+w*s+T*m+_*b,S=p[8],w=p[9],T=p[10],_=p[11],o[8]=S*t+w*r+T*h+_*g,o[9]=S*n+w*f+T*d+_*x,o[10]=S*a+w*u+T*y+_*A,o[11]=S*i+w*s+T*m+_*b,S=p[12],w=p[13],T=p[14],_=p[15],o[12]=S*t+w*r+T*h+_*g,o[13]=S*n+w*f+T*d+_*x,o[14]=S*a+w*u+T*y+_*A,o[15]=S*i+w*s+T*m+_*b,o}},{}],214:[function(e,k,z){k.exports=l;function l(o,c,p,t,n,a,i){var r=1/(c-p),f=1/(t-n),u=1/(a-i);return o[0]=-2*r,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*f,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*u,o[11]=0,o[12]=(c+p)*r,o[13]=(n+t)*f,o[14]=(i+a)*u,o[15]=1,o}},{}],215:[function(e,k,z){k.exports=l;function l(o,c,p,t,n){var a=1/Math.tan(c/2),i=1/(t-n);return o[0]=a/p,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(n+t)*i,o[11]=-1,o[12]=0,o[13]=0,o[14]=2*n*t*i,o[15]=0,o}},{}],216:[function(e,k,z){k.exports=l;function l(o,c,p,t){var n=Math.tan(c.upDegrees*Math.PI/180),a=Math.tan(c.downDegrees*Math.PI/180),i=Math.tan(c.leftDegrees*Math.PI/180),r=Math.tan(c.rightDegrees*Math.PI/180),f=2/(i+r),u=2/(n+a);return o[0]=f,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=u,o[6]=0,o[7]=0,o[8]=-((i-r)*f*.5),o[9]=(n-a)*u*.5,o[10]=t/(p-t),o[11]=-1,o[12]=0,o[13]=0,o[14]=t*p/(p-t),o[15]=0,o}},{}],217:[function(e,k,z){k.exports=l;function l(o,c,p,t){var n=t[0],a=t[1],i=t[2],r=Math.sqrt(n*n+a*a+i*i),f,u,s,h,d,y,m,g,x,A,b,S,w,T,_,v,P,M,E,D,N,O,I,F;return Math.abs(r)<1e-6?null:(r=1/r,n*=r,a*=r,i*=r,f=Math.sin(p),u=Math.cos(p),s=1-u,h=c[0],d=c[1],y=c[2],m=c[3],g=c[4],x=c[5],A=c[6],b=c[7],S=c[8],w=c[9],T=c[10],_=c[11],v=n*n*s+u,P=a*n*s+i*f,M=i*n*s-a*f,E=n*a*s-i*f,D=a*a*s+u,N=i*a*s+n*f,O=n*i*s+a*f,I=a*i*s-n*f,F=i*i*s+u,o[0]=h*v+g*P+S*M,o[1]=d*v+x*P+w*M,o[2]=y*v+A*P+T*M,o[3]=m*v+b*P+_*M,o[4]=h*E+g*D+S*N,o[5]=d*E+x*D+w*N,o[6]=y*E+A*D+T*N,o[7]=m*E+b*D+_*N,o[8]=h*O+g*I+S*F,o[9]=d*O+x*I+w*F,o[10]=y*O+A*I+T*F,o[11]=m*O+b*I+_*F,c!==o&&(o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15]),o)}},{}],218:[function(e,k,z){k.exports=l;function l(o,c,p){var t=Math.sin(p),n=Math.cos(p),a=c[4],i=c[5],r=c[6],f=c[7],u=c[8],s=c[9],h=c[10],d=c[11];return c!==o&&(o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15]),o[4]=a*n+u*t,o[5]=i*n+s*t,o[6]=r*n+h*t,o[7]=f*n+d*t,o[8]=u*n-a*t,o[9]=s*n-i*t,o[10]=h*n-r*t,o[11]=d*n-f*t,o}},{}],219:[function(e,k,z){k.exports=l;function l(o,c,p){var t=Math.sin(p),n=Math.cos(p),a=c[0],i=c[1],r=c[2],f=c[3],u=c[8],s=c[9],h=c[10],d=c[11];return c!==o&&(o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15]),o[0]=a*n-u*t,o[1]=i*n-s*t,o[2]=r*n-h*t,o[3]=f*n-d*t,o[8]=a*t+u*n,o[9]=i*t+s*n,o[10]=r*t+h*n,o[11]=f*t+d*n,o}},{}],220:[function(e,k,z){k.exports=l;function l(o,c,p){var t=Math.sin(p),n=Math.cos(p),a=c[0],i=c[1],r=c[2],f=c[3],u=c[4],s=c[5],h=c[6],d=c[7];return c!==o&&(o[8]=c[8],o[9]=c[9],o[10]=c[10],o[11]=c[11],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15]),o[0]=a*n+u*t,o[1]=i*n+s*t,o[2]=r*n+h*t,o[3]=f*n+d*t,o[4]=u*n-a*t,o[5]=s*n-i*t,o[6]=h*n-r*t,o[7]=d*n-f*t,o}},{}],221:[function(e,k,z){k.exports=l;function l(o,c,p){var t=p[0],n=p[1],a=p[2];return o[0]=c[0]*t,o[1]=c[1]*t,o[2]=c[2]*t,o[3]=c[3]*t,o[4]=c[4]*n,o[5]=c[5]*n,o[6]=c[6]*n,o[7]=c[7]*n,o[8]=c[8]*a,o[9]=c[9]*a,o[10]=c[10]*a,o[11]=c[11]*a,o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15],o}},{}],222:[function(e,k,z){k.exports=l;function l(o){return"mat4("+o[0]+", "+o[1]+", "+o[2]+", "+o[3]+", "+o[4]+", "+o[5]+", "+o[6]+", "+o[7]+", "+o[8]+", "+o[9]+", "+o[10]+", "+o[11]+", "+o[12]+", "+o[13]+", "+o[14]+", "+o[15]+")"}},{}],223:[function(e,k,z){k.exports=l;function l(o,c,p){var t=p[0],n=p[1],a=p[2],i,r,f,u,s,h,d,y,m,g,x,A;return c===o?(o[12]=c[0]*t+c[4]*n+c[8]*a+c[12],o[13]=c[1]*t+c[5]*n+c[9]*a+c[13],o[14]=c[2]*t+c[6]*n+c[10]*a+c[14],o[15]=c[3]*t+c[7]*n+c[11]*a+c[15]):(i=c[0],r=c[1],f=c[2],u=c[3],s=c[4],h=c[5],d=c[6],y=c[7],m=c[8],g=c[9],x=c[10],A=c[11],o[0]=i,o[1]=r,o[2]=f,o[3]=u,o[4]=s,o[5]=h,o[6]=d,o[7]=y,o[8]=m,o[9]=g,o[10]=x,o[11]=A,o[12]=i*t+s*n+m*a+c[12],o[13]=r*t+h*n+g*a+c[13],o[14]=f*t+d*n+x*a+c[14],o[15]=u*t+y*n+A*a+c[15]),o}},{}],224:[function(e,k,z){k.exports=l;function l(o,c){if(o===c){var p=c[1],t=c[2],n=c[3],a=c[6],i=c[7],r=c[11];o[1]=c[4],o[2]=c[8],o[3]=c[12],o[4]=p,o[6]=c[9],o[7]=c[13],o[8]=t,o[9]=a,o[11]=c[14],o[12]=n,o[13]=i,o[14]=r}else o[0]=c[0],o[1]=c[4],o[2]=c[8],o[3]=c[12],o[4]=c[1],o[5]=c[5],o[6]=c[9],o[7]=c[13],o[8]=c[2],o[9]=c[6],o[10]=c[10],o[11]=c[14],o[12]=c[3],o[13]=c[7],o[14]=c[11],o[15]=c[15];return o}},{}],225:[function(e,k,z){var l=e("css-font"),o=e("pick-by-alias"),c=e("regl"),p=e("gl-util/context"),t=e("es6-weak-map"),n=e("color-normalize"),a=e("font-atlas"),i=e("typedarray-pool"),r=e("parse-rect"),f=e("is-plain-obj"),u=e("parse-unit"),s=e("to-px"),h=e("detect-kerning"),d=e("object-assign"),y=e("font-measure"),m=e("flatten-vertex-data"),g=e("bit-twiddle"),x=g.nextPow2,A=new t,b=!1;if(document.body){var S=document.body.appendChild(document.createElement("div"));S.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(S).fontStretch&&(b=!0),document.body.removeChild(S)}var w=function(v){T(v)?(v={regl:v},this.gl=v.regl._gl):this.gl=p(v),this.shader=A.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=v.regl||c({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),A.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(f(v)?v:{})};w.prototype.createShader=function(){var v=this.regl,P=v({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:v.prop("count"),offset:v.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:v.this("sizeBuffer")},width:{offset:0,stride:8,buffer:v.this("sizeBuffer")},char:v.this("charBuffer"),position:v.this("position")},uniforms:{atlasSize:function(E,D){return[D.atlas.width,D.atlas.height]},atlasDim:function(E,D){return[D.atlas.cols,D.atlas.rows]},atlas:function(E,D){return D.atlas.texture},charStep:function(E,D){return D.atlas.step},em:function(E,D){return D.atlas.em},color:v.prop("color"),opacity:v.prop("opacity"),viewport:v.this("viewportArray"),scale:v.this("scale"),align:v.prop("align"),baseline:v.prop("baseline"),translate:v.this("translate"),positionOffset:v.prop("positionOffset")},primitive:"points",viewport:v.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),M={};return{regl:v,draw:P,atlas:M}},w.prototype.update=function(v){var P=this;if(typeof v=="string")v={text:v};else if(!v)return;v=o(v,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),v.opacity!=null&&(Array.isArray(v.opacity)?this.opacity=v.opacity.map(function(_e){return parseFloat(_e)}):this.opacity=parseFloat(v.opacity)),v.viewport!=null&&(this.viewport=r(v.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),v.kerning!=null&&(this.kerning=v.kerning),v.offset!=null&&(typeof v.offset=="number"&&(v.offset=[v.offset,0]),this.positionOffset=m(v.offset)),v.direction&&(this.direction=v.direction),v.range&&(this.range=v.range,this.scale=[1/(v.range[2]-v.range[0]),1/(v.range[3]-v.range[1])],this.translate=[-v.range[0],-v.range[1]]),v.scale&&(this.scale=v.scale),v.translate&&(this.translate=v.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!v.font&&(v.font=w.baseFontSize+"px sans-serif");var M=!1,E=!1;if(v.font&&(Array.isArray(v.font)?v.font:[v.font]).forEach(function(_e,Ie){if(typeof _e=="string")try{_e=l.parse(_e)}catch{_e=l.parse(w.baseFontSize+"px "+_e)}else _e=l.parse(l.stringify(_e));var We=l.stringify({size:w.baseFontSize,family:_e.family,stretch:b?_e.stretch:void 0,variant:_e.variant,weight:_e.weight,style:_e.style}),et=u(_e.size),Ne=Math.round(et[0]*s(et[1]));if(Ne!==P.fontSize[Ie]&&(E=!0,P.fontSize[Ie]=Ne),(!P.font[Ie]||We!=P.font[Ie].baseString)&&(M=!0,P.font[Ie]=w.fonts[We],!P.font[Ie])){var De=_e.family.join(", "),Ve=[_e.style];_e.style!=_e.variant&&Ve.push(_e.variant),_e.variant!=_e.weight&&Ve.push(_e.weight),b&&_e.weight!=_e.stretch&&Ve.push(_e.stretch),P.font[Ie]={baseString:We,family:De,weight:_e.weight,stretch:_e.stretch,style:_e.style,variant:_e.variant,width:{},kerning:{},metrics:y(De,{origin:"top",fontSize:w.baseFontSize,fontStyle:Ve.join(" ")})},w.fonts[We]=P.font[Ie]}}),(M||E)&&this.font.forEach(function(_e,Ie){var We=l.stringify({size:P.fontSize[Ie],family:_e.family,stretch:b?_e.stretch:void 0,variant:_e.variant,weight:_e.weight,style:_e.style});if(P.fontAtlas[Ie]=P.shader.atlas[We],!P.fontAtlas[Ie]){var et=_e.metrics;P.shader.atlas[We]=P.fontAtlas[Ie]={fontString:We,step:Math.ceil(P.fontSize[Ie]*et.bottom*.5)*2,em:P.fontSize[Ie],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:P.regl.texture()}}v.text==null&&(v.text=P.text)}),typeof v.text=="string"&&v.position&&v.position.length>2){for(var D=Array(v.position.length*.5),N=0;N<D.length;N++)D[N]=v.text;v.text=D}var O;if(v.text!=null||M){if(this.textOffsets=[0],Array.isArray(v.text)){this.count=v.text[0].length,this.counts=[this.count];for(var I=1;I<v.text.length;I++)this.textOffsets[I]=this.textOffsets[I-1]+v.text[I-1].length,this.count+=v.text[I].length,this.counts.push(v.text[I].length);this.text=v.text.join("")}else this.text=v.text,this.count=this.text.length,this.counts=[this.count];O=[],this.font.forEach(function(_e,Ie){w.atlasContext.font=_e.baseString;for(var We=P.fontAtlas[Ie],et=0;et<P.text.length;et++){var Ne=P.text.charAt(et);if(We.ids[Ne]==null&&(We.ids[Ne]=We.chars.length,We.chars.push(Ne),O.push(Ne)),_e.width[Ne]==null&&(_e.width[Ne]=w.atlasContext.measureText(Ne).width/w.baseFontSize,P.kerning)){var De=[];for(var Ve in _e.width)De.push(Ve+Ne,Ne+Ve);d(_e.kerning,h(_e.family,{pairs:De}))}}})}if(v.position)if(v.position.length>2){for(var F=!v.position[0].length,V=i.mallocFloat(this.count*2),U=0,j=0;U<this.counts.length;U++){var Z=this.counts[U];if(F)for(var te=0;te<Z;te++)V[j++]=v.position[U*2],V[j++]=v.position[U*2+1];else for(var re=0;re<Z;re++)V[j++]=v.position[U][0],V[j++]=v.position[U][1]}this.position.call?this.position({type:"float",data:V}):this.position=this.regl.buffer({type:"float",data:V}),i.freeFloat(V)}else this.position.destroy&&this.position.destroy(),this.position={constant:v.position};if(v.text||M){var W=i.mallocUint8(this.count),J=i.mallocFloat(this.count*2);this.textWidth=[];for(var le=0,ue=0;le<this.counts.length;le++){for(var se=this.counts[le],G=this.font[le]||this.font[0],Y=this.fontAtlas[le]||this.fontAtlas[0],ee=0;ee<se;ee++){var $=this.text.charAt(ue),K=this.text.charAt(ue-1);if(W[ue]=Y.ids[$],J[ue*2]=G.width[$],ee){var Q=J[ue*2-2],ae=J[ue*2],ie=J[ue*2-1],oe=ie+Q*.5+ae*.5;if(this.kerning){var fe=G.kerning[K+$];fe&&(oe+=fe*.001)}J[ue*2+1]=oe}else J[ue*2+1]=J[ue*2]*.5;ue++}this.textWidth.push(J.length?J[ue*2-2]*.5+J[ue*2-1]:0)}v.align||(v.align=this.align),this.charBuffer({data:W,type:"uint8",usage:"stream"}),this.sizeBuffer({data:J,type:"float",usage:"stream"}),i.freeUint8(W),i.freeFloat(J),O.length&&this.font.forEach(function(_e,Ie){var We=P.fontAtlas[Ie],et=We.step,Ne=Math.floor(w.maxAtlasSize/et),De=Math.min(Ne,We.chars.length),Ve=Math.ceil(We.chars.length/De),dt=x(De*et),Dt=x(Ve*et);We.width=dt,We.height=Dt,We.rows=Ve,We.cols=De,!!We.em&&We.texture({data:a({canvas:w.atlasCanvas,font:We.fontString,chars:We.chars,shape:[dt,Dt],step:[et,et]})})})}if(v.align&&(this.align=v.align,this.alignOffset=this.textWidth.map(function(_e,Ie){var We=Array.isArray(P.align)?P.align.length>1?P.align[Ie]:P.align[0]:P.align;if(typeof We=="number")return We;switch(We){case"right":case"end":return-_e;case"center":case"centre":case"middle":return-_e*.5}return 0})),this.baseline==null&&v.baseline==null&&(v.baseline=0),v.baseline!=null&&(this.baseline=v.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(_e,Ie){var We=(P.font[Ie]||P.font[0]).metrics,et=0;return et+=We.bottom*.5,typeof _e=="number"?et+=_e-We.baseline:et+=-We[_e],et*=-1,et})),v.color!=null)if(v.color||(v.color="transparent"),typeof v.color=="string"||!isNaN(v.color))this.color=n(v.color,"uint8");else{var ye;if(typeof v.color[0]=="number"&&v.color.length>this.counts.length){var ce=v.color.length;ye=i.mallocUint8(ce);for(var me=(v.color.subarray||v.color.slice).bind(v.color),xe=0;xe<ce;xe+=4)ye.set(n(me(xe,xe+4),"uint8"),xe)}else{var ke=v.color.length;ye=i.mallocUint8(ke*4);for(var Ae=0;Ae<ke;Ae++)ye.set(n(v.color[Ae]||0,"uint8"),Ae*4)}this.color=ye}if(v.position||v.text||v.color||v.baseline||v.align||v.font||v.offset||v.opacity){var Oe=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(Oe){var He=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(He);for(var Ge=0;Ge<this.batch.length;Ge++)this.batch[Ge]={count:this.counts.length>1?this.counts[Ge]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Ge]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(Ge*4,Ge*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Ge]:this.opacity,baseline:this.baselineOffset[Ge]!=null?this.baselineOffset[Ge]:this.baselineOffset[0],align:this.align?this.alignOffset[Ge]!=null?this.alignOffset[Ge]:this.alignOffset[0]:0,atlas:this.fontAtlas[Ge]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(Ge*2,Ge*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},w.prototype.destroy=function(){},w.prototype.kerning=!0,w.prototype.position={constant:new Float32Array(2)},w.prototype.translate=null,w.prototype.scale=null,w.prototype.font=null,w.prototype.text="",w.prototype.positionOffset=[0,0],w.prototype.opacity=1,w.prototype.color=new Uint8Array([0,0,0,255]),w.prototype.alignOffset=[0,0],w.maxAtlasSize=1024,w.atlasCanvas=document.createElement("canvas"),w.atlasContext=w.atlasCanvas.getContext("2d",{alpha:!1}),w.baseFontSize=64,w.fonts={};function T(_){return typeof _=="function"&&_._gl&&_.prop&&_.texture&&_.buffer}k.exports=w},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:283,"to-px":314,"typedarray-pool":327}],226:[function(e,k,z){(function(l){(function(){var o=e("pick-by-alias");k.exports=function(r){if(r?typeof r=="string"&&(r={container:r}):r={},p(r)?r={container:r}:t(r)?r={container:r}:n(r)?r={gl:r}:r=o(r,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),r.pixelRatio||(r.pixelRatio=l.pixelRatio||1),r.gl)return r.gl;if(r.canvas&&(r.container=r.canvas.parentNode),r.container){if(typeof r.container=="string"){var f=document.querySelector(r.container);if(!f)throw Error("Element "+r.container+" is not found");r.container=f}p(r.container)?(r.canvas=r.container,r.container=r.canvas.parentNode):r.canvas||(r.canvas=a(),r.container.appendChild(r.canvas),c(r))}else if(!r.canvas)if(typeof document!="undefined")r.container=document.body||document.documentElement,r.canvas=a(),r.container.appendChild(r.canvas),c(r);else throw Error("Not DOM environment. Use headless-gl.");return r.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(u){try{r.gl=r.canvas.getContext(u,r.attrs)}catch{}return r.gl}),r.gl};function c(i){if(i.container)if(i.container==document.body)document.body.style.width||(i.canvas.width=i.width||i.pixelRatio*l.innerWidth),document.body.style.height||(i.canvas.height=i.height||i.pixelRatio*l.innerHeight);else{var r=i.container.getBoundingClientRect();i.canvas.width=i.width||r.right-r.left,i.canvas.height=i.height||r.bottom-r.top}}function p(i){return typeof i.getContext=="function"&&"width"in i&&"height"in i}function t(i){return typeof i.nodeName=="string"&&typeof i.appendChild=="function"&&typeof i.getBoundingClientRect=="function"}function n(i){return typeof i.drawArrays=="function"||typeof i.drawElements=="function"}function a(){var i=document.createElement("canvas");return i.style.position="absolute",i.style.top=0,i.style.left=0,i}}).call(this)}).call(this,typeof lo!="undefined"?lo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"pick-by-alias":253}],227:[function(e,k,z){k.exports=function(l){typeof l=="string"&&(l=[l]);for(var o=[].slice.call(arguments,1),c=[],p=0;p<l.length-1;p++)c.push(l[p],o[p]||"");return c.push(l[p]),c.join("")}},{}],228:[function(e,k,z){(function(l){(function(){var o=e("is-browser"),c;typeof l.matchMedia=="function"?c=!l.matchMedia("(hover: none)").matches:c=o,k.exports=c}).call(this)}).call(this,typeof lo!="undefined"?lo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"is-browser":232}],229:[function(e,k,z){var l=e("is-browser");function o(){var c=!1;try{var p=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("test",null,p),window.removeEventListener("test",null,p)}catch{c=!1}return c}k.exports=l&&o()},{"is-browser":232}],230:[function(e,k,z){z.read=function(l,o,c,p,t){var n,a,i=t*8-p-1,r=(1<<i)-1,f=r>>1,u=-7,s=c?t-1:0,h=c?-1:1,d=l[o+s];for(s+=h,n=d&(1<<-u)-1,d>>=-u,u+=i;u>0;n=n*256+l[o+s],s+=h,u-=8);for(a=n&(1<<-u)-1,n>>=-u,u+=p;u>0;a=a*256+l[o+s],s+=h,u-=8);if(n===0)n=1-f;else{if(n===r)return a?NaN:(d?-1:1)*(1/0);a=a+Math.pow(2,p),n=n-f}return(d?-1:1)*a*Math.pow(2,n-p)},z.write=function(l,o,c,p,t,n){var a,i,r,f=n*8-t-1,u=(1<<f)-1,s=u>>1,h=t===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=p?0:n-1,y=p?1:-1,m=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(i=isNaN(o)?1:0,a=u):(a=Math.floor(Math.log(o)/Math.LN2),o*(r=Math.pow(2,-a))<1&&(a--,r*=2),a+s>=1?o+=h/r:o+=h*Math.pow(2,1-s),o*r>=2&&(a++,r/=2),a+s>=u?(i=0,a=u):a+s>=1?(i=(o*r-1)*Math.pow(2,t),a=a+s):(i=o*Math.pow(2,s-1)*Math.pow(2,t),a=0));t>=8;l[c+d]=i&255,d+=y,i/=256,t-=8);for(a=a<<t|i,f+=t;f>0;l[c+d]=a&255,d+=y,a/=256,f-=8);l[c+d-y]|=m*128}},{}],231:[function(e,k,z){typeof Object.create=="function"?k.exports=function(o,c){c&&(o.super_=c,o.prototype=Object.create(c.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}))}:k.exports=function(o,c){if(c){o.super_=c;var p=function(){};p.prototype=c.prototype,o.prototype=new p,o.prototype.constructor=o}}},{}],232:[function(e,k,z){k.exports=!0},{}],233:[function(e,k,z){k.exports=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(e,k,z){k.exports=c,k.exports.isMobile=c,k.exports.default=c;var l=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function c(p){p||(p={});var t=p.ua;if(!t&&typeof navigator!="undefined"&&(t=navigator.userAgent),t&&t.headers&&typeof t.headers["user-agent"]=="string"&&(t=t.headers["user-agent"]),typeof t!="string")return!1;var n=p.tablet?o.test(t):l.test(t);return!n&&p.tablet&&p.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1&&(n=!0),n}},{}],235:[function(e,k,z){k.exports=function(l){var o=typeof l;return l!==null&&(o==="object"||o==="function")}},{}],236:[function(e,k,z){var l=Object.prototype.toString;k.exports=function(o){var c;return l.call(o)==="[object Object]"&&(c=Object.getPrototypeOf(o),c===null||c===Object.getPrototypeOf({}))}},{}],237:[function(e,k,z){k.exports=function(l){for(var o=l.length,c,p=0;p<o;p++)if(c=l.charCodeAt(p),(c<9||c>13)&&c!==32&&c!==133&&c!==160&&c!==5760&&c!==6158&&(c<8192||c>8205)&&c!==8232&&c!==8233&&c!==8239&&c!==8287&&c!==8288&&c!==12288&&c!==65279)return!1;return!0}},{}],238:[function(e,k,z){k.exports=function(o){return typeof o!="string"?!1:(o=o.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(o)&&/[\dz]$/i.test(o)&&o.length>4))}},{}],239:[function(e,k,z){(function(l,o){typeof z=="object"&&typeof k!="undefined"?k.exports=o():(l=l||self,l.mapboxgl=o())})(this,function(){var l,o,c;function p(t,n){if(!l)l=n;else if(!o)o=n;else{var a="var sharedChunk = {}; ("+l+")(sharedChunk); ("+o+")(sharedChunk);",i={};l(i),c=n(i),c.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}}return p(["exports"],function(t){function n(L,R){return R={exports:{}},L(R,R.exports),R.exports}var a="1.10.1",i=r;function r(L,R,H,ne){this.cx=3*L,this.bx=3*(H-L)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*R,this.by=3*(ne-R)-this.cy,this.ay=1-this.cy-this.by,this.p1x=L,this.p1y=ne,this.p2x=H,this.p2y=ne}r.prototype.sampleCurveX=function(L){return((this.ax*L+this.bx)*L+this.cx)*L},r.prototype.sampleCurveY=function(L){return((this.ay*L+this.by)*L+this.cy)*L},r.prototype.sampleCurveDerivativeX=function(L){return(3*this.ax*L+2*this.bx)*L+this.cx},r.prototype.solveCurveX=function(L,R){typeof R=="undefined"&&(R=1e-6);var H,ne,pe,be,Se;for(pe=L,Se=0;Se<8;Se++){if(be=this.sampleCurveX(pe)-L,Math.abs(be)<R)return pe;var ze=this.sampleCurveDerivativeX(pe);if(Math.abs(ze)<1e-6)break;pe=pe-be/ze}if(H=0,ne=1,pe=L,pe<H)return H;if(pe>ne)return ne;for(;H<ne;){if(be=this.sampleCurveX(pe),Math.abs(be-L)<R)return pe;L>be?H=pe:ne=pe,pe=(ne-H)*.5+H}return pe},r.prototype.solve=function(L,R){return this.sampleCurveY(this.solveCurveX(L,R))};var f=u;function u(L,R){this.x=L,this.y=R}u.prototype={clone:function(){return new u(this.x,this.y)},add:function(L){return this.clone()._add(L)},sub:function(L){return this.clone()._sub(L)},multByPoint:function(L){return this.clone()._multByPoint(L)},divByPoint:function(L){return this.clone()._divByPoint(L)},mult:function(L){return this.clone()._mult(L)},div:function(L){return this.clone()._div(L)},rotate:function(L){return this.clone()._rotate(L)},rotateAround:function(L,R){return this.clone()._rotateAround(L,R)},matMult:function(L){return this.clone()._matMult(L)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(L){return this.x===L.x&&this.y===L.y},dist:function(L){return Math.sqrt(this.distSqr(L))},distSqr:function(L){var R=L.x-this.x,H=L.y-this.y;return R*R+H*H},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(L){return Math.atan2(this.y-L.y,this.x-L.x)},angleWith:function(L){return this.angleWithSep(L.x,L.y)},angleWithSep:function(L,R){return Math.atan2(this.x*R-this.y*L,this.x*L+this.y*R)},_matMult:function(L){var R=L[0]*this.x+L[1]*this.y,H=L[2]*this.x+L[3]*this.y;return this.x=R,this.y=H,this},_add:function(L){return this.x+=L.x,this.y+=L.y,this},_sub:function(L){return this.x-=L.x,this.y-=L.y,this},_mult:function(L){return this.x*=L,this.y*=L,this},_div:function(L){return this.x/=L,this.y/=L,this},_multByPoint:function(L){return this.x*=L.x,this.y*=L.y,this},_divByPoint:function(L){return this.x/=L.x,this.y/=L.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var L=this.y;return this.y=this.x,this.x=-L,this},_rotate:function(L){var R=Math.cos(L),H=Math.sin(L),ne=R*this.x-H*this.y,pe=H*this.x+R*this.y;return this.x=ne,this.y=pe,this},_rotateAround:function(L,R){var H=Math.cos(L),ne=Math.sin(L),pe=R.x+H*(this.x-R.x)-ne*(this.y-R.y),be=R.y+ne*(this.x-R.x)+H*(this.y-R.y);return this.x=pe,this.y=be,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},u.convert=function(L){return L instanceof u?L:Array.isArray(L)?new u(L[0],L[1]):L};function s(L,R){if(Array.isArray(L)){if(!Array.isArray(R)||L.length!==R.length)return!1;for(var H=0;H<L.length;H++)if(!s(L[H],R[H]))return!1;return!0}if(typeof L=="object"&&L!==null&&R!==null){if(typeof R!="object")return!1;var ne=Object.keys(L);if(ne.length!==Object.keys(R).length)return!1;for(var pe in L)if(!s(L[pe],R[pe]))return!1;return!0}return L===R}function h(L){if(L<=0)return 0;if(L>=1)return 1;var R=L*L,H=R*L;return 4*(L<.5?H:3*(L-R)+H-.75)}function d(L,R,H,ne){var pe=new i(L,R,H,ne);return function(be){return pe.solve(be)}}var y=d(.25,.1,.25,1);function m(L,R,H){return Math.min(H,Math.max(R,L))}function g(L,R,H){var ne=H-R,pe=((L-R)%ne+ne)%ne+R;return pe===R?H:pe}function x(L,R,H){if(!L.length)return H(null,[]);var ne=L.length,pe=new Array(L.length),be=null;L.forEach(function(Se,ze){R(Se,function(tt,ct){tt&&(be=tt),pe[ze]=ct,--ne==0&&H(be,pe)})})}function A(L){var R=[];for(var H in L)R.push(L[H]);return R}function b(L,R){var H=[];for(var ne in L)ne in R||H.push(ne);return H}function S(L){for(var R=[],H=arguments.length-1;H-- >0;)R[H]=arguments[H+1];for(var ne=0,pe=R;ne<pe.length;ne+=1){var be=pe[ne];for(var Se in be)L[Se]=be[Se]}return L}function w(L,R){for(var H={},ne=0;ne<R.length;ne++){var pe=R[ne];pe in L&&(H[pe]=L[pe])}return H}var T=1;function _(){return T++}function v(){function L(R){return R?(R^Math.random()*16>>R/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,L)}return L()}function P(L){return L?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(L):!1}function M(L,R){L.forEach(function(H){!R[H]||(R[H]=R[H].bind(R))})}function E(L,R){return L.indexOf(R,L.length-R.length)!==-1}function D(L,R,H){var ne={};for(var pe in L)ne[pe]=R.call(H||this,L[pe],pe,L);return ne}function N(L,R,H){var ne={};for(var pe in L)R.call(H||this,L[pe],pe,L)&&(ne[pe]=L[pe]);return ne}function O(L){return Array.isArray(L)?L.map(O):typeof L=="object"&&L?D(L,O):L}function I(L,R){for(var H=0;H<L.length;H++)if(R.indexOf(L[H])>=0)return!0;return!1}var F={};function V(L){F[L]||(typeof console!="undefined"&&console.warn(L),F[L]=!0)}function U(L,R,H){return(H.y-L.y)*(R.x-L.x)>(R.y-L.y)*(H.x-L.x)}function j(L){for(var R=0,H=0,ne=L.length,pe=ne-1,be=void 0,Se=void 0;H<ne;pe=H++)be=L[H],Se=L[pe],R+=(Se.x-be.x)*(be.y+Se.y);return R}function Z(L){var R=L[0],H=L[1],ne=L[2];return H+=90,H*=Math.PI/180,ne*=Math.PI/180,{x:R*Math.cos(H)*Math.sin(ne),y:R*Math.sin(H)*Math.sin(ne),z:R*Math.cos(ne)}}function te(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function re(L){var R=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,H={};if(L.replace(R,function(pe,be,Se,ze){var tt=Se||ze;return H[be]=tt?tt.toLowerCase():!0,""}),H["max-age"]){var ne=parseInt(H["max-age"],10);isNaN(ne)?delete H["max-age"]:H["max-age"]=ne}return H}var W=null;function J(L){if(W==null){var R=L.navigator?L.navigator.userAgent:null;W=!!L.safari||!!(R&&(/\b(iPad|iPhone|iPod)\b/.test(R)||!!R.match("Safari")&&!R.match("Chrome")))}return W}function le(L){try{var R=self[L];return R.setItem("_mapbox_test_",1),R.removeItem("_mapbox_test_"),!0}catch{return!1}}function ue(L){return self.btoa(encodeURIComponent(L).replace(/%([0-9A-F]{2})/g,function(R,H){return String.fromCharCode(Number("0x"+H))}))}function se(L){return decodeURIComponent(self.atob(L).split("").map(function(R){return"%"+("00"+R.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var G=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),Y=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,ee=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,$,K,Q={now:G,frame:function(R){var H=Y(R);return{cancel:function(){return ee(H)}}},getImageData:function(R,H){H===void 0&&(H=0);var ne=self.document.createElement("canvas"),pe=ne.getContext("2d");if(!pe)throw new Error("failed to create canvas 2d context");return ne.width=R.width,ne.height=R.height,pe.drawImage(R,0,0,R.width,R.height),pe.getImageData(-H,-H,R.width+2*H,R.height+2*H)},resolveURL:function(R){return $||($=self.document.createElement("a")),$.href=R,$.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return self.matchMedia?(K==null&&(K=self.matchMedia("(prefers-reduced-motion: reduce)")),K.matches):!1}},ae={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ie={supported:!1,testSupport:me},oe,fe=!1,ye,ce=!1;self.document&&(ye=self.document.createElement("img"),ye.onload=function(){oe&&xe(oe),oe=null,ce=!0},ye.onerror=function(){fe=!0,oe=null},ye.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function me(L){fe||!ye||(ce?xe(L):oe=L)}function xe(L){var R=L.createTexture();L.bindTexture(L.TEXTURE_2D,R);try{if(L.texImage2D(L.TEXTURE_2D,0,L.RGBA,L.RGBA,L.UNSIGNED_BYTE,ye),L.isContextLost())return;ie.supported=!0}catch{}L.deleteTexture(R),fe=!0}var ke="01";function Ae(){for(var L="1",R="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",H="",ne=0;ne<10;ne++)H+=R[Math.floor(Math.random()*62)];var pe=12*60*60*1e3,be=[L,ke,H].join(""),Se=Date.now()+pe;return{token:be,tokenExpiresAt:Se}}var Oe=function(R,H){this._transformRequestFn=R,this._customAccessToken=H,this._createSkuToken()};Oe.prototype._createSkuToken=function(){var R=Ae();this._skuToken=R.token,this._skuTokenExpiresAt=R.tokenExpiresAt},Oe.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Oe.prototype.transformRequest=function(R,H){return this._transformRequestFn?this._transformRequestFn(R,H)||{url:R}:{url:R}},Oe.prototype.normalizeStyleURL=function(R,H){if(!He(R))return R;var ne=Ne(R);return ne.path="/styles/v1"+ne.path,this._makeAPIURL(ne,this._customAccessToken||H)},Oe.prototype.normalizeGlyphsURL=function(R,H){if(!He(R))return R;var ne=Ne(R);return ne.path="/fonts/v1"+ne.path,this._makeAPIURL(ne,this._customAccessToken||H)},Oe.prototype.normalizeSourceURL=function(R,H){if(!He(R))return R;var ne=Ne(R);return ne.path="/v4/"+ne.authority+".json",ne.params.push("secure"),this._makeAPIURL(ne,this._customAccessToken||H)},Oe.prototype.normalizeSpriteURL=function(R,H,ne,pe){var be=Ne(R);return He(R)?(be.path="/styles/v1"+be.path+"/sprite"+H+ne,this._makeAPIURL(be,this._customAccessToken||pe)):(be.path+=""+H+ne,De(be))},Oe.prototype.normalizeTileURL=function(R,H){if(this._isSkuTokenExpired()&&this._createSkuToken(),R&&!He(R))return R;var ne=Ne(R),pe=/(\.(png|jpg)\d*)(?=$)/,be=/^.+\/v4\//,Se=Q.devicePixelRatio>=2||H===512?"@2x":"",ze=ie.supported?".webp":"$1";ne.path=ne.path.replace(pe,""+Se+ze),ne.path=ne.path.replace(be,"/"),ne.path="/v4"+ne.path;var tt=this._customAccessToken||We(ne.params)||ae.ACCESS_TOKEN;return ae.REQUIRE_ACCESS_TOKEN&&tt&&this._skuToken&&ne.params.push("sku="+this._skuToken),this._makeAPIURL(ne,tt)},Oe.prototype.canonicalizeTileURL=function(R,H){var ne="/v4/",pe=/\.[\w]+$/,be=Ne(R);if(!be.path.match(/(^\/v4\/)/)||!be.path.match(pe))return R;var Se="mapbox://tiles/";Se+=be.path.replace(ne,"");var ze=be.params;return H&&(ze=ze.filter(function(tt){return!tt.match(/^access_token=/)})),ze.length&&(Se+="?"+ze.join("&")),Se},Oe.prototype.canonicalizeTileset=function(R,H){for(var ne=H?He(H):!1,pe=[],be=0,Se=R.tiles||[];be<Se.length;be+=1){var ze=Se[be];_e(ze)?pe.push(this.canonicalizeTileURL(ze,ne)):pe.push(ze)}return pe},Oe.prototype._makeAPIURL=function(R,H){var ne="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",pe=Ne(ae.API_URL);if(R.protocol=pe.protocol,R.authority=pe.authority,pe.path!=="/"&&(R.path=""+pe.path+R.path),!ae.REQUIRE_ACCESS_TOKEN)return De(R);if(H=H||ae.ACCESS_TOKEN,!H)throw new Error("An API access token is required to use Mapbox GL. "+ne);if(H[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+ne);return R.params=R.params.filter(function(be){return be.indexOf("access_token")===-1}),R.params.push("access_token="+H),De(R)};function He(L){return L.indexOf("mapbox:")===0}var Ge=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function _e(L){return Ge.test(L)}function Ie(L){return L.indexOf("sku=")>0&&_e(L)}function We(L){for(var R=0,H=L;R<H.length;R+=1){var ne=H[R],pe=ne.match(/^access_token=(.*)$/);if(pe)return pe[1]}return null}var et=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ne(L){var R=L.match(et);if(!R)throw new Error("Unable to parse URL object");return{protocol:R[1],authority:R[2],path:R[3]||"/",params:R[4]?R[4].split("&"):[]}}function De(L){var R=L.params.length?"?"+L.params.join("&"):"";return L.protocol+"://"+L.authority+L.path+R}var Ve="mapbox.eventData";function dt(L){if(!L)return null;var R=L.split(".");if(!R||R.length!==3)return null;try{var H=JSON.parse(se(R[1]));return H}catch{return null}}var Dt=function(R){this.type=R,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Dt.prototype.getStorageKey=function(R){var H=dt(ae.ACCESS_TOKEN),ne="";return H&&H.u?ne=ue(H.u):ne=ae.ACCESS_TOKEN||"",R?Ve+"."+R+":"+ne:Ve+":"+ne},Dt.prototype.fetchEventData=function(){var R=le("localStorage"),H=this.getStorageKey(),ne=this.getStorageKey("uuid");if(R)try{var pe=self.localStorage.getItem(H);pe&&(this.eventData=JSON.parse(pe));var be=self.localStorage.getItem(ne);be&&(this.anonId=be)}catch{V("Unable to read from LocalStorage")}},Dt.prototype.saveEventData=function(){var R=le("localStorage"),H=this.getStorageKey(),ne=this.getStorageKey("uuid");if(R)try{self.localStorage.setItem(ne,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(H,JSON.stringify(this.eventData))}catch{V("Unable to write to LocalStorage")}},Dt.prototype.processRequests=function(R){},Dt.prototype.postEvent=function(R,H,ne,pe){var be=this;if(!!ae.EVENTS_URL){var Se=Ne(ae.EVENTS_URL);Se.params.push("access_token="+(pe||ae.ACCESS_TOKEN||""));var ze={event:this.type,created:new Date(R).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:a,skuId:ke,userId:this.anonId},tt=H?S(ze,H):ze,ct={url:De(Se),headers:{"Content-Type":"text/plain"},body:JSON.stringify([tt])};this.pendingRequest=Ye(ct,function(mt){be.pendingRequest=null,ne(mt),be.saveEventData(),be.processRequests(pe)})}},Dt.prototype.queueRequest=function(R,H){this.queue.push(R),this.processRequests(H)};var Gt=function(L){function R(){L.call(this,"map.load"),this.success={},this.skuToken=""}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.postMapLoadEvent=function(ne,pe,be,Se){this.skuToken=be,(ae.EVENTS_URL&&Se||ae.ACCESS_TOKEN&&Array.isArray(ne)&&ne.some(function(ze){return He(ze)||_e(ze)}))&&this.queueRequest({id:pe,timestamp:Date.now()},Se)},R.prototype.processRequests=function(ne){var pe=this;if(!(this.pendingRequest||this.queue.length===0)){var be=this.queue.shift(),Se=be.id,ze=be.timestamp;Se&&this.success[Se]||(this.anonId||this.fetchEventData(),P(this.anonId)||(this.anonId=v()),this.postEvent(ze,{skuToken:this.skuToken},function(tt){tt||Se&&(pe.success[Se]=!0)},ne))}},R}(Dt),Mt=function(L){function R(H){L.call(this,"appUserTurnstile"),this._customAccessToken=H}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.postTurnstileEvent=function(ne,pe){ae.EVENTS_URL&&ae.ACCESS_TOKEN&&Array.isArray(ne)&&ne.some(function(be){return He(be)||_e(be)})&&this.queueRequest(Date.now(),pe)},R.prototype.processRequests=function(ne){var pe=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var be=dt(ae.ACCESS_TOKEN),Se=be?be.u:ae.ACCESS_TOKEN,ze=Se!==this.eventData.tokenU;P(this.anonId)||(this.anonId=v(),ze=!0);var tt=this.queue.shift();if(this.eventData.lastSuccess){var ct=new Date(this.eventData.lastSuccess),mt=new Date(tt),It=(tt-this.eventData.lastSuccess)/(24*60*60*1e3);ze=ze||It>=1||It<-1||ct.getDate()!==mt.getDate()}else ze=!0;if(!ze)return this.processRequests();this.postEvent(tt,{"enabled.telemetry":!1},function(Kt){Kt||(pe.eventData.lastSuccess=tt,pe.eventData.tokenU=Se)},ne)}},R}(Dt),zt=new Mt,Nt=zt.postTurnstileEvent.bind(zt),Et=new Gt,At=Et.postMapLoadEvent.bind(Et),it="mapbox-tiles",ht=500,$e=50,Ee=1e3*60*7,Xe;function rt(){self.caches&&!Xe&&(Xe=self.caches.open(it))}var ut;function Pt(L,R){if(ut===void 0)try{new Response(new ReadableStream),ut=!0}catch{ut=!1}ut?R(L.body):L.blob().then(R)}function kt(L,R,H){if(rt(),!!Xe){var ne={status:R.status,statusText:R.statusText,headers:new self.Headers};R.headers.forEach(function(Se,ze){return ne.headers.set(ze,Se)});var pe=re(R.headers.get("Cache-Control")||"");if(!pe["no-store"]){pe["max-age"]&&ne.headers.set("Expires",new Date(H+pe["max-age"]*1e3).toUTCString());var be=new Date(ne.headers.get("Expires")).getTime()-H;be<Ee||Pt(R,function(Se){var ze=new self.Response(Se,ne);rt(),!!Xe&&Xe.then(function(tt){return tt.put(Bt(L.url),ze)}).catch(function(tt){return V(tt.message)})})}}}function Bt(L){var R=L.indexOf("?");return R<0?L:L.slice(0,R)}function Xt(L,R){if(rt(),!Xe)return R(null);var H=Bt(L.url);Xe.then(function(ne){ne.match(H).then(function(pe){var be=Ut(pe);ne.delete(H),be&&ne.put(H,pe.clone()),R(null,pe,be)}).catch(R)}).catch(R)}function Ut(L){if(!L)return!1;var R=new Date(L.headers.get("Expires")||0),H=re(L.headers.get("Cache-Control")||"");return R>Date.now()&&!H["no-cache"]}var Jt=1/0;function Je(L){Jt++,Jt>$e&&(L.getActor().send("enforceCacheSizeLimit",ht),Jt=0)}function gt(L){rt(),!!Xe&&Xe.then(function(R){R.keys().then(function(H){for(var ne=0;ne<H.length-L;ne++)R.delete(H[ne])})})}function Ct(L){var R=self.caches.delete(it);L&&R.catch(L).then(function(){return L()})}function or(L,R){ht=L,$e=R}var gr;function lr(){return gr==null&&(gr=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),gr}var mr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(mr);var Fr=function(L){function R(H,ne,pe){ne===401&&_e(pe)&&(H+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),L.call(this,H),this.status=ne,this.url=pe,this.name=this.constructor.name,this.message=H}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},R}(Error),Rr=te()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href},ir=function(L){return/^file:/.test(L)||/^file:/.test(Rr())&&!/^\w+:/.test(L)};function Vr(L,R){var H=new self.AbortController,ne=new self.Request(L.url,{method:L.method||"GET",body:L.body,credentials:L.credentials,headers:L.headers,referrer:Rr(),signal:H.signal}),pe=!1,be=!1,Se=Ie(ne.url);L.type==="json"&&ne.headers.set("Accept","application/json");var ze=function(ct,mt,It){if(!be){if(ct&&ct.message!=="SecurityError"&&V(ct),mt&&It)return tt(mt);var Kt=Date.now();self.fetch(ne).then(function(Wt){if(Wt.ok){var cr=Se?Wt.clone():null;return tt(Wt,cr,Kt)}else return R(new Fr(Wt.statusText,Wt.status,L.url))}).catch(function(Wt){Wt.code!==20&&R(new Error(Wt.message))})}},tt=function(ct,mt,It){(L.type==="arrayBuffer"?ct.arrayBuffer():L.type==="json"?ct.json():ct.text()).then(function(Kt){be||(mt&&It&&kt(ne,mt,It),pe=!0,R(null,Kt,ct.headers.get("Cache-Control"),ct.headers.get("Expires")))}).catch(function(Kt){be||R(new Error(Kt.message))})};return Se?Xt(ne,ze):ze(null,null),{cancel:function(){be=!0,pe||H.abort()}}}function qe(L,R){var H=new self.XMLHttpRequest;H.open(L.method||"GET",L.url,!0),L.type==="arrayBuffer"&&(H.responseType="arraybuffer");for(var ne in L.headers)H.setRequestHeader(ne,L.headers[ne]);return L.type==="json"&&(H.responseType="text",H.setRequestHeader("Accept","application/json")),H.withCredentials=L.credentials==="include",H.onerror=function(){R(new Error(H.statusText))},H.onload=function(){if((H.status>=200&&H.status<300||H.status===0)&&H.response!==null){var pe=H.response;if(L.type==="json")try{pe=JSON.parse(H.response)}catch(be){return R(be)}R(null,pe,H.getResponseHeader("Cache-Control"),H.getResponseHeader("Expires"))}else R(new Fr(H.statusText,H.status,L.url))},H.send(L.body),{cancel:function(){return H.abort()}}}var we=function(L,R){if(!ir(L.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return Vr(L,R);if(te()&&self.worker&&self.worker.actor){var H=!0;return self.worker.actor.send("getResource",L,R,void 0,H)}}return qe(L,R)},Me=function(L,R){return we(S(L,{type:"json"}),R)},Re=function(L,R){return we(S(L,{type:"arrayBuffer"}),R)},Ye=function(L,R){return we(S(L,{method:"POST"}),R)};function Qe(L){var R=self.document.createElement("a");return R.href=L,R.protocol===self.document.location.protocol&&R.host===self.document.location.host}var ot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function st(L,R,H,ne){var pe=new self.Image,be=self.URL;pe.onload=function(){R(null,pe),be.revokeObjectURL(pe.src)},pe.onerror=function(){return R(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Se=new self.Blob([new Uint8Array(L)],{type:"image/png"});pe.cacheControl=H,pe.expires=ne,pe.src=L.byteLength?be.createObjectURL(Se):ot}function pt(L,R){var H=new self.Blob([new Uint8Array(L)],{type:"image/png"});self.createImageBitmap(H).then(function(ne){R(null,ne)}).catch(function(ne){R(new Error("Could not load image because of "+ne.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var wt,Yt,wr=function(){wt=[],Yt=0};wr();var Tr=function(L,R){if(ie.supported&&(L.headers||(L.headers={}),L.headers.accept="image/webp,*/*"),Yt>=ae.MAX_PARALLEL_IMAGE_REQUESTS){var H={requestParameters:L,callback:R,cancelled:!1,cancel:function(){this.cancelled=!0}};return wt.push(H),H}Yt++;var ne=!1,pe=function(){if(!ne)for(ne=!0,Yt--;wt.length&&Yt<ae.MAX_PARALLEL_IMAGE_REQUESTS;){var Se=wt.shift(),ze=Se.requestParameters,tt=Se.callback,ct=Se.cancelled;ct||(Se.cancel=Tr(ze,tt).cancel)}},be=Re(L,function(Se,ze,tt,ct){pe(),Se?R(Se):ze&&(lr()?pt(ze,R):st(ze,R,tt,ct))});return{cancel:function(){be.cancel(),pe()}}},Mr=function(L,R){var H=self.document.createElement("video");H.muted=!0,H.onloadstart=function(){R(null,H)};for(var ne=0;ne<L.length;ne++){var pe=self.document.createElement("source");Qe(L[ne])||(H.crossOrigin="Anonymous"),pe.src=L[ne],H.appendChild(pe)}return{cancel:function(){}}};function _r(L,R,H){var ne=H[L]&&H[L].indexOf(R)!==-1;ne||(H[L]=H[L]||[],H[L].push(R))}function Or(L,R,H){if(H&&H[L]){var ne=H[L].indexOf(R);ne!==-1&&H[L].splice(ne,1)}}var nn=function(R,H){H===void 0&&(H={}),S(this,H),this.type=R},Sr=function(L){function R(H,ne){ne===void 0&&(ne={}),L.call(this,"error",S({error:H},ne))}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R}(nn),yr=function(){};yr.prototype.on=function(R,H){return this._listeners=this._listeners||{},_r(R,H,this._listeners),this},yr.prototype.off=function(R,H){return Or(R,H,this._listeners),Or(R,H,this._oneTimeListeners),this},yr.prototype.once=function(R,H){return this._oneTimeListeners=this._oneTimeListeners||{},_r(R,H,this._oneTimeListeners),this},yr.prototype.fire=function(R,H){typeof R=="string"&&(R=new nn(R,H||{}));var ne=R.type;if(this.listens(ne)){R.target=this;for(var pe=this._listeners&&this._listeners[ne]?this._listeners[ne].slice():[],be=0,Se=pe;be<Se.length;be+=1){var ze=Se[be];ze.call(this,R)}for(var tt=this._oneTimeListeners&&this._oneTimeListeners[ne]?this._oneTimeListeners[ne].slice():[],ct=0,mt=tt;ct<mt.length;ct+=1){var It=mt[ct];Or(ne,It,this._oneTimeListeners),It.call(this,R)}var Kt=this._eventedParent;Kt&&(S(R,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Kt.fire(R))}else R instanceof Sr&&console.error(R.error);return this},yr.prototype.listens=function(R){return this._listeners&&this._listeners[R]&&this._listeners[R].length>0||this._oneTimeListeners&&this._oneTimeListeners[R]&&this._oneTimeListeners[R].length>0||this._eventedParent&&this._eventedParent.listens(R)},yr.prototype.setEventedParent=function(R,H){return this._eventedParent=R,this._eventedParentData=H,this};var gn=8,Xr={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},kr={"*":{type:"source"}},sn=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],cn={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},$r={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},at={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},Ot={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},nr={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},dr={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Zr={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Lr=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Ur={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},xr={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},on={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Pn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},En={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},$n={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},aa={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ca={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ba={type:"array",value:"*"},vr={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},yn={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},en={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},In={type:"array",value:"*",minimum:1},Bn={type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},ha={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},qn=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],Hn={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},la={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},da={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},hr={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},zr={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},ln={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Rt={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},qt={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},br={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},Hr={"*":{type:"string"}},ar={$version:gn,$root:Xr,sources:kr,source:sn,source_vector:cn,source_raster:$r,source_raster_dem:at,source_geojson:Ot,source_video:nr,source_image:dr,layer:Zr,layout:Lr,layout_background:Ur,layout_fill:xr,layout_circle:on,layout_heatmap:Pn,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:En,layout_symbol:$n,layout_raster:aa,layout_hillshade:Ca,filter:ba,filter_operator:vr,geometry_type:yn,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:en,expression:In,expression_name:Bn,light:ha,paint:qn,paint_fill:Hn,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:la,paint_circle:da,paint_heatmap:hr,paint_symbol:zr,paint_raster:ln,paint_hillshade:Rt,paint_background:qt,transition:br,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:Hr},Qt=function(R,H,ne,pe){this.message=(R?R+": ":"")+ne,pe&&(this.identifier=pe),H!=null&&H.__line__&&(this.line=H.__line__)};function Pr(L){var R=L.key,H=L.value;return H?[new Qt(R,H,"constants have been deprecated as of v8")]:[]}function Nr(L){for(var R=[],H=arguments.length-1;H-- >0;)R[H]=arguments[H+1];for(var ne=0,pe=R;ne<pe.length;ne+=1){var be=pe[ne];for(var Se in be)L[Se]=be[Se]}return L}function Tn(L){return L instanceof Number||L instanceof String||L instanceof Boolean?L.valueOf():L}function Nn(L){if(Array.isArray(L))return L.map(Nn);if(L instanceof Object&&!(L instanceof Number||L instanceof String||L instanceof Boolean)){var R={};for(var H in L)R[H]=Nn(L[H]);return R}return Tn(L)}var Gn=function(L){function R(H,ne){L.call(this,ne),this.message=ne,this.key=H}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R}(Error),Wn=function(R,H){H===void 0&&(H=[]),this.parent=R,this.bindings={};for(var ne=0,pe=H;ne<pe.length;ne+=1){var be=pe[ne],Se=be[0],ze=be[1];this.bindings[Se]=ze}};Wn.prototype.concat=function(R){return new Wn(this,R)},Wn.prototype.get=function(R){if(this.bindings[R])return this.bindings[R];if(this.parent)return this.parent.get(R);throw new Error(R+" not found in scope.")},Wn.prototype.has=function(R){return this.bindings[R]?!0:this.parent?this.parent.has(R):!1};var Un={kind:"null"},mn={kind:"number"},Fn={kind:"string"},Xn={kind:"boolean"},ca={kind:"color"},ja={kind:"object"},Pa={kind:"value"},_l={kind:"error"},Ko={kind:"collator"},cs={kind:"formatted"},Gs={kind:"resolvedImage"};function no(L,R){return{kind:"array",itemType:L,N:R}}function Fi(L){if(L.kind==="array"){var R=Fi(L.itemType);return typeof L.N=="number"?"array<"+R+", "+L.N+">":L.itemType.kind==="value"?"array":"array<"+R+">"}else return L.kind}var ol=[Un,mn,Fn,Xn,ca,cs,ja,no(Pa),Gs];function sl(L,R){if(R.kind==="error")return null;if(L.kind==="array"){if(R.kind==="array"&&(R.N===0&&R.itemType.kind==="value"||!sl(L.itemType,R.itemType))&&(typeof L.N!="number"||L.N===R.N))return null}else{if(L.kind===R.kind)return null;if(L.kind==="value")for(var H=0,ne=ol;H<ne.length;H+=1){var pe=ne[H];if(!sl(pe,R))return null}}return"Expected "+Fi(L)+" but found "+Fi(R)+" instead."}function hs(L,R){return R.some(function(H){return H.kind===L.kind})}function Bl(L,R){return R.some(function(H){return H==="null"?L===null:H==="array"?Array.isArray(L):H==="object"?L&&!Array.isArray(L)&&typeof L=="object":H===typeof L})}var Ql=n(function(L,R){var H={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ne(ct){return ct=Math.round(ct),ct<0?0:ct>255?255:ct}function pe(ct){return ct<0?0:ct>1?1:ct}function be(ct){return ct[ct.length-1]==="%"?ne(parseFloat(ct)/100*255):ne(parseInt(ct))}function Se(ct){return ct[ct.length-1]==="%"?pe(parseFloat(ct)/100):pe(parseFloat(ct))}function ze(ct,mt,It){return It<0?It+=1:It>1&&(It-=1),It*6<1?ct+(mt-ct)*It*6:It*2<1?mt:It*3<2?ct+(mt-ct)*(2/3-It)*6:ct}function tt(ct){var mt=ct.replace(/ /g,"").toLowerCase();if(mt in H)return H[mt].slice();if(mt[0]==="#"){if(mt.length===4){var It=parseInt(mt.substr(1),16);return It>=0&&It<=4095?[(It&3840)>>4|(It&3840)>>8,It&240|(It&240)>>4,It&15|(It&15)<<4,1]:null}else if(mt.length===7){var It=parseInt(mt.substr(1),16);return It>=0&&It<=16777215?[(It&16711680)>>16,(It&65280)>>8,It&255,1]:null}return null}var Kt=mt.indexOf("("),Wt=mt.indexOf(")");if(Kt!==-1&&Wt+1===mt.length){var cr=mt.substr(0,Kt),Br=mt.substr(Kt+1,Wt-(Kt+1)).split(","),hn=1;switch(cr){case"rgba":if(Br.length!==4)return null;hn=Se(Br.pop());case"rgb":return Br.length!==3?null:[be(Br[0]),be(Br[1]),be(Br[2]),hn];case"hsla":if(Br.length!==4)return null;hn=Se(Br.pop());case"hsl":if(Br.length!==3)return null;var rn=(parseFloat(Br[0])%360+360)%360/360,kn=Se(Br[1]),_n=Se(Br[2]),Sn=_n<=.5?_n*(kn+1):_n+kn-_n*kn,zn=_n*2-Sn;return[ne(ze(zn,Sn,rn+1/3)*255),ne(ze(zn,Sn,rn)*255),ne(ze(zn,Sn,rn-1/3)*255),hn];default:return null}}return null}try{R.parseCSSColor=tt}catch{}}),Ou=Ql.parseCSSColor,di=function(R,H,ne,pe){pe===void 0&&(pe=1),this.r=R,this.g=H,this.b=ne,this.a=pe};di.parse=function(R){if(!!R){if(R instanceof di)return R;if(typeof R=="string"){var H=Ou(R);if(!!H)return new di(H[0]/255*H[3],H[1]/255*H[3],H[2]/255*H[3],H[3])}}},di.prototype.toString=function(){var R=this.toArray(),H=R[0],ne=R[1],pe=R[2],be=R[3];return"rgba("+Math.round(H)+","+Math.round(ne)+","+Math.round(pe)+","+be+")"},di.prototype.toArray=function(){var R=this,H=R.r,ne=R.g,pe=R.b,be=R.a;return be===0?[0,0,0,0]:[H*255/be,ne*255/be,pe*255/be,be]},di.black=new di(0,0,0,1),di.white=new di(1,1,1,1),di.transparent=new di(0,0,0,0),di.red=new di(1,0,0,1);var wl=function(R,H,ne){R?this.sensitivity=H?"variant":"case":this.sensitivity=H?"accent":"base",this.locale=ne,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};wl.prototype.compare=function(R,H){return this.collator.compare(R,H)},wl.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var ll=function(R,H,ne,pe,be){this.text=R,this.image=H,this.scale=ne,this.fontStack=pe,this.textColor=be},Wi=function(R){this.sections=R};Wi.fromString=function(R){return new Wi([new ll(R,null,null,null,null)])},Wi.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(R){return R.text.length!==0||R.image&&R.image.name.length!==0})},Wi.factory=function(R){return R instanceof Wi?R:Wi.fromString(R)},Wi.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(R){return R.text}).join("")},Wi.prototype.serialize=function(){for(var R=["format"],H=0,ne=this.sections;H<ne.length;H+=1){var pe=ne[H];if(pe.image){R.push(["image",pe.image.name]);continue}R.push(pe.text);var be={};pe.fontStack&&(be["text-font"]=["literal",pe.fontStack.split(",")]),pe.scale&&(be["font-scale"]=pe.scale),pe.textColor&&(be["text-color"]=["rgba"].concat(pe.textColor.toArray())),R.push(be)}return R};var Bo=function(R){this.name=R.name,this.available=R.available};Bo.prototype.toString=function(){return this.name},Bo.fromString=function(R){return R?new Bo({name:R,available:!1}):null},Bo.prototype.serialize=function(){return["image",this.name]};function ql(L,R,H,ne){if(!(typeof L=="number"&&L>=0&&L<=255&&typeof R=="number"&&R>=0&&R<=255&&typeof H=="number"&&H>=0&&H<=255)){var pe=typeof ne=="number"?[L,R,H,ne]:[L,R,H];return"Invalid rgba value ["+pe.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof ne=="undefined"||typeof ne=="number"&&ne>=0&&ne<=1?null:"Invalid rgba value ["+[L,R,H,ne].join(", ")+"]: 'a' must be between 0 and 1."}function Rs(L){if(L===null)return!0;if(typeof L=="string")return!0;if(typeof L=="boolean")return!0;if(typeof L=="number")return!0;if(L instanceof di)return!0;if(L instanceof wl)return!0;if(L instanceof Wi)return!0;if(L instanceof Bo)return!0;if(Array.isArray(L)){for(var R=0,H=L;R<H.length;R+=1){var ne=H[R];if(!Rs(ne))return!1}return!0}else if(typeof L=="object"){for(var pe in L)if(!Rs(L[pe]))return!1;return!0}else return!1}function zi(L){if(L===null)return Un;if(typeof L=="string")return Fn;if(typeof L=="boolean")return Xn;if(typeof L=="number")return mn;if(L instanceof di)return ca;if(L instanceof wl)return Ko;if(L instanceof Wi)return cs;if(L instanceof Bo)return Gs;if(Array.isArray(L)){for(var R=L.length,H,ne=0,pe=L;ne<pe.length;ne+=1){var be=pe[ne],Se=zi(be);if(!H)H=Se;else{if(H===Se)continue;H=Pa;break}}return no(H||Pa,R)}else return ja}function Nl(L){var R=typeof L;return L===null?"":R==="string"||R==="number"||R==="boolean"?String(L):L instanceof di||L instanceof Wi||L instanceof Bo?L.toString():JSON.stringify(L)}var qi=function(R,H){this.type=R,this.value=H};qi.parse=function(R,H){if(R.length!==2)return H.error("'literal' expression requires exactly one argument, but found "+(R.length-1)+" instead.");if(!Rs(R[1]))return H.error("invalid value");var ne=R[1],pe=zi(ne),be=H.expectedType;return pe.kind==="array"&&pe.N===0&&be&&be.kind==="array"&&(typeof be.N!="number"||be.N===0)&&(pe=be),new qi(pe,ne)},qi.prototype.evaluate=function(){return this.value},qi.prototype.eachChild=function(){},qi.prototype.outputDefined=function(){return!0},qi.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof di?["rgba"].concat(this.value.toArray()):this.value instanceof Wi?this.value.serialize():this.value};var Ui=function(R){this.name="ExpressionEvaluationError",this.message=R};Ui.prototype.toJSON=function(){return this.message};var co={string:Fn,number:mn,boolean:Xn,object:ja},eo=function(R,H){this.type=R,this.args=H};eo.parse=function(R,H){if(R.length<2)return H.error("Expected at least one argument.");var ne=1,pe,be=R[0];if(be==="array"){var Se;if(R.length>2){var ze=R[1];if(typeof ze!="string"||!(ze in co)||ze==="object")return H.error('The item type argument of "array" must be one of string, number, boolean',1);Se=co[ze],ne++}else Se=Pa;var tt;if(R.length>3){if(R[2]!==null&&(typeof R[2]!="number"||R[2]<0||R[2]!==Math.floor(R[2])))return H.error('The length argument to "array" must be a positive integer literal',2);tt=R[2],ne++}pe=no(Se,tt)}else pe=co[be];for(var ct=[];ne<R.length;ne++){var mt=H.parse(R[ne],ne,Pa);if(!mt)return null;ct.push(mt)}return new eo(pe,ct)},eo.prototype.evaluate=function(R){for(var H=0;H<this.args.length;H++){var ne=this.args[H].evaluate(R),pe=sl(this.type,zi(ne));if(pe){if(H===this.args.length-1)throw new Ui("Expected value to be of type "+Fi(this.type)+", but found "+Fi(zi(ne))+" instead.")}else return ne}return null},eo.prototype.eachChild=function(R){this.args.forEach(R)},eo.prototype.outputDefined=function(){return this.args.every(function(R){return R.outputDefined()})},eo.prototype.serialize=function(){var R=this.type,H=[R.kind];if(R.kind==="array"){var ne=R.itemType;if(ne.kind==="string"||ne.kind==="number"||ne.kind==="boolean"){H.push(ne.kind);var pe=R.N;(typeof pe=="number"||this.args.length>1)&&H.push(pe)}}return H.concat(this.args.map(function(be){return be.serialize()}))};var xs=function(R){this.type=cs,this.sections=R};xs.parse=function(R,H){if(R.length<2)return H.error("Expected at least one argument.");var ne=R[1];if(!Array.isArray(ne)&&typeof ne=="object")return H.error("First argument must be an image or text section.");for(var pe=[],be=!1,Se=1;Se<=R.length-1;++Se){var ze=R[Se];if(be&&typeof ze=="object"&&!Array.isArray(ze)){be=!1;var tt=null;if(ze["font-scale"]&&(tt=H.parse(ze["font-scale"],1,mn),!tt))return null;var ct=null;if(ze["text-font"]&&(ct=H.parse(ze["text-font"],1,no(Fn)),!ct))return null;var mt=null;if(ze["text-color"]&&(mt=H.parse(ze["text-color"],1,ca),!mt))return null;var It=pe[pe.length-1];It.scale=tt,It.font=ct,It.textColor=mt}else{var Kt=H.parse(R[Se],1,Pa);if(!Kt)return null;var Wt=Kt.type.kind;if(Wt!=="string"&&Wt!=="value"&&Wt!=="null"&&Wt!=="resolvedImage")return H.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");be=!0,pe.push({content:Kt,scale:null,font:null,textColor:null})}}return new xs(pe)},xs.prototype.evaluate=function(R){var H=function(ne){var pe=ne.content.evaluate(R);return zi(pe)===Gs?new ll("",pe,null,null,null):new ll(Nl(pe),null,ne.scale?ne.scale.evaluate(R):null,ne.font?ne.font.evaluate(R).join(","):null,ne.textColor?ne.textColor.evaluate(R):null)};return new Wi(this.sections.map(H))},xs.prototype.eachChild=function(R){for(var H=0,ne=this.sections;H<ne.length;H+=1){var pe=ne[H];R(pe.content),pe.scale&&R(pe.scale),pe.font&&R(pe.font),pe.textColor&&R(pe.textColor)}},xs.prototype.outputDefined=function(){return!1},xs.prototype.serialize=function(){for(var R=["format"],H=0,ne=this.sections;H<ne.length;H+=1){var pe=ne[H];R.push(pe.content.serialize());var be={};pe.scale&&(be["font-scale"]=pe.scale.serialize()),pe.font&&(be["text-font"]=pe.font.serialize()),pe.textColor&&(be["text-color"]=pe.textColor.serialize()),R.push(be)}return R};var Tl=function(R){this.type=Gs,this.input=R};Tl.parse=function(R,H){if(R.length!==2)return H.error("Expected two arguments.");var ne=H.parse(R[1],1,Fn);return ne?new Tl(ne):H.error("No image name provided.")},Tl.prototype.evaluate=function(R){var H=this.input.evaluate(R),ne=Bo.fromString(H);return ne&&R.availableImages&&(ne.available=R.availableImages.indexOf(H)>-1),ne},Tl.prototype.eachChild=function(R){R(this.input)},Tl.prototype.outputDefined=function(){return!1},Tl.prototype.serialize=function(){return["image",this.input.serialize()]};var qu={"to-boolean":Xn,"to-color":ca,"to-number":mn,"to-string":Fn},vs=function(R,H){this.type=R,this.args=H};vs.parse=function(R,H){if(R.length<2)return H.error("Expected at least one argument.");var ne=R[0];if((ne==="to-boolean"||ne==="to-string")&&R.length!==2)return H.error("Expected one argument.");for(var pe=qu[ne],be=[],Se=1;Se<R.length;Se++){var ze=H.parse(R[Se],Se,Pa);if(!ze)return null;be.push(ze)}return new vs(pe,be)},vs.prototype.evaluate=function(R){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(R));if(this.type.kind==="color"){for(var H,ne,pe=0,be=this.args;pe<be.length;pe+=1){var Se=be[pe];if(H=Se.evaluate(R),ne=null,H instanceof di)return H;if(typeof H=="string"){var ze=R.parseColor(H);if(ze)return ze}else if(Array.isArray(H)&&(H.length<3||H.length>4?ne="Invalid rbga value "+JSON.stringify(H)+": expected an array containing either three or four numeric values.":ne=ql(H[0],H[1],H[2],H[3]),!ne))return new di(H[0]/255,H[1]/255,H[2]/255,H[3])}throw new Ui(ne||"Could not parse color from value '"+(typeof H=="string"?H:String(JSON.stringify(H)))+"'")}else if(this.type.kind==="number"){for(var tt=null,ct=0,mt=this.args;ct<mt.length;ct+=1){var It=mt[ct];if(tt=It.evaluate(R),tt===null)return 0;var Kt=Number(tt);if(!isNaN(Kt))return Kt}throw new Ui("Could not convert "+JSON.stringify(tt)+" to number.")}else return this.type.kind==="formatted"?Wi.fromString(Nl(this.args[0].evaluate(R))):this.type.kind==="resolvedImage"?Bo.fromString(Nl(this.args[0].evaluate(R))):Nl(this.args[0].evaluate(R))},vs.prototype.eachChild=function(R){this.args.forEach(R)},vs.prototype.outputDefined=function(){return this.args.every(function(R){return R.outputDefined()})},vs.prototype.serialize=function(){if(this.type.kind==="formatted")return new xs([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Tl(this.args[0]).serialize();var R=["to-"+this.type.kind];return this.eachChild(function(H){R.push(H.serialize())}),R};var ef=["Unknown","Point","LineString","Polygon"],ul=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ul.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ul.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?ef[this.feature.type]:this.feature.type:null},ul.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ul.prototype.canonicalID=function(){return this.canonical},ul.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ul.prototype.parseColor=function(R){var H=this._parseColorCache[R];return H||(H=this._parseColorCache[R]=di.parse(R)),H};var No=function(R,H,ne,pe){this.name=R,this.type=H,this._evaluate=ne,this.args=pe};No.prototype.evaluate=function(R){return this._evaluate(R,this.args)},No.prototype.eachChild=function(R){this.args.forEach(R)},No.prototype.outputDefined=function(){return!1},No.prototype.serialize=function(){return[this.name].concat(this.args.map(function(R){return R.serialize()}))},No.parse=function(R,H){var ne,pe=R[0],be=No.definitions[pe];if(!be)return H.error('Unknown expression "'+pe+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Se=Array.isArray(be)?be[0]:be.type,ze=Array.isArray(be)?[[be[1],be[2]]]:be.overloads,tt=ze.filter(function(Fa){var Oa=Fa[0];return!Array.isArray(Oa)||Oa.length===R.length-1}),ct=null,mt=0,It=tt;mt<It.length;mt+=1){var Kt=It[mt],Wt=Kt[0],cr=Kt[1];ct=new Uo(H.registry,H.path,null,H.scope);for(var Br=[],hn=!1,rn=1;rn<R.length;rn++){var kn=R[rn],_n=Array.isArray(Wt)?Wt[rn-1]:Wt.type,Sn=ct.parse(kn,1+Br.length,_n);if(!Sn){hn=!0;break}Br.push(Sn)}if(!hn){if(Array.isArray(Wt)&&Wt.length!==Br.length){ct.error("Expected "+Wt.length+" arguments, but found "+Br.length+" instead.");continue}for(var zn=0;zn<Br.length;zn++){var Kn=Array.isArray(Wt)?Wt[zn]:Wt.type,fa=Br[zn];ct.concat(zn+1).checkSubtype(Kn,fa.type)}if(ct.errors.length===0)return new No(pe,Se,cr,Br)}}if(tt.length===1)(ne=H.errors).push.apply(ne,ct.errors);else{for(var sa=tt.length?tt:ze,Ba=sa.map(function(Fa){var Oa=Fa[0];return kf(Oa)}).join(" | "),ka=[],La=1;La<R.length;La++){var ni=H.parse(R[La],1+ka.length);if(!ni)return null;ka.push(Fi(ni.type))}H.error("Expected arguments of type "+Ba+", but found ("+ka.join(", ")+") instead.")}return null},No.register=function(R,H){No.definitions=H;for(var ne in H)R[ne]=No};function kf(L){return Array.isArray(L)?"("+L.map(Fi).join(", ")+")":"("+Fi(L.type)+"...)"}var fl=function(R,H,ne){this.type=Ko,this.locale=ne,this.caseSensitive=R,this.diacriticSensitive=H};fl.parse=function(R,H){if(R.length!==2)return H.error("Expected one argument.");var ne=R[1];if(typeof ne!="object"||Array.isArray(ne))return H.error("Collator options argument must be an object.");var pe=H.parse(ne["case-sensitive"]===void 0?!1:ne["case-sensitive"],1,Xn);if(!pe)return null;var be=H.parse(ne["diacritic-sensitive"]===void 0?!1:ne["diacritic-sensitive"],1,Xn);if(!be)return null;var Se=null;return ne.locale&&(Se=H.parse(ne.locale,1,Fn),!Se)?null:new fl(pe,be,Se)},fl.prototype.evaluate=function(R){return new wl(this.caseSensitive.evaluate(R),this.diacriticSensitive.evaluate(R),this.locale?this.locale.evaluate(R):null)},fl.prototype.eachChild=function(R){R(this.caseSensitive),R(this.diacriticSensitive),this.locale&&R(this.locale)},fl.prototype.outputDefined=function(){return!1},fl.prototype.serialize=function(){var R={};return R["case-sensitive"]=this.caseSensitive.serialize(),R["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(R.locale=this.locale.serialize()),["collator",R]};var Ws=8192;function mu(L,R){L[0]=Math.min(L[0],R[0]),L[1]=Math.min(L[1],R[1]),L[2]=Math.max(L[2],R[0]),L[3]=Math.max(L[3],R[1])}function Cf(L){return(180+L)/360}function Ef(L){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+L*Math.PI/360)))/360}function Al(L,R){return!(L[0]<=R[0]||L[2]>=R[2]||L[1]<=R[1]||L[3]>=R[3])}function yu(L,R){var H=Cf(L[0]),ne=Ef(L[1]),pe=Math.pow(2,R.z);return[Math.round(H*pe*Ws),Math.round(ne*pe*Ws)]}function Ys(L,R,H){var ne=L[0]-R[0],pe=L[1]-R[1],be=L[0]-H[0],Se=L[1]-H[1];return ne*Se-be*pe==0&&ne*be<=0&&pe*Se<=0}function Bu(L,R,H){return R[1]>L[1]!=H[1]>L[1]&&L[0]<(H[0]-R[0])*(L[1]-R[1])/(H[1]-R[1])+R[0]}function Ul(L,R){for(var H=!1,ne=0,pe=R.length;ne<pe;ne++)for(var be=R[ne],Se=0,ze=be.length;Se<ze-1;Se++){if(Ys(L,be[Se],be[Se+1]))return!1;Bu(L,be[Se],be[Se+1])&&(H=!H)}return H}function Nu(L,R){for(var H=0;H<R.length;H++)if(Ul(L,R[H]))return!0;return!1}function tf(L,R){return L[0]*R[1]-L[1]*R[0]}function xu(L,R,H,ne){var pe=L[0]-H[0],be=L[1]-H[1],Se=R[0]-H[0],ze=R[1]-H[1],tt=ne[0]-H[0],ct=ne[1]-H[1],mt=pe*ct-tt*be,It=Se*ct-tt*ze;return mt>0&&It<0||mt<0&&It>0}function Lf(L,R,H,ne){var pe=[R[0]-L[0],R[1]-L[1]],be=[ne[0]-H[0],ne[1]-H[1]];return tf(be,pe)===0?!1:!!(xu(L,R,H,ne)&&xu(H,ne,L,R))}function Sl(L,R,H){for(var ne=0,pe=H;ne<pe.length;ne+=1)for(var be=pe[ne],Se=0;Se<be.length-1;++Se)if(Lf(L,R,be[Se],be[Se+1]))return!0;return!1}function Uu(L,R){for(var H=0;H<L.length;++H)if(!Ul(L[H],R))return!1;for(var ne=0;ne<L.length-1;++ne)if(Sl(L[ne],L[ne+1],R))return!1;return!0}function bu(L,R){for(var H=0;H<R.length;H++)if(Uu(L,R[H]))return!0;return!1}function Ds(L,R,H){for(var ne=[],pe=0;pe<L.length;pe++){for(var be=[],Se=0;Se<L[pe].length;Se++){var ze=yu(L[pe][Se],H);mu(R,ze),be.push(ze)}ne.push(be)}return ne}function eu(L,R,H){for(var ne=[],pe=0;pe<L.length;pe++){var be=Ds(L[pe],R,H);ne.push(be)}return ne}function Vu(L,R,H,ne){if(L[0]<H[0]||L[0]>H[2]){var pe=ne*.5,be=L[0]-H[0]>pe?-ne:H[0]-L[0]>pe?ne:0;be===0&&(be=L[0]-H[2]>pe?-ne:H[2]-L[0]>pe?ne:0),L[0]+=be}mu(R,L)}function rf(L){L[0]=L[1]=1/0,L[2]=L[3]=-1/0}function nf(L,R,H,ne){for(var pe=Math.pow(2,ne.z)*Ws,be=[ne.x*Ws,ne.y*Ws],Se=[],ze=0,tt=L;ze<tt.length;ze+=1)for(var ct=tt[ze],mt=0,It=ct;mt<It.length;mt+=1){var Kt=It[mt],Wt=[Kt.x+be[0],Kt.y+be[1]];Vu(Wt,R,H,pe),Se.push(Wt)}return Se}function _u(L,R,H,ne){for(var pe=Math.pow(2,ne.z)*Ws,be=[ne.x*Ws,ne.y*Ws],Se=[],ze=0,tt=L;ze<tt.length;ze+=1){for(var ct=tt[ze],mt=[],It=0,Kt=ct;It<Kt.length;It+=1){var Wt=Kt[It],cr=[Wt.x+be[0],Wt.y+be[1]];mu(R,cr),mt.push(cr)}Se.push(mt)}if(R[2]-R[0]<=pe/2){rf(R);for(var Br=0,hn=Se;Br<hn.length;Br+=1)for(var rn=hn[Br],kn=0,_n=rn;kn<_n.length;kn+=1){var Sn=_n[kn];Vu(Sn,R,H,pe)}}return Se}function Pf(L,R){var H=[1/0,1/0,-1/0,-1/0],ne=[1/0,1/0,-1/0,-1/0],pe=L.canonicalID();if(R.type==="Polygon"){var be=Ds(R.coordinates,ne,pe),Se=nf(L.geometry(),H,ne,pe);if(!Al(H,ne))return!1;for(var ze=0,tt=Se;ze<tt.length;ze+=1){var ct=tt[ze];if(!Ul(ct,be))return!1}}if(R.type==="MultiPolygon"){var mt=eu(R.coordinates,ne,pe),It=nf(L.geometry(),H,ne,pe);if(!Al(H,ne))return!1;for(var Kt=0,Wt=It;Kt<Wt.length;Kt+=1){var cr=Wt[Kt];if(!Nu(cr,mt))return!1}}return!0}function af(L,R){var H=[1/0,1/0,-1/0,-1/0],ne=[1/0,1/0,-1/0,-1/0],pe=L.canonicalID();if(R.type==="Polygon"){var be=Ds(R.coordinates,ne,pe),Se=_u(L.geometry(),H,ne,pe);if(!Al(H,ne))return!1;for(var ze=0,tt=Se;ze<tt.length;ze+=1){var ct=tt[ze];if(!Uu(ct,be))return!1}}if(R.type==="MultiPolygon"){var mt=eu(R.coordinates,ne,pe),It=_u(L.geometry(),H,ne,pe);if(!Al(H,ne))return!1;for(var Kt=0,Wt=It;Kt<Wt.length;Kt+=1){var cr=Wt[Kt];if(!bu(cr,mt))return!1}}return!0}var ps=function(R,H){this.type=Xn,this.geojson=R,this.geometries=H};ps.parse=function(R,H){if(R.length!==2)return H.error("'within' expression requires exactly one argument, but found "+(R.length-1)+" instead.");if(Rs(R[1])){var ne=R[1];if(ne.type==="FeatureCollection")for(var pe=0;pe<ne.features.length;++pe){var be=ne.features[pe].geometry.type;if(be==="Polygon"||be==="MultiPolygon")return new ps(ne,ne.features[pe].geometry)}else if(ne.type==="Feature"){var Se=ne.geometry.type;if(Se==="Polygon"||Se==="MultiPolygon")return new ps(ne,ne.geometry)}else if(ne.type==="Polygon"||ne.type==="MultiPolygon")return new ps(ne,ne)}return H.error("'within' expression requires valid geojson object that contains polygon geometry type.")},ps.prototype.evaluate=function(R){if(R.geometry()!=null&&R.canonicalID()!=null){if(R.geometryType()==="Point")return Pf(R,this.geometries);if(R.geometryType()==="LineString")return af(R,this.geometries)}return!1},ps.prototype.eachChild=function(){},ps.prototype.outputDefined=function(){return!0},ps.prototype.serialize=function(){return["within",this.geojson]};function Vl(L){if(L instanceof No){if(L.name==="get"&&L.args.length===1)return!1;if(L.name==="feature-state")return!1;if(L.name==="has"&&L.args.length===1)return!1;if(L.name==="properties"||L.name==="geometry-type"||L.name==="id")return!1;if(/^filter-/.test(L.name))return!1}if(L instanceof ps)return!1;var R=!0;return L.eachChild(function(H){R&&!Vl(H)&&(R=!1)}),R}function Hl(L){if(L instanceof No&&L.name==="feature-state")return!1;var R=!0;return L.eachChild(function(H){R&&!Hl(H)&&(R=!1)}),R}function Hu(L,R){if(L instanceof No&&R.indexOf(L.name)>=0)return!1;var H=!0;return L.eachChild(function(ne){H&&!Hu(ne,R)&&(H=!1)}),H}var Is=function(R,H){this.type=H.type,this.name=R,this.boundExpression=H};Is.parse=function(R,H){if(R.length!==2||typeof R[1]!="string")return H.error("'var' expression requires exactly one string literal argument.");var ne=R[1];return H.scope.has(ne)?new Is(ne,H.scope.get(ne)):H.error('Unknown variable "'+ne+'". Make sure "'+ne+'" has been bound in an enclosing "let" expression before using it.',1)},Is.prototype.evaluate=function(R){return this.boundExpression.evaluate(R)},Is.prototype.eachChild=function(){},Is.prototype.outputDefined=function(){return!1},Is.prototype.serialize=function(){return["var",this.name]};var Uo=function(R,H,ne,pe,be){H===void 0&&(H=[]),pe===void 0&&(pe=new Wn),be===void 0&&(be=[]),this.registry=R,this.path=H,this.key=H.map(function(Se){return"["+Se+"]"}).join(""),this.scope=pe,this.errors=be,this.expectedType=ne};Uo.prototype.parse=function(R,H,ne,pe,be){return be===void 0&&(be={}),H?this.concat(H,ne,pe)._parse(R,be):this._parse(R,be)},Uo.prototype._parse=function(R,H){(R===null||typeof R=="string"||typeof R=="boolean"||typeof R=="number")&&(R=["literal",R]);function ne(mt,It,Kt){return Kt==="assert"?new eo(It,[mt]):Kt==="coerce"?new vs(It,[mt]):mt}if(Array.isArray(R)){if(R.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var pe=R[0];if(typeof pe!="string")return this.error("Expression name must be a string, but found "+typeof pe+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var be=this.registry[pe];if(be){var Se=be.parse(R,this);if(!Se)return null;if(this.expectedType){var ze=this.expectedType,tt=Se.type;if((ze.kind==="string"||ze.kind==="number"||ze.kind==="boolean"||ze.kind==="object"||ze.kind==="array")&&tt.kind==="value")Se=ne(Se,ze,H.typeAnnotation||"assert");else if((ze.kind==="color"||ze.kind==="formatted"||ze.kind==="resolvedImage")&&(tt.kind==="value"||tt.kind==="string"))Se=ne(Se,ze,H.typeAnnotation||"coerce");else if(this.checkSubtype(ze,tt))return null}if(!(Se instanceof qi)&&Se.type.kind!=="resolvedImage"&&wu(Se)){var ct=new ul;try{Se=new qi(Se.type,Se.evaluate(ct))}catch(mt){return this.error(mt.message),null}}return Se}return this.error('Unknown expression "'+pe+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof R=="undefined"?this.error("'undefined' value invalid. Use null instead."):typeof R=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof R+" instead.")},Uo.prototype.concat=function(R,H,ne){var pe=typeof R=="number"?this.path.concat(R):this.path,be=ne?this.scope.concat(ne):this.scope;return new Uo(this.registry,pe,H||null,be,this.errors)},Uo.prototype.error=function(R){for(var H=[],ne=arguments.length-1;ne-- >0;)H[ne]=arguments[ne+1];var pe=""+this.key+H.map(function(be){return"["+be+"]"}).join("");this.errors.push(new Gn(pe,R))},Uo.prototype.checkSubtype=function(R,H){var ne=sl(R,H);return ne&&this.error(ne),ne};function wu(L){if(L instanceof Is)return wu(L.boundExpression);if(L instanceof No&&L.name==="error")return!1;if(L instanceof fl)return!1;if(L instanceof ps)return!1;var R=L instanceof vs||L instanceof eo,H=!0;return L.eachChild(function(ne){R?H=H&&wu(ne):H=H&&ne instanceof qi}),H?Vl(L)&&Hu(L,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function js(L,R){for(var H=L.length-1,ne=0,pe=H,be=0,Se,ze;ne<=pe;)if(be=Math.floor((ne+pe)/2),Se=L[be],ze=L[be+1],Se<=R){if(be===H||R<ze)return be;ne=be+1}else if(Se>R)pe=be-1;else throw new Ui("Input is not a number.");return 0}var Xs=function(R,H,ne){this.type=R,this.input=H,this.labels=[],this.outputs=[];for(var pe=0,be=ne;pe<be.length;pe+=1){var Se=be[pe],ze=Se[0],tt=Se[1];this.labels.push(ze),this.outputs.push(tt)}};Xs.parse=function(R,H){if(R.length-1<4)return H.error("Expected at least 4 arguments, but found only "+(R.length-1)+".");if((R.length-1)%2!=0)return H.error("Expected an even number of arguments.");var ne=H.parse(R[1],1,mn);if(!ne)return null;var pe=[],be=null;H.expectedType&&H.expectedType.kind!=="value"&&(be=H.expectedType);for(var Se=1;Se<R.length;Se+=2){var ze=Se===1?-1/0:R[Se],tt=R[Se+1],ct=Se,mt=Se+1;if(typeof ze!="number")return H.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ct);if(pe.length&&pe[pe.length-1][0]>=ze)return H.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ct);var It=H.parse(tt,mt,be);if(!It)return null;be=be||It.type,pe.push([ze,It])}return new Xs(be,ne,pe)},Xs.prototype.evaluate=function(R){var H=this.labels,ne=this.outputs;if(H.length===1)return ne[0].evaluate(R);var pe=this.input.evaluate(R);if(pe<=H[0])return ne[0].evaluate(R);var be=H.length;if(pe>=H[be-1])return ne[be-1].evaluate(R);var Se=js(H,pe);return ne[Se].evaluate(R)},Xs.prototype.eachChild=function(R){R(this.input);for(var H=0,ne=this.outputs;H<ne.length;H+=1){var pe=ne[H];R(pe)}},Xs.prototype.outputDefined=function(){return this.outputs.every(function(R){return R.outputDefined()})},Xs.prototype.serialize=function(){for(var R=["step",this.input.serialize()],H=0;H<this.labels.length;H++)H>0&&R.push(this.labels[H]),R.push(this.outputs[H].serialize());return R};function po(L,R,H){return L*(1-H)+R*H}function tu(L,R,H){return new di(po(L.r,R.r,H),po(L.g,R.g,H),po(L.b,R.b,H),po(L.a,R.a,H))}function ru(L,R,H){return L.map(function(ne,pe){return po(ne,R[pe],H)})}var Ml=Object.freeze({__proto__:null,number:po,color:tu,array:ru}),Fs=.95047,nu=1,Gl=1.08883,Tu=4/29,au=6/29,kl=3*au*au,Rf=au*au*au,bs=Math.PI/180,ic=180/Math.PI;function Gu(L){return L>Rf?Math.pow(L,1/3):L/kl+Tu}function Wl(L){return L>au?L*L*L:kl*(L-Tu)}function iu(L){return 255*(L<=.0031308?12.92*L:1.055*Math.pow(L,1/2.4)-.055)}function Cl(L){return L/=255,L<=.04045?L/12.92:Math.pow((L+.055)/1.055,2.4)}function ou(L){var R=Cl(L.r),H=Cl(L.g),ne=Cl(L.b),pe=Gu((.4124564*R+.3575761*H+.1804375*ne)/Fs),be=Gu((.2126729*R+.7151522*H+.072175*ne)/nu),Se=Gu((.0193339*R+.119192*H+.9503041*ne)/Gl);return{l:116*be-16,a:500*(pe-be),b:200*(be-Se),alpha:L.a}}function of(L){var R=(L.l+16)/116,H=isNaN(L.a)?R:R+L.a/500,ne=isNaN(L.b)?R:R-L.b/200;return R=nu*Wl(R),H=Fs*Wl(H),ne=Gl*Wl(ne),new di(iu(3.2404542*H-1.5371385*R-.4985314*ne),iu(-.969266*H+1.8760108*R+.041556*ne),iu(.0556434*H-.2040259*R+1.0572252*ne),L.alpha)}function sf(L,R,H){return{l:po(L.l,R.l,H),a:po(L.a,R.a,H),b:po(L.b,R.b,H),alpha:po(L.alpha,R.alpha,H)}}function oc(L){var R=ou(L),H=R.l,ne=R.a,pe=R.b,be=Math.atan2(pe,ne)*ic;return{h:be<0?be+360:be,c:Math.sqrt(ne*ne+pe*pe),l:H,alpha:L.a}}function Oi(L){var R=L.h*bs,H=L.c,ne=L.l;return of({l:ne,a:Math.cos(R)*H,b:Math.sin(R)*H,alpha:L.alpha})}function Yl(L,R,H){var ne=R-L;return L+H*(ne>180||ne<-180?ne-360*Math.round(ne/360):ne)}function El(L,R,H){return{h:Yl(L.h,R.h,H),c:po(L.c,R.c,H),l:po(L.l,R.l,H),alpha:po(L.alpha,R.alpha,H)}}var ds={forward:ou,reverse:of,interpolate:sf},_s={forward:oc,reverse:Oi,interpolate:El},su=Object.freeze({__proto__:null,lab:ds,hcl:_s}),go=function(R,H,ne,pe,be){this.type=R,this.operator=H,this.interpolation=ne,this.input=pe,this.labels=[],this.outputs=[];for(var Se=0,ze=be;Se<ze.length;Se+=1){var tt=ze[Se],ct=tt[0],mt=tt[1];this.labels.push(ct),this.outputs.push(mt)}};go.interpolationFactor=function(R,H,ne,pe){var be=0;if(R.name==="exponential")be=lf(H,R.base,ne,pe);else if(R.name==="linear")be=lf(H,1,ne,pe);else if(R.name==="cubic-bezier"){var Se=R.controlPoints,ze=new i(Se[0],Se[1],Se[2],Se[3]);be=ze.solve(lf(H,1,ne,pe))}return be},go.parse=function(R,H){var ne=R[0],pe=R[1],be=R[2],Se=R.slice(3);if(!Array.isArray(pe)||pe.length===0)return H.error("Expected an interpolation type expression.",1);if(pe[0]==="linear")pe={name:"linear"};else if(pe[0]==="exponential"){var ze=pe[1];if(typeof ze!="number")return H.error("Exponential interpolation requires a numeric base.",1,1);pe={name:"exponential",base:ze}}else if(pe[0]==="cubic-bezier"){var tt=pe.slice(1);if(tt.length!==4||tt.some(function(rn){return typeof rn!="number"||rn<0||rn>1}))return H.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);pe={name:"cubic-bezier",controlPoints:tt}}else return H.error("Unknown interpolation type "+String(pe[0]),1,0);if(R.length-1<4)return H.error("Expected at least 4 arguments, but found only "+(R.length-1)+".");if((R.length-1)%2!=0)return H.error("Expected an even number of arguments.");if(be=H.parse(be,2,mn),!be)return null;var ct=[],mt=null;ne==="interpolate-hcl"||ne==="interpolate-lab"?mt=ca:H.expectedType&&H.expectedType.kind!=="value"&&(mt=H.expectedType);for(var It=0;It<Se.length;It+=2){var Kt=Se[It],Wt=Se[It+1],cr=It+3,Br=It+4;if(typeof Kt!="number")return H.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',cr);if(ct.length&&ct[ct.length-1][0]>=Kt)return H.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',cr);var hn=H.parse(Wt,Br,mt);if(!hn)return null;mt=mt||hn.type,ct.push([Kt,hn])}return mt.kind!=="number"&&mt.kind!=="color"&&!(mt.kind==="array"&&mt.itemType.kind==="number"&&typeof mt.N=="number")?H.error("Type "+Fi(mt)+" is not interpolatable."):new go(mt,ne,pe,be,ct)},go.prototype.evaluate=function(R){var H=this.labels,ne=this.outputs;if(H.length===1)return ne[0].evaluate(R);var pe=this.input.evaluate(R);if(pe<=H[0])return ne[0].evaluate(R);var be=H.length;if(pe>=H[be-1])return ne[be-1].evaluate(R);var Se=js(H,pe),ze=H[Se],tt=H[Se+1],ct=go.interpolationFactor(this.interpolation,pe,ze,tt),mt=ne[Se].evaluate(R),It=ne[Se+1].evaluate(R);return this.operator==="interpolate"?Ml[this.type.kind.toLowerCase()](mt,It,ct):this.operator==="interpolate-hcl"?_s.reverse(_s.interpolate(_s.forward(mt),_s.forward(It),ct)):ds.reverse(ds.interpolate(ds.forward(mt),ds.forward(It),ct))},go.prototype.eachChild=function(R){R(this.input);for(var H=0,ne=this.outputs;H<ne.length;H+=1){var pe=ne[H];R(pe)}},go.prototype.outputDefined=function(){return this.outputs.every(function(R){return R.outputDefined()})},go.prototype.serialize=function(){var R;this.interpolation.name==="linear"?R=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?R=["linear"]:R=["exponential",this.interpolation.base]:R=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var H=[this.operator,R,this.input.serialize()],ne=0;ne<this.labels.length;ne++)H.push(this.labels[ne],this.outputs[ne].serialize());return H};function lf(L,R,H,ne){var pe=ne-H,be=L-H;return pe===0?0:R===1?be/pe:(Math.pow(R,be)-1)/(Math.pow(R,pe)-1)}var ws=function(R,H){this.type=R,this.args=H};ws.parse=function(R,H){if(R.length<2)return H.error("Expectected at least one argument.");var ne=null,pe=H.expectedType;pe&&pe.kind!=="value"&&(ne=pe);for(var be=[],Se=0,ze=R.slice(1);Se<ze.length;Se+=1){var tt=ze[Se],ct=H.parse(tt,1+be.length,ne,void 0,{typeAnnotation:"omit"});if(!ct)return null;ne=ne||ct.type,be.push(ct)}var mt=pe&&be.some(function(It){return sl(pe,It.type)});return mt?new ws(Pa,be):new ws(ne,be)},ws.prototype.evaluate=function(R){for(var H=null,ne=0,pe,be=0,Se=this.args;be<Se.length;be+=1){var ze=Se[be];if(ne++,H=ze.evaluate(R),H&&H instanceof Bo&&!H.available&&(pe||(pe=H.name),H=null,ne===this.args.length&&(H=pe)),H!==null)break}return H},ws.prototype.eachChild=function(R){this.args.forEach(R)},ws.prototype.outputDefined=function(){return this.args.every(function(R){return R.outputDefined()})},ws.prototype.serialize=function(){var R=["coalesce"];return this.eachChild(function(H){R.push(H.serialize())}),R};var cl=function(R,H){this.type=H.type,this.bindings=[].concat(R),this.result=H};cl.prototype.evaluate=function(R){return this.result.evaluate(R)},cl.prototype.eachChild=function(R){for(var H=0,ne=this.bindings;H<ne.length;H+=1){var pe=ne[H];R(pe[1])}R(this.result)},cl.parse=function(R,H){if(R.length<4)return H.error("Expected at least 3 arguments, but found "+(R.length-1)+" instead.");for(var ne=[],pe=1;pe<R.length-1;pe+=2){var be=R[pe];if(typeof be!="string")return H.error("Expected string, but found "+typeof be+" instead.",pe);if(/[^a-zA-Z0-9_]/.test(be))return H.error("Variable names must contain only alphanumeric characters or '_'.",pe);var Se=H.parse(R[pe+1],pe+1);if(!Se)return null;ne.push([be,Se])}var ze=H.parse(R[R.length-1],R.length-1,H.expectedType,ne);return ze?new cl(ne,ze):null},cl.prototype.outputDefined=function(){return this.result.outputDefined()},cl.prototype.serialize=function(){for(var R=["let"],H=0,ne=this.bindings;H<ne.length;H+=1){var pe=ne[H],be=pe[0],Se=pe[1];R.push(be,Se.serialize())}return R.push(this.result.serialize()),R};var hl=function(R,H,ne){this.type=R,this.index=H,this.input=ne};hl.parse=function(R,H){if(R.length!==3)return H.error("Expected 2 arguments, but found "+(R.length-1)+" instead.");var ne=H.parse(R[1],1,mn),pe=H.parse(R[2],2,no(H.expectedType||Pa));if(!ne||!pe)return null;var be=pe.type;return new hl(be.itemType,ne,pe)},hl.prototype.evaluate=function(R){var H=this.index.evaluate(R),ne=this.input.evaluate(R);if(H<0)throw new Ui("Array index out of bounds: "+H+" < 0.");if(H>=ne.length)throw new Ui("Array index out of bounds: "+H+" > "+(ne.length-1)+".");if(H!==Math.floor(H))throw new Ui("Array index must be an integer, but found "+H+" instead.");return ne[H]},hl.prototype.eachChild=function(R){R(this.index),R(this.input)},hl.prototype.outputDefined=function(){return!1},hl.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Zs=function(R,H){this.type=Xn,this.needle=R,this.haystack=H};Zs.parse=function(R,H){if(R.length!==3)return H.error("Expected 2 arguments, but found "+(R.length-1)+" instead.");var ne=H.parse(R[1],1,Pa),pe=H.parse(R[2],2,Pa);return!ne||!pe?null:hs(ne.type,[Xn,Fn,mn,Un,Pa])?new Zs(ne,pe):H.error("Expected first argument to be of type boolean, string, number or null, but found "+Fi(ne.type)+" instead")},Zs.prototype.evaluate=function(R){var H=this.needle.evaluate(R),ne=this.haystack.evaluate(R);if(!ne)return!1;if(!Bl(H,["boolean","string","number","null"]))throw new Ui("Expected first argument to be of type boolean, string, number or null, but found "+Fi(zi(H))+" instead.");if(!Bl(ne,["string","array"]))throw new Ui("Expected second argument to be of type array or string, but found "+Fi(zi(ne))+" instead.");return ne.indexOf(H)>=0},Zs.prototype.eachChild=function(R){R(this.needle),R(this.haystack)},Zs.prototype.outputDefined=function(){return!0},Zs.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ts=function(R,H,ne){this.type=mn,this.needle=R,this.haystack=H,this.fromIndex=ne};Ts.parse=function(R,H){if(R.length<=2||R.length>=5)return H.error("Expected 3 or 4 arguments, but found "+(R.length-1)+" instead.");var ne=H.parse(R[1],1,Pa),pe=H.parse(R[2],2,Pa);if(!ne||!pe)return null;if(!hs(ne.type,[Xn,Fn,mn,Un,Pa]))return H.error("Expected first argument to be of type boolean, string, number or null, but found "+Fi(ne.type)+" instead");if(R.length===4){var be=H.parse(R[3],3,mn);return be?new Ts(ne,pe,be):null}else return new Ts(ne,pe)},Ts.prototype.evaluate=function(R){var H=this.needle.evaluate(R),ne=this.haystack.evaluate(R);if(!Bl(H,["boolean","string","number","null"]))throw new Ui("Expected first argument to be of type boolean, string, number or null, but found "+Fi(zi(H))+" instead.");if(!Bl(ne,["string","array"]))throw new Ui("Expected second argument to be of type array or string, but found "+Fi(zi(ne))+" instead.");if(this.fromIndex){var pe=this.fromIndex.evaluate(R);return ne.indexOf(H,pe)}return ne.indexOf(H)},Ts.prototype.eachChild=function(R){R(this.needle),R(this.haystack),this.fromIndex&&R(this.fromIndex)},Ts.prototype.outputDefined=function(){return!1},Ts.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var R=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),R]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Yi=function(R,H,ne,pe,be,Se){this.inputType=R,this.type=H,this.input=ne,this.cases=pe,this.outputs=be,this.otherwise=Se};Yi.parse=function(R,H){if(R.length<5)return H.error("Expected at least 4 arguments, but found only "+(R.length-1)+".");if(R.length%2!=1)return H.error("Expected an even number of arguments.");var ne,pe;H.expectedType&&H.expectedType.kind!=="value"&&(pe=H.expectedType);for(var be={},Se=[],ze=2;ze<R.length-1;ze+=2){var tt=R[ze],ct=R[ze+1];Array.isArray(tt)||(tt=[tt]);var mt=H.concat(ze);if(tt.length===0)return mt.error("Expected at least one branch label.");for(var It=0,Kt=tt;It<Kt.length;It+=1){var Wt=Kt[It];if(typeof Wt!="number"&&typeof Wt!="string")return mt.error("Branch labels must be numbers or strings.");if(typeof Wt=="number"&&Math.abs(Wt)>Number.MAX_SAFE_INTEGER)return mt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Wt=="number"&&Math.floor(Wt)!==Wt)return mt.error("Numeric branch labels must be integer values.");if(!ne)ne=zi(Wt);else if(mt.checkSubtype(ne,zi(Wt)))return null;if(typeof be[String(Wt)]!="undefined")return mt.error("Branch labels must be unique.");be[String(Wt)]=Se.length}var cr=H.parse(ct,ze,pe);if(!cr)return null;pe=pe||cr.type,Se.push(cr)}var Br=H.parse(R[1],1,Pa);if(!Br)return null;var hn=H.parse(R[R.length-1],R.length-1,pe);return!hn||Br.type.kind!=="value"&&H.concat(1).checkSubtype(ne,Br.type)?null:new Yi(ne,pe,Br,be,Se,hn)},Yi.prototype.evaluate=function(R){var H=this.input.evaluate(R),ne=zi(H)===this.inputType&&this.outputs[this.cases[H]]||this.otherwise;return ne.evaluate(R)},Yi.prototype.eachChild=function(R){R(this.input),this.outputs.forEach(R),R(this.otherwise)},Yi.prototype.outputDefined=function(){return this.outputs.every(function(R){return R.outputDefined()})&&this.otherwise.outputDefined()},Yi.prototype.serialize=function(){for(var R=this,H=["match",this.input.serialize()],ne=Object.keys(this.cases).sort(),pe=[],be={},Se=0,ze=ne;Se<ze.length;Se+=1){var tt=ze[Se],ct=be[this.cases[tt]];ct===void 0?(be[this.cases[tt]]=pe.length,pe.push([this.cases[tt],[tt]])):pe[ct][1].push(tt)}for(var mt=function(Br){return R.inputType.kind==="number"?Number(Br):Br},It=0,Kt=pe;It<Kt.length;It+=1){var Wt=Kt[It],ct=Wt[0],cr=Wt[1];cr.length===1?H.push(mt(cr[0])):H.push(cr.map(mt)),H.push(this.outputs[outputIndex$1].serialize())}return H.push(this.otherwise.serialize()),H};var Vo=function(R,H,ne){this.type=R,this.branches=H,this.otherwise=ne};Vo.parse=function(R,H){if(R.length<4)return H.error("Expected at least 3 arguments, but found only "+(R.length-1)+".");if(R.length%2!=0)return H.error("Expected an odd number of arguments.");var ne;H.expectedType&&H.expectedType.kind!=="value"&&(ne=H.expectedType);for(var pe=[],be=1;be<R.length-1;be+=2){var Se=H.parse(R[be],be,Xn);if(!Se)return null;var ze=H.parse(R[be+1],be+1,ne);if(!ze)return null;pe.push([Se,ze]),ne=ne||ze.type}var tt=H.parse(R[R.length-1],R.length-1,ne);return tt?new Vo(ne,pe,tt):null},Vo.prototype.evaluate=function(R){for(var H=0,ne=this.branches;H<ne.length;H+=1){var pe=ne[H],be=pe[0],Se=pe[1];if(be.evaluate(R))return Se.evaluate(R)}return this.otherwise.evaluate(R)},Vo.prototype.eachChild=function(R){for(var H=0,ne=this.branches;H<ne.length;H+=1){var pe=ne[H],be=pe[0],Se=pe[1];R(be),R(Se)}R(this.otherwise)},Vo.prototype.outputDefined=function(){return this.branches.every(function(R){R[0];var H=R[1];return H.outputDefined()})&&this.otherwise.outputDefined()},Vo.prototype.serialize=function(){var R=["case"];return this.eachChild(function(H){R.push(H.serialize())}),R};var As=function(R,H,ne,pe){this.type=R,this.input=H,this.beginIndex=ne,this.endIndex=pe};As.parse=function(R,H){if(R.length<=2||R.length>=5)return H.error("Expected 3 or 4 arguments, but found "+(R.length-1)+" instead.");var ne=H.parse(R[1],1,Pa),pe=H.parse(R[2],2,mn);if(!ne||!pe)return null;if(!hs(ne.type,[no(Pa),Fn,Pa]))return H.error("Expected first argument to be of type array or string, but found "+Fi(ne.type)+" instead");if(R.length===4){var be=H.parse(R[3],3,mn);return be?new As(ne.type,ne,pe,be):null}else return new As(ne.type,ne,pe)},As.prototype.evaluate=function(R){var H=this.input.evaluate(R),ne=this.beginIndex.evaluate(R);if(!Bl(H,["string","array"]))throw new Ui("Expected first argument to be of type array or string, but found "+Fi(zi(H))+" instead.");if(this.endIndex){var pe=this.endIndex.evaluate(R);return H.slice(ne,pe)}return H.slice(ne)},As.prototype.eachChild=function(R){R(this.input),R(this.beginIndex),this.endIndex&&R(this.endIndex)},As.prototype.outputDefined=function(){return!1},As.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var R=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),R]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function uf(L,R){return L==="=="||L==="!="?R.kind==="boolean"||R.kind==="string"||R.kind==="number"||R.kind==="null"||R.kind==="value":R.kind==="string"||R.kind==="number"||R.kind==="value"}function Au(L,R,H){return R===H}function ff(L,R,H){return R!==H}function xt(L,R,H){return R<H}function Ft(L,R,H){return R>H}function sr(L,R,H){return R<=H}function $t(L,R,H){return R>=H}function Ir(L,R,H,ne){return ne.compare(R,H)===0}function un(L,R,H,ne){return!Ir(L,R,H,ne)}function xn(L,R,H,ne){return ne.compare(R,H)<0}function An(L,R,H,ne){return ne.compare(R,H)>0}function Ln(L,R,H,ne){return ne.compare(R,H)<=0}function Yn(L,R,H,ne){return ne.compare(R,H)>=0}function bn(L,R,H){var ne=L!=="=="&&L!=="!=";return function(){function pe(be,Se,ze){this.type=Xn,this.lhs=be,this.rhs=Se,this.collator=ze,this.hasUntypedArgument=be.type.kind==="value"||Se.type.kind==="value"}return pe.parse=function(Se,ze){if(Se.length!==3&&Se.length!==4)return ze.error("Expected two or three arguments.");var tt=Se[0],ct=ze.parse(Se[1],1,Pa);if(!ct)return null;if(!uf(tt,ct.type))return ze.concat(1).error('"'+tt+`" comparisons are not supported for type '`+Fi(ct.type)+"'.");var mt=ze.parse(Se[2],2,Pa);if(!mt)return null;if(!uf(tt,mt.type))return ze.concat(2).error('"'+tt+`" comparisons are not supported for type '`+Fi(mt.type)+"'.");if(ct.type.kind!==mt.type.kind&&ct.type.kind!=="value"&&mt.type.kind!=="value")return ze.error("Cannot compare types '"+Fi(ct.type)+"' and '"+Fi(mt.type)+"'.");ne&&(ct.type.kind==="value"&&mt.type.kind!=="value"?ct=new eo(mt.type,[ct]):ct.type.kind!=="value"&&mt.type.kind==="value"&&(mt=new eo(ct.type,[mt])));var It=null;if(Se.length===4){if(ct.type.kind!=="string"&&mt.type.kind!=="string"&&ct.type.kind!=="value"&&mt.type.kind!=="value")return ze.error("Cannot use collator to compare non-string types.");if(It=ze.parse(Se[3],3,Ko),!It)return null}return new pe(ct,mt,It)},pe.prototype.evaluate=function(Se){var ze=this.lhs.evaluate(Se),tt=this.rhs.evaluate(Se);if(ne&&this.hasUntypedArgument){var ct=zi(ze),mt=zi(tt);if(ct.kind!==mt.kind||!(ct.kind==="string"||ct.kind==="number"))throw new Ui('Expected arguments for "'+L+'" to be (string, string) or (number, number), but found ('+ct.kind+", "+mt.kind+") instead.")}if(this.collator&&!ne&&this.hasUntypedArgument){var It=zi(ze),Kt=zi(tt);if(It.kind!=="string"||Kt.kind!=="string")return R(Se,ze,tt)}return this.collator?H(Se,ze,tt,this.collator.evaluate(Se)):R(Se,ze,tt)},pe.prototype.eachChild=function(Se){Se(this.lhs),Se(this.rhs),this.collator&&Se(this.collator)},pe.prototype.outputDefined=function(){return!0},pe.prototype.serialize=function(){var Se=[L];return this.eachChild(function(ze){Se.push(ze.serialize())}),Se},pe}()}var On=bn("==",Au,Ir),Rn=bn("!=",ff,un),Zn=bn("<",xt,xn),ra=bn(">",Ft,An),Ua=bn("<=",sr,Ln),Da=bn(">=",$t,Yn),Va=function(R,H,ne,pe,be){this.type=Fn,this.number=R,this.locale=H,this.currency=ne,this.minFractionDigits=pe,this.maxFractionDigits=be};Va.parse=function(R,H){if(R.length!==3)return H.error("Expected two arguments.");var ne=H.parse(R[1],1,mn);if(!ne)return null;var pe=R[2];if(typeof pe!="object"||Array.isArray(pe))return H.error("NumberFormat options argument must be an object.");var be=null;if(pe.locale&&(be=H.parse(pe.locale,1,Fn),!be))return null;var Se=null;if(pe.currency&&(Se=H.parse(pe.currency,1,Fn),!Se))return null;var ze=null;if(pe["min-fraction-digits"]&&(ze=H.parse(pe["min-fraction-digits"],1,mn),!ze))return null;var tt=null;return pe["max-fraction-digits"]&&(tt=H.parse(pe["max-fraction-digits"],1,mn),!tt)?null:new Va(ne,be,Se,ze,tt)},Va.prototype.evaluate=function(R){return new Intl.NumberFormat(this.locale?this.locale.evaluate(R):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(R):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(R):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(R):void 0}).format(this.number.evaluate(R))},Va.prototype.eachChild=function(R){R(this.number),this.locale&&R(this.locale),this.currency&&R(this.currency),this.minFractionDigits&&R(this.minFractionDigits),this.maxFractionDigits&&R(this.maxFractionDigits)},Va.prototype.outputDefined=function(){return!1},Va.prototype.serialize=function(){var R={};return this.locale&&(R.locale=this.locale.serialize()),this.currency&&(R.currency=this.currency.serialize()),this.minFractionDigits&&(R["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(R["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),R]};var Ha=function(R){this.type=mn,this.input=R};Ha.parse=function(R,H){if(R.length!==2)return H.error("Expected 1 argument, but found "+(R.length-1)+" instead.");var ne=H.parse(R[1],1);return ne?ne.type.kind!=="array"&&ne.type.kind!=="string"&&ne.type.kind!=="value"?H.error("Expected argument of type string or array, but found "+Fi(ne.type)+" instead."):new Ha(ne):null},Ha.prototype.evaluate=function(R){var H=this.input.evaluate(R);if(typeof H=="string")return H.length;if(Array.isArray(H))return H.length;throw new Ui("Expected value to be of type string or array, but found "+Fi(zi(H))+" instead.")},Ha.prototype.eachChild=function(R){R(this.input)},Ha.prototype.outputDefined=function(){return!1},Ha.prototype.serialize=function(){var R=["length"];return this.eachChild(function(H){R.push(H.serialize())}),R};var ea={"==":On,"!=":Rn,">":ra,"<":Zn,">=":Da,"<=":Ua,array:eo,at:hl,boolean:eo,case:Vo,coalesce:ws,collator:fl,format:xs,image:Tl,in:Zs,"index-of":Ts,interpolate:go,"interpolate-hcl":go,"interpolate-lab":go,length:Ha,let:cl,literal:qi,match:Yi,number:eo,"number-format":Va,object:eo,slice:As,step:Xs,string:eo,"to-boolean":vs,"to-color":vs,"to-number":vs,"to-string":vs,var:Is,within:ps};function xa(L,R){var H=R[0],ne=R[1],pe=R[2],be=R[3];H=H.evaluate(L),ne=ne.evaluate(L),pe=pe.evaluate(L);var Se=be?be.evaluate(L):1,ze=ql(H,ne,pe,Se);if(ze)throw new Ui(ze);return new di(H/255*Se,ne/255*Se,pe/255*Se,Se)}function Xa(L,R){return L in R}function qa(L,R){var H=R[L];return typeof H=="undefined"?null:H}function mi(L,R,H,ne){for(;H<=ne;){var pe=H+ne>>1;if(R[pe]===L)return!0;R[pe]>L?ne=pe-1:H=pe+1}return!1}function yi(L){return{type:L}}No.register(ea,{error:[_l,[Fn],function(L,R){var H=R[0];throw new Ui(H.evaluate(L))}],typeof:[Fn,[Pa],function(L,R){var H=R[0];return Fi(zi(H.evaluate(L)))}],"to-rgba":[no(mn,4),[ca],function(L,R){var H=R[0];return H.evaluate(L).toArray()}],rgb:[ca,[mn,mn,mn],xa],rgba:[ca,[mn,mn,mn,mn],xa],has:{type:Xn,overloads:[[[Fn],function(L,R){var H=R[0];return Xa(H.evaluate(L),L.properties())}],[[Fn,ja],function(L,R){var H=R[0],ne=R[1];return Xa(H.evaluate(L),ne.evaluate(L))}]]},get:{type:Pa,overloads:[[[Fn],function(L,R){var H=R[0];return qa(H.evaluate(L),L.properties())}],[[Fn,ja],function(L,R){var H=R[0],ne=R[1];return qa(H.evaluate(L),ne.evaluate(L))}]]},"feature-state":[Pa,[Fn],function(L,R){var H=R[0];return qa(H.evaluate(L),L.featureState||{})}],properties:[ja,[],function(L){return L.properties()}],"geometry-type":[Fn,[],function(L){return L.geometryType()}],id:[Pa,[],function(L){return L.id()}],zoom:[mn,[],function(L){return L.globals.zoom}],"heatmap-density":[mn,[],function(L){return L.globals.heatmapDensity||0}],"line-progress":[mn,[],function(L){return L.globals.lineProgress||0}],accumulated:[Pa,[],function(L){return L.globals.accumulated===void 0?null:L.globals.accumulated}],"+":[mn,yi(mn),function(L,R){for(var H=0,ne=0,pe=R;ne<pe.length;ne+=1){var be=pe[ne];H+=be.evaluate(L)}return H}],"*":[mn,yi(mn),function(L,R){for(var H=1,ne=0,pe=R;ne<pe.length;ne+=1){var be=pe[ne];H*=be.evaluate(L)}return H}],"-":{type:mn,overloads:[[[mn,mn],function(L,R){var H=R[0],ne=R[1];return H.evaluate(L)-ne.evaluate(L)}],[[mn],function(L,R){var H=R[0];return-H.evaluate(L)}]]},"/":[mn,[mn,mn],function(L,R){var H=R[0],ne=R[1];return H.evaluate(L)/ne.evaluate(L)}],"%":[mn,[mn,mn],function(L,R){var H=R[0],ne=R[1];return H.evaluate(L)%ne.evaluate(L)}],ln2:[mn,[],function(){return Math.LN2}],pi:[mn,[],function(){return Math.PI}],e:[mn,[],function(){return Math.E}],"^":[mn,[mn,mn],function(L,R){var H=R[0],ne=R[1];return Math.pow(H.evaluate(L),ne.evaluate(L))}],sqrt:[mn,[mn],function(L,R){var H=R[0];return Math.sqrt(H.evaluate(L))}],log10:[mn,[mn],function(L,R){var H=R[0];return Math.log(H.evaluate(L))/Math.LN10}],ln:[mn,[mn],function(L,R){var H=R[0];return Math.log(H.evaluate(L))}],log2:[mn,[mn],function(L,R){var H=R[0];return Math.log(H.evaluate(L))/Math.LN2}],sin:[mn,[mn],function(L,R){var H=R[0];return Math.sin(H.evaluate(L))}],cos:[mn,[mn],function(L,R){var H=R[0];return Math.cos(H.evaluate(L))}],tan:[mn,[mn],function(L,R){var H=R[0];return Math.tan(H.evaluate(L))}],asin:[mn,[mn],function(L,R){var H=R[0];return Math.asin(H.evaluate(L))}],acos:[mn,[mn],function(L,R){var H=R[0];return Math.acos(H.evaluate(L))}],atan:[mn,[mn],function(L,R){var H=R[0];return Math.atan(H.evaluate(L))}],min:[mn,yi(mn),function(L,R){return Math.min.apply(Math,R.map(function(H){return H.evaluate(L)}))}],max:[mn,yi(mn),function(L,R){return Math.max.apply(Math,R.map(function(H){return H.evaluate(L)}))}],abs:[mn,[mn],function(L,R){var H=R[0];return Math.abs(H.evaluate(L))}],round:[mn,[mn],function(L,R){var H=R[0],ne=H.evaluate(L);return ne<0?-Math.round(-ne):Math.round(ne)}],floor:[mn,[mn],function(L,R){var H=R[0];return Math.floor(H.evaluate(L))}],ceil:[mn,[mn],function(L,R){var H=R[0];return Math.ceil(H.evaluate(L))}],"filter-==":[Xn,[Fn,Pa],function(L,R){var H=R[0],ne=R[1];return L.properties()[H.value]===ne.value}],"filter-id-==":[Xn,[Pa],function(L,R){var H=R[0];return L.id()===H.value}],"filter-type-==":[Xn,[Fn],function(L,R){var H=R[0];return L.geometryType()===H.value}],"filter-<":[Xn,[Fn,Pa],function(L,R){var H=R[0],ne=R[1],pe=L.properties()[H.value],be=ne.value;return typeof pe==typeof be&&pe<be}],"filter-id-<":[Xn,[Pa],function(L,R){var H=R[0],ne=L.id(),pe=H.value;return typeof ne==typeof pe&&ne<pe}],"filter->":[Xn,[Fn,Pa],function(L,R){var H=R[0],ne=R[1],pe=L.properties()[H.value],be=ne.value;return typeof pe==typeof be&&pe>be}],"filter-id->":[Xn,[Pa],function(L,R){var H=R[0],ne=L.id(),pe=H.value;return typeof ne==typeof pe&&ne>pe}],"filter-<=":[Xn,[Fn,Pa],function(L,R){var H=R[0],ne=R[1],pe=L.properties()[H.value],be=ne.value;return typeof pe==typeof be&&pe<=be}],"filter-id-<=":[Xn,[Pa],function(L,R){var H=R[0],ne=L.id(),pe=H.value;return typeof ne==typeof pe&&ne<=pe}],"filter->=":[Xn,[Fn,Pa],function(L,R){var H=R[0],ne=R[1],pe=L.properties()[H.value],be=ne.value;return typeof pe==typeof be&&pe>=be}],"filter-id->=":[Xn,[Pa],function(L,R){var H=R[0],ne=L.id(),pe=H.value;return typeof ne==typeof pe&&ne>=pe}],"filter-has":[Xn,[Pa],function(L,R){var H=R[0];return H.value in L.properties()}],"filter-has-id":[Xn,[],function(L){return L.id()!==null&&L.id()!==void 0}],"filter-type-in":[Xn,[no(Fn)],function(L,R){var H=R[0];return H.value.indexOf(L.geometryType())>=0}],"filter-id-in":[Xn,[no(Pa)],function(L,R){var H=R[0];return H.value.indexOf(L.id())>=0}],"filter-in-small":[Xn,[Fn,no(Pa)],function(L,R){var H=R[0],ne=R[1];return ne.value.indexOf(L.properties()[H.value])>=0}],"filter-in-large":[Xn,[Fn,no(Pa)],function(L,R){var H=R[0],ne=R[1];return mi(L.properties()[H.value],ne.value,0,ne.value.length-1)}],all:{type:Xn,overloads:[[[Xn,Xn],function(L,R){var H=R[0],ne=R[1];return H.evaluate(L)&&ne.evaluate(L)}],[yi(Xn),function(L,R){for(var H=0,ne=R;H<ne.length;H+=1){var pe=ne[H];if(!pe.evaluate(L))return!1}return!0}]]},any:{type:Xn,overloads:[[[Xn,Xn],function(L,R){var H=R[0],ne=R[1];return H.evaluate(L)||ne.evaluate(L)}],[yi(Xn),function(L,R){for(var H=0,ne=R;H<ne.length;H+=1){var pe=ne[H];if(pe.evaluate(L))return!0}return!1}]]},"!":[Xn,[Xn],function(L,R){var H=R[0];return!H.evaluate(L)}],"is-supported-script":[Xn,[Fn],function(L,R){var H=R[0],ne=L.globals&&L.globals.isSupportedScript;return ne?ne(H.evaluate(L)):!0}],upcase:[Fn,[Fn],function(L,R){var H=R[0];return H.evaluate(L).toUpperCase()}],downcase:[Fn,[Fn],function(L,R){var H=R[0];return H.evaluate(L).toLowerCase()}],concat:[Fn,yi(Pa),function(L,R){return R.map(function(H){return Nl(H.evaluate(L))}).join("")}],"resolved-locale":[Fn,[Ko],function(L,R){var H=R[0];return H.evaluate(L).resolvedLocale()}]});function bi(L){return{result:"success",value:L}}function Mi(L){return{result:"error",value:L}}function li(L){return L["property-type"]==="data-driven"||L["property-type"]==="cross-faded-data-driven"}function Lo(L){return!!L.expression&&L.expression.parameters.indexOf("zoom")>-1}function ao(L){return!!L.expression&&L.expression.interpolated}function Qa(L){return L instanceof Number?"number":L instanceof String?"string":L instanceof Boolean?"boolean":Array.isArray(L)?"array":L===null?"null":typeof L}function _a(L){return typeof L=="object"&&L!==null&&!Array.isArray(L)}function _i(L){return L}function mo(L,R){var H=R.type==="color",ne=L.stops&&typeof L.stops[0][0]=="object",pe=ne||L.property!==void 0,be=ne||!pe,Se=L.type||(ao(R)?"exponential":"interval");if(H&&(L=Nr({},L),L.stops&&(L.stops=L.stops.map(function(sa){return[sa[0],di.parse(sa[1])]})),L.default?L.default=di.parse(L.default):L.default=di.parse(R.default)),L.colorSpace&&L.colorSpace!=="rgb"&&!su[L.colorSpace])throw new Error("Unknown color space: "+L.colorSpace);var ze,tt,ct;if(Se==="exponential")ze=Jo;else if(Se==="interval")ze=Ks;else if(Se==="categorical"){ze=Ss,tt=Object.create(null);for(var mt=0,It=L.stops;mt<It.length;mt+=1){var Kt=It[mt];tt[Kt[0]]=Kt[1]}ct=typeof L.stops[0][0]}else if(Se==="identity")ze=Ll;else throw new Error('Unknown function type "'+Se+'"');if(ne){for(var Wt={},cr=[],Br=0;Br<L.stops.length;Br++){var hn=L.stops[Br],rn=hn[0].zoom;Wt[rn]===void 0&&(Wt[rn]={zoom:rn,type:L.type,property:L.property,default:L.default,stops:[]},cr.push(rn)),Wt[rn].stops.push([hn[0].value,hn[1]])}for(var kn=[],_n=0,Sn=cr;_n<Sn.length;_n+=1){var zn=Sn[_n];kn.push([Wt[zn].zoom,mo(Wt[zn],R)])}var Kn={name:"linear"};return{kind:"composite",interpolationType:Kn,interpolationFactor:go.interpolationFactor.bind(void 0,Kn),zoomStops:kn.map(function(sa){return sa[0]}),evaluate:function(Ba,ka){var La=Ba.zoom;return Jo({stops:kn,base:L.base},R,La).evaluate(La,ka)}}}else if(be){var fa=Se==="exponential"?{name:"exponential",base:L.base!==void 0?L.base:1}:null;return{kind:"camera",interpolationType:fa,interpolationFactor:go.interpolationFactor.bind(void 0,fa),zoomStops:L.stops.map(function(sa){return sa[0]}),evaluate:function(sa){var Ba=sa.zoom;return ze(L,R,Ba,tt,ct)}}}else return{kind:"source",evaluate:function(Ba,ka){var La=ka&&ka.properties?ka.properties[L.property]:void 0;return La===void 0?Mo(L.default,R.default):ze(L,R,La,tt,ct)}}}function Mo(L,R,H){if(L!==void 0)return L;if(R!==void 0)return R;if(H!==void 0)return H}function Ss(L,R,H,ne,pe){var be=typeof H===pe?ne[H]:void 0;return Mo(be,L.default,R.default)}function Ks(L,R,H){if(Qa(H)!=="number")return Mo(L.default,R.default);var ne=L.stops.length;if(ne===1||H<=L.stops[0][0])return L.stops[0][1];if(H>=L.stops[ne-1][0])return L.stops[ne-1][1];var pe=js(L.stops.map(function(be){return be[0]}),H);return L.stops[pe][1]}function Jo(L,R,H){var ne=L.base!==void 0?L.base:1;if(Qa(H)!=="number")return Mo(L.default,R.default);var pe=L.stops.length;if(pe===1||H<=L.stops[0][0])return L.stops[0][1];if(H>=L.stops[pe-1][0])return L.stops[pe-1][1];var be=js(L.stops.map(function(It){return It[0]}),H),Se=zs(H,ne,L.stops[be][0],L.stops[be+1][0]),ze=L.stops[be][1],tt=L.stops[be+1][1],ct=Ml[R.type]||_i;if(L.colorSpace&&L.colorSpace!=="rgb"){var mt=su[L.colorSpace];ct=function(It,Kt){return mt.reverse(mt.interpolate(mt.forward(It),mt.forward(Kt),Se))}}return typeof ze.evaluate=="function"?{evaluate:function(){for(var Kt=[],Wt=arguments.length;Wt--;)Kt[Wt]=arguments[Wt];var cr=ze.evaluate.apply(void 0,Kt),Br=tt.evaluate.apply(void 0,Kt);if(!(cr===void 0||Br===void 0))return ct(cr,Br,Se)}}:ct(ze,tt,Se)}function Ll(L,R,H){return R.type==="color"?H=di.parse(H):R.type==="formatted"?H=Wi.fromString(H.toString()):R.type==="resolvedImage"?H=Bo.fromString(H.toString()):Qa(H)!==R.type&&(R.type!=="enum"||!R.values[H])&&(H=void 0),Mo(H,L.default,R.default)}function zs(L,R,H,ne){var pe=ne-H,be=L-H;return pe===0?0:R===1?be/pe:(Math.pow(R,be)-1)/(Math.pow(R,pe)-1)}var Ms=function(R,H){this.expression=R,this._warningHistory={},this._evaluator=new ul,this._defaultValue=H?If(H):null,this._enumValues=H&&H.type==="enum"?H.values:null};Ms.prototype.evaluateWithoutErrorHandling=function(R,H,ne,pe,be,Se){return this._evaluator.globals=R,this._evaluator.feature=H,this._evaluator.featureState=ne,this._evaluator.canonical=pe,this._evaluator.availableImages=be||null,this._evaluator.formattedSection=Se,this.expression.evaluate(this._evaluator)},Ms.prototype.evaluate=function(R,H,ne,pe,be,Se){this._evaluator.globals=R,this._evaluator.feature=H||null,this._evaluator.featureState=ne||null,this._evaluator.canonical=pe,this._evaluator.availableImages=be||null,this._evaluator.formattedSection=Se||null;try{var ze=this.expression.evaluate(this._evaluator);if(ze==null||typeof ze=="number"&&ze!==ze)return this._defaultValue;if(this._enumValues&&!(ze in this._enumValues))throw new Ui("Expected value to be one of "+Object.keys(this._enumValues).map(function(tt){return JSON.stringify(tt)}).join(", ")+", but found "+JSON.stringify(ze)+" instead.");return ze}catch(tt){return this._warningHistory[tt.message]||(this._warningHistory[tt.message]=!0,typeof console!="undefined"&&console.warn(tt.message)),this._defaultValue}};function Po(L){return Array.isArray(L)&&L.length>0&&typeof L[0]=="string"&&L[0]in ea}function Su(L,R){var H=new Uo(ea,[],R?hf(R):void 0),ne=H.parse(L,void 0,void 0,void 0,R&&R.type==="string"?{typeAnnotation:"coerce"}:void 0);return ne?bi(new Ms(ne,R)):Mi(H.errors)}var Wu=function(R,H){this.kind=R,this._styleExpression=H,this.isStateDependent=R!=="constant"&&!Hl(H.expression)};Wu.prototype.evaluateWithoutErrorHandling=function(R,H,ne,pe,be,Se){return this._styleExpression.evaluateWithoutErrorHandling(R,H,ne,pe,be,Se)},Wu.prototype.evaluate=function(R,H,ne,pe,be,Se){return this._styleExpression.evaluate(R,H,ne,pe,be,Se)};var ks=function(R,H,ne,pe){this.kind=R,this.zoomStops=ne,this._styleExpression=H,this.isStateDependent=R!=="camera"&&!Hl(H.expression),this.interpolationType=pe};ks.prototype.evaluateWithoutErrorHandling=function(R,H,ne,pe,be,Se){return this._styleExpression.evaluateWithoutErrorHandling(R,H,ne,pe,be,Se)},ks.prototype.evaluate=function(R,H,ne,pe,be,Se){return this._styleExpression.evaluate(R,H,ne,pe,be,Se)},ks.prototype.interpolationFactor=function(R,H,ne){return this.interpolationType?go.interpolationFactor(this.interpolationType,R,H,ne):0};function cf(L,R){if(L=Su(L,R),L.result==="error")return L;var H=L.value.expression,ne=Vl(H);if(!ne&&!li(R))return Mi([new Gn("","data expressions not supported")]);var pe=Hu(H,["zoom"]);if(!pe&&!Lo(R))return Mi([new Gn("","zoom expressions not supported")]);var be=Df(H);if(!be&&!pe)return Mi([new Gn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(be instanceof Gn)return Mi([be]);if(be instanceof go&&!ao(R))return Mi([new Gn("",'"interpolate" expressions cannot be used with this property')]);if(!be)return bi(ne?new Wu("constant",L.value):new Wu("source",L.value));var Se=be instanceof go?be.interpolation:void 0;return bi(ne?new ks("camera",L.value,be.labels,Se):new ks("composite",L.value,be.labels,Se))}var Mu=function(R,H){this._parameters=R,this._specification=H,Nr(this,mo(this._parameters,this._specification))};Mu.deserialize=function(R){return new Mu(R._parameters,R._specification)},Mu.serialize=function(R){return{_parameters:R._parameters,_specification:R._specification}};function Gc(L,R){if(_a(L))return new Mu(L,R);if(Po(L)){var H=cf(L,R);if(H.result==="error")throw new Error(H.value.map(function(pe){return pe.key+": "+pe.message}).join(", "));return H.value}else{var ne=L;return typeof L=="string"&&R.type==="color"&&(ne=di.parse(L)),{kind:"constant",evaluate:function(){return ne}}}}function Df(L){var R=null;if(L instanceof cl)R=Df(L.result);else if(L instanceof ws)for(var H=0,ne=L.args;H<ne.length;H+=1){var pe=ne[H];if(R=Df(pe),R)break}else(L instanceof Xs||L instanceof go)&&L.input instanceof No&&L.input.name==="zoom"&&(R=L);return R instanceof Gn||L.eachChild(function(be){var Se=Df(be);Se instanceof Gn?R=Se:!R&&Se?R=new Gn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):R&&Se&&R!==Se&&(R=new Gn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),R}function hf(L){var R={color:ca,string:Fn,number:mn,enum:Fn,boolean:Xn,formatted:cs,resolvedImage:Gs};return L.type==="array"?no(R[L.value]||Pa,L.length):R[L.type]}function If(L){return L.type==="color"&&_a(L.default)?new di(0,0,0,0):L.type==="color"?di.parse(L.default)||null:L.default===void 0?null:L.default}function Js(L){var R=L.key,H=L.value,ne=L.valueSpec||{},pe=L.objectElementValidators||{},be=L.style,Se=L.styleSpec,ze=[],tt=Qa(H);if(tt!=="object")return[new Qt(R,H,"object expected, "+tt+" found")];for(var ct in H){var mt=ct.split(".")[0],It=ne[mt]||ne["*"],Kt=void 0;if(pe[mt])Kt=pe[mt];else if(ne[mt])Kt=vi;else if(pe["*"])Kt=pe["*"];else if(ne["*"])Kt=vi;else{ze.push(new Qt(R,H[ct],'unknown property "'+ct+'"'));continue}ze=ze.concat(Kt({key:(R&&R+".")+ct,value:H[ct],valueSpec:It,style:be,styleSpec:Se,object:H,objectKey:ct},H))}for(var Wt in ne)pe[Wt]||ne[Wt].required&&ne[Wt].default===void 0&&H[Wt]===void 0&&ze.push(new Qt(R,H,'missing required property "'+Wt+'"'));return ze}function sc(L){var R=L.value,H=L.valueSpec,ne=L.style,pe=L.styleSpec,be=L.key,Se=L.arrayElementValidator||vi;if(Qa(R)!=="array")return[new Qt(be,R,"array expected, "+Qa(R)+" found")];if(H.length&&R.length!==H.length)return[new Qt(be,R,"array length "+H.length+" expected, length "+R.length+" found")];if(H["min-length"]&&R.length<H["min-length"])return[new Qt(be,R,"array length at least "+H["min-length"]+" expected, length "+R.length+" found")];var ze={type:H.value,values:H.values};pe.$version<7&&(ze.function=H.function),Qa(H.value)==="object"&&(ze=H.value);for(var tt=[],ct=0;ct<R.length;ct++)tt=tt.concat(Se({array:R,arrayIndex:ct,value:R[ct],valueSpec:ze,style:ne,styleSpec:pe,key:be+"["+ct+"]"}));return tt}function Ff(L){var R=L.key,H=L.value,ne=L.valueSpec,pe=Qa(H);return pe==="number"&&H!==H&&(pe="NaN"),pe!=="number"?[new Qt(R,H,"number expected, "+pe+" found")]:"minimum"in ne&&H<ne.minimum?[new Qt(R,H,H+" is less than the minimum value "+ne.minimum)]:"maximum"in ne&&H>ne.maximum?[new Qt(R,H,H+" is greater than the maximum value "+ne.maximum)]:[]}function zf(L){var R=L.valueSpec,H=Tn(L.value.type),ne,pe={},be,Se,ze=H!=="categorical"&&L.value.property===void 0,tt=!ze,ct=Qa(L.value.stops)==="array"&&Qa(L.value.stops[0])==="array"&&Qa(L.value.stops[0][0])==="object",mt=Js({key:L.key,value:L.value,valueSpec:L.styleSpec.function,style:L.style,styleSpec:L.styleSpec,objectElementValidators:{stops:It,default:cr}});return H==="identity"&&ze&&mt.push(new Qt(L.key,L.value,'missing required property "property"')),H!=="identity"&&!L.value.stops&&mt.push(new Qt(L.key,L.value,'missing required property "stops"')),H==="exponential"&&L.valueSpec.expression&&!ao(L.valueSpec)&&mt.push(new Qt(L.key,L.value,"exponential functions not supported")),L.styleSpec.$version>=8&&(tt&&!li(L.valueSpec)?mt.push(new Qt(L.key,L.value,"property functions not supported")):ze&&!Lo(L.valueSpec)&&mt.push(new Qt(L.key,L.value,"zoom functions not supported"))),(H==="categorical"||ct)&&L.value.property===void 0&&mt.push(new Qt(L.key,L.value,'"property" property is required')),mt;function It(Br){if(H==="identity")return[new Qt(Br.key,Br.value,'identity function may not have a "stops" property')];var hn=[],rn=Br.value;return hn=hn.concat(sc({key:Br.key,value:rn,valueSpec:Br.valueSpec,style:Br.style,styleSpec:Br.styleSpec,arrayElementValidator:Kt})),Qa(rn)==="array"&&rn.length===0&&hn.push(new Qt(Br.key,rn,"array must have at least one stop")),hn}function Kt(Br){var hn=[],rn=Br.value,kn=Br.key;if(Qa(rn)!=="array")return[new Qt(kn,rn,"array expected, "+Qa(rn)+" found")];if(rn.length!==2)return[new Qt(kn,rn,"array length 2 expected, length "+rn.length+" found")];if(ct){if(Qa(rn[0])!=="object")return[new Qt(kn,rn,"object expected, "+Qa(rn[0])+" found")];if(rn[0].zoom===void 0)return[new Qt(kn,rn,"object stop key must have zoom")];if(rn[0].value===void 0)return[new Qt(kn,rn,"object stop key must have value")];if(Se&&Se>Tn(rn[0].zoom))return[new Qt(kn,rn[0].zoom,"stop zoom values must appear in ascending order")];Tn(rn[0].zoom)!==Se&&(Se=Tn(rn[0].zoom),be=void 0,pe={}),hn=hn.concat(Js({key:kn+"[0]",value:rn[0],valueSpec:{zoom:{}},style:Br.style,styleSpec:Br.styleSpec,objectElementValidators:{zoom:Ff,value:Wt}}))}else hn=hn.concat(Wt({key:kn+"[0]",value:rn[0],valueSpec:{},style:Br.style,styleSpec:Br.styleSpec},rn));return Po(Nn(rn[1]))?hn.concat([new Qt(kn+"[1]",rn[1],"expressions are not allowed in function stops.")]):hn.concat(vi({key:kn+"[1]",value:rn[1],valueSpec:R,style:Br.style,styleSpec:Br.styleSpec}))}function Wt(Br,hn){var rn=Qa(Br.value),kn=Tn(Br.value),_n=Br.value!==null?Br.value:hn;if(!ne)ne=rn;else if(rn!==ne)return[new Qt(Br.key,_n,rn+" stop domain type must match previous stop domain type "+ne)];if(rn!=="number"&&rn!=="string"&&rn!=="boolean")return[new Qt(Br.key,_n,"stop domain value must be a number, string, or boolean")];if(rn!=="number"&&H!=="categorical"){var Sn="number expected, "+rn+" found";return li(R)&&H===void 0&&(Sn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Qt(Br.key,_n,Sn)]}return H==="categorical"&&rn==="number"&&(!isFinite(kn)||Math.floor(kn)!==kn)?[new Qt(Br.key,_n,"integer expected, found "+kn)]:H!=="categorical"&&rn==="number"&&be!==void 0&&kn<be?[new Qt(Br.key,_n,"stop domain values must appear in ascending order")]:(be=kn,H==="categorical"&&kn in pe?[new Qt(Br.key,_n,"stop domain values must be unique")]:(pe[kn]=!0,[]))}function cr(Br){return vi({key:Br.key,value:Br.value,valueSpec:R,style:Br.style,styleSpec:Br.styleSpec})}}function $o(L){var R=(L.expressionContext==="property"?cf:Su)(Nn(L.value),L.valueSpec);if(R.result==="error")return R.value.map(function(ne){return new Qt(""+L.key+ne.key,L.value,ne.message)});var H=R.value.expression||R.value._styleExpression.expression;if(L.expressionContext==="property"&&L.propertyKey==="text-font"&&!H.outputDefined())return[new Qt(L.key,L.value,'Invalid data expression for "'+L.propertyKey+'". Output values must be contained as literals within the expression.')];if(L.expressionContext==="property"&&L.propertyType==="layout"&&!Hl(H))return[new Qt(L.key,L.value,'"feature-state" data expressions are not supported with layout properties.')];if(L.expressionContext==="filter"&&!Hl(H))return[new Qt(L.key,L.value,'"feature-state" data expressions are not supported with filters.')];if(L.expressionContext&&L.expressionContext.indexOf("cluster")===0){if(!Hu(H,["zoom","feature-state"]))return[new Qt(L.key,L.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(L.expressionContext==="cluster-initial"&&!Vl(H))return[new Qt(L.key,L.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Of(L){var R=L.value,H=L.key,ne=Qa(R);return ne!=="boolean"?[new Qt(H,R,"boolean expected, "+ne+" found")]:[]}function xc(L){var R=L.key,H=L.value,ne=Qa(H);return ne!=="string"?[new Qt(R,H,"color expected, "+ne+" found")]:Ou(H)===null?[new Qt(R,H,'color expected, "'+H+'" found')]:[]}function Os(L){var R=L.key,H=L.value,ne=L.valueSpec,pe=[];return Array.isArray(ne.values)?ne.values.indexOf(Tn(H))===-1&&pe.push(new Qt(R,H,"expected one of ["+ne.values.join(", ")+"], "+JSON.stringify(H)+" found")):Object.keys(ne.values).indexOf(Tn(H))===-1&&pe.push(new Qt(R,H,"expected one of ["+Object.keys(ne.values).join(", ")+"], "+JSON.stringify(H)+" found")),pe}function vf(L){if(L===!0||L===!1)return!0;if(!Array.isArray(L)||L.length===0)return!1;switch(L[0]){case"has":return L.length>=2&&L[1]!=="$id"&&L[1]!=="$type";case"in":return L.length>=3&&(typeof L[1]!="string"||Array.isArray(L[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return L.length!==3||Array.isArray(L[1])||Array.isArray(L[2]);case"any":case"all":for(var R=0,H=L.slice(1);R<H.length;R+=1){var ne=H[R];if(!vf(ne)&&typeof ne!="boolean")return!1}return!0;default:return!0}}var pf={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Bf(L){if(L==null)return{filter:function(){return!0},needGeometry:!1};vf(L)||(L=nt(L));var R=Su(L,pf);if(R.result==="error")throw new Error(R.value.map(function(ne){return ne.key+": "+ne.message}).join(", "));var H=je(L);return{filter:function(ne,pe,be){return R.value.evaluate(ne,pe,{},be)},needGeometry:H}}function Fe(L,R){return L<R?-1:L>R?1:0}function je(L){if(!Array.isArray(L))return!1;if(L[0]==="within")return!0;for(var R=1;R<L.length;R++)if(je(L[R]))return!0;return!1}function nt(L){if(!L)return!0;var R=L[0];if(L.length<=1)return R!=="any";var H=R==="=="?lt(L[1],L[2],"=="):R==="!="?rr(lt(L[1],L[2],"==")):R==="<"||R===">"||R==="<="||R===">="?lt(L[1],L[2],R):R==="any"?_t(L.slice(1)):R==="all"?["all"].concat(L.slice(1).map(nt)):R==="none"?["all"].concat(L.slice(1).map(nt).map(rr)):R==="in"?bt(L[1],L.slice(2)):R==="!in"?rr(bt(L[1],L.slice(2))):R==="has"?Tt(L[1]):R==="!has"?rr(Tt(L[1])):R==="within"?L:!0;return H}function lt(L,R,H){switch(L){case"$type":return["filter-type-"+H,R];case"$id":return["filter-id-"+H,R];default:return["filter-"+H,L,R]}}function _t(L){return["any"].concat(L.map(nt))}function bt(L,R){if(R.length===0)return!1;switch(L){case"$type":return["filter-type-in",["literal",R]];case"$id":return["filter-id-in",["literal",R]];default:return R.length>200&&!R.some(function(H){return typeof H!=typeof R[0]})?["filter-in-large",L,["literal",R.sort(Fe)]]:["filter-in-small",L,["literal",R]]}}function Tt(L){switch(L){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",L]}}function rr(L){return["!",L]}function fr(L){return vf(Nn(L.value))?$o(Nr({},L,{expressionContext:"filter",valueSpec:{value:"boolean"}})):er(L)}function er(L){var R=L.value,H=L.key;if(Qa(R)!=="array")return[new Qt(H,R,"array expected, "+Qa(R)+" found")];var ne=L.styleSpec,pe,be=[];if(R.length<1)return[new Qt(H,R,"filter array must have at least 1 element")];switch(be=be.concat(Os({key:H+"[0]",value:R[0],valueSpec:ne.filter_operator,style:L.style,styleSpec:L.styleSpec})),Tn(R[0])){case"<":case"<=":case">":case">=":R.length>=2&&Tn(R[1])==="$type"&&be.push(new Qt(H,R,'"$type" cannot be use with operator "'+R[0]+'"'));case"==":case"!=":R.length!==3&&be.push(new Qt(H,R,'filter array for operator "'+R[0]+'" must have 3 elements'));case"in":case"!in":R.length>=2&&(pe=Qa(R[1]),pe!=="string"&&be.push(new Qt(H+"[1]",R[1],"string expected, "+pe+" found")));for(var Se=2;Se<R.length;Se++)pe=Qa(R[Se]),Tn(R[1])==="$type"?be=be.concat(Os({key:H+"["+Se+"]",value:R[Se],valueSpec:ne.geometry_type,style:L.style,styleSpec:L.styleSpec})):pe!=="string"&&pe!=="number"&&pe!=="boolean"&&be.push(new Qt(H+"["+Se+"]",R[Se],"string, number, or boolean expected, "+pe+" found"));break;case"any":case"all":case"none":for(var ze=1;ze<R.length;ze++)be=be.concat(er({key:H+"["+ze+"]",value:R[ze],style:L.style,styleSpec:L.styleSpec}));break;case"has":case"!has":pe=Qa(R[1]),R.length!==2?be.push(new Qt(H,R,'filter array for "'+R[0]+'" operator must have 2 elements')):pe!=="string"&&be.push(new Qt(H+"[1]",R[1],"string expected, "+pe+" found"));break;case"within":pe=Qa(R[1]),R.length!==2?be.push(new Qt(H,R,'filter array for "'+R[0]+'" operator must have 2 elements')):pe!=="object"&&be.push(new Qt(H+"[1]",R[1],"object expected, "+pe+" found"));break}return be}function pr(L,R){var H=L.key,ne=L.style,pe=L.styleSpec,be=L.value,Se=L.objectKey,ze=pe[R+"_"+L.layerType];if(!ze)return[];var tt=Se.match(/^(.*)-transition$/);if(R==="paint"&&tt&&ze[tt[1]]&&ze[tt[1]].transition)return vi({key:H,value:be,valueSpec:pe.transition,style:ne,styleSpec:pe});var ct=L.valueSpec||ze[Se];if(!ct)return[new Qt(H,be,'unknown property "'+Se+'"')];var mt;if(Qa(be)==="string"&&li(ct)&&!ct.tokens&&(mt=/^{([^}]+)}$/.exec(be)))return[new Qt(H,be,'"'+Se+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(mt[1])+" }`.")];var It=[];return L.layerType==="symbol"&&(Se==="text-field"&&ne&&!ne.glyphs&&It.push(new Qt(H,be,'use of "text-field" requires a style "glyphs" property')),Se==="text-font"&&_a(Nn(be))&&Tn(be.type)==="identity"&&It.push(new Qt(H,be,'"text-font" does not support identity functions'))),It.concat(vi({key:L.key,value:be,valueSpec:ct,style:ne,styleSpec:pe,expressionContext:"property",propertyType:R,propertyKey:Se}))}function Dr(L){return pr(L,"paint")}function Kr(L){return pr(L,"layout")}function an(L){var R=[],H=L.value,ne=L.key,pe=L.style,be=L.styleSpec;!H.type&&!H.ref&&R.push(new Qt(ne,H,'either "type" or "ref" is required'));var Se=Tn(H.type),ze=Tn(H.ref);if(H.id)for(var tt=Tn(H.id),ct=0;ct<L.arrayIndex;ct++){var mt=pe.layers[ct];Tn(mt.id)===tt&&R.push(new Qt(ne,H.id,'duplicate layer id "'+H.id+'", previously used at line '+mt.id.__line__))}if("ref"in H){["type","source","source-layer","filter","layout"].forEach(function(cr){cr in H&&R.push(new Qt(ne,H[cr],'"'+cr+'" is prohibited for ref layers'))});var It;pe.layers.forEach(function(cr){Tn(cr.id)===ze&&(It=cr)}),It?It.ref?R.push(new Qt(ne,H.ref,"ref cannot reference another ref layer")):Se=Tn(It.type):R.push(new Qt(ne,H.ref,'ref layer "'+ze+'" not found'))}else if(Se!=="background")if(!H.source)R.push(new Qt(ne,H,'missing required property "source"'));else{var Kt=pe.sources&&pe.sources[H.source],Wt=Kt&&Tn(Kt.type);Kt?Wt==="vector"&&Se==="raster"?R.push(new Qt(ne,H.source,'layer "'+H.id+'" requires a raster source')):Wt==="raster"&&Se!=="raster"?R.push(new Qt(ne,H.source,'layer "'+H.id+'" requires a vector source')):Wt==="vector"&&!H["source-layer"]?R.push(new Qt(ne,H,'layer "'+H.id+'" must specify a "source-layer"')):Wt==="raster-dem"&&Se!=="hillshade"?R.push(new Qt(ne,H.source,"raster-dem source can only be used with layer type 'hillshade'.")):Se==="line"&&H.paint&&H.paint["line-gradient"]&&(Wt!=="geojson"||!Kt.lineMetrics)&&R.push(new Qt(ne,H,'layer "'+H.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):R.push(new Qt(ne,H.source,'source "'+H.source+'" not found'))}return R=R.concat(Js({key:ne,value:H,valueSpec:be.layer,style:L.style,styleSpec:L.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return vi({key:ne+".type",value:H.type,valueSpec:be.layer.type,style:L.style,styleSpec:L.styleSpec,object:H,objectKey:"type"})},filter:fr,layout:function(Br){return Js({layer:H,key:Br.key,value:Br.value,style:Br.style,styleSpec:Br.styleSpec,objectElementValidators:{"*":function(rn){return Kr(Nr({layerType:Se},rn))}}})},paint:function(Br){return Js({layer:H,key:Br.key,value:Br.value,style:Br.style,styleSpec:Br.styleSpec,objectElementValidators:{"*":function(rn){return Dr(Nr({layerType:Se},rn))}}})}}})),R}function wn(L){var R=L.value,H=L.key,ne=Qa(R);return ne!=="string"?[new Qt(H,R,"string expected, "+ne+" found")]:[]}var Dn={promoteId:wa};function Jn(L){var R=L.value,H=L.key,ne=L.styleSpec,pe=L.style;if(!R.type)return[new Qt(H,R,'"type" is required')];var be=Tn(R.type),Se;switch(be){case"vector":case"raster":case"raster-dem":return Se=Js({key:H,value:R,valueSpec:ne["source_"+be.replace("-","_")],style:L.style,styleSpec:ne,objectElementValidators:Dn}),Se;case"geojson":if(Se=Js({key:H,value:R,valueSpec:ne.source_geojson,style:pe,styleSpec:ne,objectElementValidators:Dn}),R.cluster)for(var ze in R.clusterProperties){var tt=R.clusterProperties[ze],ct=tt[0],mt=tt[1],It=typeof ct=="string"?[ct,["accumulated"],["get",ze]]:ct;Se.push.apply(Se,$o({key:H+"."+ze+".map",value:mt,expressionContext:"cluster-map"})),Se.push.apply(Se,$o({key:H+"."+ze+".reduce",value:It,expressionContext:"cluster-reduce"}))}return Se;case"video":return Js({key:H,value:R,valueSpec:ne.source_video,style:pe,styleSpec:ne});case"image":return Js({key:H,value:R,valueSpec:ne.source_image,style:pe,styleSpec:ne});case"canvas":return[new Qt(H,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Os({key:H+".type",value:R.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:pe,styleSpec:ne})}}function wa(L){var R=L.key,H=L.value;if(Qa(H)==="string")return wn({key:R,value:H});var ne=[];for(var pe in H)ne.push.apply(ne,wn({key:R+"."+pe,value:H[pe]}));return ne}function Aa(L){var R=L.value,H=L.styleSpec,ne=H.light,pe=L.style,be=[],Se=Qa(R);if(R===void 0)return be;if(Se!=="object")return be=be.concat([new Qt("light",R,"object expected, "+Se+" found")]),be;for(var ze in R){var tt=ze.match(/^(.*)-transition$/);tt&&ne[tt[1]]&&ne[tt[1]].transition?be=be.concat(vi({key:ze,value:R[ze],valueSpec:H.transition,style:pe,styleSpec:H})):ne[ze]?be=be.concat(vi({key:ze,value:R[ze],valueSpec:ne[ze],style:pe,styleSpec:H})):be=be.concat([new Qt(ze,R[ze],'unknown property "'+ze+'"')])}return be}function $a(L){return wn(L).length===0?[]:$o(L)}function Za(L){return wn(L).length===0?[]:$o(L)}var ri={"*":function(){return[]},array:sc,boolean:Of,number:Ff,color:xc,constants:Pr,enum:Os,filter:fr,function:zf,layer:an,object:Js,source:Jn,light:Aa,string:wn,formatted:$a,resolvedImage:Za};function vi(L){var R=L.value,H=L.valueSpec,ne=L.styleSpec;if(H.expression&&_a(Tn(R)))return zf(L);if(H.expression&&Po(Nn(R)))return $o(L);if(H.type&&ri[H.type])return ri[H.type](L);var pe=Js(Nr({},L,{valueSpec:H.type?ne[H.type]:H}));return pe}function ho(L){var R=L.value,H=L.key,ne=wn(L);return ne.length||(R.indexOf("{fontstack}")===-1&&ne.push(new Qt(H,R,'"glyphs" url must include a "{fontstack}" token')),R.indexOf("{range}")===-1&&ne.push(new Qt(H,R,'"glyphs" url must include a "{range}" token'))),ne}function ai(L,R){R===void 0&&(R=ar);var H=[];return H=H.concat(vi({key:"",value:L,valueSpec:R.$root,styleSpec:R,style:L,objectElementValidators:{glyphs:ho,"*":function(){return[]}}})),L.constants&&(H=H.concat(Pr({key:"constants",value:L.constants,style:L,styleSpec:R}))),ji(H)}ai.source=yo(Jn),ai.light=yo(Aa),ai.layer=yo(an),ai.filter=yo(fr),ai.paintProperty=yo(Dr),ai.layoutProperty=yo(Kr);function ji(L){return[].concat(L).sort(function(R,H){return R.line-H.line})}function yo(L){return function(){for(var R=[],H=arguments.length;H--;)R[H]=arguments[H];return ji(L.apply(this,R))}}var Io=ai,wi=Io.light,ki=Io.paintProperty,Cs=Io.layoutProperty;function ko(L,R){var H=!1;if(R&&R.length)for(var ne=0,pe=R;ne<pe.length;ne+=1){var be=pe[ne];L.fire(new Sr(new Error(be.message))),H=!0}return H}var Yo=he,is=3;function he(L,R,H){var ne=this.cells=[];if(L instanceof ArrayBuffer){this.arrayBuffer=L;var pe=new Int32Array(this.arrayBuffer);L=pe[0],R=pe[1],H=pe[2],this.d=R+2*H;for(var be=0;be<this.d*this.d;be++){var Se=pe[is+be],ze=pe[is+be+1];ne.push(Se===ze?null:pe.subarray(Se,ze))}var tt=pe[is+ne.length],ct=pe[is+ne.length+1];this.keys=pe.subarray(tt,ct),this.bboxes=pe.subarray(ct),this.insert=this._insertReadonly}else{this.d=R+2*H;for(var mt=0;mt<this.d*this.d;mt++)ne.push([]);this.keys=[],this.bboxes=[]}this.n=R,this.extent=L,this.padding=H,this.scale=R/L,this.uid=0;var It=H/R*L;this.min=-It,this.max=L+It}he.prototype.insert=function(L,R,H,ne,pe){this._forEachCell(R,H,ne,pe,this._insertCell,this.uid++),this.keys.push(L),this.bboxes.push(R),this.bboxes.push(H),this.bboxes.push(ne),this.bboxes.push(pe)},he.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},he.prototype._insertCell=function(L,R,H,ne,pe,be){this.cells[pe].push(be)},he.prototype.query=function(L,R,H,ne,pe){var be=this.min,Se=this.max;if(L<=be&&R<=be&&Se<=H&&Se<=ne&&!pe)return Array.prototype.slice.call(this.keys);var ze=[],tt={};return this._forEachCell(L,R,H,ne,this._queryCell,ze,tt,pe),ze},he.prototype._queryCell=function(L,R,H,ne,pe,be,Se,ze){var tt=this.cells[pe];if(tt!==null)for(var ct=this.keys,mt=this.bboxes,It=0;It<tt.length;It++){var Kt=tt[It];if(Se[Kt]===void 0){var Wt=Kt*4;(ze?ze(mt[Wt+0],mt[Wt+1],mt[Wt+2],mt[Wt+3]):L<=mt[Wt+2]&&R<=mt[Wt+3]&&H>=mt[Wt+0]&&ne>=mt[Wt+1])?(Se[Kt]=!0,be.push(ct[Kt])):Se[Kt]=!1}}},he.prototype._forEachCell=function(L,R,H,ne,pe,be,Se,ze){for(var tt=this._convertToCellCoord(L),ct=this._convertToCellCoord(R),mt=this._convertToCellCoord(H),It=this._convertToCellCoord(ne),Kt=tt;Kt<=mt;Kt++)for(var Wt=ct;Wt<=It;Wt++){var cr=this.d*Wt+Kt;if(!(ze&&!ze(this._convertFromCellCoord(Kt),this._convertFromCellCoord(Wt),this._convertFromCellCoord(Kt+1),this._convertFromCellCoord(Wt+1)))&&pe.call(this,L,R,H,ne,cr,be,Se,ze))return}},he.prototype._convertFromCellCoord=function(L){return(L-this.padding)/this.scale},he.prototype._convertToCellCoord=function(L){return Math.max(0,Math.min(this.d-1,Math.floor(L*this.scale)+this.padding))},he.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var L=this.cells,R=is+this.cells.length+1+1,H=0,ne=0;ne<this.cells.length;ne++)H+=this.cells[ne].length;var pe=new Int32Array(R+H+this.keys.length+this.bboxes.length);pe[0]=this.extent,pe[1]=this.n,pe[2]=this.padding;for(var be=R,Se=0;Se<L.length;Se++){var ze=L[Se];pe[is+Se]=be,pe.set(ze,be),be+=ze.length}return pe[is+L.length]=be,pe.set(this.keys,be),be+=this.keys.length,pe[is+L.length+1]=be,pe.set(this.bboxes,be),be+=this.bboxes.length,pe.buffer};var Te=self.ImageData,Le=self.ImageBitmap,Ue={};function Be(L,R,H){H===void 0&&(H={}),Object.defineProperty(R,"_classRegistryKey",{value:L,writeable:!1}),Ue[L]={klass:R,omit:H.omit||[],shallow:H.shallow||[]}}Be("Object",Object),Yo.serialize=function(R,H){var ne=R.toArrayBuffer();return H&&H.push(ne),{buffer:ne}},Yo.deserialize=function(R){return new Yo(R.buffer)},Be("Grid",Yo),Be("Color",di),Be("Error",Error),Be("ResolvedImage",Bo),Be("StylePropertyFunction",Mu),Be("StyleExpression",Ms,{omit:["_evaluator"]}),Be("ZoomDependentExpression",ks),Be("ZoomConstantExpression",Wu),Be("CompoundExpression",No,{omit:["_evaluate"]});for(var Ke in ea)ea[Ke]._classRegistryKey||Be("Expression_"+Ke,ea[Ke]);function yt(L){return L&&typeof ArrayBuffer!="undefined"&&(L instanceof ArrayBuffer||L.constructor&&L.constructor.name==="ArrayBuffer")}function vt(L){return Le&&L instanceof Le}function Lt(L,R){if(L==null||typeof L=="boolean"||typeof L=="number"||typeof L=="string"||L instanceof Boolean||L instanceof Number||L instanceof String||L instanceof Date||L instanceof RegExp)return L;if(yt(L)||vt(L))return R&&R.push(L),L;if(ArrayBuffer.isView(L)){var H=L;return R&&R.push(H.buffer),H}if(L instanceof Te)return R&&R.push(L.data.buffer),L;if(Array.isArray(L)){for(var ne=[],pe=0,be=L;pe<be.length;pe+=1){var Se=be[pe];ne.push(Lt(Se,R))}return ne}if(typeof L=="object"){var ze=L.constructor,tt=ze._classRegistryKey;if(!tt)throw new Error("can't serialize object of unregistered class");var ct=ze.serialize?ze.serialize(L,R):{};if(!ze.serialize){for(var mt in L)if(!!L.hasOwnProperty(mt)&&!(Ue[tt].omit.indexOf(mt)>=0)){var It=L[mt];ct[mt]=Ue[tt].shallow.indexOf(mt)>=0?It:Lt(It,R)}L instanceof Error&&(ct.message=L.message)}if(ct.$name)throw new Error("$name property is reserved for worker serialization logic.");return tt!=="Object"&&(ct.$name=tt),ct}throw new Error("can't serialize object of type "+typeof L)}function Vt(L){if(L==null||typeof L=="boolean"||typeof L=="number"||typeof L=="string"||L instanceof Boolean||L instanceof Number||L instanceof String||L instanceof Date||L instanceof RegExp||yt(L)||vt(L)||ArrayBuffer.isView(L)||L instanceof Te)return L;if(Array.isArray(L))return L.map(Vt);if(typeof L=="object"){var R=L.$name||"Object",H=Ue[R],ne=H.klass;if(!ne)throw new Error("can't deserialize unregistered class "+R);if(ne.deserialize)return ne.deserialize(L);for(var pe=Object.create(ne.prototype),be=0,Se=Object.keys(L);be<Se.length;be+=1){var ze=Se[be];if(ze!=="$name"){var tt=L[ze];pe[ze]=Ue[R].shallow.indexOf(ze)>=0?tt:Vt(tt)}}return pe}throw new Error("can't deserialize object of type "+typeof L)}var jt=function(){this.first=!0};jt.prototype.update=function(R,H){var ne=Math.floor(R);return this.first?(this.first=!1,this.lastIntegerZoom=ne,this.lastIntegerZoomTime=0,this.lastZoom=R,this.lastFloorZoom=ne,!0):(this.lastFloorZoom>ne?(this.lastIntegerZoom=ne+1,this.lastIntegerZoomTime=H):this.lastFloorZoom<ne&&(this.lastIntegerZoom=ne,this.lastIntegerZoomTime=H),R!==this.lastZoom?(this.lastZoom=R,this.lastFloorZoom=ne,!0):!1)};var Zt={"Latin-1 Supplement":function(L){return L>=128&&L<=255},Arabic:function(L){return L>=1536&&L<=1791},"Arabic Supplement":function(L){return L>=1872&&L<=1919},"Arabic Extended-A":function(L){return L>=2208&&L<=2303},"Hangul Jamo":function(L){return L>=4352&&L<=4607},"Unified Canadian Aboriginal Syllabics":function(L){return L>=5120&&L<=5759},Khmer:function(L){return L>=6016&&L<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(L){return L>=6320&&L<=6399},"General Punctuation":function(L){return L>=8192&&L<=8303},"Letterlike Symbols":function(L){return L>=8448&&L<=8527},"Number Forms":function(L){return L>=8528&&L<=8591},"Miscellaneous Technical":function(L){return L>=8960&&L<=9215},"Control Pictures":function(L){return L>=9216&&L<=9279},"Optical Character Recognition":function(L){return L>=9280&&L<=9311},"Enclosed Alphanumerics":function(L){return L>=9312&&L<=9471},"Geometric Shapes":function(L){return L>=9632&&L<=9727},"Miscellaneous Symbols":function(L){return L>=9728&&L<=9983},"Miscellaneous Symbols and Arrows":function(L){return L>=11008&&L<=11263},"CJK Radicals Supplement":function(L){return L>=11904&&L<=12031},"Kangxi Radicals":function(L){return L>=12032&&L<=12255},"Ideographic Description Characters":function(L){return L>=12272&&L<=12287},"CJK Symbols and Punctuation":function(L){return L>=12288&&L<=12351},Hiragana:function(L){return L>=12352&&L<=12447},Katakana:function(L){return L>=12448&&L<=12543},Bopomofo:function(L){return L>=12544&&L<=12591},"Hangul Compatibility Jamo":function(L){return L>=12592&&L<=12687},Kanbun:function(L){return L>=12688&&L<=12703},"Bopomofo Extended":function(L){return L>=12704&&L<=12735},"CJK Strokes":function(L){return L>=12736&&L<=12783},"Katakana Phonetic Extensions":function(L){return L>=12784&&L<=12799},"Enclosed CJK Letters and Months":function(L){return L>=12800&&L<=13055},"CJK Compatibility":function(L){return L>=13056&&L<=13311},"CJK Unified Ideographs Extension A":function(L){return L>=13312&&L<=19903},"Yijing Hexagram Symbols":function(L){return L>=19904&&L<=19967},"CJK Unified Ideographs":function(L){return L>=19968&&L<=40959},"Yi Syllables":function(L){return L>=40960&&L<=42127},"Yi Radicals":function(L){return L>=42128&&L<=42191},"Hangul Jamo Extended-A":function(L){return L>=43360&&L<=43391},"Hangul Syllables":function(L){return L>=44032&&L<=55215},"Hangul Jamo Extended-B":function(L){return L>=55216&&L<=55295},"Private Use Area":function(L){return L>=57344&&L<=63743},"CJK Compatibility Ideographs":function(L){return L>=63744&&L<=64255},"Arabic Presentation Forms-A":function(L){return L>=64336&&L<=65023},"Vertical Forms":function(L){return L>=65040&&L<=65055},"CJK Compatibility Forms":function(L){return L>=65072&&L<=65103},"Small Form Variants":function(L){return L>=65104&&L<=65135},"Arabic Presentation Forms-B":function(L){return L>=65136&&L<=65279},"Halfwidth and Fullwidth Forms":function(L){return L>=65280&&L<=65519}};function Ar(L){for(var R=0,H=L;R<H.length;R+=1){var ne=H[R];if(Yr(ne.charCodeAt(0)))return!0}return!1}function tn(L){for(var R=0,H=L;R<H.length;R+=1){var ne=H[R];if(!pn(ne.charCodeAt(0)))return!1}return!0}function pn(L){return!(Zt.Arabic(L)||Zt["Arabic Supplement"](L)||Zt["Arabic Extended-A"](L)||Zt["Arabic Presentation Forms-A"](L)||Zt["Arabic Presentation Forms-B"](L))}function Cr(L){return L<11904?!1:!!(Zt["Bopomofo Extended"](L)||Zt.Bopomofo(L)||Zt["CJK Compatibility Forms"](L)||Zt["CJK Compatibility Ideographs"](L)||Zt["CJK Compatibility"](L)||Zt["CJK Radicals Supplement"](L)||Zt["CJK Strokes"](L)||Zt["CJK Symbols and Punctuation"](L)||Zt["CJK Unified Ideographs Extension A"](L)||Zt["CJK Unified Ideographs"](L)||Zt["Enclosed CJK Letters and Months"](L)||Zt["Halfwidth and Fullwidth Forms"](L)||Zt.Hiragana(L)||Zt["Ideographic Description Characters"](L)||Zt["Kangxi Radicals"](L)||Zt["Katakana Phonetic Extensions"](L)||Zt.Katakana(L)||Zt["Vertical Forms"](L)||Zt["Yi Radicals"](L)||Zt["Yi Syllables"](L))}function Yr(L){return L===746||L===747?!0:L<4352?!1:!!(Zt["Bopomofo Extended"](L)||Zt.Bopomofo(L)||Zt["CJK Compatibility Forms"](L)&&!(L>=65097&&L<=65103)||Zt["CJK Compatibility Ideographs"](L)||Zt["CJK Compatibility"](L)||Zt["CJK Radicals Supplement"](L)||Zt["CJK Strokes"](L)||Zt["CJK Symbols and Punctuation"](L)&&!(L>=12296&&L<=12305)&&!(L>=12308&&L<=12319)&&L!==12336||Zt["CJK Unified Ideographs Extension A"](L)||Zt["CJK Unified Ideographs"](L)||Zt["Enclosed CJK Letters and Months"](L)||Zt["Hangul Compatibility Jamo"](L)||Zt["Hangul Jamo Extended-A"](L)||Zt["Hangul Jamo Extended-B"](L)||Zt["Hangul Jamo"](L)||Zt["Hangul Syllables"](L)||Zt.Hiragana(L)||Zt["Ideographic Description Characters"](L)||Zt.Kanbun(L)||Zt["Kangxi Radicals"](L)||Zt["Katakana Phonetic Extensions"](L)||Zt.Katakana(L)&&L!==12540||Zt["Halfwidth and Fullwidth Forms"](L)&&L!==65288&&L!==65289&&L!==65293&&!(L>=65306&&L<=65310)&&L!==65339&&L!==65341&&L!==65343&&!(L>=65371&&L<=65503)&&L!==65507&&!(L>=65512&&L<=65519)||Zt["Small Form Variants"](L)&&!(L>=65112&&L<=65118)&&!(L>=65123&&L<=65126)||Zt["Unified Canadian Aboriginal Syllabics"](L)||Zt["Unified Canadian Aboriginal Syllabics Extended"](L)||Zt["Vertical Forms"](L)||Zt["Yijing Hexagram Symbols"](L)||Zt["Yi Syllables"](L)||Zt["Yi Radicals"](L))}function Jr(L){return!!(Zt["Latin-1 Supplement"](L)&&(L===167||L===169||L===174||L===177||L===188||L===189||L===190||L===215||L===247)||Zt["General Punctuation"](L)&&(L===8214||L===8224||L===8225||L===8240||L===8241||L===8251||L===8252||L===8258||L===8263||L===8264||L===8265||L===8273)||Zt["Letterlike Symbols"](L)||Zt["Number Forms"](L)||Zt["Miscellaneous Technical"](L)&&(L>=8960&&L<=8967||L>=8972&&L<=8991||L>=8996&&L<=9e3||L===9003||L>=9085&&L<=9114||L>=9150&&L<=9165||L===9167||L>=9169&&L<=9179||L>=9186&&L<=9215)||Zt["Control Pictures"](L)&&L!==9251||Zt["Optical Character Recognition"](L)||Zt["Enclosed Alphanumerics"](L)||Zt["Geometric Shapes"](L)||Zt["Miscellaneous Symbols"](L)&&!(L>=9754&&L<=9759)||Zt["Miscellaneous Symbols and Arrows"](L)&&(L>=11026&&L<=11055||L>=11088&&L<=11097||L>=11192&&L<=11243)||Zt["CJK Symbols and Punctuation"](L)||Zt.Katakana(L)||Zt["Private Use Area"](L)||Zt["CJK Compatibility Forms"](L)||Zt["Small Form Variants"](L)||Zt["Halfwidth and Fullwidth Forms"](L)||L===8734||L===8756||L===8757||L>=9984&&L<=10087||L>=10102&&L<=10131||L===65532||L===65533)}function fn(L){return!(Yr(L)||Jr(L))}function vn(L){return Zt.Arabic(L)||Zt["Arabic Supplement"](L)||Zt["Arabic Extended-A"](L)||Zt["Arabic Presentation Forms-A"](L)||Zt["Arabic Presentation Forms-B"](L)}function Qr(L){return L>=1424&&L<=2303||Zt["Arabic Presentation Forms-A"](L)||Zt["Arabic Presentation Forms-B"](L)}function jn(L,R){return!(!R&&Qr(L)||L>=2304&&L<=3583||L>=3840&&L<=4255||Zt.Khmer(L))}function ia(L){for(var R=0,H=L;R<H.length;R+=1){var ne=H[R];if(Qr(ne.charCodeAt(0)))return!0}return!1}function Ma(L,R){for(var H=0,ne=L;H<ne.length;H+=1){var pe=ne[H];if(!jn(pe.charCodeAt(0),R))return!1}return!0}var ua={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},Ra=null,va=ua.unavailable,Wa=null,za=function(L){L&&typeof L=="string"&&L.indexOf("NetworkError")>-1&&(va=ua.error),Ra&&Ra(L)};function ei(){xi.fire(new nn("pluginStateChange",{pluginStatus:va,pluginURL:Wa}))}var xi=new yr,xo=function(){return va},Bi=function(L){return L({pluginStatus:va,pluginURL:Wa}),xi.on("pluginStateChange",L),L},ga=function(L,R,H){if(H===void 0&&(H=!1),va===ua.deferred||va===ua.loading||va===ua.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");Wa=Q.resolveURL(L),va=ua.deferred,Ra=R,ei(),H||oi()},oi=function(){if(va!==ua.deferred||!Wa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");va=ua.loading,ei(),Wa&&Re({url:Wa},function(L){L?za(L):(va=ua.loaded,ei())})},Ka={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return va===ua.loaded||Ka.applyArabicShaping!=null},isLoading:function(){return va===ua.loading},setState:function(R){va=R.pluginStatus,Wa=R.pluginURL},isParsed:function(){return Ka.applyArabicShaping!=null&&Ka.processBidirectionalText!=null&&Ka.processStyledBidirectionalText!=null},getPluginURL:function(){return Wa}},Ci=function(){!Ka.isLoading()&&!Ka.isLoaded()&&xo()==="deferred"&&oi()},ui=function(R,H){this.zoom=R,H?(this.now=H.now,this.fadeDuration=H.fadeDuration,this.zoomHistory=H.zoomHistory,this.transition=H.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new jt,this.transition={})};ui.prototype.isSupportedScript=function(R){return Ma(R,Ka.isLoaded())},ui.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ui.prototype.getCrossfadeParameters=function(){var R=this.zoom,H=R-Math.floor(R),ne=this.crossFadingFactor();return R>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:H+(1-H)*ne}:{fromScale:.5,toScale:1,t:1-(1-ne)*H}};var vo=function(R,H){this.property=R,this.value=H,this.expression=Gc(H===void 0?R.specification.default:H,R.specification)};vo.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},vo.prototype.possiblyEvaluate=function(R,H,ne){return this.property.possiblyEvaluate(this,R,H,ne)};var to=function(R){this.property=R,this.value=new vo(R,void 0)};to.prototype.transitioned=function(R,H){return new os(this.property,this.value,H,S({},R.transition,this.transition),R.now)},to.prototype.untransitioned=function(){return new os(this.property,this.value,null,{},0)};var Co=function(R){this._properties=R,this._values=Object.create(R.defaultTransitionablePropertyValues)};Co.prototype.getValue=function(R){return O(this._values[R].value.value)},Co.prototype.setValue=function(R,H){this._values.hasOwnProperty(R)||(this._values[R]=new to(this._values[R].property)),this._values[R].value=new vo(this._values[R].property,H===null?void 0:O(H))},Co.prototype.getTransition=function(R){return O(this._values[R].transition)},Co.prototype.setTransition=function(R,H){this._values.hasOwnProperty(R)||(this._values[R]=new to(this._values[R].property)),this._values[R].transition=O(H)||void 0},Co.prototype.serialize=function(){for(var R={},H=0,ne=Object.keys(this._values);H<ne.length;H+=1){var pe=ne[H],be=this.getValue(pe);be!==void 0&&(R[pe]=be);var Se=this.getTransition(pe);Se!==void 0&&(R[pe+"-transition"]=Se)}return R},Co.prototype.transitioned=function(R,H){for(var ne=new Qo(this._properties),pe=0,be=Object.keys(this._values);pe<be.length;pe+=1){var Se=be[pe];ne._values[Se]=this._values[Se].transitioned(R,H._values[Se])}return ne},Co.prototype.untransitioned=function(){for(var R=new Qo(this._properties),H=0,ne=Object.keys(this._values);H<ne.length;H+=1){var pe=ne[H];R._values[pe]=this._values[pe].untransitioned()}return R};var os=function(R,H,ne,pe,be){this.property=R,this.value=H,this.begin=be+pe.delay||0,this.end=this.begin+pe.duration||0,R.specification.transition&&(pe.delay||pe.duration)&&(this.prior=ne)};os.prototype.possiblyEvaluate=function(R,H,ne){var pe=R.now||0,be=this.value.possiblyEvaluate(R,H,ne),Se=this.prior;if(Se){if(pe>this.end)return this.prior=null,be;if(this.value.isDataDriven())return this.prior=null,be;if(pe<this.begin)return Se.possiblyEvaluate(R,H,ne);var ze=(pe-this.begin)/(this.end-this.begin);return this.property.interpolate(Se.possiblyEvaluate(R,H,ne),be,h(ze))}else return be};var Qo=function(R){this._properties=R,this._values=Object.create(R.defaultTransitioningPropertyValues)};Qo.prototype.possiblyEvaluate=function(R,H,ne){for(var pe=new Hi(this._properties),be=0,Se=Object.keys(this._values);be<Se.length;be+=1){var ze=Se[be];pe._values[ze]=this._values[ze].possiblyEvaluate(R,H,ne)}return pe},Qo.prototype.hasTransition=function(){for(var R=0,H=Object.keys(this._values);R<H.length;R+=1){var ne=H[R];if(this._values[ne].prior)return!0}return!1};var ss=function(R){this._properties=R,this._values=Object.create(R.defaultPropertyValues)};ss.prototype.getValue=function(R){return O(this._values[R].value)},ss.prototype.setValue=function(R,H){this._values[R]=new vo(this._values[R].property,H===null?void 0:O(H))},ss.prototype.serialize=function(){for(var R={},H=0,ne=Object.keys(this._values);H<ne.length;H+=1){var pe=ne[H],be=this.getValue(pe);be!==void 0&&(R[pe]=be)}return R},ss.prototype.possiblyEvaluate=function(R,H,ne){for(var pe=new Hi(this._properties),be=0,Se=Object.keys(this._values);be<Se.length;be+=1){var ze=Se[be];pe._values[ze]=this._values[ze].possiblyEvaluate(R,H,ne)}return pe};var Xi=function(R,H,ne){this.property=R,this.value=H,this.parameters=ne};Xi.prototype.isConstant=function(){return this.value.kind==="constant"},Xi.prototype.constantOr=function(R){return this.value.kind==="constant"?this.value.value:R},Xi.prototype.evaluate=function(R,H,ne,pe){return this.property.evaluate(this.value,this.parameters,R,H,ne,pe)};var Hi=function(R){this._properties=R,this._values=Object.create(R.defaultPossiblyEvaluatedValues)};Hi.prototype.get=function(R){return this._values[R]};var Na=function(R){this.specification=R};Na.prototype.possiblyEvaluate=function(R,H){return R.expression.evaluate(H)},Na.prototype.interpolate=function(R,H,ne){var pe=Ml[this.specification.type];return pe?pe(R,H,ne):R};var Ja=function(R,H){this.specification=R,this.overrides=H};Ja.prototype.possiblyEvaluate=function(R,H,ne,pe){return R.expression.kind==="constant"||R.expression.kind==="camera"?new Xi(this,{kind:"constant",value:R.expression.evaluate(H,null,{},ne,pe)},H):new Xi(this,R.expression,H)},Ja.prototype.interpolate=function(R,H,ne){if(R.value.kind!=="constant"||H.value.kind!=="constant")return R;if(R.value.value===void 0||H.value.value===void 0)return new Xi(this,{kind:"constant",value:void 0},R.parameters);var pe=Ml[this.specification.type];return pe?new Xi(this,{kind:"constant",value:pe(R.value.value,H.value.value,ne)},R.parameters):R},Ja.prototype.evaluate=function(R,H,ne,pe,be,Se){return R.kind==="constant"?R.value:R.evaluate(H,ne,pe,be,Se)};var Ro=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.possiblyEvaluate=function(ne,pe,be,Se){if(ne.value===void 0)return new Xi(this,{kind:"constant",value:void 0},pe);if(ne.expression.kind==="constant"){var ze=ne.expression.evaluate(pe,null,{},be,Se),tt=ne.property.specification.type==="resolvedImage",ct=tt&&typeof ze!="string"?ze.name:ze,mt=this._calculate(ct,ct,ct,pe);return new Xi(this,{kind:"constant",value:mt},pe)}else if(ne.expression.kind==="camera"){var It=this._calculate(ne.expression.evaluate({zoom:pe.zoom-1}),ne.expression.evaluate({zoom:pe.zoom}),ne.expression.evaluate({zoom:pe.zoom+1}),pe);return new Xi(this,{kind:"constant",value:It},pe)}else return new Xi(this,ne.expression,pe)},R.prototype.evaluate=function(ne,pe,be,Se,ze,tt){if(ne.kind==="source"){var ct=ne.evaluate(pe,be,Se,ze,tt);return this._calculate(ct,ct,ct,pe)}else return ne.kind==="composite"?this._calculate(ne.evaluate({zoom:Math.floor(pe.zoom)-1},be,Se),ne.evaluate({zoom:Math.floor(pe.zoom)},be,Se),ne.evaluate({zoom:Math.floor(pe.zoom)+1},be,Se),pe):ne.value},R.prototype._calculate=function(ne,pe,be,Se){var ze=Se.zoom;return ze>Se.zoomHistory.lastIntegerZoom?{from:ne,to:pe}:{from:be,to:pe}},R.prototype.interpolate=function(ne){return ne},R}(Ja),io=function(R){this.specification=R};io.prototype.possiblyEvaluate=function(R,H,ne,pe){if(R.value!==void 0)if(R.expression.kind==="constant"){var be=R.expression.evaluate(H,null,{},ne,pe);return this._calculate(be,be,be,H)}else return this._calculate(R.expression.evaluate(new ui(Math.floor(H.zoom-1),H)),R.expression.evaluate(new ui(Math.floor(H.zoom),H)),R.expression.evaluate(new ui(Math.floor(H.zoom+1),H)),H)},io.prototype._calculate=function(R,H,ne,pe){var be=pe.zoom;return be>pe.zoomHistory.lastIntegerZoom?{from:R,to:H}:{from:ne,to:H}},io.prototype.interpolate=function(R){return R};var jo=function(R){this.specification=R};jo.prototype.possiblyEvaluate=function(R,H,ne,pe){return!!R.expression.evaluate(H,null,{},ne,pe)},jo.prototype.interpolate=function(){return!1};var Ji=function(R){this.properties=R,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var H in R){var ne=R[H];ne.specification.overridable&&this.overridableProperties.push(H);var pe=this.defaultPropertyValues[H]=new vo(ne,void 0),be=this.defaultTransitionablePropertyValues[H]=new to(ne);this.defaultTransitioningPropertyValues[H]=be.untransitioned(),this.defaultPossiblyEvaluatedValues[H]=pe.possiblyEvaluate({})}};Be("DataDrivenProperty",Ja),Be("DataConstantProperty",Na),Be("CrossFadedDataDrivenProperty",Ro),Be("CrossFadedProperty",io),Be("ColorRampProperty",jo);var ls="-transition",Bs=function(L){function R(H,ne){if(L.call(this),this.id=H.id,this.type=H.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},H.type!=="custom"&&(H=H,this.metadata=H.metadata,this.minzoom=H.minzoom,this.maxzoom=H.maxzoom,H.type!=="background"&&(this.source=H.source,this.sourceLayer=H["source-layer"],this.filter=H.filter),ne.layout&&(this._unevaluatedLayout=new ss(ne.layout)),ne.paint)){this._transitionablePaint=new Co(ne.paint);for(var pe in H.paint)this.setPaintProperty(pe,H.paint[pe],{validate:!1});for(var be in H.layout)this.setLayoutProperty(be,H.layout[be],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Hi(ne.paint)}}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},R.prototype.getLayoutProperty=function(ne){return ne==="visibility"?this.visibility:this._unevaluatedLayout.getValue(ne)},R.prototype.setLayoutProperty=function(ne,pe,be){if(be===void 0&&(be={}),pe!=null){var Se="layers."+this.id+".layout."+ne;if(this._validate(Cs,Se,ne,pe,be))return}if(ne==="visibility"){this.visibility=pe;return}this._unevaluatedLayout.setValue(ne,pe)},R.prototype.getPaintProperty=function(ne){return E(ne,ls)?this._transitionablePaint.getTransition(ne.slice(0,-ls.length)):this._transitionablePaint.getValue(ne)},R.prototype.setPaintProperty=function(ne,pe,be){if(be===void 0&&(be={}),pe!=null){var Se="layers."+this.id+".paint."+ne;if(this._validate(ki,Se,ne,pe,be))return!1}if(E(ne,ls))return this._transitionablePaint.setTransition(ne.slice(0,-ls.length),pe||void 0),!1;var ze=this._transitionablePaint._values[ne],tt=ze.property.specification["property-type"]==="cross-faded-data-driven",ct=ze.value.isDataDriven(),mt=ze.value;this._transitionablePaint.setValue(ne,pe),this._handleSpecialPaintPropertyUpdate(ne);var It=this._transitionablePaint._values[ne].value,Kt=It.isDataDriven();return Kt||ct||tt||this._handleOverridablePaintPropertyUpdate(ne,mt,It)},R.prototype._handleSpecialPaintPropertyUpdate=function(ne){},R.prototype._handleOverridablePaintPropertyUpdate=function(ne,pe,be){return!1},R.prototype.isHidden=function(ne){return this.minzoom&&ne<this.minzoom||this.maxzoom&&ne>=this.maxzoom?!0:this.visibility==="none"},R.prototype.updateTransitions=function(ne){this._transitioningPaint=this._transitionablePaint.transitioned(ne,this._transitioningPaint)},R.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},R.prototype.recalculate=function(ne,pe){ne.getCrossfadeParameters&&(this._crossfadeParameters=ne.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(ne,void 0,pe)),this.paint=this._transitioningPaint.possiblyEvaluate(ne,void 0,pe)},R.prototype.serialize=function(){var ne={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(ne.layout=ne.layout||{},ne.layout.visibility=this.visibility),N(ne,function(pe,be){return pe!==void 0&&!(be==="layout"&&!Object.keys(pe).length)&&!(be==="paint"&&!Object.keys(pe).length)})},R.prototype._validate=function(ne,pe,be,Se,ze){return ze===void 0&&(ze={}),ze&&ze.validate===!1?!1:ko(this,ne.call(Io,{key:pe,layerType:this.type,objectKey:be,value:Se,styleSpec:ar,style:{glyphs:!0,sprite:!0}}))},R.prototype.is3D=function(){return!1},R.prototype.isTileClipped=function(){return!1},R.prototype.hasOffscreenPass=function(){return!1},R.prototype.resize=function(){},R.prototype.isStateDependent=function(){for(var ne in this.paint._values){var pe=this.paint.get(ne);if(!(!(pe instanceof Xi)||!li(pe.property.specification))&&(pe.value.kind==="source"||pe.value.kind==="composite")&&pe.value.isStateDependent)return!0}return!1},R}(yr),ku={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},$i=function(R,H){this._structArray=R,this._pos1=H*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},bc=128,lu=5,Vi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Vi.serialize=function(R,H){return R._trim(),H&&(R.isTransferred=!0,H.push(R.arrayBuffer)),{length:R.length,arrayBuffer:R.arrayBuffer}},Vi.deserialize=function(R){var H=Object.create(this.prototype);return H.arrayBuffer=R.arrayBuffer,H.length=R.length,H.capacity=R.arrayBuffer.byteLength/H.bytesPerElement,H._refreshViews(),H},Vi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Vi.prototype.clear=function(){this.length=0},Vi.prototype.resize=function(R){this.reserve(R),this.length=R},Vi.prototype.reserve=function(R){if(R>this.capacity){this.capacity=Math.max(R,Math.floor(this.capacity*lu),bc),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var H=this.uint8;this._refreshViews(),H&&this.uint8.set(H)}},Vi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function Xo(L,R){R===void 0&&(R=1);var H=0,ne=0,pe=L.map(function(Se){var ze=ug(Se.type),tt=H=yh(H,Math.max(R,ze)),ct=Se.components||1;return ne=Math.max(ne,ze),H+=ze*ct,{name:Se.name,type:Se.type,components:ct,offset:tt}}),be=yh(H,Math.max(ne,R));return{members:pe,size:be,alignment:R}}function ug(L){return ku[L].BYTES_PER_ELEMENT}function yh(L,R){return Math.ceil(L/R)*R}var Wc=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(ne,pe){var be=this.length;return this.resize(be+1),this.emplace(be,ne,pe)},R.prototype.emplace=function(ne,pe,be){var Se=ne*2;return this.int16[Se+0]=pe,this.int16[Se+1]=be,ne},R}(Vi);Wc.prototype.bytesPerElement=4,Be("StructArrayLayout2i4",Wc);var Nf=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(ne,pe,be,Se){var ze=this.length;return this.resize(ze+1),this.emplace(ze,ne,pe,be,Se)},R.prototype.emplace=function(ne,pe,be,Se,ze){var tt=ne*4;return this.int16[tt+0]=pe,this.int16[tt+1]=be,this.int16[tt+2]=Se,this.int16[tt+3]=ze,ne},R}(Vi);Nf.prototype.bytesPerElement=8,Be("StructArrayLayout4i8",Nf);var _c=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(ne,pe,be,Se,ze,tt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,ne,pe,be,Se,ze,tt)},R.prototype.emplace=function(ne,pe,be,Se,ze,tt,ct){var mt=ne*6;return this.int16[mt+0]=pe,this.int16[mt+1]=be,this.int16[mt+2]=Se,this.int16[mt+3]=ze,this.int16[mt+4]=tt,this.int16[mt+5]=ct,ne},R}(Vi);_c.prototype.bytesPerElement=12,Be("StructArrayLayout2i4i12",_c);var xh=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(ne,pe,be,Se,ze,tt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,ne,pe,be,Se,ze,tt)},R.prototype.emplace=function(ne,pe,be,Se,ze,tt,ct){var mt=ne*4,It=ne*8;return this.int16[mt+0]=pe,this.int16[mt+1]=be,this.uint8[It+4]=Se,this.uint8[It+5]=ze,this.uint8[It+6]=tt,this.uint8[It+7]=ct,ne},R}(Vi);xh.prototype.bytesPerElement=8,Be("StructArrayLayout2i4ub8",xh);var vl=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(ne,pe,be,Se,ze,tt,ct,mt,It,Kt){var Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,ne,pe,be,Se,ze,tt,ct,mt,It,Kt)},R.prototype.emplace=function(ne,pe,be,Se,ze,tt,ct,mt,It,Kt,Wt){var cr=ne*9,Br=ne*18;return this.uint16[cr+0]=pe,this.uint16[cr+1]=be,this.uint16[cr+2]=Se,this.uint16[cr+3]=ze,this.uint16[cr+4]=tt,this.uint16[cr+5]=ct,this.uint16[cr+6]=mt,this.uint16[cr+7]=It,this.uint8[Br+16]=Kt,this.uint8[Br+17]=Wt,ne},R}(Vi);vl.prototype.bytesPerElement=18,Be("StructArrayLayout8ui2ub18",vl);var Uf=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(ne,pe,be,Se,ze,tt,ct,mt,It,Kt,Wt,cr){var Br=this.length;return this.resize(Br+1),this.emplace(Br,ne,pe,be,Se,ze,tt,ct,mt,It,Kt,Wt,cr)},R.prototype.emplace=function(ne,pe,be,Se,ze,tt,ct,mt,It,Kt,Wt,cr,Br){var hn=ne*12;return this.int16[hn+0]=pe,this.int16[hn+1]=be,this.int16[hn+2]=Se,this.int16[hn+3]=ze,this.uint16[hn+4]=tt,this.uint16[hn+5]=ct,this.uint16[hn+6]=mt,this.uint16[hn+7]=It,this.int16[hn+8]=Kt,this.int16[hn+9]=Wt,this.int16[hn+10]=cr,this.int16[hn+11]=Br,ne},R}(Vi);Uf.prototype.bytesPerElement=24,Be("StructArrayLayout4i4ui4i24",Uf);var Sv=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(ne,pe,be){var Se=this.length;return this.resize(Se+1),this.emplace(Se,ne,pe,be)},R.prototype.emplace=function(ne,pe,be,Se){var ze=ne*3;return this.float32[ze+0]=pe,this.float32[ze+1]=be,this.float32[ze+2]=Se,ne},R}(Vi);Sv.prototype.bytesPerElement=12,Be("StructArrayLayout3f12",Sv);var Mv=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(ne){var pe=this.length;return this.resize(pe+1),this.emplace(pe,ne)},R.prototype.emplace=function(ne,pe){var be=ne*1;return this.uint32[be+0]=pe,ne},R}(Vi);Mv.prototype.bytesPerElement=4,Be("StructArrayLayout1ul4",Mv);var Yc=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(ne,pe,be,Se,ze,tt,ct,mt,It){var Kt=this.length;return this.resize(Kt+1),this.emplace(Kt,ne,pe,be,Se,ze,tt,ct,mt,It)},R.prototype.emplace=function(ne,pe,be,Se,ze,tt,ct,mt,It,Kt){var Wt=ne*10,cr=ne*5;return this.int16[Wt+0]=pe,this.int16[Wt+1]=be,this.int16[Wt+2]=Se,this.int16[Wt+3]=ze,this.int16[Wt+4]=tt,this.int16[Wt+5]=ct,this.uint32[cr+3]=mt,this.uint16[Wt+8]=It,this.uint16[Wt+9]=Kt,ne},R}(Vi);Yc.prototype.bytesPerElement=20,Be("StructArrayLayout6i1ul2ui20",Yc);var bh=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(ne,pe,be,Se,ze,tt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,ne,pe,be,Se,ze,tt)},R.prototype.emplace=function(ne,pe,be,Se,ze,tt,ct){var mt=ne*6;return this.int16[mt+0]=pe,this.int16[mt+1]=be,this.int16[mt+2]=Se,this.int16[mt+3]=ze,this.int16[mt+4]=tt,this.int16[mt+5]=ct,ne},R}(Vi);bh.prototype.bytesPerElement=12,Be("StructArrayLayout2i2i2i12",bh);var df=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(ne,pe,be,Se,ze){var tt=this.length;return this.resize(tt+1),this.emplace(tt,ne,pe,be,Se,ze)},R.prototype.emplace=function(ne,pe,be,Se,ze,tt){var ct=ne*4,mt=ne*8;return this.float32[ct+0]=pe,this.float32[ct+1]=be,this.float32[ct+2]=Se,this.int16[mt+6]=ze,this.int16[mt+7]=tt,ne},R}(Vi);df.prototype.bytesPerElement=16,Be("StructArrayLayout2f1f2i16",df);var Pl=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(ne,pe,be,Se){var ze=this.length;return this.resize(ze+1),this.emplace(ze,ne,pe,be,Se)},R.prototype.emplace=function(ne,pe,be,Se,ze){var tt=ne*12,ct=ne*3;return this.uint8[tt+0]=pe,this.uint8[tt+1]=be,this.float32[ct+1]=Se,this.float32[ct+2]=ze,ne},R}(Vi);Pl.prototype.bytesPerElement=12,Be("StructArrayLayout2ub2f12",Pl);var gf=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(ne,pe,be){var Se=this.length;return this.resize(Se+1),this.emplace(Se,ne,pe,be)},R.prototype.emplace=function(ne,pe,be,Se){var ze=ne*3;return this.uint16[ze+0]=pe,this.uint16[ze+1]=be,this.uint16[ze+2]=Se,ne},R}(Vi);gf.prototype.bytesPerElement=6,Be("StructArrayLayout3ui6",gf);var jc=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(ne,pe,be,Se,ze,tt,ct,mt,It,Kt,Wt,cr,Br,hn,rn,kn,_n){var Sn=this.length;return this.resize(Sn+1),this.emplace(Sn,ne,pe,be,Se,ze,tt,ct,mt,It,Kt,Wt,cr,Br,hn,rn,kn,_n)},R.prototype.emplace=function(ne,pe,be,Se,ze,tt,ct,mt,It,Kt,Wt,cr,Br,hn,rn,kn,_n,Sn){var zn=ne*24,Kn=ne*12,fa=ne*48;return this.int16[zn+0]=pe,this.int16[zn+1]=be,this.uint16[zn+2]=Se,this.uint16[zn+3]=ze,this.uint32[Kn+2]=tt,this.uint32[Kn+3]=ct,this.uint32[Kn+4]=mt,this.uint16[zn+10]=It,this.uint16[zn+11]=Kt,this.uint16[zn+12]=Wt,this.float32[Kn+7]=cr,this.float32[Kn+8]=Br,this.uint8[fa+36]=hn,this.uint8[fa+37]=rn,this.uint8[fa+38]=kn,this.uint32[Kn+10]=_n,this.int16[zn+22]=Sn,ne},R}(Vi);jc.prototype.bytesPerElement=48,Be("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",jc);var _h=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(ne,pe,be,Se,ze,tt,ct,mt,It,Kt,Wt,cr,Br,hn,rn,kn,_n,Sn,zn,Kn,fa,sa,Ba,ka,La,ni,Fa,Oa){var hi=this.length;return this.resize(hi+1),this.emplace(hi,ne,pe,be,Se,ze,tt,ct,mt,It,Kt,Wt,cr,Br,hn,rn,kn,_n,Sn,zn,Kn,fa,sa,Ba,ka,La,ni,Fa,Oa)},R.prototype.emplace=function(ne,pe,be,Se,ze,tt,ct,mt,It,Kt,Wt,cr,Br,hn,rn,kn,_n,Sn,zn,Kn,fa,sa,Ba,ka,La,ni,Fa,Oa,hi){var ti=ne*34,Ei=ne*17;return this.int16[ti+0]=pe,this.int16[ti+1]=be,this.int16[ti+2]=Se,this.int16[ti+3]=ze,this.int16[ti+4]=tt,this.int16[ti+5]=ct,this.int16[ti+6]=mt,this.int16[ti+7]=It,this.uint16[ti+8]=Kt,this.uint16[ti+9]=Wt,this.uint16[ti+10]=cr,this.uint16[ti+11]=Br,this.uint16[ti+12]=hn,this.uint16[ti+13]=rn,this.uint16[ti+14]=kn,this.uint16[ti+15]=_n,this.uint16[ti+16]=Sn,this.uint16[ti+17]=zn,this.uint16[ti+18]=Kn,this.uint16[ti+19]=fa,this.uint16[ti+20]=sa,this.uint16[ti+21]=Ba,this.uint16[ti+22]=ka,this.uint32[Ei+12]=La,this.float32[Ei+13]=ni,this.float32[Ei+14]=Fa,this.float32[Ei+15]=Oa,this.float32[Ei+16]=hi,ne},R}(Vi);_h.prototype.bytesPerElement=68,Be("StructArrayLayout8i15ui1ul4f68",_h);var wc=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(ne){var pe=this.length;return this.resize(pe+1),this.emplace(pe,ne)},R.prototype.emplace=function(ne,pe){var be=ne*1;return this.float32[be+0]=pe,ne},R}(Vi);wc.prototype.bytesPerElement=4,Be("StructArrayLayout1f4",wc);var kv=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(ne,pe,be){var Se=this.length;return this.resize(Se+1),this.emplace(Se,ne,pe,be)},R.prototype.emplace=function(ne,pe,be,Se){var ze=ne*3;return this.int16[ze+0]=pe,this.int16[ze+1]=be,this.int16[ze+2]=Se,ne},R}(Vi);kv.prototype.bytesPerElement=6,Be("StructArrayLayout3i6",kv);var Vf=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(ne,pe,be){var Se=this.length;return this.resize(Se+1),this.emplace(Se,ne,pe,be)},R.prototype.emplace=function(ne,pe,be,Se){var ze=ne*2,tt=ne*4;return this.uint32[ze+0]=pe,this.uint16[tt+2]=be,this.uint16[tt+3]=Se,ne},R}(Vi);Vf.prototype.bytesPerElement=8,Be("StructArrayLayout1ul2ui8",Vf);var Xc=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(ne,pe){var be=this.length;return this.resize(be+1),this.emplace(be,ne,pe)},R.prototype.emplace=function(ne,pe,be){var Se=ne*2;return this.uint16[Se+0]=pe,this.uint16[Se+1]=be,ne},R}(Vi);Xc.prototype.bytesPerElement=4,Be("StructArrayLayout2ui4",Xc);var Tc=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},R.prototype.emplaceBack=function(ne){var pe=this.length;return this.resize(pe+1),this.emplace(pe,ne)},R.prototype.emplace=function(ne,pe){var be=ne*1;return this.uint16[be+0]=pe,ne},R}(Vi);Tc.prototype.bytesPerElement=2,Be("StructArrayLayout1ui2",Tc);var Hf=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(ne,pe){var be=this.length;return this.resize(be+1),this.emplace(be,ne,pe)},R.prototype.emplace=function(ne,pe,be){var Se=ne*2;return this.float32[Se+0]=pe,this.float32[Se+1]=be,ne},R}(Vi);Hf.prototype.bytesPerElement=8,Be("StructArrayLayout2f8",Hf);var Cv=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},R.prototype.emplaceBack=function(ne,pe,be,Se){var ze=this.length;return this.resize(ze+1),this.emplace(ze,ne,pe,be,Se)},R.prototype.emplace=function(ne,pe,be,Se,ze){var tt=ne*4;return this.float32[tt+0]=pe,this.float32[tt+1]=be,this.float32[tt+2]=Se,this.float32[tt+3]=ze,ne},R}(Vi);Cv.prototype.bytesPerElement=16,Be("StructArrayLayout4f16",Cv);var Xp=function(L){function R(){L.apply(this,arguments)}L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R;var H={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return H.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},H.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},H.x1.get=function(){return this._structArray.int16[this._pos2+2]},H.y1.get=function(){return this._structArray.int16[this._pos2+3]},H.x2.get=function(){return this._structArray.int16[this._pos2+4]},H.y2.get=function(){return this._structArray.int16[this._pos2+5]},H.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},H.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},H.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},H.anchorPoint.get=function(){return new f(this.anchorPointX,this.anchorPointY)},Object.defineProperties(R.prototype,H),R}($i);Xp.prototype.size=20;var Gf=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.get=function(ne){return new Xp(this,ne)},R}(Yc);Be("CollisionBoxArray",Gf);var Ev=function(L){function R(){L.apply(this,arguments)}L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R;var H={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return H.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},H.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},H.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},H.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},H.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},H.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},H.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},H.segment.get=function(){return this._structArray.uint16[this._pos2+10]},H.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},H.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},H.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},H.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},H.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},H.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},H.placedOrientation.set=function(ne){this._structArray.uint8[this._pos1+37]=ne},H.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},H.hidden.set=function(ne){this._structArray.uint8[this._pos1+38]=ne},H.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},H.crossTileID.set=function(ne){this._structArray.uint32[this._pos4+10]=ne},H.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(R.prototype,H),R}($i);Ev.prototype.size=48;var Ac=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.get=function(ne){return new Ev(this,ne)},R}(jc);Be("PlacedSymbolArray",Ac);var Zp=function(L){function R(){L.apply(this,arguments)}L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R;var H={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return H.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},H.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},H.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},H.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},H.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},H.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},H.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},H.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},H.key.get=function(){return this._structArray.uint16[this._pos2+8]},H.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},H.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},H.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},H.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},H.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},H.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},H.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},H.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},H.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},H.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},H.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},H.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},H.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},H.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},H.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},H.crossTileID.set=function(ne){this._structArray.uint32[this._pos4+12]=ne},H.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},H.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},H.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},H.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(R.prototype,H),R}($i);Zp.prototype.size=68;var Kp=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.get=function(ne){return new Zp(this,ne)},R}(_h);Be("SymbolInstanceArray",Kp);var Cu=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.getoffsetX=function(ne){return this.float32[ne*1+0]},R}(wc);Be("GlyphOffsetArray",Cu);var Jp=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.getx=function(ne){return this.int16[ne*3+0]},R.prototype.gety=function(ne){return this.int16[ne*3+1]},R.prototype.gettileUnitDistanceFromAnchor=function(ne){return this.int16[ne*3+2]},R}(kv);Be("SymbolLineVertexArray",Jp);var $p=function(L){function R(){L.apply(this,arguments)}L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R;var H={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return H.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},H.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},H.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(R.prototype,H),R}($i);$p.prototype.size=8;var Lv=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.get=function(ne){return new $p(this,ne)},R}(Vf);Be("FeatureIndexArray",Lv);var Qp=Xo([{name:"a_pos",components:2,type:"Int16"}],4),ve=Qp.members,X=function(R){R===void 0&&(R=[]),this.segments=R};X.prototype.prepareSegment=function(R,H,ne,pe){var be=this.segments[this.segments.length-1];return R>X.MAX_VERTEX_ARRAY_LENGTH&&V("Max vertices per segment is "+X.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+R),(!be||be.vertexLength+R>X.MAX_VERTEX_ARRAY_LENGTH||be.sortKey!==pe)&&(be={vertexOffset:H.length,primitiveOffset:ne.length,vertexLength:0,primitiveLength:0},pe!==void 0&&(be.sortKey=pe),this.segments.push(be)),be},X.prototype.get=function(){return this.segments},X.prototype.destroy=function(){for(var R=0,H=this.segments;R<H.length;R+=1){var ne=H[R];for(var pe in ne.vaos)ne.vaos[pe].destroy()}},X.simpleSegment=function(R,H,ne,pe){return new X([{vertexOffset:R,primitiveOffset:H,vertexLength:ne,primitiveLength:pe,vaos:{},sortKey:0}])},X.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Be("SegmentVector",X);function de(L,R){return L=m(Math.floor(L),0,255),R=m(Math.floor(R),0,255),256*L+R}var q=Xo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),ge=n(function(L){function R(H,ne){var pe,be,Se,ze,tt,ct,mt,It;for(pe=H.length&3,be=H.length-pe,Se=ne,tt=3432918353,ct=461845907,It=0;It<be;)mt=H.charCodeAt(It)&255|(H.charCodeAt(++It)&255)<<8|(H.charCodeAt(++It)&255)<<16|(H.charCodeAt(++It)&255)<<24,++It,mt=(mt&65535)*tt+(((mt>>>16)*tt&65535)<<16)&4294967295,mt=mt<<15|mt>>>17,mt=(mt&65535)*ct+(((mt>>>16)*ct&65535)<<16)&4294967295,Se^=mt,Se=Se<<13|Se>>>19,ze=(Se&65535)*5+(((Se>>>16)*5&65535)<<16)&4294967295,Se=(ze&65535)+27492+(((ze>>>16)+58964&65535)<<16);switch(mt=0,pe){case 3:mt^=(H.charCodeAt(It+2)&255)<<16;case 2:mt^=(H.charCodeAt(It+1)&255)<<8;case 1:mt^=H.charCodeAt(It)&255,mt=(mt&65535)*tt+(((mt>>>16)*tt&65535)<<16)&4294967295,mt=mt<<15|mt>>>17,mt=(mt&65535)*ct+(((mt>>>16)*ct&65535)<<16)&4294967295,Se^=mt}return Se^=H.length,Se^=Se>>>16,Se=(Se&65535)*2246822507+(((Se>>>16)*2246822507&65535)<<16)&4294967295,Se^=Se>>>13,Se=(Se&65535)*3266489909+(((Se>>>16)*3266489909&65535)<<16)&4294967295,Se^=Se>>>16,Se>>>0}L.exports=R}),Ce=n(function(L){function R(H,ne){for(var pe=H.length,be=ne^pe,Se=0,ze;pe>=4;)ze=H.charCodeAt(Se)&255|(H.charCodeAt(++Se)&255)<<8|(H.charCodeAt(++Se)&255)<<16|(H.charCodeAt(++Se)&255)<<24,ze=(ze&65535)*1540483477+(((ze>>>16)*1540483477&65535)<<16),ze^=ze>>>24,ze=(ze&65535)*1540483477+(((ze>>>16)*1540483477&65535)<<16),be=(be&65535)*1540483477+(((be>>>16)*1540483477&65535)<<16)^ze,pe-=4,++Se;switch(pe){case 3:be^=(H.charCodeAt(Se+2)&255)<<16;case 2:be^=(H.charCodeAt(Se+1)&255)<<8;case 1:be^=H.charCodeAt(Se)&255,be=(be&65535)*1540483477+(((be>>>16)*1540483477&65535)<<16)}return be^=be>>>13,be=(be&65535)*1540483477+(((be>>>16)*1540483477&65535)<<16),be^=be>>>15,be>>>0}L.exports=R}),Pe=ge,Ze=ge,ft=Ce;Pe.murmur3=Ze,Pe.murmur2=ft;var St=function(){this.ids=[],this.positions=[],this.indexed=!1};St.prototype.add=function(R,H,ne,pe){this.ids.push(tr(R)),this.positions.push(H,ne,pe)},St.prototype.getPositions=function(R){for(var H=tr(R),ne=0,pe=this.ids.length-1;ne<pe;){var be=ne+pe>>1;this.ids[be]>=H?pe=be:ne=be+1}for(var Se=[];this.ids[ne]===H;){var ze=this.positions[3*ne],tt=this.positions[3*ne+1],ct=this.positions[3*ne+2];Se.push({index:ze,start:tt,end:ct}),ne++}return Se},St.serialize=function(R,H){var ne=new Float64Array(R.ids),pe=new Uint32Array(R.positions);return ur(ne,pe,0,ne.length-1),H&&H.push(ne.buffer,pe.buffer),{ids:ne,positions:pe}},St.deserialize=function(R){var H=new St;return H.ids=R.ids,H.positions=R.positions,H.indexed=!0,H};var Ht=Math.pow(2,53)-1;function tr(L){var R=+L;return!isNaN(R)&&R<=Ht?R:Pe(String(L))}function ur(L,R,H,ne){for(;H<ne;){for(var pe=L[H+ne>>1],be=H-1,Se=ne+1;;){do be++;while(L[be]<pe);do Se--;while(L[Se]>pe);if(be>=Se)break;Er(L,be,Se),Er(R,3*be,3*Se),Er(R,3*be+1,3*Se+1),Er(R,3*be+2,3*Se+2)}Se-H<ne-Se?(ur(L,R,H,Se),H=Se+1):(ur(L,R,Se+1,ne),ne=Se)}}function Er(L,R,H){var ne=L[R];L[R]=L[H],L[H]=ne}Be("FeaturePositionMap",St);var Wr=function(R,H){this.gl=R.gl,this.location=H},jr=function(L){function R(H,ne){L.call(this,H,ne),this.current=0}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.set=function(ne){this.current!==ne&&(this.current=ne,this.gl.uniform1i(this.location,ne))},R}(Wr),Gr=function(L){function R(H,ne){L.call(this,H,ne),this.current=0}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.set=function(ne){this.current!==ne&&(this.current=ne,this.gl.uniform1f(this.location,ne))},R}(Wr),qr=function(L){function R(H,ne){L.call(this,H,ne),this.current=[0,0]}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.set=function(ne){(ne[0]!==this.current[0]||ne[1]!==this.current[1])&&(this.current=ne,this.gl.uniform2f(this.location,ne[0],ne[1]))},R}(Wr),dn=function(L){function R(H,ne){L.call(this,H,ne),this.current=[0,0,0]}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.set=function(ne){(ne[0]!==this.current[0]||ne[1]!==this.current[1]||ne[2]!==this.current[2])&&(this.current=ne,this.gl.uniform3f(this.location,ne[0],ne[1],ne[2]))},R}(Wr),Cn=function(L){function R(H,ne){L.call(this,H,ne),this.current=[0,0,0,0]}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.set=function(ne){(ne[0]!==this.current[0]||ne[1]!==this.current[1]||ne[2]!==this.current[2]||ne[3]!==this.current[3])&&(this.current=ne,this.gl.uniform4f(this.location,ne[0],ne[1],ne[2],ne[3]))},R}(Wr),Vn=function(L){function R(H,ne){L.call(this,H,ne),this.current=di.transparent}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.set=function(ne){(ne.r!==this.current.r||ne.g!==this.current.g||ne.b!==this.current.b||ne.a!==this.current.a)&&(this.current=ne,this.gl.uniform4f(this.location,ne.r,ne.g,ne.b,ne.a))},R}(Wr),Qn=new Float32Array(16),na=function(L){function R(H,ne){L.call(this,H,ne),this.current=Qn}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.set=function(ne){if(ne[12]!==this.current[12]||ne[0]!==this.current[0]){this.current=ne,this.gl.uniformMatrix4fv(this.location,!1,ne);return}for(var pe=1;pe<16;pe++)if(ne[pe]!==this.current[pe]){this.current=ne,this.gl.uniformMatrix4fv(this.location,!1,ne);break}},R}(Wr);function ta(L){return[de(255*L.r,255*L.g),de(255*L.b,255*L.a)]}var ma=function(R,H,ne){this.value=R,this.uniformNames=H.map(function(pe){return"u_"+pe}),this.type=ne};ma.prototype.setUniform=function(R,H,ne){R.set(ne.constantOr(this.value))},ma.prototype.getBinding=function(R,H,ne){return this.type==="color"?new Vn(R,H):new Gr(R,H)};var Sa=function(R,H){this.uniformNames=H.map(function(ne){return"u_"+ne}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Sa.prototype.setConstantPatternPositions=function(R,H){this.pixelRatioFrom=H.pixelRatio,this.pixelRatioTo=R.pixelRatio,this.patternFrom=H.tlbr,this.patternTo=R.tlbr},Sa.prototype.setUniform=function(R,H,ne,pe){var be=pe==="u_pattern_to"?this.patternTo:pe==="u_pattern_from"?this.patternFrom:pe==="u_pixel_ratio_to"?this.pixelRatioTo:pe==="u_pixel_ratio_from"?this.pixelRatioFrom:null;be&&R.set(be)},Sa.prototype.getBinding=function(R,H,ne){return ne.substr(0,9)==="u_pattern"?new Cn(R,H):new Gr(R,H)};var Ta=function(R,H,ne,pe){this.expression=R,this.type=ne,this.maxValue=0,this.paintVertexAttributes=H.map(function(be){return{name:"a_"+be,type:"Float32",components:ne==="color"?2:1,offset:0}}),this.paintVertexArray=new pe};Ta.prototype.populatePaintArray=function(R,H,ne,pe,be){var Se=this.paintVertexArray.length,ze=this.expression.evaluate(new ui(0),H,{},pe,[],be);this.paintVertexArray.resize(R),this._setPaintValue(Se,R,ze)},Ta.prototype.updatePaintArray=function(R,H,ne,pe){var be=this.expression.evaluate({zoom:0},ne,pe);this._setPaintValue(R,H,be)},Ta.prototype._setPaintValue=function(R,H,ne){if(this.type==="color")for(var pe=ta(ne),be=R;be<H;be++)this.paintVertexArray.emplace(be,pe[0],pe[1]);else{for(var Se=R;Se<H;Se++)this.paintVertexArray.emplace(Se,ne);this.maxValue=Math.max(this.maxValue,Math.abs(ne))}},Ta.prototype.upload=function(R){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=R.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ta.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ea=function(R,H,ne,pe,be,Se){this.expression=R,this.uniformNames=H.map(function(ze){return"u_"+ze+"_t"}),this.type=ne,this.useIntegerZoom=pe,this.zoom=be,this.maxValue=0,this.paintVertexAttributes=H.map(function(ze){return{name:"a_"+ze,type:"Float32",components:ne==="color"?4:2,offset:0}}),this.paintVertexArray=new Se};Ea.prototype.populatePaintArray=function(R,H,ne,pe,be){var Se=this.expression.evaluate(new ui(this.zoom),H,{},pe,[],be),ze=this.expression.evaluate(new ui(this.zoom+1),H,{},pe,[],be),tt=this.paintVertexArray.length;this.paintVertexArray.resize(R),this._setPaintValue(tt,R,Se,ze)},Ea.prototype.updatePaintArray=function(R,H,ne,pe){var be=this.expression.evaluate({zoom:this.zoom},ne,pe),Se=this.expression.evaluate({zoom:this.zoom+1},ne,pe);this._setPaintValue(R,H,be,Se)},Ea.prototype._setPaintValue=function(R,H,ne,pe){if(this.type==="color")for(var be=ta(ne),Se=ta(pe),ze=R;ze<H;ze++)this.paintVertexArray.emplace(ze,be[0],be[1],Se[0],Se[1]);else{for(var tt=R;tt<H;tt++)this.paintVertexArray.emplace(tt,ne,pe);this.maxValue=Math.max(this.maxValue,Math.abs(ne),Math.abs(pe))}},Ea.prototype.upload=function(R){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=R.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ea.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ea.prototype.setUniform=function(R,H){var ne=this.useIntegerZoom?Math.floor(H.zoom):H.zoom,pe=m(this.expression.interpolationFactor(ne,this.zoom,this.zoom+1),0,1);R.set(pe)},Ea.prototype.getBinding=function(R,H,ne){return new Gr(R,H)};var Ia=function(R,H,ne,pe,be,Se){this.expression=R,this.type=H,this.useIntegerZoom=ne,this.zoom=pe,this.layerId=Se,this.zoomInPaintVertexArray=new be,this.zoomOutPaintVertexArray=new be};Ia.prototype.populatePaintArray=function(R,H,ne){var pe=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(R),this.zoomOutPaintVertexArray.resize(R),this._setPaintValues(pe,R,H.patterns&&H.patterns[this.layerId],ne)},Ia.prototype.updatePaintArray=function(R,H,ne,pe,be){this._setPaintValues(R,H,ne.patterns&&ne.patterns[this.layerId],be)},Ia.prototype._setPaintValues=function(R,H,ne,pe){if(!(!pe||!ne)){var be=ne.min,Se=ne.mid,ze=ne.max,tt=pe[be],ct=pe[Se],mt=pe[ze];if(!(!tt||!ct||!mt))for(var It=R;It<H;It++)this.zoomInPaintVertexArray.emplace(It,ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],tt.tl[0],tt.tl[1],tt.br[0],tt.br[1],ct.pixelRatio,tt.pixelRatio),this.zoomOutPaintVertexArray.emplace(It,ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],mt.tl[0],mt.tl[1],mt.br[0],mt.br[1],ct.pixelRatio,mt.pixelRatio)}},Ia.prototype.upload=function(R){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=R.createVertexBuffer(this.zoomInPaintVertexArray,q.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=R.createVertexBuffer(this.zoomOutPaintVertexArray,q.members,this.expression.isStateDependent))},Ia.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ya=function(R,H,ne,pe){this.binders={},this.layoutAttributes=pe,this._buffers=[];var be=[];for(var Se in R.paint._values)if(!!ne(Se)){var ze=R.paint.get(Se);if(!(!(ze instanceof Xi)||!li(ze.property.specification))){var tt=Ri(Se,R.type),ct=ze.value,mt=ze.property.specification.type,It=ze.property.useIntegerZoom,Kt=ze.property.specification["property-type"],Wt=Kt==="cross-faded"||Kt==="cross-faded-data-driven";if(ct.kind==="constant")this.binders[Se]=Wt?new Sa(ct.value,tt):new ma(ct.value,tt,mt),be.push("/u_"+Se);else if(ct.kind==="source"||Wt){var cr=gi(Se,mt,"source");this.binders[Se]=Wt?new Ia(ct,mt,It,H,cr,R.id):new Ta(ct,tt,mt,cr),be.push("/a_"+Se)}else{var Br=gi(Se,mt,"composite");this.binders[Se]=new Ea(ct,tt,mt,It,H,Br),be.push("/z_"+Se)}}}this.cacheKey=be.sort().join("")};Ya.prototype.getMaxValue=function(R){var H=this.binders[R];return H instanceof Ta||H instanceof Ea?H.maxValue:0},Ya.prototype.populatePaintArrays=function(R,H,ne,pe,be){for(var Se in this.binders){var ze=this.binders[Se];(ze instanceof Ta||ze instanceof Ea||ze instanceof Ia)&&ze.populatePaintArray(R,H,ne,pe,be)}},Ya.prototype.setConstantPatternPositions=function(R,H){for(var ne in this.binders){var pe=this.binders[ne];pe instanceof Sa&&pe.setConstantPatternPositions(R,H)}},Ya.prototype.updatePaintArrays=function(R,H,ne,pe,be){var Se=!1;for(var ze in R)for(var tt=H.getPositions(ze),ct=0,mt=tt;ct<mt.length;ct+=1){var It=mt[ct],Kt=ne.feature(It.index);for(var Wt in this.binders){var cr=this.binders[Wt];if((cr instanceof Ta||cr instanceof Ea||cr instanceof Ia)&&cr.expression.isStateDependent===!0){var Br=pe.paint.get(Wt);cr.expression=Br.value,cr.updatePaintArray(It.start,It.end,Kt,R[ze],be),Se=!0}}}return Se},Ya.prototype.defines=function(){var R=[];for(var H in this.binders){var ne=this.binders[H];(ne instanceof ma||ne instanceof Sa)&&R.push.apply(R,ne.uniformNames.map(function(pe){return"#define HAS_UNIFORM_"+pe}))}return R},Ya.prototype.getPaintVertexBuffers=function(){return this._buffers},Ya.prototype.getUniforms=function(R,H){var ne=[];for(var pe in this.binders){var be=this.binders[pe];if(be instanceof ma||be instanceof Sa||be instanceof Ea)for(var Se=0,ze=be.uniformNames;Se<ze.length;Se+=1){var tt=ze[Se];if(H[tt]){var ct=be.getBinding(R,H[tt],tt);ne.push({name:tt,property:pe,binding:ct})}}}return ne},Ya.prototype.setUniforms=function(R,H,ne,pe){for(var be=0,Se=H;be<Se.length;be+=1){var ze=Se[be],tt=ze.name,ct=ze.property,mt=ze.binding;this.binders[ct].setUniform(mt,pe,ne.get(ct),tt)}},Ya.prototype.updatePaintBuffers=function(R){this._buffers=[];for(var H in this.binders){var ne=this.binders[H];if(R&&ne instanceof Ia){var pe=R.fromScale===2?ne.zoomInPaintVertexBuffer:ne.zoomOutPaintVertexBuffer;pe&&this._buffers.push(pe)}else(ne instanceof Ta||ne instanceof Ea)&&ne.paintVertexBuffer&&this._buffers.push(ne.paintVertexBuffer)}},Ya.prototype.upload=function(R){for(var H in this.binders){var ne=this.binders[H];(ne instanceof Ta||ne instanceof Ea||ne instanceof Ia)&&ne.upload(R)}this.updatePaintBuffers()},Ya.prototype.destroy=function(){for(var R in this.binders){var H=this.binders[R];(H instanceof Ta||H instanceof Ea||H instanceof Ia)&&H.destroy()}};var ii=function(R,H,ne,pe){pe===void 0&&(pe=function(){return!0}),this.programConfigurations={};for(var be=0,Se=H;be<Se.length;be+=1){var ze=Se[be];this.programConfigurations[ze.id]=new Ya(ze,ne,pe,R)}this.needsUpload=!1,this._featureMap=new St,this._bufferOffset=0};ii.prototype.populatePaintArrays=function(R,H,ne,pe,be,Se){for(var ze in this.programConfigurations)this.programConfigurations[ze].populatePaintArrays(R,H,pe,be,Se);H.id!==void 0&&this._featureMap.add(H.id,ne,this._bufferOffset,R),this._bufferOffset=R,this.needsUpload=!0},ii.prototype.updatePaintArrays=function(R,H,ne,pe){for(var be=0,Se=ne;be<Se.length;be+=1){var ze=Se[be];this.needsUpload=this.programConfigurations[ze.id].updatePaintArrays(R,this._featureMap,H,ze,pe)||this.needsUpload}},ii.prototype.get=function(R){return this.programConfigurations[R]},ii.prototype.upload=function(R){if(!!this.needsUpload){for(var H in this.programConfigurations)this.programConfigurations[H].upload(R);this.needsUpload=!1}},ii.prototype.destroy=function(){for(var R in this.programConfigurations)this.programConfigurations[R].destroy()};function Ri(L,R){var H={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return H[L]||[L.replace(R+"-","").replace(/-/g,"_")]}function ci(L){var R={"line-pattern":{source:vl,composite:vl},"fill-pattern":{source:vl,composite:vl},"fill-extrusion-pattern":{source:vl,composite:vl}};return R[L]}function gi(L,R,H){var ne={color:{source:Hf,composite:Cv},number:{source:wc,composite:Hf}},pe=ci(L);return pe&&pe[H]||ne[R][H]}Be("ConstantBinder",ma),Be("CrossFadedConstantBinder",Sa),Be("SourceExpressionBinder",Ta),Be("CrossFadedCompositeBinder",Ia),Be("CompositeExpressionBinder",Ea),Be("ProgramConfiguration",Ya,{omit:["_buffers"]}),Be("ProgramConfigurationSet",ii);var Ga=8192;function Di(L){return{min:-1*Math.pow(2,L-1),max:Math.pow(2,L-1)-1}}var Ni=Di(15);function Gi(L){for(var R=Ga/L.extent,H=L.loadGeometry(),ne=0;ne<H.length;ne++)for(var pe=H[ne],be=0;be<pe.length;be++){var Se=pe[be];Se.x=Math.round(Se.x*R),Se.y=Math.round(Se.y*R),(Se.x<Ni.min||Se.x>Ni.max||Se.y<Ni.min||Se.y>Ni.max)&&(V("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Se.x=m(Se.x,Ni.min,Ni.max),Se.y=m(Se.y,Ni.min,Ni.max))}return H}function Ti(L,R,H,ne,pe){L.emplaceBack(R*2+(ne+1)/2,H*2+(pe+1)/2)}var Qi=function(R){this.zoom=R.zoom,this.overscaling=R.overscaling,this.layers=R.layers,this.layerIds=this.layers.map(function(H){return H.id}),this.index=R.index,this.hasPattern=!1,this.layoutVertexArray=new Wc,this.indexArray=new gf,this.segments=new X,this.programConfigurations=new ii(ve,R.layers,R.zoom),this.stateDependentLayerIds=this.layers.filter(function(H){return H.isStateDependent()}).map(function(H){return H.id})};Qi.prototype.populate=function(R,H,ne){var pe=this.layers[0],be=[],Se=null;pe.type==="circle"&&(Se=pe.layout.get("circle-sort-key"));for(var ze=0,tt=R;ze<tt.length;ze+=1){var ct=tt[ze],mt=ct.feature,It=ct.id,Kt=ct.index,Wt=ct.sourceLayerIndex,cr=this.layers[0]._featureFilter.needGeometry,Br={type:mt.type,id:It,properties:mt.properties,geometry:cr?Gi(mt):[]};if(!!this.layers[0]._featureFilter.filter(new ui(this.zoom),Br,ne)){cr||(Br.geometry=Gi(mt));var hn=Se?Se.evaluate(Br,{},ne):void 0,rn={id:It,properties:mt.properties,type:mt.type,sourceLayerIndex:Wt,index:Kt,geometry:Br.geometry,patterns:{},sortKey:hn};be.push(rn)}}Se&&be.sort(function(ka,La){return ka.sortKey-La.sortKey});for(var kn=0,_n=be;kn<_n.length;kn+=1){var Sn=_n[kn],zn=Sn,Kn=zn.geometry,fa=zn.index,sa=zn.sourceLayerIndex,Ba=R[fa].feature;this.addFeature(Sn,Kn,fa,ne),H.featureIndex.insert(Ba,Kn,fa,sa,this.index)}},Qi.prototype.update=function(R,H,ne){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(R,H,this.stateDependentLayers,ne)},Qi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Qi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Qi.prototype.upload=function(R){this.uploaded||(this.layoutVertexBuffer=R.createVertexBuffer(this.layoutVertexArray,ve),this.indexBuffer=R.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(R),this.uploaded=!0},Qi.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Qi.prototype.addFeature=function(R,H,ne,pe){for(var be=0,Se=H;be<Se.length;be+=1)for(var ze=Se[be],tt=0,ct=ze;tt<ct.length;tt+=1){var mt=ct[tt],It=mt.x,Kt=mt.y;if(!(It<0||It>=Ga||Kt<0||Kt>=Ga)){var Wt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,R.sortKey),cr=Wt.vertexLength;Ti(this.layoutVertexArray,It,Kt,-1,-1),Ti(this.layoutVertexArray,It,Kt,1,-1),Ti(this.layoutVertexArray,It,Kt,1,1),Ti(this.layoutVertexArray,It,Kt,-1,1),this.indexArray.emplaceBack(cr,cr+1,cr+2),this.indexArray.emplaceBack(cr,cr+3,cr+2),Wt.vertexLength+=4,Wt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,R,ne,{},pe)},Be("CircleBucket",Qi,{omit:["layers"]});function si(L,R){for(var H=0;H<L.length;H++)if(pl(R,L[H]))return!0;for(var ne=0;ne<R.length;ne++)if(pl(L,R[ne]))return!0;return!!fu(L,R)}function Ai(L,R,H){return!!(pl(L,R)||ju(R,L,H))}function Fo(L,R){if(L.length===1)return Xu(R,L[0]);for(var H=0;H<R.length;H++)for(var ne=R[H],pe=0;pe<ne.length;pe++)if(pl(L,ne[pe]))return!0;for(var be=0;be<L.length;be++)if(Xu(R,L[be]))return!0;for(var Se=0;Se<R.length;Se++)if(fu(L,R[Se]))return!0;return!1}function qo(L,R,H){for(var ne=0;ne<R.length;ne++){var pe=R[ne];if(L.length>=3){for(var be=0;be<pe.length;be++)if(pl(L,pe[be]))return!0}if(uu(L,pe,H))return!0}return!1}function uu(L,R,H){if(L.length>1){if(fu(L,R))return!0;for(var ne=0;ne<R.length;ne++)if(ju(R[ne],L,H))return!0}for(var pe=0;pe<L.length;pe++)if(ju(L[pe],R,H))return!0;return!1}function fu(L,R){if(L.length===0||R.length===0)return!1;for(var H=0;H<L.length-1;H++)for(var ne=L[H],pe=L[H+1],be=0;be<R.length-1;be++){var Se=R[be],ze=R[be+1];if(Yu(ne,pe,Se,ze))return!0}return!1}function Yu(L,R,H,ne){return U(L,H,ne)!==U(R,H,ne)&&U(L,R,H)!==U(L,R,ne)}function ju(L,R,H){var ne=H*H;if(R.length===1)return L.distSqr(R[0])<ne;for(var pe=1;pe<R.length;pe++){var be=R[pe-1],Se=R[pe];if(mf(L,be,Se)<ne)return!0}return!1}function mf(L,R,H){var ne=R.distSqr(H);if(ne===0)return L.distSqr(R);var pe=((L.x-R.x)*(H.x-R.x)+(L.y-R.y)*(H.y-R.y))/ne;return pe<0?L.distSqr(R):pe>1?L.distSqr(H):L.distSqr(H.sub(R)._mult(pe)._add(R))}function Xu(L,R){for(var H=!1,ne,pe,be,Se=0;Se<L.length;Se++){ne=L[Se];for(var ze=0,tt=ne.length-1;ze<ne.length;tt=ze++)pe=ne[ze],be=ne[tt],pe.y>R.y!=be.y>R.y&&R.x<(be.x-pe.x)*(R.y-pe.y)/(be.y-pe.y)+pe.x&&(H=!H)}return H}function pl(L,R){for(var H=!1,ne=0,pe=L.length-1;ne<L.length;pe=ne++){var be=L[ne],Se=L[pe];be.y>R.y!=Se.y>R.y&&R.x<(Se.x-be.x)*(R.y-be.y)/(Se.y-be.y)+be.x&&(H=!H)}return H}function Wf(L,R,H,ne,pe){for(var be=0,Se=L;be<Se.length;be+=1){var ze=Se[be];if(R<=ze.x&&H<=ze.y&&ne>=ze.x&&pe>=ze.y)return!0}var tt=[new f(R,H),new f(R,pe),new f(ne,pe),new f(ne,H)];if(L.length>2)for(var ct=0,mt=tt;ct<mt.length;ct+=1){var It=mt[ct];if(pl(L,It))return!0}for(var Kt=0;Kt<L.length-1;Kt++){var Wt=L[Kt],cr=L[Kt+1];if(Ns(Wt,cr,tt))return!0}return!1}function Ns(L,R,H){var ne=H[0],pe=H[2];if(L.x<ne.x&&R.x<ne.x||L.x>pe.x&&R.x>pe.x||L.y<ne.y&&R.y<ne.y||L.y>pe.y&&R.y>pe.y)return!1;var be=U(L,R,H[0]);return be!==U(L,R,H[1])||be!==U(L,R,H[2])||be!==U(L,R,H[3])}function jl(L,R,H){var ne=R.paint.get(L).value;return ne.kind==="constant"?ne.value:H.programConfigurations.get(R.id).getMaxValue(L)}function Zu(L){return Math.sqrt(L[0]*L[0]+L[1]*L[1])}function Eu(L,R,H,ne,pe){if(!R[0]&&!R[1])return L;var be=f.convert(R)._mult(pe);H==="viewport"&&be._rotate(-ne);for(var Se=[],ze=0;ze<L.length;ze++){var tt=L[ze];Se.push(tt.sub(be))}return Se}var Ku=new Ji({"circle-sort-key":new Ja(ar.layout_circle["circle-sort-key"])}),wh=new Ji({"circle-radius":new Ja(ar.paint_circle["circle-radius"]),"circle-color":new Ja(ar.paint_circle["circle-color"]),"circle-blur":new Ja(ar.paint_circle["circle-blur"]),"circle-opacity":new Ja(ar.paint_circle["circle-opacity"]),"circle-translate":new Na(ar.paint_circle["circle-translate"]),"circle-translate-anchor":new Na(ar.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Na(ar.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Na(ar.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ja(ar.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ja(ar.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ja(ar.paint_circle["circle-stroke-opacity"])}),lc={paint:wh,layout:Ku},Es=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var L=arguments,R=0,H=arguments.length;H--;)R+=L[H]*L[H];return Math.sqrt(R)});function Zc(){var L=new Es(4);return Es!=Float32Array&&(L[1]=0,L[2]=0),L[0]=1,L[3]=1,L}function $s(L,R,H){var ne=R[0],pe=R[1],be=R[2],Se=R[3],ze=Math.sin(H),tt=Math.cos(H);return L[0]=ne*tt+be*ze,L[1]=pe*tt+Se*ze,L[2]=ne*-ze+be*tt,L[3]=pe*-ze+Se*tt,L}function Kc(){var L=new Es(9);return Es!=Float32Array&&(L[1]=0,L[2]=0,L[3]=0,L[5]=0,L[6]=0,L[7]=0),L[0]=1,L[4]=1,L[8]=1,L}function Th(L,R){var H=Math.sin(R),ne=Math.cos(R);return L[0]=ne,L[1]=H,L[2]=0,L[3]=-H,L[4]=ne,L[5]=0,L[6]=0,L[7]=0,L[8]=1,L}function Ah(){var L=new Es(16);return Es!=Float32Array&&(L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[11]=0,L[12]=0,L[13]=0,L[14]=0),L[0]=1,L[5]=1,L[10]=1,L[15]=1,L}function qp(L){var R=new Es(16);return R[0]=L[0],R[1]=L[1],R[2]=L[2],R[3]=L[3],R[4]=L[4],R[5]=L[5],R[6]=L[6],R[7]=L[7],R[8]=L[8],R[9]=L[9],R[10]=L[10],R[11]=L[11],R[12]=L[12],R[13]=L[13],R[14]=L[14],R[15]=L[15],R}function Sh(L){return L[0]=1,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=1,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=1,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}function Sc(L,R){var H=R[0],ne=R[1],pe=R[2],be=R[3],Se=R[4],ze=R[5],tt=R[6],ct=R[7],mt=R[8],It=R[9],Kt=R[10],Wt=R[11],cr=R[12],Br=R[13],hn=R[14],rn=R[15],kn=H*ze-ne*Se,_n=H*tt-pe*Se,Sn=H*ct-be*Se,zn=ne*tt-pe*ze,Kn=ne*ct-be*ze,fa=pe*ct-be*tt,sa=mt*Br-It*cr,Ba=mt*hn-Kt*cr,ka=mt*rn-Wt*cr,La=It*hn-Kt*Br,ni=It*rn-Wt*Br,Fa=Kt*rn-Wt*hn,Oa=kn*Fa-_n*ni+Sn*La+zn*ka-Kn*Ba+fa*sa;return Oa?(Oa=1/Oa,L[0]=(ze*Fa-tt*ni+ct*La)*Oa,L[1]=(pe*ni-ne*Fa-be*La)*Oa,L[2]=(Br*fa-hn*Kn+rn*zn)*Oa,L[3]=(Kt*Kn-It*fa-Wt*zn)*Oa,L[4]=(tt*ka-Se*Fa-ct*Ba)*Oa,L[5]=(H*Fa-pe*ka+be*Ba)*Oa,L[6]=(hn*Sn-cr*fa-rn*_n)*Oa,L[7]=(mt*fa-Kt*Sn+Wt*_n)*Oa,L[8]=(Se*ni-ze*ka+ct*sa)*Oa,L[9]=(ne*ka-H*ni-be*sa)*Oa,L[10]=(cr*Kn-Br*Sn+rn*kn)*Oa,L[11]=(It*Sn-mt*Kn-Wt*kn)*Oa,L[12]=(ze*Ba-Se*La-tt*sa)*Oa,L[13]=(H*La-ne*Ba+pe*sa)*Oa,L[14]=(Br*_n-cr*zn-hn*kn)*Oa,L[15]=(mt*zn-It*_n+Kt*kn)*Oa,L):null}function Mc(L,R,H){var ne=R[0],pe=R[1],be=R[2],Se=R[3],ze=R[4],tt=R[5],ct=R[6],mt=R[7],It=R[8],Kt=R[9],Wt=R[10],cr=R[11],Br=R[12],hn=R[13],rn=R[14],kn=R[15],_n=H[0],Sn=H[1],zn=H[2],Kn=H[3];return L[0]=_n*ne+Sn*ze+zn*It+Kn*Br,L[1]=_n*pe+Sn*tt+zn*Kt+Kn*hn,L[2]=_n*be+Sn*ct+zn*Wt+Kn*rn,L[3]=_n*Se+Sn*mt+zn*cr+Kn*kn,_n=H[4],Sn=H[5],zn=H[6],Kn=H[7],L[4]=_n*ne+Sn*ze+zn*It+Kn*Br,L[5]=_n*pe+Sn*tt+zn*Kt+Kn*hn,L[6]=_n*be+Sn*ct+zn*Wt+Kn*rn,L[7]=_n*Se+Sn*mt+zn*cr+Kn*kn,_n=H[8],Sn=H[9],zn=H[10],Kn=H[11],L[8]=_n*ne+Sn*ze+zn*It+Kn*Br,L[9]=_n*pe+Sn*tt+zn*Kt+Kn*hn,L[10]=_n*be+Sn*ct+zn*Wt+Kn*rn,L[11]=_n*Se+Sn*mt+zn*cr+Kn*kn,_n=H[12],Sn=H[13],zn=H[14],Kn=H[15],L[12]=_n*ne+Sn*ze+zn*It+Kn*Br,L[13]=_n*pe+Sn*tt+zn*Kt+Kn*hn,L[14]=_n*be+Sn*ct+zn*Wt+Kn*rn,L[15]=_n*Se+Sn*mt+zn*cr+Kn*kn,L}function Ho(L,R,H){var ne=H[0],pe=H[1],be=H[2],Se,ze,tt,ct,mt,It,Kt,Wt,cr,Br,hn,rn;return R===L?(L[12]=R[0]*ne+R[4]*pe+R[8]*be+R[12],L[13]=R[1]*ne+R[5]*pe+R[9]*be+R[13],L[14]=R[2]*ne+R[6]*pe+R[10]*be+R[14],L[15]=R[3]*ne+R[7]*pe+R[11]*be+R[15]):(Se=R[0],ze=R[1],tt=R[2],ct=R[3],mt=R[4],It=R[5],Kt=R[6],Wt=R[7],cr=R[8],Br=R[9],hn=R[10],rn=R[11],L[0]=Se,L[1]=ze,L[2]=tt,L[3]=ct,L[4]=mt,L[5]=It,L[6]=Kt,L[7]=Wt,L[8]=cr,L[9]=Br,L[10]=hn,L[11]=rn,L[12]=Se*ne+mt*pe+cr*be+R[12],L[13]=ze*ne+It*pe+Br*be+R[13],L[14]=tt*ne+Kt*pe+hn*be+R[14],L[15]=ct*ne+Wt*pe+rn*be+R[15]),L}function Rl(L,R,H){var ne=H[0],pe=H[1],be=H[2];return L[0]=R[0]*ne,L[1]=R[1]*ne,L[2]=R[2]*ne,L[3]=R[3]*ne,L[4]=R[4]*pe,L[5]=R[5]*pe,L[6]=R[6]*pe,L[7]=R[7]*pe,L[8]=R[8]*be,L[9]=R[9]*be,L[10]=R[10]*be,L[11]=R[11]*be,L[12]=R[12],L[13]=R[13],L[14]=R[14],L[15]=R[15],L}function Dl(L,R,H){var ne=Math.sin(H),pe=Math.cos(H),be=R[4],Se=R[5],ze=R[6],tt=R[7],ct=R[8],mt=R[9],It=R[10],Kt=R[11];return R!==L&&(L[0]=R[0],L[1]=R[1],L[2]=R[2],L[3]=R[3],L[12]=R[12],L[13]=R[13],L[14]=R[14],L[15]=R[15]),L[4]=be*pe+ct*ne,L[5]=Se*pe+mt*ne,L[6]=ze*pe+It*ne,L[7]=tt*pe+Kt*ne,L[8]=ct*pe-be*ne,L[9]=mt*pe-Se*ne,L[10]=It*pe-ze*ne,L[11]=Kt*pe-tt*ne,L}function Mh(L,R,H){var ne=Math.sin(H),pe=Math.cos(H),be=R[0],Se=R[1],ze=R[2],tt=R[3],ct=R[4],mt=R[5],It=R[6],Kt=R[7];return R!==L&&(L[8]=R[8],L[9]=R[9],L[10]=R[10],L[11]=R[11],L[12]=R[12],L[13]=R[13],L[14]=R[14],L[15]=R[15]),L[0]=be*pe+ct*ne,L[1]=Se*pe+mt*ne,L[2]=ze*pe+It*ne,L[3]=tt*pe+Kt*ne,L[4]=ct*pe-be*ne,L[5]=mt*pe-Se*ne,L[6]=It*pe-ze*ne,L[7]=Kt*pe-tt*ne,L}function Pv(L,R,H,ne,pe){var be=1/Math.tan(R/2),Se;return L[0]=be/H,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=be,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[11]=-1,L[12]=0,L[13]=0,L[15]=0,pe!=null&&pe!==1/0?(Se=1/(ne-pe),L[10]=(pe+ne)*Se,L[14]=2*pe*ne*Se):(L[10]=-1,L[14]=-2*ne),L}function fg(L,R,H,ne,pe,be,Se){var ze=1/(R-H),tt=1/(ne-pe),ct=1/(be-Se);return L[0]=-2*ze,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=-2*tt,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=2*ct,L[11]=0,L[12]=(R+H)*ze,L[13]=(pe+ne)*tt,L[14]=(Se+be)*ct,L[15]=1,L}var cg=Mc;function Jc(){var L=new Es(3);return Es!=Float32Array&&(L[0]=0,L[1]=0,L[2]=0),L}function hg(L){var R=new Es(3);return R[0]=L[0],R[1]=L[1],R[2]=L[2],R}function kh(L,R,H){return L[0]=R[0]+H[0],L[1]=R[1]+H[1],L[2]=R[2]+H[2],L}function vg(L,R,H){return L[0]=R[0]-H[0],L[1]=R[1]-H[1],L[2]=R[2]-H[2],L}function pg(L,R,H){return L[0]=R[0]*H,L[1]=R[1]*H,L[2]=R[2]*H,L}function Rv(L,R){var H=R[0],ne=R[1],pe=R[2],be=H*H+ne*ne+pe*pe;return be>0&&(be=1/Math.sqrt(be)),L[0]=R[0]*be,L[1]=R[1]*be,L[2]=R[2]*be,L}function P5(L,R){return L[0]*R[0]+L[1]*R[1]+L[2]*R[2]}function R5(L,R,H){var ne=R[0],pe=R[1],be=R[2],Se=H[0],ze=H[1],tt=H[2];return L[0]=pe*tt-be*ze,L[1]=be*Se-ne*tt,L[2]=ne*ze-pe*Se,L}function D5(L,R,H){var ne=R[0],pe=R[1],be=R[2];return L[0]=ne*H[0]+pe*H[3]+be*H[6],L[1]=ne*H[1]+pe*H[4]+be*H[7],L[2]=ne*H[2]+pe*H[5]+be*H[8],L}var I5=vg;(function(){var L=Jc();return function(R,H,ne,pe,be,Se){var ze,tt;for(H||(H=3),ne||(ne=0),pe?tt=Math.min(pe*H+ne,R.length):tt=R.length,ze=ne;ze<tt;ze+=H)L[0]=R[ze],L[1]=R[ze+1],L[2]=R[ze+2],be(L,L,Se),R[ze]=L[0],R[ze+1]=L[1],R[ze+2]=L[2];return R}})();function F5(){var L=new Es(4);return Es!=Float32Array&&(L[0]=0,L[1]=0,L[2]=0,L[3]=0),L}function z5(L,R,H){return L[0]=R[0]*H,L[1]=R[1]*H,L[2]=R[2]*H,L[3]=R[3]*H,L}function O5(L,R){return L[0]*R[0]+L[1]*R[1]+L[2]*R[2]+L[3]*R[3]}function ed(L,R,H){var ne=R[0],pe=R[1],be=R[2],Se=R[3];return L[0]=H[0]*ne+H[4]*pe+H[8]*be+H[12]*Se,L[1]=H[1]*ne+H[5]*pe+H[9]*be+H[13]*Se,L[2]=H[2]*ne+H[6]*pe+H[10]*be+H[14]*Se,L[3]=H[3]*ne+H[7]*pe+H[11]*be+H[15]*Se,L}(function(){var L=F5();return function(R,H,ne,pe,be,Se){var ze,tt;for(H||(H=4),ne||(ne=0),pe?tt=Math.min(pe*H+ne,R.length):tt=R.length,ze=ne;ze<tt;ze+=H)L[0]=R[ze],L[1]=R[ze+1],L[2]=R[ze+2],L[3]=R[ze+3],be(L,L,Se),R[ze]=L[0],R[ze+1]=L[1],R[ze+2]=L[2],R[ze+3]=L[3];return R}})();function B5(){var L=new Es(2);return Es!=Float32Array&&(L[0]=0,L[1]=0),L}function N5(L){var R=L[0],H=L[1];return R*R+H*H}var U5=N5;(function(){var L=B5();return function(R,H,ne,pe,be,Se){var ze,tt;for(H||(H=2),ne||(ne=0),pe?tt=Math.min(pe*H+ne,R.length):tt=R.length,ze=ne;ze<tt;ze+=H)L[0]=R[ze],L[1]=R[ze+1],be(L,L,Se),R[ze]=L[0],R[ze+1]=L[1];return R}})();var V5=function(L){function R(H){L.call(this,H,lc)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.createBucket=function(ne){return new Qi(ne)},R.prototype.queryRadius=function(ne){var pe=ne;return jl("circle-radius",this,pe)+jl("circle-stroke-width",this,pe)+Zu(this.paint.get("circle-translate"))},R.prototype.queryIntersectsFeature=function(ne,pe,be,Se,ze,tt,ct,mt){for(var It=Eu(ne,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),tt.angle,ct),Kt=this.paint.get("circle-radius").evaluate(pe,be),Wt=this.paint.get("circle-stroke-width").evaluate(pe,be),cr=Kt+Wt,Br=this.paint.get("circle-pitch-alignment")==="map",hn=Br?It:H5(It,mt),rn=Br?cr*ct:cr,kn=0,_n=Se;kn<_n.length;kn+=1)for(var Sn=_n[kn],zn=0,Kn=Sn;zn<Kn.length;zn+=1){var fa=Kn[zn],sa=Br?fa:z1(fa,mt),Ba=rn,ka=ed([],[fa.x,fa.y,0,1],mt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ba*=ka[3]/tt.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ba*=tt.cameraToCenterDistance/ka[3]),Ai(hn,sa,Ba))return!0}return!1},R}(Bs);function z1(L,R){var H=ed([],[L.x,L.y,0,1],R);return new f(H[0]/H[3],H[1]/H[3])}function H5(L,R){return L.map(function(H){return z1(H,R)})}var O1=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R}(Qi);Be("HeatmapBucket",O1,{omit:["layers"]});function dg(L,R,H,ne){var pe=R.width,be=R.height;if(!ne)ne=new Uint8Array(pe*be*H);else if(ne instanceof Uint8ClampedArray)ne=new Uint8Array(ne.buffer);else if(ne.length!==pe*be*H)throw new RangeError("mismatched image size");return L.width=pe,L.height=be,L.data=ne,L}function B1(L,R,H){var ne=R.width,pe=R.height;if(!(ne===L.width&&pe===L.height)){var be=dg({},{width:ne,height:pe},H);gg(L,be,{x:0,y:0},{x:0,y:0},{width:Math.min(L.width,ne),height:Math.min(L.height,pe)},H),L.width=ne,L.height=pe,L.data=be.data}}function gg(L,R,H,ne,pe,be){if(pe.width===0||pe.height===0)return R;if(pe.width>L.width||pe.height>L.height||H.x>L.width-pe.width||H.y>L.height-pe.height)throw new RangeError("out of range source coordinates for image copy");if(pe.width>R.width||pe.height>R.height||ne.x>R.width-pe.width||ne.y>R.height-pe.height)throw new RangeError("out of range destination coordinates for image copy");for(var Se=L.data,ze=R.data,tt=0;tt<pe.height;tt++)for(var ct=((H.y+tt)*L.width+H.x)*be,mt=((ne.y+tt)*R.width+ne.x)*be,It=0;It<pe.width*be;It++)ze[mt+It]=Se[ct+It];return R}var $c=function(R,H){dg(this,R,1,H)};$c.prototype.resize=function(R){B1(this,R,1)},$c.prototype.clone=function(){return new $c({width:this.width,height:this.height},new Uint8Array(this.data))},$c.copy=function(R,H,ne,pe,be){gg(R,H,ne,pe,be,1)};var Il=function(R,H){dg(this,R,4,H)};Il.prototype.resize=function(R){B1(this,R,4)},Il.prototype.replace=function(R,H){H?this.data.set(R):R instanceof Uint8ClampedArray?this.data=new Uint8Array(R.buffer):this.data=R},Il.prototype.clone=function(){return new Il({width:this.width,height:this.height},new Uint8Array(this.data))},Il.copy=function(R,H,ne,pe,be){gg(R,H,ne,pe,be,4)},Be("AlphaImage",$c),Be("RGBAImage",Il);var G5=new Ji({"heatmap-radius":new Ja(ar.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ja(ar.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Na(ar.paint_heatmap["heatmap-intensity"]),"heatmap-color":new jo(ar.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Na(ar.paint_heatmap["heatmap-opacity"])}),W5={paint:G5};function N1(L,R){for(var H=new Uint8Array(256*4),ne={},pe=0,be=0;pe<256;pe++,be+=4){ne[R]=pe/255;var Se=L.evaluate(ne);H[be+0]=Math.floor(Se.r*255/Se.a),H[be+1]=Math.floor(Se.g*255/Se.a),H[be+2]=Math.floor(Se.b*255/Se.a),H[be+3]=Math.floor(Se.a*255)}return new Il({width:256,height:1},H)}var Y5=function(L){function R(H){L.call(this,H,W5),this._updateColorRamp()}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.createBucket=function(ne){return new O1(ne)},R.prototype._handleSpecialPaintPropertyUpdate=function(ne){ne==="heatmap-color"&&this._updateColorRamp()},R.prototype._updateColorRamp=function(){var ne=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=N1(ne,"heatmapDensity"),this.colorRampTexture=null},R.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},R.prototype.queryRadius=function(){return 0},R.prototype.queryIntersectsFeature=function(){return!1},R.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},R}(Bs),j5=new Ji({"hillshade-illumination-direction":new Na(ar.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Na(ar.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Na(ar.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Na(ar.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Na(ar.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Na(ar.paint_hillshade["hillshade-accent-color"])}),X5={paint:j5},Z5=function(L){function R(H){L.call(this,H,X5)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},R}(Bs),K5=Xo([{name:"a_pos",components:2,type:"Int16"}],4),U1=K5.members,mg=td,J5=td;function td(L,R,H){H=H||2;var ne=R&&R.length,pe=ne?R[0]*H:L.length,be=V1(L,0,pe,H,!0),Se=[];if(!be||be.next===be.prev)return Se;var ze,tt,ct,mt,It,Kt,Wt;if(ne&&(be=tA(L,R,be,H)),L.length>80*H){ze=ct=L[0],tt=mt=L[1];for(var cr=H;cr<pe;cr+=H)It=L[cr],Kt=L[cr+1],It<ze&&(ze=It),Kt<tt&&(tt=Kt),It>ct&&(ct=It),Kt>mt&&(mt=Kt);Wt=Math.max(ct-ze,mt-tt),Wt=Wt!==0?1/Wt:0}return Dv(be,Se,H,ze,tt,Wt),Se}function V1(L,R,H,ne,pe){var be,Se;if(pe===bg(L,R,H,ne)>0)for(be=R;be<H;be+=ne)Se=W1(be,L[be],L[be+1],Se);else for(be=H-ne;be>=R;be-=ne)Se=W1(be,L[be],L[be+1],Se);return Se&&rd(Se,Se.next)&&(Fv(Se),Se=Se.next),Se}function kc(L,R){if(!L)return L;R||(R=L);var H=L,ne;do if(ne=!1,!H.steiner&&(rd(H,H.next)||es(H.prev,H,H.next)===0)){if(Fv(H),H=R=H.prev,H===H.next)break;ne=!0}else H=H.next;while(ne||H!==R);return R}function Dv(L,R,H,ne,pe,be,Se){if(!!L){!Se&&be&&oA(L,ne,pe,be);for(var ze=L,tt,ct;L.prev!==L.next;){if(tt=L.prev,ct=L.next,be?Q5(L,ne,pe,be):$5(L)){R.push(tt.i/H),R.push(L.i/H),R.push(ct.i/H),Fv(L),L=ct.next,ze=ct.next;continue}if(L=ct,L===ze){Se?Se===1?(L=q5(kc(L),R,H),Dv(L,R,H,ne,pe,be,2)):Se===2&&eA(L,R,H,ne,pe,be):Dv(kc(L),R,H,ne,pe,be,1);break}}}}function $5(L){var R=L.prev,H=L,ne=L.next;if(es(R,H,ne)>=0)return!1;for(var pe=L.next.next;pe!==L.prev;){if(Ch(R.x,R.y,H.x,H.y,ne.x,ne.y,pe.x,pe.y)&&es(pe.prev,pe,pe.next)>=0)return!1;pe=pe.next}return!0}function Q5(L,R,H,ne){var pe=L.prev,be=L,Se=L.next;if(es(pe,be,Se)>=0)return!1;for(var ze=pe.x<be.x?pe.x<Se.x?pe.x:Se.x:be.x<Se.x?be.x:Se.x,tt=pe.y<be.y?pe.y<Se.y?pe.y:Se.y:be.y<Se.y?be.y:Se.y,ct=pe.x>be.x?pe.x>Se.x?pe.x:Se.x:be.x>Se.x?be.x:Se.x,mt=pe.y>be.y?pe.y>Se.y?pe.y:Se.y:be.y>Se.y?be.y:Se.y,It=yg(ze,tt,R,H,ne),Kt=yg(ct,mt,R,H,ne),Wt=L.prevZ,cr=L.nextZ;Wt&&Wt.z>=It&&cr&&cr.z<=Kt;){if(Wt!==L.prev&&Wt!==L.next&&Ch(pe.x,pe.y,be.x,be.y,Se.x,Se.y,Wt.x,Wt.y)&&es(Wt.prev,Wt,Wt.next)>=0||(Wt=Wt.prevZ,cr!==L.prev&&cr!==L.next&&Ch(pe.x,pe.y,be.x,be.y,Se.x,Se.y,cr.x,cr.y)&&es(cr.prev,cr,cr.next)>=0))return!1;cr=cr.nextZ}for(;Wt&&Wt.z>=It;){if(Wt!==L.prev&&Wt!==L.next&&Ch(pe.x,pe.y,be.x,be.y,Se.x,Se.y,Wt.x,Wt.y)&&es(Wt.prev,Wt,Wt.next)>=0)return!1;Wt=Wt.prevZ}for(;cr&&cr.z<=Kt;){if(cr!==L.prev&&cr!==L.next&&Ch(pe.x,pe.y,be.x,be.y,Se.x,Se.y,cr.x,cr.y)&&es(cr.prev,cr,cr.next)>=0)return!1;cr=cr.nextZ}return!0}function q5(L,R,H){var ne=L;do{var pe=ne.prev,be=ne.next.next;!rd(pe,be)&&H1(pe,ne,ne.next,be)&&Iv(pe,be)&&Iv(be,pe)&&(R.push(pe.i/H),R.push(ne.i/H),R.push(be.i/H),Fv(ne),Fv(ne.next),ne=L=be),ne=ne.next}while(ne!==L);return kc(ne)}function eA(L,R,H,ne,pe,be){var Se=L;do{for(var ze=Se.next.next;ze!==Se.prev;){if(Se.i!==ze.i&&uA(Se,ze)){var tt=G1(Se,ze);Se=kc(Se,Se.next),tt=kc(tt,tt.next),Dv(Se,R,H,ne,pe,be),Dv(tt,R,H,ne,pe,be);return}ze=ze.next}Se=Se.next}while(Se!==L)}function tA(L,R,H,ne){var pe=[],be,Se,ze,tt,ct;for(be=0,Se=R.length;be<Se;be++)ze=R[be]*ne,tt=be<Se-1?R[be+1]*ne:L.length,ct=V1(L,ze,tt,ne,!1),ct===ct.next&&(ct.steiner=!0),pe.push(lA(ct));for(pe.sort(rA),be=0;be<pe.length;be++)nA(pe[be],H),H=kc(H,H.next);return H}function rA(L,R){return L.x-R.x}function nA(L,R){if(R=aA(L,R),R){var H=G1(R,L);kc(R,R.next),kc(H,H.next)}}function aA(L,R){var H=R,ne=L.x,pe=L.y,be=-1/0,Se;do{if(pe<=H.y&&pe>=H.next.y&&H.next.y!==H.y){var ze=H.x+(pe-H.y)*(H.next.x-H.x)/(H.next.y-H.y);if(ze<=ne&&ze>be){if(be=ze,ze===ne){if(pe===H.y)return H;if(pe===H.next.y)return H.next}Se=H.x<H.next.x?H:H.next}}H=H.next}while(H!==R);if(!Se)return null;if(ne===be)return Se;var tt=Se,ct=Se.x,mt=Se.y,It=1/0,Kt;H=Se;do ne>=H.x&&H.x>=ct&&ne!==H.x&&Ch(pe<mt?ne:be,pe,ct,mt,pe<mt?be:ne,pe,H.x,H.y)&&(Kt=Math.abs(pe-H.y)/(ne-H.x),Iv(H,L)&&(Kt<It||Kt===It&&(H.x>Se.x||H.x===Se.x&&iA(Se,H)))&&(Se=H,It=Kt)),H=H.next;while(H!==tt);return Se}function iA(L,R){return es(L.prev,L,R.prev)<0&&es(R.next,L,L.next)<0}function oA(L,R,H,ne){var pe=L;do pe.z===null&&(pe.z=yg(pe.x,pe.y,R,H,ne)),pe.prevZ=pe.prev,pe.nextZ=pe.next,pe=pe.next;while(pe!==L);pe.prevZ.nextZ=null,pe.prevZ=null,sA(pe)}function sA(L){var R,H,ne,pe,be,Se,ze,tt,ct=1;do{for(H=L,L=null,be=null,Se=0;H;){for(Se++,ne=H,ze=0,R=0;R<ct&&(ze++,ne=ne.nextZ,!!ne);R++);for(tt=ct;ze>0||tt>0&&ne;)ze!==0&&(tt===0||!ne||H.z<=ne.z)?(pe=H,H=H.nextZ,ze--):(pe=ne,ne=ne.nextZ,tt--),be?be.nextZ=pe:L=pe,pe.prevZ=be,be=pe;H=ne}be.nextZ=null,ct*=2}while(Se>1);return L}function yg(L,R,H,ne,pe){return L=32767*(L-H)*pe,R=32767*(R-ne)*pe,L=(L|L<<8)&16711935,L=(L|L<<4)&252645135,L=(L|L<<2)&858993459,L=(L|L<<1)&1431655765,R=(R|R<<8)&16711935,R=(R|R<<4)&252645135,R=(R|R<<2)&858993459,R=(R|R<<1)&1431655765,L|R<<1}function lA(L){var R=L,H=L;do(R.x<H.x||R.x===H.x&&R.y<H.y)&&(H=R),R=R.next;while(R!==L);return H}function Ch(L,R,H,ne,pe,be,Se,ze){return(pe-Se)*(R-ze)-(L-Se)*(be-ze)>=0&&(L-Se)*(ne-ze)-(H-Se)*(R-ze)>=0&&(H-Se)*(be-ze)-(pe-Se)*(ne-ze)>=0}function uA(L,R){return L.next.i!==R.i&&L.prev.i!==R.i&&!fA(L,R)&&(Iv(L,R)&&Iv(R,L)&&cA(L,R)&&(es(L.prev,L,R.prev)||es(L,R.prev,R))||rd(L,R)&&es(L.prev,L,L.next)>0&&es(R.prev,R,R.next)>0)}function es(L,R,H){return(R.y-L.y)*(H.x-R.x)-(R.x-L.x)*(H.y-R.y)}function rd(L,R){return L.x===R.x&&L.y===R.y}function H1(L,R,H,ne){var pe=ad(es(L,R,H)),be=ad(es(L,R,ne)),Se=ad(es(H,ne,L)),ze=ad(es(H,ne,R));return!!(pe!==be&&Se!==ze||pe===0&&nd(L,H,R)||be===0&&nd(L,ne,R)||Se===0&&nd(H,L,ne)||ze===0&&nd(H,R,ne))}function nd(L,R,H){return R.x<=Math.max(L.x,H.x)&&R.x>=Math.min(L.x,H.x)&&R.y<=Math.max(L.y,H.y)&&R.y>=Math.min(L.y,H.y)}function ad(L){return L>0?1:L<0?-1:0}function fA(L,R){var H=L;do{if(H.i!==L.i&&H.next.i!==L.i&&H.i!==R.i&&H.next.i!==R.i&&H1(H,H.next,L,R))return!0;H=H.next}while(H!==L);return!1}function Iv(L,R){return es(L.prev,L,L.next)<0?es(L,R,L.next)>=0&&es(L,L.prev,R)>=0:es(L,R,L.prev)<0||es(L,L.next,R)<0}function cA(L,R){var H=L,ne=!1,pe=(L.x+R.x)/2,be=(L.y+R.y)/2;do H.y>be!=H.next.y>be&&H.next.y!==H.y&&pe<(H.next.x-H.x)*(be-H.y)/(H.next.y-H.y)+H.x&&(ne=!ne),H=H.next;while(H!==L);return ne}function G1(L,R){var H=new xg(L.i,L.x,L.y),ne=new xg(R.i,R.x,R.y),pe=L.next,be=R.prev;return L.next=R,R.prev=L,H.next=pe,pe.prev=H,ne.next=H,H.prev=ne,be.next=ne,ne.prev=be,ne}function W1(L,R,H,ne){var pe=new xg(L,R,H);return ne?(pe.next=ne.next,pe.prev=ne,ne.next.prev=pe,ne.next=pe):(pe.prev=pe,pe.next=pe),pe}function Fv(L){L.next.prev=L.prev,L.prev.next=L.next,L.prevZ&&(L.prevZ.nextZ=L.nextZ),L.nextZ&&(L.nextZ.prevZ=L.prevZ)}function xg(L,R,H){this.i=L,this.x=R,this.y=H,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}td.deviation=function(L,R,H,ne){var pe=R&&R.length,be=pe?R[0]*H:L.length,Se=Math.abs(bg(L,0,be,H));if(pe)for(var ze=0,tt=R.length;ze<tt;ze++){var ct=R[ze]*H,mt=ze<tt-1?R[ze+1]*H:L.length;Se-=Math.abs(bg(L,ct,mt,H))}var It=0;for(ze=0;ze<ne.length;ze+=3){var Kt=ne[ze]*H,Wt=ne[ze+1]*H,cr=ne[ze+2]*H;It+=Math.abs((L[Kt]-L[cr])*(L[Wt+1]-L[Kt+1])-(L[Kt]-L[Wt])*(L[cr+1]-L[Kt+1]))}return Se===0&&It===0?0:Math.abs((It-Se)/Se)};function bg(L,R,H,ne){for(var pe=0,be=R,Se=H-ne;be<H;be+=ne)pe+=(L[Se]-L[be])*(L[be+1]+L[Se+1]),Se=be;return pe}td.flatten=function(L){for(var R=L[0][0].length,H={vertices:[],holes:[],dimensions:R},ne=0,pe=0;pe<L.length;pe++){for(var be=0;be<L[pe].length;be++)for(var Se=0;Se<R;Se++)H.vertices.push(L[pe][be][Se]);pe>0&&(ne+=L[pe-1].length,H.holes.push(ne))}return H},mg.default=J5;function hA(L,R,H,ne,pe){Y1(L,R,H||0,ne||L.length-1,pe||vA)}function Y1(L,R,H,ne,pe){for(;ne>H;){if(ne-H>600){var be=ne-H+1,Se=R-H+1,ze=Math.log(be),tt=.5*Math.exp(2*ze/3),ct=.5*Math.sqrt(ze*tt*(be-tt)/be)*(Se-be/2<0?-1:1),mt=Math.max(H,Math.floor(R-Se*tt/be+ct)),It=Math.min(ne,Math.floor(R+(be-Se)*tt/be+ct));Y1(L,R,mt,It,pe)}var Kt=L[R],Wt=H,cr=ne;for(zv(L,H,R),pe(L[ne],Kt)>0&&zv(L,H,ne);Wt<cr;){for(zv(L,Wt,cr),Wt++,cr--;pe(L[Wt],Kt)<0;)Wt++;for(;pe(L[cr],Kt)>0;)cr--}pe(L[H],Kt)===0?zv(L,H,cr):(cr++,zv(L,cr,ne)),cr<=R&&(H=cr+1),R<=cr&&(ne=cr-1)}}function zv(L,R,H){var ne=L[R];L[R]=L[H],L[H]=ne}function vA(L,R){return L<R?-1:L>R?1:0}function _g(L,R){var H=L.length;if(H<=1)return[L];for(var ne=[],pe,be,Se=0;Se<H;Se++){var ze=j(L[Se]);ze!==0&&(L[Se].area=Math.abs(ze),be===void 0&&(be=ze<0),be===ze<0?(pe&&ne.push(pe),pe=[L[Se]]):pe.push(L[Se]))}if(pe&&ne.push(pe),R>1)for(var tt=0;tt<ne.length;tt++)ne[tt].length<=R||(hA(ne[tt],R,1,ne[tt].length-1,pA),ne[tt]=ne[tt].slice(0,R));return ne}function pA(L,R){return R.area-L.area}function wg(L,R,H){for(var ne=H.patternDependencies,pe=!1,be=0,Se=R;be<Se.length;be+=1){var ze=Se[be],tt=ze.paint.get(L+"-pattern");tt.isConstant()||(pe=!0);var ct=tt.constantOr(null);ct&&(pe=!0,ne[ct.to]=!0,ne[ct.from]=!0)}return pe}function Tg(L,R,H,ne,pe){for(var be=pe.patternDependencies,Se=0,ze=R;Se<ze.length;Se+=1){var tt=ze[Se],ct=tt.paint.get(L+"-pattern"),mt=ct.value;if(mt.kind!=="constant"){var It=mt.evaluate({zoom:ne-1},H,{},pe.availableImages),Kt=mt.evaluate({zoom:ne},H,{},pe.availableImages),Wt=mt.evaluate({zoom:ne+1},H,{},pe.availableImages);It=It&&It.name?It.name:It,Kt=Kt&&Kt.name?Kt.name:Kt,Wt=Wt&&Wt.name?Wt.name:Wt,be[It]=!0,be[Kt]=!0,be[Wt]=!0,H.patterns[tt.id]={min:It,mid:Kt,max:Wt}}}return H}var dA=500,yf=function(R){this.zoom=R.zoom,this.overscaling=R.overscaling,this.layers=R.layers,this.layerIds=this.layers.map(function(H){return H.id}),this.index=R.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Wc,this.indexArray=new gf,this.indexArray2=new Xc,this.programConfigurations=new ii(U1,R.layers,R.zoom),this.segments=new X,this.segments2=new X,this.stateDependentLayerIds=this.layers.filter(function(H){return H.isStateDependent()}).map(function(H){return H.id})};yf.prototype.populate=function(R,H,ne){this.hasPattern=wg("fill",this.layers,H);for(var pe=this.layers[0].layout.get("fill-sort-key"),be=[],Se=0,ze=R;Se<ze.length;Se+=1){var tt=ze[Se],ct=tt.feature,mt=tt.id,It=tt.index,Kt=tt.sourceLayerIndex,Wt=this.layers[0]._featureFilter.needGeometry,cr={type:ct.type,id:mt,properties:ct.properties,geometry:Wt?Gi(ct):[]};if(!!this.layers[0]._featureFilter.filter(new ui(this.zoom),cr,ne)){Wt||(cr.geometry=Gi(ct));var Br=pe?pe.evaluate(cr,{},ne,H.availableImages):void 0,hn={id:mt,properties:ct.properties,type:ct.type,sourceLayerIndex:Kt,index:It,geometry:cr.geometry,patterns:{},sortKey:Br};be.push(hn)}}pe&&be.sort(function(ka,La){return ka.sortKey-La.sortKey});for(var rn=0,kn=be;rn<kn.length;rn+=1){var _n=kn[rn],Sn=_n,zn=Sn.geometry,Kn=Sn.index,fa=Sn.sourceLayerIndex;if(this.hasPattern){var sa=Tg("fill",this.layers,_n,this.zoom,H);this.patternFeatures.push(sa)}else this.addFeature(_n,zn,Kn,ne,{});var Ba=R[Kn].feature;H.featureIndex.insert(Ba,zn,Kn,fa,this.index)}},yf.prototype.update=function(R,H,ne){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(R,H,this.stateDependentLayers,ne)},yf.prototype.addFeatures=function(R,H,ne){for(var pe=0,be=this.patternFeatures;pe<be.length;pe+=1){var Se=be[pe];this.addFeature(Se,Se.geometry,Se.index,H,ne)}},yf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},yf.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},yf.prototype.upload=function(R){this.uploaded||(this.layoutVertexBuffer=R.createVertexBuffer(this.layoutVertexArray,U1),this.indexBuffer=R.createIndexBuffer(this.indexArray),this.indexBuffer2=R.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(R),this.uploaded=!0},yf.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},yf.prototype.addFeature=function(R,H,ne,pe,be){for(var Se=0,ze=_g(H,dA);Se<ze.length;Se+=1){for(var tt=ze[Se],ct=0,mt=0,It=tt;mt<It.length;mt+=1){var Kt=It[mt];ct+=Kt.length}for(var Wt=this.segments.prepareSegment(ct,this.layoutVertexArray,this.indexArray),cr=Wt.vertexLength,Br=[],hn=[],rn=0,kn=tt;rn<kn.length;rn+=1){var _n=kn[rn];if(_n.length!==0){_n!==tt[0]&&hn.push(Br.length/2);var Sn=this.segments2.prepareSegment(_n.length,this.layoutVertexArray,this.indexArray2),zn=Sn.vertexLength;this.layoutVertexArray.emplaceBack(_n[0].x,_n[0].y),this.indexArray2.emplaceBack(zn+_n.length-1,zn),Br.push(_n[0].x),Br.push(_n[0].y);for(var Kn=1;Kn<_n.length;Kn++)this.layoutVertexArray.emplaceBack(_n[Kn].x,_n[Kn].y),this.indexArray2.emplaceBack(zn+Kn-1,zn+Kn),Br.push(_n[Kn].x),Br.push(_n[Kn].y);Sn.vertexLength+=_n.length,Sn.primitiveLength+=_n.length}}for(var fa=mg(Br,hn),sa=0;sa<fa.length;sa+=3)this.indexArray.emplaceBack(cr+fa[sa],cr+fa[sa+1],cr+fa[sa+2]);Wt.vertexLength+=ct,Wt.primitiveLength+=fa.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,R,ne,be,pe)},Be("FillBucket",yf,{omit:["layers","patternFeatures"]});var gA=new Ji({"fill-sort-key":new Ja(ar.layout_fill["fill-sort-key"])}),mA=new Ji({"fill-antialias":new Na(ar.paint_fill["fill-antialias"]),"fill-opacity":new Ja(ar.paint_fill["fill-opacity"]),"fill-color":new Ja(ar.paint_fill["fill-color"]),"fill-outline-color":new Ja(ar.paint_fill["fill-outline-color"]),"fill-translate":new Na(ar.paint_fill["fill-translate"]),"fill-translate-anchor":new Na(ar.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ro(ar.paint_fill["fill-pattern"])}),yA={paint:mA,layout:gA},xA=function(L){function R(H){L.call(this,H,yA)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.recalculate=function(ne,pe){L.prototype.recalculate.call(this,ne,pe);var be=this.paint._values["fill-outline-color"];be.value.kind==="constant"&&be.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},R.prototype.createBucket=function(ne){return new yf(ne)},R.prototype.queryRadius=function(){return Zu(this.paint.get("fill-translate"))},R.prototype.queryIntersectsFeature=function(ne,pe,be,Se,ze,tt,ct){var mt=Eu(ne,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),tt.angle,ct);return Fo(mt,Se)},R.prototype.isTileClipped=function(){return!0},R}(Bs),bA=Xo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),j1=bA.members,X1=Eh;function Eh(L,R,H,ne,pe){this.properties={},this.extent=H,this.type=0,this._pbf=L,this._geometry=-1,this._keys=ne,this._values=pe,L.readFields(_A,this,R)}function _A(L,R,H){L==1?R.id=H.readVarint():L==2?wA(H,R):L==3?R.type=H.readVarint():L==4&&(R._geometry=H.pos)}function wA(L,R){for(var H=L.readVarint()+L.pos;L.pos<H;){var ne=R._keys[L.readVarint()],pe=R._values[L.readVarint()];R.properties[ne]=pe}}Eh.types=["Unknown","Point","LineString","Polygon"],Eh.prototype.loadGeometry=function(){var L=this._pbf;L.pos=this._geometry;for(var R=L.readVarint()+L.pos,H=1,ne=0,pe=0,be=0,Se=[],ze;L.pos<R;){if(ne<=0){var tt=L.readVarint();H=tt&7,ne=tt>>3}if(ne--,H===1||H===2)pe+=L.readSVarint(),be+=L.readSVarint(),H===1&&(ze&&Se.push(ze),ze=[]),ze.push(new f(pe,be));else if(H===7)ze&&ze.push(ze[0].clone());else throw new Error("unknown command "+H)}return ze&&Se.push(ze),Se},Eh.prototype.bbox=function(){var L=this._pbf;L.pos=this._geometry;for(var R=L.readVarint()+L.pos,H=1,ne=0,pe=0,be=0,Se=1/0,ze=-1/0,tt=1/0,ct=-1/0;L.pos<R;){if(ne<=0){var mt=L.readVarint();H=mt&7,ne=mt>>3}if(ne--,H===1||H===2)pe+=L.readSVarint(),be+=L.readSVarint(),pe<Se&&(Se=pe),pe>ze&&(ze=pe),be<tt&&(tt=be),be>ct&&(ct=be);else if(H!==7)throw new Error("unknown command "+H)}return[Se,tt,ze,ct]},Eh.prototype.toGeoJSON=function(L,R,H){var ne=this.extent*Math.pow(2,H),pe=this.extent*L,be=this.extent*R,Se=this.loadGeometry(),ze=Eh.types[this.type],tt,ct;function mt(Wt){for(var cr=0;cr<Wt.length;cr++){var Br=Wt[cr],hn=180-(Br.y+be)*360/ne;Wt[cr]=[(Br.x+pe)*360/ne-180,360/Math.PI*Math.atan(Math.exp(hn*Math.PI/180))-90]}}switch(this.type){case 1:var It=[];for(tt=0;tt<Se.length;tt++)It[tt]=Se[tt][0];Se=It,mt(Se);break;case 2:for(tt=0;tt<Se.length;tt++)mt(Se[tt]);break;case 3:for(Se=TA(Se),tt=0;tt<Se.length;tt++)for(ct=0;ct<Se[tt].length;ct++)mt(Se[tt][ct]);break}Se.length===1?Se=Se[0]:ze="Multi"+ze;var Kt={type:"Feature",geometry:{type:ze,coordinates:Se},properties:this.properties};return"id"in this&&(Kt.id=this.id),Kt};function TA(L){var R=L.length;if(R<=1)return[L];for(var H=[],ne,pe,be=0;be<R;be++){var Se=AA(L[be]);Se!==0&&(pe===void 0&&(pe=Se<0),pe===Se<0?(ne&&H.push(ne),ne=[L[be]]):ne.push(L[be]))}return ne&&H.push(ne),H}function AA(L){for(var R=0,H=0,ne=L.length,pe=ne-1,be,Se;H<ne;pe=H++)be=L[H],Se=L[pe],R+=(Se.x-be.x)*(be.y+Se.y);return R}var Z1=K1;function K1(L,R){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=L,this._keys=[],this._values=[],this._features=[],L.readFields(SA,this,R),this.length=this._features.length}function SA(L,R,H){L===15?R.version=H.readVarint():L===1?R.name=H.readString():L===5?R.extent=H.readVarint():L===2?R._features.push(H.pos):L===3?R._keys.push(H.readString()):L===4&&R._values.push(MA(H))}function MA(L){for(var R=null,H=L.readVarint()+L.pos;L.pos<H;){var ne=L.readVarint()>>3;R=ne===1?L.readString():ne===2?L.readFloat():ne===3?L.readDouble():ne===4?L.readVarint64():ne===5?L.readVarint():ne===6?L.readSVarint():ne===7?L.readBoolean():null}return R}K1.prototype.feature=function(L){if(L<0||L>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[L];var R=this._pbf.readVarint()+this._pbf.pos;return new X1(this._pbf,R,this.extent,this._keys,this._values)};var kA=CA;function CA(L,R){this.layers=L.readFields(EA,{},R)}function EA(L,R,H){if(L===3){var ne=new Z1(H,H.readVarint()+H.pos);ne.length&&(R[ne.name]=ne)}}var LA=kA,PA=X1,RA=Z1,Lh={VectorTile:LA,VectorTileFeature:PA,VectorTileLayer:RA},DA=Lh.VectorTileFeature.types,IA=500,Ag=Math.pow(2,13);function Ov(L,R,H,ne,pe,be,Se,ze){L.emplaceBack(R,H,Math.floor(ne*Ag)*2+Se,pe*Ag*2,be*Ag*2,Math.round(ze))}var xf=function(R){this.zoom=R.zoom,this.overscaling=R.overscaling,this.layers=R.layers,this.layerIds=this.layers.map(function(H){return H.id}),this.index=R.index,this.hasPattern=!1,this.layoutVertexArray=new _c,this.indexArray=new gf,this.programConfigurations=new ii(j1,R.layers,R.zoom),this.segments=new X,this.stateDependentLayerIds=this.layers.filter(function(H){return H.isStateDependent()}).map(function(H){return H.id})};xf.prototype.populate=function(R,H,ne){this.features=[],this.hasPattern=wg("fill-extrusion",this.layers,H);for(var pe=0,be=R;pe<be.length;pe+=1){var Se=be[pe],ze=Se.feature,tt=Se.id,ct=Se.index,mt=Se.sourceLayerIndex,It=this.layers[0]._featureFilter.needGeometry,Kt={type:ze.type,id:tt,properties:ze.properties,geometry:It?Gi(ze):[]};if(!!this.layers[0]._featureFilter.filter(new ui(this.zoom),Kt,ne)){var Wt={id:tt,sourceLayerIndex:mt,index:ct,geometry:It?Kt.geometry:Gi(ze),properties:ze.properties,type:ze.type,patterns:{}};typeof ze.id!="undefined"&&(Wt.id=ze.id),this.hasPattern?this.features.push(Tg("fill-extrusion",this.layers,Wt,this.zoom,H)):this.addFeature(Wt,Wt.geometry,ct,ne,{}),H.featureIndex.insert(ze,Wt.geometry,ct,mt,this.index,!0)}}},xf.prototype.addFeatures=function(R,H,ne){for(var pe=0,be=this.features;pe<be.length;pe+=1){var Se=be[pe],ze=Se.geometry;this.addFeature(Se,ze,Se.index,H,ne)}},xf.prototype.update=function(R,H,ne){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(R,H,this.stateDependentLayers,ne)},xf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},xf.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},xf.prototype.upload=function(R){this.uploaded||(this.layoutVertexBuffer=R.createVertexBuffer(this.layoutVertexArray,j1),this.indexBuffer=R.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(R),this.uploaded=!0},xf.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},xf.prototype.addFeature=function(R,H,ne,pe,be){for(var Se=0,ze=_g(H,IA);Se<ze.length;Se+=1){for(var tt=ze[Se],ct=0,mt=0,It=tt;mt<It.length;mt+=1){var Kt=It[mt];ct+=Kt.length}for(var Wt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),cr=0,Br=tt;cr<Br.length;cr+=1){var hn=Br[cr];if(hn.length!==0&&!zA(hn))for(var rn=0,kn=0;kn<hn.length;kn++){var _n=hn[kn];if(kn>=1){var Sn=hn[kn-1];if(!FA(_n,Sn)){Wt.vertexLength+4>X.MAX_VERTEX_ARRAY_LENGTH&&(Wt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var zn=_n.sub(Sn)._perp()._unit(),Kn=Sn.dist(_n);rn+Kn>32768&&(rn=0),Ov(this.layoutVertexArray,_n.x,_n.y,zn.x,zn.y,0,0,rn),Ov(this.layoutVertexArray,_n.x,_n.y,zn.x,zn.y,0,1,rn),rn+=Kn,Ov(this.layoutVertexArray,Sn.x,Sn.y,zn.x,zn.y,0,0,rn),Ov(this.layoutVertexArray,Sn.x,Sn.y,zn.x,zn.y,0,1,rn);var fa=Wt.vertexLength;this.indexArray.emplaceBack(fa,fa+2,fa+1),this.indexArray.emplaceBack(fa+1,fa+2,fa+3),Wt.vertexLength+=4,Wt.primitiveLength+=2}}}}if(Wt.vertexLength+ct>X.MAX_VERTEX_ARRAY_LENGTH&&(Wt=this.segments.prepareSegment(ct,this.layoutVertexArray,this.indexArray)),DA[R.type]==="Polygon"){for(var sa=[],Ba=[],ka=Wt.vertexLength,La=0,ni=tt;La<ni.length;La+=1){var Fa=ni[La];if(Fa.length!==0){Fa!==tt[0]&&Ba.push(sa.length/2);for(var Oa=0;Oa<Fa.length;Oa++){var hi=Fa[Oa];Ov(this.layoutVertexArray,hi.x,hi.y,0,0,1,1,0),sa.push(hi.x),sa.push(hi.y)}}}for(var ti=mg(sa,Ba),Ei=0;Ei<ti.length;Ei+=3)this.indexArray.emplaceBack(ka+ti[Ei],ka+ti[Ei+2],ka+ti[Ei+1]);Wt.primitiveLength+=ti.length/3,Wt.vertexLength+=ct}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,R,ne,be,pe)},Be("FillExtrusionBucket",xf,{omit:["layers","features"]});function FA(L,R){return L.x===R.x&&(L.x<0||L.x>Ga)||L.y===R.y&&(L.y<0||L.y>Ga)}function zA(L){return L.every(function(R){return R.x<0})||L.every(function(R){return R.x>Ga})||L.every(function(R){return R.y<0})||L.every(function(R){return R.y>Ga})}var OA=new Ji({"fill-extrusion-opacity":new Na(ar["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ja(ar["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Na(ar["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Na(ar["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ro(ar["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ja(ar["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ja(ar["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Na(ar["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),BA={paint:OA},NA=function(L){function R(H){L.call(this,H,BA)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.createBucket=function(ne){return new xf(ne)},R.prototype.queryRadius=function(){return Zu(this.paint.get("fill-extrusion-translate"))},R.prototype.is3D=function(){return!0},R.prototype.queryIntersectsFeature=function(ne,pe,be,Se,ze,tt,ct,mt){var It=Eu(ne,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),tt.angle,ct),Kt=this.paint.get("fill-extrusion-height").evaluate(pe,be),Wt=this.paint.get("fill-extrusion-base").evaluate(pe,be),cr=HA(It,mt,tt,0),Br=VA(Se,Wt,Kt,mt),hn=Br[0],rn=Br[1];return UA(hn,rn,cr)},R}(Bs);function Bv(L,R){return L.x*R.x+L.y*R.y}function J1(L,R){if(L.length===1){for(var H=0,ne=R[H++],pe;!pe||ne.equals(pe);)if(pe=R[H++],!pe)return 1/0;for(;H<R.length;H++){var be=R[H],Se=L[0],ze=pe.sub(ne),tt=be.sub(ne),ct=Se.sub(ne),mt=Bv(ze,ze),It=Bv(ze,tt),Kt=Bv(tt,tt),Wt=Bv(ct,ze),cr=Bv(ct,tt),Br=mt*Kt-It*It,hn=(Kt*Wt-It*cr)/Br,rn=(mt*cr-It*Wt)/Br,kn=1-hn-rn,_n=ne.z*kn+pe.z*hn+be.z*rn;if(isFinite(_n))return _n}return 1/0}else{for(var Sn=1/0,zn=0,Kn=R;zn<Kn.length;zn+=1){var fa=Kn[zn];Sn=Math.min(Sn,fa.z)}return Sn}}function UA(L,R,H){var ne=1/0;Fo(H,R)&&(ne=J1(H,R[0]));for(var pe=0;pe<R.length;pe++)for(var be=R[pe],Se=L[pe],ze=0;ze<be.length-1;ze++){var tt=be[ze],ct=be[ze+1],mt=Se[ze],It=Se[ze+1],Kt=[tt,ct,It,mt,tt];si(H,Kt)&&(ne=Math.min(ne,J1(H,Kt)))}return ne===1/0?!1:ne}function VA(L,R,H,ne){for(var pe=[],be=[],Se=ne[8]*R,ze=ne[9]*R,tt=ne[10]*R,ct=ne[11]*R,mt=ne[8]*H,It=ne[9]*H,Kt=ne[10]*H,Wt=ne[11]*H,cr=0,Br=L;cr<Br.length;cr+=1){for(var hn=Br[cr],rn=[],kn=[],_n=0,Sn=hn;_n<Sn.length;_n+=1){var zn=Sn[_n],Kn=zn.x,fa=zn.y,sa=ne[0]*Kn+ne[4]*fa+ne[12],Ba=ne[1]*Kn+ne[5]*fa+ne[13],ka=ne[2]*Kn+ne[6]*fa+ne[14],La=ne[3]*Kn+ne[7]*fa+ne[15],ni=sa+Se,Fa=Ba+ze,Oa=ka+tt,hi=La+ct,ti=sa+mt,Ei=Ba+It,Ki=ka+Kt,Li=La+Wt,Pi=new f(ni/hi,Fa/hi);Pi.z=Oa/hi,rn.push(Pi);var Si=new f(ti/Li,Ei/Li);Si.z=Ki/Li,kn.push(Si)}pe.push(rn),be.push(kn)}return[pe,be]}function HA(L,R,H,ne){for(var pe=[],be=0,Se=L;be<Se.length;be+=1){var ze=Se[be],tt=[ze.x,ze.y,ne,1];ed(tt,tt,R),pe.push(new f(tt[0]/tt[3],tt[1]/tt[3]))}return pe}var GA=Xo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),$1=GA.members,WA=Lh.VectorTileFeature.types,Q1=63,YA=Math.cos(75/2*(Math.PI/180)),jA=15,XA=20,ZA=15,q1=1/2,ex=Math.pow(2,ZA-1)/q1,Fl=function(R){this.zoom=R.zoom,this.overscaling=R.overscaling,this.layers=R.layers,this.layerIds=this.layers.map(function(H){return H.id}),this.index=R.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xh,this.indexArray=new gf,this.programConfigurations=new ii($1,R.layers,R.zoom),this.segments=new X,this.stateDependentLayerIds=this.layers.filter(function(H){return H.isStateDependent()}).map(function(H){return H.id})};Fl.prototype.populate=function(R,H,ne){this.hasPattern=wg("line",this.layers,H);for(var pe=this.layers[0].layout.get("line-sort-key"),be=[],Se=0,ze=R;Se<ze.length;Se+=1){var tt=ze[Se],ct=tt.feature,mt=tt.id,It=tt.index,Kt=tt.sourceLayerIndex,Wt=this.layers[0]._featureFilter.needGeometry,cr={type:ct.type,id:mt,properties:ct.properties,geometry:Wt?Gi(ct):[]};if(!!this.layers[0]._featureFilter.filter(new ui(this.zoom),cr,ne)){Wt||(cr.geometry=Gi(ct));var Br=pe?pe.evaluate(cr,{},ne):void 0,hn={id:mt,properties:ct.properties,type:ct.type,sourceLayerIndex:Kt,index:It,geometry:cr.geometry,patterns:{},sortKey:Br};be.push(hn)}}pe&&be.sort(function(ka,La){return ka.sortKey-La.sortKey});for(var rn=0,kn=be;rn<kn.length;rn+=1){var _n=kn[rn],Sn=_n,zn=Sn.geometry,Kn=Sn.index,fa=Sn.sourceLayerIndex;if(this.hasPattern){var sa=Tg("line",this.layers,_n,this.zoom,H);this.patternFeatures.push(sa)}else this.addFeature(_n,zn,Kn,ne,{});var Ba=R[Kn].feature;H.featureIndex.insert(Ba,zn,Kn,fa,this.index)}},Fl.prototype.update=function(R,H,ne){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(R,H,this.stateDependentLayers,ne)},Fl.prototype.addFeatures=function(R,H,ne){for(var pe=0,be=this.patternFeatures;pe<be.length;pe+=1){var Se=be[pe];this.addFeature(Se,Se.geometry,Se.index,H,ne)}},Fl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Fl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Fl.prototype.upload=function(R){this.uploaded||(this.layoutVertexBuffer=R.createVertexBuffer(this.layoutVertexArray,$1),this.indexBuffer=R.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(R),this.uploaded=!0},Fl.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Fl.prototype.addFeature=function(R,H,ne,pe,be){for(var Se=this.layers[0].layout,ze=Se.get("line-join").evaluate(R,{}),tt=Se.get("line-cap"),ct=Se.get("line-miter-limit"),mt=Se.get("line-round-limit"),It=0,Kt=H;It<Kt.length;It+=1){var Wt=Kt[It];this.addLine(Wt,R,ze,tt,ct,mt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,R,ne,be,pe)},Fl.prototype.addLine=function(R,H,ne,pe,be,Se){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,!!H.properties&&H.properties.hasOwnProperty("mapbox_clip_start")&&H.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+H.properties.mapbox_clip_start,this.clipEnd=+H.properties.mapbox_clip_end;for(var ze=0;ze<R.length-1;ze++)this.totalDistance+=R[ze].dist(R[ze+1]);this.updateScaledDistance()}for(var tt=WA[H.type]==="Polygon",ct=R.length;ct>=2&&R[ct-1].equals(R[ct-2]);)ct--;for(var mt=0;mt<ct-1&&R[mt].equals(R[mt+1]);)mt++;if(!(ct<(tt?3:2))){ne==="bevel"&&(be=1.05);var It=this.overscaling<=16?jA*Ga/(512*this.overscaling):0,Kt=this.segments.prepareSegment(ct*10,this.layoutVertexArray,this.indexArray),Wt,cr=void 0,Br=void 0,hn=void 0,rn=void 0;this.e1=this.e2=-1,tt&&(Wt=R[ct-2],rn=R[mt].sub(Wt)._unit()._perp());for(var kn=mt;kn<ct;kn++)if(Br=kn===ct-1?tt?R[mt+1]:void 0:R[kn+1],!(Br&&R[kn].equals(Br))){rn&&(hn=rn),Wt&&(cr=Wt),Wt=R[kn],rn=Br?Br.sub(Wt)._unit()._perp():hn,hn=hn||rn;var _n=hn.add(rn);(_n.x!==0||_n.y!==0)&&_n._unit();var Sn=hn.x*rn.x+hn.y*rn.y,zn=_n.x*rn.x+_n.y*rn.y,Kn=zn!==0?1/zn:1/0,fa=2*Math.sqrt(2-2*zn),sa=zn<YA&&cr&&Br,Ba=hn.x*rn.y-hn.y*rn.x>0;if(sa&&kn>mt){var ka=Wt.dist(cr);if(ka>2*It){var La=Wt.sub(Wt.sub(cr)._mult(It/ka)._round());this.updateDistance(cr,La),this.addCurrentVertex(La,hn,0,0,Kt),cr=La}}var ni=cr&&Br,Fa=ni?ne:tt?"butt":pe;if(ni&&Fa==="round"&&(Kn<Se?Fa="miter":Kn<=2&&(Fa="fakeround")),Fa==="miter"&&Kn>be&&(Fa="bevel"),Fa==="bevel"&&(Kn>2&&(Fa="flipbevel"),Kn<be&&(Fa="miter")),cr&&this.updateDistance(cr,Wt),Fa==="miter")_n._mult(Kn),this.addCurrentVertex(Wt,_n,0,0,Kt);else if(Fa==="flipbevel"){if(Kn>100)_n=rn.mult(-1);else{var Oa=Kn*hn.add(rn).mag()/hn.sub(rn).mag();_n._perp()._mult(Oa*(Ba?-1:1))}this.addCurrentVertex(Wt,_n,0,0,Kt),this.addCurrentVertex(Wt,_n.mult(-1),0,0,Kt)}else if(Fa==="bevel"||Fa==="fakeround"){var hi=-Math.sqrt(Kn*Kn-1),ti=Ba?hi:0,Ei=Ba?0:hi;if(cr&&this.addCurrentVertex(Wt,hn,ti,Ei,Kt),Fa==="fakeround")for(var Ki=Math.round(fa*180/Math.PI/XA),Li=1;Li<Ki;Li++){var Pi=Li/Ki;if(Pi!==.5){var Si=Pi-.5,ro=1.0904+Sn*(-3.2452+Sn*(3.55645-Sn*1.43519)),so=.848013+Sn*(-1.06021+Sn*.215638);Pi=Pi+Pi*Si*(Pi-1)*(ro*Si*Si+so)}var zo=rn.sub(hn)._mult(Pi)._add(hn)._unit()._mult(Ba?-1:1);this.addHalfVertex(Wt,zo.x,zo.y,!1,Ba,0,Kt)}Br&&this.addCurrentVertex(Wt,rn,-ti,-Ei,Kt)}else if(Fa==="butt")this.addCurrentVertex(Wt,_n,0,0,Kt);else if(Fa==="square"){var Go=cr?1:-1;this.addCurrentVertex(Wt,_n,Go,Go,Kt)}else Fa==="round"&&(cr&&(this.addCurrentVertex(Wt,hn,0,0,Kt),this.addCurrentVertex(Wt,hn,1,1,Kt,!0)),Br&&(this.addCurrentVertex(Wt,rn,-1,-1,Kt,!0),this.addCurrentVertex(Wt,rn,0,0,Kt)));if(sa&&kn<ct-1){var ms=Wt.dist(Br);if(ms>2*It){var ns=Wt.add(Br.sub(Wt)._mult(It/ms)._round());this.updateDistance(Wt,ns),this.addCurrentVertex(ns,rn,0,0,Kt),Wt=ns}}}}},Fl.prototype.addCurrentVertex=function(R,H,ne,pe,be,Se){Se===void 0&&(Se=!1);var ze=H.x+H.y*ne,tt=H.y-H.x*ne,ct=-H.x+H.y*pe,mt=-H.y-H.x*pe;this.addHalfVertex(R,ze,tt,Se,!1,ne,be),this.addHalfVertex(R,ct,mt,Se,!0,-pe,be),this.distance>ex/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(R,H,ne,pe,be,Se))},Fl.prototype.addHalfVertex=function(R,H,ne,pe,be,Se,ze){var tt=R.x,ct=R.y,mt=this.scaledDistance*q1;this.layoutVertexArray.emplaceBack((tt<<1)+(pe?1:0),(ct<<1)+(be?1:0),Math.round(Q1*H)+128,Math.round(Q1*ne)+128,(Se===0?0:Se<0?-1:1)+1|(mt&63)<<2,mt>>6);var It=ze.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,It),ze.primitiveLength++),be?this.e2=It:this.e1=It},Fl.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(ex-1):this.distance},Fl.prototype.updateDistance=function(R,H){this.distance+=R.dist(H),this.updateScaledDistance()},Be("LineBucket",Fl,{omit:["layers","patternFeatures"]});var KA=new Ji({"line-cap":new Na(ar.layout_line["line-cap"]),"line-join":new Ja(ar.layout_line["line-join"]),"line-miter-limit":new Na(ar.layout_line["line-miter-limit"]),"line-round-limit":new Na(ar.layout_line["line-round-limit"]),"line-sort-key":new Ja(ar.layout_line["line-sort-key"])}),JA=new Ji({"line-opacity":new Ja(ar.paint_line["line-opacity"]),"line-color":new Ja(ar.paint_line["line-color"]),"line-translate":new Na(ar.paint_line["line-translate"]),"line-translate-anchor":new Na(ar.paint_line["line-translate-anchor"]),"line-width":new Ja(ar.paint_line["line-width"]),"line-gap-width":new Ja(ar.paint_line["line-gap-width"]),"line-offset":new Ja(ar.paint_line["line-offset"]),"line-blur":new Ja(ar.paint_line["line-blur"]),"line-dasharray":new io(ar.paint_line["line-dasharray"]),"line-pattern":new Ro(ar.paint_line["line-pattern"]),"line-gradient":new jo(ar.paint_line["line-gradient"])}),tx={paint:JA,layout:KA},$A=function(L){function R(){L.apply(this,arguments)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.possiblyEvaluate=function(ne,pe){return pe=new ui(Math.floor(pe.zoom),{now:pe.now,fadeDuration:pe.fadeDuration,zoomHistory:pe.zoomHistory,transition:pe.transition}),L.prototype.possiblyEvaluate.call(this,ne,pe)},R.prototype.evaluate=function(ne,pe,be,Se){return pe=S({},pe,{zoom:Math.floor(pe.zoom)}),L.prototype.evaluate.call(this,ne,pe,be,Se)},R}(Ja),rx=new $A(tx.paint.properties["line-width"].specification);rx.useIntegerZoom=!0;var QA=function(L){function R(H){L.call(this,H,tx)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype._handleSpecialPaintPropertyUpdate=function(ne){ne==="line-gradient"&&this._updateGradient()},R.prototype._updateGradient=function(){var ne=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=N1(ne,"lineProgress"),this.gradientTexture=null},R.prototype.recalculate=function(ne,pe){L.prototype.recalculate.call(this,ne,pe),this.paint._values["line-floorwidth"]=rx.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,ne)},R.prototype.createBucket=function(ne){return new Fl(ne)},R.prototype.queryRadius=function(ne){var pe=ne,be=nx(jl("line-width",this,pe),jl("line-gap-width",this,pe)),Se=jl("line-offset",this,pe);return be/2+Math.abs(Se)+Zu(this.paint.get("line-translate"))},R.prototype.queryIntersectsFeature=function(ne,pe,be,Se,ze,tt,ct){var mt=Eu(ne,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),tt.angle,ct),It=ct/2*nx(this.paint.get("line-width").evaluate(pe,be),this.paint.get("line-gap-width").evaluate(pe,be)),Kt=this.paint.get("line-offset").evaluate(pe,be);return Kt&&(Se=qA(Se,Kt*ct)),qo(mt,Se,It)},R.prototype.isTileClipped=function(){return!0},R}(Bs);function nx(L,R){return R>0?R+2*L:L}function qA(L,R){for(var H=[],ne=new f(0,0),pe=0;pe<L.length;pe++){for(var be=L[pe],Se=[],ze=0;ze<be.length;ze++){var tt=be[ze-1],ct=be[ze],mt=be[ze+1],It=ze===0?ne:ct.sub(tt)._unit()._perp(),Kt=ze===be.length-1?ne:mt.sub(ct)._unit()._perp(),Wt=It._add(Kt)._unit(),cr=Wt.x*Kt.x+Wt.y*Kt.y;Wt._mult(1/cr),Se.push(Wt._mult(R)._add(ct))}H.push(Se)}return H}var Sg=Xo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),eS=Xo([{name:"a_projected_pos",components:3,type:"Float32"}],4);Xo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var tS=Xo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Xo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var ax=Xo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),rS=Xo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Xo([{name:"triangle",components:3,type:"Uint16"}]),Xo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Xo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Xo([{type:"Float32",name:"offsetX"}]),Xo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function nS(L,R,H){var ne=R.layout.get("text-transform").evaluate(H,{});return ne==="uppercase"?L=L.toLocaleUpperCase():ne==="lowercase"&&(L=L.toLocaleLowerCase()),Ka.applyArabicShaping&&(L=Ka.applyArabicShaping(L)),L}function aS(L,R,H){return L.sections.forEach(function(ne){ne.text=nS(ne.text,R,H)}),L}function iS(L){var R={},H={},ne=[],pe=0;function be(rn){ne.push(L[rn]),pe++}function Se(rn,kn,_n){var Sn=H[rn];return delete H[rn],H[kn]=Sn,ne[Sn].geometry[0].pop(),ne[Sn].geometry[0]=ne[Sn].geometry[0].concat(_n[0]),Sn}function ze(rn,kn,_n){var Sn=R[kn];return delete R[kn],R[rn]=Sn,ne[Sn].geometry[0].shift(),ne[Sn].geometry[0]=_n[0].concat(ne[Sn].geometry[0]),Sn}function tt(rn,kn,_n){var Sn=_n?kn[0][kn[0].length-1]:kn[0][0];return rn+":"+Sn.x+":"+Sn.y}for(var ct=0;ct<L.length;ct++){var mt=L[ct],It=mt.geometry,Kt=mt.text?mt.text.toString():null;if(!Kt){be(ct);continue}var Wt=tt(Kt,It),cr=tt(Kt,It,!0);if(Wt in H&&cr in R&&H[Wt]!==R[cr]){var Br=ze(Wt,cr,It),hn=Se(Wt,cr,ne[Br].geometry);delete R[Wt],delete H[cr],H[tt(Kt,ne[hn].geometry,!0)]=hn,ne[Br].geometry=null}else Wt in H?Se(Wt,cr,It):cr in R?ze(Wt,cr,It):(be(ct),R[Wt]=pe-1,H[cr]=pe-1)}return ne.filter(function(rn){return rn.geometry})}var Nv={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function oS(L){for(var R="",H=0;H<L.length;H++){var ne=L.charCodeAt(H+1)||null,pe=L.charCodeAt(H-1)||null,be=(!ne||!fn(ne)||Nv[L[H+1]])&&(!pe||!fn(pe)||Nv[L[H-1]]);be&&Nv[L[H]]?R+=Nv[L[H]]:R+=L[H]}return R}var Ls=24,sS=function(L,R,H,ne,pe){var be,Se,ze=pe*8-ne-1,tt=(1<<ze)-1,ct=tt>>1,mt=-7,It=H?pe-1:0,Kt=H?-1:1,Wt=L[R+It];for(It+=Kt,be=Wt&(1<<-mt)-1,Wt>>=-mt,mt+=ze;mt>0;be=be*256+L[R+It],It+=Kt,mt-=8);for(Se=be&(1<<-mt)-1,be>>=-mt,mt+=ne;mt>0;Se=Se*256+L[R+It],It+=Kt,mt-=8);if(be===0)be=1-ct;else{if(be===tt)return Se?NaN:(Wt?-1:1)*(1/0);Se=Se+Math.pow(2,ne),be=be-ct}return(Wt?-1:1)*Se*Math.pow(2,be-ne)},lS=function(L,R,H,ne,pe,be){var Se,ze,tt,ct=be*8-pe-1,mt=(1<<ct)-1,It=mt>>1,Kt=pe===23?Math.pow(2,-24)-Math.pow(2,-77):0,Wt=ne?0:be-1,cr=ne?1:-1,Br=R<0||R===0&&1/R<0?1:0;for(R=Math.abs(R),isNaN(R)||R===1/0?(ze=isNaN(R)?1:0,Se=mt):(Se=Math.floor(Math.log(R)/Math.LN2),R*(tt=Math.pow(2,-Se))<1&&(Se--,tt*=2),Se+It>=1?R+=Kt/tt:R+=Kt*Math.pow(2,1-It),R*tt>=2&&(Se++,tt/=2),Se+It>=mt?(ze=0,Se=mt):Se+It>=1?(ze=(R*tt-1)*Math.pow(2,pe),Se=Se+It):(ze=R*Math.pow(2,It-1)*Math.pow(2,pe),Se=0));pe>=8;L[H+Wt]=ze&255,Wt+=cr,ze/=256,pe-=8);for(Se=Se<<pe|ze,ct+=pe;ct>0;L[H+Wt]=Se&255,Wt+=cr,Se/=256,ct-=8);L[H+Wt-cr]|=Br*128},id={read:sS,write:lS},od=oo;function oo(L){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(L)?L:new Uint8Array(L||0),this.pos=0,this.type=0,this.length=this.buf.length}oo.Varint=0,oo.Fixed64=1,oo.Bytes=2,oo.Fixed32=5;var Mg=(1<<16)*(1<<16),ix=1/Mg,uS=12,ox=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");oo.prototype={destroy:function(){this.buf=null},readFields:function(L,R,H){for(H=H||this.length;this.pos<H;){var ne=this.readVarint(),pe=ne>>3,be=this.pos;this.type=ne&7,L(pe,R,this),this.pos===be&&this.skip(ne)}return R},readMessage:function(L,R){return this.readFields(L,R,this.readVarint()+this.pos)},readFixed32:function(){var L=sd(this.buf,this.pos);return this.pos+=4,L},readSFixed32:function(){var L=lx(this.buf,this.pos);return this.pos+=4,L},readFixed64:function(){var L=sd(this.buf,this.pos)+sd(this.buf,this.pos+4)*Mg;return this.pos+=8,L},readSFixed64:function(){var L=sd(this.buf,this.pos)+lx(this.buf,this.pos+4)*Mg;return this.pos+=8,L},readFloat:function(){var L=id.read(this.buf,this.pos,!0,23,4);return this.pos+=4,L},readDouble:function(){var L=id.read(this.buf,this.pos,!0,52,8);return this.pos+=8,L},readVarint:function(L){var R=this.buf,H,ne;return ne=R[this.pos++],H=ne&127,ne<128||(ne=R[this.pos++],H|=(ne&127)<<7,ne<128)||(ne=R[this.pos++],H|=(ne&127)<<14,ne<128)||(ne=R[this.pos++],H|=(ne&127)<<21,ne<128)?H:(ne=R[this.pos],H|=(ne&15)<<28,fS(H,L,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var L=this.readVarint();return L%2==1?(L+1)/-2:L/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var L=this.readVarint()+this.pos,R=this.pos;return this.pos=L,L-R>=uS&&ox?AS(this.buf,R,L):TS(this.buf,R,L)},readBytes:function(){var L=this.readVarint()+this.pos,R=this.buf.subarray(this.pos,L);return this.pos=L,R},readPackedVarint:function(L,R){if(this.type!==oo.Bytes)return L.push(this.readVarint(R));var H=uc(this);for(L=L||[];this.pos<H;)L.push(this.readVarint(R));return L},readPackedSVarint:function(L){if(this.type!==oo.Bytes)return L.push(this.readSVarint());var R=uc(this);for(L=L||[];this.pos<R;)L.push(this.readSVarint());return L},readPackedBoolean:function(L){if(this.type!==oo.Bytes)return L.push(this.readBoolean());var R=uc(this);for(L=L||[];this.pos<R;)L.push(this.readBoolean());return L},readPackedFloat:function(L){if(this.type!==oo.Bytes)return L.push(this.readFloat());var R=uc(this);for(L=L||[];this.pos<R;)L.push(this.readFloat());return L},readPackedDouble:function(L){if(this.type!==oo.Bytes)return L.push(this.readDouble());var R=uc(this);for(L=L||[];this.pos<R;)L.push(this.readDouble());return L},readPackedFixed32:function(L){if(this.type!==oo.Bytes)return L.push(this.readFixed32());var R=uc(this);for(L=L||[];this.pos<R;)L.push(this.readFixed32());return L},readPackedSFixed32:function(L){if(this.type!==oo.Bytes)return L.push(this.readSFixed32());var R=uc(this);for(L=L||[];this.pos<R;)L.push(this.readSFixed32());return L},readPackedFixed64:function(L){if(this.type!==oo.Bytes)return L.push(this.readFixed64());var R=uc(this);for(L=L||[];this.pos<R;)L.push(this.readFixed64());return L},readPackedSFixed64:function(L){if(this.type!==oo.Bytes)return L.push(this.readSFixed64());var R=uc(this);for(L=L||[];this.pos<R;)L.push(this.readSFixed64());return L},skip:function(L){var R=L&7;if(R===oo.Varint)for(;this.buf[this.pos++]>127;);else if(R===oo.Bytes)this.pos=this.readVarint()+this.pos;else if(R===oo.Fixed32)this.pos+=4;else if(R===oo.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+R)},writeTag:function(L,R){this.writeVarint(L<<3|R)},realloc:function(L){for(var R=this.length||16;R<this.pos+L;)R*=2;if(R!==this.length){var H=new Uint8Array(R);H.set(this.buf),this.buf=H,this.length=R}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(L){this.realloc(4),Rh(this.buf,L,this.pos),this.pos+=4},writeSFixed32:function(L){this.realloc(4),Rh(this.buf,L,this.pos),this.pos+=4},writeFixed64:function(L){this.realloc(8),Rh(this.buf,L&-1,this.pos),Rh(this.buf,Math.floor(L*ix),this.pos+4),this.pos+=8},writeSFixed64:function(L){this.realloc(8),Rh(this.buf,L&-1,this.pos),Rh(this.buf,Math.floor(L*ix),this.pos+4),this.pos+=8},writeVarint:function(L){if(L=+L||0,L>268435455||L<0){cS(L,this);return}this.realloc(4),this.buf[this.pos++]=L&127|(L>127?128:0),!(L<=127)&&(this.buf[this.pos++]=(L>>>=7)&127|(L>127?128:0),!(L<=127)&&(this.buf[this.pos++]=(L>>>=7)&127|(L>127?128:0),!(L<=127)&&(this.buf[this.pos++]=L>>>7&127)))},writeSVarint:function(L){this.writeVarint(L<0?-L*2-1:L*2)},writeBoolean:function(L){this.writeVarint(Boolean(L))},writeString:function(L){L=String(L),this.realloc(L.length*4),this.pos++;var R=this.pos;this.pos=SS(this.buf,L,this.pos);var H=this.pos-R;H>=128&&sx(R,H,this),this.pos=R-1,this.writeVarint(H),this.pos+=H},writeFloat:function(L){this.realloc(4),id.write(this.buf,L,this.pos,!0,23,4),this.pos+=4},writeDouble:function(L){this.realloc(8),id.write(this.buf,L,this.pos,!0,52,8),this.pos+=8},writeBytes:function(L){var R=L.length;this.writeVarint(R),this.realloc(R);for(var H=0;H<R;H++)this.buf[this.pos++]=L[H]},writeRawMessage:function(L,R){this.pos++;var H=this.pos;L(R,this);var ne=this.pos-H;ne>=128&&sx(H,ne,this),this.pos=H-1,this.writeVarint(ne),this.pos+=ne},writeMessage:function(L,R,H){this.writeTag(L,oo.Bytes),this.writeRawMessage(R,H)},writePackedVarint:function(L,R){R.length&&this.writeMessage(L,pS,R)},writePackedSVarint:function(L,R){R.length&&this.writeMessage(L,dS,R)},writePackedBoolean:function(L,R){R.length&&this.writeMessage(L,yS,R)},writePackedFloat:function(L,R){R.length&&this.writeMessage(L,gS,R)},writePackedDouble:function(L,R){R.length&&this.writeMessage(L,mS,R)},writePackedFixed32:function(L,R){R.length&&this.writeMessage(L,xS,R)},writePackedSFixed32:function(L,R){R.length&&this.writeMessage(L,bS,R)},writePackedFixed64:function(L,R){R.length&&this.writeMessage(L,_S,R)},writePackedSFixed64:function(L,R){R.length&&this.writeMessage(L,wS,R)},writeBytesField:function(L,R){this.writeTag(L,oo.Bytes),this.writeBytes(R)},writeFixed32Field:function(L,R){this.writeTag(L,oo.Fixed32),this.writeFixed32(R)},writeSFixed32Field:function(L,R){this.writeTag(L,oo.Fixed32),this.writeSFixed32(R)},writeFixed64Field:function(L,R){this.writeTag(L,oo.Fixed64),this.writeFixed64(R)},writeSFixed64Field:function(L,R){this.writeTag(L,oo.Fixed64),this.writeSFixed64(R)},writeVarintField:function(L,R){this.writeTag(L,oo.Varint),this.writeVarint(R)},writeSVarintField:function(L,R){this.writeTag(L,oo.Varint),this.writeSVarint(R)},writeStringField:function(L,R){this.writeTag(L,oo.Bytes),this.writeString(R)},writeFloatField:function(L,R){this.writeTag(L,oo.Fixed32),this.writeFloat(R)},writeDoubleField:function(L,R){this.writeTag(L,oo.Fixed64),this.writeDouble(R)},writeBooleanField:function(L,R){this.writeVarintField(L,Boolean(R))}};function fS(L,R,H){var ne=H.buf,pe,be;if(be=ne[H.pos++],pe=(be&112)>>4,be<128||(be=ne[H.pos++],pe|=(be&127)<<3,be<128)||(be=ne[H.pos++],pe|=(be&127)<<10,be<128)||(be=ne[H.pos++],pe|=(be&127)<<17,be<128)||(be=ne[H.pos++],pe|=(be&127)<<24,be<128)||(be=ne[H.pos++],pe|=(be&1)<<31,be<128))return Ph(L,pe,R);throw new Error("Expected varint not more than 10 bytes")}function uc(L){return L.type===oo.Bytes?L.readVarint()+L.pos:L.pos+1}function Ph(L,R,H){return H?R*4294967296+(L>>>0):(R>>>0)*4294967296+(L>>>0)}function cS(L,R){var H,ne;if(L>=0?(H=L%4294967296|0,ne=L/4294967296|0):(H=~(-L%4294967296),ne=~(-L/4294967296),H^4294967295?H=H+1|0:(H=0,ne=ne+1|0)),L>=18446744073709552e3||L<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");R.realloc(10),hS(H,ne,R),vS(ne,R)}function hS(L,R,H){H.buf[H.pos++]=L&127|128,L>>>=7,H.buf[H.pos++]=L&127|128,L>>>=7,H.buf[H.pos++]=L&127|128,L>>>=7,H.buf[H.pos++]=L&127|128,L>>>=7,H.buf[H.pos]=L&127}function vS(L,R){var H=(L&7)<<4;R.buf[R.pos++]|=H|((L>>>=3)?128:0),!!L&&(R.buf[R.pos++]=L&127|((L>>>=7)?128:0),!!L&&(R.buf[R.pos++]=L&127|((L>>>=7)?128:0),!!L&&(R.buf[R.pos++]=L&127|((L>>>=7)?128:0),!!L&&(R.buf[R.pos++]=L&127|((L>>>=7)?128:0),!!L&&(R.buf[R.pos++]=L&127)))))}function sx(L,R,H){var ne=R<=16383?1:R<=2097151?2:R<=268435455?3:Math.floor(Math.log(R)/(Math.LN2*7));H.realloc(ne);for(var pe=H.pos-1;pe>=L;pe--)H.buf[pe+ne]=H.buf[pe]}function pS(L,R){for(var H=0;H<L.length;H++)R.writeVarint(L[H])}function dS(L,R){for(var H=0;H<L.length;H++)R.writeSVarint(L[H])}function gS(L,R){for(var H=0;H<L.length;H++)R.writeFloat(L[H])}function mS(L,R){for(var H=0;H<L.length;H++)R.writeDouble(L[H])}function yS(L,R){for(var H=0;H<L.length;H++)R.writeBoolean(L[H])}function xS(L,R){for(var H=0;H<L.length;H++)R.writeFixed32(L[H])}function bS(L,R){for(var H=0;H<L.length;H++)R.writeSFixed32(L[H])}function _S(L,R){for(var H=0;H<L.length;H++)R.writeFixed64(L[H])}function wS(L,R){for(var H=0;H<L.length;H++)R.writeSFixed64(L[H])}function sd(L,R){return(L[R]|L[R+1]<<8|L[R+2]<<16)+L[R+3]*16777216}function Rh(L,R,H){L[H]=R,L[H+1]=R>>>8,L[H+2]=R>>>16,L[H+3]=R>>>24}function lx(L,R){return(L[R]|L[R+1]<<8|L[R+2]<<16)+(L[R+3]<<24)}function TS(L,R,H){for(var ne="",pe=R;pe<H;){var be=L[pe],Se=null,ze=be>239?4:be>223?3:be>191?2:1;if(pe+ze>H)break;var tt,ct,mt;ze===1?be<128&&(Se=be):ze===2?(tt=L[pe+1],(tt&192)==128&&(Se=(be&31)<<6|tt&63,Se<=127&&(Se=null))):ze===3?(tt=L[pe+1],ct=L[pe+2],(tt&192)==128&&(ct&192)==128&&(Se=(be&15)<<12|(tt&63)<<6|ct&63,(Se<=2047||Se>=55296&&Se<=57343)&&(Se=null))):ze===4&&(tt=L[pe+1],ct=L[pe+2],mt=L[pe+3],(tt&192)==128&&(ct&192)==128&&(mt&192)==128&&(Se=(be&15)<<18|(tt&63)<<12|(ct&63)<<6|mt&63,(Se<=65535||Se>=1114112)&&(Se=null))),Se===null?(Se=65533,ze=1):Se>65535&&(Se-=65536,ne+=String.fromCharCode(Se>>>10&1023|55296),Se=56320|Se&1023),ne+=String.fromCharCode(Se),pe+=ze}return ne}function AS(L,R,H){return ox.decode(L.subarray(R,H))}function SS(L,R,H){for(var ne=0,pe,be;ne<R.length;ne++){if(pe=R.charCodeAt(ne),pe>55295&&pe<57344)if(be)if(pe<56320){L[H++]=239,L[H++]=191,L[H++]=189,be=pe;continue}else pe=be-55296<<10|pe-56320|65536,be=null;else{pe>56319||ne+1===R.length?(L[H++]=239,L[H++]=191,L[H++]=189):be=pe;continue}else be&&(L[H++]=239,L[H++]=191,L[H++]=189,be=null);pe<128?L[H++]=pe:(pe<2048?L[H++]=pe>>6|192:(pe<65536?L[H++]=pe>>12|224:(L[H++]=pe>>18|240,L[H++]=pe>>12&63|128),L[H++]=pe>>6&63|128),L[H++]=pe&63|128)}return H}var kg=3;function MS(L,R,H){L===1&&H.readMessage(kS,R)}function kS(L,R,H){if(L===3){var ne=H.readMessage(CS,{}),pe=ne.id,be=ne.bitmap,Se=ne.width,ze=ne.height,tt=ne.left,ct=ne.top,mt=ne.advance;R.push({id:pe,bitmap:new $c({width:Se+2*kg,height:ze+2*kg},be),metrics:{width:Se,height:ze,left:tt,top:ct,advance:mt}})}}function CS(L,R,H){L===1?R.id=H.readVarint():L===2?R.bitmap=H.readBytes():L===3?R.width=H.readVarint():L===4?R.height=H.readVarint():L===5?R.left=H.readSVarint():L===6?R.top=H.readSVarint():L===7&&(R.advance=H.readVarint())}function ES(L){return new od(L).readFields(MS,[])}var ux=kg;function fx(L){for(var R=0,H=0,ne=0,pe=L;ne<pe.length;ne+=1){var be=pe[ne];R+=be.w*be.h,H=Math.max(H,be.w)}L.sort(function(hn,rn){return rn.h-hn.h});for(var Se=Math.max(Math.ceil(Math.sqrt(R/.95)),H),ze=[{x:0,y:0,w:Se,h:1/0}],tt=0,ct=0,mt=0,It=L;mt<It.length;mt+=1)for(var Kt=It[mt],Wt=ze.length-1;Wt>=0;Wt--){var cr=ze[Wt];if(!(Kt.w>cr.w||Kt.h>cr.h)){if(Kt.x=cr.x,Kt.y=cr.y,ct=Math.max(ct,Kt.y+Kt.h),tt=Math.max(tt,Kt.x+Kt.w),Kt.w===cr.w&&Kt.h===cr.h){var Br=ze.pop();Wt<ze.length&&(ze[Wt]=Br)}else Kt.h===cr.h?(cr.x+=Kt.w,cr.w-=Kt.w):Kt.w===cr.w?(cr.y+=Kt.h,cr.h-=Kt.h):(ze.push({x:cr.x+Kt.w,y:cr.y,w:cr.w-Kt.w,h:Kt.h}),cr.y+=Kt.h,cr.h-=Kt.h);break}}return{w:tt,h:ct,fill:R/(tt*ct)||0}}var Xl=1,ld=function(R,H){var ne=H.pixelRatio,pe=H.version,be=H.stretchX,Se=H.stretchY,ze=H.content;this.paddedRect=R,this.pixelRatio=ne,this.stretchX=be,this.stretchY=Se,this.content=ze,this.version=pe},Uv={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Uv.tl.get=function(){return[this.paddedRect.x+Xl,this.paddedRect.y+Xl]},Uv.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-Xl,this.paddedRect.y+this.paddedRect.h-Xl]},Uv.tlbr.get=function(){return this.tl.concat(this.br)},Uv.displaySize.get=function(){return[(this.paddedRect.w-Xl*2)/this.pixelRatio,(this.paddedRect.h-Xl*2)/this.pixelRatio]},Object.defineProperties(ld.prototype,Uv);var Vv=function(R,H){var ne={},pe={};this.haveRenderCallbacks=[];var be=[];this.addImages(R,ne,be),this.addImages(H,pe,be);var Se=fx(be),ze=Se.w,tt=Se.h,ct=new Il({width:ze||1,height:tt||1});for(var mt in R){var It=R[mt],Kt=ne[mt].paddedRect;Il.copy(It.data,ct,{x:0,y:0},{x:Kt.x+Xl,y:Kt.y+Xl},It.data)}for(var Wt in H){var cr=H[Wt],Br=pe[Wt].paddedRect,hn=Br.x+Xl,rn=Br.y+Xl,kn=cr.data.width,_n=cr.data.height;Il.copy(cr.data,ct,{x:0,y:0},{x:hn,y:rn},cr.data),Il.copy(cr.data,ct,{x:0,y:_n-1},{x:hn,y:rn-1},{width:kn,height:1}),Il.copy(cr.data,ct,{x:0,y:0},{x:hn,y:rn+_n},{width:kn,height:1}),Il.copy(cr.data,ct,{x:kn-1,y:0},{x:hn-1,y:rn},{width:1,height:_n}),Il.copy(cr.data,ct,{x:0,y:0},{x:hn+kn,y:rn},{width:1,height:_n})}this.image=ct,this.iconPositions=ne,this.patternPositions=pe};Vv.prototype.addImages=function(R,H,ne){for(var pe in R){var be=R[pe],Se={x:0,y:0,w:be.data.width+2*Xl,h:be.data.height+2*Xl};ne.push(Se),H[pe]=new ld(Se,be),be.hasRenderCallback&&this.haveRenderCallbacks.push(pe)}},Vv.prototype.patchUpdatedImages=function(R,H){R.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var ne in R.updatedImages)this.patchUpdatedImage(this.iconPositions[ne],R.getImage(ne),H),this.patchUpdatedImage(this.patternPositions[ne],R.getImage(ne),H)},Vv.prototype.patchUpdatedImage=function(R,H,ne){if(!(!R||!H)&&R.version!==H.version){R.version=H.version;var pe=R.tl,be=pe[0],Se=pe[1];ne.update(H.data,void 0,{x:be,y:Se})}},Be("ImagePosition",ld),Be("ImageAtlas",Vv);var cu={horizontal:1,vertical:2,horizontalOnly:3},Hv=-17;function LS(L){for(var R=0,H=L;R<H.length;R+=1){var ne=H[R];if(ne.positionedGlyphs.length!==0)return!1}return!0}var cx=57344,hx=63743,Dh=function(){this.scale=1,this.fontStack="",this.imageName=null};Dh.forText=function(R,H){var ne=new Dh;return ne.scale=R||1,ne.fontStack=H,ne},Dh.forImage=function(R){var H=new Dh;return H.imageName=R,H};var Qs=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};Qs.fromFeature=function(R,H){for(var ne=new Qs,pe=0;pe<R.sections.length;pe++){var be=R.sections[pe];be.image?ne.addImageSection(be):ne.addTextSection(be,H)}return ne},Qs.prototype.length=function(){return this.text.length},Qs.prototype.getSection=function(R){return this.sections[this.sectionIndex[R]]},Qs.prototype.getSectionIndex=function(R){return this.sectionIndex[R]},Qs.prototype.getCharCode=function(R){return this.text.charCodeAt(R)},Qs.prototype.verticalizePunctuation=function(){this.text=oS(this.text)},Qs.prototype.trim=function(){for(var R=0,H=0;H<this.text.length&&Yf[this.text.charCodeAt(H)];H++)R++;for(var ne=this.text.length,pe=this.text.length-1;pe>=0&&pe>=R&&Yf[this.text.charCodeAt(pe)];pe--)ne--;this.text=this.text.substring(R,ne),this.sectionIndex=this.sectionIndex.slice(R,ne)},Qs.prototype.substring=function(R,H){var ne=new Qs;return ne.text=this.text.substring(R,H),ne.sectionIndex=this.sectionIndex.slice(R,H),ne.sections=this.sections,ne},Qs.prototype.toString=function(){return this.text},Qs.prototype.getMaxScale=function(){var R=this;return this.sectionIndex.reduce(function(H,ne){return Math.max(H,R.sections[ne].scale)},0)},Qs.prototype.addTextSection=function(R,H){this.text+=R.text,this.sections.push(Dh.forText(R.scale,R.fontStack||H));for(var ne=this.sections.length-1,pe=0;pe<R.text.length;++pe)this.sectionIndex.push(ne)},Qs.prototype.addImageSection=function(R){var H=R.image?R.image.name:"";if(H.length===0){V("Can't add FormattedSection with an empty image.");return}var ne=this.getNextImageSectionCharCode();if(!ne){V("Reached maximum number of images "+(hx-cx+2));return}this.text+=String.fromCharCode(ne),this.sections.push(Dh.forImage(H)),this.sectionIndex.push(this.sections.length-1)},Qs.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=hx?null:++this.imageSectionID:(this.imageSectionID=cx,this.imageSectionID)};function PS(L,R){for(var H=[],ne=L.text,pe=0,be=0,Se=R;be<Se.length;be+=1){var ze=Se[be];H.push(L.substring(pe,ze)),pe=ze}return pe<ne.length&&H.push(L.substring(pe,ne.length)),H}function ud(L,R,H,ne,pe,be,Se,ze,tt,ct,mt,It,Kt,Wt,cr,Br){var hn=Qs.fromFeature(L,pe);It===cu.vertical&&hn.verticalizePunctuation();var rn,kn=Ka.processBidirectionalText,_n=Ka.processStyledBidirectionalText;if(kn&&hn.sections.length===1){rn=[];for(var Sn=kn(hn.toString(),Cg(hn,ct,be,R,ne,Wt,cr)),zn=0,Kn=Sn;zn<Kn.length;zn+=1){var fa=Kn[zn],sa=new Qs;sa.text=fa,sa.sections=hn.sections;for(var Ba=0;Ba<fa.length;Ba++)sa.sectionIndex.push(0);rn.push(sa)}}else if(_n){rn=[];for(var ka=_n(hn.text,hn.sectionIndex,Cg(hn,ct,be,R,ne,Wt,cr)),La=0,ni=ka;La<ni.length;La+=1){var Fa=ni[La],Oa=new Qs;Oa.text=Fa[0],Oa.sectionIndex=Fa[1],Oa.sections=hn.sections,rn.push(Oa)}}else rn=PS(hn,Cg(hn,ct,be,R,ne,Wt,cr));var hi=[],ti={positionedLines:hi,text:hn.toString(),top:mt[1],bottom:mt[1],left:mt[0],right:mt[0],writingMode:It,iconsInText:!1,verticalizable:!1};return IS(ti,R,H,ne,rn,Se,ze,tt,It,ct,Kt,Br),LS(hi)?!1:ti}var Yf={};Yf[9]=!0,Yf[10]=!0,Yf[11]=!0,Yf[12]=!0,Yf[13]=!0,Yf[32]=!0;var Zl={};Zl[10]=!0,Zl[32]=!0,Zl[38]=!0,Zl[40]=!0,Zl[41]=!0,Zl[43]=!0,Zl[45]=!0,Zl[47]=!0,Zl[173]=!0,Zl[183]=!0,Zl[8203]=!0,Zl[8208]=!0,Zl[8211]=!0,Zl[8231]=!0;function vx(L,R,H,ne,pe,be){if(R.imageName){var tt=ne[R.imageName];return tt?tt.displaySize[0]*R.scale*Ls/be+pe:0}else{var Se=H[R.fontStack],ze=Se&&Se[L];return ze?ze.metrics.advance*R.scale+pe:0}}function RS(L,R,H,ne,pe,be){for(var Se=0,ze=0;ze<L.length();ze++){var tt=L.getSection(ze);Se+=vx(L.getCharCode(ze),tt,ne,pe,R,be)}var ct=Math.max(1,Math.ceil(Se/H));return Se/ct}function px(L,R,H,ne){var pe=Math.pow(L-R,2);return ne?L<R?pe/2:pe*2:pe+Math.abs(H)*H}function DS(L,R,H){var ne=0;return L===10&&(ne-=1e4),H&&(ne+=150),(L===40||L===65288)&&(ne+=50),(R===41||R===65289)&&(ne+=50),ne}function dx(L,R,H,ne,pe,be){for(var Se=null,ze=px(R,H,pe,be),tt=0,ct=ne;tt<ct.length;tt+=1){var mt=ct[tt],It=R-mt.x,Kt=px(It,H,pe,be)+mt.badness;Kt<=ze&&(Se=mt,ze=Kt)}return{index:L,x:R,priorBreak:Se,badness:ze}}function gx(L){return L?gx(L.priorBreak).concat(L.index):[]}function Cg(L,R,H,ne,pe,be,Se){if(be!=="point")return[];if(!L)return[];for(var ze=[],tt=RS(L,R,H,ne,pe,Se),ct=L.text.indexOf("\u200B")>=0,mt=0,It=0;It<L.length();It++){var Kt=L.getSection(It),Wt=L.getCharCode(It);if(Yf[Wt]||(mt+=vx(Wt,Kt,ne,pe,R,Se)),It<L.length()-1){var cr=Cr(Wt);(Zl[Wt]||cr||Kt.imageName)&&ze.push(dx(It+1,mt,tt,ze,DS(Wt,L.getCharCode(It+1),cr&&ct),!1))}}return gx(dx(L.length(),mt,tt,ze,0,!0))}function Eg(L){var R=.5,H=.5;switch(L){case"right":case"top-right":case"bottom-right":R=1;break;case"left":case"top-left":case"bottom-left":R=0;break}switch(L){case"bottom":case"bottom-right":case"bottom-left":H=1;break;case"top":case"top-right":case"top-left":H=0;break}return{horizontalAlign:R,verticalAlign:H}}function IS(L,R,H,ne,pe,be,Se,ze,tt,ct,mt,It){for(var Kt=0,Wt=Hv,cr=0,Br=0,hn=ze==="right"?1:ze==="left"?0:.5,rn=0,kn=0,_n=pe;kn<_n.length;kn+=1){var Sn=_n[kn];Sn.trim();var zn=Sn.getMaxScale(),Kn=(zn-1)*Ls,fa={positionedGlyphs:[],lineOffset:0};L.positionedLines[rn]=fa;var sa=fa.positionedGlyphs,Ba=0;if(!Sn.length()){Wt+=be,++rn;continue}for(var ka=0;ka<Sn.length();ka++){var La=Sn.getSection(ka),ni=Sn.getSectionIndex(ka),Fa=Sn.getCharCode(ka),Oa=0,hi=null,ti=null,Ei=null,Ki=Ls,Li=!(tt===cu.horizontal||!mt&&!Yr(Fa)||mt&&(Yf[Fa]||vn(Fa)));if(La.imageName){var zo=ne[La.imageName];if(!zo)continue;Ei=La.imageName,L.iconsInText=L.iconsInText||!0,ti=zo.paddedRect;var Go=zo.displaySize;La.scale=La.scale*Ls/It,hi={width:Go[0],height:Go[1],left:Xl,top:-ux,advance:Li?Go[1]:Go[0]};var ms=Ls-Go[1]*La.scale;Oa=Kn+ms,Ki=hi.advance;var ns=Li?Go[0]*La.scale-Ls*zn:Go[1]*La.scale-Ls*zn;ns>0&&ns>Ba&&(Ba=ns)}else{var Pi=H[La.fontStack],Si=Pi&&Pi[Fa];if(Si&&Si.rect)ti=Si.rect,hi=Si.metrics;else{var ro=R[La.fontStack],so=ro&&ro[Fa];if(!so)continue;hi=so.metrics}Oa=(zn-La.scale)*Ls}Li?(L.verticalizable=!0,sa.push({glyph:Fa,imageName:Ei,x:Kt,y:Wt+Oa,vertical:Li,scale:La.scale,fontStack:La.fontStack,sectionIndex:ni,metrics:hi,rect:ti}),Kt+=Ki*La.scale+ct):(sa.push({glyph:Fa,imageName:Ei,x:Kt,y:Wt+Oa,vertical:Li,scale:La.scale,fontStack:La.fontStack,sectionIndex:ni,metrics:hi,rect:ti}),Kt+=hi.advance*La.scale+ct)}if(sa.length!==0){var qs=Kt-ct;cr=Math.max(qs,cr),FS(sa,0,sa.length-1,hn,Ba)}Kt=0;var el=be*zn+Ba;fa.lineOffset=Math.max(Ba,Kn),Wt+=el,Br=Math.max(el,Br),++rn}var ys=Wt-Hv,dl=Eg(Se),ml=dl.horizontalAlign,us=dl.verticalAlign;zS(L.positionedLines,hn,ml,us,cr,Br,be,ys,pe.length),L.top+=-us*ys,L.bottom=L.top+ys,L.left+=-ml*cr,L.right=L.left+cr}function FS(L,R,H,ne,pe){if(!(!ne&&!pe))for(var be=L[H],Se=be.metrics.advance*be.scale,ze=(L[H].x+Se)*ne,tt=R;tt<=H;tt++)L[tt].x-=ze,L[tt].y+=pe}function zS(L,R,H,ne,pe,be,Se,ze,tt){var ct=(R-H)*pe,mt=0;be!==Se?mt=-ze*ne-Hv:mt=(-ne*tt+.5)*Se;for(var It=0,Kt=L;It<Kt.length;It+=1)for(var Wt=Kt[It],cr=0,Br=Wt.positionedGlyphs;cr<Br.length;cr+=1){var hn=Br[cr];hn.x+=ct,hn.y+=mt}}function OS(L,R,H){var ne=Eg(H),pe=ne.horizontalAlign,be=ne.verticalAlign,Se=R[0],ze=R[1],tt=Se-L.displaySize[0]*pe,ct=tt+L.displaySize[0],mt=ze-L.displaySize[1]*be,It=mt+L.displaySize[1];return{image:L,top:mt,bottom:It,left:tt,right:ct}}function mx(L,R,H,ne,pe,be){var Se=L.image,ze;if(Se.content){var tt=Se.content,ct=Se.pixelRatio||1;ze=[tt[0]/ct,tt[1]/ct,Se.displaySize[0]-tt[2]/ct,Se.displaySize[1]-tt[3]/ct]}var mt=R.left*be,It=R.right*be,Kt,Wt,cr,Br;H==="width"||H==="both"?(Br=pe[0]+mt-ne[3],Wt=pe[0]+It+ne[1]):(Br=pe[0]+(mt+It-Se.displaySize[0])/2,Wt=Br+Se.displaySize[0]);var hn=R.top*be,rn=R.bottom*be;return H==="height"||H==="both"?(Kt=pe[1]+hn-ne[0],cr=pe[1]+rn+ne[2]):(Kt=pe[1]+(hn+rn-Se.displaySize[1])/2,cr=Kt+Se.displaySize[1]),{image:Se,top:Kt,right:Wt,bottom:cr,left:Br,collisionPadding:ze}}var Ih=function(L){function R(H,ne,pe,be){L.call(this,H,ne),this.angle=pe,be!==void 0&&(this.segment=be)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.clone=function(){return new R(this.x,this.y,this.angle,this.segment)},R}(f);Be("Anchor",Ih);var bf=128;function Lg(L,R){var H=R.expression;if(H.kind==="constant"){var ne=H.evaluate(new ui(L+1));return{kind:"constant",layoutSize:ne}}else{if(H.kind==="source")return{kind:"source"};for(var pe=H.zoomStops,be=H.interpolationType,Se=0;Se<pe.length&&pe[Se]<=L;)Se++;Se=Math.max(0,Se-1);for(var ze=Se;ze<pe.length&&pe[ze]<L+1;)ze++;ze=Math.min(pe.length-1,ze);var tt=pe[Se],ct=pe[ze];if(H.kind==="composite")return{kind:"composite",minZoom:tt,maxZoom:ct,interpolationType:be};var mt=H.evaluate(new ui(tt)),It=H.evaluate(new ui(ct));return{kind:"camera",minZoom:tt,maxZoom:ct,minSize:mt,maxSize:It,interpolationType:be}}}function yx(L,R,H){var ne=R.uSize,pe=R.uSizeT,be=H.lowerSize,Se=H.upperSize;return L.kind==="source"?be/bf:L.kind==="composite"?po(be/bf,Se/bf,pe):ne}function xx(L,R){var H=0,ne=0;if(L.kind==="constant")ne=L.layoutSize;else if(L.kind!=="source"){var pe=L.interpolationType,be=L.minZoom,Se=L.maxZoom,ze=pe?m(go.interpolationFactor(pe,R,be,Se),0,1):0;L.kind==="camera"?ne=po(L.minSize,L.maxSize,ze):H=ze}return{uSizeT:H,uSize:ne}}var BS=Object.freeze({__proto__:null,getSizeData:Lg,evaluateSizeForFeature:yx,evaluateSizeForZoom:xx,SIZE_PACK_FACTOR:bf});function bx(L,R,H,ne,pe){if(R.segment===void 0)return!0;for(var be=R,Se=R.segment+1,ze=0;ze>-H/2;){if(Se--,Se<0)return!1;ze-=L[Se].dist(be),be=L[Se]}ze+=L[Se].dist(L[Se+1]),Se++;for(var tt=[],ct=0;ze<H/2;){var mt=L[Se-1],It=L[Se],Kt=L[Se+1];if(!Kt)return!1;var Wt=mt.angleTo(It)-It.angleTo(Kt);for(Wt=Math.abs((Wt+3*Math.PI)%(Math.PI*2)-Math.PI),tt.push({distance:ze,angleDelta:Wt}),ct+=Wt;ze-tt[0].distance>ne;)ct-=tt.shift().angleDelta;if(ct>pe)return!1;Se++,ze+=It.dist(Kt)}return!0}function _x(L){for(var R=0,H=0;H<L.length-1;H++)R+=L[H].dist(L[H+1]);return R}function wx(L,R,H){return L?3/5*R*H:0}function Tx(L,R){return Math.max(L?L.right-L.left:0,R?R.right-R.left:0)}function NS(L,R,H,ne,pe,be){for(var Se=wx(H,pe,be),ze=Tx(H,ne)*be,tt=0,ct=_x(L)/2,mt=0;mt<L.length-1;mt++){var It=L[mt],Kt=L[mt+1],Wt=It.dist(Kt);if(tt+Wt>ct){var cr=(ct-tt)/Wt,Br=po(It.x,Kt.x,cr),hn=po(It.y,Kt.y,cr),rn=new Ih(Br,hn,Kt.angleTo(It),mt);return rn._round(),!Se||bx(L,rn,ze,Se,R)?rn:void 0}tt+=Wt}}function US(L,R,H,ne,pe,be,Se,ze,tt){var ct=wx(ne,be,Se),mt=Tx(ne,pe),It=mt*Se,Kt=L[0].x===0||L[0].x===tt||L[0].y===0||L[0].y===tt;R-It<R/4&&(R=It+R/4);var Wt=be*2,cr=Kt?R/2*ze%R:(mt/2+Wt)*Se*ze%R;return Ax(L,cr,R,ct,H,It,Kt,!1,tt)}function Ax(L,R,H,ne,pe,be,Se,ze,tt){for(var ct=be/2,mt=_x(L),It=0,Kt=R-H,Wt=[],cr=0;cr<L.length-1;cr++){for(var Br=L[cr],hn=L[cr+1],rn=Br.dist(hn),kn=hn.angleTo(Br);Kt+H<It+rn;){Kt+=H;var _n=(Kt-It)/rn,Sn=po(Br.x,hn.x,_n),zn=po(Br.y,hn.y,_n);if(Sn>=0&&Sn<tt&&zn>=0&&zn<tt&&Kt-ct>=0&&Kt+ct<=mt){var Kn=new Ih(Sn,zn,kn,cr);Kn._round(),(!ne||bx(L,Kn,be,ne,pe))&&Wt.push(Kn)}}It+=rn}return!ze&&!Wt.length&&!Se&&(Wt=Ax(L,It/2,H,ne,pe,be,Se,!0,tt)),Wt}function Sx(L,R,H,ne,pe){for(var be=[],Se=0;Se<L.length;Se++)for(var ze=L[Se],tt=void 0,ct=0;ct<ze.length-1;ct++){var mt=ze[ct],It=ze[ct+1];mt.x<R&&It.x<R||(mt.x<R?mt=new f(R,mt.y+(It.y-mt.y)*((R-mt.x)/(It.x-mt.x)))._round():It.x<R&&(It=new f(R,mt.y+(It.y-mt.y)*((R-mt.x)/(It.x-mt.x)))._round()),!(mt.y<H&&It.y<H)&&(mt.y<H?mt=new f(mt.x+(It.x-mt.x)*((H-mt.y)/(It.y-mt.y)),H)._round():It.y<H&&(It=new f(mt.x+(It.x-mt.x)*((H-mt.y)/(It.y-mt.y)),H)._round()),!(mt.x>=ne&&It.x>=ne)&&(mt.x>=ne?mt=new f(ne,mt.y+(It.y-mt.y)*((ne-mt.x)/(It.x-mt.x)))._round():It.x>=ne&&(It=new f(ne,mt.y+(It.y-mt.y)*((ne-mt.x)/(It.x-mt.x)))._round()),!(mt.y>=pe&&It.y>=pe)&&(mt.y>=pe?mt=new f(mt.x+(It.x-mt.x)*((pe-mt.y)/(It.y-mt.y)),pe)._round():It.y>=pe&&(It=new f(mt.x+(It.x-mt.x)*((pe-mt.y)/(It.y-mt.y)),pe)._round()),(!tt||!mt.equals(tt[tt.length-1]))&&(tt=[mt],be.push(tt)),tt.push(It)))))}return be}var Fh=Xl;function Mx(L,R,H,ne){var pe=[],be=L.image,Se=be.pixelRatio,ze=be.paddedRect.w-2*Fh,tt=be.paddedRect.h-2*Fh,ct=L.right-L.left,mt=L.bottom-L.top,It=be.stretchX||[[0,ze]],Kt=be.stretchY||[[0,tt]],Wt=function(Pi,Si){return Pi+Si[1]-Si[0]},cr=It.reduce(Wt,0),Br=Kt.reduce(Wt,0),hn=ze-cr,rn=tt-Br,kn=0,_n=cr,Sn=0,zn=Br,Kn=0,fa=hn,sa=0,Ba=rn;if(be.content&&ne){var ka=be.content;kn=fd(It,0,ka[0]),Sn=fd(Kt,0,ka[1]),_n=fd(It,ka[0],ka[2]),zn=fd(Kt,ka[1],ka[3]),Kn=ka[0]-kn,sa=ka[1]-Sn,fa=ka[2]-ka[0]-_n,Ba=ka[3]-ka[1]-zn}var La=function(Pi,Si,ro,so){var zo=cd(Pi.stretch-kn,_n,ct,L.left),Go=hd(Pi.fixed-Kn,fa,Pi.stretch,cr),ms=cd(Si.stretch-Sn,zn,mt,L.top),ns=hd(Si.fixed-sa,Ba,Si.stretch,Br),qs=cd(ro.stretch-kn,_n,ct,L.left),el=hd(ro.fixed-Kn,fa,ro.stretch,cr),ys=cd(so.stretch-Sn,zn,mt,L.top),dl=hd(so.fixed-sa,Ba,so.stretch,Br),ml=new f(zo,ms),us=new f(qs,ms),yl=new f(qs,ys),hu=new f(zo,ys),hc=new f(Go/Se,ns/Se),Lc=new f(el/Se,dl/Se),Pc=R*Math.PI/180;if(Pc){var Rc=Math.sin(Pc),Gh=Math.cos(Pc),Ju=[Gh,-Rc,Rc,Gh];ml._matMult(Ju),us._matMult(Ju),hu._matMult(Ju),yl._matMult(Ju)}var yd=Pi.stretch+Pi.fixed,Bg=ro.stretch+ro.fixed,xd=Si.stretch+Si.fixed,Ng=so.stretch+so.fixed,Lu={x:be.paddedRect.x+Fh+yd,y:be.paddedRect.y+Fh+xd,w:Bg-yd,h:Ng-xd},Wh=fa/Se/ct,bd=Ba/Se/mt;return{tl:ml,tr:us,bl:hu,br:yl,tex:Lu,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:hc,pixelOffsetBR:Lc,minFontScaleX:Wh,minFontScaleY:bd,isSDF:H}};if(!ne||!be.stretchX&&!be.stretchY)pe.push(La({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:ze+1},{fixed:0,stretch:tt+1}));else for(var ni=kx(It,hn,cr),Fa=kx(Kt,rn,Br),Oa=0;Oa<ni.length-1;Oa++)for(var hi=ni[Oa],ti=ni[Oa+1],Ei=0;Ei<Fa.length-1;Ei++){var Ki=Fa[Ei],Li=Fa[Ei+1];pe.push(La(hi,Ki,ti,Li))}return pe}function fd(L,R,H){for(var ne=0,pe=0,be=L;pe<be.length;pe+=1){var Se=be[pe];ne+=Math.max(R,Math.min(H,Se[1]))-Math.max(R,Math.min(H,Se[0]))}return ne}function kx(L,R,H){for(var ne=[{fixed:-Fh,stretch:0}],pe=0,be=L;pe<be.length;pe+=1){var Se=be[pe],ze=Se[0],tt=Se[1],ct=ne[ne.length-1];ne.push({fixed:ze-ct.stretch,stretch:ct.stretch}),ne.push({fixed:ze-ct.stretch,stretch:ct.stretch+(tt-ze)})}return ne.push({fixed:R+Fh,stretch:H}),ne}function cd(L,R,H,ne){return L/R*H+ne}function hd(L,R,H,ne){return L-R*H/ne}function VS(L,R,H,ne,pe,be,Se,ze){for(var tt=ne.layout.get("text-rotate").evaluate(be,{})*Math.PI/180,ct=[],mt=0,It=R.positionedLines;mt<It.length;mt+=1)for(var Kt=It[mt],Wt=0,cr=Kt.positionedGlyphs;Wt<cr.length;Wt+=1){var Br=cr[Wt];if(!!Br.rect){var hn=Br.rect||{},rn=1,kn=ux+rn,_n=!0,Sn=1,zn=0,Kn=(pe||ze)&&Br.vertical,fa=Br.metrics.advance*Br.scale/2;if(ze&&R.verticalizable){var sa=(Br.scale-1)*Ls,Ba=(Ls-Br.metrics.width*Br.scale)/2;zn=Kt.lineOffset/2-(Br.imageName?-Ba:sa)}if(Br.imageName){var ka=Se[Br.imageName];_n=ka.sdf,Sn=ka.pixelRatio,kn=Xl/Sn}var La=pe?[Br.x+fa,Br.y]:[0,0],ni=pe?[0,0]:[Br.x+fa+H[0],Br.y+H[1]-zn],Fa=[0,0];Kn&&(Fa=ni,ni=[0,0]);var Oa=(Br.metrics.left-kn)*Br.scale-fa+ni[0],hi=(-Br.metrics.top-kn)*Br.scale+ni[1],ti=Oa+hn.w*Br.scale/Sn,Ei=hi+hn.h*Br.scale/Sn,Ki=new f(Oa,hi),Li=new f(ti,hi),Pi=new f(Oa,Ei),Si=new f(ti,Ei);if(Kn){var ro=new f(-fa,fa-Hv),so=-Math.PI/2,zo=Ls/2-fa,Go=Br.imageName?zo:0,ms=new f(5-Hv-zo,-Go),ns=new(Function.prototype.bind.apply(f,[null].concat(Fa)));Ki._rotateAround(so,ro)._add(ms)._add(ns),Li._rotateAround(so,ro)._add(ms)._add(ns),Pi._rotateAround(so,ro)._add(ms)._add(ns),Si._rotateAround(so,ro)._add(ms)._add(ns)}if(tt){var qs=Math.sin(tt),el=Math.cos(tt),ys=[el,-qs,qs,el];Ki._matMult(ys),Li._matMult(ys),Pi._matMult(ys),Si._matMult(ys)}var dl=new f(0,0),ml=new f(0,0),us=0,yl=0;ct.push({tl:Ki,tr:Li,bl:Pi,br:Si,tex:hn,writingMode:R.writingMode,glyphOffset:La,sectionIndex:Br.sectionIndex,isSDF:_n,pixelOffsetTL:dl,pixelOffsetBR:ml,minFontScaleX:us,minFontScaleY:yl})}}return ct}var vd=function(R,H,ne,pe,be,Se,ze,tt,ct,mt){if(this.boxStartIndex=R.length,ct){var It=Se.top,Kt=Se.bottom,Wt=Se.collisionPadding;Wt&&(It-=Wt[1],Kt+=Wt[3]);var cr=Kt-It;cr>0&&(cr=Math.max(10,cr),this.circleDiameter=cr)}else{var Br=Se.top*ze-tt,hn=Se.bottom*ze+tt,rn=Se.left*ze-tt,kn=Se.right*ze+tt,_n=Se.collisionPadding;if(_n&&(rn-=_n[0]*ze,Br-=_n[1]*ze,kn+=_n[2]*ze,hn+=_n[3]*ze),mt){var Sn=new f(rn,Br),zn=new f(kn,Br),Kn=new f(rn,hn),fa=new f(kn,hn),sa=mt*Math.PI/180;Sn._rotate(sa),zn._rotate(sa),Kn._rotate(sa),fa._rotate(sa),rn=Math.min(Sn.x,zn.x,Kn.x,fa.x),kn=Math.max(Sn.x,zn.x,Kn.x,fa.x),Br=Math.min(Sn.y,zn.y,Kn.y,fa.y),hn=Math.max(Sn.y,zn.y,Kn.y,fa.y)}R.emplaceBack(H.x,H.y,rn,Br,kn,hn,ne,pe,be)}this.boxEndIndex=R.length},zh=function(R,H){if(R===void 0&&(R=[]),H===void 0&&(H=HS),this.data=R,this.length=this.data.length,this.compare=H,this.length>0)for(var ne=(this.length>>1)-1;ne>=0;ne--)this._down(ne)};zh.prototype.push=function(R){this.data.push(R),this.length++,this._up(this.length-1)},zh.prototype.pop=function(){if(this.length!==0){var R=this.data[0],H=this.data.pop();return this.length--,this.length>0&&(this.data[0]=H,this._down(0)),R}},zh.prototype.peek=function(){return this.data[0]},zh.prototype._up=function(R){for(var H=this,ne=H.data,pe=H.compare,be=ne[R];R>0;){var Se=R-1>>1,ze=ne[Se];if(pe(be,ze)>=0)break;ne[R]=ze,R=Se}ne[R]=be},zh.prototype._down=function(R){for(var H=this,ne=H.data,pe=H.compare,be=this.length>>1,Se=ne[R];R<be;){var ze=(R<<1)+1,tt=ne[ze],ct=ze+1;if(ct<this.length&&pe(ne[ct],tt)<0&&(ze=ct,tt=ne[ct]),pe(tt,Se)>=0)break;ne[R]=tt,R=ze}ne[R]=Se};function HS(L,R){return L<R?-1:L>R?1:0}function GS(L,R,H){R===void 0&&(R=1),H===void 0&&(H=!1);for(var ne=1/0,pe=1/0,be=-1/0,Se=-1/0,ze=L[0],tt=0;tt<ze.length;tt++){var ct=ze[tt];(!tt||ct.x<ne)&&(ne=ct.x),(!tt||ct.y<pe)&&(pe=ct.y),(!tt||ct.x>be)&&(be=ct.x),(!tt||ct.y>Se)&&(Se=ct.y)}var mt=be-ne,It=Se-pe,Kt=Math.min(mt,It),Wt=Kt/2,cr=new zh([],WS);if(Kt===0)return new f(ne,pe);for(var Br=ne;Br<be;Br+=Kt)for(var hn=pe;hn<Se;hn+=Kt)cr.push(new Oh(Br+Wt,hn+Wt,Wt,L));for(var rn=jS(L),kn=cr.length;cr.length;){var _n=cr.pop();(_n.d>rn.d||!rn.d)&&(rn=_n,H&&console.log("found best %d after %d probes",Math.round(1e4*_n.d)/1e4,kn)),!(_n.max-rn.d<=R)&&(Wt=_n.h/2,cr.push(new Oh(_n.p.x-Wt,_n.p.y-Wt,Wt,L)),cr.push(new Oh(_n.p.x+Wt,_n.p.y-Wt,Wt,L)),cr.push(new Oh(_n.p.x-Wt,_n.p.y+Wt,Wt,L)),cr.push(new Oh(_n.p.x+Wt,_n.p.y+Wt,Wt,L)),kn+=4)}return H&&(console.log("num probes: "+kn),console.log("best distance: "+rn.d)),rn.p}function WS(L,R){return R.max-L.max}function Oh(L,R,H,ne){this.p=new f(L,R),this.h=H,this.d=YS(this.p,ne),this.max=this.d+this.h*Math.SQRT2}function YS(L,R){for(var H=!1,ne=1/0,pe=0;pe<R.length;pe++)for(var be=R[pe],Se=0,ze=be.length,tt=ze-1;Se<ze;tt=Se++){var ct=be[Se],mt=be[tt];ct.y>L.y!=mt.y>L.y&&L.x<(mt.x-ct.x)*(L.y-ct.y)/(mt.y-ct.y)+ct.x&&(H=!H),ne=Math.min(ne,mf(L,ct,mt))}return(H?1:-1)*Math.sqrt(ne)}function jS(L){for(var R=0,H=0,ne=0,pe=L[0],be=0,Se=pe.length,ze=Se-1;be<Se;ze=be++){var tt=pe[be],ct=pe[ze],mt=tt.x*ct.y-ct.x*tt.y;H+=(tt.x+ct.x)*mt,ne+=(tt.y+ct.y)*mt,R+=mt*3}return new Oh(H/R,ne/R,0,L)}var Bh=7,Pg=Number.POSITIVE_INFINITY;function Cx(L,R){function H(pe,be){var Se=0,ze=0;be<0&&(be=0);var tt=be/Math.sqrt(2);switch(pe){case"top-right":case"top-left":ze=tt-Bh;break;case"bottom-right":case"bottom-left":ze=-tt+Bh;break;case"bottom":ze=-be+Bh;break;case"top":ze=be-Bh;break}switch(pe){case"top-right":case"bottom-right":Se=-tt;break;case"top-left":case"bottom-left":Se=tt;break;case"left":Se=be;break;case"right":Se=-be;break}return[Se,ze]}function ne(pe,be,Se){var ze=0,tt=0;switch(be=Math.abs(be),Se=Math.abs(Se),pe){case"top-right":case"top-left":case"top":tt=Se-Bh;break;case"bottom-right":case"bottom-left":case"bottom":tt=-Se+Bh;break}switch(pe){case"top-right":case"bottom-right":case"right":ze=-be;break;case"top-left":case"bottom-left":case"left":ze=be;break}return[ze,tt]}return R[1]!==Pg?ne(L,R[0],R[1]):H(L,R[0])}function XS(L,R,H,ne,pe,be,Se){L.createArrays();var ze=512*L.overscaling;L.tilePixelRatio=Ga/ze,L.compareText={},L.iconsNeedLinear=!1;var tt=L.layers[0].layout,ct=L.layers[0]._unevaluatedLayout._values,mt={};if(L.textSizeData.kind==="composite"){var It=L.textSizeData,Kt=It.minZoom,Wt=It.maxZoom;mt.compositeTextSizes=[ct["text-size"].possiblyEvaluate(new ui(Kt),Se),ct["text-size"].possiblyEvaluate(new ui(Wt),Se)]}if(L.iconSizeData.kind==="composite"){var cr=L.iconSizeData,Br=cr.minZoom,hn=cr.maxZoom;mt.compositeIconSizes=[ct["icon-size"].possiblyEvaluate(new ui(Br),Se),ct["icon-size"].possiblyEvaluate(new ui(hn),Se)]}mt.layoutTextSize=ct["text-size"].possiblyEvaluate(new ui(L.zoom+1),Se),mt.layoutIconSize=ct["icon-size"].possiblyEvaluate(new ui(L.zoom+1),Se),mt.textMaxSize=ct["text-size"].possiblyEvaluate(new ui(18));for(var rn=tt.get("text-line-height")*Ls,kn=tt.get("text-rotation-alignment")==="map"&&tt.get("symbol-placement")!=="point",_n=tt.get("text-keep-upright"),Sn=tt.get("text-size"),zn=function(){var sa=fa[Kn],Ba=tt.get("text-font").evaluate(sa,{},Se).join(","),ka=Sn.evaluate(sa,{},Se),La=mt.layoutTextSize.evaluate(sa,{},Se),ni=mt.layoutIconSize.evaluate(sa,{},Se),Fa={horizontal:{},vertical:void 0},Oa=sa.text,hi=[0,0];if(Oa){var ti=Oa.toString(),Ei=tt.get("text-letter-spacing").evaluate(sa,{},Se)*Ls,Ki=tn(ti)?Ei:0,Li=tt.get("text-anchor").evaluate(sa,{},Se),Pi=tt.get("text-variable-anchor");if(!Pi){var Si=tt.get("text-radial-offset").evaluate(sa,{},Se);Si?hi=Cx(Li,[Si*Ls,Pg]):hi=tt.get("text-offset").evaluate(sa,{},Se).map(function(hc){return hc*Ls})}var ro=kn?"center":tt.get("text-justify").evaluate(sa,{},Se),so=tt.get("symbol-placement"),zo=so==="point"?tt.get("text-max-width").evaluate(sa,{},Se)*Ls:0,Go=function(){L.allowVerticalPlacement&&Ar(ti)&&(Fa.vertical=ud(Oa,R,H,pe,Ba,zo,rn,Li,"left",Ki,hi,cu.vertical,!0,so,La,ka))};if(!kn&&Pi){for(var ms=ro==="auto"?Pi.map(function(hc){return Rg(hc)}):[ro],ns=!1,qs=0;qs<ms.length;qs++){var el=ms[qs];if(!Fa.horizontal[el])if(ns)Fa.horizontal[el]=Fa.horizontal[0];else{var ys=ud(Oa,R,H,pe,Ba,zo,rn,"center",el,Ki,hi,cu.horizontal,!1,so,La,ka);ys&&(Fa.horizontal[el]=ys,ns=ys.positionedLines.length===1)}}Go()}else{ro==="auto"&&(ro=Rg(Li));var dl=ud(Oa,R,H,pe,Ba,zo,rn,Li,ro,Ki,hi,cu.horizontal,!1,so,La,ka);dl&&(Fa.horizontal[ro]=dl),Go(),Ar(ti)&&kn&&_n&&(Fa.vertical=ud(Oa,R,H,pe,Ba,zo,rn,Li,ro,Ki,hi,cu.vertical,!1,so,La,ka))}}var ml=void 0,us=!1;if(sa.icon&&sa.icon.name){var yl=ne[sa.icon.name];yl&&(ml=OS(pe[sa.icon.name],tt.get("icon-offset").evaluate(sa,{},Se),tt.get("icon-anchor").evaluate(sa,{},Se)),us=yl.sdf,L.sdfIcons===void 0?L.sdfIcons=yl.sdf:L.sdfIcons!==yl.sdf&&V("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(yl.pixelRatio!==L.pixelRatio||tt.get("icon-rotate").constantOr(1)!==0)&&(L.iconsNeedLinear=!0))}var hu=Lx(Fa.horizontal)||Fa.vertical;L.iconsInText=hu?hu.iconsInText:!1,(hu||ml)&&ZS(L,sa,Fa,ml,ne,mt,La,ni,hi,us,Se)},Kn=0,fa=L.features;Kn<fa.length;Kn+=1)zn();be&&L.generateCollisionDebugBuffers()}function Rg(L){switch(L){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ZS(L,R,H,ne,pe,be,Se,ze,tt,ct,mt){var It=be.textMaxSize.evaluate(R,{});It===void 0&&(It=Se);var Kt=L.layers[0].layout,Wt=Kt.get("icon-offset").evaluate(R,{},mt),cr=Lx(H.horizontal),Br=24,hn=Se/Br,rn=L.tilePixelRatio*hn,kn=L.tilePixelRatio*It/Br,_n=L.tilePixelRatio*ze,Sn=L.tilePixelRatio*Kt.get("symbol-spacing"),zn=Kt.get("text-padding")*L.tilePixelRatio,Kn=Kt.get("icon-padding")*L.tilePixelRatio,fa=Kt.get("text-max-angle")/180*Math.PI,sa=Kt.get("text-rotation-alignment")==="map"&&Kt.get("symbol-placement")!=="point",Ba=Kt.get("icon-rotation-alignment")==="map"&&Kt.get("symbol-placement")!=="point",ka=Kt.get("symbol-placement"),La=Sn/2,ni=Kt.get("icon-text-fit"),Fa;ne&&ni!=="none"&&(L.allowVerticalPlacement&&H.vertical&&(Fa=mx(ne,H.vertical,ni,Kt.get("icon-text-fit-padding"),Wt,hn)),cr&&(ne=mx(ne,cr,ni,Kt.get("icon-text-fit-padding"),Wt,hn)));var Oa=function(Gh,Ju){Ju.x<0||Ju.x>=Ga||Ju.y<0||Ju.y>=Ga||KS(L,Ju,Gh,H,ne,pe,Fa,L.layers[0],L.collisionBoxArray,R.index,R.sourceLayerIndex,L.index,rn,zn,sa,tt,_n,Kn,Ba,Wt,R,be,ct,mt,Se)};if(ka==="line")for(var hi=0,ti=Sx(R.geometry,0,0,Ga,Ga);hi<ti.length;hi+=1)for(var Ei=ti[hi],Ki=US(Ei,Sn,fa,H.vertical||cr,ne,Br,kn,L.overscaling,Ga),Li=0,Pi=Ki;Li<Pi.length;Li+=1){var Si=Pi[Li],ro=cr;(!ro||!JS(L,ro.text,La,Si))&&Oa(Ei,Si)}else if(ka==="line-center")for(var so=0,zo=R.geometry;so<zo.length;so+=1){var Go=zo[so];if(Go.length>1){var ms=NS(Go,fa,H.vertical||cr,ne,Br,kn);ms&&Oa(Go,ms)}}else if(R.type==="Polygon")for(var ns=0,qs=_g(R.geometry,0);ns<qs.length;ns+=1){var el=qs[ns],ys=GS(el,16);Oa(el[0],new Ih(ys.x,ys.y,0))}else if(R.type==="LineString")for(var dl=0,ml=R.geometry;dl<ml.length;dl+=1){var us=ml[dl];Oa(us,new Ih(us[0].x,us[0].y,0))}else if(R.type==="Point")for(var yl=0,hu=R.geometry;yl<hu.length;yl+=1)for(var hc=hu[yl],Lc=0,Pc=hc;Lc<Pc.length;Lc+=1){var Rc=Pc[Lc];Oa([Rc],new Ih(Rc.x,Rc.y,0))}}var Gv=255,Cc=Gv*bf;function Ex(L,R,H,ne,pe,be,Se,ze,tt,ct,mt,It,Kt,Wt,cr){var Br=VS(R,H,ze,pe,be,Se,ne,L.allowVerticalPlacement),hn=L.textSizeData,rn=null;hn.kind==="source"?(rn=[bf*pe.layout.get("text-size").evaluate(Se,{})],rn[0]>Cc&&V(L.layerIds[0]+': Value for "text-size" is >= '+Gv+'. Reduce your "text-size".')):hn.kind==="composite"&&(rn=[bf*Wt.compositeTextSizes[0].evaluate(Se,{},cr),bf*Wt.compositeTextSizes[1].evaluate(Se,{},cr)],(rn[0]>Cc||rn[1]>Cc)&&V(L.layerIds[0]+': Value for "text-size" is >= '+Gv+'. Reduce your "text-size".')),L.addSymbols(L.text,Br,rn,ze,be,Se,ct,R,tt.lineStartIndex,tt.lineLength,Kt,cr);for(var kn=0,_n=mt;kn<_n.length;kn+=1){var Sn=_n[kn];It[Sn]=L.text.placedSymbolArray.length-1}return Br.length*4}function Lx(L){for(var R in L)return L[R];return null}function KS(L,R,H,ne,pe,be,Se,ze,tt,ct,mt,It,Kt,Wt,cr,Br,hn,rn,kn,_n,Sn,zn,Kn,fa,sa){var Ba,ka=L.addToLineVertexArray(R,H),La,ni,Fa,Oa,hi=0,ti=0,Ei=0,Ki=0,Li=-1,Pi=-1,Si={},ro=Pe(""),so=0,zo=0;if(ze._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Ba=ze.layout.get("text-offset").evaluate(Sn,{},fa).map(function(jv){return jv*Ls}),so=Ba[0],zo=Ba[1]):(so=ze.layout.get("text-radial-offset").evaluate(Sn,{},fa)*Ls,zo=Pg),L.allowVerticalPlacement&&ne.vertical){var Go=ze.layout.get("text-rotate").evaluate(Sn,{},fa),ms=Go+90,ns=ne.vertical;Fa=new vd(tt,R,ct,mt,It,ns,Kt,Wt,cr,ms),Se&&(Oa=new vd(tt,R,ct,mt,It,Se,hn,rn,cr,ms))}if(pe){var qs=ze.layout.get("icon-rotate").evaluate(Sn,{}),el=ze.layout.get("icon-text-fit")!=="none",ys=Mx(pe,qs,Kn,el),dl=Se?Mx(Se,qs,Kn,el):void 0;ni=new vd(tt,R,ct,mt,It,pe,hn,rn,!1,qs),hi=ys.length*4;var ml=L.iconSizeData,us=null;ml.kind==="source"?(us=[bf*ze.layout.get("icon-size").evaluate(Sn,{})],us[0]>Cc&&V(L.layerIds[0]+': Value for "icon-size" is >= '+Gv+'. Reduce your "icon-size".')):ml.kind==="composite"&&(us=[bf*zn.compositeIconSizes[0].evaluate(Sn,{},fa),bf*zn.compositeIconSizes[1].evaluate(Sn,{},fa)],(us[0]>Cc||us[1]>Cc)&&V(L.layerIds[0]+': Value for "icon-size" is >= '+Gv+'. Reduce your "icon-size".')),L.addSymbols(L.icon,ys,us,_n,kn,Sn,!1,R,ka.lineStartIndex,ka.lineLength,-1,fa),Li=L.icon.placedSymbolArray.length-1,dl&&(ti=dl.length*4,L.addSymbols(L.icon,dl,us,_n,kn,Sn,cu.vertical,R,ka.lineStartIndex,ka.lineLength,-1,fa),Pi=L.icon.placedSymbolArray.length-1)}for(var yl in ne.horizontal){var hu=ne.horizontal[yl];if(!La){ro=Pe(hu.text);var hc=ze.layout.get("text-rotate").evaluate(Sn,{},fa);La=new vd(tt,R,ct,mt,It,hu,Kt,Wt,cr,hc)}var Lc=hu.positionedLines.length===1;if(Ei+=Ex(L,R,hu,be,ze,cr,Sn,Br,ka,ne.vertical?cu.horizontal:cu.horizontalOnly,Lc?Object.keys(ne.horizontal):[yl],Si,Li,zn,fa),Lc)break}ne.vertical&&(Ki+=Ex(L,R,ne.vertical,be,ze,cr,Sn,Br,ka,cu.vertical,["vertical"],Si,Pi,zn,fa));var Pc=La?La.boxStartIndex:L.collisionBoxArray.length,Rc=La?La.boxEndIndex:L.collisionBoxArray.length,Gh=Fa?Fa.boxStartIndex:L.collisionBoxArray.length,Ju=Fa?Fa.boxEndIndex:L.collisionBoxArray.length,yd=ni?ni.boxStartIndex:L.collisionBoxArray.length,Bg=ni?ni.boxEndIndex:L.collisionBoxArray.length,xd=Oa?Oa.boxStartIndex:L.collisionBoxArray.length,Ng=Oa?Oa.boxEndIndex:L.collisionBoxArray.length,Lu=-1,Wh=function(jv,jx){return jv&&jv.circleDiameter?Math.max(jv.circleDiameter,jx):jx};Lu=Wh(La,Lu),Lu=Wh(Fa,Lu),Lu=Wh(ni,Lu),Lu=Wh(Oa,Lu);var bd=Lu>-1?1:0;bd&&(Lu*=sa/Ls),L.glyphOffsetArray.length>=Zi.MAX_GLYPHS&&V("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Sn.sortKey!==void 0&&L.addToSortKeyRanges(L.symbolInstances.length,Sn.sortKey),L.symbolInstances.emplaceBack(R.x,R.y,Si.right>=0?Si.right:-1,Si.center>=0?Si.center:-1,Si.left>=0?Si.left:-1,Si.vertical||-1,Li,Pi,ro,Pc,Rc,Gh,Ju,yd,Bg,xd,Ng,ct,Ei,Ki,hi,ti,bd,0,Kt,so,zo,Lu)}function JS(L,R,H,ne){var pe=L.compareText;if(!(R in pe))pe[R]=[];else for(var be=pe[R],Se=be.length-1;Se>=0;Se--)if(ne.dist(be[Se])<H)return!0;return pe[R].push(ne),!1}var $S=Lh.VectorTileFeature.types,QS=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function pd(L,R,H,ne,pe,be,Se,ze,tt,ct,mt,It,Kt){var Wt=ze?Math.min(Cc,Math.round(ze[0])):0,cr=ze?Math.min(Cc,Math.round(ze[1])):0;L.emplaceBack(R,H,Math.round(ne*32),Math.round(pe*32),be,Se,(Wt<<1)+(tt?1:0),cr,ct*16,mt*16,It*256,Kt*256)}function Dg(L,R,H){L.emplaceBack(R.x,R.y,H),L.emplaceBack(R.x,R.y,H),L.emplaceBack(R.x,R.y,H),L.emplaceBack(R.x,R.y,H)}function qS(L){for(var R=0,H=L.sections;R<H.length;R+=1){var ne=H[R];if(ia(ne.text))return!0}return!1}var Nh=function(R){this.layoutVertexArray=new Uf,this.indexArray=new gf,this.programConfigurations=R,this.segments=new X,this.dynamicLayoutVertexArray=new Sv,this.opacityVertexArray=new Mv,this.placedSymbolArray=new Ac};Nh.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Nh.prototype.upload=function(R,H,ne,pe){this.isEmpty()||(ne&&(this.layoutVertexBuffer=R.createVertexBuffer(this.layoutVertexArray,Sg.members),this.indexBuffer=R.createIndexBuffer(this.indexArray,H),this.dynamicLayoutVertexBuffer=R.createVertexBuffer(this.dynamicLayoutVertexArray,eS.members,!0),this.opacityVertexBuffer=R.createVertexBuffer(this.opacityVertexArray,QS,!0),this.opacityVertexBuffer.itemSize=1),(ne||pe)&&this.programConfigurations.upload(R))},Nh.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Be("SymbolBuffers",Nh);var Wv=function(R,H,ne){this.layoutVertexArray=new R,this.layoutAttributes=H,this.indexArray=new ne,this.segments=new X,this.collisionVertexArray=new Pl};Wv.prototype.upload=function(R){this.layoutVertexBuffer=R.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=R.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=R.createVertexBuffer(this.collisionVertexArray,tS.members,!0)},Wv.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Be("CollisionBuffers",Wv);var Zi=function(R){this.collisionBoxArray=R.collisionBoxArray,this.zoom=R.zoom,this.overscaling=R.overscaling,this.layers=R.layers,this.layerIds=this.layers.map(function(tt){return tt.id}),this.index=R.index,this.pixelRatio=R.pixelRatio,this.sourceLayerIndex=R.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Sh([]),this.placementViewportMatrix=Sh([]);var H=this.layers[0],ne=H._unevaluatedLayout._values;this.textSizeData=Lg(this.zoom,ne["text-size"]),this.iconSizeData=Lg(this.zoom,ne["icon-size"]);var pe=this.layers[0].layout,be=pe.get("symbol-sort-key"),Se=pe.get("symbol-z-order");this.sortFeaturesByKey=Se!=="viewport-y"&&be.constantOr(1)!==void 0;var ze=Se==="viewport-y"||Se==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=ze&&(pe.get("text-allow-overlap")||pe.get("icon-allow-overlap")||pe.get("text-ignore-placement")||pe.get("icon-ignore-placement")),pe.get("symbol-placement")==="point"&&(this.writingModes=pe.get("text-writing-mode").map(function(tt){return cu[tt]})),this.stateDependentLayerIds=this.layers.filter(function(tt){return tt.isStateDependent()}).map(function(tt){return tt.id}),this.sourceID=R.sourceID};Zi.prototype.createArrays=function(){this.text=new Nh(new ii(Sg.members,this.layers,this.zoom,function(R){return/^text/.test(R)})),this.icon=new Nh(new ii(Sg.members,this.layers,this.zoom,function(R){return/^icon/.test(R)})),this.glyphOffsetArray=new Cu,this.lineVertexArray=new Jp,this.symbolInstances=new Kp},Zi.prototype.calculateGlyphDependencies=function(R,H,ne,pe,be){for(var Se=0;Se<R.length;Se++)if(H[R.charCodeAt(Se)]=!0,(ne||pe)&&be){var ze=Nv[R.charAt(Se)];ze&&(H[ze.charCodeAt(0)]=!0)}},Zi.prototype.populate=function(R,H,ne){var pe=this.layers[0],be=pe.layout,Se=be.get("text-font"),ze=be.get("text-field"),tt=be.get("icon-image"),ct=(ze.value.kind!=="constant"||ze.value.value instanceof Wi&&!ze.value.value.isEmpty()||ze.value.value.toString().length>0)&&(Se.value.kind!=="constant"||Se.value.value.length>0),mt=tt.value.kind!=="constant"||!!tt.value.value||Object.keys(tt.parameters).length>0,It=be.get("symbol-sort-key");if(this.features=[],!(!ct&&!mt)){for(var Kt=H.iconDependencies,Wt=H.glyphDependencies,cr=H.availableImages,Br=new ui(this.zoom),hn=0,rn=R;hn<rn.length;hn+=1){var kn=rn[hn],_n=kn.feature,Sn=kn.id,zn=kn.index,Kn=kn.sourceLayerIndex,fa=pe._featureFilter.needGeometry,sa={type:_n.type,id:Sn,properties:_n.properties,geometry:fa?Gi(_n):[]};if(!!pe._featureFilter.filter(Br,sa,ne)){fa||(sa.geometry=Gi(_n));var Ba=void 0;if(ct){var ka=pe.getValueAndResolveTokens("text-field",sa,ne,cr),La=Wi.factory(ka);qS(La)&&(this.hasRTLText=!0),(!this.hasRTLText||xo()==="unavailable"||this.hasRTLText&&Ka.isParsed())&&(Ba=aS(La,pe,sa))}var ni=void 0;if(mt){var Fa=pe.getValueAndResolveTokens("icon-image",sa,ne,cr);Fa instanceof Bo?ni=Fa:ni=Bo.fromString(Fa)}if(!(!Ba&&!ni)){var Oa=this.sortFeaturesByKey?It.evaluate(sa,{},ne):void 0,hi={id:Sn,text:Ba,icon:ni,index:zn,sourceLayerIndex:Kn,geometry:Gi(_n),properties:_n.properties,type:$S[_n.type],sortKey:Oa};if(this.features.push(hi),ni&&(Kt[ni.name]=!0),Ba){var ti=Se.evaluate(sa,{},ne).join(","),Ei=be.get("text-rotation-alignment")==="map"&&be.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(cu.vertical)>=0;for(var Ki=0,Li=Ba.sections;Ki<Li.length;Ki+=1){var Pi=Li[Ki];if(Pi.image)Kt[Pi.image.name]=!0;else{var Si=Ar(Ba.toString()),ro=Pi.fontStack||ti,so=Wt[ro]=Wt[ro]||{};this.calculateGlyphDependencies(Pi.text,so,Ei,this.allowVerticalPlacement,Si)}}}}}}be.get("symbol-placement")==="line"&&(this.features=iS(this.features)),this.sortFeaturesByKey&&this.features.sort(function(zo,Go){return zo.sortKey-Go.sortKey})}},Zi.prototype.update=function(R,H,ne){!this.stateDependentLayers.length||(this.text.programConfigurations.updatePaintArrays(R,H,this.layers,ne),this.icon.programConfigurations.updatePaintArrays(R,H,this.layers,ne))},Zi.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Zi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Zi.prototype.upload=function(R){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(R),this.iconCollisionBox.upload(R)),this.text.upload(R,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(R,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Zi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Zi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Zi.prototype.addToLineVertexArray=function(R,H){var ne=this.lineVertexArray.length;if(R.segment!==void 0){for(var pe=R.dist(H[R.segment+1]),be=R.dist(H[R.segment]),Se={},ze=R.segment+1;ze<H.length;ze++)Se[ze]={x:H[ze].x,y:H[ze].y,tileUnitDistanceFromAnchor:pe},ze<H.length-1&&(pe+=H[ze+1].dist(H[ze]));for(var tt=R.segment||0;tt>=0;tt--)Se[tt]={x:H[tt].x,y:H[tt].y,tileUnitDistanceFromAnchor:be},tt>0&&(be+=H[tt-1].dist(H[tt]));for(var ct=0;ct<H.length;ct++){var mt=Se[ct];this.lineVertexArray.emplaceBack(mt.x,mt.y,mt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:ne,lineLength:this.lineVertexArray.length-ne}},Zi.prototype.addSymbols=function(R,H,ne,pe,be,Se,ze,tt,ct,mt,It,Kt){for(var Wt=R.indexArray,cr=R.layoutVertexArray,Br=R.segments.prepareSegment(4*H.length,cr,Wt,Se.sortKey),hn=this.glyphOffsetArray.length,rn=Br.vertexLength,kn=this.allowVerticalPlacement&&ze===cu.vertical?Math.PI/2:0,_n=Se.text&&Se.text.sections,Sn=0;Sn<H.length;Sn++){var zn=H[Sn],Kn=zn.tl,fa=zn.tr,sa=zn.bl,Ba=zn.br,ka=zn.tex,La=zn.pixelOffsetTL,ni=zn.pixelOffsetBR,Fa=zn.minFontScaleX,Oa=zn.minFontScaleY,hi=zn.glyphOffset,ti=zn.isSDF,Ei=zn.sectionIndex,Ki=Br.vertexLength,Li=hi[1];pd(cr,tt.x,tt.y,Kn.x,Li+Kn.y,ka.x,ka.y,ne,ti,La.x,La.y,Fa,Oa),pd(cr,tt.x,tt.y,fa.x,Li+fa.y,ka.x+ka.w,ka.y,ne,ti,ni.x,La.y,Fa,Oa),pd(cr,tt.x,tt.y,sa.x,Li+sa.y,ka.x,ka.y+ka.h,ne,ti,La.x,ni.y,Fa,Oa),pd(cr,tt.x,tt.y,Ba.x,Li+Ba.y,ka.x+ka.w,ka.y+ka.h,ne,ti,ni.x,ni.y,Fa,Oa),Dg(R.dynamicLayoutVertexArray,tt,kn),Wt.emplaceBack(Ki,Ki+1,Ki+2),Wt.emplaceBack(Ki+1,Ki+2,Ki+3),Br.vertexLength+=4,Br.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(hi[0]),(Sn===H.length-1||Ei!==H[Sn+1].sectionIndex)&&R.programConfigurations.populatePaintArrays(cr.length,Se,Se.index,{},Kt,_n&&_n[Ei])}R.placedSymbolArray.emplaceBack(tt.x,tt.y,hn,this.glyphOffsetArray.length-hn,rn,ct,mt,tt.segment,ne?ne[0]:0,ne?ne[1]:0,pe[0],pe[1],ze,0,!1,0,It)},Zi.prototype._addCollisionDebugVertex=function(R,H,ne,pe,be,Se){return H.emplaceBack(0,0),R.emplaceBack(ne.x,ne.y,pe,be,Math.round(Se.x),Math.round(Se.y))},Zi.prototype.addCollisionDebugVertices=function(R,H,ne,pe,be,Se,ze){var tt=be.segments.prepareSegment(4,be.layoutVertexArray,be.indexArray),ct=tt.vertexLength,mt=be.layoutVertexArray,It=be.collisionVertexArray,Kt=ze.anchorX,Wt=ze.anchorY;this._addCollisionDebugVertex(mt,It,Se,Kt,Wt,new f(R,H)),this._addCollisionDebugVertex(mt,It,Se,Kt,Wt,new f(ne,H)),this._addCollisionDebugVertex(mt,It,Se,Kt,Wt,new f(ne,pe)),this._addCollisionDebugVertex(mt,It,Se,Kt,Wt,new f(R,pe)),tt.vertexLength+=4;var cr=be.indexArray;cr.emplaceBack(ct,ct+1),cr.emplaceBack(ct+1,ct+2),cr.emplaceBack(ct+2,ct+3),cr.emplaceBack(ct+3,ct),tt.primitiveLength+=4},Zi.prototype.addDebugCollisionBoxes=function(R,H,ne,pe){for(var be=R;be<H;be++){var Se=this.collisionBoxArray.get(be),ze=Se.x1,tt=Se.y1,ct=Se.x2,mt=Se.y2;this.addCollisionDebugVertices(ze,tt,ct,mt,pe?this.textCollisionBox:this.iconCollisionBox,Se.anchorPoint,ne)}},Zi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Wv(bh,ax.members,Xc),this.iconCollisionBox=new Wv(bh,ax.members,Xc);for(var R=0;R<this.symbolInstances.length;R++){var H=this.symbolInstances.get(R);this.addDebugCollisionBoxes(H.textBoxStartIndex,H.textBoxEndIndex,H,!0),this.addDebugCollisionBoxes(H.verticalTextBoxStartIndex,H.verticalTextBoxEndIndex,H,!0),this.addDebugCollisionBoxes(H.iconBoxStartIndex,H.iconBoxEndIndex,H,!1),this.addDebugCollisionBoxes(H.verticalIconBoxStartIndex,H.verticalIconBoxEndIndex,H,!1)}},Zi.prototype._deserializeCollisionBoxesForSymbol=function(R,H,ne,pe,be,Se,ze,tt,ct){for(var mt={},It=H;It<ne;It++){var Kt=R.get(It);mt.textBox={x1:Kt.x1,y1:Kt.y1,x2:Kt.x2,y2:Kt.y2,anchorPointX:Kt.anchorPointX,anchorPointY:Kt.anchorPointY},mt.textFeatureIndex=Kt.featureIndex;break}for(var Wt=pe;Wt<be;Wt++){var cr=R.get(Wt);mt.verticalTextBox={x1:cr.x1,y1:cr.y1,x2:cr.x2,y2:cr.y2,anchorPointX:cr.anchorPointX,anchorPointY:cr.anchorPointY},mt.verticalTextFeatureIndex=cr.featureIndex;break}for(var Br=Se;Br<ze;Br++){var hn=R.get(Br);mt.iconBox={x1:hn.x1,y1:hn.y1,x2:hn.x2,y2:hn.y2,anchorPointX:hn.anchorPointX,anchorPointY:hn.anchorPointY},mt.iconFeatureIndex=hn.featureIndex;break}for(var rn=tt;rn<ct;rn++){var kn=R.get(rn);mt.verticalIconBox={x1:kn.x1,y1:kn.y1,x2:kn.x2,y2:kn.y2,anchorPointX:kn.anchorPointX,anchorPointY:kn.anchorPointY},mt.verticalIconFeatureIndex=kn.featureIndex;break}return mt},Zi.prototype.deserializeCollisionBoxes=function(R){this.collisionArrays=[];for(var H=0;H<this.symbolInstances.length;H++){var ne=this.symbolInstances.get(H);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(R,ne.textBoxStartIndex,ne.textBoxEndIndex,ne.verticalTextBoxStartIndex,ne.verticalTextBoxEndIndex,ne.iconBoxStartIndex,ne.iconBoxEndIndex,ne.verticalIconBoxStartIndex,ne.verticalIconBoxEndIndex))}},Zi.prototype.hasTextData=function(){return this.text.segments.get().length>0},Zi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Zi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Zi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Zi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Zi.prototype.addIndicesForPlacedSymbol=function(R,H){for(var ne=R.placedSymbolArray.get(H),pe=ne.vertexStartIndex+ne.numGlyphs*4,be=ne.vertexStartIndex;be<pe;be+=4)R.indexArray.emplaceBack(be,be+1,be+2),R.indexArray.emplaceBack(be+1,be+2,be+3)},Zi.prototype.getSortedSymbolIndexes=function(R){if(this.sortedAngle===R&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var H=Math.sin(R),ne=Math.cos(R),pe=[],be=[],Se=[],ze=0;ze<this.symbolInstances.length;++ze){Se.push(ze);var tt=this.symbolInstances.get(ze);pe.push(Math.round(H*tt.anchorX+ne*tt.anchorY)|0),be.push(tt.featureIndex)}return Se.sort(function(ct,mt){return pe[ct]-pe[mt]||be[mt]-be[ct]}),Se},Zi.prototype.addToSortKeyRanges=function(R,H){var ne=this.sortKeyRanges[this.sortKeyRanges.length-1];ne&&ne.sortKey===H?ne.symbolInstanceEnd=R+1:this.sortKeyRanges.push({sortKey:H,symbolInstanceStart:R,symbolInstanceEnd:R+1})},Zi.prototype.sortFeatures=function(R){var H=this;if(!!this.sortFeaturesByY&&this.sortedAngle!==R&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(R),this.sortedAngle=R,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var ne=0,pe=this.symbolInstanceIndexes;ne<pe.length;ne+=1){var be=pe[ne],Se=this.symbolInstances.get(be);this.featureSortOrder.push(Se.featureIndex),[Se.rightJustifiedTextSymbolIndex,Se.centerJustifiedTextSymbolIndex,Se.leftJustifiedTextSymbolIndex].forEach(function(ze,tt,ct){ze>=0&&ct.indexOf(ze)===tt&&H.addIndicesForPlacedSymbol(H.text,ze)}),Se.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Se.verticalPlacedTextSymbolIndex),Se.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Se.placedIconSymbolIndex),Se.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Se.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Be("SymbolBucket",Zi,{omit:["layers","collisionBoxArray","features","compareText"]}),Zi.MAX_GLYPHS=65535,Zi.addDynamicAttributes=Dg;function eM(L,R){return R.replace(/{([^{}]+)}/g,function(H,ne){return ne in L?String(L[ne]):""})}var tM=new Ji({"symbol-placement":new Na(ar.layout_symbol["symbol-placement"]),"symbol-spacing":new Na(ar.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Na(ar.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ja(ar.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Na(ar.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Na(ar.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Na(ar.layout_symbol["icon-ignore-placement"]),"icon-optional":new Na(ar.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Na(ar.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ja(ar.layout_symbol["icon-size"]),"icon-text-fit":new Na(ar.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Na(ar.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ja(ar.layout_symbol["icon-image"]),"icon-rotate":new Ja(ar.layout_symbol["icon-rotate"]),"icon-padding":new Na(ar.layout_symbol["icon-padding"]),"icon-keep-upright":new Na(ar.layout_symbol["icon-keep-upright"]),"icon-offset":new Ja(ar.layout_symbol["icon-offset"]),"icon-anchor":new Ja(ar.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Na(ar.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Na(ar.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Na(ar.layout_symbol["text-rotation-alignment"]),"text-field":new Ja(ar.layout_symbol["text-field"]),"text-font":new Ja(ar.layout_symbol["text-font"]),"text-size":new Ja(ar.layout_symbol["text-size"]),"text-max-width":new Ja(ar.layout_symbol["text-max-width"]),"text-line-height":new Na(ar.layout_symbol["text-line-height"]),"text-letter-spacing":new Ja(ar.layout_symbol["text-letter-spacing"]),"text-justify":new Ja(ar.layout_symbol["text-justify"]),"text-radial-offset":new Ja(ar.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Na(ar.layout_symbol["text-variable-anchor"]),"text-anchor":new Ja(ar.layout_symbol["text-anchor"]),"text-max-angle":new Na(ar.layout_symbol["text-max-angle"]),"text-writing-mode":new Na(ar.layout_symbol["text-writing-mode"]),"text-rotate":new Ja(ar.layout_symbol["text-rotate"]),"text-padding":new Na(ar.layout_symbol["text-padding"]),"text-keep-upright":new Na(ar.layout_symbol["text-keep-upright"]),"text-transform":new Ja(ar.layout_symbol["text-transform"]),"text-offset":new Ja(ar.layout_symbol["text-offset"]),"text-allow-overlap":new Na(ar.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Na(ar.layout_symbol["text-ignore-placement"]),"text-optional":new Na(ar.layout_symbol["text-optional"])}),rM=new Ji({"icon-opacity":new Ja(ar.paint_symbol["icon-opacity"]),"icon-color":new Ja(ar.paint_symbol["icon-color"]),"icon-halo-color":new Ja(ar.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ja(ar.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ja(ar.paint_symbol["icon-halo-blur"]),"icon-translate":new Na(ar.paint_symbol["icon-translate"]),"icon-translate-anchor":new Na(ar.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ja(ar.paint_symbol["text-opacity"]),"text-color":new Ja(ar.paint_symbol["text-color"],{runtimeType:ca,getOverride:function(L){return L.textColor},hasOverride:function(L){return!!L.textColor}}),"text-halo-color":new Ja(ar.paint_symbol["text-halo-color"]),"text-halo-width":new Ja(ar.paint_symbol["text-halo-width"]),"text-halo-blur":new Ja(ar.paint_symbol["text-halo-blur"]),"text-translate":new Na(ar.paint_symbol["text-translate"]),"text-translate-anchor":new Na(ar.paint_symbol["text-translate-anchor"])}),Ig={paint:rM,layout:tM},Uh=function(R){this.type=R.property.overrides?R.property.overrides.runtimeType:Un,this.defaultValue=R};Uh.prototype.evaluate=function(R){if(R.formattedSection){var H=this.defaultValue.property.overrides;if(H&&H.hasOverride(R.formattedSection))return H.getOverride(R.formattedSection)}return R.feature&&R.featureState?this.defaultValue.evaluate(R.feature,R.featureState):this.defaultValue.property.specification.default},Uh.prototype.eachChild=function(R){if(!this.defaultValue.isConstant()){var H=this.defaultValue.value;R(H._styleExpression.expression)}},Uh.prototype.outputDefined=function(){return!1},Uh.prototype.serialize=function(){return null},Be("FormatSectionOverride",Uh,{omit:["defaultValue"]});var nM=function(L){function R(H){L.call(this,H,Ig)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.recalculate=function(ne,pe){if(L.prototype.recalculate.call(this,ne,pe),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var be=this.layout.get("text-writing-mode");if(be){for(var Se=[],ze=0,tt=be;ze<tt.length;ze+=1){var ct=tt[ze];Se.indexOf(ct)<0&&Se.push(ct)}this.layout._values["text-writing-mode"]=Se}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},R.prototype.getValueAndResolveTokens=function(ne,pe,be,Se){var ze=this.layout.get(ne).evaluate(pe,{},be,Se),tt=this._unevaluatedLayout._values[ne];return!tt.isDataDriven()&&!Po(tt.value)&&ze?eM(pe.properties,ze):ze},R.prototype.createBucket=function(ne){return new Zi(ne)},R.prototype.queryRadius=function(){return 0},R.prototype.queryIntersectsFeature=function(){return!1},R.prototype._setPaintOverrides=function(){for(var ne=0,pe=Ig.paint.overridableProperties;ne<pe.length;ne+=1){var be=pe[ne];if(!!R.hasPaintOverride(this.layout,be)){var Se=this.paint.get(be),ze=new Uh(Se),tt=new Ms(ze,Se.property.specification),ct=null;Se.value.kind==="constant"||Se.value.kind==="source"?ct=new Wu("source",tt):ct=new ks("composite",tt,Se.value.zoomStops,Se.value._interpolationType),this.paint._values[be]=new Xi(Se.property,ct,Se.parameters)}}},R.prototype._handleOverridablePaintPropertyUpdate=function(ne,pe,be){return!this.layout||pe.isDataDriven()||be.isDataDriven()?!1:R.hasPaintOverride(this.layout,ne)},R.hasPaintOverride=function(ne,pe){var be=ne.get("text-field"),Se=Ig.paint.properties[pe],ze=!1,tt=function(It){for(var Kt=0,Wt=It;Kt<Wt.length;Kt+=1){var cr=Wt[Kt];if(Se.overrides&&Se.overrides.hasOverride(cr)){ze=!0;return}}};if(be.value.kind==="constant"&&be.value.value instanceof Wi)tt(be.value.value.sections);else if(be.value.kind==="source"){var ct=function(It){if(!ze)if(It instanceof qi&&zi(It.value)===cs){var Kt=It.value;tt(Kt.sections)}else It instanceof xs?tt(It.sections):It.eachChild(ct)},mt=be.value;mt._styleExpression&&ct(mt._styleExpression.expression)}return ze},R}(Bs),aM=new Ji({"background-color":new Na(ar.paint_background["background-color"]),"background-pattern":new io(ar.paint_background["background-pattern"]),"background-opacity":new Na(ar.paint_background["background-opacity"])}),iM={paint:aM},oM=function(L){function R(H){L.call(this,H,iM)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R}(Bs),sM=new Ji({"raster-opacity":new Na(ar.paint_raster["raster-opacity"]),"raster-hue-rotate":new Na(ar.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Na(ar.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Na(ar.paint_raster["raster-brightness-max"]),"raster-saturation":new Na(ar.paint_raster["raster-saturation"]),"raster-contrast":new Na(ar.paint_raster["raster-contrast"]),"raster-resampling":new Na(ar.paint_raster["raster-resampling"]),"raster-fade-duration":new Na(ar.paint_raster["raster-fade-duration"])}),lM={paint:sM},uM=function(L){function R(H){L.call(this,H,lM)}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R}(Bs);function fM(L){var R=[],H=L.id;return H===void 0&&R.push({message:"layers."+H+': missing required property "id"'}),L.render===void 0&&R.push({message:"layers."+H+': missing required method "render"'}),L.renderingMode&&L.renderingMode!=="2d"&&L.renderingMode!=="3d"&&R.push({message:"layers."+H+': property "renderingMode" must be either "2d" or "3d"'}),R}var cM=function(L){function R(H){L.call(this,H,{}),this.implementation=H}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},R.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},R.prototype.recalculate=function(){},R.prototype.updateTransitions=function(){},R.prototype.hasTransition=function(){},R.prototype.serialize=function(){},R.prototype.onAdd=function(ne){this.implementation.onAdd&&this.implementation.onAdd(ne,ne.painter.context.gl)},R.prototype.onRemove=function(ne){this.implementation.onRemove&&this.implementation.onRemove(ne,ne.painter.context.gl)},R}(Bs),hM={circle:V5,heatmap:Y5,hillshade:Z5,fill:xA,"fill-extrusion":NA,line:QA,symbol:nM,background:oM,raster:uM};function vM(L){return L.type==="custom"?new cM(L):new hM[L.type](L)}var Px=self.HTMLImageElement,Rx=self.HTMLCanvasElement,Dx=self.HTMLVideoElement,Ix=self.ImageData,dd=self.ImageBitmap,Qc=function(R,H,ne,pe){this.context=R,this.format=ne,this.texture=R.gl.createTexture(),this.update(H,pe)};Qc.prototype.update=function(R,H,ne){var pe=R.width,be=R.height,Se=(!this.size||this.size[0]!==pe||this.size[1]!==be)&&!ne,ze=this,tt=ze.context,ct=tt.gl;if(this.useMipmap=Boolean(H&&H.useMipmap),ct.bindTexture(ct.TEXTURE_2D,this.texture),tt.pixelStoreUnpackFlipY.set(!1),tt.pixelStoreUnpack.set(1),tt.pixelStoreUnpackPremultiplyAlpha.set(this.format===ct.RGBA&&(!H||H.premultiply!==!1)),Se)this.size=[pe,be],R instanceof Px||R instanceof Rx||R instanceof Dx||R instanceof Ix||dd&&R instanceof dd?ct.texImage2D(ct.TEXTURE_2D,0,this.format,this.format,ct.UNSIGNED_BYTE,R):ct.texImage2D(ct.TEXTURE_2D,0,this.format,pe,be,0,this.format,ct.UNSIGNED_BYTE,R.data);else{var mt=ne||{x:0,y:0},It=mt.x,Kt=mt.y;R instanceof Px||R instanceof Rx||R instanceof Dx||R instanceof Ix||dd&&R instanceof dd?ct.texSubImage2D(ct.TEXTURE_2D,0,It,Kt,ct.RGBA,ct.UNSIGNED_BYTE,R):ct.texSubImage2D(ct.TEXTURE_2D,0,It,Kt,pe,be,ct.RGBA,ct.UNSIGNED_BYTE,R.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ct.generateMipmap(ct.TEXTURE_2D)},Qc.prototype.bind=function(R,H,ne){var pe=this,be=pe.context,Se=be.gl;Se.bindTexture(Se.TEXTURE_2D,this.texture),ne===Se.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(ne=Se.LINEAR),R!==this.filter&&(Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_MAG_FILTER,R),Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_MIN_FILTER,ne||R),this.filter=R),H!==this.wrap&&(Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_WRAP_S,H),Se.texParameteri(Se.TEXTURE_2D,Se.TEXTURE_WRAP_T,H),this.wrap=H)},Qc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Qc.prototype.destroy=function(){var R=this.context,H=R.gl;H.deleteTexture(this.texture),this.texture=null};var Fg=function(R){var H=this;this._callback=R,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){H._triggered=!1,H._callback()})};Fg.prototype.trigger=function(){var R=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){R._triggered=!1,R._callback()},0))},Fg.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Vh=function(R,H,ne){this.target=R,this.parent=H,this.mapId=ne,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},M(["receive","process"],this),this.invoker=new Fg(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=te()?R:self};Vh.prototype.send=function(R,H,ne,pe,be){var Se=this;be===void 0&&(be=!1);var ze=Math.round(Math.random()*1e18).toString(36).substring(0,10);ne&&(this.callbacks[ze]=ne);var tt=J(this.globalScope)?void 0:[];return this.target.postMessage({id:ze,type:R,hasCallback:!!ne,targetMapId:pe,mustQueue:be,sourceMapId:this.mapId,data:Lt(H,tt)},tt),{cancel:function(){ne&&delete Se.callbacks[ze],Se.target.postMessage({id:ze,type:"<cancel>",targetMapId:pe,sourceMapId:Se.mapId})}}},Vh.prototype.receive=function(R){var H=R.data,ne=H.id;if(!!ne&&!(H.targetMapId&&this.mapId!==H.targetMapId))if(H.type==="<cancel>"){delete this.tasks[ne];var pe=this.cancelCallbacks[ne];delete this.cancelCallbacks[ne],pe&&pe()}else te()||H.mustQueue?(this.tasks[ne]=H,this.taskQueue.push(ne),this.invoker.trigger()):this.processTask(ne,H)},Vh.prototype.process=function(){if(!!this.taskQueue.length){var R=this.taskQueue.shift(),H=this.tasks[R];delete this.tasks[R],this.taskQueue.length&&this.invoker.trigger(),!!H&&this.processTask(R,H)}},Vh.prototype.processTask=function(R,H){var ne=this;if(H.type==="<response>"){var pe=this.callbacks[R];delete this.callbacks[R],pe&&(H.error?pe(Vt(H.error)):pe(null,Vt(H.data)))}else{var be=!1,Se=J(this.globalScope)?void 0:[],ze=H.hasCallback?function(Kt,Wt){be=!0,delete ne.cancelCallbacks[R],ne.target.postMessage({id:R,type:"<response>",sourceMapId:ne.mapId,error:Kt?Lt(Kt):null,data:Lt(Wt,Se)},Se)}:function(Kt){be=!0},tt=null,ct=Vt(H.data);if(this.parent[H.type])tt=this.parent[H.type](H.sourceMapId,ct,ze);else if(this.parent.getWorkerSource){var mt=H.type.split("."),It=this.parent.getWorkerSource(H.sourceMapId,mt[0],ct.source);tt=It[mt[1]](ct,ze)}else ze(new Error("Could not find function "+H.type));!be&&tt&&tt.cancel&&(this.cancelCallbacks[R]=tt.cancel)}},Vh.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function pM(L,R,H){R=Math.pow(2,H)-R-1;var ne=Fx(L*256,R*256,H),pe=Fx((L+1)*256,(R+1)*256,H);return ne[0]+","+ne[1]+","+pe[0]+","+pe[1]}function Fx(L,R,H){var ne=2*Math.PI*6378137/256/Math.pow(2,H),pe=L*ne-2*Math.PI*6378137/2,be=R*ne-2*Math.PI*6378137/2;return[pe,be]}var ts=function(R,H){R&&(H?this.setSouthWest(R).setNorthEast(H):R.length===4?this.setSouthWest([R[0],R[1]]).setNorthEast([R[2],R[3]]):this.setSouthWest(R[0]).setNorthEast(R[1]))};ts.prototype.setNorthEast=function(R){return this._ne=R instanceof bo?new bo(R.lng,R.lat):bo.convert(R),this},ts.prototype.setSouthWest=function(R){return this._sw=R instanceof bo?new bo(R.lng,R.lat):bo.convert(R),this},ts.prototype.extend=function(R){var H=this._sw,ne=this._ne,pe,be;if(R instanceof bo)pe=R,be=R;else if(R instanceof ts){if(pe=R._sw,be=R._ne,!pe||!be)return this}else{if(Array.isArray(R))if(R.length===4||R.every(Array.isArray)){var Se=R;return this.extend(ts.convert(Se))}else{var ze=R;return this.extend(bo.convert(ze))}return this}return!H&&!ne?(this._sw=new bo(pe.lng,pe.lat),this._ne=new bo(be.lng,be.lat)):(H.lng=Math.min(pe.lng,H.lng),H.lat=Math.min(pe.lat,H.lat),ne.lng=Math.max(be.lng,ne.lng),ne.lat=Math.max(be.lat,ne.lat)),this},ts.prototype.getCenter=function(){return new bo((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ts.prototype.getSouthWest=function(){return this._sw},ts.prototype.getNorthEast=function(){return this._ne},ts.prototype.getNorthWest=function(){return new bo(this.getWest(),this.getNorth())},ts.prototype.getSouthEast=function(){return new bo(this.getEast(),this.getSouth())},ts.prototype.getWest=function(){return this._sw.lng},ts.prototype.getSouth=function(){return this._sw.lat},ts.prototype.getEast=function(){return this._ne.lng},ts.prototype.getNorth=function(){return this._ne.lat},ts.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ts.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ts.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ts.prototype.contains=function(R){var H=bo.convert(R),ne=H.lng,pe=H.lat,be=this._sw.lat<=pe&&pe<=this._ne.lat,Se=this._sw.lng<=ne&&ne<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Se=this._sw.lng>=ne&&ne>=this._ne.lng),be&&Se},ts.convert=function(R){return!R||R instanceof ts?R:new ts(R)};var zx=63710088e-1,bo=function(R,H){if(isNaN(R)||isNaN(H))throw new Error("Invalid LngLat object: ("+R+", "+H+")");if(this.lng=+R,this.lat=+H,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};bo.prototype.wrap=function(){return new bo(g(this.lng,-180,180),this.lat)},bo.prototype.toArray=function(){return[this.lng,this.lat]},bo.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},bo.prototype.distanceTo=function(R){var H=Math.PI/180,ne=this.lat*H,pe=R.lat*H,be=Math.sin(ne)*Math.sin(pe)+Math.cos(ne)*Math.cos(pe)*Math.cos((R.lng-this.lng)*H),Se=zx*Math.acos(Math.min(be,1));return Se},bo.prototype.toBounds=function(R){R===void 0&&(R=0);var H=40075017,ne=360*R/H,pe=ne/Math.cos(Math.PI/180*this.lat);return new ts(new bo(this.lng-pe,this.lat-ne),new bo(this.lng+pe,this.lat+ne))},bo.convert=function(R){if(R instanceof bo)return R;if(Array.isArray(R)&&(R.length===2||R.length===3))return new bo(Number(R[0]),Number(R[1]));if(!Array.isArray(R)&&typeof R=="object"&&R!==null)return new bo(Number("lng"in R?R.lng:R.lon),Number(R.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Ox=2*Math.PI*zx;function Bx(L){return Ox*Math.cos(L*Math.PI/180)}function Nx(L){return(180+L)/360}function Ux(L){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+L*Math.PI/360)))/360}function Vx(L,R){return L/Bx(R)}function dM(L){return L*360-180}function zg(L){var R=180-L*360;return 360/Math.PI*Math.atan(Math.exp(R*Math.PI/180))-90}function gM(L,R){return L*Bx(zg(R))}function mM(L){return 1/Math.cos(L*Math.PI/180)}var qc=function(R,H,ne){ne===void 0&&(ne=0),this.x=+R,this.y=+H,this.z=+ne};qc.fromLngLat=function(R,H){H===void 0&&(H=0);var ne=bo.convert(R);return new qc(Nx(ne.lng),Ux(ne.lat),Vx(H,ne.lat))},qc.prototype.toLngLat=function(){return new bo(dM(this.x),zg(this.y))},qc.prototype.toAltitude=function(){return gM(this.z,this.y)},qc.prototype.meterInMercatorCoordinateUnits=function(){return 1/Ox*mM(zg(this.y))};var eh=function(R,H,ne){this.z=R,this.x=H,this.y=ne,this.key=Yv(0,R,R,H,ne)};eh.prototype.equals=function(R){return this.z===R.z&&this.x===R.x&&this.y===R.y},eh.prototype.url=function(R,H){var ne=pM(this.x,this.y,this.z),pe=yM(this.z,this.x,this.y);return R[(this.x+this.y)%R.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(H==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",pe).replace("{bbox-epsg-3857}",ne)},eh.prototype.getTilePoint=function(R){var H=Math.pow(2,this.z);return new f((R.x*H-this.x)*Ga,(R.y*H-this.y)*Ga)},eh.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Hx=function(R,H){this.wrap=R,this.canonical=H,this.key=Yv(R,H.z,H.z,H.x,H.y)},rs=function(R,H,ne,pe,be){this.overscaledZ=R,this.wrap=H,this.canonical=new eh(ne,+pe,+be),this.key=Yv(H,R,ne,pe,be)};rs.prototype.equals=function(R){return this.overscaledZ===R.overscaledZ&&this.wrap===R.wrap&&this.canonical.equals(R.canonical)},rs.prototype.scaledTo=function(R){var H=this.canonical.z-R;return R>this.canonical.z?new rs(R,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new rs(R,this.wrap,R,this.canonical.x>>H,this.canonical.y>>H)},rs.prototype.calculateScaledKey=function(R,H){var ne=this.canonical.z-R;return R>this.canonical.z?Yv(this.wrap*+H,R,this.canonical.z,this.canonical.x,this.canonical.y):Yv(this.wrap*+H,R,R,this.canonical.x>>ne,this.canonical.y>>ne)},rs.prototype.isChildOf=function(R){if(R.wrap!==this.wrap)return!1;var H=this.canonical.z-R.canonical.z;return R.overscaledZ===0||R.overscaledZ<this.overscaledZ&&R.canonical.x===this.canonical.x>>H&&R.canonical.y===this.canonical.y>>H},rs.prototype.children=function(R){if(this.overscaledZ>=R)return[new rs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var H=this.canonical.z+1,ne=this.canonical.x*2,pe=this.canonical.y*2;return[new rs(H,this.wrap,H,ne,pe),new rs(H,this.wrap,H,ne+1,pe),new rs(H,this.wrap,H,ne,pe+1),new rs(H,this.wrap,H,ne+1,pe+1)]},rs.prototype.isLessThan=function(R){return this.wrap<R.wrap?!0:this.wrap>R.wrap?!1:this.overscaledZ<R.overscaledZ?!0:this.overscaledZ>R.overscaledZ?!1:this.canonical.x<R.canonical.x?!0:this.canonical.x>R.canonical.x?!1:this.canonical.y<R.canonical.y},rs.prototype.wrapped=function(){return new rs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},rs.prototype.unwrapTo=function(R){return new rs(this.overscaledZ,R,this.canonical.z,this.canonical.x,this.canonical.y)},rs.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},rs.prototype.toUnwrapped=function(){return new Hx(this.wrap,this.canonical)},rs.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},rs.prototype.getTilePoint=function(R){return this.canonical.getTilePoint(new qc(R.x-this.wrap,R.y))};function Yv(L,R,H,ne,pe){L*=2,L<0&&(L=L*-1-1);var be=1<<H;return(be*be*L+be*pe+ne).toString(36)+H.toString(36)+R.toString(36)}function yM(L,R,H){for(var ne="",pe,be=L;be>0;be--)pe=1<<be-1,ne+=(R&pe?1:0)+(H&pe?2:0);return ne}Be("CanonicalTileID",eh),Be("OverscaledTileID",rs,{omit:["posMatrix"]});var fc=function(R,H,ne){if(this.uid=R,H.height!==H.width)throw new RangeError("DEM tiles must be square");if(ne&&ne!=="mapbox"&&ne!=="terrarium")return V('"'+ne+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=H.height;var pe=this.dim=H.height-2;this.data=new Uint32Array(H.data.buffer),this.encoding=ne||"mapbox";for(var be=0;be<pe;be++)this.data[this._idx(-1,be)]=this.data[this._idx(0,be)],this.data[this._idx(pe,be)]=this.data[this._idx(pe-1,be)],this.data[this._idx(be,-1)]=this.data[this._idx(be,0)],this.data[this._idx(be,pe)]=this.data[this._idx(be,pe-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(pe,-1)]=this.data[this._idx(pe-1,0)],this.data[this._idx(-1,pe)]=this.data[this._idx(0,pe-1)],this.data[this._idx(pe,pe)]=this.data[this._idx(pe-1,pe-1)]};fc.prototype.get=function(R,H){var ne=new Uint8Array(this.data.buffer),pe=this._idx(R,H)*4,be=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return be(ne[pe],ne[pe+1],ne[pe+2])},fc.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},fc.prototype._idx=function(R,H){if(R<-1||R>=this.dim+1||H<-1||H>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(H+1)*this.stride+(R+1)},fc.prototype._unpackMapbox=function(R,H,ne){return(R*256*256+H*256+ne)/10-1e4},fc.prototype._unpackTerrarium=function(R,H,ne){return R*256+H+ne/256-32768},fc.prototype.getPixels=function(){return new Il({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},fc.prototype.backfillBorder=function(R,H,ne){if(this.dim!==R.dim)throw new Error("dem dimension mismatch");var pe=H*this.dim,be=H*this.dim+this.dim,Se=ne*this.dim,ze=ne*this.dim+this.dim;switch(H){case-1:pe=be-1;break;case 1:be=pe+1;break}switch(ne){case-1:Se=ze-1;break;case 1:ze=Se+1;break}for(var tt=-H*this.dim,ct=-ne*this.dim,mt=Se;mt<ze;mt++)for(var It=pe;It<be;It++)this.data[this._idx(It,mt)]=R.data[this._idx(It+tt,mt+ct)]},Be("DEMData",fc);function xM(L,R){var H={};if(!R)return H;for(var ne=function(){var Se=be[pe],ze=Se.layerIds.map(function(It){return R.getLayer(It)}).filter(Boolean);if(ze.length!==0){Se.layers=ze,Se.stateDependentLayerIds&&(Se.stateDependentLayers=Se.stateDependentLayerIds.map(function(It){return ze.filter(function(Kt){return Kt.id===It})[0]}));for(var tt=0,ct=ze;tt<ct.length;tt+=1){var mt=ct[tt];H[mt.id]=Se}}},pe=0,be=L;pe<be.length;pe+=1)ne();return H}var gd=function(R){this._stringToNumber={},this._numberToString=[];for(var H=0;H<R.length;H++){var ne=R[H];this._stringToNumber[ne]=H,this._numberToString[H]=ne}};gd.prototype.encode=function(R){return this._stringToNumber[R]},gd.prototype.decode=function(R){return this._numberToString[R]};var md=function(R,H,ne,pe,be){this.type="Feature",this._vectorTileFeature=R,R._z=H,R._x=ne,R._y=pe,this.properties=R.properties,this.id=be},Og={geometry:{configurable:!0}};Og.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Og.geometry.set=function(L){this._geometry=L},md.prototype.toJSON=function(){var R={geometry:this.geometry};for(var H in this)H==="_geometry"||H==="_vectorTileFeature"||(R[H]=this[H]);return R},Object.defineProperties(md.prototype,Og);var Hh=function(){this.state={},this.stateChanges={},this.deletedStates={}};Hh.prototype.updateState=function(R,H,ne){var pe=String(H);if(this.stateChanges[R]=this.stateChanges[R]||{},this.stateChanges[R][pe]=this.stateChanges[R][pe]||{},S(this.stateChanges[R][pe],ne),this.deletedStates[R]===null){this.deletedStates[R]={};for(var be in this.state[R])be!==pe&&(this.deletedStates[R][be]=null)}else{var Se=this.deletedStates[R]&&this.deletedStates[R][pe]===null;if(Se){this.deletedStates[R][pe]={};for(var ze in this.state[R][pe])ne[ze]||(this.deletedStates[R][pe][ze]=null)}else for(var tt in ne){var ct=this.deletedStates[R]&&this.deletedStates[R][pe]&&this.deletedStates[R][pe][tt]===null;ct&&delete this.deletedStates[R][pe][tt]}}},Hh.prototype.removeFeatureState=function(R,H,ne){var pe=this.deletedStates[R]===null;if(!pe){var be=String(H);if(this.deletedStates[R]=this.deletedStates[R]||{},ne&&H!==void 0)this.deletedStates[R][be]!==null&&(this.deletedStates[R][be]=this.deletedStates[R][be]||{},this.deletedStates[R][be][ne]=null);else if(H!==void 0){var Se=this.stateChanges[R]&&this.stateChanges[R][be];if(Se){this.deletedStates[R][be]={};for(ne in this.stateChanges[R][be])this.deletedStates[R][be][ne]=null}else this.deletedStates[R][be]=null}else this.deletedStates[R]=null}},Hh.prototype.getState=function(R,H){var ne=String(H),pe=this.state[R]||{},be=this.stateChanges[R]||{},Se=S({},pe[ne],be[ne]);if(this.deletedStates[R]===null)return{};if(this.deletedStates[R]){var ze=this.deletedStates[R][H];if(ze===null)return{};for(var tt in ze)delete Se[tt]}return Se},Hh.prototype.initializeTileState=function(R,H){R.setFeatureState(this.state,H)},Hh.prototype.coalesceChanges=function(R,H){var ne={};for(var pe in this.stateChanges){this.state[pe]=this.state[pe]||{};var be={};for(var Se in this.stateChanges[pe])this.state[pe][Se]||(this.state[pe][Se]={}),S(this.state[pe][Se],this.stateChanges[pe][Se]),be[Se]=this.state[pe][Se];ne[pe]=be}for(var ze in this.deletedStates){this.state[ze]=this.state[ze]||{};var tt={};if(this.deletedStates[ze]===null)for(var ct in this.state[ze])tt[ct]={},this.state[ze][ct]={};else for(var mt in this.deletedStates[ze]){var It=this.deletedStates[ze][mt]===null;if(It)this.state[ze][mt]={};else for(var Kt=0,Wt=Object.keys(this.deletedStates[ze][mt]);Kt<Wt.length;Kt+=1){var cr=Wt[Kt];delete this.state[ze][mt][cr]}tt[mt]=this.state[ze][mt]}ne[ze]=ne[ze]||{},S(ne[ze],tt)}if(this.stateChanges={},this.deletedStates={},Object.keys(ne).length!==0)for(var Br in R){var hn=R[Br];hn.setFeatureState(ne,H)}};var cc=function(R,H){this.tileID=R,this.x=R.canonical.x,this.y=R.canonical.y,this.z=R.canonical.z,this.grid=new Yo(Ga,16,0),this.grid3D=new Yo(Ga,16,0),this.featureIndexArray=new Lv,this.promoteId=H};cc.prototype.insert=function(R,H,ne,pe,be,Se){var ze=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(ne,pe,be);for(var tt=Se?this.grid3D:this.grid,ct=0;ct<H.length;ct++){for(var mt=H[ct],It=[1/0,1/0,-1/0,-1/0],Kt=0;Kt<mt.length;Kt++){var Wt=mt[Kt];It[0]=Math.min(It[0],Wt.x),It[1]=Math.min(It[1],Wt.y),It[2]=Math.max(It[2],Wt.x),It[3]=Math.max(It[3],Wt.y)}It[0]<Ga&&It[1]<Ga&&It[2]>=0&&It[3]>=0&&tt.insert(ze,It[0],It[1],It[2],It[3])}},cc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Lh.VectorTile(new od(this.rawTileData)).layers,this.sourceLayerCoder=new gd(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},cc.prototype.query=function(R,H,ne,pe){var be=this;this.loadVTLayers();for(var Se=R.params||{},ze=Ga/R.tileSize/R.scale,tt=Bf(Se.filter),ct=R.queryGeometry,mt=R.queryPadding*ze,It=Wx(ct),Kt=this.grid.query(It.minX-mt,It.minY-mt,It.maxX+mt,It.maxY+mt),Wt=Wx(R.cameraQueryGeometry),cr=this.grid3D.query(Wt.minX-mt,Wt.minY-mt,Wt.maxX+mt,Wt.maxY+mt,function(Kn,fa,sa,Ba){return Wf(R.cameraQueryGeometry,Kn-mt,fa-mt,sa+mt,Ba+mt)}),Br=0,hn=cr;Br<hn.length;Br+=1){var rn=hn[Br];Kt.push(rn)}Kt.sort(bM);for(var kn={},_n,Sn=function(Kn){var fa=Kt[Kn];if(fa!==_n){_n=fa;var sa=be.featureIndexArray.get(fa),Ba=null;be.loadMatchingFeature(kn,sa.bucketIndex,sa.sourceLayerIndex,sa.featureIndex,tt,Se.layers,Se.availableImages,H,ne,pe,function(ka,La,ni){return Ba||(Ba=Gi(ka)),La.queryIntersectsFeature(ct,ka,ni,Ba,be.z,R.transform,ze,R.pixelPosMatrix)})}},zn=0;zn<Kt.length;zn++)Sn(zn);return kn},cc.prototype.loadMatchingFeature=function(R,H,ne,pe,be,Se,ze,tt,ct,mt,It){var Kt=this.bucketLayerIDs[H];if(!(Se&&!I(Se,Kt))){var Wt=this.sourceLayerCoder.decode(ne),cr=this.vtLayers[Wt],Br=cr.feature(pe);if(!!be.filter(new ui(this.tileID.overscaledZ),Br))for(var hn=this.getId(Br,Wt),rn=0;rn<Kt.length;rn++){var kn=Kt[rn];if(!(Se&&Se.indexOf(kn)<0)){var _n=tt[kn];if(!!_n){var Sn={};hn!==void 0&&mt&&(Sn=mt.getState(_n.sourceLayer||"_geojsonTileLayer",hn));var zn=ct[kn];zn.paint=Gx(zn.paint,_n.paint,Br,Sn,ze),zn.layout=Gx(zn.layout,_n.layout,Br,Sn,ze);var Kn=!It||It(Br,_n,Sn);if(!!Kn){var fa=new md(Br,this.z,this.x,this.y,hn);fa.layer=zn;var sa=R[kn];sa===void 0&&(sa=R[kn]=[]),sa.push({featureIndex:pe,feature:fa,intersectionZ:Kn})}}}}}},cc.prototype.lookupSymbolFeatures=function(R,H,ne,pe,be,Se,ze,tt){var ct={};this.loadVTLayers();for(var mt=Bf(be),It=0,Kt=R;It<Kt.length;It+=1){var Wt=Kt[It];this.loadMatchingFeature(ct,ne,pe,Wt,mt,Se,ze,tt,H)}return ct},cc.prototype.hasLayer=function(R){for(var H=0,ne=this.bucketLayerIDs;H<ne.length;H+=1)for(var pe=ne[H],be=0,Se=pe;be<Se.length;be+=1){var ze=Se[be];if(R===ze)return!0}return!1},cc.prototype.getId=function(R,H){var ne=R.id;if(this.promoteId){var pe=typeof this.promoteId=="string"?this.promoteId:this.promoteId[H];ne=R.properties[pe],typeof ne=="boolean"&&(ne=Number(ne))}return ne},Be("FeatureIndex",cc,{omit:["rawTileData","sourceLayerCoder"]});function Gx(L,R,H,ne,pe){return D(L,function(be,Se){var ze=R instanceof Hi?R.get(Se):null;return ze&&ze.evaluate?ze.evaluate(H,ne,pe):ze})}function Wx(L){for(var R=1/0,H=1/0,ne=-1/0,pe=-1/0,be=0,Se=L;be<Se.length;be+=1){var ze=Se[be];R=Math.min(R,ze.x),H=Math.min(H,ze.y),ne=Math.max(ne,ze.x),pe=Math.max(pe,ze.y)}return{minX:R,minY:H,maxX:ne,maxY:pe}}function bM(L,R){return R-L}var _M=3e4,gs=function(R,H){this.tileID=R,this.uid=_(),this.uses=0,this.tileSize=H,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};gs.prototype.registerFadeDuration=function(R){var H=R+this.timeAdded;H<Q.now()||this.fadeEndTime&&H<this.fadeEndTime||(this.fadeEndTime=H)},gs.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},gs.prototype.loadVectorData=function(R,H,ne){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!R){this.collisionBoxArray=new Gf;return}R.featureIndex&&(this.latestFeatureIndex=R.featureIndex,R.rawTileData?(this.latestRawTileData=R.rawTileData,this.latestFeatureIndex.rawTileData=R.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=R.collisionBoxArray,this.buckets=xM(R.buckets,H.style),this.hasSymbolBuckets=!1;for(var pe in this.buckets){var be=this.buckets[pe];if(be instanceof Zi)if(this.hasSymbolBuckets=!0,ne)be.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Se in this.buckets){var ze=this.buckets[Se];if(ze instanceof Zi&&ze.hasRTLText){this.hasRTLText=!0,Ci();break}}this.queryPadding=0;for(var tt in this.buckets){var ct=this.buckets[tt];this.queryPadding=Math.max(this.queryPadding,H.style.getLayer(tt).queryRadius(ct))}R.imageAtlas&&(this.imageAtlas=R.imageAtlas),R.glyphAtlasImage&&(this.glyphAtlasImage=R.glyphAtlasImage)},gs.prototype.unloadVectorData=function(){for(var R in this.buckets)this.buckets[R].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},gs.prototype.getBucket=function(R){return this.buckets[R.id]},gs.prototype.upload=function(R){for(var H in this.buckets){var ne=this.buckets[H];ne.uploadPending()&&ne.upload(R)}var pe=R.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Qc(R,this.imageAtlas.image,pe.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Qc(R,this.glyphAtlasImage,pe.ALPHA),this.glyphAtlasImage=null)},gs.prototype.prepare=function(R){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(R,this.imageAtlasTexture)},gs.prototype.queryRenderedFeatures=function(R,H,ne,pe,be,Se,ze,tt,ct,mt){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:pe,cameraQueryGeometry:be,scale:Se,tileSize:this.tileSize,pixelPosMatrix:mt,transform:tt,params:ze,queryPadding:this.queryPadding*ct},R,H,ne)},gs.prototype.querySourceFeatures=function(R,H){var ne=this.latestFeatureIndex;if(!(!ne||!ne.rawTileData)){var pe=ne.loadVTLayers(),be=H?H.sourceLayer:"",Se=pe._geojsonTileLayer||pe[be];if(!!Se)for(var ze=Bf(H&&H.filter),tt=this.tileID.canonical,ct=tt.z,mt=tt.x,It=tt.y,Kt={z:ct,x:mt,y:It},Wt=0;Wt<Se.length;Wt++){var cr=Se.feature(Wt);if(ze.filter(new ui(this.tileID.overscaledZ),cr)){var Br=ne.getId(cr,be),hn=new md(cr,ct,mt,It,Br);hn.tile=Kt,R.push(hn)}}}},gs.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},gs.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},gs.prototype.setExpiryData=function(R){var H=this.expirationTime;if(R.cacheControl){var ne=re(R.cacheControl);ne["max-age"]&&(this.expirationTime=Date.now()+ne["max-age"]*1e3)}else R.expires&&(this.expirationTime=new Date(R.expires).getTime());if(this.expirationTime){var pe=Date.now(),be=!1;if(this.expirationTime>pe)be=!1;else if(!H)be=!0;else if(this.expirationTime<H)be=!0;else{var Se=this.expirationTime-H;Se?this.expirationTime=pe+Math.max(Se,_M):be=!0}be?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},gs.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},gs.prototype.setFeatureState=function(R,H){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(R).length===0)){var ne=this.latestFeatureIndex.loadVTLayers();for(var pe in this.buckets)if(!!H.style.hasLayer(pe)){var be=this.buckets[pe],Se=be.layers[0].sourceLayer||"_geojsonTileLayer",ze=ne[Se],tt=R[Se];if(!(!ze||!tt||Object.keys(tt).length===0)){be.update(tt,ze,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ct=H&&H.style&&H.style.getLayer(pe);ct&&(this.queryPadding=Math.max(this.queryPadding,ct.queryRadius(be)))}}}},gs.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},gs.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Q.now()},gs.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},gs.prototype.setHoldDuration=function(R){this.symbolFadeHoldUntil=Q.now()+R},gs.prototype.setDependencies=function(R,H){for(var ne={},pe=0,be=H;pe<be.length;pe+=1){var Se=be[pe];ne[Se]=!0}this.dependencies[R]=ne},gs.prototype.hasDependency=function(R,H){for(var ne=0,pe=R;ne<pe.length;ne+=1){var be=pe[ne],Se=this.dependencies[be];if(Se)for(var ze=0,tt=H;ze<tt.length;ze+=1){var ct=tt[ze];if(Se[ct])return!0}}return!1};var wM=["type","source","source-layer","minzoom","maxzoom","filter","layout"],Ec=self.performance,Yx=function(R){this._marks={start:[R.url,"start"].join("#"),end:[R.url,"end"].join("#"),measure:R.url.toString()},Ec.mark(this._marks.start)};Yx.prototype.finish=function(){Ec.mark(this._marks.end);var R=Ec.getEntriesByName(this._marks.measure);return R.length===0&&(Ec.measure(this._marks.measure,this._marks.start,this._marks.end),R=Ec.getEntriesByName(this._marks.measure),Ec.clearMarks(this._marks.start),Ec.clearMarks(this._marks.end),Ec.clearMeasures(this._marks.measure)),R},t.Actor=Vh,t.AlphaImage=$c,t.CanonicalTileID=eh,t.CollisionBoxArray=Gf,t.Color=di,t.DEMData=fc,t.DataConstantProperty=Na,t.DictionaryCoder=gd,t.EXTENT=Ga,t.ErrorEvent=Sr,t.EvaluationParameters=ui,t.Event=nn,t.Evented=yr,t.FeatureIndex=cc,t.FillBucket=yf,t.FillExtrusionBucket=xf,t.ImageAtlas=Vv,t.ImagePosition=ld,t.LineBucket=Fl,t.LngLat=bo,t.LngLatBounds=ts,t.MercatorCoordinate=qc,t.ONE_EM=Ls,t.OverscaledTileID=rs,t.Point=f,t.Point$1=f,t.Properties=Ji,t.Protobuf=od,t.RGBAImage=Il,t.RequestManager=Oe,t.RequestPerformance=Yx,t.ResourceType=mr,t.SegmentVector=X,t.SourceFeatureState=Hh,t.StructArrayLayout1ui2=Tc,t.StructArrayLayout2f1f2i16=df,t.StructArrayLayout2i4=Wc,t.StructArrayLayout3ui6=gf,t.StructArrayLayout4i8=Nf,t.SymbolBucket=Zi,t.Texture=Qc,t.Tile=gs,t.Transitionable=Co,t.Uniform1f=Gr,t.Uniform1i=jr,t.Uniform2f=qr,t.Uniform3f=dn,t.Uniform4f=Cn,t.UniformColor=Vn,t.UniformMatrix4f=na,t.UnwrappedTileID=Hx,t.ValidationError=Qt,t.WritingMode=cu,t.ZoomHistory=jt,t.add=kh,t.addDynamicAttributes=Dg,t.asyncAll=x,t.bezier=d,t.bindAll=M,t.browser=Q,t.cacheEntryPossiblyAdded=Je,t.clamp=m,t.clearTileCache=Ct,t.clipLine=Sx,t.clone=qp,t.clone$1=O,t.clone$2=hg,t.collisionCircleLayout=rS,t.config=ae,t.create=Ah,t.create$1=Kc,t.create$2=Zc,t.createCommonjsModule=n,t.createExpression=Su,t.createLayout=Xo,t.createStyleLayer=vM,t.cross=R5,t.deepEqual=s,t.dot=P5,t.dot$1=O5,t.ease=y,t.emitValidationErrors=ko,t.endsWith=E,t.enforceCacheSizeLimit=gt,t.evaluateSizeForFeature=yx,t.evaluateSizeForZoom=xx,t.evaluateVariableOffset=Cx,t.evented=xi,t.extend=S,t.featureFilter=Bf,t.filterObject=N,t.fromRotation=Th,t.getAnchorAlignment=Eg,t.getAnchorJustification=Rg,t.getArrayBuffer=Re,t.getImage=Tr,t.getJSON=Me,t.getRTLTextPluginStatus=xo,t.getReferrer=Rr,t.getVideo=Mr,t.identity=Sh,t.invert=Sc,t.isChar=Zt,t.isMapboxURL=He,t.keysDifference=b,t.makeRequest=we,t.mapObject=D,t.mercatorXfromLng=Nx,t.mercatorYfromLat=Ux,t.mercatorZfromAltitude=Vx,t.mul=cg,t.multiply=Mc,t.mvt=Lh,t.normalize=Rv,t.number=po,t.offscreenCanvasSupported=lr,t.ortho=fg,t.parseGlyphPBF=ES,t.pbf=od,t.performSymbolLayout=XS,t.perspective=Pv,t.pick=w,t.plugin=Ka,t.polygonIntersectsPolygon=si,t.postMapLoadEvent=At,t.postTurnstileEvent=Nt,t.potpack=fx,t.refProperties=wM,t.register=Be,t.registerForPluginStateChange=Bi,t.rotate=$s,t.rotateX=Dl,t.rotateZ=Mh,t.scale=Rl,t.scale$1=z5,t.scale$2=pg,t.setCacheLimits=or,t.setRTLTextPlugin=ga,t.sphericalToCartesian=Z,t.sqrLen=U5,t.styleSpec=ar,t.sub=I5,t.symbolSize=BS,t.transformMat3=D5,t.transformMat4=ed,t.translate=Ho,t.triggerPluginCompletionEvent=za,t.uniqueId=_,t.validateCustomStyleLayer=fM,t.validateLight=wi,t.validateStyle=Io,t.values=A,t.vectorTile=Lh,t.version=a,t.warnOnce=V,t.webpSupported=ie,t.window=self,t.wrap=g}),p(["./shared"],function(t){function n(qe){var we=typeof qe;if(we==="number"||we==="boolean"||we==="string"||qe===void 0||qe===null)return JSON.stringify(qe);if(Array.isArray(qe)){for(var Me="[",Re=0,Ye=qe;Re<Ye.length;Re+=1){var Qe=Ye[Re];Me+=n(Qe)+","}return Me+"]"}for(var ot=Object.keys(qe).sort(),st="{",pt=0;pt<ot.length;pt++)st+=JSON.stringify(ot[pt])+":"+n(qe[ot[pt]])+",";return st+"}"}function a(qe){for(var we="",Me=0,Re=t.refProperties;Me<Re.length;Me+=1){var Ye=Re[Me];we+="/"+n(qe[Ye])}return we}function i(qe,we){for(var Me={},Re=0;Re<qe.length;Re++){var Ye=we&&we[qe[Re].id]||a(qe[Re]);we&&(we[qe[Re].id]=Ye);var Qe=Me[Ye];Qe||(Qe=Me[Ye]=[]),Qe.push(qe[Re])}var ot=[];for(var st in Me)ot.push(Me[st]);return ot}var r=function(we){this.keyCache={},we&&this.replace(we)};r.prototype.replace=function(we){this._layerConfigs={},this._layers={},this.update(we,[])},r.prototype.update=function(we,Me){for(var Re=this,Ye=0,Qe=we;Ye<Qe.length;Ye+=1){var ot=Qe[Ye];this._layerConfigs[ot.id]=ot;var st=this._layers[ot.id]=t.createStyleLayer(ot);st._featureFilter=t.featureFilter(st.filter),this.keyCache[ot.id]&&delete this.keyCache[ot.id]}for(var pt=0,wt=Me;pt<wt.length;pt+=1){var Yt=wt[pt];delete this.keyCache[Yt],delete this._layerConfigs[Yt],delete this._layers[Yt]}this.familiesBySource={};for(var wr=i(t.values(this._layerConfigs),this.keyCache),Tr=0,Mr=wr;Tr<Mr.length;Tr+=1){var _r=Mr[Tr],Or=_r.map(function(kr){return Re._layers[kr.id]}),nn=Or[0];if(nn.visibility!=="none"){var Sr=nn.source||"",yr=this.familiesBySource[Sr];yr||(yr=this.familiesBySource[Sr]={});var gn=nn.sourceLayer||"_geojsonTileLayer",Xr=yr[gn];Xr||(Xr=yr[gn]=[]),Xr.push(Or)}}};var f=1,u=function(we){var Me={},Re=[];for(var Ye in we){var Qe=we[Ye],ot=Me[Ye]={};for(var st in Qe){var pt=Qe[+st];if(!(!pt||pt.bitmap.width===0||pt.bitmap.height===0)){var wt={x:0,y:0,w:pt.bitmap.width+2*f,h:pt.bitmap.height+2*f};Re.push(wt),ot[st]={rect:wt,metrics:pt.metrics}}}}var Yt=t.potpack(Re),wr=Yt.w,Tr=Yt.h,Mr=new t.AlphaImage({width:wr||1,height:Tr||1});for(var _r in we){var Or=we[_r];for(var nn in Or){var Sr=Or[+nn];if(!(!Sr||Sr.bitmap.width===0||Sr.bitmap.height===0)){var yr=Me[_r][nn].rect;t.AlphaImage.copy(Sr.bitmap,Mr,{x:0,y:0},{x:yr.x+f,y:yr.y+f},Sr.bitmap)}}}this.image=Mr,this.positions=Me};t.register("GlyphAtlas",u);var s=function(we){this.tileID=new t.OverscaledTileID(we.tileID.overscaledZ,we.tileID.wrap,we.tileID.canonical.z,we.tileID.canonical.x,we.tileID.canonical.y),this.uid=we.uid,this.zoom=we.zoom,this.pixelRatio=we.pixelRatio,this.tileSize=we.tileSize,this.source=we.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=we.showCollisionBoxes,this.collectResourceTiming=!!we.collectResourceTiming,this.returnDependencies=!!we.returnDependencies,this.promoteId=we.promoteId};s.prototype.parse=function(we,Me,Re,Ye,Qe){var ot=this;this.status="parsing",this.data=we,this.collisionBoxArray=new t.CollisionBoxArray;var st=new t.DictionaryCoder(Object.keys(we.layers).sort()),pt=new t.FeatureIndex(this.tileID,this.promoteId);pt.bucketLayerIDs=[];var wt={},Yt={featureIndex:pt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Re},wr=Me.familiesBySource[this.source];for(var Tr in wr){var Mr=we.layers[Tr];if(!!Mr){Mr.version===1&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+Tr+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var _r=st.encode(Tr),Or=[],nn=0;nn<Mr.length;nn++){var Sr=Mr.feature(nn),yr=pt.getId(Sr,Tr);Or.push({feature:Sr,id:yr,index:nn,sourceLayerIndex:_r})}for(var gn=0,Xr=wr[Tr];gn<Xr.length;gn+=1){var kr=Xr[gn],sn=kr[0];if(!(sn.minzoom&&this.zoom<Math.floor(sn.minzoom))&&!(sn.maxzoom&&this.zoom>=sn.maxzoom)&&sn.visibility!=="none"){h(kr,this.zoom,Re);var cn=wt[sn.id]=sn.createBucket({index:pt.bucketLayerIDs.length,layers:kr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:_r,sourceID:this.source});cn.populate(Or,Yt,this.tileID.canonical),pt.bucketLayerIDs.push(kr.map(function(xr){return xr.id}))}}}}var $r,at,Ot,nr,dr=t.mapObject(Yt.glyphDependencies,function(xr){return Object.keys(xr).map(Number)});Object.keys(dr).length?Ye.send("getGlyphs",{uid:this.uid,stacks:dr},function(xr,on){$r||($r=xr,at=on,Ur.call(ot))}):at={};var Zr=Object.keys(Yt.iconDependencies);Zr.length?Ye.send("getImages",{icons:Zr,source:this.source,tileID:this.tileID,type:"icons"},function(xr,on){$r||($r=xr,Ot=on,Ur.call(ot))}):Ot={};var Lr=Object.keys(Yt.patternDependencies);Lr.length?Ye.send("getImages",{icons:Lr,source:this.source,tileID:this.tileID,type:"patterns"},function(xr,on){$r||($r=xr,nr=on,Ur.call(ot))}):nr={},Ur.call(this);function Ur(){if($r)return Qe($r);if(at&&Ot&&nr){var xr=new u(at),on=new t.ImageAtlas(Ot,nr);for(var Pn in wt){var En=wt[Pn];En instanceof t.SymbolBucket?(h(En.layers,this.zoom,Re),t.performSymbolLayout(En,at,xr.positions,Ot,on.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):En.hasPattern&&(En instanceof t.LineBucket||En instanceof t.FillBucket||En instanceof t.FillExtrusionBucket)&&(h(En.layers,this.zoom,Re),En.addFeatures(Yt,this.tileID.canonical,on.patternPositions))}this.status="done",Qe(null,{buckets:t.values(wt).filter(function($n){return!$n.isEmpty()}),featureIndex:pt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:xr.image,imageAtlas:on,glyphMap:this.returnDependencies?at:null,iconMap:this.returnDependencies?Ot:null,glyphPositions:this.returnDependencies?xr.positions:null})}}};function h(qe,we,Me){for(var Re=new t.EvaluationParameters(we),Ye=0,Qe=qe;Ye<Qe.length;Ye+=1){var ot=Qe[Ye];ot.recalculate(Re,Me)}}function d(qe,we){var Me=t.getArrayBuffer(qe.request,function(Re,Ye,Qe,ot){Re?we(Re):Ye&&we(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(Ye)),rawData:Ye,cacheControl:Qe,expires:ot})});return function(){Me.cancel(),we()}}var y=function(we,Me,Re,Ye){this.actor=we,this.layerIndex=Me,this.availableImages=Re,this.loadVectorData=Ye||d,this.loading={},this.loaded={}};y.prototype.loadTile=function(we,Me){var Re=this,Ye=we.uid;this.loading||(this.loading={});var Qe=we&&we.request&&we.request.collectResourceTiming?new t.RequestPerformance(we.request):!1,ot=this.loading[Ye]=new s(we);ot.abort=this.loadVectorData(we,function(st,pt){if(delete Re.loading[Ye],st||!pt)return ot.status="done",Re.loaded[Ye]=ot,Me(st);var wt=pt.rawData,Yt={};pt.expires&&(Yt.expires=pt.expires),pt.cacheControl&&(Yt.cacheControl=pt.cacheControl);var wr={};if(Qe){var Tr=Qe.finish();Tr&&(wr.resourceTiming=JSON.parse(JSON.stringify(Tr)))}ot.vectorTile=pt.vectorTile,ot.parse(pt.vectorTile,Re.layerIndex,Re.availableImages,Re.actor,function(Mr,_r){if(Mr||!_r)return Me(Mr);Me(null,t.extend({rawTileData:wt.slice(0)},_r,Yt,wr))}),Re.loaded=Re.loaded||{},Re.loaded[Ye]=ot})},y.prototype.reloadTile=function(we,Me){var Re=this,Ye=this.loaded,Qe=we.uid,ot=this;if(Ye&&Ye[Qe]){var st=Ye[Qe];st.showCollisionBoxes=we.showCollisionBoxes;var pt=function(wt,Yt){var wr=st.reloadCallback;wr&&(delete st.reloadCallback,st.parse(st.vectorTile,ot.layerIndex,Re.availableImages,ot.actor,wr)),Me(wt,Yt)};st.status==="parsing"?st.reloadCallback=pt:st.status==="done"&&(st.vectorTile?st.parse(st.vectorTile,this.layerIndex,this.availableImages,this.actor,pt):pt())}},y.prototype.abortTile=function(we,Me){var Re=this.loading,Ye=we.uid;Re&&Re[Ye]&&Re[Ye].abort&&(Re[Ye].abort(),delete Re[Ye]),Me()},y.prototype.removeTile=function(we,Me){var Re=this.loaded,Ye=we.uid;Re&&Re[Ye]&&delete Re[Ye],Me()};var m=t.window.ImageBitmap,g=function(){this.loaded={}};g.prototype.loadTile=function(we,Me){var Re=we.uid,Ye=we.encoding,Qe=we.rawImageData,ot=m&&Qe instanceof m?this.getImageData(Qe):Qe,st=new t.DEMData(Re,ot,Ye);this.loaded=this.loaded||{},this.loaded[Re]=st,Me(null,st)},g.prototype.getImageData=function(we){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(we.width,we.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=we.width,this.offscreenCanvas.height=we.height,this.offscreenCanvasContext.drawImage(we,0,0,we.width,we.height);var Me=this.offscreenCanvasContext.getImageData(-1,-1,we.width+2,we.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:Me.width,height:Me.height},Me.data)},g.prototype.removeTile=function(we){var Me=this.loaded,Re=we.uid;Me&&Me[Re]&&delete Me[Re]};var x=A;function A(qe,we){var Me=qe&&qe.type,Re;if(Me==="FeatureCollection")for(Re=0;Re<qe.features.length;Re++)A(qe.features[Re],we);else if(Me==="GeometryCollection")for(Re=0;Re<qe.geometries.length;Re++)A(qe.geometries[Re],we);else if(Me==="Feature")A(qe.geometry,we);else if(Me==="Polygon")b(qe.coordinates,we);else if(Me==="MultiPolygon")for(Re=0;Re<qe.coordinates.length;Re++)b(qe.coordinates[Re],we);return qe}function b(qe,we){if(qe.length!==0){S(qe[0],we);for(var Me=1;Me<qe.length;Me++)S(qe[Me],!we)}}function S(qe,we){for(var Me=0,Re=0,Ye=qe.length,Qe=Ye-1;Re<Ye;Qe=Re++)Me+=(qe[Re][0]-qe[Qe][0])*(qe[Qe][1]+qe[Re][1]);Me>=0!=!!we&&qe.reverse()}var w=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,T=function(we){this._feature=we,this.extent=t.EXTENT,this.type=we.type,this.properties=we.tags,"id"in we&&!isNaN(we.id)&&(this.id=parseInt(we.id,10))};T.prototype.loadGeometry=function(){if(this._feature.type===1){for(var we=[],Me=0,Re=this._feature.geometry;Me<Re.length;Me+=1){var Ye=Re[Me];we.push([new t.Point$1(Ye[0],Ye[1])])}return we}else{for(var Qe=[],ot=0,st=this._feature.geometry;ot<st.length;ot+=1){for(var pt=st[ot],wt=[],Yt=0,wr=pt;Yt<wr.length;Yt+=1){var Tr=wr[Yt];wt.push(new t.Point$1(Tr[0],Tr[1]))}Qe.push(wt)}return Qe}},T.prototype.toGeoJSON=function(we,Me,Re){return w.call(this,we,Me,Re)};var _=function(we){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=we.length,this._features=we};_.prototype.feature=function(we){return new T(this._features[we])};var v=t.vectorTile.VectorTileFeature,P=M;function M(qe,we){this.options=we||{},this.features=qe,this.length=qe.length}M.prototype.feature=function(qe){return new E(this.features[qe],this.options.extent)};function E(qe,we){this.id=typeof qe.id=="number"?qe.id:void 0,this.type=qe.type,this.rawGeometry=qe.type===1?[qe.geometry]:qe.geometry,this.properties=qe.tags,this.extent=we||4096}E.prototype.loadGeometry=function(){var qe=this.rawGeometry;this.geometry=[];for(var we=0;we<qe.length;we++){for(var Me=qe[we],Re=[],Ye=0;Ye<Me.length;Ye++)Re.push(new t.Point$1(Me[Ye][0],Me[Ye][1]));this.geometry.push(Re)}return this.geometry},E.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var qe=this.geometry,we=1/0,Me=-1/0,Re=1/0,Ye=-1/0,Qe=0;Qe<qe.length;Qe++)for(var ot=qe[Qe],st=0;st<ot.length;st++){var pt=ot[st];we=Math.min(we,pt.x),Me=Math.max(Me,pt.x),Re=Math.min(Re,pt.y),Ye=Math.max(Ye,pt.y)}return[we,Re,Me,Ye]},E.prototype.toGeoJSON=v.prototype.toGeoJSON;var D=F,N=F,O=V,I=P;function F(qe){var we=new t.pbf;return U(qe,we),we.finish()}function V(qe,we){we=we||{};var Me={};for(var Re in qe)Me[Re]=new P(qe[Re].features,we),Me[Re].name=Re,Me[Re].version=we.version,Me[Re].extent=we.extent;return F({layers:Me})}function U(qe,we){for(var Me in qe.layers)we.writeMessage(3,j,qe.layers[Me])}function j(qe,we){we.writeVarintField(15,qe.version||1),we.writeStringField(1,qe.name||""),we.writeVarintField(5,qe.extent||4096);var Me,Re={keys:[],values:[],keycache:{},valuecache:{}};for(Me=0;Me<qe.length;Me++)Re.feature=qe.feature(Me),we.writeMessage(2,Z,Re);var Ye=Re.keys;for(Me=0;Me<Ye.length;Me++)we.writeStringField(3,Ye[Me]);var Qe=Re.values;for(Me=0;Me<Qe.length;Me++)we.writeMessage(4,le,Qe[Me])}function Z(qe,we){var Me=qe.feature;Me.id!==void 0&&we.writeVarintField(1,Me.id),we.writeMessage(2,te,qe),we.writeVarintField(3,Me.type),we.writeMessage(4,J,Me)}function te(qe,we){var Me=qe.feature,Re=qe.keys,Ye=qe.values,Qe=qe.keycache,ot=qe.valuecache;for(var st in Me.properties){var pt=Qe[st];typeof pt=="undefined"&&(Re.push(st),pt=Re.length-1,Qe[st]=pt),we.writeVarint(pt);var wt=Me.properties[st],Yt=typeof wt;Yt!=="string"&&Yt!=="boolean"&&Yt!=="number"&&(wt=JSON.stringify(wt));var wr=Yt+":"+wt,Tr=ot[wr];typeof Tr=="undefined"&&(Ye.push(wt),Tr=Ye.length-1,ot[wr]=Tr),we.writeVarint(Tr)}}function re(qe,we){return(we<<3)+(qe&7)}function W(qe){return qe<<1^qe>>31}function J(qe,we){for(var Me=qe.loadGeometry(),Re=qe.type,Ye=0,Qe=0,ot=Me.length,st=0;st<ot;st++){var pt=Me[st],wt=1;Re===1&&(wt=pt.length),we.writeVarint(re(1,wt));for(var Yt=Re===3?pt.length-1:pt.length,wr=0;wr<Yt;wr++){wr===1&&Re!==1&&we.writeVarint(re(2,Yt-1));var Tr=pt[wr].x-Ye,Mr=pt[wr].y-Qe;we.writeVarint(W(Tr)),we.writeVarint(W(Mr)),Ye+=Tr,Qe+=Mr}Re===3&&we.writeVarint(re(7,1))}}function le(qe,we){var Me=typeof qe;Me==="string"?we.writeStringField(1,qe):Me==="boolean"?we.writeBooleanField(7,qe):Me==="number"&&(qe%1!=0?we.writeDoubleField(3,qe):qe<0?we.writeSVarintField(6,qe):we.writeVarintField(5,qe))}D.fromVectorTileJs=N,D.fromGeojsonVt=O,D.GeoJSONWrapper=I;function ue(qe,we,Me,Re,Ye,Qe){if(!(Ye-Re<=Me)){var ot=Re+Ye>>1;se(qe,we,ot,Re,Ye,Qe%2),ue(qe,we,Me,Re,ot-1,Qe+1),ue(qe,we,Me,ot+1,Ye,Qe+1)}}function se(qe,we,Me,Re,Ye,Qe){for(;Ye>Re;){if(Ye-Re>600){var ot=Ye-Re+1,st=Me-Re+1,pt=Math.log(ot),wt=.5*Math.exp(2*pt/3),Yt=.5*Math.sqrt(pt*wt*(ot-wt)/ot)*(st-ot/2<0?-1:1),wr=Math.max(Re,Math.floor(Me-st*wt/ot+Yt)),Tr=Math.min(Ye,Math.floor(Me+(ot-st)*wt/ot+Yt));se(qe,we,Me,wr,Tr,Qe)}var Mr=we[2*Me+Qe],_r=Re,Or=Ye;for(G(qe,we,Re,Me),we[2*Ye+Qe]>Mr&&G(qe,we,Re,Ye);_r<Or;){for(G(qe,we,_r,Or),_r++,Or--;we[2*_r+Qe]<Mr;)_r++;for(;we[2*Or+Qe]>Mr;)Or--}we[2*Re+Qe]===Mr?G(qe,we,Re,Or):(Or++,G(qe,we,Or,Ye)),Or<=Me&&(Re=Or+1),Me<=Or&&(Ye=Or-1)}}function G(qe,we,Me,Re){Y(qe,Me,Re),Y(we,2*Me,2*Re),Y(we,2*Me+1,2*Re+1)}function Y(qe,we,Me){var Re=qe[we];qe[we]=qe[Me],qe[Me]=Re}function ee(qe,we,Me,Re,Ye,Qe,ot){for(var st=[0,qe.length-1,0],pt=[],wt,Yt;st.length;){var wr=st.pop(),Tr=st.pop(),Mr=st.pop();if(Tr-Mr<=ot){for(var _r=Mr;_r<=Tr;_r++)wt=we[2*_r],Yt=we[2*_r+1],wt>=Me&&wt<=Ye&&Yt>=Re&&Yt<=Qe&&pt.push(qe[_r]);continue}var Or=Math.floor((Mr+Tr)/2);wt=we[2*Or],Yt=we[2*Or+1],wt>=Me&&wt<=Ye&&Yt>=Re&&Yt<=Qe&&pt.push(qe[Or]);var nn=(wr+1)%2;(wr===0?Me<=wt:Re<=Yt)&&(st.push(Mr),st.push(Or-1),st.push(nn)),(wr===0?Ye>=wt:Qe>=Yt)&&(st.push(Or+1),st.push(Tr),st.push(nn))}return pt}function $(qe,we,Me,Re,Ye,Qe){for(var ot=[0,qe.length-1,0],st=[],pt=Ye*Ye;ot.length;){var wt=ot.pop(),Yt=ot.pop(),wr=ot.pop();if(Yt-wr<=Qe){for(var Tr=wr;Tr<=Yt;Tr++)K(we[2*Tr],we[2*Tr+1],Me,Re)<=pt&&st.push(qe[Tr]);continue}var Mr=Math.floor((wr+Yt)/2),_r=we[2*Mr],Or=we[2*Mr+1];K(_r,Or,Me,Re)<=pt&&st.push(qe[Mr]);var nn=(wt+1)%2;(wt===0?Me-Ye<=_r:Re-Ye<=Or)&&(ot.push(wr),ot.push(Mr-1),ot.push(nn)),(wt===0?Me+Ye>=_r:Re+Ye>=Or)&&(ot.push(Mr+1),ot.push(Yt),ot.push(nn))}return st}function K(qe,we,Me,Re){var Ye=qe-Me,Qe=we-Re;return Ye*Ye+Qe*Qe}var Q=function(qe){return qe[0]},ae=function(qe){return qe[1]},ie=function(we,Me,Re,Ye,Qe){Me===void 0&&(Me=Q),Re===void 0&&(Re=ae),Ye===void 0&&(Ye=64),Qe===void 0&&(Qe=Float64Array),this.nodeSize=Ye,this.points=we;for(var ot=we.length<65536?Uint16Array:Uint32Array,st=this.ids=new ot(we.length),pt=this.coords=new Qe(we.length*2),wt=0;wt<we.length;wt++)st[wt]=wt,pt[2*wt]=Me(we[wt]),pt[2*wt+1]=Re(we[wt]);ue(st,pt,Ye,0,st.length-1,0)};ie.prototype.range=function(we,Me,Re,Ye){return ee(this.ids,this.coords,we,Me,Re,Ye,this.nodeSize)},ie.prototype.within=function(we,Me,Re){return $(this.ids,this.coords,we,Me,Re,this.nodeSize)};var oe={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(qe){return qe}},fe=function(we){this.options=Ge(Object.create(oe),we),this.trees=new Array(this.options.maxZoom+1)};fe.prototype.load=function(we){var Me=this.options,Re=Me.log,Ye=Me.minZoom,Qe=Me.maxZoom,ot=Me.nodeSize;Re&&console.time("total time");var st="prepare "+we.length+" points";Re&&console.time(st),this.points=we;for(var pt=[],wt=0;wt<we.length;wt++)!we[wt].geometry||pt.push(ce(we[wt],wt));this.trees[Qe+1]=new ie(pt,_e,Ie,ot,Float32Array),Re&&console.timeEnd(st);for(var Yt=Qe;Yt>=Ye;Yt--){var wr=+Date.now();pt=this._cluster(pt,Yt),this.trees[Yt]=new ie(pt,_e,Ie,ot,Float32Array),Re&&console.log("z%d: %d clusters in %dms",Yt,pt.length,+Date.now()-wr)}return Re&&console.timeEnd("total time"),this},fe.prototype.getClusters=function(we,Me){var Re=((we[0]+180)%360+360)%360-180,Ye=Math.max(-90,Math.min(90,we[1])),Qe=we[2]===180?180:((we[2]+180)%360+360)%360-180,ot=Math.max(-90,Math.min(90,we[3]));if(we[2]-we[0]>=360)Re=-180,Qe=180;else if(Re>Qe){var st=this.getClusters([Re,Ye,180,ot],Me),pt=this.getClusters([-180,Ye,Qe,ot],Me);return st.concat(pt)}for(var wt=this.trees[this._limitZoom(Me)],Yt=wt.range(ke(Re),Ae(ot),ke(Qe),Ae(Ye)),wr=[],Tr=0,Mr=Yt;Tr<Mr.length;Tr+=1){var _r=Mr[Tr],Or=wt.points[_r];wr.push(Or.numPoints?me(Or):this.points[Or.index])}return wr},fe.prototype.getChildren=function(we){var Me=this._getOriginId(we),Re=this._getOriginZoom(we),Ye="No cluster with the specified id.",Qe=this.trees[Re];if(!Qe)throw new Error(Ye);var ot=Qe.points[Me];if(!ot)throw new Error(Ye);for(var st=this.options.radius/(this.options.extent*Math.pow(2,Re-1)),pt=Qe.within(ot.x,ot.y,st),wt=[],Yt=0,wr=pt;Yt<wr.length;Yt+=1){var Tr=wr[Yt],Mr=Qe.points[Tr];Mr.parentId===we&&wt.push(Mr.numPoints?me(Mr):this.points[Mr.index])}if(wt.length===0)throw new Error(Ye);return wt},fe.prototype.getLeaves=function(we,Me,Re){Me=Me||10,Re=Re||0;var Ye=[];return this._appendLeaves(Ye,we,Me,Re,0),Ye},fe.prototype.getTile=function(we,Me,Re){var Ye=this.trees[this._limitZoom(we)],Qe=Math.pow(2,we),ot=this.options,st=ot.extent,pt=ot.radius,wt=pt/st,Yt=(Re-wt)/Qe,wr=(Re+1+wt)/Qe,Tr={features:[]};return this._addTileFeatures(Ye.range((Me-wt)/Qe,Yt,(Me+1+wt)/Qe,wr),Ye.points,Me,Re,Qe,Tr),Me===0&&this._addTileFeatures(Ye.range(1-wt/Qe,Yt,1,wr),Ye.points,Qe,Re,Qe,Tr),Me===Qe-1&&this._addTileFeatures(Ye.range(0,Yt,wt/Qe,wr),Ye.points,-1,Re,Qe,Tr),Tr.features.length?Tr:null},fe.prototype.getClusterExpansionZoom=function(we){for(var Me=this._getOriginZoom(we)-1;Me<=this.options.maxZoom;){var Re=this.getChildren(we);if(Me++,Re.length!==1)break;we=Re[0].properties.cluster_id}return Me},fe.prototype._appendLeaves=function(we,Me,Re,Ye,Qe){for(var ot=this.getChildren(Me),st=0,pt=ot;st<pt.length;st+=1){var wt=pt[st],Yt=wt.properties;if(Yt&&Yt.cluster?Qe+Yt.point_count<=Ye?Qe+=Yt.point_count:Qe=this._appendLeaves(we,Yt.cluster_id,Re,Ye,Qe):Qe<Ye?Qe++:we.push(wt),we.length===Re)break}return Qe},fe.prototype._addTileFeatures=function(we,Me,Re,Ye,Qe,ot){for(var st=0,pt=we;st<pt.length;st+=1){var wt=pt[st],Yt=Me[wt],wr=Yt.numPoints,Tr={type:1,geometry:[[Math.round(this.options.extent*(Yt.x*Qe-Re)),Math.round(this.options.extent*(Yt.y*Qe-Ye))]],tags:wr?xe(Yt):this.points[Yt.index].properties},Mr=void 0;wr?Mr=Yt.id:this.options.generateId?Mr=Yt.index:this.points[Yt.index].id&&(Mr=this.points[Yt.index].id),Mr!==void 0&&(Tr.id=Mr),ot.features.push(Tr)}},fe.prototype._limitZoom=function(we){return Math.max(this.options.minZoom,Math.min(we,this.options.maxZoom+1))},fe.prototype._cluster=function(we,Me){for(var Re=[],Ye=this.options,Qe=Ye.radius,ot=Ye.extent,st=Ye.reduce,pt=Qe/(ot*Math.pow(2,Me)),wt=0;wt<we.length;wt++){var Yt=we[wt];if(!(Yt.zoom<=Me)){Yt.zoom=Me;for(var wr=this.trees[Me+1],Tr=wr.within(Yt.x,Yt.y,pt),Mr=Yt.numPoints||1,_r=Yt.x*Mr,Or=Yt.y*Mr,nn=st&&Mr>1?this._map(Yt,!0):null,Sr=(wt<<5)+(Me+1)+this.points.length,yr=0,gn=Tr;yr<gn.length;yr+=1){var Xr=gn[yr],kr=wr.points[Xr];if(!(kr.zoom<=Me)){kr.zoom=Me;var sn=kr.numPoints||1;_r+=kr.x*sn,Or+=kr.y*sn,Mr+=sn,kr.parentId=Sr,st&&(nn||(nn=this._map(Yt,!0)),st(nn,this._map(kr)))}}Mr===1?Re.push(Yt):(Yt.parentId=Sr,Re.push(ye(_r/Mr,Or/Mr,Sr,Mr,nn)))}}return Re},fe.prototype._getOriginId=function(we){return we-this.points.length>>5},fe.prototype._getOriginZoom=function(we){return(we-this.points.length)%32},fe.prototype._map=function(we,Me){if(we.numPoints)return Me?Ge({},we.properties):we.properties;var Re=this.points[we.index].properties,Ye=this.options.map(Re);return Me&&Ye===Re?Ge({},Ye):Ye};function ye(qe,we,Me,Re,Ye){return{x:qe,y:we,zoom:1/0,id:Me,parentId:-1,numPoints:Re,properties:Ye}}function ce(qe,we){var Me=qe.geometry.coordinates,Re=Me[0],Ye=Me[1];return{x:ke(Re),y:Ae(Ye),zoom:1/0,index:we,parentId:-1}}function me(qe){return{type:"Feature",id:qe.id,properties:xe(qe),geometry:{type:"Point",coordinates:[Oe(qe.x),He(qe.y)]}}}function xe(qe){var we=qe.numPoints,Me=we>=1e4?Math.round(we/1e3)+"k":we>=1e3?Math.round(we/100)/10+"k":we;return Ge(Ge({},qe.properties),{cluster:!0,cluster_id:qe.id,point_count:we,point_count_abbreviated:Me})}function ke(qe){return qe/360+.5}function Ae(qe){var we=Math.sin(qe*Math.PI/180),Me=.5-.25*Math.log((1+we)/(1-we))/Math.PI;return Me<0?0:Me>1?1:Me}function Oe(qe){return(qe-.5)*360}function He(qe){var we=(180-qe*360)*Math.PI/180;return 360*Math.atan(Math.exp(we))/Math.PI-90}function Ge(qe,we){for(var Me in we)qe[Me]=we[Me];return qe}function _e(qe){return qe.x}function Ie(qe){return qe.y}function We(qe,we,Me,Re){for(var Ye=Re,Qe=Me-we>>1,ot=Me-we,st,pt=qe[we],wt=qe[we+1],Yt=qe[Me],wr=qe[Me+1],Tr=we+3;Tr<Me;Tr+=3){var Mr=et(qe[Tr],qe[Tr+1],pt,wt,Yt,wr);if(Mr>Ye)st=Tr,Ye=Mr;else if(Mr===Ye){var _r=Math.abs(Tr-Qe);_r<ot&&(st=Tr,ot=_r)}}Ye>Re&&(st-we>3&&We(qe,we,st,Re),qe[st+2]=Ye,Me-st>3&&We(qe,st,Me,Re))}function et(qe,we,Me,Re,Ye,Qe){var ot=Ye-Me,st=Qe-Re;if(ot!==0||st!==0){var pt=((qe-Me)*ot+(we-Re)*st)/(ot*ot+st*st);pt>1?(Me=Ye,Re=Qe):pt>0&&(Me+=ot*pt,Re+=st*pt)}return ot=qe-Me,st=we-Re,ot*ot+st*st}function Ne(qe,we,Me,Re){var Ye={id:typeof qe=="undefined"?null:qe,type:we,geometry:Me,tags:Re,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return De(Ye),Ye}function De(qe){var we=qe.geometry,Me=qe.type;if(Me==="Point"||Me==="MultiPoint"||Me==="LineString")Ve(qe,we);else if(Me==="Polygon"||Me==="MultiLineString")for(var Re=0;Re<we.length;Re++)Ve(qe,we[Re]);else if(Me==="MultiPolygon")for(Re=0;Re<we.length;Re++)for(var Ye=0;Ye<we[Re].length;Ye++)Ve(qe,we[Re][Ye])}function Ve(qe,we){for(var Me=0;Me<we.length;Me+=3)qe.minX=Math.min(qe.minX,we[Me]),qe.minY=Math.min(qe.minY,we[Me+1]),qe.maxX=Math.max(qe.maxX,we[Me]),qe.maxY=Math.max(qe.maxY,we[Me+1])}function dt(qe,we){var Me=[];if(qe.type==="FeatureCollection")for(var Re=0;Re<qe.features.length;Re++)Dt(Me,qe.features[Re],we,Re);else qe.type==="Feature"?Dt(Me,qe,we):Dt(Me,{geometry:qe},we);return Me}function Dt(qe,we,Me,Re){if(!!we.geometry){var Ye=we.geometry.coordinates,Qe=we.geometry.type,ot=Math.pow(Me.tolerance/((1<<Me.maxZoom)*Me.extent),2),st=[],pt=we.id;if(Me.promoteId?pt=we.properties[Me.promoteId]:Me.generateId&&(pt=Re||0),Qe==="Point")Gt(Ye,st);else if(Qe==="MultiPoint")for(var wt=0;wt<Ye.length;wt++)Gt(Ye[wt],st);else if(Qe==="LineString")Mt(Ye,st,ot,!1);else if(Qe==="MultiLineString")if(Me.lineMetrics){for(wt=0;wt<Ye.length;wt++)st=[],Mt(Ye[wt],st,ot,!1),qe.push(Ne(pt,"LineString",st,we.properties));return}else zt(Ye,st,ot,!1);else if(Qe==="Polygon")zt(Ye,st,ot,!0);else if(Qe==="MultiPolygon")for(wt=0;wt<Ye.length;wt++){var Yt=[];zt(Ye[wt],Yt,ot,!0),st.push(Yt)}else if(Qe==="GeometryCollection"){for(wt=0;wt<we.geometry.geometries.length;wt++)Dt(qe,{id:pt,geometry:we.geometry.geometries[wt],properties:we.properties},Me,Re);return}else throw new Error("Input data is not a valid GeoJSON object.");qe.push(Ne(pt,Qe,st,we.properties))}}function Gt(qe,we){we.push(Nt(qe[0])),we.push(Et(qe[1])),we.push(0)}function Mt(qe,we,Me,Re){for(var Ye,Qe,ot=0,st=0;st<qe.length;st++){var pt=Nt(qe[st][0]),wt=Et(qe[st][1]);we.push(pt),we.push(wt),we.push(0),st>0&&(Re?ot+=(Ye*wt-pt*Qe)/2:ot+=Math.sqrt(Math.pow(pt-Ye,2)+Math.pow(wt-Qe,2))),Ye=pt,Qe=wt}var Yt=we.length-3;we[2]=1,We(we,0,Yt,Me),we[Yt+2]=1,we.size=Math.abs(ot),we.start=0,we.end=we.size}function zt(qe,we,Me,Re){for(var Ye=0;Ye<qe.length;Ye++){var Qe=[];Mt(qe[Ye],Qe,Me,Re),we.push(Qe)}}function Nt(qe){return qe/360+.5}function Et(qe){var we=Math.sin(qe*Math.PI/180),Me=.5-.25*Math.log((1+we)/(1-we))/Math.PI;return Me<0?0:Me>1?1:Me}function At(qe,we,Me,Re,Ye,Qe,ot,st){if(Me/=we,Re/=we,Qe>=Me&&ot<Re)return qe;if(ot<Me||Qe>=Re)return null;for(var pt=[],wt=0;wt<qe.length;wt++){var Yt=qe[wt],wr=Yt.geometry,Tr=Yt.type,Mr=Ye===0?Yt.minX:Yt.minY,_r=Ye===0?Yt.maxX:Yt.maxY;if(Mr>=Me&&_r<Re){pt.push(Yt);continue}else if(_r<Me||Mr>=Re)continue;var Or=[];if(Tr==="Point"||Tr==="MultiPoint")it(wr,Or,Me,Re,Ye);else if(Tr==="LineString")ht(wr,Or,Me,Re,Ye,!1,st.lineMetrics);else if(Tr==="MultiLineString")Ee(wr,Or,Me,Re,Ye,!1);else if(Tr==="Polygon")Ee(wr,Or,Me,Re,Ye,!0);else if(Tr==="MultiPolygon")for(var nn=0;nn<wr.length;nn++){var Sr=[];Ee(wr[nn],Sr,Me,Re,Ye,!0),Sr.length&&Or.push(Sr)}if(Or.length){if(st.lineMetrics&&Tr==="LineString"){for(nn=0;nn<Or.length;nn++)pt.push(Ne(Yt.id,Tr,Or[nn],Yt.tags));continue}(Tr==="LineString"||Tr==="MultiLineString")&&(Or.length===1?(Tr="LineString",Or=Or[0]):Tr="MultiLineString"),(Tr==="Point"||Tr==="MultiPoint")&&(Tr=Or.length===3?"Point":"MultiPoint"),pt.push(Ne(Yt.id,Tr,Or,Yt.tags))}}return pt.length?pt:null}function it(qe,we,Me,Re,Ye){for(var Qe=0;Qe<qe.length;Qe+=3){var ot=qe[Qe+Ye];ot>=Me&&ot<=Re&&(we.push(qe[Qe]),we.push(qe[Qe+1]),we.push(qe[Qe+2]))}}function ht(qe,we,Me,Re,Ye,Qe,ot){for(var st=$e(qe),pt=Ye===0?rt:ut,wt=qe.start,Yt,wr,Tr=0;Tr<qe.length-3;Tr+=3){var Mr=qe[Tr],_r=qe[Tr+1],Or=qe[Tr+2],nn=qe[Tr+3],Sr=qe[Tr+4],yr=Ye===0?Mr:_r,gn=Ye===0?nn:Sr,Xr=!1;ot&&(Yt=Math.sqrt(Math.pow(Mr-nn,2)+Math.pow(_r-Sr,2))),yr<Me?gn>Me&&(wr=pt(st,Mr,_r,nn,Sr,Me),ot&&(st.start=wt+Yt*wr)):yr>Re?gn<Re&&(wr=pt(st,Mr,_r,nn,Sr,Re),ot&&(st.start=wt+Yt*wr)):Xe(st,Mr,_r,Or),gn<Me&&yr>=Me&&(wr=pt(st,Mr,_r,nn,Sr,Me),Xr=!0),gn>Re&&yr<=Re&&(wr=pt(st,Mr,_r,nn,Sr,Re),Xr=!0),!Qe&&Xr&&(ot&&(st.end=wt+Yt*wr),we.push(st),st=$e(qe)),ot&&(wt+=Yt)}var kr=qe.length-3;Mr=qe[kr],_r=qe[kr+1],Or=qe[kr+2],yr=Ye===0?Mr:_r,yr>=Me&&yr<=Re&&Xe(st,Mr,_r,Or),kr=st.length-3,Qe&&kr>=3&&(st[kr]!==st[0]||st[kr+1]!==st[1])&&Xe(st,st[0],st[1],st[2]),st.length&&we.push(st)}function $e(qe){var we=[];return we.size=qe.size,we.start=qe.start,we.end=qe.end,we}function Ee(qe,we,Me,Re,Ye,Qe){for(var ot=0;ot<qe.length;ot++)ht(qe[ot],we,Me,Re,Ye,Qe,!1)}function Xe(qe,we,Me,Re){qe.push(we),qe.push(Me),qe.push(Re)}function rt(qe,we,Me,Re,Ye,Qe){var ot=(Qe-we)/(Re-we);return qe.push(Qe),qe.push(Me+(Ye-Me)*ot),qe.push(1),ot}function ut(qe,we,Me,Re,Ye,Qe){var ot=(Qe-Me)/(Ye-Me);return qe.push(we+(Re-we)*ot),qe.push(Qe),qe.push(1),ot}function Pt(qe,we){var Me=we.buffer/we.extent,Re=qe,Ye=At(qe,1,-1-Me,Me,0,-1,2,we),Qe=At(qe,1,1-Me,2+Me,0,-1,2,we);return(Ye||Qe)&&(Re=At(qe,1,-Me,1+Me,0,-1,2,we)||[],Ye&&(Re=kt(Ye,1).concat(Re)),Qe&&(Re=Re.concat(kt(Qe,-1)))),Re}function kt(qe,we){for(var Me=[],Re=0;Re<qe.length;Re++){var Ye=qe[Re],Qe=Ye.type,ot;if(Qe==="Point"||Qe==="MultiPoint"||Qe==="LineString")ot=Bt(Ye.geometry,we);else if(Qe==="MultiLineString"||Qe==="Polygon"){ot=[];for(var st=0;st<Ye.geometry.length;st++)ot.push(Bt(Ye.geometry[st],we))}else if(Qe==="MultiPolygon")for(ot=[],st=0;st<Ye.geometry.length;st++){for(var pt=[],wt=0;wt<Ye.geometry[st].length;wt++)pt.push(Bt(Ye.geometry[st][wt],we));ot.push(pt)}Me.push(Ne(Ye.id,Qe,ot,Ye.tags))}return Me}function Bt(qe,we){var Me=[];Me.size=qe.size,qe.start!==void 0&&(Me.start=qe.start,Me.end=qe.end);for(var Re=0;Re<qe.length;Re+=3)Me.push(qe[Re]+we,qe[Re+1],qe[Re+2]);return Me}function Xt(qe,we){if(qe.transformed)return qe;var Me=1<<qe.z,Re=qe.x,Ye=qe.y,Qe,ot,st;for(Qe=0;Qe<qe.features.length;Qe++){var pt=qe.features[Qe],wt=pt.geometry,Yt=pt.type;if(pt.geometry=[],Yt===1)for(ot=0;ot<wt.length;ot+=2)pt.geometry.push(Ut(wt[ot],wt[ot+1],we,Me,Re,Ye));else for(ot=0;ot<wt.length;ot++){var wr=[];for(st=0;st<wt[ot].length;st+=2)wr.push(Ut(wt[ot][st],wt[ot][st+1],we,Me,Re,Ye));pt.geometry.push(wr)}}return qe.transformed=!0,qe}function Ut(qe,we,Me,Re,Ye,Qe){return[Math.round(Me*(qe*Re-Ye)),Math.round(Me*(we*Re-Qe))]}function Jt(qe,we,Me,Re,Ye){for(var Qe=we===Ye.maxZoom?0:Ye.tolerance/((1<<we)*Ye.extent),ot={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Me,y:Re,z:we,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},st=0;st<qe.length;st++){ot.numFeatures++,Je(ot,qe[st],Qe,Ye);var pt=qe[st].minX,wt=qe[st].minY,Yt=qe[st].maxX,wr=qe[st].maxY;pt<ot.minX&&(ot.minX=pt),wt<ot.minY&&(ot.minY=wt),Yt>ot.maxX&&(ot.maxX=Yt),wr>ot.maxY&&(ot.maxY=wr)}return ot}function Je(qe,we,Me,Re){var Ye=we.geometry,Qe=we.type,ot=[];if(Qe==="Point"||Qe==="MultiPoint")for(var st=0;st<Ye.length;st+=3)ot.push(Ye[st]),ot.push(Ye[st+1]),qe.numPoints++,qe.numSimplified++;else if(Qe==="LineString")gt(ot,Ye,qe,Me,!1,!1);else if(Qe==="MultiLineString"||Qe==="Polygon")for(st=0;st<Ye.length;st++)gt(ot,Ye[st],qe,Me,Qe==="Polygon",st===0);else if(Qe==="MultiPolygon")for(var pt=0;pt<Ye.length;pt++){var wt=Ye[pt];for(st=0;st<wt.length;st++)gt(ot,wt[st],qe,Me,!0,st===0)}if(ot.length){var Yt=we.tags||null;if(Qe==="LineString"&&Re.lineMetrics){Yt={};for(var wr in we.tags)Yt[wr]=we.tags[wr];Yt.mapbox_clip_start=Ye.start/Ye.size,Yt.mapbox_clip_end=Ye.end/Ye.size}var Tr={geometry:ot,type:Qe==="Polygon"||Qe==="MultiPolygon"?3:Qe==="LineString"||Qe==="MultiLineString"?2:1,tags:Yt};we.id!==null&&(Tr.id=we.id),qe.features.push(Tr)}}function gt(qe,we,Me,Re,Ye,Qe){var ot=Re*Re;if(Re>0&&we.size<(Ye?ot:Re)){Me.numPoints+=we.length/3;return}for(var st=[],pt=0;pt<we.length;pt+=3)(Re===0||we[pt+2]>ot)&&(Me.numSimplified++,st.push(we[pt]),st.push(we[pt+1])),Me.numPoints++;Ye&&Ct(st,Qe),qe.push(st)}function Ct(qe,we){for(var Me=0,Re=0,Ye=qe.length,Qe=Ye-2;Re<Ye;Qe=Re,Re+=2)Me+=(qe[Re]-qe[Qe])*(qe[Re+1]+qe[Qe+1]);if(Me>0===we)for(Re=0,Ye=qe.length;Re<Ye/2;Re+=2){var ot=qe[Re],st=qe[Re+1];qe[Re]=qe[Ye-2-Re],qe[Re+1]=qe[Ye-1-Re],qe[Ye-2-Re]=ot,qe[Ye-1-Re]=st}}function or(qe,we){return new gr(qe,we)}function gr(qe,we){we=this.options=mr(Object.create(this.options),we);var Me=we.debug;if(Me&&console.time("preprocess data"),we.maxZoom<0||we.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(we.promoteId&&we.generateId)throw new Error("promoteId and generateId cannot be used together.");var Re=dt(qe,we);this.tiles={},this.tileCoords=[],Me&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",we.indexMaxZoom,we.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Re=Pt(Re,we),Re.length&&this.splitTile(Re,0,0,0),Me&&(Re.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}gr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},gr.prototype.splitTile=function(qe,we,Me,Re,Ye,Qe,ot){for(var st=[qe,we,Me,Re],pt=this.options,wt=pt.debug;st.length;){Re=st.pop(),Me=st.pop(),we=st.pop(),qe=st.pop();var Yt=1<<we,wr=lr(we,Me,Re),Tr=this.tiles[wr];if(!Tr&&(wt>1&&console.time("creation"),Tr=this.tiles[wr]=Jt(qe,we,Me,Re,pt),this.tileCoords.push({z:we,x:Me,y:Re}),wt)){wt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",we,Me,Re,Tr.numFeatures,Tr.numPoints,Tr.numSimplified),console.timeEnd("creation"));var Mr="z"+we;this.stats[Mr]=(this.stats[Mr]||0)+1,this.total++}if(Tr.source=qe,Ye){if(we===pt.maxZoom||we===Ye)continue;var _r=1<<Ye-we;if(Me!==Math.floor(Qe/_r)||Re!==Math.floor(ot/_r))continue}else if(we===pt.indexMaxZoom||Tr.numPoints<=pt.indexMaxPoints)continue;if(Tr.source=null,qe.length!==0){wt>1&&console.time("clipping");var Or=.5*pt.buffer/pt.extent,nn=.5-Or,Sr=.5+Or,yr=1+Or,gn,Xr,kr,sn,cn,$r;gn=Xr=kr=sn=null,cn=At(qe,Yt,Me-Or,Me+Sr,0,Tr.minX,Tr.maxX,pt),$r=At(qe,Yt,Me+nn,Me+yr,0,Tr.minX,Tr.maxX,pt),qe=null,cn&&(gn=At(cn,Yt,Re-Or,Re+Sr,1,Tr.minY,Tr.maxY,pt),Xr=At(cn,Yt,Re+nn,Re+yr,1,Tr.minY,Tr.maxY,pt),cn=null),$r&&(kr=At($r,Yt,Re-Or,Re+Sr,1,Tr.minY,Tr.maxY,pt),sn=At($r,Yt,Re+nn,Re+yr,1,Tr.minY,Tr.maxY,pt),$r=null),wt>1&&console.timeEnd("clipping"),st.push(gn||[],we+1,Me*2,Re*2),st.push(Xr||[],we+1,Me*2,Re*2+1),st.push(kr||[],we+1,Me*2+1,Re*2),st.push(sn||[],we+1,Me*2+1,Re*2+1)}}},gr.prototype.getTile=function(qe,we,Me){var Re=this.options,Ye=Re.extent,Qe=Re.debug;if(qe<0||qe>24)return null;var ot=1<<qe;we=(we%ot+ot)%ot;var st=lr(qe,we,Me);if(this.tiles[st])return Xt(this.tiles[st],Ye);Qe>1&&console.log("drilling down to z%d-%d-%d",qe,we,Me);for(var pt=qe,wt=we,Yt=Me,wr;!wr&&pt>0;)pt--,wt=Math.floor(wt/2),Yt=Math.floor(Yt/2),wr=this.tiles[lr(pt,wt,Yt)];return!wr||!wr.source?null:(Qe>1&&console.log("found parent tile z%d-%d-%d",pt,wt,Yt),Qe>1&&console.time("drilling down"),this.splitTile(wr.source,pt,wt,Yt,qe,we,Me),Qe>1&&console.timeEnd("drilling down"),this.tiles[st]?Xt(this.tiles[st],Ye):null)};function lr(qe,we,Me){return((1<<qe)*Me+we)*32+qe}function mr(qe,we){for(var Me in we)qe[Me]=we[Me];return qe}function Fr(qe,we){var Me=qe.tileID.canonical;if(!this._geoJSONIndex)return we(null,null);var Re=this._geoJSONIndex.getTile(Me.z,Me.x,Me.y);if(!Re)return we(null,null);var Ye=new _(Re.features),Qe=D(Ye);(Qe.byteOffset!==0||Qe.byteLength!==Qe.buffer.byteLength)&&(Qe=new Uint8Array(Qe)),we(null,{vectorTile:Ye,rawData:Qe.buffer})}var Rr=function(qe){function we(Me,Re,Ye,Qe){qe.call(this,Me,Re,Ye,Fr),Qe&&(this.loadGeoJSON=Qe)}return qe&&(we.__proto__=qe),we.prototype=Object.create(qe&&qe.prototype),we.prototype.constructor=we,we.prototype.loadData=function(Re,Ye){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ye,this._pendingLoadDataParams=Re,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},we.prototype._loadData=function(){var Re=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var Ye=this._pendingCallback,Qe=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ot=Qe&&Qe.request&&Qe.request.collectResourceTiming?new t.RequestPerformance(Qe.request):!1;this.loadGeoJSON(Qe,function(st,pt){if(st||!pt)return Ye(st);if(typeof pt!="object")return Ye(new Error("Input data given to '"+Qe.source+"' is not a valid GeoJSON object."));x(pt,!0);try{Re._geoJSONIndex=Qe.cluster?new fe(ir(Qe)).load(pt.features):or(pt,Qe.geojsonVtOptions)}catch(wr){return Ye(wr)}Re.loaded={};var wt={};if(ot){var Yt=ot.finish();Yt&&(wt.resourceTiming={},wt.resourceTiming[Qe.source]=JSON.parse(JSON.stringify(Yt)))}Ye(null,wt)})}},we.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},we.prototype.reloadTile=function(Re,Ye){var Qe=this.loaded,ot=Re.uid;return Qe&&Qe[ot]?qe.prototype.reloadTile.call(this,Re,Ye):this.loadTile(Re,Ye)},we.prototype.loadGeoJSON=function(Re,Ye){if(Re.request)t.getJSON(Re.request,Ye);else if(typeof Re.data=="string")try{return Ye(null,JSON.parse(Re.data))}catch{return Ye(new Error("Input data given to '"+Re.source+"' is not a valid GeoJSON object."))}else return Ye(new Error("Input data given to '"+Re.source+"' is not a valid GeoJSON object."))},we.prototype.removeSource=function(Re,Ye){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ye()},we.prototype.getClusterExpansionZoom=function(Re,Ye){try{Ye(null,this._geoJSONIndex.getClusterExpansionZoom(Re.clusterId))}catch(Qe){Ye(Qe)}},we.prototype.getClusterChildren=function(Re,Ye){try{Ye(null,this._geoJSONIndex.getChildren(Re.clusterId))}catch(Qe){Ye(Qe)}},we.prototype.getClusterLeaves=function(Re,Ye){try{Ye(null,this._geoJSONIndex.getLeaves(Re.clusterId,Re.limit,Re.offset))}catch(Qe){Ye(Qe)}},we}(y);function ir(qe){var we=qe.superclusterOptions,Me=qe.clusterProperties;if(!Me||!we)return we;for(var Re={},Ye={},Qe={accumulated:null,zoom:0},ot={properties:null},st=Object.keys(Me),pt=0,wt=st;pt<wt.length;pt+=1){var Yt=wt[pt],wr=Me[Yt],Tr=wr[0],Mr=wr[1],_r=t.createExpression(Mr),Or=t.createExpression(typeof Tr=="string"?[Tr,["accumulated"],["get",Yt]]:Tr);Re[Yt]=_r.value,Ye[Yt]=Or.value}return we.map=function(nn){ot.properties=nn;for(var Sr={},yr=0,gn=st;yr<gn.length;yr+=1){var Xr=gn[yr];Sr[Xr]=Re[Xr].evaluate(Qe,ot)}return Sr},we.reduce=function(nn,Sr){ot.properties=Sr;for(var yr=0,gn=st;yr<gn.length;yr+=1){var Xr=gn[yr];Qe.accumulated=nn[Xr],nn[Xr]=Ye[Xr].evaluate(Qe,ot)}},we}var Vr=function(we){var Me=this;this.self=we,this.actor=new t.Actor(we,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:y,geojson:Rr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Re,Ye){if(Me.workerSourceTypes[Re])throw new Error('Worker source with name "'+Re+'" already registered.');Me.workerSourceTypes[Re]=Ye},this.self.registerRTLTextPlugin=function(Re){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=Re.applyArabicShaping,t.plugin.processBidirectionalText=Re.processBidirectionalText,t.plugin.processStyledBidirectionalText=Re.processStyledBidirectionalText}};return Vr.prototype.setReferrer=function(we,Me){this.referrer=Me},Vr.prototype.setImages=function(we,Me,Re){this.availableImages[we]=Me;for(var Ye in this.workerSources[we]){var Qe=this.workerSources[we][Ye];for(var ot in Qe)Qe[ot].availableImages=Me}Re()},Vr.prototype.setLayers=function(we,Me,Re){this.getLayerIndex(we).replace(Me),Re()},Vr.prototype.updateLayers=function(we,Me,Re){this.getLayerIndex(we).update(Me.layers,Me.removedIds),Re()},Vr.prototype.loadTile=function(we,Me,Re){this.getWorkerSource(we,Me.type,Me.source).loadTile(Me,Re)},Vr.prototype.loadDEMTile=function(we,Me,Re){this.getDEMWorkerSource(we,Me.source).loadTile(Me,Re)},Vr.prototype.reloadTile=function(we,Me,Re){this.getWorkerSource(we,Me.type,Me.source).reloadTile(Me,Re)},Vr.prototype.abortTile=function(we,Me,Re){this.getWorkerSource(we,Me.type,Me.source).abortTile(Me,Re)},Vr.prototype.removeTile=function(we,Me,Re){this.getWorkerSource(we,Me.type,Me.source).removeTile(Me,Re)},Vr.prototype.removeDEMTile=function(we,Me){this.getDEMWorkerSource(we,Me.source).removeTile(Me)},Vr.prototype.removeSource=function(we,Me,Re){if(!(!this.workerSources[we]||!this.workerSources[we][Me.type]||!this.workerSources[we][Me.type][Me.source])){var Ye=this.workerSources[we][Me.type][Me.source];delete this.workerSources[we][Me.type][Me.source],Ye.removeSource!==void 0?Ye.removeSource(Me,Re):Re()}},Vr.prototype.loadWorkerSource=function(we,Me,Re){try{this.self.importScripts(Me.url),Re()}catch(Ye){Re(Ye.toString())}},Vr.prototype.syncRTLPluginState=function(we,Me,Re){try{t.plugin.setState(Me);var Ye=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&Ye!=null){this.self.importScripts(Ye);var Qe=t.plugin.isParsed(),ot=Qe?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ye);Re(ot,Qe)}}catch(st){Re(st.toString())}},Vr.prototype.getAvailableImages=function(we){var Me=this.availableImages[we];return Me||(Me=[]),Me},Vr.prototype.getLayerIndex=function(we){var Me=this.layerIndexes[we];return Me||(Me=this.layerIndexes[we]=new r),Me},Vr.prototype.getWorkerSource=function(we,Me,Re){var Ye=this;if(this.workerSources[we]||(this.workerSources[we]={}),this.workerSources[we][Me]||(this.workerSources[we][Me]={}),!this.workerSources[we][Me][Re]){var Qe={send:function(ot,st,pt){Ye.actor.send(ot,st,pt,we)}};this.workerSources[we][Me][Re]=new this.workerSourceTypes[Me](Qe,this.getLayerIndex(we),this.getAvailableImages(we))}return this.workerSources[we][Me][Re]},Vr.prototype.getDEMWorkerSource=function(we,Me){return this.demWorkerSources[we]||(this.demWorkerSources[we]={}),this.demWorkerSources[we][Me]||(this.demWorkerSources[we][Me]=new g),this.demWorkerSources[we][Me]},Vr.prototype.enforceCacheSizeLimit=function(we,Me){t.enforceCacheSizeLimit(Me)},typeof WorkerGlobalScope!="undefined"&&typeof t.window!="undefined"&&t.window instanceof WorkerGlobalScope&&(t.window.worker=new Vr(t.window)),Vr}),p(["./shared"],function(t){var n=t.createCommonjsModule(function(ve){ve.exports?ve.exports=X:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=X,window.mapboxgl.notSupportedReason=de);function X(Gr){return!de(Gr)}function de(Gr){if(!q())return"not a browser";if(!ge())return"insufficent Array support";if(!Ce())return"insufficient Function support";if(!Pe())return"insufficient Object support";if(!Ze())return"insufficient JSON support";if(!ft())return"insufficient worker support";if(!St())return"insufficient Uint8ClampedArray support";if(!Ht())return"insufficient ArrayBuffer support";if(!tr())return"insufficient Canvas/getImageData support";if(!Er(Gr&&Gr.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function q(){return typeof window!="undefined"&&typeof document!="undefined"}function ge(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function Ce(){return Function.prototype&&Function.prototype.bind}function Pe(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function Ze(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function ft(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Gr=new Blob([""],{type:"text/javascript"}),qr=URL.createObjectURL(Gr),dn,Cn;try{Cn=new Worker(qr),dn=!0}catch{dn=!1}return Cn&&Cn.terminate(),URL.revokeObjectURL(qr),dn}function St(){return"Uint8ClampedArray"in window}function Ht(){return ArrayBuffer.isView}function tr(){var Gr=document.createElement("canvas");Gr.width=Gr.height=1;var qr=Gr.getContext("2d");if(!qr)return!1;var dn=qr.getImageData(0,0,1,1);return dn&&dn.width===Gr.width}var ur={};function Er(Gr){return ur[Gr]===void 0&&(ur[Gr]=jr(Gr)),ur[Gr]}X.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function Wr(Gr){var qr=document.createElement("canvas"),dn=Object.create(X.webGLContextAttributes);return dn.failIfMajorPerformanceCaveat=Gr,qr.probablySupportsContext?qr.probablySupportsContext("webgl",dn)||qr.probablySupportsContext("experimental-webgl",dn):qr.supportsContext?qr.supportsContext("webgl",dn)||qr.supportsContext("experimental-webgl",dn):qr.getContext("webgl",dn)||qr.getContext("experimental-webgl",dn)}function jr(Gr){var qr=Wr(Gr);if(!qr)return!1;var dn=qr.createShader(qr.VERTEX_SHADER);return!dn||qr.isContextLost()?!1:(qr.shaderSource(dn,"void main() {}"),qr.compileShader(dn),qr.getShaderParameter(dn,qr.COMPILE_STATUS)===!0)}}),a={};a.create=function(ve,X,de){var q=t.window.document.createElement(ve);return X!==void 0&&(q.className=X),de&&de.appendChild(q),q},a.createNS=function(ve,X){var de=t.window.document.createElementNS(ve,X);return de};var i=t.window.document.documentElement.style;function r(ve){if(!i)return ve[0];for(var X=0;X<ve.length;X++)if(ve[X]in i)return ve[X];return ve[0]}var f=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),u;a.disableDrag=function(){i&&f&&(u=i[f],i[f]="none")},a.enableDrag=function(){i&&f&&(i[f]=u)};var s=r(["transform","WebkitTransform"]);a.setTransform=function(ve,X){ve.style[s]=X};var h=!1;try{var d=Object.defineProperty({},"passive",{get:function(){h=!0}});t.window.addEventListener("test",d,d),t.window.removeEventListener("test",d,d)}catch{h=!1}a.addEventListener=function(ve,X,de,q){q===void 0&&(q={}),"passive"in q&&h?ve.addEventListener(X,de,q):ve.addEventListener(X,de,q.capture)},a.removeEventListener=function(ve,X,de,q){q===void 0&&(q={}),"passive"in q&&h?ve.removeEventListener(X,de,q):ve.removeEventListener(X,de,q.capture)};var y=function(ve){ve.preventDefault(),ve.stopPropagation(),t.window.removeEventListener("click",y,!0)};a.suppressClick=function(){t.window.addEventListener("click",y,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",y,!0)},0)},a.mousePos=function(ve,X){var de=ve.getBoundingClientRect();return new t.Point(X.clientX-de.left-ve.clientLeft,X.clientY-de.top-ve.clientTop)},a.touchPos=function(ve,X){for(var de=ve.getBoundingClientRect(),q=[],ge=0;ge<X.length;ge++)q.push(new t.Point(X[ge].clientX-de.left-ve.clientLeft,X[ge].clientY-de.top-ve.clientTop));return q},a.mouseButton=function(ve){return typeof t.window.InstallTrigger!="undefined"&&ve.button===2&&ve.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:ve.button},a.remove=function(ve){ve.parentNode&&ve.parentNode.removeChild(ve)};function m(ve,X,de){var q,ge,Ce,Pe=t.browser.devicePixelRatio>1?"@2x":"",Ze=t.getJSON(X.transformRequest(X.normalizeSpriteURL(ve,Pe,".json"),t.ResourceType.SpriteJSON),function(Ht,tr){Ze=null,Ce||(Ce=Ht,q=tr,St())}),ft=t.getImage(X.transformRequest(X.normalizeSpriteURL(ve,Pe,".png"),t.ResourceType.SpriteImage),function(Ht,tr){ft=null,Ce||(Ce=Ht,ge=tr,St())});function St(){if(Ce)de(Ce);else if(q&&ge){var Ht=t.browser.getImageData(ge),tr={};for(var ur in q){var Er=q[ur],Wr=Er.width,jr=Er.height,Gr=Er.x,qr=Er.y,dn=Er.sdf,Cn=Er.pixelRatio,Vn=Er.stretchX,Qn=Er.stretchY,na=Er.content,ta=new t.RGBAImage({width:Wr,height:jr});t.RGBAImage.copy(Ht,ta,{x:Gr,y:qr},{x:0,y:0},{width:Wr,height:jr}),tr[ur]={data:ta,pixelRatio:Cn,sdf:dn,stretchX:Vn,stretchY:Qn,content:na}}de(null,tr)}}return{cancel:function(){Ze&&(Ze.cancel(),Ze=null),ft&&(ft.cancel(),ft=null)}}}function g(ve){var X=ve.userImage;if(X&&X.render){var de=X.render();if(de)return ve.data.replace(new Uint8Array(X.data.buffer)),!0}return!1}var x=1,A=function(ve){function X(){ve.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.isLoaded=function(){return this.loaded},X.prototype.setLoaded=function(q){if(this.loaded!==q&&(this.loaded=q,q)){for(var ge=0,Ce=this.requestors;ge<Ce.length;ge+=1){var Pe=Ce[ge],Ze=Pe.ids,ft=Pe.callback;this._notify(Ze,ft)}this.requestors=[]}},X.prototype.getImage=function(q){return this.images[q]},X.prototype.addImage=function(q,ge){this._validate(q,ge)&&(this.images[q]=ge)},X.prototype._validate=function(q,ge){var Ce=!0;return this._validateStretch(ge.stretchX,ge.data&&ge.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+q+'" has invalid "stretchX" value'))),Ce=!1),this._validateStretch(ge.stretchY,ge.data&&ge.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+q+'" has invalid "stretchY" value'))),Ce=!1),this._validateContent(ge.content,ge)||(this.fire(new t.ErrorEvent(new Error('Image "'+q+'" has invalid "content" value'))),Ce=!1),Ce},X.prototype._validateStretch=function(q,ge){if(!q)return!0;for(var Ce=0,Pe=0,Ze=q;Pe<Ze.length;Pe+=1){var ft=Ze[Pe];if(ft[0]<Ce||ft[1]<ft[0]||ge<ft[1])return!1;Ce=ft[1]}return!0},X.prototype._validateContent=function(q,ge){return q?!(q.length!==4||q[0]<0||ge.data.width<q[0]||q[1]<0||ge.data.height<q[1]||q[2]<0||ge.data.width<q[2]||q[3]<0||ge.data.height<q[3]||q[2]<q[0]||q[3]<q[1]):!0},X.prototype.updateImage=function(q,ge){var Ce=this.images[q];ge.version=Ce.version+1,this.images[q]=ge,this.updatedImages[q]=!0},X.prototype.removeImage=function(q){var ge=this.images[q];delete this.images[q],delete this.patterns[q],ge.userImage&&ge.userImage.onRemove&&ge.userImage.onRemove()},X.prototype.listImages=function(){return Object.keys(this.images)},X.prototype.getImages=function(q,ge){var Ce=!0;if(!this.isLoaded())for(var Pe=0,Ze=q;Pe<Ze.length;Pe+=1){var ft=Ze[Pe];this.images[ft]||(Ce=!1)}this.isLoaded()||Ce?this._notify(q,ge):this.requestors.push({ids:q,callback:ge})},X.prototype._notify=function(q,ge){for(var Ce={},Pe=0,Ze=q;Pe<Ze.length;Pe+=1){var ft=Ze[Pe];this.images[ft]||this.fire(new t.Event("styleimagemissing",{id:ft}));var St=this.images[ft];St?Ce[ft]={data:St.data.clone(),pixelRatio:St.pixelRatio,sdf:St.sdf,version:St.version,stretchX:St.stretchX,stretchY:St.stretchY,content:St.content,hasRenderCallback:Boolean(St.userImage&&St.userImage.render)}:t.warnOnce('Image "'+ft+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}ge(null,Ce)},X.prototype.getPixelSize=function(){var q=this.atlasImage,ge=q.width,Ce=q.height;return{width:ge,height:Ce}},X.prototype.getPattern=function(q){var ge=this.patterns[q],Ce=this.getImage(q);if(!Ce)return null;if(ge&&ge.position.version===Ce.version)return ge.position;if(ge)ge.position.version=Ce.version;else{var Pe=Ce.data.width+x*2,Ze=Ce.data.height+x*2,ft={w:Pe,h:Ze,x:0,y:0},St=new t.ImagePosition(ft,Ce);this.patterns[q]={bin:ft,position:St}}return this._updatePatternAtlas(),this.patterns[q].position},X.prototype.bind=function(q){var ge=q.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(q,this.atlasImage,ge.RGBA),this.atlasTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE)},X.prototype._updatePatternAtlas=function(){var q=[];for(var ge in this.patterns)q.push(this.patterns[ge].bin);var Ce=t.potpack(q),Pe=Ce.w,Ze=Ce.h,ft=this.atlasImage;ft.resize({width:Pe||1,height:Ze||1});for(var St in this.patterns){var Ht=this.patterns[St],tr=Ht.bin,ur=tr.x+x,Er=tr.y+x,Wr=this.images[St].data,jr=Wr.width,Gr=Wr.height;t.RGBAImage.copy(Wr,ft,{x:0,y:0},{x:ur,y:Er},{width:jr,height:Gr}),t.RGBAImage.copy(Wr,ft,{x:0,y:Gr-1},{x:ur,y:Er-1},{width:jr,height:1}),t.RGBAImage.copy(Wr,ft,{x:0,y:0},{x:ur,y:Er+Gr},{width:jr,height:1}),t.RGBAImage.copy(Wr,ft,{x:jr-1,y:0},{x:ur-1,y:Er},{width:1,height:Gr}),t.RGBAImage.copy(Wr,ft,{x:0,y:0},{x:ur+jr,y:Er},{width:1,height:Gr})}this.dirty=!0},X.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},X.prototype.dispatchRenderCallbacks=function(q){for(var ge=0,Ce=q;ge<Ce.length;ge+=1){var Pe=Ce[ge];if(!this.callbackDispatchedThisFrame[Pe]){this.callbackDispatchedThisFrame[Pe]=!0;var Ze=this.images[Pe],ft=g(Ze);ft&&this.updateImage(Pe,Ze)}}},X}(t.Evented);function b(ve,X,de,q,ge){var Ce=X*256,Pe=Ce+255,Ze=q.transformRequest(q.normalizeGlyphsURL(de).replace("{fontstack}",ve).replace("{range}",Ce+"-"+Pe),t.ResourceType.Glyphs);t.getArrayBuffer(Ze,function(ft,St){if(ft)ge(ft);else if(St){for(var Ht={},tr=0,ur=t.parseGlyphPBF(St);tr<ur.length;tr+=1){var Er=ur[tr];Ht[Er.id]=Er}ge(null,Ht)}})}var S=_,w=_,T=1e20;function _(ve,X,de,q,ge,Ce){this.fontSize=ve||24,this.buffer=X===void 0?3:X,this.cutoff=q||.25,this.fontFamily=ge||"sans-serif",this.fontWeight=Ce||"normal",this.radius=de||8;var Pe=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Pe,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Pe*Pe),this.gridInner=new Float64Array(Pe*Pe),this.f=new Float64Array(Pe),this.d=new Float64Array(Pe),this.z=new Float64Array(Pe+1),this.v=new Int16Array(Pe),this.middle=Math.round(Pe/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}_.prototype.draw=function(ve){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(ve,this.buffer,this.middle);for(var X=this.ctx.getImageData(0,0,this.size,this.size),de=new Uint8ClampedArray(this.size*this.size),q=0;q<this.size*this.size;q++){var ge=X.data[q*4+3]/255;this.gridOuter[q]=ge===1?0:ge===0?T:Math.pow(Math.max(0,.5-ge),2),this.gridInner[q]=ge===1?T:ge===0?0:Math.pow(Math.max(0,ge-.5),2)}for(v(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),v(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),q=0;q<this.size*this.size;q++){var Ce=this.gridOuter[q]-this.gridInner[q];de[q]=Math.max(0,Math.min(255,Math.round(255-255*(Ce/this.radius+this.cutoff))))}return de};function v(ve,X,de,q,ge,Ce,Pe){for(var Ze=0;Ze<X;Ze++){for(var ft=0;ft<de;ft++)q[ft]=ve[ft*X+Ze];for(P(q,ge,Ce,Pe,de),ft=0;ft<de;ft++)ve[ft*X+Ze]=ge[ft]}for(ft=0;ft<de;ft++){for(Ze=0;Ze<X;Ze++)q[Ze]=ve[ft*X+Ze];for(P(q,ge,Ce,Pe,X),Ze=0;Ze<X;Ze++)ve[ft*X+Ze]=Math.sqrt(ge[Ze])}}function P(ve,X,de,q,ge){de[0]=0,q[0]=-T,q[1]=+T;for(var Ce=1,Pe=0;Ce<ge;Ce++){for(var Ze=(ve[Ce]+Ce*Ce-(ve[de[Pe]]+de[Pe]*de[Pe]))/(2*Ce-2*de[Pe]);Ze<=q[Pe];)Pe--,Ze=(ve[Ce]+Ce*Ce-(ve[de[Pe]]+de[Pe]*de[Pe]))/(2*Ce-2*de[Pe]);Pe++,de[Pe]=Ce,q[Pe]=Ze,q[Pe+1]=+T}for(Ce=0,Pe=0;Ce<ge;Ce++){for(;q[Pe+1]<Ce;)Pe++;X[Ce]=(Ce-de[Pe])*(Ce-de[Pe])+ve[de[Pe]]}}S.default=w;var M=function(X,de){this.requestManager=X,this.localIdeographFontFamily=de,this.entries={}};M.prototype.setURL=function(X){this.url=X},M.prototype.getGlyphs=function(X,de){var q=this,ge=[];for(var Ce in X)for(var Pe=0,Ze=X[Ce];Pe<Ze.length;Pe+=1){var ft=Ze[Pe];ge.push({stack:Ce,id:ft})}t.asyncAll(ge,function(St,Ht){var tr=St.stack,ur=St.id,Er=q.entries[tr];Er||(Er=q.entries[tr]={glyphs:{},requests:{},ranges:{}});var Wr=Er.glyphs[ur];if(Wr!==void 0){Ht(null,{stack:tr,id:ur,glyph:Wr});return}if(Wr=q._tinySDF(Er,tr,ur),Wr){Er.glyphs[ur]=Wr,Ht(null,{stack:tr,id:ur,glyph:Wr});return}var jr=Math.floor(ur/256);if(jr*256>65535){Ht(new Error("glyphs > 65535 not supported"));return}if(Er.ranges[jr]){Ht(null,{stack:tr,id:ur,glyph:Wr});return}var Gr=Er.requests[jr];Gr||(Gr=Er.requests[jr]=[],M.loadGlyphRange(tr,jr,q.url,q.requestManager,function(qr,dn){if(dn){for(var Cn in dn)q._doesCharSupportLocalGlyph(+Cn)||(Er.glyphs[+Cn]=dn[+Cn]);Er.ranges[jr]=!0}for(var Vn=0,Qn=Gr;Vn<Qn.length;Vn+=1){var na=Qn[Vn];na(qr,dn)}delete Er.requests[jr]})),Gr.push(function(qr,dn){qr?Ht(qr):dn&&Ht(null,{stack:tr,id:ur,glyph:dn[ur]||null})})},function(St,Ht){if(St)de(St);else if(Ht){for(var tr={},ur=0,Er=Ht;ur<Er.length;ur+=1){var Wr=Er[ur],jr=Wr.stack,Gr=Wr.id,qr=Wr.glyph;(tr[jr]||(tr[jr]={}))[Gr]=qr&&{id:qr.id,bitmap:qr.bitmap.clone(),metrics:qr.metrics}}de(null,tr)}})},M.prototype._doesCharSupportLocalGlyph=function(X){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](X)||t.isChar["Hangul Syllables"](X)||t.isChar.Hiragana(X)||t.isChar.Katakana(X))},M.prototype._tinySDF=function(X,de,q){var ge=this.localIdeographFontFamily;if(!!ge&&!!this._doesCharSupportLocalGlyph(q)){var Ce=X.tinySDF;if(!Ce){var Pe="400";/bold/i.test(de)?Pe="900":/medium/i.test(de)?Pe="500":/light/i.test(de)&&(Pe="200"),Ce=X.tinySDF=new M.TinySDF(24,3,8,.25,ge,Pe)}return{id:q,bitmap:new t.AlphaImage({width:30,height:30},Ce.draw(String.fromCharCode(q))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},M.loadGlyphRange=b,M.TinySDF=S;var E=function(){this.specification=t.styleSpec.light.position};E.prototype.possiblyEvaluate=function(X,de){return t.sphericalToCartesian(X.expression.evaluate(de))},E.prototype.interpolate=function(X,de,q){return{x:t.number(X.x,de.x,q),y:t.number(X.y,de.y,q),z:t.number(X.z,de.z,q)}};var D=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new E,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),N="-transition",O=function(ve){function X(de){ve.call(this),this._transitionable=new t.Transitionable(D),this.setLight(de),this._transitioning=this._transitionable.untransitioned()}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getLight=function(){return this._transitionable.serialize()},X.prototype.setLight=function(q,ge){if(ge===void 0&&(ge={}),!this._validate(t.validateLight,q,ge))for(var Ce in q){var Pe=q[Ce];t.endsWith(Ce,N)?this._transitionable.setTransition(Ce.slice(0,-N.length),Pe):this._transitionable.setValue(Ce,Pe)}},X.prototype.updateTransitions=function(q){this._transitioning=this._transitionable.transitioned(q,this._transitioning)},X.prototype.hasTransition=function(){return this._transitioning.hasTransition()},X.prototype.recalculate=function(q){this.properties=this._transitioning.possiblyEvaluate(q)},X.prototype._validate=function(q,ge,Ce){return Ce&&Ce.validate===!1?!1:t.emitValidationErrors(this,q.call(t.validateStyle,t.extend({value:ge,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},X}(t.Evented),I=function(X,de){this.width=X,this.height=de,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};I.prototype.getDash=function(X,de){var q=X.join(",")+String(de);return this.dashEntry[q]||(this.dashEntry[q]=this.addDash(X,de)),this.dashEntry[q]},I.prototype.getDashRanges=function(X,de,q){var ge=X.length%2==1,Ce=[],Pe=ge?-X[X.length-1]*q:0,Ze=X[0]*q,ft=!0;Ce.push({left:Pe,right:Ze,isDash:ft,zeroLength:X[0]===0});for(var St=X[0],Ht=1;Ht<X.length;Ht++){ft=!ft;var tr=X[Ht];Pe=St*q,St+=tr,Ze=St*q,Ce.push({left:Pe,right:Ze,isDash:ft,zeroLength:tr===0})}return Ce},I.prototype.addRoundDash=function(X,de,q){for(var ge=de/2,Ce=-q;Ce<=q;Ce++)for(var Pe=this.nextRow+q+Ce,Ze=this.width*Pe,ft=0,St=X[ft],Ht=0;Ht<this.width;Ht++){Ht/St.right>1&&(St=X[++ft]);var tr=Math.abs(Ht-St.left),ur=Math.abs(Ht-St.right),Er=Math.min(tr,ur),Wr=void 0,jr=Ce/q*(ge+1);if(St.isDash){var Gr=ge-Math.abs(jr);Wr=Math.sqrt(Er*Er+Gr*Gr)}else Wr=ge-Math.sqrt(Er*Er+jr*jr);this.data[Ze+Ht]=Math.max(0,Math.min(255,Wr+128))}},I.prototype.addRegularDash=function(X){for(var de=X.length-1;de>=0;--de){var q=X[de],ge=X[de+1];q.zeroLength?X.splice(de,1):ge&&ge.isDash===q.isDash&&(ge.left=q.left,X.splice(de,1))}var Ce=X[0],Pe=X[X.length-1];Ce.isDash===Pe.isDash&&(Ce.left=Pe.left-this.width,Pe.right=Ce.right+this.width);for(var Ze=this.width*this.nextRow,ft=0,St=X[ft],Ht=0;Ht<this.width;Ht++){Ht/St.right>1&&(St=X[++ft]);var tr=Math.abs(Ht-St.left),ur=Math.abs(Ht-St.right),Er=Math.min(tr,ur),Wr=St.isDash?Er:-Er;this.data[Ze+Ht]=Math.max(0,Math.min(255,Wr+128))}},I.prototype.addDash=function(X,de){var q=de?7:0,ge=2*q+1;if(this.nextRow+ge>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var Ce=0,Pe=0;Pe<X.length;Pe++)Ce+=X[Pe];if(Ce!==0){var Ze=this.width/Ce,ft=this.getDashRanges(X,this.width,Ze);de?this.addRoundDash(ft,Ze,q):this.addRegularDash(ft)}var St={y:(this.nextRow+q+.5)/this.height,height:2*q/this.height,width:Ce};return this.nextRow+=ge,this.dirty=!0,St},I.prototype.bind=function(X){var de=X.gl;this.texture?(de.bindTexture(de.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,de.texSubImage2D(de.TEXTURE_2D,0,0,0,this.width,this.height,de.ALPHA,de.UNSIGNED_BYTE,this.data))):(this.texture=de.createTexture(),de.bindTexture(de.TEXTURE_2D,this.texture),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_S,de.REPEAT),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_T,de.REPEAT),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MIN_FILTER,de.LINEAR),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MAG_FILTER,de.LINEAR),de.texImage2D(de.TEXTURE_2D,0,de.ALPHA,this.width,this.height,0,de.ALPHA,de.UNSIGNED_BYTE,this.data))};var F=function ve(X,de){this.workerPool=X,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var q=this.workerPool.acquire(this.id),ge=0;ge<q.length;ge++){var Ce=q[ge],Pe=new ve.Actor(Ce,de,this.id);Pe.name="Worker "+ge,this.actors.push(Pe)}};F.prototype.broadcast=function(X,de,q){q=q||function(){},t.asyncAll(this.actors,function(ge,Ce){ge.send(X,de,Ce)},q)},F.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},F.prototype.remove=function(){this.actors.forEach(function(X){X.remove()}),this.actors=[],this.workerPool.release(this.id)},F.Actor=t.Actor;function V(ve,X,de){var q=function(ge,Ce){if(ge)return de(ge);if(Ce){var Pe=t.pick(t.extend(Ce,ve),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Ce.vector_layers&&(Pe.vectorLayers=Ce.vector_layers,Pe.vectorLayerIds=Pe.vectorLayers.map(function(Ze){return Ze.id})),Pe.tiles=X.canonicalizeTileset(Pe,ve.url),de(null,Pe)}};return ve.url?t.getJSON(X.transformRequest(X.normalizeSourceURL(ve.url),t.ResourceType.Source),q):t.browser.frame(function(){return q(null,ve)})}var U=function(X,de,q){this.bounds=t.LngLatBounds.convert(this.validateBounds(X)),this.minzoom=de||0,this.maxzoom=q||24};U.prototype.validateBounds=function(X){return!Array.isArray(X)||X.length!==4?[-180,-90,180,90]:[Math.max(-180,X[0]),Math.max(-90,X[1]),Math.min(180,X[2]),Math.min(90,X[3])]},U.prototype.contains=function(X){var de=Math.pow(2,X.z),q={minX:Math.floor(t.mercatorXfromLng(this.bounds.getWest())*de),minY:Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*de),maxX:Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*de),maxY:Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*de)},ge=X.x>=q.minX&&X.x<q.maxX&&X.y>=q.minY&&X.y<q.maxY;return ge};var j=function(ve){function X(de,q,ge,Ce){if(ve.call(this),this.id=de,this.dispatcher=ge,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(q,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},q),this._collectResourceTiming=q.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Ce)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.load=function(){var q=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=V(this._options,this.map._requestManager,function(ge,Ce){q._tileJSONRequest=null,q._loaded=!0,ge?q.fire(new t.ErrorEvent(ge)):Ce&&(t.extend(q,Ce),Ce.bounds&&(q.tileBounds=new U(Ce.bounds,q.minzoom,q.maxzoom)),t.postTurnstileEvent(Ce.tiles,q.map._requestManager._customAccessToken),t.postMapLoadEvent(Ce.tiles,q.map._getMapId(),q.map._requestManager._skuToken,q.map._requestManager._customAccessToken),q.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),q.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},X.prototype.loaded=function(){return this._loaded},X.prototype.hasTile=function(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)},X.prototype.onAdd=function(q){this.map=q,this.load()},X.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},X.prototype.serialize=function(){return t.extend({},this._options)},X.prototype.loadTile=function(q,ge){var Ce=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme)),Pe={request:this.map._requestManager.transformRequest(Ce,t.ResourceType.Tile),uid:q.uid,tileID:q.tileID,zoom:q.tileID.overscaledZ,tileSize:this.tileSize*q.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Pe.request.collectResourceTiming=this._collectResourceTiming,!q.actor||q.state==="expired"?(q.actor=this.dispatcher.getActor(),q.request=q.actor.send("loadTile",Pe,Ze.bind(this))):q.state==="loading"?q.reloadCallback=ge:q.request=q.actor.send("reloadTile",Pe,Ze.bind(this));function Ze(ft,St){if(delete q.request,q.aborted)return ge(null);if(ft&&ft.status!==404)return ge(ft);St&&St.resourceTiming&&(q.resourceTiming=St.resourceTiming),this.map._refreshExpiredTiles&&St&&q.setExpiryData(St),q.loadVectorData(St,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),ge(null),q.reloadCallback&&(this.loadTile(q,q.reloadCallback),q.reloadCallback=null)}},X.prototype.abortTile=function(q){q.request&&(q.request.cancel(),delete q.request),q.actor&&q.actor.send("abortTile",{uid:q.uid,type:this.type,source:this.id},void 0)},X.prototype.unloadTile=function(q){q.unloadVectorData(),q.actor&&q.actor.send("removeTile",{uid:q.uid,type:this.type,source:this.id},void 0)},X.prototype.hasTransition=function(){return!1},X}(t.Evented),Z=function(ve){function X(de,q,ge,Ce){ve.call(this),this.id=de,this.dispatcher=ge,this.setEventedParent(Ce),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},q),t.extend(this,t.pick(q,["url","scheme","tileSize"]))}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.load=function(){var q=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=V(this._options,this.map._requestManager,function(ge,Ce){q._tileJSONRequest=null,q._loaded=!0,ge?q.fire(new t.ErrorEvent(ge)):Ce&&(t.extend(q,Ce),Ce.bounds&&(q.tileBounds=new U(Ce.bounds,q.minzoom,q.maxzoom)),t.postTurnstileEvent(Ce.tiles),t.postMapLoadEvent(Ce.tiles,q.map._getMapId(),q.map._requestManager._skuToken),q.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),q.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},X.prototype.loaded=function(){return this._loaded},X.prototype.onAdd=function(q){this.map=q,this.load()},X.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},X.prototype.serialize=function(){return t.extend({},this._options)},X.prototype.hasTile=function(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)},X.prototype.loadTile=function(q,ge){var Ce=this,Pe=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);q.request=t.getImage(this.map._requestManager.transformRequest(Pe,t.ResourceType.Tile),function(Ze,ft){if(delete q.request,q.aborted)q.state="unloaded",ge(null);else if(Ze)q.state="errored",ge(Ze);else if(ft){Ce.map._refreshExpiredTiles&&q.setExpiryData(ft),delete ft.cacheControl,delete ft.expires;var St=Ce.map.painter.context,Ht=St.gl;q.texture=Ce.map.painter.getTileTexture(ft.width),q.texture?q.texture.update(ft,{useMipmap:!0}):(q.texture=new t.Texture(St,ft,Ht.RGBA,{useMipmap:!0}),q.texture.bind(Ht.LINEAR,Ht.CLAMP_TO_EDGE,Ht.LINEAR_MIPMAP_NEAREST),St.extTextureFilterAnisotropic&&Ht.texParameterf(Ht.TEXTURE_2D,St.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,St.extTextureFilterAnisotropicMax)),q.state="loaded",t.cacheEntryPossiblyAdded(Ce.dispatcher),ge(null)}})},X.prototype.abortTile=function(q,ge){q.request&&(q.request.cancel(),delete q.request),ge()},X.prototype.unloadTile=function(q,ge){q.texture&&this.map.painter.saveTileTexture(q.texture),ge()},X.prototype.hasTransition=function(){return!1},X}(t.Evented),te=function(ve){function X(de,q,ge,Ce){ve.call(this,de,q,ge,Ce),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},q),this.encoding=q.encoding||"mapbox"}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},X.prototype.loadTile=function(q,ge){var Ce=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);q.request=t.getImage(this.map._requestManager.transformRequest(Ce,t.ResourceType.Tile),Pe.bind(this)),q.neighboringTiles=this._getNeighboringTiles(q.tileID);function Pe(ft,St){if(delete q.request,q.aborted)q.state="unloaded",ge(null);else if(ft)q.state="errored",ge(ft);else if(St){this.map._refreshExpiredTiles&&q.setExpiryData(St),delete St.cacheControl,delete St.expires;var Ht=t.window.ImageBitmap&&St instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported(),tr=Ht?St:t.browser.getImageData(St,1),ur={uid:q.uid,coord:q.tileID,source:this.id,rawImageData:tr,encoding:this.encoding};(!q.actor||q.state==="expired")&&(q.actor=this.dispatcher.getActor(),q.actor.send("loadDEMTile",ur,Ze.bind(this)))}}function Ze(ft,St){ft&&(q.state="errored",ge(ft)),St&&(q.dem=St,q.needsHillshadePrepare=!0,q.state="loaded",ge(null))}},X.prototype._getNeighboringTiles=function(q){var ge=q.canonical,Ce=Math.pow(2,ge.z),Pe=(ge.x-1+Ce)%Ce,Ze=ge.x===0?q.wrap-1:q.wrap,ft=(ge.x+1+Ce)%Ce,St=ge.x+1===Ce?q.wrap+1:q.wrap,Ht={};return Ht[new t.OverscaledTileID(q.overscaledZ,Ze,ge.z,Pe,ge.y).key]={backfilled:!1},Ht[new t.OverscaledTileID(q.overscaledZ,St,ge.z,ft,ge.y).key]={backfilled:!1},ge.y>0&&(Ht[new t.OverscaledTileID(q.overscaledZ,Ze,ge.z,Pe,ge.y-1).key]={backfilled:!1},Ht[new t.OverscaledTileID(q.overscaledZ,q.wrap,ge.z,ge.x,ge.y-1).key]={backfilled:!1},Ht[new t.OverscaledTileID(q.overscaledZ,St,ge.z,ft,ge.y-1).key]={backfilled:!1}),ge.y+1<Ce&&(Ht[new t.OverscaledTileID(q.overscaledZ,Ze,ge.z,Pe,ge.y+1).key]={backfilled:!1},Ht[new t.OverscaledTileID(q.overscaledZ,q.wrap,ge.z,ge.x,ge.y+1).key]={backfilled:!1},Ht[new t.OverscaledTileID(q.overscaledZ,St,ge.z,ft,ge.y+1).key]={backfilled:!1}),Ht},X.prototype.unloadTile=function(q){q.demTexture&&this.map.painter.saveTileTexture(q.demTexture),q.fbo&&(q.fbo.destroy(),delete q.fbo),q.dem&&delete q.dem,delete q.neighboringTiles,q.state="unloaded",q.actor&&q.actor.send("removeDEMTile",{uid:q.uid,source:this.id})},X}(Z),re=function(ve){function X(de,q,ge,Ce){ve.call(this),this.id=de,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=ge.getActor(),this.setEventedParent(Ce),this._data=q.data,this._options=t.extend({},q),this._collectResourceTiming=q.collectResourceTiming,this._resourceTiming=[],q.maxzoom!==void 0&&(this.maxzoom=q.maxzoom),q.type&&(this.type=q.type),q.attribution&&(this.attribution=q.attribution),this.promoteId=q.promoteId;var Pe=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:q.cluster||!1,geojsonVtOptions:{buffer:(q.buffer!==void 0?q.buffer:128)*Pe,tolerance:(q.tolerance!==void 0?q.tolerance:.375)*Pe,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:q.lineMetrics||!1,generateId:q.generateId||!1},superclusterOptions:{maxZoom:q.clusterMaxZoom!==void 0?Math.min(q.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(q.clusterRadius||50)*Pe,log:!1,generateId:q.generateId||!1},clusterProperties:q.clusterProperties},q.workerOptions)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.load=function(){var q=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ge){if(ge){q.fire(new t.ErrorEvent(ge));return}var Ce={dataType:"source",sourceDataType:"metadata"};q._collectResourceTiming&&q._resourceTiming&&q._resourceTiming.length>0&&(Ce.resourceTiming=q._resourceTiming,q._resourceTiming=[]),q.fire(new t.Event("data",Ce))})},X.prototype.onAdd=function(q){this.map=q,this.load()},X.prototype.setData=function(q){var ge=this;return this._data=q,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Ce){if(Ce){ge.fire(new t.ErrorEvent(Ce));return}var Pe={dataType:"source",sourceDataType:"content"};ge._collectResourceTiming&&ge._resourceTiming&&ge._resourceTiming.length>0&&(Pe.resourceTiming=ge._resourceTiming,ge._resourceTiming=[]),ge.fire(new t.Event("data",Pe))}),this},X.prototype.getClusterExpansionZoom=function(q,ge){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:q,source:this.id},ge),this},X.prototype.getClusterChildren=function(q,ge){return this.actor.send("geojson.getClusterChildren",{clusterId:q,source:this.id},ge),this},X.prototype.getClusterLeaves=function(q,ge,Ce,Pe){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:q,limit:ge,offset:Ce},Pe),this},X.prototype._updateWorkerData=function(q){var ge=this;this._loaded=!1;var Ce=t.extend({},this.workerOptions),Pe=this._data;typeof Pe=="string"?(Ce.request=this.map._requestManager.transformRequest(t.browser.resolveURL(Pe),t.ResourceType.Source),Ce.request.collectResourceTiming=this._collectResourceTiming):Ce.data=JSON.stringify(Pe),this.actor.send(this.type+".loadData",Ce,function(Ze,ft){ge._removed||ft&&ft.abandoned||(ge._loaded=!0,ft&&ft.resourceTiming&&ft.resourceTiming[ge.id]&&(ge._resourceTiming=ft.resourceTiming[ge.id].slice(0)),ge.actor.send(ge.type+".coalesce",{source:Ce.source},null),q(Ze))})},X.prototype.loaded=function(){return this._loaded},X.prototype.loadTile=function(q,ge){var Ce=this,Pe=q.actor?"reloadTile":"loadTile";q.actor=this.actor;var Ze={type:this.type,uid:q.uid,tileID:q.tileID,zoom:q.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};q.request=this.actor.send(Pe,Ze,function(ft,St){return delete q.request,q.unloadVectorData(),q.aborted?ge(null):ft?ge(ft):(q.loadVectorData(St,Ce.map.painter,Pe==="reloadTile"),ge(null))})},X.prototype.abortTile=function(q){q.request&&(q.request.cancel(),delete q.request),q.aborted=!0},X.prototype.unloadTile=function(q){q.unloadVectorData(),this.actor.send("removeTile",{uid:q.uid,type:this.type,source:this.id})},X.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},X.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},X.prototype.hasTransition=function(){return!1},X}(t.Evented),W=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),J=function(ve){function X(de,q,ge,Ce){ve.call(this),this.id=de,this.dispatcher=ge,this.coordinates=q.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Ce),this.options=q}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.load=function(q,ge){var Ce=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),function(Pe,Ze){Ce._loaded=!0,Pe?Ce.fire(new t.ErrorEvent(Pe)):Ze&&(Ce.image=Ze,q&&(Ce.coordinates=q),ge&&ge(),Ce._finishLoading())})},X.prototype.loaded=function(){return this._loaded},X.prototype.updateImage=function(q){var ge=this;return!this.image||!q.url?this:(this.options.url=q.url,this.load(q.coordinates,function(){ge.texture=null}),this)},X.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},X.prototype.onAdd=function(q){this.map=q,this.load()},X.prototype.setCoordinates=function(q){var ge=this;this.coordinates=q;var Ce=q.map(t.MercatorCoordinate.fromLngLat);this.tileID=le(Ce),this.minzoom=this.maxzoom=this.tileID.z;var Pe=Ce.map(function(Ze){return ge.tileID.getTilePoint(Ze)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(Pe[0].x,Pe[0].y,0,0),this._boundsArray.emplaceBack(Pe[1].x,Pe[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(Pe[3].x,Pe[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(Pe[2].x,Pe[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},X.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var q=this.map.painter.context,ge=q.gl;this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(q,this.image,ge.RGBA),this.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE));for(var Ce in this.tiles){var Pe=this.tiles[Ce];Pe.state!=="loaded"&&(Pe.state="loaded",Pe.texture=this.texture)}}},X.prototype.loadTile=function(q,ge){this.tileID&&this.tileID.equals(q.tileID.canonical)?(this.tiles[String(q.tileID.wrap)]=q,q.buckets={},ge(null)):(q.state="errored",ge(null))},X.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},X.prototype.hasTransition=function(){return!1},X}(t.Evented);function le(ve){for(var X=1/0,de=1/0,q=-1/0,ge=-1/0,Ce=0,Pe=ve;Ce<Pe.length;Ce+=1){var Ze=Pe[Ce];X=Math.min(X,Ze.x),de=Math.min(de,Ze.y),q=Math.max(q,Ze.x),ge=Math.max(ge,Ze.y)}var ft=q-X,St=ge-de,Ht=Math.max(ft,St),tr=Math.max(0,Math.floor(-Math.log(Ht)/Math.LN2)),ur=Math.pow(2,tr);return new t.CanonicalTileID(tr,Math.floor((X+q)/2*ur),Math.floor((de+ge)/2*ur))}var ue=function(ve){function X(de,q,ge,Ce){ve.call(this,de,q,ge,Ce),this.roundZoom=!0,this.type="video",this.options=q}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.load=function(){var q=this;this._loaded=!1;var ge=this.options;this.urls=[];for(var Ce=0,Pe=ge.urls;Ce<Pe.length;Ce+=1){var Ze=Pe[Ce];this.urls.push(this.map._requestManager.transformRequest(Ze,t.ResourceType.Source).url)}t.getVideo(this.urls,function(ft,St){q._loaded=!0,ft?q.fire(new t.ErrorEvent(ft)):St&&(q.video=St,q.video.loop=!0,q.video.addEventListener("playing",function(){q.map.triggerRepaint()}),q.map&&q.video.play(),q._finishLoading())})},X.prototype.pause=function(){this.video&&this.video.pause()},X.prototype.play=function(){this.video&&this.video.play()},X.prototype.seek=function(q){if(this.video){var ge=this.video.seekable;q<ge.start(0)||q>ge.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+ge.start(0)+" and "+ge.end(0)+"-second mark."))):this.video.currentTime=q}},X.prototype.getVideo=function(){return this.video},X.prototype.onAdd=function(q){this.map||(this.map=q,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},X.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var q=this.map.painter.context,ge=q.gl;this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),ge.texSubImage2D(ge.TEXTURE_2D,0,0,0,ge.RGBA,ge.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(q,this.video,ge.RGBA),this.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE));for(var Ce in this.tiles){var Pe=this.tiles[Ce];Pe.state!=="loaded"&&(Pe.state="loaded",Pe.texture=this.texture)}}},X.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},X.prototype.hasTransition=function(){return this.video&&!this.video.paused},X}(J),se=function(ve){function X(de,q,ge,Ce){ve.call(this,de,q,ge,Ce),q.coordinates?(!Array.isArray(q.coordinates)||q.coordinates.length!==4||q.coordinates.some(function(Pe){return!Array.isArray(Pe)||Pe.length!==2||Pe.some(function(Ze){return typeof Ze!="number"})}))&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+de,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+de,null,'missing required property "coordinates"'))),q.animate&&typeof q.animate!="boolean"&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+de,null,'optional "animate" property must be a boolean value'))),q.canvas?typeof q.canvas!="string"&&!(q.canvas instanceof t.window.HTMLCanvasElement)&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+de,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+de,null,'missing required property "canvas"'))),this.options=q,this.animate=q.animate!==void 0?q.animate:!0}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},X.prototype.getCanvas=function(){return this.canvas},X.prototype.onAdd=function(q){this.map=q,this.load(),this.canvas&&this.animate&&this.play()},X.prototype.onRemove=function(){this.pause()},X.prototype.prepare=function(){var q=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,q=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,q=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var ge=this.map.painter.context,Ce=ge.gl;this.boundsBuffer||(this.boundsBuffer=ge.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(q||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(ge,this.canvas,Ce.RGBA,{premultiply:!0});for(var Pe in this.tiles){var Ze=this.tiles[Pe];Ze.state!=="loaded"&&(Ze.state="loaded",Ze.texture=this.texture)}}},X.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},X.prototype.hasTransition=function(){return this._playing},X.prototype._hasInvalidDimensions=function(){for(var q=0,ge=[this.canvas.width,this.canvas.height];q<ge.length;q+=1){var Ce=ge[q];if(isNaN(Ce)||Ce<=0)return!0}return!1},X}(J),G={vector:j,raster:Z,"raster-dem":te,geojson:re,video:ue,image:J,canvas:se},Y=function(ve,X,de,q){var ge=new G[X.type](ve,X,de,q);if(ge.id!==ve)throw new Error("Expected Source id to be "+ve+" instead of "+ge.id);return t.bindAll(["load","abort","unload","serialize","prepare"],ge),ge},ee=function(ve){return G[ve]},$=function(ve,X){G[ve]=X};function K(ve,X){var de=t.identity([]);return t.translate(de,de,[1,1,0]),t.scale(de,de,[ve.width*.5,ve.height*.5,1]),t.multiply(de,de,ve.calculatePosMatrix(X.toUnwrapped()))}function Q(ve,X,de){if(ve)for(var q=0,ge=ve;q<ge.length;q+=1){var Ce=ge[q],Pe=X[Ce];if(Pe&&Pe.source===de&&Pe.type==="fill-extrusion")return!0}else for(var Ze in X){var ft=X[Ze];if(ft.source===de&&ft.type==="fill-extrusion")return!0}return!1}function ae(ve,X,de,q,ge,Ce){var Pe=Q(ge&&ge.layers,X,ve.id),Ze=Ce.maxPitchScaleFactor(),ft=ve.tilesIn(q,Ze,Pe);ft.sort(fe);for(var St=[],Ht=0,tr=ft;Ht<tr.length;Ht+=1){var ur=tr[Ht];St.push({wrappedTileID:ur.tileID.wrapped().key,queryResults:ur.tile.queryRenderedFeatures(X,de,ve._state,ur.queryGeometry,ur.cameraQueryGeometry,ur.scale,ge,Ce,Ze,K(ve.transform,ur.tileID))})}var Er=ye(St);for(var Wr in Er)Er[Wr].forEach(function(jr){var Gr=jr.feature,qr=ve.getFeatureState(Gr.layer["source-layer"],Gr.id);Gr.source=Gr.layer.source,Gr.layer["source-layer"]&&(Gr.sourceLayer=Gr.layer["source-layer"]),Gr.state=qr});return Er}function ie(ve,X,de,q,ge,Ce,Pe){for(var Ze={},ft=Ce.queryRenderedSymbols(q),St=[],Ht=0,tr=Object.keys(ft).map(Number);Ht<tr.length;Ht+=1){var ur=tr[Ht];St.push(Pe[ur])}St.sort(fe);for(var Er=function(){var dn=jr[Wr],Cn=dn.featureIndex.lookupSymbolFeatures(ft[dn.bucketInstanceId],X,dn.bucketIndex,dn.sourceLayerIndex,ge.filter,ge.layers,ge.availableImages,ve);for(var Vn in Cn){var Qn=Ze[Vn]=Ze[Vn]||[],na=Cn[Vn];na.sort(function(Ta,Ea){var Ia=dn.featureSortOrder;if(Ia){var Ya=Ia.indexOf(Ta.featureIndex),ii=Ia.indexOf(Ea.featureIndex);return ii-Ya}else return Ea.featureIndex-Ta.featureIndex});for(var ta=0,ma=na;ta<ma.length;ta+=1){var Sa=ma[ta];Qn.push(Sa)}}},Wr=0,jr=St;Wr<jr.length;Wr+=1)Er();var Gr=function(dn){Ze[dn].forEach(function(Cn){var Vn=Cn.feature,Qn=ve[dn],na=de[Qn.source],ta=na.getFeatureState(Vn.layer["source-layer"],Vn.id);Vn.source=Vn.layer.source,Vn.layer["source-layer"]&&(Vn.sourceLayer=Vn.layer["source-layer"]),Vn.state=ta})};for(var qr in Ze)Gr(qr);return Ze}function oe(ve,X){for(var de=ve.getRenderableIds().map(function(ft){return ve.getTileByID(ft)}),q=[],ge={},Ce=0;Ce<de.length;Ce++){var Pe=de[Ce],Ze=Pe.tileID.canonical.key;ge[Ze]||(ge[Ze]=!0,Pe.querySourceFeatures(q,X))}return q}function fe(ve,X){var de=ve.tileID,q=X.tileID;return de.overscaledZ-q.overscaledZ||de.canonical.y-q.canonical.y||de.wrap-q.wrap||de.canonical.x-q.canonical.x}function ye(ve){for(var X={},de={},q=0,ge=ve;q<ge.length;q+=1){var Ce=ge[q],Pe=Ce.queryResults,Ze=Ce.wrappedTileID,ft=de[Ze]=de[Ze]||{};for(var St in Pe)for(var Ht=Pe[St],tr=ft[St]=ft[St]||{},ur=X[St]=X[St]||[],Er=0,Wr=Ht;Er<Wr.length;Er+=1){var jr=Wr[Er];tr[jr.featureIndex]||(tr[jr.featureIndex]=!0,ur.push(jr))}}return X}var ce=function(X,de){this.max=X,this.onRemove=de,this.reset()};ce.prototype.reset=function(){for(var X in this.data)for(var de=0,q=this.data[X];de<q.length;de+=1){var ge=q[de];ge.timeout&&clearTimeout(ge.timeout),this.onRemove(ge.value)}return this.data={},this.order=[],this},ce.prototype.add=function(X,de,q){var ge=this,Ce=X.wrapped().key;this.data[Ce]===void 0&&(this.data[Ce]=[]);var Pe={value:de,timeout:void 0};if(q!==void 0&&(Pe.timeout=setTimeout(function(){ge.remove(X,Pe)},q)),this.data[Ce].push(Pe),this.order.push(Ce),this.order.length>this.max){var Ze=this._getAndRemoveByKey(this.order[0]);Ze&&this.onRemove(Ze)}return this},ce.prototype.has=function(X){return X.wrapped().key in this.data},ce.prototype.getAndRemove=function(X){return this.has(X)?this._getAndRemoveByKey(X.wrapped().key):null},ce.prototype._getAndRemoveByKey=function(X){var de=this.data[X].shift();return de.timeout&&clearTimeout(de.timeout),this.data[X].length===0&&delete this.data[X],this.order.splice(this.order.indexOf(X),1),de.value},ce.prototype.getByKey=function(X){var de=this.data[X];return de?de[0].value:null},ce.prototype.get=function(X){if(!this.has(X))return null;var de=this.data[X.wrapped().key][0];return de.value},ce.prototype.remove=function(X,de){if(!this.has(X))return this;var q=X.wrapped().key,ge=de===void 0?0:this.data[q].indexOf(de),Ce=this.data[q][ge];return this.data[q].splice(ge,1),Ce.timeout&&clearTimeout(Ce.timeout),this.data[q].length===0&&delete this.data[q],this.onRemove(Ce.value),this.order.splice(this.order.indexOf(q),1),this},ce.prototype.setMaxSize=function(X){for(this.max=X;this.order.length>this.max;){var de=this._getAndRemoveByKey(this.order[0]);de&&this.onRemove(de)}return this},ce.prototype.filter=function(X){var de=[];for(var q in this.data)for(var ge=0,Ce=this.data[q];ge<Ce.length;ge+=1){var Pe=Ce[ge];X(Pe.value)||de.push(Pe)}for(var Ze=0,ft=de;Ze<ft.length;Ze+=1){var St=ft[Ze];this.remove(St.value.tileID,St)}};var me=function(X,de,q){this.context=X;var ge=X.gl;this.buffer=ge.createBuffer(),this.dynamicDraw=Boolean(q),this.context.unbindVAO(),X.bindElementBuffer.set(this.buffer),ge.bufferData(ge.ELEMENT_ARRAY_BUFFER,de.arrayBuffer,this.dynamicDraw?ge.DYNAMIC_DRAW:ge.STATIC_DRAW),this.dynamicDraw||delete de.arrayBuffer};me.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},me.prototype.updateData=function(X){var de=this.context.gl;this.context.unbindVAO(),this.bind(),de.bufferSubData(de.ELEMENT_ARRAY_BUFFER,0,X.arrayBuffer)},me.prototype.destroy=function(){var X=this.context.gl;this.buffer&&(X.deleteBuffer(this.buffer),delete this.buffer)};var xe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ke=function(X,de,q,ge){this.length=de.length,this.attributes=q,this.itemSize=de.bytesPerElement,this.dynamicDraw=ge,this.context=X;var Ce=X.gl;this.buffer=Ce.createBuffer(),X.bindVertexBuffer.set(this.buffer),Ce.bufferData(Ce.ARRAY_BUFFER,de.arrayBuffer,this.dynamicDraw?Ce.DYNAMIC_DRAW:Ce.STATIC_DRAW),this.dynamicDraw||delete de.arrayBuffer};ke.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ke.prototype.updateData=function(X){var de=this.context.gl;this.bind(),de.bufferSubData(de.ARRAY_BUFFER,0,X.arrayBuffer)},ke.prototype.enableAttributes=function(X,de){for(var q=0;q<this.attributes.length;q++){var ge=this.attributes[q],Ce=de.attributes[ge.name];Ce!==void 0&&X.enableVertexAttribArray(Ce)}},ke.prototype.setVertexAttribPointers=function(X,de,q){for(var ge=0;ge<this.attributes.length;ge++){var Ce=this.attributes[ge],Pe=de.attributes[Ce.name];Pe!==void 0&&X.vertexAttribPointer(Pe,Ce.components,X[xe[Ce.type]],!1,this.itemSize,Ce.offset+this.itemSize*(q||0))}},ke.prototype.destroy=function(){var X=this.context.gl;this.buffer&&(X.deleteBuffer(this.buffer),delete this.buffer)};var Ae=function(X){this.gl=X.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Ae.prototype.get=function(){return this.current},Ae.prototype.set=function(X){},Ae.prototype.getDefault=function(){return this.default},Ae.prototype.setDefault=function(){this.set(this.default)};var Oe=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return t.Color.transparent},X.prototype.set=function(q){var ge=this.current;q.r===ge.r&&q.g===ge.g&&q.b===ge.b&&q.a===ge.a&&!this.dirty||(this.gl.clearColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)},X}(Ae),He=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return 1},X.prototype.set=function(q){q===this.current&&!this.dirty||(this.gl.clearDepth(q),this.current=q,this.dirty=!1)},X}(Ae),Ge=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return 0},X.prototype.set=function(q){q===this.current&&!this.dirty||(this.gl.clearStencil(q),this.current=q,this.dirty=!1)},X}(Ae),_e=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return[!0,!0,!0,!0]},X.prototype.set=function(q){var ge=this.current;q[0]===ge[0]&&q[1]===ge[1]&&q[2]===ge[2]&&q[3]===ge[3]&&!this.dirty||(this.gl.colorMask(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)},X}(Ae),Ie=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return!0},X.prototype.set=function(q){q===this.current&&!this.dirty||(this.gl.depthMask(q),this.current=q,this.dirty=!1)},X}(Ae),We=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return 255},X.prototype.set=function(q){q===this.current&&!this.dirty||(this.gl.stencilMask(q),this.current=q,this.dirty=!1)},X}(Ae),et=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},X.prototype.set=function(q){var ge=this.current;q.func===ge.func&&q.ref===ge.ref&&q.mask===ge.mask&&!this.dirty||(this.gl.stencilFunc(q.func,q.ref,q.mask),this.current=q,this.dirty=!1)},X}(Ae),Ne=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){var q=this.gl;return[q.KEEP,q.KEEP,q.KEEP]},X.prototype.set=function(q){var ge=this.current;q[0]===ge[0]&&q[1]===ge[1]&&q[2]===ge[2]&&!this.dirty||(this.gl.stencilOp(q[0],q[1],q[2]),this.current=q,this.dirty=!1)},X}(Ae),De=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){var ge=this.gl;q?ge.enable(ge.STENCIL_TEST):ge.disable(ge.STENCIL_TEST),this.current=q,this.dirty=!1}},X}(Ae),Ve=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return[0,1]},X.prototype.set=function(q){var ge=this.current;q[0]===ge[0]&&q[1]===ge[1]&&!this.dirty||(this.gl.depthRange(q[0],q[1]),this.current=q,this.dirty=!1)},X}(Ae),dt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){var ge=this.gl;q?ge.enable(ge.DEPTH_TEST):ge.disable(ge.DEPTH_TEST),this.current=q,this.dirty=!1}},X}(Ae),Dt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return this.gl.LESS},X.prototype.set=function(q){q===this.current&&!this.dirty||(this.gl.depthFunc(q),this.current=q,this.dirty=!1)},X}(Ae),Gt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){var ge=this.gl;q?ge.enable(ge.BLEND):ge.disable(ge.BLEND),this.current=q,this.dirty=!1}},X}(Ae),Mt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){var q=this.gl;return[q.ONE,q.ZERO]},X.prototype.set=function(q){var ge=this.current;q[0]===ge[0]&&q[1]===ge[1]&&!this.dirty||(this.gl.blendFunc(q[0],q[1]),this.current=q,this.dirty=!1)},X}(Ae),zt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return t.Color.transparent},X.prototype.set=function(q){var ge=this.current;q.r===ge.r&&q.g===ge.g&&q.b===ge.b&&q.a===ge.a&&!this.dirty||(this.gl.blendColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)},X}(Ae),Nt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return this.gl.FUNC_ADD},X.prototype.set=function(q){q===this.current&&!this.dirty||(this.gl.blendEquation(q),this.current=q,this.dirty=!1)},X}(Ae),Et=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){var ge=this.gl;q?ge.enable(ge.CULL_FACE):ge.disable(ge.CULL_FACE),this.current=q,this.dirty=!1}},X}(Ae),At=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return this.gl.BACK},X.prototype.set=function(q){q===this.current&&!this.dirty||(this.gl.cullFace(q),this.current=q,this.dirty=!1)},X}(Ae),it=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return this.gl.CCW},X.prototype.set=function(q){q===this.current&&!this.dirty||(this.gl.frontFace(q),this.current=q,this.dirty=!1)},X}(Ae),ht=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(q){q===this.current&&!this.dirty||(this.gl.useProgram(q),this.current=q,this.dirty=!1)},X}(Ae),$e=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return this.gl.TEXTURE0},X.prototype.set=function(q){q===this.current&&!this.dirty||(this.gl.activeTexture(q),this.current=q,this.dirty=!1)},X}(Ae),Ee=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){var q=this.gl;return[0,0,q.drawingBufferWidth,q.drawingBufferHeight]},X.prototype.set=function(q){var ge=this.current;q[0]===ge[0]&&q[1]===ge[1]&&q[2]===ge[2]&&q[3]===ge[3]&&!this.dirty||(this.gl.viewport(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)},X}(Ae),Xe=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){var ge=this.gl;ge.bindFramebuffer(ge.FRAMEBUFFER,q),this.current=q,this.dirty=!1}},X}(Ae),rt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){var ge=this.gl;ge.bindRenderbuffer(ge.RENDERBUFFER,q),this.current=q,this.dirty=!1}},X}(Ae),ut=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){var ge=this.gl;ge.bindTexture(ge.TEXTURE_2D,q),this.current=q,this.dirty=!1}},X}(Ae),Pt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){var ge=this.gl;ge.bindBuffer(ge.ARRAY_BUFFER,q),this.current=q,this.dirty=!1}},X}(Ae),kt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(q){var ge=this.gl;ge.bindBuffer(ge.ELEMENT_ARRAY_BUFFER,q),this.current=q,this.dirty=!1},X}(Ae),Bt=function(ve){function X(de){ve.call(this,de),this.vao=de.extVertexArrayObject}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(q){!this.vao||q===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(q),this.current=q,this.dirty=!1)},X}(Ae),Xt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return 4},X.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){var ge=this.gl;ge.pixelStorei(ge.UNPACK_ALIGNMENT,q),this.current=q,this.dirty=!1}},X}(Ae),Ut=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){var ge=this.gl;ge.pixelStorei(ge.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q),this.current=q,this.dirty=!1}},X}(Ae),Jt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){var ge=this.gl;ge.pixelStorei(ge.UNPACK_FLIP_Y_WEBGL,q),this.current=q,this.dirty=!1}},X}(Ae),Je=function(ve){function X(de,q){ve.call(this,de),this.context=de,this.parent=q}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return null},X}(Ae),gt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.setDirty=function(){this.dirty=!0},X.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var ge=this.gl;ge.framebufferTexture2D(ge.FRAMEBUFFER,ge.COLOR_ATTACHMENT0,ge.TEXTURE_2D,q,0),this.current=q,this.dirty=!1}},X}(Je),Ct=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var ge=this.gl;ge.framebufferRenderbuffer(ge.FRAMEBUFFER,ge.DEPTH_ATTACHMENT,ge.RENDERBUFFER,q),this.current=q,this.dirty=!1}},X}(Je),or=function(X,de,q,ge){this.context=X,this.width=de,this.height=q;var Ce=X.gl,Pe=this.framebuffer=Ce.createFramebuffer();this.colorAttachment=new gt(X,Pe),ge&&(this.depthAttachment=new Ct(X,Pe))};or.prototype.destroy=function(){var X=this.context.gl,de=this.colorAttachment.get();if(de&&X.deleteTexture(de),this.depthAttachment){var q=this.depthAttachment.get();q&&X.deleteRenderbuffer(q)}X.deleteFramebuffer(this.framebuffer)};var gr=519,lr=function(X,de,q){this.func=X,this.mask=de,this.range=q};lr.ReadOnly=!1,lr.ReadWrite=!0,lr.disabled=new lr(gr,lr.ReadOnly,[0,1]);var mr=519,Fr=7680,Rr=function(X,de,q,ge,Ce,Pe){this.test=X,this.ref=de,this.mask=q,this.fail=ge,this.depthFail=Ce,this.pass=Pe};Rr.disabled=new Rr({func:mr,mask:0},0,0,Fr,Fr,Fr);var ir=0,Vr=1,qe=771,we=function(X,de,q){this.blendFunction=X,this.blendColor=de,this.mask=q};we.Replace=[Vr,ir],we.disabled=new we(we.Replace,t.Color.transparent,[!1,!1,!1,!1]),we.unblended=new we(we.Replace,t.Color.transparent,[!0,!0,!0,!0]),we.alphaBlended=new we([Vr,qe],t.Color.transparent,[!0,!0,!0,!0]);var Me=1029,Re=2305,Ye=function(X,de,q){this.enable=X,this.mode=de,this.frontFace=q};Ye.disabled=new Ye(!1,Me,Re),Ye.backCCW=new Ye(!0,Me,Re);var Qe=function(X){this.gl=X,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Oe(this),this.clearDepth=new He(this),this.clearStencil=new Ge(this),this.colorMask=new _e(this),this.depthMask=new Ie(this),this.stencilMask=new We(this),this.stencilFunc=new et(this),this.stencilOp=new Ne(this),this.stencilTest=new De(this),this.depthRange=new Ve(this),this.depthTest=new dt(this),this.depthFunc=new Dt(this),this.blend=new Gt(this),this.blendFunc=new Mt(this),this.blendColor=new zt(this),this.blendEquation=new Nt(this),this.cullFace=new Et(this),this.cullFaceSide=new At(this),this.frontFace=new it(this),this.program=new ht(this),this.activeTexture=new $e(this),this.viewport=new Ee(this),this.bindFramebuffer=new Xe(this),this.bindRenderbuffer=new rt(this),this.bindTexture=new ut(this),this.bindVertexBuffer=new Pt(this),this.bindElementBuffer=new kt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Bt(this),this.pixelStoreUnpack=new Xt(this),this.pixelStoreUnpackPremultiplyAlpha=new Ut(this),this.pixelStoreUnpackFlipY=new Jt(this),this.extTextureFilterAnisotropic=X.getExtension("EXT_texture_filter_anisotropic")||X.getExtension("MOZ_EXT_texture_filter_anisotropic")||X.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=X.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=X.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(X.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=X.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=X.getExtension("EXT_disjoint_timer_query")};Qe.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Qe.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Qe.prototype.createIndexBuffer=function(X,de){return new me(this,X,de)},Qe.prototype.createVertexBuffer=function(X,de,q){return new ke(this,X,de,q)},Qe.prototype.createRenderbuffer=function(X,de,q){var ge=this.gl,Ce=ge.createRenderbuffer();return this.bindRenderbuffer.set(Ce),ge.renderbufferStorage(ge.RENDERBUFFER,X,de,q),this.bindRenderbuffer.set(null),Ce},Qe.prototype.createFramebuffer=function(X,de,q){return new or(this,X,de,q)},Qe.prototype.clear=function(X){var de=X.color,q=X.depth,ge=this.gl,Ce=0;de&&(Ce|=ge.COLOR_BUFFER_BIT,this.clearColor.set(de),this.colorMask.set([!0,!0,!0,!0])),typeof q!="undefined"&&(Ce|=ge.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(q),this.depthMask.set(!0)),ge.clear(Ce)},Qe.prototype.setCullFace=function(X){X.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(X.mode),this.frontFace.set(X.frontFace))},Qe.prototype.setDepthMode=function(X){X.func===this.gl.ALWAYS&&!X.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(X.func),this.depthMask.set(X.mask),this.depthRange.set(X.range))},Qe.prototype.setStencilMode=function(X){X.test.func===this.gl.ALWAYS&&!X.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(X.mask),this.stencilOp.set([X.fail,X.depthFail,X.pass]),this.stencilFunc.set({func:X.test.func,ref:X.ref,mask:X.test.mask}))},Qe.prototype.setColorMode=function(X){t.deepEqual(X.blendFunction,we.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(X.blendFunction),this.blendColor.set(X.blendColor)),this.colorMask.set(X.mask)},Qe.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ot=function(ve){function X(de,q,ge){var Ce=this;ve.call(this),this.id=de,this.dispatcher=ge,this.on("data",function(Pe){Pe.dataType==="source"&&Pe.sourceDataType==="metadata"&&(Ce._sourceLoaded=!0),Ce._sourceLoaded&&!Ce._paused&&Pe.dataType==="source"&&Pe.sourceDataType==="content"&&(Ce.reload(),Ce.transform&&Ce.update(Ce.transform))}),this.on("error",function(){Ce._sourceErrored=!0}),this._source=Y(de,q,ge,this),this._tiles={},this._cache=new ce(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.onAdd=function(q){this.map=q,this._maxTileCacheSize=q?q._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(q)},X.prototype.onRemove=function(q){this._source&&this._source.onRemove&&this._source.onRemove(q)},X.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var q in this._tiles){var ge=this._tiles[q];if(ge.state!=="loaded"&&ge.state!=="errored")return!1}return!0},X.prototype.getSource=function(){return this._source},X.prototype.pause=function(){this._paused=!0},X.prototype.resume=function(){if(!!this._paused){var q=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,q&&this.reload(),this.transform&&this.update(this.transform)}},X.prototype._loadTile=function(q,ge){return this._source.loadTile(q,ge)},X.prototype._unloadTile=function(q){if(this._source.unloadTile)return this._source.unloadTile(q,function(){})},X.prototype._abortTile=function(q){if(this._source.abortTile)return this._source.abortTile(q,function(){})},X.prototype.serialize=function(){return this._source.serialize()},X.prototype.prepare=function(q){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var ge in this._tiles){var Ce=this._tiles[ge];Ce.upload(q),Ce.prepare(this.map.style.imageManager)}},X.prototype.getIds=function(){return t.values(this._tiles).map(function(q){return q.tileID}).sort(st).map(function(q){return q.key})},X.prototype.getRenderableIds=function(q){var ge=this,Ce=[];for(var Pe in this._tiles)this._isIdRenderable(Pe,q)&&Ce.push(this._tiles[Pe]);return q?Ce.sort(function(Ze,ft){var St=Ze.tileID,Ht=ft.tileID,tr=new t.Point(St.canonical.x,St.canonical.y)._rotate(ge.transform.angle),ur=new t.Point(Ht.canonical.x,Ht.canonical.y)._rotate(ge.transform.angle);return St.overscaledZ-Ht.overscaledZ||ur.y-tr.y||ur.x-tr.x}).map(function(Ze){return Ze.tileID.key}):Ce.map(function(Ze){return Ze.tileID}).sort(st).map(function(Ze){return Ze.key})},X.prototype.hasRenderableParent=function(q){var ge=this.findLoadedParent(q,0);return ge?this._isIdRenderable(ge.tileID.key):!1},X.prototype._isIdRenderable=function(q,ge){return this._tiles[q]&&this._tiles[q].hasData()&&!this._coveredTiles[q]&&(ge||!this._tiles[q].holdingForFade())},X.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var q in this._tiles)this._tiles[q].state!=="errored"&&this._reloadTile(q,"reloading")},X.prototype._reloadTile=function(q,ge){var Ce=this._tiles[q];!Ce||(Ce.state!=="loading"&&(Ce.state=ge),this._loadTile(Ce,this._tileLoaded.bind(this,Ce,q,ge)))},X.prototype._tileLoaded=function(q,ge,Ce,Pe){if(Pe){q.state="errored",Pe.status!==404?this._source.fire(new t.ErrorEvent(Pe,{tile:q})):this.update(this.transform);return}q.timeAdded=t.browser.now(),Ce==="expired"&&(q.refreshedUponExpiration=!0),this._setTileReloadTimer(ge,q),this.getSource().type==="raster-dem"&&q.dem&&this._backfillDEM(q),this._state.initializeTileState(q,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:q,coord:q.tileID}))},X.prototype._backfillDEM=function(q){for(var ge=this.getRenderableIds(),Ce=0;Ce<ge.length;Ce++){var Pe=ge[Ce];if(q.neighboringTiles&&q.neighboringTiles[Pe]){var Ze=this.getTileByID(Pe);ft(q,Ze),ft(Ze,q)}}function ft(St,Ht){St.needsHillshadePrepare=!0;var tr=Ht.tileID.canonical.x-St.tileID.canonical.x,ur=Ht.tileID.canonical.y-St.tileID.canonical.y,Er=Math.pow(2,St.tileID.canonical.z),Wr=Ht.tileID.key;tr===0&&ur===0||Math.abs(ur)>1||(Math.abs(tr)>1&&(Math.abs(tr+Er)===1?tr+=Er:Math.abs(tr-Er)===1&&(tr-=Er)),!(!Ht.dem||!St.dem)&&(St.dem.backfillBorder(Ht.dem,tr,ur),St.neighboringTiles&&St.neighboringTiles[Wr]&&(St.neighboringTiles[Wr].backfilled=!0)))}},X.prototype.getTile=function(q){return this.getTileByID(q.key)},X.prototype.getTileByID=function(q){return this._tiles[q]},X.prototype._retainLoadedChildren=function(q,ge,Ce,Pe){for(var Ze in this._tiles){var ft=this._tiles[Ze];if(!(Pe[Ze]||!ft.hasData()||ft.tileID.overscaledZ<=ge||ft.tileID.overscaledZ>Ce)){for(var St=ft.tileID;ft&&ft.tileID.overscaledZ>ge+1;){var Ht=ft.tileID.scaledTo(ft.tileID.overscaledZ-1);ft=this._tiles[Ht.key],ft&&ft.hasData()&&(St=Ht)}for(var tr=St;tr.overscaledZ>ge;)if(tr=tr.scaledTo(tr.overscaledZ-1),q[tr.key]){Pe[St.key]=St;break}}}},X.prototype.findLoadedParent=function(q,ge){if(q.key in this._loadedParentTiles){var Ce=this._loadedParentTiles[q.key];return Ce&&Ce.tileID.overscaledZ>=ge?Ce:null}for(var Pe=q.overscaledZ-1;Pe>=ge;Pe--){var Ze=q.scaledTo(Pe),ft=this._getLoadedTile(Ze);if(ft)return ft}},X.prototype._getLoadedTile=function(q){var ge=this._tiles[q.key];if(ge&&ge.hasData())return ge;var Ce=this._cache.getByKey(q.wrapped().key);return Ce},X.prototype.updateCacheSize=function(q){var ge=Math.ceil(q.width/this._source.tileSize)+1,Ce=Math.ceil(q.height/this._source.tileSize)+1,Pe=ge*Ce,Ze=5,ft=Math.floor(Pe*Ze),St=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,ft):ft;this._cache.setMaxSize(St)},X.prototype.handleWrapJump=function(q){var ge=this._prevLng===void 0?q:this._prevLng,Ce=q-ge,Pe=Ce/360,Ze=Math.round(Pe);if(this._prevLng=q,Ze){var ft={};for(var St in this._tiles){var Ht=this._tiles[St];Ht.tileID=Ht.tileID.unwrapTo(Ht.tileID.wrap+Ze),ft[Ht.tileID.key]=Ht}this._tiles=ft;for(var tr in this._timers)clearTimeout(this._timers[tr]),delete this._timers[tr];for(var ur in this._tiles){var Er=this._tiles[ur];this._setTileReloadTimer(ur,Er)}}},X.prototype.update=function(q){var ge=this;if(this.transform=q,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(q),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var Ce;this.used?this._source.tileID?Ce=q.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ta){return new t.OverscaledTileID(Ta.canonical.z,Ta.wrap,Ta.canonical.z,Ta.canonical.x,Ta.canonical.y)}):(Ce=q.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Ce=Ce.filter(function(Ta){return ge._source.hasTile(Ta)}))):Ce=[];var Pe=q.coveringZoomLevel(this._source),Ze=Math.max(Pe-X.maxOverzooming,this._source.minzoom),ft=Math.max(Pe+X.maxUnderzooming,this._source.minzoom),St=this._updateRetainedTiles(Ce,Pe);if(pt(this._source.type)){for(var Ht={},tr={},ur=Object.keys(St),Er=0,Wr=ur;Er<Wr.length;Er+=1){var jr=Wr[Er],Gr=St[jr],qr=this._tiles[jr];if(!(!qr||qr.fadeEndTime&&qr.fadeEndTime<=t.browser.now())){var dn=this.findLoadedParent(Gr,Ze);dn&&(this._addTile(dn.tileID),Ht[dn.tileID.key]=dn.tileID),tr[jr]=Gr}}this._retainLoadedChildren(tr,Pe,ft,St);for(var Cn in Ht)St[Cn]||(this._coveredTiles[Cn]=!0,St[Cn]=Ht[Cn])}for(var Vn in St)this._tiles[Vn].clearFadeHold();for(var Qn=t.keysDifference(this._tiles,St),na=0,ta=Qn;na<ta.length;na+=1){var ma=ta[na],Sa=this._tiles[ma];Sa.hasSymbolBuckets&&!Sa.holdingForFade()?Sa.setHoldDuration(this.map._fadeDuration):(!Sa.hasSymbolBuckets||Sa.symbolFadeFinished())&&this._removeTile(ma)}this._updateLoadedParentTileCache()}},X.prototype.releaseSymbolFadeTiles=function(){for(var q in this._tiles)this._tiles[q].holdingForFade()&&this._removeTile(q)},X.prototype._updateRetainedTiles=function(q,ge){for(var Ce={},Pe={},Ze=Math.max(ge-X.maxOverzooming,this._source.minzoom),ft=Math.max(ge+X.maxUnderzooming,this._source.minzoom),St={},Ht=0,tr=q;Ht<tr.length;Ht+=1){var ur=tr[Ht],Er=this._addTile(ur);Ce[ur.key]=ur,!Er.hasData()&&ge<this._source.maxzoom&&(St[ur.key]=ur)}this._retainLoadedChildren(St,ge,ft,Ce);for(var Wr=0,jr=q;Wr<jr.length;Wr+=1){var Gr=jr[Wr],qr=this._tiles[Gr.key];if(!qr.hasData()){if(ge+1>this._source.maxzoom){var dn=Gr.children(this._source.maxzoom)[0],Cn=this.getTile(dn);if(!!Cn&&Cn.hasData()){Ce[dn.key]=dn;continue}}else{var Vn=Gr.children(this._source.maxzoom);if(Ce[Vn[0].key]&&Ce[Vn[1].key]&&Ce[Vn[2].key]&&Ce[Vn[3].key])continue}for(var Qn=qr.wasRequested(),na=Gr.overscaledZ-1;na>=Ze;--na){var ta=Gr.scaledTo(na);if(Pe[ta.key]||(Pe[ta.key]=!0,qr=this.getTile(ta),!qr&&Qn&&(qr=this._addTile(ta)),qr&&(Ce[ta.key]=ta,Qn=qr.wasRequested(),qr.hasData())))break}}}return Ce},X.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var q in this._tiles){for(var ge=[],Ce=void 0,Pe=this._tiles[q].tileID;Pe.overscaledZ>0;){if(Pe.key in this._loadedParentTiles){Ce=this._loadedParentTiles[Pe.key];break}ge.push(Pe.key);var Ze=Pe.scaledTo(Pe.overscaledZ-1);if(Ce=this._getLoadedTile(Ze),Ce)break;Pe=Ze}for(var ft=0,St=ge;ft<St.length;ft+=1){var Ht=St[ft];this._loadedParentTiles[Ht]=Ce}}},X.prototype._addTile=function(q){var ge=this._tiles[q.key];if(ge)return ge;ge=this._cache.getAndRemove(q),ge&&(this._setTileReloadTimer(q.key,ge),ge.tileID=q,this._state.initializeTileState(ge,this.map?this.map.painter:null),this._cacheTimers[q.key]&&(clearTimeout(this._cacheTimers[q.key]),delete this._cacheTimers[q.key],this._setTileReloadTimer(q.key,ge)));var Ce=Boolean(ge);return Ce||(ge=new t.Tile(q,this._source.tileSize*q.overscaleFactor()),this._loadTile(ge,this._tileLoaded.bind(this,ge,q.key,ge.state))),ge?(ge.uses++,this._tiles[q.key]=ge,Ce||this._source.fire(new t.Event("dataloading",{tile:ge,coord:ge.tileID,dataType:"source"})),ge):null},X.prototype._setTileReloadTimer=function(q,ge){var Ce=this;q in this._timers&&(clearTimeout(this._timers[q]),delete this._timers[q]);var Pe=ge.getExpiryTimeout();Pe&&(this._timers[q]=setTimeout(function(){Ce._reloadTile(q,"expired"),delete Ce._timers[q]},Pe))},X.prototype._removeTile=function(q){var ge=this._tiles[q];!ge||(ge.uses--,delete this._tiles[q],this._timers[q]&&(clearTimeout(this._timers[q]),delete this._timers[q]),!(ge.uses>0)&&(ge.hasData()&&ge.state!=="reloading"?this._cache.add(ge.tileID,ge,ge.getExpiryTimeout()):(ge.aborted=!0,this._abortTile(ge),this._unloadTile(ge))))},X.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var q in this._tiles)this._removeTile(q);this._cache.reset()},X.prototype.tilesIn=function(q,ge,Ce){var Pe=this,Ze=[],ft=this.transform;if(!ft)return Ze;for(var St=Ce?ft.getCameraQueryGeometry(q):q,Ht=q.map(function(na){return ft.pointCoordinate(na)}),tr=St.map(function(na){return ft.pointCoordinate(na)}),ur=this.getIds(),Er=1/0,Wr=1/0,jr=-1/0,Gr=-1/0,qr=0,dn=tr;qr<dn.length;qr+=1){var Cn=dn[qr];Er=Math.min(Er,Cn.x),Wr=Math.min(Wr,Cn.y),jr=Math.max(jr,Cn.x),Gr=Math.max(Gr,Cn.y)}for(var Vn=function(na){var ta=Pe._tiles[ur[na]];if(!ta.holdingForFade()){var ma=ta.tileID,Sa=Math.pow(2,ft.zoom-ta.tileID.overscaledZ),Ta=ge*ta.queryPadding*t.EXTENT/ta.tileSize/Sa,Ea=[ma.getTilePoint(new t.MercatorCoordinate(Er,Wr)),ma.getTilePoint(new t.MercatorCoordinate(jr,Gr))];if(Ea[0].x-Ta<t.EXTENT&&Ea[0].y-Ta<t.EXTENT&&Ea[1].x+Ta>=0&&Ea[1].y+Ta>=0){var Ia=Ht.map(function(ii){return ma.getTilePoint(ii)}),Ya=tr.map(function(ii){return ma.getTilePoint(ii)});Ze.push({tile:ta,tileID:ma,queryGeometry:Ia,cameraQueryGeometry:Ya,scale:Sa})}}},Qn=0;Qn<ur.length;Qn++)Vn(Qn);return Ze},X.prototype.getVisibleCoordinates=function(q){for(var ge=this,Ce=this.getRenderableIds(q).map(function(St){return ge._tiles[St].tileID}),Pe=0,Ze=Ce;Pe<Ze.length;Pe+=1){var ft=Ze[Pe];ft.posMatrix=this.transform.calculatePosMatrix(ft.toUnwrapped())}return Ce},X.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(pt(this._source.type))for(var q in this._tiles){var ge=this._tiles[q];if(ge.fadeEndTime!==void 0&&ge.fadeEndTime>=t.browser.now())return!0}return!1},X.prototype.setFeatureState=function(q,ge,Ce){q=q||"_geojsonTileLayer",this._state.updateState(q,ge,Ce)},X.prototype.removeFeatureState=function(q,ge,Ce){q=q||"_geojsonTileLayer",this._state.removeFeatureState(q,ge,Ce)},X.prototype.getFeatureState=function(q,ge){return q=q||"_geojsonTileLayer",this._state.getState(q,ge)},X.prototype.setDependencies=function(q,ge,Ce){var Pe=this._tiles[q];Pe&&Pe.setDependencies(ge,Ce)},X.prototype.reloadTilesForDependencies=function(q,ge){for(var Ce in this._tiles){var Pe=this._tiles[Ce];Pe.hasDependency(q,ge)&&this._reloadTile(Ce,"reloading")}this._cache.filter(function(Ze){return!Ze.hasDependency(q,ge)})},X}(t.Evented);ot.maxOverzooming=10,ot.maxUnderzooming=3;function st(ve,X){var de=Math.abs(ve.wrap*2)-+(ve.wrap<0),q=Math.abs(X.wrap*2)-+(X.wrap<0);return ve.overscaledZ-X.overscaledZ||q-de||X.canonical.y-ve.canonical.y||X.canonical.x-ve.canonical.x}function pt(ve){return ve==="raster"||ve==="image"||ve==="video"}function wt(){return new t.window.Worker(Qp.workerUrl)}var Yt="mapboxgl_preloaded_worker_pool",wr=function(){this.active={}};wr.prototype.acquire=function(X){if(!this.workers)for(this.workers=[];this.workers.length<wr.workerCount;)this.workers.push(new wt);return this.active[X]=!0,this.workers.slice()},wr.prototype.release=function(X){delete this.active[X],this.numActive()===0&&(this.workers.forEach(function(de){de.terminate()}),this.workers=null)},wr.prototype.isPreloaded=function(){return!!this.active[Yt]},wr.prototype.numActive=function(){return Object.keys(this.active).length};var Tr=Math.floor(t.browser.hardwareConcurrency/2);wr.workerCount=Math.max(Math.min(Tr,6),1);var Mr;function _r(){return Mr||(Mr=new wr),Mr}function Or(){var ve=_r();ve.acquire(Yt)}function nn(){var ve=Mr;ve&&(ve.isPreloaded()&&ve.numActive()===1?(ve.release(Yt),Mr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function Sr(ve,X){var de={};for(var q in ve)q!=="ref"&&(de[q]=ve[q]);return t.refProperties.forEach(function(ge){ge in X&&(de[ge]=X[ge])}),de}function yr(ve){ve=ve.slice();for(var X=Object.create(null),de=0;de<ve.length;de++)X[ve[de].id]=ve[de];for(var q=0;q<ve.length;q++)"ref"in ve[q]&&(ve[q]=Sr(ve[q],X[ve[q].ref]));return ve}function gn(){var ve={},X=t.styleSpec.$version;for(var de in t.styleSpec.$root){var q=t.styleSpec.$root[de];if(q.required){var ge=null;de==="version"?ge=X:q.type==="array"?ge=[]:ge={},ge!=null&&(ve[de]=ge)}}return ve}var Xr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function kr(ve,X,de){de.push({command:Xr.addSource,args:[ve,X[ve]]})}function sn(ve,X,de){X.push({command:Xr.removeSource,args:[ve]}),de[ve]=!0}function cn(ve,X,de,q){sn(ve,de,q),kr(ve,X,de)}function $r(ve,X,de){var q;for(q in ve[de])if(!!ve[de].hasOwnProperty(q)&&q!=="data"&&!t.deepEqual(ve[de][q],X[de][q]))return!1;for(q in X[de])if(!!X[de].hasOwnProperty(q)&&q!=="data"&&!t.deepEqual(ve[de][q],X[de][q]))return!1;return!0}function at(ve,X,de,q){ve=ve||{},X=X||{};var ge;for(ge in ve)!ve.hasOwnProperty(ge)||X.hasOwnProperty(ge)||sn(ge,de,q);for(ge in X)!X.hasOwnProperty(ge)||(ve.hasOwnProperty(ge)?t.deepEqual(ve[ge],X[ge])||(ve[ge].type==="geojson"&&X[ge].type==="geojson"&&$r(ve,X,ge)?de.push({command:Xr.setGeoJSONSourceData,args:[ge,X[ge].data]}):cn(ge,X,de,q)):kr(ge,X,de))}function Ot(ve,X,de,q,ge,Ce){ve=ve||{},X=X||{};var Pe;for(Pe in ve)!ve.hasOwnProperty(Pe)||t.deepEqual(ve[Pe],X[Pe])||de.push({command:Ce,args:[q,Pe,X[Pe],ge]});for(Pe in X)!X.hasOwnProperty(Pe)||ve.hasOwnProperty(Pe)||t.deepEqual(ve[Pe],X[Pe])||de.push({command:Ce,args:[q,Pe,X[Pe],ge]})}function nr(ve){return ve.id}function dr(ve,X){return ve[X.id]=X,ve}function Zr(ve,X,de){ve=ve||[],X=X||[];var q=ve.map(nr),ge=X.map(nr),Ce=ve.reduce(dr,{}),Pe=X.reduce(dr,{}),Ze=q.slice(),ft=Object.create(null),St,Ht,tr,ur,Er,Wr,jr;for(St=0,Ht=0;St<q.length;St++)tr=q[St],Pe.hasOwnProperty(tr)?Ht++:(de.push({command:Xr.removeLayer,args:[tr]}),Ze.splice(Ze.indexOf(tr,Ht),1));for(St=0,Ht=0;St<ge.length;St++)tr=ge[ge.length-1-St],Ze[Ze.length-1-St]!==tr&&(Ce.hasOwnProperty(tr)?(de.push({command:Xr.removeLayer,args:[tr]}),Ze.splice(Ze.lastIndexOf(tr,Ze.length-Ht),1)):Ht++,Wr=Ze[Ze.length-St],de.push({command:Xr.addLayer,args:[Pe[tr],Wr]}),Ze.splice(Ze.length-St,0,tr),ft[tr]=!0);for(St=0;St<ge.length;St++)if(tr=ge[St],ur=Ce[tr],Er=Pe[tr],!(ft[tr]||t.deepEqual(ur,Er))){if(!t.deepEqual(ur.source,Er.source)||!t.deepEqual(ur["source-layer"],Er["source-layer"])||!t.deepEqual(ur.type,Er.type)){de.push({command:Xr.removeLayer,args:[tr]}),Wr=Ze[Ze.lastIndexOf(tr)+1],de.push({command:Xr.addLayer,args:[Er,Wr]});continue}Ot(ur.layout,Er.layout,de,tr,null,Xr.setLayoutProperty),Ot(ur.paint,Er.paint,de,tr,null,Xr.setPaintProperty),t.deepEqual(ur.filter,Er.filter)||de.push({command:Xr.setFilter,args:[tr,Er.filter]}),(!t.deepEqual(ur.minzoom,Er.minzoom)||!t.deepEqual(ur.maxzoom,Er.maxzoom))&&de.push({command:Xr.setLayerZoomRange,args:[tr,Er.minzoom,Er.maxzoom]});for(jr in ur)!ur.hasOwnProperty(jr)||jr==="layout"||jr==="paint"||jr==="filter"||jr==="metadata"||jr==="minzoom"||jr==="maxzoom"||(jr.indexOf("paint.")===0?Ot(ur[jr],Er[jr],de,tr,jr.slice(6),Xr.setPaintProperty):t.deepEqual(ur[jr],Er[jr])||de.push({command:Xr.setLayerProperty,args:[tr,jr,Er[jr]]}));for(jr in Er)!Er.hasOwnProperty(jr)||ur.hasOwnProperty(jr)||jr==="layout"||jr==="paint"||jr==="filter"||jr==="metadata"||jr==="minzoom"||jr==="maxzoom"||(jr.indexOf("paint.")===0?Ot(ur[jr],Er[jr],de,tr,jr.slice(6),Xr.setPaintProperty):t.deepEqual(ur[jr],Er[jr])||de.push({command:Xr.setLayerProperty,args:[tr,jr,Er[jr]]}))}}function Lr(ve,X){if(!ve)return[{command:Xr.setStyle,args:[X]}];var de=[];try{if(!t.deepEqual(ve.version,X.version))return[{command:Xr.setStyle,args:[X]}];t.deepEqual(ve.center,X.center)||de.push({command:Xr.setCenter,args:[X.center]}),t.deepEqual(ve.zoom,X.zoom)||de.push({command:Xr.setZoom,args:[X.zoom]}),t.deepEqual(ve.bearing,X.bearing)||de.push({command:Xr.setBearing,args:[X.bearing]}),t.deepEqual(ve.pitch,X.pitch)||de.push({command:Xr.setPitch,args:[X.pitch]}),t.deepEqual(ve.sprite,X.sprite)||de.push({command:Xr.setSprite,args:[X.sprite]}),t.deepEqual(ve.glyphs,X.glyphs)||de.push({command:Xr.setGlyphs,args:[X.glyphs]}),t.deepEqual(ve.transition,X.transition)||de.push({command:Xr.setTransition,args:[X.transition]}),t.deepEqual(ve.light,X.light)||de.push({command:Xr.setLight,args:[X.light]});var q={},ge=[];at(ve.sources,X.sources,ge,q);var Ce=[];ve.layers&&ve.layers.forEach(function(Pe){q[Pe.source]?de.push({command:Xr.removeLayer,args:[Pe.id]}):Ce.push(Pe)}),de=de.concat(ge),Zr(Ce,X.layers,de)}catch(Pe){console.warn("Unable to compute style diff:",Pe),de=[{command:Xr.setStyle,args:[X]}]}return de}var Ur=function(X,de){this.reset(X,de)};Ur.prototype.reset=function(X,de){this.points=X||[],this._distances=[0];for(var q=1;q<this.points.length;q++)this._distances[q]=this._distances[q-1]+this.points[q].dist(this.points[q-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(de||0,this.length*.5),this.paddedLength=this.length-this.padding*2},Ur.prototype.lerp=function(X){if(this.points.length===1)return this.points[0];X=t.clamp(X,0,1);for(var de=1,q=this._distances[de],ge=X*this.paddedLength+this.padding;q<ge&&de<this._distances.length;)q=this._distances[++de];var Ce=de-1,Pe=this._distances[Ce],Ze=q-Pe,ft=Ze>0?(ge-Pe)/Ze:0;return this.points[Ce].mult(1-ft).add(this.points[de].mult(ft))};var xr=function(X,de,q){var ge=this.boxCells=[],Ce=this.circleCells=[];this.xCellCount=Math.ceil(X/q),this.yCellCount=Math.ceil(de/q);for(var Pe=0;Pe<this.xCellCount*this.yCellCount;Pe++)ge.push([]),Ce.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=X,this.height=de,this.xScale=this.xCellCount/X,this.yScale=this.yCellCount/de,this.boxUid=0,this.circleUid=0};xr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},xr.prototype.insert=function(X,de,q,ge,Ce){this._forEachCell(de,q,ge,Ce,this._insertBoxCell,this.boxUid++),this.boxKeys.push(X),this.bboxes.push(de),this.bboxes.push(q),this.bboxes.push(ge),this.bboxes.push(Ce)},xr.prototype.insertCircle=function(X,de,q,ge){this._forEachCell(de-ge,q-ge,de+ge,q+ge,this._insertCircleCell,this.circleUid++),this.circleKeys.push(X),this.circles.push(de),this.circles.push(q),this.circles.push(ge)},xr.prototype._insertBoxCell=function(X,de,q,ge,Ce,Pe){this.boxCells[Ce].push(Pe)},xr.prototype._insertCircleCell=function(X,de,q,ge,Ce,Pe){this.circleCells[Ce].push(Pe)},xr.prototype._query=function(X,de,q,ge,Ce,Pe){if(q<0||X>this.width||ge<0||de>this.height)return Ce?!1:[];var Ze=[];if(X<=0&&de<=0&&this.width<=q&&this.height<=ge){if(Ce)return!0;for(var ft=0;ft<this.boxKeys.length;ft++)Ze.push({key:this.boxKeys[ft],x1:this.bboxes[ft*4],y1:this.bboxes[ft*4+1],x2:this.bboxes[ft*4+2],y2:this.bboxes[ft*4+3]});for(var St=0;St<this.circleKeys.length;St++){var Ht=this.circles[St*3],tr=this.circles[St*3+1],ur=this.circles[St*3+2];Ze.push({key:this.circleKeys[St],x1:Ht-ur,y1:tr-ur,x2:Ht+ur,y2:tr+ur})}return Pe?Ze.filter(Pe):Ze}else{var Er={hitTest:Ce,seenUids:{box:{},circle:{}}};return this._forEachCell(X,de,q,ge,this._queryCell,Ze,Er,Pe),Ce?Ze.length>0:Ze}},xr.prototype._queryCircle=function(X,de,q,ge,Ce){var Pe=X-q,Ze=X+q,ft=de-q,St=de+q;if(Ze<0||Pe>this.width||St<0||ft>this.height)return ge?!1:[];var Ht=[],tr={hitTest:ge,circle:{x:X,y:de,radius:q},seenUids:{box:{},circle:{}}};return this._forEachCell(Pe,ft,Ze,St,this._queryCellCircle,Ht,tr,Ce),ge?Ht.length>0:Ht},xr.prototype.query=function(X,de,q,ge,Ce){return this._query(X,de,q,ge,!1,Ce)},xr.prototype.hitTest=function(X,de,q,ge,Ce){return this._query(X,de,q,ge,!0,Ce)},xr.prototype.hitTestCircle=function(X,de,q,ge){return this._queryCircle(X,de,q,!0,ge)},xr.prototype._queryCell=function(X,de,q,ge,Ce,Pe,Ze,ft){var St=Ze.seenUids,Ht=this.boxCells[Ce];if(Ht!==null)for(var tr=this.bboxes,ur=0,Er=Ht;ur<Er.length;ur+=1){var Wr=Er[ur];if(!St.box[Wr]){St.box[Wr]=!0;var jr=Wr*4;if(X<=tr[jr+2]&&de<=tr[jr+3]&&q>=tr[jr+0]&&ge>=tr[jr+1]&&(!ft||ft(this.boxKeys[Wr]))){if(Ze.hitTest)return Pe.push(!0),!0;Pe.push({key:this.boxKeys[Wr],x1:tr[jr],y1:tr[jr+1],x2:tr[jr+2],y2:tr[jr+3]})}}}var Gr=this.circleCells[Ce];if(Gr!==null)for(var qr=this.circles,dn=0,Cn=Gr;dn<Cn.length;dn+=1){var Vn=Cn[dn];if(!St.circle[Vn]){St.circle[Vn]=!0;var Qn=Vn*3;if(this._circleAndRectCollide(qr[Qn],qr[Qn+1],qr[Qn+2],X,de,q,ge)&&(!ft||ft(this.circleKeys[Vn]))){if(Ze.hitTest)return Pe.push(!0),!0;var na=qr[Qn],ta=qr[Qn+1],ma=qr[Qn+2];Pe.push({key:this.circleKeys[Vn],x1:na-ma,y1:ta-ma,x2:na+ma,y2:ta+ma})}}}},xr.prototype._queryCellCircle=function(X,de,q,ge,Ce,Pe,Ze,ft){var St=Ze.circle,Ht=Ze.seenUids,tr=this.boxCells[Ce];if(tr!==null)for(var ur=this.bboxes,Er=0,Wr=tr;Er<Wr.length;Er+=1){var jr=Wr[Er];if(!Ht.box[jr]){Ht.box[jr]=!0;var Gr=jr*4;if(this._circleAndRectCollide(St.x,St.y,St.radius,ur[Gr+0],ur[Gr+1],ur[Gr+2],ur[Gr+3])&&(!ft||ft(this.boxKeys[jr])))return Pe.push(!0),!0}}var qr=this.circleCells[Ce];if(qr!==null)for(var dn=this.circles,Cn=0,Vn=qr;Cn<Vn.length;Cn+=1){var Qn=Vn[Cn];if(!Ht.circle[Qn]){Ht.circle[Qn]=!0;var na=Qn*3;if(this._circlesCollide(dn[na],dn[na+1],dn[na+2],St.x,St.y,St.radius)&&(!ft||ft(this.circleKeys[Qn])))return Pe.push(!0),!0}}},xr.prototype._forEachCell=function(X,de,q,ge,Ce,Pe,Ze,ft){for(var St=this._convertToXCellCoord(X),Ht=this._convertToYCellCoord(de),tr=this._convertToXCellCoord(q),ur=this._convertToYCellCoord(ge),Er=St;Er<=tr;Er++)for(var Wr=Ht;Wr<=ur;Wr++){var jr=this.xCellCount*Wr+Er;if(Ce.call(this,X,de,q,ge,jr,Pe,Ze,ft))return}},xr.prototype._convertToXCellCoord=function(X){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(X*this.xScale)))},xr.prototype._convertToYCellCoord=function(X){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(X*this.yScale)))},xr.prototype._circlesCollide=function(X,de,q,ge,Ce,Pe){var Ze=ge-X,ft=Ce-de,St=q+Pe;return St*St>Ze*Ze+ft*ft},xr.prototype._circleAndRectCollide=function(X,de,q,ge,Ce,Pe,Ze){var ft=(Pe-ge)/2,St=Math.abs(X-(ge+ft));if(St>ft+q)return!1;var Ht=(Ze-Ce)/2,tr=Math.abs(de-(Ce+Ht));if(tr>Ht+q)return!1;if(St<=ft||tr<=Ht)return!0;var ur=St-ft,Er=tr-Ht;return ur*ur+Er*Er<=q*q};function on(ve,X,de,q,ge){var Ce=t.create();return X?(t.scale(Ce,Ce,[1/ge,1/ge,1]),de||t.rotateZ(Ce,Ce,q.angle)):t.multiply(Ce,q.labelPlaneMatrix,ve),Ce}function Pn(ve,X,de,q,ge){if(X){var Ce=t.clone(ve);return t.scale(Ce,Ce,[ge,ge,1]),de||t.rotateZ(Ce,Ce,-q.angle),Ce}else return q.glCoordMatrix}function En(ve,X){var de=[ve.x,ve.y,0,1];qn(de,de,X);var q=de[3];return{point:new t.Point(de[0]/q,de[1]/q),signedDistanceFromCamera:q}}function $n(ve,X){return .5+.5*(ve/X)}function aa(ve,X){var de=ve[0]/ve[3],q=ve[1]/ve[3],ge=de>=-X[0]&&de<=X[0]&&q>=-X[1]&&q<=X[1];return ge}function Ca(ve,X,de,q,ge,Ce,Pe,Ze){var ft=q?ve.textSizeData:ve.iconSizeData,St=t.evaluateSizeForZoom(ft,de.transform.zoom),Ht=[256/de.width*2+1,256/de.height*2+1],tr=q?ve.text.dynamicLayoutVertexArray:ve.icon.dynamicLayoutVertexArray;tr.clear();for(var ur=ve.lineVertexArray,Er=q?ve.text.placedSymbolArray:ve.icon.placedSymbolArray,Wr=de.transform.width/de.transform.height,jr=!1,Gr=0;Gr<Er.length;Gr++){var qr=Er.get(Gr);if(qr.hidden||qr.writingMode===t.WritingMode.vertical&&!jr){ha(qr.numGlyphs,tr);continue}jr=!1;var dn=[qr.anchorX,qr.anchorY,0,1];if(t.transformMat4(dn,dn,X),!aa(dn,Ht)){ha(qr.numGlyphs,tr);continue}var Cn=dn[3],Vn=$n(de.transform.cameraToCenterDistance,Cn),Qn=t.evaluateSizeForFeature(ft,St,qr),na=Pe?Qn/Vn:Qn*Vn,ta=new t.Point(qr.anchorX,qr.anchorY),ma=En(ta,ge).point,Sa={},Ta=yn(qr,na,!1,Ze,X,ge,Ce,ve.glyphOffsetArray,ur,tr,ma,ta,Sa,Wr);jr=Ta.useVertical,(Ta.notEnoughRoom||jr||Ta.needsFlipping&&yn(qr,na,!0,Ze,X,ge,Ce,ve.glyphOffsetArray,ur,tr,ma,ta,Sa,Wr).notEnoughRoom)&&ha(qr.numGlyphs,tr)}q?ve.text.dynamicLayoutVertexBuffer.updateData(tr):ve.icon.dynamicLayoutVertexBuffer.updateData(tr)}function ba(ve,X,de,q,ge,Ce,Pe,Ze,ft,St,Ht){var tr=Ze.glyphStartIndex+Ze.numGlyphs,ur=Ze.lineStartIndex,Er=Ze.lineStartIndex+Ze.lineLength,Wr=X.getoffsetX(Ze.glyphStartIndex),jr=X.getoffsetX(tr-1),Gr=In(ve*Wr,de,q,ge,Ce,Pe,Ze.segment,ur,Er,ft,St,Ht);if(!Gr)return null;var qr=In(ve*jr,de,q,ge,Ce,Pe,Ze.segment,ur,Er,ft,St,Ht);return qr?{first:Gr,last:qr}:null}function vr(ve,X,de,q){if(ve===t.WritingMode.horizontal){var ge=Math.abs(de.y-X.y),Ce=Math.abs(de.x-X.x)*q;if(ge>Ce)return{useVertical:!0}}return(ve===t.WritingMode.vertical?X.y<de.y:X.x>de.x)?{needsFlipping:!0}:null}function yn(ve,X,de,q,ge,Ce,Pe,Ze,ft,St,Ht,tr,ur,Er){var Wr=X/24,jr=ve.lineOffsetX*Wr,Gr=ve.lineOffsetY*Wr,qr;if(ve.numGlyphs>1){var dn=ve.glyphStartIndex+ve.numGlyphs,Cn=ve.lineStartIndex,Vn=ve.lineStartIndex+ve.lineLength,Qn=ba(Wr,Ze,jr,Gr,de,Ht,tr,ve,ft,Ce,ur);if(!Qn)return{notEnoughRoom:!0};var na=En(Qn.first.point,Pe).point,ta=En(Qn.last.point,Pe).point;if(q&&!de){var ma=vr(ve.writingMode,na,ta,Er);if(ma)return ma}qr=[Qn.first];for(var Sa=ve.glyphStartIndex+1;Sa<dn-1;Sa++)qr.push(In(Wr*Ze.getoffsetX(Sa),jr,Gr,de,Ht,tr,ve.segment,Cn,Vn,ft,Ce,ur));qr.push(Qn.last)}else{if(q&&!de){var Ta=En(tr,ge).point,Ea=ve.lineStartIndex+ve.segment+1,Ia=new t.Point(ft.getx(Ea),ft.gety(Ea)),Ya=En(Ia,ge),ii=Ya.signedDistanceFromCamera>0?Ya.point:en(tr,Ia,Ta,1,ge),Ri=vr(ve.writingMode,Ta,ii,Er);if(Ri)return Ri}var ci=In(Wr*Ze.getoffsetX(ve.glyphStartIndex),jr,Gr,de,Ht,tr,ve.segment,ve.lineStartIndex,ve.lineStartIndex+ve.lineLength,ft,Ce,ur);if(!ci)return{notEnoughRoom:!0};qr=[ci]}for(var gi=0,Ga=qr;gi<Ga.length;gi+=1){var Di=Ga[gi];t.addDynamicAttributes(St,Di.point,Di.angle)}return{}}function en(ve,X,de,q,ge){var Ce=En(ve.add(ve.sub(X)._unit()),ge).point,Pe=de.sub(Ce);return de.add(Pe._mult(q/Pe.mag()))}function In(ve,X,de,q,ge,Ce,Pe,Ze,ft,St,Ht,tr){var ur=q?ve-X:ve+X,Er=ur>0?1:-1,Wr=0;q&&(Er*=-1,Wr=Math.PI),Er<0&&(Wr+=Math.PI);for(var jr=Er>0?Ze+Pe:Ze+Pe+1,Gr=ge,qr=ge,dn=0,Cn=0,Vn=Math.abs(ur),Qn=[];dn+Cn<=Vn;){if(jr+=Er,jr<Ze||jr>=ft)return null;if(qr=Gr,Qn.push(Gr),Gr=tr[jr],Gr===void 0){var na=new t.Point(St.getx(jr),St.gety(jr)),ta=En(na,Ht);if(ta.signedDistanceFromCamera>0)Gr=tr[jr]=ta.point;else{var ma=jr-Er,Sa=dn===0?Ce:new t.Point(St.getx(ma),St.gety(ma));Gr=en(Sa,na,qr,Vn-dn+1,Ht)}}dn+=Cn,Cn=qr.dist(Gr)}var Ta=(Vn-dn)/Cn,Ea=Gr.sub(qr),Ia=Ea.mult(Ta)._add(qr);Ia._add(Ea._unit()._perp()._mult(de*Er));var Ya=Wr+Math.atan2(Gr.y-qr.y,Gr.x-qr.x);return Qn.push(Ia),{point:Ia,angle:Ya,path:Qn}}var Bn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ha(ve,X){for(var de=0;de<ve;de++){var q=X.length;X.resize(q+4),X.float32.set(Bn,q*3)}}function qn(ve,X,de){var q=X[0],ge=X[1];return ve[0]=de[0]*q+de[4]*ge+de[12],ve[1]=de[1]*q+de[5]*ge+de[13],ve[3]=de[3]*q+de[7]*ge+de[15],ve}var Hn=100,la=function(X,de,q){de===void 0&&(de=new xr(X.width+2*Hn,X.height+2*Hn,25)),q===void 0&&(q=new xr(X.width+2*Hn,X.height+2*Hn,25)),this.transform=X,this.grid=de,this.ignoredGrid=q,this.pitchfactor=Math.cos(X._pitch)*X.cameraToCenterDistance,this.screenRightBoundary=X.width+Hn,this.screenBottomBoundary=X.height+Hn,this.gridRightBoundary=X.width+2*Hn,this.gridBottomBoundary=X.height+2*Hn};la.prototype.placeCollisionBox=function(X,de,q,ge,Ce){var Pe=this.projectAndGetPerspectiveRatio(ge,X.anchorPointX,X.anchorPointY),Ze=q*Pe.perspectiveRatio,ft=X.x1*Ze+Pe.point.x,St=X.y1*Ze+Pe.point.y,Ht=X.x2*Ze+Pe.point.x,tr=X.y2*Ze+Pe.point.y;return!this.isInsideGrid(ft,St,Ht,tr)||!de&&this.grid.hitTest(ft,St,Ht,tr,Ce)?{box:[],offscreen:!1}:{box:[ft,St,Ht,tr],offscreen:this.isOffscreen(ft,St,Ht,tr)}},la.prototype.placeCollisionCircles=function(X,de,q,ge,Ce,Pe,Ze,ft,St,Ht,tr,ur,Er){var Wr=[],jr=new t.Point(de.anchorX,de.anchorY),Gr=En(jr,Pe),qr=$n(this.transform.cameraToCenterDistance,Gr.signedDistanceFromCamera),dn=Ht?Ce/qr:Ce*qr,Cn=dn/t.ONE_EM,Vn=En(jr,Ze).point,Qn={},na=de.lineOffsetX*Cn,ta=de.lineOffsetY*Cn,ma=ba(Cn,ge,na,ta,!1,Vn,jr,de,q,Ze,Qn),Sa=!1,Ta=!1,Ea=!0;if(ma){for(var Ia=ur*.5*qr+Er,Ya=new t.Point(-Hn,-Hn),ii=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),Ri=new Ur,ci=ma.first,gi=ma.last,Ga=[],Di=ci.path.length-1;Di>=1;Di--)Ga.push(ci.path[Di]);for(var Ni=1;Ni<gi.path.length;Ni++)Ga.push(gi.path[Ni]);var Gi=Ia*2.5;if(ft){var Ti=Ga.map(function(Ku){return En(Ku,ft)});Ti.some(function(Ku){return Ku.signedDistanceFromCamera<=0})?Ga=[]:Ga=Ti.map(function(Ku){return Ku.point})}var Qi=[];if(Ga.length>0){for(var si=Ga[0].clone(),Ai=Ga[0].clone(),Fo=1;Fo<Ga.length;Fo++)si.x=Math.min(si.x,Ga[Fo].x),si.y=Math.min(si.y,Ga[Fo].y),Ai.x=Math.max(Ai.x,Ga[Fo].x),Ai.y=Math.max(Ai.y,Ga[Fo].y);si.x>=Ya.x&&Ai.x<=ii.x&&si.y>=Ya.y&&Ai.y<=ii.y?Qi=[Ga]:Ai.x<Ya.x||si.x>ii.x||Ai.y<Ya.y||si.y>ii.y?Qi=[]:Qi=t.clipLine([Ga],Ya.x,Ya.y,ii.x,ii.y)}for(var qo=0,uu=Qi;qo<uu.length;qo+=1){var fu=uu[qo];Ri.reset(fu,Ia*.25);var Yu=0;Ri.length<=.5*Ia?Yu=1:Yu=Math.ceil(Ri.paddedLength/Gi)+1;for(var ju=0;ju<Yu;ju++){var mf=ju/Math.max(Yu-1,1),Xu=Ri.lerp(mf),pl=Xu.x+Hn,Wf=Xu.y+Hn;Wr.push(pl,Wf,Ia,0);var Ns=pl-Ia,jl=Wf-Ia,Zu=pl+Ia,Eu=Wf+Ia;if(Ea=Ea&&this.isOffscreen(Ns,jl,Zu,Eu),Ta=Ta||this.isInsideGrid(Ns,jl,Zu,Eu),!X&&this.grid.hitTestCircle(pl,Wf,Ia,tr)&&(Sa=!0,!St))return{circles:[],offscreen:!1,collisionDetected:Sa}}}}return{circles:!St&&Sa||!Ta?[]:Wr,offscreen:Ea,collisionDetected:Sa}},la.prototype.queryRenderedSymbols=function(X){if(X.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var de=[],q=1/0,ge=1/0,Ce=-1/0,Pe=-1/0,Ze=0,ft=X;Ze<ft.length;Ze+=1){var St=ft[Ze],Ht=new t.Point(St.x+Hn,St.y+Hn);q=Math.min(q,Ht.x),ge=Math.min(ge,Ht.y),Ce=Math.max(Ce,Ht.x),Pe=Math.max(Pe,Ht.y),de.push(Ht)}for(var tr=this.grid.query(q,ge,Ce,Pe).concat(this.ignoredGrid.query(q,ge,Ce,Pe)),ur={},Er={},Wr=0,jr=tr;Wr<jr.length;Wr+=1){var Gr=jr[Wr],qr=Gr.key;if(ur[qr.bucketInstanceId]===void 0&&(ur[qr.bucketInstanceId]={}),!ur[qr.bucketInstanceId][qr.featureIndex]){var dn=[new t.Point(Gr.x1,Gr.y1),new t.Point(Gr.x2,Gr.y1),new t.Point(Gr.x2,Gr.y2),new t.Point(Gr.x1,Gr.y2)];!t.polygonIntersectsPolygon(de,dn)||(ur[qr.bucketInstanceId][qr.featureIndex]=!0,Er[qr.bucketInstanceId]===void 0&&(Er[qr.bucketInstanceId]=[]),Er[qr.bucketInstanceId].push(qr.featureIndex))}}return Er},la.prototype.insertCollisionBox=function(X,de,q,ge,Ce){var Pe=de?this.ignoredGrid:this.grid,Ze={bucketInstanceId:q,featureIndex:ge,collisionGroupID:Ce};Pe.insert(Ze,X[0],X[1],X[2],X[3])},la.prototype.insertCollisionCircles=function(X,de,q,ge,Ce){for(var Pe=de?this.ignoredGrid:this.grid,Ze={bucketInstanceId:q,featureIndex:ge,collisionGroupID:Ce},ft=0;ft<X.length;ft+=4)Pe.insertCircle(Ze,X[ft],X[ft+1],X[ft+2])},la.prototype.projectAndGetPerspectiveRatio=function(X,de,q){var ge=[de,q,0,1];qn(ge,ge,X);var Ce=new t.Point((ge[0]/ge[3]+1)/2*this.transform.width+Hn,(-ge[1]/ge[3]+1)/2*this.transform.height+Hn);return{point:Ce,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/ge[3])}},la.prototype.isOffscreen=function(X,de,q,ge){return q<Hn||X>=this.screenRightBoundary||ge<Hn||de>this.screenBottomBoundary},la.prototype.isInsideGrid=function(X,de,q,ge){return q>=0&&X<this.gridRightBoundary&&ge>=0&&de<this.gridBottomBoundary},la.prototype.getViewportMatrix=function(){var X=t.identity([]);return t.translate(X,X,[-Hn,-Hn,0]),X};function da(ve,X,de){return X*(t.EXTENT/(ve.tileSize*Math.pow(2,de-ve.tileID.overscaledZ)))}var hr=function(X,de,q,ge){X?this.opacity=Math.max(0,Math.min(1,X.opacity+(X.placed?de:-de))):this.opacity=ge&&q?1:0,this.placed=q};hr.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var zr=function(X,de,q,ge,Ce){this.text=new hr(X?X.text:null,de,q,Ce),this.icon=new hr(X?X.icon:null,de,ge,Ce)};zr.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var ln=function(X,de,q){this.text=X,this.icon=de,this.skipFade=q},Rt=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},qt=function(X,de,q,ge,Ce){this.bucketInstanceId=X,this.featureIndex=de,this.sourceLayerIndex=q,this.bucketIndex=ge,this.tileID=Ce},br=function(X){this.crossSourceCollisions=X,this.maxGroupID=0,this.collisionGroups={}};br.prototype.get=function(X){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[X]){var de=++this.maxGroupID;this.collisionGroups[X]={ID:de,predicate:function(q){return q.collisionGroupID===de}}}return this.collisionGroups[X]};function Hr(ve,X,de,q,ge){var Ce=t.getAnchorAlignment(ve),Pe=Ce.horizontalAlign,Ze=Ce.verticalAlign,ft=-(Pe-.5)*X,St=-(Ze-.5)*de,Ht=t.evaluateVariableOffset(ve,q);return new t.Point(ft+Ht[0]*ge,St+Ht[1]*ge)}function ar(ve,X,de,q,ge,Ce){var Pe=ve.x1,Ze=ve.x2,ft=ve.y1,St=ve.y2,Ht=ve.anchorPointX,tr=ve.anchorPointY,ur=new t.Point(X,de);return q&&ur._rotate(ge?Ce:-Ce),{x1:Pe+ur.x,y1:ft+ur.y,x2:Ze+ur.x,y2:St+ur.y,anchorPointX:Ht,anchorPointY:tr}}var Qt=function(X,de,q,ge){this.transform=X.clone(),this.collisionIndex=new la(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=de,this.retainedQueryData={},this.collisionGroups=new br(q),this.collisionCircleArrays={},this.prevPlacement=ge,ge&&(ge.prevPlacement=void 0),this.placedOrientations={}};Qt.prototype.getBucketParts=function(X,de,q,ge){var Ce=q.getBucket(de),Pe=q.latestFeatureIndex;if(!(!Ce||!Pe||de.id!==Ce.layerIds[0])){var Ze=q.collisionBoxArray,ft=Ce.layers[0].layout,St=Math.pow(2,this.transform.zoom-q.tileID.overscaledZ),Ht=q.tileSize/t.EXTENT,tr=this.transform.calculatePosMatrix(q.tileID.toUnwrapped()),ur=ft.get("text-pitch-alignment")==="map",Er=ft.get("text-rotation-alignment")==="map",Wr=da(q,1,this.transform.zoom),jr=on(tr,ur,Er,this.transform,Wr),Gr=null;if(ur){var qr=Pn(tr,ur,Er,this.transform,Wr);Gr=t.multiply([],this.transform.labelPlaneMatrix,qr)}this.retainedQueryData[Ce.bucketInstanceId]=new qt(Ce.bucketInstanceId,Pe,Ce.sourceLayerIndex,Ce.index,q.tileID);var dn={bucket:Ce,layout:ft,posMatrix:tr,textLabelPlaneMatrix:jr,labelToScreenMatrix:Gr,scale:St,textPixelRatio:Ht,holdingForFade:q.holdingForFade(),collisionBoxArray:Ze,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(Ce.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Ce.sourceID)};if(ge)for(var Cn=0,Vn=Ce.sortKeyRanges;Cn<Vn.length;Cn+=1){var Qn=Vn[Cn],na=Qn.sortKey,ta=Qn.symbolInstanceStart,ma=Qn.symbolInstanceEnd;X.push({sortKey:na,symbolInstanceStart:ta,symbolInstanceEnd:ma,parameters:dn})}else X.push({symbolInstanceStart:0,symbolInstanceEnd:Ce.symbolInstances.length,parameters:dn})}},Qt.prototype.attemptAnchorPlacement=function(X,de,q,ge,Ce,Pe,Ze,ft,St,Ht,tr,ur,Er,Wr,jr){var Gr=[ur.textOffset0,ur.textOffset1],qr=Hr(X,q,ge,Gr,Ce),dn=this.collisionIndex.placeCollisionBox(ar(de,qr.x,qr.y,Pe,Ze,this.transform.angle),tr,ft,St,Ht.predicate);if(jr){var Cn=this.collisionIndex.placeCollisionBox(ar(jr,qr.x,qr.y,Pe,Ze,this.transform.angle),tr,ft,St,Ht.predicate);if(Cn.box.length===0)return}if(dn.box.length>0){var Vn;return this.prevPlacement&&this.prevPlacement.variableOffsets[ur.crossTileID]&&this.prevPlacement.placements[ur.crossTileID]&&this.prevPlacement.placements[ur.crossTileID].text&&(Vn=this.prevPlacement.variableOffsets[ur.crossTileID].anchor),this.variableOffsets[ur.crossTileID]={textOffset:Gr,width:q,height:ge,anchor:X,textBoxScale:Ce,prevAnchor:Vn},this.markUsedJustification(Er,X,ur,Wr),Er.allowVerticalPlacement&&(this.markUsedOrientation(Er,Wr,ur),this.placedOrientations[ur.crossTileID]=Wr),{shift:qr,placedGlyphBoxes:dn}}},Qt.prototype.placeLayerBucketPart=function(X,de,q){var ge=this,Ce=X.parameters,Pe=Ce.bucket,Ze=Ce.layout,ft=Ce.posMatrix,St=Ce.textLabelPlaneMatrix,Ht=Ce.labelToScreenMatrix,tr=Ce.textPixelRatio,ur=Ce.holdingForFade,Er=Ce.collisionBoxArray,Wr=Ce.partiallyEvaluatedTextSize,jr=Ce.collisionGroup,Gr=Ze.get("text-optional"),qr=Ze.get("icon-optional"),dn=Ze.get("text-allow-overlap"),Cn=Ze.get("icon-allow-overlap"),Vn=Ze.get("text-rotation-alignment")==="map",Qn=Ze.get("text-pitch-alignment")==="map",na=Ze.get("icon-text-fit")!=="none",ta=Ze.get("symbol-z-order")==="viewport-y",ma=dn&&(Cn||!Pe.hasIconData()||qr),Sa=Cn&&(dn||!Pe.hasTextData()||Gr);!Pe.collisionArrays&&Er&&Pe.deserializeCollisionBoxes(Er);var Ta=function(ci,gi){if(!de[ci.crossTileID]){if(ur){ge.placements[ci.crossTileID]=new ln(!1,!1,!1);return}var Ga=!1,Di=!1,Ni=!0,Gi=null,Ti={box:null,offscreen:null},Qi={box:null,offscreen:null},si=null,Ai=null,Fo=null,qo=0,uu=0,fu=0;gi.textFeatureIndex?qo=gi.textFeatureIndex:ci.useRuntimeCollisionCircles&&(qo=ci.featureIndex),gi.verticalTextFeatureIndex&&(uu=gi.verticalTextFeatureIndex);var Yu=gi.textBox;if(Yu){var ju=function(Ho){var Rl=t.WritingMode.horizontal;if(Pe.allowVerticalPlacement&&!Ho&&ge.prevPlacement){var Dl=ge.prevPlacement.placedOrientations[ci.crossTileID];Dl&&(ge.placedOrientations[ci.crossTileID]=Dl,Rl=Dl,ge.markUsedOrientation(Pe,Rl,ci))}return Rl},mf=function(Ho,Rl){if(Pe.allowVerticalPlacement&&ci.numVerticalGlyphVertices>0&&gi.verticalTextBox)for(var Dl=0,Mh=Pe.writingModes;Dl<Mh.length;Dl+=1){var Pv=Mh[Dl];if(Pv===t.WritingMode.vertical?(Ti=Rl(),Qi=Ti):Ti=Ho(),Ti&&Ti.box&&Ti.box.length)break}else Ti=Ho()};if(Ze.get("text-variable-anchor")){var Ns=Ze.get("text-variable-anchor");if(ge.prevPlacement&&ge.prevPlacement.variableOffsets[ci.crossTileID]){var jl=ge.prevPlacement.variableOffsets[ci.crossTileID];Ns.indexOf(jl.anchor)>0&&(Ns=Ns.filter(function(Ho){return Ho!==jl.anchor}),Ns.unshift(jl.anchor))}var Zu=function(Ho,Rl,Dl){for(var Mh=Ho.x2-Ho.x1,Pv=Ho.y2-Ho.y1,fg=ci.textBoxScale,cg=na&&!Cn?Rl:null,Jc={box:[],offscreen:!1},hg=dn?Ns.length*2:Ns.length,kh=0;kh<hg;++kh){var vg=Ns[kh%Ns.length],pg=kh>=Ns.length,Rv=ge.attemptAnchorPlacement(vg,Ho,Mh,Pv,fg,Vn,Qn,tr,ft,jr,pg,ci,Pe,Dl,cg);if(Rv&&(Jc=Rv.placedGlyphBoxes,Jc&&Jc.box&&Jc.box.length)){Ga=!0,Gi=Rv.shift;break}}return Jc},Eu=function(){return Zu(Yu,gi.iconBox,t.WritingMode.horizontal)},Ku=function(){var Ho=gi.verticalTextBox,Rl=Ti&&Ti.box&&Ti.box.length;return Pe.allowVerticalPlacement&&!Rl&&ci.numVerticalGlyphVertices>0&&Ho?Zu(Ho,gi.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}};mf(Eu,Ku),Ti&&(Ga=Ti.box,Ni=Ti.offscreen);var wh=ju(Ti&&Ti.box);if(!Ga&&ge.prevPlacement){var lc=ge.prevPlacement.variableOffsets[ci.crossTileID];lc&&(ge.variableOffsets[ci.crossTileID]=lc,ge.markUsedJustification(Pe,lc.anchor,ci,wh))}}else{var Xu=function(Ho,Rl){var Dl=ge.collisionIndex.placeCollisionBox(Ho,dn,tr,ft,jr.predicate);return Dl&&Dl.box&&Dl.box.length&&(ge.markUsedOrientation(Pe,Rl,ci),ge.placedOrientations[ci.crossTileID]=Rl),Dl},pl=function(){return Xu(Yu,t.WritingMode.horizontal)},Wf=function(){var Ho=gi.verticalTextBox;return Pe.allowVerticalPlacement&&ci.numVerticalGlyphVertices>0&&Ho?Xu(Ho,t.WritingMode.vertical):{box:null,offscreen:null}};mf(pl,Wf),ju(Ti&&Ti.box&&Ti.box.length)}}if(si=Ti,Ga=si&&si.box&&si.box.length>0,Ni=si&&si.offscreen,ci.useRuntimeCollisionCircles){var Es=Pe.text.placedSymbolArray.get(ci.centerJustifiedTextSymbolIndex),Zc=t.evaluateSizeForFeature(Pe.textSizeData,Wr,Es),$s=Ze.get("text-padding"),Kc=ci.collisionCircleDiameter;Ai=ge.collisionIndex.placeCollisionCircles(dn,Es,Pe.lineVertexArray,Pe.glyphOffsetArray,Zc,ft,St,Ht,q,Qn,jr.predicate,Kc,$s),Ga=dn||Ai.circles.length>0&&!Ai.collisionDetected,Ni=Ni&&Ai.offscreen}if(gi.iconFeatureIndex&&(fu=gi.iconFeatureIndex),gi.iconBox){var Th=function(Ho){var Rl=na&&Gi?ar(Ho,Gi.x,Gi.y,Vn,Qn,ge.transform.angle):Ho;return ge.collisionIndex.placeCollisionBox(Rl,Cn,tr,ft,jr.predicate)};Qi&&Qi.box&&Qi.box.length&&gi.verticalIconBox?(Fo=Th(gi.verticalIconBox),Di=Fo.box.length>0):(Fo=Th(gi.iconBox),Di=Fo.box.length>0),Ni=Ni&&Fo.offscreen}var Ah=Gr||ci.numHorizontalGlyphVertices===0&&ci.numVerticalGlyphVertices===0,qp=qr||ci.numIconVertices===0;if(!Ah&&!qp?Di=Ga=Di&&Ga:qp?Ah||(Di=Di&&Ga):Ga=Di&&Ga,Ga&&si&&si.box&&(Qi&&Qi.box&&uu?ge.collisionIndex.insertCollisionBox(si.box,Ze.get("text-ignore-placement"),Pe.bucketInstanceId,uu,jr.ID):ge.collisionIndex.insertCollisionBox(si.box,Ze.get("text-ignore-placement"),Pe.bucketInstanceId,qo,jr.ID)),Di&&Fo&&ge.collisionIndex.insertCollisionBox(Fo.box,Ze.get("icon-ignore-placement"),Pe.bucketInstanceId,fu,jr.ID),Ai&&(Ga&&ge.collisionIndex.insertCollisionCircles(Ai.circles,Ze.get("text-ignore-placement"),Pe.bucketInstanceId,qo,jr.ID),q)){var Sh=Pe.bucketInstanceId,Sc=ge.collisionCircleArrays[Sh];Sc===void 0&&(Sc=ge.collisionCircleArrays[Sh]=new Rt);for(var Mc=0;Mc<Ai.circles.length;Mc+=4)Sc.circles.push(Ai.circles[Mc+0]),Sc.circles.push(Ai.circles[Mc+1]),Sc.circles.push(Ai.circles[Mc+2]),Sc.circles.push(Ai.collisionDetected?1:0)}ge.placements[ci.crossTileID]=new ln(Ga||ma,Di||Sa,Ni||Pe.justReloaded),de[ci.crossTileID]=!0}};if(ta)for(var Ea=Pe.getSortedSymbolIndexes(this.transform.angle),Ia=Ea.length-1;Ia>=0;--Ia){var Ya=Ea[Ia];Ta(Pe.symbolInstances.get(Ya),Pe.collisionArrays[Ya])}else for(var ii=X.symbolInstanceStart;ii<X.symbolInstanceEnd;ii++)Ta(Pe.symbolInstances.get(ii),Pe.collisionArrays[ii]);if(q&&Pe.bucketInstanceId in this.collisionCircleArrays){var Ri=this.collisionCircleArrays[Pe.bucketInstanceId];t.invert(Ri.invProjMatrix,ft),Ri.viewportMatrix=this.collisionIndex.getViewportMatrix()}Pe.justReloaded=!1},Qt.prototype.markUsedJustification=function(X,de,q,ge){var Ce={left:q.leftJustifiedTextSymbolIndex,center:q.centerJustifiedTextSymbolIndex,right:q.rightJustifiedTextSymbolIndex},Pe;ge===t.WritingMode.vertical?Pe=q.verticalPlacedTextSymbolIndex:Pe=Ce[t.getAnchorJustification(de)];for(var Ze=[q.leftJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.rightJustifiedTextSymbolIndex,q.verticalPlacedTextSymbolIndex],ft=0,St=Ze;ft<St.length;ft+=1){var Ht=St[ft];Ht>=0&&(Pe>=0&&Ht!==Pe?X.text.placedSymbolArray.get(Ht).crossTileID=0:X.text.placedSymbolArray.get(Ht).crossTileID=q.crossTileID)}},Qt.prototype.markUsedOrientation=function(X,de,q){for(var ge=de===t.WritingMode.horizontal||de===t.WritingMode.horizontalOnly?de:0,Ce=de===t.WritingMode.vertical?de:0,Pe=[q.leftJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.rightJustifiedTextSymbolIndex],Ze=0,ft=Pe;Ze<ft.length;Ze+=1){var St=ft[Ze];X.text.placedSymbolArray.get(St).placedOrientation=ge}q.verticalPlacedTextSymbolIndex&&(X.text.placedSymbolArray.get(q.verticalPlacedTextSymbolIndex).placedOrientation=Ce)},Qt.prototype.commit=function(X){this.commitTime=X,this.zoomAtLastRecencyCheck=this.transform.zoom;var de=this.prevPlacement,q=!1;this.prevZoomAdjustment=de?de.zoomAdjustment(this.transform.zoom):0;var ge=de?de.symbolFadeChange(X):1,Ce=de?de.opacities:{},Pe=de?de.variableOffsets:{},Ze=de?de.placedOrientations:{};for(var ft in this.placements){var St=this.placements[ft],Ht=Ce[ft];Ht?(this.opacities[ft]=new zr(Ht,ge,St.text,St.icon),q=q||St.text!==Ht.text.placed||St.icon!==Ht.icon.placed):(this.opacities[ft]=new zr(null,ge,St.text,St.icon,St.skipFade),q=q||St.text||St.icon)}for(var tr in Ce){var ur=Ce[tr];if(!this.opacities[tr]){var Er=new zr(ur,ge,!1,!1);Er.isHidden()||(this.opacities[tr]=Er,q=q||ur.text.placed||ur.icon.placed)}}for(var Wr in Pe)!this.variableOffsets[Wr]&&this.opacities[Wr]&&!this.opacities[Wr].isHidden()&&(this.variableOffsets[Wr]=Pe[Wr]);for(var jr in Ze)!this.placedOrientations[jr]&&this.opacities[jr]&&!this.opacities[jr].isHidden()&&(this.placedOrientations[jr]=Ze[jr]);q?this.lastPlacementChangeTime=X:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=de?de.lastPlacementChangeTime:X)},Qt.prototype.updateLayerOpacities=function(X,de){for(var q={},ge=0,Ce=de;ge<Ce.length;ge+=1){var Pe=Ce[ge],Ze=Pe.getBucket(X);Ze&&Pe.latestFeatureIndex&&X.id===Ze.layerIds[0]&&this.updateBucketOpacities(Ze,q,Pe.collisionBoxArray)}},Qt.prototype.updateBucketOpacities=function(X,de,q){var ge=this;X.hasTextData()&&X.text.opacityVertexArray.clear(),X.hasIconData()&&X.icon.opacityVertexArray.clear(),X.hasIconCollisionBoxData()&&X.iconCollisionBox.collisionVertexArray.clear(),X.hasTextCollisionBoxData()&&X.textCollisionBox.collisionVertexArray.clear();var Ce=X.layers[0].layout,Pe=new zr(null,0,!1,!1,!0),Ze=Ce.get("text-allow-overlap"),ft=Ce.get("icon-allow-overlap"),St=Ce.get("text-variable-anchor"),Ht=Ce.get("text-rotation-alignment")==="map",tr=Ce.get("text-pitch-alignment")==="map",ur=Ce.get("icon-text-fit")!=="none",Er=new zr(null,0,Ze&&(ft||!X.hasIconData()||Ce.get("icon-optional")),ft&&(Ze||!X.hasTextData()||Ce.get("text-optional")),!0);!X.collisionArrays&&q&&(X.hasIconCollisionBoxData()||X.hasTextCollisionBoxData())&&X.deserializeCollisionBoxes(q);for(var Wr=function(dn,Cn,Vn){for(var Qn=0;Qn<Cn/4;Qn++)dn.opacityVertexArray.emplaceBack(Vn)},jr=function(dn){var Cn=X.symbolInstances.get(dn),Vn=Cn.numHorizontalGlyphVertices,Qn=Cn.numVerticalGlyphVertices,na=Cn.crossTileID,ta=de[na],ma=ge.opacities[na];ta?ma=Pe:ma||(ma=Er,ge.opacities[na]=ma),de[na]=!0;var Sa=Vn>0||Qn>0,Ta=Cn.numIconVertices>0,Ea=ge.placedOrientations[Cn.crossTileID],Ia=Ea===t.WritingMode.vertical,Ya=Ea===t.WritingMode.horizontal||Ea===t.WritingMode.horizontalOnly;if(Sa){var ii=Fn(ma.text),Ri=Ia?Xn:ii;Wr(X.text,Vn,Ri);var ci=Ya?Xn:ii;Wr(X.text,Qn,ci);var gi=ma.text.isHidden();[Cn.rightJustifiedTextSymbolIndex,Cn.centerJustifiedTextSymbolIndex,Cn.leftJustifiedTextSymbolIndex].forEach(function(fu){fu>=0&&(X.text.placedSymbolArray.get(fu).hidden=gi||Ia?1:0)}),Cn.verticalPlacedTextSymbolIndex>=0&&(X.text.placedSymbolArray.get(Cn.verticalPlacedTextSymbolIndex).hidden=gi||Ya?1:0);var Ga=ge.variableOffsets[Cn.crossTileID];Ga&&ge.markUsedJustification(X,Ga.anchor,Cn,Ea);var Di=ge.placedOrientations[Cn.crossTileID];Di&&(ge.markUsedJustification(X,"left",Cn,Di),ge.markUsedOrientation(X,Di,Cn))}if(Ta){var Ni=Fn(ma.icon),Gi=!(ur&&Cn.verticalPlacedIconSymbolIndex&&Ia);if(Cn.placedIconSymbolIndex>=0){var Ti=Gi?Ni:Xn;Wr(X.icon,Cn.numIconVertices,Ti),X.icon.placedSymbolArray.get(Cn.placedIconSymbolIndex).hidden=ma.icon.isHidden()}if(Cn.verticalPlacedIconSymbolIndex>=0){var Qi=Gi?Xn:Ni;Wr(X.icon,Cn.numVerticalIconVertices,Qi),X.icon.placedSymbolArray.get(Cn.verticalPlacedIconSymbolIndex).hidden=ma.icon.isHidden()}}if(X.hasIconCollisionBoxData()||X.hasTextCollisionBoxData()){var si=X.collisionArrays[dn];if(si){var Ai=new t.Point(0,0);if(si.textBox||si.verticalTextBox){var Fo=!0;if(St){var qo=ge.variableOffsets[na];qo?(Ai=Hr(qo.anchor,qo.width,qo.height,qo.textOffset,qo.textBoxScale),Ht&&Ai._rotate(tr?ge.transform.angle:-ge.transform.angle)):Fo=!1}si.textBox&&Pr(X.textCollisionBox.collisionVertexArray,ma.text.placed,!Fo||Ia,Ai.x,Ai.y),si.verticalTextBox&&Pr(X.textCollisionBox.collisionVertexArray,ma.text.placed,!Fo||Ya,Ai.x,Ai.y)}var uu=Boolean(!Ya&&si.verticalIconBox);si.iconBox&&Pr(X.iconCollisionBox.collisionVertexArray,ma.icon.placed,uu,ur?Ai.x:0,ur?Ai.y:0),si.verticalIconBox&&Pr(X.iconCollisionBox.collisionVertexArray,ma.icon.placed,!uu,ur?Ai.x:0,ur?Ai.y:0)}}},Gr=0;Gr<X.symbolInstances.length;Gr++)jr(Gr);if(X.sortFeatures(this.transform.angle),this.retainedQueryData[X.bucketInstanceId]&&(this.retainedQueryData[X.bucketInstanceId].featureSortOrder=X.featureSortOrder),X.hasTextData()&&X.text.opacityVertexBuffer&&X.text.opacityVertexBuffer.updateData(X.text.opacityVertexArray),X.hasIconData()&&X.icon.opacityVertexBuffer&&X.icon.opacityVertexBuffer.updateData(X.icon.opacityVertexArray),X.hasIconCollisionBoxData()&&X.iconCollisionBox.collisionVertexBuffer&&X.iconCollisionBox.collisionVertexBuffer.updateData(X.iconCollisionBox.collisionVertexArray),X.hasTextCollisionBoxData()&&X.textCollisionBox.collisionVertexBuffer&&X.textCollisionBox.collisionVertexBuffer.updateData(X.textCollisionBox.collisionVertexArray),X.bucketInstanceId in this.collisionCircleArrays){var qr=this.collisionCircleArrays[X.bucketInstanceId];X.placementInvProjMatrix=qr.invProjMatrix,X.placementViewportMatrix=qr.viewportMatrix,X.collisionCircleArray=qr.circles,delete this.collisionCircleArrays[X.bucketInstanceId]}},Qt.prototype.symbolFadeChange=function(X){return this.fadeDuration===0?1:(X-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Qt.prototype.zoomAdjustment=function(X){return Math.max(0,(this.transform.zoom-X)/1.5)},Qt.prototype.hasTransitions=function(X){return this.stale||X-this.lastPlacementChangeTime<this.fadeDuration},Qt.prototype.stillRecent=function(X,de){var q=this.zoomAtLastRecencyCheck===de?1-this.zoomAdjustment(de):1;return this.zoomAtLastRecencyCheck=de,this.commitTime+this.fadeDuration*q>X},Qt.prototype.setStale=function(){this.stale=!0};function Pr(ve,X,de,q,ge){ve.emplaceBack(X?1:0,de?1:0,q||0,ge||0),ve.emplaceBack(X?1:0,de?1:0,q||0,ge||0),ve.emplaceBack(X?1:0,de?1:0,q||0,ge||0),ve.emplaceBack(X?1:0,de?1:0,q||0,ge||0)}var Nr=Math.pow(2,25),Tn=Math.pow(2,24),Nn=Math.pow(2,17),Gn=Math.pow(2,16),Wn=Math.pow(2,9),Un=Math.pow(2,8),mn=Math.pow(2,1);function Fn(ve){if(ve.opacity===0&&!ve.placed)return 0;if(ve.opacity===1&&ve.placed)return 4294967295;var X=ve.placed?1:0,de=Math.floor(ve.opacity*127);return de*Nr+X*Tn+de*Nn+X*Gn+de*Wn+X*Un+de*mn+X}var Xn=0,ca=function(X){this._sortAcrossTiles=X.layout.get("symbol-z-order")!=="viewport-y"&&X.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};ca.prototype.continuePlacement=function(X,de,q,ge,Ce){for(var Pe=this._bucketParts;this._currentTileIndex<X.length;){var Ze=X[this._currentTileIndex];if(de.getBucketParts(Pe,ge,Ze,this._sortAcrossTiles),this._currentTileIndex++,Ce())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Pe.sort(function(St,Ht){return St.sortKey-Ht.sortKey}));this._currentPartIndex<Pe.length;){var ft=Pe[this._currentPartIndex];if(de.placeLayerBucketPart(ft,this._seenCrossTileIDs,q),this._currentPartIndex++,Ce())return!0}return!1};var ja=function(X,de,q,ge,Ce,Pe,Ze){this.placement=new Qt(X,Ce,Pe,Ze),this._currentPlacementIndex=de.length-1,this._forceFullPlacement=q,this._showCollisionBoxes=ge,this._done=!1};ja.prototype.isDone=function(){return this._done},ja.prototype.continuePlacement=function(X,de,q){for(var ge=this,Ce=t.browser.now(),Pe=function(){var tr=t.browser.now()-Ce;return ge._forceFullPlacement?!1:tr>2};this._currentPlacementIndex>=0;){var Ze=X[this._currentPlacementIndex],ft=de[Ze],St=this.placement.collisionIndex.transform.zoom;if(ft.type==="symbol"&&(!ft.minzoom||ft.minzoom<=St)&&(!ft.maxzoom||ft.maxzoom>St)){this._inProgressLayer||(this._inProgressLayer=new ca(ft));var Ht=this._inProgressLayer.continuePlacement(q[ft.source],this.placement,this._showCollisionBoxes,ft,Pe);if(Ht)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ja.prototype.commit=function(X){return this.placement.commit(X),this.placement};var Pa=512/t.EXTENT/2,_l=function(X,de,q){this.tileID=X,this.indexedSymbolInstances={},this.bucketInstanceId=q;for(var ge=0;ge<de.length;ge++){var Ce=de.get(ge),Pe=Ce.key;this.indexedSymbolInstances[Pe]||(this.indexedSymbolInstances[Pe]=[]),this.indexedSymbolInstances[Pe].push({crossTileID:Ce.crossTileID,coord:this.getScaledCoordinates(Ce,X)})}};_l.prototype.getScaledCoordinates=function(X,de){var q=de.canonical.z-this.tileID.canonical.z,ge=Pa/Math.pow(2,q);return{x:Math.floor((de.canonical.x*t.EXTENT+X.anchorX)*ge),y:Math.floor((de.canonical.y*t.EXTENT+X.anchorY)*ge)}},_l.prototype.findMatches=function(X,de,q){for(var ge=this.tileID.canonical.z<de.canonical.z?1:Math.pow(2,this.tileID.canonical.z-de.canonical.z),Ce=0;Ce<X.length;Ce++){var Pe=X.get(Ce);if(!Pe.crossTileID){var Ze=this.indexedSymbolInstances[Pe.key];if(!!Ze)for(var ft=this.getScaledCoordinates(Pe,de),St=0,Ht=Ze;St<Ht.length;St+=1){var tr=Ht[St];if(Math.abs(tr.coord.x-ft.x)<=ge&&Math.abs(tr.coord.y-ft.y)<=ge&&!q[tr.crossTileID]){q[tr.crossTileID]=!0,Pe.crossTileID=tr.crossTileID;break}}}}};var Ko=function(){this.maxCrossTileID=0};Ko.prototype.generate=function(){return++this.maxCrossTileID};var cs=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};cs.prototype.handleWrapJump=function(X){var de=Math.round((X-this.lng)/360);if(de!==0)for(var q in this.indexes){var ge=this.indexes[q],Ce={};for(var Pe in ge){var Ze=ge[Pe];Ze.tileID=Ze.tileID.unwrapTo(Ze.tileID.wrap+de),Ce[Ze.tileID.key]=Ze}this.indexes[q]=Ce}this.lng=X},cs.prototype.addBucket=function(X,de,q){if(this.indexes[X.overscaledZ]&&this.indexes[X.overscaledZ][X.key]){if(this.indexes[X.overscaledZ][X.key].bucketInstanceId===de.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(X.overscaledZ,this.indexes[X.overscaledZ][X.key])}for(var ge=0;ge<de.symbolInstances.length;ge++){var Ce=de.symbolInstances.get(ge);Ce.crossTileID=0}this.usedCrossTileIDs[X.overscaledZ]||(this.usedCrossTileIDs[X.overscaledZ]={});var Pe=this.usedCrossTileIDs[X.overscaledZ];for(var Ze in this.indexes){var ft=this.indexes[Ze];if(Number(Ze)>X.overscaledZ)for(var St in ft){var Ht=ft[St];Ht.tileID.isChildOf(X)&&Ht.findMatches(de.symbolInstances,X,Pe)}else{var tr=X.scaledTo(Number(Ze)),ur=ft[tr.key];ur&&ur.findMatches(de.symbolInstances,X,Pe)}}for(var Er=0;Er<de.symbolInstances.length;Er++){var Wr=de.symbolInstances.get(Er);Wr.crossTileID||(Wr.crossTileID=q.generate(),Pe[Wr.crossTileID]=!0)}return this.indexes[X.overscaledZ]===void 0&&(this.indexes[X.overscaledZ]={}),this.indexes[X.overscaledZ][X.key]=new _l(X,de.symbolInstances,de.bucketInstanceId),!0},cs.prototype.removeBucketCrossTileIDs=function(X,de){for(var q in de.indexedSymbolInstances)for(var ge=0,Ce=de.indexedSymbolInstances[q];ge<Ce.length;ge+=1){var Pe=Ce[ge];delete this.usedCrossTileIDs[X][Pe.crossTileID]}},cs.prototype.removeStaleBuckets=function(X){var de=!1;for(var q in this.indexes){var ge=this.indexes[q];for(var Ce in ge)X[ge[Ce].bucketInstanceId]||(this.removeBucketCrossTileIDs(q,ge[Ce]),delete ge[Ce],de=!0)}return de};var Gs=function(){this.layerIndexes={},this.crossTileIDs=new Ko,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Gs.prototype.addLayer=function(X,de,q){var ge=this.layerIndexes[X.id];ge===void 0&&(ge=this.layerIndexes[X.id]=new cs);var Ce=!1,Pe={};ge.handleWrapJump(q);for(var Ze=0,ft=de;Ze<ft.length;Ze+=1){var St=ft[Ze],Ht=St.getBucket(X);!Ht||X.id!==Ht.layerIds[0]||(Ht.bucketInstanceId||(Ht.bucketInstanceId=++this.maxBucketInstanceId),ge.addBucket(St.tileID,Ht,this.crossTileIDs)&&(Ce=!0),Pe[Ht.bucketInstanceId]=!0)}return ge.removeStaleBuckets(Pe)&&(Ce=!0),Ce},Gs.prototype.pruneUnusedLayers=function(X){var de={};X.forEach(function(ge){de[ge]=!0});for(var q in this.layerIndexes)de[q]||delete this.layerIndexes[q]};var no=function(ve,X){return t.emitValidationErrors(ve,X&&X.filter(function(de){return de.identifier!=="source.canvas"}))},Fi=t.pick(Xr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),ol=t.pick(Xr,["setCenter","setZoom","setBearing","setPitch"]),sl=gn(),hs=function(ve){function X(de,q){var ge=this;q===void 0&&(q={}),ve.call(this),this.map=de,this.dispatcher=new F(_r(),this),this.imageManager=new A,this.imageManager.setEventedParent(this),this.glyphManager=new M(de._requestManager,q.localIdeographFontFamily),this.lineAtlas=new I(256,512),this.crossTileSymbolIndex=new Gs,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var Ce=this;this._rtlTextPluginCallback=X.registerForPluginStateChange(function(Pe){var Ze={pluginStatus:Pe.pluginStatus,pluginURL:Pe.pluginURL};Ce.dispatcher.broadcast("syncRTLPluginState",Ze,function(ft,St){if(t.triggerPluginCompletionEvent(ft),St){var Ht=St.every(function(ur){return ur});if(Ht)for(var tr in Ce.sourceCaches)Ce.sourceCaches[tr].reload()}})}),this.on("data",function(Pe){if(!(Pe.dataType!=="source"||Pe.sourceDataType!=="metadata")){var Ze=ge.sourceCaches[Pe.sourceId];if(!!Ze){var ft=Ze.getSource();if(!(!ft||!ft.vectorLayerIds))for(var St in ge._layers){var Ht=ge._layers[St];Ht.source===ft.id&&ge._validateLayer(Ht)}}}})}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.loadURL=function(q,ge){var Ce=this;ge===void 0&&(ge={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var Pe=typeof ge.validate=="boolean"?ge.validate:!t.isMapboxURL(q);q=this.map._requestManager.normalizeStyleURL(q,ge.accessToken);var Ze=this.map._requestManager.transformRequest(q,t.ResourceType.Style);this._request=t.getJSON(Ze,function(ft,St){Ce._request=null,ft?Ce.fire(new t.ErrorEvent(ft)):St&&Ce._load(St,Pe)})},X.prototype.loadJSON=function(q,ge){var Ce=this;ge===void 0&&(ge={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){Ce._request=null,Ce._load(q,ge.validate!==!1)})},X.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(sl,!1)},X.prototype._load=function(q,ge){if(!(ge&&no(this,t.validateStyle(q)))){this._loaded=!0,this.stylesheet=q;for(var Ce in q.sources)this.addSource(Ce,q.sources[Ce],{validate:!1});q.sprite?this._loadSprite(q.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(q.glyphs);var Pe=yr(this.stylesheet.layers);this._order=Pe.map(function(Ht){return Ht.id}),this._layers={},this._serializedLayers={};for(var Ze=0,ft=Pe;Ze<ft.length;Ze+=1){var St=ft[Ze];St=t.createStyleLayer(St),St.setEventedParent(this,{layer:{id:St.id}}),this._layers[St.id]=St,this._serializedLayers[St.id]=St.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new O(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},X.prototype._loadSprite=function(q){var ge=this;this._spriteRequest=m(q,this.map._requestManager,function(Ce,Pe){if(ge._spriteRequest=null,Ce)ge.fire(new t.ErrorEvent(Ce));else if(Pe)for(var Ze in Pe)ge.imageManager.addImage(Ze,Pe[Ze]);ge.imageManager.setLoaded(!0),ge._availableImages=ge.imageManager.listImages(),ge.dispatcher.broadcast("setImages",ge._availableImages),ge.fire(new t.Event("data",{dataType:"style"}))})},X.prototype._validateLayer=function(q){var ge=this.sourceCaches[q.source];if(!!ge){var Ce=q.sourceLayer;if(!!Ce){var Pe=ge.getSource();(Pe.type==="geojson"||Pe.vectorLayerIds&&Pe.vectorLayerIds.indexOf(Ce)===-1)&&this.fire(new t.ErrorEvent(new Error('Source layer "'+Ce+'" does not exist on source "'+Pe.id+'" as specified by style layer "'+q.id+'"')))}}},X.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var q in this.sourceCaches)if(!this.sourceCaches[q].loaded())return!1;return!!this.imageManager.isLoaded()},X.prototype._serializeLayers=function(q){for(var ge=[],Ce=0,Pe=q;Ce<Pe.length;Ce+=1){var Ze=Pe[Ce],ft=this._layers[Ze];ft.type!=="custom"&&ge.push(ft.serialize())}return ge},X.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var q in this.sourceCaches)if(this.sourceCaches[q].hasTransition())return!0;for(var ge in this._layers)if(this._layers[ge].hasTransition())return!0;return!1},X.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},X.prototype.update=function(q){if(!!this._loaded){var ge=this._changed;if(this._changed){var Ce=Object.keys(this._updatedLayers),Pe=Object.keys(this._removedLayers);(Ce.length||Pe.length)&&this._updateWorkerLayers(Ce,Pe);for(var Ze in this._updatedSources){var ft=this._updatedSources[Ze];ft==="reload"?this._reloadSource(Ze):ft==="clear"&&this._clearSource(Ze)}this._updateTilesForChangedImages();for(var St in this._updatedPaintProps)this._layers[St].updateTransitions(q);this.light.updateTransitions(q),this._resetUpdates()}for(var Ht in this.sourceCaches)this.sourceCaches[Ht].used=!1;for(var tr=0,ur=this._order;tr<ur.length;tr+=1){var Er=ur[tr],Wr=this._layers[Er];Wr.recalculate(q,this._availableImages),!Wr.isHidden(q.zoom)&&Wr.source&&(this.sourceCaches[Wr.source].used=!0)}this.light.recalculate(q),this.z=q.zoom,ge&&this.fire(new t.Event("data",{dataType:"style"}))}},X.prototype._updateTilesForChangedImages=function(){var q=Object.keys(this._changedImages);if(q.length){for(var ge in this.sourceCaches)this.sourceCaches[ge].reloadTilesForDependencies(["icons","patterns"],q);this._changedImages={}}},X.prototype._updateWorkerLayers=function(q,ge){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(q),removedIds:ge})},X.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},X.prototype.setState=function(q){var ge=this;if(this._checkLoaded(),no(this,t.validateStyle(q)))return!1;q=t.clone$1(q),q.layers=yr(q.layers);var Ce=Lr(this.serialize(),q).filter(function(Ze){return!(Ze.command in ol)});if(Ce.length===0)return!1;var Pe=Ce.filter(function(Ze){return!(Ze.command in Fi)});if(Pe.length>0)throw new Error("Unimplemented: "+Pe.map(function(Ze){return Ze.command}).join(", ")+".");return Ce.forEach(function(Ze){Ze.command!=="setTransition"&&ge[Ze.command].apply(ge,Ze.args)}),this.stylesheet=q,!0},X.prototype.addImage=function(q,ge){if(this.getImage(q))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(q,ge),this._availableImages=this.imageManager.listImages(),this._changedImages[q]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},X.prototype.updateImage=function(q,ge){this.imageManager.updateImage(q,ge)},X.prototype.getImage=function(q){return this.imageManager.getImage(q)},X.prototype.removeImage=function(q){if(!this.getImage(q))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(q),this._availableImages=this.imageManager.listImages(),this._changedImages[q]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},X.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},X.prototype.addSource=function(q,ge,Ce){var Pe=this;if(Ce===void 0&&(Ce={}),this._checkLoaded(),this.sourceCaches[q]!==void 0)throw new Error("There is already a source with this ID");if(!ge.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(ge).join(", ")+".");var Ze=["vector","raster","geojson","video","image"],ft=Ze.indexOf(ge.type)>=0;if(!(ft&&this._validate(t.validateStyle.source,"sources."+q,ge,null,Ce))){this.map&&this.map._collectResourceTiming&&(ge.collectResourceTiming=!0);var St=this.sourceCaches[q]=new ot(q,ge,this.dispatcher);St.style=this,St.setEventedParent(this,function(){return{isSourceLoaded:Pe.loaded(),source:St.serialize(),sourceId:q}}),St.onAdd(this.map),this._changed=!0}},X.prototype.removeSource=function(q){if(this._checkLoaded(),this.sourceCaches[q]===void 0)throw new Error("There is no source with this ID");for(var ge in this._layers)if(this._layers[ge].source===q)return this.fire(new t.ErrorEvent(new Error('Source "'+q+'" cannot be removed while layer "'+ge+'" is using it.')));var Ce=this.sourceCaches[q];delete this.sourceCaches[q],delete this._updatedSources[q],Ce.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:q})),Ce.setEventedParent(null),Ce.clearTiles(),Ce.onRemove&&Ce.onRemove(this.map),this._changed=!0},X.prototype.setGeoJSONSourceData=function(q,ge){this._checkLoaded();var Ce=this.sourceCaches[q].getSource();Ce.setData(ge),this._changed=!0},X.prototype.getSource=function(q){return this.sourceCaches[q]&&this.sourceCaches[q].getSource()},X.prototype.addLayer=function(q,ge,Ce){Ce===void 0&&(Ce={}),this._checkLoaded();var Pe=q.id;if(this.getLayer(Pe)){this.fire(new t.ErrorEvent(new Error('Layer with id "'+Pe+'" already exists on this map')));return}var Ze;if(q.type==="custom"){if(no(this,t.validateCustomStyleLayer(q)))return;Ze=t.createStyleLayer(q)}else{if(typeof q.source=="object"&&(this.addSource(Pe,q.source),q=t.clone$1(q),q=t.extend(q,{source:Pe})),this._validate(t.validateStyle.layer,"layers."+Pe,q,{arrayIndex:-1},Ce))return;Ze=t.createStyleLayer(q),this._validateLayer(Ze),Ze.setEventedParent(this,{layer:{id:Pe}}),this._serializedLayers[Ze.id]=Ze.serialize()}var ft=ge?this._order.indexOf(ge):this._order.length;if(ge&&ft===-1){this.fire(new t.ErrorEvent(new Error('Layer with id "'+ge+'" does not exist on this map.')));return}if(this._order.splice(ft,0,Pe),this._layerOrderChanged=!0,this._layers[Pe]=Ze,this._removedLayers[Pe]&&Ze.source&&Ze.type!=="custom"){var St=this._removedLayers[Pe];delete this._removedLayers[Pe],St.type!==Ze.type?this._updatedSources[Ze.source]="clear":(this._updatedSources[Ze.source]="reload",this.sourceCaches[Ze.source].pause())}this._updateLayer(Ze),Ze.onAdd&&Ze.onAdd(this.map)},X.prototype.moveLayer=function(q,ge){this._checkLoaded(),this._changed=!0;var Ce=this._layers[q];if(!Ce){this.fire(new t.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be moved.")));return}if(q!==ge){var Pe=this._order.indexOf(q);this._order.splice(Pe,1);var Ze=ge?this._order.indexOf(ge):this._order.length;if(ge&&Ze===-1){this.fire(new t.ErrorEvent(new Error('Layer with id "'+ge+'" does not exist on this map.')));return}this._order.splice(Ze,0,q),this._layerOrderChanged=!0}},X.prototype.removeLayer=function(q){this._checkLoaded();var ge=this._layers[q];if(!ge){this.fire(new t.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be removed.")));return}ge.setEventedParent(null);var Ce=this._order.indexOf(q);this._order.splice(Ce,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[q]=ge,delete this._layers[q],delete this._serializedLayers[q],delete this._updatedLayers[q],delete this._updatedPaintProps[q],ge.onRemove&&ge.onRemove(this.map)},X.prototype.getLayer=function(q){return this._layers[q]},X.prototype.hasLayer=function(q){return q in this._layers},X.prototype.setLayerZoomRange=function(q,ge,Ce){this._checkLoaded();var Pe=this.getLayer(q);if(!Pe){this.fire(new t.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot have zoom extent.")));return}Pe.minzoom===ge&&Pe.maxzoom===Ce||(ge!=null&&(Pe.minzoom=ge),Ce!=null&&(Pe.maxzoom=Ce),this._updateLayer(Pe))},X.prototype.setFilter=function(q,ge,Ce){Ce===void 0&&(Ce={}),this._checkLoaded();var Pe=this.getLayer(q);if(!Pe){this.fire(new t.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be filtered.")));return}if(!t.deepEqual(Pe.filter,ge)){if(ge==null){Pe.filter=void 0,this._updateLayer(Pe);return}this._validate(t.validateStyle.filter,"layers."+Pe.id+".filter",ge,null,Ce)||(Pe.filter=t.clone$1(ge),this._updateLayer(Pe))}},X.prototype.getFilter=function(q){return t.clone$1(this.getLayer(q).filter)},X.prototype.setLayoutProperty=function(q,ge,Ce,Pe){Pe===void 0&&(Pe={}),this._checkLoaded();var Ze=this.getLayer(q);if(!Ze){this.fire(new t.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be styled.")));return}t.deepEqual(Ze.getLayoutProperty(ge),Ce)||(Ze.setLayoutProperty(ge,Ce,Pe),this._updateLayer(Ze))},X.prototype.getLayoutProperty=function(q,ge){var Ce=this.getLayer(q);if(!Ce){this.fire(new t.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style.")));return}return Ce.getLayoutProperty(ge)},X.prototype.setPaintProperty=function(q,ge,Ce,Pe){Pe===void 0&&(Pe={}),this._checkLoaded();var Ze=this.getLayer(q);if(!Ze){this.fire(new t.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be styled.")));return}if(!t.deepEqual(Ze.getPaintProperty(ge),Ce)){var ft=Ze.setPaintProperty(ge,Ce,Pe);ft&&this._updateLayer(Ze),this._changed=!0,this._updatedPaintProps[q]=!0}},X.prototype.getPaintProperty=function(q,ge){return this.getLayer(q).getPaintProperty(ge)},X.prototype.setFeatureState=function(q,ge){this._checkLoaded();var Ce=q.source,Pe=q.sourceLayer,Ze=this.sourceCaches[Ce];if(Ze===void 0){this.fire(new t.ErrorEvent(new Error("The source '"+Ce+"' does not exist in the map's style.")));return}var ft=Ze.getSource().type;if(ft==="geojson"&&Pe){this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(ft==="vector"&&!Pe){this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}q.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),Ze.setFeatureState(Pe,q.id,ge)},X.prototype.removeFeatureState=function(q,ge){this._checkLoaded();var Ce=q.source,Pe=this.sourceCaches[Ce];if(Pe===void 0){this.fire(new t.ErrorEvent(new Error("The source '"+Ce+"' does not exist in the map's style.")));return}var Ze=Pe.getSource().type,ft=Ze==="vector"?q.sourceLayer:void 0;if(Ze==="vector"&&!ft){this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(ge&&typeof q.id!="string"&&typeof q.id!="number"){this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property.")));return}Pe.removeFeatureState(ft,q.id,ge)},X.prototype.getFeatureState=function(q){this._checkLoaded();var ge=q.source,Ce=q.sourceLayer,Pe=this.sourceCaches[ge];if(Pe===void 0){this.fire(new t.ErrorEvent(new Error("The source '"+ge+"' does not exist in the map's style.")));return}var Ze=Pe.getSource().type;if(Ze==="vector"&&!Ce){this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return q.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),Pe.getFeatureState(Ce,q.id)},X.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},X.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(q){return q.serialize()}),layers:this._serializeLayers(this._order)},function(q){return q!==void 0})},X.prototype._updateLayer=function(q){this._updatedLayers[q.id]=!0,q.source&&!this._updatedSources[q.source]&&this.sourceCaches[q.source].getSource().type!=="raster"&&(this._updatedSources[q.source]="reload",this.sourceCaches[q.source].pause()),this._changed=!0},X.prototype._flattenAndSortRenderedFeatures=function(q){for(var ge=this,Ce=function(Ya){return ge._layers[Ya].type==="fill-extrusion"},Pe={},Ze=[],ft=this._order.length-1;ft>=0;ft--){var St=this._order[ft];if(Ce(St)){Pe[St]=ft;for(var Ht=0,tr=q;Ht<tr.length;Ht+=1){var ur=tr[Ht],Er=ur[St];if(Er)for(var Wr=0,jr=Er;Wr<jr.length;Wr+=1){var Gr=jr[Wr];Ze.push(Gr)}}}}Ze.sort(function(Ya,ii){return ii.intersectionZ-Ya.intersectionZ});for(var qr=[],dn=this._order.length-1;dn>=0;dn--){var Cn=this._order[dn];if(Ce(Cn))for(var Vn=Ze.length-1;Vn>=0;Vn--){var Qn=Ze[Vn].feature;if(Pe[Qn.layer.id]<dn)break;qr.push(Qn),Ze.pop()}else for(var na=0,ta=q;na<ta.length;na+=1){var ma=ta[na],Sa=ma[Cn];if(Sa)for(var Ta=0,Ea=Sa;Ta<Ea.length;Ta+=1){var Ia=Ea[Ta];qr.push(Ia.feature)}}}return qr},X.prototype.queryRenderedFeatures=function(q,ge,Ce){ge&&ge.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",ge.filter,null,ge);var Pe={};if(ge&&ge.layers){if(!Array.isArray(ge.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Ze=0,ft=ge.layers;Ze<ft.length;Ze+=1){var St=ft[Ze],Ht=this._layers[St];if(!Ht)return this.fire(new t.ErrorEvent(new Error("The layer '"+St+"' does not exist in the map's style and cannot be queried for features."))),[];Pe[Ht.source]=!0}}var tr=[];ge.availableImages=this._availableImages;for(var ur in this.sourceCaches)ge.layers&&!Pe[ur]||tr.push(ae(this.sourceCaches[ur],this._layers,this._serializedLayers,q,ge,Ce));return this.placement&&tr.push(ie(this._layers,this._serializedLayers,this.sourceCaches,q,ge,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(tr)},X.prototype.querySourceFeatures=function(q,ge){ge&&ge.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",ge.filter,null,ge);var Ce=this.sourceCaches[q];return Ce?oe(Ce,ge):[]},X.prototype.addSourceType=function(q,ge,Ce){if(X.getSourceType(q))return Ce(new Error('A source type called "'+q+'" already exists.'));if(X.setSourceType(q,ge),!ge.workerSourceURL)return Ce(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:q,url:ge.workerSourceURL},Ce)},X.prototype.getLight=function(){return this.light.getLight()},X.prototype.setLight=function(q,ge){ge===void 0&&(ge={}),this._checkLoaded();var Ce=this.light.getLight(),Pe=!1;for(var Ze in q)if(!t.deepEqual(q[Ze],Ce[Ze])){Pe=!0;break}if(!!Pe){var ft={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(q,ge),this.light.updateTransitions(ft)}},X.prototype._validate=function(q,ge,Ce,Pe,Ze){return Ze===void 0&&(Ze={}),Ze&&Ze.validate===!1?!1:no(this,q.call(t.validateStyle,t.extend({key:ge,style:this.serialize(),value:Ce,styleSpec:t.styleSpec},Pe)))},X.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var q in this._layers){var ge=this._layers[q];ge.setEventedParent(null)}for(var Ce in this.sourceCaches)this.sourceCaches[Ce].clearTiles(),this.sourceCaches[Ce].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},X.prototype._clearSource=function(q){this.sourceCaches[q].clearTiles()},X.prototype._reloadSource=function(q){this.sourceCaches[q].resume(),this.sourceCaches[q].reload()},X.prototype._updateSources=function(q){for(var ge in this.sourceCaches)this.sourceCaches[ge].update(q)},X.prototype._generateCollisionBoxes=function(){for(var q in this.sourceCaches)this._reloadSource(q)},X.prototype._updatePlacement=function(q,ge,Ce,Pe,Ze){Ze===void 0&&(Ze=!1);for(var ft=!1,St=!1,Ht={},tr=0,ur=this._order;tr<ur.length;tr+=1){var Er=ur[tr],Wr=this._layers[Er];if(Wr.type==="symbol"){if(!Ht[Wr.source]){var jr=this.sourceCaches[Wr.source];Ht[Wr.source]=jr.getRenderableIds(!0).map(function(na){return jr.getTileByID(na)}).sort(function(na,ta){return ta.tileID.overscaledZ-na.tileID.overscaledZ||(na.tileID.isLessThan(ta.tileID)?-1:1)})}var Gr=this.crossTileSymbolIndex.addLayer(Wr,Ht[Wr.source],q.center.lng);ft=ft||Gr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),Ze=Ze||this._layerOrderChanged||Ce===0,(Ze||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),q.zoom))&&(this.pauseablePlacement=new ja(q,this._order,Ze,ge,Ce,Pe,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ht),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),St=!0),ft&&this.pauseablePlacement.placement.setStale()),St||ft)for(var qr=0,dn=this._order;qr<dn.length;qr+=1){var Cn=dn[qr],Vn=this._layers[Cn];Vn.type==="symbol"&&this.placement.updateLayerOpacities(Vn,Ht[Vn.source])}var Qn=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now());return Qn},X.prototype._releaseSymbolFadeTiles=function(){for(var q in this.sourceCaches)this.sourceCaches[q].releaseSymbolFadeTiles()},X.prototype.getImages=function(q,ge,Ce){this.imageManager.getImages(ge.icons,Ce),this._updateTilesForChangedImages();var Pe=this.sourceCaches[ge.source];Pe&&Pe.setDependencies(ge.tileID.key,ge.type,ge.icons)},X.prototype.getGlyphs=function(q,ge,Ce){this.glyphManager.getGlyphs(ge.stacks,Ce)},X.prototype.getResource=function(q,ge,Ce){return t.makeRequest(ge,Ce)},X}(t.Evented);hs.getSourceType=ee,hs.setSourceType=$,hs.registerForPluginStateChange=t.registerForPluginStateChange;var Bl=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ql=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,Ou=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,di=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,wl="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",ll=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Wi="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",Bo=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ql=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,Rs="void main() {gl_FragColor=vec4(1.0);}",zi="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",Nl=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,qi=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,Ui=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,co="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",eo="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",xs="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",Tl="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",qu="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",vs="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",ef="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",ul=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,No=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,kf=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,fl=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Ws=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,mu=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Cf=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ef=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,Al=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,yu=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,Ys=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Bu=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,Ul=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Nu="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",tf=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,xu="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",Lf=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Sl=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Uu=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,bu=`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Ds=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,eu=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,Vu=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,rf=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,nf=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,_u="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",Pf=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,af=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,ps=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Vl=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,Hl=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Hu=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,Is=Oi(Ql,Ou),Uo=Oi(di,wl),wu=Oi(ll,Wi),js=Oi(Bo,ql),Xs=Oi(Rs,zi),po=Oi(Nl,qi),tu=Oi(Ui,co),ru=Oi(eo,xs),Ml=Oi(Tl,qu),Fs=Oi(vs,ef),nu=Oi(ul,No),Gl=Oi(kf,fl),Tu=Oi(Ws,mu),au=Oi(Cf,Ef),kl=Oi(Al,yu),Rf=Oi(Ys,Bu),bs=Oi(Ul,Nu),ic=Oi(tf,xu),Gu=Oi(Lf,Sl),Wl=Oi(Uu,bu),iu=Oi(Ds,eu),Cl=Oi(Vu,rf),ou=Oi(nf,_u),of=Oi(Pf,af),sf=Oi(ps,Vl),oc=Oi(Hl,Hu);function Oi(ve,X){var de=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,q={};return ve=ve.replace(de,function(ge,Ce,Pe,Ze,ft){return q[ft]=!0,Ce==="define"?`
#ifndef HAS_UNIFORM_u_`+ft+`
varying `+Pe+" "+Ze+" "+ft+`;
#else
uniform `+Pe+" "+Ze+" u_"+ft+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+ft+`
    `+Pe+" "+Ze+" "+ft+" = u_"+ft+`;
#endif
`}),X=X.replace(de,function(ge,Ce,Pe,Ze,ft){var St=Ze==="float"?"vec2":"vec4",Ht=ft.match(/color/)?"color":St;return q[ft]?Ce==="define"?`
#ifndef HAS_UNIFORM_u_`+ft+`
uniform lowp float u_`+ft+`_t;
attribute `+Pe+" "+St+" a_"+ft+`;
varying `+Pe+" "+Ze+" "+ft+`;
#else
uniform `+Pe+" "+Ze+" u_"+ft+`;
#endif
`:Ht==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+ft+" = a_"+ft+`;
#else
    `+Pe+" "+Ze+" "+ft+" = u_"+ft+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+ft+" = unpack_mix_"+Ht+"(a_"+ft+", u_"+ft+`_t);
#else
    `+Pe+" "+Ze+" "+ft+" = u_"+ft+`;
#endif
`:Ce==="define"?`
#ifndef HAS_UNIFORM_u_`+ft+`
uniform lowp float u_`+ft+`_t;
attribute `+Pe+" "+St+" a_"+ft+`;
#else
uniform `+Pe+" "+Ze+" u_"+ft+`;
#endif
`:Ht==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+Pe+" "+Ze+" "+ft+" = a_"+ft+`;
#else
    `+Pe+" "+Ze+" "+ft+" = u_"+ft+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+Pe+" "+Ze+" "+ft+" = unpack_mix_"+Ht+"(a_"+ft+", u_"+ft+`_t);
#else
    `+Pe+" "+Ze+" "+ft+" = u_"+ft+`;
#endif
`}),{fragmentSource:ve,vertexSource:X}}var Yl=Object.freeze({__proto__:null,prelude:Is,background:Uo,backgroundPattern:wu,circle:js,clippingMask:Xs,heatmap:po,heatmapTexture:tu,collisionBox:ru,collisionCircle:Ml,debug:Fs,fill:nu,fillOutline:Gl,fillOutlinePattern:Tu,fillPattern:au,fillExtrusion:kl,fillExtrusionPattern:Rf,hillshadePrepare:bs,hillshade:ic,line:Gu,lineGradient:Wl,linePattern:iu,lineSDF:Cl,raster:ou,symbolIcon:of,symbolSDF:sf,symbolTextAndIcon:oc}),El=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};El.prototype.bind=function(X,de,q,ge,Ce,Pe,Ze,ft){this.context=X;for(var St=this.boundPaintVertexBuffers.length!==ge.length,Ht=0;!St&&Ht<ge.length;Ht++)this.boundPaintVertexBuffers[Ht]!==ge[Ht]&&(St=!0);var tr=!this.vao||this.boundProgram!==de||this.boundLayoutVertexBuffer!==q||St||this.boundIndexBuffer!==Ce||this.boundVertexOffset!==Pe||this.boundDynamicVertexBuffer!==Ze||this.boundDynamicVertexBuffer2!==ft;!X.extVertexArrayObject||tr?this.freshBind(de,q,ge,Ce,Pe,Ze,ft):(X.bindVertexArrayOES.set(this.vao),Ze&&Ze.bind(),Ce&&Ce.dynamicDraw&&Ce.bind(),ft&&ft.bind())},El.prototype.freshBind=function(X,de,q,ge,Ce,Pe,Ze){var ft,St=X.numAttributes,Ht=this.context,tr=Ht.gl;if(Ht.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ht.extVertexArrayObject.createVertexArrayOES(),Ht.bindVertexArrayOES.set(this.vao),ft=0,this.boundProgram=X,this.boundLayoutVertexBuffer=de,this.boundPaintVertexBuffers=q,this.boundIndexBuffer=ge,this.boundVertexOffset=Ce,this.boundDynamicVertexBuffer=Pe,this.boundDynamicVertexBuffer2=Ze;else{ft=Ht.currentNumAttributes||0;for(var ur=St;ur<ft;ur++)tr.disableVertexAttribArray(ur)}de.enableAttributes(tr,X);for(var Er=0,Wr=q;Er<Wr.length;Er+=1){var jr=Wr[Er];jr.enableAttributes(tr,X)}Pe&&Pe.enableAttributes(tr,X),Ze&&Ze.enableAttributes(tr,X),de.bind(),de.setVertexAttribPointers(tr,X,Ce);for(var Gr=0,qr=q;Gr<qr.length;Gr+=1){var dn=qr[Gr];dn.bind(),dn.setVertexAttribPointers(tr,X,Ce)}Pe&&(Pe.bind(),Pe.setVertexAttribPointers(tr,X,Ce)),ge&&ge.bind(),Ze&&(Ze.bind(),Ze.setVertexAttribPointers(tr,X,Ce)),Ht.currentNumAttributes=St},El.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ds=function(X,de,q,ge,Ce){var Pe=X.gl;this.program=Pe.createProgram();var Ze=q?q.defines():[];Ce&&Ze.push("#define OVERDRAW_INSPECTOR;");var ft=Ze.concat(Is.fragmentSource,de.fragmentSource).join(`
`),St=Ze.concat(Is.vertexSource,de.vertexSource).join(`
`),Ht=Pe.createShader(Pe.FRAGMENT_SHADER);if(Pe.isContextLost()){this.failedToCreate=!0;return}Pe.shaderSource(Ht,ft),Pe.compileShader(Ht),Pe.attachShader(this.program,Ht);var tr=Pe.createShader(Pe.VERTEX_SHADER);if(Pe.isContextLost()){this.failedToCreate=!0;return}Pe.shaderSource(tr,St),Pe.compileShader(tr),Pe.attachShader(this.program,tr);for(var ur=q?q.layoutAttributes:[],Er=0;Er<ur.length;Er++)Pe.bindAttribLocation(this.program,Er,ur[Er].name);Pe.linkProgram(this.program),Pe.deleteShader(tr),Pe.deleteShader(Ht),this.numAttributes=Pe.getProgramParameter(this.program,Pe.ACTIVE_ATTRIBUTES),this.attributes={};for(var Wr={},jr=0;jr<this.numAttributes;jr++){var Gr=Pe.getActiveAttrib(this.program,jr);Gr&&(this.attributes[Gr.name]=Pe.getAttribLocation(this.program,Gr.name))}for(var qr=Pe.getProgramParameter(this.program,Pe.ACTIVE_UNIFORMS),dn=0;dn<qr;dn++){var Cn=Pe.getActiveUniform(this.program,dn);Cn&&(Wr[Cn.name]=Pe.getUniformLocation(this.program,Cn.name))}this.fixedUniforms=ge(X,Wr),this.binderUniforms=q?q.getUniforms(X,Wr):[]};ds.prototype.draw=function(X,de,q,ge,Ce,Pe,Ze,ft,St,Ht,tr,ur,Er,Wr,jr,Gr){var qr,dn=X.gl;if(!this.failedToCreate){X.program.set(this.program),X.setDepthMode(q),X.setStencilMode(ge),X.setColorMode(Ce),X.setCullFace(Pe);for(var Cn in this.fixedUniforms)this.fixedUniforms[Cn].set(Ze[Cn]);Wr&&Wr.setUniforms(X,this.binderUniforms,ur,{zoom:Er});for(var Vn=(qr={},qr[dn.LINES]=2,qr[dn.TRIANGLES]=3,qr[dn.LINE_STRIP]=1,qr)[de],Qn=0,na=tr.get();Qn<na.length;Qn+=1){var ta=na[Qn],ma=ta.vaos||(ta.vaos={}),Sa=ma[ft]||(ma[ft]=new El);Sa.bind(X,this,St,Wr?Wr.getPaintVertexBuffers():[],Ht,ta.vertexOffset,jr,Gr),dn.drawElements(de,ta.primitiveLength*Vn,dn.UNSIGNED_SHORT,ta.primitiveOffset*Vn*2)}}};function _s(ve,X,de){var q=1/da(de,1,X.transform.tileZoom),ge=Math.pow(2,de.tileID.overscaledZ),Ce=de.tileSize*Math.pow(2,X.transform.tileZoom)/ge,Pe=Ce*(de.tileID.canonical.x+de.tileID.wrap*ge),Ze=Ce*de.tileID.canonical.y;return{u_image:0,u_texsize:de.imageAtlasTexture.size,u_scale:[q,ve.fromScale,ve.toScale],u_fade:ve.t,u_pixel_coord_upper:[Pe>>16,Ze>>16],u_pixel_coord_lower:[Pe&65535,Ze&65535]}}function su(ve,X,de,q){var ge=de.imageManager.getPattern(ve.from.toString()),Ce=de.imageManager.getPattern(ve.to.toString()),Pe=de.imageManager.getPixelSize(),Ze=Pe.width,ft=Pe.height,St=Math.pow(2,q.tileID.overscaledZ),Ht=q.tileSize*Math.pow(2,de.transform.tileZoom)/St,tr=Ht*(q.tileID.canonical.x+q.tileID.wrap*St),ur=Ht*q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ge.tl,u_pattern_br_a:ge.br,u_pattern_tl_b:Ce.tl,u_pattern_br_b:Ce.br,u_texsize:[Ze,ft],u_mix:X.t,u_pattern_size_a:ge.displaySize,u_pattern_size_b:Ce.displaySize,u_scale_a:X.fromScale,u_scale_b:X.toScale,u_tile_units_to_pixels:1/da(q,1,de.transform.tileZoom),u_pixel_coord_upper:[tr>>16,ur>>16],u_pixel_coord_lower:[tr&65535,ur&65535]}}var go=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_lightpos:new t.Uniform3f(ve,X.u_lightpos),u_lightintensity:new t.Uniform1f(ve,X.u_lightintensity),u_lightcolor:new t.Uniform3f(ve,X.u_lightcolor),u_vertical_gradient:new t.Uniform1f(ve,X.u_vertical_gradient),u_opacity:new t.Uniform1f(ve,X.u_opacity)}},lf=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_lightpos:new t.Uniform3f(ve,X.u_lightpos),u_lightintensity:new t.Uniform1f(ve,X.u_lightintensity),u_lightcolor:new t.Uniform3f(ve,X.u_lightcolor),u_vertical_gradient:new t.Uniform1f(ve,X.u_vertical_gradient),u_height_factor:new t.Uniform1f(ve,X.u_height_factor),u_image:new t.Uniform1i(ve,X.u_image),u_texsize:new t.Uniform2f(ve,X.u_texsize),u_pixel_coord_upper:new t.Uniform2f(ve,X.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(ve,X.u_pixel_coord_lower),u_scale:new t.Uniform3f(ve,X.u_scale),u_fade:new t.Uniform1f(ve,X.u_fade),u_opacity:new t.Uniform1f(ve,X.u_opacity)}},ws=function(ve,X,de,q){var ge=X.style.light,Ce=ge.properties.get("position"),Pe=[Ce.x,Ce.y,Ce.z],Ze=t.create$1();ge.properties.get("anchor")==="viewport"&&t.fromRotation(Ze,-X.transform.angle),t.transformMat3(Pe,Pe,Ze);var ft=ge.properties.get("color");return{u_matrix:ve,u_lightpos:Pe,u_lightintensity:ge.properties.get("intensity"),u_lightcolor:[ft.r,ft.g,ft.b],u_vertical_gradient:+de,u_opacity:q}},cl=function(ve,X,de,q,ge,Ce,Pe){return t.extend(ws(ve,X,de,q),_s(Ce,X,Pe),{u_height_factor:-Math.pow(2,ge.overscaledZ)/Pe.tileSize/8})},hl=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix)}},Zs=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_image:new t.Uniform1i(ve,X.u_image),u_texsize:new t.Uniform2f(ve,X.u_texsize),u_pixel_coord_upper:new t.Uniform2f(ve,X.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(ve,X.u_pixel_coord_lower),u_scale:new t.Uniform3f(ve,X.u_scale),u_fade:new t.Uniform1f(ve,X.u_fade)}},Ts=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_world:new t.Uniform2f(ve,X.u_world)}},Yi=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_world:new t.Uniform2f(ve,X.u_world),u_image:new t.Uniform1i(ve,X.u_image),u_texsize:new t.Uniform2f(ve,X.u_texsize),u_pixel_coord_upper:new t.Uniform2f(ve,X.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(ve,X.u_pixel_coord_lower),u_scale:new t.Uniform3f(ve,X.u_scale),u_fade:new t.Uniform1f(ve,X.u_fade)}},Vo=function(ve){return{u_matrix:ve}},As=function(ve,X,de,q){return t.extend(Vo(ve),_s(de,X,q))},uf=function(ve,X){return{u_matrix:ve,u_world:X}},Au=function(ve,X,de,q,ge){return t.extend(As(ve,X,de,q),{u_world:ge})},ff=function(ve,X){return{u_camera_to_center_distance:new t.Uniform1f(ve,X.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(ve,X.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(ve,X.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(ve,X.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(ve,X.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(ve,X.u_matrix)}},xt=function(ve,X,de,q){var ge=ve.transform,Ce,Pe;if(q.paint.get("circle-pitch-alignment")==="map"){var Ze=da(de,1,ge.zoom);Ce=!0,Pe=[Ze,Ze]}else Ce=!1,Pe=ge.pixelsToGLUnits;return{u_camera_to_center_distance:ge.cameraToCenterDistance,u_scale_with_map:+(q.paint.get("circle-pitch-scale")==="map"),u_matrix:ve.translatePosMatrix(X.posMatrix,de,q.paint.get("circle-translate"),q.paint.get("circle-translate-anchor")),u_pitch_with_map:+Ce,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:Pe}},Ft=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_camera_to_center_distance:new t.Uniform1f(ve,X.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(ve,X.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(ve,X.u_extrude_scale),u_overscale_factor:new t.Uniform1f(ve,X.u_overscale_factor)}},sr=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_inv_matrix:new t.UniformMatrix4f(ve,X.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(ve,X.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(ve,X.u_viewport_size)}},$t=function(ve,X,de){var q=da(de,1,X.zoom),ge=Math.pow(2,X.zoom-de.tileID.overscaledZ),Ce=de.tileID.overscaleFactor();return{u_matrix:ve,u_camera_to_center_distance:X.cameraToCenterDistance,u_pixels_to_tile_units:q,u_extrude_scale:[X.pixelsToGLUnits[0]/(q*ge),X.pixelsToGLUnits[1]/(q*ge)],u_overscale_factor:Ce}},Ir=function(ve,X,de){return{u_matrix:ve,u_inv_matrix:X,u_camera_to_center_distance:de.cameraToCenterDistance,u_viewport_size:[de.width,de.height]}},un=function(ve,X){return{u_color:new t.UniformColor(ve,X.u_color),u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_overlay:new t.Uniform1i(ve,X.u_overlay),u_overlay_scale:new t.Uniform1f(ve,X.u_overlay_scale)}},xn=function(ve,X,de){return de===void 0&&(de=1),{u_matrix:ve,u_color:X,u_overlay:0,u_overlay_scale:de}},An=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix)}},Ln=function(ve){return{u_matrix:ve}},Yn=function(ve,X){return{u_extrude_scale:new t.Uniform1f(ve,X.u_extrude_scale),u_intensity:new t.Uniform1f(ve,X.u_intensity),u_matrix:new t.UniformMatrix4f(ve,X.u_matrix)}},bn=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_world:new t.Uniform2f(ve,X.u_world),u_image:new t.Uniform1i(ve,X.u_image),u_color_ramp:new t.Uniform1i(ve,X.u_color_ramp),u_opacity:new t.Uniform1f(ve,X.u_opacity)}},On=function(ve,X,de,q){return{u_matrix:ve,u_extrude_scale:da(X,1,de),u_intensity:q}},Rn=function(ve,X,de,q){var ge=t.create();t.ortho(ge,0,ve.width,ve.height,0,0,1);var Ce=ve.context.gl;return{u_matrix:ge,u_world:[Ce.drawingBufferWidth,Ce.drawingBufferHeight],u_image:de,u_color_ramp:q,u_opacity:X.paint.get("heatmap-opacity")}},Zn=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_image:new t.Uniform1i(ve,X.u_image),u_latrange:new t.Uniform2f(ve,X.u_latrange),u_light:new t.Uniform2f(ve,X.u_light),u_shadow:new t.UniformColor(ve,X.u_shadow),u_highlight:new t.UniformColor(ve,X.u_highlight),u_accent:new t.UniformColor(ve,X.u_accent)}},ra=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_image:new t.Uniform1i(ve,X.u_image),u_dimension:new t.Uniform2f(ve,X.u_dimension),u_zoom:new t.Uniform1f(ve,X.u_zoom),u_maxzoom:new t.Uniform1f(ve,X.u_maxzoom),u_unpack:new t.Uniform4f(ve,X.u_unpack)}},Ua=function(ve,X,de){var q=de.paint.get("hillshade-shadow-color"),ge=de.paint.get("hillshade-highlight-color"),Ce=de.paint.get("hillshade-accent-color"),Pe=de.paint.get("hillshade-illumination-direction")*(Math.PI/180);de.paint.get("hillshade-illumination-anchor")==="viewport"&&(Pe-=ve.transform.angle);var Ze=!ve.options.moving;return{u_matrix:ve.transform.calculatePosMatrix(X.tileID.toUnwrapped(),Ze),u_image:0,u_latrange:Va(ve,X.tileID),u_light:[de.paint.get("hillshade-exaggeration"),Pe],u_shadow:q,u_highlight:ge,u_accent:Ce}},Da=function(ve,X,de){var q=X.stride,ge=t.create();return t.ortho(ge,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(ge,ge,[0,-t.EXTENT,0]),{u_matrix:ge,u_image:1,u_dimension:[q,q],u_zoom:ve.overscaledZ,u_maxzoom:de,u_unpack:X.getUnpackVector()}};function Va(ve,X){var de=Math.pow(2,X.canonical.z),q=X.canonical.y;return[new t.MercatorCoordinate(0,q/de).toLngLat().lat,new t.MercatorCoordinate(0,(q+1)/de).toLngLat().lat]}var Ha=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_ratio:new t.Uniform1f(ve,X.u_ratio),u_device_pixel_ratio:new t.Uniform1f(ve,X.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(ve,X.u_units_to_pixels)}},ea=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_ratio:new t.Uniform1f(ve,X.u_ratio),u_device_pixel_ratio:new t.Uniform1f(ve,X.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(ve,X.u_units_to_pixels),u_image:new t.Uniform1i(ve,X.u_image)}},xa=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_texsize:new t.Uniform2f(ve,X.u_texsize),u_ratio:new t.Uniform1f(ve,X.u_ratio),u_device_pixel_ratio:new t.Uniform1f(ve,X.u_device_pixel_ratio),u_image:new t.Uniform1i(ve,X.u_image),u_units_to_pixels:new t.Uniform2f(ve,X.u_units_to_pixels),u_scale:new t.Uniform3f(ve,X.u_scale),u_fade:new t.Uniform1f(ve,X.u_fade)}},Xa=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_ratio:new t.Uniform1f(ve,X.u_ratio),u_device_pixel_ratio:new t.Uniform1f(ve,X.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(ve,X.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(ve,X.u_patternscale_a),u_patternscale_b:new t.Uniform2f(ve,X.u_patternscale_b),u_sdfgamma:new t.Uniform1f(ve,X.u_sdfgamma),u_image:new t.Uniform1i(ve,X.u_image),u_tex_y_a:new t.Uniform1f(ve,X.u_tex_y_a),u_tex_y_b:new t.Uniform1f(ve,X.u_tex_y_b),u_mix:new t.Uniform1f(ve,X.u_mix)}},qa=function(ve,X,de){var q=ve.transform;return{u_matrix:li(ve,X,de),u_ratio:1/da(X,1,q.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/q.pixelsToGLUnits[0],1/q.pixelsToGLUnits[1]]}},mi=function(ve,X,de){return t.extend(qa(ve,X,de),{u_image:0})},yi=function(ve,X,de,q){var ge=ve.transform,Ce=Mi(X,ge);return{u_matrix:li(ve,X,de),u_texsize:X.imageAtlasTexture.size,u_ratio:1/da(X,1,ge.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[Ce,q.fromScale,q.toScale],u_fade:q.t,u_units_to_pixels:[1/ge.pixelsToGLUnits[0],1/ge.pixelsToGLUnits[1]]}},bi=function(ve,X,de,q,ge){var Ce=ve.transform,Pe=ve.lineAtlas,Ze=Mi(X,Ce),ft=de.layout.get("line-cap")==="round",St=Pe.getDash(q.from,ft),Ht=Pe.getDash(q.to,ft),tr=St.width*ge.fromScale,ur=Ht.width*ge.toScale;return t.extend(qa(ve,X,de),{u_patternscale_a:[Ze/tr,-St.height/2],u_patternscale_b:[Ze/ur,-Ht.height/2],u_sdfgamma:Pe.width/(Math.min(tr,ur)*256*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:St.y,u_tex_y_b:Ht.y,u_mix:ge.t})};function Mi(ve,X){return 1/da(ve,1,X.tileZoom)}function li(ve,X,de){return ve.translatePosMatrix(X.tileID.posMatrix,X,de.paint.get("line-translate"),de.paint.get("line-translate-anchor"))}var Lo=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_tl_parent:new t.Uniform2f(ve,X.u_tl_parent),u_scale_parent:new t.Uniform1f(ve,X.u_scale_parent),u_buffer_scale:new t.Uniform1f(ve,X.u_buffer_scale),u_fade_t:new t.Uniform1f(ve,X.u_fade_t),u_opacity:new t.Uniform1f(ve,X.u_opacity),u_image0:new t.Uniform1i(ve,X.u_image0),u_image1:new t.Uniform1i(ve,X.u_image1),u_brightness_low:new t.Uniform1f(ve,X.u_brightness_low),u_brightness_high:new t.Uniform1f(ve,X.u_brightness_high),u_saturation_factor:new t.Uniform1f(ve,X.u_saturation_factor),u_contrast_factor:new t.Uniform1f(ve,X.u_contrast_factor),u_spin_weights:new t.Uniform3f(ve,X.u_spin_weights)}},ao=function(ve,X,de,q,ge){return{u_matrix:ve,u_tl_parent:X,u_scale_parent:de,u_buffer_scale:1,u_fade_t:q.mix,u_opacity:q.opacity*ge.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ge.paint.get("raster-brightness-min"),u_brightness_high:ge.paint.get("raster-brightness-max"),u_saturation_factor:_i(ge.paint.get("raster-saturation")),u_contrast_factor:_a(ge.paint.get("raster-contrast")),u_spin_weights:Qa(ge.paint.get("raster-hue-rotate"))}};function Qa(ve){ve*=Math.PI/180;var X=Math.sin(ve),de=Math.cos(ve);return[(2*de+1)/3,(-Math.sqrt(3)*X-de+1)/3,(Math.sqrt(3)*X-de+1)/3]}function _a(ve){return ve>0?1/(1-ve):1+ve}function _i(ve){return ve>0?1-1/(1.001-ve):-ve}var mo=function(ve,X){return{u_is_size_zoom_constant:new t.Uniform1i(ve,X.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(ve,X.u_is_size_feature_constant),u_size_t:new t.Uniform1f(ve,X.u_size_t),u_size:new t.Uniform1f(ve,X.u_size),u_camera_to_center_distance:new t.Uniform1f(ve,X.u_camera_to_center_distance),u_pitch:new t.Uniform1f(ve,X.u_pitch),u_rotate_symbol:new t.Uniform1i(ve,X.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(ve,X.u_aspect_ratio),u_fade_change:new t.Uniform1f(ve,X.u_fade_change),u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(ve,X.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(ve,X.u_coord_matrix),u_is_text:new t.Uniform1i(ve,X.u_is_text),u_pitch_with_map:new t.Uniform1i(ve,X.u_pitch_with_map),u_texsize:new t.Uniform2f(ve,X.u_texsize),u_texture:new t.Uniform1i(ve,X.u_texture)}},Mo=function(ve,X){return{u_is_size_zoom_constant:new t.Uniform1i(ve,X.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(ve,X.u_is_size_feature_constant),u_size_t:new t.Uniform1f(ve,X.u_size_t),u_size:new t.Uniform1f(ve,X.u_size),u_camera_to_center_distance:new t.Uniform1f(ve,X.u_camera_to_center_distance),u_pitch:new t.Uniform1f(ve,X.u_pitch),u_rotate_symbol:new t.Uniform1i(ve,X.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(ve,X.u_aspect_ratio),u_fade_change:new t.Uniform1f(ve,X.u_fade_change),u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(ve,X.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(ve,X.u_coord_matrix),u_is_text:new t.Uniform1i(ve,X.u_is_text),u_pitch_with_map:new t.Uniform1i(ve,X.u_pitch_with_map),u_texsize:new t.Uniform2f(ve,X.u_texsize),u_texture:new t.Uniform1i(ve,X.u_texture),u_gamma_scale:new t.Uniform1f(ve,X.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(ve,X.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(ve,X.u_is_halo)}},Ss=function(ve,X){return{u_is_size_zoom_constant:new t.Uniform1i(ve,X.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(ve,X.u_is_size_feature_constant),u_size_t:new t.Uniform1f(ve,X.u_size_t),u_size:new t.Uniform1f(ve,X.u_size),u_camera_to_center_distance:new t.Uniform1f(ve,X.u_camera_to_center_distance),u_pitch:new t.Uniform1f(ve,X.u_pitch),u_rotate_symbol:new t.Uniform1i(ve,X.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(ve,X.u_aspect_ratio),u_fade_change:new t.Uniform1f(ve,X.u_fade_change),u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(ve,X.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(ve,X.u_coord_matrix),u_is_text:new t.Uniform1i(ve,X.u_is_text),u_pitch_with_map:new t.Uniform1i(ve,X.u_pitch_with_map),u_texsize:new t.Uniform2f(ve,X.u_texsize),u_texsize_icon:new t.Uniform2f(ve,X.u_texsize_icon),u_texture:new t.Uniform1i(ve,X.u_texture),u_texture_icon:new t.Uniform1i(ve,X.u_texture_icon),u_gamma_scale:new t.Uniform1f(ve,X.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(ve,X.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(ve,X.u_is_halo)}},Ks=function(ve,X,de,q,ge,Ce,Pe,Ze,ft,St){var Ht=ge.transform;return{u_is_size_zoom_constant:+(ve==="constant"||ve==="source"),u_is_size_feature_constant:+(ve==="constant"||ve==="camera"),u_size_t:X?X.uSizeT:0,u_size:X?X.uSize:0,u_camera_to_center_distance:Ht.cameraToCenterDistance,u_pitch:Ht.pitch/360*2*Math.PI,u_rotate_symbol:+de,u_aspect_ratio:Ht.width/Ht.height,u_fade_change:ge.options.fadeDuration?ge.symbolFadeChange:1,u_matrix:Ce,u_label_plane_matrix:Pe,u_coord_matrix:Ze,u_is_text:+ft,u_pitch_with_map:+q,u_texsize:St,u_texture:0}},Jo=function(ve,X,de,q,ge,Ce,Pe,Ze,ft,St,Ht){var tr=ge.transform;return t.extend(Ks(ve,X,de,q,ge,Ce,Pe,Ze,ft,St),{u_gamma_scale:q?Math.cos(tr._pitch)*tr.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+Ht})},Ll=function(ve,X,de,q,ge,Ce,Pe,Ze,ft,St){return t.extend(Jo(ve,X,de,q,ge,Ce,Pe,Ze,!0,ft,!0),{u_texsize_icon:St,u_texture_icon:1})},zs=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_opacity:new t.Uniform1f(ve,X.u_opacity),u_color:new t.UniformColor(ve,X.u_color)}},Ms=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_opacity:new t.Uniform1f(ve,X.u_opacity),u_image:new t.Uniform1i(ve,X.u_image),u_pattern_tl_a:new t.Uniform2f(ve,X.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(ve,X.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(ve,X.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(ve,X.u_pattern_br_b),u_texsize:new t.Uniform2f(ve,X.u_texsize),u_mix:new t.Uniform1f(ve,X.u_mix),u_pattern_size_a:new t.Uniform2f(ve,X.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(ve,X.u_pattern_size_b),u_scale_a:new t.Uniform1f(ve,X.u_scale_a),u_scale_b:new t.Uniform1f(ve,X.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(ve,X.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(ve,X.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(ve,X.u_tile_units_to_pixels)}},Po=function(ve,X,de){return{u_matrix:ve,u_opacity:X,u_color:de}},Su=function(ve,X,de,q,ge,Ce){return t.extend(su(q,Ce,de,ge),{u_matrix:ve,u_opacity:X})},Wu={fillExtrusion:go,fillExtrusionPattern:lf,fill:hl,fillPattern:Zs,fillOutline:Ts,fillOutlinePattern:Yi,circle:ff,collisionBox:Ft,collisionCircle:sr,debug:un,clippingMask:An,heatmap:Yn,heatmapTexture:bn,hillshade:Zn,hillshadePrepare:ra,line:Ha,lineGradient:ea,linePattern:xa,lineSDF:Xa,raster:Lo,symbolIcon:mo,symbolSDF:Mo,symbolTextAndIcon:Ss,background:zs,backgroundPattern:Ms},ks;function cf(ve,X,de,q,ge,Ce,Pe){for(var Ze=ve.context,ft=Ze.gl,St=ve.useProgram("collisionBox"),Ht=[],tr=0,ur=0,Er=0;Er<q.length;Er++){var Wr=q[Er],jr=X.getTile(Wr),Gr=jr.getBucket(de);if(!!Gr){var qr=Wr.posMatrix;(ge[0]!==0||ge[1]!==0)&&(qr=ve.translatePosMatrix(Wr.posMatrix,jr,ge,Ce));var dn=Pe?Gr.textCollisionBox:Gr.iconCollisionBox,Cn=Gr.collisionCircleArray;if(Cn.length>0){var Vn=t.create(),Qn=qr;t.mul(Vn,Gr.placementInvProjMatrix,ve.transform.glCoordMatrix),t.mul(Vn,Vn,Gr.placementViewportMatrix),Ht.push({circleArray:Cn,circleOffset:ur,transform:Qn,invTransform:Vn}),tr+=Cn.length/4,ur=tr}!dn||St.draw(Ze,ft.LINES,lr.disabled,Rr.disabled,ve.colorModeForRenderPass(),Ye.disabled,$t(qr,ve.transform,jr),de.id,dn.layoutVertexBuffer,dn.indexBuffer,dn.segments,null,ve.transform.zoom,null,null,dn.collisionVertexBuffer)}}if(!(!Pe||!Ht.length)){var na=ve.useProgram("collisionCircle"),ta=new t.StructArrayLayout2f1f2i16;ta.resize(tr*4),ta._trim();for(var ma=0,Sa=0,Ta=Ht;Sa<Ta.length;Sa+=1)for(var Ea=Ta[Sa],Ia=0;Ia<Ea.circleArray.length/4;Ia++){var Ya=Ia*4,ii=Ea.circleArray[Ya+0],Ri=Ea.circleArray[Ya+1],ci=Ea.circleArray[Ya+2],gi=Ea.circleArray[Ya+3];ta.emplace(ma++,ii,Ri,ci,gi,0),ta.emplace(ma++,ii,Ri,ci,gi,1),ta.emplace(ma++,ii,Ri,ci,gi,2),ta.emplace(ma++,ii,Ri,ci,gi,3)}(!ks||ks.length<tr*2)&&(ks=Mu(tr));for(var Ga=Ze.createIndexBuffer(ks,!0),Di=Ze.createVertexBuffer(ta,t.collisionCircleLayout.members,!0),Ni=0,Gi=Ht;Ni<Gi.length;Ni+=1){var Ti=Gi[Ni],Qi=Ir(Ti.transform,Ti.invTransform,ve.transform);na.draw(Ze,ft.TRIANGLES,lr.disabled,Rr.disabled,ve.colorModeForRenderPass(),Ye.disabled,Qi,de.id,Di,Ga,t.SegmentVector.simpleSegment(0,Ti.circleOffset*2,Ti.circleArray.length,Ti.circleArray.length/2),null,ve.transform.zoom,null,null,null)}Di.destroy(),Ga.destroy()}}function Mu(ve){var X=ve*2,de=new t.StructArrayLayout3ui6;de.resize(X),de._trim();for(var q=0;q<X;q++){var ge=q*6;de.uint16[ge+0]=q*4+0,de.uint16[ge+1]=q*4+1,de.uint16[ge+2]=q*4+2,de.uint16[ge+3]=q*4+2,de.uint16[ge+4]=q*4+3,de.uint16[ge+5]=q*4+0}return de}var Gc=t.identity(new Float32Array(16));function Df(ve,X,de,q,ge){if(ve.renderPass==="translucent"){var Ce=Rr.disabled,Pe=ve.colorModeForRenderPass(),Ze=de.layout.get("text-variable-anchor");Ze&&If(q,ve,de,X,de.layout.get("text-rotation-alignment"),de.layout.get("text-pitch-alignment"),ge),de.paint.get("icon-opacity").constantOr(1)!==0&&Ff(ve,X,de,q,!1,de.paint.get("icon-translate"),de.paint.get("icon-translate-anchor"),de.layout.get("icon-rotation-alignment"),de.layout.get("icon-pitch-alignment"),de.layout.get("icon-keep-upright"),Ce,Pe),de.paint.get("text-opacity").constantOr(1)!==0&&Ff(ve,X,de,q,!0,de.paint.get("text-translate"),de.paint.get("text-translate-anchor"),de.layout.get("text-rotation-alignment"),de.layout.get("text-pitch-alignment"),de.layout.get("text-keep-upright"),Ce,Pe),X.map.showCollisionBoxes&&(cf(ve,X,de,q,de.paint.get("text-translate"),de.paint.get("text-translate-anchor"),!0),cf(ve,X,de,q,de.paint.get("icon-translate"),de.paint.get("icon-translate-anchor"),!1))}}function hf(ve,X,de,q,ge,Ce){var Pe=t.getAnchorAlignment(ve),Ze=Pe.horizontalAlign,ft=Pe.verticalAlign,St=-(Ze-.5)*X,Ht=-(ft-.5)*de,tr=t.evaluateVariableOffset(ve,q);return new t.Point((St/ge+tr[0])*Ce,(Ht/ge+tr[1])*Ce)}function If(ve,X,de,q,ge,Ce,Pe){for(var Ze=X.transform,ft=ge==="map",St=Ce==="map",Ht=0,tr=ve;Ht<tr.length;Ht+=1){var ur=tr[Ht],Er=q.getTile(ur),Wr=Er.getBucket(de);if(!(!Wr||!Wr.text||!Wr.text.segments.get().length)){var jr=Wr.textSizeData,Gr=t.evaluateSizeForZoom(jr,Ze.zoom),qr=da(Er,1,X.transform.zoom),dn=on(ur.posMatrix,St,ft,X.transform,qr),Cn=de.layout.get("icon-text-fit")!=="none"&&Wr.hasIconData();if(Gr){var Vn=Math.pow(2,Ze.zoom-Er.tileID.overscaledZ);Js(Wr,ft,St,Pe,t.symbolSize,Ze,dn,ur.posMatrix,Vn,Gr,Cn)}}}}function Js(ve,X,de,q,ge,Ce,Pe,Ze,ft,St,Ht){var tr=ve.text.placedSymbolArray,ur=ve.text.dynamicLayoutVertexArray,Er=ve.icon.dynamicLayoutVertexArray,Wr={};ur.clear();for(var jr=0;jr<tr.length;jr++){var Gr=tr.get(jr),qr=ve.allowVerticalPlacement&&!Gr.placedOrientation,dn=!Gr.hidden&&Gr.crossTileID&&!qr?q[Gr.crossTileID]:null;if(!dn)ha(Gr.numGlyphs,ur);else{var Cn=new t.Point(Gr.anchorX,Gr.anchorY),Vn=En(Cn,de?Ze:Pe),Qn=$n(Ce.cameraToCenterDistance,Vn.signedDistanceFromCamera),na=ge.evaluateSizeForFeature(ve.textSizeData,St,Gr)*Qn/t.ONE_EM;de&&(na*=ve.tilePixelRatio/ft);for(var ta=dn.width,ma=dn.height,Sa=dn.anchor,Ta=dn.textOffset,Ea=dn.textBoxScale,Ia=hf(Sa,ta,ma,Ta,Ea,na),Ya=de?En(Cn.add(Ia),Pe).point:Vn.point.add(X?Ia.rotate(-Ce.angle):Ia),ii=ve.allowVerticalPlacement&&Gr.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,Ri=0;Ri<Gr.numGlyphs;Ri++)t.addDynamicAttributes(ur,Ya,ii);Ht&&Gr.associatedIconIndex>=0&&(Wr[Gr.associatedIconIndex]={shiftedAnchor:Ya,angle:ii})}}if(Ht){Er.clear();for(var ci=ve.icon.placedSymbolArray,gi=0;gi<ci.length;gi++){var Ga=ci.get(gi);if(Ga.hidden)ha(Ga.numGlyphs,Er);else{var Di=Wr[gi];if(!Di)ha(Ga.numGlyphs,Er);else for(var Ni=0;Ni<Ga.numGlyphs;Ni++)t.addDynamicAttributes(Er,Di.shiftedAnchor,Di.angle)}}ve.icon.dynamicLayoutVertexBuffer.updateData(Er)}ve.text.dynamicLayoutVertexBuffer.updateData(ur)}function sc(ve,X,de){return de.iconsInText&&X?"symbolTextAndIcon":ve?"symbolSDF":"symbolIcon"}function Ff(ve,X,de,q,ge,Ce,Pe,Ze,ft,St,Ht,tr){for(var ur=ve.context,Er=ur.gl,Wr=ve.transform,jr=Ze==="map",Gr=ft==="map",qr=jr&&de.layout.get("symbol-placement")!=="point",dn=jr&&!Gr&&!qr,Cn=de.layout.get("symbol-sort-key").constantOr(1)!==void 0,Vn=ve.depthModeForSublayer(0,lr.ReadOnly),Qn=de.layout.get("text-variable-anchor"),na=[],ta=0,ma=q;ta<ma.length;ta+=1){var Sa=ma[ta],Ta=X.getTile(Sa),Ea=Ta.getBucket(de);if(!!Ea){var Ia=ge?Ea.text:Ea.icon;if(!(!Ia||!Ia.segments.get().length)){var Ya=Ia.programConfigurations.get(de.id),ii=ge||Ea.sdfIcons,Ri=ge?Ea.textSizeData:Ea.iconSizeData,ci=Gr||Wr.pitch!==0,gi=ve.useProgram(sc(ii,ge,Ea),Ya),Ga=t.evaluateSizeForZoom(Ri,Wr.zoom),Di=void 0,Ni=[0,0],Gi=void 0,Ti=void 0,Qi=null,si=void 0;if(ge){if(Gi=Ta.glyphAtlasTexture,Ti=Er.LINEAR,Di=Ta.glyphAtlasTexture.size,Ea.iconsInText){Ni=Ta.imageAtlasTexture.size,Qi=Ta.imageAtlasTexture;var Ai=Ri.kind==="composite"||Ri.kind==="camera";si=ci||ve.options.rotating||ve.options.zooming||Ai?Er.LINEAR:Er.NEAREST}}else{var Fo=de.layout.get("icon-size").constantOr(0)!==1||Ea.iconsNeedLinear;Gi=Ta.imageAtlasTexture,Ti=ii||ve.options.rotating||ve.options.zooming||Fo||ci?Er.LINEAR:Er.NEAREST,Di=Ta.imageAtlasTexture.size}var qo=da(Ta,1,ve.transform.zoom),uu=on(Sa.posMatrix,Gr,jr,ve.transform,qo),fu=Pn(Sa.posMatrix,Gr,jr,ve.transform,qo),Yu=Qn&&Ea.hasTextData(),ju=de.layout.get("icon-text-fit")!=="none"&&Yu&&Ea.hasIconData();qr&&Ca(Ea,Sa.posMatrix,ve,ge,uu,fu,Gr,St);var mf=ve.translatePosMatrix(Sa.posMatrix,Ta,Ce,Pe),Xu=qr||ge&&Qn||ju?Gc:uu,pl=ve.translatePosMatrix(fu,Ta,Ce,Pe,!0),Wf=ii&&de.paint.get(ge?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Ns=void 0;ii?Ea.iconsInText?Ns=Ll(Ri.kind,Ga,dn,Gr,ve,mf,Xu,pl,Di,Ni):Ns=Jo(Ri.kind,Ga,dn,Gr,ve,mf,Xu,pl,ge,Di,!0):Ns=Ks(Ri.kind,Ga,dn,Gr,ve,mf,Xu,pl,ge,Di);var jl={program:gi,buffers:Ia,uniformValues:Ns,atlasTexture:Gi,atlasTextureIcon:Qi,atlasInterpolation:Ti,atlasInterpolationIcon:si,isSDF:ii,hasHalo:Wf};if(Cn)for(var Zu=Ia.segments.get(),Eu=0,Ku=Zu;Eu<Ku.length;Eu+=1){var wh=Ku[Eu];na.push({segments:new t.SegmentVector([wh]),sortKey:wh.sortKey,state:jl})}else na.push({segments:Ia.segments,sortKey:0,state:jl})}}}Cn&&na.sort(function(Th,Ah){return Th.sortKey-Ah.sortKey});for(var lc=0,Es=na;lc<Es.length;lc+=1){var Zc=Es[lc],$s=Zc.state;if(ur.activeTexture.set(Er.TEXTURE0),$s.atlasTexture.bind($s.atlasInterpolation,Er.CLAMP_TO_EDGE),$s.atlasTextureIcon&&(ur.activeTexture.set(Er.TEXTURE1),$s.atlasTextureIcon&&$s.atlasTextureIcon.bind($s.atlasInterpolationIcon,Er.CLAMP_TO_EDGE)),$s.isSDF){var Kc=$s.uniformValues;$s.hasHalo&&(Kc.u_is_halo=1,zf($s.buffers,Zc.segments,de,ve,$s.program,Vn,Ht,tr,Kc)),Kc.u_is_halo=0}zf($s.buffers,Zc.segments,de,ve,$s.program,Vn,Ht,tr,$s.uniformValues)}}function zf(ve,X,de,q,ge,Ce,Pe,Ze,ft){var St=q.context,Ht=St.gl;ge.draw(St,Ht.TRIANGLES,Ce,Pe,Ze,Ye.disabled,ft,de.id,ve.layoutVertexBuffer,ve.indexBuffer,X,de.paint,q.transform.zoom,ve.programConfigurations.get(de.id),ve.dynamicLayoutVertexBuffer,ve.opacityVertexBuffer)}function $o(ve,X,de,q){if(ve.renderPass==="translucent"){var ge=de.paint.get("circle-opacity"),Ce=de.paint.get("circle-stroke-width"),Pe=de.paint.get("circle-stroke-opacity"),Ze=de.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(ge.constantOr(1)===0&&(Ce.constantOr(1)===0||Pe.constantOr(1)===0))){for(var ft=ve.context,St=ft.gl,Ht=ve.depthModeForSublayer(0,lr.ReadOnly),tr=Rr.disabled,ur=ve.colorModeForRenderPass(),Er=[],Wr=0;Wr<q.length;Wr++){var jr=q[Wr],Gr=X.getTile(jr),qr=Gr.getBucket(de);if(!!qr){var dn=qr.programConfigurations.get(de.id),Cn=ve.useProgram("circle",dn),Vn=qr.layoutVertexBuffer,Qn=qr.indexBuffer,na=xt(ve,jr,Gr,de),ta={programConfiguration:dn,program:Cn,layoutVertexBuffer:Vn,indexBuffer:Qn,uniformValues:na};if(Ze)for(var ma=qr.segments.get(),Sa=0,Ta=ma;Sa<Ta.length;Sa+=1){var Ea=Ta[Sa];Er.push({segments:new t.SegmentVector([Ea]),sortKey:Ea.sortKey,state:ta})}else Er.push({segments:qr.segments,sortKey:0,state:ta})}}Ze&&Er.sort(function(Ti,Qi){return Ti.sortKey-Qi.sortKey});for(var Ia=0,Ya=Er;Ia<Ya.length;Ia+=1){var ii=Ya[Ia],Ri=ii.state,ci=Ri.programConfiguration,gi=Ri.program,Ga=Ri.layoutVertexBuffer,Di=Ri.indexBuffer,Ni=Ri.uniformValues,Gi=ii.segments;gi.draw(ft,St.TRIANGLES,Ht,tr,ur,Ye.disabled,Ni,de.id,Ga,Di,Gi,de.paint,ve.transform.zoom,ci)}}}}function Of(ve,X,de,q){if(de.paint.get("heatmap-opacity")!==0)if(ve.renderPass==="offscreen"){var ge=ve.context,Ce=ge.gl,Pe=Rr.disabled,Ze=new we([Ce.ONE,Ce.ONE],t.Color.transparent,[!0,!0,!0,!0]);xc(ge,ve,de),ge.clear({color:t.Color.transparent});for(var ft=0;ft<q.length;ft++){var St=q[ft];if(!X.hasRenderableParent(St)){var Ht=X.getTile(St),tr=Ht.getBucket(de);if(!!tr){var ur=tr.programConfigurations.get(de.id),Er=ve.useProgram("heatmap",ur),Wr=ve.transform,jr=Wr.zoom;Er.draw(ge,Ce.TRIANGLES,lr.disabled,Pe,Ze,Ye.disabled,On(St.posMatrix,Ht,jr,de.paint.get("heatmap-intensity")),de.id,tr.layoutVertexBuffer,tr.indexBuffer,tr.segments,de.paint,ve.transform.zoom,ur)}}}ge.viewport.set([0,0,ve.width,ve.height])}else ve.renderPass==="translucent"&&(ve.context.setColorMode(ve.colorModeForRenderPass()),vf(ve,de))}function xc(ve,X,de){var q=ve.gl;ve.activeTexture.set(q.TEXTURE1),ve.viewport.set([0,0,X.width/4,X.height/4]);var ge=de.heatmapFbo;if(ge)q.bindTexture(q.TEXTURE_2D,ge.colorAttachment.get()),ve.bindFramebuffer.set(ge.framebuffer);else{var Ce=q.createTexture();q.bindTexture(q.TEXTURE_2D,Ce),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.LINEAR),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.LINEAR),ge=de.heatmapFbo=ve.createFramebuffer(X.width/4,X.height/4,!1),Os(ve,X,Ce,ge)}}function Os(ve,X,de,q){var ge=ve.gl,Ce=ve.extRenderToTextureHalfFloat?ve.extTextureHalfFloat.HALF_FLOAT_OES:ge.UNSIGNED_BYTE;ge.texImage2D(ge.TEXTURE_2D,0,ge.RGBA,X.width/4,X.height/4,0,ge.RGBA,Ce,null),q.colorAttachment.set(de)}function vf(ve,X){var de=ve.context,q=de.gl,ge=X.heatmapFbo;if(!!ge){de.activeTexture.set(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,ge.colorAttachment.get()),de.activeTexture.set(q.TEXTURE1);var Ce=X.colorRampTexture;Ce||(Ce=X.colorRampTexture=new t.Texture(de,X.colorRamp,q.RGBA)),Ce.bind(q.LINEAR,q.CLAMP_TO_EDGE),ve.useProgram("heatmapTexture").draw(de,q.TRIANGLES,lr.disabled,Rr.disabled,ve.colorModeForRenderPass(),Ye.disabled,Rn(ve,X,0,1),X.id,ve.viewportBuffer,ve.quadTriangleIndexBuffer,ve.viewportSegments,X.paint,ve.transform.zoom)}}function pf(ve,X,de,q){if(ve.renderPass==="translucent"){var ge=de.paint.get("line-opacity"),Ce=de.paint.get("line-width");if(!(ge.constantOr(1)===0||Ce.constantOr(1)===0)){var Pe=ve.depthModeForSublayer(0,lr.ReadOnly),Ze=ve.colorModeForRenderPass(),ft=de.paint.get("line-dasharray"),St=de.paint.get("line-pattern"),Ht=St.constantOr(1),tr=de.paint.get("line-gradient"),ur=de.getCrossfadeParameters(),Er=Ht?"linePattern":ft?"lineSDF":tr?"lineGradient":"line",Wr=ve.context,jr=Wr.gl,Gr=!0;if(tr){Wr.activeTexture.set(jr.TEXTURE0);var qr=de.gradientTexture;if(!de.gradient)return;qr||(qr=de.gradientTexture=new t.Texture(Wr,de.gradient,jr.RGBA)),qr.bind(jr.LINEAR,jr.CLAMP_TO_EDGE)}for(var dn=0,Cn=q;dn<Cn.length;dn+=1){var Vn=Cn[dn],Qn=X.getTile(Vn);if(!(Ht&&!Qn.patternsLoaded())){var na=Qn.getBucket(de);if(!!na){var ta=na.programConfigurations.get(de.id),ma=ve.context.program.get(),Sa=ve.useProgram(Er,ta),Ta=Gr||Sa.program!==ma,Ea=St.constantOr(null);if(Ea&&Qn.imageAtlas){var Ia=Qn.imageAtlas,Ya=Ia.patternPositions[Ea.to.toString()],ii=Ia.patternPositions[Ea.from.toString()];Ya&&ii&&ta.setConstantPatternPositions(Ya,ii)}var Ri=Ht?yi(ve,Qn,de,ur):ft?bi(ve,Qn,de,ft,ur):tr?mi(ve,Qn,de):qa(ve,Qn,de);Ht?(Wr.activeTexture.set(jr.TEXTURE0),Qn.imageAtlasTexture.bind(jr.LINEAR,jr.CLAMP_TO_EDGE),ta.updatePaintBuffers(ur)):ft&&(Ta||ve.lineAtlas.dirty)&&(Wr.activeTexture.set(jr.TEXTURE0),ve.lineAtlas.bind(Wr)),Sa.draw(Wr,jr.TRIANGLES,Pe,ve.stencilModeForClipping(Vn),Ze,Ye.disabled,Ri,de.id,na.layoutVertexBuffer,na.indexBuffer,na.segments,de.paint,ve.transform.zoom,ta),Gr=!1}}}}}}function Bf(ve,X,de,q){var ge=de.paint.get("fill-color"),Ce=de.paint.get("fill-opacity");if(Ce.constantOr(1)!==0){var Pe=ve.colorModeForRenderPass(),Ze=de.paint.get("fill-pattern"),ft=ve.opaquePassEnabledForLayer()&&!Ze.constantOr(1)&&ge.constantOr(t.Color.transparent).a===1&&Ce.constantOr(0)===1?"opaque":"translucent";if(ve.renderPass===ft){var St=ve.depthModeForSublayer(1,ve.renderPass==="opaque"?lr.ReadWrite:lr.ReadOnly);Fe(ve,X,de,q,St,Pe,!1)}if(ve.renderPass==="translucent"&&de.paint.get("fill-antialias")){var Ht=ve.depthModeForSublayer(de.getPaintProperty("fill-outline-color")?2:0,lr.ReadOnly);Fe(ve,X,de,q,Ht,Pe,!0)}}}function Fe(ve,X,de,q,ge,Ce,Pe){var Ze=ve.context.gl,ft=de.paint.get("fill-pattern"),St=ft&&ft.constantOr(1),Ht=de.getCrossfadeParameters(),tr,ur,Er,Wr,jr;Pe?(ur=St&&!de.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",tr=Ze.LINES):(ur=St?"fillPattern":"fill",tr=Ze.TRIANGLES);for(var Gr=0,qr=q;Gr<qr.length;Gr+=1){var dn=qr[Gr],Cn=X.getTile(dn);if(!(St&&!Cn.patternsLoaded())){var Vn=Cn.getBucket(de);if(!!Vn){var Qn=Vn.programConfigurations.get(de.id),na=ve.useProgram(ur,Qn);St&&(ve.context.activeTexture.set(Ze.TEXTURE0),Cn.imageAtlasTexture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE),Qn.updatePaintBuffers(Ht));var ta=ft.constantOr(null);if(ta&&Cn.imageAtlas){var ma=Cn.imageAtlas,Sa=ma.patternPositions[ta.to.toString()],Ta=ma.patternPositions[ta.from.toString()];Sa&&Ta&&Qn.setConstantPatternPositions(Sa,Ta)}var Ea=ve.translatePosMatrix(dn.posMatrix,Cn,de.paint.get("fill-translate"),de.paint.get("fill-translate-anchor"));if(!Pe)Wr=Vn.indexBuffer,jr=Vn.segments,Er=St?As(Ea,ve,Ht,Cn):Vo(Ea);else{Wr=Vn.indexBuffer2,jr=Vn.segments2;var Ia=[Ze.drawingBufferWidth,Ze.drawingBufferHeight];Er=ur==="fillOutlinePattern"&&St?Au(Ea,ve,Ht,Cn,Ia):uf(Ea,Ia)}na.draw(ve.context,tr,ge,ve.stencilModeForClipping(dn),Ce,Ye.disabled,Er,de.id,Vn.layoutVertexBuffer,Wr,jr,de.paint,ve.transform.zoom,Qn)}}}}function je(ve,X,de,q){var ge=de.paint.get("fill-extrusion-opacity");if(ge!==0&&ve.renderPass==="translucent"){var Ce=new lr(ve.context.gl.LEQUAL,lr.ReadWrite,ve.depthRangeFor3D);if(ge===1&&!de.paint.get("fill-extrusion-pattern").constantOr(1)){var Pe=ve.colorModeForRenderPass();nt(ve,X,de,q,Ce,Rr.disabled,Pe)}else nt(ve,X,de,q,Ce,Rr.disabled,we.disabled),nt(ve,X,de,q,Ce,ve.stencilModeFor3D(),ve.colorModeForRenderPass())}}function nt(ve,X,de,q,ge,Ce,Pe){for(var Ze=ve.context,ft=Ze.gl,St=de.paint.get("fill-extrusion-pattern"),Ht=St.constantOr(1),tr=de.getCrossfadeParameters(),ur=de.paint.get("fill-extrusion-opacity"),Er=0,Wr=q;Er<Wr.length;Er+=1){var jr=Wr[Er],Gr=X.getTile(jr),qr=Gr.getBucket(de);if(!!qr){var dn=qr.programConfigurations.get(de.id),Cn=ve.useProgram(Ht?"fillExtrusionPattern":"fillExtrusion",dn);Ht&&(ve.context.activeTexture.set(ft.TEXTURE0),Gr.imageAtlasTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),dn.updatePaintBuffers(tr));var Vn=St.constantOr(null);if(Vn&&Gr.imageAtlas){var Qn=Gr.imageAtlas,na=Qn.patternPositions[Vn.to.toString()],ta=Qn.patternPositions[Vn.from.toString()];na&&ta&&dn.setConstantPatternPositions(na,ta)}var ma=ve.translatePosMatrix(jr.posMatrix,Gr,de.paint.get("fill-extrusion-translate"),de.paint.get("fill-extrusion-translate-anchor")),Sa=de.paint.get("fill-extrusion-vertical-gradient"),Ta=Ht?cl(ma,ve,Sa,ur,jr,tr,Gr):ws(ma,ve,Sa,ur);Cn.draw(Ze,Ze.gl.TRIANGLES,ge,Ce,Pe,Ye.backCCW,Ta,de.id,qr.layoutVertexBuffer,qr.indexBuffer,qr.segments,de.paint,ve.transform.zoom,dn)}}}function lt(ve,X,de,q){if(!(ve.renderPass!=="offscreen"&&ve.renderPass!=="translucent")){for(var ge=ve.context,Ce=X.getSource().maxzoom,Pe=ve.depthModeForSublayer(0,lr.ReadOnly),Ze=ve.colorModeForRenderPass(),ft=ve.renderPass==="translucent"?ve.stencilConfigForOverlap(q):[{},q],St=ft[0],Ht=ft[1],tr=0,ur=Ht;tr<ur.length;tr+=1){var Er=ur[tr],Wr=X.getTile(Er);Wr.needsHillshadePrepare&&ve.renderPass==="offscreen"?bt(ve,Wr,de,Ce,Pe,Rr.disabled,Ze):ve.renderPass==="translucent"&&_t(ve,Wr,de,Pe,St[Er.overscaledZ],Ze)}ge.viewport.set([0,0,ve.width,ve.height])}}function _t(ve,X,de,q,ge,Ce){var Pe=ve.context,Ze=Pe.gl,ft=X.fbo;if(!!ft){var St=ve.useProgram("hillshade");Pe.activeTexture.set(Ze.TEXTURE0),Ze.bindTexture(Ze.TEXTURE_2D,ft.colorAttachment.get());var Ht=Ua(ve,X,de);St.draw(Pe,Ze.TRIANGLES,q,ge,Ce,Ye.disabled,Ht,de.id,ve.rasterBoundsBuffer,ve.quadTriangleIndexBuffer,ve.rasterBoundsSegments)}}function bt(ve,X,de,q,ge,Ce,Pe){var Ze=ve.context,ft=Ze.gl,St=X.dem;if(St&&St.data){var Ht=St.dim,tr=St.stride,ur=St.getPixels();if(Ze.activeTexture.set(ft.TEXTURE1),Ze.pixelStoreUnpackPremultiplyAlpha.set(!1),X.demTexture=X.demTexture||ve.getTileTexture(tr),X.demTexture){var Er=X.demTexture;Er.update(ur,{premultiply:!1}),Er.bind(ft.NEAREST,ft.CLAMP_TO_EDGE)}else X.demTexture=new t.Texture(Ze,ur,ft.RGBA,{premultiply:!1}),X.demTexture.bind(ft.NEAREST,ft.CLAMP_TO_EDGE);Ze.activeTexture.set(ft.TEXTURE0);var Wr=X.fbo;if(!Wr){var jr=new t.Texture(Ze,{width:Ht,height:Ht,data:null},ft.RGBA);jr.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),Wr=X.fbo=Ze.createFramebuffer(Ht,Ht,!0),Wr.colorAttachment.set(jr.texture)}Ze.bindFramebuffer.set(Wr.framebuffer),Ze.viewport.set([0,0,Ht,Ht]),ve.useProgram("hillshadePrepare").draw(Ze,ft.TRIANGLES,ge,Ce,Pe,Ye.disabled,Da(X.tileID,St,q),de.id,ve.rasterBoundsBuffer,ve.quadTriangleIndexBuffer,ve.rasterBoundsSegments),X.needsHillshadePrepare=!1}}function Tt(ve,X,de,q){if(ve.renderPass==="translucent"&&de.paint.get("raster-opacity")!==0&&!!q.length)for(var ge=ve.context,Ce=ge.gl,Pe=X.getSource(),Ze=ve.useProgram("raster"),ft=ve.colorModeForRenderPass(),St=Pe instanceof J?[{},q]:ve.stencilConfigForOverlap(q),Ht=St[0],tr=St[1],ur=tr[tr.length-1].overscaledZ,Er=!ve.options.moving,Wr=0,jr=tr;Wr<jr.length;Wr+=1){var Gr=jr[Wr],qr=ve.depthModeForSublayer(Gr.overscaledZ-ur,de.paint.get("raster-opacity")===1?lr.ReadWrite:lr.ReadOnly,Ce.LESS),dn=X.getTile(Gr),Cn=ve.transform.calculatePosMatrix(Gr.toUnwrapped(),Er);dn.registerFadeDuration(de.paint.get("raster-fade-duration"));var Vn=X.findLoadedParent(Gr,0),Qn=rr(dn,Vn,X,de,ve.transform),na=void 0,ta=void 0,ma=de.paint.get("raster-resampling")==="nearest"?Ce.NEAREST:Ce.LINEAR;ge.activeTexture.set(Ce.TEXTURE0),dn.texture.bind(ma,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),ge.activeTexture.set(Ce.TEXTURE1),Vn?(Vn.texture.bind(ma,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST),na=Math.pow(2,Vn.tileID.overscaledZ-dn.tileID.overscaledZ),ta=[dn.tileID.canonical.x*na%1,dn.tileID.canonical.y*na%1]):dn.texture.bind(ma,Ce.CLAMP_TO_EDGE,Ce.LINEAR_MIPMAP_NEAREST);var Sa=ao(Cn,ta||[0,0],na||1,Qn,de);Pe instanceof J?Ze.draw(ge,Ce.TRIANGLES,qr,Rr.disabled,ft,Ye.disabled,Sa,de.id,Pe.boundsBuffer,ve.quadTriangleIndexBuffer,Pe.boundsSegments):Ze.draw(ge,Ce.TRIANGLES,qr,Ht[Gr.overscaledZ],ft,Ye.disabled,Sa,de.id,ve.rasterBoundsBuffer,ve.quadTriangleIndexBuffer,ve.rasterBoundsSegments)}}function rr(ve,X,de,q,ge){var Ce=q.paint.get("raster-fade-duration");if(Ce>0){var Pe=t.browser.now(),Ze=(Pe-ve.timeAdded)/Ce,ft=X?(Pe-X.timeAdded)/Ce:-1,St=de.getSource(),Ht=ge.coveringZoomLevel({tileSize:St.tileSize,roundZoom:St.roundZoom}),tr=!X||Math.abs(X.tileID.overscaledZ-Ht)>Math.abs(ve.tileID.overscaledZ-Ht),ur=tr&&ve.refreshedUponExpiration?1:t.clamp(tr?Ze:1-ft,0,1);return ve.refreshedUponExpiration&&Ze>=1&&(ve.refreshedUponExpiration=!1),X?{opacity:1,mix:1-ur}:{opacity:ur,mix:0}}else return{opacity:1,mix:0}}function fr(ve,X,de){var q=de.paint.get("background-color"),ge=de.paint.get("background-opacity");if(ge!==0){var Ce=ve.context,Pe=Ce.gl,Ze=ve.transform,ft=Ze.tileSize,St=de.paint.get("background-pattern");if(!ve.isPatternMissing(St)){var Ht=!St&&q.a===1&&ge===1&&ve.opaquePassEnabledForLayer()?"opaque":"translucent";if(ve.renderPass===Ht){var tr=Rr.disabled,ur=ve.depthModeForSublayer(0,Ht==="opaque"?lr.ReadWrite:lr.ReadOnly),Er=ve.colorModeForRenderPass(),Wr=ve.useProgram(St?"backgroundPattern":"background"),jr=Ze.coveringTiles({tileSize:ft});St&&(Ce.activeTexture.set(Pe.TEXTURE0),ve.imageManager.bind(ve.context));for(var Gr=de.getCrossfadeParameters(),qr=0,dn=jr;qr<dn.length;qr+=1){var Cn=dn[qr],Vn=ve.transform.calculatePosMatrix(Cn.toUnwrapped()),Qn=St?Su(Vn,ge,ve,St,{tileID:Cn,tileSize:ft},Gr):Po(Vn,ge,q);Wr.draw(Ce,Pe.TRIANGLES,ur,tr,Er,Ye.disabled,Qn,de.id,ve.tileExtentBuffer,ve.quadTriangleIndexBuffer,ve.tileExtentSegments)}}}}}var er=new t.Color(1,0,0,1),pr=new t.Color(0,1,0,1),Dr=new t.Color(0,0,1,1),Kr=new t.Color(1,0,1,1),an=new t.Color(0,1,1,1);function wn(ve){var X=ve.transform.padding,de=3;Jn(ve,ve.transform.height-(X.top||0),de,er),Jn(ve,X.bottom||0,de,pr),wa(ve,X.left||0,de,Dr),wa(ve,ve.transform.width-(X.right||0),de,Kr);var q=ve.transform.centerPoint;Dn(ve,q.x,ve.transform.height-q.y,an)}function Dn(ve,X,de,q){var ge=20,Ce=2;Aa(ve,X-Ce/2,de-ge/2,Ce,ge,q),Aa(ve,X-ge/2,de-Ce/2,ge,Ce,q)}function Jn(ve,X,de,q){Aa(ve,0,X+de/2,ve.transform.width,de,q)}function wa(ve,X,de,q){Aa(ve,X-de/2,0,de,ve.transform.height,q)}function Aa(ve,X,de,q,ge,Ce){var Pe=ve.context,Ze=Pe.gl;Ze.enable(Ze.SCISSOR_TEST),Ze.scissor(X*t.browser.devicePixelRatio,de*t.browser.devicePixelRatio,q*t.browser.devicePixelRatio,ge*t.browser.devicePixelRatio),Pe.clear({color:Ce}),Ze.disable(Ze.SCISSOR_TEST)}function $a(ve,X,de){for(var q=0;q<de.length;q++)Za(ve,X,de[q])}function Za(ve,X,de){var q=ve.context,ge=q.gl,Ce=de.posMatrix,Pe=ve.useProgram("debug"),Ze=lr.disabled,ft=Rr.disabled,St=ve.colorModeForRenderPass(),Ht="$debug";q.activeTexture.set(ge.TEXTURE0),ve.emptyTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),Pe.draw(q,ge.LINE_STRIP,Ze,ft,St,Ye.disabled,xn(Ce,t.Color.red),Ht,ve.debugBuffer,ve.tileBorderIndexBuffer,ve.debugSegments);var tr=X.getTileByID(de.key).latestRawTileData,ur=tr&&tr.byteLength||0,Er=Math.floor(ur/1024),Wr=X.getTile(de).tileSize,jr=512/Math.min(Wr,512)*(de.overscaledZ/ve.transform.zoom)*.5,Gr=de.canonical.toString();de.overscaledZ!==de.canonical.z&&(Gr+=" => "+de.overscaledZ);var qr=Gr+" "+Er+"kb";ri(ve,qr),Pe.draw(q,ge.TRIANGLES,Ze,ft,we.alphaBlended,Ye.disabled,xn(Ce,t.Color.transparent,jr),Ht,ve.debugBuffer,ve.quadTriangleIndexBuffer,ve.debugSegments)}function ri(ve,X){ve.initDebugOverlayCanvas();var de=ve.debugOverlayCanvas,q=ve.context.gl,ge=ve.debugOverlayCanvas.getContext("2d");ge.clearRect(0,0,de.width,de.height),ge.shadowColor="white",ge.shadowBlur=2,ge.lineWidth=1.5,ge.strokeStyle="white",ge.textBaseline="top",ge.font="bold "+36+"px Open Sans, sans-serif",ge.fillText(X,5,5),ge.strokeText(X,5,5),ve.debugOverlayTexture.update(de),ve.debugOverlayTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE)}function vi(ve,X,de){var q=ve.context,ge=de.implementation;if(ve.renderPass==="offscreen"){var Ce=ge.prerender;Ce&&(ve.setCustomLayerDefaults(),q.setColorMode(ve.colorModeForRenderPass()),Ce.call(ge,q.gl,ve.transform.customLayerMatrix()),q.setDirty(),ve.setBaseState())}else if(ve.renderPass==="translucent"){ve.setCustomLayerDefaults(),q.setColorMode(ve.colorModeForRenderPass()),q.setStencilMode(Rr.disabled);var Pe=ge.renderingMode==="3d"?new lr(ve.context.gl.LEQUAL,lr.ReadWrite,ve.depthRangeFor3D):ve.depthModeForSublayer(0,lr.ReadOnly);q.setDepthMode(Pe),ge.render(q.gl,ve.transform.customLayerMatrix()),q.setDirty(),ve.setBaseState(),q.bindFramebuffer.set(null)}}var ho={symbol:Df,circle:$o,heatmap:Of,line:pf,fill:Bf,"fill-extrusion":je,hillshade:lt,raster:Tt,background:fr,debug:$a,custom:vi},ai=function(X,de){this.context=new Qe(X),this.transform=de,this._tileTextures={},this.setup(),this.numSublayers=ot.maxUnderzooming+ot.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Gs,this.gpuTimers={}};ai.prototype.resize=function(X,de){if(this.width=X*t.browser.devicePixelRatio,this.height=de*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var q=0,ge=this.style._order;q<ge.length;q+=1){var Ce=ge[q];this.style._layers[Ce].resize()}},ai.prototype.setup=function(){var X=this.context,de=new t.StructArrayLayout2i4;de.emplaceBack(0,0),de.emplaceBack(t.EXTENT,0),de.emplaceBack(0,t.EXTENT),de.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=X.createVertexBuffer(de,Bl.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var q=new t.StructArrayLayout2i4;q.emplaceBack(0,0),q.emplaceBack(t.EXTENT,0),q.emplaceBack(0,t.EXTENT),q.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=X.createVertexBuffer(q,Bl.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var ge=new t.StructArrayLayout4i8;ge.emplaceBack(0,0,0,0),ge.emplaceBack(t.EXTENT,0,t.EXTENT,0),ge.emplaceBack(0,t.EXTENT,0,t.EXTENT),ge.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=X.createVertexBuffer(ge,W.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var Ce=new t.StructArrayLayout2i4;Ce.emplaceBack(0,0),Ce.emplaceBack(1,0),Ce.emplaceBack(0,1),Ce.emplaceBack(1,1),this.viewportBuffer=X.createVertexBuffer(Ce,Bl.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var Pe=new t.StructArrayLayout1ui2;Pe.emplaceBack(0),Pe.emplaceBack(1),Pe.emplaceBack(3),Pe.emplaceBack(2),Pe.emplaceBack(0),this.tileBorderIndexBuffer=X.createIndexBuffer(Pe);var Ze=new t.StructArrayLayout3ui6;Ze.emplaceBack(0,1,2),Ze.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=X.createIndexBuffer(Ze),this.emptyTexture=new t.Texture(X,{width:1,height:1,data:new Uint8Array([0,0,0,0])},X.gl.RGBA);var ft=this.context.gl;this.stencilClearMode=new Rr({func:ft.ALWAYS,mask:0},0,255,ft.ZERO,ft.ZERO,ft.ZERO)},ai.prototype.clearStencil=function(){var X=this.context,de=X.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var q=t.create();t.ortho(q,0,this.width,this.height,0,0,1),t.scale(q,q,[de.drawingBufferWidth,de.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(X,de.TRIANGLES,lr.disabled,this.stencilClearMode,we.disabled,Ye.disabled,Ln(q),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ai.prototype._renderTileClippingMasks=function(X,de){if(!(this.currentStencilSource===X.source||!X.isTileClipped()||!de||!de.length)){this.currentStencilSource=X.source;var q=this.context,ge=q.gl;this.nextStencilID+de.length>256&&this.clearStencil(),q.setColorMode(we.disabled),q.setDepthMode(lr.disabled);var Ce=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Pe=0,Ze=de;Pe<Ze.length;Pe+=1){var ft=Ze[Pe],St=this._tileClippingMaskIDs[ft.key]=this.nextStencilID++;Ce.draw(q,ge.TRIANGLES,lr.disabled,new Rr({func:ge.ALWAYS,mask:0},St,255,ge.KEEP,ge.KEEP,ge.REPLACE),we.disabled,Ye.disabled,Ln(ft.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ai.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var X=this.nextStencilID++,de=this.context.gl;return new Rr({func:de.NOTEQUAL,mask:255},X,255,de.KEEP,de.KEEP,de.REPLACE)},ai.prototype.stencilModeForClipping=function(X){var de=this.context.gl;return new Rr({func:de.EQUAL,mask:255},this._tileClippingMaskIDs[X.key],0,de.KEEP,de.KEEP,de.REPLACE)},ai.prototype.stencilConfigForOverlap=function(X){var de,q=this.context.gl,ge=X.sort(function(St,Ht){return Ht.overscaledZ-St.overscaledZ}),Ce=ge[ge.length-1].overscaledZ,Pe=ge[0].overscaledZ-Ce+1;if(Pe>1){this.currentStencilSource=void 0,this.nextStencilID+Pe>256&&this.clearStencil();for(var Ze={},ft=0;ft<Pe;ft++)Ze[ft+Ce]=new Rr({func:q.GEQUAL,mask:255},ft+this.nextStencilID,255,q.KEEP,q.KEEP,q.REPLACE);return this.nextStencilID+=Pe,[Ze,ge]}return[(de={},de[Ce]=Rr.disabled,de),ge]},ai.prototype.colorModeForRenderPass=function(){var X=this.context.gl;if(this._showOverdrawInspector){var de=8,q=1/de;return new we([X.CONSTANT_COLOR,X.ONE],new t.Color(q,q,q,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?we.unblended:we.alphaBlended},ai.prototype.depthModeForSublayer=function(X,de,q){if(!this.opaquePassEnabledForLayer())return lr.disabled;var ge=1-((1+this.currentLayer)*this.numSublayers+X)*this.depthEpsilon;return new lr(q||this.context.gl.LEQUAL,de,[ge,ge])},ai.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ai.prototype.render=function(X,de){var q=this;this.style=X,this.options=de,this.lineAtlas=X.lineAtlas,this.imageManager=X.imageManager,this.glyphManager=X.glyphManager,this.symbolFadeChange=X.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var ge=this.style._order,Ce=this.style.sourceCaches;for(var Pe in Ce){var Ze=Ce[Pe];Ze.used&&Ze.prepare(this.context)}var ft={},St={},Ht={};for(var tr in Ce){var ur=Ce[tr];ft[tr]=ur.getVisibleCoordinates(),St[tr]=ft[tr].slice().reverse(),Ht[tr]=ur.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Er=0;Er<ge.length;Er++){var Wr=ge[Er];if(this.style._layers[Wr].is3D()){this.opaquePassCutoff=Er;break}}this.renderPass="offscreen";for(var jr=0,Gr=ge;jr<Gr.length;jr+=1){var qr=Gr[jr],dn=this.style._layers[qr];if(!(!dn.hasOffscreenPass()||dn.isHidden(this.transform.zoom))){var Cn=St[dn.source];dn.type!=="custom"&&!Cn.length||this.renderLayer(this,Ce[dn.source],dn,Cn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:de.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=de.showOverdrawInspector,this.depthRangeFor3D=[0,1-(X._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=ge.length-1;this.currentLayer>=0;this.currentLayer--){var Vn=this.style._layers[ge[this.currentLayer]],Qn=Ce[Vn.source],na=ft[Vn.source];this._renderTileClippingMasks(Vn,na),this.renderLayer(this,Qn,Vn,na)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<ge.length;this.currentLayer++){var ta=this.style._layers[ge[this.currentLayer]],ma=Ce[ta.source],Sa=(ta.type==="symbol"?Ht:St)[ta.source];this._renderTileClippingMasks(ta,ft[ta.source]),this.renderLayer(this,ma,ta,Sa)}if(this.options.showTileBoundaries){var Ta,Ea,Ia=t.values(this.style._layers);Ia.forEach(function(Ya){Ya.source&&!Ya.isHidden(q.transform.zoom)&&(Ya.source!==(Ea&&Ea.id)&&(Ea=q.style.sourceCaches[Ya.source]),(!Ta||Ta.getSource().maxzoom<Ea.getSource().maxzoom)&&(Ta=Ea))}),Ta&&ho.debug(this,Ta,Ta.getVisibleCoordinates())}this.options.showPadding&&wn(this),this.context.setDefault()},ai.prototype.renderLayer=function(X,de,q,ge){q.isHidden(this.transform.zoom)||q.type!=="background"&&q.type!=="custom"&&!ge.length||(this.id=q.id,this.gpuTimingStart(q),ho[q.type](X,de,q,ge,this.style.placement.variableOffsets),this.gpuTimingEnd())},ai.prototype.gpuTimingStart=function(X){if(!!this.options.gpuTiming){var de=this.context.extTimerQuery,q=this.gpuTimers[X.id];q||(q=this.gpuTimers[X.id]={calls:0,cpuTime:0,query:de.createQueryEXT()}),q.calls++,de.beginQueryEXT(de.TIME_ELAPSED_EXT,q.query)}},ai.prototype.gpuTimingEnd=function(){if(!!this.options.gpuTiming){var X=this.context.extTimerQuery;X.endQueryEXT(X.TIME_ELAPSED_EXT)}},ai.prototype.collectGpuTimers=function(){var X=this.gpuTimers;return this.gpuTimers={},X},ai.prototype.queryGpuTimers=function(X){var de={};for(var q in X){var ge=X[q],Ce=this.context.extTimerQuery,Pe=Ce.getQueryObjectEXT(ge.query,Ce.QUERY_RESULT_EXT)/(1e3*1e3);Ce.deleteQueryEXT(ge.query),de[q]=Pe}return de},ai.prototype.translatePosMatrix=function(X,de,q,ge,Ce){if(!q[0]&&!q[1])return X;var Pe=Ce?ge==="map"?this.transform.angle:0:ge==="viewport"?-this.transform.angle:0;if(Pe){var Ze=Math.sin(Pe),ft=Math.cos(Pe);q=[q[0]*ft-q[1]*Ze,q[0]*Ze+q[1]*ft]}var St=[Ce?q[0]:da(de,q[0],this.transform.zoom),Ce?q[1]:da(de,q[1],this.transform.zoom),0],Ht=new Float32Array(16);return t.translate(Ht,X,St),Ht},ai.prototype.saveTileTexture=function(X){var de=this._tileTextures[X.size[0]];de?de.push(X):this._tileTextures[X.size[0]]=[X]},ai.prototype.getTileTexture=function(X){var de=this._tileTextures[X];return de&&de.length>0?de.pop():null},ai.prototype.isPatternMissing=function(X){if(!X)return!1;if(!X.from||!X.to)return!0;var de=this.imageManager.getPattern(X.from.toString()),q=this.imageManager.getPattern(X.to.toString());return!de||!q},ai.prototype.useProgram=function(X,de){this.cache=this.cache||{};var q=""+X+(de?de.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[q]||(this.cache[q]=new ds(this.context,Yl[X],de,Wu[X],this._showOverdrawInspector)),this.cache[q]},ai.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ai.prototype.setBaseState=function(){var X=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(X.FUNC_ADD)},ai.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var X=this.context.gl;this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,X.RGBA)}},ai.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var ji=function(X,de){this.points=X,this.planes=de};ji.fromInvProjectionMatrix=function(X,de,q){var ge=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],Ce=Math.pow(2,q),Pe=ge.map(function(St){return t.transformMat4([],St,X)}).map(function(St){return t.scale$1([],St,1/St[3]/de*Ce)}),Ze=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],ft=Ze.map(function(St){var Ht=t.sub([],Pe[St[0]],Pe[St[1]]),tr=t.sub([],Pe[St[2]],Pe[St[1]]),ur=t.normalize([],t.cross([],Ht,tr)),Er=-t.dot(ur,Pe[St[1]]);return ur.concat(Er)});return new ji(Pe,ft)};var yo=function(X,de){this.min=X,this.max=de,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};yo.prototype.quadrant=function(X){for(var de=[X%2==0,X<2],q=t.clone$2(this.min),ge=t.clone$2(this.max),Ce=0;Ce<de.length;Ce++)q[Ce]=de[Ce]?this.min[Ce]:this.center[Ce],ge[Ce]=de[Ce]?this.center[Ce]:this.max[Ce];return ge[2]=this.max[2],new yo(q,ge)},yo.prototype.distanceX=function(X){var de=Math.max(Math.min(this.max[0],X[0]),this.min[0]);return de-X[0]},yo.prototype.distanceY=function(X){var de=Math.max(Math.min(this.max[1],X[1]),this.min[1]);return de-X[1]},yo.prototype.intersects=function(X){for(var de=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],q=!0,ge=0;ge<X.planes.length;ge++){for(var Ce=X.planes[ge],Pe=0,Ze=0;Ze<de.length;Ze++)Pe+=t.dot$1(Ce,de[Ze])>=0;if(Pe===0)return 0;Pe!==de.length&&(q=!1)}if(q)return 2;for(var ft=0;ft<3;ft++){for(var St=Number.MAX_VALUE,Ht=-Number.MAX_VALUE,tr=0;tr<X.points.length;tr++){var ur=X.points[tr][ft]-this.min[ft];St=Math.min(St,ur),Ht=Math.max(Ht,ur)}if(Ht<0||St>this.max[ft]-this.min[ft])return 0}return 1};var Io=function(X,de,q,ge){if(X===void 0&&(X=0),de===void 0&&(de=0),q===void 0&&(q=0),ge===void 0&&(ge=0),isNaN(X)||X<0||isNaN(de)||de<0||isNaN(q)||q<0||isNaN(ge)||ge<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=X,this.bottom=de,this.left=q,this.right=ge};Io.prototype.interpolate=function(X,de,q){return de.top!=null&&X.top!=null&&(this.top=t.number(X.top,de.top,q)),de.bottom!=null&&X.bottom!=null&&(this.bottom=t.number(X.bottom,de.bottom,q)),de.left!=null&&X.left!=null&&(this.left=t.number(X.left,de.left,q)),de.right!=null&&X.right!=null&&(this.right=t.number(X.right,de.right,q)),this},Io.prototype.getCenter=function(X,de){var q=t.clamp((this.left+X-this.right)/2,0,X),ge=t.clamp((this.top+de-this.bottom)/2,0,de);return new t.Point(q,ge)},Io.prototype.equals=function(X){return this.top===X.top&&this.bottom===X.bottom&&this.left===X.left&&this.right===X.right},Io.prototype.clone=function(){return new Io(this.top,this.bottom,this.left,this.right)},Io.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var wi=function(X,de,q,ge,Ce){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Ce===void 0?!0:Ce,this._minZoom=X||0,this._maxZoom=de||22,this._minPitch=q??0,this._maxPitch=ge??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Io,this._posMatrixCache={},this._alignedPosMatrixCache={}},ki={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};wi.prototype.clone=function(){var X=new wi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return X.tileSize=this.tileSize,X.latRange=this.latRange,X.width=this.width,X.height=this.height,X._center=this._center,X.zoom=this.zoom,X.angle=this.angle,X._fov=this._fov,X._pitch=this._pitch,X._unmodified=this._unmodified,X._edgeInsets=this._edgeInsets.clone(),X._calcMatrices(),X},ki.minZoom.get=function(){return this._minZoom},ki.minZoom.set=function(ve){this._minZoom!==ve&&(this._minZoom=ve,this.zoom=Math.max(this.zoom,ve))},ki.maxZoom.get=function(){return this._maxZoom},ki.maxZoom.set=function(ve){this._maxZoom!==ve&&(this._maxZoom=ve,this.zoom=Math.min(this.zoom,ve))},ki.minPitch.get=function(){return this._minPitch},ki.minPitch.set=function(ve){this._minPitch!==ve&&(this._minPitch=ve,this.pitch=Math.max(this.pitch,ve))},ki.maxPitch.get=function(){return this._maxPitch},ki.maxPitch.set=function(ve){this._maxPitch!==ve&&(this._maxPitch=ve,this.pitch=Math.min(this.pitch,ve))},ki.renderWorldCopies.get=function(){return this._renderWorldCopies},ki.renderWorldCopies.set=function(ve){ve===void 0?ve=!0:ve===null&&(ve=!1),this._renderWorldCopies=ve},ki.worldSize.get=function(){return this.tileSize*this.scale},ki.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},ki.size.get=function(){return new t.Point(this.width,this.height)},ki.bearing.get=function(){return-this.angle/Math.PI*180},ki.bearing.set=function(ve){var X=-t.wrap(ve,-180,180)*Math.PI/180;this.angle!==X&&(this._unmodified=!1,this.angle=X,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},ki.pitch.get=function(){return this._pitch/Math.PI*180},ki.pitch.set=function(ve){var X=t.clamp(ve,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==X&&(this._unmodified=!1,this._pitch=X,this._calcMatrices())},ki.fov.get=function(){return this._fov/Math.PI*180},ki.fov.set=function(ve){ve=Math.max(.01,Math.min(60,ve)),this._fov!==ve&&(this._unmodified=!1,this._fov=ve/180*Math.PI,this._calcMatrices())},ki.zoom.get=function(){return this._zoom},ki.zoom.set=function(ve){var X=Math.min(Math.max(ve,this.minZoom),this.maxZoom);this._zoom!==X&&(this._unmodified=!1,this._zoom=X,this.scale=this.zoomScale(X),this.tileZoom=Math.floor(X),this.zoomFraction=X-this.tileZoom,this._constrain(),this._calcMatrices())},ki.center.get=function(){return this._center},ki.center.set=function(ve){ve.lat===this._center.lat&&ve.lng===this._center.lng||(this._unmodified=!1,this._center=ve,this._constrain(),this._calcMatrices())},ki.padding.get=function(){return this._edgeInsets.toJSON()},ki.padding.set=function(ve){this._edgeInsets.equals(ve)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,ve,1),this._calcMatrices())},ki.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},wi.prototype.isPaddingEqual=function(X){return this._edgeInsets.equals(X)},wi.prototype.interpolatePadding=function(X,de,q){this._unmodified=!1,this._edgeInsets.interpolate(X,de,q),this._constrain(),this._calcMatrices()},wi.prototype.coveringZoomLevel=function(X){var de=(X.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/X.tileSize));return Math.max(0,de)},wi.prototype.getVisibleUnwrappedCoordinates=function(X){var de=[new t.UnwrappedTileID(0,X)];if(this._renderWorldCopies)for(var q=this.pointCoordinate(new t.Point(0,0)),ge=this.pointCoordinate(new t.Point(this.width,0)),Ce=this.pointCoordinate(new t.Point(this.width,this.height)),Pe=this.pointCoordinate(new t.Point(0,this.height)),Ze=Math.floor(Math.min(q.x,ge.x,Ce.x,Pe.x)),ft=Math.floor(Math.max(q.x,ge.x,Ce.x,Pe.x)),St=1,Ht=Ze-St;Ht<=ft+St;Ht++)Ht!==0&&de.push(new t.UnwrappedTileID(Ht,X));return de},wi.prototype.coveringTiles=function(X){var de=this.coveringZoomLevel(X),q=de;if(X.minzoom!==void 0&&de<X.minzoom)return[];X.maxzoom!==void 0&&de>X.maxzoom&&(de=X.maxzoom);var ge=t.MercatorCoordinate.fromLngLat(this.center),Ce=Math.pow(2,de),Pe=[Ce*ge.x,Ce*ge.y,0],Ze=ji.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,de),ft=X.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ft=de);var St=3,Ht=function(Ia){return{aabb:new yo([Ia*Ce,0,0],[(Ia+1)*Ce,Ce,0]),zoom:0,x:0,y:0,wrap:Ia,fullyVisible:!1}},tr=[],ur=[],Er=de,Wr=X.reparseOverscaled?q:de;if(this._renderWorldCopies)for(var jr=1;jr<=3;jr++)tr.push(Ht(-jr)),tr.push(Ht(jr));for(tr.push(Ht(0));tr.length>0;){var Gr=tr.pop(),qr=Gr.x,dn=Gr.y,Cn=Gr.fullyVisible;if(!Cn){var Vn=Gr.aabb.intersects(Ze);if(Vn===0)continue;Cn=Vn===2}var Qn=Gr.aabb.distanceX(Pe),na=Gr.aabb.distanceY(Pe),ta=Math.max(Math.abs(Qn),Math.abs(na)),ma=St+(1<<Er-Gr.zoom)-2;if(Gr.zoom===Er||ta>ma&&Gr.zoom>=ft){ur.push({tileID:new t.OverscaledTileID(Gr.zoom===Er?Wr:Gr.zoom,Gr.wrap,Gr.zoom,qr,dn),distanceSq:t.sqrLen([Pe[0]-.5-qr,Pe[1]-.5-dn])});continue}for(var Sa=0;Sa<4;Sa++){var Ta=(qr<<1)+Sa%2,Ea=(dn<<1)+(Sa>>1);tr.push({aabb:Gr.aabb.quadrant(Sa),zoom:Gr.zoom+1,x:Ta,y:Ea,wrap:Gr.wrap,fullyVisible:Cn})}}return ur.sort(function(Ia,Ya){return Ia.distanceSq-Ya.distanceSq}).map(function(Ia){return Ia.tileID})},wi.prototype.resize=function(X,de){this.width=X,this.height=de,this.pixelsToGLUnits=[2/X,-2/de],this._constrain(),this._calcMatrices()},ki.unmodified.get=function(){return this._unmodified},wi.prototype.zoomScale=function(X){return Math.pow(2,X)},wi.prototype.scaleZoom=function(X){return Math.log(X)/Math.LN2},wi.prototype.project=function(X){var de=t.clamp(X.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(X.lng)*this.worldSize,t.mercatorYfromLat(de)*this.worldSize)},wi.prototype.unproject=function(X){return new t.MercatorCoordinate(X.x/this.worldSize,X.y/this.worldSize).toLngLat()},ki.point.get=function(){return this.project(this.center)},wi.prototype.setLocationAtPoint=function(X,de){var q=this.pointCoordinate(de),ge=this.pointCoordinate(this.centerPoint),Ce=this.locationCoordinate(X),Pe=new t.MercatorCoordinate(Ce.x-(q.x-ge.x),Ce.y-(q.y-ge.y));this.center=this.coordinateLocation(Pe),this._renderWorldCopies&&(this.center=this.center.wrap())},wi.prototype.locationPoint=function(X){return this.coordinatePoint(this.locationCoordinate(X))},wi.prototype.pointLocation=function(X){return this.coordinateLocation(this.pointCoordinate(X))},wi.prototype.locationCoordinate=function(X){return t.MercatorCoordinate.fromLngLat(X)},wi.prototype.coordinateLocation=function(X){return X.toLngLat()},wi.prototype.pointCoordinate=function(X){var de=0,q=[X.x,X.y,0,1],ge=[X.x,X.y,1,1];t.transformMat4(q,q,this.pixelMatrixInverse),t.transformMat4(ge,ge,this.pixelMatrixInverse);var Ce=q[3],Pe=ge[3],Ze=q[0]/Ce,ft=ge[0]/Pe,St=q[1]/Ce,Ht=ge[1]/Pe,tr=q[2]/Ce,ur=ge[2]/Pe,Er=tr===ur?0:(de-tr)/(ur-tr);return new t.MercatorCoordinate(t.number(Ze,ft,Er)/this.worldSize,t.number(St,Ht,Er)/this.worldSize)},wi.prototype.coordinatePoint=function(X){var de=[X.x*this.worldSize,X.y*this.worldSize,0,1];return t.transformMat4(de,de,this.pixelMatrix),new t.Point(de[0]/de[3],de[1]/de[3])},wi.prototype.getBounds=function(){return new t.LngLatBounds().extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},wi.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},wi.prototype.setMaxBounds=function(X){X?(this.lngRange=[X.getWest(),X.getEast()],this.latRange=[X.getSouth(),X.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},wi.prototype.calculatePosMatrix=function(X,de){de===void 0&&(de=!1);var q=X.key,ge=de?this._alignedPosMatrixCache:this._posMatrixCache;if(ge[q])return ge[q];var Ce=X.canonical,Pe=this.worldSize/this.zoomScale(Ce.z),Ze=Ce.x+Math.pow(2,Ce.z)*X.wrap,ft=t.identity(new Float64Array(16));return t.translate(ft,ft,[Ze*Pe,Ce.y*Pe,0]),t.scale(ft,ft,[Pe/t.EXTENT,Pe/t.EXTENT,1]),t.multiply(ft,de?this.alignedProjMatrix:this.projMatrix,ft),ge[q]=new Float32Array(ft),ge[q]},wi.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},wi.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var X=-90,de=90,q=-180,ge=180,Ce,Pe,Ze,ft,St=this.size,Ht=this._unmodified;if(this.latRange){var tr=this.latRange;X=t.mercatorYfromLat(tr[1])*this.worldSize,de=t.mercatorYfromLat(tr[0])*this.worldSize,Ce=de-X<St.y?St.y/(de-X):0}if(this.lngRange){var ur=this.lngRange;q=t.mercatorXfromLng(ur[0])*this.worldSize,ge=t.mercatorXfromLng(ur[1])*this.worldSize,Pe=ge-q<St.x?St.x/(ge-q):0}var Er=this.point,Wr=Math.max(Pe||0,Ce||0);if(Wr){this.center=this.unproject(new t.Point(Pe?(ge+q)/2:Er.x,Ce?(de+X)/2:Er.y)),this.zoom+=this.scaleZoom(Wr),this._unmodified=Ht,this._constraining=!1;return}if(this.latRange){var jr=Er.y,Gr=St.y/2;jr-Gr<X&&(ft=X+Gr),jr+Gr>de&&(ft=de-Gr)}if(this.lngRange){var qr=Er.x,dn=St.x/2;qr-dn<q&&(Ze=q+dn),qr+dn>ge&&(Ze=ge-dn)}(Ze!==void 0||ft!==void 0)&&(this.center=this.unproject(new t.Point(Ze!==void 0?Ze:Er.x,ft!==void 0?ft:Er.y))),this._unmodified=Ht,this._constraining=!1}},wi.prototype._calcMatrices=function(){if(!!this.height){var X=this._fov/2,de=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(X)*this.height;var q=Math.PI/2+this._pitch,ge=this._fov*(.5+de.y/this.height),Ce=Math.sin(ge)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-q-ge,.01,Math.PI-.01)),Pe=this.point,Ze=Pe.x,ft=Pe.y,St=Math.cos(Math.PI/2-this._pitch)*Ce+this.cameraToCenterDistance,Ht=St*1.01,tr=this.height/50,ur=new Float64Array(16);t.perspective(ur,this._fov,this.width/this.height,tr,Ht),ur[8]=-de.x*2/this.width,ur[9]=de.y*2/this.height,t.scale(ur,ur,[1,-1,1]),t.translate(ur,ur,[0,0,-this.cameraToCenterDistance]),t.rotateX(ur,ur,this._pitch),t.rotateZ(ur,ur,this.angle),t.translate(ur,ur,[-Ze,-ft,0]),this.mercatorMatrix=t.scale([],ur,[this.worldSize,this.worldSize,this.worldSize]),t.scale(ur,ur,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=ur,this.invProjMatrix=t.invert([],this.projMatrix);var Er=this.width%2/2,Wr=this.height%2/2,jr=Math.cos(this.angle),Gr=Math.sin(this.angle),qr=Ze-Math.round(Ze)+jr*Er+Gr*Wr,dn=ft-Math.round(ft)+jr*Wr+Gr*Er,Cn=new Float64Array(ur);if(t.translate(Cn,Cn,[qr>.5?qr-1:qr,dn>.5?dn-1:dn,0]),this.alignedProjMatrix=Cn,ur=t.create(),t.scale(ur,ur,[this.width/2,-this.height/2,1]),t.translate(ur,ur,[1,-1,0]),this.labelPlaneMatrix=ur,ur=t.create(),t.scale(ur,ur,[1,-1,1]),t.translate(ur,ur,[-1,-1,0]),t.scale(ur,ur,[2/this.width,2/this.height,1]),this.glCoordMatrix=ur,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),ur=t.invert(new Float64Array(16),this.pixelMatrix),!ur)throw new Error("failed to invert matrix");this.pixelMatrixInverse=ur,this._posMatrixCache={},this._alignedPosMatrixCache={}}},wi.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var X=this.pointCoordinate(new t.Point(0,0)),de=[X.x*this.worldSize,X.y*this.worldSize,0,1],q=t.transformMat4(de,de,this.pixelMatrix);return q[3]/this.cameraToCenterDistance},wi.prototype.getCameraPoint=function(){var X=this._pitch,de=Math.tan(X)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,de))},wi.prototype.getCameraQueryGeometry=function(X){var de=this.getCameraPoint();if(X.length===1)return[X[0],de];for(var q=de.x,ge=de.y,Ce=de.x,Pe=de.y,Ze=0,ft=X;Ze<ft.length;Ze+=1){var St=ft[Ze];q=Math.min(q,St.x),ge=Math.min(ge,St.y),Ce=Math.max(Ce,St.x),Pe=Math.max(Pe,St.y)}return[new t.Point(q,ge),new t.Point(Ce,ge),new t.Point(Ce,Pe),new t.Point(q,Pe),new t.Point(q,ge)]},Object.defineProperties(wi.prototype,ki);function Cs(ve,X){var de=!1,q=null,ge=function(){q=null,de&&(ve(),q=setTimeout(ge,X),de=!1)};return function(){return de=!0,q||ge(),q}}var ko=function(X){this._hashName=X&&encodeURIComponent(X),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Cs(this._updateHashUnthrottled.bind(this),30*1e3/100)};ko.prototype.addTo=function(X){return this._map=X,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ko.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ko.prototype.getHashString=function(X){var de=this._map.getCenter(),q=Math.round(this._map.getZoom()*100)/100,ge=Math.ceil((q*Math.LN2+Math.log(512/360/.5))/Math.LN10),Ce=Math.pow(10,ge),Pe=Math.round(de.lng*Ce)/Ce,Ze=Math.round(de.lat*Ce)/Ce,ft=this._map.getBearing(),St=this._map.getPitch(),Ht="";if(X?Ht+="/"+Pe+"/"+Ze+"/"+q:Ht+=q+"/"+Ze+"/"+Pe,(ft||St)&&(Ht+="/"+Math.round(ft*10)/10),St&&(Ht+="/"+Math.round(St)),this._hashName){var tr=this._hashName,ur=!1,Er=t.window.location.hash.slice(1).split("&").map(function(Wr){var jr=Wr.split("=")[0];return jr===tr?(ur=!0,jr+"="+Ht):Wr}).filter(function(Wr){return Wr});return ur||Er.push(tr+"="+Ht),"#"+Er.join("&")}return"#"+Ht},ko.prototype._getCurrentHash=function(){var X=this,de=t.window.location.hash.replace("#","");if(this._hashName){var q;return de.split("&").map(function(ge){return ge.split("=")}).forEach(function(ge){ge[0]===X._hashName&&(q=ge)}),(q&&q[1]||"").split("/")}return de.split("/")},ko.prototype._onHashChange=function(){var X=this._getCurrentHash();if(X.length>=3&&!X.some(function(q){return isNaN(q)})){var de=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(X[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+X[2],+X[1]],zoom:+X[0],bearing:de,pitch:+(X[4]||0)}),!0}return!1},ko.prototype._updateHashUnthrottled=function(){var X=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",X)}catch{}};var Yo={linearity:.3,easing:t.bezier(0,0,.3,1)},is=t.extend({deceleration:2500,maxSpeed:1400},Yo),he=t.extend({deceleration:20,maxSpeed:1400},Yo),Te=t.extend({deceleration:1e3,maxSpeed:360},Yo),Le=t.extend({deceleration:1e3,maxSpeed:90},Yo),Ue=function(X){this._map=X,this.clear()};Ue.prototype.clear=function(){this._inertiaBuffer=[]},Ue.prototype.record=function(X){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:X})},Ue.prototype._drainInertiaBuffer=function(){for(var X=this._inertiaBuffer,de=t.browser.now(),q=160;X.length>0&&de-X[0].time>q;)X.shift()},Ue.prototype._onMoveEnd=function(X){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var de={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},q=0,ge=this._inertiaBuffer;q<ge.length;q+=1){var Ce=ge[q],Pe=Ce.settings;de.zoom+=Pe.zoomDelta||0,de.bearing+=Pe.bearingDelta||0,de.pitch+=Pe.pitchDelta||0,Pe.panDelta&&de.pan._add(Pe.panDelta),Pe.around&&(de.around=Pe.around),Pe.pinchAround&&(de.pinchAround=Pe.pinchAround)}var Ze=this._inertiaBuffer[this._inertiaBuffer.length-1],ft=Ze.time-this._inertiaBuffer[0].time,St={};if(de.pan.mag()){var Ht=Ke(de.pan.mag(),ft,t.extend({},is,X||{}));St.offset=de.pan.mult(Ht.amount/de.pan.mag()),St.center=this._map.transform.center,Be(St,Ht)}if(de.zoom){var tr=Ke(de.zoom,ft,he);St.zoom=this._map.transform.zoom+tr.amount,Be(St,tr)}if(de.bearing){var ur=Ke(de.bearing,ft,Te);St.bearing=this._map.transform.bearing+t.clamp(ur.amount,-179,179),Be(St,ur)}if(de.pitch){var Er=Ke(de.pitch,ft,Le);St.pitch=this._map.transform.pitch+Er.amount,Be(St,Er)}if(St.zoom||St.bearing){var Wr=de.pinchAround===void 0?de.around:de.pinchAround;St.around=Wr?this._map.unproject(Wr):this._map.getCenter()}return this.clear(),t.extend(St,{noMoveStart:!0})}};function Be(ve,X){(!ve.duration||ve.duration<X.duration)&&(ve.duration=X.duration,ve.easing=X.easing)}function Ke(ve,X,de){var q=de.maxSpeed,ge=de.linearity,Ce=de.deceleration,Pe=t.clamp(ve*ge/(X/1e3),-q,q),Ze=Math.abs(Pe)/(Ce*ge);return{easing:de.easing,duration:Ze*1e3,amount:Pe*(Ze/2)}}var yt=function(ve){function X(q,ge,Ce,Pe){Pe===void 0&&(Pe={});var Ze=a.mousePos(ge.getCanvasContainer(),Ce),ft=ge.unproject(Ze);ve.call(this,q,t.extend({point:Ze,lngLat:ft,originalEvent:Ce},Pe)),this._defaultPrevented=!1,this.target=ge}ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X;var de={defaultPrevented:{configurable:!0}};return X.prototype.preventDefault=function(){this._defaultPrevented=!0},de.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(X.prototype,de),X}(t.Event),vt=function(ve){function X(q,ge,Ce){var Pe=q==="touchend"?Ce.changedTouches:Ce.touches,Ze=a.touchPos(ge.getCanvasContainer(),Pe),ft=Ze.map(function(tr){return ge.unproject(tr)}),St=Ze.reduce(function(tr,ur,Er,Wr){return tr.add(ur.div(Wr.length))},new t.Point(0,0)),Ht=ge.unproject(St);ve.call(this,q,{points:Ze,point:St,lngLats:ft,lngLat:Ht,originalEvent:Ce}),this._defaultPrevented=!1}ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X;var de={defaultPrevented:{configurable:!0}};return X.prototype.preventDefault=function(){this._defaultPrevented=!0},de.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(X.prototype,de),X}(t.Event),Lt=function(ve){function X(q,ge,Ce){ve.call(this,q,{originalEvent:Ce}),this._defaultPrevented=!1}ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X;var de={defaultPrevented:{configurable:!0}};return X.prototype.preventDefault=function(){this._defaultPrevented=!0},de.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(X.prototype,de),X}(t.Event),Vt=function(X,de){this._map=X,this._clickTolerance=de.clickTolerance};Vt.prototype.reset=function(){delete this._mousedownPos},Vt.prototype.wheel=function(X){return this._firePreventable(new Lt(X.type,this._map,X))},Vt.prototype.mousedown=function(X,de){return this._mousedownPos=de,this._firePreventable(new yt(X.type,this._map,X))},Vt.prototype.mouseup=function(X){this._map.fire(new yt(X.type,this._map,X))},Vt.prototype.click=function(X,de){this._mousedownPos&&this._mousedownPos.dist(de)>=this._clickTolerance||this._map.fire(new yt(X.type,this._map,X))},Vt.prototype.dblclick=function(X){return this._firePreventable(new yt(X.type,this._map,X))},Vt.prototype.mouseover=function(X){this._map.fire(new yt(X.type,this._map,X))},Vt.prototype.mouseout=function(X){this._map.fire(new yt(X.type,this._map,X))},Vt.prototype.touchstart=function(X){return this._firePreventable(new vt(X.type,this._map,X))},Vt.prototype.touchmove=function(X){this._map.fire(new vt(X.type,this._map,X))},Vt.prototype.touchend=function(X){this._map.fire(new vt(X.type,this._map,X))},Vt.prototype.touchcancel=function(X){this._map.fire(new vt(X.type,this._map,X))},Vt.prototype._firePreventable=function(X){if(this._map.fire(X),X.defaultPrevented)return{}},Vt.prototype.isEnabled=function(){return!0},Vt.prototype.isActive=function(){return!1},Vt.prototype.enable=function(){},Vt.prototype.disable=function(){};var jt=function(X){this._map=X};jt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},jt.prototype.mousemove=function(X){this._map.fire(new yt(X.type,this._map,X))},jt.prototype.mousedown=function(){this._delayContextMenu=!0},jt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new yt("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},jt.prototype.contextmenu=function(X){this._delayContextMenu?this._contextMenuEvent=X:this._map.fire(new yt(X.type,this._map,X)),this._map.listens("contextmenu")&&X.preventDefault()},jt.prototype.isEnabled=function(){return!0},jt.prototype.isActive=function(){return!1},jt.prototype.enable=function(){},jt.prototype.disable=function(){};var Zt=function(X,de){this._map=X,this._el=X.getCanvasContainer(),this._container=X.getContainer(),this._clickTolerance=de.clickTolerance||1};Zt.prototype.isEnabled=function(){return!!this._enabled},Zt.prototype.isActive=function(){return!!this._active},Zt.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Zt.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},Zt.prototype.mousedown=function(X,de){!this.isEnabled()||!(X.shiftKey&&X.button===0)||(a.disableDrag(),this._startPos=this._lastPos=de,this._active=!0)},Zt.prototype.mousemoveWindow=function(X,de){if(!!this._active){var q=de;if(!(this._lastPos.equals(q)||!this._box&&q.dist(this._startPos)<this._clickTolerance)){var ge=this._startPos;this._lastPos=q,this._box||(this._box=a.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",X));var Ce=Math.min(ge.x,q.x),Pe=Math.max(ge.x,q.x),Ze=Math.min(ge.y,q.y),ft=Math.max(ge.y,q.y);a.setTransform(this._box,"translate("+Ce+"px,"+Ze+"px)"),this._box.style.width=Pe-Ce+"px",this._box.style.height=ft-Ze+"px"}}},Zt.prototype.mouseupWindow=function(X,de){var q=this;if(!!this._active&&X.button===0){var ge=this._startPos,Ce=de;if(this.reset(),a.suppressClick(),ge.x===Ce.x&&ge.y===Ce.y)this._fireEvent("boxzoomcancel",X);else return this._map.fire(new t.Event("boxzoomend",{originalEvent:X})),{cameraAnimation:function(Pe){return Pe.fitScreenCoordinates(ge,Ce,q._map.getBearing(),{linear:!0})}}}},Zt.prototype.keydown=function(X){!this._active||X.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",X))},Zt.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(a.remove(this._box),this._box=null),a.enableDrag(),delete this._startPos,delete this._lastPos},Zt.prototype._fireEvent=function(X,de){return this._map.fire(new t.Event(X,{originalEvent:de}))};function Ar(ve,X){for(var de={},q=0;q<ve.length;q++)de[ve[q].identifier]=X[q];return de}function tn(ve){for(var X=new t.Point(0,0),de=0,q=ve;de<q.length;de+=1){var ge=q[de];X._add(ge)}return X.div(ve.length)}var pn=500,Cr=500,Yr=30,Jr=function(X){this.reset(),this.numTouches=X.numTouches};Jr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Jr.prototype.touchstart=function(X,de,q){(this.centroid||q.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=X.timeStamp),q.length===this.numTouches&&(this.centroid=tn(de),this.touches=Ar(q,de)))},Jr.prototype.touchmove=function(X,de,q){if(!(this.aborted||!this.centroid)){var ge=Ar(q,de);for(var Ce in this.touches){var Pe=this.touches[Ce],Ze=ge[Ce];(!Ze||Ze.dist(Pe)>Yr)&&(this.aborted=!0)}}},Jr.prototype.touchend=function(X,de,q){if((!this.centroid||X.timeStamp-this.startTime>Cr)&&(this.aborted=!0),q.length===0){var ge=!this.aborted&&this.centroid;if(this.reset(),ge)return ge}};var fn=function(X){this.singleTap=new Jr(X),this.numTaps=X.numTaps,this.reset()};fn.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},fn.prototype.touchstart=function(X,de,q){this.singleTap.touchstart(X,de,q)},fn.prototype.touchmove=function(X,de,q){this.singleTap.touchmove(X,de,q)},fn.prototype.touchend=function(X,de,q){var ge=this.singleTap.touchend(X,de,q);if(ge){var Ce=X.timeStamp-this.lastTime<pn,Pe=!this.lastTap||this.lastTap.dist(ge)<Yr;if((!Ce||!Pe)&&this.reset(),this.count++,this.lastTime=X.timeStamp,this.lastTap=ge,this.count===this.numTaps)return this.reset(),ge}};var vn=function(){this._zoomIn=new fn({numTouches:1,numTaps:2}),this._zoomOut=new fn({numTouches:2,numTaps:1}),this.reset()};vn.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},vn.prototype.touchstart=function(X,de,q){this._zoomIn.touchstart(X,de,q),this._zoomOut.touchstart(X,de,q)},vn.prototype.touchmove=function(X,de,q){this._zoomIn.touchmove(X,de,q),this._zoomOut.touchmove(X,de,q)},vn.prototype.touchend=function(X,de,q){var ge=this,Ce=this._zoomIn.touchend(X,de,q),Pe=this._zoomOut.touchend(X,de,q);if(Ce)return this._active=!0,X.preventDefault(),setTimeout(function(){return ge.reset()},0),{cameraAnimation:function(Ze){return Ze.easeTo({duration:300,zoom:Ze.getZoom()+1,around:Ze.unproject(Ce)},{originalEvent:X})}};if(Pe)return this._active=!0,X.preventDefault(),setTimeout(function(){return ge.reset()},0),{cameraAnimation:function(Ze){return Ze.easeTo({duration:300,zoom:Ze.getZoom()-1,around:Ze.unproject(Pe)},{originalEvent:X})}}},vn.prototype.touchcancel=function(){this.reset()},vn.prototype.enable=function(){this._enabled=!0},vn.prototype.disable=function(){this._enabled=!1,this.reset()},vn.prototype.isEnabled=function(){return this._enabled},vn.prototype.isActive=function(){return this._active};var Qr=0,jn=2,ia=function(X){this.reset(),this._clickTolerance=X.clickTolerance||1};ia.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ia.prototype._correctButton=function(X,de){return!1},ia.prototype._move=function(X,de){return{}},ia.prototype.mousedown=function(X,de){if(!this._lastPoint){var q=a.mouseButton(X);!this._correctButton(X,q)||(this._lastPoint=de,this._eventButton=q)}},ia.prototype.mousemoveWindow=function(X,de){var q=this._lastPoint;if(!!q&&(X.preventDefault(),!(!this._moved&&de.dist(q)<this._clickTolerance)))return this._moved=!0,this._lastPoint=de,this._move(q,de)},ia.prototype.mouseupWindow=function(X){var de=a.mouseButton(X);de===this._eventButton&&(this._moved&&a.suppressClick(),this.reset())},ia.prototype.enable=function(){this._enabled=!0},ia.prototype.disable=function(){this._enabled=!1,this.reset()},ia.prototype.isEnabled=function(){return this._enabled},ia.prototype.isActive=function(){return this._active};var Ma=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.mousedown=function(q,ge){ve.prototype.mousedown.call(this,q,ge),this._lastPoint&&(this._active=!0)},X.prototype._correctButton=function(q,ge){return ge===Qr&&!q.ctrlKey},X.prototype._move=function(q,ge){return{around:ge,panDelta:ge.sub(q)}},X}(ia),ua=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype._correctButton=function(q,ge){return ge===Qr&&q.ctrlKey||ge===jn},X.prototype._move=function(q,ge){var Ce=.8,Pe=(ge.x-q.x)*Ce;if(Pe)return this._active=!0,{bearingDelta:Pe}},X.prototype.contextmenu=function(q){q.preventDefault()},X}(ia),Ra=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype._correctButton=function(q,ge){return ge===Qr&&q.ctrlKey||ge===jn},X.prototype._move=function(q,ge){var Ce=-.5,Pe=(ge.y-q.y)*Ce;if(Pe)return this._active=!0,{pitchDelta:Pe}},X.prototype.contextmenu=function(q){q.preventDefault()},X}(ia),va=function(X){this._minTouches=1,this._clickTolerance=X.clickTolerance||1,this.reset()};va.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},va.prototype.touchstart=function(X,de,q){return this._calculateTransform(X,de,q)},va.prototype.touchmove=function(X,de,q){if(!!this._active)return X.preventDefault(),this._calculateTransform(X,de,q)},va.prototype.touchend=function(X,de,q){this._calculateTransform(X,de,q),this._active&&q.length<this._minTouches&&this.reset()},va.prototype.touchcancel=function(){this.reset()},va.prototype._calculateTransform=function(X,de,q){q.length>0&&(this._active=!0);var ge=Ar(q,de),Ce=new t.Point(0,0),Pe=new t.Point(0,0),Ze=0;for(var ft in ge){var St=ge[ft],Ht=this._touches[ft];Ht&&(Ce._add(St),Pe._add(St.sub(Ht)),Ze++,ge[ft]=St)}if(this._touches=ge,!(Ze<this._minTouches||!Pe.mag())){var tr=Pe.div(Ze);if(this._sum._add(tr),!(this._sum.mag()<this._clickTolerance)){var ur=Ce.div(Ze);return{around:ur,panDelta:tr}}}},va.prototype.enable=function(){this._enabled=!0},va.prototype.disable=function(){this._enabled=!1,this.reset()},va.prototype.isEnabled=function(){return this._enabled},va.prototype.isActive=function(){return this._active};var Wa=function(){this.reset()};Wa.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Wa.prototype._start=function(X){},Wa.prototype._move=function(X,de,q){return{}},Wa.prototype.touchstart=function(X,de,q){this._firstTwoTouches||q.length<2||(this._firstTwoTouches=[q[0].identifier,q[1].identifier],this._start([de[0],de[1]]))},Wa.prototype.touchmove=function(X,de,q){if(!!this._firstTwoTouches){X.preventDefault();var ge=this._firstTwoTouches,Ce=ge[0],Pe=ge[1],Ze=za(q,de,Ce),ft=za(q,de,Pe);if(!(!Ze||!ft)){var St=this._aroundCenter?null:Ze.add(ft).div(2);return this._move([Ze,ft],St,X)}}},Wa.prototype.touchend=function(X,de,q){if(!!this._firstTwoTouches){var ge=this._firstTwoTouches,Ce=ge[0],Pe=ge[1],Ze=za(q,de,Ce),ft=za(q,de,Pe);Ze&&ft||(this._active&&a.suppressClick(),this.reset())}},Wa.prototype.touchcancel=function(){this.reset()},Wa.prototype.enable=function(X){this._enabled=!0,this._aroundCenter=!!X&&X.around==="center"},Wa.prototype.disable=function(){this._enabled=!1,this.reset()},Wa.prototype.isEnabled=function(){return this._enabled},Wa.prototype.isActive=function(){return this._active};function za(ve,X,de){for(var q=0;q<ve.length;q++)if(ve[q].identifier===de)return X[q]}var ei=.1;function xi(ve,X){return Math.log(ve/X)/Math.LN2}var xo=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.reset=function(){ve.prototype.reset.call(this),delete this._distance,delete this._startDistance},X.prototype._start=function(q){this._startDistance=this._distance=q[0].dist(q[1])},X.prototype._move=function(q,ge){var Ce=this._distance;if(this._distance=q[0].dist(q[1]),!(!this._active&&Math.abs(xi(this._distance,this._startDistance))<ei))return this._active=!0,{zoomDelta:xi(this._distance,Ce),pinchAround:ge}},X}(Wa),Bi=25;function ga(ve,X){return ve.angleWith(X)*180/Math.PI}var oi=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.reset=function(){ve.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},X.prototype._start=function(q){this._startVector=this._vector=q[0].sub(q[1]),this._minDiameter=q[0].dist(q[1])},X.prototype._move=function(q,ge){var Ce=this._vector;if(this._vector=q[0].sub(q[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:ga(this._vector,Ce),pinchAround:ge}},X.prototype._isBelowThreshold=function(q){this._minDiameter=Math.min(this._minDiameter,q.mag());var ge=Math.PI*this._minDiameter,Ce=Bi/ge*360,Pe=ga(q,this._startVector);return Math.abs(Pe)<Ce},X}(Wa);function Ka(ve){return Math.abs(ve.y)>Math.abs(ve.x)}var Ci=100,ui=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.reset=function(){ve.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},X.prototype._start=function(q){this._lastPoints=q,Ka(q[0].sub(q[1]))&&(this._valid=!1)},X.prototype._move=function(q,ge,Ce){var Pe=q[0].sub(this._lastPoints[0]),Ze=q[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Pe,Ze,Ce.timeStamp),!!this._valid){this._lastPoints=q,this._active=!0;var ft=(Pe.y+Ze.y)/2,St=-.5;return{pitchDelta:ft*St}}},X.prototype.gestureBeginsVertically=function(q,ge,Ce){if(this._valid!==void 0)return this._valid;var Pe=2,Ze=q.mag()>=Pe,ft=ge.mag()>=Pe;if(!(!Ze&&!ft)){if(!Ze||!ft)return this._firstMove===void 0&&(this._firstMove=Ce),Ce-this._firstMove<Ci?void 0:!1;var St=q.y>0==ge.y>0;return Ka(q)&&Ka(ge)&&St}},X}(Wa),vo={panStep:100,bearingStep:15,pitchStep:10},to=function(){var X=vo;this._panStep=X.panStep,this._bearingStep=X.bearingStep,this._pitchStep=X.pitchStep};to.prototype.reset=function(){this._active=!1},to.prototype.keydown=function(X){var de=this;if(!(X.altKey||X.ctrlKey||X.metaKey)){var q=0,ge=0,Ce=0,Pe=0,Ze=0;switch(X.keyCode){case 61:case 107:case 171:case 187:q=1;break;case 189:case 109:case 173:q=-1;break;case 37:X.shiftKey?ge=-1:(X.preventDefault(),Pe=-1);break;case 39:X.shiftKey?ge=1:(X.preventDefault(),Pe=1);break;case 38:X.shiftKey?Ce=1:(X.preventDefault(),Ze=-1);break;case 40:X.shiftKey?Ce=-1:(X.preventDefault(),Ze=1);break;default:return}return{cameraAnimation:function(ft){var St=ft.getZoom();ft.easeTo({duration:300,easeId:"keyboardHandler",easing:Co,zoom:q?Math.round(St)+q*(X.shiftKey?2:1):St,bearing:ft.getBearing()+ge*de._bearingStep,pitch:ft.getPitch()+Ce*de._pitchStep,offset:[-Pe*de._panStep,-Ze*de._panStep],center:ft.getCenter()},{originalEvent:X})}}}},to.prototype.enable=function(){this._enabled=!0},to.prototype.disable=function(){this._enabled=!1,this.reset()},to.prototype.isEnabled=function(){return this._enabled},to.prototype.isActive=function(){return this._active};function Co(ve){return ve*(2-ve)}var os=4.000244140625,Qo=1/100,ss=1/450,Xi=2,Hi=function(X,de){this._map=X,this._el=X.getCanvasContainer(),this._handler=de,this._delta=0,this._defaultZoomRate=Qo,this._wheelZoomRate=ss,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Hi.prototype.setZoomRate=function(X){this._defaultZoomRate=X},Hi.prototype.setWheelZoomRate=function(X){this._wheelZoomRate=X},Hi.prototype.isEnabled=function(){return!!this._enabled},Hi.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Hi.prototype.isZooming=function(){return!!this._zooming},Hi.prototype.enable=function(X){this.isEnabled()||(this._enabled=!0,this._aroundCenter=X&&X.around==="center")},Hi.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},Hi.prototype.wheel=function(X){if(!!this.isEnabled()){var de=X.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?X.deltaY*40:X.deltaY,q=t.browser.now(),ge=q-(this._lastWheelEventTime||0);this._lastWheelEventTime=q,de!==0&&de%os==0?this._type="wheel":de!==0&&Math.abs(de)<4?this._type="trackpad":ge>400?(this._type=null,this._lastValue=de,this._timeout=setTimeout(this._onTimeout,40,X)):this._type||(this._type=Math.abs(ge*de)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,de+=this._lastValue)),X.shiftKey&&de&&(de=de/4),this._type&&(this._lastWheelEvent=X,this._delta-=de,this._active||this._start(X)),X.preventDefault()}},Hi.prototype._onTimeout=function(X){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(X)},Hi.prototype._start=function(X){if(!!this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var de=a.mousePos(this._el,X);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(de)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Hi.prototype.renderFrame=function(){return this._onScrollFrame()},Hi.prototype._onScrollFrame=function(){var X=this;if(!!this._frameId&&(this._frameId=null,!!this.isActive())){var de=this._map.transform;if(this._delta!==0){var q=this._type==="wheel"&&Math.abs(this._delta)>os?this._wheelZoomRate:this._defaultZoomRate,ge=Xi/(1+Math.exp(-Math.abs(this._delta*q)));this._delta<0&&ge!==0&&(ge=1/ge);var Ce=typeof this._targetZoom=="number"?de.zoomScale(this._targetZoom):de.scale;this._targetZoom=Math.min(de.maxZoom,Math.max(de.minZoom,de.scaleZoom(Ce*ge))),this._type==="wheel"&&(this._startZoom=de.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Pe=typeof this._targetZoom=="number"?this._targetZoom:de.zoom,Ze=this._startZoom,ft=this._easing,St=!1,Ht;if(this._type==="wheel"&&Ze&&ft){var tr=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),ur=ft(tr);Ht=t.number(Ze,Pe,ur),tr<1?this._frameId||(this._frameId=!0):St=!0}else Ht=Pe,St=!0;return this._active=!0,St&&(this._active=!1,this._finishTimeout=setTimeout(function(){X._zooming=!1,X._handler._triggerRenderFrame(),delete X._targetZoom,delete X._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!St,zoomDelta:Ht-de.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Hi.prototype._smoothOutEasing=function(X){var de=t.ease;if(this._prevEase){var q=this._prevEase,ge=(t.browser.now()-q.start)/q.duration,Ce=q.easing(ge+.01)-q.easing(ge),Pe=.27/Math.sqrt(Ce*Ce+1e-4)*.01,Ze=Math.sqrt(.27*.27-Pe*Pe);de=t.bezier(Pe,Ze,.25,1)}return this._prevEase={start:t.browser.now(),duration:X,easing:de},de},Hi.prototype.reset=function(){this._active=!1};var Na=function(X,de){this._clickZoom=X,this._tapZoom=de};Na.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Na.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Na.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Na.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Ja=function(){this.reset()};Ja.prototype.reset=function(){this._active=!1},Ja.prototype.dblclick=function(X,de){return X.preventDefault(),{cameraAnimation:function(q){q.easeTo({duration:300,zoom:q.getZoom()+(X.shiftKey?-1:1),around:q.unproject(de)},{originalEvent:X})}}},Ja.prototype.enable=function(){this._enabled=!0},Ja.prototype.disable=function(){this._enabled=!1,this.reset()},Ja.prototype.isEnabled=function(){return this._enabled},Ja.prototype.isActive=function(){return this._active};var Ro=function(){this._tap=new fn({numTouches:1,numTaps:1}),this.reset()};Ro.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Ro.prototype.touchstart=function(X,de,q){this._swipePoint||(this._tapTime&&X.timeStamp-this._tapTime>pn&&this.reset(),this._tapTime?q.length>0&&(this._swipePoint=de[0],this._swipeTouch=q[0].identifier):this._tap.touchstart(X,de,q))},Ro.prototype.touchmove=function(X,de,q){if(!this._tapTime)this._tap.touchmove(X,de,q);else if(this._swipePoint){if(q[0].identifier!==this._swipeTouch)return;var ge=de[0],Ce=ge.y-this._swipePoint.y;return this._swipePoint=ge,X.preventDefault(),this._active=!0,{zoomDelta:Ce/128}}},Ro.prototype.touchend=function(X,de,q){if(this._tapTime)this._swipePoint&&q.length===0&&this.reset();else{var ge=this._tap.touchend(X,de,q);ge&&(this._tapTime=X.timeStamp)}},Ro.prototype.touchcancel=function(){this.reset()},Ro.prototype.enable=function(){this._enabled=!0},Ro.prototype.disable=function(){this._enabled=!1,this.reset()},Ro.prototype.isEnabled=function(){return this._enabled},Ro.prototype.isActive=function(){return this._active};var io=function(X,de,q){this._el=X,this._mousePan=de,this._touchPan=q};io.prototype.enable=function(X){this._inertiaOptions=X||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},io.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},io.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},io.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var jo=function(X,de,q){this._pitchWithRotate=X.pitchWithRotate,this._mouseRotate=de,this._mousePitch=q};jo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},jo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},jo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},jo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ji=function(X,de,q,ge){this._el=X,this._touchZoom=de,this._touchRotate=q,this._tapDragZoom=ge,this._rotationDisabled=!1,this._enabled=!0};Ji.prototype.enable=function(X){this._touchZoom.enable(X),this._rotationDisabled||this._touchRotate.enable(X),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ji.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ji.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ji.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ji.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ji.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var ls=function(ve){return ve.zoom||ve.drag||ve.pitch||ve.rotate},Bs=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X}(t.Event);function ku(ve){return ve.panDelta&&ve.panDelta.mag()||ve.zoomDelta||ve.bearingDelta||ve.pitchDelta}var $i=function(X,de){this._map=X,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ue(X),this._bearingSnap=de.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(de),t.bindAll(["handleEvent","handleWindowEvent"],this);var q=this._el;this._listeners=[[q,"touchstart",{passive:!1}],[q,"touchmove",{passive:!1}],[q,"touchend",void 0],[q,"touchcancel",void 0],[q,"mousedown",void 0],[q,"mousemove",void 0],[q,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[q,"mouseover",void 0],[q,"mouseout",void 0],[q,"dblclick",void 0],[q,"click",void 0],[q,"keydown",{capture:!1}],[q,"keyup",void 0],[q,"wheel",{passive:!1}],[q,"contextmenu",void 0],[t.window,"blur",void 0]];for(var ge=0,Ce=this._listeners;ge<Ce.length;ge+=1){var Pe=Ce[ge],Ze=Pe[0],ft=Pe[1],St=Pe[2];a.addEventListener(Ze,ft,Ze===t.window.document?this.handleWindowEvent:this.handleEvent,St)}};$i.prototype.destroy=function(){for(var X=0,de=this._listeners;X<de.length;X+=1){var q=de[X],ge=q[0],Ce=q[1],Pe=q[2];a.removeEventListener(ge,Ce,ge===t.window.document?this.handleWindowEvent:this.handleEvent,Pe)}},$i.prototype._addDefaultHandlers=function(X){var de=this._map,q=de.getCanvasContainer();this._add("mapEvent",new Vt(de,X));var ge=de.boxZoom=new Zt(de,X);this._add("boxZoom",ge);var Ce=new vn,Pe=new Ja;de.doubleClickZoom=new Na(Pe,Ce),this._add("tapZoom",Ce),this._add("clickZoom",Pe);var Ze=new Ro;this._add("tapDragZoom",Ze);var ft=de.touchPitch=new ui;this._add("touchPitch",ft);var St=new ua(X),Ht=new Ra(X);de.dragRotate=new jo(X,St,Ht),this._add("mouseRotate",St,["mousePitch"]),this._add("mousePitch",Ht,["mouseRotate"]);var tr=new Ma(X),ur=new va(X);de.dragPan=new io(q,tr,ur),this._add("mousePan",tr),this._add("touchPan",ur,["touchZoom","touchRotate"]);var Er=new oi,Wr=new xo;de.touchZoomRotate=new Ji(q,Wr,Er,Ze),this._add("touchRotate",Er,["touchPan","touchZoom"]),this._add("touchZoom",Wr,["touchPan","touchRotate"]);var jr=de.scrollZoom=new Hi(de,this);this._add("scrollZoom",jr,["mousePan"]);var Gr=de.keyboard=new to;this._add("keyboard",Gr),this._add("blockableMapEvent",new jt(de));for(var qr=0,dn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];qr<dn.length;qr+=1){var Cn=dn[qr];X.interactive&&X[Cn]&&de[Cn].enable(X[Cn])}},$i.prototype._add=function(X,de,q){this._handlers.push({handlerName:X,handler:de,allowed:q}),this._handlersById[X]=de},$i.prototype.stop=function(){if(!this._updatingCamera){for(var X=0,de=this._handlers;X<de.length;X+=1){var q=de[X],ge=q.handler;ge.reset()}this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},$i.prototype.isActive=function(){for(var X=0,de=this._handlers;X<de.length;X+=1){var q=de[X],ge=q.handler;if(ge.isActive())return!0}return!1},$i.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},$i.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},$i.prototype.isMoving=function(){return Boolean(ls(this._eventsInProgress))||this.isZooming()},$i.prototype._blockedByActive=function(X,de,q){for(var ge in X)if(ge!==q&&(!de||de.indexOf(ge)<0))return!0;return!1},$i.prototype.handleWindowEvent=function(X){this.handleEvent(X,X.type+"Window")},$i.prototype._getMapTouches=function(X){for(var de=[],q=0,ge=X;q<ge.length;q+=1){var Ce=ge[q],Pe=Ce.target;this._el.contains(Pe)&&de.push(Ce)}return de},$i.prototype.handleEvent=function(X,de){if(X.type==="blur"){this.stop();return}this._updatingCamera=!0;for(var q=X.type==="renderFrame"?void 0:X,ge={needsRenderFrame:!1},Ce={},Pe={},Ze=X.touches?this._getMapTouches(X.touches):void 0,ft=Ze?a.touchPos(this._el,Ze):a.mousePos(this._el,X),St=0,Ht=this._handlers;St<Ht.length;St+=1){var tr=Ht[St],ur=tr.handlerName,Er=tr.handler,Wr=tr.allowed;if(!!Er.isEnabled()){var jr=void 0;this._blockedByActive(Pe,Wr,ur)?Er.reset():Er[de||X.type]&&(jr=Er[de||X.type](X,ft,Ze),this.mergeHandlerResult(ge,Ce,jr,ur,q),jr&&jr.needsRenderFrame&&this._triggerRenderFrame()),(jr||Er.isActive())&&(Pe[ur]=Er)}}var Gr={};for(var qr in this._previousActiveHandlers)Pe[qr]||(Gr[qr]=q);this._previousActiveHandlers=Pe,(Object.keys(Gr).length||ku(ge))&&(this._changes.push([ge,Ce,Gr]),this._triggerRenderFrame()),(Object.keys(Pe).length||ku(ge))&&this._map._stop(!0),this._updatingCamera=!1;var dn=ge.cameraAnimation;dn&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],dn(this._map))},$i.prototype.mergeHandlerResult=function(X,de,q,ge,Ce){if(!!q){t.extend(X,q);var Pe={handlerName:ge,originalEvent:q.originalEvent||Ce};q.zoomDelta!==void 0&&(de.zoom=Pe),q.panDelta!==void 0&&(de.drag=Pe),q.pitchDelta!==void 0&&(de.pitch=Pe),q.bearingDelta!==void 0&&(de.rotate=Pe)}},$i.prototype._applyChanges=function(){for(var X={},de={},q={},ge=0,Ce=this._changes;ge<Ce.length;ge+=1){var Pe=Ce[ge],Ze=Pe[0],ft=Pe[1],St=Pe[2];Ze.panDelta&&(X.panDelta=(X.panDelta||new t.Point(0,0))._add(Ze.panDelta)),Ze.zoomDelta&&(X.zoomDelta=(X.zoomDelta||0)+Ze.zoomDelta),Ze.bearingDelta&&(X.bearingDelta=(X.bearingDelta||0)+Ze.bearingDelta),Ze.pitchDelta&&(X.pitchDelta=(X.pitchDelta||0)+Ze.pitchDelta),Ze.around!==void 0&&(X.around=Ze.around),Ze.pinchAround!==void 0&&(X.pinchAround=Ze.pinchAround),Ze.noInertia&&(X.noInertia=Ze.noInertia),t.extend(de,ft),t.extend(q,St)}this._updateMapTransform(X,de,q),this._changes=[]},$i.prototype._updateMapTransform=function(X,de,q){var ge=this._map,Ce=ge.transform;if(!ku(X))return this._fireEvents(de,q);var Pe=X.panDelta,Ze=X.zoomDelta,ft=X.bearingDelta,St=X.pitchDelta,Ht=X.around,tr=X.pinchAround;tr!==void 0&&(Ht=tr),ge._stop(!0),Ht=Ht||ge.transform.centerPoint;var ur=Ce.pointLocation(Pe?Ht.sub(Pe):Ht);ft&&(Ce.bearing+=ft),St&&(Ce.pitch+=St),Ze&&(Ce.zoom+=Ze),Ce.setLocationAtPoint(ur,Ht),this._map._update(),X.noInertia||this._inertia.record(X),this._fireEvents(de,q)},$i.prototype._fireEvents=function(X,de){var q=this,ge=ls(this._eventsInProgress),Ce=ls(X),Pe={};for(var Ze in X){var ft=X[Ze],St=ft.originalEvent;this._eventsInProgress[Ze]||(Pe[Ze+"start"]=St),this._eventsInProgress[Ze]=X[Ze]}!ge&&Ce&&this._fireEvent("movestart",Ce.originalEvent);for(var Ht in Pe)this._fireEvent(Ht,Pe[Ht]);X.rotate&&(this._bearingChanged=!0),Ce&&this._fireEvent("move",Ce.originalEvent);for(var tr in X){var ur=X[tr],Er=ur.originalEvent;this._fireEvent(tr,Er)}var Wr={},jr;for(var Gr in this._eventsInProgress){var qr=this._eventsInProgress[Gr],dn=qr.handlerName,Cn=qr.originalEvent;this._handlersById[dn].isActive()||(delete this._eventsInProgress[Gr],jr=de[dn]||Cn,Wr[Gr+"end"]=jr)}for(var Vn in Wr)this._fireEvent(Vn,Wr[Vn]);var Qn=ls(this._eventsInProgress);if((ge||Ce)&&!Qn){this._updatingCamera=!0;var na=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ta=function(ma){return ma!==0&&-q._bearingSnap<ma&&ma<q._bearingSnap};na?(ta(na.bearing||this._map.getBearing())&&(na.bearing=0),this._map.easeTo(na,{originalEvent:jr})):(this._map.fire(new t.Event("moveend",{originalEvent:jr})),ta(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},$i.prototype._fireEvent=function(X,de){this._map.fire(new t.Event(X,de?{originalEvent:de}:{}))},$i.prototype._triggerRenderFrame=function(){var X=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(de){delete X._frameId,X.handleEvent(new Bs("renderFrame",{timeStamp:de})),X._applyChanges()}))};var bc=function(ve){function X(de,q){ve.call(this),this._moving=!1,this._zooming=!1,this.transform=de,this._bearingSnap=q.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},X.prototype.setCenter=function(q,ge){return this.jumpTo({center:q},ge)},X.prototype.panBy=function(q,ge,Ce){return q=t.Point.convert(q).mult(-1),this.panTo(this.transform.center,t.extend({offset:q},ge),Ce)},X.prototype.panTo=function(q,ge,Ce){return this.easeTo(t.extend({center:q},ge),Ce)},X.prototype.getZoom=function(){return this.transform.zoom},X.prototype.setZoom=function(q,ge){return this.jumpTo({zoom:q},ge),this},X.prototype.zoomTo=function(q,ge,Ce){return this.easeTo(t.extend({zoom:q},ge),Ce)},X.prototype.zoomIn=function(q,ge){return this.zoomTo(this.getZoom()+1,q,ge),this},X.prototype.zoomOut=function(q,ge){return this.zoomTo(this.getZoom()-1,q,ge),this},X.prototype.getBearing=function(){return this.transform.bearing},X.prototype.setBearing=function(q,ge){return this.jumpTo({bearing:q},ge),this},X.prototype.getPadding=function(){return this.transform.padding},X.prototype.setPadding=function(q,ge){return this.jumpTo({padding:q},ge),this},X.prototype.rotateTo=function(q,ge,Ce){return this.easeTo(t.extend({bearing:q},ge),Ce)},X.prototype.resetNorth=function(q,ge){return this.rotateTo(0,t.extend({duration:1e3},q),ge),this},X.prototype.resetNorthPitch=function(q,ge){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},q),ge),this},X.prototype.snapToNorth=function(q,ge){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(q,ge):this},X.prototype.getPitch=function(){return this.transform.pitch},X.prototype.setPitch=function(q,ge){return this.jumpTo({pitch:q},ge),this},X.prototype.cameraForBounds=function(q,ge){return q=t.LngLatBounds.convert(q),this._cameraForBoxAndBearing(q.getNorthWest(),q.getSouthEast(),0,ge)},X.prototype._cameraForBoxAndBearing=function(q,ge,Ce,Pe){var Ze={top:0,bottom:0,right:0,left:0};if(Pe=t.extend({padding:Ze,offset:[0,0],maxZoom:this.transform.maxZoom},Pe),typeof Pe.padding=="number"){var ft=Pe.padding;Pe.padding={top:ft,bottom:ft,right:ft,left:ft}}Pe.padding=t.extend(Ze,Pe.padding);var St=this.transform,Ht=St.padding,tr=St.project(t.LngLat.convert(q)),ur=St.project(t.LngLat.convert(ge)),Er=tr.rotate(-Ce*Math.PI/180),Wr=ur.rotate(-Ce*Math.PI/180),jr=new t.Point(Math.max(Er.x,Wr.x),Math.max(Er.y,Wr.y)),Gr=new t.Point(Math.min(Er.x,Wr.x),Math.min(Er.y,Wr.y)),qr=jr.sub(Gr),dn=(St.width-(Ht.left+Ht.right+Pe.padding.left+Pe.padding.right))/qr.x,Cn=(St.height-(Ht.top+Ht.bottom+Pe.padding.top+Pe.padding.bottom))/qr.y;if(Cn<0||dn<0){t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Vn=Math.min(St.scaleZoom(St.scale*Math.min(dn,Cn)),Pe.maxZoom),Qn=t.Point.convert(Pe.offset),na=(Pe.padding.left-Pe.padding.right)/2,ta=(Pe.padding.top-Pe.padding.bottom)/2,ma=new t.Point(Qn.x+na,Qn.y+ta),Sa=ma.mult(St.scale/St.zoomScale(Vn)),Ta=St.unproject(tr.add(ur).div(2).sub(Sa));return{center:Ta,zoom:Vn,bearing:Ce}},X.prototype.fitBounds=function(q,ge,Ce){return this._fitInternal(this.cameraForBounds(q,ge),ge,Ce)},X.prototype.fitScreenCoordinates=function(q,ge,Ce,Pe,Ze){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(q)),this.transform.pointLocation(t.Point.convert(ge)),Ce,Pe),Pe,Ze)},X.prototype._fitInternal=function(q,ge,Ce){return q?(ge=t.extend(q,ge),delete ge.padding,ge.linear?this.easeTo(ge,Ce):this.flyTo(ge,Ce)):this},X.prototype.jumpTo=function(q,ge){this.stop();var Ce=this.transform,Pe=!1,Ze=!1,ft=!1;return"zoom"in q&&Ce.zoom!==+q.zoom&&(Pe=!0,Ce.zoom=+q.zoom),q.center!==void 0&&(Ce.center=t.LngLat.convert(q.center)),"bearing"in q&&Ce.bearing!==+q.bearing&&(Ze=!0,Ce.bearing=+q.bearing),"pitch"in q&&Ce.pitch!==+q.pitch&&(ft=!0,Ce.pitch=+q.pitch),q.padding!=null&&!Ce.isPaddingEqual(q.padding)&&(Ce.padding=q.padding),this.fire(new t.Event("movestart",ge)).fire(new t.Event("move",ge)),Pe&&this.fire(new t.Event("zoomstart",ge)).fire(new t.Event("zoom",ge)).fire(new t.Event("zoomend",ge)),Ze&&this.fire(new t.Event("rotatestart",ge)).fire(new t.Event("rotate",ge)).fire(new t.Event("rotateend",ge)),ft&&this.fire(new t.Event("pitchstart",ge)).fire(new t.Event("pitch",ge)).fire(new t.Event("pitchend",ge)),this.fire(new t.Event("moveend",ge))},X.prototype.easeTo=function(q,ge){var Ce=this;this._stop(!1,q.easeId),q=t.extend({offset:[0,0],duration:500,easing:t.ease},q),(q.animate===!1||!q.essential&&t.browser.prefersReducedMotion)&&(q.duration=0);var Pe=this.transform,Ze=this.getZoom(),ft=this.getBearing(),St=this.getPitch(),Ht=this.getPadding(),tr="zoom"in q?+q.zoom:Ze,ur="bearing"in q?this._normalizeBearing(q.bearing,ft):ft,Er="pitch"in q?+q.pitch:St,Wr="padding"in q?q.padding:Pe.padding,jr=t.Point.convert(q.offset),Gr=Pe.centerPoint.add(jr),qr=Pe.pointLocation(Gr),dn=t.LngLat.convert(q.center||qr);this._normalizeCenter(dn);var Cn=Pe.project(qr),Vn=Pe.project(dn).sub(Cn),Qn=Pe.zoomScale(tr-Ze),na,ta;q.around&&(na=t.LngLat.convert(q.around),ta=Pe.locationPoint(na));var ma={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||tr!==Ze,this._rotating=this._rotating||ft!==ur,this._pitching=this._pitching||Er!==St,this._padding=!Pe.isPaddingEqual(Wr),this._easeId=q.easeId,this._prepareEase(ge,q.noMoveStart,ma),clearTimeout(this._easeEndTimeoutID),this._ease(function(Sa){if(Ce._zooming&&(Pe.zoom=t.number(Ze,tr,Sa)),Ce._rotating&&(Pe.bearing=t.number(ft,ur,Sa)),Ce._pitching&&(Pe.pitch=t.number(St,Er,Sa)),Ce._padding&&(Pe.interpolatePadding(Ht,Wr,Sa),Gr=Pe.centerPoint.add(jr)),na)Pe.setLocationAtPoint(na,ta);else{var Ta=Pe.zoomScale(Pe.zoom-Ze),Ea=tr>Ze?Math.min(2,Qn):Math.max(.5,Qn),Ia=Math.pow(Ea,1-Sa),Ya=Pe.unproject(Cn.add(Vn.mult(Sa*Ia)).mult(Ta));Pe.setLocationAtPoint(Pe.renderWorldCopies?Ya.wrap():Ya,Gr)}Ce._fireMoveEvents(ge)},function(Sa){Ce._afterEase(ge,Sa)},q),this},X.prototype._prepareEase=function(q,ge,Ce){Ce===void 0&&(Ce={}),this._moving=!0,!ge&&!Ce.moving&&this.fire(new t.Event("movestart",q)),this._zooming&&!Ce.zooming&&this.fire(new t.Event("zoomstart",q)),this._rotating&&!Ce.rotating&&this.fire(new t.Event("rotatestart",q)),this._pitching&&!Ce.pitching&&this.fire(new t.Event("pitchstart",q))},X.prototype._fireMoveEvents=function(q){this.fire(new t.Event("move",q)),this._zooming&&this.fire(new t.Event("zoom",q)),this._rotating&&this.fire(new t.Event("rotate",q)),this._pitching&&this.fire(new t.Event("pitch",q))},X.prototype._afterEase=function(q,ge){if(!(this._easeId&&ge&&this._easeId===ge)){delete this._easeId;var Ce=this._zooming,Pe=this._rotating,Ze=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Ce&&this.fire(new t.Event("zoomend",q)),Pe&&this.fire(new t.Event("rotateend",q)),Ze&&this.fire(new t.Event("pitchend",q)),this.fire(new t.Event("moveend",q))}},X.prototype.flyTo=function(q,ge){var Ce=this;if(!q.essential&&t.browser.prefersReducedMotion){var Pe=t.pick(q,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Pe,ge)}this.stop(),q=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},q);var Ze=this.transform,ft=this.getZoom(),St=this.getBearing(),Ht=this.getPitch(),tr=this.getPadding(),ur="zoom"in q?t.clamp(+q.zoom,Ze.minZoom,Ze.maxZoom):ft,Er="bearing"in q?this._normalizeBearing(q.bearing,St):St,Wr="pitch"in q?+q.pitch:Ht,jr="padding"in q?q.padding:Ze.padding,Gr=Ze.zoomScale(ur-ft),qr=t.Point.convert(q.offset),dn=Ze.centerPoint.add(qr),Cn=Ze.pointLocation(dn),Vn=t.LngLat.convert(q.center||Cn);this._normalizeCenter(Vn);var Qn=Ze.project(Cn),na=Ze.project(Vn).sub(Qn),ta=q.curve,ma=Math.max(Ze.width,Ze.height),Sa=ma/Gr,Ta=na.mag();if("minZoom"in q){var Ea=t.clamp(Math.min(q.minZoom,ft,ur),Ze.minZoom,Ze.maxZoom),Ia=ma/Ze.zoomScale(Ea-ft);ta=Math.sqrt(Ia/Ta*2)}var Ya=ta*ta;function ii(si){var Ai=(Sa*Sa-ma*ma+(si?-1:1)*Ya*Ya*Ta*Ta)/(2*(si?Sa:ma)*Ya*Ta);return Math.log(Math.sqrt(Ai*Ai+1)-Ai)}function Ri(si){return(Math.exp(si)-Math.exp(-si))/2}function ci(si){return(Math.exp(si)+Math.exp(-si))/2}function gi(si){return Ri(si)/ci(si)}var Ga=ii(0),Di=function(si){return ci(Ga)/ci(Ga+ta*si)},Ni=function(si){return ma*((ci(Ga)*gi(Ga+ta*si)-Ri(Ga))/Ya)/Ta},Gi=(ii(1)-Ga)/ta;if(Math.abs(Ta)<1e-6||!isFinite(Gi)){if(Math.abs(ma-Sa)<1e-6)return this.easeTo(q,ge);var Ti=Sa<ma?-1:1;Gi=Math.abs(Math.log(Sa/ma))/ta,Ni=function(){return 0},Di=function(si){return Math.exp(Ti*ta*si)}}if("duration"in q)q.duration=+q.duration;else{var Qi="screenSpeed"in q?+q.screenSpeed/ta:+q.speed;q.duration=1e3*Gi/Qi}return q.maxDuration&&q.duration>q.maxDuration&&(q.duration=0),this._zooming=!0,this._rotating=St!==Er,this._pitching=Wr!==Ht,this._padding=!Ze.isPaddingEqual(jr),this._prepareEase(ge,!1),this._ease(function(si){var Ai=si*Gi,Fo=1/Di(Ai);Ze.zoom=si===1?ur:ft+Ze.scaleZoom(Fo),Ce._rotating&&(Ze.bearing=t.number(St,Er,si)),Ce._pitching&&(Ze.pitch=t.number(Ht,Wr,si)),Ce._padding&&(Ze.interpolatePadding(tr,jr,si),dn=Ze.centerPoint.add(qr));var qo=si===1?Vn:Ze.unproject(Qn.add(na.mult(Ni(Ai))).mult(Fo));Ze.setLocationAtPoint(Ze.renderWorldCopies?qo.wrap():qo,dn),Ce._fireMoveEvents(ge)},function(){return Ce._afterEase(ge)},q),this},X.prototype.isEasing=function(){return!!this._easeFrameId},X.prototype.stop=function(){return this._stop()},X.prototype._stop=function(q,ge){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Ce=this._onEaseEnd;delete this._onEaseEnd,Ce.call(this,ge)}if(!q){var Pe=this.handlers;Pe&&Pe.stop()}return this},X.prototype._ease=function(q,ge,Ce){Ce.animate===!1||Ce.duration===0?(q(1),ge()):(this._easeStart=t.browser.now(),this._easeOptions=Ce,this._onEaseFrame=q,this._onEaseEnd=ge,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},X.prototype._renderFrameCallback=function(){var q=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(q)),q<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},X.prototype._normalizeBearing=function(q,ge){q=t.wrap(q,-180,180);var Ce=Math.abs(q-ge);return Math.abs(q-360-ge)<Ce&&(q-=360),Math.abs(q+360-ge)<Ce&&(q+=360),q},X.prototype._normalizeCenter=function(q){var ge=this.transform;if(!(!ge.renderWorldCopies||ge.lngRange)){var Ce=q.lng-ge.center.lng;q.lng+=Ce>180?-360:Ce<-180?360:0}},X}(t.Evented),lu=function(X){X===void 0&&(X={}),this.options=X,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};lu.prototype.getDefaultPosition=function(){return"bottom-right"},lu.prototype.onAdd=function(X){var de=this.options&&this.options.compact;return this._map=X,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=a.create("div","mapboxgl-ctrl-attrib-inner",this._container),de&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),de===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},lu.prototype.onRemove=function(){a.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},lu.prototype._updateEditLink=function(){var X=this._editLink;X||(X=this._editLink=this._container.querySelector(".mapbox-improve-map"));var de=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(X){var q=de.reduce(function(ge,Ce,Pe){return Ce.value&&(ge+=Ce.key+"="+Ce.value+(Pe<de.length-1?"&":"")),ge},"?");X.href=t.config.FEEDBACK_URL+"/"+q+(this._map._hash?this._map._hash.getHashString(!0):""),X.rel="noopener nofollow"}},lu.prototype._updateData=function(X){X&&(X.sourceDataType==="metadata"||X.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},lu.prototype._updateAttributions=function(){if(!!this._map.style){var X=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?X=X.concat(this.options.customAttribution.map(function(ft){return typeof ft!="string"?"":ft})):typeof this.options.customAttribution=="string"&&X.push(this.options.customAttribution)),this._map.style.stylesheet){var de=this._map.style.stylesheet;this.styleOwner=de.owner,this.styleId=de.id}var q=this._map.style.sourceCaches;for(var ge in q){var Ce=q[ge];if(Ce.used){var Pe=Ce.getSource();Pe.attribution&&X.indexOf(Pe.attribution)<0&&X.push(Pe.attribution)}}X.sort(function(ft,St){return ft.length-St.length}),X=X.filter(function(ft,St){for(var Ht=St+1;Ht<X.length;Ht++)if(X[Ht].indexOf(ft)>=0)return!1;return!0});var Ze=X.join(" | ");Ze!==this._attribHTML&&(this._attribHTML=Ze,X.length?(this._innerContainer.innerHTML=Ze,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},lu.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Vi=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Vi.prototype.onAdd=function(X){this._map=X,this._container=a.create("div","mapboxgl-ctrl");var de=a.create("a","mapboxgl-ctrl-logo");return de.target="_blank",de.rel="noopener nofollow",de.href="https://www.mapbox.com/",de.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),de.setAttribute("rel","noopener nofollow"),this._container.appendChild(de),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Vi.prototype.onRemove=function(){a.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Vi.prototype.getDefaultPosition=function(){return"bottom-left"},Vi.prototype._updateLogo=function(X){(!X||X.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},Vi.prototype._logoRequired=function(){if(!!this._map.style){var X=this._map.style.sourceCaches;for(var de in X){var q=X[de].getSource();if(q.mapbox_logo)return!0}return!1}},Vi.prototype._updateCompact=function(){var X=this._container.children;if(X.length){var de=X[0];this._map.getCanvasContainer().offsetWidth<250?de.classList.add("mapboxgl-compact"):de.classList.remove("mapboxgl-compact")}};var Xo=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Xo.prototype.add=function(X){var de=++this._id,q=this._queue;return q.push({callback:X,id:de,cancelled:!1}),de},Xo.prototype.remove=function(X){for(var de=this._currentlyRunning,q=de?this._queue.concat(de):this._queue,ge=0,Ce=q;ge<Ce.length;ge+=1){var Pe=Ce[ge];if(Pe.id===X){Pe.cancelled=!0;return}}},Xo.prototype.run=function(X){X===void 0&&(X=0);var de=this._currentlyRunning=this._queue;this._queue=[];for(var q=0,ge=de;q<ge.length;q+=1){var Ce=ge[q];if(!Ce.cancelled&&(Ce.callback(X),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Xo.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ug={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},yh=t.window.HTMLImageElement,Wc=t.window.HTMLElement,Nf=t.window.ImageBitmap,_c=-2,xh=22,vl=0,Uf=60,Sv={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:_c,maxZoom:xh,minPitch:vl,maxPitch:Uf,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Mv=function(ve){function X(q){var ge=this;if(q=t.extend({},Sv,q),q.minZoom!=null&&q.maxZoom!=null&&q.minZoom>q.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(q.minPitch!=null&&q.maxPitch!=null&&q.minPitch>q.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(q.minPitch!=null&&q.minPitch<vl)throw new Error("minPitch must be greater than or equal to "+vl);if(q.maxPitch!=null&&q.maxPitch>Uf)throw new Error("maxPitch must be less than or equal to "+Uf);var Ce=new wi(q.minZoom,q.maxZoom,q.minPitch,q.maxPitch,q.renderWorldCopies);if(ve.call(this,Ce,q),this._interactive=q.interactive,this._maxTileCacheSize=q.maxTileCacheSize,this._failIfMajorPerformanceCaveat=q.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=q.preserveDrawingBuffer,this._antialias=q.antialias,this._trackResize=q.trackResize,this._bearingSnap=q.bearingSnap,this._refreshExpiredTiles=q.refreshExpiredTiles,this._fadeDuration=q.fadeDuration,this._crossSourceCollisions=q.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=q.collectResourceTiming,this._renderTaskQueue=new Xo,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},ug,q.locale),this._requestManager=new t.RequestManager(q.transformRequest,q.accessToken),typeof q.container=="string"){if(this._container=t.window.document.getElementById(q.container),!this._container)throw new Error("Container '"+q.container+"' not found.")}else if(q.container instanceof Wc)this._container=q.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(q.maxBounds&&this.setMaxBounds(q.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return ge._update(!1)}),this.on("moveend",function(){return ge._update(!1)}),this.on("zoom",function(){return ge._update(!0)}),typeof t.window!="undefined"&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new $i(this,q);var Pe=typeof q.hash=="string"&&q.hash||void 0;this._hash=q.hash&&new ko(Pe).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:q.center,zoom:q.zoom,bearing:q.bearing,pitch:q.pitch}),q.bounds&&(this.resize(),this.fitBounds(q.bounds,t.extend({},q.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=q.localIdeographFontFamily,q.style&&this.setStyle(q.style,{localIdeographFontFamily:q.localIdeographFontFamily}),q.attributionControl&&this.addControl(new lu({customAttribution:q.customAttribution})),this.addControl(new Vi,q.logoPosition),this.on("style.load",function(){ge.transform.unmodified&&ge.jumpTo(ge.style.stylesheet)}),this.on("data",function(Ze){ge._update(Ze.dataType==="style"),ge.fire(new t.Event(Ze.dataType+"data",Ze))}),this.on("dataloading",function(Ze){ge.fire(new t.Event(Ze.dataType+"dataloading",Ze))})}ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X;var de={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return X.prototype._getMapId=function(){return this._mapId},X.prototype.addControl=function(ge,Ce){if(Ce===void 0&&ge.getDefaultPosition&&(Ce=ge.getDefaultPosition()),Ce===void 0&&(Ce="top-right"),!ge||!ge.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Pe=ge.onAdd(this);this._controls.push(ge);var Ze=this._controlPositions[Ce];return Ce.indexOf("bottom")!==-1?Ze.insertBefore(Pe,Ze.firstChild):Ze.appendChild(Pe),this},X.prototype.removeControl=function(ge){if(!ge||!ge.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Ce=this._controls.indexOf(ge);return Ce>-1&&this._controls.splice(Ce,1),ge.onRemove(this),this},X.prototype.resize=function(ge){var Ce=this._containerDimensions(),Pe=Ce[0],Ze=Ce[1];this._resizeCanvas(Pe,Ze),this.transform.resize(Pe,Ze),this.painter.resize(Pe,Ze);var ft=!this._moving;return ft&&(this.stop(),this.fire(new t.Event("movestart",ge)).fire(new t.Event("move",ge))),this.fire(new t.Event("resize",ge)),ft&&this.fire(new t.Event("moveend",ge)),this},X.prototype.getBounds=function(){return this.transform.getBounds()},X.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},X.prototype.setMaxBounds=function(ge){return this.transform.setMaxBounds(t.LngLatBounds.convert(ge)),this._update()},X.prototype.setMinZoom=function(ge){if(ge=ge??_c,ge>=_c&&ge<=this.transform.maxZoom)return this.transform.minZoom=ge,this._update(),this.getZoom()<ge&&this.setZoom(ge),this;throw new Error("minZoom must be between "+_c+" and the current maxZoom, inclusive")},X.prototype.getMinZoom=function(){return this.transform.minZoom},X.prototype.setMaxZoom=function(ge){if(ge=ge??xh,ge>=this.transform.minZoom)return this.transform.maxZoom=ge,this._update(),this.getZoom()>ge&&this.setZoom(ge),this;throw new Error("maxZoom must be greater than the current minZoom")},X.prototype.getMaxZoom=function(){return this.transform.maxZoom},X.prototype.setMinPitch=function(ge){if(ge=ge??vl,ge<vl)throw new Error("minPitch must be greater than or equal to "+vl);if(ge>=vl&&ge<=this.transform.maxPitch)return this.transform.minPitch=ge,this._update(),this.getPitch()<ge&&this.setPitch(ge),this;throw new Error("minPitch must be between "+vl+" and the current maxPitch, inclusive")},X.prototype.getMinPitch=function(){return this.transform.minPitch},X.prototype.setMaxPitch=function(ge){if(ge=ge??Uf,ge>Uf)throw new Error("maxPitch must be less than or equal to "+Uf);if(ge>=this.transform.minPitch)return this.transform.maxPitch=ge,this._update(),this.getPitch()>ge&&this.setPitch(ge),this;throw new Error("maxPitch must be greater than the current minPitch")},X.prototype.getMaxPitch=function(){return this.transform.maxPitch},X.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},X.prototype.setRenderWorldCopies=function(ge){return this.transform.renderWorldCopies=ge,this._update()},X.prototype.project=function(ge){return this.transform.locationPoint(t.LngLat.convert(ge))},X.prototype.unproject=function(ge){return this.transform.pointLocation(t.Point.convert(ge))},X.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},X.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},X.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},X.prototype._createDelegatedListener=function(ge,Ce,Pe){var Ze=this,ft;if(ge==="mouseenter"||ge==="mouseover"){var St=!1,Ht=function(Gr){var qr=Ze.getLayer(Ce)?Ze.queryRenderedFeatures(Gr.point,{layers:[Ce]}):[];qr.length?St||(St=!0,Pe.call(Ze,new yt(ge,Ze,Gr.originalEvent,{features:qr}))):St=!1},tr=function(){St=!1};return{layer:Ce,listener:Pe,delegates:{mousemove:Ht,mouseout:tr}}}else if(ge==="mouseleave"||ge==="mouseout"){var ur=!1,Er=function(Gr){var qr=Ze.getLayer(Ce)?Ze.queryRenderedFeatures(Gr.point,{layers:[Ce]}):[];qr.length?ur=!0:ur&&(ur=!1,Pe.call(Ze,new yt(ge,Ze,Gr.originalEvent)))},Wr=function(Gr){ur&&(ur=!1,Pe.call(Ze,new yt(ge,Ze,Gr.originalEvent)))};return{layer:Ce,listener:Pe,delegates:{mousemove:Er,mouseout:Wr}}}else{var jr=function(Gr){var qr=Ze.getLayer(Ce)?Ze.queryRenderedFeatures(Gr.point,{layers:[Ce]}):[];qr.length&&(Gr.features=qr,Pe.call(Ze,Gr),delete Gr.features)};return{layer:Ce,listener:Pe,delegates:(ft={},ft[ge]=jr,ft)}}},X.prototype.on=function(ge,Ce,Pe){if(Pe===void 0)return ve.prototype.on.call(this,ge,Ce);var Ze=this._createDelegatedListener(ge,Ce,Pe);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[ge]=this._delegatedListeners[ge]||[],this._delegatedListeners[ge].push(Ze);for(var ft in Ze.delegates)this.on(ft,Ze.delegates[ft]);return this},X.prototype.once=function(ge,Ce,Pe){if(Pe===void 0)return ve.prototype.once.call(this,ge,Ce);var Ze=this._createDelegatedListener(ge,Ce,Pe);for(var ft in Ze.delegates)this.once(ft,Ze.delegates[ft]);return this},X.prototype.off=function(ge,Ce,Pe){var Ze=this;if(Pe===void 0)return ve.prototype.off.call(this,ge,Ce);var ft=function(St){for(var Ht=St[ge],tr=0;tr<Ht.length;tr++){var ur=Ht[tr];if(ur.layer===Ce&&ur.listener===Pe){for(var Er in ur.delegates)Ze.off(Er,ur.delegates[Er]);return Ht.splice(tr,1),Ze}}};return this._delegatedListeners&&this._delegatedListeners[ge]&&ft(this._delegatedListeners),this},X.prototype.queryRenderedFeatures=function(ge,Ce){if(!this.style)return[];Ce===void 0&&ge!==void 0&&!(ge instanceof t.Point)&&!Array.isArray(ge)&&(Ce=ge,ge=void 0),Ce=Ce||{},ge=ge||[[0,0],[this.transform.width,this.transform.height]];var Pe;if(ge instanceof t.Point||typeof ge[0]=="number")Pe=[t.Point.convert(ge)];else{var Ze=t.Point.convert(ge[0]),ft=t.Point.convert(ge[1]);Pe=[Ze,new t.Point(ft.x,Ze.y),ft,new t.Point(Ze.x,ft.y),Ze]}return this.style.queryRenderedFeatures(Pe,Ce,this.transform)},X.prototype.querySourceFeatures=function(ge,Ce){return this.style.querySourceFeatures(ge,Ce)},X.prototype.setStyle=function(ge,Ce){return Ce=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Ce),Ce.diff!==!1&&Ce.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&ge?(this._diffStyle(ge,Ce),this):(this._localIdeographFontFamily=Ce.localIdeographFontFamily,this._updateStyle(ge,Ce))},X.prototype._getUIString=function(ge){var Ce=this._locale[ge];if(Ce==null)throw new Error("Missing UI string '"+ge+"'");return Ce},X.prototype._updateStyle=function(ge,Ce){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),ge)this.style=new hs(this,Ce||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof ge=="string"?this.style.loadURL(ge):this.style.loadJSON(ge),this},X.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new hs(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},X.prototype._diffStyle=function(ge,Ce){var Pe=this;if(typeof ge=="string"){var Ze=this._requestManager.normalizeStyleURL(ge),ft=this._requestManager.transformRequest(Ze,t.ResourceType.Style);t.getJSON(ft,function(St,Ht){St?Pe.fire(new t.ErrorEvent(St)):Ht&&Pe._updateDiff(Ht,Ce)})}else typeof ge=="object"&&this._updateDiff(ge,Ce)},X.prototype._updateDiff=function(ge,Ce){try{this.style.setState(ge)&&this._update(!0)}catch(Pe){t.warnOnce("Unable to perform style diff: "+(Pe.message||Pe.error||Pe)+".  Rebuilding the style from scratch."),this._updateStyle(ge,Ce)}},X.prototype.getStyle=function(){if(this.style)return this.style.serialize()},X.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},X.prototype.addSource=function(ge,Ce){return this._lazyInitEmptyStyle(),this.style.addSource(ge,Ce),this._update(!0)},X.prototype.isSourceLoaded=function(ge){var Ce=this.style&&this.style.sourceCaches[ge];if(Ce===void 0){this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+ge+"'")));return}return Ce.loaded()},X.prototype.areTilesLoaded=function(){var ge=this.style&&this.style.sourceCaches;for(var Ce in ge){var Pe=ge[Ce],Ze=Pe._tiles;for(var ft in Ze){var St=Ze[ft];if(!(St.state==="loaded"||St.state==="errored"))return!1}}return!0},X.prototype.addSourceType=function(ge,Ce,Pe){return this._lazyInitEmptyStyle(),this.style.addSourceType(ge,Ce,Pe)},X.prototype.removeSource=function(ge){return this.style.removeSource(ge),this._update(!0)},X.prototype.getSource=function(ge){return this.style.getSource(ge)},X.prototype.addImage=function(ge,Ce,Pe){Pe===void 0&&(Pe={});var Ze=Pe.pixelRatio;Ze===void 0&&(Ze=1);var ft=Pe.sdf;ft===void 0&&(ft=!1);var St=Pe.stretchX,Ht=Pe.stretchY,tr=Pe.content;this._lazyInitEmptyStyle();var ur=0;if(Ce instanceof yh||Nf&&Ce instanceof Nf){var Er=t.browser.getImageData(Ce),Wr=Er.width,jr=Er.height,Gr=Er.data;this.style.addImage(ge,{data:new t.RGBAImage({width:Wr,height:jr},Gr),pixelRatio:Ze,stretchX:St,stretchY:Ht,content:tr,sdf:ft,version:ur})}else{if(Ce.width===void 0||Ce.height===void 0)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var qr=Ce.width,dn=Ce.height,Cn=Ce.data,Vn=Ce;this.style.addImage(ge,{data:new t.RGBAImage({width:qr,height:dn},new Uint8Array(Cn)),pixelRatio:Ze,stretchX:St,stretchY:Ht,content:tr,sdf:ft,version:ur,userImage:Vn}),Vn.onAdd&&Vn.onAdd(this,ge)}},X.prototype.updateImage=function(ge,Ce){var Pe=this.style.getImage(ge);if(!Pe)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Ze=Ce instanceof yh||Nf&&Ce instanceof Nf?t.browser.getImageData(Ce):Ce,ft=Ze.width,St=Ze.height,Ht=Ze.data;if(ft===void 0||St===void 0)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(ft!==Pe.data.width||St!==Pe.data.height)return this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var tr=!(Ce instanceof yh||Nf&&Ce instanceof Nf);Pe.data.replace(Ht,tr),this.style.updateImage(ge,Pe)},X.prototype.hasImage=function(ge){return ge?!!this.style.getImage(ge):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},X.prototype.removeImage=function(ge){this.style.removeImage(ge)},X.prototype.loadImage=function(ge,Ce){t.getImage(this._requestManager.transformRequest(ge,t.ResourceType.Image),Ce)},X.prototype.listImages=function(){return this.style.listImages()},X.prototype.addLayer=function(ge,Ce){return this._lazyInitEmptyStyle(),this.style.addLayer(ge,Ce),this._update(!0)},X.prototype.moveLayer=function(ge,Ce){return this.style.moveLayer(ge,Ce),this._update(!0)},X.prototype.removeLayer=function(ge){return this.style.removeLayer(ge),this._update(!0)},X.prototype.getLayer=function(ge){return this.style.getLayer(ge)},X.prototype.setLayerZoomRange=function(ge,Ce,Pe){return this.style.setLayerZoomRange(ge,Ce,Pe),this._update(!0)},X.prototype.setFilter=function(ge,Ce,Pe){return Pe===void 0&&(Pe={}),this.style.setFilter(ge,Ce,Pe),this._update(!0)},X.prototype.getFilter=function(ge){return this.style.getFilter(ge)},X.prototype.setPaintProperty=function(ge,Ce,Pe,Ze){return Ze===void 0&&(Ze={}),this.style.setPaintProperty(ge,Ce,Pe,Ze),this._update(!0)},X.prototype.getPaintProperty=function(ge,Ce){return this.style.getPaintProperty(ge,Ce)},X.prototype.setLayoutProperty=function(ge,Ce,Pe,Ze){return Ze===void 0&&(Ze={}),this.style.setLayoutProperty(ge,Ce,Pe,Ze),this._update(!0)},X.prototype.getLayoutProperty=function(ge,Ce){return this.style.getLayoutProperty(ge,Ce)},X.prototype.setLight=function(ge,Ce){return Ce===void 0&&(Ce={}),this._lazyInitEmptyStyle(),this.style.setLight(ge,Ce),this._update(!0)},X.prototype.getLight=function(){return this.style.getLight()},X.prototype.setFeatureState=function(ge,Ce){return this.style.setFeatureState(ge,Ce),this._update()},X.prototype.removeFeatureState=function(ge,Ce){return this.style.removeFeatureState(ge,Ce),this._update()},X.prototype.getFeatureState=function(ge){return this.style.getFeatureState(ge)},X.prototype.getContainer=function(){return this._container},X.prototype.getCanvasContainer=function(){return this._canvasContainer},X.prototype.getCanvas=function(){return this._canvas},X.prototype._containerDimensions=function(){var ge=0,Ce=0;return this._container&&(ge=this._container.clientWidth||400,Ce=this._container.clientHeight||300),[ge,Ce]},X.prototype._detectMissingCSS=function(){var ge=t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");ge!=="rgb(250, 128, 114)"&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},X.prototype._setupContainer=function(){var ge=this._container;ge.classList.add("mapboxgl-map");var Ce=this._missingCSSCanary=a.create("div","mapboxgl-canary",ge);Ce.style.visibility="hidden",this._detectMissingCSS();var Pe=this._canvasContainer=a.create("div","mapboxgl-canvas-container",ge);this._interactive&&Pe.classList.add("mapboxgl-interactive"),this._canvas=a.create("canvas","mapboxgl-canvas",Pe),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Ze=this._containerDimensions();this._resizeCanvas(Ze[0],Ze[1]);var ft=this._controlContainer=a.create("div","mapboxgl-control-container",ge),St=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Ht){St[Ht]=a.create("div","mapboxgl-ctrl-"+Ht,ft)})},X.prototype._resizeCanvas=function(ge,Ce){var Pe=t.browser.devicePixelRatio||1;this._canvas.width=Pe*ge,this._canvas.height=Pe*Ce,this._canvas.style.width=ge+"px",this._canvas.style.height=Ce+"px"},X.prototype._setupPainter=function(){var ge=t.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Ce=this._canvas.getContext("webgl",ge)||this._canvas.getContext("experimental-webgl",ge);if(!Ce){this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new ai(Ce,this.transform),t.webpSupported.testSupport(Ce)},X.prototype._contextLost=function(ge){ge.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:ge}))},X.prototype._contextRestored=function(ge){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:ge}))},X.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},X.prototype._update=function(ge){return this.style?(this._styleDirty=this._styleDirty||ge,this._sourcesDirty=!0,this.triggerRepaint(),this):this},X.prototype._requestRenderFrame=function(ge){return this._update(),this._renderTaskQueue.add(ge)},X.prototype._cancelRenderFrame=function(ge){this._renderTaskQueue.remove(ge)},X.prototype._render=function(ge){var Ce=this,Pe,Ze=0,ft=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Pe=ft.createQueryEXT(),ft.beginQueryEXT(ft.TIME_ELAPSED_EXT,Pe),Ze=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(ge),!this._removed){var St=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Ht=this.transform.zoom,tr=t.browser.now();this.style.zoomHistory.update(Ht,tr);var ur=new t.EvaluationParameters(Ht,{now:tr,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Er=ur.crossFadingFactor();(Er!==1||Er!==this._crossFadingFactor)&&(St=!0,this._crossFadingFactor=Er),this.style.update(ur)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||St)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Wr=t.browser.now()-Ze;ft.endQueryEXT(ft.TIME_ELAPSED_EXT,Pe),setTimeout(function(){var qr=ft.getQueryObjectEXT(Pe,ft.QUERY_RESULT_EXT)/(1e3*1e3);ft.deleteQueryEXT(Pe),Ce.fire(new t.Event("gpu-timing-frame",{cpuTime:Wr,gpuTime:qr}))},50)}if(this.listens("gpu-timing-layer")){var jr=this.painter.collectGpuTimers();setTimeout(function(){var qr=Ce.painter.queryGpuTimers(jr);Ce.fire(new t.Event("gpu-timing-layer",{layerTimes:qr}))},50)}var Gr=this._sourcesDirty||this._styleDirty||this._placementDirty;return Gr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new t.Event("idle"))),this}},X.prototype.remove=function(){this._hash&&this._hash.remove();for(var ge=0,Ce=this._controls;ge<Ce.length;ge+=1){var Pe=Ce[ge];Pe.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof t.window!="undefined"&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var Ze=this.painter.context.gl.getExtension("WEBGL_lose_context");Ze&&Ze.loseContext(),Yc(this._canvasContainer),Yc(this._controlContainer),Yc(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},X.prototype.triggerRepaint=function(){var ge=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(Ce){ge._frame=null,ge._render(Ce)}))},X.prototype._onWindowOnline=function(){this._update()},X.prototype._onWindowResize=function(ge){this._trackResize&&this.resize({originalEvent:ge})._update()},de.showTileBoundaries.get=function(){return!!this._showTileBoundaries},de.showTileBoundaries.set=function(q){this._showTileBoundaries!==q&&(this._showTileBoundaries=q,this._update())},de.showPadding.get=function(){return!!this._showPadding},de.showPadding.set=function(q){this._showPadding!==q&&(this._showPadding=q,this._update())},de.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},de.showCollisionBoxes.set=function(q){this._showCollisionBoxes!==q&&(this._showCollisionBoxes=q,q?this.style._generateCollisionBoxes():this._update())},de.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},de.showOverdrawInspector.set=function(q){this._showOverdrawInspector!==q&&(this._showOverdrawInspector=q,this._update())},de.repaint.get=function(){return!!this._repaint},de.repaint.set=function(q){this._repaint!==q&&(this._repaint=q,this.triggerRepaint())},de.vertices.get=function(){return!!this._vertices},de.vertices.set=function(q){this._vertices=q,this._update()},X.prototype._setCacheLimits=function(ge,Ce){t.setCacheLimits(ge,Ce)},de.version.get=function(){return t.version},Object.defineProperties(X.prototype,de),X}(bc);function Yc(ve){ve.parentNode&&ve.parentNode.removeChild(ve)}var bh={showCompass:!0,showZoom:!0,visualizePitch:!1},df=function(X){var de=this;this.options=t.extend({},bh,X),this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(q){return q.preventDefault()}),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(q){return de._map.zoomIn({},{originalEvent:q})}),a.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(q){return de._map.zoomOut({},{originalEvent:q})}),a.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(q){de.options.visualizePitch?de._map.resetNorthPitch({},{originalEvent:q}):de._map.resetNorth({},{originalEvent:q})}),this._compassIcon=a.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};df.prototype._updateZoomButtons=function(){var X=this._map.getZoom();this._zoomInButton.disabled=X===this._map.getMaxZoom(),this._zoomOutButton.disabled=X===this._map.getMinZoom()},df.prototype._rotateCompassArrow=function(){var X=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=X},df.prototype.onAdd=function(X){return this._map=X,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Pl(this._map,this._compass,this.options.visualizePitch)),this._container},df.prototype.onRemove=function(){a.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},df.prototype._createButton=function(X,de){var q=a.create("button",X,this._container);return q.type="button",q.addEventListener("click",de),q},df.prototype._setButtonTitle=function(X,de){var q=this._map._getUIString("NavigationControl."+de);X.title=q,X.setAttribute("aria-label",q)};var Pl=function(X,de,q){q===void 0&&(q=!1),this._clickTolerance=10,this.element=de,this.mouseRotate=new ua({clickTolerance:X.dragRotate._mouseRotate._clickTolerance}),this.map=X,q&&(this.mousePitch=new Ra({clickTolerance:X.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),a.addEventListener(de,"mousedown",this.mousedown),a.addEventListener(de,"touchstart",this.touchstart,{passive:!1}),a.addEventListener(de,"touchmove",this.touchmove),a.addEventListener(de,"touchend",this.touchend),a.addEventListener(de,"touchcancel",this.reset)};Pl.prototype.down=function(X,de){this.mouseRotate.mousedown(X,de),this.mousePitch&&this.mousePitch.mousedown(X,de),a.disableDrag()},Pl.prototype.move=function(X,de){var q=this.map,ge=this.mouseRotate.mousemoveWindow(X,de);if(ge&&ge.bearingDelta&&q.setBearing(q.getBearing()+ge.bearingDelta),this.mousePitch){var Ce=this.mousePitch.mousemoveWindow(X,de);Ce&&Ce.pitchDelta&&q.setPitch(q.getPitch()+Ce.pitchDelta)}},Pl.prototype.off=function(){var X=this.element;a.removeEventListener(X,"mousedown",this.mousedown),a.removeEventListener(X,"touchstart",this.touchstart,{passive:!1}),a.removeEventListener(X,"touchmove",this.touchmove),a.removeEventListener(X,"touchend",this.touchend),a.removeEventListener(X,"touchcancel",this.reset),this.offTemp()},Pl.prototype.offTemp=function(){a.enableDrag(),a.removeEventListener(t.window,"mousemove",this.mousemove),a.removeEventListener(t.window,"mouseup",this.mouseup)},Pl.prototype.mousedown=function(X){this.down(t.extend({},X,{ctrlKey:!0,preventDefault:function(){return X.preventDefault()}}),a.mousePos(this.element,X)),a.addEventListener(t.window,"mousemove",this.mousemove),a.addEventListener(t.window,"mouseup",this.mouseup)},Pl.prototype.mousemove=function(X){this.move(X,a.mousePos(this.element,X))},Pl.prototype.mouseup=function(X){this.mouseRotate.mouseupWindow(X),this.mousePitch&&this.mousePitch.mouseupWindow(X),this.offTemp()},Pl.prototype.touchstart=function(X){X.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=a.touchPos(this.element,X.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return X.preventDefault()}},this._startPos))},Pl.prototype.touchmove=function(X){X.targetTouches.length!==1?this.reset():(this._lastPos=a.touchPos(this.element,X.targetTouches)[0],this.move({preventDefault:function(){return X.preventDefault()}},this._lastPos))},Pl.prototype.touchend=function(X){X.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Pl.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function gf(ve,X,de){if(ve=new t.LngLat(ve.lng,ve.lat),X){var q=new t.LngLat(ve.lng-360,ve.lat),ge=new t.LngLat(ve.lng+360,ve.lat),Ce=de.locationPoint(ve).distSqr(X);de.locationPoint(q).distSqr(X)<Ce?ve=q:de.locationPoint(ge).distSqr(X)<Ce&&(ve=ge)}for(;Math.abs(ve.lng-de.center.lng)>180;){var Pe=de.locationPoint(ve);if(Pe.x>=0&&Pe.y>=0&&Pe.x<=de.width&&Pe.y<=de.height)break;ve.lng>de.center.lng?ve.lng-=360:ve.lng+=360}return ve}var jc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function _h(ve,X,de){var q=ve.classList;for(var ge in jc)q.remove("mapboxgl-"+de+"-anchor-"+ge);q.add("mapboxgl-"+de+"-anchor-"+X)}var wc=function(ve){function X(de,q){var ge=this;if(ve.call(this),(de instanceof t.window.HTMLElement||q)&&(de=t.extend({element:de},q)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=de&&de.anchor||"center",this._color=de&&de.color||"#3FB1CE",this._draggable=de&&de.draggable||!1,this._state="inactive",this._rotation=de&&de.rotation||0,this._rotationAlignment=de&&de.rotationAlignment||"auto",this._pitchAlignment=de&&de.pitchAlignment&&de.pitchAlignment!=="auto"?de.pitchAlignment:this._rotationAlignment,!de||!de.element){this._defaultMarker=!0,this._element=a.create("div"),this._element.setAttribute("aria-label","Map marker");var Ce=a.createNS("http://www.w3.org/2000/svg","svg");Ce.setAttributeNS(null,"display","block"),Ce.setAttributeNS(null,"height","41px"),Ce.setAttributeNS(null,"width","27px"),Ce.setAttributeNS(null,"viewBox","0 0 27 41");var Pe=a.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"stroke","none"),Pe.setAttributeNS(null,"stroke-width","1"),Pe.setAttributeNS(null,"fill","none"),Pe.setAttributeNS(null,"fill-rule","evenodd");var Ze=a.createNS("http://www.w3.org/2000/svg","g");Ze.setAttributeNS(null,"fill-rule","nonzero");var ft=a.createNS("http://www.w3.org/2000/svg","g");ft.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ft.setAttributeNS(null,"fill","#000000");for(var St=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],Ht=0,tr=St;Ht<tr.length;Ht+=1){var ur=tr[Ht],Er=a.createNS("http://www.w3.org/2000/svg","ellipse");Er.setAttributeNS(null,"opacity","0.04"),Er.setAttributeNS(null,"cx","10.5"),Er.setAttributeNS(null,"cy","5.80029008"),Er.setAttributeNS(null,"rx",ur.rx),Er.setAttributeNS(null,"ry",ur.ry),ft.appendChild(Er)}var Wr=a.createNS("http://www.w3.org/2000/svg","g");Wr.setAttributeNS(null,"fill",this._color);var jr=a.createNS("http://www.w3.org/2000/svg","path");jr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Wr.appendChild(jr);var Gr=a.createNS("http://www.w3.org/2000/svg","g");Gr.setAttributeNS(null,"opacity","0.25"),Gr.setAttributeNS(null,"fill","#000000");var qr=a.createNS("http://www.w3.org/2000/svg","path");qr.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Gr.appendChild(qr);var dn=a.createNS("http://www.w3.org/2000/svg","g");dn.setAttributeNS(null,"transform","translate(6.0, 7.0)"),dn.setAttributeNS(null,"fill","#FFFFFF");var Cn=a.createNS("http://www.w3.org/2000/svg","g");Cn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Vn=a.createNS("http://www.w3.org/2000/svg","circle");Vn.setAttributeNS(null,"fill","#000000"),Vn.setAttributeNS(null,"opacity","0.25"),Vn.setAttributeNS(null,"cx","5.5"),Vn.setAttributeNS(null,"cy","5.5"),Vn.setAttributeNS(null,"r","5.4999962");var Qn=a.createNS("http://www.w3.org/2000/svg","circle");Qn.setAttributeNS(null,"fill","#FFFFFF"),Qn.setAttributeNS(null,"cx","5.5"),Qn.setAttributeNS(null,"cy","5.5"),Qn.setAttributeNS(null,"r","5.4999962"),Cn.appendChild(Vn),Cn.appendChild(Qn),Ze.appendChild(ft),Ze.appendChild(Wr),Ze.appendChild(Gr),Ze.appendChild(dn),Ze.appendChild(Cn),Ce.appendChild(Ze),this._element.appendChild(Ce),this._offset=t.Point.convert(de&&de.offset||[0,-14])}else this._element=de.element,this._offset=t.Point.convert(de&&de.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(na){na.preventDefault()}),this._element.addEventListener("mousedown",function(na){na.preventDefault()}),this._element.addEventListener("focus",function(){var na=ge._map.getContainer();na.scrollTop=0,na.scrollLeft=0}),_h(this._element,this._anchor,"marker"),this._popup=null}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.addTo=function(q){return this.remove(),this._map=q,q.getCanvasContainer().appendChild(this._element),q.on("move",this._update),q.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},X.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),a.remove(this._element),this._popup&&this._popup.remove(),this},X.prototype.getLngLat=function(){return this._lngLat},X.prototype.setLngLat=function(q){return this._lngLat=t.LngLat.convert(q),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},X.prototype.getElement=function(){return this._element},X.prototype.setPopup=function(q){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),q){if(!("offset"in q.options)){var ge=41-5.8/2,Ce=13.5,Pe=Math.sqrt(Math.pow(Ce,2)/2);q.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-ge],"bottom-left":[Pe,(ge-Ce+Pe)*-1],"bottom-right":[-Pe,(ge-Ce+Pe)*-1],left:[Ce,(ge-Ce)*-1],right:[-Ce,(ge-Ce)*-1]}:this._offset}this._popup=q,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},X.prototype._onKeyPress=function(q){var ge=q.code,Ce=q.charCode||q.keyCode;(ge==="Space"||ge==="Enter"||Ce===32||Ce===13)&&this.togglePopup()},X.prototype._onMapClick=function(q){var ge=q.originalEvent.target,Ce=this._element;this._popup&&(ge===Ce||Ce.contains(ge))&&this.togglePopup()},X.prototype.getPopup=function(){return this._popup},X.prototype.togglePopup=function(){var q=this._popup;if(q)q.isOpen()?q.remove():q.addTo(this._map);else return this;return this},X.prototype._update=function(q){if(!!this._map){this._map.transform.renderWorldCopies&&(this._lngLat=gf(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var ge="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?ge="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(ge="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Ce="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Ce="rotateX(0deg)":this._pitchAlignment==="map"&&(Ce="rotateX("+this._map.getPitch()+"deg)"),(!q||q.type==="moveend")&&(this._pos=this._pos.round()),a.setTransform(this._element,jc[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Ce+" "+ge)}},X.prototype.getOffset=function(){return this._offset},X.prototype.setOffset=function(q){return this._offset=t.Point.convert(q),this._update(),this},X.prototype._onMove=function(q){this._pos=q.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},X.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new t.Event("dragend")),this._state="inactive"},X.prototype._addDragHandler=function(q){this._element.contains(q.originalEvent.target)&&(q.preventDefault(),this._positionDelta=q.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},X.prototype.setDraggable=function(q){return this._draggable=!!q,this._map&&(q?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},X.prototype.isDraggable=function(){return this._draggable},X.prototype.setRotation=function(q){return this._rotation=q||0,this._update(),this},X.prototype.getRotation=function(){return this._rotation},X.prototype.setRotationAlignment=function(q){return this._rotationAlignment=q||"auto",this._update(),this},X.prototype.getRotationAlignment=function(){return this._rotationAlignment},X.prototype.setPitchAlignment=function(q){return this._pitchAlignment=q&&q!=="auto"?q:this._rotationAlignment,this._update(),this},X.prototype.getPitchAlignment=function(){return this._pitchAlignment},X}(t.Evented),kv={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Vf;function Xc(ve){Vf!==void 0?ve(Vf):t.window.navigator.permissions!==void 0?t.window.navigator.permissions.query({name:"geolocation"}).then(function(X){Vf=X.state!=="denied",ve(Vf)}):(Vf=!!t.window.navigator.geolocation,ve(Vf))}var Tc=0,Hf=!1,Cv=function(ve){function X(de){ve.call(this),this.options=t.extend({},kv,de),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.onAdd=function(q){return this._map=q,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),Xc(this._setupUI),this._container},X.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),a.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Tc=0,Hf=!1},X.prototype._isOutOfMapMaxBounds=function(q){var ge=this._map.getMaxBounds(),Ce=q.coords;return ge&&(Ce.longitude<ge.getWest()||Ce.longitude>ge.getEast()||Ce.latitude<ge.getSouth()||Ce.latitude>ge.getNorth())},X.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},X.prototype._onSuccess=function(q){if(!!this._map){if(this._isOutOfMapMaxBounds(q)){this._setErrorState(),this.fire(new t.Event("outofmaxbounds",q)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=q,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(q),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(q),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",q)),this._finish()}},X.prototype._updateCamera=function(q){var ge=new t.LngLat(q.coords.longitude,q.coords.latitude),Ce=q.coords.accuracy,Pe=this._map.getBearing(),Ze=t.extend({bearing:Pe},this.options.fitBoundsOptions);this._map.fitBounds(ge.toBounds(Ce),Ze,{geolocateSource:!0})},X.prototype._updateMarker=function(q){if(q){var ge=new t.LngLat(q.coords.longitude,q.coords.latitude);this._accuracyCircleMarker.setLngLat(ge).addTo(this._map),this._userLocationDotMarker.setLngLat(ge).addTo(this._map),this._accuracy=q.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},X.prototype._updateCircleRadius=function(){var q=this._map._container.clientHeight/2,ge=this._map.unproject([0,q]),Ce=this._map.unproject([1,q]),Pe=ge.distanceTo(Ce),Ze=Math.ceil(2*this._accuracy/Pe);this._circleElement.style.width=Ze+"px",this._circleElement.style.height=Ze+"px"},X.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},X.prototype._onError=function(q){if(!!this._map){if(this.options.trackUserLocation)if(q.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var ge=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=ge,this._geolocateButton.setAttribute("aria-label",ge),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(q.code===3&&Hf)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",q)),this._finish()}},X.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},X.prototype._setupUI=function(q){var ge=this;if(this._container.addEventListener("contextmenu",function(Ze){return Ze.preventDefault()}),this._geolocateButton=a.create("button","mapboxgl-ctrl-geolocate",this._container),a.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",q===!1){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Ce=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Ce,this._geolocateButton.setAttribute("aria-label",Ce)}else{var Pe=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Pe,this._geolocateButton.setAttribute("aria-label",Pe)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new wc(this._dotElement),this._circleElement=a.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new wc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Ze){var ft=Ze.originalEvent&&Ze.originalEvent.type==="resize";!Ze.geolocateSource&&ge._watchState==="ACTIVE_LOCK"&&!ft&&(ge._watchState="BACKGROUND",ge._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ge._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),ge.fire(new t.Event("trackuserlocationend")))})},X.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Tc--,Hf=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Tc++;var q;Tc>1?(q={maximumAge:6e5,timeout:0},Hf=!0):(q=this.options.positionOptions,Hf=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,q)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},X.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},X}(t.Evented),Xp={maxWidth:100,unit:"metric"},Gf=function(X){this.options=t.extend({},Xp,X),t.bindAll(["_onMove","setUnit"],this)};Gf.prototype.getDefaultPosition=function(){return"bottom-left"},Gf.prototype._onMove=function(){Ev(this._map,this._container,this.options)},Gf.prototype.onAdd=function(X){return this._map=X,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",X.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Gf.prototype.onRemove=function(){a.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Gf.prototype.setUnit=function(X){this.options.unit=X,Ev(this._map,this._container,this.options)};function Ev(ve,X,de){var q=de&&de.maxWidth||100,ge=ve._container.clientHeight/2,Ce=ve.unproject([0,ge]),Pe=ve.unproject([q,ge]),Ze=Ce.distanceTo(Pe);if(de&&de.unit==="imperial"){var ft=3.2808*Ze;if(ft>5280){var St=ft/5280;Ac(X,q,St,ve._getUIString("ScaleControl.Miles"))}else Ac(X,q,ft,ve._getUIString("ScaleControl.Feet"))}else if(de&&de.unit==="nautical"){var Ht=Ze/1852;Ac(X,q,Ht,ve._getUIString("ScaleControl.NauticalMiles"))}else Ze>=1e3?Ac(X,q,Ze/1e3,ve._getUIString("ScaleControl.Kilometers")):Ac(X,q,Ze,ve._getUIString("ScaleControl.Meters"))}function Ac(ve,X,de,q){var ge=Kp(de),Ce=ge/de;ve.style.width=X*Ce+"px",ve.innerHTML=ge+"&nbsp;"+q}function Zp(ve){var X=Math.pow(10,Math.ceil(-Math.log(ve)/Math.LN10));return Math.round(ve*X)/X}function Kp(ve){var X=Math.pow(10,(""+Math.floor(ve)).length-1),de=ve/X;return de=de>=10?10:de>=5?5:de>=3?3:de>=2?2:de>=1?1:Zp(de),X*de}var Cu=function(X){this._fullscreen=!1,X&&X.container&&(X.container instanceof t.window.HTMLElement?this._container=X.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};Cu.prototype.onAdd=function(X){return this._map=X,this._container||(this._container=this._map.getContainer()),this._controlContainer=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Cu.prototype.onRemove=function(){a.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Cu.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Cu.prototype._setupUI=function(){var X=this._fullscreenButton=a.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);a.create("span","mapboxgl-ctrl-icon",X).setAttribute("aria-hidden",!0),X.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Cu.prototype._updateTitle=function(){var X=this._getTitle();this._fullscreenButton.setAttribute("aria-label",X),this._fullscreenButton.title=X},Cu.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Cu.prototype._isFullscreen=function(){return this._fullscreen},Cu.prototype._changeIcon=function(){var X=t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement;X===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Cu.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Jp={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},$p=function(ve){function X(de){ve.call(this),this.options=t.extend(Object.create(Jp),de),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.addTo=function(q){return this._map&&this.remove(),this._map=q,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},X.prototype.isOpen=function(){return!!this._map},X.prototype.remove=function(){return this._content&&a.remove(this._content),this._container&&(a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},X.prototype.getLngLat=function(){return this._lngLat},X.prototype.setLngLat=function(q){return this._lngLat=t.LngLat.convert(q),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},X.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},X.prototype.getElement=function(){return this._container},X.prototype.setText=function(q){return this.setDOMContent(t.window.document.createTextNode(q))},X.prototype.setHTML=function(q){var ge=t.window.document.createDocumentFragment(),Ce=t.window.document.createElement("body"),Pe;for(Ce.innerHTML=q;Pe=Ce.firstChild,!!Pe;)ge.appendChild(Pe);return this.setDOMContent(ge)},X.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},X.prototype.setMaxWidth=function(q){return this.options.maxWidth=q,this._update(),this},X.prototype.setDOMContent=function(q){return this._createContent(),this._content.appendChild(q),this._update(),this},X.prototype.addClassName=function(q){this._container&&this._container.classList.add(q)},X.prototype.removeClassName=function(q){this._container&&this._container.classList.remove(q)},X.prototype.toggleClassName=function(q){if(this._container)return this._container.classList.toggle(q)},X.prototype._createContent=function(){this._content&&a.remove(this._content),this._content=a.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=a.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},X.prototype._onMouseUp=function(q){this._update(q.point)},X.prototype._onMouseMove=function(q){this._update(q.point)},X.prototype._onDrag=function(q){this._update(q.point)},X.prototype._update=function(q){var ge=this,Ce=this._lngLat||this._trackPointer;if(!(!this._map||!Ce||!this._content)&&(this._container||(this._container=a.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=a.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Er){return ge._container.classList.add(Er)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=gf(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!q))){var Pe=this._pos=this._trackPointer&&q?q:this._map.project(this._lngLat),Ze=this.options.anchor,ft=Lv(this.options.offset);if(!Ze){var St=this._container.offsetWidth,Ht=this._container.offsetHeight,tr;Pe.y+ft.bottom.y<Ht?tr=["top"]:Pe.y>this._map.transform.height-Ht?tr=["bottom"]:tr=[],Pe.x<St/2?tr.push("left"):Pe.x>this._map.transform.width-St/2&&tr.push("right"),tr.length===0?Ze="bottom":Ze=tr.join("-")}var ur=Pe.add(ft[Ze]).round();a.setTransform(this._container,jc[Ze]+" translate("+ur.x+"px,"+ur.y+"px)"),_h(this._container,Ze,"popup")}},X.prototype._onClose=function(){this.remove()},X}(t.Evented);function Lv(ve){if(ve)if(typeof ve=="number"){var X=Math.round(Math.sqrt(.5*Math.pow(ve,2)));return{center:new t.Point(0,0),top:new t.Point(0,ve),"top-left":new t.Point(X,X),"top-right":new t.Point(-X,X),bottom:new t.Point(0,-ve),"bottom-left":new t.Point(X,-X),"bottom-right":new t.Point(-X,-X),left:new t.Point(ve,0),right:new t.Point(-ve,0)}}else if(ve instanceof t.Point||Array.isArray(ve)){var de=t.Point.convert(ve);return{center:de,top:de,"top-left":de,"top-right":de,bottom:de,"bottom-left":de,"bottom-right":de,left:de,right:de}}else return{center:t.Point.convert(ve.center||[0,0]),top:t.Point.convert(ve.top||[0,0]),"top-left":t.Point.convert(ve["top-left"]||[0,0]),"top-right":t.Point.convert(ve["top-right"]||[0,0]),bottom:t.Point.convert(ve.bottom||[0,0]),"bottom-left":t.Point.convert(ve["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(ve["bottom-right"]||[0,0]),left:t.Point.convert(ve.left||[0,0]),right:t.Point.convert(ve.right||[0,0])};else return Lv(new t.Point(0,0))}var Qp={version:t.version,supported:n,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:Mv,NavigationControl:df,GeolocateControl:Cv,AttributionControl:lu,ScaleControl:Gf,FullscreenControl:Cu,Popup:$p,Marker:wc,Style:hs,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:Or,clearPrewarmedResources:nn,get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(ve){t.config.ACCESS_TOKEN=ve},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(ve){t.config.API_URL=ve},get workerCount(){return wr.workerCount},set workerCount(ve){wr.workerCount=ve},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(ve){t.config.MAX_PARALLEL_IMAGE_REQUESTS=ve},clearStorage:function(X){t.clearTileCache(X)},workerUrl:""};return Qp}),c})},{}],240:[function(e,k,z){k.exports=Math.log2||function(l){return Math.log(l)*Math.LOG2E}},{}],241:[function(e,k,z){k.exports=o;var l=e("mouse-event");function o(c,p){p||(p=c,c=window);var t=0,n=0,a=0,i={shift:!1,alt:!1,control:!1,meta:!1},r=!1;function f(S){var w=!1;return"altKey"in S&&(w=w||S.altKey!==i.alt,i.alt=!!S.altKey),"shiftKey"in S&&(w=w||S.shiftKey!==i.shift,i.shift=!!S.shiftKey),"ctrlKey"in S&&(w=w||S.ctrlKey!==i.control,i.control=!!S.ctrlKey),"metaKey"in S&&(w=w||S.metaKey!==i.meta,i.meta=!!S.metaKey),w}function u(S,w){var T=l.x(w),_=l.y(w);"buttons"in w&&(S=w.buttons|0),(S!==t||T!==n||_!==a||f(w))&&(t=S|0,n=T||0,a=_||0,p&&p(t,n,a,i))}function s(S){u(0,S)}function h(){(t||n||a||i.shift||i.alt||i.meta||i.control)&&(n=a=0,t=0,i.shift=i.alt=i.control=i.meta=!1,p&&p(0,0,0,i))}function d(S){f(S)&&p&&p(t,n,a,i)}function y(S){l.buttons(S)===0?u(0,S):u(t,S)}function m(S){u(t|l.buttons(S),S)}function g(S){u(t&~l.buttons(S),S)}function x(){r||(r=!0,c.addEventListener("mousemove",y),c.addEventListener("mousedown",m),c.addEventListener("mouseup",g),c.addEventListener("mouseleave",s),c.addEventListener("mouseenter",s),c.addEventListener("mouseout",s),c.addEventListener("mouseover",s),c.addEventListener("blur",h),c.addEventListener("keyup",d),c.addEventListener("keydown",d),c.addEventListener("keypress",d),c!==window&&(window.addEventListener("blur",h),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}function A(){!r||(r=!1,c.removeEventListener("mousemove",y),c.removeEventListener("mousedown",m),c.removeEventListener("mouseup",g),c.removeEventListener("mouseleave",s),c.removeEventListener("mouseenter",s),c.removeEventListener("mouseout",s),c.removeEventListener("mouseover",s),c.removeEventListener("blur",h),c.removeEventListener("keyup",d),c.removeEventListener("keydown",d),c.removeEventListener("keypress",d),c!==window&&(window.removeEventListener("blur",h),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))}x();var b={element:c};return Object.defineProperties(b,{enabled:{get:function(){return r},set:function(S){S?x():A()},enumerable:!0},buttons:{get:function(){return t},enumerable:!0},x:{get:function(){return n},enumerable:!0},y:{get:function(){return a},enumerable:!0},mods:{get:function(){return i},enumerable:!0}}),b}},{"mouse-event":243}],242:[function(e,k,z){var l={left:0,top:0};k.exports=o;function o(p,t,n){t=t||p.currentTarget||p.srcElement,Array.isArray(n)||(n=[0,0]);var a=p.clientX||0,i=p.clientY||0,r=c(t);return n[0]=a-r.left,n[1]=i-r.top,n}function c(p){return p===window||p===document||p===document.body?l:p.getBoundingClientRect()}},{}],243:[function(e,k,z){function l(t){if(typeof t=="object"){if("buttons"in t)return t.buttons;if("which"in t){var n=t.which;if(n===2)return 4;if(n===3)return 2;if(n>0)return 1<<n-1}else if("button"in t){var n=t.button;if(n===1)return 4;if(n===2)return 2;if(n>=0)return 1<<n}}return 0}z.buttons=l;function o(t){return t.target||t.srcElement||window}z.element=o;function c(t){if(typeof t=="object"){if("offsetX"in t)return t.offsetX;var n=o(t),a=n.getBoundingClientRect();return t.clientX-a.left}return 0}z.x=c;function p(t){if(typeof t=="object"){if("offsetY"in t)return t.offsetY;var n=o(t),a=n.getBoundingClientRect();return t.clientY-a.top}return 0}z.y=p},{}],244:[function(e,k,z){var l=e("to-px");k.exports=o;function o(c,p,t){typeof c=="function"&&(t=!!p,p=c,c=window);var n=l("ex",c),a=function(i){t&&i.preventDefault();var r=i.deltaX||0,f=i.deltaY||0,u=i.deltaZ||0,s=i.deltaMode,h=1;switch(s){case 1:h=n;break;case 2:h=window.innerHeight;break}if(r*=h,f*=h,u*=h,r||f||u)return p(r,f,u,i)};return c.addEventListener("wheel",a),a}},{"to-px":314}],245:[function(e,k,z){(function(l,o){(function(){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(p,t,n){t[p]=t[p]||n(),typeof k!="undefined"&&k.exports&&(k.exports=t[p])})("Promise",typeof l!="undefined"?l:this,function(){var p,t,n,a=Object.prototype.toString,i=typeof o!="undefined"?function(S){return o(S)}:setTimeout;try{Object.defineProperty({},"x",{}),p=function(S,w,T,_){return Object.defineProperty(S,w,{value:T,writable:!0,configurable:_!==!1})}}catch{p=function(w,T,_){return w[T]=_,w}}n=function(){var S,w,T;function _(v,P){this.fn=v,this.self=P,this.next=void 0}return{add:function(P,M){T=new _(P,M),w?w.next=T:S=T,w=T,T=void 0},drain:function(){var P=S;for(S=w=t=void 0;P;)P.fn.call(P.self),P=P.next}}}();function r(b,S){n.add(b,S),t||(t=i(n.drain))}function f(b){var S,w=typeof b;return b!=null&&(w=="object"||w=="function")&&(S=b.then),typeof S=="function"?S:!1}function u(){for(var b=0;b<this.chain.length;b++)s(this,this.state===1?this.chain[b].success:this.chain[b].failure,this.chain[b]);this.chain.length=0}function s(b,S,w){var T,_;try{S===!1?w.reject(b.msg):(S===!0?T=b.msg:T=S.call(void 0,b.msg),T===w.promise?w.reject(TypeError("Promise-chain cycle")):(_=f(T))?_.call(T,w.resolve,w.reject):w.resolve(T))}catch(v){w.reject(v)}}function h(b){var S,w=this;if(!w.triggered){w.triggered=!0,w.def&&(w=w.def);try{(S=f(b))?r(function(){var T=new m(w);try{S.call(b,function(){h.apply(T,arguments)},function(){d.apply(T,arguments)})}catch(_){d.call(T,_)}}):(w.msg=b,w.state=1,w.chain.length>0&&r(u,w))}catch(T){d.call(new m(w),T)}}}function d(b){var S=this;S.triggered||(S.triggered=!0,S.def&&(S=S.def),S.msg=b,S.state=2,S.chain.length>0&&r(u,S))}function y(b,S,w,T){for(var _=0;_<S.length;_++)(function(P){b.resolve(S[P]).then(function(E){w(P,E)},T)})(_)}function m(b){this.def=b,this.triggered=!1}function g(b){this.promise=b,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function x(b){if(typeof b!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var S=new g(this);this.then=function(T,_){var v={success:typeof T=="function"?T:!0,failure:typeof _=="function"?_:!1};return v.promise=new this.constructor(function(M,E){if(typeof M!="function"||typeof E!="function")throw TypeError("Not a function");v.resolve=M,v.reject=E}),S.chain.push(v),S.state!==0&&r(u,S),v.promise},this.catch=function(T){return this.then(void 0,T)};try{b.call(void 0,function(T){h.call(S,T)},function(T){d.call(S,T)})}catch(w){d.call(S,w)}}var A=p({},"constructor",x,!1);return x.prototype=A,p(A,"__NPO__",0,!1),p(x,"resolve",function(S){var w=this;return S&&typeof S=="object"&&S.__NPO__===1?S:new w(function(_,v){if(typeof _!="function"||typeof v!="function")throw TypeError("Not a function");_(S)})}),p(x,"reject",function(S){return new this(function(T,_){if(typeof T!="function"||typeof _!="function")throw TypeError("Not a function");_(S)})}),p(x,"all",function(S){var w=this;return a.call(S)!="[object Array]"?w.reject(TypeError("Not an array")):S.length===0?w.resolve([]):new w(function(_,v){if(typeof _!="function"||typeof v!="function")throw TypeError("Not a function");var P=S.length,M=Array(P),E=0;y(w,S,function(N,O){M[N]=O,++E===P&&_(M)},v)})}),p(x,"race",function(S){var w=this;return a.call(S)!="[object Array]"?w.reject(TypeError("Not an array")):new w(function(_,v){if(typeof _!="function"||typeof v!="function")throw TypeError("Not a function");y(w,S,function(M,E){_(E)},v)})}),x})}).call(this)}).call(this,typeof lo!="undefined"?lo:typeof self!="undefined"?self:typeof window!="undefined"?window:{},e("timers").setImmediate)},{timers:311}],246:[function(e,k,z){var l=Math.PI,o=i(120);k.exports=c;function c(r){for(var f,u=[],s=0,h=0,d=0,y=0,m=null,g=null,x=0,A=0,b=0,S=r.length;b<S;b++){var w=r[b],T=w[0];switch(T){case"M":d=w[1],y=w[2];break;case"A":w=n(x,A,w[1],w[2],i(w[3]),w[4],w[5],w[6],w[7]),w.unshift("C"),w.length>7&&(u.push(w.splice(0,7)),w.unshift("C"));break;case"S":var _=x,v=A;(f=="C"||f=="S")&&(_+=_-s,v+=v-h),w=["C",_,v,w[1],w[2],w[3],w[4]];break;case"T":f=="Q"||f=="T"?(m=x*2-m,g=A*2-g):(m=x,g=A),w=t(x,A,m,g,w[1],w[2]);break;case"Q":m=w[1],g=w[2],w=t(x,A,w[1],w[2],w[3],w[4]);break;case"L":w=p(x,A,w[1],w[2]);break;case"H":w=p(x,A,w[1],A);break;case"V":w=p(x,A,x,w[1]);break;case"Z":w=p(x,A,d,y);break}f=T,x=w[w.length-2],A=w[w.length-1],w.length>4?(s=w[w.length-4],h=w[w.length-3]):(s=x,h=A),u.push(w)}return u}function p(r,f,u,s){return["C",r,f,u,s,u,s]}function t(r,f,u,s,h,d){return["C",r/3+2/3*u,f/3+2/3*s,h/3+2/3*u,d/3+2/3*s,h,d]}function n(r,f,u,s,h,d,y,m,g,x){if(x)E=x[0],D=x[1],P=x[2],M=x[3];else{var A=a(r,f,-h);r=A.x,f=A.y,A=a(m,g,-h),m=A.x,g=A.y;var b=(r-m)/2,S=(f-g)/2,w=b*b/(u*u)+S*S/(s*s);w>1&&(w=Math.sqrt(w),u=w*u,s=w*s);var T=u*u,_=s*s,v=(d==y?-1:1)*Math.sqrt(Math.abs((T*_-T*S*S-_*b*b)/(T*S*S+_*b*b)));v==1/0&&(v=1);var P=v*u*S/s+(r+m)/2,M=v*-s*b/u+(f+g)/2,E=Math.asin(((f-M)/s).toFixed(9)),D=Math.asin(((g-M)/s).toFixed(9));E=r<P?l-E:E,D=m<P?l-D:D,E<0&&(E=l*2+E),D<0&&(D=l*2+D),y&&E>D&&(E=E-l*2),!y&&D>E&&(D=D-l*2)}if(Math.abs(D-E)>o){var N=D,O=m,I=g;D=E+o*(y&&D>E?1:-1),m=P+u*Math.cos(D),g=M+s*Math.sin(D);var F=n(m,g,u,s,h,0,y,O,I,[D,N,P,M])}var V=Math.tan((D-E)/4),U=4/3*u*V,j=4/3*s*V,Z=[2*r-(r+U*Math.sin(E)),2*f-(f-j*Math.cos(E)),m+U*Math.sin(D),g-j*Math.cos(D),m,g];if(x)return Z;F&&(Z=Z.concat(F));for(var te=0;te<Z.length;){var re=a(Z[te],Z[te+1],h);Z[te++]=re.x,Z[te++]=re.y}return Z}function a(r,f,u){return{x:r*Math.cos(u)-f*Math.sin(u),y:r*Math.sin(u)+f*Math.cos(u)}}function i(r){return r*(l/180)}},{}],247:[function(e,k,z){var l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;function p(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function t(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de",Object.getOwnPropertyNames(n)[0]==="5")return!1;for(var a={},i=0;i<10;i++)a["_"+String.fromCharCode(i)]=i;var r=Object.getOwnPropertyNames(a).map(function(u){return a[u]});if(r.join("")!=="0123456789")return!1;var f={};return"abcdefghijklmnopqrst".split("").forEach(function(u){f[u]=u}),Object.keys(Object.assign({},f)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}k.exports=t()?Object.assign:function(n,a){for(var i,r=p(n),f,u=1;u<arguments.length;u++){i=Object(arguments[u]);for(var s in i)o.call(i,s)&&(r[s]=i[s]);if(l){f=l(i);for(var h=0;h<f.length;h++)c.call(i,f[h])&&(r[f[h]]=i[f[h]])}}return r}},{}],248:[function(e,k,z){function l(p,t){if(typeof p!="string")return[p];var n=[p];typeof t=="string"||Array.isArray(t)?t={brackets:t}:t||(t={});var a=t.brackets?Array.isArray(t.brackets)?t.brackets:[t.brackets]:["{}","[]","()"],i=t.escape||"___",r=!!t.flat;a.forEach(function(s){var h=new RegExp(["\\",s[0],"[^\\",s[0],"\\",s[1],"]*\\",s[1]].join("")),d=[];function y(m,g,x){var A=n.push(m.slice(s[0].length,-s[1].length))-1;return d.push(A),i+A+i}n.forEach(function(m,g){for(var x,A=0;m!=x;)if(x=m,m=m.replace(h,y),A++>1e4)throw Error("References have circular dependency. Please, check them.");n[g]=m}),d=d.reverse(),n=n.map(function(m){return d.forEach(function(g){m=m.replace(new RegExp("(\\"+i+g+"\\"+i+")","g"),s[0]+"$1"+s[1])}),m})});var f=new RegExp("\\"+i+"([0-9]+)\\"+i);function u(s,h,d){for(var y=[],m,g=0;m=f.exec(s);){if(g++>1e4)throw Error("Circular references in parenthesis");y.push(s.slice(0,m.index)),y.push(u(h[m[1]],h)),s=s.slice(m.index+m[0].length)}return y.push(s),y}return r?n:u(n[0],n)}function o(p,t){if(t&&t.flat){var n=t&&t.escape||"___",a=p[0],i;if(!a)return"";for(var r=new RegExp("\\"+n+"([0-9]+)\\"+n),f=0;a!=i;){if(f++>1e4)throw Error("Circular references in "+p);i=a,a=a.replace(r,u)}return a}return p.reduce(function s(h,d){return Array.isArray(d)&&(d=d.reduce(s,"")),h+d},"");function u(s,h){if(p[h]==null)throw Error("Reference "+h+"is undefined");return p[h]}}function c(p,t){return Array.isArray(p)?o(p,t):l(p,t)}c.parse=l,c.stringify=o,k.exports=c},{}],249:[function(e,k,z){var l=e("pick-by-alias");k.exports=o;function o(c){var p;return arguments.length>1&&(c=arguments),typeof c=="string"?c=c.split(/\s/).map(parseFloat):typeof c=="number"&&(c=[c]),c.length&&typeof c[0]=="number"?c.length===1?p={width:c[0],height:c[0],x:0,y:0}:c.length===2?p={width:c[0],height:c[1],x:0,y:0}:p={x:c[0],y:c[1],width:c[2]-c[0]||0,height:c[3]-c[1]||0}:c&&(c=l(c,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),p={x:c.left||0,y:c.top||0},c.width==null?c.right?p.width=c.right-p.x:p.width=0:p.width=c.width,c.height==null?c.bottom?p.height=c.bottom-p.y:p.height=0:p.height=c.height),p}},{"pick-by-alias":253}],250:[function(e,k,z){k.exports=c;var l={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},o=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function c(n){var a=[];return n.replace(o,function(i,r,f){var u=r.toLowerCase();for(f=t(f),u=="m"&&f.length>2&&(a.push([r].concat(f.splice(0,2))),u="l",r=r=="m"?"l":"L");;){if(f.length==l[u])return f.unshift(r),a.push(f);if(f.length<l[u])throw new Error("malformed path data");a.push([r].concat(f.splice(0,l[u])))}}),a}var p=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function t(n){var a=n.match(p);return a?a.map(Number):[]}},{}],251:[function(e,k,z){k.exports=function(o,c){c||(c=[0,""]),o=String(o);var p=parseFloat(o,10);return c[0]=p,c[1]=o.match(/[\d.\-\+]*\s*(.*)/)[1]||"",c}},{}],252:[function(e,k,z){(function(l){(function(){(function(){var o,c,p,t,n,a;typeof performance!="undefined"&&performance!==null&&performance.now?k.exports=function(){return performance.now()}:typeof l!="undefined"&&l!==null&&l.hrtime?(k.exports=function(){return(o()-n)/1e6},c=l.hrtime,o=function(){var i;return i=c(),i[0]*1e9+i[1]},t=o(),a=l.uptime()*1e9,n=t-a):Date.now?(k.exports=function(){return Date.now()-p},p=Date.now()):(k.exports=function(){return new Date().getTime()-p},p=new Date().getTime())}).call(this)}).call(this)}).call(this,e("_process"))},{_process:277}],253:[function(e,k,z){k.exports=function(p,t,n){var a={},i,r;if(typeof t=="string"&&(t=o(t)),Array.isArray(t)){var f={};for(r=0;r<t.length;r++)f[t[r]]=!0;t=f}for(i in t)t[i]=o(t[i]);var u={};for(i in t){var s=t[i];if(Array.isArray(s))for(r=0;r<s.length;r++){var h=s[r];if(n&&(u[h]=!0),h in p){if(a[i]=p[h],n)for(var d=r;d<s.length;d++)u[s[d]]=!0;break}}else i in p&&(t[i]&&(a[i]=p[i]),n&&(u[i]=!0))}if(n)for(i in p)u[i]||(a[i]=p[i]);return a};var l={};function o(c){return l[c]?l[c]:(typeof c=="string"&&(c=l[c]=c.split(/\s*,\s*|\s+/)),c)}},{}],254:[function(e,k,z){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var l=e("./lib/build-log"),o=e("./lib/epsilon"),c=e("./lib/intersecter"),p=e("./lib/segment-chainer"),t=e("./lib/segment-selector"),n=e("./lib/geojson"),a=!1,i=o(),r;r={buildLog:function(u){return u===!0?a=l():u===!1&&(a=!1),a===!1?!1:a.list},epsilon:function(u){return i.epsilon(u)},segments:function(u){var s=c(!0,i,a);return u.regions.forEach(s.addRegion),{segments:s.calculate(u.inverted),inverted:u.inverted}},combine:function(u,s){var h=c(!1,i,a);return{combined:h.calculate(u.segments,u.inverted,s.segments,s.inverted),inverted1:u.inverted,inverted2:s.inverted}},selectUnion:function(u){return{segments:t.union(u.combined,a),inverted:u.inverted1||u.inverted2}},selectIntersect:function(u){return{segments:t.intersect(u.combined,a),inverted:u.inverted1&&u.inverted2}},selectDifference:function(u){return{segments:t.difference(u.combined,a),inverted:u.inverted1&&!u.inverted2}},selectDifferenceRev:function(u){return{segments:t.differenceRev(u.combined,a),inverted:!u.inverted1&&u.inverted2}},selectXor:function(u){return{segments:t.xor(u.combined,a),inverted:u.inverted1!==u.inverted2}},polygon:function(u){return{regions:p(u.segments,i,a),inverted:u.inverted}},polygonFromGeoJSON:function(u){return n.toPolygon(r,u)},polygonToGeoJSON:function(u){return n.fromPolygon(r,i,u)},union:function(u,s){return f(u,s,r.selectUnion)},intersect:function(u,s){return f(u,s,r.selectIntersect)},difference:function(u,s){return f(u,s,r.selectDifference)},differenceRev:function(u,s){return f(u,s,r.selectDifferenceRev)},xor:function(u,s){return f(u,s,r.selectXor)}};function f(u,s,h){var d=r.segments(u),y=r.segments(s),m=r.combine(d,y),g=h(m);return r.polygon(g)}typeof window=="object"&&(window.PolyBool=r),k.exports=r},{"./lib/build-log":255,"./lib/epsilon":256,"./lib/geojson":257,"./lib/intersecter":258,"./lib/segment-chainer":260,"./lib/segment-selector":261}],255:[function(e,k,z){function l(){var o,c=0,p=!1;function t(n,a){return o.list.push({type:n,data:a?JSON.parse(JSON.stringify(a)):void 0}),o}return o={list:[],segmentId:function(){return c++},checkIntersection:function(n,a){return t("check",{seg1:n,seg2:a})},segmentChop:function(n,a){return t("div_seg",{seg:n,pt:a}),t("chop",{seg:n,pt:a})},statusRemove:function(n){return t("pop_seg",{seg:n})},segmentUpdate:function(n){return t("seg_update",{seg:n})},segmentNew:function(n,a){return t("new_seg",{seg:n,primary:a})},segmentRemove:function(n){return t("rem_seg",{seg:n})},tempStatus:function(n,a,i){return t("temp_status",{seg:n,above:a,below:i})},rewind:function(n){return t("rewind",{seg:n})},status:function(n,a,i){return t("status",{seg:n,above:a,below:i})},vert:function(n){return n===p?o:(p=n,t("vert",{x:n}))},log:function(n){return typeof n!="string"&&(n=JSON.stringify(n,!1,"  ")),t("log",{txt:n})},reset:function(){return t("reset")},selected:function(n){return t("selected",{segs:n})},chainStart:function(n){return t("chain_start",{seg:n})},chainRemoveHead:function(n,a){return t("chain_rem_head",{index:n,pt:a})},chainRemoveTail:function(n,a){return t("chain_rem_tail",{index:n,pt:a})},chainNew:function(n,a){return t("chain_new",{pt1:n,pt2:a})},chainMatch:function(n){return t("chain_match",{index:n})},chainClose:function(n){return t("chain_close",{index:n})},chainAddHead:function(n,a){return t("chain_add_head",{index:n,pt:a})},chainAddTail:function(n,a){return t("chain_add_tail",{index:n,pt:a})},chainConnect:function(n,a){return t("chain_con",{index1:n,index2:a})},chainReverse:function(n){return t("chain_rev",{index:n})},chainJoin:function(n,a){return t("chain_join",{index1:n,index2:a})},done:function(){return t("done")}},o}k.exports=l},{}],256:[function(e,k,z){function l(o){typeof o!="number"&&(o=1e-10);var c={epsilon:function(p){return typeof p=="number"&&(o=p),o},pointAboveOrOnLine:function(p,t,n){var a=t[0],i=t[1],r=n[0],f=n[1],u=p[0],s=p[1];return(r-a)*(s-i)-(f-i)*(u-a)>=-o},pointBetween:function(p,t,n){var a=p[1]-t[1],i=n[0]-t[0],r=p[0]-t[0],f=n[1]-t[1],u=r*i+a*f;if(u<o)return!1;var s=i*i+f*f;return!(u-s>-o)},pointsSameX:function(p,t){return Math.abs(p[0]-t[0])<o},pointsSameY:function(p,t){return Math.abs(p[1]-t[1])<o},pointsSame:function(p,t){return c.pointsSameX(p,t)&&c.pointsSameY(p,t)},pointsCompare:function(p,t){return c.pointsSameX(p,t)?c.pointsSameY(p,t)?0:p[1]<t[1]?-1:1:p[0]<t[0]?-1:1},pointsCollinear:function(p,t,n){var a=p[0]-t[0],i=p[1]-t[1],r=t[0]-n[0],f=t[1]-n[1];return Math.abs(a*f-r*i)<o},linesIntersect:function(p,t,n,a){var i=t[0]-p[0],r=t[1]-p[1],f=a[0]-n[0],u=a[1]-n[1],s=i*u-r*f;if(Math.abs(s)<o)return!1;var h=p[0]-n[0],d=p[1]-n[1],y=(f*d-u*h)/s,m=(i*d-r*h)/s,g={alongA:0,alongB:0,pt:[p[0]+y*i,p[1]+y*r]};return y<=-o?g.alongA=-2:y<o?g.alongA=-1:y-1<=-o?g.alongA=0:y-1<o?g.alongA=1:g.alongA=2,m<=-o?g.alongB=-2:m<o?g.alongB=-1:m-1<=-o?g.alongB=0:m-1<o?g.alongB=1:g.alongB=2,g},pointInsideRegion:function(p,t){for(var n=p[0],a=p[1],i=t[t.length-1][0],r=t[t.length-1][1],f=!1,u=0;u<t.length;u++){var s=t[u][0],h=t[u][1];h-a>o!=r-a>o&&(i-s)*(a-h)/(r-h)+s-n>o&&(f=!f),i=s,r=h}return f}};return c}k.exports=l},{}],257:[function(e,k,z){var l={toPolygon:function(o,c){function p(a){if(a.length<=0)return o.segments({inverted:!1,regions:[]});function i(u){var s=u.slice(0,u.length-1);return o.segments({inverted:!1,regions:[s]})}for(var r=i(a[0]),f=1;f<a.length;f++)r=o.selectDifference(o.combine(r,i(a[f])));return r}if(c.type==="Polygon")return o.polygon(p(c.coordinates));if(c.type==="MultiPolygon"){for(var t=o.segments({inverted:!1,regions:[]}),n=0;n<c.coordinates.length;n++)t=o.selectUnion(o.combine(t,p(c.coordinates[n])));return o.polygon(t)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(o,c,p){p=o.polygon(o.segments(p));function t(y,m){return c.pointInsideRegion([(y[0][0]+y[1][0])*.5,(y[0][1]+y[1][1])*.5],m)}function n(y){return{region:y,children:[]}}var a=n(null);function i(y,m){for(var g=0;g<y.children.length;g++){var x=y.children[g];if(t(m,x.region)){i(x,m);return}}for(var A=n(m),g=0;g<y.children.length;g++){var x=y.children[g];t(x.region,m)&&(A.children.push(x),y.children.splice(g,1),g--)}y.children.push(A)}for(var r=0;r<p.regions.length;r++){var f=p.regions[r];f.length<3||i(a,f)}function u(y,m){for(var g=0,x=y[y.length-1][0],A=y[y.length-1][1],b=[],S=0;S<y.length;S++){var w=y[S][0],T=y[S][1];b.push([w,T]),g+=T*x-w*A,x=w,A=T}var _=g<0;return _!==m&&b.reverse(),b.push([b[0][0],b[0][1]]),b}var s=[];function h(y){var m=[u(y.region,!1)];s.push(m);for(var g=0;g<y.children.length;g++)m.push(d(y.children[g]))}function d(y){for(var m=0;m<y.children.length;m++)h(y.children[m]);return u(y.region,!0)}for(var r=0;r<a.children.length;r++)h(a.children[r]);return s.length<=0?{type:"Polygon",coordinates:[]}:s.length==1?{type:"Polygon",coordinates:s[0]}:{type:"MultiPolygon",coordinates:s}}};k.exports=l},{}],258:[function(e,k,z){var l=e("./linked-list");function o(c,p,t){function n(g,x){return{id:t?t.segmentId():-1,start:g,end:x,myFill:{above:null,below:null},otherFill:null}}function a(g,x,A){return{id:t?t.segmentId():-1,start:g,end:x,myFill:{above:A.myFill.above,below:A.myFill.below},otherFill:null}}var i=l.create();function r(g,x,A,b,S,w){var T=p.pointsCompare(x,S);return T!==0?T:p.pointsSame(A,w)?0:g!==b?g?1:-1:p.pointAboveOrOnLine(A,b?S:w,b?w:S)?1:-1}function f(g,x){i.insertBefore(g,function(A){var b=r(g.isStart,g.pt,x,A.isStart,A.pt,A.other.pt);return b<0})}function u(g,x){var A=l.node({isStart:!0,pt:g.start,seg:g,primary:x,other:null,status:null});return f(A,g.end),A}function s(g,x,A){var b=l.node({isStart:!1,pt:x.end,seg:x,primary:A,other:g,status:null});g.other=b,f(b,g.pt)}function h(g,x){var A=u(g,x);return s(A,g,x),A}function d(g,x){t&&t.segmentChop(g.seg,x),g.other.remove(),g.seg.end=x,g.other.pt=x,f(g.other,g.pt)}function y(g,x){var A=a(x,g.seg.end,g.seg);return d(g,x),h(A,g.primary)}function m(g,x){var A=l.create();function b(F,V){var U=F.seg.start,j=F.seg.end,Z=V.seg.start,te=V.seg.end;return p.pointsCollinear(U,Z,te)?p.pointsCollinear(j,Z,te)||p.pointAboveOrOnLine(j,Z,te)?1:-1:p.pointAboveOrOnLine(U,Z,te)?1:-1}function S(F){return A.findTransition(function(V){var U=b(F,V.ev);return U>0})}function w(F,V){var U=F.seg,j=V.seg,Z=U.start,te=U.end,re=j.start,W=j.end;t&&t.checkIntersection(U,j);var J=p.linesIntersect(Z,te,re,W);if(J===!1){if(!p.pointsCollinear(Z,te,re)||p.pointsSame(Z,W)||p.pointsSame(te,re))return!1;var le=p.pointsSame(Z,re),ue=p.pointsSame(te,W);if(le&&ue)return V;var se=!le&&p.pointBetween(Z,re,W),G=!ue&&p.pointBetween(te,re,W);if(le)return G?y(V,te):y(F,W),V;se&&(ue||(G?y(V,te):y(F,W)),y(V,Z))}else J.alongA===0&&(J.alongB===-1?y(F,re):J.alongB===0?y(F,J.pt):J.alongB===1&&y(F,W)),J.alongB===0&&(J.alongA===-1?y(V,Z):J.alongA===0?y(V,J.pt):J.alongA===1&&y(V,te));return!1}for(var T=[];!i.isEmpty();){var _=i.getHead();if(t&&t.vert(_.pt[0]),_.isStart){let F=function(){if(P){var V=w(_,P);if(V)return V}return M?w(_,M):!1};t&&t.segmentNew(_.seg,_.primary);var v=S(_),P=v.before?v.before.ev:null,M=v.after?v.after.ev:null;t&&t.tempStatus(_.seg,P?P.seg:!1,M?M.seg:!1);var E=F();if(E){if(c){var D;_.seg.myFill.below===null?D=!0:D=_.seg.myFill.above!==_.seg.myFill.below,D&&(E.seg.myFill.above=!E.seg.myFill.above)}else E.seg.otherFill=_.seg.myFill;t&&t.segmentUpdate(E.seg),_.other.remove(),_.remove()}if(i.getHead()!==_){t&&t.rewind(_.seg);continue}if(c){var D;_.seg.myFill.below===null?D=!0:D=_.seg.myFill.above!==_.seg.myFill.below,M?_.seg.myFill.below=M.seg.myFill.above:_.seg.myFill.below=g,D?_.seg.myFill.above=!_.seg.myFill.below:_.seg.myFill.above=_.seg.myFill.below}else if(_.seg.otherFill===null){var N;M?_.primary===M.primary?N=M.seg.otherFill.above:N=M.seg.myFill.above:N=_.primary?x:g,_.seg.otherFill={above:N,below:N}}t&&t.status(_.seg,P?P.seg:!1,M?M.seg:!1),_.other.status=v.insert(l.node({ev:_}))}else{var O=_.status;if(O===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(A.exists(O.prev)&&A.exists(O.next)&&w(O.prev.ev,O.next.ev),t&&t.statusRemove(O.ev.seg),O.remove(),!_.primary){var I=_.seg.myFill;_.seg.myFill=_.seg.otherFill,_.seg.otherFill=I}T.push(_.seg)}i.getHead().remove()}return t&&t.done(),T}return c?{addRegion:function(g){for(var x,A=g[g.length-1],b=0;b<g.length;b++){x=A,A=g[b];var S=p.pointsCompare(x,A);S!==0&&h(n(S<0?x:A,S<0?A:x),!0)}},calculate:function(g){return m(g,!1)}}:{calculate:function(g,x,A,b){return g.forEach(function(S){h(a(S.start,S.end,S),!0)}),A.forEach(function(S){h(a(S.start,S.end,S),!1)}),m(x,b)}}}k.exports=o},{"./linked-list":259}],259:[function(e,k,z){var l={create:function(){var o={root:{root:!0,next:null},exists:function(c){return!(c===null||c===o.root)},isEmpty:function(){return o.root.next===null},getHead:function(){return o.root.next},insertBefore:function(c,p){for(var t=o.root,n=o.root.next;n!==null;){if(p(n)){c.prev=n.prev,c.next=n,n.prev.next=c,n.prev=c;return}t=n,n=n.next}t.next=c,c.prev=t,c.next=null},findTransition:function(c){for(var p=o.root,t=o.root.next;t!==null&&!c(t);)p=t,t=t.next;return{before:p===o.root?null:p,after:t,insert:function(n){return n.prev=p,n.next=t,p.next=n,t!==null&&(t.prev=n),n}}}};return o},node:function(o){return o.prev=null,o.next=null,o.remove=function(){o.prev.next=o.next,o.next&&(o.next.prev=o.prev),o.prev=null,o.next=null},o}};k.exports=l},{}],260:[function(e,k,z){function l(o,c,p){var t=[],n=[];return o.forEach(function(a){var i=a.start,r=a.end;if(c.pointsSame(i,r)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}p&&p.chainStart(a);var f={index:0,matches_head:!1,matches_pt1:!1},u={index:0,matches_head:!1,matches_pt1:!1},s=f;function h(N,O,I){return s.index=N,s.matches_head=O,s.matches_pt1=I,s===f?(s=u,!1):(s=null,!0)}for(var d=0;d<t.length;d++){var y=t[d],m=y[0];y[1];var g=y[y.length-1];if(y[y.length-2],c.pointsSame(m,i)){if(h(d,!0,!0))break}else if(c.pointsSame(m,r)){if(h(d,!0,!1))break}else if(c.pointsSame(g,i)){if(h(d,!1,!0))break}else if(c.pointsSame(g,r)&&h(d,!1,!1))break}if(s===f){t.push([i,r]),p&&p.chainNew(i,r);return}if(s===u){p&&p.chainMatch(f.index);var x=f.index,A=f.matches_pt1?r:i,b=f.matches_head,y=t[x],S=b?y[0]:y[y.length-1],w=b?y[1]:y[y.length-2],T=b?y[y.length-1]:y[0],_=b?y[y.length-2]:y[1];if(c.pointsCollinear(w,S,A)&&(b?(p&&p.chainRemoveHead(f.index,A),y.shift()):(p&&p.chainRemoveTail(f.index,A),y.pop()),S=w),c.pointsSame(T,A)){t.splice(x,1),c.pointsCollinear(_,T,S)&&(b?(p&&p.chainRemoveTail(f.index,S),y.pop()):(p&&p.chainRemoveHead(f.index,S),y.shift())),p&&p.chainClose(f.index),n.push(y);return}b?(p&&p.chainAddHead(f.index,A),y.unshift(A)):(p&&p.chainAddTail(f.index,A),y.push(A));return}function v(N){p&&p.chainReverse(N),t[N].reverse()}function P(N,O){var I=t[N],F=t[O],V=I[I.length-1],U=I[I.length-2],j=F[0],Z=F[1];c.pointsCollinear(U,V,j)&&(p&&p.chainRemoveTail(N,V),I.pop(),V=U),c.pointsCollinear(V,j,Z)&&(p&&p.chainRemoveHead(O,j),F.shift()),p&&p.chainJoin(N,O),t[N]=I.concat(F),t.splice(O,1)}var M=f.index,E=u.index;p&&p.chainConnect(M,E);var D=t[M].length<t[E].length;f.matches_head?u.matches_head?D?(v(M),P(M,E)):(v(E),P(E,M)):P(E,M):u.matches_head?P(M,E):D?(v(M),P(E,M)):(v(E),P(M,E))}),n}k.exports=l},{}],261:[function(e,k,z){function l(c,p,t){var n=[];return c.forEach(function(a){var i=(a.myFill.above?8:0)+(a.myFill.below?4:0)+(a.otherFill&&a.otherFill.above?2:0)+(a.otherFill&&a.otherFill.below?1:0);p[i]!==0&&n.push({id:t?t.segmentId():-1,start:a.start,end:a.end,myFill:{above:p[i]===1,below:p[i]===2},otherFill:null})}),t&&t.selected(n),n}var o={union:function(c,p){return l(c,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],p)},intersect:function(c,p){return l(c,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],p)},difference:function(c,p){return l(c,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],p)},differenceRev:function(c,p){return l(c,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],p)},xor:function(c,p){return l(c,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],p)}};k.exports=o},{}],262:[function(e,k,z){var l=e("stream").Transform,o=e("stream-parser");function c(){l.call(this,{readableObjectMode:!0})}c.prototype=Object.create(l.prototype),c.prototype.constructor=c,o(c.prototype),z.ParserStream=c,z.sliceEq=function(t,n,a){for(var i=n,r=0;r<a.length;)if(t[i++]!==a[r++])return!1;return!0},z.str2arr=function(t,n){var a=[],i=0;if(n&&n==="hex")for(;i<t.length;)a.push(parseInt(t.slice(i,i+2),16)),i+=2;else for(;i<t.length;i++)a.push(t.charCodeAt(i)&255);return a},z.readUInt16LE=function(t,n){return t[n]|t[n+1]<<8},z.readUInt16BE=function(t,n){return t[n+1]|t[n]<<8},z.readUInt32LE=function(t,n){return t[n]|t[n+1]<<8|t[n+2]<<16|t[n+3]*16777216},z.readUInt32BE=function(t,n){return t[n+3]|t[n+2]<<8|t[n+1]<<16|t[n]*16777216};function p(t,n,a){Error.call(this),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=t,n&&(this.code=n),a&&(this.statusCode=a)}p.prototype=Object.create(Error.prototype),p.prototype.constructor=p,z.ProbeError=p},{stream:285,"stream-parser":301}],263:[function(e,k,z){function l(p,t){var n=new Error(p);return n.code=t,n}function o(p){try{return decodeURIComponent(escape(p))}catch{return p}}function c(p,t,n){this.input=p.subarray(t,n),this.start=t;var a=String.fromCharCode.apply(null,this.input.subarray(0,4));if(a!=="II*\0"&&a!=="MM\0*")throw l("invalid TIFF signature","EBADDATA");this.big_endian=a[0]==="M"}c.prototype.each=function(p){this.aborted=!1;var t=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:t}];this.ifds_to_read.length>0&&!this.aborted;){var n=this.ifds_to_read.shift();!n.offset||this.scan_ifd(n.id,n.offset,p)}},c.prototype.read_uint16=function(p){var t=this.input;if(p+2>t.length)throw l("unexpected EOF","EBADDATA");return this.big_endian?t[p]*256+t[p+1]:t[p]+t[p+1]*256},c.prototype.read_uint32=function(p){var t=this.input;if(p+4>t.length)throw l("unexpected EOF","EBADDATA");return this.big_endian?t[p]*16777216+t[p+1]*65536+t[p+2]*256+t[p+3]:t[p]+t[p+1]*256+t[p+2]*65536+t[p+3]*16777216},c.prototype.is_subifd_link=function(p,t){return p===0&&t===34665||p===0&&t===34853||p===34665&&t===40965},c.prototype.exif_format_length=function(p){switch(p){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},c.prototype.exif_format_read=function(p,t){var n;switch(p){case 1:case 2:return n=this.input[t],n;case 6:return n=this.input[t],n|(n&128)*33554430;case 3:return n=this.read_uint16(t),n;case 8:return n=this.read_uint16(t),n|(n&32768)*131070;case 4:return n=this.read_uint32(t),n;case 9:return n=this.read_uint32(t),n|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},c.prototype.scan_ifd=function(p,t,n){var a=this.read_uint16(t);t+=2;for(var i=0;i<a;i++){var r=this.read_uint16(t),f=this.read_uint16(t+2),u=this.read_uint32(t+4),s=this.exif_format_length(f),h=u*s,d=h<=4?t+8:this.read_uint32(t+8),y=!1;if(d+h>this.input.length)throw l("unexpected EOF","EBADDATA");for(var m=[],g=d,x=0;x<u;x++,g+=s){var A=this.exif_format_read(f,g);if(A===null){m=null;break}m.push(A)}Array.isArray(m)&&f===2&&(m=o(String.fromCharCode.apply(null,m)),m&&m[m.length-1]==="\0"&&(m=m.slice(0,-1))),this.is_subifd_link(p,r)&&Array.isArray(m)&&Number.isInteger(m[0])&&m[0]>0&&(this.ifds_to_read.push({id:r,offset:m[0]}),y=!0);var b={is_big_endian:this.big_endian,ifd:p,tag:r,format:f,count:u,entry_offset:t+this.start,data_length:h,data_offset:d+this.start,value:m,is_subifd_link:y};if(n(b)===!1){this.aborted=!0;return}t+=12}p===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(t)})},k.exports.ExifParser=c,k.exports.get_orientation=function(p){var t=0;try{return new c(p,0,p.length).each(function(n){if(n.ifd===0&&n.tag===274&&Array.isArray(n.value))return t=n.value[0],!1}),t}catch{return-1}}},{}],264:[function(e,k,z){var l=e("./common").readUInt16BE,o=e("./common").readUInt32BE;function c(u,s){if(u.length<4+s)return null;var h=o(u,s);return u.length<h+s||h<8?null:{boxtype:String.fromCharCode.apply(null,u.slice(s+4,s+8)),data:u.slice(s+8,s+h),end:s+h}}k.exports.unbox=c;function p(u,s){for(var h=0;;){var d=c(u,h);if(!d)break;switch(d.boxtype){case"ispe":s.sizes.push({width:o(d.data,4),height:o(d.data,8)});break;case"irot":s.transforms.push({type:"irot",value:d.data[0]&3});break;case"imir":s.transforms.push({type:"imir",value:d.data[0]&1});break}h=d.end}}function t(u,s,h){for(var d=0,y=0;y<h;y++)d=d*256+(u[s+y]||0);return d}function n(u,s){for(var h=u[4]>>4&15,d=u[4]&15,y=u[5]>>4&15,m=l(u,6),g=8,x=0;x<m;x++){var A=l(u,g);g+=2;var b=l(u,g);g+=2;var S=t(u,g,y);g+=y;var w=l(u,g);if(g+=2,b===0&&w===1){var T=t(u,g,h),_=t(u,g+h,d);s.item_loc[A]={length:_,offset:T+S}}g+=w*(h+d)}}function a(u,s){for(var h=l(u,4),d=6,y=0;y<h;y++){var m=c(u,d);if(!m)break;if(m.boxtype==="infe"){for(var g=l(m.data,4),x="",A=8;A<m.data.length&&m.data[A];A++)x+=String.fromCharCode(m.data[A]);s.item_inf[x]=g}d=m.end}}function i(u,s){for(var h=0;;){var d=c(u,h);if(!d)break;d.boxtype==="ipco"&&p(d.data,s),h=d.end}}function r(u,s){for(var h=4;;){var d=c(u,h);if(!d)break;d.boxtype==="iprp"&&i(d.data,s),d.boxtype==="iloc"&&n(d.data,s),d.boxtype==="iinf"&&a(d.data,s),h=d.end}}function f(u){var s=u.reduce(function(y,m){return y.width>m.width||y.width===m.width&&y.height>m.height?y:m}),h=u.reduce(function(y,m){return y.height>m.height||y.height===m.height&&y.width>m.width?y:m}),d;return s.width>h.height||s.width===h.height&&s.height>h.width?d=s:d=h,d}k.exports.readSizeFromMeta=function(u){var s={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(r(u,s),!!s.sizes.length){var h=f(s.sizes),d=1;s.transforms.forEach(function(m){var g={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},x={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(m.type==="imir"&&(m.value===0?d=x[d]:(d=x[d],d=g[d],d=g[d])),m.type==="irot")for(var A=0;A<m.value;A++)d=g[d]});var y=null;return s.item_inf.Exif&&(y=s.item_loc[s.item_inf.Exif]),{width:h.width,height:h.height,orientation:s.transforms.length?d:null,variants:s.sizes,exif_location:y}}},k.exports.getMimeType=function(u){var s=String.fromCharCode.apply(null,u.slice(0,4)),h={};h[s]=!0;for(var d=8;d<u.length;d+=4)h[String.fromCharCode.apply(null,u.slice(d,d+4))]=!0;if(!(!h.mif1&&!h.msf1&&!h.miaf))return s==="avif"||s==="avis"||s==="avio"?{type:"avif",mime:"image/avif"}:s==="heic"||s==="heix"?{type:"heic",mime:"image/heic"}:s==="hevc"||s==="hevx"?{type:"heic",mime:"image/heic-sequence"}:h.avif||h.avis?{type:"avif",mime:"image/avif"}:h.heic||h.heix||h.hevc||h.hevx||h.heis?h.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":262}],265:[function(e,k,z){var l=e("../common").str2arr,o=e("../common").sliceEq,c=e("../common").readUInt32BE,p=e("../miaf_utils"),t=e("../exif_utils"),n=l("ftyp");k.exports=function(a){if(!!o(a,4,n)){var i=p.unbox(a,0);if(!!i){var r=p.getMimeType(i.data);if(!!r){for(var f,u=i.end;;){var s=p.unbox(a,u);if(!s)break;if(u=s.end,s.boxtype==="mdat")return;if(s.boxtype==="meta"){f=s.data;break}}if(!!f){var h=p.readSizeFromMeta(f);if(!!h){var d={width:h.width,height:h.height,type:r.type,mime:r.mime,wUnits:"px",hUnits:"px"};if(h.variants.length>1&&(d.variants=h.variants),h.orientation&&(d.orientation=h.orientation),h.exif_location&&h.exif_location.offset+h.exif_location.length<=a.length){var y=c(a,h.exif_location.offset),m=a.slice(h.exif_location.offset+y+4,h.exif_location.offset+h.exif_location.length),g=t.get_orientation(m);g>0&&(d.orientation=g)}return d}}}}}}},{"../common":262,"../exif_utils":263,"../miaf_utils":264}],266:[function(e,k,z){var l=e("../common").str2arr,o=e("../common").sliceEq,c=e("../common").readUInt16LE,p=l("BM");k.exports=function(t){if(!(t.length<26)&&!!o(t,0,p))return{width:c(t,18),height:c(t,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":262}],267:[function(e,k,z){var l=e("../common").str2arr,o=e("../common").sliceEq,c=e("../common").readUInt16LE,p=l("GIF87a"),t=l("GIF89a");k.exports=function(n){if(!(n.length<10)&&!(!o(n,0,p)&&!o(n,0,t)))return{width:c(n,6),height:c(n,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":262}],268:[function(e,k,z){var l=e("../common").readUInt16LE,o=0,c=1,p=16;k.exports=function(t){var n=l(t,0),a=l(t,2),i=l(t,4);if(!(n!==o||a!==c||!i)){for(var r=[],f={width:0,height:0},u=0;u<i;u++){var s=t[6+p*u]||256,h=t[6+p*u+1]||256,d={width:s,height:h};r.push(d),(s>f.width||h>f.height)&&(f=d)}return{width:f.width,height:f.height,variants:r,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":262}],269:[function(e,k,z){var l=e("../common").readUInt16BE,o=e("../common").str2arr,c=e("../common").sliceEq,p=e("../exif_utils"),t=o("Exif\0\0");k.exports=function(n){if(!(n.length<2)&&!(n[0]!==255||n[1]!==216||n[2]!==255))for(var a=2;;){for(;;){if(n.length-a<2)return;if(n[a++]===255)break}for(var i=n[a++],r;i===255;)i=n[a++];if(208<=i&&i<=217||i===1)r=0;else if(192<=i&&i<=254){if(n.length-a<2)return;r=l(n,a)-2,a+=2}else return;if(i===217||i===218)return;var f;if(i===225&&r>=10&&c(n,a,t)&&(f=p.get_orientation(n.slice(a+6,a+r))),r>=5&&192<=i&&i<=207&&i!==196&&i!==200&&i!==204){if(n.length-a<r)return;var u={width:l(n,a+3),height:l(n,a+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return f>0&&(u.orientation=f),u}a+=r}}},{"../common":262,"../exif_utils":263}],270:[function(e,k,z){var l=e("../common").str2arr,o=e("../common").sliceEq,c=e("../common").readUInt32BE,p=l(`\x89PNG\r

`),t=l("IHDR");k.exports=function(n){if(!(n.length<24)&&!!o(n,0,p)&&!!o(n,12,t))return{width:c(n,16),height:c(n,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":262}],271:[function(e,k,z){var l=e("../common").str2arr,o=e("../common").sliceEq,c=e("../common").readUInt32BE,p=l("8BPS\0");k.exports=function(t){if(!(t.length<6+16)&&!!o(t,0,p))return{width:c(t,6+12),height:c(t,6+8),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":262}],272:[function(e,k,z){function l(s){return s===32||s===9||s===13||s===10}function o(s){return typeof s=="number"&&isFinite(s)&&s>0}function c(s){var h=0,d=s.length;for(s[0]===239&&s[1]===187&&s[2]===191&&(h=3);h<d&&l(s[h]);)h++;return h===d?!1:s[h]===60}var p=/<[-_.:a-zA-Z0-9][^>]*>/,t=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,n=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,a=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,i=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,r=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function f(s){var h=s.match(n),d=s.match(a),y=s.match(i);return{width:h&&(h[1]||h[2]),height:d&&(d[1]||d[2]),viewbox:y&&(y[1]||y[2])}}function u(s){return r.test(s)?s.match(r)[0]:"px"}k.exports=function(s){if(!!c(s)){for(var h="",d=0;d<s.length;d++)h+=String.fromCharCode(s[d]);var y=(h.match(p)||[""])[0];if(!!t.test(y)){var m=f(y),g=parseFloat(m.width),x=parseFloat(m.height);if(m.width&&m.height)return!o(g)||!o(x)?void 0:{width:g,height:x,type:"svg",mime:"image/svg+xml",wUnits:u(m.width),hUnits:u(m.height)};var A=(m.viewbox||"").split(" "),b={width:A[2],height:A[3]},S=parseFloat(b.width),w=parseFloat(b.height);if(!(!o(S)||!o(w))&&u(b.width)===u(b.height)){var T=S/w;return m.width?o(g)?{width:g,height:g/T,type:"svg",mime:"image/svg+xml",wUnits:u(m.width),hUnits:u(m.width)}:void 0:m.height?o(x)?{width:x*T,height:x,type:"svg",mime:"image/svg+xml",wUnits:u(m.height),hUnits:u(m.height)}:void 0:{width:S,height:w,type:"svg",mime:"image/svg+xml",wUnits:u(b.width),hUnits:u(b.height)}}}}}},{}],273:[function(e,k,z){var l=e("../common").str2arr,o=e("../common").sliceEq,c=e("../common").readUInt16LE,p=e("../common").readUInt16BE,t=e("../common").readUInt32LE,n=e("../common").readUInt32BE,a=l("II*\0"),i=l("MM\0*");function r(s,h,d){return d?p(s,h):c(s,h)}function f(s,h,d){return d?n(s,h):t(s,h)}function u(s,h,d){var y=r(s,h+2,d),m=f(s,h+4,d);return m!==1||y!==3&&y!==4?null:y===3?r(s,h+8,d):f(s,h+8,d)}k.exports=function(s){if(!(s.length<8)&&!(!o(s,0,a)&&!o(s,0,i))){var h=s[0]===77,d=f(s,4,h)-8;if(!(d<0)){var y=d+8;if(!(s.length-y<2)){var m=r(s,y+0,h)*12;if(!(m<=0)&&(y+=2,!(s.length-y<m))){var g,x,A,b;for(g=0;g<m;g+=12)b=r(s,y+g,h),b===256?x=u(s,y+g,h):b===257&&(A=u(s,y+g,h));if(x&&A)return{width:x,height:A,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},{"../common":262}],274:[function(e,k,z){var l=e("../common").str2arr,o=e("../common").sliceEq,c=e("../common").readUInt16LE,p=e("../common").readUInt32LE,t=e("../exif_utils"),n=l("RIFF"),a=l("WEBP");function i(u,s){if(!(u[s+3]!==157||u[s+4]!==1||u[s+5]!==42))return{width:c(u,s+6)&16383,height:c(u,s+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function r(u,s){if(u[s]===47){var h=p(u,s+1);return{width:(h&16383)+1,height:(h>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function f(u,s){return{width:(u[s+6]<<16|u[s+5]<<8|u[s+4])+1,height:(u[s+9]<<s|u[s+8]<<8|u[s+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}k.exports=function(u){if(!(u.length<16)&&!(!o(u,0,n)&&!o(u,8,a))){var s=12,h=null,d=0,y=p(u,4)+8;if(!(y>u.length)){for(;s+8<y;){if(u[s]===0){s++;continue}var m=String.fromCharCode.apply(null,u.slice(s,s+4)),g=p(u,s+4);m==="VP8 "&&g>=10?h=h||i(u,s+8):m==="VP8L"&&g>=9?h=h||r(u,s+8):m==="VP8X"&&g>=10?h=h||f(u,s+8):m==="EXIF"&&(d=t.get_orientation(u.slice(s+8,s+8+g)),s=1/0),s+=8+g}if(!!h)return d>0&&(h.orientation=d),h}}}},{"../common":262,"../exif_utils":263}],275:[function(e,k,z){k.exports={avif:e("./parse_sync/avif"),bmp:e("./parse_sync/bmp"),gif:e("./parse_sync/gif"),ico:e("./parse_sync/ico"),jpeg:e("./parse_sync/jpeg"),png:e("./parse_sync/png"),psd:e("./parse_sync/psd"),svg:e("./parse_sync/svg"),tiff:e("./parse_sync/tiff"),webp:e("./parse_sync/webp")}},{"./parse_sync/avif":265,"./parse_sync/bmp":266,"./parse_sync/gif":267,"./parse_sync/ico":268,"./parse_sync/jpeg":269,"./parse_sync/png":270,"./parse_sync/psd":271,"./parse_sync/svg":272,"./parse_sync/tiff":273,"./parse_sync/webp":274}],276:[function(e,k,z){var l=e("./lib/parsers_sync");function o(c){for(var p=Object.keys(l),t=0;t<p.length;t++){var n=l[p[t]](c);if(n)return n}return null}k.exports=function(p){return o(p)},k.exports.parsers=l},{"./lib/parsers_sync":275}],277:[function(e,k,z){var l=k.exports={},o,c;function p(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?o=setTimeout:o=p}catch{o=p}try{typeof clearTimeout=="function"?c=clearTimeout:c=t}catch{c=t}})();function n(m){if(o===setTimeout)return setTimeout(m,0);if((o===p||!o)&&setTimeout)return o=setTimeout,setTimeout(m,0);try{return o(m,0)}catch{try{return o.call(null,m,0)}catch{return o.call(this,m,0)}}}function a(m){if(c===clearTimeout)return clearTimeout(m);if((c===t||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(m);try{return c(m)}catch{try{return c.call(null,m)}catch{return c.call(this,m)}}}var i=[],r=!1,f,u=-1;function s(){!r||!f||(r=!1,f.length?i=f.concat(i):u=-1,i.length&&h())}function h(){if(!r){var m=n(s);r=!0;for(var g=i.length;g;){for(f=i,i=[];++u<g;)f&&f[u].run();u=-1,g=i.length}f=null,r=!1,a(m)}}l.nextTick=function(m){var g=new Array(arguments.length-1);if(arguments.length>1)for(var x=1;x<arguments.length;x++)g[x-1]=arguments[x];i.push(new d(m,g)),i.length===1&&!r&&n(h)};function d(m,g){this.fun=m,this.array=g}d.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={};function y(){}l.on=y,l.addListener=y,l.once=y,l.off=y,l.removeListener=y,l.removeAllListeners=y,l.emit=y,l.prependListener=y,l.prependOnceListener=y,l.listeners=function(m){return[]},l.binding=function(m){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(m){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],278:[function(e,k,z){(function(l){(function(){for(var o=e("performance-now"),c=typeof window=="undefined"?l:window,p=["moz","webkit"],t="AnimationFrame",n=c["request"+t],a=c["cancel"+t]||c["cancelRequest"+t],i=0;!n&&i<p.length;i++)n=c[p[i]+"Request"+t],a=c[p[i]+"Cancel"+t]||c[p[i]+"CancelRequest"+t];if(!n||!a){var r=0,f=0,u=[],s=1e3/60;n=function(h){if(u.length===0){var d=o(),y=Math.max(0,s-(d-r));r=y+d,setTimeout(function(){var m=u.slice(0);u.length=0;for(var g=0;g<m.length;g++)if(!m[g].cancelled)try{m[g].callback(r)}catch(x){setTimeout(function(){throw x},0)}},Math.round(y))}return u.push({handle:++f,callback:h,cancelled:!1}),f},a=function(h){for(var d=0;d<u.length;d++)u[d].handle===h&&(u[d].cancelled=!0)}}k.exports=function(h){return n.call(c,h)},k.exports.cancel=function(){a.apply(c,arguments)},k.exports.polyfill=function(h){h||(h=c),h.requestAnimationFrame=n,h.cancelAnimationFrame=a}}).call(this)}).call(this,typeof lo!="undefined"?lo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"performance-now":252}],279:[function(e,k,z){var l=e("array-bounds"),o=e("color-normalize"),c=e("update-diff"),p=e("pick-by-alias"),t=e("object-assign"),n=e("flatten-vertex-data"),a=e("to-float32"),i=a.float32,r=a.fract32;k.exports=u;var f=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function u(s,h){if(typeof s=="function"?(h||(h={}),h.regl=s):h=s,h.length&&(h.positions=h),s=h.regl,!s.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var d=s._gl,y,m,g,x,A,b,S={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},w=[];return x=s.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),m=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),g=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),A=s.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),b=s.buffer({usage:"static",type:"float",data:f}),P(h),y=s({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:s.prop("range"),lineWidth:s.prop("lineWidth"),capSize:s.prop("capSize"),opacity:s.prop("opacity"),scale:s.prop("scale"),translate:s.prop("translate"),scaleFract:s.prop("scaleFract"),translateFract:s.prop("translateFract"),viewport:function(E,D){return[D.viewport.x,D.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:x,offset:function(E,D){return D.offset*4},divisor:1},position:{buffer:m,offset:function(E,D){return D.offset*8},divisor:1},positionFract:{buffer:g,offset:function(E,D){return D.offset*8},divisor:1},error:{buffer:A,offset:function(E,D){return D.offset*16},divisor:1},direction:{buffer:b,stride:24,offset:0},lineOffset:{buffer:b,stride:24,offset:8},capOffset:{buffer:b,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:s.prop("viewport")},viewport:s.prop("viewport"),stencil:!1,instances:s.prop("count"),count:f.length}),t(T,{update:P,draw:_,destroy:M,regl:s,gl:d,canvas:d.canvas,groups:w}),T;function T(E){E?P(E):E===null&&M(),_()}function _(E){if(typeof E=="number")return v(E);E&&!Array.isArray(E)&&(E=[E]),s._refresh(),w.forEach(function(D,N){if(!!D){if(E&&(E[N]?D.draw=!0:D.draw=!1),!D.draw){D.draw=!0;return}v(N)}})}function v(E){typeof E=="number"&&(E=w[E]),E!=null&&(!(E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1)||(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],y(E),E.after&&E.after(E)))}function P(E){if(!!E){E.length!=null?typeof E[0]=="number"&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var D=0,N=0;if(T.groups=w=E.map(function(Z,te){var re=w[te];if(Z)typeof Z=="function"?Z={after:Z}:typeof Z[0]=="number"&&(Z={positions:Z});else return re;return Z=p(Z,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),re||(w[te]=re={id:te,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},Z=t({},S,Z)),c(re,Z,[{lineWidth:function(W){return+W*.5},capSize:function(W){return+W*.5},opacity:parseFloat,errors:function(W){return W=n(W),N+=W.length,W},positions:function(W,J){return W=n(W,"float64"),J.count=Math.floor(W.length/2),J.bounds=l(W,2),J.offset=D,D+=J.count,W}},{color:function(W,J){var le=J.count;if(W||(W="transparent"),!Array.isArray(W)||typeof W[0]=="number"){var ue=W;W=Array(le);for(var se=0;se<le;se++)W[se]=ue}if(W.length<le)throw Error("Not enough colors");for(var G=new Uint8Array(le*4),Y=0;Y<le;Y++){var ee=o(W[Y],"uint8");G.set(ee,Y*4)}return G},range:function(W,J,le){var ue=J.bounds;return W||(W=ue),J.scale=[1/(W[2]-W[0]),1/(W[3]-W[1])],J.translate=[-W[0],-W[1]],J.scaleFract=r(J.scale),J.translateFract=r(J.translate),W},viewport:function(W){var J;return Array.isArray(W)?J={x:W[0],y:W[1],width:W[2]-W[0],height:W[3]-W[1]}:W?(J={x:W.x||W.left||0,y:W.y||W.top||0},W.right?J.width=W.right-J.x:J.width=W.w||W.width||0,W.bottom?J.height=W.bottom-J.y:J.height=W.h||W.height||0):J={x:0,y:0,width:d.drawingBufferWidth,height:d.drawingBufferHeight},J}}]),re}),D||N){var O=w.reduce(function(Z,te,re){return Z+(te?te.count:0)},0),I=new Float64Array(O*2),F=new Uint8Array(O*4),V=new Float32Array(O*4);w.forEach(function(Z,te){if(!!Z){var re=Z.positions,W=Z.count,J=Z.offset,le=Z.color,ue=Z.errors;!W||(F.set(le,J*4),V.set(ue,J*4),I.set(re,J*2))}});var U=i(I);m(U);var j=r(I,U);g(j),x(F),A(V)}}}function M(){m.destroy(),g.destroy(),x.destroy(),A.destroy(),b.destroy()}}},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":313,"update-diff":329}],280:[function(e,k,z){var l=e("color-normalize"),o=e("array-bounds"),c=e("object-assign"),p=e("glslify"),t=e("pick-by-alias"),n=e("flatten-vertex-data"),a=e("earcut"),i=e("array-normalize"),r=e("to-float32"),f=r.float32,u=r.fract32,s=e("es6-weak-map"),h=e("parse-rect"),d=e("array-find-index");k.exports=y;function y(m,g){if(!(this instanceof y))return new y(m,g);if(typeof m=="function"?(g||(g={}),g.regl=m):g=m,g.length&&(g.positions=g),m=g.regl,!m.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=m._gl,this.regl=m,this.passes=[],this.shaders=y.shaders.has(m)?y.shaders.get(m):y.shaders.set(m,y.createShaders(m)).get(m),this.update(g)}y.dashMult=2,y.maxPatternLength=256,y.precisionThreshold=3e6,y.maxPoints=1e4,y.maxLines=2048,y.shaders=new s,y.createShaders=function(m){var g=m.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),x={primitive:"triangle strip",instances:m.prop("count"),count:4,offset:0,uniforms:{miterMode:function(w,T){return T.join==="round"?2:1},miterLimit:m.prop("miterLimit"),scale:m.prop("scale"),scaleFract:m.prop("scaleFract"),translateFract:m.prop("translateFract"),translate:m.prop("translate"),thickness:m.prop("thickness"),dashTexture:m.prop("dashTexture"),opacity:m.prop("opacity"),pixelRatio:m.context("pixelRatio"),id:m.prop("id"),dashLength:m.prop("dashLength"),viewport:function(w,T){return[T.viewport.x,T.viewport.y,w.viewportWidth,w.viewportHeight]},depth:m.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(w,T){return!T.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:m.prop("viewport")},viewport:m.prop("viewport")},A=m(c({vert:p([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:p([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:g,divisor:0,stride:8,offset:0},lineTop:{buffer:g,divisor:0,stride:8,offset:4},aCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:m.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:m.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:m.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},x)),b;try{b=m(c({cull:{enable:!0,face:"back"},vert:p([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:p([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:g,divisor:0,stride:8,offset:0},lineTop:{buffer:g,divisor:0,stride:8,offset:4},aColor:{buffer:m.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:m.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:m.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},x))}catch{b=A}var S=m({primitive:"triangle",elements:function(w,T){return T.triangles},offset:0,vert:p([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:p([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:m.prop("scale"),color:m.prop("fill"),scaleFract:m.prop("scaleFract"),translateFract:m.prop("translateFract"),translate:m.prop("translate"),opacity:m.prop("opacity"),pixelRatio:m.context("pixelRatio"),id:m.prop("id"),viewport:function(w,T){return[T.viewport.x,T.viewport.y,w.viewportWidth,w.viewportHeight]}},attributes:{position:{buffer:m.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:m.prop("positionFractBuffer"),stride:8,offset:8}},blend:x.blend,depth:{enable:!1},scissor:x.scissor,stencil:x.stencil,viewport:x.viewport});return{fill:S,rect:A,miter:b}},y.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},y.prototype.render=function(){for(var m,g=[],x=arguments.length;x--;)g[x]=arguments[x];g.length&&(m=this).update.apply(m,g),this.draw()},y.prototype.draw=function(){for(var m=this,g=[],x=arguments.length;x--;)g[x]=arguments[x];return(g.length?g:this.passes).forEach(function(A,b){var S;if(A&&Array.isArray(A))return(S=m).draw.apply(S,A);typeof A=="number"&&(A=m.passes[A]),!!(A&&A.count>1&&A.opacity)&&(m.regl._refresh(),A.fill&&A.triangles&&A.triangles.length>2&&m.shaders.fill(A),!!A.thickness&&(A.scale[0]*A.viewport.width>y.precisionThreshold||A.scale[1]*A.viewport.height>y.precisionThreshold||A.join==="rect"||!A.join&&(A.thickness<=2||A.count>=y.maxPoints)?m.shaders.rect(A):m.shaders.miter(A)))}),this},y.prototype.update=function(m){var g=this;if(!!m){m.length!=null?typeof m[0]=="number"&&(m=[{positions:m}]):Array.isArray(m)||(m=[m]);var x=this,A=x.regl,b=x.gl;if(m.forEach(function(v,P){var M=g.passes[P];if(v!==void 0){if(v===null){g.passes[P]=null;return}if(typeof v[0]=="number"&&(v={positions:v}),v=t(v,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),M||(g.passes[P]=M={id:P,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:A.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:A.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:A.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:A.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},v=c({},y.defaults,v)),v.thickness!=null&&(M.thickness=parseFloat(v.thickness)),v.opacity!=null&&(M.opacity=parseFloat(v.opacity)),v.miterLimit!=null&&(M.miterLimit=parseFloat(v.miterLimit)),v.overlay!=null&&(M.overlay=!!v.overlay,P<y.maxLines&&(M.depth=2*(y.maxLines-1-P%y.maxLines)/y.maxLines-1)),v.join!=null&&(M.join=v.join),v.hole!=null&&(M.hole=v.hole),v.fill!=null&&(M.fill=v.fill?l(v.fill,"uint8"):null),v.viewport!=null&&(M.viewport=h(v.viewport)),M.viewport||(M.viewport=h([b.drawingBufferWidth,b.drawingBufferHeight])),v.close!=null&&(M.close=v.close),v.positions===null&&(v.positions=[]),v.positions){var E,D;if(v.positions.x&&v.positions.y){var N=v.positions.x,O=v.positions.y;D=M.count=Math.max(N.length,O.length),E=new Float64Array(D*2);for(var I=0;I<D;I++)E[I*2]=N[I],E[I*2+1]=O[I]}else E=n(v.positions,"float64"),D=M.count=Math.floor(E.length/2);var F=M.bounds=o(E,2);if(M.fill){for(var V=[],U={},j=0,Z=0,te=0,re=M.count;Z<re;Z++){var W=E[Z*2],J=E[Z*2+1];isNaN(W)||isNaN(J)||W==null||J==null?(W=E[j*2],J=E[j*2+1],U[Z]=j):j=Z,V[te++]=W,V[te++]=J}if(v.splitNull){M.count-1 in U||(U[M.count]=M.count-1);var le=Object.keys(U).map(Number).sort(function(it,ht){return it-ht}),ue=[],se=0,G=M.hole!=null?M.hole[0]:null;if(G!=null){var Y=d(le,function(it){return it>=G});le=le.slice(0,Y),le.push(G)}for(var ee=function(it){var ht=V.slice(se*2,le[it]*2).concat(G?V.slice(G*2):[]),$e=(M.hole||[]).map(function(Xe){return Xe-G+(le[it]-se)}),Ee=a(ht,$e);Ee=Ee.map(function(Xe){return Xe+se+(Xe+se<le[it]?0:G-le[it])}),ue.push.apply(ue,Ee),se=le[it]+1},$=0;$<le.length;$++)ee($);for(var K=0,Q=ue.length;K<Q;K++)U[ue[K]]!=null&&(ue[K]=U[ue[K]]);M.triangles=ue}else{for(var ae=a(V,M.hole||[]),ie=0,oe=ae.length;ie<oe;ie++)U[ae[ie]]!=null&&(ae[ie]=U[ae[ie]]);M.triangles=ae}}var fe=new Float64Array(E);i(fe,2,F);var ye=new Float64Array(D*2+6);M.close?E[0]===E[D*2-2]&&E[1]===E[D*2-1]?(ye[0]=fe[D*2-4],ye[1]=fe[D*2-3]):(ye[0]=fe[D*2-2],ye[1]=fe[D*2-1]):(ye[0]=fe[0],ye[1]=fe[1]),ye.set(fe,2),M.close?E[0]===E[D*2-2]&&E[1]===E[D*2-1]?(ye[D*2+2]=fe[2],ye[D*2+3]=fe[3],M.count-=1):(ye[D*2+2]=fe[0],ye[D*2+3]=fe[1],ye[D*2+4]=fe[2],ye[D*2+5]=fe[3]):(ye[D*2+2]=fe[D*2-2],ye[D*2+3]=fe[D*2-1],ye[D*2+4]=fe[D*2-2],ye[D*2+5]=fe[D*2-1]);var ce=f(ye);M.positionBuffer(ce);var me=u(ye,ce);M.positionFractBuffer(me)}if(v.range?M.range=v.range:M.range||(M.range=M.bounds),(v.range||v.positions)&&M.count){var xe=M.bounds,ke=xe[2]-xe[0],Ae=xe[3]-xe[1],Oe=M.range[2]-M.range[0],He=M.range[3]-M.range[1];M.scale=[ke/Oe,Ae/He],M.translate=[-M.range[0]/Oe+xe[0]/Oe||0,-M.range[1]/He+xe[1]/He||0],M.scaleFract=u(M.scale),M.translateFract=u(M.translate)}if(v.dashes){var Ge=0,_e;if(!v.dashes||v.dashes.length<2)Ge=1,_e=new Uint8Array([255,255,255,255,255,255,255,255]);else{Ge=0;for(var Ie=0;Ie<v.dashes.length;++Ie)Ge+=v.dashes[Ie];_e=new Uint8Array(Ge*y.dashMult);for(var We=0,et=255,Ne=0;Ne<2;Ne++)for(var De=0;De<v.dashes.length;++De){for(var Ve=0,dt=v.dashes[De]*y.dashMult*.5;Ve<dt;++Ve)_e[We++]=et;et^=255}}M.dashLength=Ge,M.dashTexture({channels:1,data:_e,width:_e.length,height:1,mag:"linear",min:"linear"},0,0)}if(v.color){var Dt=M.count,Gt=v.color;Gt||(Gt="transparent");var Mt=new Uint8Array(Dt*4+4);if(!Array.isArray(Gt)||typeof Gt[0]=="number")for(var zt=l(Gt,"uint8"),Nt=0;Nt<Dt+1;Nt++)Mt.set(zt,Nt*4);else{for(var Et=0;Et<Dt;Et++){var At=l(Gt[Et],"uint8");Mt.set(At,Et*4)}Mt.set(l(Gt[0],"uint8"),Dt*4)}M.colorBuffer({usage:"dynamic",type:"uint8",data:Mt})}}}),m.length<this.passes.length){for(var S=m.length;S<this.passes.length;S++){var w=this.passes[S];!w||(w.colorBuffer.destroy(),w.positionBuffer.destroy(),w.dashTexture.destroy())}this.passes.length=m.length}for(var T=[],_=0;_<this.passes.length;_++)this.passes[_]!==null&&T.push(this.passes[_]);return this.passes=T,this}},y.prototype.destroy=function(){return this.passes.forEach(function(m){m.colorBuffer.destroy(),m.positionBuffer.destroy(),m.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313}],281:[function(e,k,z){function l(M,E){return p(M)||n(M,E)||a(M,E)||f()}function o(M){return c(M)||t(M)||a(M)||r()}function c(M){if(Array.isArray(M))return i(M)}function p(M){if(Array.isArray(M))return M}function t(M){if(typeof Symbol!="undefined"&&M[Symbol.iterator]!=null||M["@@iterator"]!=null)return Array.from(M)}function n(M,E){var D=M==null?null:typeof Symbol!="undefined"&&M[Symbol.iterator]||M["@@iterator"];if(D!=null){var N=[],O=!0,I=!1,F,V;try{for(D=D.call(M);!(O=(F=D.next()).done)&&(N.push(F.value),!(E&&N.length===E));O=!0);}catch(U){I=!0,V=U}finally{try{!O&&D.return!=null&&D.return()}finally{if(I)throw V}}return N}}function a(M,E){if(!!M){if(typeof M=="string")return i(M,E);var D=Object.prototype.toString.call(M).slice(8,-1);if(D==="Object"&&M.constructor&&(D=M.constructor.name),D==="Map"||D==="Set")return Array.from(M);if(D==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(D))return i(M,E)}}function i(M,E){(E==null||E>M.length)&&(E=M.length);for(var D=0,N=new Array(E);D<E;D++)N[D]=M[D];return N}function r(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=e("color-normalize"),s=e("array-bounds"),h=e("color-id"),d=e("@plotly/point-cluster"),y=e("object-assign"),m=e("glslify"),g=e("pick-by-alias"),x=e("update-diff"),A=e("flatten-vertex-data"),b=e("is-iexplorer"),S=e("to-float32"),w=e("parse-rect"),T=_;function _(M,E){var D=this;if(!(this instanceof _))return new _(M,E);typeof M=="function"?(E||(E={}),E.regl=M):(E=M,M=null),E&&E.length&&(E.positions=E),M=E.regl;var N=M._gl,O,I=[],F={},V=[],U=[null],j=[null],Z=255,te=100;this.tooManyColors=b,O=M.texture({data:new Uint8Array(Z*4),width:Z,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),y(this,{regl:M,gl:N,groups:V,markerCache:j,markerTextures:U,palette:I,paletteIds:F,paletteTexture:O,maxColors:Z,maxSize:te,canvas:N.canvas}),this.update(E);var re={uniforms:{constPointSize:!!E.constPointSize,opacity:M.prop("opacity"),paletteSize:function(ue,se){return[D.tooManyColors?0:Z,O.height]},pixelRatio:M.context("pixelRatio"),scale:M.prop("scale"),scaleFract:M.prop("scaleFract"),translate:M.prop("translate"),translateFract:M.prop("translateFract"),markerTexture:M.prop("markerTexture"),paletteTexture:O},attributes:{x:function(ue,se){return se.xAttr||{buffer:se.positionBuffer,stride:8,offset:0}},y:function(ue,se){return se.yAttr||{buffer:se.positionBuffer,stride:8,offset:4}},xFract:function(ue,se){return se.xAttr?{constant:[0,0]}:{buffer:se.positionFractBuffer,stride:8,offset:0}},yFract:function(ue,se){return se.yAttr?{constant:[0,0]}:{buffer:se.positionFractBuffer,stride:8,offset:4}},size:function(ue,se){return se.size.length?{buffer:se.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(se.size*255/D.maxSize)]}},borderSize:function(ue,se){return se.borderSize.length?{buffer:se.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(se.borderSize*255/D.maxSize)]}},colorId:function(ue,se){return se.color.length?{buffer:se.colorBuffer,stride:D.tooManyColors?8:4,offset:0}:{constant:D.tooManyColors?I.slice(se.color*4,se.color*4+4):[se.color]}},borderColorId:function(ue,se){return se.borderColor.length?{buffer:se.colorBuffer,stride:D.tooManyColors?8:4,offset:D.tooManyColors?4:2}:{constant:D.tooManyColors?I.slice(se.borderColor*4,se.borderColor*4+4):[se.borderColor]}},isActive:function(ue,se){return se.activation===!0?{constant:[1]}:se.activation?se.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:M.prop("viewport")},viewport:M.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:M.prop("elements"),count:M.prop("count"),offset:M.prop("offset"),primitive:"points"},W=y({},re);W.frag=m([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),W.vert=m([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=M(W);var J=y({},re);J.frag=m([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),J.vert=m([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),b&&(J.frag=J.frag.replace("smoothstep","smoothStep"),W.frag=W.frag.replace("smoothstep","smoothStep")),this.drawCircle=M(J)}_.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},_.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},_.prototype.draw=function(){for(var M=this,E=arguments.length,D=new Array(E),N=0;N<E;N++)D[N]=arguments[N];var O=this.groups;if(D.length===1&&Array.isArray(D[0])&&(D[0][0]===null||Array.isArray(D[0][0]))&&(D=D[0]),this.regl._refresh(),D.length)for(var I=0;I<D.length;I++)this.drawItem(I,D[I]);else O.forEach(function(F,V){M.drawItem(V)});return this},_.prototype.drawItem=function(M,E){var D=this.groups,N=D[M];if(typeof E=="number"&&(M=E,N=D[E],E=null),!!(N&&N.count&&N.opacity)){N.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,N,E));for(var O=[],I=1;I<N.activation.length;I++)!N.activation[I]||N.activation[I]!==!0&&!N.activation[I].data.length||O.push.apply(O,o(this.getMarkerDrawOptions(I,N,E)));O.length&&this.drawMarker(O)}},_.prototype.getMarkerDrawOptions=function(M,E,D){var N=E.range,O=E.tree,I=E.viewport,F=E.activation,V=E.selectionBuffer,U=E.count;if(this.regl,!O)return D?[y({},E,{markerTexture:this.markerTextures[M],activation:F[M],count:D.length,elements:D,offset:0})]:[y({},E,{markerTexture:this.markerTextures[M],activation:F[M],offset:0})];var j=[],Z=O.range(N,{lod:!0,px:[(N[2]-N[0])/I.width,(N[3]-N[1])/I.height]});if(D){for(var te=F[M],re=te.data,W=new Uint8Array(U),J=0;J<D.length;J++){var le=D[J];W[le]=re?re[le]:1}V.subdata(W)}for(var ue=Z.length;ue--;){var se=l(Z[ue],2),G=se[0],Y=se[1];j.push(y({},E,{markerTexture:this.markerTextures[M],activation:D?V:F[M],offset:G,count:Y-G}))}return j},_.prototype.update=function(){for(var M=this,E=arguments.length,D=new Array(E),N=0;N<E;N++)D[N]=arguments[N];if(!!D.length){D.length===1&&Array.isArray(D[0])&&(D=D[0]);var O=this.groups,I=this.gl,F=this.regl,V=this.maxSize,U=this.maxColors,j=this.palette;this.groups=O=D.map(function(Z,te){var re=O[te];if(Z===void 0)return re;Z===null?Z={positions:null}:typeof Z=="function"?Z={ondraw:Z}:typeof Z[0]=="number"&&(Z={positions:Z}),Z=g(Z,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),Z.positions===null&&(Z.positions=[]),Z.tooManyColors!=null&&(M.tooManyColors=Z.tooManyColors),re||(O[te]=re={id:te,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:F.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:F.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:F.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:F.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:F.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},Z=y({},_.defaults,Z)),Z.positions&&!("marker"in Z)&&(Z.marker=re.marker,delete re.marker),Z.marker&&!("positions"in Z)&&(Z.positions=re.positions,delete re.positions);var W=0,J=0;if(x(re,Z,[{snap:!0,size:function(Ae,Oe){return Ae==null&&(Ae=_.defaults.size),W+=Ae&&Ae.length?1:0,Ae},borderSize:function(Ae,Oe){return Ae==null&&(Ae=_.defaults.borderSize),W+=Ae&&Ae.length?1:0,Ae},opacity:parseFloat,color:function(Ae,Oe){return Ae==null&&(Ae=_.defaults.color),Ae=M.updateColor(Ae),J++,Ae},borderColor:function(Ae,Oe){return Ae==null&&(Ae=_.defaults.borderColor),Ae=M.updateColor(Ae),J++,Ae},bounds:function(Ae,Oe,He){return"range"in He||(He.range=null),Ae},positions:function(Ae,Oe,He){var Ge=Oe.snap,_e=Oe.positionBuffer,Ie=Oe.positionFractBuffer,We=Oe.selectionBuffer;if(Ae.x||Ae.y)return Ae.x.length?Oe.xAttr={buffer:F.buffer(Ae.x),offset:0,stride:4,count:Ae.x.length}:Oe.xAttr={buffer:Ae.x.buffer,offset:Ae.x.offset*4||0,stride:(Ae.x.stride||1)*4,count:Ae.x.count},Ae.y.length?Oe.yAttr={buffer:F.buffer(Ae.y),offset:0,stride:4,count:Ae.y.length}:Oe.yAttr={buffer:Ae.y.buffer,offset:Ae.y.offset*4||0,stride:(Ae.y.stride||1)*4,count:Ae.y.count},Oe.count=Math.max(Oe.xAttr.count,Oe.yAttr.count),Ae;Ae=A(Ae,"float64");var et=Oe.count=Math.floor(Ae.length/2),Ne=Oe.bounds=et?s(Ae,2):null;if(!He.range&&!Oe.range&&(delete Oe.range,He.range=Ne),!He.marker&&!Oe.marker&&(delete Oe.marker,He.marker=null),Ge&&(Ge===!0||et>Ge)?Oe.tree=d(Ae,{bounds:Ne}):Ge&&Ge.length&&(Oe.tree=Ge),Oe.tree){var De={primitive:"points",usage:"static",data:Oe.tree,type:"uint32"};Oe.elements?Oe.elements(De):Oe.elements=F.elements(De)}var Ve=S.float32(Ae);_e({data:Ve,usage:"dynamic"});var dt=S.fract32(Ae,Ve);return Ie({data:dt,usage:"dynamic"}),We({data:new Uint8Array(et),type:"uint8",usage:"stream"}),Ae}},{marker:function(Ae,Oe,He){var Ge=Oe.activation;if(Ge.forEach(function(dt){return dt&&dt.destroy&&dt.destroy()}),Ge.length=0,!Ae||typeof Ae[0]=="number"){var _e=M.addMarker(Ae);Ge[_e]=!0}else{for(var Ie=[],We=0,et=Math.min(Ae.length,Oe.count);We<et;We++){var Ne=M.addMarker(Ae[We]);Ie[Ne]||(Ie[Ne]=new Uint8Array(Oe.count)),Ie[Ne][We]=1}for(var De=0;De<Ie.length;De++)if(!!Ie[De]){var Ve={data:Ie[De],type:"uint8",usage:"static"};Ge[De]?Ge[De](Ve):Ge[De]=F.buffer(Ve),Ge[De].data=Ie[De]}}return Ae},range:function(Ae,Oe,He){var Ge=Oe.bounds;if(!!Ge)return Ae||(Ae=Ge),Oe.scale=[1/(Ae[2]-Ae[0]),1/(Ae[3]-Ae[1])],Oe.translate=[-Ae[0],-Ae[1]],Oe.scaleFract=S.fract(Oe.scale),Oe.translateFract=S.fract(Oe.translate),Ae},viewport:function(Ae){var Oe=w(Ae||[I.drawingBufferWidth,I.drawingBufferHeight]);return Oe}}]),W){var le=re,ue=le.count,se=le.size,G=le.borderSize,Y=le.sizeBuffer,ee=new Uint8Array(ue*2);if(se.length||G.length)for(var $=0;$<ue;$++)ee[$*2]=Math.round((se[$]==null?se:se[$])*255/V),ee[$*2+1]=Math.round((G[$]==null?G:G[$])*255/V);Y({data:ee,usage:"dynamic"})}if(J){var K=re,Q=K.count,ae=K.color,ie=K.borderColor,oe=K.colorBuffer,fe;if(M.tooManyColors){if(ae.length||ie.length){fe=new Uint8Array(Q*8);for(var ye=0;ye<Q;ye++){var ce=ae[ye];fe[ye*8]=j[ce*4],fe[ye*8+1]=j[ce*4+1],fe[ye*8+2]=j[ce*4+2],fe[ye*8+3]=j[ce*4+3];var me=ie[ye];fe[ye*8+4]=j[me*4],fe[ye*8+5]=j[me*4+1],fe[ye*8+6]=j[me*4+2],fe[ye*8+7]=j[me*4+3]}}}else if(ae.length||ie.length){fe=new Uint8Array(Q*4+2);for(var xe=0;xe<Q;xe++)ae[xe]!=null&&(fe[xe*4]=ae[xe]%U,fe[xe*4+1]=Math.floor(ae[xe]/U)),ie[xe]!=null&&(fe[xe*4+2]=ie[xe]%U,fe[xe*4+3]=Math.floor(ie[xe]/U))}oe({data:fe||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return re})}},_.prototype.addMarker=function(M){var E=this.markerTextures,D=this.regl,N=this.markerCache,O=M==null?0:N.indexOf(M);if(O>=0)return O;var I;if(M instanceof Uint8Array||M instanceof Uint8ClampedArray)I=M;else{I=new Uint8Array(M.length);for(var F=0,V=M.length;F<V;F++)I[F]=M[F]*255}var U=Math.floor(Math.sqrt(I.length));return O=E.length,N.push(M),E.push(D.texture({channels:1,data:I,radius:U,mag:"linear",min:"linear"})),O},_.prototype.updateColor=function(M){var E=this.paletteIds,D=this.palette,N=this.maxColors;Array.isArray(M)||(M=[M]);var O=[];if(typeof M[0]=="number"){var I=[];if(Array.isArray(M))for(var F=0;F<M.length;F+=4)I.push(M.slice(F,F+4));else for(var V=0;V<M.length;V+=4)I.push(M.subarray(V,V+4));M=I}for(var U=0;U<M.length;U++){var j=M[U];j=u(j,"uint8");var Z=h(j,!1);if(E[Z]==null){var te=D.length;E[Z]=Math.floor(te/4),D[te]=j[0],D[te+1]=j[1],D[te+2]=j[2],D[te+3]=j[3]}O[U]=E[Z]}return!this.tooManyColors&&D.length>N*4&&(this.tooManyColors=!0),this.updatePalette(D),O.length===1?O[0]:O},_.prototype.updatePalette=function(M){if(!this.tooManyColors){var E=this.maxColors,D=this.paletteTexture,N=Math.ceil(M.length*.25/E);if(N>1){M=M.slice();for(var O=M.length*.25%E;O<N*E;O++)M.push(0,0,0,0)}D.height<N&&D.resize(E,N),D.subimage({width:Math.min(M.length*.25,E),height:N,data:M},0,0)}},_.prototype.destroy=function(){return this.groups.forEach(function(M){M.sizeBuffer.destroy(),M.positionBuffer.destroy(),M.positionFractBuffer.destroy(),M.colorBuffer.destroy(),M.activation.forEach(function(E){return E&&E.destroy&&E.destroy()}),M.selectionBuffer.destroy(),M.elements&&M.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(M){return M&&M.destroy&&M.destroy()}),this};var v=e("object-assign"),P=function(E,D){var N=new T(E,D),O=N.render.bind(N);return v(O,{render:O,update:N.update.bind(N),draw:N.draw.bind(N),destroy:N.destroy.bind(N),regl:N.regl,gl:N.gl,canvas:N.gl.canvas,groups:N.groups,markers:N.markerCache,palette:N.palette}),O};k.exports=P},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313,"update-diff":329}],282:[function(e,k,z){var l=e("regl-scatter2d"),o=e("pick-by-alias"),c=e("array-bounds"),p=e("raf"),t=e("array-range"),n=e("parse-rect"),a=e("flatten-vertex-data");k.exports=i;function i(s,h){if(!(this instanceof i))return new i(s,h);this.traces=[],this.passes={},this.regl=s,this.scatter=l(s),this.canvas=this.scatter.canvas}i.prototype.render=function(){for(var s=this,h,d=[],y=arguments.length;y--;)d[y]=arguments[y];return d.length&&(h=this).update.apply(h,d),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=p(function(){s.draw(),s.dirty=!0,s.planned=null})):(this.draw(),this.dirty=!0,p(function(){s.dirty=!1})),this)},i.prototype.update=function(){for(var s,h=[],d=arguments.length;d--;)h[d]=arguments[d];if(!!h.length){for(var y=0;y<h.length;y++)this.updateItem(y,h[y]);this.traces=this.traces.filter(Boolean);for(var m=[],g=0,x=0;x<this.traces.length;x++){for(var A=this.traces[x],b=this.traces[x].passes,S=0;S<b.length;S++)m.push(this.passes[b[S]]);A.passOffset=g,g+=A.passes.length}return(s=this.scatter).update.apply(s,m),this}},i.prototype.updateItem=function(s,h){var d=this,y=d.regl;if(h===null)return this.traces[s]=null,this;if(!h)return this;var m=o(h,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),g=this.traces[s]||(this.traces[s]={id:s,buffer:y.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:n([y._gl.drawingBufferWidth,y._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(m.color!=null&&(g.color=m.color),m.size!=null&&(g.size=m.size),m.marker!=null&&(g.marker=m.marker),m.borderColor!=null&&(g.borderColor=m.borderColor),m.borderSize!=null&&(g.borderSize=m.borderSize),m.opacity!=null&&(g.opacity=m.opacity),m.viewport&&(g.viewport=n(m.viewport)),m.diagonal!=null&&(g.diagonal=m.diagonal),m.upper!=null&&(g.upper=m.upper),m.lower!=null&&(g.lower=m.lower),m.data){g.buffer(a(m.data)),g.columns=m.data.length,g.count=m.data[0].length,g.bounds=[];for(var x=0;x<g.columns;x++)g.bounds[x]=c(m.data[x],1)}var A;m.range&&(g.range=m.range,A=g.range&&typeof g.range[0]!="number"),m.domain&&(g.domain=m.domain);var b=!1;m.padding!=null&&(Array.isArray(m.padding)&&m.padding.length===g.columns&&typeof m.padding[m.padding.length-1]=="number"?(g.padding=m.padding.map(u),b=!0):g.padding=u(m.padding));var S=g.columns,w=g.count,T=g.viewport.width,_=g.viewport.height,v=g.viewport.x,P=g.viewport.y,M=T/S,E=_/S;g.passes=[];for(var D=0;D<S;D++)for(var N=0;N<S;N++)if(!(!g.diagonal&&N===D)&&!(!g.upper&&D>N)&&!(!g.lower&&D<N)){var O=r(g.id,D,N),I=this.passes[O]||(this.passes[O]={});if(m.data&&(m.transpose?I.positions={x:{buffer:g.buffer,offset:N,count:w,stride:S},y:{buffer:g.buffer,offset:D,count:w,stride:S}}:I.positions={x:{buffer:g.buffer,offset:N*w,count:w},y:{buffer:g.buffer,offset:D*w,count:w}},I.bounds=f(g.bounds,D,N)),m.domain||m.viewport||m.data){var F=b?f(g.padding,D,N):g.padding;if(g.domain){var V=f(g.domain,D,N),U=V[0],j=V[1],Z=V[2],te=V[3];I.viewport=[v+U*T+F[0],P+j*_+F[1],v+Z*T-F[2],P+te*_-F[3]]}else I.viewport=[v+N*M+M*F[0],P+D*E+E*F[1],v+(N+1)*M-M*F[2],P+(D+1)*E-E*F[3]]}m.color&&(I.color=g.color),m.size&&(I.size=g.size),m.marker&&(I.marker=g.marker),m.borderSize&&(I.borderSize=g.borderSize),m.borderColor&&(I.borderColor=g.borderColor),m.opacity&&(I.opacity=g.opacity),m.range&&(I.range=A?f(g.range,D,N):g.range||I.bounds),g.passes.push(O)}return this},i.prototype.draw=function(){for(var s,h=[],d=arguments.length;d--;)h[d]=arguments[d];if(!h.length)this.scatter.draw();else{for(var y=[],m=0;m<h.length;m++)if(typeof h[m]=="number"){var g=this.traces[h[m]],x=g.passes,A=g.passOffset;y.push.apply(y,t(A,A+x.length))}else if(h[m].length){var b=h[m],S=this.traces[m],w=S.passes,T=S.passOffset;w=w.map(function(_,v){y[T+v]=b})}(s=this.scatter).draw.apply(s,y)}return this},i.prototype.destroy=function(){return this.traces.forEach(function(s){s.buffer&&s.buffer.destroy&&s.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function r(s,h,d){var y=s.id!=null?s.id:s,m=h,g=d,x=y<<16|(m&255)<<8|g&255;return x}function f(s,h,d){var y,m,g,x,A=s[h],b=s[d];return A.length>2?(y=A[1],m=A[3]):A.length?(y=A[0],m=A[1]):(y=A.y,A.x+A.width,m=A.y+A.height),b.length>2?(g=b[0],x=b[2]):b.length?(g=b[0],x=b[1]):(g=b.x,x=b.x+b.width,b.y+b.height),[g,y,x,m]}function u(s){if(typeof s=="number")return[s,s,s,s];if(s.length===2)return[s[0],s[1],s[0],s[1]];var h=n(s);return[h.x,h.y,h.x+h.width,h.y+h.height]}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:278,"regl-scatter2d":281}],283:[function(e,k,z){(function(l,o){typeof z=="object"&&typeof k!="undefined"?k.exports=o():l.createREGL=o()})(this,function(){function l(Je,gt){this.id=Q++,this.type=Je,this.data=gt}function o(Je){if(Je.length===0)return[];var gt=Je.charAt(0),Ct=Je.charAt(Je.length-1);if(1<Je.length&&gt===Ct&&(gt==='"'||gt==="'"))return['"'+Je.substr(1,Je.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(gt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Je))return o(Je.substr(0,gt.index)).concat(o(gt[1])).concat(o(Je.substr(gt.index+gt[0].length)));if(gt=Je.split("."),gt.length===1)return['"'+Je.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Je=[],Ct=0;Ct<gt.length;++Ct)Je=Je.concat(o(gt[Ct]));return Je}function c(Je){return"["+o(Je).join("][")+"]"}function p(Je,gt){if(typeof Je=="function")return new l(0,Je);if(typeof Je=="number"||typeof Je=="boolean")return new l(5,Je);if(Array.isArray(Je))return new l(6,Je.map(function(Ct,or){return p(Ct)}));if(Je instanceof l)return Je}function t(){var Je={"":0},gt=[""];return{id:function(Ct){var or=Je[Ct];return or||(or=Je[Ct]=gt.length,gt.push(Ct),or)},str:function(Ct){return gt[Ct]}}}function n(Je,gt,Ct){function or(){var mr=window.innerWidth,Fr=window.innerHeight;Je!==document.body&&(Fr=gr.getBoundingClientRect(),mr=Fr.right-Fr.left,Fr=Fr.bottom-Fr.top),gr.width=Ct*mr,gr.height=Ct*Fr}var gr=document.createElement("canvas");K(gr.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Je.appendChild(gr),Je===document.body&&(gr.style.position="absolute",K(Je.style,{margin:0,padding:0}));var lr;return Je!==document.body&&typeof ResizeObserver=="function"?(lr=new ResizeObserver(function(){setTimeout(or)}),lr.observe(Je)):window.addEventListener("resize",or,!1),or(),{canvas:gr,onDestroy:function(){lr?lr.disconnect():window.removeEventListener("resize",or),Je.removeChild(gr)}}}function a(Je,gt){function Ct(or){try{return Je.getContext(or,gt)}catch{return null}}return Ct("webgl")||Ct("experimental-webgl")||Ct("webgl-experimental")}function i(Je){return typeof Je=="string"?Je.split():Je}function r(Je){return typeof Je=="string"?document.querySelector(Je):Je}function f(Je){var gt=Je||{},Ct,or,gr,lr;Je={};var mr=[],Fr=[],Rr=typeof window=="undefined"?1:window.devicePixelRatio,ir=!1,Vr=function(we){},qe=function(){};if(typeof gt=="string"?Ct=document.querySelector(gt):typeof gt=="object"&&(typeof gt.nodeName=="string"&&typeof gt.appendChild=="function"&&typeof gt.getBoundingClientRect=="function"?Ct=gt:typeof gt.drawArrays=="function"||typeof gt.drawElements=="function"?(lr=gt,gr=lr.canvas):("gl"in gt?lr=gt.gl:"canvas"in gt?gr=r(gt.canvas):"container"in gt&&(or=r(gt.container)),"attributes"in gt&&(Je=gt.attributes),"extensions"in gt&&(mr=i(gt.extensions)),"optionalExtensions"in gt&&(Fr=i(gt.optionalExtensions)),"onDone"in gt&&(Vr=gt.onDone),"profile"in gt&&(ir=!!gt.profile),"pixelRatio"in gt&&(Rr=+gt.pixelRatio))),Ct&&(Ct.nodeName.toLowerCase()==="canvas"?gr=Ct:or=Ct),!lr){if(!gr){if(Ct=n(or||document.body,Vr,Rr),!Ct)return null;gr=Ct.canvas,qe=Ct.onDestroy}Je.premultipliedAlpha===void 0&&(Je.premultipliedAlpha=!0),lr=a(gr,Je)}return lr?{gl:lr,canvas:gr,container:or,extensions:mr,optionalExtensions:Fr,pixelRatio:Rr,profile:ir,onDone:Vr,onDestroy:qe}:(qe(),Vr("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function u(Je,gt){function Ct(mr){mr=mr.toLowerCase();var Fr;try{Fr=or[mr]=Je.getExtension(mr)}catch{}return!!Fr}for(var or={},gr=0;gr<gt.extensions.length;++gr){var lr=gt.extensions[gr];if(!Ct(lr))return gt.onDestroy(),gt.onDone('"'+lr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return gt.optionalExtensions.forEach(Ct),{extensions:or,restore:function(){Object.keys(or).forEach(function(mr){if(or[mr]&&!Ct(mr))throw Error("(regl): error restoring extension "+mr)})}}}function s(Je,gt){for(var Ct=Array(Je),or=0;or<Je;++or)Ct[or]=gt(or);return Ct}function h(Je){var gt,Ct;return gt=(65535<Je)<<4,Je>>>=gt,Ct=(255<Je)<<3,Je>>>=Ct,gt|=Ct,Ct=(15<Je)<<2,Je>>>=Ct,gt|=Ct,Ct=(3<Je)<<1,gt|Ct|Je>>>Ct>>1}function d(){function Je(or){e:{for(var gr=16;268435456>=gr;gr*=16)if(or<=gr){or=gr;break e}or=0}return gr=Ct[h(or)>>2],0<gr.length?gr.pop():new ArrayBuffer(or)}function gt(or){Ct[h(or.byteLength)>>2].push(or)}var Ct=s(8,function(){return[]});return{alloc:Je,free:gt,allocType:function(or,gr){var lr=null;switch(or){case 5120:lr=new Int8Array(Je(gr),0,gr);break;case 5121:lr=new Uint8Array(Je(gr),0,gr);break;case 5122:lr=new Int16Array(Je(2*gr),0,gr);break;case 5123:lr=new Uint16Array(Je(2*gr),0,gr);break;case 5124:lr=new Int32Array(Je(4*gr),0,gr);break;case 5125:lr=new Uint32Array(Je(4*gr),0,gr);break;case 5126:lr=new Float32Array(Je(4*gr),0,gr);break;default:return null}return lr.length!==gr?lr.subarray(0,gr):lr},freeType:function(or){gt(or.buffer)}}}function y(Je){return!!Je&&typeof Je=="object"&&Array.isArray(Je.shape)&&Array.isArray(Je.stride)&&typeof Je.offset=="number"&&Je.shape.length===Je.stride.length&&(Array.isArray(Je.data)||ce(Je.data))}function m(Je,gt,Ct,or,gr,lr){for(var mr=0;mr<gt;++mr)for(var Fr=Je[mr],Rr=0;Rr<Ct;++Rr)for(var ir=Fr[Rr],Vr=0;Vr<or;++Vr)gr[lr++]=ir[Vr]}function g(Je,gt,Ct,or,gr){for(var lr=1,mr=Ct+1;mr<gt.length;++mr)lr*=gt[mr];var Fr=gt[Ct];if(gt.length-Ct==4){var Rr=gt[Ct+1],ir=gt[Ct+2];for(gt=gt[Ct+3],mr=0;mr<Fr;++mr)m(Je[mr],Rr,ir,gt,or,gr),gr+=lr}else for(mr=0;mr<Fr;++mr)g(Je[mr],gt,Ct+1,or,gr),gr+=lr}function x(Je){return ke[Object.prototype.toString.call(Je)]|0}function A(Je,gt){for(var Ct=0;Ct<gt.length;++Ct)Je[Ct]=gt[Ct]}function b(Je,gt,Ct,or,gr,lr,mr){for(var Fr=0,Rr=0;Rr<Ct;++Rr)for(var ir=0;ir<or;++ir)Je[Fr++]=gt[gr*Rr+lr*ir+mr]}function S(Je,gt,Ct,or){function gr(qe){this.id=Rr++,this.buffer=Je.createBuffer(),this.type=qe,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Ct.profile&&(this.stats={size:0})}function lr(qe,we,Me){qe.byteLength=we.byteLength,Je.bufferData(qe.type,we,Me)}function mr(qe,we,Me,Re,Ye,Qe){if(qe.usage=Me,Array.isArray(we)){if(qe.dtype=Re||5126,0<we.length)if(Array.isArray(we[0])){Ye=Ge(we);for(var ot=Re=1;ot<Ye.length;++ot)Re*=Ye[ot];qe.dimension=Re,we=He(we,Ye,qe.dtype),lr(qe,we,Me),Qe?qe.persistentData=we:fe.freeType(we)}else typeof we[0]=="number"?(qe.dimension=Ye,Ye=fe.allocType(qe.dtype,we.length),A(Ye,we),lr(qe,Ye,Me),Qe?qe.persistentData=Ye:fe.freeType(Ye)):ce(we[0])&&(qe.dimension=we[0].length,qe.dtype=Re||x(we[0])||5126,we=He(we,[we.length,we[0].length],qe.dtype),lr(qe,we,Me),Qe?qe.persistentData=we:fe.freeType(we))}else if(ce(we))qe.dtype=Re||x(we),qe.dimension=Ye,lr(qe,we,Me),Qe&&(qe.persistentData=new Uint8Array(new Uint8Array(we.buffer)));else if(y(we)){Ye=we.shape;var st=we.stride,ot=we.offset,pt=0,wt=0,Yt=0,wr=0;Ye.length===1?(pt=Ye[0],wt=1,Yt=st[0],wr=0):Ye.length===2&&(pt=Ye[0],wt=Ye[1],Yt=st[0],wr=st[1]),qe.dtype=Re||x(we.data)||5126,qe.dimension=wt,Ye=fe.allocType(qe.dtype,pt*wt),b(Ye,we.data,pt,wt,Yt,wr,ot),lr(qe,Ye,Me),Qe?qe.persistentData=Ye:fe.freeType(Ye)}else we instanceof ArrayBuffer&&(qe.dtype=5121,qe.dimension=Ye,lr(qe,we,Me),Qe&&(qe.persistentData=new Uint8Array(new Uint8Array(we))))}function Fr(qe){gt.bufferCount--,or(qe),Je.deleteBuffer(qe.buffer),qe.buffer=null,delete ir[qe.id]}var Rr=0,ir={};gr.prototype.bind=function(){Je.bindBuffer(this.type,this.buffer)},gr.prototype.destroy=function(){Fr(this)};var Vr=[];return Ct.profile&&(gt.getTotalBufferSize=function(){var qe=0;return Object.keys(ir).forEach(function(we){qe+=ir[we].stats.size}),qe}),{create:function(qe,we,Me,Re){function Ye(ot){var st=35044,pt=null,wt=0,Yt=0,wr=1;return Array.isArray(ot)||ce(ot)||y(ot)||ot instanceof ArrayBuffer?pt=ot:typeof ot=="number"?wt=ot|0:ot&&("data"in ot&&(pt=ot.data),"usage"in ot&&(st=Oe[ot.usage]),"type"in ot&&(Yt=Ae[ot.type]),"dimension"in ot&&(wr=ot.dimension|0),"length"in ot&&(wt=ot.length|0)),Qe.bind(),pt?mr(Qe,pt,st,Yt,wr,Re):(wt&&Je.bufferData(Qe.type,wt,st),Qe.dtype=Yt||5121,Qe.usage=st,Qe.dimension=wr,Qe.byteLength=wt),Ct.profile&&(Qe.stats.size=Qe.byteLength*_e[Qe.dtype]),Ye}gt.bufferCount++;var Qe=new gr(we);return ir[Qe.id]=Qe,Me||Ye(qe),Ye._reglType="buffer",Ye._buffer=Qe,Ye.subdata=function(ot,st){var pt=(st||0)|0,wt;if(Qe.bind(),ce(ot)||ot instanceof ArrayBuffer)Je.bufferSubData(Qe.type,pt,ot);else if(Array.isArray(ot)){if(0<ot.length)if(typeof ot[0]=="number"){var Yt=fe.allocType(Qe.dtype,ot.length);A(Yt,ot),Je.bufferSubData(Qe.type,pt,Yt),fe.freeType(Yt)}else(Array.isArray(ot[0])||ce(ot[0]))&&(wt=Ge(ot),Yt=He(ot,wt,Qe.dtype),Je.bufferSubData(Qe.type,pt,Yt),fe.freeType(Yt))}else if(y(ot)){wt=ot.shape;var wr=ot.stride,Tr=Yt=0,Mr=0,_r=0;wt.length===1?(Yt=wt[0],Tr=1,Mr=wr[0],_r=0):wt.length===2&&(Yt=wt[0],Tr=wt[1],Mr=wr[0],_r=wr[1]),wt=Array.isArray(ot.data)?Qe.dtype:x(ot.data),wt=fe.allocType(wt,Yt*Tr),b(wt,ot.data,Yt,Tr,Mr,_r,ot.offset),Je.bufferSubData(Qe.type,pt,wt),fe.freeType(wt)}return Ye},Ct.profile&&(Ye.stats=Qe.stats),Ye.destroy=function(){Fr(Qe)},Ye},createStream:function(qe,we){var Me=Vr.pop();return Me||(Me=new gr(qe)),Me.bind(),mr(Me,we,35040,0,1,!1),Me},destroyStream:function(qe){Vr.push(qe)},clear:function(){me(ir).forEach(Fr),Vr.forEach(Fr)},getBuffer:function(qe){return qe&&qe._buffer instanceof gr?qe._buffer:null},restore:function(){me(ir).forEach(function(qe){qe.buffer=Je.createBuffer(),Je.bindBuffer(qe.type,qe.buffer),Je.bufferData(qe.type,qe.persistentData||qe.byteLength,qe.usage)})},_initBuffer:mr}}function w(Je,gt,Ct,or){function gr(qe){this.id=Rr++,Fr[this.id]=this,this.buffer=qe,this.primType=4,this.type=this.vertCount=0}function lr(qe,we,Me,Re,Ye,Qe,ot){qe.buffer.bind();var st;if(we?((st=ot)||ce(we)&&(!y(we)||ce(we.data))||(st=gt.oes_element_index_uint?5125:5123),Ct._initBuffer(qe.buffer,we,Me,st,3)):(Je.bufferData(34963,Qe,Me),qe.buffer.dtype=st||5121,qe.buffer.usage=Me,qe.buffer.dimension=3,qe.buffer.byteLength=Qe),st=ot,!ot){switch(qe.buffer.dtype){case 5121:case 5120:st=5121;break;case 5123:case 5122:st=5123;break;case 5125:case 5124:st=5125}qe.buffer.dtype=st}qe.type=st,we=Ye,0>we&&(we=qe.buffer.byteLength,st===5123?we>>=1:st===5125&&(we>>=2)),qe.vertCount=we,we=Re,0>Re&&(we=4,Re=qe.buffer.dimension,Re===1&&(we=0),Re===2&&(we=1),Re===3&&(we=4)),qe.primType=we}function mr(qe){or.elementsCount--,delete Fr[qe.id],qe.buffer.destroy(),qe.buffer=null}var Fr={},Rr=0,ir={uint8:5121,uint16:5123};gt.oes_element_index_uint&&(ir.uint32=5125),gr.prototype.bind=function(){this.buffer.bind()};var Vr=[];return{create:function(qe,we){function Me(Qe){if(Qe)if(typeof Qe=="number")Re(Qe),Ye.primType=4,Ye.vertCount=Qe|0,Ye.type=5121;else{var ot=null,st=35044,pt=-1,wt=-1,Yt=0,wr=0;Array.isArray(Qe)||ce(Qe)||y(Qe)?ot=Qe:("data"in Qe&&(ot=Qe.data),"usage"in Qe&&(st=Oe[Qe.usage]),"primitive"in Qe&&(pt=Ie[Qe.primitive]),"count"in Qe&&(wt=Qe.count|0),"type"in Qe&&(wr=ir[Qe.type]),"length"in Qe?Yt=Qe.length|0:(Yt=wt,wr===5123||wr===5122?Yt*=2:(wr===5125||wr===5124)&&(Yt*=4))),lr(Ye,ot,st,pt,wt,Yt,wr)}else Re(),Ye.primType=4,Ye.vertCount=0,Ye.type=5121;return Me}var Re=Ct.create(null,34963,!0),Ye=new gr(Re._buffer);return or.elementsCount++,Me(qe),Me._reglType="elements",Me._elements=Ye,Me.subdata=function(Qe,ot){return Re.subdata(Qe,ot),Me},Me.destroy=function(){mr(Ye)},Me},createStream:function(qe){var we=Vr.pop();return we||(we=new gr(Ct.create(null,34963,!0,!1)._buffer)),lr(we,qe,35040,-1,-1,0,0),we},destroyStream:function(qe){Vr.push(qe)},getElements:function(qe){return typeof qe=="function"&&qe._elements instanceof gr?qe._elements:null},clear:function(){me(Fr).forEach(mr)}}}function T(Je){for(var gt=fe.allocType(5123,Je.length),Ct=0;Ct<Je.length;++Ct)if(isNaN(Je[Ct]))gt[Ct]=65535;else if(Je[Ct]===1/0)gt[Ct]=31744;else if(Je[Ct]===-1/0)gt[Ct]=64512;else{We[0]=Je[Ct];var or=et[0],gr=or>>>31<<15,lr=(or<<1>>>24)-127,or=or>>13&1023;gt[Ct]=-24>lr?gr:-14>lr?gr+(or+1024>>-14-lr):15<lr?gr+31744:gr+(lr+15<<10)+or}return gt}function _(Je){return Array.isArray(Je)||ce(Je)}function v(Je){return"[object "+Je+"]"}function P(Je){return Array.isArray(Je)&&(Je.length===0||typeof Je[0]=="number")}function M(Je){return!!(Array.isArray(Je)&&Je.length!==0&&_(Je[0]))}function E(Je){return Object.prototype.toString.call(Je)}function D(Je){if(!Je)return!1;var gt=E(Je);return 0<=Et.indexOf(gt)?!0:P(Je)||M(Je)||y(Je)}function N(Je,gt){Je.type===36193?(Je.data=T(gt),fe.freeType(gt)):Je.data=gt}function O(Je,gt,Ct,or,gr,lr){if(Je=typeof it[Je]!="undefined"?it[Je]:Ve[Je]*At[gt],lr&&(Je*=6),gr){for(or=0;1<=Ct;)or+=Je*Ct*Ct,Ct/=2;return or}return Je*Ct*or}function I(Je,gt,Ct,or,gr,lr,mr){function Fr(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function Rr(vr,yn){vr.internalformat=yn.internalformat,vr.format=yn.format,vr.type=yn.type,vr.compressed=yn.compressed,vr.premultiplyAlpha=yn.premultiplyAlpha,vr.flipY=yn.flipY,vr.unpackAlignment=yn.unpackAlignment,vr.colorSpace=yn.colorSpace,vr.width=yn.width,vr.height=yn.height,vr.channels=yn.channels}function ir(vr,yn){if(typeof yn=="object"&&yn){"premultiplyAlpha"in yn&&(vr.premultiplyAlpha=yn.premultiplyAlpha),"flipY"in yn&&(vr.flipY=yn.flipY),"alignment"in yn&&(vr.unpackAlignment=yn.alignment),"colorSpace"in yn&&(vr.colorSpace=sn[yn.colorSpace]),"type"in yn&&(vr.type=cn[yn.type]);var en=vr.width,In=vr.height,Bn=vr.channels,ha=!1;"shape"in yn?(en=yn.shape[0],In=yn.shape[1],yn.shape.length===3&&(Bn=yn.shape[2],ha=!0)):("radius"in yn&&(en=In=yn.radius),"width"in yn&&(en=yn.width),"height"in yn&&(In=yn.height),"channels"in yn&&(Bn=yn.channels,ha=!0)),vr.width=en|0,vr.height=In|0,vr.channels=Bn|0,en=!1,"format"in yn&&(en=yn.format,In=vr.internalformat=$r[en],vr.format=on[In],en in cn&&!("type"in yn)&&(vr.type=cn[en]),en in at&&(vr.compressed=!0),en=!0),!ha&&en?vr.channels=Ve[vr.format]:ha&&!en&&vr.channels!==De[vr.format]&&(vr.format=vr.internalformat=De[vr.channels])}}function Vr(vr){Je.pixelStorei(37440,vr.flipY),Je.pixelStorei(37441,vr.premultiplyAlpha),Je.pixelStorei(37443,vr.colorSpace),Je.pixelStorei(3317,vr.unpackAlignment)}function qe(){Fr.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function we(vr,yn){var en=null;if(D(yn)?en=yn:yn&&(ir(vr,yn),"x"in yn&&(vr.xOffset=yn.x|0),"y"in yn&&(vr.yOffset=yn.y|0),D(yn.data)&&(en=yn.data)),yn.copy){var In=gr.viewportWidth,Bn=gr.viewportHeight;vr.width=vr.width||In-vr.xOffset,vr.height=vr.height||Bn-vr.yOffset,vr.needsCopy=!0}else if(!en)vr.width=vr.width||1,vr.height=vr.height||1,vr.channels=vr.channels||4;else if(ce(en))vr.channels=vr.channels||4,vr.data=en,"type"in yn||vr.type!==5121||(vr.type=ke[Object.prototype.toString.call(en)]|0);else if(P(en)){switch(vr.channels=vr.channels||4,In=en,Bn=In.length,vr.type){case 5121:case 5123:case 5125:case 5126:Bn=fe.allocType(vr.type,Bn),Bn.set(In),vr.data=Bn;break;case 36193:vr.data=T(In)}vr.alignment=1,vr.needsFree=!0}else if(y(en)){In=en.data,Array.isArray(In)||vr.type!==5121||(vr.type=ke[Object.prototype.toString.call(In)]|0);var Bn=en.shape,ha=en.stride,qn,Hn,la,da;Bn.length===3?(la=Bn[2],da=ha[2]):da=la=1,qn=Bn[0],Hn=Bn[1],Bn=ha[0],ha=ha[1],vr.alignment=1,vr.width=qn,vr.height=Hn,vr.channels=la,vr.format=vr.internalformat=De[la],vr.needsFree=!0,qn=da,en=en.offset,la=vr.width,da=vr.height,Hn=vr.channels;for(var hr=fe.allocType(vr.type===36193?5126:vr.type,la*da*Hn),zr=0,ln=0;ln<da;++ln)for(var Rt=0;Rt<la;++Rt)for(var qt=0;qt<Hn;++qt)hr[zr++]=In[Bn*Rt+ha*ln+qn*qt+en];N(vr,hr)}else if(E(en)===dt||E(en)===Dt||E(en)===Gt)E(en)===dt||E(en)===Dt?vr.element=en:vr.element=en.canvas,vr.width=vr.element.width,vr.height=vr.element.height,vr.channels=4;else if(E(en)===Mt)vr.element=en,vr.width=en.width,vr.height=en.height,vr.channels=4;else if(E(en)===zt)vr.element=en,vr.width=en.naturalWidth,vr.height=en.naturalHeight,vr.channels=4;else if(E(en)===Nt)vr.element=en,vr.width=en.videoWidth,vr.height=en.videoHeight,vr.channels=4;else if(M(en)){for(In=vr.width||en[0].length,Bn=vr.height||en.length,ha=vr.channels,ha=_(en[0][0])?ha||en[0][0].length:ha||1,qn=xe.shape(en),la=1,da=0;da<qn.length;++da)la*=qn[da];la=fe.allocType(vr.type===36193?5126:vr.type,la),xe.flatten(en,qn,"",la),N(vr,la),vr.alignment=1,vr.width=In,vr.height=Bn,vr.channels=ha,vr.format=vr.internalformat=De[ha],vr.needsFree=!0}}function Me(vr,yn,en,In,Bn){var ha=vr.element,qn=vr.data,Hn=vr.internalformat,la=vr.format,da=vr.type,hr=vr.width,zr=vr.height;Vr(vr),ha?Je.texSubImage2D(yn,Bn,en,In,la,da,ha):vr.compressed?Je.compressedTexSubImage2D(yn,Bn,en,In,Hn,hr,zr,qn):vr.needsCopy?(or(),Je.copyTexSubImage2D(yn,Bn,en,In,vr.xOffset,vr.yOffset,hr,zr)):Je.texSubImage2D(yn,Bn,en,In,hr,zr,la,da,qn)}function Re(){return Pn.pop()||new qe}function Ye(vr){vr.needsFree&&fe.freeType(vr.data),qe.call(vr),Pn.push(vr)}function Qe(){Fr.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function ot(vr,yn,en){var In=vr.images[0]=Re();vr.mipmask=1,In.width=vr.width=yn,In.height=vr.height=en,In.channels=vr.channels=4}function st(vr,yn){var en=null;if(D(yn))en=vr.images[0]=Re(),Rr(en,vr),we(en,yn),vr.mipmask=1;else if(ir(vr,yn),Array.isArray(yn.mipmap))for(var In=yn.mipmap,Bn=0;Bn<In.length;++Bn)en=vr.images[Bn]=Re(),Rr(en,vr),en.width>>=Bn,en.height>>=Bn,we(en,In[Bn]),vr.mipmask|=1<<Bn;else en=vr.images[0]=Re(),Rr(en,vr),we(en,yn),vr.mipmask=1;Rr(vr,vr.images[0])}function pt(vr,yn){for(var en=vr.images,In=0;In<en.length&&en[In];++In){var Bn=en[In],ha=yn,qn=In,Hn=Bn.element,la=Bn.data,da=Bn.internalformat,hr=Bn.format,zr=Bn.type,ln=Bn.width,Rt=Bn.height;Vr(Bn),Hn?Je.texImage2D(ha,qn,hr,hr,zr,Hn):Bn.compressed?Je.compressedTexImage2D(ha,qn,da,ln,Rt,0,la):Bn.needsCopy?(or(),Je.copyTexImage2D(ha,qn,hr,Bn.xOffset,Bn.yOffset,ln,Rt,0)):Je.texImage2D(ha,qn,hr,ln,Rt,0,hr,zr,la||null)}}function wt(){var vr=En.pop()||new Qe;Fr.call(vr);for(var yn=vr.mipmask=0;16>yn;++yn)vr.images[yn]=null;return vr}function Yt(vr){for(var yn=vr.images,en=0;en<yn.length;++en)yn[en]&&Ye(yn[en]),yn[en]=null;En.push(vr)}function wr(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Tr(vr,yn){"min"in yn&&(vr.minFilter=kr[yn.min],0<=Ne.indexOf(vr.minFilter)&&!("faces"in yn)&&(vr.genMipmaps=!0)),"mag"in yn&&(vr.magFilter=Xr[yn.mag]);var en=vr.wrapS,In=vr.wrapT;if("wrap"in yn){var Bn=yn.wrap;typeof Bn=="string"?en=In=gn[Bn]:Array.isArray(Bn)&&(en=gn[Bn[0]],In=gn[Bn[1]])}else"wrapS"in yn&&(en=gn[yn.wrapS]),"wrapT"in yn&&(In=gn[yn.wrapT]);if(vr.wrapS=en,vr.wrapT=In,"anisotropic"in yn&&(vr.anisotropic=yn.anisotropic),"mipmap"in yn){switch(en=!1,typeof yn.mipmap){case"string":vr.mipmapHint=yr[yn.mipmap],en=vr.genMipmaps=!0;break;case"boolean":en=vr.genMipmaps=yn.mipmap;break;case"object":vr.genMipmaps=!1,en=!0}!en||"min"in yn||(vr.minFilter=9984)}}function Mr(vr,yn){Je.texParameteri(yn,10241,vr.minFilter),Je.texParameteri(yn,10240,vr.magFilter),Je.texParameteri(yn,10242,vr.wrapS),Je.texParameteri(yn,10243,vr.wrapT),gt.ext_texture_filter_anisotropic&&Je.texParameteri(yn,34046,vr.anisotropic),vr.genMipmaps&&(Je.hint(33170,vr.mipmapHint),Je.generateMipmap(yn))}function _r(vr){Fr.call(this),this.mipmask=0,this.internalformat=6408,this.id=$n++,this.refCount=1,this.target=vr,this.texture=Je.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new wr,mr.profile&&(this.stats={size:0})}function Or(vr){Je.activeTexture(33984),Je.bindTexture(vr.target,vr.texture)}function nn(){var vr=ba[0];vr?Je.bindTexture(vr.target,vr.texture):Je.bindTexture(3553,null)}function Sr(vr){var yn=vr.texture,en=vr.unit,In=vr.target;0<=en&&(Je.activeTexture(33984+en),Je.bindTexture(In,null),ba[en]=null),Je.deleteTexture(yn),vr.texture=null,vr.params=null,vr.pixels=null,vr.refCount=0,delete aa[vr.id],lr.textureCount--}var yr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},gn={repeat:10497,clamp:33071,mirror:33648},Xr={nearest:9728,linear:9729},kr=K({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Xr),sn={none:0,browser:37444},cn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},$r={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},at={};gt.ext_srgb&&($r.srgb=35904,$r.srgba=35906),gt.oes_texture_float&&(cn.float32=cn.float=5126),gt.oes_texture_half_float&&(cn.float16=cn["half float"]=36193),gt.webgl_depth_texture&&(K($r,{depth:6402,"depth stencil":34041}),K(cn,{uint16:5123,uint32:5125,"depth stencil":34042})),gt.webgl_compressed_texture_s3tc&&K(at,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),gt.webgl_compressed_texture_atc&&K(at,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),gt.webgl_compressed_texture_pvrtc&&K(at,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),gt.webgl_compressed_texture_etc1&&(at["rgb etc1"]=36196);var Ot=Array.prototype.slice.call(Je.getParameter(34467));Object.keys(at).forEach(function(vr){var yn=at[vr];0<=Ot.indexOf(yn)&&($r[vr]=yn)});var nr=Object.keys($r);Ct.textureFormats=nr;var dr=[];Object.keys($r).forEach(function(vr){dr[$r[vr]]=vr});var Zr=[];Object.keys(cn).forEach(function(vr){Zr[cn[vr]]=vr});var Lr=[];Object.keys(Xr).forEach(function(vr){Lr[Xr[vr]]=vr});var Ur=[];Object.keys(kr).forEach(function(vr){Ur[kr[vr]]=vr});var xr=[];Object.keys(gn).forEach(function(vr){xr[gn[vr]]=vr});var on=nr.reduce(function(vr,yn){var en=$r[yn];return en===6409||en===6406||en===6409||en===6410||en===6402||en===34041||gt.ext_srgb&&(en===35904||en===35906)?vr[en]=en:en===32855||0<=yn.indexOf("rgba")?vr[en]=6408:vr[en]=6407,vr},{}),Pn=[],En=[],$n=0,aa={},Ca=Ct.maxTextureUnits,ba=Array(Ca).map(function(){return null});return K(_r.prototype,{bind:function(){this.bindCount+=1;var vr=this.unit;if(0>vr){for(var yn=0;yn<Ca;++yn){var en=ba[yn];if(en){if(0<en.bindCount)continue;en.unit=-1}ba[yn]=this,vr=yn;break}mr.profile&&lr.maxTextureUnits<vr+1&&(lr.maxTextureUnits=vr+1),this.unit=vr,Je.activeTexture(33984+vr),Je.bindTexture(this.target,this.texture)}return vr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Sr(this)}}),mr.profile&&(lr.getTotalTextureSize=function(){var vr=0;return Object.keys(aa).forEach(function(yn){vr+=aa[yn].stats.size}),vr}),{create2D:function(vr,yn){function en(Bn,ha){var qn=In.texInfo;wr.call(qn);var Hn=wt();return typeof Bn=="number"?typeof ha=="number"?ot(Hn,Bn|0,ha|0):ot(Hn,Bn|0,Bn|0):Bn?(Tr(qn,Bn),st(Hn,Bn)):ot(Hn,1,1),qn.genMipmaps&&(Hn.mipmask=(Hn.width<<1)-1),In.mipmask=Hn.mipmask,Rr(In,Hn),In.internalformat=Hn.internalformat,en.width=Hn.width,en.height=Hn.height,Or(In),pt(Hn,3553),Mr(qn,3553),nn(),Yt(Hn),mr.profile&&(In.stats.size=O(In.internalformat,In.type,Hn.width,Hn.height,qn.genMipmaps,!1)),en.format=dr[In.internalformat],en.type=Zr[In.type],en.mag=Lr[qn.magFilter],en.min=Ur[qn.minFilter],en.wrapS=xr[qn.wrapS],en.wrapT=xr[qn.wrapT],en}var In=new _r(3553);return aa[In.id]=In,lr.textureCount++,en(vr,yn),en.subimage=function(Bn,ha,qn,Hn){ha|=0,qn|=0,Hn|=0;var la=Re();return Rr(la,In),la.width=0,la.height=0,we(la,Bn),la.width=la.width||(In.width>>Hn)-ha,la.height=la.height||(In.height>>Hn)-qn,Or(In),Me(la,3553,ha,qn,Hn),nn(),Ye(la),en},en.resize=function(Bn,ha){var qn=Bn|0,Hn=ha|0||qn;if(qn===In.width&&Hn===In.height)return en;en.width=In.width=qn,en.height=In.height=Hn,Or(In);for(var la=0;In.mipmask>>la;++la){var da=qn>>la,hr=Hn>>la;if(!da||!hr)break;Je.texImage2D(3553,la,In.format,da,hr,0,In.format,In.type,null)}return nn(),mr.profile&&(In.stats.size=O(In.internalformat,In.type,qn,Hn,!1,!1)),en},en._reglType="texture2d",en._texture=In,mr.profile&&(en.stats=In.stats),en.destroy=function(){In.decRef()},en},createCube:function(vr,yn,en,In,Bn,ha){function qn(da,hr,zr,ln,Rt,qt){var br,Hr=Hn.texInfo;for(wr.call(Hr),br=0;6>br;++br)la[br]=wt();if(typeof da=="number"||!da)for(da=da|0||1,br=0;6>br;++br)ot(la[br],da,da);else if(typeof da=="object")if(hr)st(la[0],da),st(la[1],hr),st(la[2],zr),st(la[3],ln),st(la[4],Rt),st(la[5],qt);else if(Tr(Hr,da),ir(Hn,da),"faces"in da)for(da=da.faces,br=0;6>br;++br)Rr(la[br],Hn),st(la[br],da[br]);else for(br=0;6>br;++br)st(la[br],da);for(Rr(Hn,la[0]),Hn.mipmask=Hr.genMipmaps?(la[0].width<<1)-1:la[0].mipmask,Hn.internalformat=la[0].internalformat,qn.width=la[0].width,qn.height=la[0].height,Or(Hn),br=0;6>br;++br)pt(la[br],34069+br);for(Mr(Hr,34067),nn(),mr.profile&&(Hn.stats.size=O(Hn.internalformat,Hn.type,qn.width,qn.height,Hr.genMipmaps,!0)),qn.format=dr[Hn.internalformat],qn.type=Zr[Hn.type],qn.mag=Lr[Hr.magFilter],qn.min=Ur[Hr.minFilter],qn.wrapS=xr[Hr.wrapS],qn.wrapT=xr[Hr.wrapT],br=0;6>br;++br)Yt(la[br]);return qn}var Hn=new _r(34067);aa[Hn.id]=Hn,lr.cubeCount++;var la=Array(6);return qn(vr,yn,en,In,Bn,ha),qn.subimage=function(da,hr,zr,ln,Rt){zr|=0,ln|=0,Rt|=0;var qt=Re();return Rr(qt,Hn),qt.width=0,qt.height=0,we(qt,hr),qt.width=qt.width||(Hn.width>>Rt)-zr,qt.height=qt.height||(Hn.height>>Rt)-ln,Or(Hn),Me(qt,34069+da,zr,ln,Rt),nn(),Ye(qt),qn},qn.resize=function(da){if(da|=0,da!==Hn.width){qn.width=Hn.width=da,qn.height=Hn.height=da,Or(Hn);for(var hr=0;6>hr;++hr)for(var zr=0;Hn.mipmask>>zr;++zr)Je.texImage2D(34069+hr,zr,Hn.format,da>>zr,da>>zr,0,Hn.format,Hn.type,null);return nn(),mr.profile&&(Hn.stats.size=O(Hn.internalformat,Hn.type,qn.width,qn.height,!1,!0)),qn}},qn._reglType="textureCube",qn._texture=Hn,mr.profile&&(qn.stats=Hn.stats),qn.destroy=function(){Hn.decRef()},qn},clear:function(){for(var vr=0;vr<Ca;++vr)Je.activeTexture(33984+vr),Je.bindTexture(3553,null),ba[vr]=null;me(aa).forEach(Sr),lr.cubeCount=0,lr.textureCount=0},getTexture:function(vr){return null},restore:function(){for(var vr=0;vr<Ca;++vr){var yn=ba[vr];yn&&(yn.bindCount=0,yn.unit=-1,ba[vr]=null)}me(aa).forEach(function(en){en.texture=Je.createTexture(),Je.bindTexture(en.target,en.texture);for(var In=0;32>In;++In)if((en.mipmask&1<<In)!=0)if(en.target===3553)Je.texImage2D(3553,In,en.internalformat,en.width>>In,en.height>>In,0,en.internalformat,en.type,null);else for(var Bn=0;6>Bn;++Bn)Je.texImage2D(34069+Bn,In,en.internalformat,en.width>>In,en.height>>In,0,en.internalformat,en.type,null);Mr(en.texInfo,en.target)})},refresh:function(){for(var vr=0;vr<Ca;++vr){var yn=ba[vr];yn&&(yn.bindCount=0,yn.unit=-1,ba[vr]=null),Je.activeTexture(33984+vr),Je.bindTexture(3553,null),Je.bindTexture(34067,null)}}}}function F(Je,gt,Ct,or,gr,lr){function mr(_r,Or,nn){this.target=_r,this.texture=Or,this.renderbuffer=nn;var Sr=_r=0;Or?(_r=Or.width,Sr=Or.height):nn&&(_r=nn.width,Sr=nn.height),this.width=_r,this.height=Sr}function Fr(_r){_r&&(_r.texture&&_r.texture._texture.decRef(),_r.renderbuffer&&_r.renderbuffer._renderbuffer.decRef())}function Rr(_r,Or,nn){_r&&(_r.texture?_r.texture._texture.refCount+=1:_r.renderbuffer._renderbuffer.refCount+=1)}function ir(_r,Or){Or&&(Or.texture?Je.framebufferTexture2D(36160,_r,Or.target,Or.texture._texture.texture,0):Je.framebufferRenderbuffer(36160,_r,36161,Or.renderbuffer._renderbuffer.renderbuffer))}function Vr(_r){var Or=3553,nn=null,Sr=null,yr=_r;return typeof _r=="object"&&(yr=_r.data,"target"in _r&&(Or=_r.target|0)),_r=yr._reglType,_r==="texture2d"||_r==="textureCube"?nn=yr:_r==="renderbuffer"&&(Sr=yr,Or=36161),new mr(Or,nn,Sr)}function qe(_r,Or,nn,Sr,yr){return nn?(_r=or.create2D({width:_r,height:Or,format:Sr,type:yr}),_r._texture.refCount=0,new mr(3553,_r,null)):(_r=gr.create({width:_r,height:Or,format:Sr}),_r._renderbuffer.refCount=0,new mr(36161,null,_r))}function we(_r){return _r&&(_r.texture||_r.renderbuffer)}function Me(_r,Or,nn){_r&&(_r.texture?_r.texture.resize(Or,nn):_r.renderbuffer&&_r.renderbuffer.resize(Or,nn),_r.width=Or,_r.height=nn)}function Re(){this.id=Tr++,Mr[this.id]=this,this.framebuffer=Je.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Ye(_r){_r.colorAttachments.forEach(Fr),Fr(_r.depthAttachment),Fr(_r.stencilAttachment),Fr(_r.depthStencilAttachment)}function Qe(_r){Je.deleteFramebuffer(_r.framebuffer),_r.framebuffer=null,lr.framebufferCount--,delete Mr[_r.id]}function ot(_r){var Or;Je.bindFramebuffer(36160,_r.framebuffer);var nn=_r.colorAttachments;for(Or=0;Or<nn.length;++Or)ir(36064+Or,nn[Or]);for(Or=nn.length;Or<Ct.maxColorAttachments;++Or)Je.framebufferTexture2D(36160,36064+Or,3553,null,0);Je.framebufferTexture2D(36160,33306,3553,null,0),Je.framebufferTexture2D(36160,36096,3553,null,0),Je.framebufferTexture2D(36160,36128,3553,null,0),ir(36096,_r.depthAttachment),ir(36128,_r.stencilAttachment),ir(33306,_r.depthStencilAttachment),Je.checkFramebufferStatus(36160),Je.isContextLost(),Je.bindFramebuffer(36160,pt.next?pt.next.framebuffer:null),pt.cur=pt.next,Je.getError()}function st(_r,Or){function nn(yr,gn){var Xr,kr=0,sn=0,cn=!0,$r=!0;Xr=null;var at=!0,Ot="rgba",nr="uint8",dr=1,Zr=null,Lr=null,Ur=null,xr=!1;typeof yr=="number"?(kr=yr|0,sn=gn|0||kr):yr?("shape"in yr?(sn=yr.shape,kr=sn[0],sn=sn[1]):("radius"in yr&&(kr=sn=yr.radius),"width"in yr&&(kr=yr.width),"height"in yr&&(sn=yr.height)),("color"in yr||"colors"in yr)&&(Xr=yr.color||yr.colors),Xr||("colorCount"in yr&&(dr=yr.colorCount|0),"colorTexture"in yr&&(at=!!yr.colorTexture,Ot="rgba4"),"colorType"in yr&&(nr=yr.colorType,!at)&&(nr==="half float"||nr==="float16"?Ot="rgba16f":(nr==="float"||nr==="float32")&&(Ot="rgba32f")),"colorFormat"in yr&&(Ot=yr.colorFormat,0<=wt.indexOf(Ot)?at=!0:0<=Yt.indexOf(Ot)&&(at=!1))),("depthTexture"in yr||"depthStencilTexture"in yr)&&(xr=!(!yr.depthTexture&&!yr.depthStencilTexture)),"depth"in yr&&(typeof yr.depth=="boolean"?cn=yr.depth:(Zr=yr.depth,$r=!1)),"stencil"in yr&&(typeof yr.stencil=="boolean"?$r=yr.stencil:(Lr=yr.stencil,cn=!1)),"depthStencil"in yr&&(typeof yr.depthStencil=="boolean"?cn=$r=yr.depthStencil:(Ur=yr.depthStencil,$r=cn=!1))):kr=sn=1;var on=null,Pn=null,En=null,$n=null;if(Array.isArray(Xr))on=Xr.map(Vr);else if(Xr)on=[Vr(Xr)];else for(on=Array(dr),Xr=0;Xr<dr;++Xr)on[Xr]=qe(kr,sn,at,Ot,nr);for(kr=kr||on[0].width,sn=sn||on[0].height,Zr?Pn=Vr(Zr):cn&&!$r&&(Pn=qe(kr,sn,xr,"depth","uint32")),Lr?En=Vr(Lr):$r&&!cn&&(En=qe(kr,sn,!1,"stencil","uint8")),Ur?$n=Vr(Ur):!Zr&&!Lr&&$r&&cn&&($n=qe(kr,sn,xr,"depth stencil","depth stencil")),cn=null,Xr=0;Xr<on.length;++Xr)Rr(on[Xr]),on[Xr]&&on[Xr].texture&&($r=Ee[on[Xr].texture._texture.format]*Xe[on[Xr].texture._texture.type],cn===null&&(cn=$r));return Rr(Pn),Rr(En),Rr($n),Ye(Sr),Sr.width=kr,Sr.height=sn,Sr.colorAttachments=on,Sr.depthAttachment=Pn,Sr.stencilAttachment=En,Sr.depthStencilAttachment=$n,nn.color=on.map(we),nn.depth=we(Pn),nn.stencil=we(En),nn.depthStencil=we($n),nn.width=Sr.width,nn.height=Sr.height,ot(Sr),nn}var Sr=new Re;return lr.framebufferCount++,nn(_r,Or),K(nn,{resize:function(yr,gn){var Xr=Math.max(yr|0,1),kr=Math.max(gn|0||Xr,1);if(Xr===Sr.width&&kr===Sr.height)return nn;for(var sn=Sr.colorAttachments,cn=0;cn<sn.length;++cn)Me(sn[cn],Xr,kr);return Me(Sr.depthAttachment,Xr,kr),Me(Sr.stencilAttachment,Xr,kr),Me(Sr.depthStencilAttachment,Xr,kr),Sr.width=nn.width=Xr,Sr.height=nn.height=kr,ot(Sr),nn},_reglType:"framebuffer",_framebuffer:Sr,destroy:function(){Qe(Sr),Ye(Sr)},use:function(yr){pt.setFBO({framebuffer:nn},yr)}})}var pt={cur:null,next:null,dirty:!1,setFBO:null},wt=["rgba"],Yt=["rgba4","rgb565","rgb5 a1"];gt.ext_srgb&&Yt.push("srgba"),gt.ext_color_buffer_half_float&&Yt.push("rgba16f","rgb16f"),gt.webgl_color_buffer_float&&Yt.push("rgba32f");var wr=["uint8"];gt.oes_texture_half_float&&wr.push("half float","float16"),gt.oes_texture_float&&wr.push("float","float32");var Tr=0,Mr={};return K(pt,{getFramebuffer:function(_r){return typeof _r=="function"&&_r._reglType==="framebuffer"&&(_r=_r._framebuffer,_r instanceof Re)?_r:null},create:st,createCube:function(_r){function Or(Sr){var yr,gn={color:null},Xr=0,kr=null;yr="rgba";var sn="uint8",cn=1;if(typeof Sr=="number"?Xr=Sr|0:Sr?("shape"in Sr?Xr=Sr.shape[0]:("radius"in Sr&&(Xr=Sr.radius|0),"width"in Sr?Xr=Sr.width|0:"height"in Sr&&(Xr=Sr.height|0)),("color"in Sr||"colors"in Sr)&&(kr=Sr.color||Sr.colors),kr||("colorCount"in Sr&&(cn=Sr.colorCount|0),"colorType"in Sr&&(sn=Sr.colorType),"colorFormat"in Sr&&(yr=Sr.colorFormat)),"depth"in Sr&&(gn.depth=Sr.depth),"stencil"in Sr&&(gn.stencil=Sr.stencil),"depthStencil"in Sr&&(gn.depthStencil=Sr.depthStencil)):Xr=1,kr)if(Array.isArray(kr))for(Sr=[],yr=0;yr<kr.length;++yr)Sr[yr]=kr[yr];else Sr=[kr];else for(Sr=Array(cn),kr={radius:Xr,format:yr,type:sn},yr=0;yr<cn;++yr)Sr[yr]=or.createCube(kr);for(gn.color=Array(Sr.length),yr=0;yr<Sr.length;++yr)cn=Sr[yr],Xr=Xr||cn.width,gn.color[yr]={target:34069,data:Sr[yr]};for(yr=0;6>yr;++yr){for(cn=0;cn<Sr.length;++cn)gn.color[cn].target=34069+yr;0<yr&&(gn.depth=nn[0].depth,gn.stencil=nn[0].stencil,gn.depthStencil=nn[0].depthStencil),nn[yr]?nn[yr](gn):nn[yr]=st(gn)}return K(Or,{width:Xr,height:Xr,color:Sr})}var nn=Array(6);return Or(_r),K(Or,{faces:nn,resize:function(Sr){var yr=Sr|0;if(yr===Or.width)return Or;var gn=Or.color;for(Sr=0;Sr<gn.length;++Sr)gn[Sr].resize(yr);for(Sr=0;6>Sr;++Sr)nn[Sr].resize(yr);return Or.width=Or.height=yr,Or},_reglType:"framebufferCube",destroy:function(){nn.forEach(function(Sr){Sr.destroy()})}})},clear:function(){me(Mr).forEach(Qe)},restore:function(){pt.cur=null,pt.next=null,pt.dirty=!0,me(Mr).forEach(function(_r){_r.framebuffer=Je.createFramebuffer(),ot(_r)})}})}function V(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function U(Je,gt,Ct,or,gr,lr,mr){function Fr(ot){if(ot!==Qe.currentVAO){var st=gt.oes_vertex_array_object;ot?st.bindVertexArrayOES(ot.vao):st.bindVertexArrayOES(null),Qe.currentVAO=ot}}function Rr(ot){if(ot!==Qe.currentVAO){if(ot)ot.bindAttrs();else{for(var st=gt.angle_instanced_arrays,pt=0;pt<Me.length;++pt){var wt=Me[pt];wt.buffer?(Je.enableVertexAttribArray(pt),wt.buffer.bind(),Je.vertexAttribPointer(pt,wt.size,wt.type,wt.normalized,wt.stride,wt.offfset),st&&wt.divisor&&st.vertexAttribDivisorANGLE(pt,wt.divisor)):(Je.disableVertexAttribArray(pt),Je.vertexAttrib4f(pt,wt.x,wt.y,wt.z,wt.w))}mr.elements?Je.bindBuffer(34963,mr.elements.buffer.buffer):Je.bindBuffer(34963,null)}Qe.currentVAO=ot}}function ir(){me(Ye).forEach(function(ot){ot.destroy()})}function Vr(){this.id=++Re,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var ot=gt.oes_vertex_array_object;this.vao=ot?ot.createVertexArrayOES():null,Ye[this.id]=this,this.buffers=[]}function qe(){gt.oes_vertex_array_object&&me(Ye).forEach(function(ot){ot.refresh()})}var we=Ct.maxAttributes,Me=Array(we);for(Ct=0;Ct<we;++Ct)Me[Ct]=new V;var Re=0,Ye={},Qe={Record:V,scope:{},state:Me,currentVAO:null,targetVAO:null,restore:gt.oes_vertex_array_object?qe:function(){},createVAO:function(ot){function st(wt){var Yt;Array.isArray(wt)?(Yt=wt,pt.elements&&pt.ownsElements&&pt.elements.destroy(),pt.elements=null,pt.ownsElements=!1,pt.offset=0,pt.count=0,pt.instances=-1,pt.primitive=4):(wt.elements?(Yt=wt.elements,pt.ownsElements?(typeof Yt=="function"&&Yt._reglType==="elements"?pt.elements.destroy():pt.elements(Yt),pt.ownsElements=!1):lr.getElements(wt.elements)?(pt.elements=wt.elements,pt.ownsElements=!1):(pt.elements=lr.create(wt.elements),pt.ownsElements=!0)):(pt.elements=null,pt.ownsElements=!1),Yt=wt.attributes,pt.offset=0,pt.count=-1,pt.instances=-1,pt.primitive=4,pt.elements&&(pt.count=pt.elements._elements.vertCount,pt.primitive=pt.elements._elements.primType),"offset"in wt&&(pt.offset=wt.offset|0),"count"in wt&&(pt.count=wt.count|0),"instances"in wt&&(pt.instances=wt.instances|0),"primitive"in wt&&(pt.primitive=Ie[wt.primitive])),wt={};var wr=pt.attributes;wr.length=Yt.length;for(var Tr=0;Tr<Yt.length;++Tr){var Mr=Yt[Tr],_r=wr[Tr]=new V,Or=Mr.data||Mr;if(Array.isArray(Or)||ce(Or)||y(Or)){var nn;pt.buffers[Tr]&&(nn=pt.buffers[Tr],ce(Or)&&nn._buffer.byteLength>=Or.byteLength?nn.subdata(Or):(nn.destroy(),pt.buffers[Tr]=null)),pt.buffers[Tr]||(nn=pt.buffers[Tr]=gr.create(Mr,34962,!1,!0)),_r.buffer=gr.getBuffer(nn),_r.size=_r.buffer.dimension|0,_r.normalized=!1,_r.type=_r.buffer.dtype,_r.offset=0,_r.stride=0,_r.divisor=0,_r.state=1,wt[Tr]=1}else gr.getBuffer(Mr)?(_r.buffer=gr.getBuffer(Mr),_r.size=_r.buffer.dimension|0,_r.normalized=!1,_r.type=_r.buffer.dtype,_r.offset=0,_r.stride=0,_r.divisor=0,_r.state=1):gr.getBuffer(Mr.buffer)?(_r.buffer=gr.getBuffer(Mr.buffer),_r.size=(+Mr.size||_r.buffer.dimension)|0,_r.normalized=!!Mr.normalized||!1,_r.type="type"in Mr?Ae[Mr.type]:_r.buffer.dtype,_r.offset=(Mr.offset||0)|0,_r.stride=(Mr.stride||0)|0,_r.divisor=(Mr.divisor||0)|0,_r.state=1):"x"in Mr&&(_r.x=+Mr.x||0,_r.y=+Mr.y||0,_r.z=+Mr.z||0,_r.w=+Mr.w||0,_r.state=2)}for(nn=0;nn<pt.buffers.length;++nn)!wt[nn]&&pt.buffers[nn]&&(pt.buffers[nn].destroy(),pt.buffers[nn]=null);return pt.refresh(),st}var pt=new Vr;return or.vaoCount+=1,st.destroy=function(){for(var wt=0;wt<pt.buffers.length;++wt)pt.buffers[wt]&&pt.buffers[wt].destroy();pt.buffers.length=0,pt.ownsElements&&(pt.elements.destroy(),pt.elements=null,pt.ownsElements=!1),pt.destroy()},st._vao=pt,st._reglType="vao",st(ot)},getVAO:function(ot){return typeof ot=="function"&&ot._vao?ot._vao:null},destroyBuffer:function(ot){for(var st=0;st<Me.length;++st){var pt=Me[st];pt.buffer===ot&&(Je.disableVertexAttribArray(st),pt.buffer=null)}},setVAO:gt.oes_vertex_array_object?Fr:Rr,clear:gt.oes_vertex_array_object?ir:function(){}};return Vr.prototype.bindAttrs=function(){for(var ot=gt.angle_instanced_arrays,st=this.attributes,pt=0;pt<st.length;++pt){var wt=st[pt];wt.buffer?(Je.enableVertexAttribArray(pt),Je.bindBuffer(34962,wt.buffer.buffer),Je.vertexAttribPointer(pt,wt.size,wt.type,wt.normalized,wt.stride,wt.offset),ot&&wt.divisor&&ot.vertexAttribDivisorANGLE(pt,wt.divisor)):(Je.disableVertexAttribArray(pt),Je.vertexAttrib4f(pt,wt.x,wt.y,wt.z,wt.w))}for(ot=st.length;ot<we;++ot)Je.disableVertexAttribArray(ot);(ot=lr.getElements(this.elements))?Je.bindBuffer(34963,ot.buffer.buffer):Je.bindBuffer(34963,null)},Vr.prototype.refresh=function(){var ot=gt.oes_vertex_array_object;ot&&(ot.bindVertexArrayOES(this.vao),this.bindAttrs(),Qe.currentVAO=null,ot.bindVertexArrayOES(null))},Vr.prototype.destroy=function(){if(this.vao){var ot=gt.oes_vertex_array_object;this===Qe.currentVAO&&(Qe.currentVAO=null,ot.bindVertexArrayOES(null)),ot.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),Ye[this.id]&&(delete Ye[this.id],--or.vaoCount)},Qe}function j(Je,gt,Ct,or){function gr(Re,Ye,Qe,ot){this.name=Re,this.id=Ye,this.location=Qe,this.info=ot}function lr(Re,Ye){for(var Qe=0;Qe<Re.length;++Qe)if(Re[Qe].id===Ye.id){Re[Qe].location=Ye.location;return}Re.push(Ye)}function mr(Re,Ye,Qe){Qe=Re===35632?ir:Vr;var ot=Qe[Ye];if(!ot){var st=gt.str(Ye),ot=Je.createShader(Re);Je.shaderSource(ot,st),Je.compileShader(ot),Qe[Ye]=ot}return ot}function Fr(Re,Ye){this.id=Me++,this.fragId=Re,this.vertId=Ye,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,or.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Rr(Re,Ye,Qe){var ot;ot=mr(35632,Re.fragId);var st=mr(35633,Re.vertId);if(Ye=Re.program=Je.createProgram(),Je.attachShader(Ye,ot),Je.attachShader(Ye,st),Qe)for(ot=0;ot<Qe.length;++ot)st=Qe[ot],Je.bindAttribLocation(Ye,st[0],st[1]);Je.linkProgram(Ye),st=Je.getProgramParameter(Ye,35718),or.profile&&(Re.stats.uniformsCount=st);var pt=Re.uniforms;for(ot=0;ot<st;++ot)if(Qe=Je.getActiveUniform(Ye,ot)){if(1<Qe.size)for(var wt=0;wt<Qe.size;++wt){var Yt=Qe.name.replace("[0]","["+wt+"]");lr(pt,new gr(Yt,gt.id(Yt),Je.getUniformLocation(Ye,Yt),Qe))}wt=Qe.name,1<Qe.size&&(wt=wt.replace("[0]","")),lr(pt,new gr(wt,gt.id(wt),Je.getUniformLocation(Ye,wt),Qe))}for(st=Je.getProgramParameter(Ye,35721),or.profile&&(Re.stats.attributesCount=st),Re=Re.attributes,ot=0;ot<st;++ot)(Qe=Je.getActiveAttrib(Ye,ot))&&lr(Re,new gr(Qe.name,gt.id(Qe.name),Je.getAttribLocation(Ye,Qe.name),Qe))}var ir={},Vr={},qe={},we=[],Me=0;return or.profile&&(Ct.getMaxUniformsCount=function(){var Re=0;return we.forEach(function(Ye){Ye.stats.uniformsCount>Re&&(Re=Ye.stats.uniformsCount)}),Re},Ct.getMaxAttributesCount=function(){var Re=0;return we.forEach(function(Ye){Ye.stats.attributesCount>Re&&(Re=Ye.stats.attributesCount)}),Re}),{clear:function(){var Re=Je.deleteShader.bind(Je);me(ir).forEach(Re),ir={},me(Vr).forEach(Re),Vr={},we.forEach(function(Ye){Je.deleteProgram(Ye.program)}),we.length=0,qe={},Ct.shaderCount=0},program:function(Re,Ye,Qe,ot){var st=qe[Ye];st||(st=qe[Ye]={});var pt=st[Re];if(pt&&(pt.refCount++,!ot))return pt;var wt=new Fr(Ye,Re);return Ct.shaderCount++,Rr(wt,Qe,ot),pt||(st[Re]=wt),we.push(wt),K(wt,{destroy:function(){if(wt.refCount--,0>=wt.refCount){Je.deleteProgram(wt.program);var Yt=we.indexOf(wt);we.splice(Yt,1),Ct.shaderCount--}0>=st[wt.vertId].refCount&&(Je.deleteShader(Vr[wt.vertId]),delete Vr[wt.vertId],delete qe[wt.fragId][wt.vertId]),Object.keys(qe[wt.fragId]).length||(Je.deleteShader(ir[wt.fragId]),delete ir[wt.fragId],delete qe[wt.fragId])}})},restore:function(){ir={},Vr={};for(var Re=0;Re<we.length;++Re)Rr(we[Re],null,we[Re].attributes.map(function(Ye){return[Ye.location,Ye.name]}))},shader:mr,frag:-1,vert:-1}}function Z(Je,gt,Ct,or,gr,lr,mr){function Fr(ir){var Vr;Vr=gt.next===null?5121:gt.next.colorAttachments[0].texture._texture.type;var qe=0,we=0,Me=or.framebufferWidth,Re=or.framebufferHeight,Ye=null;return ce(ir)?Ye=ir:ir&&(qe=ir.x|0,we=ir.y|0,Me=(ir.width||or.framebufferWidth-qe)|0,Re=(ir.height||or.framebufferHeight-we)|0,Ye=ir.data||null),Ct(),ir=Me*Re*4,Ye||(Vr===5121?Ye=new Uint8Array(ir):Vr===5126&&(Ye=Ye||new Float32Array(ir))),Je.pixelStorei(3333,4),Je.readPixels(qe,we,Me,Re,6408,Vr,Ye),Ye}function Rr(ir){var Vr;return gt.setFBO({framebuffer:ir.framebuffer},function(){Vr=Fr(ir)}),Vr}return function(ir){return ir&&"framebuffer"in ir?Rr(ir):Fr(ir)}}function te(Je){return Array.prototype.slice.call(Je)}function re(Je){return te(Je).join("")}function W(){function Je(){var Fr=[],Rr=[];return K(function(){Fr.push.apply(Fr,te(arguments))},{def:function(){var ir="v"+Ct++;return Rr.push(ir),0<arguments.length&&(Fr.push(ir,"="),Fr.push.apply(Fr,te(arguments)),Fr.push(";")),ir},toString:function(){return re([0<Rr.length?"var "+Rr.join(",")+";":"",re(Fr)])}})}function gt(){function Fr(we,Me){ir(we,Me,"=",Rr.def(we,Me),";")}var Rr=Je(),ir=Je(),Vr=Rr.toString,qe=ir.toString;return K(function(){Rr.apply(Rr,te(arguments))},{def:Rr.def,entry:Rr,exit:ir,save:Fr,set:function(we,Me,Re){Fr(we,Me),Rr(we,Me,"=",Re,";")},toString:function(){return Vr()+qe()}})}var Ct=0,or=[],gr=[],lr=Je(),mr={};return{global:lr,link:function(Fr){for(var Rr=0;Rr<gr.length;++Rr)if(gr[Rr]===Fr)return or[Rr];return Rr="g"+Ct++,or.push(Rr),gr.push(Fr),Rr},block:Je,proc:function(Fr,Rr){function ir(){var Me="a"+Vr.length;return Vr.push(Me),Me}var Vr=[];Rr=Rr||0;for(var qe=0;qe<Rr;++qe)ir();var qe=gt(),we=qe.toString;return mr[Fr]=K(qe,{arg:ir,toString:function(){return re(["function(",Vr.join(),"){",we(),"}"])}})},scope:gt,cond:function(){var Fr=re(arguments),Rr=gt(),ir=gt(),Vr=Rr.toString,qe=ir.toString;return K(Rr,{then:function(){return Rr.apply(Rr,te(arguments)),this},else:function(){return ir.apply(ir,te(arguments)),this},toString:function(){var we=qe();return we&&(we="else{"+we+"}"),re(["if(",Fr,"){",Vr(),"}",we])}})},compile:function(){var Fr=['"use strict";',lr,"return {"];Object.keys(mr).forEach(function(ir){Fr.push('"',ir,'":',mr[ir].toString(),",")}),Fr.push("}");var Rr=re(Fr).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return Function.apply(null,or.concat(Rr)).apply(null,gr)}}}function J(Je){return Array.isArray(Je)||ce(Je)||y(Je)}function le(Je){return Je.sort(function(gt,Ct){return gt==="viewport"?-1:Ct==="viewport"?1:gt<Ct?-1:1})}function ue(Je,gt,Ct,or){this.thisDep=Je,this.contextDep=gt,this.propDep=Ct,this.append=or}function se(Je){return Je&&!(Je.thisDep||Je.contextDep||Je.propDep)}function G(Je){return new ue(!1,!1,!1,Je)}function Y(Je,gt){var Ct=Je.type;if(Ct===0)return Ct=Je.data.length,new ue(!0,1<=Ct,2<=Ct,gt);if(Ct===4)return Ct=Je.data,new ue(Ct.thisDep,Ct.contextDep,Ct.propDep,gt);if(Ct===5)return new ue(!1,!1,!1,gt);if(Ct===6){for(var or=Ct=!1,gr=!1,lr=0;lr<Je.data.length;++lr){var mr=Je.data[lr];mr.type===1?gr=!0:mr.type===2?or=!0:mr.type===3?Ct=!0:mr.type===0?(Ct=!0,mr=mr.data,1<=mr&&(or=!0),2<=mr&&(gr=!0)):mr.type===4&&(Ct=Ct||mr.data.thisDep,or=or||mr.data.contextDep,gr=gr||mr.data.propDep)}return new ue(Ct,or,gr,gt)}return new ue(Ct===3,Ct===2,Ct===1,gt)}function ee(Je,gt,Ct,or,gr,lr,mr,Fr,Rr,ir,Vr,qe,we,Me,Re){function Ye(hr){return hr.replace(".","_")}function Qe(hr,zr,ln){var Rt=Ye(hr);Bn.push(hr),In[Rt]=en[Rt]=!!ln,ha[Rt]=zr}function ot(hr,zr,ln){var Rt=Ye(hr);Bn.push(hr),Array.isArray(ln)?(en[Rt]=ln.slice(),In[Rt]=ln.slice()):en[Rt]=In[Rt]=ln,qn[Rt]=zr}function st(){var hr=W(),zr=hr.link,ln=hr.global;hr.id=da++,hr.batchId="0";var Rt=zr(Hn),qt=hr.shared={props:"a0"};Object.keys(Hn).forEach(function(Pr){qt[Pr]=ln.def(Rt,".",Pr)});var br=hr.next={},Hr=hr.current={};Object.keys(qn).forEach(function(Pr){Array.isArray(en[Pr])&&(br[Pr]=ln.def(qt.next,".",Pr),Hr[Pr]=ln.def(qt.current,".",Pr))});var ar=hr.constants={};Object.keys(la).forEach(function(Pr){ar[Pr]=ln.def(JSON.stringify(la[Pr]))}),hr.invoke=function(Pr,Nr){switch(Nr.type){case 0:var Tn=["this",qt.context,qt.props,hr.batchId];return Pr.def(zr(Nr.data),".call(",Tn.slice(0,Math.max(Nr.data.length+1,4)),")");case 1:return Pr.def(qt.props,Nr.data);case 2:return Pr.def(qt.context,Nr.data);case 3:return Pr.def("this",Nr.data);case 4:return Nr.data.append(hr,Pr),Nr.data.ref;case 5:return Nr.data.toString();case 6:return Nr.data.map(function(Nn){return hr.invoke(Pr,Nn)})}},hr.attribCache={};var Qt={};return hr.scopeAttrib=function(Pr){if(Pr=gt.id(Pr),Pr in Qt)return Qt[Pr];var Nr=ir.scope[Pr];return Nr||(Nr=ir.scope[Pr]=new aa),Qt[Pr]=zr(Nr)},hr}function pt(hr){var zr=hr.static;hr=hr.dynamic;var ln;if("profile"in zr){var Rt=!!zr.profile;ln=G(function(br,Hr){return Rt}),ln.enable=Rt}else if("profile"in hr){var qt=hr.profile;ln=Y(qt,function(br,Hr){return br.invoke(Hr,qt)})}return ln}function wt(hr,zr){var ln=hr.static,Rt=hr.dynamic;if("framebuffer"in ln){var qt=ln.framebuffer;return qt?(qt=Fr.getFramebuffer(qt),G(function(Hr,ar){var Qt=Hr.link(qt),Pr=Hr.shared;return ar.set(Pr.framebuffer,".next",Qt),Pr=Pr.context,ar.set(Pr,".framebufferWidth",Qt+".width"),ar.set(Pr,".framebufferHeight",Qt+".height"),Qt})):G(function(Hr,ar){var Qt=Hr.shared;return ar.set(Qt.framebuffer,".next","null"),Qt=Qt.context,ar.set(Qt,".framebufferWidth",Qt+".drawingBufferWidth"),ar.set(Qt,".framebufferHeight",Qt+".drawingBufferHeight"),"null"})}if("framebuffer"in Rt){var br=Rt.framebuffer;return Y(br,function(Hr,ar){var Qt=Hr.invoke(ar,br),Pr=Hr.shared,Nr=Pr.framebuffer,Qt=ar.def(Nr,".getFramebuffer(",Qt,")");return ar.set(Nr,".next",Qt),Pr=Pr.context,ar.set(Pr,".framebufferWidth",Qt+"?"+Qt+".width:"+Pr+".drawingBufferWidth"),ar.set(Pr,".framebufferHeight",Qt+"?"+Qt+".height:"+Pr+".drawingBufferHeight"),Qt})}return null}function Yt(hr,zr,ln){function Rt(ar){if(ar in qt){var Qt=qt[ar];ar=!0;var Pr=Qt.x|0,Nr=Qt.y|0,Tn,Nn;return"width"in Qt?Tn=Qt.width|0:ar=!1,"height"in Qt?Nn=Qt.height|0:ar=!1,new ue(!ar&&zr&&zr.thisDep,!ar&&zr&&zr.contextDep,!ar&&zr&&zr.propDep,function(Wn,Un){var mn=Wn.shared.context,Fn=Tn;"width"in Qt||(Fn=Un.def(mn,".","framebufferWidth","-",Pr));var Xn=Nn;return"height"in Qt||(Xn=Un.def(mn,".","framebufferHeight","-",Nr)),[Pr,Nr,Fn,Xn]})}if(ar in br){var Gn=br[ar];return ar=Y(Gn,function(Wn,Un){var mn=Wn.invoke(Un,Gn),Fn=Wn.shared.context,Xn=Un.def(mn,".x|0"),ca=Un.def(mn,".y|0"),ja=Un.def('"width" in ',mn,"?",mn,".width|0:","(",Fn,".","framebufferWidth","-",Xn,")"),mn=Un.def('"height" in ',mn,"?",mn,".height|0:","(",Fn,".","framebufferHeight","-",ca,")");return[Xn,ca,ja,mn]}),zr&&(ar.thisDep=ar.thisDep||zr.thisDep,ar.contextDep=ar.contextDep||zr.contextDep,ar.propDep=ar.propDep||zr.propDep),ar}return zr?new ue(zr.thisDep,zr.contextDep,zr.propDep,function(Wn,Un){var mn=Wn.shared.context;return[0,0,Un.def(mn,".","framebufferWidth"),Un.def(mn,".","framebufferHeight")]}):null}var qt=hr.static,br=hr.dynamic;if(hr=Rt("viewport")){var Hr=hr;hr=new ue(hr.thisDep,hr.contextDep,hr.propDep,function(ar,Qt){var Pr=Hr.append(ar,Qt),Nr=ar.shared.context;return Qt.set(Nr,".viewportWidth",Pr[2]),Qt.set(Nr,".viewportHeight",Pr[3]),Pr})}return{viewport:hr,scissor_box:Rt("scissor.box")}}function wr(hr,zr){var ln=hr.static;if(typeof ln.frag=="string"&&typeof ln.vert=="string"){if(0<Object.keys(zr.dynamic).length)return null;var ln=zr.static,Rt=Object.keys(ln);if(0<Rt.length&&typeof ln[Rt[0]]=="number"){for(var qt=[],br=0;br<Rt.length;++br)qt.push([ln[Rt[br]]|0,Rt[br]]);return qt}}return null}function Tr(hr,zr,ln){function Rt(Pr){if(Pr in qt){var Nr=gt.id(qt[Pr]);return Pr=G(function(){return Nr}),Pr.id=Nr,Pr}if(Pr in br){var Tn=br[Pr];return Y(Tn,function(Nn,Gn){var Wn=Nn.invoke(Gn,Tn);return Gn.def(Nn.shared.strings,".id(",Wn,")")})}return null}var qt=hr.static,br=hr.dynamic,Hr=Rt("frag"),ar=Rt("vert"),Qt=null;return se(Hr)&&se(ar)?(Qt=Vr.program(ar.id,Hr.id,null,ln),hr=G(function(Pr,Nr){return Pr.link(Qt)})):hr=new ue(Hr&&Hr.thisDep||ar&&ar.thisDep,Hr&&Hr.contextDep||ar&&ar.contextDep,Hr&&Hr.propDep||ar&&ar.propDep,function(Pr,Nr){var Tn=Pr.shared.shader,Nn;Nn=Hr?Hr.append(Pr,Nr):Nr.def(Tn,".","frag");var Gn;return Gn=ar?ar.append(Pr,Nr):Nr.def(Tn,".","vert"),Nr.def(Tn+".program("+Gn+","+Nn+")")}),{frag:Hr,vert:ar,progVar:hr,program:Qt}}function Mr(hr,zr){function ln(Wn,Un){if(Wn in Rt){var mn=Rt[Wn]|0;return Un?br.offset=mn:br.instances=mn,G(function(Xn,ca){return Un&&(Xn.OFFSET=mn),mn})}if(Wn in qt){var Fn=qt[Wn];return Y(Fn,function(Xn,ca){var ja=Xn.invoke(ca,Fn);return Un&&(Xn.OFFSET=ja),ja})}if(Un){if(Qt)return G(function(Xn,ca){return Xn.OFFSET=0});if(Hr)return new ue(ar.thisDep,ar.contextDep,ar.propDep,function(Xn,ca){return ca.def(Xn.shared.vao+".currentVAO?"+Xn.shared.vao+".currentVAO.offset:0")})}else if(Hr)return new ue(ar.thisDep,ar.contextDep,ar.propDep,function(Xn,ca){return ca.def(Xn.shared.vao+".currentVAO?"+Xn.shared.vao+".currentVAO.instances:-1")});return null}var Rt=hr.static,qt=hr.dynamic,br={},Hr=!1,ar=function(){if("vao"in Rt){var Wn=Rt.vao;return Wn!==null&&ir.getVAO(Wn)===null&&(Wn=ir.createVAO(Wn)),Hr=!0,br.vao=Wn,G(function(mn){var Fn=ir.getVAO(Wn);return Fn?mn.link(Fn):"null"})}if("vao"in qt){Hr=!0;var Un=qt.vao;return Y(Un,function(mn,Fn){var Xn=mn.invoke(Fn,Un);return Fn.def(mn.shared.vao+".getVAO("+Xn+")")})}return null}(),Qt=!1,Pr=function(){if("elements"in Rt){var Wn=Rt.elements;if(br.elements=Wn,J(Wn)){var Un=br.elements=lr.create(Wn,!0),Wn=lr.getElements(Un);Qt=!0}else Wn&&(Wn=lr.getElements(Wn),Qt=!0);return Un=G(function(Fn,Xn){if(Wn){var ca=Fn.link(Wn);return Fn.ELEMENTS=ca}return Fn.ELEMENTS=null}),Un.value=Wn,Un}if("elements"in qt){Qt=!0;var mn=qt.elements;return Y(mn,function(Fn,Xn){var ca=Fn.shared,ja=ca.isBufferArgs,ca=ca.elements,Pa=Fn.invoke(Xn,mn),_l=Xn.def("null"),ja=Xn.def(ja,"(",Pa,")"),Pa=Fn.cond(ja).then(_l,"=",ca,".createStream(",Pa,");").else(_l,"=",ca,".getElements(",Pa,");");return Xn.entry(Pa),Xn.exit(Fn.cond(ja).then(ca,".destroyStream(",_l,");")),Fn.ELEMENTS=_l})}return Hr?new ue(ar.thisDep,ar.contextDep,ar.propDep,function(Fn,Xn){return Xn.def(Fn.shared.vao+".currentVAO?"+Fn.shared.elements+".getElements("+Fn.shared.vao+".currentVAO.elements):null")}):null}(),Nr=ln("offset",!0),Tn=function(){if("primitive"in Rt){var Wn=Rt.primitive;return br.primitive=Wn,G(function(mn,Fn){return Ie[Wn]})}if("primitive"in qt){var Un=qt.primitive;return Y(Un,function(mn,Fn){var Xn=mn.constants.primTypes,ca=mn.invoke(Fn,Un);return Fn.def(Xn,"[",ca,"]")})}return Qt?se(Pr)?Pr.value?G(function(mn,Fn){return Fn.def(mn.ELEMENTS,".primType")}):G(function(){return 4}):new ue(Pr.thisDep,Pr.contextDep,Pr.propDep,function(mn,Fn){var Xn=mn.ELEMENTS;return Fn.def(Xn,"?",Xn,".primType:",4)}):Hr?new ue(ar.thisDep,ar.contextDep,ar.propDep,function(mn,Fn){return Fn.def(mn.shared.vao+".currentVAO?"+mn.shared.vao+".currentVAO.primitive:4")}):null}(),Nn=function(){if("count"in Rt){var Wn=Rt.count|0;return br.count=Wn,G(function(){return Wn})}if("count"in qt){var Un=qt.count;return Y(Un,function(mn,Fn){return mn.invoke(Fn,Un)})}return Qt?se(Pr)?Pr?Nr?new ue(Nr.thisDep,Nr.contextDep,Nr.propDep,function(mn,Fn){return Fn.def(mn.ELEMENTS,".vertCount-",mn.OFFSET)}):G(function(mn,Fn){return Fn.def(mn.ELEMENTS,".vertCount")}):G(function(){return-1}):new ue(Pr.thisDep||Nr.thisDep,Pr.contextDep||Nr.contextDep,Pr.propDep||Nr.propDep,function(mn,Fn){var Xn=mn.ELEMENTS;return mn.OFFSET?Fn.def(Xn,"?",Xn,".vertCount-",mn.OFFSET,":-1"):Fn.def(Xn,"?",Xn,".vertCount:-1")}):Hr?new ue(ar.thisDep,ar.contextDep,ar.propDep,function(mn,Fn){return Fn.def(mn.shared.vao,".currentVAO?",mn.shared.vao,".currentVAO.count:-1")}):null}(),Gn=ln("instances",!1);return{elements:Pr,primitive:Tn,count:Nn,instances:Gn,offset:Nr,vao:ar,vaoActive:Hr,elementsActive:Qt,static:br}}function _r(hr,zr){var ln=hr.static,Rt=hr.dynamic,qt={};return Bn.forEach(function(br){function Hr(Qt,Pr){if(br in ln){var Nr=Qt(ln[br]);qt[ar]=G(function(){return Nr})}else if(br in Rt){var Tn=Rt[br];qt[ar]=Y(Tn,function(Nn,Gn){return Pr(Nn,Gn,Nn.invoke(Gn,Tn))})}}var ar=Ye(br);switch(br){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return Hr(function(Qt){return Qt},function(Qt,Pr,Nr){return Nr});case"depth.func":return Hr(function(Qt){return kt[Qt]},function(Qt,Pr,Nr){return Pr.def(Qt.constants.compareFuncs,"[",Nr,"]")});case"depth.range":return Hr(function(Qt){return Qt},function(Qt,Pr,Nr){return Qt=Pr.def("+",Nr,"[0]"),Pr=Pr.def("+",Nr,"[1]"),[Qt,Pr]});case"blend.func":return Hr(function(Qt){return[Pt["srcRGB"in Qt?Qt.srcRGB:Qt.src],Pt["dstRGB"in Qt?Qt.dstRGB:Qt.dst],Pt["srcAlpha"in Qt?Qt.srcAlpha:Qt.src],Pt["dstAlpha"in Qt?Qt.dstAlpha:Qt.dst]]},function(Qt,Pr,Nr){function Tn(Un,mn){return Pr.def('"',Un,mn,'" in ',Nr,"?",Nr,".",Un,mn,":",Nr,".",Un)}Qt=Qt.constants.blendFuncs;var Nn=Tn("src","RGB"),Gn=Tn("dst","RGB"),Nn=Pr.def(Qt,"[",Nn,"]"),Wn=Pr.def(Qt,"[",Tn("src","Alpha"),"]"),Gn=Pr.def(Qt,"[",Gn,"]");return Qt=Pr.def(Qt,"[",Tn("dst","Alpha"),"]"),[Nn,Gn,Wn,Qt]});case"blend.equation":return Hr(function(Qt){if(typeof Qt=="string")return[Ca[Qt],Ca[Qt]];if(typeof Qt=="object")return[Ca[Qt.rgb],Ca[Qt.alpha]]},function(Qt,Pr,Nr){var Tn=Qt.constants.blendEquations,Nn=Pr.def(),Gn=Pr.def();return Qt=Qt.cond("typeof ",Nr,'==="string"'),Qt.then(Nn,"=",Gn,"=",Tn,"[",Nr,"];"),Qt.else(Nn,"=",Tn,"[",Nr,".rgb];",Gn,"=",Tn,"[",Nr,".alpha];"),Pr(Qt),[Nn,Gn]});case"blend.color":return Hr(function(Qt){return s(4,function(Pr){return+Qt[Pr]})},function(Qt,Pr,Nr){return s(4,function(Tn){return Pr.def("+",Nr,"[",Tn,"]")})});case"stencil.mask":return Hr(function(Qt){return Qt|0},function(Qt,Pr,Nr){return Pr.def(Nr,"|0")});case"stencil.func":return Hr(function(Qt){return[kt[Qt.cmp||"keep"],Qt.ref||0,"mask"in Qt?Qt.mask:-1]},function(Qt,Pr,Nr){Qt=Pr.def('"cmp" in ',Nr,"?",Qt.constants.compareFuncs,"[",Nr,".cmp]",":",7680);var Tn=Pr.def(Nr,".ref|0");return Pr=Pr.def('"mask" in ',Nr,"?",Nr,".mask|0:-1"),[Qt,Tn,Pr]});case"stencil.opFront":case"stencil.opBack":return Hr(function(Qt){return[br==="stencil.opBack"?1029:1028,Bt[Qt.fail||"keep"],Bt[Qt.zfail||"keep"],Bt[Qt.zpass||"keep"]]},function(Qt,Pr,Nr){function Tn(Gn){return Pr.def('"',Gn,'" in ',Nr,"?",Nn,"[",Nr,".",Gn,"]:",7680)}var Nn=Qt.constants.stencilOps;return[br==="stencil.opBack"?1029:1028,Tn("fail"),Tn("zfail"),Tn("zpass")]});case"polygonOffset.offset":return Hr(function(Qt){return[Qt.factor|0,Qt.units|0]},function(Qt,Pr,Nr){return Qt=Pr.def(Nr,".factor|0"),Pr=Pr.def(Nr,".units|0"),[Qt,Pr]});case"cull.face":return Hr(function(Qt){var Pr=0;return Qt==="front"?Pr=1028:Qt==="back"&&(Pr=1029),Pr},function(Qt,Pr,Nr){return Pr.def(Nr,'==="front"?',1028,":",1029)});case"lineWidth":return Hr(function(Qt){return Qt},function(Qt,Pr,Nr){return Nr});case"frontFace":return Hr(function(Qt){return Xt[Qt]},function(Qt,Pr,Nr){return Pr.def(Nr+'==="cw"?2304:2305')});case"colorMask":return Hr(function(Qt){return Qt.map(function(Pr){return!!Pr})},function(Qt,Pr,Nr){return s(4,function(Tn){return"!!"+Nr+"["+Tn+"]"})});case"sample.coverage":return Hr(function(Qt){return["value"in Qt?Qt.value:1,!!Qt.invert]},function(Qt,Pr,Nr){return Qt=Pr.def('"value" in ',Nr,"?+",Nr,".value:1"),Pr=Pr.def("!!",Nr,".invert"),[Qt,Pr]})}}),qt}function Or(hr,zr){var ln=hr.static,Rt=hr.dynamic,qt={};return Object.keys(ln).forEach(function(br){var Hr=ln[br],ar;if(typeof Hr=="number"||typeof Hr=="boolean")ar=G(function(){return Hr});else if(typeof Hr=="function"){var Qt=Hr._reglType;Qt==="texture2d"||Qt==="textureCube"?ar=G(function(Pr){return Pr.link(Hr)}):(Qt==="framebuffer"||Qt==="framebufferCube")&&(ar=G(function(Pr){return Pr.link(Hr.color[0])}))}else _(Hr)&&(ar=G(function(Pr){return Pr.global.def("[",s(Hr.length,function(Nr){return Hr[Nr]}),"]")}));ar.value=Hr,qt[br]=ar}),Object.keys(Rt).forEach(function(br){var Hr=Rt[br];qt[br]=Y(Hr,function(ar,Qt){return ar.invoke(Qt,Hr)})}),qt}function nn(hr,zr){var ln=hr.static,Rt=hr.dynamic,qt={};return Object.keys(ln).forEach(function(br){var Hr=ln[br],ar=gt.id(br),Qt=new aa;if(J(Hr))Qt.state=1,Qt.buffer=gr.getBuffer(gr.create(Hr,34962,!1,!0)),Qt.type=0;else{var Pr=gr.getBuffer(Hr);if(Pr)Qt.state=1,Qt.buffer=Pr,Qt.type=0;else if("constant"in Hr){var Nr=Hr.constant;Qt.buffer="null",Qt.state=2,typeof Nr=="number"?Qt.x=Nr:rt.forEach(function(mn,Fn){Fn<Nr.length&&(Qt[mn]=Nr[Fn])})}else{var Pr=J(Hr.buffer)?gr.getBuffer(gr.create(Hr.buffer,34962,!1,!0)):gr.getBuffer(Hr.buffer),Tn=Hr.offset|0,Nn=Hr.stride|0,Gn=Hr.size|0,Wn=!!Hr.normalized,Un=0;"type"in Hr&&(Un=Ae[Hr.type]),Hr=Hr.divisor|0,Qt.buffer=Pr,Qt.state=1,Qt.size=Gn,Qt.normalized=Wn,Qt.type=Un||Pr.dtype,Qt.offset=Tn,Qt.stride=Nn,Qt.divisor=Hr}}qt[br]=G(function(mn,Fn){var Xn=mn.attribCache;if(ar in Xn)return Xn[ar];var ca={isStream:!1};return Object.keys(Qt).forEach(function(ja){ca[ja]=Qt[ja]}),Qt.buffer&&(ca.buffer=mn.link(Qt.buffer),ca.type=ca.type||ca.buffer+".dtype"),Xn[ar]=ca})}),Object.keys(Rt).forEach(function(br){var Hr=Rt[br];qt[br]=Y(Hr,function(ar,Qt){function Pr(Xn){Qt(Wn[Xn],"=",Nr,".",Xn,"|0;")}var Nr=ar.invoke(Qt,Hr),Tn=ar.shared,Nn=ar.constants,Gn=Tn.isBufferArgs,Tn=Tn.buffer,Wn={isStream:Qt.def(!1)},Un=new aa;Un.state=1,Object.keys(Un).forEach(function(Xn){Wn[Xn]=Qt.def(""+Un[Xn])});var mn=Wn.buffer,Fn=Wn.type;return Qt("if(",Gn,"(",Nr,")){",Wn.isStream,"=true;",mn,"=",Tn,".createStream(",34962,",",Nr,");",Fn,"=",mn,".dtype;","}else{",mn,"=",Tn,".getBuffer(",Nr,");","if(",mn,"){",Fn,"=",mn,".dtype;",'}else if("constant" in ',Nr,"){",Wn.state,"=",2,";","if(typeof "+Nr+'.constant === "number"){',Wn[rt[0]],"=",Nr,".constant;",rt.slice(1).map(function(Xn){return Wn[Xn]}).join("="),"=0;","}else{",rt.map(function(Xn,ca){return Wn[Xn]+"="+Nr+".constant.length>"+ca+"?"+Nr+".constant["+ca+"]:0;"}).join(""),"}}else{","if(",Gn,"(",Nr,".buffer)){",mn,"=",Tn,".createStream(",34962,",",Nr,".buffer);","}else{",mn,"=",Tn,".getBuffer(",Nr,".buffer);","}",Fn,'="type" in ',Nr,"?",Nn.glTypes,"[",Nr,".type]:",mn,".dtype;",Wn.normalized,"=!!",Nr,".normalized;"),Pr("size"),Pr("offset"),Pr("stride"),Pr("divisor"),Qt("}}"),Qt.exit("if(",Wn.isStream,"){",Tn,".destroyStream(",mn,");","}"),Wn})}),qt}function Sr(hr){var zr=hr.static,ln=hr.dynamic,Rt={};return Object.keys(zr).forEach(function(qt){var br=zr[qt];Rt[qt]=G(function(Hr,ar){return typeof br=="number"||typeof br=="boolean"?""+br:Hr.link(br)})}),Object.keys(ln).forEach(function(qt){var br=ln[qt];Rt[qt]=Y(br,function(Hr,ar){return Hr.invoke(ar,br)})}),Rt}function yr(hr,zr,ln,Rt,qt){function br(Un){var mn=Qt[Un];mn&&(Nr[Un]=mn)}var Hr=wr(hr,zr),ar=wt(hr),Qt=Yt(hr,ar),Pr=Mr(hr),Nr=_r(hr),Tn=Tr(hr,qt,Hr);br("viewport"),br(Ye("scissor.box"));var Nn=0<Object.keys(Nr).length,ar={framebuffer:ar,draw:Pr,shader:Tn,state:Nr,dirty:Nn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(ar.profile=pt(hr),ar.uniforms=Or(ln),ar.drawVAO=ar.scopeVAO=Pr.vao,!ar.drawVAO&&Tn.program&&!Hr&&Ct.angle_instanced_arrays&&Pr.static.elements){var Gn=!0;if(hr=Tn.program.attributes.map(function(Un){return Un=zr.static[Un],Gn=Gn&&!!Un,Un}),Gn&&0<hr.length){var Wn=ir.getVAO(ir.createVAO({attributes:hr,elements:Pr.static.elements}));ar.drawVAO=new ue(null,null,null,function(Un,mn){return Un.link(Wn)}),ar.useVAO=!0}}return Hr?ar.useVAO=!0:ar.attributes=nn(zr),ar.context=Sr(Rt),ar}function gn(hr,zr,ln){var Rt=hr.shared.context,qt=hr.scope();Object.keys(ln).forEach(function(br){zr.save(Rt,"."+br);var Hr=ln[br].append(hr,zr);Array.isArray(Hr)?qt(Rt,".",br,"=[",Hr.join(),"];"):qt(Rt,".",br,"=",Hr,";")}),zr(qt)}function Xr(hr,zr,ln,Rt){var qt=hr.shared,br=qt.gl,Hr=qt.framebuffer,ar;vr&&(ar=zr.def(qt.extensions,".webgl_draw_buffers"));var Qt=hr.constants,qt=Qt.drawBuffer,Qt=Qt.backBuffer;hr=ln?ln.append(hr,zr):zr.def(Hr,".next"),Rt||zr("if(",hr,"!==",Hr,".cur){"),zr("if(",hr,"){",br,".bindFramebuffer(",36160,",",hr,".framebuffer);"),vr&&zr(ar,".drawBuffersWEBGL(",qt,"[",hr,".colorAttachments.length]);"),zr("}else{",br,".bindFramebuffer(",36160,",null);"),vr&&zr(ar,".drawBuffersWEBGL(",Qt,");"),zr("}",Hr,".cur=",hr,";"),Rt||zr("}")}function kr(hr,zr,ln){var Rt=hr.shared,qt=Rt.gl,br=hr.current,Hr=hr.next,ar=Rt.current,Qt=Rt.next,Pr=hr.cond(ar,".dirty");Bn.forEach(function(Nr){if(Nr=Ye(Nr),!(Nr in ln.state)){var Tn,Nn;if(Nr in Hr){Tn=Hr[Nr],Nn=br[Nr];var Gn=s(en[Nr].length,function(Wn){return Pr.def(Tn,"[",Wn,"]")});Pr(hr.cond(Gn.map(function(Wn,Un){return Wn+"!=="+Nn+"["+Un+"]"}).join("||")).then(qt,".",qn[Nr],"(",Gn,");",Gn.map(function(Wn,Un){return Nn+"["+Un+"]="+Wn}).join(";"),";"))}else Tn=Pr.def(Qt,".",Nr),Gn=hr.cond(Tn,"!==",ar,".",Nr),Pr(Gn),Nr in ha?Gn(hr.cond(Tn).then(qt,".enable(",ha[Nr],");").else(qt,".disable(",ha[Nr],");"),ar,".",Nr,"=",Tn,";"):Gn(qt,".",qn[Nr],"(",Tn,");",ar,".",Nr,"=",Tn,";")}}),Object.keys(ln.state).length===0&&Pr(ar,".dirty=false;"),zr(Pr)}function sn(hr,zr,ln,Rt){var qt=hr.shared,br=hr.current,Hr=qt.current,ar=qt.gl;le(Object.keys(ln)).forEach(function(Qt){var Pr=ln[Qt];if(!Rt||Rt(Pr)){var Nr=Pr.append(hr,zr);if(ha[Qt]){var Tn=ha[Qt];se(Pr)?Nr?zr(ar,".enable(",Tn,");"):zr(ar,".disable(",Tn,");"):zr(hr.cond(Nr).then(ar,".enable(",Tn,");").else(ar,".disable(",Tn,");")),zr(Hr,".",Qt,"=",Nr,";")}else if(_(Nr)){var Nn=br[Qt];zr(ar,".",qn[Qt],"(",Nr,");",Nr.map(function(Gn,Wn){return Nn+"["+Wn+"]="+Gn}).join(";"),";")}else zr(ar,".",qn[Qt],"(",Nr,");",Hr,".",Qt,"=",Nr,";")}})}function cn(hr,zr){ba&&(hr.instancing=zr.def(hr.shared.extensions,".angle_instanced_arrays"))}function $r(hr,zr,ln,Rt,qt){function br(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}function Hr(Un){Gn=zr.def(),Un(Gn,"=",br(),";"),typeof qt=="string"?Un(Nr,".count+=",qt,";"):Un(Nr,".count++;"),Me&&(Rt?(Wn=zr.def(),Un(Wn,"=",Nn,".getNumPendingQueries();")):Un(Nn,".beginQuery(",Nr,");"))}function ar(Un){Un(Nr,".cpuTime+=",br(),"-",Gn,";"),Me&&(Rt?Un(Nn,".pushScopeStats(",Wn,",",Nn,".getNumPendingQueries(),",Nr,");"):Un(Nn,".endQuery();"))}function Qt(Un){var mn=zr.def(Tn,".profile");zr(Tn,".profile=",Un,";"),zr.exit(Tn,".profile=",mn,";")}var Pr=hr.shared,Nr=hr.stats,Tn=Pr.current,Nn=Pr.timer;ln=ln.profile;var Gn,Wn;if(ln){if(se(ln)){ln.enable?(Hr(zr),ar(zr.exit),Qt("true")):Qt("false");return}ln=ln.append(hr,zr),Qt(ln)}else ln=zr.def(Tn,".profile");Pr=hr.block(),Hr(Pr),zr("if(",ln,"){",Pr,"}"),hr=hr.block(),ar(hr),zr.exit("if(",ln,"){",hr,"}")}function at(hr,zr,ln,Rt,qt){function br(Qt){switch(Qt){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function Hr(Qt,Pr,Nr){function Tn(){zr("if(!",Un,".buffer){",Gn,".enableVertexAttribArray(",Wn,");}");var ca=Nr.type,ja;ja=Nr.size?zr.def(Nr.size,"||",Pr):Pr,zr("if(",Un,".type!==",ca,"||",Un,".size!==",ja,"||",Xn.map(function(Pa){return Un+"."+Pa+"!=="+Nr[Pa]}).join("||"),"){",Gn,".bindBuffer(",34962,",",mn,".buffer);",Gn,".vertexAttribPointer(",[Wn,ja,ca,Nr.normalized,Nr.stride,Nr.offset],");",Un,".type=",ca,";",Un,".size=",ja,";",Xn.map(function(Pa){return Un+"."+Pa+"="+Nr[Pa]+";"}).join(""),"}"),ba&&(ca=Nr.divisor,zr("if(",Un,".divisor!==",ca,"){",hr.instancing,".vertexAttribDivisorANGLE(",[Wn,ca],");",Un,".divisor=",ca,";}"))}function Nn(){zr("if(",Un,".buffer){",Gn,".disableVertexAttribArray(",Wn,");",Un,".buffer=null;","}if(",rt.map(function(ca,ja){return Un+"."+ca+"!=="+Fn[ja]}).join("||"),"){",Gn,".vertexAttrib4f(",Wn,",",Fn,");",rt.map(function(ca,ja){return Un+"."+ca+"="+Fn[ja]+";"}).join(""),"}")}var Gn=ar.gl,Wn=zr.def(Qt,".location"),Un=zr.def(ar.attributes,"[",Wn,"]");Qt=Nr.state;var mn=Nr.buffer,Fn=[Nr.x,Nr.y,Nr.z,Nr.w],Xn=["buffer","normalized","offset","stride"];Qt===1?Tn():Qt===2?Nn():(zr("if(",Qt,"===",1,"){"),Tn(),zr("}else{"),Nn(),zr("}"))}var ar=hr.shared;Rt.forEach(function(Qt){var Pr=Qt.name,Nr=ln.attributes[Pr],Tn;if(Nr){if(!qt(Nr))return;Tn=Nr.append(hr,zr)}else{if(!qt(Ut))return;var Nn=hr.scopeAttrib(Pr);Tn={},Object.keys(new aa).forEach(function(Gn){Tn[Gn]=zr.def(Nn,".",Gn)})}Hr(hr.link(Qt),br(Qt.info.type),Tn)})}function Ot(hr,zr,ln,Rt,qt,br){for(var Hr=hr.shared,ar=Hr.gl,Qt={},Pr,Nr=0;Nr<Rt.length;++Nr){var Tn=Rt[Nr],Nn=Tn.name,Gn=Tn.info.type,Wn=Tn.info.size,Un=ln.uniforms[Nn];if(1<Wn){if(!Un)continue;var mn=Nn.replace("[0]","");if(Qt[mn])continue;Qt[mn]=1}var Tn=hr.link(Tn)+".location",Fn;if(Un){if(!qt(Un))continue;if(se(Un)){if(Nn=Un.value,Gn===35678||Gn===35680)Gn=hr.link(Nn._texture||Nn.color[0]._texture),zr(ar,".uniform1i(",Tn,",",Gn+".bind());"),zr.exit(Gn,".unbind();");else if(Gn===35674||Gn===35675||Gn===35676)Wn=hr.global.def("new Float32Array(["+Array.prototype.slice.call(Nn)+"])"),Nn=2,Gn===35675?Nn=3:Gn===35676&&(Nn=4),zr(ar,".uniformMatrix",Nn,"fv(",Tn,",false,",Wn,");");else{switch(Gn){case 5126:Pr="1f";break;case 35664:Pr="2f";break;case 35665:Pr="3f";break;case 35666:Pr="4f";break;case 35670:Pr="1i";break;case 5124:Pr="1i";break;case 35671:Pr="2i";break;case 35667:Pr="2i";break;case 35672:Pr="3i";break;case 35668:Pr="3i";break;case 35673:Pr="4i";break;case 35669:Pr="4i"}1<Wn?(Pr+="v",Nn=hr.global.def("["+Array.prototype.slice.call(Nn)+"]")):Nn=_(Nn)?Array.prototype.slice.call(Nn):Nn,zr(ar,".uniform",Pr,"(",Tn,",",Nn,");")}continue}else Fn=Un.append(hr,zr)}else{if(!qt(Ut))continue;Fn=zr.def(Hr.uniforms,"[",gt.id(Nn),"]")}switch(Gn===35678?zr("if(",Fn,"&&",Fn,'._reglType==="framebuffer"){',Fn,"=",Fn,".color[0];","}"):Gn===35680&&zr("if(",Fn,"&&",Fn,'._reglType==="framebufferCube"){',Fn,"=",Fn,".color[0];","}"),Nn=1,Gn){case 35678:case 35680:Gn=zr.def(Fn,"._texture"),zr(ar,".uniform1i(",Tn,",",Gn,".bind());"),zr.exit(Gn,".unbind();");continue;case 5124:case 35670:Pr="1i";break;case 35667:case 35671:Pr="2i",Nn=2;break;case 35668:case 35672:Pr="3i",Nn=3;break;case 35669:case 35673:Pr="4i",Nn=4;break;case 5126:Pr="1f";break;case 35664:Pr="2f",Nn=2;break;case 35665:Pr="3f",Nn=3;break;case 35666:Pr="4f",Nn=4;break;case 35674:Pr="Matrix2fv";break;case 35675:Pr="Matrix3fv";break;case 35676:Pr="Matrix4fv"}if(Pr.indexOf("Matrix")===-1&&1<Wn&&(Pr+="v",Nn=1),Pr.charAt(0)==="M"){zr(ar,".uniform",Pr,"(",Tn,",");var Tn=Math.pow(Gn-35674+2,2),Xn=hr.global.def("new Float32Array(",Tn,")");Array.isArray(Fn)?zr("false,(",s(Tn,function(Pa){return Xn+"["+Pa+"]="+Fn[Pa]}),",",Xn,")"):zr("false,(Array.isArray(",Fn,")||",Fn," instanceof Float32Array)?",Fn,":(",s(Tn,function(Pa){return Xn+"["+Pa+"]="+Fn+"["+Pa+"]"}),",",Xn,")"),zr(");")}else{if(1<Nn){for(var Gn=[],ca=[],Wn=0;Wn<Nn;++Wn)Array.isArray(Fn)?ca.push(Fn[Wn]):ca.push(zr.def(Fn+"["+Wn+"]")),br&&Gn.push(zr.def());br&&zr("if(!",hr.batchId,"||",Gn.map(function(ja,Pa){return ja+"!=="+ca[Pa]}).join("||"),"){",Gn.map(function(ja,Pa){return ja+"="+ca[Pa]+";"}).join("")),zr(ar,".uniform",Pr,"(",Tn,",",ca.join(","),");")}else br&&(Gn=zr.def(),zr("if(!",hr.batchId,"||",Gn,"!==",Fn,"){",Gn,"=",Fn,";")),zr(ar,".uniform",Pr,"(",Tn,",",Fn,");");br&&zr("}")}}}function nr(hr,zr,ln,Rt){function qt(ca){var ja=Nr[ca];return ja?ja.contextDep&&Rt.contextDynamic||ja.propDep?ja.append(hr,ln):ja.append(hr,zr):zr.def(Pr,".",ca)}function br(){function ca(){ln(mn,".drawElementsInstancedANGLE(",[Nn,Wn,Fn,Gn+"<<(("+Fn+"-5121)>>1)",Un],");")}function ja(){ln(mn,".drawArraysInstancedANGLE(",[Nn,Gn,Wn,Un],");")}Tn&&Tn!=="null"?Xn?ca():(ln("if(",Tn,"){"),ca(),ln("}else{"),ja(),ln("}")):ja()}function Hr(){function ca(){ln(Qt+".drawElements("+[Nn,Wn,Fn,Gn+"<<(("+Fn+"-5121)>>1)"]+");")}function ja(){ln(Qt+".drawArrays("+[Nn,Gn,Wn]+");")}Tn&&Tn!=="null"?Xn?ca():(ln("if(",Tn,"){"),ca(),ln("}else{"),ja(),ln("}")):ja()}var ar=hr.shared,Qt=ar.gl,Pr=ar.draw,Nr=Rt.draw,Tn=function(){var ca=Nr.elements,ja=zr;return ca?((ca.contextDep&&Rt.contextDynamic||ca.propDep)&&(ja=ln),ca=ca.append(hr,ja),Nr.elementsActive&&ja("if("+ca+")"+Qt+".bindBuffer(34963,"+ca+".buffer.buffer);")):(ca=ja.def(),ja(ca,"=",Pr,".","elements",";","if(",ca,"){",Qt,".bindBuffer(",34963,",",ca,".buffer.buffer);}","else if(",ar.vao,".currentVAO){",ca,"=",hr.shared.elements+".getElements("+ar.vao,".currentVAO.elements);",yn?"":"if("+ca+")"+Qt+".bindBuffer(34963,"+ca+".buffer.buffer);","}")),ca}(),Nn=qt("primitive"),Gn=qt("offset"),Wn=function(){var ca=Nr.count,ja=zr;return ca?((ca.contextDep&&Rt.contextDynamic||ca.propDep)&&(ja=ln),ca=ca.append(hr,ja)):ca=ja.def(Pr,".","count"),ca}();if(typeof Wn=="number"){if(Wn===0)return}else ln("if(",Wn,"){"),ln.exit("}");var Un,mn;ba&&(Un=qt("instances"),mn=hr.instancing);var Fn=Tn+".type",Xn=Nr.elements&&se(Nr.elements)&&!Nr.vaoActive;ba&&(typeof Un!="number"||0<=Un)?typeof Un=="string"?(ln("if(",Un,">0){"),br(),ln("}else if(",Un,"<0){"),Hr(),ln("}")):br():Hr()}function dr(hr,zr,ln,Rt,qt){return zr=st(),qt=zr.proc("body",qt),ba&&(zr.instancing=qt.def(zr.shared.extensions,".angle_instanced_arrays")),hr(zr,qt,ln,Rt),zr.compile().body}function Zr(hr,zr,ln,Rt){cn(hr,zr),ln.useVAO?ln.drawVAO?zr(hr.shared.vao,".setVAO(",ln.drawVAO.append(hr,zr),");"):zr(hr.shared.vao,".setVAO(",hr.shared.vao,".targetVAO);"):(zr(hr.shared.vao,".setVAO(null);"),at(hr,zr,ln,Rt.attributes,function(){return!0})),Ot(hr,zr,ln,Rt.uniforms,function(){return!0},!1),nr(hr,zr,zr,ln)}function Lr(hr,zr){var ln=hr.proc("draw",1);cn(hr,ln),gn(hr,ln,zr.context),Xr(hr,ln,zr.framebuffer),kr(hr,ln,zr),sn(hr,ln,zr.state),$r(hr,ln,zr,!1,!0);var Rt=zr.shader.progVar.append(hr,ln);if(ln(hr.shared.gl,".useProgram(",Rt,".program);"),zr.shader.program)Zr(hr,ln,zr,zr.shader.program);else{ln(hr.shared.vao,".setVAO(null);");var qt=hr.global.def("{}"),br=ln.def(Rt,".id"),Hr=ln.def(qt,"[",br,"]");ln(hr.cond(Hr).then(Hr,".call(this,a0);").else(Hr,"=",qt,"[",br,"]=",hr.link(function(ar){return dr(Zr,hr,zr,ar,1)}),"(",Rt,");",Hr,".call(this,a0);"))}0<Object.keys(zr.state).length&&ln(hr.shared.current,".dirty=true;"),hr.shared.vao&&ln(hr.shared.vao,".setVAO(null);")}function Ur(hr,zr,ln,Rt){function qt(){return!0}hr.batchId="a1",cn(hr,zr),at(hr,zr,ln,Rt.attributes,qt),Ot(hr,zr,ln,Rt.uniforms,qt,!1),nr(hr,zr,zr,ln)}function xr(hr,zr,ln,Rt){function qt(Tn){return Tn.contextDep&&Hr||Tn.propDep}function br(Tn){return!qt(Tn)}cn(hr,zr);var Hr=ln.contextDep,ar=zr.def(),Qt=zr.def();hr.shared.props=Qt,hr.batchId=ar;var Pr=hr.scope(),Nr=hr.scope();zr(Pr.entry,"for(",ar,"=0;",ar,"<","a1",";++",ar,"){",Qt,"=","a0","[",ar,"];",Nr,"}",Pr.exit),ln.needsContext&&gn(hr,Nr,ln.context),ln.needsFramebuffer&&Xr(hr,Nr,ln.framebuffer),sn(hr,Nr,ln.state,qt),ln.profile&&qt(ln.profile)&&$r(hr,Nr,ln,!1,!0),Rt?(ln.useVAO?ln.drawVAO?qt(ln.drawVAO)?Nr(hr.shared.vao,".setVAO(",ln.drawVAO.append(hr,Nr),");"):Pr(hr.shared.vao,".setVAO(",ln.drawVAO.append(hr,Pr),");"):Pr(hr.shared.vao,".setVAO(",hr.shared.vao,".targetVAO);"):(Pr(hr.shared.vao,".setVAO(null);"),at(hr,Pr,ln,Rt.attributes,br),at(hr,Nr,ln,Rt.attributes,qt)),Ot(hr,Pr,ln,Rt.uniforms,br,!1),Ot(hr,Nr,ln,Rt.uniforms,qt,!0),nr(hr,Pr,Nr,ln)):(zr=hr.global.def("{}"),Rt=ln.shader.progVar.append(hr,Nr),Qt=Nr.def(Rt,".id"),Pr=Nr.def(zr,"[",Qt,"]"),Nr(hr.shared.gl,".useProgram(",Rt,".program);","if(!",Pr,"){",Pr,"=",zr,"[",Qt,"]=",hr.link(function(Tn){return dr(Ur,hr,ln,Tn,2)}),"(",Rt,");}",Pr,".call(this,a0[",ar,"],",ar,");"))}function on(hr,zr){function ln(Pr){return Pr.contextDep&&qt||Pr.propDep}var Rt=hr.proc("batch",2);hr.batchId="0",cn(hr,Rt);var qt=!1,br=!0;Object.keys(zr.context).forEach(function(Pr){qt=qt||zr.context[Pr].propDep}),qt||(gn(hr,Rt,zr.context),br=!1);var Hr=zr.framebuffer,ar=!1;if(Hr?(Hr.propDep?qt=ar=!0:Hr.contextDep&&qt&&(ar=!0),ar||Xr(hr,Rt,Hr)):Xr(hr,Rt,null),zr.state.viewport&&zr.state.viewport.propDep&&(qt=!0),kr(hr,Rt,zr),sn(hr,Rt,zr.state,function(Pr){return!ln(Pr)}),zr.profile&&ln(zr.profile)||$r(hr,Rt,zr,!1,"a1"),zr.contextDep=qt,zr.needsContext=br,zr.needsFramebuffer=ar,br=zr.shader.progVar,br.contextDep&&qt||br.propDep)xr(hr,Rt,zr,null);else if(br=br.append(hr,Rt),Rt(hr.shared.gl,".useProgram(",br,".program);"),zr.shader.program)xr(hr,Rt,zr,zr.shader.program);else{Rt(hr.shared.vao,".setVAO(null);");var Hr=hr.global.def("{}"),ar=Rt.def(br,".id"),Qt=Rt.def(Hr,"[",ar,"]");Rt(hr.cond(Qt).then(Qt,".call(this,a0,a1);").else(Qt,"=",Hr,"[",ar,"]=",hr.link(function(Tn){return dr(xr,hr,zr,Tn,2)}),"(",br,");",Qt,".call(this,a0,a1);"))}0<Object.keys(zr.state).length&&Rt(hr.shared.current,".dirty=true;"),hr.shared.vao&&Rt(hr.shared.vao,".setVAO(null);")}function Pn(hr,zr){function ln(Hr){var ar=zr.shader[Hr];ar&&Rt.set(qt.shader,"."+Hr,ar.append(hr,Rt))}var Rt=hr.proc("scope",3);hr.batchId="a2";var qt=hr.shared,br=qt.current;gn(hr,Rt,zr.context),zr.framebuffer&&zr.framebuffer.append(hr,Rt),le(Object.keys(zr.state)).forEach(function(Hr){var ar=zr.state[Hr].append(hr,Rt);_(ar)?ar.forEach(function(Qt,Pr){Rt.set(hr.next[Hr],"["+Pr+"]",Qt)}):Rt.set(qt.next,"."+Hr,ar)}),$r(hr,Rt,zr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(Hr){var ar=zr.draw[Hr];ar&&Rt.set(qt.draw,"."+Hr,""+ar.append(hr,Rt))}),Object.keys(zr.uniforms).forEach(function(Hr){var ar=zr.uniforms[Hr].append(hr,Rt);Array.isArray(ar)&&(ar="["+ar.join()+"]"),Rt.set(qt.uniforms,"["+gt.id(Hr)+"]",ar)}),Object.keys(zr.attributes).forEach(function(Hr){var ar=zr.attributes[Hr].append(hr,Rt),Qt=hr.scopeAttrib(Hr);Object.keys(new aa).forEach(function(Pr){Rt.set(Qt,"."+Pr,ar[Pr])})}),zr.scopeVAO&&Rt.set(qt.vao,".targetVAO",zr.scopeVAO.append(hr,Rt)),ln("vert"),ln("frag"),0<Object.keys(zr.state).length&&(Rt(br,".dirty=true;"),Rt.exit(br,".dirty=true;")),Rt("a1(",hr.shared.context,",a0,",hr.batchId,");")}function En(hr){if(typeof hr=="object"&&!_(hr)){for(var zr=Object.keys(hr),ln=0;ln<zr.length;++ln)if(ae.isDynamic(hr[zr[ln]]))return!0;return!1}}function $n(hr,zr,ln){function Rt(Tn,Nn){Hr.forEach(function(Gn){var Wn=qt[Gn];ae.isDynamic(Wn)&&(Wn=Tn.invoke(Nn,Wn),Nn(Nr,".",Gn,"=",Wn,";"))})}var qt=zr.static[ln];if(qt&&En(qt)){var br=hr.global,Hr=Object.keys(qt),ar=!1,Qt=!1,Pr=!1,Nr=hr.global.def("{}");Hr.forEach(function(Tn){var Nn=qt[Tn];if(ae.isDynamic(Nn))typeof Nn=="function"&&(Nn=qt[Tn]=ae.unbox(Nn)),Tn=Y(Nn,null),ar=ar||Tn.thisDep,Pr=Pr||Tn.propDep,Qt=Qt||Tn.contextDep;else{switch(br(Nr,".",Tn,"="),typeof Nn){case"number":br(Nn);break;case"string":br('"',Nn,'"');break;case"object":Array.isArray(Nn)&&br("[",Nn.join(),"]");break;default:br(hr.link(Nn))}br(";")}}),zr.dynamic[ln]=new ae.DynamicVariable(4,{thisDep:ar,contextDep:Qt,propDep:Pr,ref:Nr,append:Rt}),delete zr.static[ln]}}var aa=ir.Record,Ca={add:32774,subtract:32778,"reverse subtract":32779};Ct.ext_blend_minmax&&(Ca.min=32775,Ca.max=32776);var ba=Ct.angle_instanced_arrays,vr=Ct.webgl_draw_buffers,yn=Ct.oes_vertex_array_object,en={dirty:!0,profile:Re.profile},In={},Bn=[],ha={},qn={};Qe("dither",3024),Qe("blend.enable",3042),ot("blend.color","blendColor",[0,0,0,0]),ot("blend.equation","blendEquationSeparate",[32774,32774]),ot("blend.func","blendFuncSeparate",[1,0,1,0]),Qe("depth.enable",2929,!0),ot("depth.func","depthFunc",513),ot("depth.range","depthRange",[0,1]),ot("depth.mask","depthMask",!0),ot("colorMask","colorMask",[!0,!0,!0,!0]),Qe("cull.enable",2884),ot("cull.face","cullFace",1029),ot("frontFace","frontFace",2305),ot("lineWidth","lineWidth",1),Qe("polygonOffset.enable",32823),ot("polygonOffset.offset","polygonOffset",[0,0]),Qe("sample.alpha",32926),Qe("sample.enable",32928),ot("sample.coverage","sampleCoverage",[1,!1]),Qe("stencil.enable",2960),ot("stencil.mask","stencilMask",-1),ot("stencil.func","stencilFunc",[519,0,-1]),ot("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),ot("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Qe("scissor.enable",3089),ot("scissor.box","scissor",[0,0,Je.drawingBufferWidth,Je.drawingBufferHeight]),ot("viewport","viewport",[0,0,Je.drawingBufferWidth,Je.drawingBufferHeight]);var Hn={gl:Je,context:we,strings:gt,next:In,current:en,draw:qe,elements:lr,buffer:gr,shader:Vr,attributes:ir.state,vao:ir,uniforms:Rr,framebuffer:Fr,extensions:Ct,timer:Me,isBufferArgs:J},la={primTypes:Ie,compareFuncs:kt,blendFuncs:Pt,blendEquations:Ca,stencilOps:Bt,glTypes:Ae,orientationType:Xt};vr&&(la.backBuffer=[1029],la.drawBuffer=s(or.maxDrawbuffers,function(hr){return hr===0?[0]:s(hr,function(zr){return 36064+zr})}));var da=0;return{next:In,current:en,procs:function(){var hr=st(),zr=hr.proc("poll"),ln=hr.proc("refresh"),Rt=hr.block();zr(Rt),ln(Rt);var qt=hr.shared,br=qt.gl,Hr=qt.next,ar=qt.current;Rt(ar,".dirty=false;"),Xr(hr,zr),Xr(hr,ln,null,!0);var Qt;ba&&(Qt=hr.link(ba)),Ct.oes_vertex_array_object&&ln(hr.link(Ct.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Pr=0;Pr<or.maxAttributes;++Pr){var Nr=ln.def(qt.attributes,"[",Pr,"]"),Tn=hr.cond(Nr,".buffer");Tn.then(br,".enableVertexAttribArray(",Pr,");",br,".bindBuffer(",34962,",",Nr,".buffer.buffer);",br,".vertexAttribPointer(",Pr,",",Nr,".size,",Nr,".type,",Nr,".normalized,",Nr,".stride,",Nr,".offset);").else(br,".disableVertexAttribArray(",Pr,");",br,".vertexAttrib4f(",Pr,",",Nr,".x,",Nr,".y,",Nr,".z,",Nr,".w);",Nr,".buffer=null;"),ln(Tn),ba&&ln(Qt,".vertexAttribDivisorANGLE(",Pr,",",Nr,".divisor);")}return ln(hr.shared.vao,".currentVAO=null;",hr.shared.vao,".setVAO(",hr.shared.vao,".targetVAO);"),Object.keys(ha).forEach(function(Nn){var Gn=ha[Nn],Wn=Rt.def(Hr,".",Nn),Un=hr.block();Un("if(",Wn,"){",br,".enable(",Gn,")}else{",br,".disable(",Gn,")}",ar,".",Nn,"=",Wn,";"),ln(Un),zr("if(",Wn,"!==",ar,".",Nn,"){",Un,"}")}),Object.keys(qn).forEach(function(Nn){var Gn=qn[Nn],Wn=en[Nn],Un,mn,Fn=hr.block();Fn(br,".",Gn,"("),_(Wn)?(Gn=Wn.length,Un=hr.global.def(Hr,".",Nn),mn=hr.global.def(ar,".",Nn),Fn(s(Gn,function(Xn){return Un+"["+Xn+"]"}),");",s(Gn,function(Xn){return mn+"["+Xn+"]="+Un+"["+Xn+"];"}).join("")),zr("if(",s(Gn,function(Xn){return Un+"["+Xn+"]!=="+mn+"["+Xn+"]"}).join("||"),"){",Fn,"}")):(Un=Rt.def(Hr,".",Nn),mn=Rt.def(ar,".",Nn),Fn(Un,");",ar,".",Nn,"=",Un,";"),zr("if(",Un,"!==",mn,"){",Fn,"}")),ln(Fn)}),hr.compile()}(),compile:function(hr,zr,ln,Rt,qt){var br=st();br.stats=br.link(qt),Object.keys(zr.static).forEach(function(ar){$n(br,zr,ar)}),ut.forEach(function(ar){$n(br,hr,ar)});var Hr=yr(hr,zr,ln,Rt,br);return Lr(br,Hr),Pn(br,Hr),on(br,Hr),K(br.compile(),{destroy:function(){Hr.shader.program.destroy()}})}}}function $(Je,gt){for(var Ct=0;Ct<Je.length;++Ct)if(Je[Ct]===gt)return Ct;return-1}var K=function(Je,gt){for(var Ct=Object.keys(gt),or=0;or<Ct.length;++or)Je[Ct[or]]=gt[Ct[or]];return Je},Q=0,ae={DynamicVariable:l,define:function(Je,gt){return new l(Je,c(gt+""))},isDynamic:function(Je){return typeof Je=="function"&&!Je._reglType||Je instanceof l},unbox:p,accessor:c},ie={next:typeof requestAnimationFrame=="function"?function(Je){return requestAnimationFrame(Je)}:function(Je){return setTimeout(Je,16)},cancel:typeof cancelAnimationFrame=="function"?function(Je){return cancelAnimationFrame(Je)}:clearTimeout},oe=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date},fe=d();fe.zero=d();var ye=function(Je,gt){var Ct=1;gt.ext_texture_filter_anisotropic&&(Ct=Je.getParameter(34047));var or=1,gr=1;gt.webgl_draw_buffers&&(or=Je.getParameter(34852),gr=Je.getParameter(36063));var lr=!!gt.oes_texture_float;if(lr){lr=Je.createTexture(),Je.bindTexture(3553,lr),Je.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var mr=Je.createFramebuffer();if(Je.bindFramebuffer(36160,mr),Je.framebufferTexture2D(36160,36064,3553,lr,0),Je.bindTexture(3553,null),Je.checkFramebufferStatus(36160)!==36053)lr=!1;else{Je.viewport(0,0,1,1),Je.clearColor(1,0,0,1),Je.clear(16384);var Fr=fe.allocType(5126,4);Je.readPixels(0,0,1,1,6408,5126,Fr),Je.getError()?lr=!1:(Je.deleteFramebuffer(mr),Je.deleteTexture(lr),lr=Fr[0]===1),fe.freeType(Fr)}}return Fr=!0,typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(Fr=Je.createTexture(),mr=fe.allocType(5121,36),Je.activeTexture(33984),Je.bindTexture(34067,Fr),Je.texImage2D(34069,0,6408,3,3,0,6408,5121,mr),fe.freeType(mr),Je.bindTexture(34067,null),Je.deleteTexture(Fr),Fr=!Je.getError()),{colorBits:[Je.getParameter(3410),Je.getParameter(3411),Je.getParameter(3412),Je.getParameter(3413)],depthBits:Je.getParameter(3414),stencilBits:Je.getParameter(3415),subpixelBits:Je.getParameter(3408),extensions:Object.keys(gt).filter(function(Rr){return!!gt[Rr]}),maxAnisotropic:Ct,maxDrawbuffers:or,maxColorAttachments:gr,pointSizeDims:Je.getParameter(33901),lineWidthDims:Je.getParameter(33902),maxViewportDims:Je.getParameter(3386),maxCombinedTextureUnits:Je.getParameter(35661),maxCubeMapSize:Je.getParameter(34076),maxRenderbufferSize:Je.getParameter(34024),maxTextureUnits:Je.getParameter(34930),maxTextureSize:Je.getParameter(3379),maxAttributes:Je.getParameter(34921),maxVertexUniforms:Je.getParameter(36347),maxVertexTextureUnits:Je.getParameter(35660),maxVaryingVectors:Je.getParameter(36348),maxFragmentUniforms:Je.getParameter(36349),glsl:Je.getParameter(35724),renderer:Je.getParameter(7937),vendor:Je.getParameter(7936),version:Je.getParameter(7938),readFloat:lr,npotTextureCube:Fr}},ce=function(Je){return Je instanceof Uint8Array||Je instanceof Uint16Array||Je instanceof Uint32Array||Je instanceof Int8Array||Je instanceof Int16Array||Je instanceof Int32Array||Je instanceof Float32Array||Je instanceof Float64Array||Je instanceof Uint8ClampedArray},me=function(Je){return Object.keys(Je).map(function(gt){return Je[gt]})},xe={shape:function(Je){for(var gt=[];Je.length;Je=Je[0])gt.push(Je.length);return gt},flatten:function(Je,gt,Ct,or){var gr=1;if(gt.length)for(var lr=0;lr<gt.length;++lr)gr*=gt[lr];else gr=0;switch(Ct=or||fe.allocType(Ct,gr),gt.length){case 0:break;case 1:for(or=gt[0],gt=0;gt<or;++gt)Ct[gt]=Je[gt];break;case 2:for(or=gt[0],gt=gt[1],lr=gr=0;lr<or;++lr)for(var mr=Je[lr],Fr=0;Fr<gt;++Fr)Ct[gr++]=mr[Fr];break;case 3:m(Je,gt[0],gt[1],gt[2],Ct,0);break;default:g(Je,gt,0,Ct,0)}return Ct}},ke={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ae={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Oe={dynamic:35048,stream:35040,static:35044},He=xe.flatten,Ge=xe.shape,_e=[];_e[5120]=1,_e[5122]=2,_e[5124]=4,_e[5121]=1,_e[5123]=2,_e[5125]=4,_e[5126]=4;var Ie={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},We=new Float32Array(1),et=new Uint32Array(We.buffer),Ne=[9984,9986,9985,9987],De=[0,6409,6410,6407,6408],Ve={};Ve[6409]=Ve[6406]=Ve[6402]=1,Ve[34041]=Ve[6410]=2,Ve[6407]=Ve[35904]=3,Ve[6408]=Ve[35906]=4;var dt=v("HTMLCanvasElement"),Dt=v("OffscreenCanvas"),Gt=v("CanvasRenderingContext2D"),Mt=v("ImageBitmap"),zt=v("HTMLImageElement"),Nt=v("HTMLVideoElement"),Et=Object.keys(ke).concat([dt,Dt,Gt,Mt,zt,Nt]),At=[];At[5121]=1,At[5126]=4,At[36193]=2,At[5123]=2,At[5125]=4;var it=[];it[32854]=2,it[32855]=2,it[36194]=2,it[34041]=4,it[33776]=.5,it[33777]=.5,it[33778]=1,it[33779]=1,it[35986]=.5,it[35987]=1,it[34798]=1,it[35840]=.5,it[35841]=.25,it[35842]=.5,it[35843]=.25,it[36196]=.5;var ht=[];ht[32854]=2,ht[32855]=2,ht[36194]=2,ht[33189]=2,ht[36168]=1,ht[34041]=4,ht[35907]=4,ht[34836]=16,ht[34842]=8,ht[34843]=6;var $e=function(Je,gt,Ct,or,gr){function lr(qe){this.id=ir++,this.refCount=1,this.renderbuffer=qe,this.format=32854,this.height=this.width=0,gr.profile&&(this.stats={size:0})}function mr(qe){var we=qe.renderbuffer;Je.bindRenderbuffer(36161,null),Je.deleteRenderbuffer(we),qe.renderbuffer=null,qe.refCount=0,delete Vr[qe.id],or.renderbufferCount--}var Fr={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};gt.ext_srgb&&(Fr.srgba=35907),gt.ext_color_buffer_half_float&&(Fr.rgba16f=34842,Fr.rgb16f=34843),gt.webgl_color_buffer_float&&(Fr.rgba32f=34836);var Rr=[];Object.keys(Fr).forEach(function(qe){Rr[Fr[qe]]=qe});var ir=0,Vr={};return lr.prototype.decRef=function(){0>=--this.refCount&&mr(this)},gr.profile&&(or.getTotalRenderbufferSize=function(){var qe=0;return Object.keys(Vr).forEach(function(we){qe+=Vr[we].stats.size}),qe}),{create:function(qe,we){function Me(Ye,Qe){var ot=0,st=0,pt=32854;if(typeof Ye=="object"&&Ye?("shape"in Ye?(st=Ye.shape,ot=st[0]|0,st=st[1]|0):("radius"in Ye&&(ot=st=Ye.radius|0),"width"in Ye&&(ot=Ye.width|0),"height"in Ye&&(st=Ye.height|0)),"format"in Ye&&(pt=Fr[Ye.format])):typeof Ye=="number"?(ot=Ye|0,st=typeof Qe=="number"?Qe|0:ot):Ye||(ot=st=1),ot!==Re.width||st!==Re.height||pt!==Re.format)return Me.width=Re.width=ot,Me.height=Re.height=st,Re.format=pt,Je.bindRenderbuffer(36161,Re.renderbuffer),Je.renderbufferStorage(36161,pt,ot,st),gr.profile&&(Re.stats.size=ht[Re.format]*Re.width*Re.height),Me.format=Rr[Re.format],Me}var Re=new lr(Je.createRenderbuffer());return Vr[Re.id]=Re,or.renderbufferCount++,Me(qe,we),Me.resize=function(Ye,Qe){var ot=Ye|0,st=Qe|0||ot;return ot===Re.width&&st===Re.height||(Me.width=Re.width=ot,Me.height=Re.height=st,Je.bindRenderbuffer(36161,Re.renderbuffer),Je.renderbufferStorage(36161,Re.format,ot,st),gr.profile&&(Re.stats.size=ht[Re.format]*Re.width*Re.height)),Me},Me._reglType="renderbuffer",Me._renderbuffer=Re,gr.profile&&(Me.stats=Re.stats),Me.destroy=function(){Re.decRef()},Me},clear:function(){me(Vr).forEach(mr)},restore:function(){me(Vr).forEach(function(qe){qe.renderbuffer=Je.createRenderbuffer(),Je.bindRenderbuffer(36161,qe.renderbuffer),Je.renderbufferStorage(36161,qe.format,qe.width,qe.height)}),Je.bindRenderbuffer(36161,null)}}},Ee=[];Ee[6408]=4,Ee[6407]=3;var Xe=[];Xe[5121]=1,Xe[5126]=4,Xe[36193]=2;var rt=["x","y","z","w"],ut="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Pt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},kt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Bt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Xt={cw:2304,ccw:2305},Ut=new ue(!1,!1,!1,function(){}),Jt=function(Je,gt){function Ct(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function or(Vr,qe,we){var Me=mr.pop()||new Ct;Me.startQueryIndex=Vr,Me.endQueryIndex=qe,Me.sum=0,Me.stats=we,Fr.push(Me)}if(!gt.ext_disjoint_timer_query)return null;var gr=[],lr=[],mr=[],Fr=[],Rr=[],ir=[];return{beginQuery:function(Vr){var qe=gr.pop()||gt.ext_disjoint_timer_query.createQueryEXT();gt.ext_disjoint_timer_query.beginQueryEXT(35007,qe),lr.push(qe),or(lr.length-1,lr.length,Vr)},endQuery:function(){gt.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:or,update:function(){var Vr,qe;if(Vr=lr.length,Vr!==0){ir.length=Math.max(ir.length,Vr+1),Rr.length=Math.max(Rr.length,Vr+1),Rr[0]=0;var we=ir[0]=0;for(qe=Vr=0;qe<lr.length;++qe){var Me=lr[qe];gt.ext_disjoint_timer_query.getQueryObjectEXT(Me,34919)?(we+=gt.ext_disjoint_timer_query.getQueryObjectEXT(Me,34918),gr.push(Me)):lr[Vr++]=Me,Rr[qe+1]=we,ir[qe+1]=Vr}for(lr.length=Vr,qe=Vr=0;qe<Fr.length;++qe){var we=Fr[qe],Re=we.startQueryIndex,Me=we.endQueryIndex;we.sum+=Rr[Me]-Rr[Re],Re=ir[Re],Me=ir[Me],Me===Re?(we.stats.gpuTime+=we.sum/1e6,mr.push(we)):(we.startQueryIndex=Re,we.endQueryIndex=Me,Fr[Vr++]=we)}Fr.length=Vr}},getNumPendingQueries:function(){return lr.length},clear:function(){gr.push.apply(gr,lr);for(var Vr=0;Vr<gr.length;Vr++)gt.ext_disjoint_timer_query.deleteQueryEXT(gr[Vr]);lr.length=0,gr.length=0},restore:function(){lr.length=0,gr.length=0}}};return function(Je){function gt(){if($r.length===0)pt&&pt.update(),dr=null;else{dr=ie.next(gt),Vr();for(var Lr=$r.length-1;0<=Lr;--Lr){var Ur=$r[Lr];Ur&&Ur(Tr,null,0)}Me.flush(),pt&&pt.update()}}function Ct(){!dr&&0<$r.length&&(dr=ie.next(gt))}function or(){dr&&(ie.cancel(gt),dr=null)}function gr(Lr){Lr.preventDefault(),or(),at.forEach(function(Ur){Ur()})}function lr(Lr){Me.getError(),Ye.restore(),Sr.restore(),_r.restore(),yr.restore(),gn.restore(),Xr.restore(),nn.restore(),pt&&pt.restore(),kr.procs.refresh(),Ct(),Ot.forEach(function(Ur){Ur()})}function mr(Lr){function Ur(en,In){var Bn={},ha={};return Object.keys(en).forEach(function(qn){var Hn=en[qn];if(ae.isDynamic(Hn))ha[qn]=ae.unbox(Hn,qn);else{if(In&&Array.isArray(Hn)){for(var la=0;la<Hn.length;++la)if(ae.isDynamic(Hn[la])){ha[qn]=ae.unbox(Hn,qn);return}}Bn[qn]=Hn}}),{dynamic:ha,static:Bn}}function xr(en){for(;yn.length<en;)yn.push(null);return yn}var on=Ur(Lr.context||{},!0),Pn=Ur(Lr.uniforms||{},!0),En=Ur(Lr.attributes||{},!1);Lr=Ur(function(en){function In(ha){if(ha in Bn){var qn=Bn[ha];delete Bn[ha],Object.keys(qn).forEach(function(Hn){Bn[ha+"."+Hn]=qn[Hn]})}}var Bn=K({},en);return delete Bn.uniforms,delete Bn.attributes,delete Bn.context,delete Bn.vao,"stencil"in Bn&&Bn.stencil.op&&(Bn.stencil.opBack=Bn.stencil.opFront=Bn.stencil.op,delete Bn.stencil.op),In("blend"),In("depth"),In("cull"),In("stencil"),In("polygonOffset"),In("scissor"),In("sample"),"vao"in en&&(Bn.vao=en.vao),Bn}(Lr),!1);var $n={gpuTime:0,cpuTime:0,count:0},aa=kr.compile(Lr,En,Pn,on,$n),Ca=aa.draw,ba=aa.batch,vr=aa.scope,yn=[];return K(function(en,In){var Bn;if(typeof en=="function")return vr.call(this,null,en,0);if(typeof In=="function")if(typeof en=="number")for(Bn=0;Bn<en;++Bn)vr.call(this,null,In,Bn);else if(Array.isArray(en))for(Bn=0;Bn<en.length;++Bn)vr.call(this,en[Bn],In,Bn);else return vr.call(this,en,In,0);else if(typeof en=="number"){if(0<en)return ba.call(this,xr(en|0),en|0)}else if(Array.isArray(en)){if(en.length)return ba.call(this,en,en.length)}else return Ca.call(this,en)},{stats:$n,destroy:function(){aa.destroy()}})}function Fr(Lr,Ur){var xr=0;kr.procs.poll();var on=Ur.color;on&&(Me.clearColor(+on[0]||0,+on[1]||0,+on[2]||0,+on[3]||0),xr|=16384),"depth"in Ur&&(Me.clearDepth(+Ur.depth),xr|=256),"stencil"in Ur&&(Me.clearStencil(Ur.stencil|0),xr|=1024),Me.clear(xr)}function Rr(Lr){return $r.push(Lr),Ct(),{cancel:function(){function Ur(){var on=$($r,Ur);$r[on]=$r[$r.length-1],--$r.length,0>=$r.length&&or()}var xr=$($r,Lr);$r[xr]=Ur}}}function ir(){var Lr=sn.viewport,Ur=sn.scissor_box;Lr[0]=Lr[1]=Ur[0]=Ur[1]=0,Tr.viewportWidth=Tr.framebufferWidth=Tr.drawingBufferWidth=Lr[2]=Ur[2]=Me.drawingBufferWidth,Tr.viewportHeight=Tr.framebufferHeight=Tr.drawingBufferHeight=Lr[3]=Ur[3]=Me.drawingBufferHeight}function Vr(){Tr.tick+=1,Tr.time=we(),ir(),kr.procs.poll()}function qe(){yr.refresh(),ir(),kr.procs.refresh(),pt&&pt.update()}function we(){return(oe()-wt)/1e3}if(Je=f(Je),!Je)return null;var Me=Je.gl,Re=Me.getContextAttributes();Me.isContextLost();var Ye=u(Me,Je);if(!Ye)return null;var Qe=t(),ot={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},st=Ye.extensions,pt=Jt(Me,st),wt=oe(),Yt=Me.drawingBufferWidth,wr=Me.drawingBufferHeight,Tr={tick:0,time:0,viewportWidth:Yt,viewportHeight:wr,framebufferWidth:Yt,framebufferHeight:wr,drawingBufferWidth:Yt,drawingBufferHeight:wr,pixelRatio:Je.pixelRatio},Yt={elements:null,primitive:4,count:-1,offset:0,instances:-1},Mr=ye(Me,st),_r=S(Me,ot,Je,function(Lr){return nn.destroyBuffer(Lr)}),Or=w(Me,st,_r,ot),nn=U(Me,st,Mr,ot,_r,Or,Yt),Sr=j(Me,Qe,ot,Je),yr=I(Me,st,Mr,function(){kr.procs.poll()},Tr,ot,Je),gn=$e(Me,st,Mr,ot,Je),Xr=F(Me,st,Mr,yr,gn,ot),kr=ee(Me,Qe,st,Mr,_r,Or,yr,Xr,{},nn,Sr,Yt,Tr,pt,Je),Qe=Z(Me,Xr,kr.procs.poll,Tr),sn=kr.next,cn=Me.canvas,$r=[],at=[],Ot=[],nr=[Je.onDestroy],dr=null;cn&&(cn.addEventListener("webglcontextlost",gr,!1),cn.addEventListener("webglcontextrestored",lr,!1));var Zr=Xr.setFBO=mr({framebuffer:ae.define.call(null,1,"framebuffer")});return qe(),Re=K(mr,{clear:function(Lr){if("framebuffer"in Lr)if(Lr.framebuffer&&Lr.framebuffer_reglType==="framebufferCube")for(var Ur=0;6>Ur;++Ur)Zr(K({framebuffer:Lr.framebuffer.faces[Ur]},Lr),Fr);else Zr(Lr,Fr);else Fr(null,Lr)},prop:ae.define.bind(null,1),context:ae.define.bind(null,2),this:ae.define.bind(null,3),draw:mr({}),buffer:function(Lr){return _r.create(Lr,34962,!1,!1)},elements:function(Lr){return Or.create(Lr,!1)},texture:yr.create2D,cube:yr.createCube,renderbuffer:gn.create,framebuffer:Xr.create,framebufferCube:Xr.createCube,vao:nn.createVAO,attributes:Re,frame:Rr,on:function(Lr,Ur){var xr;switch(Lr){case"frame":return Rr(Ur);case"lost":xr=at;break;case"restore":xr=Ot;break;case"destroy":xr=nr}return xr.push(Ur),{cancel:function(){for(var on=0;on<xr.length;++on)if(xr[on]===Ur){xr[on]=xr[xr.length-1],xr.pop();break}}}},limits:Mr,hasExtension:function(Lr){return 0<=Mr.extensions.indexOf(Lr.toLowerCase())},read:Qe,destroy:function(){$r.length=0,or(),cn&&(cn.removeEventListener("webglcontextlost",gr),cn.removeEventListener("webglcontextrestored",lr)),Sr.clear(),Xr.clear(),gn.clear(),nn.clear(),yr.clear(),Or.clear(),_r.clear(),pt&&pt.clear(),nr.forEach(function(Lr){Lr()})},_gl:Me,_refresh:qe,poll:function(){Vr(),pt&&pt.update()},now:we,stats:ot}),Je.onDone(null,Re),Re}})},{}],284:[function(e,k,z){var l=e("buffer"),o=l.Buffer;function c(t,n){for(var a in t)n[a]=t[a]}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?k.exports=l:(c(l,z),z.Buffer=p);function p(t,n,a){return o(t,n,a)}p.prototype=Object.create(o.prototype),c(o,p),p.from=function(t,n,a){if(typeof t=="number")throw new TypeError("Argument must not be a number");return o(t,n,a)},p.alloc=function(t,n,a){if(typeof t!="number")throw new TypeError("Argument must be a number");var i=o(t);return n!==void 0?typeof a=="string"?i.fill(n,a):i.fill(n):i.fill(0),i},p.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return o(t)},p.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return l.SlowBuffer(t)}},{buffer:85}],285:[function(e,k,z){k.exports=c;var l=e("events").EventEmitter,o=e("inherits");o(c,l),c.Readable=e("readable-stream/lib/_stream_readable.js"),c.Writable=e("readable-stream/lib/_stream_writable.js"),c.Duplex=e("readable-stream/lib/_stream_duplex.js"),c.Transform=e("readable-stream/lib/_stream_transform.js"),c.PassThrough=e("readable-stream/lib/_stream_passthrough.js"),c.finished=e("readable-stream/lib/internal/streams/end-of-stream.js"),c.pipeline=e("readable-stream/lib/internal/streams/pipeline.js"),c.Stream=c;function c(){l.call(this)}c.prototype.pipe=function(p,t){var n=this;function a(d){p.writable&&p.write(d)===!1&&n.pause&&n.pause()}n.on("data",a);function i(){n.readable&&n.resume&&n.resume()}p.on("drain",i),!p._isStdio&&(!t||t.end!==!1)&&(n.on("end",f),n.on("close",u));var r=!1;function f(){r||(r=!0,p.end())}function u(){r||(r=!0,typeof p.destroy=="function"&&p.destroy())}function s(d){if(h(),l.listenerCount(this,"error")===0)throw d}n.on("error",s),p.on("error",s);function h(){n.removeListener("data",a),p.removeListener("drain",i),n.removeListener("end",f),n.removeListener("close",u),n.removeListener("error",s),p.removeListener("error",s),n.removeListener("end",h),n.removeListener("close",h),p.removeListener("close",h)}return n.on("end",h),n.on("close",h),p.on("close",h),p.emit("pipe",n),p}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":287,"readable-stream/lib/_stream_passthrough.js":288,"readable-stream/lib/_stream_readable.js":289,"readable-stream/lib/_stream_transform.js":290,"readable-stream/lib/_stream_writable.js":291,"readable-stream/lib/internal/streams/end-of-stream.js":295,"readable-stream/lib/internal/streams/pipeline.js":297}],286:[function(e,k,z){function l(i,r){i.prototype=Object.create(r.prototype),i.prototype.constructor=i,i.__proto__=r}var o={};function c(i,r,f){f||(f=Error);function u(h,d,y){return typeof r=="string"?r:r(h,d,y)}var s=function(h){l(d,h);function d(y,m,g){return h.call(this,u(y,m,g))||this}return d}(f);s.prototype.name=f.name,s.prototype.code=i,o[i]=s}function p(i,r){if(Array.isArray(i)){var f=i.length;return i=i.map(function(u){return String(u)}),f>2?"one of ".concat(r," ").concat(i.slice(0,f-1).join(", "),", or ")+i[f-1]:f===2?"one of ".concat(r," ").concat(i[0]," or ").concat(i[1]):"of ".concat(r," ").concat(i[0])}else return"of ".concat(r," ").concat(String(i))}function t(i,r,f){return i.substr(!f||f<0?0:+f,r.length)===r}function n(i,r,f){return(f===void 0||f>i.length)&&(f=i.length),i.substring(f-r.length,f)===r}function a(i,r,f){return typeof f!="number"&&(f=0),f+r.length>i.length?!1:i.indexOf(r,f)!==-1}c("ERR_INVALID_OPT_VALUE",function(i,r){return'The value "'+r+'" is invalid for option "'+i+'"'},TypeError),c("ERR_INVALID_ARG_TYPE",function(i,r,f){var u;typeof r=="string"&&t(r,"not ")?(u="must not be",r=r.replace(/^not /,"")):u="must be";var s;if(n(i," argument"))s="The ".concat(i," ").concat(u," ").concat(p(r,"type"));else{var h=a(i,".")?"property":"argument";s='The "'.concat(i,'" ').concat(h," ").concat(u," ").concat(p(r,"type"))}return s+=". Received type ".concat(typeof f),s},TypeError),c("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),c("ERR_METHOD_NOT_IMPLEMENTED",function(i){return"The "+i+" method is not implemented"}),c("ERR_STREAM_PREMATURE_CLOSE","Premature close"),c("ERR_STREAM_DESTROYED",function(i){return"Cannot call "+i+" after a stream was destroyed"}),c("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),c("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),c("ERR_STREAM_WRITE_AFTER_END","write after end"),c("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),c("ERR_UNKNOWN_ENCODING",function(i){return"Unknown encoding: "+i},TypeError),c("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),k.exports.codes=o},{}],287:[function(e,k,z){(function(l){(function(){var o=Object.keys||function(u){var s=[];for(var h in u)s.push(h);return s};k.exports=i;var c=e("./_stream_readable"),p=e("./_stream_writable");e("inherits")(i,c);for(var t=o(p.prototype),n=0;n<t.length;n++){var a=t[n];i.prototype[a]||(i.prototype[a]=p.prototype[a])}function i(u){if(!(this instanceof i))return new i(u);c.call(this,u),p.call(this,u),this.allowHalfOpen=!0,u&&(u.readable===!1&&(this.readable=!1),u.writable===!1&&(this.writable=!1),u.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",r)))}Object.defineProperty(i.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(i.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(i.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function r(){this._writableState.ended||l.nextTick(f,this)}function f(u){u.end()}Object.defineProperty(i.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(s){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=s,this._writableState.destroyed=s)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":289,"./_stream_writable":291,_process:277,inherits:231}],288:[function(e,k,z){k.exports=o;var l=e("./_stream_transform");e("inherits")(o,l);function o(c){if(!(this instanceof o))return new o(c);l.call(this,c)}o.prototype._transform=function(c,p,t){t(null,c)}},{"./_stream_transform":290,inherits:231}],289:[function(e,k,z){(function(l,o){(function(){k.exports=E;var c;E.ReadableState=M,e("events").EventEmitter;var p=function(ae,ie){return ae.listeners(ie).length},t=e("./internal/streams/stream"),n=e("buffer").Buffer,a=o.Uint8Array||function(){};function i(Q){return n.from(Q)}function r(Q){return n.isBuffer(Q)||Q instanceof a}var f=e("util"),u;f&&f.debuglog?u=f.debuglog("stream"):u=function(){};var s=e("./internal/streams/buffer_list"),h=e("./internal/streams/destroy"),d=e("./internal/streams/state"),y=d.getHighWaterMark,m=e("../errors").codes,g=m.ERR_INVALID_ARG_TYPE,x=m.ERR_STREAM_PUSH_AFTER_EOF,A=m.ERR_METHOD_NOT_IMPLEMENTED,b=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,S,w,T;e("inherits")(E,t);var _=h.errorOrDestroy,v=["error","close","destroy","pause","resume"];function P(Q,ae,ie){if(typeof Q.prependListener=="function")return Q.prependListener(ae,ie);!Q._events||!Q._events[ae]?Q.on(ae,ie):Array.isArray(Q._events[ae])?Q._events[ae].unshift(ie):Q._events[ae]=[ie,Q._events[ae]]}function M(Q,ae,ie){c=c||e("./_stream_duplex"),Q=Q||{},typeof ie!="boolean"&&(ie=ae instanceof c),this.objectMode=!!Q.objectMode,ie&&(this.objectMode=this.objectMode||!!Q.readableObjectMode),this.highWaterMark=y(this,Q,"readableHighWaterMark",ie),this.buffer=new s,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Q.emitClose!==!1,this.autoDestroy=!!Q.autoDestroy,this.destroyed=!1,this.defaultEncoding=Q.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Q.encoding&&(S||(S=e("string_decoder/").StringDecoder),this.decoder=new S(Q.encoding),this.encoding=Q.encoding)}function E(Q){if(c=c||e("./_stream_duplex"),!(this instanceof E))return new E(Q);var ae=this instanceof c;this._readableState=new M(Q,this,ae),this.readable=!0,Q&&(typeof Q.read=="function"&&(this._read=Q.read),typeof Q.destroy=="function"&&(this._destroy=Q.destroy)),t.call(this)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(ae){!this._readableState||(this._readableState.destroyed=ae)}}),E.prototype.destroy=h.destroy,E.prototype._undestroy=h.undestroy,E.prototype._destroy=function(Q,ae){ae(Q)},E.prototype.push=function(Q,ae){var ie=this._readableState,oe;return ie.objectMode?oe=!0:typeof Q=="string"&&(ae=ae||ie.defaultEncoding,ae!==ie.encoding&&(Q=n.from(Q,ae),ae=""),oe=!0),D(this,Q,ae,!1,oe)},E.prototype.unshift=function(Q){return D(this,Q,null,!0,!1)};function D(Q,ae,ie,oe,fe){u("readableAddChunk",ae);var ye=Q._readableState;if(ae===null)ye.reading=!1,U(Q,ye);else{var ce;if(fe||(ce=O(ye,ae)),ce)_(Q,ce);else if(ye.objectMode||ae&&ae.length>0)if(typeof ae!="string"&&!ye.objectMode&&Object.getPrototypeOf(ae)!==n.prototype&&(ae=i(ae)),oe)ye.endEmitted?_(Q,new b):N(Q,ye,ae,!0);else if(ye.ended)_(Q,new x);else{if(ye.destroyed)return!1;ye.reading=!1,ye.decoder&&!ie?(ae=ye.decoder.write(ae),ye.objectMode||ae.length!==0?N(Q,ye,ae,!1):te(Q,ye)):N(Q,ye,ae,!1)}else oe||(ye.reading=!1,te(Q,ye))}return!ye.ended&&(ye.length<ye.highWaterMark||ye.length===0)}function N(Q,ae,ie,oe){ae.flowing&&ae.length===0&&!ae.sync?(ae.awaitDrain=0,Q.emit("data",ie)):(ae.length+=ae.objectMode?1:ie.length,oe?ae.buffer.unshift(ie):ae.buffer.push(ie),ae.needReadable&&j(Q)),te(Q,ae)}function O(Q,ae){var ie;return!r(ae)&&typeof ae!="string"&&ae!==void 0&&!Q.objectMode&&(ie=new g("chunk",["string","Buffer","Uint8Array"],ae)),ie}E.prototype.isPaused=function(){return this._readableState.flowing===!1},E.prototype.setEncoding=function(Q){S||(S=e("string_decoder/").StringDecoder);var ae=new S(Q);this._readableState.decoder=ae,this._readableState.encoding=this._readableState.decoder.encoding;for(var ie=this._readableState.buffer.head,oe="";ie!==null;)oe+=ae.write(ie.data),ie=ie.next;return this._readableState.buffer.clear(),oe!==""&&this._readableState.buffer.push(oe),this._readableState.length=oe.length,this};var I=1073741824;function F(Q){return Q>=I?Q=I:(Q--,Q|=Q>>>1,Q|=Q>>>2,Q|=Q>>>4,Q|=Q>>>8,Q|=Q>>>16,Q++),Q}function V(Q,ae){return Q<=0||ae.length===0&&ae.ended?0:ae.objectMode?1:Q!==Q?ae.flowing&&ae.length?ae.buffer.head.data.length:ae.length:(Q>ae.highWaterMark&&(ae.highWaterMark=F(Q)),Q<=ae.length?Q:ae.ended?ae.length:(ae.needReadable=!0,0))}E.prototype.read=function(Q){u("read",Q),Q=parseInt(Q,10);var ae=this._readableState,ie=Q;if(Q!==0&&(ae.emittedReadable=!1),Q===0&&ae.needReadable&&((ae.highWaterMark!==0?ae.length>=ae.highWaterMark:ae.length>0)||ae.ended))return u("read: emitReadable",ae.length,ae.ended),ae.length===0&&ae.ended?ee(this):j(this),null;if(Q=V(Q,ae),Q===0&&ae.ended)return ae.length===0&&ee(this),null;var oe=ae.needReadable;u("need readable",oe),(ae.length===0||ae.length-Q<ae.highWaterMark)&&(oe=!0,u("length less than watermark",oe)),ae.ended||ae.reading?(oe=!1,u("reading or ended",oe)):oe&&(u("do read"),ae.reading=!0,ae.sync=!0,ae.length===0&&(ae.needReadable=!0),this._read(ae.highWaterMark),ae.sync=!1,ae.reading||(Q=V(ie,ae)));var fe;return Q>0?fe=Y(Q,ae):fe=null,fe===null?(ae.needReadable=ae.length<=ae.highWaterMark,Q=0):(ae.length-=Q,ae.awaitDrain=0),ae.length===0&&(ae.ended||(ae.needReadable=!0),ie!==Q&&ae.ended&&ee(this)),fe!==null&&this.emit("data",fe),fe};function U(Q,ae){if(u("onEofChunk"),!ae.ended){if(ae.decoder){var ie=ae.decoder.end();ie&&ie.length&&(ae.buffer.push(ie),ae.length+=ae.objectMode?1:ie.length)}ae.ended=!0,ae.sync?j(Q):(ae.needReadable=!1,ae.emittedReadable||(ae.emittedReadable=!0,Z(Q)))}}function j(Q){var ae=Q._readableState;u("emitReadable",ae.needReadable,ae.emittedReadable),ae.needReadable=!1,ae.emittedReadable||(u("emitReadable",ae.flowing),ae.emittedReadable=!0,l.nextTick(Z,Q))}function Z(Q){var ae=Q._readableState;u("emitReadable_",ae.destroyed,ae.length,ae.ended),!ae.destroyed&&(ae.length||ae.ended)&&(Q.emit("readable"),ae.emittedReadable=!1),ae.needReadable=!ae.flowing&&!ae.ended&&ae.length<=ae.highWaterMark,G(Q)}function te(Q,ae){ae.readingMore||(ae.readingMore=!0,l.nextTick(re,Q,ae))}function re(Q,ae){for(;!ae.reading&&!ae.ended&&(ae.length<ae.highWaterMark||ae.flowing&&ae.length===0);){var ie=ae.length;if(u("maybeReadMore read 0"),Q.read(0),ie===ae.length)break}ae.readingMore=!1}E.prototype._read=function(Q){_(this,new A("_read()"))},E.prototype.pipe=function(Q,ae){var ie=this,oe=this._readableState;switch(oe.pipesCount){case 0:oe.pipes=Q;break;case 1:oe.pipes=[oe.pipes,Q];break;default:oe.pipes.push(Q);break}oe.pipesCount+=1,u("pipe count=%d opts=%j",oe.pipesCount,ae);var fe=(!ae||ae.end!==!1)&&Q!==l.stdout&&Q!==l.stderr,ye=fe?me:Ie;oe.endEmitted?l.nextTick(ye):ie.once("end",ye),Q.on("unpipe",ce);function ce(We,et){u("onunpipe"),We===ie&&et&&et.hasUnpiped===!1&&(et.hasUnpiped=!0,Ae())}function me(){u("onend"),Q.end()}var xe=W(ie);Q.on("drain",xe);var ke=!1;function Ae(){u("cleanup"),Q.removeListener("close",Ge),Q.removeListener("finish",_e),Q.removeListener("drain",xe),Q.removeListener("error",He),Q.removeListener("unpipe",ce),ie.removeListener("end",me),ie.removeListener("end",Ie),ie.removeListener("data",Oe),ke=!0,oe.awaitDrain&&(!Q._writableState||Q._writableState.needDrain)&&xe()}ie.on("data",Oe);function Oe(We){u("ondata");var et=Q.write(We);u("dest.write",et),et===!1&&((oe.pipesCount===1&&oe.pipes===Q||oe.pipesCount>1&&K(oe.pipes,Q)!==-1)&&!ke&&(u("false write response, pause",oe.awaitDrain),oe.awaitDrain++),ie.pause())}function He(We){u("onerror",We),Ie(),Q.removeListener("error",He),p(Q,"error")===0&&_(Q,We)}P(Q,"error",He);function Ge(){Q.removeListener("finish",_e),Ie()}Q.once("close",Ge);function _e(){u("onfinish"),Q.removeListener("close",Ge),Ie()}Q.once("finish",_e);function Ie(){u("unpipe"),ie.unpipe(Q)}return Q.emit("pipe",ie),oe.flowing||(u("pipe resume"),ie.resume()),Q};function W(Q){return function(){var ie=Q._readableState;u("pipeOnDrain",ie.awaitDrain),ie.awaitDrain&&ie.awaitDrain--,ie.awaitDrain===0&&p(Q,"data")&&(ie.flowing=!0,G(Q))}}E.prototype.unpipe=function(Q){var ae=this._readableState,ie={hasUnpiped:!1};if(ae.pipesCount===0)return this;if(ae.pipesCount===1)return Q&&Q!==ae.pipes?this:(Q||(Q=ae.pipes),ae.pipes=null,ae.pipesCount=0,ae.flowing=!1,Q&&Q.emit("unpipe",this,ie),this);if(!Q){var oe=ae.pipes,fe=ae.pipesCount;ae.pipes=null,ae.pipesCount=0,ae.flowing=!1;for(var ye=0;ye<fe;ye++)oe[ye].emit("unpipe",this,{hasUnpiped:!1});return this}var ce=K(ae.pipes,Q);return ce===-1?this:(ae.pipes.splice(ce,1),ae.pipesCount-=1,ae.pipesCount===1&&(ae.pipes=ae.pipes[0]),Q.emit("unpipe",this,ie),this)},E.prototype.on=function(Q,ae){var ie=t.prototype.on.call(this,Q,ae),oe=this._readableState;return Q==="data"?(oe.readableListening=this.listenerCount("readable")>0,oe.flowing!==!1&&this.resume()):Q==="readable"&&!oe.endEmitted&&!oe.readableListening&&(oe.readableListening=oe.needReadable=!0,oe.flowing=!1,oe.emittedReadable=!1,u("on readable",oe.length,oe.reading),oe.length?j(this):oe.reading||l.nextTick(le,this)),ie},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(Q,ae){var ie=t.prototype.removeListener.call(this,Q,ae);return Q==="readable"&&l.nextTick(J,this),ie},E.prototype.removeAllListeners=function(Q){var ae=t.prototype.removeAllListeners.apply(this,arguments);return(Q==="readable"||Q===void 0)&&l.nextTick(J,this),ae};function J(Q){var ae=Q._readableState;ae.readableListening=Q.listenerCount("readable")>0,ae.resumeScheduled&&!ae.paused?ae.flowing=!0:Q.listenerCount("data")>0&&Q.resume()}function le(Q){u("readable nexttick read 0"),Q.read(0)}E.prototype.resume=function(){var Q=this._readableState;return Q.flowing||(u("resume"),Q.flowing=!Q.readableListening,ue(this,Q)),Q.paused=!1,this};function ue(Q,ae){ae.resumeScheduled||(ae.resumeScheduled=!0,l.nextTick(se,Q,ae))}function se(Q,ae){u("resume",ae.reading),ae.reading||Q.read(0),ae.resumeScheduled=!1,Q.emit("resume"),G(Q),ae.flowing&&!ae.reading&&Q.read(0)}E.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function G(Q){var ae=Q._readableState;for(u("flow",ae.flowing);ae.flowing&&Q.read()!==null;);}E.prototype.wrap=function(Q){var ae=this,ie=this._readableState,oe=!1;Q.on("end",function(){if(u("wrapped end"),ie.decoder&&!ie.ended){var ce=ie.decoder.end();ce&&ce.length&&ae.push(ce)}ae.push(null)}),Q.on("data",function(ce){if(u("wrapped data"),ie.decoder&&(ce=ie.decoder.write(ce)),!(ie.objectMode&&ce==null)&&!(!ie.objectMode&&(!ce||!ce.length))){var me=ae.push(ce);me||(oe=!0,Q.pause())}});for(var fe in Q)this[fe]===void 0&&typeof Q[fe]=="function"&&(this[fe]=function(me){return function(){return Q[me].apply(Q,arguments)}}(fe));for(var ye=0;ye<v.length;ye++)Q.on(v[ye],this.emit.bind(this,v[ye]));return this._read=function(ce){u("wrapped _read",ce),oe&&(oe=!1,Q.resume())},this},typeof Symbol=="function"&&(E.prototype[Symbol.asyncIterator]=function(){return w===void 0&&(w=e("./internal/streams/async_iterator")),w(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ae){this._readableState&&(this._readableState.flowing=ae)}}),E._fromList=Y,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Y(Q,ae){if(ae.length===0)return null;var ie;return ae.objectMode?ie=ae.buffer.shift():!Q||Q>=ae.length?(ae.decoder?ie=ae.buffer.join(""):ae.buffer.length===1?ie=ae.buffer.first():ie=ae.buffer.concat(ae.length),ae.buffer.clear()):ie=ae.buffer.consume(Q,ae.decoder),ie}function ee(Q){var ae=Q._readableState;u("endReadable",ae.endEmitted),ae.endEmitted||(ae.ended=!0,l.nextTick($,ae,Q))}function $(Q,ae){if(u("endReadableNT",Q.endEmitted,Q.length),!Q.endEmitted&&Q.length===0&&(Q.endEmitted=!0,ae.readable=!1,ae.emit("end"),Q.autoDestroy)){var ie=ae._writableState;(!ie||ie.autoDestroy&&ie.finished)&&ae.destroy()}}typeof Symbol=="function"&&(E.from=function(Q,ae){return T===void 0&&(T=e("./internal/streams/from")),T(E,Q,ae)});function K(Q,ae){for(var ie=0,oe=Q.length;ie<oe;ie++)if(Q[ie]===ae)return ie;return-1}}).call(this)}).call(this,e("_process"),typeof lo!="undefined"?lo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/async_iterator":292,"./internal/streams/buffer_list":293,"./internal/streams/destroy":294,"./internal/streams/from":296,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,events:84,inherits:231,"string_decoder/":300,util:83}],290:[function(e,k,z){k.exports=i;var l=e("../errors").codes,o=l.ERR_METHOD_NOT_IMPLEMENTED,c=l.ERR_MULTIPLE_CALLBACK,p=l.ERR_TRANSFORM_ALREADY_TRANSFORMING,t=l.ERR_TRANSFORM_WITH_LENGTH_0,n=e("./_stream_duplex");e("inherits")(i,n);function a(u,s){var h=this._transformState;h.transforming=!1;var d=h.writecb;if(d===null)return this.emit("error",new c);h.writechunk=null,h.writecb=null,s!=null&&this.push(s),d(u);var y=this._readableState;y.reading=!1,(y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}function i(u){if(!(this instanceof i))return new i(u);n.call(this,u),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",r)}function r(){var u=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(s,h){f(u,s,h)}):f(this,null,null)}i.prototype.push=function(u,s){return this._transformState.needTransform=!1,n.prototype.push.call(this,u,s)},i.prototype._transform=function(u,s,h){h(new o("_transform()"))},i.prototype._write=function(u,s,h){var d=this._transformState;if(d.writecb=h,d.writechunk=u,d.writeencoding=s,!d.transforming){var y=this._readableState;(d.needTransform||y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}},i.prototype._read=function(u){var s=this._transformState;s.writechunk!==null&&!s.transforming?(s.transforming=!0,this._transform(s.writechunk,s.writeencoding,s.afterTransform)):s.needTransform=!0},i.prototype._destroy=function(u,s){n.prototype._destroy.call(this,u,function(h){s(h)})};function f(u,s,h){if(s)return u.emit("error",s);if(h!=null&&u.push(h),u._writableState.length)throw new t;if(u._transformState.transforming)throw new p;return u.push(null)}},{"../errors":286,"./_stream_duplex":287,inherits:231}],291:[function(e,k,z){(function(l,o){(function(){k.exports=M;function c(G){var Y=this;this.next=null,this.entry=null,this.finish=function(){se(Y,G)}}var p;M.WritableState=v;var t={deprecate:e("util-deprecate")},n=e("./internal/streams/stream"),a=e("buffer").Buffer,i=o.Uint8Array||function(){};function r(G){return a.from(G)}function f(G){return a.isBuffer(G)||G instanceof i}var u=e("./internal/streams/destroy"),s=e("./internal/streams/state"),h=s.getHighWaterMark,d=e("../errors").codes,y=d.ERR_INVALID_ARG_TYPE,m=d.ERR_METHOD_NOT_IMPLEMENTED,g=d.ERR_MULTIPLE_CALLBACK,x=d.ERR_STREAM_CANNOT_PIPE,A=d.ERR_STREAM_DESTROYED,b=d.ERR_STREAM_NULL_VALUES,S=d.ERR_STREAM_WRITE_AFTER_END,w=d.ERR_UNKNOWN_ENCODING,T=u.errorOrDestroy;e("inherits")(M,n);function _(){}function v(G,Y,ee){p=p||e("./_stream_duplex"),G=G||{},typeof ee!="boolean"&&(ee=Y instanceof p),this.objectMode=!!G.objectMode,ee&&(this.objectMode=this.objectMode||!!G.writableObjectMode),this.highWaterMark=h(this,G,"writableHighWaterMark",ee),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var $=G.decodeStrings===!1;this.decodeStrings=!$,this.defaultEncoding=G.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(K){U(Y,K)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=G.emitClose!==!1,this.autoDestroy=!!G.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new c(this)}v.prototype.getBuffer=function(){for(var Y=this.bufferedRequest,ee=[];Y;)ee.push(Y),Y=Y.next;return ee},function(){try{Object.defineProperty(v.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var P;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(P=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(Y){return P.call(this,Y)?!0:this!==M?!1:Y&&Y._writableState instanceof v}})):P=function(Y){return Y instanceof this};function M(G){p=p||e("./_stream_duplex");var Y=this instanceof p;if(!Y&&!P.call(M,this))return new M(G);this._writableState=new v(G,this,Y),this.writable=!0,G&&(typeof G.write=="function"&&(this._write=G.write),typeof G.writev=="function"&&(this._writev=G.writev),typeof G.destroy=="function"&&(this._destroy=G.destroy),typeof G.final=="function"&&(this._final=G.final)),n.call(this)}M.prototype.pipe=function(){T(this,new x)};function E(G,Y){var ee=new S;T(G,ee),l.nextTick(Y,ee)}function D(G,Y,ee,$){var K;return ee===null?K=new b:typeof ee!="string"&&!Y.objectMode&&(K=new y("chunk",["string","Buffer"],ee)),K?(T(G,K),l.nextTick($,K),!1):!0}M.prototype.write=function(G,Y,ee){var $=this._writableState,K=!1,Q=!$.objectMode&&f(G);return Q&&!a.isBuffer(G)&&(G=r(G)),typeof Y=="function"&&(ee=Y,Y=null),Q?Y="buffer":Y||(Y=$.defaultEncoding),typeof ee!="function"&&(ee=_),$.ending?E(this,ee):(Q||D(this,$,G,ee))&&($.pendingcb++,K=O(this,$,Q,G,Y,ee)),K},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var G=this._writableState;G.corked&&(G.corked--,!G.writing&&!G.corked&&!G.bufferProcessing&&G.bufferedRequest&&te(this,G))},M.prototype.setDefaultEncoding=function(Y){if(typeof Y=="string"&&(Y=Y.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Y+"").toLowerCase())>-1))throw new w(Y);return this._writableState.defaultEncoding=Y,this},Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function N(G,Y,ee){return!G.objectMode&&G.decodeStrings!==!1&&typeof Y=="string"&&(Y=a.from(Y,ee)),Y}Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function O(G,Y,ee,$,K,Q){if(!ee){var ae=N(Y,$,K);$!==ae&&(ee=!0,K="buffer",$=ae)}var ie=Y.objectMode?1:$.length;Y.length+=ie;var oe=Y.length<Y.highWaterMark;if(oe||(Y.needDrain=!0),Y.writing||Y.corked){var fe=Y.lastBufferedRequest;Y.lastBufferedRequest={chunk:$,encoding:K,isBuf:ee,callback:Q,next:null},fe?fe.next=Y.lastBufferedRequest:Y.bufferedRequest=Y.lastBufferedRequest,Y.bufferedRequestCount+=1}else I(G,Y,!1,ie,$,K,Q);return oe}function I(G,Y,ee,$,K,Q,ae){Y.writelen=$,Y.writecb=ae,Y.writing=!0,Y.sync=!0,Y.destroyed?Y.onwrite(new A("write")):ee?G._writev(K,Y.onwrite):G._write(K,Q,Y.onwrite),Y.sync=!1}function F(G,Y,ee,$,K){--Y.pendingcb,ee?(l.nextTick(K,$),l.nextTick(le,G,Y),G._writableState.errorEmitted=!0,T(G,$)):(K($),G._writableState.errorEmitted=!0,T(G,$),le(G,Y))}function V(G){G.writing=!1,G.writecb=null,G.length-=G.writelen,G.writelen=0}function U(G,Y){var ee=G._writableState,$=ee.sync,K=ee.writecb;if(typeof K!="function")throw new g;if(V(ee),Y)F(G,ee,$,Y,K);else{var Q=re(ee)||G.destroyed;!Q&&!ee.corked&&!ee.bufferProcessing&&ee.bufferedRequest&&te(G,ee),$?l.nextTick(j,G,ee,Q,K):j(G,ee,Q,K)}}function j(G,Y,ee,$){ee||Z(G,Y),Y.pendingcb--,$(),le(G,Y)}function Z(G,Y){Y.length===0&&Y.needDrain&&(Y.needDrain=!1,G.emit("drain"))}function te(G,Y){Y.bufferProcessing=!0;var ee=Y.bufferedRequest;if(G._writev&&ee&&ee.next){var $=Y.bufferedRequestCount,K=new Array($),Q=Y.corkedRequestsFree;Q.entry=ee;for(var ae=0,ie=!0;ee;)K[ae]=ee,ee.isBuf||(ie=!1),ee=ee.next,ae+=1;K.allBuffers=ie,I(G,Y,!0,Y.length,K,"",Q.finish),Y.pendingcb++,Y.lastBufferedRequest=null,Q.next?(Y.corkedRequestsFree=Q.next,Q.next=null):Y.corkedRequestsFree=new c(Y),Y.bufferedRequestCount=0}else{for(;ee;){var oe=ee.chunk,fe=ee.encoding,ye=ee.callback,ce=Y.objectMode?1:oe.length;if(I(G,Y,!1,ce,oe,fe,ye),ee=ee.next,Y.bufferedRequestCount--,Y.writing)break}ee===null&&(Y.lastBufferedRequest=null)}Y.bufferedRequest=ee,Y.bufferProcessing=!1}M.prototype._write=function(G,Y,ee){ee(new m("_write()"))},M.prototype._writev=null,M.prototype.end=function(G,Y,ee){var $=this._writableState;return typeof G=="function"?(ee=G,G=null,Y=null):typeof Y=="function"&&(ee=Y,Y=null),G!=null&&this.write(G,Y),$.corked&&($.corked=1,this.uncork()),$.ending||ue(this,$,ee),this},Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function re(G){return G.ending&&G.length===0&&G.bufferedRequest===null&&!G.finished&&!G.writing}function W(G,Y){G._final(function(ee){Y.pendingcb--,ee&&T(G,ee),Y.prefinished=!0,G.emit("prefinish"),le(G,Y)})}function J(G,Y){!Y.prefinished&&!Y.finalCalled&&(typeof G._final=="function"&&!Y.destroyed?(Y.pendingcb++,Y.finalCalled=!0,l.nextTick(W,G,Y)):(Y.prefinished=!0,G.emit("prefinish")))}function le(G,Y){var ee=re(Y);if(ee&&(J(G,Y),Y.pendingcb===0&&(Y.finished=!0,G.emit("finish"),Y.autoDestroy))){var $=G._readableState;(!$||$.autoDestroy&&$.endEmitted)&&G.destroy()}return ee}function ue(G,Y,ee){Y.ending=!0,le(G,Y),ee&&(Y.finished?l.nextTick(ee):G.once("finish",ee)),Y.ended=!0,G.writable=!1}function se(G,Y,ee){var $=G.entry;for(G.entry=null;$;){var K=$.callback;Y.pendingcb--,K(ee),$=$.next}Y.corkedRequestsFree.next=G}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(Y){!this._writableState||(this._writableState.destroyed=Y)}}),M.prototype.destroy=u.destroy,M.prototype._undestroy=u.undestroy,M.prototype._destroy=function(G,Y){Y(G)}}).call(this)}).call(this,e("_process"),typeof lo!="undefined"?lo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/destroy":294,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,inherits:231,"util-deprecate":330}],292:[function(e,k,z){(function(l){(function(){var o;function c(A,b,S){return b in A?Object.defineProperty(A,b,{value:S,enumerable:!0,configurable:!0,writable:!0}):A[b]=S,A}var p=e("./end-of-stream"),t=Symbol("lastResolve"),n=Symbol("lastReject"),a=Symbol("error"),i=Symbol("ended"),r=Symbol("lastPromise"),f=Symbol("handlePromise"),u=Symbol("stream");function s(A,b){return{value:A,done:b}}function h(A){var b=A[t];if(b!==null){var S=A[u].read();S!==null&&(A[r]=null,A[t]=null,A[n]=null,b(s(S,!1)))}}function d(A){l.nextTick(h,A)}function y(A,b){return function(S,w){A.then(function(){if(b[i]){S(s(void 0,!0));return}b[f](S,w)},w)}}var m=Object.getPrototypeOf(function(){}),g=Object.setPrototypeOf((o={get stream(){return this[u]},next:function(){var b=this,S=this[a];if(S!==null)return Promise.reject(S);if(this[i])return Promise.resolve(s(void 0,!0));if(this[u].destroyed)return new Promise(function(v,P){l.nextTick(function(){b[a]?P(b[a]):v(s(void 0,!0))})});var w=this[r],T;if(w)T=new Promise(y(w,this));else{var _=this[u].read();if(_!==null)return Promise.resolve(s(_,!1));T=new Promise(this[f])}return this[r]=T,T}},c(o,Symbol.asyncIterator,function(){return this}),c(o,"return",function(){var b=this;return new Promise(function(S,w){b[u].destroy(null,function(T){if(T){w(T);return}S(s(void 0,!0))})})}),o),m),x=function(b){var S,w=Object.create(g,(S={},c(S,u,{value:b,writable:!0}),c(S,t,{value:null,writable:!0}),c(S,n,{value:null,writable:!0}),c(S,a,{value:null,writable:!0}),c(S,i,{value:b._readableState.endEmitted,writable:!0}),c(S,f,{value:function(_,v){var P=w[u].read();P?(w[r]=null,w[t]=null,w[n]=null,_(s(P,!1))):(w[t]=_,w[n]=v)},writable:!0}),S));return w[r]=null,p(b,function(T){if(T&&T.code!=="ERR_STREAM_PREMATURE_CLOSE"){var _=w[n];_!==null&&(w[r]=null,w[t]=null,w[n]=null,_(T)),w[a]=T;return}var v=w[t];v!==null&&(w[r]=null,w[t]=null,w[n]=null,v(s(void 0,!0))),w[i]=!0}),b.on("readable",d.bind(null,w)),w};k.exports=x}).call(this)}).call(this,e("_process"))},{"./end-of-stream":295,_process:277}],293:[function(e,k,z){function l(h,d){var y=Object.keys(h);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(h);d&&(m=m.filter(function(g){return Object.getOwnPropertyDescriptor(h,g).enumerable})),y.push.apply(y,m)}return y}function o(h){for(var d=1;d<arguments.length;d++){var y=arguments[d]!=null?arguments[d]:{};d%2?l(Object(y),!0).forEach(function(m){c(h,m,y[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(y)):l(Object(y)).forEach(function(m){Object.defineProperty(h,m,Object.getOwnPropertyDescriptor(y,m))})}return h}function c(h,d,y){return d in h?Object.defineProperty(h,d,{value:y,enumerable:!0,configurable:!0,writable:!0}):h[d]=y,h}function p(h,d){if(!(h instanceof d))throw new TypeError("Cannot call a class as a function")}function t(h,d){for(var y=0;y<d.length;y++){var m=d[y];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(h,m.key,m)}}function n(h,d,y){return d&&t(h.prototype,d),y&&t(h,y),h}var a=e("buffer"),i=a.Buffer,r=e("util"),f=r.inspect,u=f&&f.custom||"inspect";function s(h,d,y){i.prototype.copy.call(h,d,y)}k.exports=function(){function h(){p(this,h),this.head=null,this.tail=null,this.length=0}return n(h,[{key:"push",value:function(y){var m={data:y,next:null};this.length>0?this.tail.next=m:this.head=m,this.tail=m,++this.length}},{key:"unshift",value:function(y){var m={data:y,next:this.head};this.length===0&&(this.tail=m),this.head=m,++this.length}},{key:"shift",value:function(){if(this.length!==0){var y=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,y}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(y){if(this.length===0)return"";for(var m=this.head,g=""+m.data;m=m.next;)g+=y+m.data;return g}},{key:"concat",value:function(y){if(this.length===0)return i.alloc(0);for(var m=i.allocUnsafe(y>>>0),g=this.head,x=0;g;)s(g.data,m,x),x+=g.data.length,g=g.next;return m}},{key:"consume",value:function(y,m){var g;return y<this.head.data.length?(g=this.head.data.slice(0,y),this.head.data=this.head.data.slice(y)):y===this.head.data.length?g=this.shift():g=m?this._getString(y):this._getBuffer(y),g}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(y){var m=this.head,g=1,x=m.data;for(y-=x.length;m=m.next;){var A=m.data,b=y>A.length?A.length:y;if(b===A.length?x+=A:x+=A.slice(0,y),y-=b,y===0){b===A.length?(++g,m.next?this.head=m.next:this.head=this.tail=null):(this.head=m,m.data=A.slice(b));break}++g}return this.length-=g,x}},{key:"_getBuffer",value:function(y){var m=i.allocUnsafe(y),g=this.head,x=1;for(g.data.copy(m),y-=g.data.length;g=g.next;){var A=g.data,b=y>A.length?A.length:y;if(A.copy(m,m.length-y,0,b),y-=b,y===0){b===A.length?(++x,g.next?this.head=g.next:this.head=this.tail=null):(this.head=g,g.data=A.slice(b));break}++x}return this.length-=x,m}},{key:u,value:function(y,m){return f(this,o({},m,{depth:0,customInspect:!1}))}}]),h}()},{buffer:85,util:83}],294:[function(e,k,z){(function(l){(function(){function o(i,r){var f=this,u=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return u||s?(r?r(i):i&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,l.nextTick(n,this,i)):l.nextTick(n,this,i)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(i||null,function(h){!r&&h?f._writableState?f._writableState.errorEmitted?l.nextTick(p,f):(f._writableState.errorEmitted=!0,l.nextTick(c,f,h)):l.nextTick(c,f,h):r?(l.nextTick(p,f),r(h)):l.nextTick(p,f)}),this)}function c(i,r){n(i,r),p(i)}function p(i){i._writableState&&!i._writableState.emitClose||i._readableState&&!i._readableState.emitClose||i.emit("close")}function t(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function n(i,r){i.emit("error",r)}function a(i,r){var f=i._readableState,u=i._writableState;f&&f.autoDestroy||u&&u.autoDestroy?i.destroy(r):i.emit("error",r)}k.exports={destroy:o,undestroy:t,errorOrDestroy:a}}).call(this)}).call(this,e("_process"))},{_process:277}],295:[function(e,k,z){var l=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function o(n){var a=!1;return function(){if(!a){a=!0;for(var i=arguments.length,r=new Array(i),f=0;f<i;f++)r[f]=arguments[f];n.apply(this,r)}}}function c(){}function p(n){return n.setHeader&&typeof n.abort=="function"}function t(n,a,i){if(typeof a=="function")return t(n,null,a);a||(a={}),i=o(i||c);var r=a.readable||a.readable!==!1&&n.readable,f=a.writable||a.writable!==!1&&n.writable,u=function(){n.writable||h()},s=n._writableState&&n._writableState.finished,h=function(){f=!1,s=!0,r||i.call(n)},d=n._readableState&&n._readableState.endEmitted,y=function(){r=!1,d=!0,f||i.call(n)},m=function(b){i.call(n,b)},g=function(){var b;if(r&&!d)return(!n._readableState||!n._readableState.ended)&&(b=new l),i.call(n,b);if(f&&!s)return(!n._writableState||!n._writableState.ended)&&(b=new l),i.call(n,b)},x=function(){n.req.on("finish",h)};return p(n)?(n.on("complete",h),n.on("abort",g),n.req?x():n.on("request",x)):f&&!n._writableState&&(n.on("end",u),n.on("close",u)),n.on("end",y),n.on("finish",h),a.error!==!1&&n.on("error",m),n.on("close",g),function(){n.removeListener("complete",h),n.removeListener("abort",g),n.removeListener("request",x),n.req&&n.req.removeListener("finish",h),n.removeListener("end",u),n.removeListener("close",u),n.removeListener("finish",h),n.removeListener("end",y),n.removeListener("error",m),n.removeListener("close",g)}}k.exports=t},{"../../../errors":286}],296:[function(e,k,z){k.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],297:[function(e,k,z){var l;function o(h){var d=!1;return function(){d||(d=!0,h.apply(void 0,arguments))}}var c=e("../../../errors").codes,p=c.ERR_MISSING_ARGS,t=c.ERR_STREAM_DESTROYED;function n(h){if(h)throw h}function a(h){return h.setHeader&&typeof h.abort=="function"}function i(h,d,y,m){m=o(m);var g=!1;h.on("close",function(){g=!0}),l===void 0&&(l=e("./end-of-stream")),l(h,{readable:d,writable:y},function(A){if(A)return m(A);g=!0,m()});var x=!1;return function(A){if(!g&&!x){if(x=!0,a(h))return h.abort();if(typeof h.destroy=="function")return h.destroy();m(A||new t("pipe"))}}}function r(h){h()}function f(h,d){return h.pipe(d)}function u(h){return!h.length||typeof h[h.length-1]!="function"?n:h.pop()}function s(){for(var h=arguments.length,d=new Array(h),y=0;y<h;y++)d[y]=arguments[y];var m=u(d);if(Array.isArray(d[0])&&(d=d[0]),d.length<2)throw new p("streams");var g,x=d.map(function(A,b){var S=b<d.length-1,w=b>0;return i(A,S,w,function(T){g||(g=T),T&&x.forEach(r),!S&&(x.forEach(r),m(g))})});return d.reduce(f)}k.exports=s},{"../../../errors":286,"./end-of-stream":295}],298:[function(e,k,z){var l=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;function o(p,t,n){return p.highWaterMark!=null?p.highWaterMark:t?p[n]:null}function c(p,t,n,a){var i=o(t,a,n);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var r=a?n:"highWaterMark";throw new l(r,i)}return Math.floor(i)}return p.objectMode?16:16*1024}k.exports={getHighWaterMark:c}},{"../../../errors":286}],299:[function(e,k,z){k.exports=e("events").EventEmitter},{events:84}],300:[function(e,k,z){var l=e("safe-buffer").Buffer,o=l.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function c(x){if(!x)return"utf8";for(var A;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(A)return;x=(""+x).toLowerCase(),A=!0}}function p(x){var A=c(x);if(typeof A!="string"&&(l.isEncoding===o||!o(x)))throw new Error("Unknown encoding: "+x);return A||x}z.StringDecoder=t;function t(x){this.encoding=p(x);var A;switch(this.encoding){case"utf16le":this.text=s,this.end=h,A=4;break;case"utf8":this.fillLast=r,A=4;break;case"base64":this.text=d,this.end=y,A=3;break;default:this.write=m,this.end=g;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=l.allocUnsafe(A)}t.prototype.write=function(x){if(x.length===0)return"";var A,b;if(this.lastNeed){if(A=this.fillLast(x),A===void 0)return"";b=this.lastNeed,this.lastNeed=0}else b=0;return b<x.length?A?A+this.text(x,b):this.text(x,b):A||""},t.prototype.end=u,t.prototype.text=f,t.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function n(x){return x<=127?0:x>>5==6?2:x>>4==14?3:x>>3==30?4:x>>6==2?-1:-2}function a(x,A,b){var S=A.length-1;if(S<b)return 0;var w=n(A[S]);return w>=0?(w>0&&(x.lastNeed=w-1),w):--S<b||w===-2?0:(w=n(A[S]),w>=0?(w>0&&(x.lastNeed=w-2),w):--S<b||w===-2?0:(w=n(A[S]),w>=0?(w>0&&(w===2?w=0:x.lastNeed=w-3),w):0))}function i(x,A,b){if((A[0]&192)!=128)return x.lastNeed=0,"\uFFFD";if(x.lastNeed>1&&A.length>1){if((A[1]&192)!=128)return x.lastNeed=1,"\uFFFD";if(x.lastNeed>2&&A.length>2&&(A[2]&192)!=128)return x.lastNeed=2,"\uFFFD"}}function r(x){var A=this.lastTotal-this.lastNeed,b=i(this,x);if(b!==void 0)return b;if(this.lastNeed<=x.length)return x.copy(this.lastChar,A,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,A,0,x.length),this.lastNeed-=x.length}function f(x,A){var b=a(this,x,A);if(!this.lastNeed)return x.toString("utf8",A);this.lastTotal=b;var S=x.length-(b-this.lastNeed);return x.copy(this.lastChar,0,S),x.toString("utf8",A,S)}function u(x){var A=x&&x.length?this.write(x):"";return this.lastNeed?A+"\uFFFD":A}function s(x,A){if((x.length-A)%2==0){var b=x.toString("utf16le",A);if(b){var S=b.charCodeAt(b.length-1);if(S>=55296&&S<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],b.slice(0,-1)}return b}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",A,x.length-1)}function h(x){var A=x&&x.length?this.write(x):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return A+this.lastChar.toString("utf16le",0,b)}return A}function d(x,A){var b=(x.length-A)%3;return b===0?x.toString("base64",A):(this.lastNeed=3-b,this.lastTotal=3,b===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",A,x.length-b))}function y(x){var A=x&&x.length?this.write(x):"";return this.lastNeed?A+this.lastChar.toString("base64",0,3-this.lastNeed):A}function m(x){return x.toString(this.encoding)}function g(x){return x&&x.length?this.write(x):""}},{"safe-buffer":284}],301:[function(e,k,z){(function(l,o){(function(){var c=e("assert"),p=e("debug")("stream-parser");k.exports=r;var t=-1,n=0,a=1,i=2;function r(b){var S=b&&typeof b._transform=="function",w=b&&typeof b._write=="function";if(!S&&!w)throw new Error("must pass a Writable or Transform stream in");p("extending Parser into stream"),b._bytes=u,b._skipBytes=s,S&&(b._passthrough=h),S?b._transform=y:b._write=d}function f(b){p("initializing parser stream"),b._parserBytesLeft=0,b._parserBuffers=[],b._parserBuffered=0,b._parserState=t,b._parserCallback=null,typeof b.push=="function"&&(b._parserOutput=b.push.bind(b)),b._parserInit=!0}function u(b,S){c(!this._parserCallback,'there is already a "callback" set!'),c(isFinite(b)&&b>0,'can only buffer a finite number of bytes > 0, got "'+b+'"'),this._parserInit||f(this),p("buffering %o bytes",b),this._parserBytesLeft=b,this._parserCallback=S,this._parserState=n}function s(b,S){c(!this._parserCallback,'there is already a "callback" set!'),c(b>0,'can only skip > 0 bytes, got "'+b+'"'),this._parserInit||f(this),p("skipping %o bytes",b),this._parserBytesLeft=b,this._parserCallback=S,this._parserState=a}function h(b,S){c(!this._parserCallback,'There is already a "callback" set!'),c(b>0,'can only pass through > 0 bytes, got "'+b+'"'),this._parserInit||f(this),p("passing through %o bytes",b),this._parserBytesLeft=b,this._parserCallback=S,this._parserState=i}function d(b,S,w){this._parserInit||f(this),p("write(%o bytes)",b.length),typeof S=="function"&&(w=S),x(this,b,null,w)}function y(b,S,w){this._parserInit||f(this),p("transform(%o bytes)",b.length),typeof S!="function"&&(S=this._parserOutput),x(this,b,S,w)}function m(b,S,w,T){return b._parserBytesLeft<=0?T(new Error("got data but not currently parsing anything")):S.length<=b._parserBytesLeft?function(){return g(b,S,w,T)}:function(){var _=S.slice(0,b._parserBytesLeft);return g(b,_,w,function(v){if(v)return T(v);if(S.length>_.length)return function(){return m(b,S.slice(_.length),w,T)}})}}function g(b,S,w,T){if(b._parserBytesLeft-=S.length,p("%o bytes left for stream piece",b._parserBytesLeft),b._parserState===n?(b._parserBuffers.push(S),b._parserBuffered+=S.length):b._parserState===i&&w(S),b._parserBytesLeft===0){var _=b._parserCallback;if(_&&b._parserState===n&&b._parserBuffers.length>1&&(S=o.concat(b._parserBuffers,b._parserBuffered)),b._parserState!==n&&(S=null),b._parserCallback=null,b._parserBuffered=0,b._parserState=t,b._parserBuffers.splice(0),_){var v=[];S&&v.push(S),w&&v.push(w);var P=_.length>v.length;P&&v.push(A(T));var M=_.apply(b,v);if(!P||T===M)return T}}else return T}var x=A(m);function A(b){return function(){for(var S=b.apply(this,arguments);typeof S=="function";)S=S();return S}}}).call(this)}).call(this,e("_process"),e("buffer").Buffer)},{_process:277,assert:75,buffer:85,debug:302}],302:[function(e,k,z){(function(l){(function(){z=k.exports=e("./debug"),z.log=p,z.formatArgs=c,z.save=t,z.load=n,z.useColors=o,z.storage=typeof chrome!="undefined"&&typeof chrome.storage!="undefined"?chrome.storage.local:a(),z.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function o(){return typeof window!="undefined"&&window.process&&window.process.type==="renderer"?!0:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}z.formatters.j=function(i){try{return JSON.stringify(i)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}};function c(i){var r=this.useColors;if(i[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+i[0]+(r?"%c ":" ")+"+"+z.humanize(this.diff),!!r){var f="color: "+this.color;i.splice(1,0,f,"color: inherit");var u=0,s=0;i[0].replace(/%[a-zA-Z%]/g,function(h){h!=="%%"&&(u++,h==="%c"&&(s=u))}),i.splice(s,0,f)}}function p(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function t(i){try{i==null?z.storage.removeItem("debug"):z.storage.debug=i}catch{}}function n(){var i;try{i=z.storage.debug}catch{}return!i&&typeof l!="undefined"&&"env"in l&&(i={}.DEBUG),i}z.enable(n());function a(){try{return window.localStorage}catch{}}}).call(this)}).call(this,e("_process"))},{"./debug":303,_process:277}],303:[function(e,k,z){z=k.exports=c.debug=c.default=c,z.coerce=a,z.disable=t,z.enable=p,z.enabled=n,z.humanize=e("ms"),z.names=[],z.skips=[],z.formatters={};var l;function o(i){var r=0,f;for(f in i)r=(r<<5)-r+i.charCodeAt(f),r|=0;return z.colors[Math.abs(r)%z.colors.length]}function c(i){function r(){if(!!r.enabled){var f=r,u=+new Date,s=u-(l||u);f.diff=s,f.prev=l,f.curr=u,l=u;for(var h=new Array(arguments.length),d=0;d<h.length;d++)h[d]=arguments[d];h[0]=z.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");var y=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,function(g,x){if(g==="%%")return g;y++;var A=z.formatters[x];if(typeof A=="function"){var b=h[y];g=A.call(f,b),h.splice(y,1),y--}return g}),z.formatArgs.call(f,h);var m=r.log||z.log||console.log.bind(console);m.apply(f,h)}}return r.namespace=i,r.enabled=z.enabled(i),r.useColors=z.useColors(),r.color=o(i),typeof z.init=="function"&&z.init(r),r}function p(i){z.save(i),z.names=[],z.skips=[];for(var r=(typeof i=="string"?i:"").split(/[\s,]+/),f=r.length,u=0;u<f;u++)!r[u]||(i=r[u].replace(/\*/g,".*?"),i[0]==="-"?z.skips.push(new RegExp("^"+i.substr(1)+"$")):z.names.push(new RegExp("^"+i+"$")))}function t(){z.enable("")}function n(i){var r,f;for(r=0,f=z.skips.length;r<f;r++)if(z.skips[r].test(i))return!1;for(r=0,f=z.names.length;r<f;r++)if(z.names[r].test(i))return!0;return!1}function a(i){return i instanceof Error?i.stack||i.message:i}},{ms:304}],304:[function(e,k,z){var l=1e3,o=l*60,c=o*60,p=c*24,t=p*365.25;k.exports=function(f,u){u=u||{};var s=typeof f;if(s==="string"&&f.length>0)return n(f);if(s==="number"&&isNaN(f)===!1)return u.long?i(f):a(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function n(f){if(f=String(f),!(f.length>100)){var u=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(f);if(!!u){var s=parseFloat(u[1]),h=(u[2]||"ms").toLowerCase();switch(h){case"years":case"year":case"yrs":case"yr":case"y":return s*t;case"days":case"day":case"d":return s*p;case"hours":case"hour":case"hrs":case"hr":case"h":return s*c;case"minutes":case"minute":case"mins":case"min":case"m":return s*o;case"seconds":case"second":case"secs":case"sec":case"s":return s*l;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}function a(f){return f>=p?Math.round(f/p)+"d":f>=c?Math.round(f/c)+"h":f>=o?Math.round(f/o)+"m":f>=l?Math.round(f/l)+"s":f+"ms"}function i(f){return r(f,p,"day")||r(f,c,"hour")||r(f,o,"minute")||r(f,l,"second")||f+" ms"}function r(f,u,s){if(!(f<u))return f<u*1.5?Math.floor(f/u)+" "+s:Math.ceil(f/u)+" "+s+"s"}},{}],305:[function(e,k,z){var l=e("parenthesis");k.exports=function(c,p,t){if(c==null)throw Error("First argument should be a string");if(p==null)throw Error("Separator should be a string or a RegExp");t?(typeof t=="string"||Array.isArray(t))&&(t={ignore:t}):t={},t.escape==null&&(t.escape=!0),t.ignore==null?t.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof t.ignore=="string"&&(t.ignore=[t.ignore]),t.ignore=t.ignore.map(function(h){return h.length===1&&(h=h+h),h}));var n=l.parse(c,{flat:!0,brackets:t.ignore}),a=n[0],i=a.split(p);if(t.escape){for(var r=[],f=0;f<i.length;f++){var u=i[f],s=i[f+1];u[u.length-1]==="\\"&&u[u.length-2]!=="\\"?(r.push(u+p+s),f++):r.push(u)}i=r}for(var f=0;f<i.length;f++)n[0]=i[f],i[f]=l.stringify(n,{flat:!0});return i}},{parenthesis:248}],306:[function(e,k,z){k.exports=l;function l(o){for(var c=o.length,p=new Array(c),t=new Array(c),n=new Array(c),a=new Array(c),i=new Array(c),r=new Array(c),f=0;f<c;++f)p[f]=-1,t[f]=0,n[f]=!1,a[f]=0,i[f]=-1,r[f]=[];var u=0,s=[],h=[];function d(x){var A=[x],b=[x];for(p[x]=t[x]=u,n[x]=!0,u+=1;b.length>0;){x=b[b.length-1];var S=o[x];if(a[x]<S.length){for(var w=a[x];w<S.length;++w){var T=S[w];if(p[T]<0){p[T]=t[T]=u,n[T]=!0,u+=1,A.push(T),b.push(T);break}else n[T]&&(t[x]=Math.min(t[x],t[T])|0);i[T]>=0&&r[x].push(i[T])}a[x]=w}else{if(t[x]===p[x]){for(var _=[],v=[],P=0,w=A.length-1;w>=0;--w){var M=A[w];if(n[M]=!1,_.push(M),v.push(r[M]),P+=r[M].length,i[M]=s.length,M===x){A.length=w;break}}s.push(_);for(var E=new Array(P),w=0;w<v.length;w++)for(var D=0;D<v[w].length;D++)E[--P]=v[w][D];h.push(E)}b.pop()}}}for(var f=0;f<c;++f)p[f]<0&&d(f);for(var y,f=0;f<h.length;f++){var m=h[f];if(m.length!==0){m.sort(function(A,b){return A-b}),y=[m[0]];for(var g=1;g<m.length;g++)m[g]!==m[g-1]&&y.push(m[g]);h[f]=y}}return{components:s,adjacencyList:h}}},{}],307:[function(e,k,z){Object.defineProperty(z,"__esModule",{value:!0});var l=function(){function i(r,f){var u=[],s=!0,h=!1,d=void 0;try{for(var y=r[Symbol.iterator](),m;!(s=(m=y.next()).done)&&(u.push(m.value),!(f&&u.length===f));s=!0);}catch(g){h=!0,d=g}finally{try{!s&&y.return&&y.return()}finally{if(h)throw d}}return u}return function(r,f){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return i(r,f);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=Math.PI*2,c=function(r,f,u,s,h,d,y){var m=r.x,g=r.y;m*=f,g*=u;var x=s*m-h*g,A=h*m+s*g;return{x:x+d,y:A+y}},p=function(r,f){var u=f===1.5707963267948966?.551915024494:f===-1.5707963267948966?-.551915024494:4/3*Math.tan(f/4),s=Math.cos(r),h=Math.sin(r),d=Math.cos(r+f),y=Math.sin(r+f);return[{x:s-h*u,y:h+s*u},{x:d+y*u,y:y-d*u},{x:d,y}]},t=function(r,f,u,s){var h=r*s-f*u<0?-1:1,d=r*u+f*s;return d>1&&(d=1),d<-1&&(d=-1),h*Math.acos(d)},n=function(r,f,u,s,h,d,y,m,g,x,A,b){var S=Math.pow(h,2),w=Math.pow(d,2),T=Math.pow(A,2),_=Math.pow(b,2),v=S*w-S*_-w*T;v<0&&(v=0),v/=S*_+w*T,v=Math.sqrt(v)*(y===m?-1:1);var P=v*h/d*b,M=v*-d/h*A,E=x*P-g*M+(r+u)/2,D=g*P+x*M+(f+s)/2,N=(A-P)/h,O=(b-M)/d,I=(-A-P)/h,F=(-b-M)/d,V=t(1,0,N,O),U=t(N,O,I,F);return m===0&&U>0&&(U-=o),m===1&&U<0&&(U+=o),[E,D,V,U]},a=function(r){var f=r.px,u=r.py,s=r.cx,h=r.cy,d=r.rx,y=r.ry,m=r.xAxisRotation,g=m===void 0?0:m,x=r.largeArcFlag,A=x===void 0?0:x,b=r.sweepFlag,S=b===void 0?0:b,w=[];if(d===0||y===0)return[];var T=Math.sin(g*o/360),_=Math.cos(g*o/360),v=_*(f-s)/2+T*(u-h)/2,P=-T*(f-s)/2+_*(u-h)/2;if(v===0&&P===0)return[];d=Math.abs(d),y=Math.abs(y);var M=Math.pow(v,2)/Math.pow(d,2)+Math.pow(P,2)/Math.pow(y,2);M>1&&(d*=Math.sqrt(M),y*=Math.sqrt(M));var E=n(f,u,s,h,d,y,A,S,T,_,v,P),D=l(E,4),N=D[0],O=D[1],I=D[2],F=D[3],V=Math.abs(F)/(o/4);Math.abs(1-V)<1e-7&&(V=1);var U=Math.max(Math.ceil(V),1);F/=U;for(var j=0;j<U;j++)w.push(p(I,F)),I+=F;return w.map(function(Z){var te=c(Z[0],d,y,_,T,N,O),re=te.x,W=te.y,J=c(Z[1],d,y,_,T,N,O),le=J.x,ue=J.y,se=c(Z[2],d,y,_,T,N,O),G=se.x,Y=se.y;return{x1:re,y1:W,x2:le,y2:ue,x:G,y:Y}})};z.default=a,k.exports=z.default},{}],308:[function(e,k,z){var l=e("parse-svg-path"),o=e("abs-svg-path"),c=e("normalize-svg-path"),p=e("is-svg-path"),t=e("assert");k.exports=n;function n(a){if(Array.isArray(a)&&a.length===1&&typeof a[0]=="string"&&(a=a[0]),typeof a=="string"&&(t(p(a),"String is not an SVG path."),a=l(a)),t(Array.isArray(a),"Argument should be a string or an array of path segments."),a=o(a),a=c(a),!a.length)return[0,0,0,0];for(var i=[1/0,1/0,-1/0,-1/0],r=0,f=a.length;r<f;r++)for(var u=a[r].slice(1),s=0;s<u.length;s+=2)u[s+0]<i[0]&&(i[0]=u[s+0]),u[s+1]<i[1]&&(i[1]=u[s+1]),u[s+0]>i[2]&&(i[2]=u[s+0]),u[s+1]>i[3]&&(i[3]=u[s+1]);return i}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":309,"parse-svg-path":250}],309:[function(e,k,z){k.exports=o;var l=e("svg-arc-to-cubic-bezier");function o(t){for(var n,a=[],i=0,r=0,f=0,u=0,s=null,h=null,d=0,y=0,m=0,g=t.length;m<g;m++){var x=t[m],A=x[0];switch(A){case"M":f=x[1],u=x[2];break;case"A":var b=l({px:d,py:y,cx:x[6],cy:x[7],rx:x[1],ry:x[2],xAxisRotation:x[3],largeArcFlag:x[4],sweepFlag:x[5]});if(!b.length)continue;for(var S=0,w;S<b.length;S++)w=b[S],x=["C",w.x1,w.y1,w.x2,w.y2,w.x,w.y],S<b.length-1&&a.push(x);break;case"S":var T=d,_=y;(n=="C"||n=="S")&&(T+=T-i,_+=_-r),x=["C",T,_,x[1],x[2],x[3],x[4]];break;case"T":n=="Q"||n=="T"?(s=d*2-s,h=y*2-h):(s=d,h=y),x=p(d,y,s,h,x[1],x[2]);break;case"Q":s=x[1],h=x[2],x=p(d,y,x[1],x[2],x[3],x[4]);break;case"L":x=c(d,y,x[1],x[2]);break;case"H":x=c(d,y,x[1],y);break;case"V":x=c(d,y,d,x[1]);break;case"Z":x=c(d,y,f,u);break}n=A,d=x[x.length-2],y=x[x.length-1],x.length>4?(i=x[x.length-4],r=x[x.length-3]):(i=d,r=y),a.push(x)}return a}function c(t,n,a,i){return["C",t,n,a,i,a,i]}function p(t,n,a,i,r,f){return["C",t/3+2/3*a,n/3+2/3*i,r/3+2/3*a,f/3+2/3*i,r,f]}},{"svg-arc-to-cubic-bezier":307}],310:[function(e,k,z){var l=e("svg-path-bounds"),o=e("parse-svg-path"),c=e("draw-svg-path"),p=e("is-svg-path"),t=e("bitmap-sdf"),n=document.createElement("canvas"),a=n.getContext("2d");k.exports=i;function i(u,s){if(!p(u))throw Error("Argument should be valid svg path string");s||(s={});var h,d;s.shape?(h=s.shape[0],d=s.shape[1]):(h=n.width=s.w||s.width||200,d=n.height=s.h||s.height||200);var y=Math.min(h,d),m=s.stroke||0,g=s.viewbox||s.viewBox||l(u),x=[h/(g[2]-g[0]),d/(g[3]-g[1])],A=Math.min(x[0]||0,x[1]||0)/2;if(a.fillStyle="black",a.fillRect(0,0,h,d),a.fillStyle="white",m&&(typeof m!="number"&&(m=1),m>0?a.strokeStyle="white":a.strokeStyle="black",a.lineWidth=Math.abs(m)),a.translate(h*.5,d*.5),a.scale(A,A),f()){var b=new Path2D(u);a.fill(b),m&&a.stroke(b)}else{var S=o(u);c(a,S),a.fill(),m&&a.stroke()}a.setTransform(1,0,0,1,0,0);var w=t(a,{cutoff:s.cutoff!=null?s.cutoff:.5,radius:s.radius!=null?s.radius:y*.5});return w}var r;function f(){if(r!=null)return r;var u=document.createElement("canvas").getContext("2d");if(u.canvas.width=u.canvas.height=1,!window.Path2D)return r=!1;var s=new Path2D("M0,0h1v1h-1v-1Z");u.fillStyle="black",u.fill(s);var h=u.getImageData(0,0,1,1);return r=h&&h.data&&h.data[3]===255}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":308}],311:[function(e,k,z){(function(l,o){(function(){var c=e("process/browser.js").nextTick,p=Function.prototype.apply,t=Array.prototype.slice,n={},a=0;z.setTimeout=function(){return new i(p.call(setTimeout,window,arguments),clearTimeout)},z.setInterval=function(){return new i(p.call(setInterval,window,arguments),clearInterval)},z.clearTimeout=z.clearInterval=function(r){r.close()};function i(r,f){this._id=r,this._clearFn=f}i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},z.enroll=function(r,f){clearTimeout(r._idleTimeoutId),r._idleTimeout=f},z.unenroll=function(r){clearTimeout(r._idleTimeoutId),r._idleTimeout=-1},z._unrefActive=z.active=function(r){clearTimeout(r._idleTimeoutId);var f=r._idleTimeout;f>=0&&(r._idleTimeoutId=setTimeout(function(){r._onTimeout&&r._onTimeout()},f))},z.setImmediate=typeof l=="function"?l:function(r){var f=a++,u=arguments.length<2?!1:t.call(arguments,1);return n[f]=!0,c(function(){n[f]&&(u?r.apply(null,u):r.call(null),z.clearImmediate(f))}),f},z.clearImmediate=typeof o=="function"?o:function(r){delete n[r]}}).call(this)}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":277,timers:311}],312:[function(e,k,z){(function(l){var o=/^\s+/,c=/\s+$/,p=0,t=l.round,n=l.min,a=l.max,i=l.random;function r(K,Q){if(K=K||"",Q=Q||{},K instanceof r)return K;if(!(this instanceof r))return new r(K,Q);var ae=f(K);this._originalInput=K,this._r=ae.r,this._g=ae.g,this._b=ae.b,this._a=ae.a,this._roundA=t(100*this._a)/100,this._format=Q.format||ae.format,this._gradientType=Q.gradientType,this._r<1&&(this._r=t(this._r)),this._g<1&&(this._g=t(this._g)),this._b<1&&(this._b=t(this._b)),this._ok=ae.ok,this._tc_id=p++}r.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var K=this.toRgb();return(K.r*299+K.g*587+K.b*114)/1e3},getLuminance:function(){var K=this.toRgb(),Q,ae,ie,oe,fe,ye;return Q=K.r/255,ae=K.g/255,ie=K.b/255,Q<=.03928?oe=Q/12.92:oe=l.pow((Q+.055)/1.055,2.4),ae<=.03928?fe=ae/12.92:fe=l.pow((ae+.055)/1.055,2.4),ie<=.03928?ye=ie/12.92:ye=l.pow((ie+.055)/1.055,2.4),.2126*oe+.7152*fe+.0722*ye},setAlpha:function(K){return this._a=U(K),this._roundA=t(100*this._a)/100,this},toHsv:function(){var K=d(this._r,this._g,this._b);return{h:K.h*360,s:K.s,v:K.v,a:this._a}},toHsvString:function(){var K=d(this._r,this._g,this._b),Q=t(K.h*360),ae=t(K.s*100),ie=t(K.v*100);return this._a==1?"hsv("+Q+", "+ae+"%, "+ie+"%)":"hsva("+Q+", "+ae+"%, "+ie+"%, "+this._roundA+")"},toHsl:function(){var K=s(this._r,this._g,this._b);return{h:K.h*360,s:K.s,l:K.l,a:this._a}},toHslString:function(){var K=s(this._r,this._g,this._b),Q=t(K.h*360),ae=t(K.s*100),ie=t(K.l*100);return this._a==1?"hsl("+Q+", "+ae+"%, "+ie+"%)":"hsla("+Q+", "+ae+"%, "+ie+"%, "+this._roundA+")"},toHex:function(K){return m(this._r,this._g,this._b,K)},toHexString:function(K){return"#"+this.toHex(K)},toHex8:function(K){return g(this._r,this._g,this._b,this._a,K)},toHex8String:function(K){return"#"+this.toHex8(K)},toRgb:function(){return{r:t(this._r),g:t(this._g),b:t(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+t(this._r)+", "+t(this._g)+", "+t(this._b)+")":"rgba("+t(this._r)+", "+t(this._g)+", "+t(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:t(j(this._r,255)*100)+"%",g:t(j(this._g,255)*100)+"%",b:t(j(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+t(j(this._r,255)*100)+"%, "+t(j(this._g,255)*100)+"%, "+t(j(this._b,255)*100)+"%)":"rgba("+t(j(this._r,255)*100)+"%, "+t(j(this._g,255)*100)+"%, "+t(j(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:F[m(this._r,this._g,this._b,!0)]||!1},toFilter:function(K){var Q="#"+x(this._r,this._g,this._b,this._a),ae=Q,ie=this._gradientType?"GradientType = 1, ":"";if(K){var oe=r(K);ae="#"+x(oe._r,oe._g,oe._b,oe._a)}return"progid:DXImageTransform.Microsoft.gradient("+ie+"startColorstr="+Q+",endColorstr="+ae+")"},toString:function(K){var Q=!!K;K=K||this._format;var ae=!1,ie=this._a<1&&this._a>=0,oe=!Q&&ie&&(K==="hex"||K==="hex6"||K==="hex3"||K==="hex4"||K==="hex8"||K==="name");return oe?K==="name"&&this._a===0?this.toName():this.toRgbString():(K==="rgb"&&(ae=this.toRgbString()),K==="prgb"&&(ae=this.toPercentageRgbString()),(K==="hex"||K==="hex6")&&(ae=this.toHexString()),K==="hex3"&&(ae=this.toHexString(!0)),K==="hex4"&&(ae=this.toHex8String(!0)),K==="hex8"&&(ae=this.toHex8String()),K==="name"&&(ae=this.toName()),K==="hsl"&&(ae=this.toHslString()),K==="hsv"&&(ae=this.toHsvString()),ae||this.toHexString())},clone:function(){return r(this.toString())},_applyModification:function(K,Q){var ae=K.apply(null,[this].concat([].slice.call(Q)));return this._r=ae._r,this._g=ae._g,this._b=ae._b,this.setAlpha(ae._a),this},lighten:function(){return this._applyModification(w,arguments)},brighten:function(){return this._applyModification(T,arguments)},darken:function(){return this._applyModification(_,arguments)},desaturate:function(){return this._applyModification(A,arguments)},saturate:function(){return this._applyModification(b,arguments)},greyscale:function(){return this._applyModification(S,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(K,Q){return K.apply(null,[this].concat([].slice.call(Q)))},analogous:function(){return this._applyCombination(N,arguments)},complement:function(){return this._applyCombination(P,arguments)},monochromatic:function(){return this._applyCombination(O,arguments)},splitcomplement:function(){return this._applyCombination(D,arguments)},triad:function(){return this._applyCombination(M,arguments)},tetrad:function(){return this._applyCombination(E,arguments)}},r.fromRatio=function(K,Q){if(typeof K=="object"){var ae={};for(var ie in K)K.hasOwnProperty(ie)&&(ie==="a"?ae[ie]=K[ie]:ae[ie]=le(K[ie]));K=ae}return r(K,Q)};function f(K){var Q={r:0,g:0,b:0},ae=1,ie=null,oe=null,fe=null,ye=!1,ce=!1;return typeof K=="string"&&(K=ee(K)),typeof K=="object"&&(Y(K.r)&&Y(K.g)&&Y(K.b)?(Q=u(K.r,K.g,K.b),ye=!0,ce=String(K.r).substr(-1)==="%"?"prgb":"rgb"):Y(K.h)&&Y(K.s)&&Y(K.v)?(ie=le(K.s),oe=le(K.v),Q=y(K.h,ie,oe),ye=!0,ce="hsv"):Y(K.h)&&Y(K.s)&&Y(K.l)&&(ie=le(K.s),fe=le(K.l),Q=h(K.h,ie,fe),ye=!0,ce="hsl"),K.hasOwnProperty("a")&&(ae=K.a)),ae=U(ae),{ok:ye,format:K.format||ce,r:n(255,a(Q.r,0)),g:n(255,a(Q.g,0)),b:n(255,a(Q.b,0)),a:ae}}function u(K,Q,ae){return{r:j(K,255)*255,g:j(Q,255)*255,b:j(ae,255)*255}}function s(K,Q,ae){K=j(K,255),Q=j(Q,255),ae=j(ae,255);var ie=a(K,Q,ae),oe=n(K,Q,ae),fe,ye,ce=(ie+oe)/2;if(ie==oe)fe=ye=0;else{var me=ie-oe;switch(ye=ce>.5?me/(2-ie-oe):me/(ie+oe),ie){case K:fe=(Q-ae)/me+(Q<ae?6:0);break;case Q:fe=(ae-K)/me+2;break;case ae:fe=(K-Q)/me+4;break}fe/=6}return{h:fe,s:ye,l:ce}}function h(K,Q,ae){var ie,oe,fe;K=j(K,360),Q=j(Q,100),ae=j(ae,100);function ye(xe,ke,Ae){return Ae<0&&(Ae+=1),Ae>1&&(Ae-=1),Ae<1/6?xe+(ke-xe)*6*Ae:Ae<1/2?ke:Ae<2/3?xe+(ke-xe)*(2/3-Ae)*6:xe}if(Q===0)ie=oe=fe=ae;else{var ce=ae<.5?ae*(1+Q):ae+Q-ae*Q,me=2*ae-ce;ie=ye(me,ce,K+1/3),oe=ye(me,ce,K),fe=ye(me,ce,K-1/3)}return{r:ie*255,g:oe*255,b:fe*255}}function d(K,Q,ae){K=j(K,255),Q=j(Q,255),ae=j(ae,255);var ie=a(K,Q,ae),oe=n(K,Q,ae),fe,ye,ce=ie,me=ie-oe;if(ye=ie===0?0:me/ie,ie==oe)fe=0;else{switch(ie){case K:fe=(Q-ae)/me+(Q<ae?6:0);break;case Q:fe=(ae-K)/me+2;break;case ae:fe=(K-Q)/me+4;break}fe/=6}return{h:fe,s:ye,v:ce}}function y(K,Q,ae){K=j(K,360)*6,Q=j(Q,100),ae=j(ae,100);var ie=l.floor(K),oe=K-ie,fe=ae*(1-Q),ye=ae*(1-oe*Q),ce=ae*(1-(1-oe)*Q),me=ie%6,xe=[ae,ye,fe,fe,ce,ae][me],ke=[ce,ae,ae,ye,fe,fe][me],Ae=[fe,fe,ce,ae,ae,ye][me];return{r:xe*255,g:ke*255,b:Ae*255}}function m(K,Q,ae,ie){var oe=[J(t(K).toString(16)),J(t(Q).toString(16)),J(t(ae).toString(16))];return ie&&oe[0].charAt(0)==oe[0].charAt(1)&&oe[1].charAt(0)==oe[1].charAt(1)&&oe[2].charAt(0)==oe[2].charAt(1)?oe[0].charAt(0)+oe[1].charAt(0)+oe[2].charAt(0):oe.join("")}function g(K,Q,ae,ie,oe){var fe=[J(t(K).toString(16)),J(t(Q).toString(16)),J(t(ae).toString(16)),J(ue(ie))];return oe&&fe[0].charAt(0)==fe[0].charAt(1)&&fe[1].charAt(0)==fe[1].charAt(1)&&fe[2].charAt(0)==fe[2].charAt(1)&&fe[3].charAt(0)==fe[3].charAt(1)?fe[0].charAt(0)+fe[1].charAt(0)+fe[2].charAt(0)+fe[3].charAt(0):fe.join("")}function x(K,Q,ae,ie){var oe=[J(ue(ie)),J(t(K).toString(16)),J(t(Q).toString(16)),J(t(ae).toString(16))];return oe.join("")}r.equals=function(K,Q){return!K||!Q?!1:r(K).toRgbString()==r(Q).toRgbString()},r.random=function(){return r.fromRatio({r:i(),g:i(),b:i()})};function A(K,Q){Q=Q===0?0:Q||10;var ae=r(K).toHsl();return ae.s-=Q/100,ae.s=Z(ae.s),r(ae)}function b(K,Q){Q=Q===0?0:Q||10;var ae=r(K).toHsl();return ae.s+=Q/100,ae.s=Z(ae.s),r(ae)}function S(K){return r(K).desaturate(100)}function w(K,Q){Q=Q===0?0:Q||10;var ae=r(K).toHsl();return ae.l+=Q/100,ae.l=Z(ae.l),r(ae)}function T(K,Q){Q=Q===0?0:Q||10;var ae=r(K).toRgb();return ae.r=a(0,n(255,ae.r-t(255*-(Q/100)))),ae.g=a(0,n(255,ae.g-t(255*-(Q/100)))),ae.b=a(0,n(255,ae.b-t(255*-(Q/100)))),r(ae)}function _(K,Q){Q=Q===0?0:Q||10;var ae=r(K).toHsl();return ae.l-=Q/100,ae.l=Z(ae.l),r(ae)}function v(K,Q){var ae=r(K).toHsl(),ie=(ae.h+Q)%360;return ae.h=ie<0?360+ie:ie,r(ae)}function P(K){var Q=r(K).toHsl();return Q.h=(Q.h+180)%360,r(Q)}function M(K){var Q=r(K).toHsl(),ae=Q.h;return[r(K),r({h:(ae+120)%360,s:Q.s,l:Q.l}),r({h:(ae+240)%360,s:Q.s,l:Q.l})]}function E(K){var Q=r(K).toHsl(),ae=Q.h;return[r(K),r({h:(ae+90)%360,s:Q.s,l:Q.l}),r({h:(ae+180)%360,s:Q.s,l:Q.l}),r({h:(ae+270)%360,s:Q.s,l:Q.l})]}function D(K){var Q=r(K).toHsl(),ae=Q.h;return[r(K),r({h:(ae+72)%360,s:Q.s,l:Q.l}),r({h:(ae+216)%360,s:Q.s,l:Q.l})]}function N(K,Q,ae){Q=Q||6,ae=ae||30;var ie=r(K).toHsl(),oe=360/ae,fe=[r(K)];for(ie.h=(ie.h-(oe*Q>>1)+720)%360;--Q;)ie.h=(ie.h+oe)%360,fe.push(r(ie));return fe}function O(K,Q){Q=Q||6;for(var ae=r(K).toHsv(),ie=ae.h,oe=ae.s,fe=ae.v,ye=[],ce=1/Q;Q--;)ye.push(r({h:ie,s:oe,v:fe})),fe=(fe+ce)%1;return ye}r.mix=function(K,Q,ae){ae=ae===0?0:ae||50;var ie=r(K).toRgb(),oe=r(Q).toRgb(),fe=ae/100,ye={r:(oe.r-ie.r)*fe+ie.r,g:(oe.g-ie.g)*fe+ie.g,b:(oe.b-ie.b)*fe+ie.b,a:(oe.a-ie.a)*fe+ie.a};return r(ye)},r.readability=function(K,Q){var ae=r(K),ie=r(Q);return(l.max(ae.getLuminance(),ie.getLuminance())+.05)/(l.min(ae.getLuminance(),ie.getLuminance())+.05)},r.isReadable=function(K,Q,ae){var ie=r.readability(K,Q),oe,fe;switch(fe=!1,oe=$(ae),oe.level+oe.size){case"AAsmall":case"AAAlarge":fe=ie>=4.5;break;case"AAlarge":fe=ie>=3;break;case"AAAsmall":fe=ie>=7;break}return fe},r.mostReadable=function(K,Q,ae){var ie=null,oe=0,fe,ye,ce,me;ae=ae||{},ye=ae.includeFallbackColors,ce=ae.level,me=ae.size;for(var xe=0;xe<Q.length;xe++)fe=r.readability(K,Q[xe]),fe>oe&&(oe=fe,ie=r(Q[xe]));return r.isReadable(K,ie,{level:ce,size:me})||!ye?ie:(ae.includeFallbackColors=!1,r.mostReadable(K,["#fff","#000"],ae))};var I=r.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},F=r.hexNames=V(I);function V(K){var Q={};for(var ae in K)K.hasOwnProperty(ae)&&(Q[K[ae]]=ae);return Q}function U(K){return K=parseFloat(K),(isNaN(K)||K<0||K>1)&&(K=1),K}function j(K,Q){re(K)&&(K="100%");var ae=W(K);return K=n(Q,a(0,parseFloat(K))),ae&&(K=parseInt(K*Q,10)/100),l.abs(K-Q)<1e-6?1:K%Q/parseFloat(Q)}function Z(K){return n(1,a(0,K))}function te(K){return parseInt(K,16)}function re(K){return typeof K=="string"&&K.indexOf(".")!=-1&&parseFloat(K)===1}function W(K){return typeof K=="string"&&K.indexOf("%")!=-1}function J(K){return K.length==1?"0"+K:""+K}function le(K){return K<=1&&(K=K*100+"%"),K}function ue(K){return l.round(parseFloat(K)*255).toString(16)}function se(K){return te(K)/255}var G=function(){var K="[-\\+]?\\d+%?",Q="[-\\+]?\\d*\\.\\d+%?",ae="(?:"+Q+")|(?:"+K+")",ie="[\\s|\\(]+("+ae+")[,|\\s]+("+ae+")[,|\\s]+("+ae+")\\s*\\)?",oe="[\\s|\\(]+("+ae+")[,|\\s]+("+ae+")[,|\\s]+("+ae+")[,|\\s]+("+ae+")\\s*\\)?";return{CSS_UNIT:new RegExp(ae),rgb:new RegExp("rgb"+ie),rgba:new RegExp("rgba"+oe),hsl:new RegExp("hsl"+ie),hsla:new RegExp("hsla"+oe),hsv:new RegExp("hsv"+ie),hsva:new RegExp("hsva"+oe),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Y(K){return!!G.CSS_UNIT.exec(K)}function ee(K){K=K.replace(o,"").replace(c,"").toLowerCase();var Q=!1;if(I[K])K=I[K],Q=!0;else if(K=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ae;return(ae=G.rgb.exec(K))?{r:ae[1],g:ae[2],b:ae[3]}:(ae=G.rgba.exec(K))?{r:ae[1],g:ae[2],b:ae[3],a:ae[4]}:(ae=G.hsl.exec(K))?{h:ae[1],s:ae[2],l:ae[3]}:(ae=G.hsla.exec(K))?{h:ae[1],s:ae[2],l:ae[3],a:ae[4]}:(ae=G.hsv.exec(K))?{h:ae[1],s:ae[2],v:ae[3]}:(ae=G.hsva.exec(K))?{h:ae[1],s:ae[2],v:ae[3],a:ae[4]}:(ae=G.hex8.exec(K))?{r:te(ae[1]),g:te(ae[2]),b:te(ae[3]),a:se(ae[4]),format:Q?"name":"hex8"}:(ae=G.hex6.exec(K))?{r:te(ae[1]),g:te(ae[2]),b:te(ae[3]),format:Q?"name":"hex"}:(ae=G.hex4.exec(K))?{r:te(ae[1]+""+ae[1]),g:te(ae[2]+""+ae[2]),b:te(ae[3]+""+ae[3]),a:se(ae[4]+""+ae[4]),format:Q?"name":"hex8"}:(ae=G.hex3.exec(K))?{r:te(ae[1]+""+ae[1]),g:te(ae[2]+""+ae[2]),b:te(ae[3]+""+ae[3]),format:Q?"name":"hex"}:!1}function $(K){var Q,ae;return K=K||{level:"AA",size:"small"},Q=(K.level||"AA").toUpperCase(),ae=(K.size||"small").toLowerCase(),Q!=="AA"&&Q!=="AAA"&&(Q="AA"),ae!=="small"&&ae!=="large"&&(ae="small"),{level:Q,size:ae}}typeof k!="undefined"&&k.exports?k.exports=r:window.tinycolor=r})(Math)},{}],313:[function(e,k,z){k.exports=c,k.exports.float32=k.exports.float=c,k.exports.fract32=k.exports.fract=o;var l=new Float32Array(1);function o(p,t){if(p.length){if(p instanceof Float32Array)return new Float32Array(p.length);t instanceof Float32Array||(t=c(p));for(var n=0,a=t.length;n<a;n++)t[n]=p[n]-t[n];return t}return c(p-c(p))}function c(p){return p.length?p instanceof Float32Array?p:new Float32Array(p):(l[0]=p,l[0])}},{}],314:[function(e,k,z){var l=e("parse-unit");k.exports=t;var o=96;function c(n,a){var i=l(getComputedStyle(n).getPropertyValue(a));return i[0]*t(i[1],n)}function p(n,a){var i=document.createElement("div");i.style["font-size"]="128"+n,a.appendChild(i);var r=c(i,"font-size")/128;return a.removeChild(i),r}function t(n,a){switch(a=a||document.body,n=(n||"px").trim().toLowerCase(),(a===window||a===document)&&(a=document.body),n){case"%":return a.clientHeight/100;case"ch":case"ex":return p(n,a);case"em":return c(a,"font-size");case"rem":return c(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return o;case"cm":return o/2.54;case"mm":return o/25.4;case"pt":return o/72;case"pc":return o/6}return 1}},{"parse-unit":251}],315:[function(e,k,z){(function(l,o){typeof z=="object"&&typeof k!="undefined"?o(z):(l=l||self,o(l.topojson=l.topojson||{}))})(this,function(l){function o(b){return b}function c(b){if(b==null)return o;var S,w,T=b.scale[0],_=b.scale[1],v=b.translate[0],P=b.translate[1];return function(M,E){E||(S=w=0);var D=2,N=M.length,O=new Array(N);for(O[0]=(S+=M[0])*T+v,O[1]=(w+=M[1])*_+P;D<N;)O[D]=M[D],++D;return O}}function p(b){var S=c(b.transform),w,T=1/0,_=T,v=-T,P=-T;function M(D){D=S(D),D[0]<T&&(T=D[0]),D[0]>v&&(v=D[0]),D[1]<_&&(_=D[1]),D[1]>P&&(P=D[1])}function E(D){switch(D.type){case"GeometryCollection":D.geometries.forEach(E);break;case"Point":M(D.coordinates);break;case"MultiPoint":D.coordinates.forEach(M);break}}b.arcs.forEach(function(D){for(var N=-1,O=D.length,I;++N<O;)I=S(D[N],N),I[0]<T&&(T=I[0]),I[0]>v&&(v=I[0]),I[1]<_&&(_=I[1]),I[1]>P&&(P=I[1])});for(w in b.objects)E(b.objects[w]);return[T,_,v,P]}function t(b,S){for(var w,T=b.length,_=T-S;_<--T;)w=b[_],b[_++]=b[T],b[T]=w}function n(b,S){return typeof S=="string"&&(S=b.objects[S]),S.type==="GeometryCollection"?{type:"FeatureCollection",features:S.geometries.map(function(w){return a(b,w)})}:a(b,S)}function a(b,S){var w=S.id,T=S.bbox,_=S.properties==null?{}:S.properties,v=i(b,S);return w==null&&T==null?{type:"Feature",properties:_,geometry:v}:T==null?{type:"Feature",id:w,properties:_,geometry:v}:{type:"Feature",id:w,bbox:T,properties:_,geometry:v}}function i(b,S){var w=c(b.transform),T=b.arcs;function _(N,O){O.length&&O.pop();for(var I=T[N<0?~N:N],F=0,V=I.length;F<V;++F)O.push(w(I[F],F));N<0&&t(O,V)}function v(N){return w(N)}function P(N){for(var O=[],I=0,F=N.length;I<F;++I)_(N[I],O);return O.length<2&&O.push(O[0]),O}function M(N){for(var O=P(N);O.length<4;)O.push(O[0]);return O}function E(N){return N.map(M)}function D(N){var O=N.type,I;switch(O){case"GeometryCollection":return{type:O,geometries:N.geometries.map(D)};case"Point":I=v(N.coordinates);break;case"MultiPoint":I=N.coordinates.map(v);break;case"LineString":I=P(N.arcs);break;case"MultiLineString":I=N.arcs.map(P);break;case"Polygon":I=E(N.arcs);break;case"MultiPolygon":I=N.arcs.map(E);break;default:return null}return{type:O,coordinates:I}}return D(S)}function r(b,S){var w={},T={},_={},v=[],P=-1;S.forEach(function(D,N){var O=b.arcs[D<0?~D:D],I;O.length<3&&!O[1][0]&&!O[1][1]&&(I=S[++P],S[P]=D,S[N]=I)}),S.forEach(function(D){var N=M(D),O=N[0],I=N[1],F,V;if(F=_[O])if(delete _[F.end],F.push(D),F.end=I,V=T[I]){delete T[V.start];var U=V===F?F:F.concat(V);T[U.start=F.start]=_[U.end=V.end]=U}else T[F.start]=_[F.end]=F;else if(F=T[I])if(delete T[F.start],F.unshift(D),F.start=O,V=_[O]){delete _[V.end];var j=V===F?F:V.concat(F);T[j.start=V.start]=_[j.end=F.end]=j}else T[F.start]=_[F.end]=F;else F=[D],T[F.start=O]=_[F.end=I]=F});function M(D){var N=b.arcs[D<0?~D:D],O=N[0],I;return b.transform?(I=[0,0],N.forEach(function(F){I[0]+=F[0],I[1]+=F[1]})):I=N[N.length-1],D<0?[I,O]:[O,I]}function E(D,N){for(var O in D){var I=D[O];delete N[I.start],delete I.start,delete I.end,I.forEach(function(F){w[F<0?~F:F]=1}),v.push(I)}}return E(_,T),E(T,_),S.forEach(function(D){w[D<0?~D:D]||v.push([D])}),v}function f(b){return i(b,u.apply(this,arguments))}function u(b,S,w){var T,_,v;if(arguments.length>1)T=s(b,S,w);else for(_=0,T=new Array(v=b.arcs.length);_<v;++_)T[_]=_;return{type:"MultiLineString",arcs:r(b,T)}}function s(b,S,w){var T=[],_=[],v;function P(O){var I=O<0?~O:O;(_[I]||(_[I]=[])).push({i:O,g:v})}function M(O){O.forEach(P)}function E(O){O.forEach(M)}function D(O){O.forEach(E)}function N(O){switch(v=O,O.type){case"GeometryCollection":O.geometries.forEach(N);break;case"LineString":M(O.arcs);break;case"MultiLineString":case"Polygon":E(O.arcs);break;case"MultiPolygon":D(O.arcs);break}}return N(S),_.forEach(w==null?function(O){T.push(O[0].i)}:function(O){w(O[0].g,O[O.length-1].g)&&T.push(O[0].i)}),T}function h(b){for(var S=-1,w=b.length,T,_=b[w-1],v=0;++S<w;)T=_,_=b[S],v+=T[0]*_[1]-T[1]*_[0];return Math.abs(v)}function d(b){return i(b,y.apply(this,arguments))}function y(b,S){var w={},T=[],_=[];S.forEach(v);function v(E){switch(E.type){case"GeometryCollection":E.geometries.forEach(v);break;case"Polygon":P(E.arcs);break;case"MultiPolygon":E.arcs.forEach(P);break}}function P(E){E.forEach(function(D){D.forEach(function(N){(w[N=N<0?~N:N]||(w[N]=[])).push(E)})}),T.push(E)}function M(E){return h(i(b,{type:"Polygon",arcs:[E]}).coordinates[0])}return T.forEach(function(E){if(!E._){var D=[],N=[E];for(E._=1,_.push(D);E=N.pop();)D.push(E),E.forEach(function(O){O.forEach(function(I){w[I<0?~I:I].forEach(function(F){F._||(F._=1,N.push(F))})})})}}),T.forEach(function(E){delete E._}),{type:"MultiPolygon",arcs:_.map(function(E){var D=[],N;if(E.forEach(function(U){U.forEach(function(j){j.forEach(function(Z){w[Z<0?~Z:Z].length<2&&D.push(Z)})})}),D=r(b,D),(N=D.length)>1)for(var O=1,I=M(D[0]),F,V;O<N;++O)(F=M(D[O]))>I&&(V=D[0],D[0]=D[O],D[O]=V,I=F);return D}).filter(function(E){return E.length>0})}}function m(b,S){for(var w=0,T=b.length;w<T;){var _=w+T>>>1;b[_]<S?w=_+1:T=_}return w}function g(b){var S={},w=b.map(function(){return[]});function T(U,j){U.forEach(function(Z){Z<0&&(Z=~Z);var te=S[Z];te?te.push(j):S[Z]=[j]})}function _(U,j){U.forEach(function(Z){T(Z,j)})}function v(U,j){U.type==="GeometryCollection"?U.geometries.forEach(function(Z){v(Z,j)}):U.type in P&&P[U.type](U.arcs,j)}var P={LineString:T,MultiLineString:_,Polygon:_,MultiPolygon:function(U,j){U.forEach(function(Z){_(Z,j)})}};b.forEach(v);for(var M in S)for(var E=S[M],D=E.length,N=0;N<D;++N)for(var O=N+1;O<D;++O){var I=E[N],F=E[O],V;(V=w[I])[M=m(V,F)]!==F&&V.splice(M,0,F),(V=w[F])[M=m(V,I)]!==I&&V.splice(M,0,I)}return w}function x(b){if(b==null)return o;var S,w,T=b.scale[0],_=b.scale[1],v=b.translate[0],P=b.translate[1];return function(M,E){E||(S=w=0);var D=2,N=M.length,O=new Array(N),I=Math.round((M[0]-v)/T),F=Math.round((M[1]-P)/_);for(O[0]=I-S,S=I,O[1]=F-w,w=F;D<N;)O[D]=M[D],++D;return O}}function A(b,S){if(b.transform)throw new Error("already quantized");if(!S||!S.scale){if(!((P=Math.floor(S))>=2))throw new Error("n must be \u22652");E=b.bbox||p(b);var w=E[0],T=E[1],_=E[2],v=E[3],P;S={scale:[_-w?(_-w)/(P-1):1,v-T?(v-T)/(P-1):1],translate:[w,T]}}else E=b.bbox;var M=x(S),E,D,N=b.objects,O={};function I(U){return M(U)}function F(U){var j;switch(U.type){case"GeometryCollection":j={type:"GeometryCollection",geometries:U.geometries.map(F)};break;case"Point":j={type:"Point",coordinates:I(U.coordinates)};break;case"MultiPoint":j={type:"MultiPoint",coordinates:U.coordinates.map(I)};break;default:return U}return U.id!=null&&(j.id=U.id),U.bbox!=null&&(j.bbox=U.bbox),U.properties!=null&&(j.properties=U.properties),j}function V(U){var j=0,Z=1,te=U.length,re,W=new Array(te);for(W[0]=M(U[0],0);++j<te;)((re=M(U[j],j))[0]||re[1])&&(W[Z++]=re);return Z===1&&(W[Z++]=[0,0]),W.length=Z,W}for(D in N)O[D]=F(N[D]);return{type:"Topology",bbox:E,transform:S,objects:O,arcs:b.arcs.map(V)}}l.bbox=p,l.feature=n,l.merge=d,l.mergeArcs=y,l.mesh=f,l.meshArcs=u,l.neighbors=g,l.quantize=A,l.transform=c,l.untransform=x,Object.defineProperty(l,"__esModule",{value:!0})})},{}],316:[function(e,k,z){var l=e("../prototype/is");k.exports=function(o){if(typeof o!="function"||!hasOwnProperty.call(o,"length"))return!1;try{if(typeof o.length!="number"||typeof o.call!="function"||typeof o.apply!="function")return!1}catch{return!1}return!l(o)}},{"../prototype/is":323}],317:[function(e,k,z){var l=e("../value/is"),o=e("../object/is"),c=e("../string/coerce"),p=e("./to-short-string"),t=function(n,a){return n.replace("%v",p(a))};k.exports=function(n,a,i){if(!o(i))throw new TypeError(t(a,n));if(!l(n)){if("default"in i)return i.default;if(i.isOptional)return null}var r=c(i.errorMessage);throw l(r)||(r=a),new TypeError(t(r,n))}},{"../object/is":320,"../string/coerce":324,"../value/is":326,"./to-short-string":319}],318:[function(e,k,z){k.exports=function(l){try{return l.toString()}catch{try{return String(l)}catch{return null}}}},{}],319:[function(e,k,z){var l=e("./safe-to-string"),o=/[\n\r\u2028\u2029]/g;k.exports=function(c){var p=l(c);return p===null?"<Non-coercible to string value>":(p.length>100&&(p=p.slice(0,99)+"\u2026"),p=p.replace(o,function(t){switch(t){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),p)}},{"./safe-to-string":318}],320:[function(e,k,z){var l=e("../value/is"),o={object:!0,function:!0,undefined:!0};k.exports=function(c){return l(c)?hasOwnProperty.call(o,typeof c):!1}},{"../value/is":326}],321:[function(e,k,z){var l=e("../lib/resolve-exception"),o=e("./is");k.exports=function(c){return o(c)?c:l(c,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":317,"./is":322}],322:[function(e,k,z){var l=e("../function/is"),o=/^\s*class[\s{/}]/,c=Function.prototype.toString;k.exports=function(p){return!(!l(p)||o.test(c.call(p)))}},{"../function/is":316}],323:[function(e,k,z){var l=e("../object/is");k.exports=function(o){if(!l(o))return!1;try{return o.constructor?o.constructor.prototype===o:!1}catch{return!1}}},{"../object/is":320}],324:[function(e,k,z){var l=e("../value/is"),o=e("../object/is"),c=Object.prototype.toString;k.exports=function(p){if(!l(p))return null;if(o(p)){var t=p.toString;if(typeof t!="function"||t===c)return null}try{return""+p}catch{return null}}},{"../object/is":320,"../value/is":326}],325:[function(e,k,z){var l=e("../lib/resolve-exception"),o=e("./is");k.exports=function(c){return o(c)?c:l(c,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":317,"./is":326}],326:[function(e,k,z){var l=void 0;k.exports=function(o){return o!==l&&o!==null}},{}],327:[function(e,k,z){(function(l){(function(){var o=e("bit-twiddle"),c=e("dup"),p=e("buffer").Buffer;l.__TYPEDARRAY_POOL||(l.__TYPEDARRAY_POOL={UINT8:c([32,0]),UINT16:c([32,0]),UINT32:c([32,0]),BIGUINT64:c([32,0]),INT8:c([32,0]),INT16:c([32,0]),INT32:c([32,0]),BIGINT64:c([32,0]),FLOAT:c([32,0]),DOUBLE:c([32,0]),DATA:c([32,0]),UINT8C:c([32,0]),BUFFER:c([32,0])});var t=typeof Uint8ClampedArray!="undefined",n=typeof BigUint64Array!="undefined",a=typeof BigInt64Array!="undefined",i=l.__TYPEDARRAY_POOL;i.UINT8C||(i.UINT8C=c([32,0])),i.BIGUINT64||(i.BIGUINT64=c([32,0])),i.BIGINT64||(i.BIGINT64=c([32,0])),i.BUFFER||(i.BUFFER=c([32,0]));var r=i.DATA,f=i.BUFFER;z.free=function(E){if(p.isBuffer(E))f[o.log2(E.length)].push(E);else{if(Object.prototype.toString.call(E)!=="[object ArrayBuffer]"&&(E=E.buffer),!E)return;var D=E.length||E.byteLength,N=o.log2(D)|0;r[N].push(E)}};function u(M){if(!!M){var E=M.length||M.byteLength,D=o.log2(E);r[D].push(M)}}function s(M){u(M.buffer)}z.freeUint8=z.freeUint16=z.freeUint32=z.freeBigUint64=z.freeInt8=z.freeInt16=z.freeInt32=z.freeBigInt64=z.freeFloat32=z.freeFloat=z.freeFloat64=z.freeDouble=z.freeUint8Clamped=z.freeDataView=s,z.freeArrayBuffer=u,z.freeBuffer=function(E){f[o.log2(E.length)].push(E)},z.malloc=function(E,D){if(D===void 0||D==="arraybuffer")return h(E);switch(D){case"uint8":return d(E);case"uint16":return y(E);case"uint32":return m(E);case"int8":return g(E);case"int16":return x(E);case"int32":return A(E);case"float":case"float32":return b(E);case"double":case"float64":return S(E);case"uint8_clamped":return w(E);case"bigint64":return _(E);case"biguint64":return T(E);case"buffer":return P(E);case"data":case"dataview":return v(E);default:return null}return null};function h(M){var M=o.nextPow2(M),E=o.log2(M),D=r[E];return D.length>0?D.pop():new ArrayBuffer(M)}z.mallocArrayBuffer=h;function d(M){return new Uint8Array(h(M),0,M)}z.mallocUint8=d;function y(M){return new Uint16Array(h(2*M),0,M)}z.mallocUint16=y;function m(M){return new Uint32Array(h(4*M),0,M)}z.mallocUint32=m;function g(M){return new Int8Array(h(M),0,M)}z.mallocInt8=g;function x(M){return new Int16Array(h(2*M),0,M)}z.mallocInt16=x;function A(M){return new Int32Array(h(4*M),0,M)}z.mallocInt32=A;function b(M){return new Float32Array(h(4*M),0,M)}z.mallocFloat32=z.mallocFloat=b;function S(M){return new Float64Array(h(8*M),0,M)}z.mallocFloat64=z.mallocDouble=S;function w(M){return t?new Uint8ClampedArray(h(M),0,M):d(M)}z.mallocUint8Clamped=w;function T(M){return n?new BigUint64Array(h(8*M),0,M):null}z.mallocBigUint64=T;function _(M){return a?new BigInt64Array(h(8*M),0,M):null}z.mallocBigInt64=_;function v(M){return new DataView(h(M),0,M)}z.mallocDataView=v;function P(M){M=o.nextPow2(M);var E=o.log2(M),D=f[E];return D.length>0?D.pop():new p(M)}z.mallocBuffer=P,z.clearCache=function(){for(var E=0;E<32;++E)i.UINT8[E].length=0,i.UINT16[E].length=0,i.UINT32[E].length=0,i.INT8[E].length=0,i.INT16[E].length=0,i.INT32[E].length=0,i.FLOAT[E].length=0,i.DOUBLE[E].length=0,i.BIGUINT64[E].length=0,i.BIGINT64[E].length=0,i.UINT8C[E].length=0,r[E].length=0,f[E].length=0}}).call(this)}).call(this,typeof lo!="undefined"?lo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],328:[function(e,k,z){var l=/[\'\"]/;k.exports=function(c){return c?(l.test(c.charAt(0))&&(c=c.substr(1)),l.test(c.charAt(c.length-1))&&(c=c.substr(0,c.length-1)),c):""}},{}],329:[function(e,k,z){k.exports=function(o,c,p){Array.isArray(p)||(p=[].slice.call(arguments,2));for(var t=0,n=p.length;t<n;t++){var a=p[t];for(var i in a)if(!(c[i]!==void 0&&!Array.isArray(c[i])&&o[i]===c[i])&&i in c){var r;if(a[i]===!0)r=c[i];else{if(a[i]===!1)continue;if(typeof a[i]=="function"&&(r=a[i](c[i],o,c),r===void 0))continue}o[i]=r}}return o}},{}],330:[function(e,k,z){(function(l){(function(){k.exports=o;function o(p,t){if(c("noDeprecation"))return p;var n=!1;function a(){if(!n){if(c("throwDeprecation"))throw new Error(t);c("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return p.apply(this,arguments)}return a}function c(p){try{if(!l.localStorage)return!1}catch{return!1}var t=l.localStorage[p];return t==null?!1:String(t).toLowerCase()==="true"}}).call(this)}).call(this,typeof lo!="undefined"?lo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],331:[function(e,k,z){var l=e("get-canvas-context");k.exports=function(c){return l("webgl",c)}},{"get-canvas-context":194}],332:[function(e,k,z){var l=e("../main"),o=e("object-assign"),c=l.instance();function p(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}p.prototype=new l.baseCalendar,o(p.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(h,d){if(typeof h=="string"){var y=h.match(n);return y?y[0]:""}var m=this._validateYear(h),g=h.month(),x=""+this.toChineseMonth(m,g);return d&&x.length<2&&(x="0"+x),this.isIntercalaryMonth(m,g)&&(x+="i"),x},monthNames:function(h){if(typeof h=="string"){var d=h.match(a);return d?d[0]:""}var y=this._validateYear(h),m=h.month(),g=this.toChineseMonth(y,m),x=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][g-1];return this.isIntercalaryMonth(y,m)&&(x="\u95F0"+x),x},monthNamesShort:function(h){if(typeof h=="string"){var d=h.match(i);return d?d[0]:""}var y=this._validateYear(h),m=h.month(),g=this.toChineseMonth(y,m),x=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][g-1];return this.isIntercalaryMonth(y,m)&&(x="\u95F0"+x),x},parseMonth:function(h,d){h=this._validateYear(h);var y=parseInt(d),m;if(isNaN(y))d[0]==="\u95F0"&&(m=!0,d=d.substring(1)),d[d.length-1]==="\u6708"&&(d=d.substring(0,d.length-1)),y=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(d);else{var g=d[d.length-1];m=g==="i"||g==="I"}var x=this.toMonthIndex(h,y,m);return x},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(h,d){if(h.year&&(h=h.year()),typeof h!="number"||h<1888||h>2111)throw d.replace(/\{0\}/,this.local.name);return h},toMonthIndex:function(h,d,y){var m=this.intercalaryMonth(h),g=y&&d!==m;if(g||d<1||d>12)throw l.local.invalidMonth.replace(/\{0\}/,this.local.name);var x;return m?!y&&d<=m?x=d-1:x=d:x=d-1,x},toChineseMonth:function(h,d){h.year&&(h=h.year(),d=h.month());var y=this.intercalaryMonth(h),m=y?12:11;if(d<0||d>m)throw l.local.invalidMonth.replace(/\{0\}/,this.local.name);var g;return y?d<y?g=d+1:g=d:g=d+1,g},intercalaryMonth:function(h){h=this._validateYear(h);var d=r[h-r[0]],y=d>>13;return y},isIntercalaryMonth:function(h,d){h.year&&(h=h.year(),d=h.month());var y=this.intercalaryMonth(h);return!!y&&y===d},leapYear:function(h){return this.intercalaryMonth(h)!==0},weekOfYear:function(h,d,y){var m=this._validateYear(h,l.local.invalidyear),g=f[m-f[0]],x=g>>9&4095,A=g>>5&15,b=g&31,S;S=c.newDate(x,A,b),S.add(4-(S.dayOfWeek()||7),"d");var w=this.toJD(h,d,y)-S.toJD();return 1+Math.floor(w/7)},monthsInYear:function(h){return this.leapYear(h)?13:12},daysInMonth:function(h,d){h.year&&(d=h.month(),h=h.year()),h=this._validateYear(h);var y=r[h-r[0]],m=y>>13,g=m?12:11;if(d>g)throw l.local.invalidMonth.replace(/\{0\}/,this.local.name);var x=y&1<<12-d?30:29;return x},weekDay:function(h,d,y){return(this.dayOfWeek(h,d,y)||7)<6},toJD:function(h,d,y){var m=this._validate(h,x,y,l.local.invalidDate);h=this._validateYear(m.year()),d=m.month(),y=m.day();var g=this.isIntercalaryMonth(h,d),x=this.toChineseMonth(h,d),A=s(h,x,y,g);return c.toJD(A.year,A.month,A.day)},fromJD:function(h){var d=c.fromJD(h),y=u(d.year(),d.month(),d.day()),m=this.toMonthIndex(y.year,y.month,y.isIntercalary);return this.newDate(y.year,m,y.day)},fromString:function(h){var d=h.match(t),y=this._validateYear(+d[1]),m=+d[2],g=!!d[3],x=this.toMonthIndex(y,m,g),A=+d[4];return this.newDate(y,x,A)},add:function(h,d,y){var m=h.year(),g=h.month(),x=this.isIntercalaryMonth(m,g),A=this.toChineseMonth(m,g),b=Object.getPrototypeOf(p.prototype).add.call(this,h,d,y);if(y==="y"){var S=b.year(),w=b.month(),T=this.isIntercalaryMonth(S,A),_=x&&T?this.toMonthIndex(S,A,!0):this.toMonthIndex(S,A,!1);_!==w&&b.month(_)}return b}});var t=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,n=/^\d?\d[iI]?/m,a=/^??[]?/m,i=/^??[]?/m;l.calendars.chinese=p;var r=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],f=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function u(h,d,y,m){var g,x;if(typeof h=="object")g=h,x=d||{};else{var A=typeof h=="number"&&h>=1888&&h<=2111;if(!A)throw new Error("Solar year outside range 1888-2111");var b=typeof d=="number"&&d>=1&&d<=12;if(!b)throw new Error("Solar month outside range 1 - 12");var S=typeof y=="number"&&y>=1&&y<=31;if(!S)throw new Error("Solar day outside range 1 - 31");g={year:h,month:d,day:y},x=m||{}}var w=f[g.year-f[0]],T=g.year<<9|g.month<<5|g.day;x.year=T>=w?g.year:g.year-1,w=f[x.year-f[0]];var _=w>>9&4095,v=w>>5&15,P=w&31,M,E=new Date(_,v-1,P),D=new Date(g.year,g.month-1,g.day);M=Math.round((D-E)/(24*3600*1e3));var N=r[x.year-r[0]],O;for(O=0;O<13;O++){var I=N&1<<12-O?30:29;if(M<I)break;M-=I}var F=N>>13;return!F||O<F?(x.isIntercalary=!1,x.month=1+O):O===F?(x.isIntercalary=!0,x.month=O):(x.isIntercalary=!1,x.month=O),x.day=1+M,x}function s(h,d,y,m,g){var x,A;if(typeof h=="object")A=h,x=d||{};else{var b=typeof h=="number"&&h>=1888&&h<=2111;if(!b)throw new Error("Lunar year outside range 1888-2111");var S=typeof d=="number"&&d>=1&&d<=12;if(!S)throw new Error("Lunar month outside range 1 - 12");var w=typeof y=="number"&&y>=1&&y<=30;if(!w)throw new Error("Lunar day outside range 1 - 30");var T;typeof m=="object"?(T=!1,x=m):(T=!!m,x=g||{}),A={year:h,month:d,day:y,isIntercalary:T}}var _;_=A.day-1;var v=r[A.year-r[0]],P=v>>13,M;P&&(A.month>P||A.isIntercalary)?M=A.month:M=A.month-1;for(var E=0;E<M;E++){var D=v&1<<12-E?30:29;_+=D}var N=f[A.year-f[0]],O=N>>9&4095,I=N>>5&15,F=N&31,V=new Date(O,I-1,F+_);return x.year=V.getFullYear(),x.month=1+V.getMonth(),x.day=V.getDate(),x}},{"../main":346,"object-assign":247}],333:[function(e,k,z){var l=e("../main"),o=e("object-assign");function c(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}c.prototype=new l.baseCalendar,o(c.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(p){var t=this._validate(p,this.minMonth,this.minDay,l.local.invalidYear),p=t.year()+(t.year()<0?1:0);return p%4==3||p%4==-1},monthsInYear:function(p){return this._validate(p,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear),13},weekOfYear:function(p,t,n){var a=this.newDate(p,t,n);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(p,t){var n=this._validate(p,t,this.minDay,l.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===13&&this.leapYear(n.year())?1:0)},weekDay:function(p,t,n){return(this.dayOfWeek(p,t,n)||7)<6},toJD:function(p,t,n){var a=this._validate(p,t,n,l.local.invalidDate);return p=a.year(),p<0&&p++,a.day()+(a.month()-1)*30+(p-1)*365+Math.floor(p/4)+this.jdEpoch-1},fromJD:function(p){var t=Math.floor(p)+.5-this.jdEpoch,n=Math.floor((t-Math.floor((t+366)/1461))/365)+1;n<=0&&n--,t=Math.floor(p)+.5-this.newDate(n,1,1).toJD();var a=Math.floor(t/30)+1,i=t-(a-1)*30+1;return this.newDate(n,a,i)}}),l.calendars.coptic=c},{"../main":346,"object-assign":247}],334:[function(e,k,z){var l=e("../main"),o=e("object-assign");function c(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}c.prototype=new l.baseCalendar,o(c.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(t){return this._validate(t,this.minMonth,this.minDay,l.local.invalidYear),!1},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,l.local.invalidYear),13},daysInYear:function(t){return this._validate(t,this.minMonth,this.minDay,l.local.invalidYear),400},weekOfYear:function(t,n,a){var i=this.newDate(t,n,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/8)+1},daysInMonth:function(t,n){var a=this._validate(t,n,this.minDay,l.local.invalidMonth);return this.daysPerMonth[a.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(t,n,a){var i=this._validate(t,n,a,l.local.invalidDate);return(i.day()+1)%8},weekDay:function(t,n,a){var i=this.dayOfWeek(t,n,a);return i>=2&&i<=6},extraInfo:function(t,n,a){var i=this._validate(t,n,a,l.local.invalidDate);return{century:p[Math.floor((i.year()-1)/100)+1]||""}},toJD:function(t,n,a){var i=this._validate(t,n,a,l.local.invalidDate);return t=i.year()+(i.year()<0?1:0),n=i.month(),a=i.day(),a+(n>1?16:0)+(n>2?(n-2)*32:0)+(t-1)*400+this.jdEpoch-1},fromJD:function(t){t=Math.floor(t+.5)-Math.floor(this.jdEpoch)-1;var n=Math.floor(t/400)+1;t-=(n-1)*400,t+=t>15?16:0;var a=Math.floor(t/32)+1,i=t-(a-1)*32+1;return this.newDate(n<=0?n-1:n,a,i)}});var p={20:"Fruitbat",21:"Anchovy"};l.calendars.discworld=c},{"../main":346,"object-assign":247}],335:[function(e,k,z){var l=e("../main"),o=e("object-assign");function c(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}c.prototype=new l.baseCalendar,o(c.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(p){var t=this._validate(p,this.minMonth,this.minDay,l.local.invalidYear),p=t.year()+(t.year()<0?1:0);return p%4==3||p%4==-1},monthsInYear:function(p){return this._validate(p,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear),13},weekOfYear:function(p,t,n){var a=this.newDate(p,t,n);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(p,t){var n=this._validate(p,t,this.minDay,l.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===13&&this.leapYear(n.year())?1:0)},weekDay:function(p,t,n){return(this.dayOfWeek(p,t,n)||7)<6},toJD:function(p,t,n){var a=this._validate(p,t,n,l.local.invalidDate);return p=a.year(),p<0&&p++,a.day()+(a.month()-1)*30+(p-1)*365+Math.floor(p/4)+this.jdEpoch-1},fromJD:function(p){var t=Math.floor(p)+.5-this.jdEpoch,n=Math.floor((t-Math.floor((t+366)/1461))/365)+1;n<=0&&n--,t=Math.floor(p)+.5-this.newDate(n,1,1).toJD();var a=Math.floor(t/30)+1,i=t-(a-1)*30+1;return this.newDate(n,a,i)}}),l.calendars.ethiopian=c},{"../main":346,"object-assign":247}],336:[function(e,k,z){var l=e("../main"),o=e("object-assign");function c(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}c.prototype=new l.baseCalendar,o(c.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var n=this._validate(t,this.minMonth,this.minDay,l.local.invalidYear);return this._leapYear(n.year())},_leapYear:function(t){return t=t<0?t+1:t,p(t*7+1,19)<7},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,l.local.invalidYear),this._leapYear(t.year?t.year():t)?13:12},weekOfYear:function(t,n,a){var i=this.newDate(t,n,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(t){var n=this._validate(t,this.minMonth,this.minDay,l.local.invalidYear);return t=n.year(),this.toJD(t===-1?1:t+1,7,1)-this.toJD(t,7,1)},daysInMonth:function(t,n){return t.year&&(n=t.month(),t=t.year()),this._validate(t,n,this.minDay,l.local.invalidMonth),n===12&&this.leapYear(t)||n===8&&p(this.daysInYear(t),10)===5?30:n===9&&p(this.daysInYear(t),10)===3?29:this.daysPerMonth[n-1]},weekDay:function(t,n,a){return this.dayOfWeek(t,n,a)!==6},extraInfo:function(t,n,a){var i=this._validate(t,n,a,l.local.invalidDate);return{yearType:(this.leapYear(i)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(i)%10-3]}},toJD:function(t,n,a){var i=this._validate(t,n,a,l.local.invalidDate);t=i.year(),n=i.month(),a=i.day();var r=t<=0?t+1:t,f=this.jdEpoch+this._delay1(r)+this._delay2(r)+a+1;if(n<7){for(var u=7;u<=this.monthsInYear(t);u++)f+=this.daysInMonth(t,u);for(var u=1;u<n;u++)f+=this.daysInMonth(t,u)}else for(var u=7;u<n;u++)f+=this.daysInMonth(t,u);return f},_delay1:function(t){var n=Math.floor((235*t-234)/19),a=12084+13753*n,i=n*29+Math.floor(a/25920);return p(3*(i+1),7)<3&&i++,i},_delay2:function(t){var n=this._delay1(t-1),a=this._delay1(t),i=this._delay1(t+1);return i-a==356?2:a-n==382?1:0},fromJD:function(t){t=Math.floor(t)+.5;for(var n=Math.floor((t-this.jdEpoch)*98496/35975351)-1;t>=this.toJD(n===-1?1:n+1,7,1);)n++;for(var a=t<this.toJD(n,1,1)?7:1;t>this.toJD(n,a,this.daysInMonth(n,a));)a++;var i=t-this.toJD(n,a,1)+1;return this.newDate(n,a,i)}});function p(t,n){return t-n*Math.floor(t/n)}l.calendars.hebrew=c},{"../main":346,"object-assign":247}],337:[function(e,k,z){var l=e("../main"),o=e("object-assign");function c(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}c.prototype=new l.baseCalendar,o(c.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(p){var t=this._validate(p,this.minMonth,this.minDay,l.local.invalidYear);return(t.year()*11+14)%30<11},weekOfYear:function(p,t,n){var a=this.newDate(p,t,n);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(p){return this.leapYear(p)?355:354},daysInMonth:function(p,t){var n=this._validate(p,t,this.minDay,l.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===12&&this.leapYear(n.year())?1:0)},weekDay:function(p,t,n){return this.dayOfWeek(p,t,n)!==5},toJD:function(p,t,n){var a=this._validate(p,t,n,l.local.invalidDate);return p=a.year(),t=a.month(),n=a.day(),p=p<=0?p+1:p,n+Math.ceil(29.5*(t-1))+(p-1)*354+Math.floor((3+11*p)/30)+this.jdEpoch-1},fromJD:function(p){p=Math.floor(p)+.5;var t=Math.floor((30*(p-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var n=Math.min(12,Math.ceil((p-29-this.toJD(t,1,1))/29.5)+1),a=p-this.toJD(t,n,1)+1;return this.newDate(t,n,a)}}),l.calendars.islamic=c},{"../main":346,"object-assign":247}],338:[function(e,k,z){var l=e("../main"),o=e("object-assign");function c(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}c.prototype=new l.baseCalendar,o(c.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(p){var t=this._validate(p,this.minMonth,this.minDay,l.local.invalidYear),p=t.year()<0?t.year()+1:t.year();return p%4==0},weekOfYear:function(p,t,n){var a=this.newDate(p,t,n);return a.add(4-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(p,t){var n=this._validate(p,t,this.minDay,l.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===2&&this.leapYear(n.year())?1:0)},weekDay:function(p,t,n){return(this.dayOfWeek(p,t,n)||7)<6},toJD:function(p,t,n){var a=this._validate(p,t,n,l.local.invalidDate);return p=a.year(),t=a.month(),n=a.day(),p<0&&p++,t<=2&&(p--,t+=12),Math.floor(365.25*(p+4716))+Math.floor(30.6001*(t+1))+n-1524.5},fromJD:function(p){var t=Math.floor(p+.5),n=t+1524,a=Math.floor((n-122.1)/365.25),i=Math.floor(365.25*a),r=Math.floor((n-i)/30.6001),f=r-Math.floor(r<14?1:13),u=a-Math.floor(f>2?4716:4715),s=n-i-Math.floor(30.6001*r);return u<=0&&u--,this.newDate(u,f,s)}}),l.calendars.julian=c},{"../main":346,"object-assign":247}],339:[function(e,k,z){var l=e("../main"),o=e("object-assign");function c(n){this.local=this.regionalOptions[n||""]||this.regionalOptions[""]}c.prototype=new l.baseCalendar,o(c.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(n){return this._validate(n,this.minMonth,this.minDay,l.local.invalidYear),!1},formatYear:function(n){var a=this._validate(n,this.minMonth,this.minDay,l.local.invalidYear);n=a.year();var i=Math.floor(n/400);n=n%400,n+=n<0?400:0;var r=Math.floor(n/20);return i+"."+r+"."+n%20},forYear:function(n){if(n=n.split("."),n.length<3)throw"Invalid Mayan year";for(var a=0,i=0;i<n.length;i++){var r=parseInt(n[i],10);if(Math.abs(r)>19||i>0&&r<0)throw"Invalid Mayan year";a=a*20+r}return a},monthsInYear:function(n){return this._validate(n,this.minMonth,this.minDay,l.local.invalidYear),18},weekOfYear:function(n,a,i){return this._validate(n,a,i,l.local.invalidDate),0},daysInYear:function(n){return this._validate(n,this.minMonth,this.minDay,l.local.invalidYear),360},daysInMonth:function(n,a){return this._validate(n,a,this.minDay,l.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(n,a,i){var r=this._validate(n,a,i,l.local.invalidDate);return r.day()},weekDay:function(n,a,i){return this._validate(n,a,i,l.local.invalidDate),!0},extraInfo:function(n,a,i){var r=this._validate(n,a,i,l.local.invalidDate),f=r.toJD(),u=this._toHaab(f),s=this._toTzolkin(f);return{haabMonthName:this.local.haabMonths[u[0]-1],haabMonth:u[0],haabDay:u[1],tzolkinDayName:this.local.tzolkinMonths[s[0]-1],tzolkinDay:s[0],tzolkinTrecena:s[1]}},_toHaab:function(n){n-=this.jdEpoch;var a=p(n+8+(18-1)*20,365);return[Math.floor(a/20)+1,p(a,20)]},_toTzolkin:function(n){return n-=this.jdEpoch,[t(n+20,20),t(n+4,13)]},toJD:function(n,a,i){var r=this._validate(n,a,i,l.local.invalidDate);return r.day()+r.month()*20+r.year()*360+this.jdEpoch},fromJD:function(n){n=Math.floor(n)+.5-this.jdEpoch;var a=Math.floor(n/360);n=n%360,n+=n<0?360:0;var i=Math.floor(n/20),r=n%20;return this.newDate(a,i,r)}});function p(n,a){return n-a*Math.floor(n/a)}function t(n,a){return p(n-1,a)+1}l.calendars.mayan=c},{"../main":346,"object-assign":247}],340:[function(e,k,z){var l=e("../main"),o=e("object-assign");function c(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}c.prototype=new l.baseCalendar;var p=l.instance("gregorian");o(c.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var n=this._validate(t,this.minMonth,this.minDay,l.local.invalidYear||l.regionalOptions[""].invalidYear);return p.leapYear(n.year()+(n.year()<1?1:0)+1469)},weekOfYear:function(t,n,a){var i=this.newDate(t,n,a);return i.add(1-(i.dayOfWeek()||7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(t,n){var a=this._validate(t,n,this.minDay,l.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(t,n,a){return(this.dayOfWeek(t,n,a)||7)<6},toJD:function(t,n,a){var i=this._validate(t,n,a,l.local.invalidMonth),t=i.year();t<0&&t++;for(var r=i.day(),f=1;f<i.month();f++)r+=this.daysPerMonth[f-1];return r+p.toJD(t+1468,3,13)},fromJD:function(t){t=Math.floor(t+.5);for(var n=Math.floor((t-(this.jdEpoch-1))/366);t>=this.toJD(n+1,1,1);)n++;for(var a=t-Math.floor(this.toJD(n,1,1)+.5)+1,i=1;a>this.daysInMonth(n,i);)a-=this.daysInMonth(n,i),i++;return this.newDate(n,i,a)}}),l.calendars.nanakshahi=c},{"../main":346,"object-assign":247}],341:[function(e,k,z){var l=e("../main"),o=e("object-assign");function c(p){this.local=this.regionalOptions[p||""]||this.regionalOptions[""]}c.prototype=new l.baseCalendar,o(c.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(p){return this.daysInYear(p)!==this.daysPerYear},weekOfYear:function(p,t,n){var a=this.newDate(p,t,n);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(p){var t=this._validate(p,this.minMonth,this.minDay,l.local.invalidYear);if(p=t.year(),typeof this.NEPALI_CALENDAR_DATA[p]=="undefined")return this.daysPerYear;for(var n=0,a=this.minMonth;a<=12;a++)n+=this.NEPALI_CALENDAR_DATA[p][a];return n},daysInMonth:function(p,t){return p.year&&(t=p.month(),p=p.year()),this._validate(p,t,this.minDay,l.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[p]=="undefined"?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[p][t]},weekDay:function(p,t,n){return this.dayOfWeek(p,t,n)!==6},toJD:function(p,t,n){var a=this._validate(p,t,n,l.local.invalidDate);p=a.year(),t=a.month(),n=a.day();var i=l.instance(),r=0,f=t,u=p;this._createMissingCalendarData(p);var s=p-(f>9||f===9&&n>=this.NEPALI_CALENDAR_DATA[u][0]?56:57);for(t!==9&&(r=n,f--);f!==9;)f<=0&&(f=12,u--),r+=this.NEPALI_CALENDAR_DATA[u][f],f--;return t===9?(r+=n-this.NEPALI_CALENDAR_DATA[u][0],r<0&&(r+=i.daysInYear(s))):r+=this.NEPALI_CALENDAR_DATA[u][9]-this.NEPALI_CALENDAR_DATA[u][0],i.newDate(s,1,1).add(r,"d").toJD()},fromJD:function(p){var t=l.instance(),n=t.fromJD(p),a=n.year(),i=n.dayOfYear(),r=a+56;this._createMissingCalendarData(r);for(var f=9,u=this.NEPALI_CALENDAR_DATA[r][0],s=this.NEPALI_CALENDAR_DATA[r][f]-u+1;i>s;)f++,f>12&&(f=1,r++),s+=this.NEPALI_CALENDAR_DATA[r][f];var h=this.NEPALI_CALENDAR_DATA[r][f]-(s-i);return this.newDate(r,f,h)},_createMissingCalendarData:function(p){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var n=p-1;n<p+2;n++)typeof this.NEPALI_CALENDAR_DATA[n]=="undefined"&&(this.NEPALI_CALENDAR_DATA[n]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),l.calendars.nepali=c},{"../main":346,"object-assign":247}],342:[function(e,k,z){var l=e("../main"),o=e("object-assign");function c(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}c.prototype=new l.baseCalendar,o(c.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(t){var n=this._validate(t,this.minMonth,this.minDay,l.local.invalidYear);return((n.year()-(n.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(t,n,a){var i=this.newDate(t,n,a);return i.add(-((i.dayOfWeek()+1)%7),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInMonth:function(t,n){var a=this._validate(t,n,this.minDay,l.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(t,n,a){return this.dayOfWeek(t,n,a)!==5},toJD:function(t,n,a){var i=this._validate(t,n,a,l.local.invalidDate);t=i.year(),n=i.month(),a=i.day();var r=t-(t>=0?474:473),f=474+p(r,2820);return a+(n<=7?(n-1)*31:(n-1)*30+6)+Math.floor((f*682-110)/2816)+(f-1)*365+Math.floor(r/2820)*1029983+this.jdEpoch-1},fromJD:function(t){t=Math.floor(t)+.5;var n=t-this.toJD(475,1,1),a=Math.floor(n/1029983),i=p(n,1029983),r=2820;if(i!==1029982){var f=Math.floor(i/366),u=p(i,366);r=Math.floor((2134*f+2816*u+2815)/1028522)+f+1}var s=r+2820*a+474;s=s<=0?s-1:s;var h=t-this.toJD(s,1,1)+1,d=h<=186?Math.ceil(h/31):Math.ceil((h-6)/30),y=t-this.toJD(s,d,1)+1;return this.newDate(s,d,y)}});function p(t,n){return t-n*Math.floor(t/n)}l.calendars.persian=c,l.calendars.jalali=c},{"../main":346,"object-assign":247}],343:[function(e,k,z){var l=e("../main"),o=e("object-assign"),c=l.instance();function p(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}p.prototype=new l.baseCalendar,o(p.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(t){var n=this._validate(t,this.minMonth,this.minDay,l.local.invalidYear),t=this._t2gYear(n.year());return c.leapYear(t)},weekOfYear:function(t,n,a){var i=this._validate(t,this.minMonth,this.minDay,l.local.invalidYear),t=this._t2gYear(i.year());return c.weekOfYear(t,i.month(),i.day())},daysInMonth:function(t,n){var a=this._validate(t,n,this.minDay,l.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(t,n,a){return(this.dayOfWeek(t,n,a)||7)<6},toJD:function(t,n,a){var i=this._validate(t,n,a,l.local.invalidDate),t=this._t2gYear(i.year());return c.toJD(t,i.month(),i.day())},fromJD:function(t){var n=c.fromJD(t),a=this._g2tYear(n.year());return this.newDate(a,n.month(),n.day())},_t2gYear:function(t){return t+this.yearsOffset+(t>=-this.yearsOffset&&t<=-1?1:0)},_g2tYear:function(t){return t-this.yearsOffset-(t>=1&&t<=this.yearsOffset?1:0)}}),l.calendars.taiwan=p},{"../main":346,"object-assign":247}],344:[function(e,k,z){var l=e("../main"),o=e("object-assign"),c=l.instance();function p(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}p.prototype=new l.baseCalendar,o(p.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var n=this._validate(t,this.minMonth,this.minDay,l.local.invalidYear),t=this._t2gYear(n.year());return c.leapYear(t)},weekOfYear:function(t,n,a){var i=this._validate(t,this.minMonth,this.minDay,l.local.invalidYear),t=this._t2gYear(i.year());return c.weekOfYear(t,i.month(),i.day())},daysInMonth:function(t,n){var a=this._validate(t,n,this.minDay,l.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(t,n,a){return(this.dayOfWeek(t,n,a)||7)<6},toJD:function(t,n,a){var i=this._validate(t,n,a,l.local.invalidDate),t=this._t2gYear(i.year());return c.toJD(t,i.month(),i.day())},fromJD:function(t){var n=c.fromJD(t),a=this._g2tYear(n.year());return this.newDate(a,n.month(),n.day())},_t2gYear:function(t){return t-this.yearsOffset-(t>=1&&t<=this.yearsOffset?1:0)},_g2tYear:function(t){return t+this.yearsOffset+(t>=-this.yearsOffset&&t<=-1?1:0)}}),l.calendars.thai=p},{"../main":346,"object-assign":247}],345:[function(e,k,z){var l=e("../main"),o=e("object-assign");function c(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}c.prototype=new l.baseCalendar,o(c.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(t){var n=this._validate(t,this.minMonth,this.minDay,l.local.invalidYear);return this.daysInYear(n.year())===355},weekOfYear:function(t,n,a){var i=this.newDate(t,n,a);return i.add(-i.dayOfWeek(),"d"),Math.floor((i.dayOfYear()-1)/7)+1},daysInYear:function(t){for(var n=0,a=1;a<=12;a++)n+=this.daysInMonth(t,a);return n},daysInMonth:function(t,n){for(var a=this._validate(t,n,this.minDay,l.local.invalidMonth),i=a.toJD()-24e5+.5,r=0,f=0;f<p.length;f++){if(p[f]>i)return p[r]-p[r-1];r++}return 30},weekDay:function(t,n,a){return this.dayOfWeek(t,n,a)!==5},toJD:function(t,n,a){var i=this._validate(t,n,a,l.local.invalidDate),r=12*(i.year()-1)+i.month()-15292,f=i.day()+p[r-1]-1;return f+24e5-.5},fromJD:function(t){for(var n=t-24e5+.5,a=0,i=0;i<p.length&&!(p[i]>n);i++)a++;var r=a+15292,f=Math.floor((r-1)/12),u=f+1,s=r-12*f,h=n-p[a-1]+1;return this.newDate(u,s,h)},isValid:function(t,n,a){var i=l.baseCalendar.prototype.isValid.apply(this,arguments);return i&&(t=t.year!=null?t.year:t,i=t>=1276&&t<=1500),i},_validate:function(t,n,a,i){var r=l.baseCalendar.prototype._validate.apply(this,arguments);if(r.year<1276||r.year>1500)throw i.replace(/\{0\}/,this.local.name);return r}}),l.calendars.ummalqura=c;var p=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":346,"object-assign":247}],346:[function(e,k,z){var l=e("object-assign");function o(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}l(o.prototype,{instance:function(i,r){i=(i||"gregorian").toLowerCase(),r=r||"";var f=this._localCals[i+"-"+r];if(!f&&this.calendars[i]&&(f=new this.calendars[i](r),this._localCals[i+"-"+r]=f),!f)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,i);return f},newDate:function(i,r,f,u,s){return u=(i!=null&&i.year?i.calendar():typeof u=="string"?this.instance(u,s):u)||this.instance(),u.newDate(i,r,f)},substituteDigits:function(i){return function(r){return(r+"").replace(/[0-9]/g,function(f){return i[f]})}},substituteChineseDigits:function(i,r){return function(f){for(var u="",s=0;f>0;){var h=f%10;u=(h===0?"":i[h]+r[s])+u,s++,f=Math.floor(f/10)}return u.indexOf(i[1]+r[1])===0&&(u=u.substr(1)),u||i[0]}}});function c(i,r,f,u){if(this._calendar=i,this._year=r,this._month=f,this._day=u,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(a.local.invalidDate||a.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function p(i,r){return i=""+i,"000000".substring(0,r-i.length)+i}l(c.prototype,{newDate:function(i,r,f){return this._calendar.newDate(i??this,r,f)},year:function(i){return arguments.length===0?this._year:this.set(i,"y")},month:function(i){return arguments.length===0?this._month:this.set(i,"m")},day:function(i){return arguments.length===0?this._day:this.set(i,"d")},date:function(i,r,f){if(!this._calendar.isValid(i,r,f))throw(a.local.invalidDate||a.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=i,this._month=r,this._day=f,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(i,r){return this._calendar.add(this,i,r)},set:function(i,r){return this._calendar.set(this,i,r)},compareTo:function(i){if(this._calendar.name!==i._calendar.name)throw(a.local.differentCalendars||a.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,i._calendar.local.name);var r=this._year!==i._year?this._year-i._year:this._month!==i._month?this.monthOfYear()-i.monthOfYear():this._day-i._day;return r===0?0:r<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(i){return this._calendar.fromJD(i)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(i){return this._calendar.fromJSDate(i)},toString:function(){return(this.year()<0?"-":"")+p(Math.abs(this.year()),4)+"-"+p(this.month(),2)+"-"+p(this.day(),2)}});function t(){this.shortYearCutoff="+10"}l(t.prototype,{_validateLevel:0,newDate:function(i,r,f){return i==null?this.today():(i.year&&(this._validate(i,r,f,a.local.invalidDate||a.regionalOptions[""].invalidDate),f=i.day(),r=i.month(),i=i.year()),new c(this,i,r,f))},today:function(){return this.fromJSDate(new Date)},epoch:function(i){var r=this._validate(i,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return r.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(i){var r=this._validate(i,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return(r.year()<0?"-":"")+p(Math.abs(r.year()),4)},monthsInYear:function(i){return this._validate(i,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),12},monthOfYear:function(i,r){var f=this._validate(i,r,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth);return(f.month()+this.monthsInYear(f)-this.firstMonth)%this.monthsInYear(f)+this.minMonth},fromMonthOfYear:function(i,r){var f=(r+this.firstMonth-2*this.minMonth)%this.monthsInYear(i)+this.minMonth;return this._validate(i,f,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth),f},daysInYear:function(i){var r=this._validate(i,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return this.leapYear(r)?366:365},dayOfYear:function(i,r,f){var u=this._validate(i,r,f,a.local.invalidDate||a.regionalOptions[""].invalidDate);return u.toJD()-this.newDate(u.year(),this.fromMonthOfYear(u.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(i,r,f){var u=this._validate(i,r,f,a.local.invalidDate||a.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(u))+2)%this.daysInWeek()},extraInfo:function(i,r,f){return this._validate(i,r,f,a.local.invalidDate||a.regionalOptions[""].invalidDate),{}},add:function(i,r,f){return this._validate(i,this.minMonth,this.minDay,a.local.invalidDate||a.regionalOptions[""].invalidDate),this._correctAdd(i,this._add(i,r,f),r,f)},_add:function(i,r,f){if(this._validateLevel++,f==="d"||f==="w"){var u=i.toJD()+r*(f==="w"?this.daysInWeek():1),s=i.calendar().fromJD(u);return this._validateLevel--,[s.year(),s.month(),s.day()]}try{var h=i.year()+(f==="y"?r:0),d=i.monthOfYear()+(f==="m"?r:0),s=i.day(),y=function(x){for(;d<x.minMonth;)h--,d+=x.monthsInYear(h);for(var A=x.monthsInYear(h);d>A-1+x.minMonth;)h++,d-=A,A=x.monthsInYear(h)};f==="y"?(i.month()!==this.fromMonthOfYear(h,d)&&(d=this.newDate(h,i.month(),this.minDay).monthOfYear()),d=Math.min(d,this.monthsInYear(h)),s=Math.min(s,this.daysInMonth(h,this.fromMonthOfYear(h,d)))):f==="m"&&(y(this),s=Math.min(s,this.daysInMonth(h,this.fromMonthOfYear(h,d))));var m=[h,this.fromMonthOfYear(h,d),s];return this._validateLevel--,m}catch(g){throw this._validateLevel--,g}},_correctAdd:function(i,r,f,u){if(!this.hasYearZero&&(u==="y"||u==="m")&&(r[0]===0||i.year()>0!=r[0]>0)){var s={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[u],h=f<0?-1:1;r=this._add(i,f*s[0]+h*s[1],s[2])}return i.date(r[0],r[1],r[2])},set:function(i,r,f){this._validate(i,this.minMonth,this.minDay,a.local.invalidDate||a.regionalOptions[""].invalidDate);var u=f==="y"?r:i.year(),s=f==="m"?r:i.month(),h=f==="d"?r:i.day();return(f==="y"||f==="m")&&(h=Math.min(h,this.daysInMonth(u,s))),i.date(u,s,h)},isValid:function(i,r,f){this._validateLevel++;var u=this.hasYearZero||i!==0;if(u){var s=this.newDate(i,r,this.minDay);u=r>=this.minMonth&&r-this.minMonth<this.monthsInYear(s)&&f>=this.minDay&&f-this.minDay<this.daysInMonth(s)}return this._validateLevel--,u},toJSDate:function(i,r,f){var u=this._validate(i,r,f,a.local.invalidDate||a.regionalOptions[""].invalidDate);return a.instance().fromJD(this.toJD(u)).toJSDate()},fromJSDate:function(i){return this.fromJD(a.instance().fromJSDate(i).toJD())},_validate:function(i,r,f,u){if(i.year){if(this._validateLevel===0&&this.name!==i.calendar().name)throw(a.local.differentCalendars||a.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,i.calendar().local.name);return i}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(i,r,f))throw u.replace(/\{0\}/,this.local.name);var s=this.newDate(i,r,f);return this._validateLevel--,s}catch(h){throw this._validateLevel--,h}}});function n(i){this.local=this.regionalOptions[i]||this.regionalOptions[""]}n.prototype=new t,l(n.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(i){var r=this._validate(i,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),i=r.year()+(r.year()<0?1:0);return i%4==0&&(i%100!=0||i%400==0)},weekOfYear:function(i,r,f){var u=this.newDate(i,r,f);return u.add(4-(u.dayOfWeek()||7),"d"),Math.floor((u.dayOfYear()-1)/7)+1},daysInMonth:function(i,r){var f=this._validate(i,r,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===2&&this.leapYear(f.year())?1:0)},weekDay:function(i,r,f){return(this.dayOfWeek(i,r,f)||7)<6},toJD:function(i,r,f){var u=this._validate(i,r,f,a.local.invalidDate||a.regionalOptions[""].invalidDate);i=u.year(),r=u.month(),f=u.day(),i<0&&i++,r<3&&(r+=12,i--);var s=Math.floor(i/100),h=2-s+Math.floor(s/4);return Math.floor(365.25*(i+4716))+Math.floor(30.6001*(r+1))+f+h-1524.5},fromJD:function(i){var r=Math.floor(i+.5),f=Math.floor((r-186721625e-2)/36524.25);f=r+1+f-Math.floor(f/4);var u=f+1524,s=Math.floor((u-122.1)/365.25),h=Math.floor(365.25*s),d=Math.floor((u-h)/30.6001),y=u-h-Math.floor(d*30.6001),m=d-(d>13.5?13:1),g=s-(m>2.5?4716:4715);return g<=0&&g--,this.newDate(g,m,y)},toJSDate:function(i,r,f){var u=this._validate(i,r,f,a.local.invalidDate||a.regionalOptions[""].invalidDate),s=new Date(u.year(),u.month()-1,u.day());return s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0),s.setHours(s.getHours()>12?s.getHours()+2:0),s},fromJSDate:function(i){return this.newDate(i.getFullYear(),i.getMonth()+1,i.getDate())}});var a=k.exports=new o;a.cdate=c,a.baseCalendar=t,a.calendars.gregorian=n},{"object-assign":247}],347:[function(e,k,z){var l=e("object-assign"),o=e("./main");l(o.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),o.local=o.regionalOptions[""],l(o.cdate.prototype,{formatDate:function(c,p){return typeof c!="string"&&(p=c,c=""),this._calendar.formatDate(c||"",this,p)}}),l(o.baseCalendar.prototype,{UNIX_EPOCH:o.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:o.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(c,p,t){if(typeof c!="string"&&(t=p,p=c,c=""),!p)return"";if(p.calendar()!==this)throw o.local.invalidFormat||o.regionalOptions[""].invalidFormat;c=c||this.local.dateFormat,t=t||{};var n=t.dayNamesShort||this.local.dayNamesShort,a=t.dayNames||this.local.dayNames,i=t.monthNumbers||this.local.monthNumbers,r=t.monthNamesShort||this.local.monthNamesShort,f=t.monthNames||this.local.monthNames;t.calculateWeek||this.local.calculateWeek;for(var u=function(w,T){for(var _=1;S+_<c.length&&c.charAt(S+_)===w;)_++;return S+=_-1,Math.floor(_/(T||1))>1},s=function(w,T,_,v){var P=""+T;if(u(w,v))for(;P.length<_;)P="0"+P;return P},h=function(w,T,_,v){return u(w)?v[T]:_[T]},d=this,y=function(w){return typeof i=="function"?i.call(d,w,u("m")):x(s("m",w.month(),2))},m=function(w,T){return T?typeof f=="function"?f.call(d,w):f[w.month()-d.minMonth]:typeof r=="function"?r.call(d,w):r[w.month()-d.minMonth]},g=this.local.digits,x=function(w){return t.localNumbers&&g?g(w):w},A="",b=!1,S=0;S<c.length;S++)if(b)c.charAt(S)==="'"&&!u("'")?b=!1:A+=c.charAt(S);else switch(c.charAt(S)){case"d":A+=x(s("d",p.day(),2));break;case"D":A+=h("D",p.dayOfWeek(),n,a);break;case"o":A+=s("o",p.dayOfYear(),3);break;case"w":A+=s("w",p.weekOfYear(),2);break;case"m":A+=y(p);break;case"M":A+=m(p,u("M"));break;case"y":A+=u("y",2)?p.year():(p.year()%100<10?"0":"")+p.year()%100;break;case"Y":u("Y",2),A+=p.formatYear();break;case"J":A+=p.toJD();break;case"@":A+=(p.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":A+=(p.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":u("'")?A+="'":b=!0;break;default:A+=c.charAt(S)}return A},parseDate:function(c,p,t){if(p==null)throw o.local.invalidArguments||o.regionalOptions[""].invalidArguments;if(p=typeof p=="object"?p.toString():p+"",p==="")return null;c=c||this.local.dateFormat,t=t||{};var n=t.shortYearCutoff||this.shortYearCutoff;n=typeof n!="string"?n:this.today().year()%100+parseInt(n,10);for(var a=t.dayNamesShort||this.local.dayNamesShort,i=t.dayNames||this.local.dayNames,r=t.parseMonth||this.local.parseMonth,f=t.monthNumbers||this.local.monthNumbers,u=t.monthNamesShort||this.local.monthNamesShort,s=t.monthNames||this.local.monthNames,h=-1,d=-1,y=-1,m=-1,g=-1,x=!1,A=!1,b=function(O,I){for(var F=1;E+F<c.length&&c.charAt(E+F)===O;)F++;return E+=F-1,Math.floor(F/(I||1))>1},S=function(O,I){var F=b(O,I),V=[2,3,F?4:2,F?4:2,10,11,20]["oyYJ@!".indexOf(O)+1],U=new RegExp("^-?\\d{1,"+V+"}"),j=p.substring(M).match(U);if(!j)throw(o.local.missingNumberAt||o.regionalOptions[""].missingNumberAt).replace(/\{0\}/,M);return M+=j[0].length,parseInt(j[0],10)},w=this,T=function(){if(typeof f=="function"){b("m");var O=f.call(w,p.substring(M));return M+=O.length,O}return S("m")},_=function(O,I,F,V){for(var U=b(O,V)?F:I,j=0;j<U.length;j++)if(p.substr(M,U[j].length).toLowerCase()===U[j].toLowerCase())return M+=U[j].length,j+w.minMonth;throw(o.local.unknownNameAt||o.regionalOptions[""].unknownNameAt).replace(/\{0\}/,M)},v=function(){if(typeof s=="function"){var O=b("M")?s.call(w,p.substring(M)):u.call(w,p.substring(M));return M+=O.length,O}return _("M",u,s)},P=function(){if(p.charAt(M)!==c.charAt(E))throw(o.local.unexpectedLiteralAt||o.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,M);M++},M=0,E=0;E<c.length;E++)if(A)c.charAt(E)==="'"&&!b("'")?A=!1:P();else switch(c.charAt(E)){case"d":m=S("d");break;case"D":_("D",a,i);break;case"o":g=S("o");break;case"w":S("w");break;case"m":y=T();break;case"M":y=v();break;case"y":var D=E;x=!b("y",2),E=D,d=S("y",2);break;case"Y":d=S("Y",2);break;case"J":h=S("J")+.5,p.charAt(M)==="."&&(M++,S("J"));break;case"@":h=S("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":h=S("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":M=p.length;break;case"'":b("'")?P():A=!0;break;default:P()}if(M<p.length)throw o.local.unexpectedText||o.regionalOptions[""].unexpectedText;if(d===-1?d=this.today().year():d<100&&x&&(d+=n===-1?1900:this.today().year()-this.today().year()%100-(d<=n?0:100)),typeof y=="string"&&(y=r.call(this,d,y)),g>-1){y=1,m=g;for(var N=this.daysInMonth(d,y);m>N;N=this.daysInMonth(d,y))y++,m-=N}return h>-1?this.fromJD(h):this.newDate(d,y,m)},determineDate:function(c,p,t,n,a){t&&typeof t!="object"&&(a=n,n=t,t=null),typeof n!="string"&&(a=n,n="");var i=this,r=function(f){try{return i.parseDate(n,f,a)}catch{}f=f.toLowerCase();for(var u=(f.match(/^c/)&&t?t.newDate():null)||i.today(),s=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,h=s.exec(f);h;)u.add(parseInt(h[1],10),h[2]||"d"),h=s.exec(f);return u};return p=p?p.newDate():null,c=c==null?p:typeof c=="string"?r(c):typeof c=="number"?isNaN(c)||c===1/0||c===-1/0?p:i.today().add(c,"d"):i.newDate(c),c}})},{"./main":346,"object-assign":247}],348:[function(e,k,z){k.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],349:[function(e,k,z){var l=e("./arrow_paths"),o=e("../../plots/font_attributes"),c=e("../../plots/cartesian/constants"),p=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),k.exports=p("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:o({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:l.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:l.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",c.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",c.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",c.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",c.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:o({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/font_attributes":585,"./arrow_paths":348}],350:[function(e,k,z){var l=e("../../lib"),o=e("../../plots/cartesian/axes"),c=e("./draw").draw;k.exports=function(a){var i=a._fullLayout,r=l.filterVisible(i.annotations);if(r.length&&a._fullData.length)return l.syncOrAsync([c,p],a)};function p(n){var a=n._fullLayout;l.filterVisible(a.annotations).forEach(function(i){var r=o.getFromId(n,i.xref),f=o.getFromId(n,i.yref),u=o.getRefType(i.xref),s=o.getRefType(i.yref);i._extremes={},u==="range"&&t(i,r),s==="range"&&t(i,f)})}function t(n,a){var i=a._id,r=i.charAt(0),f=n[r],u=n["a"+r],s=n[r+"ref"],h=n["a"+r+"ref"],d=n["_"+r+"padplus"],y=n["_"+r+"padminus"],m={x:1,y:-1}[r]*n[r+"shift"],g=3*n.arrowsize*n.arrowwidth||0,x=g+m,A=g-m,b=3*n.startarrowsize*n.arrowwidth||0,S=b+m,w=b-m,T;if(h===s){var _=o.findExtremes(a,[a.r2c(f)],{ppadplus:x,ppadminus:A}),v=o.findExtremes(a,[a.r2c(u)],{ppadplus:Math.max(d,S),ppadminus:Math.max(y,w)});T={min:[_.min[0],v.min[0]],max:[_.max[0],v.max[0]]}}else S=u?S+u:S,w=u?w-u:w,T=o.findExtremes(a,[a.r2c(f)],{ppadplus:Math.max(d,x,S),ppadminus:Math.max(y,A,w)});n._extremes[i]=T}},{"../../lib":503,"../../plots/cartesian/axes":554,"./draw":355}],351:[function(e,k,z){var l=e("../../lib"),o=e("../../registry"),c=e("../../plot_api/plot_template").arrayEditor;k.exports={hasClickToShow:p,onClick:t};function p(i,r){var f=n(i,r);return f.on.length>0||f.explicitOff.length>0}function t(i,r){var f=n(i,r),u=f.on,s=f.off.concat(f.explicitOff),h={},d=i._fullLayout.annotations,y,m;if(!!(u.length||s.length)){for(y=0;y<u.length;y++)m=c(i.layout,"annotations",d[u[y]]),m.modifyItem("visible",!0),l.extendFlat(h,m.getUpdateObj());for(y=0;y<s.length;y++)m=c(i.layout,"annotations",d[s[y]]),m.modifyItem("visible",!1),l.extendFlat(h,m.getUpdateObj());return o.call("update",i,{},h)}}function n(i,r){var f=i._fullLayout.annotations,u=[],s=[],h=[],d=(r||[]).length,y,m,g,x,A,b,S,w;for(y=0;y<f.length;y++)if(g=f[y],x=g.clicktoshow,x){for(m=0;m<d;m++)if(A=r[m],b=A.xaxis,S=A.yaxis,b._id===g.xref&&S._id===g.yref&&b.d2r(A.x)===a(g._xclick,b)&&S.d2r(A.y)===a(g._yclick,S)){g.visible?x==="onout"?w=s:w=h:w=u,w.push(y);break}m===d&&g.visible&&x==="onout"&&s.push(y)}return{on:u,off:s,explicitOff:h}}function a(i,r){return r.type==="log"?r.l2r(i):r.d2r(i)}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638}],352:[function(e,k,z){var l=e("../../lib"),o=e("../color");k.exports=function(p,t,n,a){a("opacity");var i=a("bgcolor"),r=a("bordercolor"),f=o.opacity(r);a("borderpad");var u=a("borderwidth"),s=a("showarrow");a("text",s?" ":n._dfltTitle.annotation),a("textangle"),l.coerceFont(a,"font",n.font),a("width"),a("align");var h=a("height");if(h&&a("valign"),s){var d=a("arrowside"),y,m;d.indexOf("end")!==-1&&(y=a("arrowhead"),m=a("arrowsize")),d.indexOf("start")!==-1&&(a("startarrowhead",y),a("startarrowsize",m)),a("arrowcolor",f?t.bordercolor:o.defaultLine),a("arrowwidth",(f&&u||1)*2),a("standoff"),a("startstandoff")}var g=a("hovertext"),x=n.hoverlabel||{};if(g){var A=a("hoverlabel.bgcolor",x.bgcolor||(o.opacity(i)?o.rgb(i):o.defaultLine)),b=a("hoverlabel.bordercolor",x.bordercolor||o.contrast(A));l.coerceFont(a,"hoverlabel.font",{family:x.font.family,size:x.font.size,color:x.font.color||b})}a("captureevents",!!g)}},{"../../lib":503,"../color":366}],353:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../lib/to_log_range");k.exports=function(p,t,n,a){t=t||{};var i=n==="log"&&t.type==="linear",r=n==="linear"&&t.type==="log";if(!(i||r))return;var f=p._fullLayout.annotations,u=t._id.charAt(0),s,h;function d(m){var g=s[m],x=null;i?x=o(g,t.range):x=Math.pow(10,g),l(x)||(x=null),a(h+m,x)}for(var y=0;y<f.length;y++)s=f[y],h="annotations["+y+"].",s[u+"ref"]===t._id&&d(u),s["a"+u+"ref"]===t._id&&d("a"+u)}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],354:[function(e,k,z){var l=e("../../lib"),o=e("../../plots/cartesian/axes"),c=e("../../plots/array_container_defaults"),p=e("./common_defaults"),t=e("./attributes");k.exports=function(i,r){c(i,r,{name:"annotations",handleItemDefaults:n})};function n(a,i,r){function f(P,M){return l.coerce(a,i,t,P,M)}var u=f("visible"),s=f("clicktoshow");if(!!(u||s)){p(a,i,r,f);for(var h=i.showarrow,d=["x","y"],y=[-10,-30],m={_fullLayout:r},g=0;g<2;g++){var x=d[g],A=o.coerceRef(a,i,m,x,"","paper");if(A!=="paper"){var b=o.getFromId(m,A);b._annIndices.push(i._index)}if(o.coercePosition(i,m,f,A,x,.5),h){var S="a"+x,w=o.coerceRef(a,i,m,S,"pixel",["pixel","paper"]);w!=="pixel"&&w!==A&&(w=i[S]="pixel");var T=w==="pixel"?y[g]:.4;o.coercePosition(i,m,f,w,S,T)}f(x+"anchor"),f(x+"shift")}if(l.noneOrAll(a,i,["x","y"]),h&&l.noneOrAll(a,i,["ax","ay"]),s){var _=f("xclick"),v=f("yclick");i._xclick=_===void 0?i.x:o.cleanPosition(_,m,i.xref),i._yclick=v===void 0?i.y:o.cleanPosition(v,m,i.yref)}}}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":349,"./common_defaults":352}],355:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../registry"),c=e("../../plots/plots"),p=e("../../lib"),t=p.strTranslate,n=e("../../plots/cartesian/axes"),a=e("../color"),i=e("../drawing"),r=e("../fx"),f=e("../../lib/svg_text_utils"),u=e("../../lib/setcursor"),s=e("../dragelement"),h=e("../../plot_api/plot_template").arrayEditor,d=e("./draw_arrow_head");k.exports={draw:y,drawOne:m,drawRaw:x};function y(A){var b=A._fullLayout;b._infolayer.selectAll(".annotation").remove();for(var S=0;S<b.annotations.length;S++)b.annotations[S].visible&&m(A,S);return c.previousPromises(A)}function m(A,b){var S=A._fullLayout,w=S.annotations[b]||{},T=n.getFromId(A,w.xref),_=n.getFromId(A,w.yref);T&&T.setScale(),_&&_.setScale(),x(A,w,b,!1,T,_)}function g(A,b,S,w,T){var _=T[S],v=T[S+"ref"],P=S.indexOf("y")!==-1,M=n.getRefType(v)==="domain",E=P?w.h:w.w;return A?M?_+(P?-b:b)/A._length:A.p2r(A.r2p(_)+b):_+(P?-b:b)/E}function x(A,b,S,w,T,_){var v=A._fullLayout,P=A._fullLayout._size,M=A._context.edits,E,D;w?(E="annotation-"+w,D=w+".annotations"):(E="annotation",D="annotations");var N=h(A.layout,D,b),O=N.modifyBase,I=N.modifyItem,F=N.getUpdateObj;v._infolayer.selectAll("."+E+'[data-index="'+S+'"]').remove();var V="clip"+v._uid+"_ann"+S;if(!b._input||b.visible===!1){l.selectAll("#"+V).remove();return}var U={x:{},y:{}},j=+b.textangle||0,Z=v._infolayer.append("g").classed(E,!0).attr("data-index",String(S)).style("opacity",b.opacity),te=Z.append("g").classed("annotation-text-g",!0),re=M[b.showarrow?"annotationTail":"annotationPosition"],W=b.captureevents||M.annotationText||re;function J(fe){var ye={index:S,annotation:b._input,fullAnnotation:b,event:fe};return w&&(ye.subplotId=w),ye}var le=te.append("g").style("pointer-events",W?"all":null).call(u,"pointer").on("click",function(){A._dragging=!1,A.emit("plotly_clickannotation",J(l.event))});b.hovertext&&le.on("mouseover",function(){var fe=b.hoverlabel,ye=fe.font,ce=this.getBoundingClientRect(),me=A.getBoundingClientRect();r.loneHover({x0:ce.left-me.left,x1:ce.right-me.left,y:(ce.top+ce.bottom)/2-me.top,text:b.hovertext,color:fe.bgcolor,borderColor:fe.bordercolor,fontFamily:ye.family,fontSize:ye.size,fontColor:ye.color},{container:v._hoverlayer.node(),outerContainer:v._paper.node(),gd:A})}).on("mouseout",function(){r.loneUnhover(v._hoverlayer.node())});var ue=b.borderwidth,se=b.borderpad,G=ue+se,Y=le.append("rect").attr("class","bg").style("stroke-width",ue+"px").call(a.stroke,b.bordercolor).call(a.fill,b.bgcolor),ee=b.width||b.height,$=v._topclips.selectAll("#"+V).data(ee?[0]:[]);$.enter().append("clipPath").classed("annclip",!0).attr("id",V).append("rect"),$.exit().remove();var K=b.font,Q=v._meta?p.templateString(b.text,v._meta):b.text,ae=le.append("text").classed("annotation-text",!0).text(Q);function ie(fe){return fe.call(i.font,K).attr({"text-anchor":{left:"start",right:"end"}[b.align]||"middle"}),f.convertToTspans(fe,A,oe),fe}function oe(){var fe=ae.selectAll("a");if(fe.size()===1&&fe.text()===ae.text()){var ye=le.insert("a",":first-child").attr({"xlink:xlink:href":fe.attr("xlink:href"),"xlink:xlink:show":fe.attr("xlink:show")}).style({cursor:"pointer"});ye.node().appendChild(Y.node())}var ce=le.select(".annotation-text-math-group"),me=!ce.empty(),xe=i.bBox((me?ce:ae).node()),ke=xe.width,Ae=xe.height,Oe=b.width||ke,He=b.height||Ae,Ge=Math.round(Oe+2*G),_e=Math.round(He+2*G);function Ie(Fr,Rr){return Rr==="auto"&&(Fr<1/3?Rr="left":Fr>2/3?Rr="right":Rr="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Rr]}for(var We=!1,et=["x","y"],Ne=0;Ne<et.length;Ne++){var De=et[Ne],Ve=b[De+"ref"]||De,dt=b["a"+De+"ref"],Dt={x:T,y:_}[De],Gt=(j+(De==="x"?0:-90))*Math.PI/180,Mt=Ge*Math.cos(Gt),zt=_e*Math.sin(Gt),Nt=Math.abs(Mt)+Math.abs(zt),Et=b[De+"anchor"],At=b[De+"shift"]*(De==="x"?1:-1),it=U[De],ht,$e,Ee,Xe,rt,ut=n.getRefType(Ve);if(Dt&&ut!=="domain"){var Pt=Dt.r2fraction(b[De]);(Pt<0||Pt>1)&&(dt===Ve?(Pt=Dt.r2fraction(b["a"+De]),(Pt<0||Pt>1)&&(We=!0)):We=!0),ht=Dt._offset+Dt.r2p(b[De]),Xe=.5}else{var kt=ut==="domain";De==="x"?(Ee=b[De],ht=kt?Dt._offset+Dt._length*Ee:ht=P.l+P.w*Ee):(Ee=1-b[De],ht=kt?Dt._offset+Dt._length*Ee:ht=P.t+P.h*Ee),Xe=b.showarrow?.5:Ee}if(b.showarrow){it.head=ht;var Bt=b["a"+De];if(rt=Mt*Ie(.5,b.xanchor)-zt*Ie(.5,b.yanchor),dt===Ve){var Xt=n.getRefType(dt);Xt==="domain"?(De==="y"&&(Bt=1-Bt),it.tail=Dt._offset+Dt._length*Bt):Xt==="paper"?De==="y"?(Bt=1-Bt,it.tail=P.t+P.h*Bt):it.tail=P.l+P.w*Bt:it.tail=Dt._offset+Dt.r2p(Bt),$e=rt}else it.tail=ht+Bt,$e=rt+Bt;it.text=it.tail+rt;var Ut=v[De==="x"?"width":"height"];if(Ve==="paper"&&(it.head=p.constrain(it.head,1,Ut-1)),dt==="pixel"){var Jt=-Math.max(it.tail-3,it.text),Je=Math.min(it.tail+3,it.text)-Ut;Jt>0?(it.tail+=Jt,it.text+=Jt):Je>0&&(it.tail-=Je,it.text-=Je)}it.tail+=At,it.head+=At}else rt=Nt*Ie(Xe,Et),$e=rt,it.text=ht+rt;it.text+=At,rt+=At,$e+=At,b["_"+De+"padplus"]=Nt/2+$e,b["_"+De+"padminus"]=Nt/2-$e,b["_"+De+"size"]=Nt,b["_"+De+"shift"]=rt}if(We){le.remove();return}var gt=0,Ct=0;if(b.align!=="left"&&(gt=(Oe-ke)*(b.align==="center"?.5:1)),b.valign!=="top"&&(Ct=(He-Ae)*(b.valign==="middle"?.5:1)),me)ce.select("svg").attr({x:G+gt-1,y:G+Ct}).call(i.setClipUrl,ee?V:null,A);else{var or=G+Ct-xe.top,gr=G+gt-xe.left;ae.call(f.positionText,gr,or).call(i.setClipUrl,ee?V:null,A)}$.select("rect").call(i.setRect,G,G,Oe,He),Y.call(i.setRect,ue/2,ue/2,Ge-ue,_e-ue),le.call(i.setTranslate,Math.round(U.x.text-Ge/2),Math.round(U.y.text-_e/2)),te.attr({transform:"rotate("+j+","+U.x.text+","+U.y.text+")"});var lr=function(Fr,Rr){Z.selectAll(".annotation-arrow-g").remove();var ir=U.x.head,Vr=U.y.head,qe=U.x.tail+Fr,we=U.y.tail+Rr,Me=U.x.text+Fr,Re=U.y.text+Rr,Ye=p.rotationXYMatrix(j,Me,Re),Qe=p.apply2DTransform(Ye),ot=p.apply2DTransform2(Ye),st=+Y.attr("width"),pt=+Y.attr("height"),wt=Me-.5*st,Yt=wt+st,wr=Re-.5*pt,Tr=wr+pt,Mr=[[wt,wr,wt,Tr],[wt,Tr,Yt,Tr],[Yt,Tr,Yt,wr],[Yt,wr,wt,wr]].map(ot);if(!Mr.reduce(function(at,Ot){return at^!!p.segmentsIntersect(ir,Vr,ir+1e6,Vr+1e6,Ot[0],Ot[1],Ot[2],Ot[3])},!1)){Mr.forEach(function(at){var Ot=p.segmentsIntersect(qe,we,ir,Vr,at[0],at[1],at[2],at[3]);Ot&&(qe=Ot.x,we=Ot.y)});var _r=b.arrowwidth,Or=b.arrowcolor,nn=b.arrowside,Sr=Z.append("g").style({opacity:a.opacity(Or)}).classed("annotation-arrow-g",!0),yr=Sr.append("path").attr("d","M"+qe+","+we+"L"+ir+","+Vr).style("stroke-width",_r+"px").call(a.stroke,a.rgb(Or));if(d(yr,nn,b),M.annotationPosition&&yr.node().parentNode&&!w){var gn=ir,Xr=Vr;if(b.standoff){var kr=Math.sqrt(Math.pow(ir-qe,2)+Math.pow(Vr-we,2));gn+=b.standoff*(qe-ir)/kr,Xr+=b.standoff*(we-Vr)/kr}var sn=Sr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(qe-gn)+","+(we-Xr),transform:t(gn,Xr)}).style("stroke-width",_r+6+"px").call(a.stroke,"rgba(0,0,0,0)").call(a.fill,"rgba(0,0,0,0)"),cn,$r;s.init({element:sn.node(),gd:A,prepFn:function(){var at=i.getTranslate(le);cn=at.x,$r=at.y,T&&T.autorange&&O(T._name+".autorange",!0),_&&_.autorange&&O(_._name+".autorange",!0)},moveFn:function(at,Ot){var nr=Qe(cn,$r),dr=nr[0]+at,Zr=nr[1]+Ot;le.call(i.setTranslate,dr,Zr),I("x",g(T,at,"x",P,b)),I("y",g(_,Ot,"y",P,b)),b.axref===b.xref&&I("ax",g(T,at,"ax",P,b)),b.ayref===b.yref&&I("ay",g(_,Ot,"ay",P,b)),Sr.attr("transform",t(at,Ot)),te.attr({transform:"rotate("+j+","+dr+","+Zr+")"})},doneFn:function(){o.call("_guiRelayout",A,F());var at=document.querySelector(".js-notes-box-panel");at&&at.redraw(at.selectedObj)}})}}};if(b.showarrow&&lr(0,0),re){var mr;s.init({element:le.node(),gd:A,prepFn:function(){mr=te.attr("transform")},moveFn:function(Fr,Rr){var ir="pointer";if(b.showarrow)b.axref===b.xref?I("ax",g(T,Fr,"ax",P,b)):I("ax",b.ax+Fr),b.ayref===b.yref?I("ay",g(_,Rr,"ay",P.w,b)):I("ay",b.ay+Rr),lr(Fr,Rr);else{if(w)return;var Vr,qe;if(T)Vr=g(T,Fr,"x",P,b);else{var we=b._xsize/P.w,Me=b.x+(b._xshift-b.xshift)/P.w-we/2;Vr=s.align(Me+Fr/P.w,we,0,1,b.xanchor)}if(_)qe=g(_,Rr,"y",P,b);else{var Re=b._ysize/P.h,Ye=b.y-(b._yshift+b.yshift)/P.h-Re/2;qe=s.align(Ye-Rr/P.h,Re,0,1,b.yanchor)}I("x",Vr),I("y",qe),(!T||!_)&&(ir=s.getCursor(T?.5:Vr,_?.5:qe,b.xanchor,b.yanchor))}te.attr({transform:t(Fr,Rr)+mr}),u(le,ir)},clickFn:function(Fr,Rr){b.captureevents&&A.emit("plotly_clickannotation",J(Rr))},doneFn:function(){u(le),o.call("_guiRelayout",A,F());var Fr=document.querySelector(".js-notes-box-panel");Fr&&Fr.redraw(Fr.selectedObj)}})}}M.annotationText?ae.call(f.makeEditable,{delegate:le,gd:A}).call(ie).on("edit",function(fe){b.text=fe,this.call(ie),I("text",fe),T&&T.autorange&&O(T._name+".autorange",!0),_&&_.autorange&&O(_._name+".autorange",!0),o.call("_guiRelayout",A,F())}):ae.call(ie)}},{"../../lib":503,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../fx":406,"./draw_arrow_head":356,"@plotly/d3":58}],356:[function(e,k,z){var l=e("@plotly/d3"),o=e("../color"),c=e("./arrow_paths"),p=e("../../lib"),t=p.strScale,n=p.strRotate,a=p.strTranslate;k.exports=function(r,f,u){var s=r.node(),h=c[u.arrowhead||0],d=c[u.startarrowhead||0],y=(u.arrowwidth||1)*(u.arrowsize||1),m=(u.arrowwidth||1)*(u.startarrowsize||1),g=f.indexOf("start")>=0,x=f.indexOf("end")>=0,A=h.backoff*y+u.standoff,b=d.backoff*m+u.startstandoff,S,w,T,_;if(s.nodeName==="line"){S={x:+r.attr("x1"),y:+r.attr("y1")},w={x:+r.attr("x2"),y:+r.attr("y2")};var v=S.x-w.x,P=S.y-w.y;if(T=Math.atan2(P,v),_=T+Math.PI,A&&b&&A+b>Math.sqrt(v*v+P*P)){te();return}if(A){if(A*A>v*v+P*P){te();return}var M=A*Math.cos(T),E=A*Math.sin(T);w.x+=M,w.y+=E,r.attr({x2:w.x,y2:w.y})}if(b){if(b*b>v*v+P*P){te();return}var D=b*Math.cos(T),N=b*Math.sin(T);S.x-=D,S.y-=N,r.attr({x1:S.x,y1:S.y})}}else if(s.nodeName==="path"){var O=s.getTotalLength(),I="";if(O<A+b){te();return}var F=s.getPointAtLength(0),V=s.getPointAtLength(.1);T=Math.atan2(F.y-V.y,F.x-V.x),S=s.getPointAtLength(Math.min(b,O)),I="0px,"+b+"px,";var U=s.getPointAtLength(O),j=s.getPointAtLength(O-.1);_=Math.atan2(U.y-j.y,U.x-j.x),w=s.getPointAtLength(Math.max(0,O-A));var Z=I?b+A:A;I+=O-Z+"px,"+O+"px",r.style("stroke-dasharray",I)}function te(){r.style("stroke-dasharray","0px,100px")}function re(W,J,le,ue){!W.path||(W.noRotate&&(le=0),l.select(s.parentNode).append("path").attr({class:r.attr("class"),d:W.path,transform:a(J.x,J.y)+n(le*180/Math.PI)+t(ue)}).style({fill:o.rgb(u.arrowcolor),"stroke-width":0}))}g&&re(d,S,T,m),x&&re(h,w,_,y)}},{"../../lib":503,"../color":366,"./arrow_paths":348,"@plotly/d3":58}],357:[function(e,k,z){var l=e("./draw"),o=e("./click");k.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:l.draw,drawOne:l.drawOne,drawRaw:l.drawRaw,hasClickToShow:o.hasClickToShow,onClick:o.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":349,"./calc_autorange":350,"./click":351,"./convert_coords":353,"./defaults":354,"./draw":355}],358:[function(e,k,z){var l=e("../annotations/attributes"),o=e("../../plot_api/edit_types").overrideAll,c=e("../../plot_api/plot_template").templatedArray;k.exports=o(c("annotation",{visible:l.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:l.xanchor,xshift:l.xshift,yanchor:l.yanchor,yshift:l.yshift,text:l.text,textangle:l.textangle,font:l.font,width:l.width,height:l.height,opacity:l.opacity,align:l.align,valign:l.valign,bgcolor:l.bgcolor,bordercolor:l.bordercolor,borderpad:l.borderpad,borderwidth:l.borderwidth,showarrow:l.showarrow,arrowcolor:l.arrowcolor,arrowhead:l.arrowhead,startarrowhead:l.startarrowhead,arrowside:l.arrowside,arrowsize:l.arrowsize,startarrowsize:l.startarrowsize,arrowwidth:l.arrowwidth,standoff:l.standoff,startstandoff:l.startstandoff,hovertext:l.hovertext,hoverlabel:l.hoverlabel,captureevents:l.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../annotations/attributes":349}],359:[function(e,k,z){var l=e("../../lib"),o=e("../../plots/cartesian/axes");k.exports=function(t){for(var n=t.fullSceneLayout,a=n.annotations,i=0;i<a.length;i++)c(a[i],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function c(p,t){var n=t.fullSceneLayout,a=n.domain,i=t.fullLayout._size,r={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};p._xa={},l.extendFlat(p._xa,r),o.setConvert(p._xa),p._xa._offset=i.l+a.x[0]*i.w,p._xa.l2p=function(){return .5*(1+p._pdata[0]/p._pdata[3])*i.w*(a.x[1]-a.x[0])},p._ya={},l.extendFlat(p._ya,r),o.setConvert(p._ya),p._ya._offset=i.t+(1-a.y[1])*i.h,p._ya.l2p=function(){return .5*(1-p._pdata[1]/p._pdata[3])*i.h*(a.y[1]-a.y[0])}}},{"../../lib":503,"../../plots/cartesian/axes":554}],360:[function(e,k,z){var l=e("../../lib"),o=e("../../plots/cartesian/axes"),c=e("../../plots/array_container_defaults"),p=e("../annotations/common_defaults"),t=e("./attributes");k.exports=function(i,r,f){c(i,r,{name:"annotations",handleItemDefaults:n,fullLayout:f.fullLayout})};function n(a,i,r,f){function u(d,y){return l.coerce(a,i,t,d,y)}function s(d){var y=d+"axis",m={_fullLayout:{}};return m._fullLayout[y]=r[y],o.coercePosition(i,m,u,d,d,.5)}var h=u("visible");!h||(p(a,i,f.fullLayout,u),s("x"),s("y"),s("z"),l.noneOrAll(a,i,["x","y","z"]),i.xref="x",i.yref="y",i.zref="z",u("xanchor"),u("yanchor"),u("xshift"),u("yshift"),i.showarrow&&(i.axref="pixel",i.ayref="pixel",u("ax",-10),u("ay",-30),l.noneOrAll(a,i,["ax","ay"])))}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../annotations/common_defaults":352,"./attributes":358}],361:[function(e,k,z){var l=e("../annotations/draw").drawRaw,o=e("../../plots/gl3d/project"),c=["x","y","z"];k.exports=function(t){for(var n=t.fullSceneLayout,a=t.dataScale,i=n.annotations,r=0;r<i.length;r++){for(var f=i[r],u=!1,s=0;s<3;s++){var h=c[s],d=f[h],y=n[h+"axis"],m=y.r2fraction(d);if(m<0||m>1){u=!0;break}}u?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+r+'"]').remove():(f._pdata=o(t.glplot.cameraParams,[n.xaxis.r2l(f.x)*a[0],n.yaxis.r2l(f.y)*a[1],n.zaxis.r2l(f.z)*a[2]]),l(t.graphDiv,f,r,t.id,f._xa,f._ya))}}},{"../../plots/gl3d/project":607,"../annotations/draw":355}],362:[function(e,k,z){var l=e("../../registry"),o=e("../../lib");k.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:c,convert:e("./convert"),draw:e("./draw")};function c(p,t){var n=l.subplotsRegistry.gl3d;if(!!n)for(var a=n.attrRegex,i=Object.keys(p),r=0;r<i.length;r++){var f=i[r];a.test(f)&&(p[f].annotations||[]).length&&(o.pushUnique(t._basePlotModules,n),o.pushUnique(t._subplots.gl3d,f))}}},{"../../lib":503,"../../registry":638,"./attributes":358,"./convert":359,"./defaults":360,"./draw":361}],363:[function(e,k,z){k.exports=e("world-calendars/dist/main"),e("world-calendars/dist/plus"),e("world-calendars/dist/calendars/chinese"),e("world-calendars/dist/calendars/coptic"),e("world-calendars/dist/calendars/discworld"),e("world-calendars/dist/calendars/ethiopian"),e("world-calendars/dist/calendars/hebrew"),e("world-calendars/dist/calendars/islamic"),e("world-calendars/dist/calendars/julian"),e("world-calendars/dist/calendars/mayan"),e("world-calendars/dist/calendars/nanakshahi"),e("world-calendars/dist/calendars/nepali"),e("world-calendars/dist/calendars/persian"),e("world-calendars/dist/calendars/taiwan"),e("world-calendars/dist/calendars/thai"),e("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":332,"world-calendars/dist/calendars/coptic":333,"world-calendars/dist/calendars/discworld":334,"world-calendars/dist/calendars/ethiopian":335,"world-calendars/dist/calendars/hebrew":336,"world-calendars/dist/calendars/islamic":337,"world-calendars/dist/calendars/julian":338,"world-calendars/dist/calendars/mayan":339,"world-calendars/dist/calendars/nanakshahi":340,"world-calendars/dist/calendars/nepali":341,"world-calendars/dist/calendars/persian":342,"world-calendars/dist/calendars/taiwan":343,"world-calendars/dist/calendars/thai":344,"world-calendars/dist/calendars/ummalqura":345,"world-calendars/dist/main":346,"world-calendars/dist/plus":347}],364:[function(e,k,z){var l=e("./calendars"),o=e("../../lib"),c=e("../../constants/numerical"),p=c.EPOCHJD,t=c.ONEDAY,n={valType:"enumerated",values:o.sortObjectKeys(l.calendars),editType:"calc",dflt:"gregorian"},a=function(T,_,v,P){var M={};return M[v]=n,o.coerce(T,_,M,v,P)},i=function(T,_,v,P){for(var M=0;M<v.length;M++)a(T,_,v[M]+"calendar",P.calendar)},r={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},f={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},u={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},s="##",h={d:{"0":"dd","-":"d"},e:{"0":"d","-":"d"},a:{"0":"D","-":"D"},A:{"0":"DD","-":"DD"},j:{"0":"oo","-":"o"},W:{"0":"ww","-":"w"},m:{"0":"mm","-":"m"},b:{"0":"M","-":"M"},B:{"0":"MM","-":"MM"},y:{"0":"yy","-":"yy"},Y:{"0":"yyyy","-":"yyyy"},U:s,w:s,c:{"0":"D M d %X yyyy","-":"D M d %X yyyy"},x:{"0":"mm/dd/yyyy","-":"mm/dd/yyyy"}};function d(T,_,v){for(var P=Math.floor((_+.05)/t)+p,M=m(v).fromJD(P),E=0,D,N,O,I,F;(E=T.indexOf("%",E))!==-1;)D=T.charAt(E+1),D==="0"||D==="-"||D==="_"?(O=3,N=T.charAt(E+2),D==="_"&&(D="-")):(N=D,D="0",O=2),I=h[N],I?(I===s?F=s:F=M.formatDate(I[D]),T=T.substr(0,E)+F+T.substr(E+O),E+=F.length):E+=O;return T}var y={};function m(T){var _=y[T];return _||(_=y[T]=l.instance(T),_)}function g(T){return o.extendFlat({},n,{description:T})}function x(T){return"Sets the calendar system to use with `"+T+"` date data."}var A={xcalendar:g(x("x"))},b=o.extendFlat({},A,{ycalendar:g(x("y"))}),S=o.extendFlat({},b,{zcalendar:g(x("z"))}),w=g(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));k.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:b,bar:b,box:b,heatmap:b,contour:b,histogram:b,histogram2d:b,histogram2dcontour:b,scatter3d:S,surface:S,mesh3d:S,scattergl:b,ohlc:A,candlestick:A},layout:{calendar:g(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:w},yaxis:{calendar:w},scene:{xaxis:{calendar:w},yaxis:{calendar:w},zaxis:{calendar:w}},polar:{radialaxis:{calendar:w}}},transforms:{filter:{valuecalendar:g(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:g(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:n,handleDefaults:a,handleTraceDefaults:i,CANONICAL_SUNDAY:f,CANONICAL_TICK:r,DFLTRANGE:u,getCal:m,worldCalFmt:d}},{"../../constants/numerical":479,"../../lib":503,"./calendars":363}],365:[function(e,k,z){z.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],z.defaultLine="#444",z.lightLine="#eee",z.background="#fff",z.borderLine="#BEC8D9",z.lightFraction=100*(14-4)/(15-4)},{}],366:[function(e,k,z){var l=e("tinycolor2"),o=e("fast-isnumeric"),c=e("../../lib/array").isTypedArray,p=k.exports={},t=e("./attributes");p.defaults=t.defaults;var n=p.defaultLine=t.defaultLine;p.lightLine=t.lightLine;var a=p.background=t.background;p.tinyRGB=function(r){var f=r.toRgb();return"rgb("+Math.round(f.r)+", "+Math.round(f.g)+", "+Math.round(f.b)+")"},p.rgb=function(r){return p.tinyRGB(l(r))},p.opacity=function(r){return r?l(r).getAlpha():0},p.addOpacity=function(r,f){var u=l(r).toRgb();return"rgba("+Math.round(u.r)+", "+Math.round(u.g)+", "+Math.round(u.b)+", "+f+")"},p.combine=function(r,f){var u=l(r).toRgb();if(u.a===1)return l(r).toRgbString();var s=l(f||a).toRgb(),h=s.a===1?s:{r:255*(1-s.a)+s.r*s.a,g:255*(1-s.a)+s.g*s.a,b:255*(1-s.a)+s.b*s.a},d={r:h.r*(1-u.a)+u.r*u.a,g:h.g*(1-u.a)+u.g*u.a,b:h.b*(1-u.a)+u.b*u.a};return l(d).toRgbString()},p.contrast=function(r,f,u){var s=l(r);s.getAlpha()!==1&&(s=l(p.combine(r,a)));var h=s.isDark()?f?s.lighten(f):a:u?s.darken(u):n;return h.toString()},p.stroke=function(r,f){var u=l(f);r.style({stroke:p.tinyRGB(u),"stroke-opacity":u.getAlpha()})},p.fill=function(r,f){var u=l(f);r.style({fill:p.tinyRGB(u),"fill-opacity":u.getAlpha()})},p.clean=function(r){if(!(!r||typeof r!="object")){var f=Object.keys(r),u,s,h,d;for(u=0;u<f.length;u++)if(h=f[u],d=r[h],h.substr(h.length-5)==="color")if(Array.isArray(d))for(s=0;s<d.length;s++)d[s]=i(d[s]);else r[h]=i(d);else if(h.substr(h.length-10)==="colorscale"&&Array.isArray(d))for(s=0;s<d.length;s++)Array.isArray(d[s])&&(d[s][1]=i(d[s][1]));else if(Array.isArray(d)){var y=d[0];if(!Array.isArray(y)&&y&&typeof y=="object")for(s=0;s<d.length;s++)p.clean(d[s])}else d&&typeof d=="object"&&!c(d)&&p.clean(d)}};function i(r){if(o(r)||typeof r!="string")return r;var f=r.trim();if(f.substr(0,3)!=="rgb")return r;var u=f.match(/^rgba?\s*\(([^()]*)\)$/);if(!u)return r;var s=u[1].trim().split(/\s*[\s,]\s*/),h=f.charAt(3)==="a"&&s.length===4;if(!h&&s.length!==3)return r;for(var d=0;d<s.length;d++){if(!s[d].length||(s[d]=Number(s[d]),!(s[d]>=0)))return r;if(d===3)s[d]>1&&(s[d]=1);else if(s[d]>=1)return r}var y=Math.round(s[0]*255)+", "+Math.round(s[1]*255)+", "+Math.round(s[2]*255);return h?"rgba("+y+", "+s[3]+")":"rgb("+y+")"}},{"../../lib/array":485,"./attributes":365,"fast-isnumeric":190,tinycolor2:312}],367:[function(e,k,z){var l=e("../../plots/cartesian/layout_attributes"),o=e("../../plots/font_attributes"),c=e("../../lib/extend").extendFlat,p=e("../../plot_api/edit_types").overrideAll;k.exports=p({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:l.linecolor,outlinewidth:l.linewidth,bordercolor:l.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:l.tickmode,nticks:l.nticks,tick0:l.tick0,dtick:l.dtick,tickvals:l.tickvals,ticktext:l.ticktext,ticks:c({},l.ticks,{dflt:""}),ticklabeloverflow:c({},l.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:l.ticklen,tickwidth:l.tickwidth,tickcolor:l.tickcolor,showticklabels:l.showticklabels,tickfont:o({}),tickangle:l.tickangle,tickformat:l.tickformat,tickformatstops:l.tickformatstops,tickprefix:l.tickprefix,showtickprefix:l.showtickprefix,ticksuffix:l.ticksuffix,showticksuffix:l.showticksuffix,separatethousands:l.separatethousands,exponentformat:l.exponentformat,minexponent:l.minexponent,showexponent:l.showexponent,title:{text:{valType:"string"},font:o({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:o({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],368:[function(e,k,z){k.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],369:[function(e,k,z){var l=e("../../lib"),o=e("../../plot_api/plot_template"),c=e("../../plots/cartesian/tick_value_defaults"),p=e("../../plots/cartesian/tick_mark_defaults"),t=e("../../plots/cartesian/tick_label_defaults"),n=e("../../plots/cartesian/prefix_suffix_defaults"),a=e("./attributes");k.exports=function(r,f,u){var s=o.newContainer(f,"colorbar"),h=r.colorbar||{};function d(M,E){return l.coerce(h,s,a,M,E)}var y=u.margin||{t:0,b:0,l:0,r:0},m=u.width-y.l-y.r,g=u.height-y.t-y.b,x=d("orientation"),A=x==="v",b=d("thicknessmode");d("thickness",b==="fraction"?30/(A?m:g):30);var S=d("lenmode");d("len",S==="fraction"?1:A?g:m),d("x",A?1.02:.5),d("xanchor",A?"left":"center"),d("xpad"),d("y",A?.5:1.02),d("yanchor",A?"middle":"bottom"),d("ypad"),l.noneOrAll(h,s,["x","y"]),d("outlinecolor"),d("outlinewidth"),d("bordercolor"),d("borderwidth"),d("bgcolor");var w=l.coerce(h,s,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:A?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");d("ticklabeloverflow",w.indexOf("inside")!==-1?"hide past domain":"hide past div"),c(h,s,d,"linear");var T=u.font,_={outerTicks:!1,font:T};w.indexOf("inside")!==-1&&(_.bgColor="black"),n(h,s,d,"linear",_),t(h,s,d,"linear",_),p(h,s,d,"linear",_),d("title.text",u._dfltTitle.colorbar);var v=s.tickfont,P=l.extendFlat({},v,{color:T.color,size:l.bigFont(v.size)});l.coerceFont(d,"title.font",P),d("title.side",A?"top":"right")}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"./attributes":367}],370:[function(e,k,z){var l=e("@plotly/d3"),o=e("tinycolor2"),c=e("../../plots/plots"),p=e("../../registry"),t=e("../../plots/cartesian/axes"),n=e("../dragelement"),a=e("../../lib"),i=a.strTranslate,r=e("../../lib/extend").extendFlat,f=e("../../lib/setcursor"),u=e("../drawing"),s=e("../color"),h=e("../titles"),d=e("../../lib/svg_text_utils"),y=e("../colorscale/helpers").flipScale,m=e("../../plots/cartesian/axis_defaults"),g=e("../../plots/cartesian/position_defaults"),x=e("../../plots/cartesian/layout_attributes"),A=e("../../constants/alignment"),b=A.LINE_SPACING,S=A.FROM_TL,w=A.FROM_BR,T=e("./constants").cn;function _(N){var O=N._fullLayout,I=O._infolayer.selectAll("g."+T.colorbar).data(v(N),function(F){return F._id});I.enter().append("g").attr("class",function(F){return F._id}).classed(T.colorbar,!0),I.each(function(F){var V=l.select(this);a.ensureSingle(V,"rect",T.cbbg),a.ensureSingle(V,"g",T.cbfills),a.ensureSingle(V,"g",T.cblines),a.ensureSingle(V,"g",T.cbaxis,function(j){j.classed(T.crisp,!0)}),a.ensureSingle(V,"g",T.cbtitleunshift,function(j){j.append("g").classed(T.cbtitle,!0)}),a.ensureSingle(V,"rect",T.cboutline);var U=P(V,F,N);U&&U.then&&(N._promises||[]).push(U),N._context.edits.colorbarPosition&&M(V,F,N)}),I.exit().each(function(F){c.autoMargin(N,F._id)}).remove(),I.order()}function v(N){var O=N._fullLayout,I=N.calcdata,F=[],V,U,j,Z;function te(K){return r(K,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function re(){typeof Z.calc=="function"?Z.calc(N,j,V):(V._fillgradient=U.reversescale?y(U.colorscale):U.colorscale,V._zrange=[U[Z.min],U[Z.max]])}for(var W=0;W<I.length;W++){var J=I[W];j=J[0].trace;var le=j._module.colorbar;if(j.visible===!0&&le)for(var ue=Array.isArray(le),se=ue?le:[le],G=0;G<se.length;G++){Z=se[G];var Y=Z.container;U=Y?j[Y]:j,U&&U.showscale&&(V=te(U.colorbar),V._id="cb"+j.uid+(ue&&Y?"-"+Y:""),V._traceIndex=j.index,V._propPrefix=(Y?Y+".":"")+"colorbar.",V._meta=j._meta,re(),F.push(V))}}for(var ee in O._colorAxes)if(U=O[ee],U.showscale){var $=O._colorAxes[ee];V=te(U.colorbar),V._id="cb"+ee,V._propPrefix=ee+".colorbar.",V._meta=O._meta,Z={min:"cmin",max:"cmax"},$[0]!=="heatmap"&&(j=$[1],Z.calc=j._module.colorbar.calc),re(),F.push(V)}return F}function P(N,O,I){var F=O.orientation==="v",V=O.len,U=O.lenmode,j=O.thickness,Z=O.thicknessmode,te=O.outlinewidth,re=O.borderwidth,W=O.bgcolor,J=O.xanchor,le=O.yanchor,ue=O.xpad,se=O.ypad,G=O.x,Y=F?O.y:1-O.y,ee=I._fullLayout,$=ee._size,K=O._fillcolor,Q=O._line,ae=O.title,ie=ae.side,oe=O._zrange||l.extent((typeof K=="function"?K:Q.color).domain()),fe=typeof Q.color=="function"?Q.color:function(){return Q.color},ye=typeof K=="function"?K:function(){return K},ce=O._levels,me=E(I,O,oe),xe=me.fill,ke=me.line,Ae=Math.round(j*(Z==="fraction"?F?$.w:$.h:1)),Oe=Ae/(F?$.w:$.h),He=Math.round(V*(U==="fraction"?F?$.h:$.w:1)),Ge=He/(F?$.h:$.w),_e=Math.round(F?G*$.w+ue:Y*$.h+se),Ie={center:.5,right:1}[J]||0,We={top:1,middle:.5}[le]||0,et=F?G-Ie*Oe:Y-We*Oe,Ne=F?Y-We*Ge:G-Ie*Ge,De=Math.round(F?$.h*(1-Ne):$.w*Ne);O._lenFrac=Ge,O._thickFrac=Oe,O._uFrac=et,O._vFrac=Ne;var Ve=O._axis=D(I,O,oe);Ve.position=Oe+(F?G+ue/$.w:Y+se/$.h);var dt=["top","bottom"].indexOf(ie)!==-1;if(F&&dt&&(Ve.title.side=ie,Ve.titlex=G+ue/$.w,Ve.titley=Ne+(ae.side==="top"?Ge-se/$.h:se/$.h)),!F&&!dt&&(Ve.title.side=ie,Ve.titley=Y+se/$.h,Ve.titlex=Ne+ue/$.w),Q.color&&O.tickmode==="auto"){Ve.tickmode="linear",Ve.tick0=ce.start;var Dt=ce.size,Gt=a.constrain(He/50,4,15)+1,Mt=(oe[1]-oe[0])/((O.nticks||Gt)*Dt);if(Mt>1){var zt=Math.pow(10,Math.floor(Math.log(Mt)/Math.LN10));Dt*=zt*a.roundUp(Mt/zt,[2,5,10]),(Math.abs(ce.start)/ce.size+1e-6)%1<2e-6&&(Ve.tick0=0)}Ve.dtick=Dt}Ve.domain=F?[Ne+se/$.h,Ne+Ge-se/$.h]:[Ne+ue/$.w,Ne+Ge-ue/$.w],Ve.setScale(),N.attr("transform",i(Math.round($.l),Math.round($.t)));var Nt=N.select("."+T.cbtitleunshift).attr("transform",i(-Math.round($.l),-Math.round($.t))),Et=Ve.ticklabelposition,At=Ve.title.font.size,it=N.select("."+T.cbaxis),ht,$e=0,Ee=0;function Xe(Bt,Xt){var Ut={propContainer:Ve,propName:O._propPrefix+"title",traceIndex:O._traceIndex,_meta:O._meta,placeholder:ee._dfltTitle.colorbar,containerGroup:N.select("."+T.cbtitle)},Jt=Bt.charAt(0)==="h"?Bt.substr(1):"h"+Bt;N.selectAll("."+Jt+",."+Jt+"-math-group").remove(),h.draw(I,Bt,r(Ut,Xt||{}))}function rt(){if(F&&dt||!F&&!dt){var Bt,Xt;ie==="top"&&(Bt=ue+$.l+$.w*G,Xt=se+$.t+$.h*(1-Ne-Ge)+3+At*.75),ie==="bottom"&&(Bt=ue+$.l+$.w*G,Xt=se+$.t+$.h*(1-Ne)-3-At*.25),ie==="right"&&(Xt=se+$.t+$.h*Y+3+At*.75,Bt=ue+$.l+$.w*Ne),Xe(Ve._id+"title",{attributes:{x:Bt,y:Xt,"text-anchor":F?"start":"middle"}})}}function ut(){if(F&&!dt||!F&&dt){var Bt=Ve.position||0,Xt=Ve._offset+Ve._length/2,Ut,Jt;if(ie==="right")Jt=Xt,Ut=$.l+$.w*Bt+10+At*(Ve.showticklabels?1:.5);else if(Ut=Xt,ie==="bottom"&&(Jt=$.t+$.h*Bt+10+(Et.indexOf("inside")===-1?Ve.tickfont.size:0)+(Ve.ticks!=="intside"&&O.ticklen||0)),ie==="top"){var Je=ae.text.split("<br>").length;Jt=$.t+$.h*Bt+10-Ae-b*At*Je}Xe((F?"h":"v")+Ve._id+"title",{avoid:{selection:l.select(I).selectAll("g."+Ve._id+"tick"),side:ie,offsetTop:F?0:$.t,offsetLeft:F?$.l:0,maxShift:F?ee.width:ee.height},attributes:{x:Ut,y:Jt,"text-anchor":"middle"},transform:{rotate:F?-90:0,offset:0}})}}function Pt(){if(!F&&!dt||F&&dt){var Bt=N.select("."+T.cbtitle),Xt=Bt.select("text"),Ut=[-te/2,te/2],Jt=Bt.select(".h"+Ve._id+"title-math-group").node(),Je=15.6;Xt.node()&&(Je=parseInt(Xt.node().style.fontSize,10)*b);var gt;if(Jt?(gt=u.bBox(Jt),Ee=gt.width,$e=gt.height,$e>Je&&(Ut[1]-=($e-Je)/2)):Xt.node()&&!Xt.classed(T.jsPlaceholder)&&(gt=u.bBox(Xt.node()),Ee=gt.width,$e=gt.height),F){if($e){if($e+=5,ie==="top")Ve.domain[1]-=$e/$.h,Ut[1]*=-1;else{Ve.domain[0]+=$e/$.h;var Ct=d.lineCount(Xt);Ut[1]+=(1-Ct)*Je}Bt.attr("transform",i(Ut[0],Ut[1])),Ve.setScale()}}else Ee&&(ie==="right"&&(Ve.domain[0]+=(Ee+At/2)/$.w),Bt.attr("transform",i(Ut[0],Ut[1])),Ve.setScale())}N.selectAll("."+T.cbfills+",."+T.cblines).attr("transform",F?i(0,Math.round($.h*(1-Ve.domain[1]))):i(Math.round($.w*Ve.domain[0]),0)),it.attr("transform",F?i(0,Math.round(-$.t)):i(Math.round(-$.l),0));var or=N.select("."+T.cbfills).selectAll("rect."+T.cbfill).attr("style","").data(xe);or.enter().append("rect").classed(T.cbfill,!0).style("stroke","none"),or.exit().remove();var gr=oe.map(Ve.c2p).map(Math.round).sort(function(ir,Vr){return ir-Vr});or.each(function(ir,Vr){var qe=[Vr===0?oe[0]:(xe[Vr]+xe[Vr-1])/2,Vr===xe.length-1?oe[1]:(xe[Vr]+xe[Vr+1])/2].map(Ve.c2p).map(Math.round);F&&(qe[1]=a.constrain(qe[1]+(qe[1]>qe[0])?1:-1,gr[0],gr[1]));var we=l.select(this).attr(F?"x":"y",_e).attr(F?"y":"x",l.min(qe)).attr(F?"width":"height",Math.max(Ae,2)).attr(F?"height":"width",Math.max(l.max(qe)-l.min(qe),2));if(O._fillgradient)u.gradient(we,I,O._id,F?"vertical":"horizontalreversed",O._fillgradient,"fill");else{var Me=ye(ir).replace("e-","");we.attr("fill",o(Me).toHexString())}});var lr=N.select("."+T.cblines).selectAll("path."+T.cbline).data(Q.color&&Q.width?ke:[]);lr.enter().append("path").classed(T.cbline,!0),lr.exit().remove(),lr.each(function(ir){var Vr=_e,qe=Math.round(Ve.c2p(ir))+Q.width/2%1;l.select(this).attr("d","M"+(F?Vr+","+qe:qe+","+Vr)+(F?"h":"v")+Ae).call(u.lineGroupStyle,Q.width,fe(ir),Q.dash)}),it.selectAll("g."+Ve._id+"tick,path").remove();var mr=_e+Ae+(te||0)/2-(O.ticks==="outside"?1:0),Fr=t.calcTicks(Ve),Rr=t.getTickSigns(Ve)[2];return t.drawTicks(I,Ve,{vals:Ve.ticks==="inside"?t.clipEnds(Ve,Fr):Fr,layer:it,path:t.makeTickPath(Ve,mr,Rr),transFn:t.makeTransTickFn(Ve)}),t.drawLabels(I,Ve,{vals:Fr,layer:it,transFn:t.makeTransTickLabelFn(Ve),labelFns:t.makeLabelFns(Ve,mr)})}function kt(){var Bt,Xt=Ae+te/2;Et.indexOf("inside")===-1&&(Bt=u.bBox(it.node()),Xt+=F?Bt.width:Bt.height),ht=Nt.select("text");var Ut=0,Jt=F&&ie==="top",Je=!F&&ie==="right",gt=0;if(ht.node()&&!ht.classed(T.jsPlaceholder)){var Ct,or=Nt.select(".h"+Ve._id+"title-math-group").node();or&&(F&&dt||!F&&!dt)?(Bt=u.bBox(or),Ut=Bt.width,Ct=Bt.height):(Bt=u.bBox(Nt.node()),Ut=Bt.right-$.l-(F?_e:De),Ct=Bt.bottom-$.t-(F?De:_e),!F&&ie==="top"&&(Xt+=Bt.height,gt=Bt.height)),Je&&(ht.attr("transform",i(Ut/2+At/2,0)),Ut*=2),Xt=Math.max(Xt,F?Ut:Ct)}var gr=(F?ue:se)*2+Xt+re+te/2,lr=0;!F&&ae.text&&le==="bottom"&&Y<=0&&(lr=gr/2,gr+=lr,gt+=lr),ee._hColorbarMoveTitle=lr,ee._hColorbarMoveCBTitle=gt;var mr=re+te;N.select("."+T.cbbg).attr("x",(F?_e:De)-mr/2-(F?ue:0)).attr("y",(F?De:_e)-(F?He:se+gt-lr)).attr(F?"width":"height",Math.max(gr-lr,2)).attr(F?"height":"width",Math.max(He+mr,2)).call(s.fill,W).call(s.stroke,O.bordercolor).style("stroke-width",re);var Fr=Je?Math.max(Ut-10,0):0;if(N.selectAll("."+T.cboutline).attr("x",(F?_e:De+ue)+Fr).attr("y",(F?De+se-He:_e)+(Jt?$e:0)).attr(F?"width":"height",Math.max(Ae,2)).attr(F?"height":"width",Math.max(He-(F?2*se+$e:2*ue+Fr),2)).call(s.stroke,O.outlinecolor).style({fill:"none","stroke-width":te}),N.attr("transform",i($.l-(F?Ie*gr:0),$.t-(F?0:(1-We)*gr-gt))),!F&&(re||o(W).getAlpha()&&!o.equals(ee.paper_bgcolor,W))){var Rr=it.selectAll("text"),ir=Rr[0].length,Vr=N.select("."+T.cbbg).node(),qe=u.bBox(Vr),we=u.getTranslate(N),Me=2;Rr.each(function(wt,Yt){var wr=0,Tr=ir-1;if(Yt===wr||Yt===Tr){var Mr=u.bBox(this),_r=u.getTranslate(this),Or;if(Yt===Tr){var nn=Mr.right+_r.x,Sr=qe.right+we.x+De-re-Me+G;Or=Sr-nn,Or>0&&(Or=0)}else if(Yt===wr){var yr=Mr.left+_r.x,gn=qe.left+we.x+De+re+Me;Or=gn-yr,Or<0&&(Or=0)}Or&&(ir<3?this.setAttribute("transform","translate("+Or+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Re={},Ye=S[J],Qe=w[J],ot=S[le],st=w[le],pt=gr-Ae;F?(U==="pixels"?(Re.y=Y,Re.t=He*ot,Re.b=He*st):(Re.t=Re.b=0,Re.yt=Y+V*ot,Re.yb=Y-V*st),Z==="pixels"?(Re.x=G,Re.l=gr*Ye,Re.r=gr*Qe):(Re.l=pt*Ye,Re.r=pt*Qe,Re.xl=G-j*Ye,Re.xr=G+j*Qe)):(U==="pixels"?(Re.x=G,Re.l=He*Ye,Re.r=He*Qe):(Re.l=Re.r=0,Re.xl=G+V*Ye,Re.xr=G-V*Qe),Z==="pixels"?(Re.y=1-Y,Re.t=gr*ot,Re.b=gr*st):(Re.t=pt*ot,Re.b=pt*st,Re.yt=Y-j*ot,Re.yb=Y+j*st)),c.autoMargin(I,O._id,Re)}return a.syncOrAsync([c.previousPromises,rt,Pt,ut,c.previousPromises,kt],I)}function M(N,O,I){var F=O.orientation==="v",V=I._fullLayout,U=V._size,j,Z,te;n.init({element:N.node(),gd:I,prepFn:function(){j=N.attr("transform"),f(N)},moveFn:function(re,W){N.attr("transform",j+i(re,W)),Z=n.align((F?O._uFrac:O._vFrac)+re/U.w,F?O._thickFrac:O._lenFrac,0,1,O.xanchor),te=n.align((F?O._vFrac:1-O._uFrac)-W/U.h,F?O._lenFrac:O._thickFrac,0,1,O.yanchor);var J=n.getCursor(Z,te,O.xanchor,O.yanchor);f(N,J)},doneFn:function(){if(f(N),Z!==void 0&&te!==void 0){var re={};re[O._propPrefix+"x"]=Z,re[O._propPrefix+"y"]=te,O._traceIndex!==void 0?p.call("_guiRestyle",I,re,O._traceIndex):p.call("_guiRelayout",I,re)}}})}function E(N,O,I){var F=O._levels,V=[],U=[],j,Z,te=F.end+F.size/100,re=F.size,W=1.001*I[0]-.001*I[1],J=1.001*I[1]-.001*I[0];for(Z=0;Z<1e5&&(j=F.start+Z*re,!(re>0?j>=te:j<=te));Z++)j>W&&j<J&&V.push(j);if(O._fillgradient)U=[0];else if(typeof O._fillcolor=="function"){var le=O._filllevels;if(le)for(te=le.end+le.size/100,re=le.size,Z=0;Z<1e5&&(j=le.start+Z*re,!(re>0?j>=te:j<=te));Z++)j>I[0]&&j<I[1]&&U.push(j);else U=V.map(function(ue){return ue-F.size/2}),U.push(U[U.length-1]+F.size)}else O._fillcolor&&typeof O._fillcolor=="string"&&(U=[0]);return F.size<0&&(V.reverse(),U.reverse()),{line:V,fill:U}}function D(N,O,I){var F=N._fullLayout,V=O.orientation==="v",U={type:"linear",range:I,tickmode:O.tickmode,nticks:O.nticks,tick0:O.tick0,dtick:O.dtick,tickvals:O.tickvals,ticktext:O.ticktext,ticks:O.ticks,ticklen:O.ticklen,tickwidth:O.tickwidth,tickcolor:O.tickcolor,showticklabels:O.showticklabels,ticklabelposition:O.ticklabelposition,ticklabeloverflow:O.ticklabeloverflow,tickfont:O.tickfont,tickangle:O.tickangle,tickformat:O.tickformat,exponentformat:O.exponentformat,minexponent:O.minexponent,separatethousands:O.separatethousands,showexponent:O.showexponent,showtickprefix:O.showtickprefix,tickprefix:O.tickprefix,showticksuffix:O.showticksuffix,ticksuffix:O.ticksuffix,title:O.title,showline:!0,anchor:"free",side:V?"right":"bottom",position:1},j=V?"y":"x",Z={type:"linear",_id:j+O._id},te={letter:j,font:F.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:F.calendar};function re(W,J){return a.coerce(U,Z,x,W,J)}return m(U,Z,re,te,F),g(U,Z,re,te),Z}k.exports={draw:_}},{"../../constants/alignment":471,"../../lib":503,"../../lib/extend":493,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"../../plots/plots":619,"../../registry":638,"../color":366,"../colorscale/helpers":377,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":368,"@plotly/d3":58,tinycolor2:312}],371:[function(e,k,z){var l=e("../../lib");k.exports=function(c){return l.isPlainObject(c.colorbar)}},{"../../lib":503}],372:[function(e,k,z){k.exports={moduleType:"component",name:"colorbar",attributes:e("./attributes"),supplyDefaults:e("./defaults"),draw:e("./draw").draw,hasColorbar:e("./has_colorbar")}},{"./attributes":367,"./defaults":369,"./draw":370,"./has_colorbar":371}],373:[function(e,k,z){var l=e("../colorbar/attributes"),o=e("../../lib/regex").counter,c=e("../../lib/sort_object_keys"),p=e("./scales.js").scales;c(p),k.exports=function(n,a){n=n||"",a=a||{};var i=a.cLetter||"c";"onlyIfNumerical"in a?a.onlyIfNumerical:Boolean(n);var r="noScale"in a?a.noScale:n==="marker.line",f="showScaleDflt"in a?a.showScaleDflt:i==="z",u=typeof a.colorscaleDflt=="string"?p[a.colorscaleDflt]:null,s=a.editTypeOverride||"",h;"colorAttr"in a?h=a.colorAttr:h={z:"z",c:"color"}[i];var d=i+"auto",y=i+"min",m=i+"max",g=i+"mid",x={};x[y]=x[m]=void 0;var A={};A[d]=!1;var b={};return h==="color"&&(b.color={valType:"color",arrayOk:!0,editType:s||"style"},a.anim&&(b.color.anim=!0)),b[d]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:x},b[y]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:A},b[m]={valType:"number",dflt:null,editType:s||"plot",impliedEdits:A},b[g]={valType:"number",dflt:null,editType:"calc",impliedEdits:x},b.colorscale={valType:"colorscale",editType:"calc",dflt:u,impliedEdits:{autocolorscale:!1}},b.autocolorscale={valType:"boolean",dflt:a.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},b.reversescale={valType:"boolean",dflt:!1,editType:"plot"},r||(b.showscale={valType:"boolean",dflt:f,editType:"calc"},b.colorbar=l),a.noColorAxis||(b.coloraxis={valType:"subplotid",regex:o("coloraxis"),dflt:null,editType:"calc"}),b}},{"../../lib/regex":520,"../../lib/sort_object_keys":526,"../colorbar/attributes":367,"./scales.js":381}],374:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../lib"),c=e("./helpers").extractOpts;k.exports=function(t,n,a){var i=t._fullLayout,r=a.vals,f=a.containerStr,u=f?o.nestedProperty(n,f).get():n,s=c(u),h=s.auto!==!1,d=s.min,y=s.max,m=s.mid,g=function(){return o.aggNums(Math.min,null,r)},x=function(){return o.aggNums(Math.max,null,r)};if(d===void 0?d=g():h&&(u._colorAx&&l(d)?d=Math.min(d,g()):d=g()),y===void 0?y=x():h&&(u._colorAx&&l(y)?y=Math.max(y,x()):y=x()),h&&m!==void 0&&(y-m>m-d?d=m-(y-m):y-m<m-d&&(y=m+(m-d))),d===y&&(d-=.5,y+=.5),s._sync("min",d),s._sync("max",y),s.autocolorscale){var A;d*y<0?A=i.colorscale.diverging:d>=0?A=i.colorscale.sequential:A=i.colorscale.sequentialminus,s._sync("colorscale",A)}}},{"../../lib":503,"./helpers":377,"fast-isnumeric":190}],375:[function(e,k,z){var l=e("../../lib"),o=e("./helpers").hasColorscale,c=e("./helpers").extractOpts;k.exports=function(t,n){function a(d,y){var m=d["_"+y];m!==void 0&&(d[y]=m)}function i(d,y){var m=y.container?l.nestedProperty(d,y.container).get():d;if(m)if(m.coloraxis)m._colorAx=n[m.coloraxis];else{var g=c(m),x=g.auto;(x||g.min===void 0)&&a(m,y.min),(x||g.max===void 0)&&a(m,y.max),g.autocolorscale&&a(m,"colorscale")}}for(var r=0;r<t.length;r++){var f=t[r],u=f._module.colorbar;if(u)if(Array.isArray(u))for(var s=0;s<u.length;s++)i(f,u[s]);else i(f,u);o(f,"marker.line")&&i(f,{container:"marker.line",min:"cmin",max:"cmax"})}for(var h in n._colorAxes)i(n[h],{min:"cmin",max:"cmax"})}},{"../../lib":503,"./helpers":377}],376:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../lib"),c=e("../colorbar/has_colorbar"),p=e("../colorbar/defaults"),t=e("./scales").isValid,n=e("../../registry").traceIs;function a(i,r){var f=r.slice(0,r.length-1);return r?o.nestedProperty(i,f).get()||{}:i}k.exports=function i(r,f,u,s,h){var d=h.prefix,y=h.cLetter,m="_module"in f,g=a(r,d),x=a(f,d),A=a(f._template||{},d)||{},b=function(){return delete r.coloraxis,delete f.coloraxis,i(r,f,u,s,h)};if(m){var S=u._colorAxes||{},w=s(d+"coloraxis");if(w){var T=n(f,"contour")&&o.nestedProperty(f,"contours.coloring").get()||"heatmap",_=S[w];_?(_[2].push(b),_[0]!==T&&(_[0]=!1,o.warn(["Ignoring coloraxis:",w,"setting","as it is linked to incompatible colorscales."].join(" ")))):S[w]=[T,f,[b]];return}}var v=g[y+"min"],P=g[y+"max"],M=l(v)&&l(P)&&v<P,E=s(d+y+"auto",!M);E?s(d+y+"mid"):(s(d+y+"min"),s(d+y+"max"));var D=g.colorscale,N=A.colorscale,O;if(D!==void 0&&(O=!t(D)),N!==void 0&&(O=!t(N)),s(d+"autocolorscale",O),s(d+"colorscale"),s(d+"reversescale"),d!=="marker.line."){var I;d&&m&&(I=c(g));var F=s(d+"showscale",I);F&&(d&&A&&(x._template=A),p(g,x,u))}}},{"../../lib":503,"../../registry":638,"../colorbar/defaults":369,"../colorbar/has_colorbar":371,"./scales":381,"fast-isnumeric":190}],377:[function(e,k,z){var l=e("@plotly/d3"),o=e("tinycolor2"),c=e("fast-isnumeric"),p=e("../../lib"),t=e("../color"),n=e("./scales").isValid;function a(m,g,x){var A=g?p.nestedProperty(m,g).get()||{}:m,b=A[x||"color"],S=!1;if(p.isArrayOrTypedArray(b)){for(var w=0;w<b.length;w++)if(c(b[w])){S=!0;break}}return p.isPlainObject(A)&&(S||A.showscale===!0||c(A.cmin)&&c(A.cmax)||n(A.colorscale)||p.isPlainObject(A.colorbar))}var i=["showscale","autocolorscale","colorscale","reversescale","colorbar"],r=["min","max","mid","auto"];function f(m){var g=m._colorAx,x=g||m,A={},b,S,w;for(S=0;S<i.length;S++)w=i[S],A[w]=x[w];if(g)for(b="c",S=0;S<r.length;S++)w=r[S],A[w]=x["c"+w];else{var T;for(S=0;S<r.length;S++){if(w=r[S],T="c"+w,T in x){A[w]=x[T];continue}T="z"+w,T in x&&(A[w]=x[T])}b=T.charAt(0)}return A._sync=function(_,v){var P=r.indexOf(_)!==-1?b+_:_;x[P]=x["_"+P]=v},A}function u(m){for(var g=f(m),x=g.min,A=g.max,b=g.reversescale?s(g.colorscale):g.colorscale,S=b.length,w=new Array(S),T=new Array(S),_=0;_<S;_++){var v=b[_];w[_]=x+v[0]*(A-x),T[_]=v[1]}return{domain:w,range:T}}function s(m){for(var g=m.length,x=new Array(g),A=g-1,b=0;A>=0;A--,b++){var S=m[A];x[b]=[1-S[0],S[1]]}return x}function h(m,g){g=g||{};for(var x=m.domain,A=m.range,b=A.length,S=new Array(b),w=0;w<b;w++){var T=o(A[w]).toRgb();S[w]=[T.r,T.g,T.b,T.a]}var _=l.scale.linear().domain(x).range(S).clamp(!0),v=g.noNumericCheck,P=g.returnArray,M;return v&&P?M=_:v?M=function(E){return y(_(E))}:P?M=function(E){return c(E)?_(E):o(E).isValid()?E:t.defaultLine}:M=function(E){return c(E)?y(_(E)):o(E).isValid()?E:t.defaultLine},M.domain=_.domain,M.range=function(){return A},M}function d(m,g){return h(u(m),g)}function y(m){var g={r:m[0],g:m[1],b:m[2],a:m[3]};return o(g).toRgbString()}k.exports={hasColorscale:a,extractOpts:f,extractScale:u,flipScale:s,makeColorScaleFunc:h,makeColorScaleFuncFromTrace:d}},{"../../lib":503,"../color":366,"./scales":381,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],378:[function(e,k,z){var l=e("./scales"),o=e("./helpers");k.exports={moduleType:"component",name:"colorscale",attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),handleDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc"),scales:l.scales,defaultScale:l.defaultScale,getScale:l.get,isValidScale:l.isValid,hasColorscale:o.hasColorscale,extractOpts:o.extractOpts,extractScale:o.extractScale,flipScale:o.flipScale,makeColorScaleFunc:o.makeColorScaleFunc,makeColorScaleFuncFromTrace:o.makeColorScaleFuncFromTrace}},{"./attributes":373,"./calc":374,"./cross_trace_defaults":375,"./defaults":376,"./helpers":377,"./layout_attributes":379,"./layout_defaults":380,"./scales":381}],379:[function(e,k,z){var l=e("../../lib/extend").extendFlat,o=e("./attributes"),c=e("./scales").scales;k.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:c.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:c.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:c.RdBu,editType:"calc"}},coloraxis:l({_isSubplotObj:!0,editType:"calc"},o("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":493,"./attributes":373,"./scales":381}],380:[function(e,k,z){var l=e("../../lib"),o=e("../../plot_api/plot_template"),c=e("./layout_attributes"),p=e("./defaults");k.exports=function(n,a){function i(m,g){return l.coerce(n,a,c,m,g)}i("colorscale.sequential"),i("colorscale.sequentialminus"),i("colorscale.diverging");var r=a._colorAxes,f,u;function s(m,g){return l.coerce(f,u,c.coloraxis,m,g)}for(var h in r){var d=r[h];if(d[0])f=n[h]||{},u=o.newContainer(a,h,"coloraxis"),u._name=h,p(f,u,a,s,{prefix:"",cLetter:"c"});else{for(var y=0;y<d[2].length;y++)d[2][y]();delete a._colorAxes[h]}}}},{"../../lib":503,"../../plot_api/plot_template":543,"./defaults":376,"./layout_attributes":379}],381:[function(e,k,z){var l=e("tinycolor2"),o={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},c=o.RdBu;function p(a,i){if(i||(i=c),!a)return i;function r(){try{a=o[a]||JSON.parse(a)}catch{a=i}}return typeof a=="string"&&(r(),typeof a=="string"&&r()),t(a)?a:i}function t(a){var i=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||+a[0][0]!=0||+a[a.length-1][0]!=1)return!1;for(var r=0;r<a.length;r++){var f=a[r];if(f.length!==2||+f[0]<i||!l(f[1]).isValid())return!1;i=+f[0]}return!0}function n(a){return o[a]!==void 0?!0:t(a)}k.exports={scales:o,defaultScale:c,get:p,isValid:n}},{tinycolor2:312}],382:[function(e,k,z){k.exports=function(o,c,p,t,n){var a=(o-p)/(t-p),i=a+c/(t-p),r=(a+i)/2;return n==="left"||n==="bottom"?a:n==="center"||n==="middle"?r:n==="right"||n==="top"?i:a<2/3-r?a:i>4/3-r?i:r}},{}],383:[function(e,k,z){var l=e("../../lib"),o=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];k.exports=function(p,t,n,a){return n==="left"?p=0:n==="center"?p=1:n==="right"?p=2:p=l.constrain(Math.floor(p*3),0,2),a==="bottom"?t=0:a==="middle"?t=1:a==="top"?t=2:t=l.constrain(Math.floor(t*3),0,2),o[t][p]}},{"../../lib":503}],384:[function(e,k,z){z.selectMode=function(l){return l==="lasso"||l==="select"},z.drawMode=function(l){return l==="drawclosedpath"||l==="drawopenpath"||l==="drawline"||l==="drawrect"||l==="drawcircle"},z.openMode=function(l){return l==="drawline"||l==="drawopenpath"},z.rectMode=function(l){return l==="select"||l==="drawline"||l==="drawrect"||l==="drawcircle"},z.freeMode=function(l){return l==="lasso"||l==="drawclosedpath"||l==="drawopenpath"},z.selectingOrDrawing=function(l){return z.freeMode(l)||z.rectMode(l)}},{}],385:[function(e,k,z){var l=e("mouse-event-offset"),o=e("has-hover"),c=e("has-passive-events"),p=e("../../lib").removeElement,t=e("../../plots/cartesian/constants"),n=k.exports={};n.align=e("./align"),n.getCursor=e("./cursor");var a=e("./unhover");n.unhover=a.wrapped,n.unhoverRaw=a.raw,n.init=function(u){var s=u.gd,h=1,d=s._context.doubleClickDelay,y=u.element,m,g,x,A,b,S,w,T;s._mouseDownTime||(s._mouseDownTime=0),y.style.pointerEvents="all",y.onmousedown=P,c?(y._ontouchstart&&y.removeEventListener("touchstart",y._ontouchstart),y._ontouchstart=P,y.addEventListener("touchstart",P,{passive:!1})):y.ontouchstart=P;function _(D,N,O){return Math.abs(D)<O&&(D=0),Math.abs(N)<O&&(N=0),[D,N]}var v=u.clampFn||_;function P(D){s._dragged=!1,s._dragging=!0;var N=r(D);m=N[0],g=N[1],w=D.target,S=D,T=D.buttons===2||D.ctrlKey,typeof D.clientX=="undefined"&&typeof D.clientY=="undefined"&&(D.clientX=m,D.clientY=g),x=new Date().getTime(),x-s._mouseDownTime<d?h+=1:(h=1,s._mouseDownTime=x),u.prepFn&&u.prepFn(D,m,g),o&&!T?(b=i(),b.style.cursor=window.getComputedStyle(y).cursor):o||(b=document,A=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(y).cursor),document.addEventListener("mouseup",E),document.addEventListener("touchend",E),u.dragmode!==!1&&(D.preventDefault(),document.addEventListener("mousemove",M),document.addEventListener("touchmove",M,{passive:!1}))}function M(D){D.preventDefault();var N=r(D),O=u.minDrag||t.MINDRAG,I=v(N[0]-m,N[1]-g,O),F=I[0],V=I[1];(F||V)&&(s._dragged=!0,n.unhover(s,D)),s._dragged&&u.moveFn&&!T&&(s._dragdata={element:y,dx:F,dy:V},u.moveFn(F,V))}function E(D){if(delete s._dragdata,u.dragmode!==!1&&(D.preventDefault(),document.removeEventListener("mousemove",M),document.removeEventListener("touchmove",M)),document.removeEventListener("mouseup",E),document.removeEventListener("touchend",E),o?p(b):A&&(b.documentElement.style.cursor=A,A=null),!s._dragging){s._dragged=!1;return}if(s._dragging=!1,new Date().getTime()-s._mouseDownTime>d&&(h=Math.max(h-1,1)),s._dragged)u.doneFn&&u.doneFn();else if(u.clickFn&&u.clickFn(h,S),!T){var N;try{N=new MouseEvent("click",D)}catch{var O=r(D);N=document.createEvent("MouseEvents"),N.initMouseEvent("click",D.bubbles,D.cancelable,D.view,D.detail,D.screenX,D.screenY,O[0],O[1],D.ctrlKey,D.altKey,D.shiftKey,D.metaKey,D.button,D.relatedTarget)}w.dispatchEvent(N)}s._dragging=!1,s._dragged=!1}};function i(){var f=document.createElement("div");f.className="dragcover";var u=f.style;return u.position="fixed",u.left=0,u.right=0,u.top=0,u.bottom=0,u.zIndex=999999999,u.background="none",document.body.appendChild(f),f}n.coverSlip=i;function r(f){return l(f.changedTouches?f.changedTouches[0]:f,document.body)}},{"../../lib":503,"../../plots/cartesian/constants":561,"./align":382,"./cursor":383,"./unhover":386,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],386:[function(e,k,z){var l=e("../../lib/events"),o=e("../../lib/throttle"),c=e("../../lib/dom").getGraphDiv,p=e("../fx/constants"),t=k.exports={};t.wrapped=function(n,a,i){n=c(n),n._fullLayout&&o.clear(n._fullLayout._uid+p.HOVERID),t.raw(n,a,i)},t.raw=function(a,i){var r=a._fullLayout,f=a._hoverdata;i||(i={}),!(i.target&&!a._dragged&&l.triggerHandler(a,"plotly_beforehover",i)===!1)&&(r._hoverlayer.selectAll("g").remove(),r._hoverlayer.selectAll("line").remove(),r._hoverlayer.selectAll("circle").remove(),a._hoverdata=void 0,i.target&&f&&a.emit("plotly_unhover",{event:i,points:f}))}},{"../../lib/dom":491,"../../lib/events":492,"../../lib/throttle":530,"../fx/constants":400}],387:[function(e,k,z){z.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},z.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],388:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../lib"),c=o.numberFormat,p=e("fast-isnumeric"),t=e("tinycolor2"),n=e("../../registry"),a=e("../color"),i=e("../colorscale"),r=o.strTranslate,f=e("../../lib/svg_text_utils"),u=e("../../constants/xmlns_namespaces"),s=e("../../constants/alignment"),h=s.LINE_SPACING,d=e("../../constants/interactions").DESELECTDIM,y=e("../../traces/scatter/subtypes"),m=e("../../traces/scatter/make_bubble_size_func"),g=e("../../components/fx/helpers").appendArrayPointValue,x=k.exports={};x.font=function(W,J,le,ue){o.isPlainObject(J)&&(ue=J.color,le=J.size,J=J.family),J&&W.style("font-family",J),le+1&&W.style("font-size",le+"px"),ue&&W.call(a.fill,ue)},x.setPosition=function(W,J,le){W.attr("x",J).attr("y",le)},x.setSize=function(W,J,le){W.attr("width",J).attr("height",le)},x.setRect=function(W,J,le,ue,se){W.call(x.setPosition,J,le).call(x.setSize,ue,se)},x.translatePoint=function(W,J,le,ue){var se=le.c2p(W.x),G=ue.c2p(W.y);if(p(se)&&p(G)&&J.node())J.node().nodeName==="text"?J.attr("x",se).attr("y",G):J.attr("transform",r(se,G));else return!1;return!0},x.translatePoints=function(W,J,le){W.each(function(ue){var se=l.select(this);x.translatePoint(ue,se,J,le)})},x.hideOutsideRangePoint=function(W,J,le,ue,se,G){J.attr("display",le.isPtWithinRange(W,se)&&ue.isPtWithinRange(W,G)?null:"none")},x.hideOutsideRangePoints=function(W,J){if(!!J._hasClipOnAxisFalse){var le=J.xaxis,ue=J.yaxis;W.each(function(se){var G=se[0].trace,Y=G.xcalendar,ee=G.ycalendar,$=n.traceIs(G,"bar-like")?".bartext":".point,.textpoint";W.selectAll($).each(function(K){x.hideOutsideRangePoint(K,l.select(this),le,ue,Y,ee)})})}},x.crispRound=function(W,J,le){return!J||!p(J)?le||0:W._context.staticPlot?J:J<1?1:Math.round(J)},x.singleLineStyle=function(W,J,le,ue,se){J.style("fill","none");var G=(((W||[])[0]||{}).trace||{}).line||{},Y=le||G.width||0,ee=se||G.dash||"";a.stroke(J,ue||G.color),x.dashLine(J,ee,Y)},x.lineGroupStyle=function(W,J,le,ue){W.style("fill","none").each(function(se){var G=(((se||[])[0]||{}).trace||{}).line||{},Y=J||G.width||0,ee=ue||G.dash||"";l.select(this).call(a.stroke,le||G.color).call(x.dashLine,ee,Y)})},x.dashLine=function(W,J,le){le=+le||0,J=x.dashStyle(J,le),W.style({"stroke-dasharray":J,"stroke-width":le+"px"})},x.dashStyle=function(W,J){J=+J||1;var le=Math.max(J,3);return W==="solid"?W="":W==="dot"?W=le+"px,"+le+"px":W==="dash"?W=3*le+"px,"+3*le+"px":W==="longdash"?W=5*le+"px,"+5*le+"px":W==="dashdot"?W=3*le+"px,"+le+"px,"+le+"px,"+le+"px":W==="longdashdot"&&(W=5*le+"px,"+2*le+"px,"+le+"px,"+2*le+"px"),W},x.singleFillStyle=function(W){var J=l.select(W.node()),le=J.data(),ue=(((le[0]||[])[0]||{}).trace||{}).fillcolor;ue&&W.call(a.fill,ue)},x.fillGroupStyle=function(W){W.style("stroke-width",0).each(function(J){var le=l.select(this);J[0].trace&&le.call(a.fill,J[0].trace.fillcolor)})};var A=e("./symbol_defs");x.symbolNames=[],x.symbolFuncs=[],x.symbolNeedLines={},x.symbolNoDot={},x.symbolNoFill={},x.symbolList=[],Object.keys(A).forEach(function(W){var J=A[W],le=J.n;x.symbolList.push(le,String(le),W,le+100,String(le+100),W+"-open"),x.symbolNames[le]=W,x.symbolFuncs[le]=J.f,J.needLine&&(x.symbolNeedLines[le]=!0),J.noDot?x.symbolNoDot[le]=!0:x.symbolList.push(le+200,String(le+200),W+"-dot",le+300,String(le+300),W+"-open-dot"),J.noFill&&(x.symbolNoFill[le]=!0)});var b=x.symbolNames.length,S="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";x.symbolNumber=function(W){if(p(W))W=+W;else if(typeof W=="string"){var J=0;W.indexOf("-open")>0&&(J=100,W=W.replace("-open","")),W.indexOf("-dot")>0&&(J+=200,W=W.replace("-dot","")),W=x.symbolNames.indexOf(W),W>=0&&(W+=J)}return W%100>=b||W>=400?0:Math.floor(Math.max(W,0))};function w(W,J){var le=W%100;return x.symbolFuncs[le](J)+(W>=200?S:"")}var T={x1:1,x2:0,y1:0,y2:0},_={x1:0,x2:0,y1:1,y2:0},v=c("~f"),P={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:T},horizontalreversed:{node:"linearGradient",attrs:T,reversed:!0},vertical:{node:"linearGradient",attrs:_},verticalreversed:{node:"linearGradient",attrs:_,reversed:!0}};x.gradient=function(W,J,le,ue,se,G){for(var Y=se.length,ee=P[ue],$=new Array(Y),K=0;K<Y;K++)ee.reversed?$[Y-1-K]=[v((1-se[K][0])*100),se[K][1]]:$[K]=[v(se[K][0]*100),se[K][1]];var Q=J._fullLayout,ae="g"+Q._uid+"-"+le,ie=Q._defs.select(".gradients").selectAll("#"+ae).data([ue+$.join(";")],o.identity);ie.exit().remove(),ie.enter().append(ee.node).each(function(){var ye=l.select(this);ee.attrs&&ye.attr(ee.attrs),ye.attr("id",ae);var ce=ye.selectAll("stop").data($);ce.exit().remove(),ce.enter().append("stop"),ce.each(function(me){var xe=t(me[1]);l.select(this).attr({offset:me[0]+"%","stop-color":a.tinyRGB(xe),"stop-opacity":xe.getAlpha()})})}),W.style(G,Z(ae,J)).style(G+"-opacity",null);var oe=function(ye){return"."+ye.attr("class").replace(/\s/g,".")},fe=oe(l.select(W.node().parentNode))+">"+oe(W);Q._gradientUrlQueryParts[fe]=1},x.pattern=function(W,J,le,ue,se,G,Y,ee,$,K,Q,ae){var ie=J==="legend";ee&&($==="overlay"?(K=ee,Q=a.contrast(K)):(K=void 0,Q=ee));var oe=le._fullLayout,fe="p"+oe._uid+"-"+ue,ye,ce,me=function(et,Ne,De,Ve,dt){return Ve+(dt-Ve)*(et-Ne)/(De-Ne)},xe,ke,Ae,Oe,He={};switch(se){case"/":ye=G*Math.sqrt(2),ce=G*Math.sqrt(2),xe="M-"+ye/4+","+ce/4+"l"+ye/2+",-"+ce/2+"M0,"+ce+"L"+ye+",0M"+ye/4*3+","+ce/4*5+"l"+ye/2+",-"+ce/2,ke=Y*G,Oe="path",He={d:xe,opacity:ae,stroke:Q,"stroke-width":ke+"px"};break;case"\\":ye=G*Math.sqrt(2),ce=G*Math.sqrt(2),xe="M"+ye/4*3+",-"+ce/4+"l"+ye/2+","+ce/2+"M0,0L"+ye+","+ce+"M-"+ye/4+","+ce/4*3+"l"+ye/2+","+ce/2,ke=Y*G,Oe="path",He={d:xe,opacity:ae,stroke:Q,"stroke-width":ke+"px"};break;case"x":ye=G*Math.sqrt(2),ce=G*Math.sqrt(2),xe="M-"+ye/4+","+ce/4+"l"+ye/2+",-"+ce/2+"M0,"+ce+"L"+ye+",0M"+ye/4*3+","+ce/4*5+"l"+ye/2+",-"+ce/2+"M"+ye/4*3+",-"+ce/4+"l"+ye/2+","+ce/2+"M0,0L"+ye+","+ce+"M-"+ye/4+","+ce/4*3+"l"+ye/2+","+ce/2,ke=G-G*Math.sqrt(1-Y),Oe="path",He={d:xe,opacity:ae,stroke:Q,"stroke-width":ke+"px"};break;case"|":ye=G,ce=G,Oe="path",xe="M"+ye/2+",0L"+ye/2+","+ce,ke=Y*G,Oe="path",He={d:xe,opacity:ae,stroke:Q,"stroke-width":ke+"px"};break;case"-":ye=G,ce=G,Oe="path",xe="M0,"+ce/2+"L"+ye+","+ce/2,ke=Y*G,Oe="path",He={d:xe,opacity:ae,stroke:Q,"stroke-width":ke+"px"};break;case"+":ye=G,ce=G,Oe="path",xe="M"+ye/2+",0L"+ye/2+","+ce+"M0,"+ce/2+"L"+ye+","+ce/2,ke=G-G*Math.sqrt(1-Y),Oe="path",He={d:xe,opacity:ae,stroke:Q,"stroke-width":ke+"px"};break;case".":ye=G,ce=G,Y<Math.PI/4?Ae=Math.sqrt(Y*G*G/Math.PI):Ae=me(Y,Math.PI/4,1,G/2,G/Math.sqrt(2)),Oe="circle",He={cx:ye/2,cy:ce/2,r:Ae,opacity:ae,fill:Q};break}var Ge=[se||"noSh",K||"noBg",Q||"noFg",G,Y].join(";"),_e=oe._defs.select(".patterns").selectAll("#"+fe).data([Ge],o.identity);_e.exit().remove(),_e.enter().append("pattern").each(function(){var et=l.select(this);if(et.attr({id:fe,width:ye+"px",height:ce+"px",patternUnits:"userSpaceOnUse",patternTransform:ie?"scale(0.8)":""}),K){var Ne=et.selectAll("rect").data([0]);Ne.exit().remove(),Ne.enter().append("rect").attr({width:ye+"px",height:ce+"px",fill:K})}var De=et.selectAll(Oe).data([0]);De.exit().remove(),De.enter().append(Oe).attr(He)}),W.style("fill",Z(fe,le)).style("fill-opacity",null),W.classed("pattern_filled",!0);var Ie=function(et){return"."+et.attr("class").replace(/\s/g,".")},We=Ie(l.select(W.node().parentNode))+">.pattern_filled";oe._patternUrlQueryParts[We]=1},x.initGradients=function(W){var J=W._fullLayout,le=o.ensureSingle(J._defs,"g","gradients");le.selectAll("linearGradient,radialGradient").remove(),J._gradientUrlQueryParts={}},x.initPatterns=function(W){var J=W._fullLayout,le=o.ensureSingle(J._defs,"g","patterns");le.selectAll("pattern").remove(),J._patternUrlQueryParts={}},x.getPatternAttr=function(W,J,le){return W&&o.isArrayOrTypedArray(W)?J<W.length?W[J]:le:W},x.pointStyle=function(W,J,le){if(!!W.size()){var ue=x.makePointStyleFns(J);W.each(function(se){x.singlePointStyle(se,l.select(this),J,ue,le)})}},x.singlePointStyle=function(W,J,le,ue,se){var G=le.marker,Y=G.line;if(J.style("opacity",ue.selectedOpacityFn?ue.selectedOpacityFn(W):W.mo===void 0?G.opacity:W.mo),ue.ms2mrc){var ee;W.ms==="various"||G.size==="various"?ee=3:ee=ue.ms2mrc(W.ms),W.mrc=ee,ue.selectedSizeFn&&(ee=W.mrc=ue.selectedSizeFn(W));var $=x.symbolNumber(W.mx||G.symbol)||0;W.om=$%200>=100,J.attr("d",w($,ee))}var K=!1,Q,ae,ie;if(W.so)ie=Y.outlierwidth,ae=Y.outliercolor,Q=G.outliercolor;else{var oe=(Y||{}).width;ie=(W.mlw+1||oe+1||(W.trace?(W.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in W?ae=W.mlcc=ue.lineScale(W.mlc):o.isArrayOrTypedArray(Y.color)?ae=a.defaultLine:ae=Y.color,o.isArrayOrTypedArray(G.color)&&(Q=a.defaultLine,K=!0),"mc"in W?Q=W.mcc=ue.markerScale(W.mc):Q=G.color||"rgba(0,0,0,0)",ue.selectedColorFn&&(Q=ue.selectedColorFn(W))}if(W.om)J.call(a.stroke,Q).style({"stroke-width":(ie||1)+"px",fill:"none"});else{J.style("stroke-width",(W.isBlank?0:ie)+"px");var fe=G.gradient,ye=W.mgt;ye?K=!0:ye=fe&&fe.type,o.isArrayOrTypedArray(ye)&&(ye=ye[0],P[ye]||(ye=0));var ce=G.pattern,me=ce&&x.getPatternAttr(ce.shape,W.i,"");if(ye&&ye!=="none"){var xe=W.mgc;xe?K=!0:xe=fe.color;var ke=le.uid;K&&(ke+="-"+W.i),x.gradient(J,se,ke,ye,[[0,xe],[1,Q]],"fill")}else if(me){var Ae=x.getPatternAttr(ce.bgcolor,W.i,null),Oe=x.getPatternAttr(ce.fgcolor,W.i,null),He=ce.fgopacity,Ge=x.getPatternAttr(ce.size,W.i,8),_e=x.getPatternAttr(ce.solidity,W.i,.3),Ie=W.mcc||o.isArrayOrTypedArray(ce.shape)||o.isArrayOrTypedArray(ce.bgcolor)||o.isArrayOrTypedArray(ce.size)||o.isArrayOrTypedArray(ce.solidity),We=le.uid;Ie&&(We+="-"+W.i),x.pattern(J,"point",se,We,me,Ge,_e,W.mcc,ce.fillmode,Ae,Oe,He)}else a.fill(J,Q);ie&&a.stroke(J,ae)}},x.makePointStyleFns=function(W){var J={},le=W.marker;return J.markerScale=x.tryColorscale(le,""),J.lineScale=x.tryColorscale(le,"line"),n.traceIs(W,"symbols")&&(J.ms2mrc=y.isBubble(W)?m(W):function(){return(le.size||6)/2}),W.selectedpoints&&o.extendFlat(J,x.makeSelectedPointStyleFns(W)),J},x.makeSelectedPointStyleFns=function(W){var J={},le=W.selected||{},ue=W.unselected||{},se=W.marker||{},G=le.marker||{},Y=ue.marker||{},ee=se.opacity,$=G.opacity,K=Y.opacity,Q=$!==void 0,ae=K!==void 0;(o.isArrayOrTypedArray(ee)||Q||ae)&&(J.selectedOpacityFn=function(Ae){var Oe=Ae.mo===void 0?se.opacity:Ae.mo;return Ae.selected?Q?$:Oe:ae?K:d*Oe});var ie=se.color,oe=G.color,fe=Y.color;(oe||fe)&&(J.selectedColorFn=function(Ae){var Oe=Ae.mcc||ie;return Ae.selected?oe||Oe:fe||Oe});var ye=se.size,ce=G.size,me=Y.size,xe=ce!==void 0,ke=me!==void 0;return n.traceIs(W,"symbols")&&(xe||ke)&&(J.selectedSizeFn=function(Ae){var Oe=Ae.mrc||ye/2;return Ae.selected?xe?ce/2:Oe:ke?me/2:Oe}),J},x.makeSelectedTextStyleFns=function(W){var J={},le=W.selected||{},ue=W.unselected||{},se=W.textfont||{},G=le.textfont||{},Y=ue.textfont||{},ee=se.color,$=G.color,K=Y.color;return J.selectedTextColorFn=function(Q){var ae=Q.tc||ee;return Q.selected?$||ae:K||($?ae:a.addOpacity(ae,d))},J},x.selectedPointStyle=function(W,J){if(!(!W.size()||!J.selectedpoints)){var le=x.makeSelectedPointStyleFns(J),ue=J.marker||{},se=[];le.selectedOpacityFn&&se.push(function(G,Y){G.style("opacity",le.selectedOpacityFn(Y))}),le.selectedColorFn&&se.push(function(G,Y){a.fill(G,le.selectedColorFn(Y))}),le.selectedSizeFn&&se.push(function(G,Y){var ee=Y.mx||ue.symbol||0,$=le.selectedSizeFn(Y);G.attr("d",w(x.symbolNumber(ee),$)),Y.mrc2=$}),se.length&&W.each(function(G){for(var Y=l.select(this),ee=0;ee<se.length;ee++)se[ee](Y,G)})}},x.tryColorscale=function(W,J){var le=J?o.nestedProperty(W,J).get():W;if(le){var ue=le.color;if((le.colorscale||le._colorAx)&&o.isArrayOrTypedArray(ue))return i.makeColorScaleFuncFromTrace(le)}return o.identity};var M={start:1,end:-1,middle:0,bottom:1,top:-1};function E(W,J,le,ue,se){var G=l.select(W.node().parentNode),Y=J.indexOf("top")!==-1?"top":J.indexOf("bottom")!==-1?"bottom":"middle",ee=J.indexOf("left")!==-1?"end":J.indexOf("right")!==-1?"start":"middle",$=ue?ue/.8+1:0,K=(f.lineCount(W)-1)*h+1,Q=M[ee]*$,ae=le*.75+M[Y]*$+(M[Y]-1)*K*le/2;W.attr("text-anchor",ee),se||G.attr("transform",r(Q,ae))}function D(W,J){var le=W.ts||J.textfont.size;return p(le)&&le>0?le:0}x.textPointStyle=function(W,J,le){if(!!W.size()){var ue;if(J.selectedpoints){var se=x.makeSelectedTextStyleFns(J);ue=se.selectedTextColorFn}var G=J.texttemplate,Y=le._fullLayout;W.each(function(ee){var $=l.select(this),K=G?o.extractOption(ee,J,"txt","texttemplate"):o.extractOption(ee,J,"tx","text");if(!K&&K!==0){$.remove();return}if(G){var Q=J._module.formatLabels,ae=Q?Q(ee,J,Y):{},ie={};g(ie,J,ee.i);var oe=J._meta||{};K=o.texttemplateString(K,ae,Y._d3locale,ie,ee,oe)}var fe=ee.tp||J.textposition,ye=D(ee,J),ce=ue?ue(ee):ee.tc||J.textfont.color;$.call(x.font,ee.tf||J.textfont.family,ye,ce).text(K).call(f.convertToTspans,le).call(E,fe,ye,ee.mrc)})}},x.selectedTextStyle=function(W,J){if(!(!W.size()||!J.selectedpoints)){var le=x.makeSelectedTextStyleFns(J);W.each(function(ue){var se=l.select(this),G=le.selectedTextColorFn(ue),Y=ue.tp||J.textposition,ee=D(ue,J);a.fill(se,G);var $=n.traceIs(J,"bar-like");E(se,Y,ee,ue.mrc2||ue.mrc,$)})}};var N=.5;x.smoothopen=function(W,J){if(W.length<3)return"M"+W.join("L");var le="M"+W[0],ue=[],se;for(se=1;se<W.length-1;se++)ue.push(O(W[se-1],W[se],W[se+1],J));for(le+="Q"+ue[0][0]+" "+W[1],se=2;se<W.length-1;se++)le+="C"+ue[se-2][1]+" "+ue[se-1][0]+" "+W[se];return le+="Q"+ue[W.length-3][1]+" "+W[W.length-1],le},x.smoothclosed=function(W,J){if(W.length<3)return"M"+W.join("L")+"Z";var le="M"+W[0],ue=W.length-1,se=[O(W[ue],W[0],W[1],J)],G;for(G=1;G<ue;G++)se.push(O(W[G-1],W[G],W[G+1],J));for(se.push(O(W[ue-1],W[ue],W[0],J)),G=1;G<=ue;G++)le+="C"+se[G-1][1]+" "+se[G][0]+" "+W[G];return le+="C"+se[ue][1]+" "+se[0][0]+" "+W[0]+"Z",le};function O(W,J,le,ue){var se=W[0]-J[0],G=W[1]-J[1],Y=le[0]-J[0],ee=le[1]-J[1],$=Math.pow(se*se+G*G,N/2),K=Math.pow(Y*Y+ee*ee,N/2),Q=(K*K*se-$*$*Y)*ue,ae=(K*K*G-$*$*ee)*ue,ie=3*K*($+K),oe=3*$*($+K);return[[l.round(J[0]+(ie&&Q/ie),2),l.round(J[1]+(ie&&ae/ie),2)],[l.round(J[0]-(oe&&Q/oe),2),l.round(J[1]-(oe&&ae/oe),2)]]}var I={hv:function(W,J){return"H"+l.round(J[0],2)+"V"+l.round(J[1],2)},vh:function(W,J){return"V"+l.round(J[1],2)+"H"+l.round(J[0],2)},hvh:function(W,J){return"H"+l.round((W[0]+J[0])/2,2)+"V"+l.round(J[1],2)+"H"+l.round(J[0],2)},vhv:function(W,J){return"V"+l.round((W[1]+J[1])/2,2)+"H"+l.round(J[0],2)+"V"+l.round(J[1],2)}},F=function(W,J){return"L"+l.round(J[0],2)+","+l.round(J[1],2)};x.steps=function(W){var J=I[W]||F;return function(le){for(var ue="M"+l.round(le[0][0],2)+","+l.round(le[0][1],2),se=1;se<le.length;se++)ue+=J(le[se-1],le[se]);return ue}},x.makeTester=function(){var W=o.ensureSingleById(l.select("body"),"svg","js-plotly-tester",function(le){le.attr(u.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),J=o.ensureSingle(W,"path","js-reference-point",function(le){le.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});x.tester=W,x.testref=J},x.savedBBoxes={};var V=0,U=1e4;x.bBox=function(W,J,le){le||(le=j(W));var ue;if(le){if(ue=x.savedBBoxes[le],ue)return o.extendFlat({},ue)}else if(W.childNodes.length===1){var se=W.childNodes[0];if(le=j(se),le){var G=+se.getAttribute("x")||0,Y=+se.getAttribute("y")||0,ee=se.getAttribute("transform");if(!ee){var $=x.bBox(se,!1,le);return G&&($.left+=G,$.right+=G),Y&&($.top+=Y,$.bottom+=Y),$}if(le+="~"+G+"~"+Y+"~"+ee,ue=x.savedBBoxes[le],ue)return o.extendFlat({},ue)}}var K,Q;J?K=W:(Q=x.tester.node(),K=W.cloneNode(!0),Q.appendChild(K)),l.select(K).attr("transform",null).call(f.positionText,0,0);var ae=K.getBoundingClientRect(),ie=x.testref.node().getBoundingClientRect();J||Q.removeChild(K);var oe={height:ae.height,width:ae.width,left:ae.left-ie.left,top:ae.top-ie.top,right:ae.right-ie.left,bottom:ae.bottom-ie.top};return V>=U&&(x.savedBBoxes={},V=0),le&&(x.savedBBoxes[le]=oe),V++,o.extendFlat({},oe)};function j(W){var J=W.getAttribute("data-unformatted");if(J!==null)return J+W.getAttribute("data-math")+W.getAttribute("text-anchor")+W.getAttribute("style")}x.setClipUrl=function(W,J,le){W.attr("clip-path",Z(J,le))};function Z(W,J){if(!W)return null;var le=J._context,ue=le._exportedPlot?"":le._baseUrl||"";return ue?"url('"+ue+"#"+W+"')":"url(#"+W+")"}x.getTranslate=function(W){var J=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,le=W.attr?"attr":"getAttribute",ue=W[le]("transform")||"",se=ue.replace(J,function(G,Y,ee){return[Y,ee].join(" ")}).split(" ");return{x:+se[0]||0,y:+se[1]||0}},x.setTranslate=function(W,J,le){var ue=/(\btranslate\(.*?\);?)/,se=W.attr?"attr":"getAttribute",G=W.attr?"attr":"setAttribute",Y=W[se]("transform")||"";return J=J||0,le=le||0,Y=Y.replace(ue,"").trim(),Y+=r(J,le),Y=Y.trim(),W[G]("transform",Y),Y},x.getScale=function(W){var J=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,le=W.attr?"attr":"getAttribute",ue=W[le]("transform")||"",se=ue.replace(J,function(G,Y,ee){return[Y,ee].join(" ")}).split(" ");return{x:+se[0]||1,y:+se[1]||1}},x.setScale=function(W,J,le){var ue=/(\bscale\(.*?\);?)/,se=W.attr?"attr":"getAttribute",G=W.attr?"attr":"setAttribute",Y=W[se]("transform")||"";return J=J||1,le=le||1,Y=Y.replace(ue,"").trim(),Y+="scale("+J+","+le+")",Y=Y.trim(),W[G]("transform",Y),Y};var te=/\s*sc.*/;x.setPointGroupScale=function(W,J,le){if(J=J||1,le=le||1,!!W){var ue=J===1&&le===1?"":"scale("+J+","+le+")";W.each(function(){var se=(this.getAttribute("transform")||"").replace(te,"");se+=ue,se=se.trim(),this.setAttribute("transform",se)})}};var re=/translate\([^)]*\)\s*$/;x.setTextPointsScale=function(W,J,le){!W||W.each(function(){var ue,se=l.select(this),G=se.select("text");if(!!G.node()){var Y=parseFloat(G.attr("x")||0),ee=parseFloat(G.attr("y")||0),$=(se.attr("transform")||"").match(re);J===1&&le===1?ue=[]:ue=[r(Y,ee),"scale("+J+","+le+")",r(-Y,-ee)],$&&ue.push($),se.attr("transform",ue.join(""))}})}},{"../../components/fx/helpers":402,"../../constants/alignment":471,"../../constants/interactions":478,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../registry":638,"../../traces/scatter/make_bubble_size_func":943,"../../traces/scatter/subtypes":951,"../color":366,"../colorscale":378,"./symbol_defs":389,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],389:[function(e,k,z){var l=e("@plotly/d3");k.exports={circle:{n:0,f:function(o){var c=l.round(o,2);return"M"+c+",0A"+c+","+c+" 0 1,1 0,-"+c+"A"+c+","+c+" 0 0,1 "+c+",0Z"}},square:{n:1,f:function(o){var c=l.round(o,2);return"M"+c+","+c+"H-"+c+"V-"+c+"H"+c+"Z"}},diamond:{n:2,f:function(o){var c=l.round(o*1.3,2);return"M"+c+",0L0,"+c+"L-"+c+",0L0,-"+c+"Z"}},cross:{n:3,f:function(o){var c=l.round(o*.4,2),p=l.round(o*1.2,2);return"M"+p+","+c+"H"+c+"V"+p+"H-"+c+"V"+c+"H-"+p+"V-"+c+"H-"+c+"V-"+p+"H"+c+"V-"+c+"H"+p+"Z"}},x:{n:4,f:function(o){var c=l.round(o*.8/Math.sqrt(2),2),p="l"+c+","+c,t="l"+c+",-"+c,n="l-"+c+",-"+c,a="l-"+c+","+c;return"M0,"+c+p+t+n+t+n+a+n+a+p+a+p+"Z"}},"triangle-up":{n:5,f:function(o){var c=l.round(o*2/Math.sqrt(3),2),p=l.round(o/2,2),t=l.round(o,2);return"M-"+c+","+p+"H"+c+"L0,-"+t+"Z"}},"triangle-down":{n:6,f:function(o){var c=l.round(o*2/Math.sqrt(3),2),p=l.round(o/2,2),t=l.round(o,2);return"M-"+c+",-"+p+"H"+c+"L0,"+t+"Z"}},"triangle-left":{n:7,f:function(o){var c=l.round(o*2/Math.sqrt(3),2),p=l.round(o/2,2),t=l.round(o,2);return"M"+p+",-"+c+"V"+c+"L-"+t+",0Z"}},"triangle-right":{n:8,f:function(o){var c=l.round(o*2/Math.sqrt(3),2),p=l.round(o/2,2),t=l.round(o,2);return"M-"+p+",-"+c+"V"+c+"L"+t+",0Z"}},"triangle-ne":{n:9,f:function(o){var c=l.round(o*.6,2),p=l.round(o*1.2,2);return"M-"+p+",-"+c+"H"+c+"V"+p+"Z"}},"triangle-se":{n:10,f:function(o){var c=l.round(o*.6,2),p=l.round(o*1.2,2);return"M"+c+",-"+p+"V"+c+"H-"+p+"Z"}},"triangle-sw":{n:11,f:function(o){var c=l.round(o*.6,2),p=l.round(o*1.2,2);return"M"+p+","+c+"H-"+c+"V-"+p+"Z"}},"triangle-nw":{n:12,f:function(o){var c=l.round(o*.6,2),p=l.round(o*1.2,2);return"M-"+c+","+p+"V-"+c+"H"+p+"Z"}},pentagon:{n:13,f:function(o){var c=l.round(o*.951,2),p=l.round(o*.588,2),t=l.round(-o,2),n=l.round(o*-.309,2),a=l.round(o*.809,2);return"M"+c+","+n+"L"+p+","+a+"H-"+p+"L-"+c+","+n+"L0,"+t+"Z"}},hexagon:{n:14,f:function(o){var c=l.round(o,2),p=l.round(o/2,2),t=l.round(o*Math.sqrt(3)/2,2);return"M"+t+",-"+p+"V"+p+"L0,"+c+"L-"+t+","+p+"V-"+p+"L0,-"+c+"Z"}},hexagon2:{n:15,f:function(o){var c=l.round(o,2),p=l.round(o/2,2),t=l.round(o*Math.sqrt(3)/2,2);return"M-"+p+","+t+"H"+p+"L"+c+",0L"+p+",-"+t+"H-"+p+"L-"+c+",0Z"}},octagon:{n:16,f:function(o){var c=l.round(o*.924,2),p=l.round(o*.383,2);return"M-"+p+",-"+c+"H"+p+"L"+c+",-"+p+"V"+p+"L"+p+","+c+"H-"+p+"L-"+c+","+p+"V-"+p+"Z"}},star:{n:17,f:function(o){var c=o*1.4,p=l.round(c*.225,2),t=l.round(c*.951,2),n=l.round(c*.363,2),a=l.round(c*.588,2),i=l.round(-c,2),r=l.round(c*-.309,2),f=l.round(c*.118,2),u=l.round(c*.809,2),s=l.round(c*.382,2);return"M"+p+","+r+"H"+t+"L"+n+","+f+"L"+a+","+u+"L0,"+s+"L-"+a+","+u+"L-"+n+","+f+"L-"+t+","+r+"H-"+p+"L0,"+i+"Z"}},hexagram:{n:18,f:function(o){var c=l.round(o*.66,2),p=l.round(o*.38,2),t=l.round(o*.76,2);return"M-"+t+",0l-"+p+",-"+c+"h"+t+"l"+p+",-"+c+"l"+p+","+c+"h"+t+"l-"+p+","+c+"l"+p+","+c+"h-"+t+"l-"+p+","+c+"l-"+p+",-"+c+"h-"+t+"Z"}},"star-triangle-up":{n:19,f:function(o){var c=l.round(o*Math.sqrt(3)*.8,2),p=l.round(o*.8,2),t=l.round(o*1.6,2),n=l.round(o*4,2),a="A "+n+","+n+" 0 0 1 ";return"M-"+c+","+p+a+c+","+p+a+"0,-"+t+a+"-"+c+","+p+"Z"}},"star-triangle-down":{n:20,f:function(o){var c=l.round(o*Math.sqrt(3)*.8,2),p=l.round(o*.8,2),t=l.round(o*1.6,2),n=l.round(o*4,2),a="A "+n+","+n+" 0 0 1 ";return"M"+c+",-"+p+a+"-"+c+",-"+p+a+"0,"+t+a+c+",-"+p+"Z"}},"star-square":{n:21,f:function(o){var c=l.round(o*1.1,2),p=l.round(o*2,2),t="A "+p+","+p+" 0 0 1 ";return"M-"+c+",-"+c+t+"-"+c+","+c+t+c+","+c+t+c+",-"+c+t+"-"+c+",-"+c+"Z"}},"star-diamond":{n:22,f:function(o){var c=l.round(o*1.4,2),p=l.round(o*1.9,2),t="A "+p+","+p+" 0 0 1 ";return"M-"+c+",0"+t+"0,"+c+t+c+",0"+t+"0,-"+c+t+"-"+c+",0Z"}},"diamond-tall":{n:23,f:function(o){var c=l.round(o*.7,2),p=l.round(o*1.4,2);return"M0,"+p+"L"+c+",0L0,-"+p+"L-"+c+",0Z"}},"diamond-wide":{n:24,f:function(o){var c=l.round(o*1.4,2),p=l.round(o*.7,2);return"M0,"+p+"L"+c+",0L0,-"+p+"L-"+c+",0Z"}},hourglass:{n:25,f:function(o){var c=l.round(o,2);return"M"+c+","+c+"H-"+c+"L"+c+",-"+c+"H-"+c+"Z"},noDot:!0},bowtie:{n:26,f:function(o){var c=l.round(o,2);return"M"+c+","+c+"V-"+c+"L-"+c+","+c+"V-"+c+"Z"},noDot:!0},"circle-cross":{n:27,f:function(o){var c=l.round(o,2);return"M0,"+c+"V-"+c+"M"+c+",0H-"+c+"M"+c+",0A"+c+","+c+" 0 1,1 0,-"+c+"A"+c+","+c+" 0 0,1 "+c+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(o){var c=l.round(o,2),p=l.round(o/Math.sqrt(2),2);return"M"+p+","+p+"L-"+p+",-"+p+"M"+p+",-"+p+"L-"+p+","+p+"M"+c+",0A"+c+","+c+" 0 1,1 0,-"+c+"A"+c+","+c+" 0 0,1 "+c+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(o){var c=l.round(o,2);return"M0,"+c+"V-"+c+"M"+c+",0H-"+c+"M"+c+","+c+"H-"+c+"V-"+c+"H"+c+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(o){var c=l.round(o,2);return"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c+"M"+c+","+c+"H-"+c+"V-"+c+"H"+c+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(o){var c=l.round(o*1.3,2);return"M"+c+",0L0,"+c+"L-"+c+",0L0,-"+c+"ZM0,-"+c+"V"+c+"M-"+c+",0H"+c},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(o){var c=l.round(o*1.3,2),p=l.round(o*.65,2);return"M"+c+",0L0,"+c+"L-"+c+",0L0,-"+c+"ZM-"+p+",-"+p+"L"+p+","+p+"M-"+p+","+p+"L"+p+",-"+p},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(o){var c=l.round(o*1.4,2);return"M0,"+c+"V-"+c+"M"+c+",0H-"+c},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(o){var c=l.round(o,2);return"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(o){var c=l.round(o*1.2,2),p=l.round(o*.85,2);return"M0,"+c+"V-"+c+"M"+c+",0H-"+c+"M"+p+","+p+"L-"+p+",-"+p+"M"+p+",-"+p+"L-"+p+","+p},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(o){var c=l.round(o/2,2),p=l.round(o,2);return"M"+c+","+p+"V-"+p+"m-"+p+",0V"+p+"M"+p+","+c+"H-"+p+"m0,-"+p+"H"+p},needLine:!0,noFill:!0},"y-up":{n:37,f:function(o){var c=l.round(o*1.2,2),p=l.round(o*1.6,2),t=l.round(o*.8,2);return"M-"+c+","+t+"L0,0M"+c+","+t+"L0,0M0,-"+p+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(o){var c=l.round(o*1.2,2),p=l.round(o*1.6,2),t=l.round(o*.8,2);return"M-"+c+",-"+t+"L0,0M"+c+",-"+t+"L0,0M0,"+p+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(o){var c=l.round(o*1.2,2),p=l.round(o*1.6,2),t=l.round(o*.8,2);return"M"+t+","+c+"L0,0M"+t+",-"+c+"L0,0M-"+p+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(o){var c=l.round(o*1.2,2),p=l.round(o*1.6,2),t=l.round(o*.8,2);return"M-"+t+","+c+"L0,0M-"+t+",-"+c+"L0,0M"+p+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(o){var c=l.round(o*1.4,2);return"M"+c+",0H-"+c},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(o){var c=l.round(o*1.4,2);return"M0,"+c+"V-"+c},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(o){var c=l.round(o,2);return"M"+c+",-"+c+"L-"+c+","+c},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(o){var c=l.round(o,2);return"M"+c+","+c+"L-"+c+",-"+c},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(o){var c=l.round(o,2),p=l.round(o*2,2);return"M0,0L-"+c+","+p+"H"+c+"Z"},noDot:!0},"arrow-down":{n:46,f:function(o){var c=l.round(o,2),p=l.round(o*2,2);return"M0,0L-"+c+",-"+p+"H"+c+"Z"},noDot:!0},"arrow-left":{n:47,f:function(o){var c=l.round(o*2,2),p=l.round(o,2);return"M0,0L"+c+",-"+p+"V"+p+"Z"},noDot:!0},"arrow-right":{n:48,f:function(o){var c=l.round(o*2,2),p=l.round(o,2);return"M0,0L-"+c+",-"+p+"V"+p+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(o){var c=l.round(o,2),p=l.round(o*2,2);return"M-"+c+",0H"+c+"M0,0L-"+c+","+p+"H"+c+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(o){var c=l.round(o,2),p=l.round(o*2,2);return"M-"+c+",0H"+c+"M0,0L-"+c+",-"+p+"H"+c+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(o){var c=l.round(o*2,2),p=l.round(o,2);return"M0,-"+p+"V"+p+"M0,0L"+c+",-"+p+"V"+p+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(o){var c=l.round(o*2,2),p=l.round(o,2);return"M0,-"+p+"V"+p+"M0,0L-"+c+",-"+p+"V"+p+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],390:[function(e,k,z){k.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],391:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../registry"),c=e("../../plots/cartesian/axes"),p=e("../../lib"),t=e("./compute_error");k.exports=function(i){for(var r=i.calcdata,f=0;f<r.length;f++){var u=r[f],s=u[0].trace;if(s.visible===!0&&o.traceIs(s,"errorBarsOK")){var h=c.getFromId(i,s.xaxis),d=c.getFromId(i,s.yaxis);n(u,s,h,"x"),n(u,s,d,"y")}}};function n(a,i,r,f){var u=i["error_"+f]||{},s=u.visible&&["linear","log"].indexOf(r.type)!==-1,h=[];if(!!s){for(var d=t(u),y=0;y<a.length;y++){var m=a[y],g=m.i;if(g===void 0)g=y;else if(g===null)continue;var x=m[f];if(!!l(r.c2l(x))){var A=d(x,g);if(l(A[0])&&l(A[1])){var b=m[f+"s"]=x-A[0],S=m[f+"h"]=x+A[1];h.push(b,S)}}}var w=r._id,T=i._extremes[w],_=c.findExtremes(r,h,p.extendFlat({tozero:T.opts.tozero},{padded:!0}));T.min=T.min.concat(_.min),T.max=T.max.concat(_.max)}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./compute_error":392,"fast-isnumeric":190}],392:[function(e,k,z){k.exports=function(c){var p=c.type,t=c.symmetric;if(p==="data"){var n=c.array||[];if(t)return function(u,s){var h=+n[s];return[h,h]};var a=c.arrayminus||[];return function(u,s){var h=+n[s],d=+a[s];return!isNaN(h)||!isNaN(d)?[d||0,h||0]:[NaN,NaN]}}else{var i=l(p,c.value),r=l(p,c.valueminus);return t||c.valueminus===void 0?function(u){var s=i(u);return[s,s]}:function(u){return[r(u),i(u)]}}};function l(o,c){if(o==="percent")return function(p){return Math.abs(p*c/100)};if(o==="constant")return function(){return Math.abs(c)};if(o==="sqrt")return function(p){return Math.sqrt(Math.abs(p))}}},{}],393:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../registry"),c=e("../../lib"),p=e("../../plot_api/plot_template"),t=e("./attributes");k.exports=function(n,a,i,r){var f="error_"+r.axis,u=p.newContainer(a,f),s=n[f]||{};function h(b,S){return c.coerce(s,u,t,b,S)}var d=s.array!==void 0||s.value!==void 0||s.type==="sqrt",y=h("visible",d);if(y!==!1){var m=h("type","array"in s?"data":"percent"),g=!0;m!=="sqrt"&&(g=h("symmetric",!((m==="data"?"arrayminus":"valueminus")in s))),m==="data"?(h("array"),h("traceref"),g||(h("arrayminus"),h("tracerefminus"))):(m==="percent"||m==="constant")&&(h("value"),g||h("valueminus"));var x="copy_"+r.inherit+"style";if(r.inherit){var A=a["error_"+r.inherit];(A||{}).visible&&h(x,!(s.color||l(s.thickness)||l(s.width)))}(!r.inherit||!u[x])&&(h("color",i),h("thickness"),h("width",o.traceIs(a,"gl3d")?0:4))}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"./attributes":390,"fast-isnumeric":190}],394:[function(e,k,z){var l=e("../../lib"),o=e("../../plot_api/edit_types").overrideAll,c=e("./attributes"),p={error_x:l.extendFlat({},c),error_y:l.extendFlat({},c)};delete p.error_x.copy_zstyle,delete p.error_y.copy_zstyle,delete p.error_y.copy_ystyle;var t={error_x:l.extendFlat({},c),error_y:l.extendFlat({},c),error_z:l.extendFlat({},c)};delete t.error_x.copy_ystyle,delete t.error_y.copy_ystyle,delete t.error_z.copy_ystyle,delete t.error_z.copy_zstyle,k.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:p,bar:p,histogram:p,scatter3d:o(t,"calc","nested"),scattergl:o(p,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:n};function n(a,i,r){(i.error_y||{}).visible&&(r.yerr=a.yh-a.y,i.error_y.symmetric||(r.yerrneg=a.y-a.ys)),(i.error_x||{}).visible&&(r.xerr=a.xh-a.x,i.error_x.symmetric||(r.xerrneg=a.x-a.xs))}},{"../../lib":503,"../../plot_api/edit_types":536,"./attributes":390,"./calc":391,"./compute_error":392,"./defaults":393,"./plot":395,"./style":396}],395:[function(e,k,z){var l=e("@plotly/d3"),o=e("fast-isnumeric"),c=e("../drawing"),p=e("../../traces/scatter/subtypes");k.exports=function(a,i,r,f){var u,s=r.xaxis,h=r.yaxis,d=f&&f.duration>0;i.each(function(y){var m=y[0].trace,g=m.error_x||{},x=m.error_y||{},A;m.ids&&(A=function(T){return T.id});var b=p.hasMarkers(m)&&m.marker.maxdisplayed>0;!x.visible&&!g.visible&&(y=[]);var S=l.select(this).selectAll("g.errorbar").data(y,A);if(S.exit().remove(),!!y.length){g.visible||S.selectAll("path.xerror").remove(),x.visible||S.selectAll("path.yerror").remove(),S.style("opacity",1);var w=S.enter().append("g").classed("errorbar",!0);d&&w.style("opacity",0).transition().duration(f.duration).style("opacity",1),c.setClipUrl(S,r.layerClipId,a),S.each(function(T){var _=l.select(this),v=t(T,s,h);if(!(b&&!T.vis)){var P,M=_.select("path.yerror");if(x.visible&&o(v.x)&&o(v.yh)&&o(v.ys)){var E=x.width;P="M"+(v.x-E)+","+v.yh+"h"+2*E+"m-"+E+",0V"+v.ys,v.noYS||(P+="m-"+E+",0h"+2*E),u=!M.size(),u?M=_.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):d&&(M=M.transition().duration(f.duration).ease(f.easing)),M.attr("d",P)}else M.remove();var D=_.select("path.xerror");if(g.visible&&o(v.y)&&o(v.xh)&&o(v.xs)){var N=(g.copy_ystyle?x:g).width;P="M"+v.xh+","+(v.y-N)+"v"+2*N+"m0,-"+N+"H"+v.xs,v.noXS||(P+="m0,-"+N+"v"+2*N),u=!D.size(),u?D=_.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):d&&(D=D.transition().duration(f.duration).ease(f.easing)),D.attr("d",P)}else D.remove()}})}})};function t(n,a,i){var r={x:a.c2p(n.x),y:i.c2p(n.y)};return n.yh!==void 0&&(r.yh=i.c2p(n.yh),r.ys=i.c2p(n.ys),o(r.ys)||(r.noYS=!0,r.ys=i.c2p(n.ys,!0))),n.xh!==void 0&&(r.xh=a.c2p(n.xh),r.xs=a.c2p(n.xs),o(r.xs)||(r.noXS=!0,r.xs=a.c2p(n.xs,!0))),r}},{"../../traces/scatter/subtypes":951,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],396:[function(e,k,z){var l=e("@plotly/d3"),o=e("../color");k.exports=function(p){p.each(function(t){var n=t[0].trace,a=n.error_y||{},i=n.error_x||{},r=l.select(this);r.selectAll("path.yerror").style("stroke-width",a.thickness+"px").call(o.stroke,a.color),i.copy_ystyle&&(i=a),r.selectAll("path.xerror").style("stroke-width",i.thickness+"px").call(o.stroke,i.color)})}},{"../color":366,"@plotly/d3":58}],397:[function(e,k,z){var l=e("../../plots/font_attributes"),o=e("./layout_attributes").hoverlabel,c=e("../../lib/extend").extendFlat;k.exports={hoverlabel:{bgcolor:c({},o.bgcolor,{arrayOk:!0}),bordercolor:c({},o.bordercolor,{arrayOk:!0}),font:l({arrayOk:!0,editType:"none"}),align:c({},o.align,{arrayOk:!0}),namelength:c({},o.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":493,"../../plots/font_attributes":585,"./layout_attributes":407}],398:[function(e,k,z){var l=e("../../lib"),o=e("../../registry");k.exports=function(t){var n=t.calcdata,a=t._fullLayout;function i(h){return function(d){return l.coerceHoverinfo({hoverinfo:d},{_module:h._module},a)}}for(var r=0;r<n.length;r++){var f=n[r],u=f[0].trace;if(!o.traceIs(u,"pie-like")){var s=o.traceIs(u,"2dMap")?c:l.fillArray;s(u.hoverinfo,f,"hi",i(u)),u.hovertemplate&&s(u.hovertemplate,f,"ht"),!!u.hoverlabel&&(s(u.hoverlabel.bgcolor,f,"hbg"),s(u.hoverlabel.bordercolor,f,"hbc"),s(u.hoverlabel.font.size,f,"hts"),s(u.hoverlabel.font.color,f,"htc"),s(u.hoverlabel.font.family,f,"htf"),s(u.hoverlabel.namelength,f,"hnl"),s(u.hoverlabel.align,f,"hta"))}}};function c(p,t,n,a){a=a||l.identity,Array.isArray(p)&&(t[0][n]=a(p))}},{"../../lib":503,"../../registry":638}],399:[function(e,k,z){var l=e("../../registry"),o=e("./hover").hover;k.exports=function(p,t,n){var a=l.getComponentMethod("annotations","onClick")(p,p._hoverdata);n!==void 0&&o(p,t,n,!0);function i(){p.emit("plotly_click",{points:p._hoverdata,event:t})}p._hoverdata&&t&&t.target&&(a&&a.then?a.then(i):i(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}},{"../../registry":638,"./hover":403}],400:[function(e,k,z){k.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],401:[function(e,k,z){var l=e("../../lib"),o=e("./attributes"),c=e("./hoverlabel_defaults");k.exports=function(t,n,a,i){function r(u,s){return l.coerce(t,n,o,u,s)}var f=l.extendFlat({},i.hoverlabel);n.hovertemplate&&(f.namelength=-1),c(t,n,r,f)}},{"../../lib":503,"./attributes":397,"./hoverlabel_defaults":404}],402:[function(e,k,z){var l=e("../../lib");z.getSubplot=function(a){return a.subplot||a.xaxis+a.yaxis||a.geo},z.isTraceInSubplots=function(a,i){if(a.type==="splom"){for(var r=a.xaxes||[],f=a.yaxes||[],u=0;u<r.length;u++)for(var s=0;s<f.length;s++)if(i.indexOf(r[u]+f[s])!==-1)return!0;return!1}return i.indexOf(z.getSubplot(a))!==-1},z.flat=function(a,i){for(var r=new Array(a.length),f=0;f<a.length;f++)r[f]=i;return r},z.p2c=function(a,i){for(var r=new Array(a.length),f=0;f<a.length;f++)r[f]=a[f].p2c(i);return r},z.getDistanceFunction=function(a,i,r,f){return a==="closest"?f||z.quadrature(i,r):a.charAt(0)==="x"?i:r},z.getClosest=function(a,i,r){if(r.index!==!1)r.index>=0&&r.index<a.length?r.distance=0:r.index=!1;else for(var f=0;f<a.length;f++){var u=i(a[f]);u<=r.distance&&(r.index=f,r.distance=u)}return r},z.inbox=function(a,i,r){return a*i<0||a===0?r:1/0},z.quadrature=function(a,i){return function(r){var f=a(r),u=i(r);return Math.sqrt(f*f+u*u)}},z.makeEventData=function(a,i,r){var f="index"in a?a.index:a.pointNumber,u={data:i._input,fullData:i,curveNumber:i.index,pointNumber:f};if(i._indexToPoints){var s=i._indexToPoints[f];s.length===1?u.pointIndex=s[0]:u.pointIndices=s}else u.pointIndex=f;return i._module.eventData?u=i._module.eventData(u,a,i,r,f):("xVal"in a?u.x=a.xVal:"x"in a&&(u.x=a.x),"yVal"in a?u.y=a.yVal:"y"in a&&(u.y=a.y),a.xa&&(u.xaxis=a.xa),a.ya&&(u.yaxis=a.ya),a.zLabelVal!==void 0&&(u.z=a.zLabelVal)),z.appendArrayPointValue(u,i,f),u},z.appendArrayPointValue=function(a,i,r){var f=i._arrayAttrs;if(!!f)for(var u=0;u<f.length;u++){var s=f[u],h=c(s);if(a[h]===void 0){var d=l.nestedProperty(i,s).get(),y=p(d,r);y!==void 0&&(a[h]=y)}}},z.appendArrayMultiPointValues=function(a,i,r){var f=i._arrayAttrs;if(!!f)for(var u=0;u<f.length;u++){var s=f[u],h=c(s);if(a[h]===void 0){for(var d=l.nestedProperty(i,s).get(),y=new Array(r.length),m=0;m<r.length;m++)y[m]=p(d,r[m]);a[h]=y}}};var o={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function c(a){return o[a]||a}function p(a,i){if(Array.isArray(i)){if(Array.isArray(a)&&Array.isArray(a[i[0]]))return a[i[0]][i[1]]}else return a[i]}var t={x:!0,y:!0},n={"x unified":!0,"y unified":!0};z.isUnifiedHover=function(a){return typeof a!="string"?!1:!!n[a]},z.isXYhover=function(a){return typeof a!="string"?!1:!!t[a]}},{"../../lib":503}],403:[function(e,k,z){var l=e("@plotly/d3"),o=e("fast-isnumeric"),c=e("tinycolor2"),p=e("../../lib"),t=p.strTranslate,n=p.strRotate,a=e("../../lib/events"),i=e("../../lib/svg_text_utils"),r=e("../../lib/override_cursor"),f=e("../drawing"),u=e("../color"),s=e("../dragelement"),h=e("../../plots/cartesian/axes"),d=e("../../registry"),y=e("./helpers"),m=e("./constants"),g=e("../legend/defaults"),x=e("../legend/draw"),A=m.YANGLE,b=Math.PI*A/180,S=1/Math.sin(b),w=Math.cos(b),T=Math.sin(b),_=m.HOVERARROWSIZE,v=m.HOVERTEXTPAD,P={box:!0,ohlc:!0,violin:!0,candlestick:!0},M={scatter:!0,scattergl:!0,splom:!0};z.hover=function(Y,ee,$,K){Y=p.getGraphDiv(Y);var Q=ee.target;p.throttle(Y._fullLayout._uid+m.HOVERID,m.HOVERMINTIME,function(){E(Y,ee,$,K,Q)})},z.loneHover=function(Y,ee){var $=!0;Array.isArray(Y)||($=!1,Y=[Y]);var K=ee.gd,Q=le(K),ae=ue(K),ie=Y.map(function(Ae){var Oe=Ae._x0||Ae.x0||Ae.x||0,He=Ae._x1||Ae.x1||Ae.x||0,Ge=Ae._y0||Ae.y0||Ae.y||0,_e=Ae._y1||Ae.y1||Ae.y||0,Ie=Ae.eventData;if(Ie){var We=Math.min(Oe,He),et=Math.max(Oe,He),Ne=Math.min(Ge,_e),De=Math.max(Ge,_e),Ve=Ae.trace;if(d.traceIs(Ve,"gl3d")){var dt=K._fullLayout[Ve.scene]._scene.container,Dt=dt.offsetLeft,Gt=dt.offsetTop;We+=Dt,et+=Dt,Ne+=Gt,De+=Gt}Ie.bbox={x0:We+ae,x1:et+ae,y0:Ne+Q,y1:De+Q},ee.inOut_bbox&&ee.inOut_bbox.push(Ie.bbox)}else Ie=!1;return{color:Ae.color||u.defaultLine,x0:Ae.x0||Ae.x||0,x1:Ae.x1||Ae.x||0,y0:Ae.y0||Ae.y||0,y1:Ae.y1||Ae.y||0,xLabel:Ae.xLabel,yLabel:Ae.yLabel,zLabel:Ae.zLabel,text:Ae.text,name:Ae.name,idealAlign:Ae.idealAlign,borderColor:Ae.borderColor,fontFamily:Ae.fontFamily,fontSize:Ae.fontSize,fontColor:Ae.fontColor,nameLength:Ae.nameLength,textAlign:Ae.textAlign,trace:Ae.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:Ae.hovertemplate||!1,hovertemplateLabels:Ae.hovertemplateLabels||!1,eventData:Ie}}),oe=!1,fe=O(ie,{gd:K,hovermode:"closest",rotateLabels:oe,bgColor:ee.bgColor||u.background,container:l.select(ee.container),outerContainer:ee.outerContainer||ee.container}),ye=5,ce=0,me=0;fe.sort(function(Ae,Oe){return Ae.y0-Oe.y0}).each(function(Ae,Oe){var He=Ae.y0-Ae.by/2;He-ye<ce?Ae.offset=ce-He+ye:Ae.offset=0,ce=He+Ae.by+Ae.offset,Oe===ee.anchorIndex&&(me=Ae.offset)}).each(function(Ae){Ae.offset-=me});var xe=K._fullLayout._invScaleX,ke=K._fullLayout._invScaleY;return V(fe,oe,xe,ke),$?fe:fe.node()};function E(G,Y,ee,$,K){ee||(ee="xy");var Q=Array.isArray(ee)?ee:[ee],ae=G._fullLayout,ie=ae._plots||[],oe=ie[ee],fe=ae._has("cartesian");if(oe){var ye=oe.overlays.map(function(dr){return dr.id});Q=Q.concat(ye)}for(var ce=Q.length,me=new Array(ce),xe=new Array(ce),ke=!1,Ae=0;Ae<ce;Ae++){var Oe=Q[Ae];if(ie[Oe])ke=!0,me[Ae]=ie[Oe].xaxis,xe[Ae]=ie[Oe].yaxis;else if(ae[Oe]&&ae[Oe]._subplot){var He=ae[Oe]._subplot;me[Ae]=He.xaxis,xe[Ae]=He.yaxis}else{p.warn("Unrecognized subplot: "+Oe);return}}var Ge=Y.hovermode||ae.hovermode;if(Ge&&!ke&&(Ge="closest"),["x","y","closest","x unified","y unified"].indexOf(Ge)===-1||!G.calcdata||G.querySelector(".zoombox")||G._dragging)return s.unhoverRaw(G,Y);var _e=ae.hoverdistance;_e===-1&&(_e=1/0);var Ie=ae.spikedistance;Ie===-1&&(Ie=1/0);var We=[],et=[],Ne,De,Ve,dt,Dt,Gt,Mt,zt,Nt,Et,At,it,ht,$e={hLinePoint:null,vLinePoint:null},Ee=!1;if(Array.isArray(Y))for(Ge="array",Ve=0;Ve<Y.length;Ve++)Dt=G.calcdata[Y[Ve].curveNumber||0],Dt&&(Gt=Dt[0].trace,Dt[0].trace.hoverinfo!=="skip"&&(et.push(Dt),Gt.orientation==="h"&&(Ee=!0)));else{for(dt=0;dt<G.calcdata.length;dt++)Dt=G.calcdata[dt],Gt=Dt[0].trace,Gt.hoverinfo!=="skip"&&y.isTraceInSubplots(Gt,Q)&&(et.push(Dt),Gt.orientation==="h"&&(Ee=!0));var Xe=!K,rt,ut;if(Xe)"xpx"in Y?rt=Y.xpx:rt=me[0]._length/2,"ypx"in Y?ut=Y.ypx:ut=xe[0]._length/2;else{if(a.triggerHandler(G,"plotly_beforehover",Y)===!1)return;var Pt=K.getBoundingClientRect();rt=Y.clientX-Pt.left,ut=Y.clientY-Pt.top,ae._calcInverseTransform(G);var kt=p.apply3DTransform(ae._invTransform)(rt,ut);if(rt=kt[0],ut=kt[1],rt<0||rt>me[0]._length||ut<0||ut>xe[0]._length)return s.unhoverRaw(G,Y)}if(Y.pointerX=rt+me[0]._offset,Y.pointerY=ut+xe[0]._offset,"xval"in Y?Ne=y.flat(Q,Y.xval):Ne=y.p2c(me,rt),"yval"in Y?De=y.flat(Q,Y.yval):De=y.p2c(xe,ut),!o(Ne[0])||!o(De[0]))return p.warn("Fx.hover failed",Y,G),s.unhoverRaw(G,Y)}var Bt=1/0;function Xt(dr,Zr){for(dt=0;dt<et.length;dt++)if(Dt=et[dt],!(!Dt||!Dt[0]||!Dt[0].trace)&&(Gt=Dt[0].trace,!(Gt.visible!==!0||Gt._length===0)&&["carpet","contourcarpet"].indexOf(Gt._module.name)===-1)){if(Gt.type==="splom"?(zt=0,Mt=Q[zt]):(Mt=y.getSubplot(Gt),zt=Q.indexOf(Mt)),Nt=Ge,y.isUnifiedHover(Nt)&&(Nt=Nt.charAt(0)),it={cd:Dt,trace:Gt,xa:me[zt],ya:xe[zt],maxHoverDistance:_e,maxSpikeDistance:Ie,index:!1,distance:Math.min(Bt,_e),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:u.defaultLine,name:Gt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ae[Mt]&&(it.subplot=ae[Mt]._subplot),ae._splomScenes&&ae._splomScenes[Gt.uid]&&(it.scene=ae._splomScenes[Gt.uid]),ht=We.length,Nt==="array"){var Lr=Y[dt];"pointNumber"in Lr?(it.index=Lr.pointNumber,Nt="closest"):(Nt="","xval"in Lr&&(Et=Lr.xval,Nt="x"),"yval"in Lr&&(At=Lr.yval,Nt=Nt?"closest":"y"))}else dr!==void 0&&Zr!==void 0?(Et=dr,At=Zr):(Et=Ne[zt],At=De[zt]);if(_e!==0)if(Gt._module&&Gt._module.hoverPoints){var Ur=Gt._module.hoverPoints(it,Et,At,Nt,{finiteRange:!0,hoverLayer:ae._hoverlayer});if(Ur)for(var xr,on=0;on<Ur.length;on++)xr=Ur[on],o(xr.x0)&&o(xr.y0)&&We.push(U(xr,Ge))}else p.log("Unrecognized trace type in hover:",Gt);if(Ge==="closest"&&We.length>ht&&(We.splice(0,ht),Bt=We[0].distance),fe&&Ie!==0&&We.length===0){it.distance=Ie,it.index=!1;var Pn=Gt._module.hoverPoints(it,Et,At,"closest",{hoverLayer:ae._hoverlayer});if(Pn&&(Pn=Pn.filter(function(vr){return vr.spikeDistance<=Ie})),Pn&&Pn.length){var En,$n=Pn.filter(function(vr){return vr.xa.showspikes&&vr.xa.spikesnap!=="hovered data"});if($n.length){var aa=$n[0];o(aa.x0)&&o(aa.y0)&&(En=Jt(aa),(!$e.vLinePoint||$e.vLinePoint.spikeDistance>En.spikeDistance)&&($e.vLinePoint=En))}var Ca=Pn.filter(function(vr){return vr.ya.showspikes&&vr.ya.spikesnap!=="hovered data"});if(Ca.length){var ba=Ca[0];o(ba.x0)&&o(ba.y0)&&(En=Jt(ba),(!$e.hLinePoint||$e.hLinePoint.spikeDistance>En.spikeDistance)&&($e.hLinePoint=En))}}}}}Xt();function Ut(dr,Zr,Lr){for(var Ur=null,xr=1/0,on,Pn=0;Pn<dr.length;Pn++)on=dr[Pn].spikeDistance,Lr&&Pn===0&&(on=-1/0),on<=xr&&on<=Zr&&(Ur=dr[Pn],xr=on);return Ur}function Jt(dr){return dr?{xa:dr.xa,ya:dr.ya,x:dr.xSpike!==void 0?dr.xSpike:(dr.x0+dr.x1)/2,y:dr.ySpike!==void 0?dr.ySpike:(dr.y0+dr.y1)/2,distance:dr.distance,spikeDistance:dr.spikeDistance,curveNumber:dr.trace.index,color:dr.color,pointNumber:dr.index}:null}var Je={fullLayout:ae,container:ae._hoverlayer,event:Y},gt=G._spikepoints,Ct={vLinePoint:$e.vLinePoint,hLinePoint:$e.hLinePoint};G._spikepoints=Ct;var or=function(){We.sort(function(dr,Zr){return dr.distance-Zr.distance}),We=W(We,Ge)};or();var gr=Ge.charAt(0),lr=(gr==="x"||gr==="y")&&We[0]&&M[We[0].trace.type];if(fe&&Ie!==0&&We.length!==0){var mr=We.filter(function(dr){return dr.ya.showspikes}),Fr=Ut(mr,Ie,lr);$e.hLinePoint=Jt(Fr);var Rr=We.filter(function(dr){return dr.xa.showspikes}),ir=Ut(Rr,Ie,lr);$e.vLinePoint=Jt(ir)}if(We.length===0){var Vr=s.unhoverRaw(G,Y);return fe&&($e.hLinePoint!==null||$e.vLinePoint!==null)&&te(gt)&&j(G,$e,Je),Vr}if(fe&&te(gt)&&j(G,$e,Je),y.isXYhover(Nt)&&We[0].length!==0&&We[0].trace.type!=="splom"){var qe=We[0];P[qe.trace.type]?We=We.filter(function(dr){return dr.trace.index===qe.trace.index}):We=[qe];var we=We.length,Me=J("x",qe,ae),Re=J("y",qe,ae);Xt(Me,Re);var Ye=[],Qe={},ot=0,st=function(dr){var Zr=P[dr.trace.type]?D(dr):dr.trace.index;if(!Qe[Zr])ot++,Qe[Zr]=ot,Ye.push(dr);else{var Lr=Qe[Zr]-1,Ur=Ye[Lr];Lr>0&&Math.abs(dr.distance)<Math.abs(Ur.distance)&&(Ye[Lr]=dr)}},pt;for(pt=0;pt<we;pt++)st(We[pt]);for(pt=We.length-1;pt>we-1;pt--)st(We[pt]);We=Ye,or()}var wt=G._hoverdata,Yt=[],wr=le(G),Tr=ue(G);for(Ve=0;Ve<We.length;Ve++){var Mr=We[Ve],_r=y.makeEventData(Mr,Mr.trace,Mr.cd);if(Mr.hovertemplate!==!1){var Or=!1;Mr.cd[Mr.index]&&Mr.cd[Mr.index].ht&&(Or=Mr.cd[Mr.index].ht),Mr.hovertemplate=Or||Mr.trace.hovertemplate||!1}if(Mr.xa&&Mr.ya){var nn=Mr.x0+Mr.xa._offset,Sr=Mr.x1+Mr.xa._offset,yr=Mr.y0+Mr.ya._offset,gn=Mr.y1+Mr.ya._offset,Xr=Math.min(nn,Sr),kr=Math.max(nn,Sr),sn=Math.min(yr,gn),cn=Math.max(yr,gn);_r.bbox={x0:Xr+Tr,x1:kr+Tr,y0:sn+wr,y1:cn+wr}}Mr.eventData=[_r],Yt.push(_r)}G._hoverdata=Yt;var $r=Ge==="y"&&(et.length>1||We.length>1)||Ge==="closest"&&Ee&&We.length>1,at=u.combine(ae.plot_bgcolor||u.background,ae.paper_bgcolor),Ot=O(We,{gd:G,hovermode:Ge,rotateLabels:$r,bgColor:at,container:ae._hoverlayer,outerContainer:ae._paper.node(),commonLabelOpts:ae.hoverlabel,hoverdistance:ae.hoverdistance});if(y.isUnifiedHover(Ge)||(F(Ot,$r?"xa":"ya",ae),V(Ot,$r,ae._invScaleX,ae._invScaleY)),K&&K.tagName){var nr=d.getComponentMethod("annotations","hasClickToShow")(G,Yt);r(l.select(K),nr?"pointer":"")}!K||$||!Z(G,Y,wt)||(wt&&G.emit("plotly_unhover",{event:Y,points:wt}),G.emit("plotly_hover",{event:Y,points:G._hoverdata,xaxes:me,yaxes:xe,xvals:Ne,yvals:De}))}function D(G){return[G.trace.index,G.index,G.x0,G.y0,G.name,G.attr,G.xa?G.xa._id:"",G.ya?G.ya._id:""].join(",")}var N=/<extra>([\s\S]*)<\/extra>/;function O(G,Y){var ee=Y.gd,$=ee._fullLayout,K=Y.hovermode,Q=Y.rotateLabels,ae=Y.bgColor,ie=Y.container,oe=Y.outerContainer,fe=Y.commonLabelOpts||{};if(G.length===0)return[[]];var ye=Y.fontFamily||m.HOVERFONT,ce=Y.fontSize||m.HOVERFONTSIZE,me=G[0],xe=me.xa,ke=me.ya,Ae=K.charAt(0),Oe=me[Ae+"Label"],He=se(ee,oe),Ge=He.top,_e=He.width,Ie=He.height,We=Oe!==void 0&&me.distance<=Y.hoverdistance&&(K==="x"||K==="y");if(We){var et=!0,Ne,De;for(Ne=0;Ne<G.length;Ne++)if(et&&G[Ne].zLabel===void 0&&(et=!1),De=G[Ne].hoverinfo||G[Ne].trace.hoverinfo,De){var Ve=Array.isArray(De)?De:De.split("+");if(Ve.indexOf("all")===-1&&Ve.indexOf(K)===-1){We=!1;break}}et&&(We=!1)}var dt=ie.selectAll("g.axistext").data(We?[0]:[]);if(dt.enter().append("g").classed("axistext",!0),dt.exit().remove(),dt.each(function(){var ir=l.select(this),Vr=p.ensureSingle(ir,"path","",function(gn){gn.style({"stroke-width":"1px"})}),qe=p.ensureSingle(ir,"text","",function(gn){gn.attr("data-notex",1)}),we=fe.bgcolor||u.defaultLine,Me=fe.bordercolor||u.contrast(we),Re=u.contrast(we),Ye={family:fe.font.family||ye,size:fe.font.size||ce,color:fe.font.color||Re};Vr.style({fill:we,stroke:Me}),qe.text(Oe).call(f.font,Ye).call(i.positionText,0,0).call(i.convertToTspans,ee),ir.attr("transform","");var Qe=se(ee,qe.node()),ot,st;if(K==="x"){var pt=xe.side==="top"?"-":"";qe.attr("text-anchor","middle").call(i.positionText,0,xe.side==="top"?Ge-Qe.bottom-_-v:Ge-Qe.top+_+v),ot=xe._offset+(me.x0+me.x1)/2,st=ke._offset+(xe.side==="top"?0:ke._length);var wt=Qe.width/2+v;ot<wt?(ot=wt,Vr.attr("d","M-"+(wt-_)+",0L-"+(wt-_*2)+","+pt+_+"H"+(v+Qe.width/2)+"v"+pt+(v*2+Qe.height)+"H-"+wt+"V"+pt+_+"Z")):ot>$.width-wt?(ot=$.width-wt,Vr.attr("d","M"+(wt-_)+",0L"+wt+","+pt+_+"v"+pt+(v*2+Qe.height)+"H-"+wt+"V"+pt+_+"H"+(wt-_*2)+"Z")):Vr.attr("d","M0,0L"+_+","+pt+_+"H"+(v+Qe.width/2)+"v"+pt+(v*2+Qe.height)+"H-"+(v+Qe.width/2)+"V"+pt+_+"H-"+_+"Z")}else{var Yt,wr,Tr;ke.side==="right"?(Yt="start",wr=1,Tr="",ot=xe._offset+xe._length):(Yt="end",wr=-1,Tr="-",ot=xe._offset),st=ke._offset+(me.y0+me.y1)/2,qe.attr("text-anchor",Yt),Vr.attr("d","M0,0L"+Tr+_+","+_+"V"+(v+Qe.height/2)+"h"+Tr+(v*2+Qe.width)+"V-"+(v+Qe.height/2)+"H"+Tr+_+"V-"+_+"Z");var Mr=Qe.height/2,_r=Ge-Qe.top-Mr,Or="clip"+$._uid+"commonlabel"+ke._id,nn;if(ot<Qe.width+2*v+_){nn="M-"+(_+v)+"-"+Mr+"h-"+(Qe.width-v)+"V"+Mr+"h"+(Qe.width-v)+"Z";var Sr=Qe.width-ot+v;i.positionText(qe,Sr,_r),Yt==="end"&&qe.selectAll("tspan").each(function(){var gn=l.select(this),Xr=f.tester.append("text").text(gn.text()).call(f.font,Ye),kr=se(ee,Xr.node());Math.round(kr.width)<Math.round(Qe.width)&&gn.attr("x",Sr-kr.width),Xr.remove()})}else i.positionText(qe,wr*(v+_),_r),nn=null;var yr=$._topclips.selectAll("#"+Or).data(nn?[0]:[]);yr.enter().append("clipPath").attr("id",Or).append("path"),yr.exit().remove(),yr.select("path").attr("d",nn),f.setClipUrl(qe,nn?Or:null,ee)}ir.attr("transform",t(ot,st))}),y.isUnifiedHover(K)){ie.selectAll("g.hovertext").remove();var Dt=G.filter(function(ir){return ir.hoverinfo!=="none"});if(Dt.length===0)return;var Gt=$.hoverlabel,Mt=Gt.font,zt={showlegend:!0,legend:{title:{text:Oe,font:Mt},font:Mt,bgcolor:Gt.bgcolor,bordercolor:Gt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:$.legend?$.legend.traceorder:void 0,orientation:"v"}},Nt={font:Mt};g(zt,Nt,ee._fullData);var Et=Nt.legend;Et.entries=[];for(var At=0;At<Dt.length;At++){var it=Dt[At];if(it.hoverinfo!=="none"){var ht=I(it,!0,K,$,Oe),$e=ht[0],Ee=ht[1];it.name=Ee,Ee!==""?it.text=Ee+" : "+$e:it.text=$e;var Xe=it.cd[it.index];Xe&&(Xe.mc&&(it.mc=Xe.mc),Xe.mcc&&(it.mc=Xe.mcc),Xe.mlc&&(it.mlc=Xe.mlc),Xe.mlcc&&(it.mlc=Xe.mlcc),Xe.mlw&&(it.mlw=Xe.mlw),Xe.mrc&&(it.mrc=Xe.mrc),Xe.dir&&(it.dir=Xe.dir)),it._distinct=!0,Et.entries.push([it])}}Et.entries.sort(function(ir,Vr){return ir[0].trace.index-Vr[0].trace.index}),Et.layer=ie,Et._inHover=!0,Et._groupTitleFont=Gt.grouptitlefont,x(ee,Et);var rt=ie.select("g.legend"),ut=se(ee,rt.node()),Pt=ut.width+2*v,kt=ut.height+2*v,Bt=Dt[0],Xt=(Bt.x0+Bt.x1)/2,Ut=(Bt.y0+Bt.y1)/2,Jt=!(d.traceIs(Bt.trace,"bar-like")||d.traceIs(Bt.trace,"box-violin")),Je,gt;Ae==="y"?Jt?(gt=Ut-v,Je=Ut+v):(gt=Math.min.apply(null,Dt.map(function(ir){return Math.min(ir.y0,ir.y1)})),Je=Math.max.apply(null,Dt.map(function(ir){return Math.max(ir.y0,ir.y1)}))):gt=Je=p.mean(Dt.map(function(ir){return(ir.y0+ir.y1)/2}))-kt/2;var Ct,or;Ae==="x"?Jt?(Ct=Xt+v,or=Xt-v):(Ct=Math.max.apply(null,Dt.map(function(ir){return Math.max(ir.x0,ir.x1)})),or=Math.min.apply(null,Dt.map(function(ir){return Math.min(ir.x0,ir.x1)}))):Ct=or=p.mean(Dt.map(function(ir){return(ir.x0+ir.x1)/2}))-Pt/2;var gr=xe._offset,lr=ke._offset;Je+=lr,Ct+=gr,or+=gr-Pt,gt+=lr-kt;var mr,Fr;return Ct+Pt<_e&&Ct>=0?mr=Ct:or+Pt<_e&&or>=0?mr=or:gr+Pt<_e?mr=gr:Ct-Xt<Xt-or+Pt?mr=_e-Pt:mr=0,mr+=v,Je+kt<Ie&&Je>=0?Fr=Je:gt+kt<Ie&&gt>=0?Fr=gt:lr+kt<Ie?Fr=lr:Je-Ut<Ut-gt+kt?Fr=Ie-kt:Fr=0,Fr+=v,rt.attr("transform",t(mr-1,Fr-1)),rt}var Rr=ie.selectAll("g.hovertext").data(G,function(ir){return D(ir)});return Rr.enter().append("g").classed("hovertext",!0).each(function(){var ir=l.select(this);ir.append("rect").call(u.fill,u.addOpacity(ae,.8)),ir.append("text").classed("name",!0),ir.append("path").style("stroke-width","1px"),ir.append("text").classed("nums",!0).call(f.font,ye,ce)}),Rr.exit().remove(),Rr.each(function(ir){var Vr=l.select(this).attr("transform",""),qe=ir.color;Array.isArray(qe)&&(qe=qe[ir.eventData[0].pointNumber]);var we=ir.bgcolor||qe,Me=u.combine(u.opacity(we)?we:u.defaultLine,ae),Re=u.combine(u.opacity(qe)?qe:u.defaultLine,ae),Ye=ir.borderColor||u.contrast(Me),Qe=I(ir,We,K,$,Oe,Vr),ot=Qe[0],st=Qe[1],pt=Vr.select("text.nums").call(f.font,ir.fontFamily||ye,ir.fontSize||ce,ir.fontColor||Ye).text(ot).attr("data-notex",1).call(i.positionText,0,0).call(i.convertToTspans,ee),wt=Vr.select("text.name"),Yt=0,wr=0;if(st&&st!==ot){wt.call(f.font,ir.fontFamily||ye,ir.fontSize||ce,Re).text(st).attr("data-notex",1).call(i.positionText,0,0).call(i.convertToTspans,ee);var Tr=se(ee,wt.node());Yt=Tr.width+2*v,wr=Tr.height+2*v}else wt.remove(),Vr.select("rect").remove();Vr.select("path").style({fill:Me,stroke:Ye});var Mr=ir.xa._offset+(ir.x0+ir.x1)/2,_r=ir.ya._offset+(ir.y0+ir.y1)/2,Or=Math.abs(ir.x1-ir.x0),nn=Math.abs(ir.y1-ir.y0),Sr=se(ee,pt.node()),yr=Sr.width/$._invScaleX,gn=Sr.height/$._invScaleY;ir.ty0=(Ge-Sr.top)/$._invScaleY,ir.bx=yr+2*v,ir.by=Math.max(gn+2*v,wr),ir.anchor="start",ir.txwidth=yr,ir.tx2width=Yt,ir.offset=0;var Xr=(yr+_+v+Yt)*$._invScaleX,kr,sn;if(Q)ir.pos=Mr,kr=_r+nn/2+Xr<=Ie,sn=_r-nn/2-Xr>=0,(ir.idealAlign==="top"||!kr)&&sn?(_r-=nn/2,ir.anchor="end"):kr?(_r+=nn/2,ir.anchor="start"):ir.anchor="middle";else if(ir.pos=_r,kr=Mr+Or/2+Xr<=_e,sn=Mr-Or/2-Xr>=0,(ir.idealAlign==="left"||!kr)&&sn)Mr-=Or/2,ir.anchor="end";else if(kr)Mr+=Or/2,ir.anchor="start";else{ir.anchor="middle";var cn=Xr/2,$r=Mr+cn-_e,at=Mr-cn;$r>0&&(Mr-=$r),at<0&&(Mr+=-at)}pt.attr("text-anchor",ir.anchor),Yt&&wt.attr("text-anchor",ir.anchor),Vr.attr("transform",t(Mr,_r)+(Q?n(A):""))}),Rr}function I(G,Y,ee,$,K,Q){var ae="",ie="";G.nameOverride!==void 0&&(G.name=G.nameOverride),G.name&&(G.trace._meta&&(G.name=p.templateString(G.name,G.trace._meta)),ae=re(G.name,G.nameLength));var oe=ee.charAt(0),fe=oe==="x"?"y":"x";G.zLabel!==void 0?(G.xLabel!==void 0&&(ie+="x: "+G.xLabel+"<br>"),G.yLabel!==void 0&&(ie+="y: "+G.yLabel+"<br>"),G.trace.type!=="choropleth"&&G.trace.type!=="choroplethmapbox"&&(ie+=(ie?"z: ":"")+G.zLabel)):Y&&G[oe+"Label"]===K?ie=G[fe+"Label"]||"":G.xLabel===void 0?G.yLabel!==void 0&&G.trace.type!=="scattercarpet"&&(ie=G.yLabel):G.yLabel===void 0?ie=G.xLabel:ie="("+G.xLabel+", "+G.yLabel+")",(G.text||G.text===0)&&!Array.isArray(G.text)&&(ie+=(ie?"<br>":"")+G.text),G.extraText!==void 0&&(ie+=(ie?"<br>":"")+G.extraText),Q&&ie===""&&!G.hovertemplate&&(ae===""&&Q.remove(),ie=ae);var ye=G.hovertemplate||!1;if(ye){var ce=G.hovertemplateLabels||G;G[oe+"Label"]!==K&&(ce[oe+"other"]=ce[oe+"Val"],ce[oe+"otherLabel"]=ce[oe+"Label"]),ie=p.hovertemplateString(ye,ce,$._d3locale,G.eventData[0]||{},G.trace._meta),ie=ie.replace(N,function(me,xe){return ae=re(xe,G.nameLength),""})}return[ie,ae]}function F(G,Y,ee){var $=0,K=1,Q=G.size(),ae=new Array(Q),ie=0;G.each(function(Ne){var De=Ne[Y],Ve=De._id.charAt(0)==="x",dt=De.range;ie===0&&dt&&dt[0]>dt[1]!==Ve&&(K=-1),ae[ie++]=[{datum:Ne,traceIndex:Ne.trace.index,dp:0,pos:Ne.pos,posref:Ne.posref,size:Ne.by*(Ve?S:1)/2,pmin:0,pmax:Ve?ee.width:ee.height}]}),ae.sort(function(Ne,De){return Ne[0].posref-De[0].posref||K*(De[0].traceIndex-Ne[0].traceIndex)});var oe,fe,ye,ce,me,xe,ke;function Ae(Ne){var De=Ne[0],Ve=Ne[Ne.length-1];if(fe=De.pmin-De.pos-De.dp+De.size,ye=Ve.pos+Ve.dp+Ve.size-De.pmax,fe>.01){for(me=Ne.length-1;me>=0;me--)Ne[me].dp+=fe;oe=!1}if(!(ye<.01)){if(fe<-.01){for(me=Ne.length-1;me>=0;me--)Ne[me].dp-=ye;oe=!1}if(!!oe){var dt=0;for(ce=0;ce<Ne.length;ce++)xe=Ne[ce],xe.pos+xe.dp+xe.size>De.pmax&&dt++;for(ce=Ne.length-1;ce>=0&&!(dt<=0);ce--)xe=Ne[ce],xe.pos>De.pmax-1&&(xe.del=!0,dt--);for(ce=0;ce<Ne.length&&!(dt<=0);ce++)if(xe=Ne[ce],xe.pos<De.pmin+1)for(xe.del=!0,dt--,ye=xe.size*2,me=Ne.length-1;me>=0;me--)Ne[me].dp-=ye;for(ce=Ne.length-1;ce>=0&&!(dt<=0);ce--)xe=Ne[ce],xe.pos+xe.dp+xe.size>De.pmax&&(xe.del=!0,dt--)}}}for(;!oe&&$<=Q;){for($++,oe=!0,ce=0;ce<ae.length-1;){var Oe=ae[ce],He=ae[ce+1],Ge=Oe[Oe.length-1],_e=He[0];if(fe=Ge.pos+Ge.dp+Ge.size-_e.pos-_e.dp+_e.size,fe>.01&&Ge.pmin===_e.pmin&&Ge.pmax===_e.pmax){for(me=He.length-1;me>=0;me--)He[me].dp+=fe;for(Oe.push.apply(Oe,He),ae.splice(ce+1,1),ke=0,me=Oe.length-1;me>=0;me--)ke+=Oe[me].dp;for(ye=ke/Oe.length,me=Oe.length-1;me>=0;me--)Oe[me].dp-=ye;oe=!1}else ce++}ae.forEach(Ae)}for(ce=ae.length-1;ce>=0;ce--){var Ie=ae[ce];for(me=Ie.length-1;me>=0;me--){var We=Ie[me],et=We.datum;et.offset=We.dp,et.del=We.del}}}function V(G,Y,ee,$){var K=function(ae){return ae*ee},Q=function(ae){return ae*$};G.each(function(ae){var ie=l.select(this);if(ae.del)return ie.remove();var oe=ie.select("text.nums"),fe=ae.anchor,ye=fe==="end"?-1:1,ce={start:1,end:-1,middle:0}[fe],me=ce*(_+v),xe=me+ce*(ae.txwidth+v),ke=0,Ae=ae.offset,Oe=fe==="middle";Oe&&(me-=ae.tx2width/2,xe+=ae.txwidth/2+v),Y&&(Ae*=-T,ke=ae.offset*w),ie.select("path").attr("d",Oe?"M-"+K(ae.bx/2+ae.tx2width/2)+","+Q(Ae-ae.by/2)+"h"+K(ae.bx)+"v"+Q(ae.by)+"h-"+K(ae.bx)+"Z":"M0,0L"+K(ye*_+ke)+","+Q(_+Ae)+"v"+Q(ae.by/2-_)+"h"+K(ye*ae.bx)+"v-"+Q(ae.by)+"H"+K(ye*_+ke)+"V"+Q(Ae-_)+"Z");var He=ke+me,Ge=Ae+ae.ty0-ae.by/2+v,_e=ae.textAlign||"auto";_e!=="auto"&&(_e==="left"&&fe!=="start"?(oe.attr("text-anchor","start"),He=Oe?-ae.bx/2-ae.tx2width/2+v:-ae.bx-v):_e==="right"&&fe!=="end"&&(oe.attr("text-anchor","end"),He=Oe?ae.bx/2-ae.tx2width/2-v:ae.bx+v)),oe.call(i.positionText,K(He),Q(Ge)),ae.tx2width&&(ie.select("text.name").call(i.positionText,K(xe+ce*v+ke),Q(Ae+ae.ty0-ae.by/2+v)),ie.select("rect").call(f.setRect,K(xe+(ce-1)*ae.tx2width/2+ke),Q(Ae-ae.by/2-1),K(ae.tx2width),Q(ae.by+2)))})}function U(G,Y){var ee=G.index,$=G.trace||{},K=G.cd[0],Q=G.cd[ee]||{};function ae(me){return me||o(me)&&me===0}var ie=Array.isArray(ee)?function(me,xe){var ke=p.castOption(K,ee,me);return ae(ke)?ke:p.extractOption({},$,"",xe)}:function(me,xe){return p.extractOption(Q,$,me,xe)};function oe(me,xe,ke){var Ae=ie(xe,ke);ae(Ae)&&(G[me]=Ae)}if(oe("hoverinfo","hi","hoverinfo"),oe("bgcolor","hbg","hoverlabel.bgcolor"),oe("borderColor","hbc","hoverlabel.bordercolor"),oe("fontFamily","htf","hoverlabel.font.family"),oe("fontSize","hts","hoverlabel.font.size"),oe("fontColor","htc","hoverlabel.font.color"),oe("nameLength","hnl","hoverlabel.namelength"),oe("textAlign","hta","hoverlabel.align"),G.posref=Y==="y"||Y==="closest"&&$.orientation==="h"?G.xa._offset+(G.x0+G.x1)/2:G.ya._offset+(G.y0+G.y1)/2,G.x0=p.constrain(G.x0,0,G.xa._length),G.x1=p.constrain(G.x1,0,G.xa._length),G.y0=p.constrain(G.y0,0,G.ya._length),G.y1=p.constrain(G.y1,0,G.ya._length),G.xLabelVal!==void 0&&(G.xLabel="xLabel"in G?G.xLabel:h.hoverLabelText(G.xa,G.xLabelVal,$.xhoverformat),G.xVal=G.xa.c2d(G.xLabelVal)),G.yLabelVal!==void 0&&(G.yLabel="yLabel"in G?G.yLabel:h.hoverLabelText(G.ya,G.yLabelVal,$.yhoverformat),G.yVal=G.ya.c2d(G.yLabelVal)),G.zLabelVal!==void 0&&G.zLabel===void 0&&(G.zLabel=String(G.zLabelVal)),!isNaN(G.xerr)&&!(G.xa.type==="log"&&G.xerr<=0)){var fe=h.tickText(G.xa,G.xa.c2l(G.xerr),"hover").text;G.xerrneg!==void 0?G.xLabel+=" +"+fe+" / -"+h.tickText(G.xa,G.xa.c2l(G.xerrneg),"hover").text:G.xLabel+=" \xB1 "+fe,Y==="x"&&(G.distance+=1)}if(!isNaN(G.yerr)&&!(G.ya.type==="log"&&G.yerr<=0)){var ye=h.tickText(G.ya,G.ya.c2l(G.yerr),"hover").text;G.yerrneg!==void 0?G.yLabel+=" +"+ye+" / -"+h.tickText(G.ya,G.ya.c2l(G.yerrneg),"hover").text:G.yLabel+=" \xB1 "+ye,Y==="y"&&(G.distance+=1)}var ce=G.hoverinfo||G.trace.hoverinfo;return ce&&ce!=="all"&&(ce=Array.isArray(ce)?ce:ce.split("+"),ce.indexOf("x")===-1&&(G.xLabel=void 0),ce.indexOf("y")===-1&&(G.yLabel=void 0),ce.indexOf("z")===-1&&(G.zLabel=void 0),ce.indexOf("text")===-1&&(G.text=void 0),ce.indexOf("name")===-1&&(G.name=void 0)),G}function j(G,Y,ee){var $=ee.container,K=ee.fullLayout,Q=K._size,ae=ee.event,ie=!!Y.hLinePoint,oe=!!Y.vLinePoint,fe,ye;if($.selectAll(".spikeline").remove(),!!(oe||ie)){var ce=u.combine(K.plot_bgcolor,K.paper_bgcolor);if(ie){var me=Y.hLinePoint,xe,ke;fe=me&&me.xa,ye=me&&me.ya;var Ae=ye.spikesnap;Ae==="cursor"?(xe=ae.pointerX,ke=ae.pointerY):(xe=fe._offset+me.x,ke=ye._offset+me.y);var Oe=c.readability(me.color,ce)<1.5?u.contrast(ce):me.color,He=ye.spikemode,Ge=ye.spikethickness,_e=ye.spikecolor||Oe,Ie=h.getPxPosition(G,ye),We,et;if(He.indexOf("toaxis")!==-1||He.indexOf("across")!==-1){if(He.indexOf("toaxis")!==-1&&(We=Ie,et=xe),He.indexOf("across")!==-1){var Ne=ye._counterDomainMin,De=ye._counterDomainMax;ye.anchor==="free"&&(Ne=Math.min(Ne,ye.position),De=Math.max(De,ye.position)),We=Q.l+Ne*Q.w,et=Q.l+De*Q.w}$.insert("line",":first-child").attr({x1:We,x2:et,y1:ke,y2:ke,"stroke-width":Ge,stroke:_e,"stroke-dasharray":f.dashStyle(ye.spikedash,Ge)}).classed("spikeline",!0).classed("crisp",!0),$.insert("line",":first-child").attr({x1:We,x2:et,y1:ke,y2:ke,"stroke-width":Ge+2,stroke:ce}).classed("spikeline",!0).classed("crisp",!0)}He.indexOf("marker")!==-1&&$.insert("circle",":first-child").attr({cx:Ie+(ye.side!=="right"?Ge:-Ge),cy:ke,r:Ge,fill:_e}).classed("spikeline",!0)}if(oe){var Ve=Y.vLinePoint,dt,Dt;fe=Ve&&Ve.xa,ye=Ve&&Ve.ya;var Gt=fe.spikesnap;Gt==="cursor"?(dt=ae.pointerX,Dt=ae.pointerY):(dt=fe._offset+Ve.x,Dt=ye._offset+Ve.y);var Mt=c.readability(Ve.color,ce)<1.5?u.contrast(ce):Ve.color,zt=fe.spikemode,Nt=fe.spikethickness,Et=fe.spikecolor||Mt,At=h.getPxPosition(G,fe),it,ht;if(zt.indexOf("toaxis")!==-1||zt.indexOf("across")!==-1){if(zt.indexOf("toaxis")!==-1&&(it=At,ht=Dt),zt.indexOf("across")!==-1){var $e=fe._counterDomainMin,Ee=fe._counterDomainMax;fe.anchor==="free"&&($e=Math.min($e,fe.position),Ee=Math.max(Ee,fe.position)),it=Q.t+(1-Ee)*Q.h,ht=Q.t+(1-$e)*Q.h}$.insert("line",":first-child").attr({x1:dt,x2:dt,y1:it,y2:ht,"stroke-width":Nt,stroke:Et,"stroke-dasharray":f.dashStyle(fe.spikedash,Nt)}).classed("spikeline",!0).classed("crisp",!0),$.insert("line",":first-child").attr({x1:dt,x2:dt,y1:it,y2:ht,"stroke-width":Nt+2,stroke:ce}).classed("spikeline",!0).classed("crisp",!0)}zt.indexOf("marker")!==-1&&$.insert("circle",":first-child").attr({cx:dt,cy:At-(fe.side!=="top"?Nt:-Nt),r:Nt,fill:Et}).classed("spikeline",!0)}}}function Z(G,Y,ee){if(!ee||ee.length!==G._hoverdata.length)return!0;for(var $=ee.length-1;$>=0;$--){var K=ee[$],Q=G._hoverdata[$];if(K.curveNumber!==Q.curveNumber||String(K.pointNumber)!==String(Q.pointNumber)||String(K.pointNumbers)!==String(Q.pointNumbers))return!0}return!1}function te(G,Y){return!Y||Y.vLinePoint!==G._spikepoints.vLinePoint||Y.hLinePoint!==G._spikepoints.hLinePoint}function re(G,Y){return i.plainText(G||"",{len:Y,allowedTags:["br","sub","sup","b","i","em"]})}function W(G,Y){for(var ee=Y.charAt(0),$=[],K=[],Q=[],ae=0;ae<G.length;ae++){var ie=G[ae];d.traceIs(ie.trace,"bar-like")||d.traceIs(ie.trace,"box-violin")?Q.push(ie):ie.trace[ee+"period"]?K.push(ie):$.push(ie)}return $.concat(K).concat(Q)}function J(G,Y,ee){var $=Y[G+"a"],K=Y[G+"Val"],Q=Y.cd[0];if($.type==="category")K=$._categoriesMap[K];else if($.type==="date"){var ae=Y.trace[G+"periodalignment"];if(ae){var ie=Y.cd[Y.index],oe=ie[G+"Start"];oe===void 0&&(oe=ie[G]);var fe=ie[G+"End"];fe===void 0&&(fe=ie[G]);var ye=fe-oe;ae==="end"?K+=ye:ae==="middle"&&(K+=ye/2)}K=$.d2c(K)}return Q&&Q.t&&Q.t.posLetter===$._id&&(ee.boxmode==="group"||ee.violinmode==="group")&&(K+=Q.t.dPos),K}function le(G){return G.offsetTop+G.clientTop}function ue(G){return G.offsetLeft+G.clientLeft}function se(G,Y){var ee=G._fullLayout,$=Y.getBoundingClientRect(),K=$.x,Q=$.y,ae=K+$.width,ie=Q+$.height,oe=p.apply3DTransform(ee._invTransform)(K,Q),fe=p.apply3DTransform(ee._invTransform)(ae,ie),ye=oe[0],ce=oe[1],me=fe[0],xe=fe[1];return{x:ye,y:ce,width:me-ye,height:xe-ce,top:Math.min(ce,xe),left:Math.min(ye,me),right:Math.max(ye,me),bottom:Math.max(ce,xe)}}},{"../../lib":503,"../../lib/events":492,"../../lib/override_cursor":514,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../legend/defaults":418,"../legend/draw":419,"./constants":400,"./helpers":402,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],404:[function(e,k,z){var l=e("../../lib"),o=e("../color"),c=e("./helpers").isUnifiedHover;k.exports=function(t,n,a,i){i=i||{};var r=n.legend;function f(u){i.font[u]||(i.font[u]=r?n.legend.font[u]:n.font[u])}n&&c(n.hovermode)&&(i.font||(i.font={}),f("size"),f("family"),f("color"),r?(i.bgcolor||(i.bgcolor=o.combine(n.legend.bgcolor,n.paper_bgcolor)),i.bordercolor||(i.bordercolor=n.legend.bordercolor)):i.bgcolor||(i.bgcolor=n.paper_bgcolor)),a("hoverlabel.bgcolor",i.bgcolor),a("hoverlabel.bordercolor",i.bordercolor),a("hoverlabel.namelength",i.namelength),l.coerceFont(a,"hoverlabel.font",i.font),a("hoverlabel.align",i.align)}},{"../../lib":503,"../color":366,"./helpers":402}],405:[function(e,k,z){var l=e("../../lib"),o=e("./layout_attributes");k.exports=function(p,t){function n(a,i){return t[a]!==void 0?t[a]:l.coerce(p,t,o,a,i)}return n("clickmode"),n("hovermode")}},{"../../lib":503,"./layout_attributes":407}],406:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../lib"),c=e("../dragelement"),p=e("./helpers"),t=e("./layout_attributes"),n=e("./hover");k.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:t},attributes:e("./attributes"),layoutAttributes:t,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:p.getDistanceFunction,getClosest:p.getClosest,inbox:p.inbox,quadrature:p.quadrature,appendArrayPointValue:p.appendArrayPointValue,castHoverOption:i,castHoverinfo:r,hover:n.hover,unhover:c.unhover,loneHover:n.loneHover,loneUnhover:a,click:e("./click")};function a(f){var u=o.isD3Selection(f)?f:l.select(f);u.selectAll("g.hovertext").remove(),u.selectAll(".spikeline").remove()}function i(f,u,s){return o.castOption(f,u,"hoverlabel."+s)}function r(f,u,s){function h(d){return o.coerceHoverinfo({hoverinfo:d},{_module:f._module},u)}return o.castOption(f,s,"hoverinfo",h)}},{"../../lib":503,"../dragelement":385,"./attributes":397,"./calc":398,"./click":399,"./constants":400,"./defaults":401,"./helpers":402,"./hover":403,"./layout_attributes":407,"./layout_defaults":408,"./layout_global_defaults":409,"@plotly/d3":58}],407:[function(e,k,z){var l=e("./constants"),o=e("../../plots/font_attributes"),c=o({editType:"none"});c.family.dflt=l.HOVERFONT,c.size.dflt=l.HOVERFONTSIZE,k.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:c,grouptitlefont:o({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":585,"./constants":400}],408:[function(e,k,z){var l=e("../../lib"),o=e("./layout_attributes"),c=e("./hovermode_defaults"),p=e("./hoverlabel_defaults");k.exports=function(n,a){function i(d,y){return l.coerce(n,a,o,d,y)}var r=c(n,a);r&&(i("hoverdistance"),i("spikedistance"));var f=i("dragmode");f==="select"&&i("selectdirection");var u=a._has("mapbox"),s=a._has("geo"),h=a._basePlotModules.length;a.dragmode==="zoom"&&((u||s)&&h===1||u&&s&&h===2)&&(a.dragmode="pan"),p(n,a,i),l.coerceFont(i,"hoverlabel.grouptitlefont",a.hoverlabel.font)}},{"../../lib":503,"./hoverlabel_defaults":404,"./hovermode_defaults":405,"./layout_attributes":407}],409:[function(e,k,z){var l=e("../../lib"),o=e("./hoverlabel_defaults"),c=e("./layout_attributes");k.exports=function(t,n){function a(i,r){return l.coerce(t,n,c,i,r)}o(t,n,a)}},{"../../lib":503,"./hoverlabel_defaults":404,"./layout_attributes":407}],410:[function(e,k,z){var l=e("../../lib"),o=e("../../lib/regex").counter,c=e("../../plots/domain").attributes,p=e("../../plots/cartesian/constants").idRegex,t=e("../../plot_api/plot_template"),n={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[o("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[p.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[p.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:c({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function a(s,h,d){var y=h[d+"axes"],m=Object.keys((s._splomAxes||{})[d]||{});if(Array.isArray(y))return y;if(m.length)return m}function i(s,h){var d=s.grid||{},y=a(h,d,"x"),m=a(h,d,"y");if(!s.grid&&!y&&!m)return;var g=Array.isArray(d.subplots)&&Array.isArray(d.subplots[0]),x=Array.isArray(y),A=Array.isArray(m),b=x&&y!==d.xaxes&&A&&m!==d.yaxes,S,w;g?(S=d.subplots.length,w=d.subplots[0].length):(A&&(S=m.length),x&&(w=y.length));var T=t.newContainer(h,"grid");function _(V,U){return l.coerce(d,T,n,V,U)}var v=_("rows",S),P=_("columns",w);if(!(v*P>1)){delete h.grid;return}if(!g&&!x&&!A){var M=_("pattern")==="independent";M&&(g=!0)}T._hasSubplotGrid=g;var E=_("roworder"),D=E==="top to bottom",N=g?.2:.1,O=g?.3:.1,I,F;b&&h._splomGridDflt&&(I=h._splomGridDflt.xside,F=h._splomGridDflt.yside),T._domains={x:r("x",_,N,I,P),y:r("y",_,O,F,v,D)}}function r(s,h,d,y,m,g){var x=h(s+"gap",d),A=h("domain."+s);h(s+"side",y);for(var b=new Array(m),S=A[0],w=(A[1]-S)/(m-x),T=w*(1-x),_=0;_<m;_++){var v=S+w*_;b[g?m-1-_:_]=[v,v+T]}return b}function f(s,h){var d=h.grid;if(!(!d||!d._domains)){var y=s.grid||{},m=h._subplots,g=d._hasSubplotGrid,x=d.rows,A=d.columns,b=d.pattern==="independent",S,w,T,_,v,P,M,E=d._axisMap={};if(g){var D=y.subplots||[];P=d.subplots=new Array(x);var N=1;for(S=0;S<x;S++){var O=P[S]=new Array(A),I=D[S]||[];for(w=0;w<A;w++)if(b?(v=N===1?"xy":"x"+N+"y"+N,N++):v=I[w],O[w]="",m.cartesian.indexOf(v)!==-1){if(M=v.indexOf("y"),T=v.slice(0,M),_=v.slice(M),E[T]!==void 0&&E[T]!==w||E[_]!==void 0&&E[_]!==S)continue;O[w]=v,E[T]=w,E[_]=S}}}else{var F=a(h,y,"x"),V=a(h,y,"y");d.xaxes=u(F,m.xaxis,A,E,"x"),d.yaxes=u(V,m.yaxis,x,E,"y")}var U=d._anchors={},j=d.roworder==="top to bottom";for(var Z in E){var te=Z.charAt(0),re=d[te+"side"],W,J,le;if(re.length<8)U[Z]="free";else if(te==="x"){if(re.charAt(0)==="t"===j?(W=0,J=1,le=x):(W=x-1,J=-1,le=-1),g){var ue=E[Z];for(S=W;S!==le;S+=J)if(v=P[S][ue],!!v&&(M=v.indexOf("y"),v.slice(0,M)===Z)){U[Z]=v.slice(M);break}}else for(S=W;S!==le;S+=J)if(_=d.yaxes[S],m.cartesian.indexOf(Z+_)!==-1){U[Z]=_;break}}else if(re.charAt(0)==="l"?(W=0,J=1,le=A):(W=A-1,J=-1,le=-1),g){var se=E[Z];for(S=W;S!==le;S+=J)if(v=P[se][S],!!v&&(M=v.indexOf("y"),v.slice(M)===Z)){U[Z]=v.slice(0,M);break}}else for(S=W;S!==le;S+=J)if(T=d.xaxes[S],m.cartesian.indexOf(T+Z)!==-1){U[Z]=T;break}}}}function u(s,h,d,y,m){var g=new Array(d),x;function A(b,S){h.indexOf(S)!==-1&&y[S]===void 0?(g[b]=S,y[S]=b):g[b]=""}if(Array.isArray(s))for(x=0;x<d;x++)A(x,s[x]);else for(A(0,m),x=1;x<d;x++)A(x,m+(x+1));return g}k.exports={moduleType:"component",name:"grid",schema:{layout:{grid:n}},layoutAttributes:n,sizeDefaults:i,contentDefaults:f}},{"../../lib":503,"../../lib/regex":520,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/domain":584}],411:[function(e,k,z){var l=e("../../plots/cartesian/constants"),o=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),k.exports=o("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",l.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",l.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561}],412:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../lib/to_log_range");k.exports=function(p,t,n,a){t=t||{};var i=n==="log"&&t.type==="linear",r=n==="linear"&&t.type==="log";if(!!(i||r)){for(var f=p._fullLayout.images,u=t._id.charAt(0),s,h,d=0;d<f.length;d++)if(s=f[d],h="images["+d+"].",s[u+"ref"]===t._id){var y=s[u],m=s["size"+u],g=null,x=null;if(i){g=o(y,t.range);var A=m/Math.pow(10,g)/2;x=2*Math.log(A+Math.sqrt(1+A*A))/Math.LN10}else g=Math.pow(10,y),x=g*(Math.pow(10,m/2)-Math.pow(10,-m/2));l(g)?l(x)||(x=null):(g=null,x=null),a(h+u,g),a(h+"size"+u,x)}}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],413:[function(e,k,z){var l=e("../../lib"),o=e("../../plots/cartesian/axes"),c=e("../../plots/array_container_defaults"),p=e("./attributes"),t="images";k.exports=function(i,r){var f={name:t,handleItemDefaults:n};c(i,r,f)};function n(a,i,r){function f(A,b){return l.coerce(a,i,p,A,b)}var u=f("source"),s=f("visible",!!u);if(!s)return i;f("layer"),f("xanchor"),f("yanchor"),f("sizex"),f("sizey"),f("sizing"),f("opacity");for(var h={_fullLayout:r},d=["x","y"],y=0;y<2;y++){var m=d[y],g=o.coerceRef(a,i,h,m,"paper",void 0);if(g!=="paper"){var x=o.getFromId(h,g);x._imgIndices.push(i._index)}o.coercePosition(i,h,f,g,m,0)}return i}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":411}],414:[function(e,k,z){var l=e("@plotly/d3"),o=e("../drawing"),c=e("../../plots/cartesian/axes"),p=e("../../plots/cartesian/axis_ids"),t=e("../../constants/xmlns_namespaces");k.exports=function(a){var i=a._fullLayout,r=[],f={},u=[],s,h;for(h=0;h<i.images.length;h++){var d=i.images[h];if(d.visible)if(d.layer==="below"&&d.xref!=="paper"&&d.yref!=="paper"){s=p.ref2id(d.xref)+p.ref2id(d.yref);var y=i._plots[s];if(!y){u.push(d);continue}y.mainplot&&(s=y.mainplot.id),f[s]||(f[s]=[]),f[s].push(d)}else d.layer==="above"?r.push(d):u.push(d)}var m={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function g(_){var v=l.select(this);if(this._imgSrc!==_.source)if(v.attr("xmlns",t.svg),_.source&&_.source.slice(0,5)==="data:")v.attr("xlink:href",_.source),this._imgSrc=_.source;else{var P=new Promise(function(M){var E=new Image;this.img=E,E.setAttribute("crossOrigin","anonymous"),E.onerror=D,E.onload=function(){var N=document.createElement("canvas");N.width=this.width,N.height=this.height;var O=N.getContext("2d");O.drawImage(this,0,0);var I=N.toDataURL("image/png");v.attr("xlink:href",I),M()},v.on("error",D),E.src=_.source,this._imgSrc=_.source;function D(){v.remove(),M()}}.bind(this));a._promises.push(P)}}function x(_){var v=l.select(this),P=c.getFromId(a,_.xref),M=c.getFromId(a,_.yref),E=c.getRefType(_.xref)==="domain",D=c.getRefType(_.yref)==="domain",N=i._size,O,I;P!==void 0?O=typeof _.xref=="string"&&E?P._length*_.sizex:Math.abs(P.l2p(_.sizex)-P.l2p(0)):O=_.sizex*N.w,M!==void 0?I=typeof _.yref=="string"&&D?M._length*_.sizey:Math.abs(M.l2p(_.sizey)-M.l2p(0)):I=_.sizey*N.h;var F=O*m.x[_.xanchor].offset,V=I*m.y[_.yanchor].offset,U=m.x[_.xanchor].sizing+m.y[_.yanchor].sizing,j,Z;switch(P!==void 0?j=typeof _.xref=="string"&&E?P._length*_.x+P._offset:P.r2p(_.x)+P._offset:j=_.x*N.w+N.l,j+=F,M!==void 0?Z=typeof _.yref=="string"&&D?M._length*(1-_.y)+M._offset:M.r2p(_.y)+M._offset:Z=N.h-_.y*N.h+N.t,Z+=V,_.sizing){case"fill":U+=" slice";break;case"stretch":U="none";break}v.attr({x:j,y:Z,width:O,height:I,preserveAspectRatio:U,opacity:_.opacity});var te=P&&c.getRefType(_.xref)!=="domain"?P._id:"",re=M&&c.getRefType(_.yref)!=="domain"?M._id:"",W=te+re;o.setClipUrl(v,W?"clip"+i._uid+W:null,a)}var A=i._imageLowerLayer.selectAll("image").data(u),b=i._imageUpperLayer.selectAll("image").data(r);A.enter().append("image"),b.enter().append("image"),A.exit().remove(),b.exit().remove(),A.each(function(_){g.bind(this)(_),x.bind(this)(_)}),b.each(function(_){g.bind(this)(_),x.bind(this)(_)});var S=Object.keys(i._plots);for(h=0;h<S.length;h++){s=S[h];var w=i._plots[s];if(!!w.imagelayer){var T=w.imagelayer.selectAll("image").data(f[s]||[]);T.enter().append("image"),T.exit().remove(),T.each(function(_){g.bind(this)(_),x.bind(this)(_)})}}}},{"../../constants/xmlns_namespaces":480,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../drawing":388,"@plotly/d3":58}],415:[function(e,k,z){k.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":411,"./convert_coords":412,"./defaults":413,"./draw":414}],416:[function(e,k,z){var l=e("../../plots/font_attributes"),o=e("../color/attributes");k.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:o.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:l({editType:"legend"}),grouptitlefont:l({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:l({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":585,"../color/attributes":365}],417:[function(e,k,z){k.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],418:[function(e,k,z){var l=e("../../registry"),o=e("../../lib"),c=e("../../plot_api/plot_template"),p=e("../../plots/attributes"),t=e("./attributes"),n=e("../../plots/layout_attributes"),a=e("./helpers");k.exports=function(r,f,u){var s=r.legend||{},h=c.newContainer(f,"legend");function d(I,F){return o.coerce(s,h,t,I,F)}for(var y,m=function(I,F){var V=y._input,U=y;return o.coerce(V,U,p,I,F)},g=f.font||{},x=o.coerceFont(d,"grouptitlefont",o.extendFlat({},g,{size:Math.round(g.size*1.1)})),A=0,b=!1,S="normal",w=0;w<u.length;w++)y=u[w],!!y.visible&&((y.showlegend||y._dfltShowLegend&&!(y._module&&y._module.attributes&&y._module.attributes.showlegend&&y._module.attributes.showlegend.dflt===!1))&&(A++,y.showlegend&&(b=!0,(l.traceIs(y,"pie-like")||y._input.showlegend===!0)&&A++),o.coerceFont(m,"legendgrouptitle.font",x)),(l.traceIs(y,"bar")&&f.barmode==="stack"||["tonextx","tonexty"].indexOf(y.fill)!==-1)&&(S=a.isGrouped({traceorder:S})?"grouped+reversed":"reversed"),y.legendgroup!==void 0&&y.legendgroup!==""&&(S=a.isReversed({traceorder:S})?"reversed+grouped":"grouped"));var T=o.coerce(r,f,n,"showlegend",b&&A>1);if(T===!1&&(f.legend=void 0),!(T===!1&&!s.uirevision)&&(d("uirevision",f.uirevision),T!==!1)){d("bgcolor",f.paper_bgcolor),d("bordercolor"),d("borderwidth");var _=o.coerceFont(d,"font",f.font),v=d("orientation"),P=v==="h",M,E,D;P?(M=0,l.getComponentMethod("rangeslider","isVisible")(r.xaxis)?(E=1.1,D="bottom"):(E=-.1,D="top")):(M=1.02,E=1,D="auto"),d("traceorder",S),a.isGrouped(f.legend)&&d("tracegroupgap"),d("itemsizing"),d("itemwidth"),d("itemclick"),d("itemdoubleclick"),d("groupclick"),d("x",M),d("xanchor"),d("y",E),d("yanchor",D),d("valign"),o.noneOrAll(s,h,["x","y"]);var N=d("title.text");if(N){d("title.side",P?"left":"top");var O=o.extendFlat({},_,{size:o.bigFont(_.size)});o.coerceFont(d,"title.font",O)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/layout_attributes":610,"../../registry":638,"./attributes":416,"./helpers":422}],419:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../lib"),c=e("../../plots/plots"),p=e("../../registry"),t=e("../../lib/events"),n=e("../dragelement"),a=e("../drawing"),i=e("../color"),r=e("../../lib/svg_text_utils"),f=e("./handle_click"),u=e("./constants"),s=e("../../constants/alignment"),h=s.LINE_SPACING,d=s.FROM_TL,y=s.FROM_BR,m=e("./get_legend_data"),g=e("./style"),x=e("./helpers"),A=1;k.exports=function(F,V){return V||(V=F._fullLayout.legend||{}),b(F,V)};function b(I,F){var V=I._fullLayout,U="legend"+V._uid,j,Z=F._inHover;if(Z?(j=F.layer,U+="-hover"):j=V._infolayer,!!j){I._legendMouseDownTime||(I._legendMouseDownTime=0);var te;if(Z){if(!F.entries)return;te=m(F.entries,F)}else{if(!I.calcdata)return;te=V.showlegend&&m(I.calcdata,F)}var re=V.hiddenlabels||[];if(!Z&&(!V.showlegend||!te.length))return j.selectAll(".legend").remove(),V._topdefs.select("#"+U).remove(),c.autoMargin(I,"legend");var W=o.ensureSingle(j,"g","legend",function(K){Z||K.attr("pointer-events","all")}),J=o.ensureSingleById(V._topdefs,"clipPath",U,function(K){K.append("rect")}),le=o.ensureSingle(W,"rect","bg",function(K){K.attr("shape-rendering","crispEdges")});le.call(i.stroke,F.bordercolor).call(i.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px");var ue=o.ensureSingle(W,"g","scrollbox"),se=F.title;if(F._titleWidth=0,F._titleHeight=0,se.text){var G=o.ensureSingle(ue,"text","legendtitletext");G.attr("text-anchor","start").call(a.font,se.font).text(se.text),v(G,ue,I,F,A)}else ue.selectAll(".legendtitletext").remove();var Y=o.ensureSingle(W,"rect","scrollbar",function(K){K.attr(u.scrollBarEnterAttrs).call(i.fill,u.scrollBarColor)}),ee=ue.selectAll("g.groups").data(te);ee.enter().append("g").attr("class","groups"),ee.exit().remove();var $=ee.selectAll("g.traces").data(o.identity);$.enter().append("g").attr("class","traces"),$.exit().remove(),$.style("opacity",function(K){var Q=K[0].trace;return p.traceIs(Q,"pie-like")?re.indexOf(K[0].label)!==-1?.5:1:Q.visible==="legendonly"?.5:1}).each(function(){l.select(this).call(w,I,F)}).call(g,I,F).each(function(){Z||l.select(this).call(_,I)}),o.syncOrAsync([c.previousPromises,function(){return E(I,ee,$,F)},function(){var K=V._size,Q=F.borderwidth;if(!Z){var ae=D(I);if(ae)return;var ie=K.l+K.w*F.x-d[N(F)]*F._width,oe=K.t+K.h*(1-F.y)-d[O(F)]*F._effHeight;if(V.margin.autoexpand){var fe=ie,ye=oe;ie=o.constrain(ie,0,V.width-F._width),oe=o.constrain(oe,0,V.height-F._effHeight),ie!==fe&&o.log("Constrain legend.x to make legend fit inside graph"),oe!==ye&&o.log("Constrain legend.y to make legend fit inside graph")}a.setTranslate(W,ie,oe)}if(Y.on(".drag",null),W.on("wheel",null),Z||F._height<=F._maxHeight||I._context.staticPlot){var ce=F._effHeight;Z&&(ce=F._height),le.attr({width:F._width-Q,height:ce-Q,x:Q/2,y:Q/2}),a.setTranslate(ue,0,0),J.select("rect").attr({width:F._width-2*Q,height:ce-2*Q,x:Q,y:Q}),a.setClipUrl(ue,U,I),a.setRect(Y,0,0,0,0),delete F._scrollY}else{var me=Math.max(u.scrollBarMinHeight,F._effHeight*F._effHeight/F._height),xe=F._effHeight-me-2*u.scrollBarMargin,ke=F._height-F._effHeight,Ae=xe/ke,Oe=Math.min(F._scrollY||0,ke);le.attr({width:F._width-2*Q+u.scrollBarWidth+u.scrollBarMargin,height:F._effHeight-Q,x:Q/2,y:Q/2}),J.select("rect").attr({width:F._width-2*Q+u.scrollBarWidth+u.scrollBarMargin,height:F._effHeight-2*Q,x:Q,y:Q+Oe}),a.setClipUrl(ue,U,I),De(Oe,me,Ae),W.on("wheel",function(){Oe=o.constrain(F._scrollY+l.event.deltaY/xe*ke,0,ke),De(Oe,me,Ae),Oe!==0&&Oe!==ke&&l.event.preventDefault()});var He,Ge,_e,Ie=function(Mt,zt,Nt){var Et=(Nt-zt)/Ae+Mt;return o.constrain(Et,0,ke)},We=function(Mt,zt,Nt){var Et=(zt-Nt)/Ae+Mt;return o.constrain(Et,0,ke)},et=l.behavior.drag().on("dragstart",function(){var Mt=l.event.sourceEvent;Mt.type==="touchstart"?He=Mt.changedTouches[0].clientY:He=Mt.clientY,_e=Oe}).on("drag",function(){var Mt=l.event.sourceEvent;Mt.buttons===2||Mt.ctrlKey||(Mt.type==="touchmove"?Ge=Mt.changedTouches[0].clientY:Ge=Mt.clientY,Oe=Ie(_e,He,Ge),De(Oe,me,Ae))});Y.call(et);var Ne=l.behavior.drag().on("dragstart",function(){var Mt=l.event.sourceEvent;Mt.type==="touchstart"&&(He=Mt.changedTouches[0].clientY,_e=Oe)}).on("drag",function(){var Mt=l.event.sourceEvent;Mt.type==="touchmove"&&(Ge=Mt.changedTouches[0].clientY,Oe=We(_e,He,Ge),De(Oe,me,Ae))});ue.call(Ne)}function De(Mt,zt,Nt){F._scrollY=I._fullLayout.legend._scrollY=Mt,a.setTranslate(ue,0,-Mt),a.setRect(Y,F._width,u.scrollBarMargin+Mt*Nt,u.scrollBarWidth,zt),J.select("rect").attr("y",Q+Mt)}if(I._context.edits.legendPosition){var Ve,dt,Dt,Gt;W.classed("cursor-move",!0),n.init({element:W.node(),gd:I,prepFn:function(){var Mt=a.getTranslate(W);Dt=Mt.x,Gt=Mt.y},moveFn:function(Mt,zt){var Nt=Dt+Mt,Et=Gt+zt;a.setTranslate(W,Nt,Et),Ve=n.align(Nt,0,K.l,K.l+K.w,F.xanchor),dt=n.align(Et,0,K.t+K.h,K.t,F.yanchor)},doneFn:function(){Ve!==void 0&&dt!==void 0&&p.call("_guiRelayout",I,{"legend.x":Ve,"legend.y":dt})},clickFn:function(Mt,zt){var Nt=j.selectAll("g.traces").filter(function(){var Et=this.getBoundingClientRect();return zt.clientX>=Et.left&&zt.clientX<=Et.right&&zt.clientY>=Et.top&&zt.clientY<=Et.bottom});Nt.size()>0&&S(I,W,Nt,Mt,zt)}})}}],I)}}function S(I,F,V,U,j){var Z=V.data()[0][0].trace,te={event:j,node:V.node(),curveNumber:Z.index,expandedIndex:Z._expandedIndex,data:I.data,layout:I.layout,frames:I._transitionData._frames,config:I._context,fullData:I._fullData,fullLayout:I._fullLayout};Z._group&&(te.group=Z._group),p.traceIs(Z,"pie-like")&&(te.label=V.datum()[0].label);var re=t.triggerHandler(I,"plotly_legendclick",te);if(re!==!1){if(U===1)F._clickTimeout=setTimeout(function(){!I._fullLayout||f(V,I,U)},I._context.doubleClickDelay);else if(U===2){F._clickTimeout&&clearTimeout(F._clickTimeout),I._legendMouseDownTime=0;var W=t.triggerHandler(I,"plotly_legenddoubleclick",te);W!==!1&&f(V,I,U)}}}function w(I,F,V){var U=I.data()[0][0],j=U.trace,Z=p.traceIs(j,"pie-like"),te=!V._inHover&&F._context.edits.legendText&&!Z,re=V._maxNameLength,W,J;U.groupTitle?(W=U.groupTitle.text,J=U.groupTitle.font):(J=V.font,V.entries?W=U.text:(W=Z?U.label:j.name,j._meta&&(W=o.templateString(W,j._meta))));var le=o.ensureSingle(I,"text","legendtext");le.attr("text-anchor","start").call(a.font,J).text(te?T(W,re):W);var ue=V.itemwidth+u.itemGap*2;r.positionText(le,ue,0),te?le.call(r.makeEditable,{gd:F,text:W}).call(v,I,F,V).on("edit",function(se){this.text(T(se,re)).call(v,I,F,V);var G=U.trace._fullInput||{},Y={};if(p.hasTransform(G,"groupby")){var ee=p.getTransformIndices(G,"groupby"),$=ee[ee.length-1],K=o.keyedContainer(G,"transforms["+$+"].styles","target","value.name");K.set(U.trace._group,se),Y=K.constructUpdate()}else Y.name=se;return p.call("_guiRestyle",F,Y,j.index)}):v(le,I,F,V)}function T(I,F){var V=Math.max(4,F);if(I&&I.trim().length>=V/2)return I;I=I||"";for(var U=V-I.length;U>0;U--)I+=" ";return I}function _(I,F){var V=F._context.doubleClickDelay,U,j=1,Z=o.ensureSingle(I,"rect","legendtoggle",function(te){F._context.staticPlot||te.style("cursor","pointer").attr("pointer-events","all"),te.call(i.fill,"rgba(0,0,0,0)")});F._context.staticPlot||(Z.on("mousedown",function(){U=new Date().getTime(),U-F._legendMouseDownTime<V?j+=1:(j=1,F._legendMouseDownTime=U)}),Z.on("mouseup",function(){if(!(F._dragged||F._editing)){var te=F._fullLayout.legend;new Date().getTime()-F._legendMouseDownTime>V&&(j=Math.max(j-1,1)),S(F,te,I,j,l.event)}}))}function v(I,F,V,U,j){U._inHover&&I.attr("data-notex",!0),r.convertToTspans(I,V,function(){P(F,V,U,j)})}function P(I,F,V,U){var j=I.data()[0][0];if(!V._inHover&&j&&!j.trace.showlegend){I.remove();return}var Z=I.select("g[class*=math-group]"),te=Z.node();V||(V=F._fullLayout.legend);var re=V.borderwidth,W;U===A?W=V.title.font:j.groupTitle?W=j.groupTitle.font:W=V.font;var J=W.size*h,le,ue;if(te){var se=a.bBox(te);le=se.height,ue=se.width,U===A?a.setTranslate(Z,re,re+le*.75):a.setTranslate(Z,0,le*.25)}else{var G=I.select(U===A?".legendtitletext":".legendtext"),Y=r.lineCount(G),ee=G.node();if(le=J*Y,ue=ee?a.bBox(ee).width:0,U===A)V.title.side==="left"&&(ue+=u.itemGap*2),r.positionText(G,re+u.titlePad,re+J);else{var $=u.itemGap*2+V.itemwidth;j.groupTitle&&($=u.itemGap,ue-=V.itemwidth),r.positionText(G,$,-J*((Y-1)/2-.3))}}U===A?(V._titleWidth=ue,V._titleHeight=le):(j.lineHeight=J,j.height=Math.max(le,16)+3,j.width=ue)}function M(I){var F=0,V=0,U=I.title.side;return U&&(U.indexOf("left")!==-1&&(F=I._titleWidth),U.indexOf("top")!==-1&&(V=I._titleHeight)),[F,V]}function E(I,F,V,U){var j=I._fullLayout;U||(U=j.legend);var Z=j._size,te=x.isVertical(U),re=x.isGrouped(U),W=U.borderwidth,J=2*W,le=u.itemGap,ue=U.itemwidth+le*2,se=2*(W+le),G=O(U),Y=U.y<0||U.y===0&&G==="top",ee=U.y>1||U.y===1&&G==="bottom",$=U.tracegroupgap;U._maxHeight=Math.max(Y||ee?j.height/2:Z.h,30);var K=0;U._width=0,U._height=0;var Q=M(U);if(te)V.each(function(Ve){var dt=Ve[0].height;a.setTranslate(this,W+Q[0],W+Q[1]+U._height+dt/2+le),U._height+=dt,U._width=Math.max(U._width,Ve[0].width)}),K=ue+U._width,U._width+=le+ue+J,U._height+=se,re&&(F.each(function(Ve,dt){a.setTranslate(this,0,dt*U.tracegroupgap)}),U._height+=(U._lgroupsLength-1)*U.tracegroupgap);else{var ae=N(U),ie=U.x<0||U.x===0&&ae==="right",oe=U.x>1||U.x===1&&ae==="left",fe=ee||Y,ye=j.width/2;U._maxWidth=Math.max(ie?fe&&ae==="left"?Z.l+Z.w:ye:oe?fe&&ae==="right"?Z.r+Z.w:ye:Z.w,2*ue);var ce=0,me=0;V.each(function(Ve){var dt=Ve[0].width+ue;ce=Math.max(ce,dt),me+=dt}),K=null;var xe=0;if(re){var ke=0,Ae=0,Oe=0;F.each(function(){var Ve=0,dt=0;l.select(this).selectAll("g.traces").each(function(Gt){var Mt=Gt[0].width,zt=Gt[0].height;a.setTranslate(this,Q[0],Q[1]+W+le+zt/2+dt),dt+=zt,Ve=Math.max(Ve,ue+Mt)}),ke=Math.max(ke,dt);var Dt=Ve+le;Ae>0&&Dt+W+Ae>U._maxWidth&&(xe=Math.max(xe,Ae),Ae=0,Oe+=ke+$,ke=dt),a.setTranslate(this,Ae,Oe),Ae+=Dt}),U._width=Math.max(xe,Ae)+W,U._height=Oe+ke+se}else{var He=V.size(),Ge=me+J+(He-1)*le<U._maxWidth,_e=0,Ie=0,We=0,et=0;V.each(function(Ve){var dt=Ve[0].height,Dt=ue+Ve[0].width,Gt=(Ge?Dt:ce)+le;Gt+W+Ie-le>=U._maxWidth&&(xe=Math.max(xe,et),Ie=0,We+=_e,U._height+=_e,_e=0),a.setTranslate(this,Q[0]+W+Ie,Q[1]+W+We+dt/2+le),et=Ie+Dt+le,Ie+=Gt,_e=Math.max(_e,dt)}),Ge?(U._width=Ie+J,U._height=_e+se):(U._width=Math.max(xe,et)+J,U._height+=_e+se)}}U._width=Math.ceil(Math.max(U._width+Q[0],U._titleWidth+2*(W+u.titlePad))),U._height=Math.ceil(Math.max(U._height+Q[1],U._titleHeight+2*(W+u.itemGap))),U._effHeight=Math.min(U._height,U._maxHeight);var Ne=I._context.edits,De=Ne.legendText||Ne.legendPosition;V.each(function(Ve){var dt=l.select(this).select(".legendtoggle"),Dt=Ve[0].height,Gt=De?ue:K||ue+Ve[0].width;te||(Gt+=le/2),a.setRect(dt,0,-Dt/2,Gt,Dt)})}function D(I){var F=I._fullLayout,V=F.legend,U=N(V),j=O(V);return c.autoMargin(I,"legend",{x:V.x,y:V.y,l:V._width*d[U],r:V._width*y[U],b:V._effHeight*y[j],t:V._effHeight*d[j]})}function N(I){return o.isRightAnchor(I)?"right":o.isCenterAnchor(I)?"center":"left"}function O(I){return o.isBottomAnchor(I)?"bottom":o.isMiddleAnchor(I)?"middle":"top"}},{"../../constants/alignment":471,"../../lib":503,"../../lib/events":492,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":417,"./get_legend_data":420,"./handle_click":421,"./helpers":422,"./style":424,"@plotly/d3":58}],420:[function(e,k,z){var l=e("../../registry"),o=e("./helpers");k.exports=function(p,t){var n=t._inHover,a=o.isGrouped(t),i=o.isReversed(t),r={},f=[],u=!1,s={},h=0,d=0,y,m;function g(V,U){if(V===""||!o.isGrouped(t)){var j="~~i"+h;f.push(j),r[j]=[U],h++}else f.indexOf(V)===-1?(f.push(V),u=!0,r[V]=[U]):r[V].push(U)}for(y=0;y<p.length;y++){var x=p[y],A=x[0],b=A.trace,S=b.legendgroup;if(!(!n&&(!b.visible||!b.showlegend)))if(l.traceIs(b,"pie-like"))for(s[S]||(s[S]={}),m=0;m<x.length;m++){var w=x[m].label;s[S][w]||(g(S,{label:w,color:x[m].color,i:x[m].i,trace:b,pts:x[m].pts}),s[S][w]=!0,d=Math.max(d,(w||"").length))}else g(S,A),d=Math.max(d,(b.name||"").length)}if(!f.length)return[];var T=!u||!a,_=[];for(y=0;y<f.length;y++){var v=r[f[y]];T?_.push(v[0]):_.push(v)}for(T&&(_=[_]),y=0;y<_.length;y++){var P=1/0;for(m=0;m<_[y].length;m++){var M=_[y][m].trace.legendrank;P>M&&(P=M)}_[y][0]._groupMinRank=P,_[y][0]._preGroupSort=y}var E=function(V,U){return V[0]._groupMinRank-U[0]._groupMinRank||V[0]._preGroupSort-U[0]._preGroupSort},D=function(V,U){return V.trace.legendrank-U.trace.legendrank||V._preSort-U._preSort};for(_.forEach(function(V,U){V[0]._preGroupSort=U}),_.sort(E),y=0;y<_.length;y++){_[y].forEach(function(V,U){V._preSort=U}),_[y].sort(D);var N=_[y][0].trace,O=null;for(m=0;m<_[y].length;m++){var I=_[y][m].trace.legendgrouptitle;if(I&&I.text){O=I,n&&(I.font=t._groupTitleFont);break}}if(i&&_[y].reverse(),O){var F=!1;for(m=0;m<_[y].length;m++)if(l.traceIs(_[y][m].trace,"pie-like")){F=!0;break}_[y].unshift({i:-1,groupTitle:O,noClick:F,trace:{showlegend:N.showlegend,legendgroup:N.legendgroup,visible:t.groupclick==="toggleitem"?!0:N.visible}})}for(m=0;m<_[y].length;m++)_[y][m]=[_[y][m]]}return t._lgroupsLength=_.length,t._maxNameLength=d,_}},{"../../registry":638,"./helpers":422}],421:[function(e,k,z){var l=e("../../lib"),o=e("../../registry"),c=!0;k.exports=function(t,n,a){var i=n._fullLayout;if(n._dragged||n._editing)return;var r=i.legend.itemclick,f=i.legend.itemdoubleclick,u=i.legend.groupclick;a===1&&r==="toggle"&&f==="toggleothers"&&c&&n.data&&n._context.showTips&&l.notifier(l._(n,"Double-click on legend to isolate one trace"),"long"),c=!1;var s;if(a===1?s=r:a===2&&(s=f),!s)return;var h=u==="togglegroup",d=i.hiddenlabels?i.hiddenlabels.slice():[],y=t.data()[0][0];if(y.groupTitle&&y.noClick)return;var m=n._fullData,g=y.trace,x=g.legendgroup,A,b,S,w,T,_,v={},P=[],M=[],E=[];function D(se,G,Y){var ee=P.indexOf(se),$=v[G];return $||($=v[G]=[]),P.indexOf(se)===-1&&(P.push(se),ee=P.length-1),$[ee]=Y,ee}function N(se,G){if(!(y.groupTitle&&!h)){var Y=se._fullInput;if(o.hasTransform(Y,"groupby")){var ee=M[Y.index];if(!ee){var $=o.getTransformIndices(Y,"groupby"),K=$[$.length-1];ee=l.keyedContainer(Y,"transforms["+K+"].styles","target","value.visible"),M[Y.index]=ee}var Q=ee.get(se._group);Q===void 0&&(Q=!0),Q!==!1&&ee.set(se._group,G),E[Y.index]=D(Y.index,"visible",Y.visible!==!1)}else{var ae=Y.visible===!1?!1:G;D(Y.index,"visible",ae)}}}if(o.traceIs(g,"pie-like")){var O=y.label,I=d.indexOf(O);s==="toggle"?I===-1?d.push(O):d.splice(I,1):s==="toggleothers"&&(d=[],n.calcdata[0].forEach(function(se){O!==se.label&&d.push(se.label)}),n._fullLayout.hiddenlabels&&n._fullLayout.hiddenlabels.length===d.length&&I===-1&&(d=[])),o.call("_guiRelayout",n,"hiddenlabels",d)}else{var F=x&&x.length,V=[],U;if(F)for(A=0;A<m.length;A++)U=m[A],!!U.visible&&U.legendgroup===x&&V.push(A);if(s==="toggle"){var j;switch(g.visible){case!0:j="legendonly";break;case!1:j=!1;break;case"legendonly":j=!0;break}if(F)if(h)for(A=0;A<m.length;A++)m[A].visible!==!1&&m[A].legendgroup===x&&N(m[A],j);else N(g,j);else N(g,j)}else if(s==="toggleothers"){var Z,te,re,W,J=!0;for(A=0;A<m.length;A++)if(Z=m[A]===g,re=m[A].showlegend!==!0,!(Z||re)&&(te=F&&m[A].legendgroup===x,!te&&m[A].visible===!0&&!o.traceIs(m[A],"notLegendIsolatable"))){J=!1;break}for(A=0;A<m.length;A++)if(m[A].visible!==!1&&!o.traceIs(m[A],"notLegendIsolatable"))switch(g.visible){case"legendonly":N(m[A],!0);break;case!0:W=J?!0:"legendonly",Z=m[A]===g,re=m[A].showlegend!==!0&&!m[A].legendgroup,te=Z||F&&m[A].legendgroup===x,N(m[A],te||re?!0:W);break}}for(A=0;A<M.length;A++)if(S=M[A],!!S){var le=S.constructUpdate(),ue=Object.keys(le);for(b=0;b<ue.length;b++)w=ue[b],_=v[w]=v[w]||[],_[E[A]]=le[w]}for(T=Object.keys(v),A=0;A<T.length;A++)for(w=T[A],b=0;b<P.length;b++)v[w].hasOwnProperty(b)||(v[w][b]=void 0);o.call("_guiRestyle",n,v,P)}}},{"../../lib":503,"../../registry":638}],422:[function(e,k,z){z.isGrouped=function(o){return(o.traceorder||"").indexOf("grouped")!==-1},z.isVertical=function(o){return o.orientation!=="h"},z.isReversed=function(o){return(o.traceorder||"").indexOf("reversed")!==-1}},{}],423:[function(e,k,z){k.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":416,"./defaults":418,"./draw":419,"./style":424}],424:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../registry"),c=e("../../lib"),p=c.strTranslate,t=e("../drawing"),n=e("../color"),a=e("../colorscale/helpers").extractOpts,i=e("../../traces/scatter/subtypes"),r=e("../../traces/pie/style_one"),f=e("../../traces/pie/helpers").castOption,u=e("./constants"),s=12,h=5,d=2,y=10,m=5;k.exports=function(S,w,T){var _=w._fullLayout;T||(T=_.legend);var v=T.itemsizing==="constant",P=T.itemwidth,M=(P+u.itemGap*2)/2,E=p(M,0),D=function(ue,se,G,Y){var ee;if(ue+1)ee=ue;else if(se&&se.width>0)ee=se.width;else return 0;return v?Y:Math.min(ee,G)};S.each(function(ue){var se=l.select(this),G=c.ensureSingle(se,"g","layers");G.style("opacity",ue[0].trace.opacity);var Y=T.valign,ee=ue[0].lineHeight,$=ue[0].height;if(Y==="middle"||!ee||!$)G.attr("transform",null);else{var K={top:1,bottom:-1}[Y],Q=K*(.5*(ee-$+3));G.attr("transform",p(0,Q))}var ae=G.selectAll("g.legendfill").data([ue]);ae.enter().append("g").classed("legendfill",!0);var ie=G.selectAll("g.legendlines").data([ue]);ie.enter().append("g").classed("legendlines",!0);var oe=G.selectAll("g.legendsymbols").data([ue]);oe.enter().append("g").classed("legendsymbols",!0),oe.selectAll("g.legendpoints").data([ue]).enter().append("g").classed("legendpoints",!0)}).each(le).each(I).each(V).each(F).each(j).each(W).each(re).each(N).each(O).each(Z).each(te);function N(ue){var se=x(ue),G=se.showFill,Y=se.showLine,ee=se.showGradientLine,$=se.showGradientFill,K=se.anyFill,Q=se.anyLine,ae=ue[0],ie=ae.trace,oe,fe,ye=a(ie),ce=ye.colorscale,me=ye.reversescale,xe=function(Ie){if(Ie.size()){var We="legendfill-"+ie.uid;t.gradient(Ie,w,We,g(me),ce,"fill")}},ke=function(Ie){if(Ie.size()){var We="legendline-"+ie.uid;t.lineGroupStyle(Ie),t.gradient(Ie,w,We,g(me),ce,"stroke")}},Ae=i.hasMarkers(ie)||!K?"M5,0":Q?"M5,-2":"M5,-3",Oe=l.select(this),He=Oe.select(".legendfill").selectAll("path").data(G||$?[ue]:[]);if(He.enter().append("path").classed("js-fill",!0),He.exit().remove(),He.attr("d",Ae+"h"+P+"v6h-"+P+"z").call(G?t.fillGroupStyle:xe),Y||ee){var Ge=D(void 0,ie.line,y,h);fe=c.minExtend(ie,{line:{width:Ge}}),oe=[c.minExtend(ae,{trace:fe})]}var _e=Oe.select(".legendlines").selectAll("path").data(Y||ee?[oe]:[]);_e.enter().append("path").classed("js-line",!0),_e.exit().remove(),_e.attr("d",Ae+(ee?"l"+P+",0.0001":"h"+P)).call(Y?t.lineGroupStyle:ke)}function O(ue){var se=x(ue),G=se.anyFill,Y=se.anyLine,ee=se.showLine,$=se.showMarker,K=ue[0],Q=K.trace,ae=!$&&!Y&&!G&&i.hasText(Q),ie,oe;function fe(He,Ge,_e,Ie){var We=c.nestedProperty(Q,He).get(),et=c.isArrayOrTypedArray(We)&&Ge?Ge(We):We;if(v&&et&&Ie!==void 0&&(et=Ie),_e){if(et<_e[0])return _e[0];if(et>_e[1])return _e[1]}return et}function ye(He){return K._distinct&&K.index&&He[K.index]?He[K.index]:He[0]}if($||ae||ee){var ce={},me={};if($){ce.mc=fe("marker.color",ye),ce.mx=fe("marker.symbol",ye),ce.mo=fe("marker.opacity",c.mean,[.2,1]),ce.mlc=fe("marker.line.color",ye),ce.mlw=fe("marker.line.width",c.mean,[0,5],d),me.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var xe=fe("marker.size",c.mean,[2,16],s);ce.ms=xe,me.marker.size=xe}ee&&(me.line={width:fe("line.width",ye,[0,10],h)}),ae&&(ce.tx="Aa",ce.tp=fe("textposition",ye),ce.ts=10,ce.tc=fe("textfont.color",ye),ce.tf=fe("textfont.family",ye)),ie=[c.minExtend(K,ce)],oe=c.minExtend(Q,me),oe.selectedpoints=null,oe.texttemplate=null}var ke=l.select(this).select("g.legendpoints"),Ae=ke.selectAll("path.scatterpts").data($?ie:[]);Ae.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",E),Ae.exit().remove(),Ae.call(t.pointStyle,oe,w),$&&(ie[0].mrc=3);var Oe=ke.selectAll("g.pointtext").data(ae?ie:[]);Oe.enter().append("g").classed("pointtext",!0).append("text").attr("transform",E),Oe.exit().remove(),Oe.selectAll("text").call(t.textPointStyle,oe,w)}function I(ue){var se=ue[0].trace,G=se.type==="waterfall";if(ue[0]._distinct&&G){var Y=ue[0].trace[ue[0].dir].marker;return ue[0].mc=Y.color,ue[0].mlw=Y.line.width,ue[0].mlc=Y.line.color,U(ue,this,"waterfall")}var ee=[];se.visible&&G&&(ee=ue[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var $=l.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(ee);$.enter().append("path").classed("legendwaterfall",!0).attr("transform",E).style("stroke-miterlimit",1),$.exit().remove(),$.each(function(K){var Q=l.select(this),ae=se[K[0]].marker,ie=D(void 0,ae.line,m,d);Q.attr("d",K[1]).style("stroke-width",ie+"px").call(n.fill,ae.color),ie&&Q.call(n.stroke,ae.line.color)})}function F(ue){U(ue,this)}function V(ue){U(ue,this,"funnel")}function U(ue,se,G){var Y=ue[0].trace,ee=Y.marker||{},$=ee.line||{},K=G?Y.visible&&Y.type===G:o.traceIs(Y,"bar"),Q=l.select(se).select("g.legendpoints").selectAll("path.legend"+G).data(K?[ue]:[]);Q.enter().append("path").classed("legend"+G,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),Q.exit().remove(),Q.each(function(ae){var ie=l.select(this),oe=ae[0],fe=D(oe.mlw,ee.line,m,d);ie.style("stroke-width",fe+"px");var ye=oe.mcc;if(!T._inHover&&"mc"in oe){var ce=a(ee),me=ce.mid;me===void 0&&(me=(ce.max+ce.min)/2),ye=t.tryColorscale(ee,"")(me)}var xe=ye||oe.mc||ee.color,ke=ee.pattern,Ae=ke&&t.getPatternAttr(ke.shape,0,"");if(Ae){var Oe=t.getPatternAttr(ke.bgcolor,0,null),He=t.getPatternAttr(ke.fgcolor,0,null),Ge=ke.fgopacity,_e=A(ke.size,8,10),Ie=A(ke.solidity,.5,1),We="legend-"+Y.uid;ie.call(t.pattern,"legend",w,We,Ae,_e,Ie,ye,ke.fillmode,Oe,He,Ge)}else ie.call(n.fill,xe);fe&&n.stroke(ie,oe.mlc||$.color)})}function j(ue){var se=ue[0].trace,G=l.select(this).select("g.legendpoints").selectAll("path.legendbox").data(se.visible&&o.traceIs(se,"box-violin")?[ue]:[]);G.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),G.exit().remove(),G.each(function(){var Y=l.select(this);if((se.boxpoints==="all"||se.points==="all")&&n.opacity(se.fillcolor)===0&&n.opacity((se.line||{}).color)===0){var ee=c.minExtend(se,{marker:{size:v?s:c.constrain(se.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});G.call(t.pointStyle,ee,w)}else{var $=D(void 0,se.line,m,d);Y.style("stroke-width",$+"px").call(n.fill,se.fillcolor),$&&n.stroke(Y,se.line.color)}})}function Z(ue){var se=ue[0].trace,G=l.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(se.visible&&se.type==="candlestick"?[ue,ue]:[]);G.enter().append("path").classed("legendcandle",!0).attr("d",function(Y,ee){return ee?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",E).style("stroke-miterlimit",1),G.exit().remove(),G.each(function(Y,ee){var $=l.select(this),K=se[ee?"increasing":"decreasing"],Q=D(void 0,K.line,m,d);$.style("stroke-width",Q+"px").call(n.fill,K.fillcolor),Q&&n.stroke($,K.line.color)})}function te(ue){var se=ue[0].trace,G=l.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(se.visible&&se.type==="ohlc"?[ue,ue]:[]);G.enter().append("path").classed("legendohlc",!0).attr("d",function(Y,ee){return ee?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",E).style("stroke-miterlimit",1),G.exit().remove(),G.each(function(Y,ee){var $=l.select(this),K=se[ee?"increasing":"decreasing"],Q=D(void 0,K.line,m,d);$.style("fill","none").call(t.dashLine,K.line.dash,Q),Q&&n.stroke($,K.line.color)})}function re(ue){J(ue,this,"pie")}function W(ue){J(ue,this,"funnelarea")}function J(ue,se,G){var Y=ue[0],ee=Y.trace,$=G?ee.visible&&ee.type===G:o.traceIs(ee,G),K=l.select(se).select("g.legendpoints").selectAll("path.legend"+G).data($?[ue]:[]);if(K.enter().append("path").classed("legend"+G,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),K.exit().remove(),K.size()){var Q=(ee.marker||{}).line,ae=D(f(Q.width,Y.pts),Q,m,d),ie=c.minExtend(ee,{marker:{line:{width:ae}}});ie.marker.line.color=Q.color;var oe=c.minExtend(Y,{trace:ie});r(K,oe,ie)}}function le(ue){var se=ue[0].trace,G,Y=[];if(se.visible)switch(se.type){case"histogram2d":case"heatmap":Y=[["M-15,-2V4H15V-2Z"]],G=!0;break;case"choropleth":case"choroplethmapbox":Y=[["M-6,-6V6H6V-6Z"]],G=!0;break;case"densitymapbox":Y=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],G="radial";break;case"cone":Y=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],G=!1;break;case"streamtube":Y=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],G=!1;break;case"surface":Y=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],G=!0;break;case"mesh3d":Y=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],G=!1;break;case"volume":Y=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],G=!0;break;case"isosurface":Y=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],G=!1;break}var ee=l.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(Y);ee.enter().append("path").classed("legend3dandfriends",!0).attr("transform",E).style("stroke-miterlimit",1),ee.exit().remove(),ee.each(function($,K){var Q=l.select(this),ae=a(se),ie=ae.colorscale,oe=ae.reversescale,fe=function(xe){if(xe.size()){var ke="legendfill-"+se.uid;t.gradient(xe,w,ke,g(oe,G==="radial"),ie,"fill")}},ye;if(ie){if(!G){var me=ie.length;ye=K===0?ie[oe?me-1:0][1]:K===1?ie[oe?0:me-1][1]:ie[Math.floor((me-1)/2)][1]}}else{var ce=se.vertexcolor||se.facecolor||se.color;ye=c.isArrayOrTypedArray(ce)?ce[K]||ce[0]:ce}Q.attr("d",$[0]),ye?Q.call(n.fill,ye):Q.call(fe)})}};function g(b,S){var w=S?"radial":"horizontal";return w+(b?"":"reversed")}function x(b){var S=b[0].trace,w=S.contours,T=i.hasLines(S),_=i.hasMarkers(S),v=S.visible&&S.fill&&S.fill!=="none",P=!1,M=!1;if(w){var E=w.coloring;E==="lines"?P=!0:T=E==="none"||E==="heatmap"||w.showlines,w.type==="constraint"?v=w._operation!=="=":(E==="fill"||E==="heatmap")&&(M=!0)}return{showMarker:_,showLine:T,showFill:v,showGradientLine:P,showGradientFill:M,anyLine:T||P,anyFill:v||M}}function A(b,S,w){return b&&c.isArrayOrTypedArray(b)?S:b>w?w:b}},{"../../lib":503,"../../registry":638,"../../traces/pie/helpers":905,"../../traces/pie/style_one":911,"../../traces/scatter/subtypes":951,"../color":366,"../colorscale/helpers":377,"../drawing":388,"./constants":417,"@plotly/d3":58}],425:[function(e,k,z){e("./constants"),k.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":427}],426:[function(e,k,z){var l=e("../../registry"),o=e("../../plots/plots"),c=e("../../plots/cartesian/axis_ids"),p=e("../../fonts/ploticon"),t=e("../shapes/draw").eraseActiveShape,n=e("../../lib"),a=n._,i=k.exports={};i.toImage={name:"toImage",title:function(b){var S=b._context.toImageButtonOptions||{},w=S.format||"png";return w==="png"?a(b,"Download plot as a png"):a(b,"Download plot")},icon:p.camera,click:function(b){var S=b._context.toImageButtonOptions,w={format:S.format||"png"};n.notifier(a(b,"Taking snapshot - this may take a few seconds"),"long"),w.format!=="svg"&&n.isIE()&&(n.notifier(a(b,"IE only supports svg.  Changing format to svg."),"long"),w.format="svg"),["filename","width","height","scale"].forEach(function(T){T in S&&(w[T]=S[T])}),l.call("downloadImage",b,w).then(function(T){n.notifier(a(b,"Snapshot succeeded")+" - "+T,"long")}).catch(function(){n.notifier(a(b,"Sorry, there was a problem downloading your snapshot!"),"long")})}},i.sendDataToCloud={name:"sendDataToCloud",title:function(b){return a(b,"Edit in Chart Studio")},icon:p.disk,click:function(b){o.sendDataToCloud(b)}},i.editInChartStudio={name:"editInChartStudio",title:function(b){return a(b,"Edit in Chart Studio")},icon:p.pencil,click:function(b){o.sendDataToCloud(b)}},i.zoom2d={name:"zoom2d",_cat:"zoom",title:function(b){return a(b,"Zoom")},attr:"dragmode",val:"zoom",icon:p.zoombox,click:r},i.pan2d={name:"pan2d",_cat:"pan",title:function(b){return a(b,"Pan")},attr:"dragmode",val:"pan",icon:p.pan,click:r},i.select2d={name:"select2d",_cat:"select",title:function(b){return a(b,"Box Select")},attr:"dragmode",val:"select",icon:p.selectbox,click:r},i.lasso2d={name:"lasso2d",_cat:"lasso",title:function(b){return a(b,"Lasso Select")},attr:"dragmode",val:"lasso",icon:p.lasso,click:r},i.drawclosedpath={name:"drawclosedpath",title:function(b){return a(b,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:p.drawclosedpath,click:r},i.drawopenpath={name:"drawopenpath",title:function(b){return a(b,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:p.drawopenpath,click:r},i.drawline={name:"drawline",title:function(b){return a(b,"Draw line")},attr:"dragmode",val:"drawline",icon:p.drawline,click:r},i.drawrect={name:"drawrect",title:function(b){return a(b,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:p.drawrect,click:r},i.drawcircle={name:"drawcircle",title:function(b){return a(b,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:p.drawcircle,click:r},i.eraseshape={name:"eraseshape",title:function(b){return a(b,"Erase active shape")},icon:p.eraseshape,click:t},i.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(b){return a(b,"Zoom in")},attr:"zoom",val:"in",icon:p.zoom_plus,click:r},i.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(b){return a(b,"Zoom out")},attr:"zoom",val:"out",icon:p.zoom_minus,click:r},i.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(b){return a(b,"Autoscale")},attr:"zoom",val:"auto",icon:p.autoscale,click:r},i.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(b){return a(b,"Reset axes")},attr:"zoom",val:"reset",icon:p.home,click:r},i.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(b){return a(b,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:p.tooltip_basic,gravity:"ne",click:r},i.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(b){return a(b,"Compare data on hover")},attr:"hovermode",val:function(b){return b._fullLayout._isHoriz?"y":"x"},icon:p.tooltip_compare,gravity:"ne",click:r};function r(b,S){var w=S.currentTarget,T=w.getAttribute("data-attr"),_=w.getAttribute("data-val")||!0,v=b._fullLayout,P={},M=c.list(b,null,!0),E=v._cartesianSpikesEnabled,D,N;if(T==="zoom"){var O=_==="in"?.5:2,I=(1+O)/2,F=(1-O)/2,V;for(N=0;N<M.length;N++)if(D=M[N],!D.fixedrange)if(V=D._name,_==="auto")P[V+".autorange"]=!0;else if(_==="reset"){if(D._rangeInitial===void 0)P[V+".autorange"]=!0;else{var U=D._rangeInitial.slice();P[V+".range[0]"]=U[0],P[V+".range[1]"]=U[1]}D._showSpikeInitial!==void 0&&(P[V+".showspikes"]=D._showSpikeInitial,E==="on"&&!D._showSpikeInitial&&(E="off"))}else{var j=[D.r2l(D.range[0]),D.r2l(D.range[1])],Z=[I*j[0]+F*j[1],I*j[1]+F*j[0]];P[V+".range[0]"]=D.l2r(Z[0]),P[V+".range[1]"]=D.l2r(Z[1])}}else T==="hovermode"&&(_==="x"||_==="y")&&(_=v._isHoriz?"y":"x",w.setAttribute("data-val",_)),P[T]=_;v._cartesianSpikesEnabled=E,l.call("_guiRelayout",b,P)}i.zoom3d={name:"zoom3d",_cat:"zoom",title:function(b){return a(b,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:p.zoombox,click:f},i.pan3d={name:"pan3d",_cat:"pan",title:function(b){return a(b,"Pan")},attr:"scene.dragmode",val:"pan",icon:p.pan,click:f},i.orbitRotation={name:"orbitRotation",title:function(b){return a(b,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:p["3d_rotate"],click:f},i.tableRotation={name:"tableRotation",title:function(b){return a(b,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:p["z-axis"],click:f};function f(b,S){for(var w=S.currentTarget,T=w.getAttribute("data-attr"),_=w.getAttribute("data-val")||!0,v=b._fullLayout._subplots.gl3d||[],P={},M=T.split("."),E=0;E<v.length;E++)P[v[E]+"."+M[1]]=_;var D=_==="pan"?_:"zoom";P.dragmode=D,l.call("_guiRelayout",b,P)}i.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(b){return a(b,"Reset camera to default")},attr:"resetDefault",icon:p.home,click:u},i.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(b){return a(b,"Reset camera to last save")},attr:"resetLastSave",icon:p.movie,click:u};function u(b,S){for(var w=S.currentTarget,T=w.getAttribute("data-attr"),_=T==="resetLastSave",v=T==="resetDefault",P=b._fullLayout,M=P._subplots.gl3d||[],E={},D=0;D<M.length;D++){var N=M[D],O=N+".camera",I=N+".aspectratio",F=N+".aspectmode",V=P[N]._scene,U;_?(E[O+".up"]=V.viewInitial.up,E[O+".eye"]=V.viewInitial.eye,E[O+".center"]=V.viewInitial.center,U=!0):v&&(E[O+".up"]=null,E[O+".eye"]=null,E[O+".center"]=null,U=!0),U&&(E[I+".x"]=V.viewInitial.aspectratio.x,E[I+".y"]=V.viewInitial.aspectratio.y,E[I+".z"]=V.viewInitial.aspectratio.z,E[F]=V.viewInitial.aspectmode)}l.call("_guiRelayout",b,E)}i.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(b){return a(b,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:p.tooltip_basic,gravity:"ne",click:h};function s(b,S){var w=S.currentTarget,T=w._previousVal,_=b._fullLayout,v=_._subplots.gl3d||[],P=["xaxis","yaxis","zaxis"],M={},E={};if(T)E=T,w._previousVal=null;else{for(var D=0;D<v.length;D++){var N=v[D],O=_[N],I=N+".hovermode";M[I]=O.hovermode,E[I]=!1;for(var F=0;F<3;F++){var V=P[F],U=N+"."+V+".showspikes";E[U]=!1,M[U]=O[V].showspikes}}w._previousVal=M}return E}function h(b,S){var w=s(b,S);l.call("_guiRelayout",b,w)}i.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(b){return a(b,"Zoom in")},attr:"zoom",val:"in",icon:p.zoom_plus,click:d},i.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(b){return a(b,"Zoom out")},attr:"zoom",val:"out",icon:p.zoom_minus,click:d},i.resetGeo={name:"resetGeo",_cat:"reset",title:function(b){return a(b,"Reset")},attr:"reset",val:null,icon:p.autoscale,click:d},i.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(b){return a(b,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:p.tooltip_basic,gravity:"ne",click:m};function d(b,S){for(var w=S.currentTarget,T=w.getAttribute("data-attr"),_=w.getAttribute("data-val")||!0,v=b._fullLayout,P=v._subplots.geo||[],M=0;M<P.length;M++){var E=P[M],D=v[E];if(T==="zoom"){var N=D.projection.scale,O=_==="in"?2*N:.5*N;l.call("_guiRelayout",b,E+".projection.scale",O)}}T==="reset"&&A(b,"geo")}i.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(b){return a(b,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:p.tooltip_basic,gravity:"ne",click:m},i.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(b){return a(b,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:p.tooltip_basic,gravity:"ne",click:m};function y(b){var S=b._fullLayout;return S.hovermode?!1:S._has("cartesian")?S._isHoriz?"y":"x":"closest"}function m(b){var S=y(b);l.call("_guiRelayout",b,"hovermode",S)}i.resetViewSankey={name:"resetSankeyGroup",title:function(b){return a(b,"Reset view")},icon:p.home,click:function(b){for(var S={"node.groups":[],"node.x":[],"node.y":[]},w=0;w<b._fullData.length;w++){var T=b._fullData[w]._viewInitial;S["node.groups"].push(T.node.groups.slice()),S["node.x"].push(T.node.x.slice()),S["node.y"].push(T.node.y.slice())}l.call("restyle",b,S)}},i.toggleHover={name:"toggleHover",title:function(b){return a(b,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:p.tooltip_basic,gravity:"ne",click:function(b,S){var w=s(b,S);w.hovermode=y(b),l.call("_guiRelayout",b,w)}},i.resetViews={name:"resetViews",title:function(b){return a(b,"Reset views")},icon:p.home,click:function(b,S){var w=S.currentTarget;w.setAttribute("data-attr","zoom"),w.setAttribute("data-val","reset"),r(b,S),w.setAttribute("data-attr","resetLastSave"),u(b,S),A(b,"geo"),A(b,"mapbox")}},i.toggleSpikelines={name:"toggleSpikelines",title:function(b){return a(b,"Toggle Spike Lines")},icon:p.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(b){var S=b._fullLayout,w=S._cartesianSpikesEnabled;S._cartesianSpikesEnabled=w==="on"?"off":"on",l.call("_guiRelayout",b,g(b))}};function g(b){for(var S=b._fullLayout,w=S._cartesianSpikesEnabled==="on",T=c.list(b,null,!0),_={},v=0;v<T.length;v++){var P=T[v];_[P._name+".showspikes"]=w?!0:P._showSpikeInitial}return _}i.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(b){return a(b,"Reset view")},attr:"reset",icon:p.home,click:function(b){A(b,"mapbox")}},i.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(b){return a(b,"Zoom in")},attr:"zoom",val:"in",icon:p.zoom_plus,click:x},i.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(b){return a(b,"Zoom out")},attr:"zoom",val:"out",icon:p.zoom_minus,click:x};function x(b,S){for(var w=S.currentTarget,T=w.getAttribute("data-val"),_=b._fullLayout,v=_._subplots.mapbox||[],P=1.05,M={},E=0;E<v.length;E++){var D=v[E],N=_[D].zoom,O=T==="in"?P*N:N/P;M[D+".zoom"]=O}l.call("_guiRelayout",b,M)}function A(b,S){for(var w=b._fullLayout,T=w._subplots[S]||[],_={},v=0;v<T.length;v++)for(var P=T[v],M=w[P]._subplot,E=M.viewInitial,D=Object.keys(E),N=0;N<D.length;N++){var O=D[N];_[P+"."+O]=E[O]}l.call("_guiRelayout",b,_)}},{"../../fonts/ploticon":482,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../shapes/draw":450}],427:[function(e,k,z){var l=e("./buttons"),o=Object.keys(l),c=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],p=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(c),t=[],n=function(a){if(p.indexOf(a._cat||a.name)===-1){var i=a.name,r=(a._cat||a.name).toLowerCase();t.indexOf(i)===-1&&t.push(i),t.indexOf(r)===-1&&t.push(r)}};o.forEach(function(a){n(l[a])}),t.sort(),k.exports={DRAW_MODES:c,backButtons:p,foreButtons:t}},{"./buttons":426}],428:[function(e,k,z){var l=e("../../lib"),o=e("../color"),c=e("../../plot_api/plot_template"),p=e("./attributes");k.exports=function(n,a){var i=n.modebar||{},r=c.newContainer(a,"modebar");function f(s,h){return l.coerce(i,r,p,s,h)}f("orientation"),f("bgcolor",o.addOpacity(a.paper_bgcolor,.5));var u=o.contrast(o.rgb(a.modebar.bgcolor));f("color",o.addOpacity(u,.3)),f("activecolor",o.addOpacity(u,.7)),f("uirevision",a.uirevision),f("add"),f("remove")}},{"../../lib":503,"../../plot_api/plot_template":543,"../color":366,"./attributes":425}],429:[function(e,k,z){k.exports={moduleType:"component",name:"modebar",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),manage:e("./manage")}},{"./attributes":425,"./defaults":428,"./manage":430}],430:[function(e,k,z){var l=e("../../plots/cartesian/axis_ids"),o=e("../../traces/scatter/subtypes"),c=e("../../registry"),p=e("../fx/helpers").isUnifiedHover,t=e("./modebar"),n=e("./buttons"),a=e("./constants").DRAW_MODES;k.exports=function(y){var m=y._fullLayout,g=y._context,x=m._modeBar;if(!g.displayModeBar&&!g.watermark){x&&(x.destroy(),delete m._modeBar);return}if(!Array.isArray(g.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(g.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var A=g.modeBarButtons,b;Array.isArray(A)&&A.length?b=h(A):!g.displayModeBar&&g.watermark?b=[]:b=i(y),x?x.update(y,b):m._modeBar=t(y,b)};function i(d){var y=d._fullLayout,m=d._fullData,g=d._context;function x($,K){if(typeof K=="string"){if(K.toLowerCase()===$.toLowerCase())return!0}else{var Q=K.name,ae=K._cat||K.name;if(Q===$||ae===$.toLowerCase())return!0}return!1}var A=y.modebar.add;typeof A=="string"&&(A=[A]);var b=y.modebar.remove;typeof b=="string"&&(b=[b]);var S=g.modeBarButtonsToAdd.concat(A.filter(function($){for(var K=0;K<g.modeBarButtonsToRemove.length;K++)if(x($,g.modeBarButtonsToRemove[K]))return!1;return!0})),w=g.modeBarButtonsToRemove.concat(b.filter(function($){for(var K=0;K<g.modeBarButtonsToAdd.length;K++)if(x($,g.modeBarButtonsToAdd[K]))return!1;return!0})),T=y._has("cartesian"),_=y._has("gl3d"),v=y._has("geo"),P=y._has("pie"),M=y._has("funnelarea"),E=y._has("gl2d"),D=y._has("ternary"),N=y._has("mapbox"),O=y._has("polar"),I=y._has("smith"),F=y._has("sankey"),V=r(y),U=p(y.hovermode),j=[];function Z($){if(!!$.length){for(var K=[],Q=0;Q<$.length;Q++){for(var ae=$[Q],ie=n[ae],oe=ie.name.toLowerCase(),fe=(ie._cat||ie.name).toLowerCase(),ye=!1,ce=0;ce<w.length;ce++){var me=w[ce].toLowerCase();if(me===oe||me===fe){ye=!0;break}}ye||K.push(n[ae])}j.push(K)}}var te=["toImage"];g.showEditInChartStudio?te.push("editInChartStudio"):g.showSendToCloud&&te.push("sendDataToCloud"),Z(te);var re=[],W=[],J=[],le=[];(T||E||P||M||D)+v+_+N+O+I>1?(W=["toggleHover"],J=["resetViews"]):v?(re=["zoomInGeo","zoomOutGeo"],W=["hoverClosestGeo"],J=["resetGeo"]):_?(W=["hoverClosest3d"],J=["resetCameraDefault3d","resetCameraLastSave3d"]):N?(re=["zoomInMapbox","zoomOutMapbox"],W=["toggleHover"],J=["resetViewMapbox"]):E?W=["hoverClosestGl2d"]:P?W=["hoverClosestPie"]:F?(W=["hoverClosestCartesian","hoverCompareCartesian"],J=["resetViewSankey"]):W=["toggleHover"],T&&(W=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(u(m)||U)&&(W=[]),(T||E)&&!V&&(re=["zoomIn2d","zoomOut2d","autoScale2d"],J[0]!=="resetViews"&&(J=["resetScale2d"])),_?le=["zoom3d","pan3d","orbitRotation","tableRotation"]:(T||E)&&!V||D?le=["zoom2d","pan2d"]:N||v?le=["pan2d"]:O&&(le=["zoom2d"]),f(m)&&le.push("select2d","lasso2d");var ue=[],se=function($){ue.indexOf($)===-1&&W.indexOf($)!==-1&&ue.push($)};if(Array.isArray(S)){for(var G=[],Y=0;Y<S.length;Y++){var ee=S[Y];typeof ee=="string"?(ee=ee.toLowerCase(),a.indexOf(ee)!==-1?(y._has("mapbox")||y._has("cartesian"))&&le.push(ee):ee==="togglespikelines"?se("toggleSpikelines"):ee==="togglehover"?se("toggleHover"):ee==="hovercompare"?se("hoverCompareCartesian"):ee==="hoverclosest"?(se("hoverClosestCartesian"),se("hoverClosestGeo"),se("hoverClosest3d"),se("hoverClosestGl2d"),se("hoverClosestPie")):ee==="v1hovermode"&&(se("toggleHover"),se("hoverClosestCartesian"),se("hoverCompareCartesian"),se("hoverClosestGeo"),se("hoverClosest3d"),se("hoverClosestGl2d"),se("hoverClosestPie"))):G.push(ee)}S=G}return Z(le),Z(re.concat(J)),Z(ue),s(j,S)}function r(d){for(var y=l.list({_fullLayout:d},null,!0),m=0;m<y.length;m++)if(!y[m].fixedrange)return!1;return!0}function f(d){for(var y=!1,m=0;m<d.length&&!y;m++){var g=d[m];!g._module||!g._module.selectPoints||(c.traceIs(g,"scatter-like")?(o.hasMarkers(g)||o.hasText(g))&&(y=!0):c.traceIs(g,"box-violin")?(g.boxpoints==="all"||g.points==="all")&&(y=!0):y=!0)}return y}function u(d){for(var y=0;y<d.length;y++)if(!c.traceIs(d[y],"noHover"))return!1;return!0}function s(d,y){if(y.length)if(Array.isArray(y[0]))for(var m=0;m<y.length;m++)d.push(y[m]);else d.push(y);return d}function h(d){for(var y=0;y<d.length;y++)for(var m=d[y],g=0;g<m.length;g++){var x=m[g];if(typeof x=="string")if(n[x]!==void 0)d[y][g]=n[x];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return d}},{"../../plots/cartesian/axis_ids":558,"../../registry":638,"../../traces/scatter/subtypes":951,"../fx/helpers":402,"./buttons":426,"./constants":427,"./modebar":431}],431:[function(e,k,z){var l=e("@plotly/d3"),o=e("fast-isnumeric"),c=e("../../lib"),p=e("../../fonts/ploticon"),t=new DOMParser;function n(r){this.container=r.container,this.element=document.createElement("div"),this.update(r.graphInfo,r.buttons),this.container.appendChild(this.element)}var a=n.prototype;a.update=function(r,f){this.graphInfo=r;var u=this.graphInfo._context,s=this.graphInfo._fullLayout,h="modebar-"+s._uid;this.element.setAttribute("id",h),this._uid=h,this.element.className="modebar",u.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),s.modebar.orientation==="v"&&(this.element.className+=" vertical",f=f.reverse());var d=s.modebar,y=u.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";c.deleteRelatedStyleRule(h),c.addRelatedStyleRule(h,y+"#"+h+" .modebar-group","background-color: "+d.bgcolor),c.addRelatedStyleRule(h,"#"+h+" .modebar-btn .icon path","fill: "+d.color),c.addRelatedStyleRule(h,"#"+h+" .modebar-btn:hover .icon path","fill: "+d.activecolor),c.addRelatedStyleRule(h,"#"+h+" .modebar-btn.active .icon path","fill: "+d.activecolor);var m=!this.hasButtons(f),g=this.hasLogo!==u.displaylogo,x=this.locale!==u.locale;if(this.locale=u.locale,(m||g||x)&&(this.removeAllButtons(),this.updateButtons(f),u.watermark||u.displaylogo)){var A=this.getLogo();u.watermark&&(A.className=A.className+" watermark"),s.modebar.orientation==="v"?this.element.insertBefore(A,this.element.childNodes[0]):this.element.appendChild(A),this.hasLogo=!0}this.updateActiveButton()},a.updateButtons=function(r){var f=this;this.buttons=r,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(u){var s=f.createGroup();u.forEach(function(h){var d=h.name;if(!d)throw new Error("must provide button 'name' in button config");if(f.buttonsNames.indexOf(d)!==-1)throw new Error("button name '"+d+"' is taken");f.buttonsNames.push(d);var y=f.createButton(h);f.buttonElements.push(y),s.appendChild(y)}),f.element.appendChild(s)})},a.createGroup=function(){var r=document.createElement("div");return r.className="modebar-group",r},a.createButton=function(r){var f=this,u=document.createElement("a");u.setAttribute("rel","tooltip"),u.className="modebar-btn";var s=r.title;s===void 0?s=r.name:typeof s=="function"&&(s=s(this.graphInfo)),(s||s===0)&&u.setAttribute("data-title",s),r.attr!==void 0&&u.setAttribute("data-attr",r.attr);var h=r.val;h!==void 0&&(typeof h=="function"&&(h=h(this.graphInfo)),u.setAttribute("data-val",h));var d=r.click;if(typeof d!="function")throw new Error("must provide button 'click' function in button config");u.addEventListener("click",function(m){r.click(f.graphInfo,m),f.updateActiveButton(m.currentTarget)}),u.setAttribute("data-toggle",r.toggle||!1),r.toggle&&l.select(u).classed("active",!0);var y=r.icon;return typeof y=="function"?u.appendChild(y()):u.appendChild(this.createIcon(y||p.question)),u.setAttribute("data-gravity",r.gravity||"n"),u},a.createIcon=function(r){var f=o(r.height)?Number(r.height):r.ascent-r.descent,u="http://www.w3.org/2000/svg",s;if(r.path){s=document.createElementNS(u,"svg"),s.setAttribute("viewBox",[0,0,r.width,f].join(" ")),s.setAttribute("class","icon");var h=document.createElementNS(u,"path");h.setAttribute("d",r.path),r.transform?h.setAttribute("transform",r.transform):r.ascent!==void 0&&h.setAttribute("transform","matrix(1 0 0 -1 0 "+r.ascent+")"),s.appendChild(h)}if(r.svg){var d=t.parseFromString(r.svg,"application/xml");s=d.childNodes[0]}return s.setAttribute("height","1em"),s.setAttribute("width","1em"),s},a.updateActiveButton=function(r){var f=this.graphInfo._fullLayout,u=r!==void 0?r.getAttribute("data-attr"):null;this.buttonElements.forEach(function(s){var h=s.getAttribute("data-val")||!0,d=s.getAttribute("data-attr"),y=s.getAttribute("data-toggle")==="true",m=l.select(s);if(y)d===u&&m.classed("active",!m.classed("active"));else{var g=d===null?d:c.nestedProperty(f,d).get();m.classed("active",g===h)}})},a.hasButtons=function(r){var f=this.buttons;if(!f||r.length!==f.length)return!1;for(var u=0;u<r.length;++u){if(r[u].length!==f[u].length)return!1;for(var s=0;s<r[u].length;s++)if(r[u][s].name!==f[u][s].name)return!1}return!0},a.getLogo=function(){var r=this.createGroup(),f=document.createElement("a");return f.href="https://plotly.com/",f.target="_blank",f.setAttribute("data-title",c._(this.graphInfo,"Produced with Plotly")),f.className="modebar-btn plotlyjsicon modebar-btn--logo",f.appendChild(this.createIcon(p.newplotlylogo)),r.appendChild(f),r},a.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},a.destroy=function(){c.removeElement(this.container.querySelector(".modebar")),c.deleteRelatedStyleRule(this._uid)};function i(r,f){var u=r._fullLayout,s=new n({graphInfo:r,container:u._modebardiv.node(),buttons:f});return u._privateplot&&l.select(s.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),s}k.exports=i},{"../../fonts/ploticon":482,"../../lib":503,"@plotly/d3":58,"fast-isnumeric":190}],432:[function(e,k,z){var l=e("../../plots/font_attributes"),o=e("../color/attributes"),c=e("../../plot_api/plot_template").templatedArray,p=c("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});k.exports={visible:{valType:"boolean",editType:"plot"},buttons:p,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:l({editType:"plot"}),bgcolor:{valType:"color",dflt:o.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:o.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../color/attributes":365}],433:[function(e,k,z){k.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],434:[function(e,k,z){var l=e("../../lib"),o=e("../color"),c=e("../../plot_api/plot_template"),p=e("../../plots/array_container_defaults"),t=e("./attributes"),n=e("./constants");k.exports=function(f,u,s,h,d){var y=f.rangeselector||{},m=c.newContainer(u,"rangeselector");function g(w,T){return l.coerce(y,m,t,w,T)}var x=p(y,m,{name:"buttons",handleItemDefaults:a,calendar:d}),A=g("visible",x.length>0);if(A){var b=i(u,s,h);g("x",b[0]),g("y",b[1]),l.noneOrAll(f,u,["x","y"]),g("xanchor"),g("yanchor"),l.coerceFont(g,"font",s.font);var S=g("bgcolor");g("activecolor",o.contrast(S,n.lightAmount,n.darkAmount)),g("bordercolor"),g("borderwidth")}};function a(r,f,u,s){var h=s.calendar;function d(g,x){return l.coerce(r,f,t.buttons,g,x)}var y=d("visible");if(y){var m=d("step");m!=="all"&&(h&&h!=="gregorian"&&(m==="month"||m==="year")?f.stepmode="backward":d("stepmode"),d("count")),d("label")}}function i(r,f,u){for(var s=u.filter(function(m){return f[m].anchor===r._id}),h=0,d=0;d<s.length;d++){var y=f[s[d]].domain;y&&(h=Math.max(y[1],h))}return[r.domain[0],h+n.yPad]}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../color":366,"./attributes":432,"./constants":433}],435:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../registry"),c=e("../../plots/plots"),p=e("../color"),t=e("../drawing"),n=e("../../lib"),a=n.strTranslate,i=e("../../lib/svg_text_utils"),r=e("../../plots/cartesian/axis_ids"),f=e("../../constants/alignment"),u=f.LINE_SPACING,s=f.FROM_TL,h=f.FROM_BR,d=e("./constants"),y=e("./get_update_object");k.exports=function(v){var P=v._fullLayout,M=P._infolayer.selectAll(".rangeselector").data(m(v),g);M.enter().append("g").classed("rangeselector",!0),M.exit().remove(),M.style({cursor:"pointer","pointer-events":"all"}),M.each(function(E){var D=l.select(this),N=E,O=N.rangeselector,I=D.selectAll("g.button").data(n.filterVisible(O.buttons));I.enter().append("g").classed("button",!0),I.exit().remove(),I.each(function(F){var V=l.select(this),U=y(N,F);F._isActive=x(N,F,U),V.call(A,O,F),V.call(S,O,F,v),V.on("click",function(){v._dragged||o.call("_guiRelayout",v,U)}),V.on("mouseover",function(){F._isHovered=!0,V.call(A,O,F)}),V.on("mouseout",function(){F._isHovered=!1,V.call(A,O,F)})}),T(v,I,O,N._name,D)})};function m(_){for(var v=r.list(_,"x",!0),P=[],M=0;M<v.length;M++){var E=v[M];E.rangeselector&&E.rangeselector.visible&&P.push(E)}return P}function g(_){return _._id}function x(_,v,P){if(v.step==="all")return _.autorange===!0;var M=Object.keys(P);return _.range[0]===P[M[0]]&&_.range[1]===P[M[1]]}function A(_,v,P){var M=n.ensureSingle(_,"rect","selector-rect",function(E){E.attr("shape-rendering","crispEdges")});M.attr({rx:d.rx,ry:d.ry}),M.call(p.stroke,v.bordercolor).call(p.fill,b(v,P)).style("stroke-width",v.borderwidth+"px")}function b(_,v){return v._isActive||v._isHovered?_.activecolor:_.bgcolor}function S(_,v,P,M){function E(N){i.convertToTspans(N,M)}var D=n.ensureSingle(_,"text","selector-text",function(N){N.attr("text-anchor","middle")});D.call(t.font,v.font).text(w(P,M._fullLayout._meta)).call(E)}function w(_,v){return _.label?v?n.templateString(_.label,v):_.label:_.step==="all"?"all":_.count+_.step.charAt(0)}function T(_,v,P,M,E){var D=0,N=0,O=P.borderwidth;v.each(function(){var Z=l.select(this),te=Z.select(".selector-text"),re=P.font.size*u,W=Math.max(re*i.lineCount(te),16)+3;N=Math.max(N,W)}),v.each(function(){var Z=l.select(this),te=Z.select(".selector-rect"),re=Z.select(".selector-text"),W=re.node()&&t.bBox(re.node()).width,J=P.font.size*u,le=i.lineCount(re),ue=Math.max(W+10,d.minButtonWidth);Z.attr("transform",a(O+D,O)),te.attr({x:0,y:0,width:ue,height:N}),i.positionText(re,ue/2,N/2-(le-1)*J/2+3),D+=ue+5});var I=_._fullLayout._size,F=I.l+I.w*P.x,V=I.t+I.h*(1-P.y),U="left";n.isRightAnchor(P)&&(F-=D,U="right"),n.isCenterAnchor(P)&&(F-=D/2,U="center");var j="top";n.isBottomAnchor(P)&&(V-=N,j="bottom"),n.isMiddleAnchor(P)&&(V-=N/2,j="middle"),D=Math.ceil(D),N=Math.ceil(N),F=Math.round(F),V=Math.round(V),c.autoMargin(_,M+"-range-selector",{x:P.x,y:P.y,l:D*s[U],r:D*h[U],b:N*h[j],t:N*s[j]}),E.attr("transform",a(F,V))}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"./constants":433,"./get_update_object":436,"@plotly/d3":58}],436:[function(e,k,z){var l=e("d3-time"),o=e("../../lib").titleCase;k.exports=function(t,n){var a=t._name,i={};if(n.step==="all")i[a+".autorange"]=!0;else{var r=c(t,n);i[a+".range[0]"]=r[0],i[a+".range[1]"]=r[1]}return i};function c(p,t){var n=p.range,a=new Date(p.r2l(n[1])),i=t.step,r=l["utc"+o(i)],f=t.count,u;switch(t.stepmode){case"backward":u=p.l2r(+r.offset(a,-f));break;case"todate":var s=r.offset(a,-f);u=p.l2r(+r.ceil(s));break}var h=n[1];return[u,h]}},{"../../lib":503,"d3-time":122}],437:[function(e,k,z){k.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":432,"./defaults":434,"./draw":435}],438:[function(e,k,z){var l=e("../color/attributes");k.exports={bgcolor:{valType:"color",dflt:l.background,editType:"plot"},bordercolor:{valType:"color",dflt:l.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":365}],439:[function(e,k,z){var l=e("../../plots/cartesian/axis_ids").list,o=e("../../plots/cartesian/autorange").getAutoRange,c=e("./constants");k.exports=function(t){for(var n=l(t,"x",!0),a=0;a<n.length;a++){var i=n[a],r=i[c.name];r&&r.visible&&r.autorange&&(r._input.autorange=!0,r._input.range=r.range=o(t,i))}}},{"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"./constants":440}],440:[function(e,k,z){k.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],441:[function(e,k,z){var l=e("../../lib"),o=e("../../plot_api/plot_template"),c=e("../../plots/cartesian/axis_ids"),p=e("./attributes"),t=e("./oppaxis_attributes");k.exports=function(a,i,r){var f=a[r],u=i[r];if(!(f.rangeslider||i._requestRangeslider[u._id]))return;l.isPlainObject(f.rangeslider)||(f.rangeslider={});var s=f.rangeslider,h=o.newContainer(u,"rangeslider");function d(M,E){return l.coerce(s,h,p,M,E)}var y,m;function g(M,E){return l.coerce(y,m,t,M,E)}var x=d("visible");if(!!x){d("bgcolor",i.plot_bgcolor),d("bordercolor"),d("borderwidth"),d("thickness"),d("autorange",!u.isValidRange(s.range)),d("range");var A=i._subplots;if(A)for(var b=A.cartesian.filter(function(M){return M.substr(0,M.indexOf("y"))===c.name2id(r)}).map(function(M){return M.substr(M.indexOf("y"),M.length)}),S=l.simpleMap(b,c.id2name),w=0;w<S.length;w++){var T=S[w];y=s[T]||{},m=o.newContainer(h,T,"yaxis");var _=i[T],v;y.range&&_.isValidRange(y.range)&&(v="fixed");var P=g("rangemode",v);P!=="match"&&g("range",_.range.slice())}h._input=s}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_ids":558,"./attributes":438,"./oppaxis_attributes":445}],442:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../registry"),c=e("../../plots/plots"),p=e("../../lib"),t=p.strTranslate,n=e("../drawing"),a=e("../color"),i=e("../titles"),r=e("../../plots/cartesian"),f=e("../../plots/cartesian/axis_ids"),u=e("../dragelement"),s=e("../../lib/setcursor"),h=e("./constants");k.exports=function(_){for(var v=_._fullLayout,P=v._rangeSliderData,M=0;M<P.length;M++){var E=P[M][h.name];E._clipId=E._id+"-"+v._uid}function D(O){return O._name}var N=v._infolayer.selectAll("g."+h.containerClassName).data(P,D);N.exit().each(function(O){var I=O[h.name];v._topdefs.select("#"+I._clipId).remove()}).remove(),P.length!==0&&(N.enter().append("g").classed(h.containerClassName,!0).attr("pointer-events","all"),N.each(function(O){var I=l.select(this),F=O[h.name],V=v[f.id2name(O.anchor)],U=F[f.id2name(O.anchor)];if(F.range){var j=p.simpleMap(F.range,O.r2l),Z=p.simpleMap(O.range,O.r2l),te;Z[0]<Z[1]?te=[Math.min(j[0],Z[0]),Math.max(j[1],Z[1])]:te=[Math.max(j[0],Z[0]),Math.min(j[1],Z[1])],F.range=F._input.range=p.simpleMap(te,O.l2r)}O.cleanRange("rangeslider.range");var re=v._size,W=O.domain;F._width=re.w*(W[1]-W[0]);var J=Math.round(re.l+re.w*W[0]),le=Math.round(re.t+re.h*(1-O._counterDomainMin)+(O.side==="bottom"?O._depth:0)+F._offsetShift+h.extraPad);I.attr("transform",t(J,le)),F._rl=p.simpleMap(F.range,O.r2l);var ue=F._rl[0],se=F._rl[1],G=se-ue;if(F.p2d=function(ye){return ye/F._width*G+ue},F.d2p=function(ye){return(ye-ue)/G*F._width},O.rangebreaks){var Y=O.locateBreaks(ue,se);if(Y.length){var ee,$,K=0;for(ee=0;ee<Y.length;ee++)$=Y[ee],K+=$.max-$.min;var Q=F._width/(se-ue-K),ae=[-Q*ue];for(ee=0;ee<Y.length;ee++)$=Y[ee],ae.push(ae[ae.length-1]-Q*($.max-$.min));for(F.d2p=function(ye){for(var ce=ae[0],me=0;me<Y.length;me++){var xe=Y[me];if(ye>=xe.max)ce=ae[me+1];else if(ye<xe.min)break}return ce+Q*ye},ee=0;ee<Y.length;ee++)$=Y[ee],$.pmin=F.d2p($.min),$.pmax=F.d2p($.max);F.p2d=function(ye){for(var ce=ae[0],me=0;me<Y.length;me++){var xe=Y[me];if(ye>=xe.pmax)ce=ae[me+1];else if(ye<xe.pmin)break}return(ye-ce)/Q}}}if(U.rangemode!=="match"){var ie=V.r2l(U.range[0]),oe=V.r2l(U.range[1]),fe=oe-ie;F.d2pOppAxis=function(ye){return(ye-ie)/fe*F._height}}I.call(g,_,O,F).call(x,_,O,F).call(A,_,O,F).call(S,_,O,F,U).call(w,_,O,F).call(T,_,O,F),d(I,_,O,F),m(I,_,O,F,V,U),O.side==="bottom"&&i.draw(_,O._id+"title",{propContainer:O,propName:O._name+".title",placeholder:v._dfltTitle.x,attributes:{x:O._offset+O._length/2,y:le+F._height+F._offsetShift+10+1.5*O.title.font.size,"text-anchor":"middle"}})}))};function d(_,v,P,M){if(v._context.staticPlot)return;var E=_.select("rect."+h.slideBoxClassName).node(),D=_.select("rect."+h.grabAreaMinClassName).node(),N=_.select("rect."+h.grabAreaMaxClassName).node();function O(){var I=l.event,F=I.target,V=I.clientX||I.touches[0].clientX,U=V-_.node().getBoundingClientRect().left,j=M.d2p(P._rl[0]),Z=M.d2p(P._rl[1]),te=u.coverSlip();this.addEventListener("touchmove",re),this.addEventListener("touchend",W),te.addEventListener("mousemove",re),te.addEventListener("mouseup",W);function re(J){var le=J.clientX||J.touches[0].clientX,ue=+le-V,se,G,Y;switch(F){case E:Y="ew-resize",se=j+ue,G=Z+ue;break;case D:Y="col-resize",se=j+ue,G=Z;break;case N:Y="col-resize",se=j,G=Z+ue;break;default:Y="ew-resize",se=U,G=U+ue;break}if(G<se){var ee=G;G=se,se=ee}M._pixelMin=se,M._pixelMax=G,s(l.select(te),Y),y(_,v,P,M)}function W(){te.removeEventListener("mousemove",re),te.removeEventListener("mouseup",W),this.removeEventListener("touchmove",re),this.removeEventListener("touchend",W),p.removeElement(te)}}_.on("mousedown",O),_.on("touchstart",O)}function y(_,v,P,M){function E(O){return P.l2r(p.constrain(O,M._rl[0],M._rl[1]))}var D=E(M.p2d(M._pixelMin)),N=E(M.p2d(M._pixelMax));window.requestAnimationFrame(function(){o.call("_guiRelayout",v,P._name+".range",[D,N])})}function m(_,v,P,M,E,D){var N=h.handleWidth/2;function O(J){return p.constrain(J,0,M._width)}function I(J){return p.constrain(J,0,M._height)}function F(J){return p.constrain(J,-N,M._width+N)}var V=O(M.d2p(P._rl[0])),U=O(M.d2p(P._rl[1]));if(_.select("rect."+h.slideBoxClassName).attr("x",V).attr("width",U-V),_.select("rect."+h.maskMinClassName).attr("width",V),_.select("rect."+h.maskMaxClassName).attr("x",U).attr("width",M._width-U),D.rangemode!=="match"){var j=M._height-I(M.d2pOppAxis(E._rl[1])),Z=M._height-I(M.d2pOppAxis(E._rl[0]));_.select("rect."+h.maskMinOppAxisClassName).attr("x",V).attr("height",j).attr("width",U-V),_.select("rect."+h.maskMaxOppAxisClassName).attr("x",V).attr("y",Z).attr("height",M._height-Z).attr("width",U-V),_.select("rect."+h.slideBoxClassName).attr("y",j).attr("height",Z-j)}var te=.5,re=Math.round(F(V-N))-te,W=Math.round(F(U-N))+te;_.select("g."+h.grabberMinClassName).attr("transform",t(re,te)),_.select("g."+h.grabberMaxClassName).attr("transform",t(W,te))}function g(_,v,P,M){var E=p.ensureSingle(_,"rect",h.bgClassName,function(I){I.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),D=M.borderwidth%2==0?M.borderwidth:M.borderwidth-1,N=-M._offsetShift,O=n.crispRound(v,M.borderwidth);E.attr({width:M._width+D,height:M._height+D,transform:t(N,N),fill:M.bgcolor,stroke:M.bordercolor,"stroke-width":O})}function x(_,v,P,M){var E=v._fullLayout,D=p.ensureSingleById(E._topdefs,"clipPath",M._clipId,function(N){N.append("rect").attr({x:0,y:0})});D.select("rect").attr({width:M._width,height:M._height})}function A(_,v,P,M){var E=v.calcdata,D=_.selectAll("g."+h.rangePlotClassName).data(P._subplotsWith,p.identity);D.enter().append("g").attr("class",function(O){return h.rangePlotClassName+" "+O}).call(n.setClipUrl,M._clipId,v),D.order(),D.exit().remove();var N;D.each(function(O,I){var F=l.select(this),V=I===0,U=f.getFromId(v,O,"y"),j=U._name,Z=M[j],te={data:[],layout:{xaxis:{type:P.type,domain:[0,1],range:M.range.slice(),calendar:P.calendar},width:M._width,height:M._height,margin:{t:0,b:0,l:0,r:0}},_context:v._context};P.rangebreaks&&(te.layout.xaxis.rangebreaks=P.rangebreaks),te.layout[j]={type:U.type,domain:[0,1],range:Z.rangemode!=="match"?Z.range.slice():U.range.slice(),calendar:U.calendar},U.rangebreaks&&(te.layout[j].rangebreaks=U.rangebreaks),c.supplyDefaults(te);var re=te._fullLayout.xaxis,W=te._fullLayout[j];re.clearCalc(),re.setScale(),W.clearCalc(),W.setScale();var J={id:O,plotgroup:F,xaxis:re,yaxis:W,isRangePlot:!0};V?N=J:(J.mainplot="xy",J.mainplotinfo=N),r.rangePlot(v,J,b(E,O))})}function b(_,v){for(var P=[],M=0;M<_.length;M++){var E=_[M],D=E[0].trace;D.xaxis+D.yaxis===v&&P.push(E)}return P}function S(_,v,P,M,E){var D=p.ensureSingle(_,"rect",h.maskMinClassName,function(F){F.attr({x:0,y:0,"shape-rendering":"crispEdges"})});D.attr("height",M._height).call(a.fill,h.maskColor);var N=p.ensureSingle(_,"rect",h.maskMaxClassName,function(F){F.attr({y:0,"shape-rendering":"crispEdges"})});if(N.attr("height",M._height).call(a.fill,h.maskColor),E.rangemode!=="match"){var O=p.ensureSingle(_,"rect",h.maskMinOppAxisClassName,function(F){F.attr({y:0,"shape-rendering":"crispEdges"})});O.attr("width",M._width).call(a.fill,h.maskOppAxisColor);var I=p.ensureSingle(_,"rect",h.maskMaxOppAxisClassName,function(F){F.attr({y:0,"shape-rendering":"crispEdges"})});I.attr("width",M._width).style("border-top",h.maskOppBorder).call(a.fill,h.maskOppAxisColor)}}function w(_,v,P,M){if(!v._context.staticPlot){var E=p.ensureSingle(_,"rect",h.slideBoxClassName,function(D){D.attr({y:0,cursor:h.slideBoxCursor,"shape-rendering":"crispEdges"})});E.attr({height:M._height,fill:h.slideBoxFill})}}function T(_,v,P,M){var E=p.ensureSingle(_,"g",h.grabberMinClassName),D=p.ensureSingle(_,"g",h.grabberMaxClassName),N={x:0,width:h.handleWidth,rx:h.handleRadius,fill:a.background,stroke:a.defaultLine,"stroke-width":h.handleStrokeWidth,"shape-rendering":"crispEdges"},O={y:Math.round(M._height/4),height:Math.round(M._height/2)},I=p.ensureSingle(E,"rect",h.handleMinClassName,function(Z){Z.attr(N)});I.attr(O);var F=p.ensureSingle(D,"rect",h.handleMaxClassName,function(Z){Z.attr(N)});F.attr(O);var V={width:h.grabAreaWidth,x:0,y:0,fill:h.grabAreaFill,cursor:v._context.staticPlot?void 0:h.grabAreaCursor},U=p.ensureSingle(E,"rect",h.grabAreaMinClassName,function(Z){Z.attr(V)});U.attr("height",M._height);var j=p.ensureSingle(D,"rect",h.grabAreaMaxClassName,function(Z){Z.attr(V)});j.attr("height",M._height)}},{"../../lib":503,"../../lib/setcursor":524,"../../plots/cartesian":568,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":440,"@plotly/d3":58}],443:[function(e,k,z){var l=e("../../plots/cartesian/axis_ids"),o=e("../../lib/svg_text_utils"),c=e("./constants"),p=e("../../constants/alignment").LINE_SPACING,t=c.name;function n(a){var i=a&&a[t];return i&&i.visible}z.isVisible=n,z.makeData=function(a){var i=l.list({_fullLayout:a},"x",!0),r=a.margin,f=[];if(!a._has("gl2d"))for(var u=0;u<i.length;u++){var s=i[u];if(n(s)){f.push(s);var h=s[t];h._id=t+s._id,h._height=(a.height-r.b-r.t)*h.thickness,h._offsetShift=Math.floor(h.borderwidth/2)}}a._rangeSliderData=f},z.autoMarginOpts=function(a,i){var r=a._fullLayout,f=i[t],u=i._id.charAt(0),s=0,h=0;if(i.side==="bottom"&&(s=i._depth,i.title.text!==r._dfltTitle[u])){h=1.5*i.title.font.size+10+f._offsetShift;var d=(i.title.text.match(o.BR_TAG_ALL)||[]).length;h+=d*i.title.font.size*p}return{x:0,y:i._counterDomainMin,l:0,r:0,t:0,b:f._height+s+Math.max(r.margin.b,h),pad:c.extraPad+f._offsetShift*2}}},{"../../constants/alignment":471,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"./constants":440}],444:[function(e,k,z){var l=e("../../lib"),o=e("./attributes"),c=e("./oppaxis_attributes"),p=e("./helpers");k.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:l.extendFlat({},o,{yaxis:c})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw"),isVisible:p.isVisible,makeData:p.makeData,autoMarginOpts:p.autoMarginOpts}},{"../../lib":503,"./attributes":438,"./calc_autorange":439,"./defaults":441,"./draw":442,"./helpers":443,"./oppaxis_attributes":445}],445:[function(e,k,z){k.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],446:[function(e,k,z){var l=e("../annotations/attributes"),o=e("../../traces/scatter/attributes").line,c=e("../drawing/attributes").dash,p=e("../../lib/extend").extendFlat,t=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),k.exports=t("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:p({},l.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:p({},l.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:p({},o.color,{editType:"arraydraw"}),width:p({},o.width,{editType:"calc+arraydraw"}),dash:p({},c,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":926,"../annotations/attributes":349,"../drawing/attributes":387}],447:[function(e,k,z){var l=e("../../lib"),o=e("../../plots/cartesian/axes"),c=e("./constants"),p=e("./helpers");k.exports=function(f){var u=f._fullLayout,s=l.filterVisible(u.shapes);if(!(!s.length||!f._fullData.length))for(var h=0;h<s.length;h++){var d=s[h];d._extremes={};var y,m,g=o.getRefType(d.xref),x=o.getRefType(d.yref);if(d.xref!=="paper"&&g!=="domain"){var A=d.xsizemode==="pixel"?d.xanchor:d.x0,b=d.xsizemode==="pixel"?d.xanchor:d.x1;y=o.getFromId(f,d.xref),m=i(y,A,b,d.path,c.paramIsX),m&&(d._extremes[y._id]=o.findExtremes(y,m,t(d)))}if(d.yref!=="paper"&&x!=="domain"){var S=d.ysizemode==="pixel"?d.yanchor:d.y0,w=d.ysizemode==="pixel"?d.yanchor:d.y1;y=o.getFromId(f,d.yref),m=i(y,S,w,d.path,c.paramIsY),m&&(d._extremes[y._id]=o.findExtremes(y,m,n(d)))}}};function t(r){return a(r.line.width,r.xsizemode,r.x0,r.x1,r.path,!1)}function n(r){return a(r.line.width,r.ysizemode,r.y0,r.y1,r.path,!0)}function a(r,f,u,s,h,d){var y=r/2,m=d;if(f==="pixel"){var g=h?p.extractPathCoords(h,d?c.paramIsY:c.paramIsX):[u,s],x=l.aggNums(Math.max,null,g),A=l.aggNums(Math.min,null,g),b=A<0?Math.abs(A)+y:y,S=x>0?x+y:y;return{ppad:y,ppadplus:m?b:S,ppadminus:m?S:b}}else return{ppad:y}}function i(r,f,u,s,h){var d=r.type==="category"||r.type==="multicategory"?r.r2c:r.d2c;if(f!==void 0)return[d(f),d(u)];if(!!s){var y=1/0,m=-1/0,g=s.match(c.segmentRE),x,A,b,S,w;for(r.type==="date"&&(d=p.decodeDate(d)),x=0;x<g.length;x++)A=g[x],b=h[A.charAt(0)].drawn,b!==void 0&&(S=g[x].substr(1).match(c.paramRE),!(!S||S.length<b)&&(w=d(S[b]),w<y&&(y=w),w>m&&(m=w)));if(m>=y)return[y,m]}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":448,"./helpers":457}],448:[function(e,k,z){k.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],449:[function(e,k,z){var l=e("../../lib"),o=e("../../plots/cartesian/axes"),c=e("../../plots/array_container_defaults"),p=e("./attributes"),t=e("./helpers");k.exports=function(i,r){c(i,r,{name:"shapes",handleItemDefaults:n})};function n(a,i,r){function f(j,Z){return l.coerce(a,i,p,j,Z)}var u=f("visible");if(!!u){var s=f("path"),h=s?"path":"rect",d=f("type",h);i.type!=="path"&&delete i.path,f("editable"),f("layer"),f("opacity"),f("fillcolor"),f("fillrule");var y=f("line.width");y&&(f("line.color"),f("line.dash"));for(var m=f("xsizemode"),g=f("ysizemode"),x=["x","y"],A=0;A<2;A++){var b=x[A],S=b+"anchor",w=b==="x"?m:g,T={_fullLayout:r},_,v,P,M=o.coerceRef(a,i,T,b,void 0,"paper"),E=o.getRefType(M);if(E==="range"?(_=o.getFromId(T,M),_._shapeIndices.push(i._index),P=t.rangeToShapePosition(_),v=t.shapePositionToRange(_)):v=P=l.identity,d!=="path"){var D=.25,N=.75,O=b+"0",I=b+"1",F=a[O],V=a[I];a[O]=v(a[O],!0),a[I]=v(a[I],!0),w==="pixel"?(f(O,0),f(I,10)):(o.coercePosition(i,T,f,M,O,D),o.coercePosition(i,T,f,M,I,N)),i[O]=P(i[O]),i[I]=P(i[I]),a[O]=F,a[I]=V}if(w==="pixel"){var U=a[S];a[S]=v(a[S],!0),o.coercePosition(i,T,f,M,S,.25),i[S]=P(i[S]),a[S]=U}}d==="path"?f("path"):l.noneOrAll(a,i,["x0","x1","y0","y1"])}}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":446,"./helpers":457}],450:[function(e,k,z){var l=e("../../registry"),o=e("../../lib"),c=e("../../plots/cartesian/axes"),p=e("./draw_newshape/helpers").readPaths,t=e("./draw_newshape/display_outlines"),n=e("../../plots/cartesian/handle_outline").clearOutlineControllers,a=e("../color"),i=e("../drawing"),r=e("../../plot_api/plot_template").arrayEditor,f=e("../dragelement"),u=e("../../lib/setcursor"),s=e("./constants"),h=e("./helpers");k.exports={draw:d,drawOne:g,eraseActiveShape:v};function d(P){var M=P._fullLayout;M._shapeUpperLayer.selectAll("path").remove(),M._shapeLowerLayer.selectAll("path").remove();for(var E in M._plots){var D=M._plots[E].shapelayer;D&&D.selectAll("path").remove()}for(var N=0;N<M.shapes.length;N++)M.shapes[N].visible&&g(P,N)}function y(P){return!!P._fullLayout._drawing}function m(P){return!P._context.edits.shapePosition}function g(P,M){P._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+M+'"]').remove();var E=h.makeOptionsAndPlotinfo(P,M),D=E.options,N=E.plotinfo;if(!D._input||D.visible===!1)return;if(D.layer!=="below")I(P._fullLayout._shapeUpperLayer);else if(D.xref==="paper"||D.yref==="paper")I(P._fullLayout._shapeLowerLayer);else if(N._hadPlotinfo){var O=N.mainplotinfo||N;I(O.shapelayer)}else I(P._fullLayout._shapeLowerLayer);function I(F){var V=b(P,D),U={"data-index":M,"fill-rule":D.fillrule,d:V},j=D.opacity,Z=D.fillcolor,te=D.line.width?D.line.color:"rgba(0,0,0,0)",re=D.line.width,W=D.line.dash;!re&&D.editable===!0&&(re=5,W="solid");var J=V[V.length-1]!=="Z",le=m(P)&&D.editable&&P._fullLayout._activeShapeIndex===M;le&&(Z=J?"rgba(0,0,0,0)":P._fullLayout.activeshape.fillcolor,j=P._fullLayout.activeshape.opacity);var ue=F.append("path").attr(U).style("opacity",j).call(a.stroke,te).call(a.fill,Z).call(i.dashLine,W,re);x(ue,P,D);var se;if((le||P._context.edits.shapePosition)&&(se=r(P.layout,"shapes",D)),le){ue.style({cursor:"move"});var G={element:ue.node(),plotinfo:N,gd:P,editHelpers:se,isActiveShape:!0},Y=p(V,P);t(Y,ue,G)}else P._context.edits.shapePosition?A(P,ue,D,M,F,se):D.editable===!0&&ue.style("pointer-events",J||a.opacity(Z)*j<=.5?"stroke":"all");ue.node().addEventListener("click",function(){return T(P,ue)})}}function x(P,M,E){var D=(E.xref+E.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");i.setClipUrl(P,D?"clip"+M._fullLayout._uid+D:null,M)}function A(P,M,E,D,N,O){var I=10,F=10,V=E.xsizemode==="pixel",U=E.ysizemode==="pixel",j=E.type==="line",Z=E.type==="path",te=O.modifyItem,re,W,J,le,ue,se,G,Y,ee,$,K,Q,ae,ie,oe,fe=c.getFromId(P,E.xref),ye=c.getRefType(E.xref),ce=c.getFromId(P,E.yref),me=c.getRefType(E.yref),xe=h.getDataToPixel(P,fe,!1,ye),ke=h.getDataToPixel(P,ce,!0,me),Ae=h.getPixelToData(P,fe,!1,ye),Oe=h.getPixelToData(P,ce,!0,me),He=Ie(),Ge={element:He.node(),gd:P,prepFn:Ne,doneFn:De,clickFn:Ve},_e;f.init(Ge),He.node().onmousemove=et;function Ie(){return j?We():M}function We(){var Nt=10,Et=Math.max(E.line.width,Nt),At=N.append("g").attr("data-index",D);At.append("path").attr("d",M.attr("d")).style({cursor:"move","stroke-width":Et,"stroke-opacity":"0"});var it={"fill-opacity":"0"},ht=Math.max(Et/2,Nt);return At.append("circle").attr({"data-line-point":"start-point",cx:V?xe(E.xanchor)+E.x0:xe(E.x0),cy:U?ke(E.yanchor)-E.y0:ke(E.y0),r:ht}).style(it).classed("cursor-grab",!0),At.append("circle").attr({"data-line-point":"end-point",cx:V?xe(E.xanchor)+E.x1:xe(E.x1),cy:U?ke(E.yanchor)-E.y1:ke(E.y1),r:ht}).style(it).classed("cursor-grab",!0),At}function et(Nt){if(y(P)){_e=null;return}if(j)Nt.target.tagName==="path"?_e="move":_e=Nt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Et=Ge.element.getBoundingClientRect(),At=Et.right-Et.left,it=Et.bottom-Et.top,ht=Nt.clientX-Et.left,$e=Nt.clientY-Et.top,Ee=!Z&&At>I&&it>F&&!Nt.shiftKey?f.getCursor(ht/At,1-$e/it):"move";u(M,Ee),_e=Ee.split("-")[0]}}function Ne(Nt){y(P)||(V&&(ue=xe(E.xanchor)),U&&(se=ke(E.yanchor)),E.type==="path"?oe=E.path:(re=V?E.x0:xe(E.x0),W=U?E.y0:ke(E.y0),J=V?E.x1:xe(E.x1),le=U?E.y1:ke(E.y1)),re<J?(ee=re,ae="x0",$=J,ie="x1"):(ee=J,ae="x1",$=re,ie="x0"),!U&&W<le||U&&W>le?(G=W,K="y0",Y=le,Q="y1"):(G=le,K="y1",Y=W,Q="y0"),et(Nt),Gt(N,E),zt(M,E,P),Ge.moveFn=_e==="move"?dt:Dt,Ge.altKey=Nt.altKey)}function De(){y(P)||(u(M),Mt(N),x(M,P,E),l.call("_guiRelayout",P,O.getUpdateObj()))}function Ve(){y(P)||Mt(N)}function dt(Nt,Et){if(E.type==="path"){var At=function($e){return $e},it=At,ht=At;V?te("xanchor",E.xanchor=Ae(ue+Nt)):(it=function(Ee){return Ae(xe(Ee)+Nt)},fe&&fe.type==="date"&&(it=h.encodeDate(it))),U?te("yanchor",E.yanchor=Oe(se+Et)):(ht=function(Ee){return Oe(ke(Ee)+Et)},ce&&ce.type==="date"&&(ht=h.encodeDate(ht))),te("path",E.path=w(oe,it,ht))}else V?te("xanchor",E.xanchor=Ae(ue+Nt)):(te("x0",E.x0=Ae(re+Nt)),te("x1",E.x1=Ae(J+Nt))),U?te("yanchor",E.yanchor=Oe(se+Et)):(te("y0",E.y0=Oe(W+Et)),te("y1",E.y1=Oe(le+Et)));M.attr("d",b(P,E)),Gt(N,E)}function Dt(Nt,Et){if(Z){var At=function(Ct){return Ct},it=At,ht=At;V?te("xanchor",E.xanchor=Ae(ue+Nt)):(it=function(or){return Ae(xe(or)+Nt)},fe&&fe.type==="date"&&(it=h.encodeDate(it))),U?te("yanchor",E.yanchor=Oe(se+Et)):(ht=function(or){return Oe(ke(or)+Et)},ce&&ce.type==="date"&&(ht=h.encodeDate(ht))),te("path",E.path=w(oe,it,ht))}else if(j){if(_e==="resize-over-start-point"){var $e=re+Nt,Ee=U?W-Et:W+Et;te("x0",E.x0=V?$e:Ae($e)),te("y0",E.y0=U?Ee:Oe(Ee))}else if(_e==="resize-over-end-point"){var Xe=J+Nt,rt=U?le-Et:le+Et;te("x1",E.x1=V?Xe:Ae(Xe)),te("y1",E.y1=U?rt:Oe(rt))}}else{var ut=function(Ct){return _e.indexOf(Ct)!==-1},Pt=ut("n"),kt=ut("s"),Bt=ut("w"),Xt=ut("e"),Ut=Pt?G+Et:G,Jt=kt?Y+Et:Y,Je=Bt?ee+Nt:ee,gt=Xt?$+Nt:$;U&&(Pt&&(Ut=G-Et),kt&&(Jt=Y-Et)),(!U&&Jt-Ut>F||U&&Ut-Jt>F)&&(te(K,E[K]=U?Ut:Oe(Ut)),te(Q,E[Q]=U?Jt:Oe(Jt))),gt-Je>I&&(te(ae,E[ae]=V?Je:Ae(Je)),te(ie,E[ie]=V?gt:Ae(gt)))}M.attr("d",b(P,E)),Gt(N,E)}function Gt(Nt,Et){(V||U)&&At();function At(){var it=Et.type!=="path",ht=Nt.selectAll(".visual-cue").data([0]),$e=1;ht.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":$e}).classed("visual-cue",!0);var Ee=xe(V?Et.xanchor:o.midRange(it?[Et.x0,Et.x1]:h.extractPathCoords(Et.path,s.paramIsX))),Xe=ke(U?Et.yanchor:o.midRange(it?[Et.y0,Et.y1]:h.extractPathCoords(Et.path,s.paramIsY)));if(Ee=h.roundPositionForSharpStrokeRendering(Ee,$e),Xe=h.roundPositionForSharpStrokeRendering(Xe,$e),V&&U){var rt="M"+(Ee-1-$e)+","+(Xe-1-$e)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";ht.attr("d",rt)}else if(V){var ut="M"+(Ee-1-$e)+","+(Xe-9-$e)+"v18 h2 v-18 Z";ht.attr("d",ut)}else{var Pt="M"+(Ee-9-$e)+","+(Xe-1-$e)+"h18 v2 h-18 Z";ht.attr("d",Pt)}}}function Mt(Nt){Nt.selectAll(".visual-cue").remove()}function zt(Nt,Et,At){var it=Et.xref,ht=Et.yref,$e=c.getFromId(At,it),Ee=c.getFromId(At,ht),Xe="";it!=="paper"&&!$e.autorange&&(Xe+=it),ht!=="paper"&&!Ee.autorange&&(Xe+=ht),i.setClipUrl(Nt,Xe?"clip"+At._fullLayout._uid+Xe:null,At)}}function b(P,M){var E=M.type,D=c.getRefType(M.xref),N=c.getRefType(M.yref),O=c.getFromId(P,M.xref),I=c.getFromId(P,M.yref),F=P._fullLayout._size,V,U,j,Z,te,re,W,J;if(O?D==="domain"?U=function(ae){return O._offset+O._length*ae}:(V=h.shapePositionToRange(O),U=function(ae){return O._offset+O.r2p(V(ae,!0))}):U=function(ae){return F.l+F.w*ae},I?N==="domain"?Z=function(ae){return I._offset+I._length*(1-ae)}:(j=h.shapePositionToRange(I),Z=function(ae){return I._offset+I.r2p(j(ae,!0))}):Z=function(ae){return F.t+F.h*(1-ae)},E==="path")return O&&O.type==="date"&&(U=h.decodeDate(U)),I&&I.type==="date"&&(Z=h.decodeDate(Z)),S(M,U,Z);if(M.xsizemode==="pixel"){var le=U(M.xanchor);te=le+M.x0,re=le+M.x1}else te=U(M.x0),re=U(M.x1);if(M.ysizemode==="pixel"){var ue=Z(M.yanchor);W=ue-M.y0,J=ue-M.y1}else W=Z(M.y0),J=Z(M.y1);if(E==="line")return"M"+te+","+W+"L"+re+","+J;if(E==="rect")return"M"+te+","+W+"H"+re+"V"+J+"H"+te+"Z";var se=(te+re)/2,G=(W+J)/2,Y=Math.abs(se-te),ee=Math.abs(G-W),$="A"+Y+","+ee,K=se+Y+","+G,Q=se+","+(G-ee);return"M"+K+$+" 0 1,1 "+Q+$+" 0 0,1 "+K+"Z"}function S(P,M,E){var D=P.path,N=P.xsizemode,O=P.ysizemode,I=P.xanchor,F=P.yanchor;return D.replace(s.segmentRE,function(V){var U=0,j=V.charAt(0),Z=s.paramIsX[j],te=s.paramIsY[j],re=s.numParams[j],W=V.substr(1).replace(s.paramRE,function(J){return Z[U]?N==="pixel"?J=M(I)+Number(J):J=M(J):te[U]&&(O==="pixel"?J=E(F)-Number(J):J=E(J)),U++,U>re&&(J="X"),J});return U>re&&(W=W.replace(/[\s,]*X.*/,""),o.log("Ignoring extra params in segment "+V)),j+W})}function w(P,M,E){return P.replace(s.segmentRE,function(D){var N=0,O=D.charAt(0),I=s.paramIsX[O],F=s.paramIsY[O],V=s.numParams[O],U=D.substr(1).replace(s.paramRE,function(j){return N>=V||(I[N]?j=M(j):F[N]&&(j=E(j)),N++),j});return O+U})}function T(P,M){if(!!m(P)){var E=M.node(),D=+E.getAttribute("data-index");if(D>=0){if(D===P._fullLayout._activeShapeIndex){_(P);return}P._fullLayout._activeShapeIndex=D,P._fullLayout._deactivateShape=_,d(P)}}}function _(P){if(!!m(P)){var M=P._fullLayout._activeShapeIndex;M>=0&&(n(P),delete P._fullLayout._activeShapeIndex,d(P))}}function v(P){if(!!m(P)){n(P);var M=P._fullLayout._activeShapeIndex,E=(P.layout||{}).shapes||[];if(M<E.length){for(var D=[],N=0;N<E.length;N++)N!==M&&D.push(E[N]);delete P._fullLayout._activeShapeIndex,l.call("_guiRelayout",P,{shapes:D})}}}},{"../../lib":503,"../../lib/setcursor":524,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/cartesian/handle_outline":565,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":448,"./draw_newshape/display_outlines":454,"./draw_newshape/helpers":455,"./helpers":457}],451:[function(e,k,z){var l=e("../../drawing/attributes").dash,o=e("../../../lib/extend").extendFlat;k.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:o({},l,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":493,"../../drawing/attributes":387}],452:[function(e,k,z){var l=32;k.exports={CIRCLE_SIDES:l,i000:0,i090:l/4,i180:l/2,i270:l/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],453:[function(e,k,z){var l=e("../../color");k.exports=function(c,p,t){t("newshape.drawdirection"),t("newshape.layer"),t("newshape.fillcolor"),t("newshape.fillrule"),t("newshape.opacity");var n=t("newshape.line.width");if(n){var a=(c||{}).plot_bgcolor||"#FFF";t("newshape.line.color",l.contrast(a)),t("newshape.line.dash")}t("activeshape.fillcolor"),t("activeshape.opacity")}},{"../../color":366}],454:[function(e,k,z){var l=e("../../dragelement"),o=e("../../dragelement/helpers"),c=o.drawMode,p=e("../../../registry"),t=e("./constants"),n=t.i000,a=t.i090,i=t.i180,r=t.i270,f=e("../../../plots/cartesian/handle_outline"),u=f.clearOutlineControllers,s=e("./helpers"),h=s.pointsShapeRectangle,d=s.pointsShapeEllipse,y=s.writePaths,m=e("./newshapes");k.exports=function x(A,b,S,w){w||(w=0);var T=S.gd;function _(){x(A,b,S,w++),d(A[0])&&v({redrawing:!0})}function v($){S.isActiveShape=!1;var K=m(b,S);Object.keys(K).length&&p.call(($||{}).redrawing?"relayout":"_guiRelayout",T,K)}var P=S.isActiveShape,M=T._fullLayout,E=M._zoomlayer,D=S.dragmode,N=c(D);N?T._fullLayout._drawing=!0:T._fullLayout._activeShapeIndex>=0&&u(T),b.attr("d",y(A));var O,I,F,V,U;if(P&&!w){U=g([],A);var j=E.append("g").attr("class","outline-controllers");le(j),ee()}function Z($){F=+$.srcElement.getAttribute("data-i"),V=+$.srcElement.getAttribute("data-j"),O[F][V].moveFn=te}function te($,K){if(!!A.length){var Q=U[F][V][1],ae=U[F][V][2],ie=A[F],oe=ie.length;if(h(ie)){for(var fe=0;fe<oe;fe++)if(fe!==V){var ye=ie[fe];ye[1]===ie[V][1]&&(ye[1]=Q+$),ye[2]===ie[V][2]&&(ye[2]=ae+K)}if(ie[V][1]=Q+$,ie[V][2]=ae+K,!h(ie))for(var ce=0;ce<oe;ce++)for(var me=0;me<ie[ce].length;me++)ie[ce][me]=U[F][ce][me]}else ie[V][1]=Q+$,ie[V][2]=ae+K;_()}}function re(){v()}function W(){if(!!A.length&&!!A[F]&&!!A[F].length){for(var $=[],K=0;K<A[F].length;K++)K!==V&&$.push(A[F][K]);$.length>1&&!($.length===2&&$[1][0]==="Z")&&(V===0&&($[0][0]="M"),A[F]=$,_(),v())}}function J($,K){if($===2){F=+K.srcElement.getAttribute("data-i"),V=+K.srcElement.getAttribute("data-j");var Q=A[F];!h(Q)&&!d(Q)&&W()}}function le($){O=[];for(var K=0;K<A.length;K++){var Q=A[K],ae=h(Q),ie=!ae&&d(Q);O[K]=[];for(var oe=0;oe<Q.length;oe++)if(Q[oe][0]!=="Z"&&!(ie&&oe!==n&&oe!==a&&oe!==i&&oe!==r)){var fe=Q[oe][1],ye=Q[oe][2],ce=$.append("circle").classed("cursor-grab",!0).attr("data-i",K).attr("data-j",oe).attr("cx",fe).attr("cy",ye).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});O[K][oe]={element:ce.node(),gd:T,prepFn:Z,doneFn:re,clickFn:J},l.init(O[K][oe])}}}function ue($,K){if(!!A.length)for(var Q=0;Q<A.length;Q++)for(var ae=0;ae<A[Q].length;ae++)for(var ie=0;ie+2<A[Q][ae].length;ie+=2)A[Q][ae][ie+1]=U[Q][ae][ie+1]+$,A[Q][ae][ie+2]=U[Q][ae][ie+2]+K}function se($,K){ue($,K),_()}function G($){F=+$.srcElement.getAttribute("data-i"),F||(F=0),I[F].moveFn=se}function Y(){v()}function ee(){if(I=[],!!A.length){var $=0;I[$]={element:b[0][0],gd:T,prepFn:G,doneFn:Y},l.init(I[$])}}};function g(x,A){for(var b=0;b<A.length;b++){var S=A[b];x[b]=[];for(var w=0;w<S.length;w++){x[b][w]=[];for(var T=0;T<S[w].length;T++)x[b][w][T]=S[w][T]}}return x}},{"../../../plots/cartesian/handle_outline":565,"../../../registry":638,"../../dragelement":385,"../../dragelement/helpers":384,"./constants":452,"./helpers":455,"./newshapes":456}],455:[function(e,k,z){var l=e("parse-svg-path"),o=e("./constants"),c=o.CIRCLE_SIDES,p=o.SQRT2,t=e("../../../plots/cartesian/helpers"),n=t.p2r,a=t.r2p,i=[0,3,4,5,6,1,2],r=[0,3,4,1,2];z.writePaths=function(s){var h=s.length;if(!h)return"M0,0Z";for(var d="",y=0;y<h;y++)for(var m=s[y].length,g=0;g<m;g++){var x=s[y][g][0];if(x==="Z")d+="Z";else for(var A=s[y][g].length,b=0;b<A;b++){var S=b;x==="Q"||x==="S"?S=r[b]:x==="C"&&(S=i[b]),d+=s[y][g][S],b>0&&b<A-1&&(d+=",")}}return d},z.readPaths=function(s,h,d,y){var m=l(s),g=[],x=-1,A=function(){x++,g[x]=[]},b,S=0,w=0,T,_,v=function(){T=S,_=w};v();for(var P=0;P<m.length;P++){var M=[],E,D,N,O,I=m[P][0],F=I;switch(I){case"M":A(),S=+m[P][1],w=+m[P][2],M.push([F,S,w]),v();break;case"Q":case"S":E=+m[P][1],N=+m[P][2],S=+m[P][3],w=+m[P][4],M.push([F,S,w,E,N]);break;case"C":E=+m[P][1],N=+m[P][2],D=+m[P][3],O=+m[P][4],S=+m[P][5],w=+m[P][6],M.push([F,S,w,E,N,D,O]);break;case"T":case"L":S=+m[P][1],w=+m[P][2],M.push([F,S,w]);break;case"H":F="L",S=+m[P][1],M.push([F,S,w]);break;case"V":F="L",w=+m[P][1],M.push([F,S,w]);break;case"A":F="L";var V=+m[P][1],U=+m[P][2];+m[P][4]||(V=-V,U=-U);var j=S-V,Z=w;for(b=1;b<=c/2;b++){var te=2*Math.PI*b/c;M.push([F,j+V*Math.cos(te),Z+U*Math.sin(te)])}break;case"Z":(S!==T||w!==_)&&(S=T,w=_,M.push([F,S,w]));break}for(var re=(d||{}).domain,W=h._fullLayout._size,J=d&&d.xsizemode==="pixel",le=d&&d.ysizemode==="pixel",ue=y===!1,se=0;se<M.length;se++){for(b=0;b+2<7;b+=2){var G=M[se][b+1],Y=M[se][b+2];G===void 0||Y===void 0||(S=G,w=Y,d&&(d.xaxis&&d.xaxis.p2r?(ue&&(G-=d.xaxis._offset),J?G=a(d.xaxis,d.xanchor)+G:G=n(d.xaxis,G)):(ue&&(G-=W.l),re?G=re.x[0]+G/W.w:G=G/W.w),d.yaxis&&d.yaxis.p2r?(ue&&(Y-=d.yaxis._offset),le?Y=a(d.yaxis,d.yanchor)-Y:Y=n(d.yaxis,Y)):(ue&&(Y-=W.t),re?Y=re.y[1]-Y/W.h:Y=1-Y/W.h)),M[se][b+1]=G,M[se][b+2]=Y)}g[x].push(M[se].slice())}}return g};function f(s,h){return Math.abs(s-h)<=1e-6}function u(s,h){var d=h[1]-s[1],y=h[2]-s[2];return Math.sqrt(d*d+y*y)}z.pointsShapeRectangle=function(s){var h=s.length;if(h!==5)return!1;for(var d=1;d<3;d++){var y=s[0][d]-s[1][d],m=s[3][d]-s[2][d];if(!f(y,m))return!1;var g=s[0][d]-s[3][d],x=s[1][d]-s[2][d];if(!f(g,x))return!1}return!f(s[0][1],s[1][1])&&!f(s[0][1],s[3][1])?!1:!!(u(s[0],s[1])*u(s[0],s[3]))},z.pointsShapeEllipse=function(s){var h=s.length;if(h!==c+1)return!1;h=c;for(var d=0;d<h;d++){var y=(h*2-d)%h,m=(h/2+y)%h,g=(h/2+d)%h;if(!f(u(s[d],s[g]),u(s[y],s[m])))return!1}return!0},z.handleEllipse=function(s,h,d){if(!s)return[h,d];var y=z.ellipseOver({x0:h[0],y0:h[1],x1:d[0],y1:d[1]}),m=(y.x1+y.x0)/2,g=(y.y1+y.y0)/2,x=(y.x1-y.x0)/2,A=(y.y1-y.y0)/2;x||(x=A=A/p),A||(A=x=x/p);for(var b=[],S=0;S<c;S++){var w=S*2*Math.PI/c;b.push([m+x*Math.cos(w),g+A*Math.sin(w)])}return b},z.ellipseOver=function(s){var h=s.x0,d=s.y0,y=s.x1,m=s.y1,g=y-h,x=m-d;h-=g,d-=x;var A=(h+y)/2,b=(d+m)/2,S=p;return g*=S,x*=S,{x0:A-g,y0:b-x,x1:A+g,y1:b+x}}},{"../../../plots/cartesian/helpers":566,"./constants":452,"parse-svg-path":250}],456:[function(e,k,z){var l=e("../../dragelement/helpers"),o=l.drawMode,c=l.openMode,p=e("./constants"),t=p.i000,n=p.i090,a=p.i180,i=p.i270,r=p.cos45,f=p.sin45,u=e("../../../plots/cartesian/helpers"),s=u.p2r,h=u.r2p,d=e("../../../plots/cartesian/handle_outline"),y=d.clearSelect,m=e("./helpers"),g=m.readPaths,x=m.writePaths,A=m.ellipseOver;k.exports=function(w,T){if(!!w.length){var _=w[0][0];if(!!_){var v=_.getAttribute("d"),P=T.gd,M=P._fullLayout.newshape,E=T.plotinfo,D=E.xaxis,N=E.yaxis,O=!!E.domain||!E.xaxis,I=!!E.domain||!E.yaxis,F=T.isActiveShape,V=T.dragmode,U=(P.layout||{}).shapes||[];if(!o(V)&&F!==void 0){var j=P._fullLayout._activeShapeIndex;if(j<U.length)switch(P._fullLayout.shapes[j].type){case"rect":V="drawrect";break;case"circle":V="drawcircle";break;case"line":V="drawline";break;case"path":var Z=U[j].path||"";Z[Z.length-1]==="Z"?V="drawclosedpath":V="drawopenpath";break}}var te=c(V),re=g(v,P,E,F),W={editable:!0,xref:O?"paper":D._id,yref:I?"paper":N._id,layer:M.layer,opacity:M.opacity,line:{color:M.line.color,width:M.line.width,dash:M.line.dash}};te||(W.fillcolor=M.fillcolor,W.fillrule=M.fillrule);var J;if(re.length===1&&(J=re[0]),J&&V==="drawrect")W.type="rect",W.x0=J[0][1],W.y0=J[0][2],W.x1=J[2][1],W.y1=J[2][2];else if(J&&V==="drawline")W.type="line",W.x0=J[0][1],W.y0=J[0][2],W.x1=J[1][1],W.y1=J[1][2];else if(J&&V==="drawcircle"){W.type="circle";var le=J[t][1],ue=J[n][1],se=J[a][1],G=J[i][1],Y=J[t][2],ee=J[n][2],$=J[a][2],K=J[i][2],Q=E.xaxis&&(E.xaxis.type==="date"||E.xaxis.type==="log"),ae=E.yaxis&&(E.yaxis.type==="date"||E.yaxis.type==="log");Q&&(le=h(E.xaxis,le),ue=h(E.xaxis,ue),se=h(E.xaxis,se),G=h(E.xaxis,G)),ae&&(Y=h(E.yaxis,Y),ee=h(E.yaxis,ee),$=h(E.yaxis,$),K=h(E.yaxis,K));var ie=(ue+G)/2,oe=(Y+$)/2,fe=(G-ue+se-le)/2,ye=(K-ee+$-Y)/2,ce=A({x0:ie,y0:oe,x1:ie+fe*r,y1:oe+ye*f});Q&&(ce.x0=s(E.xaxis,ce.x0),ce.x1=s(E.xaxis,ce.x1)),ae&&(ce.y0=s(E.yaxis,ce.y0),ce.y1=s(E.yaxis,ce.y1)),W.x0=ce.x0,W.y0=ce.y0,W.x1=ce.x1,W.y1=ce.y1}else W.type="path",D&&N&&b(re,D,N),W.path=x(re),J=null;y(P);for(var me=T.editHelpers,xe=(me||{}).modifyItem,ke=[],Ae=0;Ae<U.length;Ae++){var Oe=P._fullLayout.shapes[Ae];if(ke[Ae]=Oe._input,F!==void 0&&Ae===P._fullLayout._activeShapeIndex){var He=W;switch(Oe.type){case"line":case"rect":case"circle":xe("x0",He.x0),xe("x1",He.x1),xe("y0",He.y0),xe("y1",He.y1);break;case"path":xe("path",He.path);break}}}return F===void 0?(ke.push(W),ke):me?me.getUpdateObj():{}}}};function b(S,w,T){var _=w.type==="date",v=T.type==="date";if(!_&&!v)return S;for(var P=0;P<S.length;P++)for(var M=0;M<S[P].length;M++)for(var E=0;E+2<S[P][M].length;E+=2)_&&(S[P][M][E+1]=S[P][M][E+1].replace(" ","_")),v&&(S[P][M][E+2]=S[P][M][E+2].replace(" ","_"));return S}},{"../../../plots/cartesian/handle_outline":565,"../../../plots/cartesian/helpers":566,"../../dragelement/helpers":384,"./constants":452,"./helpers":455}],457:[function(e,k,z){var l=e("./constants"),o=e("../../lib");z.rangeToShapePosition=function(c){return c.type==="log"?c.r2d:function(p){return p}},z.shapePositionToRange=function(c){return c.type==="log"?c.d2r:function(p){return p}},z.decodeDate=function(c){return function(p){return p.replace&&(p=p.replace("_"," ")),c(p)}},z.encodeDate=function(c){return function(p){return c(p).replace(" ","_")}},z.extractPathCoords=function(c,p){var t=[],n=c.match(l.segmentRE);return n.forEach(function(a){var i=p[a.charAt(0)].drawn;if(i!==void 0){var r=a.substr(1).match(l.paramRE);!r||r.length<i||t.push(o.cleanNumber(r[i]))}}),t},z.getDataToPixel=function(c,p,t,n){var a=c._fullLayout._size,i;if(p)if(n==="domain")i=function(f){return p._length*(t?1-f:f)+p._offset};else{var r=z.shapePositionToRange(p);i=function(f){return p._offset+p.r2p(r(f,!0))},p.type==="date"&&(i=z.decodeDate(i))}else t?i=function(f){return a.t+a.h*(1-f)}:i=function(f){return a.l+a.w*f};return i},z.getPixelToData=function(c,p,t,n){var a=c._fullLayout._size,i;if(p)if(n==="domain")i=function(f){var u=(f-p._offset)/p._length;return t?1-u:u};else{var r=z.rangeToShapePosition(p);i=function(f){return r(p.p2r(f-p._offset))}}else t?i=function(f){return 1-(f-a.t)/a.h}:i=function(f){return(f-a.l)/a.w};return i},z.roundPositionForSharpStrokeRendering=function(c,p){var t=Math.round(p%2)===1,n=Math.round(c);return t?n+.5:n},z.makeOptionsAndPlotinfo=function(c,p){var t=c._fullLayout.shapes[p]||{},n=c._fullLayout._plots[t.xref+t.yref],a=!!n;return a?n._hadPlotinfo=!0:(n={},t.xref&&t.xref!=="paper"&&(n.xaxis=c._fullLayout[t.xref+"axis"]),t.yref&&t.yref!=="paper"&&(n.yaxis=c._fullLayout[t.yref+"axis"])),n.xsizemode=t.xsizemode,n.ysizemode=t.ysizemode,n.xanchor=t.xanchor,n.yanchor=t.yanchor,{options:t,plotinfo:n}}},{"../../lib":503,"./constants":448}],458:[function(e,k,z){var l=e("./draw");k.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),supplyDrawNewShapeDefaults:e("./draw_newshape/defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:l.draw,drawOne:l.drawOne}},{"../../plots/cartesian/include_components":567,"./attributes":446,"./calc_autorange":447,"./defaults":449,"./draw":450,"./draw_newshape/defaults":453}],459:[function(e,k,z){var l=e("../../plots/font_attributes"),o=e("../../plots/pad_attributes"),c=e("../../lib/extend").extendDeepAll,p=e("../../plot_api/edit_types").overrideAll,t=e("../../plots/animation_attributes"),n=e("../../plot_api/plot_template").templatedArray,a=e("./constants"),i=n("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});k.exports=p(n("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:i,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:c(o({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:t.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:l({})},font:l({}),activebgcolor:{valType:"color",dflt:a.gripBgActiveColor},bgcolor:{valType:"color",dflt:a.railBgColor},bordercolor:{valType:"color",dflt:a.railBorderColor},borderwidth:{valType:"number",min:0,dflt:a.railBorderWidth},ticklen:{valType:"number",min:0,dflt:a.tickLength},tickcolor:{valType:"color",dflt:a.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:a.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/animation_attributes":548,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"./constants":460}],460:[function(e,k,z){k.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],461:[function(e,k,z){var l=e("../../lib"),o=e("../../plots/array_container_defaults"),c=e("./attributes"),p=e("./constants"),t=p.name,n=c.steps;k.exports=function(f,u){o(f,u,{name:t,handleItemDefaults:a})};function a(r,f,u){function s(b,S){return l.coerce(r,f,c,b,S)}for(var h=o(r,f,{name:"steps",handleItemDefaults:i}),d=0,y=0;y<h.length;y++)h[y].visible&&d++;var m;if(d<2?m=f.visible=!1:m=s("visible"),!!m){f._stepCount=d;var g=f._visibleSteps=l.filterVisible(h),x=s("active");(h[x]||{}).visible||(f.active=g[0]._index),s("x"),s("y"),l.noneOrAll(r,f,["x","y"]),s("xanchor"),s("yanchor"),s("len"),s("lenmode"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),l.coerceFont(s,"font",u.font);var A=s("currentvalue.visible");A&&(s("currentvalue.xanchor"),s("currentvalue.prefix"),s("currentvalue.suffix"),s("currentvalue.offset"),l.coerceFont(s,"currentvalue.font",f.font)),s("transition.duration"),s("transition.easing"),s("bgcolor"),s("activebgcolor"),s("bordercolor"),s("borderwidth"),s("ticklen"),s("tickwidth"),s("tickcolor"),s("minorticklen")}}function i(r,f){function u(d,y){return l.coerce(r,f,n,d,y)}var s;if(r.method!=="skip"&&!Array.isArray(r.args)?s=f.visible=!1:s=u("visible"),s){u("method"),u("args");var h=u("label","step-"+f._index);u("value",h),u("execute")}}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":459,"./constants":460}],462:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../plots/plots"),c=e("../color"),p=e("../drawing"),t=e("../../lib"),n=t.strTranslate,a=e("../../lib/svg_text_utils"),i=e("../../plot_api/plot_template").arrayEditor,r=e("./constants"),f=e("../../constants/alignment"),u=f.LINE_SPACING,s=f.FROM_TL,h=f.FROM_BR;k.exports=function(V){var U=V._fullLayout,j=y(U,V),Z=U._infolayer.selectAll("g."+r.containerClassName).data(j.length>0?[0]:[]);Z.enter().append("g").classed(r.containerClassName,!0).style("cursor","ew-resize");function te(le){le._commandObserver&&(le._commandObserver.remove(),delete le._commandObserver),o.autoMargin(V,d(le))}if(Z.exit().each(function(){l.select(this).selectAll("g."+r.groupClassName).each(te)}).remove(),j.length!==0){var re=Z.selectAll("g."+r.groupClassName).data(j,m);re.enter().append("g").classed(r.groupClassName,!0),re.exit().each(te).remove();for(var W=0;W<j.length;W++){var J=j[W];g(V,J)}re.each(function(le){var ue=l.select(this);M(le),o.manageCommandObserver(V,le,le._visibleSteps,function(se){var G=ue.data()[0];G.active!==se.index&&(G._dragging||_(V,ue,G,se.index,!1,!0))}),x(V,l.select(this),le)})}};function d(F){return r.autoMarginIdRoot+F._index}function y(F,V){for(var U=F[r.name],j=[],Z=0;Z<U.length;Z++){var te=U[Z];!te.visible||(te._gd=V,j.push(te))}return j}function m(F){return F._index}function g(F,V){var U=p.tester.selectAll("g."+r.labelGroupClass).data(V._visibleSteps);U.enter().append("g").classed(r.labelGroupClass,!0);var j=0,Z=0;U.each(function(ee){var $=l.select(this),K=S($,{step:ee},V),Q=K.node();if(Q){var ae=p.bBox(Q);Z=Math.max(Z,ae.height),j=Math.max(j,ae.width)}}),U.remove();var te=V._dims={};te.inputAreaWidth=Math.max(r.railWidth,r.gripHeight);var re=F._fullLayout._size;te.lx=re.l+re.w*V.x,te.ly=re.t+re.h*(1-V.y),V.lenmode==="fraction"?te.outerLength=Math.round(re.w*V.len):te.outerLength=V.len,te.inputAreaStart=0,te.inputAreaLength=Math.round(te.outerLength-V.pad.l-V.pad.r);var W=te.inputAreaLength-2*r.stepInset,J=W/(V._stepCount-1),le=j+r.labelPadding;if(te.labelStride=Math.max(1,Math.ceil(le/J)),te.labelHeight=Z,te.currentValueMaxWidth=0,te.currentValueHeight=0,te.currentValueTotalHeight=0,te.currentValueMaxLines=1,V.currentvalue.visible){var ue=p.tester.append("g");U.each(function(ee){var $=A(ue,V,ee.label),K=$.node()&&p.bBox($.node())||{width:0,height:0},Q=a.lineCount($);te.currentValueMaxWidth=Math.max(te.currentValueMaxWidth,Math.ceil(K.width)),te.currentValueHeight=Math.max(te.currentValueHeight,Math.ceil(K.height)),te.currentValueMaxLines=Math.max(te.currentValueMaxLines,Q)}),te.currentValueTotalHeight=te.currentValueHeight+V.currentvalue.offset,ue.remove()}te.height=te.currentValueTotalHeight+r.tickOffset+V.ticklen+r.labelOffset+te.labelHeight+V.pad.t+V.pad.b;var se="left";t.isRightAnchor(V)&&(te.lx-=te.outerLength,se="right"),t.isCenterAnchor(V)&&(te.lx-=te.outerLength/2,se="center");var G="top";t.isBottomAnchor(V)&&(te.ly-=te.height,G="bottom"),t.isMiddleAnchor(V)&&(te.ly-=te.height/2,G="middle"),te.outerLength=Math.ceil(te.outerLength),te.height=Math.ceil(te.height),te.lx=Math.round(te.lx),te.ly=Math.round(te.ly);var Y={y:V.y,b:te.height*h[G],t:te.height*s[G]};V.lenmode==="fraction"?(Y.l=0,Y.xl=V.x-V.len*s[se],Y.r=0,Y.xr=V.x+V.len*h[se]):(Y.x=V.x,Y.l=te.outerLength*s[se],Y.r=te.outerLength*h[se]),o.autoMargin(F,d(V),Y)}function x(F,V,U){(U.steps[U.active]||{}).visible||(U.active=U._visibleSteps[0]._index),V.call(A,U).call(I,U).call(w,U).call(P,U).call(O,F,U).call(b,F,U);var j=U._dims;p.setTranslate(V,j.lx+U.pad.l,j.ly+U.pad.t),V.call(E,U,!1),V.call(A,U)}function A(F,V,U){if(!!V.currentvalue.visible){var j=V._dims,Z,te;switch(V.currentvalue.xanchor){case"right":Z=j.inputAreaLength-r.currentValueInset-j.currentValueMaxWidth,te="left";break;case"center":Z=j.inputAreaLength*.5,te="middle";break;default:Z=r.currentValueInset,te="left"}var re=t.ensureSingle(F,"text",r.labelClass,function(G){G.attr({"text-anchor":te,"data-notex":1})}),W=V.currentvalue.prefix?V.currentvalue.prefix:"";if(typeof U=="string")W+=U;else{var J=V.steps[V.active].label,le=V._gd._fullLayout._meta;le&&(J=t.templateString(J,le)),W+=J}V.currentvalue.suffix&&(W+=V.currentvalue.suffix),re.call(p.font,V.currentvalue.font).text(W).call(a.convertToTspans,V._gd);var ue=a.lineCount(re),se=(j.currentValueMaxLines+1-ue)*V.currentvalue.font.size*u;return a.positionText(re,Z,se),re}}function b(F,V,U){var j=t.ensureSingle(F,"rect",r.gripRectClass,function(Z){Z.call(v,V,F,U).style("pointer-events","all")});j.attr({width:r.gripWidth,height:r.gripHeight,rx:r.gripRadius,ry:r.gripRadius}).call(c.stroke,U.bordercolor).call(c.fill,U.bgcolor).style("stroke-width",U.borderwidth+"px")}function S(F,V,U){var j=t.ensureSingle(F,"text",r.labelClass,function(re){re.attr({"text-anchor":"middle","data-notex":1})}),Z=V.step.label,te=U._gd._fullLayout._meta;return te&&(Z=t.templateString(Z,te)),j.call(p.font,U.font).text(Z).call(a.convertToTspans,U._gd),j}function w(F,V){var U=t.ensureSingle(F,"g",r.labelsClass),j=V._dims,Z=U.selectAll("g."+r.labelGroupClass).data(j.labelSteps);Z.enter().append("g").classed(r.labelGroupClass,!0),Z.exit().remove(),Z.each(function(te){var re=l.select(this);re.call(S,te,V),p.setTranslate(re,D(V,te.fraction),r.tickOffset+V.ticklen+V.font.size*u+r.labelOffset+j.currentValueTotalHeight)})}function T(F,V,U,j,Z){var te=Math.round(j*(U._stepCount-1)),re=U._visibleSteps[te]._index;re!==U.active&&_(F,V,U,re,!0,Z)}function _(F,V,U,j,Z,te){var re=U.active;U.active=j,i(F.layout,r.name,U).applyUpdate("active",j);var W=U.steps[U.active];V.call(E,U,te),V.call(A,U),F.emit("plotly_sliderchange",{slider:U,step:U.steps[U.active],interaction:Z,previousActive:re}),W&&W.method&&Z&&(V._nextMethod?(V._nextMethod.step=W,V._nextMethod.doCallback=Z,V._nextMethod.doTransition=te):(V._nextMethod={step:W,doCallback:Z,doTransition:te},V._nextMethodRaf=window.requestAnimationFrame(function(){var J=V._nextMethod.step;!J.method||(J.execute&&o.executeAPICommand(F,J.method,J.args),V._nextMethod=null,V._nextMethodRaf=null)})))}function v(F,V,U){var j=U.node(),Z=l.select(V);function te(){return U.data()[0]}function re(){var W=te();V.emit("plotly_sliderstart",{slider:W});var J=U.select("."+r.gripRectClass);l.event.stopPropagation(),l.event.preventDefault(),J.call(c.fill,W.activebgcolor);var le=N(W,l.mouse(j)[0]);T(V,U,W,le,!0),W._dragging=!0;function ue(){var G=te(),Y=N(G,l.mouse(j)[0]);T(V,U,G,Y,!1)}Z.on("mousemove",ue),Z.on("touchmove",ue);function se(){var G=te();G._dragging=!1,J.call(c.fill,G.bgcolor),Z.on("mouseup",null),Z.on("mousemove",null),Z.on("touchend",null),Z.on("touchmove",null),V.emit("plotly_sliderend",{slider:G,step:G.steps[G.active]})}Z.on("mouseup",se),Z.on("touchend",se)}F.on("mousedown",re),F.on("touchstart",re)}function P(F,V){var U=F.selectAll("rect."+r.tickRectClass).data(V._visibleSteps),j=V._dims;U.enter().append("rect").classed(r.tickRectClass,!0),U.exit().remove(),U.attr({width:V.tickwidth+"px","shape-rendering":"crispEdges"}),U.each(function(Z,te){var re=te%j.labelStride==0,W=l.select(this);W.attr({height:re?V.ticklen:V.minorticklen}).call(c.fill,V.tickcolor),p.setTranslate(W,D(V,te/(V._stepCount-1))-.5*V.tickwidth,(re?r.tickOffset:r.minorTickOffset)+j.currentValueTotalHeight)})}function M(F){var V=F._dims;V.labelSteps=[];for(var U=F._stepCount,j=0;j<U;j+=V.labelStride)V.labelSteps.push({fraction:j/(U-1),step:F._visibleSteps[j]})}function E(F,V,U){for(var j=F.select("rect."+r.gripRectClass),Z=0,te=0;te<V._stepCount;te++)if(V._visibleSteps[te]._index===V.active){Z=te;break}var re=D(V,Z/(V._stepCount-1));if(!V._invokingCommand){var W=j;U&&V.transition.duration>0&&(W=W.transition().duration(V.transition.duration).ease(V.transition.easing)),W.attr("transform",n(re-r.gripWidth*.5,V._dims.currentValueTotalHeight))}}function D(F,V){var U=F._dims;return U.inputAreaStart+r.stepInset+(U.inputAreaLength-2*r.stepInset)*Math.min(1,Math.max(0,V))}function N(F,V){var U=F._dims;return Math.min(1,Math.max(0,(V-r.stepInset-U.inputAreaStart)/(U.inputAreaLength-2*r.stepInset-2*U.inputAreaStart)))}function O(F,V,U){var j=U._dims,Z=t.ensureSingle(F,"rect",r.railTouchRectClass,function(te){te.call(v,V,F,U).style("pointer-events","all")});Z.attr({width:j.inputAreaLength,height:Math.max(j.inputAreaWidth,r.tickOffset+U.ticklen+j.labelHeight)}).call(c.fill,U.bgcolor).attr("opacity",0),p.setTranslate(Z,0,j.currentValueTotalHeight)}function I(F,V){var U=V._dims,j=U.inputAreaLength-r.railInset*2,Z=t.ensureSingle(F,"rect",r.railRectClass);Z.attr({width:j,height:r.railWidth,rx:r.railRadius,ry:r.railRadius,"shape-rendering":"crispEdges"}).call(c.stroke,V.bordercolor).call(c.fill,V.bgcolor).style("stroke-width",V.borderwidth+"px"),p.setTranslate(Z,r.railInset,(U.inputAreaWidth-r.railWidth)*.5+U.currentValueTotalHeight)}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":460,"@plotly/d3":58}],463:[function(e,k,z){var l=e("./constants");k.exports={moduleType:"component",name:l.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":459,"./constants":460,"./defaults":461,"./draw":462}],464:[function(e,k,z){var l=e("@plotly/d3"),o=e("fast-isnumeric"),c=e("../../plots/plots"),p=e("../../registry"),t=e("../../lib"),n=t.strTranslate,a=e("../drawing"),i=e("../color"),r=e("../../lib/svg_text_utils"),f=e("../../constants/interactions"),u=e("../../constants/alignment").OPPOSITE_SIDE,s=/ [XY][0-9]* /;function h(d,y,m){var g=m.propContainer,x=m.propName,A=m.placeholder,b=m.traceIndex,S=m.avoid||{},w=m.attributes,T=m.transform,_=m.containerGroup,v=d._fullLayout,P=1,M=!1,E=g.title,D=(E&&E.text?E.text:"").trim(),N=E&&E.font?E.font:{},O=N.family,I=N.size,F=N.color,V;x==="title.text"?V="titleText":x.indexOf("axis")!==-1?V="axisTitleText":x.indexOf("colorbar"!==-1)&&(V="colorbarTitleText");var U=d._context.edits[V];D===""?P=0:D.replace(s," % ")===A.replace(s," % ")&&(P=.2,M=!0,U||(D="")),m._meta?D=t.templateString(D,m._meta):v._meta&&(D=t.templateString(D,v._meta));var j=D||U,Z;_||(_=t.ensureSingle(v._infolayer,"g","g-"+y),Z=v._hColorbarMoveTitle);var te=_.selectAll("text").data(j?[0]:[]);if(te.enter().append("text"),te.text(D).attr("class",y),te.exit().remove(),!j)return _;function re(ue){t.syncOrAsync([W,J],ue)}function W(ue){var se;return!T&&Z&&(T={}),T?(se="",T.rotate&&(se+="rotate("+[T.rotate,w.x,w.y]+")"),(T.offset||Z)&&(se+=n(0,(T.offset||0)-(Z||0)))):se=null,ue.attr("transform",se),ue.style({"font-family":O,"font-size":l.round(I,2)+"px",fill:i.rgb(F),opacity:P*i.opacity(F),"font-weight":c.fontWeight}).attr(w).call(r.convertToTspans,d),c.previousPromises(d)}function J(ue){var se=l.select(ue.node().parentNode);if(S&&S.selection&&S.side&&D){se.attr("transform",null);var G=u[S.side],Y=S.side==="left"||S.side==="top"?-1:1,ee=o(S.pad)?S.pad:2,$=a.bBox(se.node()),K={left:0,top:0,right:v.width,bottom:v.height},Q=S.maxShift||Y*(K[S.side]-$[S.side]),ae=0;if(Q<0)ae=Q;else{var ie=S.offsetLeft||0,oe=S.offsetTop||0;$.left-=ie,$.right-=ie,$.top-=oe,$.bottom-=oe,S.selection.each(function(){var ye=a.bBox(this);t.bBoxIntersect($,ye,ee)&&(ae=Math.max(ae,Y*(ye[S.side]-$[G])+ee))}),ae=Math.min(Q,ae)}if(ae>0||Q<0){var fe={left:[-ae,0],right:[ae,0],top:[0,-ae],bottom:[0,ae]}[S.side];se.attr("transform",n(fe[0],fe[1]))}}}te.call(re);function le(){P=0,M=!0,te.text(A).on("mouseover.opacity",function(){l.select(this).transition().duration(f.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){l.select(this).transition().duration(f.HIDE_PLACEHOLDER).style("opacity",0)})}return U&&(D?te.on(".opacity",null):le(),te.call(r.makeEditable,{gd:d}).on("edit",function(ue){b!==void 0?p.call("_guiRestyle",d,x,ue,b):p.call("_guiRelayout",d,x,ue)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(re)}).on("input",function(ue){this.text(ue||" ").call(r.positionText,w.x,w.y)})),te.classed("js-placeholder",M),_}k.exports={draw:h}},{"../../constants/alignment":471,"../../constants/interactions":478,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],465:[function(e,k,z){var l=e("../../plots/font_attributes"),o=e("../color/attributes"),c=e("../../lib/extend").extendFlat,p=e("../../plot_api/edit_types").overrideAll,t=e("../../plots/pad_attributes"),n=e("../../plot_api/plot_template").templatedArray,a=n("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});k.exports=p(n("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:a,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:c(t({editType:"arraydraw"}),{}),font:l({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:o.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"../color/attributes":365}],466:[function(e,k,z){k.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},{}],467:[function(e,k,z){var l=e("../../lib"),o=e("../../plots/array_container_defaults"),c=e("./attributes"),p=e("./constants"),t=p.name,n=c.buttons;k.exports=function(f,u){var s={name:t,handleItemDefaults:a};o(f,u,s)};function a(r,f,u){function s(y,m){return l.coerce(r,f,c,y,m)}var h=o(r,f,{name:"buttons",handleItemDefaults:i}),d=s("visible",h.length>0);!d||(s("active"),s("direction"),s("type"),s("showactive"),s("x"),s("y"),l.noneOrAll(r,f,["x","y"]),s("xanchor"),s("yanchor"),s("pad.t"),s("pad.r"),s("pad.b"),s("pad.l"),l.coerceFont(s,"font",u.font),s("bgcolor",u.paper_bgcolor),s("bordercolor"),s("borderwidth"))}function i(r,f){function u(h,d){return l.coerce(r,f,n,h,d)}var s=u("visible",r.method==="skip"||Array.isArray(r.args));s&&(u("method"),u("args"),u("args2"),u("label"),u("execute"))}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":465,"./constants":466}],468:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../plots/plots"),c=e("../color"),p=e("../drawing"),t=e("../../lib"),n=e("../../lib/svg_text_utils"),a=e("../../plot_api/plot_template").arrayEditor,i=e("../../constants/alignment").LINE_SPACING,r=e("./constants"),f=e("./scrollbox");k.exports=function(N){var O=N._fullLayout,I=t.filterVisible(O[r.name]);function F(J){o.autoMargin(N,P(J))}var V=O._menulayer.selectAll("g."+r.containerClassName).data(I.length>0?[0]:[]);if(V.enter().append("g").classed(r.containerClassName,!0).style("cursor","pointer"),V.exit().each(function(){l.select(this).selectAll("g."+r.headerGroupClassName).each(F)}).remove(),I.length!==0){var U=V.selectAll("g."+r.headerGroupClassName).data(I,u);U.enter().append("g").classed(r.headerGroupClassName,!0);for(var j=t.ensureSingle(V,"g",r.dropdownButtonGroupClassName,function(J){J.style("pointer-events","all")}),Z=0;Z<I.length;Z++){var te=I[Z];v(N,te)}var re="updatemenus"+O._uid,W=new f(N,j,re);U.enter().size()&&(j.node().parentNode.appendChild(j.node()),j.call(E)),U.exit().each(function(J){j.call(E),F(J)}).remove(),U.each(function(J){var le=l.select(this),ue=J.type==="dropdown"?j:null;o.manageCommandObserver(N,J,J.buttons,function(se){d(N,J,J.buttons[se.index],le,ue,W,se.index,!0)}),J.type==="dropdown"?(y(N,le,j,W,J),h(j,J)&&m(N,le,j,W,J)):m(N,le,null,null,J)})}};function u(D){return D._index}function s(D){return+D.attr(r.menuIndexAttrName)==-1}function h(D,N){return+D.attr(r.menuIndexAttrName)===N._index}function d(D,N,O,I,F,V,U,j){N.active=U,a(D.layout,r.name,N).applyUpdate("active",U),N.type==="buttons"?m(D,I,null,null,N):N.type==="dropdown"&&(F.attr(r.menuIndexAttrName,"-1"),y(D,I,F,V,N),j||m(D,I,F,V,N))}function y(D,N,O,I,F){var V=t.ensureSingle(N,"g",r.headerClassName,function(J){J.style("pointer-events","all")}),U=F._dims,j=F.active,Z=F.buttons[j]||r.blankHeaderOpts,te={y:F.pad.t,yPad:0,x:F.pad.l,xPad:0,index:0},re={width:U.headerWidth,height:U.headerHeight};V.call(A,F,Z,D).call(M,F,te,re);var W=t.ensureSingle(N,"text",r.headerArrowClassName,function(J){J.attr("text-anchor","end").call(p.font,F.font).text(r.arrowSymbol[F.direction])});W.attr({x:U.headerWidth-r.arrowOffsetX+F.pad.l,y:U.headerHeight/2+r.textOffsetY+F.pad.t}),V.on("click",function(){O.call(E,String(h(O,F)?-1:F._index)),m(D,N,O,I,F)}),V.on("mouseover",function(){V.call(T)}),V.on("mouseout",function(){V.call(_,F)}),p.setTranslate(N,U.lx,U.ly)}function m(D,N,O,I,F){O||(O=N,O.attr("pointer-events","all"));var V=!s(O)||F.type==="buttons"?F.buttons:[],U=F.type==="dropdown"?r.dropdownButtonClassName:r.buttonClassName,j=O.selectAll("g."+U).data(t.filterVisible(V)),Z=j.enter().append("g").classed(U,!0),te=j.exit();F.type==="dropdown"?(Z.attr("opacity","0").transition().attr("opacity","1"),te.transition().attr("opacity","0").remove()):te.remove();var re=0,W=0,J=F._dims,le=["up","down"].indexOf(F.direction)!==-1;F.type==="dropdown"&&(le?W=J.headerHeight+r.gapButtonHeader:re=J.headerWidth+r.gapButtonHeader),F.type==="dropdown"&&F.direction==="up"&&(W=-r.gapButtonHeader+r.gapButton-J.openHeight),F.type==="dropdown"&&F.direction==="left"&&(re=-r.gapButtonHeader+r.gapButton-J.openWidth);var ue={x:J.lx+re+F.pad.l,y:J.ly+W+F.pad.t,yPad:r.gapButton,xPad:r.gapButton,index:0},se={l:ue.x+F.borderwidth,t:ue.y+F.borderwidth};j.each(function(G,Y){var ee=l.select(this);ee.call(A,F,G,D).call(M,F,ue),ee.on("click",function(){l.event.defaultPrevented||(G.execute&&(G.args2&&F.active===Y?(d(D,F,G,N,O,I,-1),o.executeAPICommand(D,G.method,G.args2)):(d(D,F,G,N,O,I,Y),o.executeAPICommand(D,G.method,G.args))),D.emit("plotly_buttonclicked",{menu:F,button:G,active:F.active}))}),ee.on("mouseover",function(){ee.call(T)}),ee.on("mouseout",function(){ee.call(_,F),j.call(w,F)})}),j.call(w,F),le?(se.w=Math.max(J.openWidth,J.headerWidth),se.h=ue.y-se.t):(se.w=ue.x-se.l,se.h=Math.max(J.openHeight,J.headerHeight)),se.direction=F.direction,I&&(j.size()?g(D,N,O,I,F,se):x(I))}function g(D,N,O,I,F,V){var U=F.direction,j=U==="up"||U==="down",Z=F._dims,te=F.active,re,W,J;if(j)for(W=0,J=0;J<te;J++)W+=Z.heights[J]+r.gapButton;else for(re=0,J=0;J<te;J++)re+=Z.widths[J]+r.gapButton;I.enable(V,re,W),I.hbar&&I.hbar.attr("opacity","0").transition().attr("opacity","1"),I.vbar&&I.vbar.attr("opacity","0").transition().attr("opacity","1")}function x(D){var N=!!D.hbar,O=!!D.vbar;N&&D.hbar.transition().attr("opacity","0").each("end",function(){N=!1,O||D.disable()}),O&&D.vbar.transition().attr("opacity","0").each("end",function(){O=!1,N||D.disable()})}function A(D,N,O,I){D.call(b,N).call(S,N,O,I)}function b(D,N){var O=t.ensureSingle(D,"rect",r.itemRectClassName,function(I){I.attr({rx:r.rx,ry:r.ry,"shape-rendering":"crispEdges"})});O.call(c.stroke,N.bordercolor).call(c.fill,N.bgcolor).style("stroke-width",N.borderwidth+"px")}function S(D,N,O,I){var F=t.ensureSingle(D,"text",r.itemTextClassName,function(j){j.attr({"text-anchor":"start","data-notex":1})}),V=O.label,U=I._fullLayout._meta;U&&(V=t.templateString(V,U)),F.call(p.font,N.font).text(V).call(n.convertToTspans,I)}function w(D,N){var O=N.active;D.each(function(I,F){var V=l.select(this);F===O&&N.showactive&&V.select("rect."+r.itemRectClassName).call(c.fill,r.activeColor)})}function T(D){D.select("rect."+r.itemRectClassName).call(c.fill,r.hoverColor)}function _(D,N){D.select("rect."+r.itemRectClassName).call(c.fill,N.bgcolor)}function v(D,N){var O=N._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},I=p.tester.selectAll("g."+r.dropdownButtonClassName).data(t.filterVisible(N.buttons));I.enter().append("g").classed(r.dropdownButtonClassName,!0);var F=["up","down"].indexOf(N.direction)!==-1;I.each(function(re,W){var J=l.select(this);J.call(A,N,re,D);var le=J.select("."+r.itemTextClassName),ue=le.node()&&p.bBox(le.node()).width,se=Math.max(ue+r.textPadX,r.minWidth),G=N.font.size*i,Y=n.lineCount(le),ee=Math.max(G*Y,r.minHeight)+r.textOffsetY;ee=Math.ceil(ee),se=Math.ceil(se),O.widths[W]=se,O.heights[W]=ee,O.height1=Math.max(O.height1,ee),O.width1=Math.max(O.width1,se),F?(O.totalWidth=Math.max(O.totalWidth,se),O.openWidth=O.totalWidth,O.totalHeight+=ee+r.gapButton,O.openHeight+=ee+r.gapButton):(O.totalWidth+=se+r.gapButton,O.openWidth+=se+r.gapButton,O.totalHeight=Math.max(O.totalHeight,ee),O.openHeight=O.totalHeight)}),F?O.totalHeight-=r.gapButton:O.totalWidth-=r.gapButton,O.headerWidth=O.width1+r.arrowPadX,O.headerHeight=O.height1,N.type==="dropdown"&&(F?(O.width1+=r.arrowPadX,O.totalHeight=O.height1):O.totalWidth=O.width1,O.totalWidth+=r.arrowPadX),I.remove();var V=O.totalWidth+N.pad.l+N.pad.r,U=O.totalHeight+N.pad.t+N.pad.b,j=D._fullLayout._size;O.lx=j.l+j.w*N.x,O.ly=j.t+j.h*(1-N.y);var Z="left";t.isRightAnchor(N)&&(O.lx-=V,Z="right"),t.isCenterAnchor(N)&&(O.lx-=V/2,Z="center");var te="top";t.isBottomAnchor(N)&&(O.ly-=U,te="bottom"),t.isMiddleAnchor(N)&&(O.ly-=U/2,te="middle"),O.totalWidth=Math.ceil(O.totalWidth),O.totalHeight=Math.ceil(O.totalHeight),O.lx=Math.round(O.lx),O.ly=Math.round(O.ly),o.autoMargin(D,P(N),{x:N.x,y:N.y,l:V*({right:1,center:.5}[Z]||0),r:V*({left:1,center:.5}[Z]||0),b:U*({top:1,middle:.5}[te]||0),t:U*({bottom:1,middle:.5}[te]||0)})}function P(D){return r.autoMarginIdRoot+D._index}function M(D,N,O,I){I=I||{};var F=D.select("."+r.itemRectClassName),V=D.select("."+r.itemTextClassName),U=N.borderwidth,j=O.index,Z=N._dims;p.setTranslate(D,U+O.x,U+O.y);var te=["up","down"].indexOf(N.direction)!==-1,re=I.height||(te?Z.heights[j]:Z.height1);F.attr({x:0,y:0,width:I.width||(te?Z.width1:Z.widths[j]),height:re});var W=N.font.size*i,J=n.lineCount(V),le=(J-1)*W/2;n.positionText(V,r.textOffsetX,re/2-le+r.textOffsetY),te?O.y+=Z.heights[j]+O.yPad:O.x+=Z.widths[j]+O.xPad,O.index++}function E(D,N){D.attr(r.menuIndexAttrName,N||"-1").selectAll("g."+r.dropdownButtonClassName).remove()}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":466,"./scrollbox":470,"@plotly/d3":58}],469:[function(e,k,z){arguments[4][463][0].apply(z,arguments)},{"./attributes":465,"./constants":466,"./defaults":467,"./draw":468,dup:463}],470:[function(e,k,z){k.exports=t;var l=e("@plotly/d3"),o=e("../color"),c=e("../drawing"),p=e("../../lib");function t(n,a,i){this.gd=n,this.container=a,this.id=i,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}t.barWidth=2,t.barLength=20,t.barRadius=2,t.barPad=1,t.barColor="#808BA4",t.prototype.enable=function(a,i,r){var f=this.gd._fullLayout,u=f.width,s=f.height;this.position=a;var h=this.position.l,d=this.position.w,y=this.position.t,m=this.position.h,g=this.position.direction,x=g==="down",A=g==="left",b=g==="right",S=g==="up",w=d,T=m,_,v,P,M;!x&&!A&&!b&&!S&&(this.position.direction="down",x=!0);var E=x||S;E?(_=h,v=_+w,x?(P=y,M=Math.min(P+T,s),T=M-P):(M=y+T,P=Math.max(M-T,0),T=M-P)):(P=y,M=P+T,A?(v=h+w,_=Math.max(v-w,0),w=v-_):(_=h,v=Math.min(_+w,u),w=v-_)),this._box={l:_,t:P,w,h:T};var D=d>w,N=t.barLength+2*t.barPad,O=t.barWidth+2*t.barPad,I=h,F=y+m;F+O>s&&(F=s-O);var V=this.container.selectAll("rect.scrollbar-horizontal").data(D?[0]:[]);V.exit().on(".drag",null).remove(),V.enter().append("rect").classed("scrollbar-horizontal",!0).call(o.fill,t.barColor),D?(this.hbar=V.attr({rx:t.barRadius,ry:t.barRadius,x:I,y:F,width:N,height:O}),this._hbarXMin=I+N/2,this._hbarTranslateMax=w-N):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var U=m>T,j=t.barWidth+2*t.barPad,Z=t.barLength+2*t.barPad,te=h+d,re=y;te+j>u&&(te=u-j);var W=this.container.selectAll("rect.scrollbar-vertical").data(U?[0]:[]);W.exit().on(".drag",null).remove(),W.enter().append("rect").classed("scrollbar-vertical",!0).call(o.fill,t.barColor),U?(this.vbar=W.attr({rx:t.barRadius,ry:t.barRadius,x:te,y:re,width:j,height:Z}),this._vbarYMin=re+Z/2,this._vbarTranslateMax=T-Z):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var J=this.id,le=_-.5,ue=U?v+j+.5:v+.5,se=P-.5,G=D?M+O+.5:M+.5,Y=f._topdefs.selectAll("#"+J).data(D||U?[0]:[]);if(Y.exit().remove(),Y.enter().append("clipPath").attr("id",J).append("rect"),D||U?(this._clipRect=Y.select("rect").attr({x:Math.floor(le),y:Math.floor(se),width:Math.ceil(ue)-Math.floor(le),height:Math.ceil(G)-Math.floor(se)}),this.container.call(c.setClipUrl,J,this.gd),this.bg.attr({x:h,y,width:d,height:m})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(c.setClipUrl,null),delete this._clipRect),D||U){var ee=l.behavior.drag().on("dragstart",function(){l.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(ee);var $=l.behavior.drag().on("dragstart",function(){l.event.sourceEvent.preventDefault(),l.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));D&&this.hbar.on(".drag",null).call($),U&&this.vbar.on(".drag",null).call($)}this.setTranslate(i,r)},t.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(c.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},t.prototype._onBoxDrag=function(){var a=this.translateX,i=this.translateY;this.hbar&&(a-=l.event.dx),this.vbar&&(i-=l.event.dy),this.setTranslate(a,i)},t.prototype._onBoxWheel=function(){var a=this.translateX,i=this.translateY;this.hbar&&(a+=l.event.deltaY),this.vbar&&(i+=l.event.deltaY),this.setTranslate(a,i)},t.prototype._onBarDrag=function(){var a=this.translateX,i=this.translateY;if(this.hbar){var r=a+this._hbarXMin,f=r+this._hbarTranslateMax,u=p.constrain(l.event.x,r,f),s=(u-r)/(f-r),h=this.position.w-this._box.w;a=s*h}if(this.vbar){var d=i+this._vbarYMin,y=d+this._vbarTranslateMax,m=p.constrain(l.event.y,d,y),g=(m-d)/(y-d),x=this.position.h-this._box.h;i=g*x}this.setTranslate(a,i)},t.prototype.setTranslate=function(a,i){var r=this.position.w-this._box.w,f=this.position.h-this._box.h;if(a=p.constrain(a||0,0,r),i=p.constrain(i||0,0,f),this.translateX=a,this.translateY=i,this.container.call(c.setTranslate,this._box.l-this.position.l-a,this._box.t-this.position.t-i),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+a-.5),y:Math.floor(this.position.t+i-.5)}),this.hbar){var u=a/r;this.hbar.call(c.setTranslate,a+u*this._hbarTranslateMax,i)}if(this.vbar){var s=i/f;this.vbar.call(c.setTranslate,a,i+s*this._vbarTranslateMax)}}},{"../../lib":503,"../color":366,"../drawing":388,"@plotly/d3":58}],471:[function(e,k,z){k.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],472:[function(e,k,z){k.exports={axisRefDescription:function(l,o,c){return["If set to a",l,"axis id (e.g. *"+l+"* or","*"+l+"2*), the `"+l+"` position refers to a",l,"coordinate. If set to *paper*, the `"+l+"`","position refers to the distance from the",o,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",o,"("+c+"). If set to a",l,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",o,"of the domain of that axis: e.g.,","*"+l+"2 domain* refers to the domain of the second",l," axis and a",l,"position of 0.5 refers to the","point between the",o,"and the",c,"of the domain of the","second",l,"axis."].join(" ")}}},{}],473:[function(e,k,z){k.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},{}],474:[function(e,k,z){k.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],475:[function(e,k,z){k.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],476:[function(e,k,z){k.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],477:[function(e,k,z){k.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},{}],478:[function(e,k,z){k.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],479:[function(e,k,z){k.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],480:[function(e,k,z){z.xmlns="http://www.w3.org/2000/xmlns/",z.svg="http://www.w3.org/2000/svg",z.xlink="http://www.w3.org/1999/xlink",z.svgAttrs={xmlns:z.svg,"xmlns:xlink":z.xlink}},{}],481:[function(e,k,z){z.version=e("./version").version,e("native-promise-only"),e("../build/plotcss");for(var l=e("./registry"),o=z.register=l.register,c=e("./plot_api"),p=Object.keys(c),t=0;t<p.length;t++){var n=p[t];n.charAt(0)!=="_"&&(z[n]=c[n]),o({moduleType:"apiMethod",name:n,fn:c[n]})}o(e("./traces/scatter")),o([e("./components/legend"),e("./components/fx"),e("./components/annotations"),e("./components/annotations3d"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars"),e("./components/colorscale"),e("./components/colorbar"),e("./components/modebar")]),o([e("./locale-en"),e("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(o(window.PlotlyLocales),delete window.PlotlyLocales),z.Icons=e("./fonts/ploticon");var a=e("./components/fx"),i=e("./plots/plots");z.Plots={resize:i.resize,graphJson:i.graphJson,sendDataToCloud:i.sendDataToCloud},z.Fx={hover:a.hover,unhover:a.unhover,loneHover:a.loneHover,loneUnhover:a.loneUnhover},z.Snapshot=e("./snapshot"),z.PlotSchema=e("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":357,"./components/annotations3d":362,"./components/colorbar":372,"./components/colorscale":378,"./components/errorbars":394,"./components/fx":406,"./components/grid":410,"./components/images":415,"./components/legend":423,"./components/modebar":429,"./components/rangeselector":437,"./components/rangeslider":444,"./components/shapes":458,"./components/sliders":463,"./components/updatemenus":469,"./fonts/ploticon":482,"./locale-en":534,"./locale-en-us":533,"./plot_api":538,"./plot_api/plot_schema":542,"./plots/plots":619,"./registry":638,"./snapshot":643,"./traces/scatter":938,"./version":1119,"native-promise-only":245}],482:[function(e,k,z){k.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],483:[function(e,k,z){z.isLeftAnchor=function(o){return o.xanchor==="left"||o.xanchor==="auto"&&o.x<=1/3},z.isCenterAnchor=function(o){return o.xanchor==="center"||o.xanchor==="auto"&&o.x>1/3&&o.x<2/3},z.isRightAnchor=function(o){return o.xanchor==="right"||o.xanchor==="auto"&&o.x>=2/3},z.isTopAnchor=function(o){return o.yanchor==="top"||o.yanchor==="auto"&&o.y>=2/3},z.isMiddleAnchor=function(o){return o.yanchor==="middle"||o.yanchor==="auto"&&o.y>1/3&&o.y<2/3},z.isBottomAnchor=function(o){return o.yanchor==="bottom"||o.yanchor==="auto"&&o.y<=1/3}},{}],484:[function(e,k,z){var l=e("./mod"),o=l.mod,c=l.modHalf,p=Math.PI,t=2*p;function n(g){return g/180*p}function a(g){return g/p*180}function i(g){return Math.abs(g[1]-g[0])>t-1e-14}function r(g,x){return c(x-g,t)}function f(g,x){return Math.abs(r(g,x))}function u(g,x){if(i(x))return!0;var A,b;x[0]<x[1]?(A=x[0],b=x[1]):(A=x[1],b=x[0]),A=o(A,t),b=o(b,t),A>b&&(b+=t);var S=o(g,t),w=S+t;return S>=A&&S<=b||w>=A&&w<=b}function s(g,x,A,b){if(!u(x,b))return!1;var S,w;return A[0]<A[1]?(S=A[0],w=A[1]):(S=A[1],w=A[0]),g>=S&&g<=w}function h(g,x,A,b,S,w,T){S=S||0,w=w||0;var _=i([A,b]),v,P,M,E,D;_?(v=0,P=p,M=t):A<b?(v=A,M=b):(v=b,M=A),g<x?(E=g,D=x):(E=x,D=g);function N(V,U){return[V*Math.cos(U)+S,w-V*Math.sin(U)]}var O=Math.abs(M-v)<=p?0:1;function I(V,U,j){return"A"+[V,V]+" "+[0,O,j]+" "+N(V,U)}var F;return _?E===null?F="M"+N(D,v)+I(D,P,0)+I(D,M,0)+"Z":F="M"+N(E,v)+I(E,P,0)+I(E,M,0)+"ZM"+N(D,v)+I(D,P,1)+I(D,M,1)+"Z":E===null?(F="M"+N(D,v)+I(D,M,0),T&&(F+="L0,0Z")):F="M"+N(E,v)+"L"+N(D,v)+I(D,M,0)+"L"+N(E,M)+I(E,v,1)+"Z",F}function d(g,x,A,b,S){return h(null,g,x,A,b,S,0)}function y(g,x,A,b,S){return h(null,g,x,A,b,S,1)}function m(g,x,A,b,S,w){return h(g,x,A,b,S,w,1)}k.exports={deg2rad:n,rad2deg:a,angleDelta:r,angleDist:f,isFullCircle:i,isAngleInsideSector:u,isPtInsideSector:s,pathArc:d,pathSector:y,pathAnnulus:m}},{"./mod":510}],485:[function(e,k,z){var l=Array.isArray,o=ArrayBuffer,c=DataView;function p(i){return o.isView(i)&&!(i instanceof c)}z.isTypedArray=p;function t(i){return l(i)||p(i)}z.isArrayOrTypedArray=t;function n(i){return!t(i[0])}z.isArray1D=n,z.ensureArray=function(i,r){return l(i)||(i=[]),i.length=r,i},z.concat=function(){var i=[],r=!0,f=0,u,s,h,d,y,m,g,x;for(h=0;h<arguments.length;h++)d=arguments[h],m=d.length,m&&(s?i.push(d):(s=d,y=m),l(d)?u=!1:(r=!1,f?u!==d.constructor&&(u=!1):u=d.constructor),f+=m);if(!f)return[];if(!i.length)return s;if(r)return s.concat.apply(s,i);if(u){for(g=new u(f),g.set(s),h=0;h<i.length;h++)d=i[h],g.set(d,y),y+=d.length;return g}for(g=new Array(f),x=0;x<s.length;x++)g[x]=s[x];for(h=0;h<i.length;h++){for(d=i[h],x=0;x<d.length;x++)g[y+x]=d[x];y+=x}return g},z.maxRowLength=function(i){return a(i,Math.max,0)},z.minRowLength=function(i){return a(i,Math.min,1/0)};function a(i,r,f){if(t(i))if(t(i[0])){for(var u=f,s=0;s<i.length;s++)u=r(u,i[s].length);return u}else return i.length;return 0}},{}],486:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../constants/numerical").BADNUM,c=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;k.exports=function(t){return typeof t=="string"&&(t=t.replace(c,"")),l(t)?Number(t):o}},{"../constants/numerical":479,"fast-isnumeric":190}],487:[function(e,k,z){k.exports=function(o){var c=o._fullLayout;c._glcanvas&&c._glcanvas.size()&&c._glcanvas.each(function(p){p.regl&&p.regl.clear({color:!0,depth:!0})})}},{}],488:[function(e,k,z){k.exports=function(o){o._responsiveChartHandler&&(window.removeEventListener("resize",o._responsiveChartHandler),delete o._responsiveChartHandler)}},{}],489:[function(e,k,z){var l=e("fast-isnumeric"),o=e("tinycolor2"),c=e("../plots/attributes"),p=e("../components/colorscale/scales"),t=e("../components/color"),n=e("../constants/interactions").DESELECTDIM,a=e("./nested_property"),i=e("./regex").counter,r=e("./mod").modHalf,f=e("./array").isArrayOrTypedArray;z.valObjectMeta={data_array:{coerceFunction:function(s,h,d){f(s)?h.set(s):d!==void 0&&h.set(d)}},enumerated:{coerceFunction:function(s,h,d,y){y.coerceNumber&&(s=+s),y.values.indexOf(s)===-1?h.set(d):h.set(s)},validateFunction:function(s,h){h.coerceNumber&&(s=+s);for(var d=h.values,y=0;y<d.length;y++){var m=String(d[y]);if(m.charAt(0)==="/"&&m.charAt(m.length-1)==="/"){var g=new RegExp(m.substr(1,m.length-2));if(g.test(s))return!0}else if(s===d[y])return!0}return!1}},boolean:{coerceFunction:function(s,h,d){s===!0||s===!1?h.set(s):h.set(d)}},number:{coerceFunction:function(s,h,d,y){!l(s)||y.min!==void 0&&s<y.min||y.max!==void 0&&s>y.max?h.set(d):h.set(+s)}},integer:{coerceFunction:function(s,h,d,y){s%1||!l(s)||y.min!==void 0&&s<y.min||y.max!==void 0&&s>y.max?h.set(d):h.set(+s)}},string:{coerceFunction:function(s,h,d,y){if(typeof s!="string"){var m=typeof s=="number";y.strict===!0||!m?h.set(d):h.set(String(s))}else y.noBlank&&!s?h.set(d):h.set(s)}},color:{coerceFunction:function(s,h,d){o(s).isValid()?h.set(s):h.set(d)}},colorlist:{coerceFunction:function(s,h,d){function y(m){return o(m).isValid()}!Array.isArray(s)||!s.length?h.set(d):s.every(y)?h.set(s):h.set(d)}},colorscale:{coerceFunction:function(s,h,d){h.set(p.get(s,d))}},angle:{coerceFunction:function(s,h,d){s==="auto"?h.set("auto"):l(s)?h.set(r(+s,360)):h.set(d)}},subplotid:{coerceFunction:function(s,h,d,y){var m=y.regex||i(d);if(typeof s=="string"&&m.test(s)){h.set(s);return}h.set(d)},validateFunction:function(s,h){var d=h.dflt;return s===d?!0:typeof s!="string"?!1:!!i(d).test(s)}},flaglist:{coerceFunction:function(s,h,d,y){if(typeof s!="string"){h.set(d);return}if((y.extras||[]).indexOf(s)!==-1){h.set(s);return}for(var m=s.split("+"),g=0;g<m.length;){var x=m[g];y.flags.indexOf(x)===-1||m.indexOf(x)<g?m.splice(g,1):g++}m.length?h.set(m.join("+")):h.set(d)}},any:{coerceFunction:function(s,h,d){s===void 0?h.set(d):h.set(s)}},info_array:{coerceFunction:function(s,h,d,y){function m(N,O,I){var F,V={set:function(U){F=U}};return I===void 0&&(I=O.dflt),z.valObjectMeta[O.valType].coerceFunction(N,V,I,O),F}var g=y.dimensions===2||y.dimensions==="1-2"&&Array.isArray(s)&&Array.isArray(s[0]);if(!Array.isArray(s)){h.set(d);return}var x=y.items,A=[],b=Array.isArray(x),S=b&&g&&Array.isArray(x[0]),w=g&&b&&!S,T=b&&!w?x.length:s.length,_,v,P,M,E,D;if(d=Array.isArray(d)?d:[],g)for(_=0;_<T;_++)for(A[_]=[],P=Array.isArray(s[_])?s[_]:[],w?E=x.length:b?E=x[_].length:E=P.length,v=0;v<E;v++)w?M=x[v]:b?M=x[_][v]:M=x,D=m(P[v],M,(d[_]||[])[v]),D!==void 0&&(A[_][v]=D);else for(_=0;_<T;_++)D=m(s[_],b?x[_]:x,d[_]),D!==void 0&&(A[_]=D);h.set(A)},validateFunction:function(s,h){if(!Array.isArray(s))return!1;var d=h.items,y=Array.isArray(d),m=h.dimensions===2;if(!h.freeLength&&s.length!==d.length)return!1;for(var g=0;g<s.length;g++)if(m){if(!Array.isArray(s[g])||!h.freeLength&&s[g].length!==d[g].length)return!1;for(var x=0;x<s[g].length;x++)if(!u(s[g][x],y?d[g][x]:d))return!1}else if(!u(s[g],y?d[g]:d))return!1;return!0}}},z.coerce=function(s,h,d,y,m){var g=a(d,y).get(),x=a(s,y),A=a(h,y),b=x.get(),S=h._template;if(b===void 0&&S&&(b=a(S,y).get(),S=0),m===void 0&&(m=g.dflt),g.arrayOk&&f(b))return A.set(b),b;var w=z.valObjectMeta[g.valType].coerceFunction;w(b,A,m,g);var T=A.get();return S&&T===m&&!u(b,g)&&(b=a(S,y).get(),w(b,A,m,g),T=A.get()),T},z.coerce2=function(s,h,d,y,m){var g=a(s,y),x=z.coerce(s,h,d,y,m),A=g.get();return A!=null?x:!1},z.coerceFont=function(s,h,d){var y={};return d=d||{},y.family=s(h+".family",d.family),y.size=s(h+".size",d.size),y.color=s(h+".color",d.color),y},z.coercePattern=function(s,h,d,y){var m=s(h+".shape");if(m){s(h+".solidity"),s(h+".size");var g=s(h+".fillmode"),x=g==="overlay";if(!y){var A=s(h+".bgcolor",x?d:void 0);s(h+".fgcolor",x?t.contrast(A):d)}s(h+".fgopacity",x?.5:1)}},z.coerceHoverinfo=function(s,h,d){var y=h._module.attributes,m=y.hoverinfo?y:c,g=m.hoverinfo,x;if(d._dataLength===1){var A=g.dflt==="all"?g.flags.slice():g.dflt.split("+");A.splice(A.indexOf("name"),1),x=A.join("+")}return z.coerce(s,h,m,"hoverinfo",x)},z.coerceSelectionMarkerOpacity=function(s,h){if(!!s.marker){var d=s.marker.opacity;if(d!==void 0){var y,m;!f(d)&&!s.selected&&!s.unselected&&(y=d,m=n*d),h("selected.marker.opacity",y),h("unselected.marker.opacity",m)}}};function u(s,h){var d=z.valObjectMeta[h.valType];if(h.arrayOk&&f(s))return!0;if(d.validateFunction)return d.validateFunction(s,h);var y={},m=y,g={set:function(x){m=x}};return d.coerceFunction(s,g,y,h),m!==y}z.validate=u},{"../components/color":366,"../components/colorscale/scales":381,"../constants/interactions":478,"../plots/attributes":550,"./array":485,"./mod":510,"./nested_property":511,"./regex":520,"fast-isnumeric":190,tinycolor2:312}],490:[function(e,k,z){var l=e("d3-time-format").timeFormat,o=e("fast-isnumeric"),c=e("./loggers"),p=e("./mod").mod,t=e("../constants/numerical"),n=t.BADNUM,a=t.ONEDAY,i=t.ONEHOUR,r=t.ONEMIN,f=t.ONESEC,u=t.EPOCHJD,s=e("../registry"),h=e("d3-time-format").utcFormat,d=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,m=new Date().getFullYear()-70;function g(F){return F&&s.componentsRegistry.calendars&&typeof F=="string"&&F!=="gregorian"}z.dateTick0=function(F,V){var U=x(F,!!V);if(V<2)return U;var j=z.dateTime2ms(U,F);return j+=a*(V-1),z.ms2DateTime(j,0,F)};function x(F,V){return g(F)?V?s.getComponentMethod("calendars","CANONICAL_SUNDAY")[F]:s.getComponentMethod("calendars","CANONICAL_TICK")[F]:V?"2000-01-02":"2000-01-01"}z.dfltRange=function(F){return g(F)?s.getComponentMethod("calendars","DFLTRANGE")[F]:["2000-01-01","2001-01-01"]},z.isJSDate=function(F){return typeof F=="object"&&F!==null&&typeof F.getTime=="function"};var A,b;z.dateTime2ms=function(F,V){if(z.isJSDate(F)){var U=F.getTimezoneOffset()*r,j=(F.getUTCMinutes()-F.getMinutes())*r+(F.getUTCSeconds()-F.getSeconds())*f+(F.getUTCMilliseconds()-F.getMilliseconds());if(j){var Z=3*r;U=U-Z/2+p(j-U+Z/2,Z)}return F=Number(F)-U,F>=A&&F<=b?F:n}if(typeof F!="string"&&typeof F!="number")return n;F=String(F);var te=g(V),re=F.charAt(0);te&&(re==="G"||re==="g")&&(F=F.substr(1),V="");var W=te&&V.substr(0,7)==="chinese",J=F.match(W?y:d);if(!J)return n;var le=J[1],ue=J[3]||"1",se=Number(J[5]||1),G=Number(J[7]||0),Y=Number(J[9]||0),ee=Number(J[11]||0);if(te){if(le.length===2)return n;le=Number(le);var $;try{var K=s.getComponentMethod("calendars","getCal")(V);if(W){var Q=ue.charAt(ue.length-1)==="i";ue=parseInt(ue,10),$=K.newDate(le,K.toMonthIndex(le,ue,Q),se)}else $=K.newDate(le,Number(ue),se)}catch{return n}return $?($.toJD()-u)*a+G*i+Y*r+ee*f:n}le.length===2?le=(Number(le)+2e3-m)%100+m:le=Number(le),ue-=1;var ae=new Date(Date.UTC(2e3,ue,se,G,Y));return ae.setUTCFullYear(le),ae.getUTCMonth()!==ue||ae.getUTCDate()!==se?n:ae.getTime()+ee*f},A=z.MIN_MS=z.dateTime2ms("-9999"),b=z.MAX_MS=z.dateTime2ms("9999-12-31 23:59:59.9999"),z.isDateTime=function(F,V){return z.dateTime2ms(F,V)!==n};function S(F,V){return String(F+Math.pow(10,V)).substr(1)}var w=90*a,T=3*i,_=5*r;z.ms2DateTime=function(F,V,U){if(typeof F!="number"||!(F>=A&&F<=b))return n;V||(V=0);var j=Math.floor(p(F+.05,1)*10),Z=Math.round(F-j/10),te,re,W,J,le,ue;if(g(U)){var se=Math.floor(Z/a)+u,G=Math.floor(p(F,a));try{te=s.getComponentMethod("calendars","getCal")(U).fromJD(se).formatDate("yyyy-mm-dd")}catch{te=h("G%Y-%m-%d")(new Date(Z))}if(te.charAt(0)==="-")for(;te.length<11;)te="-0"+te.substr(1);else for(;te.length<10;)te="0"+te;re=V<w?Math.floor(G/i):0,W=V<w?Math.floor(G%i/r):0,J=V<T?Math.floor(G%r/f):0,le=V<_?G%f*10+j:0}else ue=new Date(Z),te=h("%Y-%m-%d")(ue),re=V<w?ue.getUTCHours():0,W=V<w?ue.getUTCMinutes():0,J=V<T?ue.getUTCSeconds():0,le=V<_?ue.getUTCMilliseconds()*10+j:0;return v(te,re,W,J,le)},z.ms2DateTimeLocal=function(F){if(!(F>=A+a&&F<=b-a))return n;var V=Math.floor(p(F+.05,1)*10),U=new Date(Math.round(F-V/10)),j=l("%Y-%m-%d")(U),Z=U.getHours(),te=U.getMinutes(),re=U.getSeconds(),W=U.getUTCMilliseconds()*10+V;return v(j,Z,te,re,W)};function v(F,V,U,j,Z){if((V||U||j||Z)&&(F+=" "+S(V,2)+":"+S(U,2),(j||Z)&&(F+=":"+S(j,2),Z))){for(var te=4;Z%10==0;)te-=1,Z/=10;F+="."+S(Z,te)}return F}z.cleanDate=function(F,V,U){if(F===n)return V;if(z.isJSDate(F)||typeof F=="number"&&isFinite(F)){if(g(U))return c.error("JS Dates and milliseconds are incompatible with world calendars",F),V;if(F=z.ms2DateTimeLocal(+F),!F&&V!==void 0)return V}else if(!z.isDateTime(F,U))return c.error("unrecognized date",F),V;return F};var P=/%\d?f/g,M=/%h/g,E={"1":"1","2":"1","3":"2","4":"2"};function D(F,V,U,j){F=F.replace(P,function(te){var re=Math.min(+te.charAt(1)||6,6),W=(V/1e3%1+2).toFixed(re).substr(2).replace(/0+$/,"")||"0";return W});var Z=new Date(Math.floor(V+.05));if(F=F.replace(M,function(){return E[U("%q")(Z)]}),g(j))try{F=s.getComponentMethod("calendars","worldCalFmt")(F,V,j)}catch{return"Invalid"}return U(F)(Z)}var N=[59,59.9,59.99,59.999,59.9999];function O(F,V){var U=p(F+.05,a),j=S(Math.floor(U/i),2)+":"+S(p(Math.floor(U/r),60),2);if(V!=="M"){o(V)||(V=0);var Z=Math.min(p(F/f,60),N[V]),te=(100+Z).toFixed(V).substr(1);V>0&&(te=te.replace(/0+$/,"").replace(/[\.]$/,"")),j+=":"+te}return j}z.formatDate=function(F,V,U,j,Z,te){if(Z=g(Z)&&Z,!V)if(U==="y")V=te.year;else if(U==="m")V=te.month;else if(U==="d")V=te.dayMonth+`
`+te.year;else return O(F,U)+`
`+D(te.dayMonthYear,F,j,Z);return D(V,F,j,Z)};var I=3*a;z.incrementMonth=function(F,V,U){U=g(U)&&U;var j=p(F,a);if(F=Math.round(F-j),U)try{var Z=Math.round(F/a)+u,te=s.getComponentMethod("calendars","getCal")(U),re=te.fromJD(Z);return V%12?te.add(re,V,"m"):te.add(re,V/12,"y"),(re.toJD()-u)*a+j}catch{c.error("invalid ms "+F+" in calendar "+U)}var W=new Date(F+I);return W.setUTCMonth(W.getUTCMonth()+V)+j-I},z.findExactDates=function(F,V){for(var U=0,j=0,Z=0,te=0,re,W,J=g(V)&&s.getComponentMethod("calendars","getCal")(V),le=0;le<F.length;le++){if(W=F[le],!o(W)){te++;continue}if(!(W%a))if(J)try{re=J.fromJD(W/a+u),re.day()===1?re.month()===1?U++:j++:Z++}catch{}else re=new Date(W),re.getUTCDate()===1?re.getUTCMonth()===0?U++:j++:Z++}j+=U,Z+=j;var ue=F.length-te;return{exactYears:U/ue,exactMonths:j/ue,exactDays:Z/ue}}},{"../constants/numerical":479,"../registry":638,"./loggers":507,"./mod":510,"d3-time-format":120,"fast-isnumeric":190}],491:[function(e,k,z){var l=e("@plotly/d3"),o=e("./loggers"),c=e("./matrix"),p=e("gl-mat4");function t(m){var g;if(typeof m=="string"){if(g=document.getElementById(m),g===null)throw new Error("No DOM element with id '"+m+"' exists on the page.");return g}else if(m==null)throw new Error("DOM element provided is null or undefined");return m}function n(m){var g=l.select(m);return g.node()instanceof HTMLElement&&g.size()&&g.classed("js-plotly-plot")}function a(m){var g=m&&m.parentNode;g&&g.removeChild(m)}function i(m,g){r("global",m,g)}function r(m,g,x){var A="plotly.js-style-"+m,b=document.getElementById(A);b||(b=document.createElement("style"),b.setAttribute("id",A),b.appendChild(document.createTextNode("")),document.head.appendChild(b));var S=b.sheet;S.insertRule?S.insertRule(g+"{"+x+"}",0):S.addRule?S.addRule(g,x,0):o.warn("addStyleRule failed")}function f(m){var g="plotly.js-style-"+m,x=document.getElementById(g);x&&a(x)}function u(m){var g=h(m),x=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return g.forEach(function(A){var b=s(A);if(b){var S=c.convertCssMatrix(b);x=p.multiply(x,x,S)}}),x}function s(m){var g=window.getComputedStyle(m,null),x=g.getPropertyValue("-webkit-transform")||g.getPropertyValue("-moz-transform")||g.getPropertyValue("-ms-transform")||g.getPropertyValue("-o-transform")||g.getPropertyValue("transform");return x==="none"?null:x.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(A){return+A})}function h(m){for(var g=[];d(m);)g.push(m),m=m.parentNode;return g}function d(m){return m&&(m instanceof Element||m instanceof HTMLElement)}function y(m,g){return m&&g&&m.x===g.x&&m.y===g.y&&m.top===g.top&&m.left===g.left&&m.right===g.right&&m.bottom===g.bottom}k.exports={getGraphDiv:t,isPlotDiv:n,removeElement:a,addStyleRule:i,addRelatedStyleRule:r,deleteRelatedStyleRule:f,getFullTransformMatrix:u,getElementTransformMatrix:s,getElementAndAncestors:h,equalDomRects:y}},{"./loggers":507,"./matrix":509,"@plotly/d3":58,"gl-mat4":210}],492:[function(e,k,z){var l=e("events").EventEmitter,o={init:function(c){if(c._ev instanceof l)return c;var p=new l,t=new l;return c._ev=p,c._internalEv=t,c.on=p.on.bind(p),c.once=p.once.bind(p),c.removeListener=p.removeListener.bind(p),c.removeAllListeners=p.removeAllListeners.bind(p),c._internalOn=t.on.bind(t),c._internalOnce=t.once.bind(t),c._removeInternalListener=t.removeListener.bind(t),c._removeAllInternalListeners=t.removeAllListeners.bind(t),c.emit=function(n,a){typeof jQuery!="undefined"&&jQuery(c).trigger(n,a),p.emit(n,a),t.emit(n,a)},c},triggerHandler:function(c,p,t){var n,a;typeof jQuery!="undefined"&&(n=jQuery(c).triggerHandler(p,t));var i=c._ev;if(!i)return n;var r=i._events[p];if(!r)return n;function f(s){if(s.listener){if(i.removeListener(p,s.listener),!s.fired)return s.fired=!0,s.listener.apply(i,[t])}else return s.apply(i,[t])}r=Array.isArray(r)?r:[r];var u;for(u=0;u<r.length-1;u++)f(r[u]);return a=f(r[u]),n!==void 0?n:a},purge:function(c){return delete c._ev,delete c.on,delete c.once,delete c.removeListener,delete c.removeAllListeners,delete c.emit,delete c._ev,delete c._internalEv,delete c._internalOn,delete c._internalOnce,delete c._removeInternalListener,delete c._removeAllInternalListeners,c}};k.exports=o},{events:84}],493:[function(e,k,z){var l=e("./is_plain_object.js"),o=Array.isArray;function c(t,n){var a,i;for(a=0;a<t.length;a++){if(i=t[a],i!==null&&typeof i=="object")return!1;i!==void 0&&(n[a]=i)}return!0}z.extendFlat=function(){return p(arguments,!1,!1,!1)},z.extendDeep=function(){return p(arguments,!0,!1,!1)},z.extendDeepAll=function(){return p(arguments,!0,!0,!1)},z.extendDeepNoArrays=function(){return p(arguments,!0,!1,!0)};function p(t,n,a,i){var r=t[0],f=t.length,u,s,h,d,y,m,g;if(f===2&&o(r)&&o(t[1])&&r.length===0){if(g=c(t[1],r),g)return r;r.splice(0,r.length)}for(var x=1;x<f;x++){u=t[x];for(s in u)h=r[s],d=u[s],i&&o(d)?r[s]=d:n&&d&&(l(d)||(y=o(d)))?(y?(y=!1,m=h&&o(h)?h:[]):m=h&&l(h)?h:{},r[s]=p([m,d],n,a,i)):(typeof d!="undefined"||a)&&(r[s]=d)}return r}},{"./is_plain_object.js":504}],494:[function(e,k,z){k.exports=function(o){for(var c={},p=[],t=0,n=0;n<o.length;n++){var a=o[n];c[a]!==1&&(c[a]=1,p[t++]=a)}return p}},{}],495:[function(e,k,z){k.exports=function(t){for(var n=c(t)?o:l,a=[],i=0;i<t.length;i++){var r=t[i];n(r)&&a.push(r)}return a};function l(p){return p.visible===!0}function o(p){var t=p[0].trace;return t.visible===!0&&t._length!==0}function c(p){return Array.isArray(p)&&Array.isArray(p[0])&&p[0][0]&&p[0][0].trace}},{}],496:[function(e,k,z){var l=e("@plotly/d3"),o=e("country-regex"),c=e("@turf/area"),p=e("@turf/centroid"),t=e("@turf/bbox"),n=e("./identity"),a=e("./loggers"),i=e("./is_plain_object"),r=e("./nested_property"),f=e("./polygon"),u=Object.keys(o),s={"ISO-3":n,"USA-states":n,"country names":h};function h(S){for(var w=0;w<u.length;w++){var T=u[w],_=new RegExp(o[T]);if(_.test(S.trim().toLowerCase()))return T}return a.log("Unrecognized country name: "+S+"."),!1}function d(S,w,T){if(!w||typeof w!="string")return!1;var _=s[S](w),v,P,M;if(_){if(S==="USA-states")for(v=[],M=0;M<T.length;M++)P=T[M],P.properties&&P.properties.gu&&P.properties.gu==="USA"&&v.push(P);else v=T;for(M=0;M<v.length;M++)if(P=v[M],P.id===_)return P;a.log(["Location with id",_,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function y(S){var w=S.geometry,T=w.coordinates,_=S.id,v=[],P,M,E,D;function N(O){for(var I=0;I<O.length-1;I++)if(O[I][0]>0&&O[I+1][0]<0)return I;return null}switch(_==="RUS"||_==="FJI"?P=function(O){var I;if(N(O)===null)I=O;else for(I=new Array(O.length),D=0;D<O.length;D++)I[D]=[O[D][0]<0?O[D][0]+360:O[D][0],O[D][1]];v.push(f.tester(I))}:_==="ATA"?P=function(O){var I=N(O);if(I===null)return v.push(f.tester(O));var F=new Array(O.length+1),V=0;for(D=0;D<O.length;D++)D>I?F[V++]=[O[D][0]+360,O[D][1]]:D===I?(F[V++]=O[D],F[V++]=[O[D][0],-90]):F[V++]=O[D];var U=f.tester(F);U.pts.pop(),v.push(U)}:P=function(O){v.push(f.tester(O))},w.type){case"MultiPolygon":for(M=0;M<T.length;M++)for(E=0;E<T[M].length;E++)P(T[M][E]);break;case"Polygon":for(M=0;M<T.length;M++)P(T[M]);break}return v}function m(S){var w=S.geojson,T=window.PlotlyGeoAssets||{},_=typeof w=="string"?T[w]:w;return i(_)?_:(a.error("Oops ... something went wrong when fetching "+w),!1)}function g(S){var w=S[0].trace,T=m(w);if(!T)return!1;var _={},v=[],P;for(P=0;P<w._length;P++){var M=S[P];(M.loc||M.loc===0)&&(_[M.loc]=M)}function E(O){var I=r(O,w.featureidkey||"id").get(),F=_[I];if(F){var V=O.geometry;if(V.type==="Polygon"||V.type==="MultiPolygon"){var U={type:"Feature",id:I,geometry:V,properties:{}};U.properties.ct=x(U),F.fIn=O,F.fOut=U,v.push(U)}else a.log(["Location",F.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete _[I]}switch(T.type){case"FeatureCollection":var D=T.features;for(P=0;P<D.length;P++)E(D[P]);break;case"Feature":E(T);break;default:return a.warn(["Invalid GeoJSON type",(T.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var N in _)a.log(["Location *"+N+"*","does not have a matching feature with id-key","*"+w.featureidkey+"*."].join(" "));return v}function x(S){var w=S.geometry,T;if(w.type==="MultiPolygon")for(var _=w.coordinates,v=0,P=0;P<_.length;P++){var M={type:"Polygon",coordinates:_[P]},E=c.default(M);E>v&&(v=E,T=M)}else T=w;return p.default(T).geometry.coordinates}function A(S){var w=window.PlotlyGeoAssets||{},T=[];function _(D){return new Promise(function(N,O){l.json(D,function(I,F){if(I){delete w[D];var V=I.status===404?'GeoJSON at URL "'+D+'" does not exist.':"Unexpected error while fetching from "+D;return O(new Error(V))}return w[D]=F,N(F)})})}function v(D){return new Promise(function(N,O){var I=0,F=setInterval(function(){if(w[D]&&w[D]!=="pending")return clearInterval(F),N(w[D]);if(I>100)return clearInterval(F),O("Unexpected error while fetching from "+D);I++},50)})}for(var P=0;P<S.length;P++){var M=S[P][0].trace,E=M.geojson;typeof E=="string"&&(w[E]?w[E]==="pending"&&T.push(v(E)):(w[E]="pending",T.push(_(E))))}return T}function b(S){return t.default(S)}k.exports={locationToFeature:d,feature2polygons:y,getTraceGeojson:m,extractTraceFeature:g,fetchTraceGeoData:A,computeBbox:b}},{"./identity":501,"./is_plain_object":504,"./loggers":507,"./nested_property":511,"./polygon":515,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],497:[function(e,k,z){var l=e("../constants/numerical").BADNUM;z.calcTraceToLineCoords=function(o){for(var c=o[0].trace,p=c.connectgaps,t=[],n=[],a=0;a<o.length;a++){var i=o[a],r=i.lonlat;r[0]!==l?n.push(r):!p&&n.length>0&&(t.push(n),n=[])}return n.length>0&&t.push(n),t},z.makeLine=function(o){return o.length===1?{type:"LineString",coordinates:o[0]}:{type:"MultiLineString",coordinates:o}},z.makePolygon=function(o){if(o.length===1)return{type:"Polygon",coordinates:o};for(var c=new Array(o.length),p=0;p<o.length;p++)c[p]=[o[p]];return{type:"MultiPolygon",coordinates:c}},z.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":479}],498:[function(e,k,z){var l=e("./mod").mod;z.segmentsIntersect=o;function o(a,i,r,f,u,s,h,d){var y=r-a,m=u-a,g=h-u,x=f-i,A=s-i,b=d-s,S=y*b-g*x;if(S===0)return null;var w=(m*b-g*A)/S,T=(m*x-y*A)/S;return T<0||T>1||w<0||w>1?null:{x:a+y*w,y:i+x*w}}z.segmentDistance=function(i,r,f,u,s,h,d,y){if(o(i,r,f,u,s,h,d,y))return 0;var m=f-i,g=u-r,x=d-s,A=y-h,b=m*m+g*g,S=x*x+A*A,w=Math.min(c(m,g,b,s-i,h-r),c(m,g,b,d-i,y-r),c(x,A,S,i-s,r-h),c(x,A,S,f-s,u-h));return Math.sqrt(w)};function c(a,i,r,f,u){var s=f*a+u*i;if(s<0)return f*f+u*u;if(s>r){var h=f-a,d=u-i;return h*h+d*d}else{var y=f*i-u*a;return y*y/r}}var p,t,n;z.getTextLocation=function(i,r,f,u){if((i!==t||u!==n)&&(p={},t=i,n=u),p[f])return p[f];var s=i.getPointAtLength(l(f-u/2,r)),h=i.getPointAtLength(l(f+u/2,r)),d=Math.atan((h.y-s.y)/(h.x-s.x)),y=i.getPointAtLength(l(f,r)),m=(y.x*4+s.x+h.x)/6,g=(y.y*4+s.y+h.y)/6,x={x:m,y:g,theta:d};return p[f]=x,x},z.clearLocationCache=function(){t=null},z.getVisibleSegment=function(i,r,f){var u=r.left,s=r.right,h=r.top,d=r.bottom,y=0,m=i.getTotalLength(),g=m,x,A;function b(w){var T=i.getPointAtLength(w);w===0?x=T:w===m&&(A=T);var _=T.x<u?u-T.x:T.x>s?T.x-s:0,v=T.y<h?h-T.y:T.y>d?T.y-d:0;return Math.sqrt(_*_+v*v)}for(var S=b(y);S;){if(y+=S+f,y>g)return;S=b(y)}for(S=b(g);S;){if(g-=S+f,y>g)return;S=b(g)}return{min:y,max:g,len:g-y,total:m,isClosed:y===0&&g===m&&Math.abs(x.x-A.x)<.1&&Math.abs(x.y-A.y)<.1}},z.findPointOnPath=function(i,r,f,u){u=u||{};for(var s=u.pathLength||i.getTotalLength(),h=u.tolerance||.001,d=u.iterationLimit||30,y=i.getPointAtLength(0)[f]>i.getPointAtLength(s)[f]?-1:1,m=0,g=0,x=s,A,b,S;m<d;){if(A=(g+x)/2,b=i.getPointAtLength(A),S=b[f]-r,Math.abs(S)<h)return b;y*S>0?x=A:g=A,m++}return b}},{"./mod":510}],499:[function(e,k,z){var l=e("fast-isnumeric"),o=e("tinycolor2"),c=e("color-normalize"),p=e("../components/colorscale"),t=e("../components/color/attributes").defaultLine,n=e("./array").isArrayOrTypedArray,a=c(t),i=1;function r(d,y){var m=d;return m[3]*=y,m}function f(d){if(l(d))return a;var y=c(d);return y.length?y:a}function u(d){return l(d)?d:i}function s(d,y,m){var g=d.color,x=n(g),A=n(y),b=p.extractOpts(d),S=[],w,T,_,v,P;if(b.colorscale!==void 0?w=p.makeColorScaleFuncFromTrace(d):w=f,x?T=function(E,D){return E[D]===void 0?a:c(w(E[D]))}:T=f,A?_=function(E,D){return E[D]===void 0?i:u(E[D])}:_=u,x||A)for(var M=0;M<m;M++)v=T(g,M),P=_(y,M),S[M]=r(v,P);else S=r(c(g),y);return S}function h(d){var y=p.extractOpts(d),m=y.colorscale;return y.reversescale&&(m=p.flipScale(y.colorscale)),m.map(function(g){var x=g[0],A=o(g[1]),b=A.toRgb();return{index:x,rgb:[b.r,b.g,b.b,b.a]}})}k.exports={formatColor:s,parseColorScale:h}},{"../components/color/attributes":365,"../components/colorscale":378,"./array":485,"color-normalize":89,"fast-isnumeric":190,tinycolor2:312}],500:[function(e,k,z){var l=e("./identity");function o(c){return[c]}k.exports={keyFun:function(c){return c.key},repeat:o,descend:l,wrap:o,unwrap:function(c){return c[0]}}},{"./identity":501}],501:[function(e,k,z){k.exports=function(o){return o}},{}],502:[function(e,k,z){k.exports=function(o,c){if(!c)return o;var p=1/Math.abs(c),t=p>1?(p*o+p*c)/p:o+c,n=String(t).length;if(n>16){var a=String(c).length,i=String(o).length;if(n>=i+a){var r=parseFloat(t).toPrecision(12);r.indexOf("e+")===-1&&(t=+r)}}return t}},{}],503:[function(e,k,z){var l=e("@plotly/d3"),o=e("d3-time-format").utcFormat,c=e("d3-format").format,p=e("fast-isnumeric"),t=e("../constants/numerical"),n=t.FP_SAFE,a=-n,i=t.BADNUM,r=k.exports={};r.adjustFormat=function(ue){return!ue||/^\d[.]\df/.test(ue)||/[.]\d%/.test(ue)?ue:ue==="0.f"?"~f":/^\d%/.test(ue)?"~%":/^\ds/.test(ue)?"~s":!/^[~,.0$]/.test(ue)&&/[&fps]/.test(ue)?"~"+ue:ue};var f={};r.warnBadFormat=function(le){var ue=String(le);f[ue]||(f[ue]=1,r.warn('encountered bad format: "'+ue+'"'))},r.noFormat=function(le){return String(le)},r.numberFormat=function(le){var ue;try{ue=c(r.adjustFormat(le))}catch{return r.warnBadFormat(le),r.noFormat}return ue},r.nestedProperty=e("./nested_property"),r.keyedContainer=e("./keyed_container"),r.relativeAttr=e("./relative_attr"),r.isPlainObject=e("./is_plain_object"),r.toLogRange=e("./to_log_range"),r.relinkPrivateKeys=e("./relink_private");var u=e("./array");r.isTypedArray=u.isTypedArray,r.isArrayOrTypedArray=u.isArrayOrTypedArray,r.isArray1D=u.isArray1D,r.ensureArray=u.ensureArray,r.concat=u.concat,r.maxRowLength=u.maxRowLength,r.minRowLength=u.minRowLength;var s=e("./mod");r.mod=s.mod,r.modHalf=s.modHalf;var h=e("./coerce");r.valObjectMeta=h.valObjectMeta,r.coerce=h.coerce,r.coerce2=h.coerce2,r.coerceFont=h.coerceFont,r.coercePattern=h.coercePattern,r.coerceHoverinfo=h.coerceHoverinfo,r.coerceSelectionMarkerOpacity=h.coerceSelectionMarkerOpacity,r.validate=h.validate;var d=e("./dates");r.dateTime2ms=d.dateTime2ms,r.isDateTime=d.isDateTime,r.ms2DateTime=d.ms2DateTime,r.ms2DateTimeLocal=d.ms2DateTimeLocal,r.cleanDate=d.cleanDate,r.isJSDate=d.isJSDate,r.formatDate=d.formatDate,r.incrementMonth=d.incrementMonth,r.dateTick0=d.dateTick0,r.dfltRange=d.dfltRange,r.findExactDates=d.findExactDates,r.MIN_MS=d.MIN_MS,r.MAX_MS=d.MAX_MS;var y=e("./search");r.findBin=y.findBin,r.sorterAsc=y.sorterAsc,r.sorterDes=y.sorterDes,r.distinctVals=y.distinctVals,r.roundUp=y.roundUp,r.sort=y.sort,r.findIndexOfMin=y.findIndexOfMin,r.sortObjectKeys=e("./sort_object_keys");var m=e("./stats");r.aggNums=m.aggNums,r.len=m.len,r.mean=m.mean,r.median=m.median,r.midRange=m.midRange,r.variance=m.variance,r.stdev=m.stdev,r.interp=m.interp;var g=e("./matrix");r.init2dArray=g.init2dArray,r.transposeRagged=g.transposeRagged,r.dot=g.dot,r.translationMatrix=g.translationMatrix,r.rotationMatrix=g.rotationMatrix,r.rotationXYMatrix=g.rotationXYMatrix,r.apply3DTransform=g.apply3DTransform,r.apply2DTransform=g.apply2DTransform,r.apply2DTransform2=g.apply2DTransform2,r.convertCssMatrix=g.convertCssMatrix,r.inverseTransformMatrix=g.inverseTransformMatrix;var x=e("./angles");r.deg2rad=x.deg2rad,r.rad2deg=x.rad2deg,r.angleDelta=x.angleDelta,r.angleDist=x.angleDist,r.isFullCircle=x.isFullCircle,r.isAngleInsideSector=x.isAngleInsideSector,r.isPtInsideSector=x.isPtInsideSector,r.pathArc=x.pathArc,r.pathSector=x.pathSector,r.pathAnnulus=x.pathAnnulus;var A=e("./anchor_utils");r.isLeftAnchor=A.isLeftAnchor,r.isCenterAnchor=A.isCenterAnchor,r.isRightAnchor=A.isRightAnchor,r.isTopAnchor=A.isTopAnchor,r.isMiddleAnchor=A.isMiddleAnchor,r.isBottomAnchor=A.isBottomAnchor;var b=e("./geometry2d");r.segmentsIntersect=b.segmentsIntersect,r.segmentDistance=b.segmentDistance,r.getTextLocation=b.getTextLocation,r.clearLocationCache=b.clearLocationCache,r.getVisibleSegment=b.getVisibleSegment,r.findPointOnPath=b.findPointOnPath;var S=e("./extend");r.extendFlat=S.extendFlat,r.extendDeep=S.extendDeep,r.extendDeepAll=S.extendDeepAll,r.extendDeepNoArrays=S.extendDeepNoArrays;var w=e("./loggers");r.log=w.log,r.warn=w.warn,r.error=w.error;var T=e("./regex");r.counterRegex=T.counter;var _=e("./throttle");r.throttle=_.throttle,r.throttleDone=_.done,r.clearThrottle=_.clear;var v=e("./dom");r.getGraphDiv=v.getGraphDiv,r.isPlotDiv=v.isPlotDiv,r.removeElement=v.removeElement,r.addStyleRule=v.addStyleRule,r.addRelatedStyleRule=v.addRelatedStyleRule,r.deleteRelatedStyleRule=v.deleteRelatedStyleRule,r.getFullTransformMatrix=v.getFullTransformMatrix,r.getElementTransformMatrix=v.getElementTransformMatrix,r.getElementAndAncestors=v.getElementAndAncestors,r.equalDomRects=v.equalDomRects,r.clearResponsive=e("./clear_responsive"),r.preserveDrawingBuffer=e("./preserve_drawing_buffer"),r.makeTraceGroups=e("./make_trace_groups"),r._=e("./localize"),r.notifier=e("./notifier"),r.filterUnique=e("./filter_unique"),r.filterVisible=e("./filter_visible"),r.pushUnique=e("./push_unique"),r.increment=e("./increment"),r.cleanNumber=e("./clean_number"),r.ensureNumber=function(ue){return p(ue)?(ue=Number(ue),ue>n||ue<a?i:ue):i},r.isIndex=function(le,ue){return ue!==void 0&&le>=ue?!1:p(le)&&le>=0&&le%1==0},r.noop=e("./noop"),r.identity=e("./identity"),r.repeat=function(le,ue){for(var se=new Array(ue),G=0;G<ue;G++)se[G]=le;return se},r.swapAttrs=function(le,ue,se,G){se||(se="x"),G||(G="y");for(var Y=0;Y<ue.length;Y++){var ee=ue[Y],$=r.nestedProperty(le,ee.replace("?",se)),K=r.nestedProperty(le,ee.replace("?",G)),Q=$.get();$.set(K.get()),K.set(Q)}},r.raiseToTop=function(ue){ue.parentNode.appendChild(ue)},r.cancelTransition=function(le){return le.transition().duration(0)},r.constrain=function(le,ue,se){return ue>se?Math.max(se,Math.min(ue,le)):Math.max(ue,Math.min(se,le))},r.bBoxIntersect=function(le,ue,se){return se=se||0,le.left<=ue.right+se&&ue.left<=le.right+se&&le.top<=ue.bottom+se&&ue.top<=le.bottom+se},r.simpleMap=function(le,ue,se,G,Y){for(var ee=le.length,$=new Array(ee),K=0;K<ee;K++)$[K]=ue(le[K],se,G,Y);return $},r.randstr=function le(ue,se,G,Y){if(G||(G=16),se===void 0&&(se=24),se<=0)return"0";var ee=Math.log(Math.pow(2,se))/Math.log(G),$="",K,Q,ae;for(K=2;ee===1/0;K*=2)ee=Math.log(Math.pow(2,se/K))/Math.log(G)*K;var ie=ee-Math.floor(ee);for(K=0;K<Math.floor(ee);K++)ae=Math.floor(Math.random()*G).toString(G),$=ae+$;ie&&(Q=Math.pow(G,ie),ae=Math.floor(Math.random()*Q).toString(G),$=ae+$);var oe=parseInt($,G);return ue&&ue[$]||oe!==1/0&&oe>=Math.pow(2,se)?Y>10?(r.warn("randstr failed uniqueness"),$):le(ue,se,G,(Y||0)+1):$},r.OptionControl=function(le,ue){le||(le={}),ue||(ue="opt");var se={};return se.optionList=[],se._newoption=function(G){G[ue]=le,se[G.name]=G,se.optionList.push(G)},se["_"+ue]=le,se},r.smooth=function(le,ue){if(ue=Math.round(ue)||0,ue<2)return le;var se=le.length,G=2*se,Y=2*ue-1,ee=new Array(Y),$=new Array(se),K,Q,ae,ie;for(K=0;K<Y;K++)ee[K]=(1-Math.cos(Math.PI*(K+1)/ue))/(2*ue);for(K=0;K<se;K++){for(ie=0,Q=0;Q<Y;Q++)ae=K+Q+1-ue,ae<-se?ae-=G*Math.round(ae/G):ae>=G&&(ae-=G*Math.floor(ae/G)),ae<0?ae=-1-ae:ae>=se&&(ae=G-1-ae),ie+=le[ae]*ee[Q];$[K]=ie}return $},r.syncOrAsync=function(le,ue,se){var G,Y;function ee(){return r.syncOrAsync(le,ue,se)}for(;le.length;)if(Y=le.splice(0,1)[0],G=Y(ue),G&&G.then)return G.then(ee);return se&&se(ue)},r.stripTrailingSlash=function(le){return le.substr(-1)==="/"?le.substr(0,le.length-1):le},r.noneOrAll=function(le,ue,se){if(!!le){var G=!1,Y=!0,ee,$;for(ee=0;ee<se.length;ee++)$=le[se[ee]],$!=null?G=!0:Y=!1;if(G&&!Y)for(ee=0;ee<se.length;ee++)le[se[ee]]=ue[se[ee]]}},r.mergeArray=function(le,ue,se,G){var Y=typeof G=="function";if(r.isArrayOrTypedArray(le))for(var ee=Math.min(le.length,ue.length),$=0;$<ee;$++){var K=le[$];ue[$][se]=Y?G(K):K}},r.mergeArrayCastPositive=function(le,ue,se){return r.mergeArray(le,ue,se,function(G){var Y=+G;return isFinite(Y)&&Y>0?Y:0})},r.fillArray=function(le,ue,se,G){if(G=G||r.identity,r.isArrayOrTypedArray(le))for(var Y=0;Y<ue.length;Y++)ue[Y][se]=G(le[Y])},r.castOption=function(le,ue,se,G){G=G||r.identity;var Y=r.nestedProperty(le,se).get();return r.isArrayOrTypedArray(Y)?Array.isArray(ue)&&r.isArrayOrTypedArray(Y[ue[0]])?G(Y[ue[0]][ue[1]]):G(Y[ue]):Y},r.extractOption=function(le,ue,se,G){if(se in le)return le[se];var Y=r.nestedProperty(ue,G).get();if(!Array.isArray(Y))return Y};function P(le){var ue={};for(var se in le)for(var G=le[se],Y=0;Y<G.length;Y++)ue[G[Y]]=+se;return ue}r.tagSelected=function(le,ue,se){var G=ue.selectedpoints,Y=ue._indexToPoints,ee;Y&&(ee=P(Y));function $(oe){return oe!==void 0&&oe<le.length}for(var K=0;K<G.length;K++){var Q=G[K];if(r.isIndex(Q)||r.isArrayOrTypedArray(Q)&&r.isIndex(Q[0])&&r.isIndex(Q[1])){var ae=ee?ee[Q]:Q,ie=se?se[ae]:ae;$(ie)&&(le[ie].selected=1)}}},r.selIndices2selPoints=function(le){var ue=le.selectedpoints,se=le._indexToPoints;if(se){for(var G=P(se),Y=[],ee=0;ee<ue.length;ee++){var $=ue[ee];if(r.isIndex($)){var K=G[$];r.isIndex(K)&&Y.push(K)}}return Y}else return ue},r.getTargetArray=function(le,ue){var se=ue.target;if(typeof se=="string"&&se){var G=r.nestedProperty(le,se).get();return Array.isArray(G)?G:!1}else if(Array.isArray(se))return se;return!1},r.minExtend=function(le,ue){var se={};typeof ue!="object"&&(ue={});var G=3,Y=Object.keys(le),ee,$,K;for(ee=0;ee<Y.length;ee++)$=Y[ee],K=le[$],!($.charAt(0)==="_"||typeof K=="function")&&($==="module"?se[$]=K:Array.isArray(K)?$==="colorscale"?se[$]=K.slice():se[$]=K.slice(0,G):r.isTypedArray(K)?se[$]=K.subarray(0,G):K&&typeof K=="object"?se[$]=r.minExtend(le[$],ue[$]):se[$]=K);for(Y=Object.keys(ue),ee=0;ee<Y.length;ee++)$=Y[ee],K=ue[$],(typeof K!="object"||!($ in se)||typeof se[$]!="object")&&(se[$]=K);return se},r.titleCase=function(le){return le.charAt(0).toUpperCase()+le.substr(1)},r.containsAny=function(le,ue){for(var se=0;se<ue.length;se++)if(le.indexOf(ue[se])!==-1)return!0;return!1},r.isIE=function(){return typeof window.navigator.msSaveBlob!="undefined"};var M=/Version\/[\d\.]+.*Safari/;r.isSafari=function(){return M.test(window.navigator.userAgent)};var E=/iPad|iPhone|iPod/;r.isIOS=function(){return E.test(window.navigator.userAgent)};var D=/Firefox\/(\d+)\.\d+/;r.getFirefoxVersion=function(){var le=D.exec(window.navigator.userAgent);if(le&&le.length===2){var ue=parseInt(le[1]);if(!isNaN(ue))return ue}return null},r.isD3Selection=function(le){return le instanceof l.selection},r.ensureSingle=function(le,ue,se,G){var Y=le.select(ue+(se?"."+se:""));if(Y.size())return Y;var ee=le.append(ue);return se&&ee.classed(se,!0),G&&ee.call(G),ee},r.ensureSingleById=function(le,ue,se,G){var Y=le.select(ue+"#"+se);if(Y.size())return Y;var ee=le.append(ue).attr("id",se);return G&&ee.call(G),ee},r.objectFromPath=function(le,ue){for(var se=le.split("."),G,Y=G={},ee=0;ee<se.length;ee++){var $=se[ee],K=null,Q=se[ee].match(/(.*)\[([0-9]+)\]/);Q?($=Q[1],K=Q[2],G=G[$]=[],ee===se.length-1?G[K]=ue:G[K]={},G=G[K]):(ee===se.length-1?G[$]=ue:G[$]={},G=G[$])}return Y};var N=/^([^\[\.]+)\.(.+)?/,O=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;r.expandObjectPaths=function(le){var ue,se,G,Y,ee,$,K;if(typeof le=="object"&&!Array.isArray(le))for(se in le)le.hasOwnProperty(se)&&((ue=se.match(N))?(Y=le[se],G=ue[1],delete le[se],le[G]=r.extendDeepNoArrays(le[G]||{},r.objectFromPath(se,r.expandObjectPaths(Y))[G])):(ue=se.match(O))?(Y=le[se],G=ue[1],ee=parseInt(ue[2]),delete le[se],le[G]=le[G]||[],ue[3]==="."?(K=ue[4],$=le[G][ee]=le[G][ee]||{},r.extendDeepNoArrays($,r.objectFromPath(K,r.expandObjectPaths(Y)))):le[G][ee]=r.expandObjectPaths(Y)):le[se]=r.expandObjectPaths(le[se]));return le},r.numSeparate=function(le,ue,se){if(se||(se=!1),typeof ue!="string"||ue.length===0)throw new Error("Separator string required for formatting!");typeof le=="number"&&(le=String(le));var G=/(\d+)(\d{3})/,Y=ue.charAt(0),ee=ue.charAt(1),$=le.split("."),K=$[0],Q=$.length>1?Y+$[1]:"";if(ee&&($.length>1||K.length>4||se))for(;G.test(K);)K=K.replace(G,"$1"+ee+"$2");return K+Q},r.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var I=/^\w*$/;r.templateString=function(le,ue){var se={};return le.replace(r.TEMPLATE_STRING_REGEX,function(G,Y){var ee;return I.test(Y)?ee=ue[Y]:(se[Y]=se[Y]||r.nestedProperty(ue,Y).get,ee=se[Y]()),r.isValidTextValue(ee)?ee:""})};var F={max:10,count:0,name:"hovertemplate"};r.hovertemplateString=function(){return j.apply(F,arguments)};var V={max:10,count:0,name:"texttemplate"};r.texttemplateString=function(){return j.apply(V,arguments)};var U=/^[:|\|]/;function j(le,ue,se){var G=this,Y=arguments;ue||(ue={});var ee={};return le.replace(r.TEMPLATE_STRING_REGEX,function($,K,Q){var ae=K==="xother"||K==="yother",ie=K==="_xother"||K==="_yother",oe=K==="_xother_"||K==="_yother_",fe=K==="xother_"||K==="yother_",ye=ae||ie||fe||oe,ce=K;(ie||oe)&&(ce=ce.substring(1)),(fe||oe)&&(ce=ce.substring(0,ce.length-1));var me;if(ye){if(me=ue[ce],me===void 0)return""}else{var xe,ke;for(ke=3;ke<Y.length;ke++)if(xe=Y[ke],!!xe){if(xe.hasOwnProperty(ce)){me=xe[ce];break}if(I.test(ce)||(me=r.nestedProperty(xe,ce).get(),me=ee[ce]||r.nestedProperty(xe,ce).get(),me&&(ee[ce]=me)),me!==void 0)break}}if(me===void 0&&G)return G.count<G.max&&(r.warn("Variable '"+ce+"' in "+G.name+" could not be found!"),me=$),G.count===G.max&&r.warn("Too many "+G.name+" warnings - additional warnings will be suppressed"),G.count++,$;if(Q){var Ae;if(Q[0]===":"&&(Ae=se?se.numberFormat:r.numberFormat,me=Ae(Q.replace(U,""))(me)),Q[0]==="|"){Ae=se?se.timeFormat:o;var Oe=r.dateTime2ms(me);me=r.formatDate(Oe,Q.replace(U,""),!1,Ae)}}else{var He=ce+"Label";ue.hasOwnProperty(He)&&(me=ue[He])}return ye&&(me="("+me+")",(ie||oe)&&(me=" "+me),(fe||oe)&&(me=me+" ")),me})}var Z=48,te=57;r.subplotSort=function(le,ue){for(var se=Math.min(le.length,ue.length)+1,G=0,Y=0,ee=0;ee<se;ee++){var $=le.charCodeAt(ee)||0,K=ue.charCodeAt(ee)||0,Q=$>=Z&&$<=te,ae=K>=Z&&K<=te;if(Q&&(G=10*G+$-Z),ae&&(Y=10*Y+K-Z),!Q||!ae){if(G!==Y)return G-Y;if($!==K)return $-K}}return Y-G};var re=2e9;r.seedPseudoRandom=function(){re=2e9},r.pseudoRandom=function(){var le=re;return re=(69069*re+1)%4294967296,Math.abs(re-le)<429496729?r.pseudoRandom():re/4294967296},r.fillText=function(le,ue,se){var G=Array.isArray(se)?function($){se.push($)}:function($){se.text=$},Y=r.extractOption(le,ue,"htx","hovertext");if(r.isValidTextValue(Y))return G(Y);var ee=r.extractOption(le,ue,"tx","text");if(r.isValidTextValue(ee))return G(ee)},r.isValidTextValue=function(le){return le||le===0},r.formatPercent=function(le,ue){ue=ue||0;for(var se=(Math.round(100*le*Math.pow(10,ue))*Math.pow(.1,ue)).toFixed(ue)+"%",G=0;G<ue;G++)se.indexOf(".")!==-1&&(se=se.replace("0%","%"),se=se.replace(".%","%"));return se},r.isHidden=function(le){var ue=window.getComputedStyle(le).display;return!ue||ue==="none"},r.strTranslate=function(le,ue){return le||ue?"translate("+le+","+ue+")":""},r.strRotate=function(le){return le?"rotate("+le+")":""},r.strScale=function(le){return le!==1?"scale("+le+")":""},r.getTextTransform=function(le){var ue=le.noCenter,se=le.textX,G=le.textY,Y=le.targetX,ee=le.targetY,$=le.anchorX||0,K=le.anchorY||0,Q=le.rotate,ae=le.scale;return ae?ae>1&&(ae=1):ae=0,r.strTranslate(Y-ae*(se+$),ee-ae*(G+K))+r.strScale(ae)+(Q?"rotate("+Q+(ue?"":" "+se+" "+G)+")":"")},r.ensureUniformFontSize=function(le,ue){var se=r.extendFlat({},ue);return se.size=Math.max(ue.size,le._fullLayout.uniformtext.minsize||0),se},r.join2=function(le,ue,se){var G=le.length;return G>1?le.slice(0,-1).join(ue)+se+le[G-1]:le.join(ue)},r.bigFont=function(le){return Math.round(1.2*le)};var W=r.getFirefoxVersion(),J=W!==null&&W<86;r.getPositionFromD3Event=function(){return J?[l.event.layerX,l.event.layerY]:[l.event.offsetX,l.event.offsetY]}},{"../constants/numerical":479,"./anchor_utils":483,"./angles":484,"./array":485,"./clean_number":486,"./clear_responsive":488,"./coerce":489,"./dates":490,"./dom":491,"./extend":493,"./filter_unique":494,"./filter_visible":495,"./geometry2d":498,"./identity":501,"./increment":502,"./is_plain_object":504,"./keyed_container":505,"./localize":506,"./loggers":507,"./make_trace_groups":508,"./matrix":509,"./mod":510,"./nested_property":511,"./noop":512,"./notifier":513,"./preserve_drawing_buffer":517,"./push_unique":518,"./regex":520,"./relative_attr":521,"./relink_private":522,"./search":523,"./sort_object_keys":526,"./stats":527,"./throttle":530,"./to_log_range":531,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],504:[function(e,k,z){k.exports=function(o){return window&&window.process&&window.process.versions?Object.prototype.toString.call(o)==="[object Object]":Object.prototype.toString.call(o)==="[object Object]"&&Object.getPrototypeOf(o).hasOwnProperty("hasOwnProperty")}},{}],505:[function(e,k,z){var l=e("./nested_property"),o=/^\w*$/,c=0,p=1,t=2,n=3,a=4;k.exports=function(r,f,u,s){u=u||"name",s=s||"value";var h,d,y,m={};f&&f.length?(y=l(r,f),d=y.get()):d=r,f=f||"";var g={};if(d)for(h=0;h<d.length;h++)g[d[h][u]]=h;var x=o.test(s),A={set:function(b,S){var w=S===null?a:c;if(!d){if(!y||w===a)return;d=[],y.set(d)}var T=g[b];if(T===void 0){if(w===a)return;w=w|n,T=d.length,g[b]=T}else S!==(x?d[T][s]:l(d[T],s).get())&&(w=w|t);var _=d[T]=d[T]||{};return _[u]=b,x?_[s]=S:l(_,s).set(S),S!==null&&(w=w&~a),m[T]=m[T]|w,A},get:function(b){if(!!d){var S=g[b];if(S!==void 0)return x?d[S][s]:l(d[S],s).get()}},rename:function(b,S){var w=g[b];return w===void 0||(m[w]=m[w]|p,g[S]=w,delete g[b],d[w][u]=S),A},remove:function(b){var S=g[b];if(S===void 0)return A;var w=d[S];if(Object.keys(w).length>2)return m[S]=m[S]|t,A.set(b,null);if(x){for(h=S;h<d.length;h++)m[h]=m[h]|n;for(h=S;h<d.length;h++)g[d[h][u]]--;d.splice(S,1),delete g[b]}else l(w,s).set(null),m[S]=m[S]|t|a;return A},constructUpdate:function(){for(var b,S,w={},T=Object.keys(m),_=0;_<T.length;_++)S=T[_],b=f+"["+S+"]",d[S]?(m[S]&p&&(w[b+"."+u]=d[S][u]),m[S]&t&&(x?w[b+"."+s]=m[S]&a?null:d[S][s]:w[b+"."+s]=m[S]&a?null:l(d[S],s).get())):w[b]=null;return w}};return A}},{"./nested_property":511}],506:[function(e,k,z){var l=e("../registry");k.exports=function(c,p){for(var t=c._context.locale,n=0;n<2;n++){for(var a=c._context.locales,i=0;i<2;i++){var r=(a[t]||{}).dictionary;if(r){var f=r[p];if(f)return f}a=l.localeRegistry}var u=t.split("-")[0];if(u===t)break;t=u}return p}},{"../registry":638}],507:[function(e,k,z){var l=e("../plot_api/plot_config").dfltConfig,o=e("./notifier"),c=k.exports={};c.log=function(){var p;if(l.logging>1){var t=["LOG:"];for(p=0;p<arguments.length;p++)t.push(arguments[p]);console.trace.apply(console,t)}if(l.notifyOnLogging>1){var n=[];for(p=0;p<arguments.length;p++)n.push(arguments[p]);o(n.join("<br>"),"long")}},c.warn=function(){var p;if(l.logging>0){var t=["WARN:"];for(p=0;p<arguments.length;p++)t.push(arguments[p]);console.trace.apply(console,t)}if(l.notifyOnLogging>0){var n=[];for(p=0;p<arguments.length;p++)n.push(arguments[p]);o(n.join("<br>"),"stick")}},c.error=function(){var p;if(l.logging>0){var t=["ERROR:"];for(p=0;p<arguments.length;p++)t.push(arguments[p]);console.error.apply(console,t)}if(l.notifyOnLogging>0){var n=[];for(p=0;p<arguments.length;p++)n.push(arguments[p]);o(n.join("<br>"),"stick")}}},{"../plot_api/plot_config":541,"./notifier":513}],508:[function(e,k,z){var l=e("@plotly/d3");k.exports=function(c,p,t){var n=c.selectAll("g."+t.replace(/\s/g,".")).data(p,function(i){return i[0].trace.uid});n.exit().remove(),n.enter().append("g").attr("class",t),n.order();var a=c.classed("rangeplot")?"nodeRangePlot3":"node3";return n.each(function(i){i[0][a]=l.select(this)}),n}},{"@plotly/d3":58}],509:[function(e,k,z){var l=e("gl-mat4");z.init2dArray=function(o,c){for(var p=new Array(o),t=0;t<o;t++)p[t]=new Array(c);return p},z.transposeRagged=function(o){var c=0,p=o.length,t,n;for(t=0;t<p;t++)c=Math.max(c,o[t].length);var a=new Array(c);for(t=0;t<c;t++)for(a[t]=new Array(p),n=0;n<p;n++)a[t][n]=o[n][t];return a},z.dot=function(o,c){if(!(o.length&&c.length)||o.length!==c.length)return null;var p=o.length,t,n;if(o[0].length)for(t=new Array(p),n=0;n<p;n++)t[n]=z.dot(o[n],c);else if(c[0].length){var a=z.transposeRagged(c);for(t=new Array(a.length),n=0;n<a.length;n++)t[n]=z.dot(o,a[n])}else for(t=0,n=0;n<p;n++)t+=o[n]*c[n];return t},z.translationMatrix=function(o,c){return[[1,0,o],[0,1,c],[0,0,1]]},z.rotationMatrix=function(o){var c=o*Math.PI/180;return[[Math.cos(c),-Math.sin(c),0],[Math.sin(c),Math.cos(c),0],[0,0,1]]},z.rotationXYMatrix=function(o,c,p){return z.dot(z.dot(z.translationMatrix(c,p),z.rotationMatrix(o)),z.translationMatrix(-c,-p))},z.apply3DTransform=function(o){return function(){var c=arguments,p=arguments.length===1?c[0]:[c[0],c[1],c[2]||0];return z.dot(o,[p[0],p[1],p[2],1]).slice(0,3)}},z.apply2DTransform=function(o){return function(){var c=arguments;c.length===3&&(c=c[0]);var p=arguments.length===1?c[0]:[c[0],c[1]];return z.dot(o,[p[0],p[1],1]).slice(0,2)}},z.apply2DTransform2=function(o){var c=z.apply2DTransform(o);return function(p){return c(p.slice(0,2)).concat(c(p.slice(2,4)))}},z.convertCssMatrix=function(o){if(o){var c=o.length;if(c===16)return o;if(c===6)return[o[0],o[1],0,0,o[2],o[3],0,0,0,0,1,0,o[4],o[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},z.inverseTransformMatrix=function(o){var c=[];return l.invert(c,o),[[c[0],c[1],c[2],c[3]],[c[4],c[5],c[6],c[7]],[c[8],c[9],c[10],c[11]],[c[12],c[13],c[14],c[15]]]}},{"gl-mat4":210}],510:[function(e,k,z){function l(c,p){var t=c%p;return t<0?t+p:t}function o(c,p){return Math.abs(c)>p/2?c-Math.round(c/p)*p:c}k.exports={mod:l,modHalf:o}},{}],511:[function(e,k,z){var l=e("fast-isnumeric"),o=e("./array").isArrayOrTypedArray;k.exports=function(s,h){if(l(h))h=String(h);else if(typeof h!="string"||h.substr(h.length-4)==="[-1]")throw"bad property string";for(var d=0,y=h.split("."),m,g,x;d<y.length;){if(m=String(y[d]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),m){if(m[1])y[d]=m[1];else if(d===0)y.splice(0,1);else throw"bad property string";for(g=m[2].substr(1,m[2].length-2).split("]["),x=0;x<g.length;x++)d++,y.splice(d,0,Number(g[x]))}d++}return typeof s!="object"?f(s,h,y):{set:n(s,y,h),get:c(s,y),astr:h,parts:y,obj:s}};function c(u,s){return function(){var h=u,d,y,m,g,x;for(g=0;g<s.length-1;g++){if(d=s[g],d===-1){for(y=!0,m=[],x=0;x<h.length;x++)m[x]=c(h[x],s.slice(g+1))(),m[x]!==m[0]&&(y=!1);return y?m[0]:m}if(typeof d=="number"&&!o(h)||(h=h[d],typeof h!="object"||h===null))return}if(!(typeof h!="object"||h===null)&&(m=h[s[g]],m!==null))return m}}var p=/(^|\.)args\[/;function t(u,s){return u===void 0||u===null&&!s.match(p)}function n(u,s,h){return function(d){var y=u,m="",g=t(d,h),x,A;for(A=0;A<s.length-1;A++){if(x=s[A],typeof x=="number"&&!o(y))throw"array index but container is not an array";if(x===-1){if(g=!i(y,s.slice(A+1),d,h),g)break;return}if(!r(y,x,s[A+1],g))break;if(y=y[x],typeof y!="object"||y===null)throw"container is not an object";m=a(m,x)}if(g){if(A===s.length-1&&(delete y[s[A]],Array.isArray(y)&&+s[A]==y.length-1))for(;y.length&&y[y.length-1]===void 0;)y.pop()}else y[s[A]]=d}}function a(u,s){var h=s;return l(s)?h="["+s+"]":u&&(h="."+s),u+h}function i(u,s,h,d){var y=o(h),m=!0,g=h,x=d.replace("-1",0),A=y?!1:t(h,x),b=s[0],S;for(S=0;S<u.length;S++)x=d.replace("-1",S),y&&(g=h[S%h.length],A=t(g,x)),A&&(m=!1),!!r(u,S,b,A)&&n(u[S],s,d.replace("-1",S))(g);return m}function r(u,s,h,d){if(u[s]===void 0){if(d)return!1;typeof h=="number"?u[s]=[]:u[s]={}}return!0}function f(u,s,h){return{set:function(){throw"bad container"},get:function(){},astr:s,parts:h,obj:u}}},{"./array":485,"fast-isnumeric":190}],512:[function(e,k,z){k.exports=function(){}},{}],513:[function(e,k,z){var l=e("@plotly/d3"),o=e("fast-isnumeric"),c=[];k.exports=function(p,t){if(c.indexOf(p)!==-1)return;c.push(p);var n=1e3;o(t)?n=t:t==="long"&&(n=3e3);var a=l.select("body").selectAll(".plotly-notifier").data([0]);a.enter().append("div").classed("plotly-notifier",!0);var i=a.selectAll(".notifier-note").data(c);function r(f){f.duration(700).style("opacity",0).each("end",function(u){var s=c.indexOf(u);s!==-1&&c.splice(s,1),l.select(this).remove()})}i.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(f){var u=l.select(this);u.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){u.transition().call(r)});for(var s=u.append("p"),h=f.split(/<br\s*\/?>/g),d=0;d<h.length;d++)d&&s.append("br"),s.append("span").text(h[d]);t==="stick"?u.transition().duration(350).style("opacity",1):u.transition().duration(700).style("opacity",1).transition().delay(n).call(r)})}},{"@plotly/d3":58,"fast-isnumeric":190}],514:[function(e,k,z){var l=e("./setcursor"),o="data-savedcursor",c="!!";k.exports=function(t,n){var a=t.attr(o);if(n){if(!a){for(var i=(t.attr("class")||"").split(" "),r=0;r<i.length;r++){var f=i[r];f.indexOf("cursor-")===0&&t.attr(o,f.substr(7)).classed(f,!1)}t.attr(o)||t.attr(o,c)}l(t,n)}else a&&(t.attr(o,null),a===c?l(t):l(t,a))}},{"./setcursor":524}],515:[function(e,k,z){var l=e("./matrix").dot,o=e("../constants/numerical").BADNUM,c=k.exports={};c.tester=function(t){var n=t.slice(),a=n[0][0],i=a,r=n[0][1],f=r,u;for(n.push(n[0]),u=1;u<n.length;u++)a=Math.min(a,n[u][0]),i=Math.max(i,n[u][0]),r=Math.min(r,n[u][1]),f=Math.max(f,n[u][1]);var s=!1,h;n.length===5&&(n[0][0]===n[1][0]?n[2][0]===n[3][0]&&n[0][1]===n[3][1]&&n[1][1]===n[2][1]&&(s=!0,h=function(x){return x[0]===n[0][0]}):n[0][1]===n[1][1]&&n[2][1]===n[3][1]&&n[0][0]===n[3][0]&&n[1][0]===n[2][0]&&(s=!0,h=function(x){return x[1]===n[0][1]}));function d(x,A){var b=x[0],S=x[1];return!(b===o||b<a||b>i||S===o||S<r||S>f||A&&h(x))}function y(x,A){var b=x[0],S=x[1];if(b===o||b<a||b>i||S===o||S<r||S>f)return!1;var w=n.length,T=n[0][0],_=n[0][1],v=0,P,M,E,D,N;for(P=1;P<w;P++)if(M=T,E=_,T=n[P][0],_=n[P][1],D=Math.min(M,T),!(b<D||b>Math.max(M,T)||S>Math.max(E,_)))if(S<Math.min(E,_))b!==D&&v++;else{if(T===M?N=S:N=E+(b-M)*(_-E)/(T-M),S===N)return!(P===1&&A);S<=N&&b!==D&&v++}return v%2==1}var m=!0,g=n[0];for(u=1;u<n.length;u++)if(g[0]!==n[u][0]||g[1]!==n[u][1]){m=!1;break}return{xmin:a,xmax:i,ymin:r,ymax:f,pts:n,contains:s?d:y,isRect:s,degenerate:m}},c.isSegmentBent=function(t,n,a,i){var r=t[n],f=[t[a][0]-r[0],t[a][1]-r[1]],u=l(f,f),s=Math.sqrt(u),h=[-f[1]/s,f[0]/s],d,y,m;for(d=n+1;d<a;d++)if(y=[t[d][0]-r[0],t[d][1]-r[1]],m=l(y,f),m<0||m>u||Math.abs(l(y,h))>i)return!0;return!1},c.filter=function(t,n){var a=[t[0]],i=0,r=0;function f(s){t.push(s);var h=a.length,d=i;a.splice(r+1);for(var y=d+1;y<t.length;y++)(y===t.length-1||c.isSegmentBent(t,d,y+1,n))&&(a.push(t[y]),a.length<h-2&&(i=y,r=a.length-1),d=y)}if(t.length>1){var u=t.pop();f(u)}return{addPt:f,raw:t,filtered:a}}},{"../constants/numerical":479,"./matrix":509}],516:[function(e,k,z){(function(l){(function(){var o=e("./show_no_webgl_msg"),c=e("regl");k.exports=function(t,n){var a=t._fullLayout,i=!0;return a._glcanvas.each(function(r){if(!r.regl&&!(r.pick&&!a._has("parcoords"))){try{r.regl=c({canvas:this,attributes:{antialias:!r.pick,preserveDrawingBuffer:!0},pixelRatio:t._context.plotGlPixelRatio||l.devicePixelRatio,extensions:n||[]})}catch{i=!1}r.regl||(i=!1),i&&this.addEventListener("webglcontextlost",function(f){t&&t.emit&&t.emit("plotly_webglcontextlost",{event:f,layer:r.key})},!1)}}),i||o({container:a._glcontainer.node()}),i}}).call(this)}).call(this,typeof lo!="undefined"?lo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./show_no_webgl_msg":525,regl:283}],517:[function(e,k,z){var l=e("fast-isnumeric"),o=e("is-mobile");k.exports=function(t){var n;if(t&&t.hasOwnProperty("userAgent")?n=t.userAgent:n=c(),typeof n!="string")return!0;var a=o({ua:{headers:{"user-agent":n}},tablet:!0,featureDetect:!1});if(!a)for(var i=n.split(" "),r=1;r<i.length;r++){var f=i[r];if(f.indexOf("Safari")!==-1)for(var u=r-1;u>-1;u--){var s=i[u];if(s.substr(0,8)==="Version/"){var h=s.substr(8).split(".")[0];if(l(h)&&(h=+h),h>=13)return!0}}}return a};function c(){var p;return typeof navigator!="undefined"&&(p=navigator.userAgent),p&&p.headers&&typeof p.headers["user-agent"]=="string"&&(p=p.headers["user-agent"]),p}},{"fast-isnumeric":190,"is-mobile":234}],518:[function(e,k,z){k.exports=function(o,c){if(c instanceof RegExp){for(var p=c.toString(),t=0;t<o.length;t++)if(o[t]instanceof RegExp&&o[t].toString()===p)return o;o.push(c)}else(c||c===0)&&o.indexOf(c)===-1&&o.push(c);return o}},{}],519:[function(e,k,z){var l=e("../lib"),o=e("../plot_api/plot_config").dfltConfig;function c(t,n){for(var a=[],i,r=0;r<n.length;r++)i=n[r],i===t?a[r]=i:typeof i=="object"?a[r]=Array.isArray(i)?l.extendDeep([],i):l.extendDeepAll({},i):a[r]=i;return a}var p={};p.add=function(t,n,a,i,r){var f,u;if(t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},u=t.undoQueue.index,t.autoplay){t.undoQueue.inSequence||(t.autoplay=!1);return}!t.undoQueue.sequence||t.undoQueue.beginSequence?(f={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},t.undoQueue.queue.splice(u,t.undoQueue.queue.length-u,f),t.undoQueue.index+=1):f=t.undoQueue.queue[u-1],t.undoQueue.beginSequence=!1,f&&(f.undo.calls.unshift(n),f.undo.args.unshift(a),f.redo.calls.push(i),f.redo.args.push(r)),t.undoQueue.queue.length>o.queueLength&&(t.undoQueue.queue.shift(),t.undoQueue.index--)},p.startSequence=function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!0,t.undoQueue.beginSequence=!0},p.stopSequence=function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!1,t.undoQueue.beginSequence=!1},p.undo=function(n){var a,i;if(!(n.undoQueue===void 0||isNaN(n.undoQueue.index)||n.undoQueue.index<=0)){for(n.undoQueue.index--,a=n.undoQueue.queue[n.undoQueue.index],n.undoQueue.inSequence=!0,i=0;i<a.undo.calls.length;i++)p.plotDo(n,a.undo.calls[i],a.undo.args[i]);n.undoQueue.inSequence=!1,n.autoplay=!1}},p.redo=function(n){var a,i;if(!(n.undoQueue===void 0||isNaN(n.undoQueue.index)||n.undoQueue.index>=n.undoQueue.queue.length)){for(a=n.undoQueue.queue[n.undoQueue.index],n.undoQueue.inSequence=!0,i=0;i<a.redo.calls.length;i++)p.plotDo(n,a.redo.calls[i],a.redo.args[i]);n.undoQueue.inSequence=!1,n.autoplay=!1,n.undoQueue.index++}},p.plotDo=function(t,n,a){t.autoplay=!0,a=c(t,a),n.apply(null,a)},k.exports=p},{"../lib":503,"../plot_api/plot_config":541}],520:[function(e,k,z){z.counter=function(l,o,c,p){var t=(o||"")+(c?"":"$"),n=p===!1?"":"^";return l==="xy"?new RegExp(n+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+t):new RegExp(n+l+"([2-9]|[1-9][0-9]+)?"+t)}},{}],521:[function(e,k,z){var l=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,o=/^[^\.\[\]]+$/;k.exports=function(c,p){for(;p;){var t=c.match(l);if(t)c=t[1];else if(c.match(o))c="";else throw new Error("bad relativeAttr call:"+[c,p]);if(p.charAt(0)==="^")p=p.slice(1);else break}return c&&p.charAt(0)!=="["?c+"."+p:c+p}},{}],522:[function(e,k,z){var l=e("./array").isArrayOrTypedArray,o=e("./is_plain_object");k.exports=function c(p,t){for(var n in t){var a=t[n],i=p[n];if(i!==a)if(n.charAt(0)==="_"||typeof a=="function"){if(n in p)continue;p[n]=a}else if(l(a)&&l(i)&&o(a[0])){if(n==="customdata"||n==="ids")continue;for(var r=Math.min(a.length,i.length),f=0;f<r;f++)i[f]!==a[f]&&o(a[f])&&o(i[f])&&c(i[f],a[f])}else o(a)&&o(i)&&(c(i,a),Object.keys(i).length||delete p[n])}}},{"./array":485,"./is_plain_object":504}],523:[function(e,k,z){var l=e("fast-isnumeric"),o=e("./loggers"),c=e("./identity"),p=e("../constants/numerical").BADNUM,t=1e-9;z.findBin=function(f,u,s){if(l(u.start))return s?Math.ceil((f-u.start)/u.size-t)-1:Math.floor((f-u.start)/u.size+t);var h=0,d=u.length,y=0,m=d>1?(u[d-1]-u[0])/(d-1):1,g,x;for(m>=0?x=s?n:a:x=s?r:i,f+=m*t*(s?-1:1)*(m>=0?1:-1);h<d&&y++<100;)g=Math.floor((h+d)/2),x(u[g],f)?h=g+1:d=g;return y>90&&o.log("Long binary search..."),h-1};function n(f,u){return f<u}function a(f,u){return f<=u}function i(f,u){return f>u}function r(f,u){return f>=u}z.sorterAsc=function(f,u){return f-u},z.sorterDes=function(f,u){return u-f},z.distinctVals=function(f){var u=f.slice();u.sort(z.sorterAsc);var s;for(s=u.length-1;s>-1&&u[s]===p;s--);for(var h=u[s]-u[0]||1,d=h/(s||1)/1e4,y=[],m,g=0;g<=s;g++){var x=u[g],A=x-m;m===void 0?(y.push(x),m=x):A>d&&(h=Math.min(h,A),y.push(x),m=x)}return{vals:y,minDiff:h}},z.roundUp=function(f,u,s){for(var h=0,d=u.length-1,y,m=0,g=s?0:1,x=s?1:0,A=s?Math.ceil:Math.floor;h<d&&m++<100;)y=A((h+d)/2),u[y]<=f?h=y+g:d=y-x;return u[h]},z.sort=function(f,u){for(var s=0,h=0,d=1;d<f.length;d++){var y=u(f[d],f[d-1]);if(y<0?s=1:y>0&&(h=1),s&&h)return f.sort(u)}return h?f:f.reverse()},z.findIndexOfMin=function(f,u){u=u||c;for(var s=1/0,h,d=0;d<f.length;d++){var y=u(f[d]);y<s&&(s=y,h=d)}return h}},{"../constants/numerical":479,"./identity":501,"./loggers":507,"fast-isnumeric":190}],524:[function(e,k,z){k.exports=function(o,c){(o.attr("class")||"").split(" ").forEach(function(p){p.indexOf("cursor-")===0&&o.classed(p,!1)}),c&&o.classed("cursor-"+c,!0)}},{}],525:[function(e,k,z){var l=e("../components/color"),o=function(){};k.exports=function(p){for(var t in p)typeof p[t]=="function"&&(p[t]=o);p.destroy=function(){p.container.parentNode.removeChild(p.container)};var n=document.createElement("div");n.className="no-webgl",n.style.cursor="pointer",n.style.fontSize="24px",n.style.color=l.defaults[0],n.style.position="absolute",n.style.left=n.style.top="0px",n.style.width=n.style.height="100%",n.style["background-color"]=l.lightLine,n.style["z-index"]=30;var a=document.createElement("p");return a.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",a.style.position="relative",a.style.top="50%",a.style.left="50%",a.style.height="30%",a.style.width="50%",a.style.margin="-15% 0 0 -25%",n.appendChild(a),p.container.appendChild(n),p.container.style.background="#FFFFFF",p.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":366}],526:[function(e,k,z){k.exports=function(o){return Object.keys(o).sort()}},{}],527:[function(e,k,z){var l=e("fast-isnumeric"),o=e("./array").isArrayOrTypedArray;z.aggNums=function(c,p,t,n){var a,i;if((!n||n>t.length)&&(n=t.length),l(p)||(p=!1),o(t[0])){for(i=new Array(n),a=0;a<n;a++)i[a]=z.aggNums(c,p,t[a]);t=i}for(a=0;a<n;a++)l(p)?l(t[a])&&(p=c(+p,+t[a])):p=t[a];return p},z.len=function(c){return z.aggNums(function(p){return p+1},0,c)},z.mean=function(c,p){return p||(p=z.len(c)),z.aggNums(function(t,n){return t+n},0,c)/p},z.midRange=function(c){if(!(c===void 0||c.length===0))return(z.aggNums(Math.max,null,c)+z.aggNums(Math.min,null,c))/2},z.variance=function(c,p,t){return p||(p=z.len(c)),l(t)||(t=z.mean(c,p)),z.aggNums(function(n,a){return n+Math.pow(a-t,2)},0,c)/p},z.stdev=function(c,p,t){return Math.sqrt(z.variance(c,p,t))},z.median=function(c){var p=c.slice().sort();return z.interp(p,.5)},z.interp=function(c,p){if(!l(p))throw"n should be a finite number";if(p=p*c.length-.5,p<0)return c[0];if(p>c.length-1)return c[c.length-1];var t=p%1;return t*c[Math.ceil(p)]+(1-t)*c[Math.floor(p)]}},{"./array":485,"fast-isnumeric":190}],528:[function(e,k,z){var l=e("color-normalize");function o(c){return c?l(c):[0,0,0,1]}k.exports=o},{"color-normalize":89}],529:[function(e,k,z){var l=e("@plotly/d3"),o=e("../lib"),c=o.strTranslate,p=e("../constants/xmlns_namespaces"),t=e("../constants/alignment").LINE_SPACING,n=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;z.convertToTspans=function(V,U,j){var Z=V.text(),te=!V.attr("data-notex")&&typeof MathJax!="undefined"&&Z.match(n),re=l.select(V.node().parentNode);if(re.empty())return;var W=V.attr("class")?V.attr("class").split(" ")[0]:"text";W+="-math",re.selectAll("svg."+W).remove(),re.selectAll("g."+W+"-group").remove(),V.style("display",null).attr({"data-unformatted":Z,"data-math":"N"});function J(){re.empty()||(W=V.attr("class")+"-math",re.select("svg."+W).remove()),V.text("").style("white-space","pre");var le=N(V.node(),Z);le&&V.style("pointer-events","all"),z.positionText(V),j&&j.call(V)}return te?(U&&U._promises||[]).push(new Promise(function(le){V.style("display","none");var ue=parseInt(V.node().style.fontSize,10),se={fontSize:ue};f(te[2],se,function(G,Y,ee){re.selectAll("svg."+W).remove(),re.selectAll("g."+W+"-group").remove();var $=G&&G.select("svg");if(!$||!$.node()){J(),le();return}var K=re.append("g").classed(W+"-group",!0).attr({"pointer-events":"none","data-unformatted":Z,"data-math":"Y"});K.node().appendChild($.node()),Y&&Y.node()&&$.node().insertBefore(Y.node().cloneNode(!0),$.node().firstChild);var Q=ee.width,ae=ee.height;$.attr({class:W,height:ae,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ie=V.node().style.fill||"black",oe=$.select("g");oe.attr({fill:ie,stroke:ie});var fe=oe.node().getBoundingClientRect(),ye=fe.width,ce=fe.height;(ye>Q||ce>ae)&&($.style("overflow","hidden"),fe=$.node().getBoundingClientRect(),ye=fe.width,ce=fe.height);var me=+V.attr("x"),xe=+V.attr("y"),ke=ue||V.node().getBoundingClientRect().height,Ae=-ke/4;if(W[0]==="y")K.attr({transform:"rotate("+[-90,me,xe]+")"+c(-ye/2,Ae-ce/2)});else if(W[0]==="l")xe=Ae-ce/2;else if(W[0]==="a"&&W.indexOf("atitle")!==0)me=0,xe=Ae;else{var Oe=V.attr("text-anchor");me=me-ye*(Oe==="middle"?.5:Oe==="end"?1:0),xe=xe+Ae-ce/2}$.attr({x:me,y:xe}),j&&j.call(V,K),le(K)})})):J(),V};var a=/(<|&lt;|&#60;)/g,i=/(>|&gt;|&#62;)/g;function r(V){return V.replace(a,"\\lt ").replace(i,"\\gt ")}function f(V,U,j){var Z,te,re,W;MathJax.Hub.Queue(function(){return te=o.extendDeepAll({},MathJax.Hub.config),re=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if(Z=MathJax.Hub.config.menuSettings.renderer,Z!=="SVG")return MathJax.Hub.setRenderer("SVG")},function(){var J="math-output-"+o.randstr({},64);return W=l.select("body").append("div").attr({id:J}).style({visibility:"hidden",position:"absolute"}).style({"font-size":U.fontSize+"px"}).text(r(V)),MathJax.Hub.Typeset(W.node())},function(){var J=l.select("body").select("#MathJax_SVG_glyphs");if(W.select(".MathJax_SVG").empty()||!W.select("svg").node())o.log("There was an error in the tex syntax.",V),j();else{var le=W.select("svg").node().getBoundingClientRect();j(W.select(".MathJax_SVG"),J,le)}if(W.remove(),Z!=="SVG")return MathJax.Hub.setRenderer(Z)},function(){return re!==void 0&&(MathJax.Hub.processSectionDelay=re),MathJax.Hub.Config(te)})}var u={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},s={sub:"0.3em",sup:"-0.6em"},h={sub:"-0.21em",sup:"0.42em"},d="\u200B",y=["http:","https:","mailto:","",void 0,":"],m=z.NEWLINES=/(\r\n?|\n)/g,g=/(<[^<>]*>)/,x=/<(\/?)([^ >]*)(\s+(.*))?>/i,A=/<br(\s+.*)?>/i;z.BR_TAG_ALL=/<br(\s+.*)?>/gi;var b=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,S=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,w=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,T=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function _(V,U){if(!V)return null;var j=V.match(U),Z=j&&(j[3]||j[4]);return Z&&E(Z)}var v=/(^|;)\s*color:/;z.plainText=function(V,U){U=U||{};for(var j=U.len!==void 0&&U.len!==-1?U.len:1/0,Z=U.allowedTags!==void 0?U.allowedTags:["br"],te="...",re=te.length,W=V.split(g),J=[],le="",ue=0,se=0;se<W.length;se++){var G=W[se],Y=G.match(x),ee=Y&&Y[2].toLowerCase();if(ee)Z.indexOf(ee)!==-1&&(J.push(G),le=ee);else{var $=G.length;if(ue+$<j)J.push(G),ue+=$;else if(ue<j){var K=j-ue;le&&(le!=="br"||K<=re||$<=re)&&J.pop(),j>re?J.push(G.substr(0,K-re)+te):J.push(G.substr(0,K));break}le=""}}return J.join("")};var P={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},M=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function E(V){return V.replace(M,function(U,j){var Z;return j.charAt(0)==="#"?Z=D(j.charAt(1)==="x"?parseInt(j.substr(2),16):parseInt(j.substr(1),10)):Z=P[j],Z||U})}z.convertEntities=E;function D(V){if(!(V>1114111)){var U=String.fromCodePoint;if(U)return U(V);var j=String.fromCharCode;return V<=65535?j(V):j((V>>10)+55232,V%1024+56320)}}function N(V,U){U=U.replace(m," ");var j=!1,Z=[],te,re=-1;function W(){re++;var ce=document.createElementNS(p.svg,"tspan");l.select(ce).attr({class:"line",dy:re*t+"em"}),V.appendChild(ce),te=ce;var me=Z;if(Z=[{node:ce}],me.length>1)for(var xe=1;xe<me.length;xe++)J(me[xe])}function J(ce){var me=ce.type,xe={},ke;if(me==="a"){ke="a";var Ae=ce.target,Oe=ce.href,He=ce.popup;Oe&&(xe={"xlink:xlink:show":Ae==="_blank"||Ae.charAt(0)!=="_"?"new":"replace",target:Ae,"xlink:xlink:href":Oe},He&&(xe.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+He+'");return false;'))}else ke="tspan";ce.style&&(xe.style=ce.style);var Ge=document.createElementNS(p.svg,ke);if(me==="sup"||me==="sub"){le(te,d),te.appendChild(Ge);var _e=document.createElementNS(p.svg,"tspan");le(_e,d),l.select(_e).attr("dy",h[me]),xe.dy=s[me],te.appendChild(Ge),te.appendChild(_e)}else te.appendChild(Ge);l.select(Ge).attr(xe),te=ce.node=Ge,Z.push(ce)}function le(ce,me){ce.appendChild(document.createTextNode(me))}function ue(ce){if(Z.length===1){o.log("Ignoring unexpected end tag </"+ce+">.",U);return}var me=Z.pop();ce!==me.type&&o.log("Start tag <"+me.type+"> doesnt match end tag <"+ce+">. Pretending it did match.",U),te=Z[Z.length-1].node}var se=A.test(U);se?W():(te=V,Z=[{node:V}]);for(var G=U.split(g),Y=0;Y<G.length;Y++){var ee=G[Y],$=ee.match(x),K=$&&$[2].toLowerCase(),Q=u[K];if(K==="br")W();else if(Q===void 0)le(te,E(ee));else if($[1])ue(K);else{var ae=$[4],ie={type:K},oe=_(ae,b);if(oe?(oe=oe.replace(v,"$1 fill:"),Q&&(oe+=";"+Q)):Q&&(oe=Q),oe&&(ie.style=oe),K==="a"){j=!0;var fe=_(ae,S);if(fe){var ye=O(fe);ye&&(ie.href=ye,ie.target=_(ae,w)||"_blank",ie.popup=_(ae,T))}}J(ie)}}return j}function O(V){var U=encodeURI(decodeURI(V)),j=document.createElement("a"),Z=document.createElement("a");j.href=V,Z.href=U;var te=j.protocol,re=Z.protocol;return y.indexOf(te)!==-1&&y.indexOf(re)!==-1?U:""}z.sanitizeHTML=function(U){U=U.replace(m," ");for(var j=document.createElement("p"),Z=j,te=[],re=U.split(g),W=0;W<re.length;W++){var J=re[W],le=J.match(x),ue=le&&le[2].toLowerCase();if(ue in u)if(le[1])te.length&&(Z=te.pop());else{var se=le[4],G=_(se,b),Y=G?{style:G}:{};if(ue==="a"){var ee=_(se,S);if(ee){var $=O(ee);if($){Y.href=$;var K=_(se,w);K&&(Y.target=K)}}}var Q=document.createElement(ue);Z.appendChild(Q),l.select(Q).attr(Y),Z=Q,te.push(Q)}else Z.appendChild(document.createTextNode(E(J)))}var ae="innerHTML";return j[ae]},z.lineCount=function(U){return U.selectAll("tspan.line").size()||1},z.positionText=function(U,j,Z){return U.each(function(){var te=l.select(this);function re(le,ue){return ue===void 0?(ue=te.attr(le),ue===null&&(te.attr(le,0),ue=0)):te.attr(le,ue),ue}var W=re("x",j),J=re("y",Z);this.nodeName==="text"&&te.selectAll("tspan.line").attr({x:W,y:J})})};function I(V,U,j){var Z=j.horizontalAlign,te=j.verticalAlign||"top",re=V.node().getBoundingClientRect(),W=U.node().getBoundingClientRect(),J,le,ue;return te==="bottom"?le=function(){return re.bottom-J.height}:te==="middle"?le=function(){return re.top+(re.height-J.height)/2}:le=function(){return re.top},Z==="right"?ue=function(){return re.right-J.width}:Z==="center"?ue=function(){return re.left+(re.width-J.width)/2}:ue=function(){return re.left},function(){J=this.node().getBoundingClientRect();var se=ue()-W.left,G=le()-W.top,Y=j.gd||{};if(j.gd){Y._fullLayout._calcInverseTransform(Y);var ee=o.apply3DTransform(Y._fullLayout._invTransform)(se,G);se=ee[0],G=ee[1]}return this.style({top:G+"px",left:se+"px","z-index":1e3}),this}}var F="1px ";z.makeTextShadow=function(V){var U=F,j=F,Z=F;return U+j+Z+V+", -"+U+"-"+j+Z+V+", "+U+"-"+j+Z+V+", -"+U+j+Z+V},z.makeEditable=function(V,U){var j=U.gd,Z=U.delegate,te=l.dispatch("edit","input","cancel"),re=Z||V;if(V.style({"pointer-events":Z?"none":"all"}),V.size()!==1)throw new Error("boo");function W(){le(),V.style({opacity:0});var ue=re.attr("class"),se;ue?se="."+ue.split(" ")[0]+"-math-group":se="[class*=-math-group]",se&&l.select(V.node().parentNode).select(se).style({opacity:0})}function J(ue){var se=ue.node(),G=document.createRange();G.selectNodeContents(se);var Y=window.getSelection();Y.removeAllRanges(),Y.addRange(G),se.focus()}function le(){var ue=l.select(j),se=ue.select(".svg-container"),G=se.append("div"),Y=V.node().style,ee=parseFloat(Y.fontSize||12),$=U.text;$===void 0&&($=V.attr("data-unformatted")),G.classed("plugin-editable editable",!0).style({position:"absolute","font-family":Y.fontFamily||"Arial","font-size":ee,color:U.fill||Y.fill||"black",opacity:1,"background-color":U.background||"transparent",outline:"#ffffff33 1px solid",margin:[-ee/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text($).call(I(V,se,U)).on("blur",function(){j._editing=!1,V.text(this.textContent).style({opacity:1});var K=l.select(this).attr("class"),Q;K?Q="."+K.split(" ")[0]+"-math-group":Q="[class*=-math-group]",Q&&l.select(V.node().parentNode).select(Q).style({opacity:0});var ae=this.textContent;l.select(this).transition().duration(0).remove(),l.select(document).on("mouseup",null),te.edit.call(V,ae)}).on("focus",function(){var K=this;j._editing=!0,l.select(document).on("mouseup",function(){if(l.event.target===K)return!1;document.activeElement===G.node()&&G.node().blur()})}).on("keyup",function(){l.event.which===27?(j._editing=!1,V.style({opacity:1}),l.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),te.cancel.call(V,this.textContent)):(te.input.call(V,this.textContent),l.select(this).call(I(V,se,U)))}).on("keydown",function(){l.event.which===13&&this.blur()}).call(J)}return U.immediate?W():re.on("click",W),l.rebind(V,te,"on")}},{"../constants/alignment":471,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],530:[function(e,k,z){var l={};z.throttle=function(p,t,n){var a=l[p],i=Date.now();if(!a){for(var r in l)l[r].ts<i-6e4&&delete l[r];a=l[p]={ts:0,timer:null}}o(a);function f(){n(),a.ts=Date.now(),a.onDone&&(a.onDone(),a.onDone=null)}if(i>a.ts+t){f();return}a.timer=setTimeout(function(){f(),a.timer=null},t)},z.done=function(c){var p=l[c];return!p||!p.timer?Promise.resolve():new Promise(function(t){var n=p.onDone;p.onDone=function(){n&&n(),t(),p.onDone=null}})},z.clear=function(c){if(c)o(l[c]),delete l[c];else for(var p in l)z.clear(p)};function o(c){c&&c.timer!==null&&(clearTimeout(c.timer),c.timer=null)}},{}],531:[function(e,k,z){var l=e("fast-isnumeric");k.exports=function(c,p){if(c>0)return Math.log(c)/Math.LN10;var t=Math.log(Math.min(p[0],p[1]))/Math.LN10;return l(t)||(t=Math.log(Math.max(p[0],p[1]))/Math.LN10-6),t}},{"fast-isnumeric":190}],532:[function(e,k,z){var l=k.exports={},o=e("../plots/geo/constants").locationmodeToLayer,c=e("topojson-client").feature;l.getTopojsonName=function(p){return[p.scope.replace(/ /g,"-"),"_",p.resolution.toString(),"m"].join("")},l.getTopojsonPath=function(p,t){return p+t+".json"},l.getTopojsonFeatures=function(p,t){var n=o[p.locationmode],a=t.objects[n];return c(t,a).features}},{"../plots/geo/constants":587,"topojson-client":315}],533:[function(e,k,z){k.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],534:[function(e,k,z){k.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],535:[function(e,k,z){var l=e("../registry");k.exports=function(c){for(var p=l.layoutArrayContainers,t=l.layoutArrayRegexes,n=c.split("[")[0],a,i,r=0;r<t.length;r++)if(i=c.match(t[r]),i&&i.index===0){a=i[0];break}if(a||(a=p[p.indexOf(n)]),!a)return!1;var f=c.substr(a.length);return f?(i=f.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),i?{array:a,index:Number(i[1]),property:i[3]||""}:!1):{array:a,index:"",property:""}}},{"../registry":638}],536:[function(e,k,z){var l=e("../lib"),o=l.extendFlat,c=l.isPlainObject,p={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},t={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},n=p.flags.slice().concat(["fullReplot"]),a=t.flags.slice().concat("layoutReplot");k.exports={traces:p,layout:t,traceFlags:function(){return i(n)},layoutFlags:function(){return i(a)},update:function(u,s){var h=s.editType;if(h&&h!=="none")for(var d=h.split("+"),y=0;y<d.length;y++)u[d[y]]=!0},overrideAll:r};function i(u){for(var s={},h=0;h<u.length;h++)s[u[h]]=!1;return s}function r(u,s,h){var d=o({},u);for(var y in d){var m=d[y];c(m)&&(d[y]=f(m,s,h,y))}return h==="from-root"&&(d.editType=s),d}function f(u,s,h,d){if(u.valType){var y=o({},u);if(y.editType=s,Array.isArray(u.items)){y.items=new Array(u.items.length);for(var m=0;m<u.items.length;m++)y.items[m]=f(u.items[m],s)}return y}else return r(u,s,d.charAt(0)==="_"?"nested":"from-root")}},{"../lib":503}],537:[function(e,k,z){var l=e("fast-isnumeric"),o=e("gl-mat4/fromQuat"),c=e("../registry"),p=e("../lib"),t=e("../plots/plots"),n=e("../plots/cartesian/axis_ids"),a=e("../components/color"),i=n.cleanId,r=n.getFromTrace,f=c.traceIs;z.clearPromiseQueue=function(b){Array.isArray(b._promises)&&b._promises.length>0&&p.log("Clearing previous rejected promises from queue."),b._promises=[]},z.cleanLayout=function(b){var S,w;b||(b={}),b.xaxis1&&(b.xaxis||(b.xaxis=b.xaxis1),delete b.xaxis1),b.yaxis1&&(b.yaxis||(b.yaxis=b.yaxis1),delete b.yaxis1),b.scene1&&(b.scene||(b.scene=b.scene1),delete b.scene1);var T=(t.subplotsRegistry.cartesian||{}).attrRegex,_=(t.subplotsRegistry.polar||{}).attrRegex,v=(t.subplotsRegistry.ternary||{}).attrRegex,P=(t.subplotsRegistry.gl3d||{}).attrRegex,M=Object.keys(b);for(S=0;S<M.length;S++){var E=M[S];if(T&&T.test(E)){var D=b[E];D.anchor&&D.anchor!=="free"&&(D.anchor=i(D.anchor)),D.overlaying&&(D.overlaying=i(D.overlaying)),D.type||(D.isdate?D.type="date":D.islog?D.type="log":D.isdate===!1&&D.islog===!1&&(D.type="linear")),(D.autorange==="withzero"||D.autorange==="tozero")&&(D.autorange=!0,D.rangemode="tozero"),delete D.islog,delete D.isdate,delete D.categories,m(D,"domain")&&delete D.domain,D.autotick!==void 0&&(D.tickmode===void 0&&(D.tickmode=D.autotick?"auto":"linear"),delete D.autotick),s(D)}else if(_&&_.test(E)){var N=b[E];s(N.radialaxis)}else if(v&&v.test(E)){var O=b[E];s(O.aaxis),s(O.baxis),s(O.caxis)}else if(P&&P.test(E)){var I=b[E],F=I.cameraposition;if(Array.isArray(F)&&F[0].length===4){var V=F[0],U=F[1],j=F[2],Z=o([],V),te=[];for(w=0;w<3;++w)te[w]=U[w]+j*Z[2+4*w];I.camera={eye:{x:te[0],y:te[1],z:te[2]},center:{x:U[0],y:U[1],z:U[2]},up:{x:0,y:0,z:1}},delete I.cameraposition}s(I.xaxis),s(I.yaxis),s(I.zaxis)}}var re=Array.isArray(b.annotations)?b.annotations.length:0;for(S=0;S<re;S++){var W=b.annotations[S];!p.isPlainObject(W)||(W.ref&&(W.ref==="paper"?(W.xref="paper",W.yref="paper"):W.ref==="data"&&(W.xref="x",W.yref="y"),delete W.ref),u(W,"xref"),u(W,"yref"))}var J=Array.isArray(b.shapes)?b.shapes.length:0;for(S=0;S<J;S++){var le=b.shapes[S];!p.isPlainObject(le)||(u(le,"xref"),u(le,"yref"))}var ue=Array.isArray(b.images)?b.images.length:0;for(S=0;S<ue;S++){var se=b.images[S];!p.isPlainObject(se)||(u(se,"xref"),u(se,"yref"))}var G=b.legend;return G&&(G.x>3?(G.x=1.02,G.xanchor="left"):G.x<-2&&(G.x=-.02,G.xanchor="right"),G.y>3?(G.y=1.02,G.yanchor="bottom"):G.y<-2&&(G.y=-.02,G.yanchor="top")),s(b),b.dragmode==="rotate"&&(b.dragmode="orbit"),a.clean(b),b.template&&b.template.layout&&z.cleanLayout(b.template.layout),b};function u(b,S){var w=b[S],T=S.charAt(0);w&&w!=="paper"&&(b[S]=i(w,T,!0))}function s(b){b&&((typeof b.title=="string"||typeof b.title=="number")&&(b.title={text:b.title}),S("titlefont","font"),S("titleposition","position"),S("titleside","side"),S("titleoffset","offset"));function S(w,T){var _=b[w],v=b.title&&b.title[T];_&&!v&&(b.title||(b.title={}),b.title[T]=b[w],delete b[w])}}z.cleanData=function(b){for(var S=0;S<b.length;S++){var w=b[S],T;if(w.type==="histogramy"&&"xbins"in w&&!("ybins"in w)&&(w.ybins=w.xbins,delete w.xbins),w.error_y&&"opacity"in w.error_y){var _=a.defaults,v=w.error_y.color||(f(w,"bar")?a.defaultLine:_[S%_.length]);w.error_y.color=a.addOpacity(a.rgb(v),a.opacity(v)*w.error_y.opacity),delete w.error_y.opacity}if("bardir"in w&&(w.bardir==="h"&&(f(w,"bar")||w.type.substr(0,9)==="histogram")&&(w.orientation="h",z.swapXYData(w)),delete w.bardir),w.type==="histogramy"&&z.swapXYData(w),(w.type==="histogramx"||w.type==="histogramy")&&(w.type="histogram"),"scl"in w&&!("colorscale"in w)&&(w.colorscale=w.scl,delete w.scl),"reversescl"in w&&!("reversescale"in w)&&(w.reversescale=w.reversescl,delete w.reversescl),w.xaxis&&(w.xaxis=i(w.xaxis,"x")),w.yaxis&&(w.yaxis=i(w.yaxis,"y")),f(w,"gl3d")&&w.scene&&(w.scene=t.subplotsRegistry.gl3d.cleanId(w.scene)),!f(w,"pie-like")&&!f(w,"bar-like"))if(Array.isArray(w.textposition))for(T=0;T<w.textposition.length;T++)w.textposition[T]=y(w.textposition[T]);else w.textposition&&(w.textposition=y(w.textposition));var P=c.getModule(w);if(P&&P.colorbar){var M=P.colorbar.container,E=M?w[M]:w;E&&E.colorscale&&(E.colorscale==="YIGnBu"&&(E.colorscale="YlGnBu"),E.colorscale==="YIOrRd"&&(E.colorscale="YlOrRd"))}if(w.type==="surface"&&p.isPlainObject(w.contours)){var D=["x","y","z"];for(T=0;T<D.length;T++){var N=w.contours[D[T]];!p.isPlainObject(N)||(N.highlightColor&&(N.highlightcolor=N.highlightColor,delete N.highlightColor),N.highlightWidth&&(N.highlightwidth=N.highlightWidth,delete N.highlightWidth))}}if(w.type==="candlestick"||w.type==="ohlc"){var O=(w.increasing||{}).showlegend!==!1,I=(w.decreasing||{}).showlegend!==!1,F=h(w.increasing),V=h(w.decreasing);if(F!==!1&&V!==!1){var U=d(F,V,O,I);U&&(w.name=U)}else(F||V)&&!w.name&&(w.name=F||V)}if(Array.isArray(w.transforms)){var j=w.transforms;for(T=0;T<j.length;T++){var Z=j[T];if(!!p.isPlainObject(Z))switch(Z.type){case"filter":Z.filtersrc&&(Z.target=Z.filtersrc,delete Z.filtersrc),Z.calendar&&(Z.valuecalendar||(Z.valuecalendar=Z.calendar),delete Z.calendar);break;case"groupby":if(Z.styles=Z.styles||Z.style,Z.styles&&!Array.isArray(Z.styles)){var te=Z.styles,re=Object.keys(te);Z.styles=[];for(var W=0;W<re.length;W++)Z.styles.push({target:re[W],value:te[re[W]]})}break}}}m(w,"line")&&delete w.line,"marker"in w&&(m(w.marker,"line")&&delete w.marker.line,m(w,"marker")&&delete w.marker),a.clean(w),w.autobinx&&(delete w.autobinx,delete w.xbins),w.autobiny&&(delete w.autobiny,delete w.ybins),s(w),w.colorbar&&s(w.colorbar),w.marker&&w.marker.colorbar&&s(w.marker.colorbar),w.line&&w.line.colorbar&&s(w.line.colorbar),w.aaxis&&s(w.aaxis),w.baxis&&s(w.baxis)}};function h(b){if(!p.isPlainObject(b))return!1;var S=b.name;return delete b.name,delete b.showlegend,(typeof S=="string"||typeof S=="number")&&String(S)}function d(b,S,w,T){if(w&&!T)return b;if(T&&!w||!b.trim())return S;if(!S.trim())return b;var _=Math.min(b.length,S.length),v;for(v=0;v<_&&b.charAt(v)===S.charAt(v);v++);var P=b.substr(0,v);return P.trim()}function y(b){var S="middle",w="center";return typeof b=="string"&&(b.indexOf("top")!==-1?S="top":b.indexOf("bottom")!==-1&&(S="bottom"),b.indexOf("left")!==-1?w="left":b.indexOf("right")!==-1&&(w="right")),S+" "+w}function m(b,S){return S in b&&typeof b[S]=="object"&&Object.keys(b[S]).length===0}z.swapXYData=function(b){var S;if(p.swapAttrs(b,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(b.z)&&Array.isArray(b.z[0])&&(b.transpose?delete b.transpose:b.transpose=!0),b.error_x&&b.error_y){var w=b.error_y,T="copy_ystyle"in w?w.copy_ystyle:!(w.color||w.thickness||w.width);p.swapAttrs(b,["error_?.copy_ystyle"]),T&&p.swapAttrs(b,["error_?.color","error_?.thickness","error_?.width"])}if(typeof b.hoverinfo=="string"){var _=b.hoverinfo.split("+");for(S=0;S<_.length;S++)_[S]==="x"?_[S]="y":_[S]==="y"&&(_[S]="x");b.hoverinfo=_.join("+")}},z.coerceTraceIndices=function(b,S){if(l(S))return[S];if(!Array.isArray(S)||!S.length)return b.data.map(function(_,v){return v});if(Array.isArray(S)){for(var w=[],T=0;T<S.length;T++)p.isIndex(S[T],b.data.length)?w.push(S[T]):p.warn("trace index (",S[T],") is not a number or is out of bounds");return w}return S},z.manageArrayContainers=function(b,S,w){var T=b.obj,_=b.parts,v=_.length,P=_[v-1],M=l(P);if(M&&S===null){var E=_.slice(0,v-1).join("."),D=p.nestedProperty(T,E).get();D.splice(P,1)}else M&&b.get()===void 0&&b.get()===void 0&&(w[b.astr]=null),b.set(S)};var g=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function x(b){var S=b.search(g);if(S>0)return b.substr(0,S)}z.hasParent=function(b,S){for(var w=x(S);w;){if(w in b)return!0;w=x(w)}return!1};var A=["x","y","z"];z.clearAxisTypes=function(b,S,w){for(var T=0;T<S.length;T++)for(var _=b._fullData[T],v=0;v<3;v++){var P=r(b,_,A[v]);if(P&&P.type!=="log"){var M=P._name,E=P._id.substr(1);if(E.substr(0,5)==="scene"){if(w[E]!==void 0)continue;M=E+"."+M}var D=M+".type";w[M]===void 0&&w[D]===void 0&&p.nestedProperty(b.layout,D).set(null)}}}},{"../components/color":366,"../lib":503,"../plots/cartesian/axis_ids":558,"../plots/plots":619,"../registry":638,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],538:[function(e,k,z){var l=e("./plot_api");z._doPlot=l._doPlot,z.newPlot=l.newPlot,z.restyle=l.restyle,z.relayout=l.relayout,z.redraw=l.redraw,z.update=l.update,z._guiRestyle=l._guiRestyle,z._guiRelayout=l._guiRelayout,z._guiUpdate=l._guiUpdate,z._storeDirectGUIEdit=l._storeDirectGUIEdit,z.react=l.react,z.extendTraces=l.extendTraces,z.prependTraces=l.prependTraces,z.addTraces=l.addTraces,z.deleteTraces=l.deleteTraces,z.moveTraces=l.moveTraces,z.purge=l.purge,z.addFrames=l.addFrames,z.deleteFrames=l.deleteFrames,z.animate=l.animate,z.setPlotConfig=l.setPlotConfig,z.toImage=e("./to_image"),z.validate=e("./validate"),z.downloadImage=e("../snapshot/download");var o=e("./template_api");z.makeTemplate=o.makeTemplate,z.validateTemplate=o.validateTemplate},{"../snapshot/download":640,"./plot_api":540,"./template_api":545,"./to_image":546,"./validate":547}],539:[function(e,k,z){var l=e("../lib/is_plain_object"),o=e("../lib/noop"),c=e("../lib/loggers"),p=e("../lib/search").sorterAsc,t=e("../registry");z.containerArrayMatch=e("./container_array_match");var n=z.isAddVal=function(r){return r==="add"||l(r)},a=z.isRemoveVal=function(r){return r===null||r==="remove"};z.applyContainerArrayChanges=function(r,f,u,s,h){var d=f.astr,y=t.getComponentMethod(d,"supplyLayoutDefaults"),m=t.getComponentMethod(d,"draw"),g=t.getComponentMethod(d,"drawOne"),x=s.replot||s.recalc||y===o||m===o,A=r.layout,b=r._fullLayout;if(u[""]){Object.keys(u).length>1&&c.warn("Full array edits are incompatible with other edits",d);var S=u[""][""];if(a(S))f.set(null);else if(Array.isArray(S))f.set(S);else return c.warn("Unrecognized full array edit value",d,S),!0;return x?!1:(y(A,b),m(r),!0)}var w=Object.keys(u).map(Number).sort(p),T=f.get(),_=T||[],v=h(b,d).get(),P=[],M=-1,E=_.length,D,N,O,I,F,V,U,j;for(D=0;D<w.length;D++){if(O=w[D],I=u[O],F=Object.keys(I),V=I[""],U=n(V),O<0||O>_.length-(U?0:1)){c.warn("index out of range",d,O);continue}if(V!==void 0)F.length>1&&c.warn("Insertion & removal are incompatible with edits to the same index.",d,O),a(V)?P.push(O):U?(V==="add"&&(V={}),_.splice(O,0,V),v&&v.splice(O,0,{})):c.warn("Unrecognized full object edit value",d,O,V),M===-1&&(M=O);else for(N=0;N<F.length;N++)j=d+"["+O+"].",h(_[O],F[N],j).set(I[F[N]])}for(D=P.length-1;D>=0;D--)_.splice(P[D],1),v&&v.splice(P[D],1);if(_.length?T||f.set(_):f.set(null),x)return!1;if(y(A,b),g!==o){var Z;if(M===-1)Z=w;else{for(E=Math.max(_.length,E),Z=[],D=0;D<w.length&&(O=w[D],!(O>=M));D++)Z.push(O);for(D=M;D<E;D++)Z.push(D)}for(D=0;D<Z.length;D++)g(r,Z[D])}else m(r);return!0}},{"../lib/is_plain_object":504,"../lib/loggers":507,"../lib/noop":512,"../lib/search":523,"../registry":638,"./container_array_match":535}],540:[function(e,k,z){var l=e("@plotly/d3"),o=e("fast-isnumeric"),c=e("has-hover"),p=e("../lib"),t=p.nestedProperty,n=e("../lib/events"),a=e("../lib/queue"),i=e("../registry"),r=e("./plot_schema"),f=e("../plots/plots"),u=e("../plots/cartesian/axes"),s=e("../components/drawing"),h=e("../components/color"),d=e("../plots/cartesian/graph_interact").initInteractions,y=e("../constants/xmlns_namespaces"),m=e("../plots/cartesian/select").clearSelect,g=e("./plot_config").dfltConfig,x=e("./manage_arrays"),A=e("./helpers"),b=e("./subroutines"),S=e("./edit_types"),w=e("../plots/cartesian/constants").AX_NAME_PATTERN,T=0,_=5;function v(Ee,Xe,rt,ut){var Pt;if(Ee=p.getGraphDiv(Ee),n.init(Ee),p.isPlainObject(Xe)){var kt=Xe;Xe=kt.data,rt=kt.layout,ut=kt.config,Pt=kt.frames}var Bt=n.triggerHandler(Ee,"plotly_beforeplot",[Xe,rt,ut]);if(Bt===!1)return Promise.reject();!Xe&&!rt&&!p.isPlotDiv(Ee)&&p.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Ee);function Xt(){if(Pt)return z.addFrames(Ee,Pt)}N(Ee,ut),rt||(rt={}),l.select(Ee).classed("js-plotly-plot",!0),s.makeTester(),Array.isArray(Ee._promises)||(Ee._promises=[]);var Ut=(Ee.data||[]).length===0&&Array.isArray(Xe);Array.isArray(Xe)&&(A.cleanData(Xe),Ut?Ee.data=Xe:Ee.data.push.apply(Ee.data,Xe),Ee.empty=!1),(!Ee.layout||Ut)&&(Ee.layout=A.cleanLayout(rt)),f.supplyDefaults(Ee);var Jt=Ee._fullLayout,Je=Jt._has("cartesian");Jt._replotting=!0,(Ut||Jt._shouldCreateBgLayer)&&($e(Ee),Jt._shouldCreateBgLayer&&delete Jt._shouldCreateBgLayer),s.initGradients(Ee),s.initPatterns(Ee),Ut&&u.saveShowSpikeInitial(Ee);var gt=!Ee.calcdata||Ee.calcdata.length!==(Ee._fullData||[]).length;gt&&f.doCalcdata(Ee);for(var Ct=0;Ct<Ee.calcdata.length;Ct++)Ee.calcdata[Ct][0].trace=Ee._fullData[Ct];Ee._context.responsive?Ee._responsiveChartHandler||(Ee._responsiveChartHandler=function(){p.isHidden(Ee)||f.resize(Ee)},window.addEventListener("resize",Ee._responsiveChartHandler)):p.clearResponsive(Ee);var or=p.extendFlat({},Jt._size),gr=0;function lr(){for(var Re=Jt._basePlotModules,Ye=0;Ye<Re.length;Ye++)Re[Ye].drawFramework&&Re[Ye].drawFramework(Ee);!Jt._glcanvas&&Jt._has("gl")&&(Jt._glcanvas=Jt._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(pt){return pt.key}),Jt._glcanvas.enter().append("canvas").attr("class",function(pt){return"gl-canvas gl-canvas-"+pt.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Qe=Ee._context.plotGlPixelRatio;if(Jt._glcanvas){Jt._glcanvas.attr("width",Jt.width*Qe).attr("height",Jt.height*Qe).style("width",Jt.width+"px").style("height",Jt.height+"px");var ot=Jt._glcanvas.data()[0].regl;if(ot&&(Math.floor(Jt.width*Qe)!==ot._gl.drawingBufferWidth||Math.floor(Jt.height*Qe)!==ot._gl.drawingBufferHeight)){var st="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(gr)p.error(st);else return p.log(st+" Clearing graph and plotting again."),f.cleanPlot([],{},Ee._fullData,Jt),f.supplyDefaults(Ee),Jt=Ee._fullLayout,f.doCalcdata(Ee),gr++,lr()}}return Jt.modebar.orientation==="h"?Jt._modebardiv.style("height",null).style("width","100%"):Jt._modebardiv.style("width",null).style("height",Jt.height+"px"),f.previousPromises(Ee)}function mr(){if(f.clearAutoMarginIds(Ee),b.drawMarginPushers(Ee),u.allowAutoMargin(Ee),Jt._has("pie"))for(var Re=Ee._fullData,Ye=0;Ye<Re.length;Ye++){var Qe=Re[Ye];Qe.type==="pie"&&Qe.automargin&&f.allowAutoMargin(Ee,"pie."+Qe.uid+".automargin")}return f.doAutoMargin(Ee),f.previousPromises(Ee)}function Fr(){if(!!f.didMarginChange(or,Jt._size))return p.syncOrAsync([mr,b.layoutStyles],Ee)}function Rr(){if(!gt){ir();return}return p.syncOrAsync([i.getComponentMethod("shapes","calcAutorange"),i.getComponentMethod("annotations","calcAutorange"),ir],Ee)}function ir(){Ee._transitioning||(b.doAutoRangeAndConstraints(Ee),Ut&&u.saveRangeInitial(Ee),i.getComponentMethod("rangeslider","calcAutorange")(Ee))}function Vr(){return u.draw(Ee,Ut?"":"redraw")}var qe=[f.previousPromises,Xt,lr,mr,Fr];Je&&qe.push(Rr),qe.push(b.layoutStyles),Je&&qe.push(Vr,function(Ye){Ye._fullLayout._insideTickLabelsAutorange&&oe(Ye,Ye._fullLayout._insideTickLabelsAutorange).then(function(){Ye._fullLayout._insideTickLabelsAutorange=void 0})}),qe.push(b.drawData,b.finalDraw,d,f.addLinks,f.rehover,f.redrag,f.doAutoMargin,we,f.previousPromises);function we(Re){Re._fullLayout._insideTickLabelsAutorange&&Ut&&u.saveRangeInitial(Re,!0)}var Me=p.syncOrAsync(qe,Ee);return(!Me||!Me.then)&&(Me=Promise.resolve()),Me.then(function(){return P(Ee),Ee})}function P(Ee){var Xe=Ee._fullLayout;Xe._redrawFromAutoMarginCount?Xe._redrawFromAutoMarginCount--:Ee.emit("plotly_afterplot")}function M(Ee){return p.extendFlat(g,Ee)}function E(Ee,Xe){try{Ee._fullLayout._paper.style("background",Xe)}catch(rt){p.error(rt)}}function D(Ee,Xe){var rt=h.combine(Xe,"white");E(Ee,rt)}function N(Ee,Xe){if(!Ee._context){Ee._context=p.extendDeep({},g);var rt=l.select("base");Ee._context._baseUrl=rt.size()&&rt.attr("href")?window.location.href.split("#")[0]:""}var ut=Ee._context,Pt,kt,Bt;if(Xe){for(kt=Object.keys(Xe),Pt=0;Pt<kt.length;Pt++)Bt=kt[Pt],!(Bt==="editable"||Bt==="edits")&&Bt in ut&&(Bt==="setBackground"&&Xe[Bt]==="opaque"?ut[Bt]=D:ut[Bt]=Xe[Bt]);Xe.plot3dPixelRatio&&!ut.plotGlPixelRatio&&(ut.plotGlPixelRatio=ut.plot3dPixelRatio);var Xt=Xe.editable;if(Xt!==void 0)for(ut.editable=Xt,kt=Object.keys(ut.edits),Pt=0;Pt<kt.length;Pt++)ut.edits[kt[Pt]]=Xt;if(Xe.edits)for(kt=Object.keys(Xe.edits),Pt=0;Pt<kt.length;Pt++)Bt=kt[Pt],Bt in ut.edits&&(ut.edits[Bt]=Xe.edits[Bt]);ut._exportedPlot=Xe._exportedPlot}ut.staticPlot&&(ut.editable=!1,ut.edits={},ut.autosizable=!1,ut.scrollZoom=!1,ut.doubleClick=!1,ut.showTips=!1,ut.showLink=!1,ut.displayModeBar=!1),ut.displayModeBar==="hover"&&!c&&(ut.displayModeBar=!0),(ut.setBackground==="transparent"||typeof ut.setBackground!="function")&&(ut.setBackground=E),ut._hasZeroHeight=ut._hasZeroHeight||Ee.clientHeight===0,ut._hasZeroWidth=ut._hasZeroWidth||Ee.clientWidth===0;var Ut=ut.scrollZoom,Jt=ut._scrollZoom={};if(Ut===!0)Jt.cartesian=1,Jt.gl3d=1,Jt.geo=1,Jt.mapbox=1;else if(typeof Ut=="string"){var Je=Ut.split("+");for(Pt=0;Pt<Je.length;Pt++)Jt[Je[Pt]]=1}else Ut!==!1&&(Jt.gl3d=1,Jt.geo=1,Jt.mapbox=1)}function O(Ee){if(Ee=p.getGraphDiv(Ee),!p.isPlotDiv(Ee))throw new Error("This element is not a Plotly plot: "+Ee);return A.cleanData(Ee.data),A.cleanLayout(Ee.layout),Ee.calcdata=void 0,z._doPlot(Ee).then(function(){return Ee.emit("plotly_redraw"),Ee})}function I(Ee,Xe,rt,ut){return Ee=p.getGraphDiv(Ee),f.cleanPlot([],{},Ee._fullData||[],Ee._fullLayout||{}),f.purge(Ee),z._doPlot(Ee,Xe,rt,ut)}function F(Ee,Xe){var rt=Xe+1,ut=[],Pt,kt;for(Pt=0;Pt<Ee.length;Pt++)kt=Ee[Pt],kt<0?ut.push(rt+kt):ut.push(kt);return ut}function V(Ee,Xe,rt){var ut,Pt;for(ut=0;ut<Xe.length;ut++){if(Pt=Xe[ut],Pt!==parseInt(Pt,10))throw new Error("all values in "+rt+" must be integers");if(Pt>=Ee.data.length||Pt<-Ee.data.length)throw new Error(rt+" must be valid indices for gd.data.");if(Xe.indexOf(Pt,ut+1)>-1||Pt>=0&&Xe.indexOf(-Ee.data.length+Pt)>-1||Pt<0&&Xe.indexOf(Ee.data.length+Pt)>-1)throw new Error("each index in "+rt+" must be unique.")}}function U(Ee,Xe,rt){if(!Array.isArray(Ee.data))throw new Error("gd.data must be an array.");if(typeof Xe=="undefined")throw new Error("currentIndices is a required argument.");if(Array.isArray(Xe)||(Xe=[Xe]),V(Ee,Xe,"currentIndices"),typeof rt!="undefined"&&!Array.isArray(rt)&&(rt=[rt]),typeof rt!="undefined"&&V(Ee,rt,"newIndices"),typeof rt!="undefined"&&Xe.length!==rt.length)throw new Error("current and new indices must be of equal length.")}function j(Ee,Xe,rt){var ut,Pt;if(!Array.isArray(Ee.data))throw new Error("gd.data must be an array.");if(typeof Xe=="undefined")throw new Error("traces must be defined.");for(Array.isArray(Xe)||(Xe=[Xe]),ut=0;ut<Xe.length;ut++)if(Pt=Xe[ut],typeof Pt!="object"||Array.isArray(Pt)||Pt===null)throw new Error("all values in traces array must be non-array objects");if(typeof rt!="undefined"&&!Array.isArray(rt)&&(rt=[rt]),typeof rt!="undefined"&&rt.length!==Xe.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function Z(Ee,Xe,rt,ut){var Pt=p.isPlainObject(ut);if(!Array.isArray(Ee.data))throw new Error("gd.data must be an array");if(!p.isPlainObject(Xe))throw new Error("update must be a key:value object");if(typeof rt=="undefined")throw new Error("indices must be an integer or array of integers");V(Ee,rt,"indices");for(var kt in Xe){if(!Array.isArray(Xe[kt])||Xe[kt].length!==rt.length)throw new Error("attribute "+kt+" must be an array of length equal to indices array length");if(Pt&&(!(kt in ut)||!Array.isArray(ut[kt])||ut[kt].length!==Xe[kt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function te(Ee,Xe,rt,ut){var Pt=p.isPlainObject(ut),kt=[],Bt,Xt,Ut,Jt,Je;Array.isArray(rt)||(rt=[rt]),rt=F(rt,Ee.data.length-1);for(var gt in Xe)for(var Ct=0;Ct<rt.length;Ct++){if(Bt=Ee.data[rt[Ct]],Ut=t(Bt,gt),Xt=Ut.get(),Jt=Xe[gt][Ct],!p.isArrayOrTypedArray(Jt))throw new Error("attribute: "+gt+" index: "+Ct+" must be an array");if(!p.isArrayOrTypedArray(Xt))throw new Error("cannot extend missing or non-array attribute: "+gt);if(Xt.constructor!==Jt.constructor)throw new Error("cannot extend array with an array of a different type: "+gt);Je=Pt?ut[gt][Ct]:ut,o(Je)||(Je=-1),kt.push({prop:Ut,target:Xt,insert:Jt,maxp:Math.floor(Je)})}return kt}function re(Ee,Xe,rt,ut,Pt){Z(Ee,Xe,rt,ut);for(var kt=te(Ee,Xe,rt,ut),Bt={},Xt={},Ut=0;Ut<kt.length;Ut++){var Jt=kt[Ut].prop,Je=kt[Ut].maxp,gt=Pt(kt[Ut].target,kt[Ut].insert,Je);Jt.set(gt[0]),Array.isArray(Bt[Jt.astr])||(Bt[Jt.astr]=[]),Bt[Jt.astr].push(gt[1]),Array.isArray(Xt[Jt.astr])||(Xt[Jt.astr]=[]),Xt[Jt.astr].push(kt[Ut].target.length)}return{update:Bt,maxPoints:Xt}}function W(Ee,Xe){var rt=new Ee.constructor(Ee.length+Xe.length);return rt.set(Ee),rt.set(Xe,Ee.length),rt}function J(Ee,Xe,rt,ut){Ee=p.getGraphDiv(Ee);function Pt(Ut,Jt,Je){var gt,Ct;if(p.isTypedArray(Ut))if(Je<0){var or=new Ut.constructor(0),gr=W(Ut,Jt);Je<0?(gt=gr,Ct=or):(gt=or,Ct=gr)}else if(gt=new Ut.constructor(Je),Ct=new Ut.constructor(Ut.length+Jt.length-Je),Je===Jt.length)gt.set(Jt),Ct.set(Ut);else if(Je<Jt.length){var lr=Jt.length-Je;gt.set(Jt.subarray(lr)),Ct.set(Ut),Ct.set(Jt.subarray(0,lr),Ut.length)}else{var mr=Je-Jt.length,Fr=Ut.length-mr;gt.set(Ut.subarray(Fr)),gt.set(Jt,mr),Ct.set(Ut.subarray(0,Fr))}else gt=Ut.concat(Jt),Ct=Je>=0&&Je<gt.length?gt.splice(0,gt.length-Je):[];return[gt,Ct]}var kt=re(Ee,Xe,rt,ut,Pt),Bt=z.redraw(Ee),Xt=[Ee,kt.update,rt,kt.maxPoints];return a.add(Ee,z.prependTraces,Xt,J,arguments),Bt}function le(Ee,Xe,rt,ut){Ee=p.getGraphDiv(Ee);function Pt(Ut,Jt,Je){var gt,Ct;if(p.isTypedArray(Ut))if(Je<=0){var or=new Ut.constructor(0),gr=W(Jt,Ut);Je<0?(gt=gr,Ct=or):(gt=or,Ct=gr)}else if(gt=new Ut.constructor(Je),Ct=new Ut.constructor(Ut.length+Jt.length-Je),Je===Jt.length)gt.set(Jt),Ct.set(Ut);else if(Je<Jt.length){var lr=Jt.length-Je;gt.set(Jt.subarray(0,lr)),Ct.set(Jt.subarray(lr)),Ct.set(Ut,lr)}else{var mr=Je-Jt.length;gt.set(Jt),gt.set(Ut.subarray(0,mr),Jt.length),Ct.set(Ut.subarray(mr))}else gt=Jt.concat(Ut),Ct=Je>=0&&Je<gt.length?gt.splice(Je,gt.length):[];return[gt,Ct]}var kt=re(Ee,Xe,rt,ut,Pt),Bt=z.redraw(Ee),Xt=[Ee,kt.update,rt,kt.maxPoints];return a.add(Ee,z.extendTraces,Xt,le,arguments),Bt}function ue(Ee,Xe,rt){Ee=p.getGraphDiv(Ee);var ut=[],Pt=z.deleteTraces,kt=ue,Bt=[Ee,ut],Xt=[Ee,Xe],Ut,Jt;for(j(Ee,Xe,rt),Array.isArray(Xe)||(Xe=[Xe]),Xe=Xe.map(function(Je){return p.extendFlat({},Je)}),A.cleanData(Xe),Ut=0;Ut<Xe.length;Ut++)Ee.data.push(Xe[Ut]);for(Ut=0;Ut<Xe.length;Ut++)ut.push(-Xe.length+Ut);if(typeof rt=="undefined")return Jt=z.redraw(Ee),a.add(Ee,Pt,Bt,kt,Xt),Jt;Array.isArray(rt)||(rt=[rt]);try{U(Ee,ut,rt)}catch(Je){throw Ee.data.splice(Ee.data.length-Xe.length,Xe.length),Je}return a.startSequence(Ee),a.add(Ee,Pt,Bt,kt,Xt),Jt=z.moveTraces(Ee,ut,rt),a.stopSequence(Ee),Jt}function se(Ee,Xe){Ee=p.getGraphDiv(Ee);var rt=[],ut=z.addTraces,Pt=se,kt=[Ee,rt,Xe],Bt=[Ee,Xe],Xt,Ut;if(typeof Xe=="undefined")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Xe)||(Xe=[Xe]),V(Ee,Xe,"indices"),Xe=F(Xe,Ee.data.length-1),Xe.sort(p.sorterDes),Xt=0;Xt<Xe.length;Xt+=1)Ut=Ee.data.splice(Xe[Xt],1)[0],rt.push(Ut);var Jt=z.redraw(Ee);return a.add(Ee,ut,kt,Pt,Bt),Jt}function G(Ee,Xe,rt){Ee=p.getGraphDiv(Ee);var ut=[],Pt=[],kt=G,Bt=G,Xt=[Ee,rt,Xe],Ut=[Ee,Xe,rt],Jt;if(U(Ee,Xe,rt),Xe=Array.isArray(Xe)?Xe:[Xe],typeof rt=="undefined")for(rt=[],Jt=0;Jt<Xe.length;Jt++)rt.push(-Xe.length+Jt);for(rt=Array.isArray(rt)?rt:[rt],Xe=F(Xe,Ee.data.length-1),rt=F(rt,Ee.data.length-1),Jt=0;Jt<Ee.data.length;Jt++)Xe.indexOf(Jt)===-1&&ut.push(Ee.data[Jt]);for(Jt=0;Jt<Xe.length;Jt++)Pt.push({newIndex:rt[Jt],trace:Ee.data[Xe[Jt]]});for(Pt.sort(function(gt,Ct){return gt.newIndex-Ct.newIndex}),Jt=0;Jt<Pt.length;Jt+=1)ut.splice(Pt[Jt].newIndex,0,Pt[Jt].trace);Ee.data=ut;var Je=z.redraw(Ee);return a.add(Ee,kt,Xt,Bt,Ut),Je}function Y(Ee,Xe,rt,ut){Ee=p.getGraphDiv(Ee),A.clearPromiseQueue(Ee);var Pt={};if(typeof Xe=="string")Pt[Xe]=rt;else if(p.isPlainObject(Xe))Pt=p.extendFlat({},Xe),ut===void 0&&(ut=rt);else return p.warn("Restyle fail.",Xe,rt,ut),Promise.reject();Object.keys(Pt).length&&(Ee.changed=!0);var kt=A.coerceTraceIndices(Ee,ut),Bt=ae(Ee,Pt,kt),Xt=Bt.flags;Xt.calc&&(Ee.calcdata=void 0),Xt.clearAxisTypes&&A.clearAxisTypes(Ee,kt,{});var Ut=[];Xt.fullReplot?Ut.push(z._doPlot):(Ut.push(f.previousPromises),f.supplyDefaults(Ee),Xt.markerSize&&(f.doCalcdata(Ee),ye(Ut)),Xt.style&&Ut.push(b.doTraceStyle),Xt.colorbars&&Ut.push(b.doColorBars),Ut.push(P)),Ut.push(f.rehover,f.redrag),a.add(Ee,Y,[Ee,Bt.undoit,Bt.traces],Y,[Ee,Bt.redoit,Bt.traces]);var Jt=p.syncOrAsync(Ut,Ee);return(!Jt||!Jt.then)&&(Jt=Promise.resolve()),Jt.then(function(){return Ee.emit("plotly_restyle",Bt.eventData),Ee})}function ee(Ee){return Ee===void 0?null:Ee}function $(Ee,Xe){return Xe?function(rt,ut,Pt){var kt=t(rt,ut),Bt=kt.set;return kt.set=function(Xt){var Ut=(Pt||"")+ut;K(Ut,kt.get(),Xt,Ee),Bt(Xt)},kt}:t}function K(Ee,Xe,rt,ut){if(Array.isArray(Xe)||Array.isArray(rt))for(var Pt=Array.isArray(Xe)?Xe:[],kt=Array.isArray(rt)?rt:[],Bt=Math.max(Pt.length,kt.length),Xt=0;Xt<Bt;Xt++)K(Ee+"["+Xt+"]",Pt[Xt],kt[Xt],ut);else if(p.isPlainObject(Xe)||p.isPlainObject(rt)){var Ut=p.isPlainObject(Xe)?Xe:{},Jt=p.isPlainObject(rt)?rt:{},Je=p.extendFlat({},Ut,Jt);for(var gt in Je)K(Ee+"."+gt,Ut[gt],Jt[gt],ut)}else ut[Ee]===void 0&&(ut[Ee]=ee(Xe))}function Q(Ee,Xe,rt){for(var ut in rt){var Pt=t(Ee,ut);K(ut,Pt.get(),rt[ut],Xe)}}function ae(Ee,Xe,rt){var ut=Ee._fullLayout,Pt=Ee._fullData,kt=Ee.data,Bt=ut._guiEditing,Xt=$(ut._preGUI,Bt),Ut=p.extendDeepAll({},Xe),Jt;ie(Xe);var Je=S.traceFlags(),gt={},Ct={},or;function gr(){return rt.map(function(){})}function lr(nr){var dr=u.id2name(nr);or.indexOf(dr)===-1&&or.push(dr)}function mr(nr){return"LAYOUT"+nr+".autorange"}function Fr(nr){return"LAYOUT"+nr+".range"}function Rr(nr){for(var dr=nr;dr<Pt.length;dr++)if(Pt[dr]._input===kt[nr])return Pt[dr]}function ir(nr,dr,Zr){if(Array.isArray(nr)){nr.forEach(function(on){ir(on,dr,Zr)});return}if(!(nr in Xe||A.hasParent(Xe,nr))){var Lr;if(nr.substr(0,6)==="LAYOUT")Lr=Xt(Ee.layout,nr.replace("LAYOUT",""));else{var Ur=rt[Zr],xr=ut._tracePreGUI[Rr(Ur)._fullInput.uid];Lr=$(xr,Bt)(kt[Ur],nr)}nr in Ct||(Ct[nr]=gr()),Ct[nr][Zr]===void 0&&(Ct[nr][Zr]=ee(Lr.get())),dr!==void 0&&Lr.set(dr)}}function Vr(nr){return function(dr){return Pt[dr][nr]}}function qe(nr){return function(dr,Zr){return dr===!1?Pt[rt[Zr]][nr]:null}}for(var we in Xe){if(A.hasParent(Xe,we))throw new Error("cannot set "+we+" and a parent attribute simultaneously");var Me=Xe[we],Re,Ye,Qe,ot,st,pt;if((we==="autobinx"||we==="autobiny")&&(we=we.charAt(we.length-1)+"bins",Array.isArray(Me)?Me=Me.map(qe(we)):Me===!1?Me=rt.map(Vr(we)):Me=null),gt[we]=Me,we.substr(0,6)==="LAYOUT"){Qe=Xt(Ee.layout,we.replace("LAYOUT","")),Ct[we]=[ee(Qe.get())],Qe.set(Array.isArray(Me)?Me[0]:Me),Je.calc=!0;continue}for(Ct[we]=gr(),Jt=0;Jt<rt.length;Jt++){Re=kt[rt[Jt]],Ye=Rr(rt[Jt]);var wt=ut._tracePreGUI[Ye._fullInput.uid];if(Qe=$(wt,Bt)(Re,we),ot=Qe.get(),st=Array.isArray(Me)?Me[Jt%Me.length]:Me,st!==void 0){var Yt=Qe.parts[Qe.parts.length-1],wr=we.substr(0,we.length-Yt.length-1),Tr=wr?wr+".":"",Mr=wr?t(Ye,wr).get():Ye;if(pt=r.getTraceValObject(Ye,Qe.parts),pt&&pt.impliedEdits&&st!==null)for(var _r in pt.impliedEdits)ir(p.relativeAttr(we,_r),pt.impliedEdits[_r],Jt);else if((Yt==="thicknessmode"||Yt==="lenmode")&&ot!==st&&(st==="fraction"||st==="pixels")&&Mr){var Or=ut._size,nn=Mr.orient,Sr=nn==="top"||nn==="bottom";if(Yt==="thicknessmode"){var yr=Sr?Or.h:Or.w;ir(Tr+"thickness",Mr.thickness*(st==="fraction"?1/yr:yr),Jt)}else{var gn=Sr?Or.w:Or.h;ir(Tr+"len",Mr.len*(st==="fraction"?1/gn:gn),Jt)}}else if(we==="type"&&(st==="pie"!=(ot==="pie")||st==="funnelarea"!=(ot==="funnelarea"))){var Xr="x",kr="y";(st==="bar"||ot==="bar")&&Re.orientation==="h"&&(Xr="y",kr="x"),p.swapAttrs(Re,["?","?src"],"labels",Xr),p.swapAttrs(Re,["d?","?0"],"label",Xr),p.swapAttrs(Re,["?","?src"],"values",kr),ot==="pie"||ot==="funnelarea"?(t(Re,"marker.color").set(t(Re,"marker.colors").get()),ut._pielayer.selectAll("g.trace").remove()):i.traceIs(Re,"cartesian")&&t(Re,"marker.colors").set(t(Re,"marker.color").get())}Ct[we][Jt]=ee(ot);var sn=["swapxy","swapxyaxes","orientation","orientationaxes"];if(sn.indexOf(we)!==-1){if(we==="orientation"){Qe.set(st);var cn=Re.x&&!Re.y?"h":"v";if((Qe.get()||cn)===Ye.orientation)continue}else we==="orientationaxes"&&(Re.orientation={v:"h",h:"v"}[Ye.orientation]);A.swapXYData(Re),Je.calc=Je.clearAxisTypes=!0}else f.dataArrayContainers.indexOf(Qe.parts[0])!==-1?(A.manageArrayContainers(Qe,st,Ct),Je.calc=!0):(pt?pt.arrayOk&&!i.traceIs(Ye,"regl")&&(p.isArrayOrTypedArray(st)||p.isArrayOrTypedArray(ot))?Je.calc=!0:S.update(Je,pt):Je.calc=!0,Qe.set(st))}}if(["swapxyaxes","orientationaxes"].indexOf(we)!==-1&&u.swap(Ee,rt),we==="orientationaxes"){var $r=t(Ee.layout,"hovermode"),at=$r.get();at==="x"?$r.set("y"):at==="y"?$r.set("x"):at==="x unified"?$r.set("y unified"):at==="y unified"&&$r.set("x unified")}if(["orientation","type"].indexOf(we)!==-1){for(or=[],Jt=0;Jt<rt.length;Jt++){var Ot=kt[rt[Jt]];i.traceIs(Ot,"cartesian")&&(lr(Ot.xaxis||"x"),lr(Ot.yaxis||"y"))}ir(or.map(mr),!0,0),ir(or.map(Fr),[0,1],0)}}return(Je.calc||Je.plot)&&(Je.fullReplot=!0),{flags:Je,undoit:Ct,redoit:gt,traces:rt,eventData:p.extendDeepNoArrays([],[Ut,rt])}}function ie(Ee){var Xe=p.counterRegex("axis",".title",!1,!1),rt=/colorbar\.title$/,ut=Object.keys(Ee),Pt,kt,Bt;for(Pt=0;Pt<ut.length;Pt++)kt=ut[Pt],Bt=Ee[kt],(kt==="title"||Xe.test(kt)||rt.test(kt))&&(typeof Bt=="string"||typeof Bt=="number")?Xt(kt,kt.replace("title","title.text")):kt.indexOf("titlefont")>-1&&kt.indexOf("grouptitlefont")===-1?Xt(kt,kt.replace("titlefont","title.font")):kt.indexOf("titleposition")>-1?Xt(kt,kt.replace("titleposition","title.position")):kt.indexOf("titleside")>-1?Xt(kt,kt.replace("titleside","title.side")):kt.indexOf("titleoffset")>-1&&Xt(kt,kt.replace("titleoffset","title.offset"));function Xt(Ut,Jt){Ee[Jt]=Ee[Ut],delete Ee[Ut]}}function oe(Ee,Xe,rt){Ee=p.getGraphDiv(Ee),A.clearPromiseQueue(Ee);var ut={};if(typeof Xe=="string")ut[Xe]=rt;else if(p.isPlainObject(Xe))ut=p.extendFlat({},Xe);else return p.warn("Relayout fail.",Xe,rt),Promise.reject();Object.keys(ut).length&&(Ee.changed=!0);var Pt=ke(Ee,ut),kt=Pt.flags;kt.calc&&(Ee.calcdata=void 0);var Bt=[f.previousPromises];kt.layoutReplot?Bt.push(b.layoutReplot):Object.keys(ut).length&&(fe(Ee,kt,Pt)||f.supplyDefaults(Ee),kt.legend&&Bt.push(b.doLegend),kt.layoutstyle&&Bt.push(b.layoutStyles),kt.axrange&&ye(Bt,Pt.rangesAltered),kt.ticks&&Bt.push(b.doTicksRelayout),kt.modebar&&Bt.push(b.doModeBar),kt.camera&&Bt.push(b.doCamera),kt.colorbars&&Bt.push(b.doColorBars),Bt.push(P)),Bt.push(f.rehover,f.redrag),a.add(Ee,oe,[Ee,Pt.undoit],oe,[Ee,Pt.redoit]);var Xt=p.syncOrAsync(Bt,Ee);return(!Xt||!Xt.then)&&(Xt=Promise.resolve(Ee)),Xt.then(function(){return Ee.emit("plotly_relayout",Pt.eventData),Ee})}function fe(Ee,Xe,rt){var ut=Ee._fullLayout;if(!Xe.axrange)return!1;for(var Pt in Xe)if(Pt!=="axrange"&&Xe[Pt])return!1;for(var kt in rt.rangesAltered){var Bt=u.id2name(kt),Xt=Ee.layout[Bt],Ut=ut[Bt];if(Ut.autorange=Xt.autorange,Xt.range&&(Ut.range=Xt.range.slice()),Ut.cleanRange(),Ut._matchGroup){for(var Jt in Ut._matchGroup)if(Jt!==kt){var Je=ut[u.id2name(Jt)];Je.autorange=Ut.autorange,Je.range=Ut.range.slice(),Je._input.range=Ut.range.slice()}}}return!0}function ye(Ee,Xe){var rt=Xe?function(ut){var Pt=[],kt=!0;for(var Bt in Xe){var Xt=u.getFromId(ut,Bt);if(Pt.push(Bt),(Xt.ticklabelposition||"").indexOf("inside")!==-1&&Xt._anchorAxis&&Pt.push(Xt._anchorAxis._id),Xt._matchGroup)for(var Ut in Xt._matchGroup)Xe[Ut]||Pt.push(Ut);Xt.automargin&&(kt=!1)}return u.draw(ut,Pt,{skipTitle:kt})}:function(ut){return u.draw(ut,"redraw")};Ee.push(m,b.doAutoRangeAndConstraints,rt,b.drawData,b.finalDraw)}var ce=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,me=/^[xyz]axis[0-9]*\.autorange$/,xe=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ke(Ee,Xe){var rt=Ee.layout,ut=Ee._fullLayout,Pt=ut._guiEditing,kt=$(ut._preGUI,Pt),Bt=Object.keys(Xe),Xt=u.list(Ee),Ut=p.extendDeepAll({},Xe),Jt={},Je,gt,Ct;for(ie(Xe),Bt=Object.keys(Xe),gt=0;gt<Bt.length;gt++)if(Bt[gt].indexOf("allaxes")===0){for(Ct=0;Ct<Xt.length;Ct++){var or=Xt[Ct]._id.substr(1),gr=or.indexOf("scene")!==-1?or+".":"",lr=Bt[gt].replace("allaxes",gr+Xt[Ct]._name);Xe[lr]||(Xe[lr]=Xe[Bt[gt]])}delete Xe[Bt[gt]]}var mr=S.layoutFlags(),Fr={},Rr={};function ir(Ur,xr){if(Array.isArray(Ur)){Ur.forEach(function(Pn){ir(Pn,xr)});return}if(!(Ur in Xe||A.hasParent(Xe,Ur))){var on=kt(rt,Ur);Ur in Rr||(Rr[Ur]=ee(on.get())),xr!==void 0&&on.set(xr)}}var Vr={},qe;function we(Ur){var xr=u.name2id(Ur.split(".")[0]);return Vr[xr]=1,xr}for(var Me in Xe){if(A.hasParent(Xe,Me))throw new Error("cannot set "+Me+" and a parent attribute simultaneously");for(var Re=kt(rt,Me),Ye=Xe[Me],Qe=Re.parts.length,ot=Qe-1;ot>0&&typeof Re.parts[ot]!="string";)ot--;var st=Re.parts[ot],pt=Re.parts[ot-1]+"."+st,wt=Re.parts.slice(0,ot).join("."),Yt=t(Ee.layout,wt).get(),wr=t(ut,wt).get(),Tr=Re.get();if(Ye!==void 0){Fr[Me]=Ye,Rr[Me]=st==="reverse"?Ye:ee(Tr);var Mr=r.getLayoutValObject(ut,Re.parts);if(Mr&&Mr.impliedEdits&&Ye!==null)for(var _r in Mr.impliedEdits)ir(p.relativeAttr(Me,_r),Mr.impliedEdits[_r]);if(["width","height"].indexOf(Me)!==-1)if(Ye){ir("autosize",null);var Or=Me==="height"?"width":"height";ir(Or,ut[Or])}else ut[Me]=Ee._initialAutoSize[Me];else if(Me==="autosize")ir("width",Ye?null:ut.width),ir("height",Ye?null:ut.height);else if(pt.match(ce))we(pt),t(ut,wt+"._inputRange").set(null);else if(pt.match(me)){we(pt),t(ut,wt+"._inputRange").set(null);var nn=t(ut,wt).get();nn._inputDomain&&(nn._input.domain=nn._inputDomain.slice())}else pt.match(xe)&&t(ut,wt+"._inputDomain").set(null);if(st==="type"){qe=Yt;var Sr=wr.type==="linear"&&Ye==="log",yr=wr.type==="log"&&Ye==="linear";if(Sr||yr){if(!qe||!qe.range)ir(wt+".autorange",!0);else if(wr.autorange)Sr&&(qe.range=qe.range[1]>qe.range[0]?[1,2]:[2,1]);else{var gn=qe.range[0],Xr=qe.range[1];Sr?(gn<=0&&Xr<=0&&ir(wt+".autorange",!0),gn<=0?gn=Xr/1e6:Xr<=0&&(Xr=gn/1e6),ir(wt+".range[0]",Math.log(gn)/Math.LN10),ir(wt+".range[1]",Math.log(Xr)/Math.LN10)):(ir(wt+".range[0]",Math.pow(10,gn)),ir(wt+".range[1]",Math.pow(10,Xr)))}Array.isArray(ut._subplots.polar)&&ut._subplots.polar.length&&ut[Re.parts[0]]&&Re.parts[1]==="radialaxis"&&delete ut[Re.parts[0]]._subplot.viewInitial["radialaxis.range"],i.getComponentMethod("annotations","convertCoords")(Ee,wr,Ye,ir),i.getComponentMethod("images","convertCoords")(Ee,wr,Ye,ir)}else ir(wt+".autorange",!0),ir(wt+".range",null);t(ut,wt+"._inputRange").set(null)}else if(st.match(w)){var kr=t(ut,Me).get(),sn=(Ye||{}).type;(!sn||sn==="-")&&(sn="linear"),i.getComponentMethod("annotations","convertCoords")(Ee,kr,sn,ir),i.getComponentMethod("images","convertCoords")(Ee,kr,sn,ir)}var cn=x.containerArrayMatch(Me);if(cn){Je=cn.array,gt=cn.index;var $r=cn.property,at=Mr||{editType:"calc"};gt!==""&&$r===""&&(x.isAddVal(Ye)?Rr[Me]=null:x.isRemoveVal(Ye)?Rr[Me]=(t(rt,Je).get()||[])[gt]:p.warn("unrecognized full object value",Xe)),S.update(mr,at),Jt[Je]||(Jt[Je]={});var Ot=Jt[Je][gt];Ot||(Ot=Jt[Je][gt]={}),Ot[$r]=Ye,delete Xe[Me]}else st==="reverse"?(Yt.range?Yt.range.reverse():(ir(wt+".autorange",!0),Yt.range=[1,0]),wr.autorange?mr.calc=!0:mr.plot=!0):(ut._has("scatter-like")&&ut._has("regl")&&Me==="dragmode"&&(Ye==="lasso"||Ye==="select")&&!(Tr==="lasso"||Tr==="select")||ut._has("gl2d")?mr.plot=!0:Mr?S.update(mr,Mr):mr.calc=!0,Re.set(Ye))}}for(Je in Jt){var nr=x.applyContainerArrayChanges(Ee,kt(rt,Je),Jt[Je],mr,kt);nr||(mr.plot=!0)}for(var dr in Vr){qe=u.getFromId(Ee,dr);var Zr=qe&&qe._constraintGroup;if(Zr){mr.calc=!0;for(var Lr in Zr)Vr[Lr]||(u.getFromId(Ee,Lr)._constraintShrinkable=!0)}}return(Ae(Ee)||Xe.height||Xe.width)&&(mr.plot=!0),(mr.plot||mr.calc)&&(mr.layoutReplot=!0),{flags:mr,rangesAltered:Vr,undoit:Rr,redoit:Fr,eventData:Ut}}function Ae(Ee){var Xe=Ee._fullLayout,rt=Xe.width,ut=Xe.height;return Ee.layout.autosize&&f.plotAutoSize(Ee,Ee.layout,Xe),Xe.width!==rt||Xe.height!==ut}function Oe(Ee,Xe,rt,ut){Ee=p.getGraphDiv(Ee),A.clearPromiseQueue(Ee),p.isPlainObject(Xe)||(Xe={}),p.isPlainObject(rt)||(rt={}),Object.keys(Xe).length&&(Ee.changed=!0),Object.keys(rt).length&&(Ee.changed=!0);var Pt=A.coerceTraceIndices(Ee,ut),kt=ae(Ee,p.extendFlat({},Xe),Pt),Bt=kt.flags,Xt=ke(Ee,p.extendFlat({},rt)),Ut=Xt.flags;(Bt.calc||Ut.calc)&&(Ee.calcdata=void 0),Bt.clearAxisTypes&&A.clearAxisTypes(Ee,Pt,rt);var Jt=[];Ut.layoutReplot?Jt.push(b.layoutReplot):Bt.fullReplot?Jt.push(z._doPlot):(Jt.push(f.previousPromises),fe(Ee,Ut,Xt)||f.supplyDefaults(Ee),Bt.style&&Jt.push(b.doTraceStyle),(Bt.colorbars||Ut.colorbars)&&Jt.push(b.doColorBars),Ut.legend&&Jt.push(b.doLegend),Ut.layoutstyle&&Jt.push(b.layoutStyles),Ut.axrange&&ye(Jt,Xt.rangesAltered),Ut.ticks&&Jt.push(b.doTicksRelayout),Ut.modebar&&Jt.push(b.doModeBar),Ut.camera&&Jt.push(b.doCamera),Jt.push(P)),Jt.push(f.rehover,f.redrag),a.add(Ee,Oe,[Ee,kt.undoit,Xt.undoit,kt.traces],Oe,[Ee,kt.redoit,Xt.redoit,kt.traces]);var Je=p.syncOrAsync(Jt,Ee);return(!Je||!Je.then)&&(Je=Promise.resolve(Ee)),Je.then(function(){return Ee.emit("plotly_update",{data:kt.eventData,layout:Xt.eventData}),Ee})}function He(Ee){return function(rt){rt._fullLayout._guiEditing=!0;var ut=Ee.apply(null,arguments);return rt._fullLayout._guiEditing=!1,ut}}var Ge=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],_e=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Ie(Ee,Xe){for(var rt=0;rt<Xe.length;rt++){var ut=Xe[rt],Pt=Ee.match(ut.pattern);if(Pt){var kt=Pt[1]||"";return{head:kt,tail:Ee.substr(kt.length+1),attr:ut.attr}}}}function We(Ee,Xe){var rt=t(Xe,Ee).get();if(rt!==void 0)return rt;var ut=Ee.split(".");for(ut.pop();ut.length>1;)if(ut.pop(),rt=t(Xe,ut.join(".")+".uirevision").get(),rt!==void 0)return rt;return Xe.uirevision}function et(Ee,Xe){for(var rt=0;rt<Xe.length;rt++)if(Xe[rt]._fullInput.uid===Ee)return rt;return-1}function Ne(Ee,Xe,rt){for(var ut=0;ut<Xe.length;ut++)if(Xe[ut].uid===Ee)return ut;return!Xe[rt]||Xe[rt].uid?-1:rt}function De(Ee,Xe){var rt=p.isPlainObject(Ee),ut=Array.isArray(Ee);return rt||ut?(rt&&p.isPlainObject(Xe)||ut&&Array.isArray(Xe))&&JSON.stringify(Ee)===JSON.stringify(Xe):Ee===Xe}function Ve(Ee,Xe,rt,ut){var Pt=ut._preGUI,kt,Bt,Xt,Ut,Jt,Je,gt,Ct,or,gr,lr=[],mr={},Fr={};for(kt in Pt){if(Jt=Ie(kt,Ge),Jt){if(or=Jt.head,gr=Jt.tail,Bt=Jt.attr||or+".uirevision",Xt=t(ut,Bt).get(),Ut=Xt&&We(Bt,Xe),Ut&&Ut===Xt){if(Je=Pt[kt],Je===null&&(Je=void 0),gt=t(Xe,kt),Ct=gt.get(),De(Ct,Je)){Ct===void 0&&gr==="autorange"&&lr.push(or),gt.set(ee(t(ut,kt).get()));continue}else if(gr==="autorange"||gr.substr(0,6)==="range["){var Rr=Pt[or+".range[0]"],ir=Pt[or+".range[1]"],Vr=Pt[or+".autorange"];if(Vr||Vr===null&&Rr===null&&ir===null){if(!(or in mr)){var qe=t(Xe,or).get();mr[or]=qe&&(qe.autorange||qe.autorange!==!1&&(!qe.range||qe.range.length!==2))}if(mr[or]){gt.set(ee(t(ut,kt).get()));continue}}}}}else p.warn("unrecognized GUI edit: "+kt);delete Pt[kt],Jt&&Jt.tail.substr(0,6)==="range["&&(Fr[Jt.head]=1)}for(var we=0;we<lr.length;we++){var Me=lr[we];if(Fr[Me]){var Re=t(Xe,Me).get();Re&&delete Re.autorange}}var Ye=ut._tracePreGUI;for(var Qe in Ye){var ot=Ye[Qe],st=null,pt;for(kt in ot){if(!st){var wt=et(Qe,rt);if(wt<0){delete Ye[Qe];break}var Yt=rt[wt];pt=Yt._fullInput;var wr=Ne(Qe,Ee,pt.index);if(wr<0){delete Ye[Qe];break}st=Ee[wr]}if(Jt=Ie(kt,_e),Jt){if(Jt.attr?(Xt=t(ut,Jt.attr).get(),Ut=Xt&&We(Jt.attr,Xe)):(Xt=pt.uirevision,Ut=st.uirevision,Ut===void 0&&(Ut=Xe.uirevision)),Ut&&Ut===Xt&&(Je=ot[kt],Je===null&&(Je=void 0),gt=t(st,kt),Ct=gt.get(),De(Ct,Je))){gt.set(ee(t(pt,kt).get()));continue}}else p.warn("unrecognized GUI edit: "+kt+" in trace uid "+Qe);delete ot[kt]}}}function dt(Ee,Xe,rt,ut){var Pt,kt;function Bt(){return z.addFrames(Ee,Pt)}Ee=p.getGraphDiv(Ee),A.clearPromiseQueue(Ee);var Xt=Ee._fullData,Ut=Ee._fullLayout;if(!p.isPlotDiv(Ee)||!Xt||!Ut)kt=z.newPlot(Ee,Xe,rt,ut);else{if(p.isPlainObject(Xe)){var Jt=Xe;Xe=Jt.data,rt=Jt.layout,ut=Jt.config,Pt=Jt.frames}var Je=!1;if(ut){var gt=p.extendDeep({},Ee._context);Ee._context=void 0,N(Ee,ut),Je=zt(gt,Ee._context)}Ee.data=Xe||[],A.cleanData(Ee.data),Ee.layout=rt||{},A.cleanLayout(Ee.layout),Ve(Ee.data,Ee.layout,Xt,Ut),f.supplyDefaults(Ee,{skipUpdateCalc:!0});var Ct=Ee._fullData,or=Ee._fullLayout,gr=or.datarevision===void 0,lr=or.transition,mr=Gt(Ee,Ut,or,gr,lr),Fr=mr.newDataRevision,Rr=Dt(Ee,Xt,Ct,gr,lr,Fr);if(Ae(Ee)&&(mr.layoutReplot=!0),Rr.calc||mr.calc){Ee.calcdata=void 0;for(var ir=Object.getOwnPropertyNames(or),Vr=0;Vr<ir.length;Vr++){var qe=ir[Vr],we=qe.substring(0,5);if(we==="xaxis"||we==="yaxis"){var Me=or[qe]._emptyCategories;Me&&Me()}}}else f.supplyDefaultsUpdateCalc(Ee.calcdata,Ct);var Re=[];if(Pt&&(Ee._transitionData={},f.createTransitionData(Ee),Re.push(Bt)),or.transition&&!Je&&(Rr.anim||mr.anim))mr.ticks&&Re.push(b.doTicksRelayout),f.doCalcdata(Ee),b.doAutoRangeAndConstraints(Ee),Re.push(function(){return f.transitionFromReact(Ee,Rr,mr,Ut)});else if(Rr.fullReplot||mr.layoutReplot||Je)Ee._fullLayout._skipDefaults=!0,Re.push(z._doPlot);else{for(var Ye in mr.arrays){var Qe=mr.arrays[Ye];if(Qe.length){var ot=i.getComponentMethod(Ye,"drawOne");if(ot!==p.noop)for(var st=0;st<Qe.length;st++)ot(Ee,Qe[st]);else{var pt=i.getComponentMethod(Ye,"draw");if(pt===p.noop)throw new Error("cannot draw components: "+Ye);pt(Ee)}}}Re.push(f.previousPromises),Rr.style&&Re.push(b.doTraceStyle),(Rr.colorbars||mr.colorbars)&&Re.push(b.doColorBars),mr.legend&&Re.push(b.doLegend),mr.layoutstyle&&Re.push(b.layoutStyles),mr.axrange&&ye(Re),mr.ticks&&Re.push(b.doTicksRelayout),mr.modebar&&Re.push(b.doModeBar),mr.camera&&Re.push(b.doCamera),Re.push(P)}Re.push(f.rehover,f.redrag),kt=p.syncOrAsync(Re,Ee),(!kt||!kt.then)&&(kt=Promise.resolve(Ee))}return kt.then(function(){return Ee.emit("plotly_react",{data:Xe,layout:rt}),Ee})}function Dt(Ee,Xe,rt,ut,Pt,kt){var Bt=Xe.length===rt.length;if(!Pt&&!Bt)return{fullReplot:!0,calc:!0};var Xt=S.traceFlags();Xt.arrays={},Xt.nChanges=0,Xt.nChangesAnim=0;var Ut,Jt;function Je(or){var gr=r.getTraceValObject(Jt,or);return!Jt._module.animatable&&gr.anim&&(gr.anim=!1),gr}var gt={getValObject:Je,flags:Xt,immutable:ut,transition:Pt,newDataRevision:kt,gd:Ee},Ct={};for(Ut=0;Ut<Xe.length;Ut++)if(rt[Ut]){if(Jt=rt[Ut]._fullInput,f.hasMakesDataTransform(Jt)&&(Jt=rt[Ut]),Ct[Jt.uid])continue;Ct[Jt.uid]=1,Mt(Xe[Ut]._fullInput,Jt,[],gt)}return(Xt.calc||Xt.plot)&&(Xt.fullReplot=!0),Pt&&Xt.nChanges&&Xt.nChangesAnim&&(Xt.anim=Xt.nChanges===Xt.nChangesAnim&&Bt?"all":"some"),Xt}function Gt(Ee,Xe,rt,ut,Pt){var kt=S.layoutFlags();kt.arrays={},kt.rangesAltered={},kt.nChanges=0,kt.nChangesAnim=0;function Bt(Ut){return r.getLayoutValObject(rt,Ut)}var Xt={getValObject:Bt,flags:kt,immutable:ut,transition:Pt,gd:Ee};return Mt(Xe,rt,[],Xt),(kt.plot||kt.calc)&&(kt.layoutReplot=!0),Pt&&kt.nChanges&&kt.nChangesAnim&&(kt.anim=kt.nChanges===kt.nChangesAnim?"all":"some"),kt}function Mt(Ee,Xe,rt,ut){var Pt,kt,Bt,Xt=ut.getValObject,Ut=ut.flags,Jt=ut.immutable,Je=ut.inArray,gt=ut.arrayIndex;function Ct(){var wt=Pt.editType;if(Je&&wt.indexOf("arraydraw")!==-1){p.pushUnique(Ut.arrays[Je],gt);return}S.update(Ut,Pt),wt!=="none"&&Ut.nChanges++,ut.transition&&Pt.anim&&Ut.nChangesAnim++,(ce.test(Bt)||me.test(Bt))&&(Ut.rangesAltered[rt[0]]=1),xe.test(Bt)&&t(Xe,"_inputDomain").set(null),kt==="datarevision"&&(Ut.newDataRevision=1)}function or(wt){return wt.valType==="data_array"||wt.arrayOk}for(kt in Ee){if(Ut.calc&&!ut.transition)return;var gr=Ee[kt],lr=Xe[kt],mr=rt.concat(kt);if(Bt=mr.join("."),!(kt.charAt(0)==="_"||typeof gr=="function"||gr===lr)){if((kt==="tick0"||kt==="dtick")&&rt[0]!=="geo"){var Fr=Xe.tickmode;if(Fr==="auto"||Fr==="array"||!Fr)continue}if(!(kt==="range"&&Xe.autorange)&&!((kt==="zmin"||kt==="zmax")&&Xe.type==="contourcarpet")&&(Pt=Xt(mr),!!Pt&&!(Pt._compareAsJSON&&JSON.stringify(gr)===JSON.stringify(lr)))){var Rr=Pt.valType,ir,Vr=or(Pt),qe=Array.isArray(gr),we=Array.isArray(lr);if(qe&&we){var Me="_input_"+kt,Re=Ee[Me],Ye=Xe[Me];if(Array.isArray(Re)&&Re===Ye)continue}if(lr===void 0)Vr&&qe?Ut.calc=!0:Ct();else if(Pt._isLinkedToArray){var Qe=[],ot=!1;Je||(Ut.arrays[kt]=Qe);var st=Math.min(gr.length,lr.length),pt=Math.max(gr.length,lr.length);if(st!==pt)if(Pt.editType==="arraydraw")ot=!0;else{Ct();continue}for(ir=0;ir<st;ir++)Mt(gr[ir],lr[ir],mr.concat(ir),p.extendFlat({inArray:kt,arrayIndex:ir},ut));if(ot)for(ir=st;ir<pt;ir++)Qe.push(ir)}else!Rr&&p.isPlainObject(gr)?Mt(gr,lr,mr,ut):Vr?qe&&we?(Jt&&(Ut.calc=!0),(Jt||ut.newDataRevision)&&Ct()):qe!==we?Ut.calc=!0:Ct():qe&&we?(gr.length!==lr.length||String(gr)!==String(lr))&&Ct():Ct()}}}for(kt in Xe)if(!(kt in Ee||kt.charAt(0)==="_"||typeof Xe[kt]=="function"))if(Pt=Xt(rt.concat(kt)),or(Pt)&&Array.isArray(Xe[kt])){Ut.calc=!0;return}else Ct()}function zt(Ee,Xe){var rt;for(rt in Ee)if(rt.charAt(0)!=="_"){var ut=Ee[rt],Pt=Xe[rt];if(ut!==Pt)if(p.isPlainObject(ut)&&p.isPlainObject(Pt)){if(zt(ut,Pt))return!0}else if(Array.isArray(ut)&&Array.isArray(Pt)){if(ut.length!==Pt.length)return!0;for(var kt=0;kt<ut.length;kt++)if(ut[kt]!==Pt[kt])if(p.isPlainObject(ut[kt])&&p.isPlainObject(Pt[kt])){if(zt(ut[kt],Pt[kt]))return!0}else return!0}else return!0}}function Nt(Ee,Xe,rt){if(Ee=p.getGraphDiv(Ee),!p.isPlotDiv(Ee))throw new Error("This element is not a Plotly plot: "+Ee+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var ut=Ee._transitionData;ut._frameQueue||(ut._frameQueue=[]),rt=f.supplyAnimationDefaults(rt);var Pt=rt.transition,kt=rt.frame;ut._frameWaitingCnt===void 0&&(ut._frameWaitingCnt=0);function Bt(Jt){return Array.isArray(Pt)?Jt>=Pt.length?Pt[0]:Pt[Jt]:Pt}function Xt(Jt){return Array.isArray(kt)?Jt>=kt.length?kt[0]:kt[Jt]:kt}function Ut(Jt,Je){var gt=0;return function(){if(Jt&&++gt===Je)return Jt()}}return new Promise(function(Jt,Je){function gt(){if(ut._frameQueue.length!==0){for(;ut._frameQueue.length;){var st=ut._frameQueue.pop();st.onInterrupt&&st.onInterrupt()}Ee.emit("plotly_animationinterrupted",[])}}function Ct(st){if(st.length!==0){for(var pt=0;pt<st.length;pt++){var wt;st[pt].type==="byname"?wt=f.computeFrame(Ee,st[pt].name):wt=st[pt].data;var Yt=Xt(pt),wr=Bt(pt);wr.duration=Math.min(wr.duration,Yt.duration);var Tr={frame:wt,name:st[pt].name,frameOpts:Yt,transitionOpts:wr};pt===st.length-1&&(Tr.onComplete=Ut(Jt,2),Tr.onInterrupt=Je),ut._frameQueue.push(Tr)}rt.mode==="immediate"&&(ut._lastFrameAt=-1/0),ut._animationRaf||lr()}}function or(){Ee.emit("plotly_animated"),window.cancelAnimationFrame(ut._animationRaf),ut._animationRaf=null}function gr(){ut._currentFrame&&ut._currentFrame.onComplete&&ut._currentFrame.onComplete();var st=ut._currentFrame=ut._frameQueue.shift();if(st){var pt=st.name?st.name.toString():null;Ee._fullLayout._currentFrame=pt,ut._lastFrameAt=Date.now(),ut._timeToNext=st.frameOpts.duration,f.transition(Ee,st.frame.data,st.frame.layout,A.coerceTraceIndices(Ee,st.frame.traces),st.frameOpts,st.transitionOpts).then(function(){st.onComplete&&st.onComplete()}),Ee.emit("plotly_animatingframe",{name:pt,frame:st.frame,animation:{frame:st.frameOpts,transition:st.transitionOpts}})}else or()}function lr(){Ee.emit("plotly_animating"),ut._lastFrameAt=-1/0,ut._timeToNext=0,ut._runningTransitions=0,ut._currentFrame=null;var st=function(){ut._animationRaf=window.requestAnimationFrame(st),Date.now()-ut._lastFrameAt>ut._timeToNext&&gr()};st()}var mr=0;function Fr(st){return Array.isArray(Pt)?mr>=Pt.length?st.transitionOpts=Pt[mr]:st.transitionOpts=Pt[0]:st.transitionOpts=Pt,mr++,st}var Rr,ir,Vr=[],qe=Xe==null,we=Array.isArray(Xe),Me=!qe&&!we&&p.isPlainObject(Xe);if(Me)Vr.push({type:"object",data:Fr(p.extendFlat({},Xe))});else if(qe||["string","number"].indexOf(typeof Xe)!==-1)for(Rr=0;Rr<ut._frames.length;Rr++)ir=ut._frames[Rr],!!ir&&(qe||String(ir.group)===String(Xe))&&Vr.push({type:"byname",name:String(ir.name),data:Fr({name:ir.name})});else if(we)for(Rr=0;Rr<Xe.length;Rr++){var Re=Xe[Rr];["number","string"].indexOf(typeof Re)!==-1?(Re=String(Re),Vr.push({type:"byname",name:Re,data:Fr({name:Re})})):p.isPlainObject(Re)&&Vr.push({type:"object",data:Fr(p.extendFlat({},Re))})}for(Rr=0;Rr<Vr.length;Rr++)if(ir=Vr[Rr],ir.type==="byname"&&!ut._frameHash[ir.data.name]){p.warn('animate failure: frame not found: "'+ir.data.name+'"'),Je();return}["next","immediate"].indexOf(rt.mode)!==-1&&gt(),rt.direction==="reverse"&&Vr.reverse();var Ye=Ee._fullLayout._currentFrame;if(Ye&&rt.fromcurrent){var Qe=-1;for(Rr=0;Rr<Vr.length;Rr++)if(ir=Vr[Rr],ir.type==="byname"&&ir.name===Ye){Qe=Rr;break}if(Qe>0&&Qe<Vr.length-1){var ot=[];for(Rr=0;Rr<Vr.length;Rr++)ir=Vr[Rr],(Vr[Rr].type!=="byname"||Rr>Qe)&&ot.push(ir);Vr=ot}}Vr.length>0?Ct(Vr):(Ee.emit("plotly_animated"),Jt())})}function Et(Ee,Xe,rt){if(Ee=p.getGraphDiv(Ee),Xe==null)return Promise.resolve();if(!p.isPlotDiv(Ee))throw new Error("This element is not a Plotly plot: "+Ee+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var ut,Pt,kt,Bt,Xt=Ee._transitionData._frames,Ut=Ee._transitionData._frameHash;if(!Array.isArray(Xe))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Xe);var Jt=Xt.length+Xe.length*2,Je=[],gt={};for(ut=Xe.length-1;ut>=0;ut--)if(!!p.isPlainObject(Xe[ut])){var Ct=Xe[ut].name,or=(Ut[Ct]||gt[Ct]||{}).name,gr=Xe[ut].name,lr=Ut[or]||gt[or];or&&gr&&typeof gr=="number"&&lr&&T<_&&(T++,p.warn('addFrames: overwriting frame "'+(Ut[or]||gt[or]).name+'" with a frame whose name of type "number" also equates to "'+or+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),T===_&&p.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),gt[Ct]={name:Ct},Je.push({frame:f.supplyFrameDefaults(Xe[ut]),index:rt&&rt[ut]!==void 0&&rt[ut]!==null?rt[ut]:Jt+ut})}Je.sort(function(Me,Re){return Me.index>Re.index?-1:Me.index<Re.index?1:0});var mr=[],Fr=[],Rr=Xt.length;for(ut=Je.length-1;ut>=0;ut--){if(Pt=Je[ut].frame,typeof Pt.name=="number"&&p.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Pt.name)for(;Ut[Pt.name="frame "+Ee._transitionData._counter++];);if(Ut[Pt.name]){for(kt=0;kt<Xt.length&&(Xt[kt]||{}).name!==Pt.name;kt++);mr.push({type:"replace",index:kt,value:Pt}),Fr.unshift({type:"replace",index:kt,value:Xt[kt]})}else Bt=Math.max(0,Math.min(Je[ut].index,Rr)),mr.push({type:"insert",index:Bt,value:Pt}),Fr.unshift({type:"delete",index:Bt}),Rr++}var ir=f.modifyFrames,Vr=f.modifyFrames,qe=[Ee,Fr],we=[Ee,mr];return a&&a.add(Ee,ir,qe,Vr,we),f.modifyFrames(Ee,mr)}function At(Ee,Xe){if(Ee=p.getGraphDiv(Ee),!p.isPlotDiv(Ee))throw new Error("This element is not a Plotly plot: "+Ee);var rt,ut,Pt=Ee._transitionData._frames,kt=[],Bt=[];if(!Xe)for(Xe=[],rt=0;rt<Pt.length;rt++)Xe.push(rt);for(Xe=Xe.slice(),Xe.sort(),rt=Xe.length-1;rt>=0;rt--)ut=Xe[rt],kt.push({type:"delete",index:ut}),Bt.unshift({type:"insert",index:ut,value:Pt[ut]});var Xt=f.modifyFrames,Ut=f.modifyFrames,Jt=[Ee,Bt],Je=[Ee,kt];return a&&a.add(Ee,Xt,Jt,Ut,Je),f.modifyFrames(Ee,kt)}function it(Ee){Ee=p.getGraphDiv(Ee);var Xe=Ee._fullLayout||{},rt=Ee._fullData||[];return f.cleanPlot([],{},rt,Xe),f.purge(Ee),n.purge(Ee),Xe._container&&Xe._container.remove(),delete Ee._context,Ee}function ht(Ee){var Xe=Ee._fullLayout,rt=Ee.getBoundingClientRect();if(!p.equalDomRects(rt,Xe._lastBBox)){var ut=Xe._invTransform=p.inverseTransformMatrix(p.getFullTransformMatrix(Ee));Xe._invScaleX=Math.sqrt(ut[0][0]*ut[0][0]+ut[0][1]*ut[0][1]+ut[0][2]*ut[0][2]),Xe._invScaleY=Math.sqrt(ut[1][0]*ut[1][0]+ut[1][1]*ut[1][1]+ut[1][2]*ut[1][2]),Xe._lastBBox=rt}}function $e(Ee){var Xe=l.select(Ee),rt=Ee._fullLayout;if(rt._calcInverseTransform=ht,rt._calcInverseTransform(Ee),rt._container=Xe.selectAll(".plot-container").data([0]),rt._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),rt._paperdiv=rt._container.selectAll(".svg-container").data([0]),rt._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),rt._glcontainer=rt._paperdiv.selectAll(".gl-container").data([{}]),rt._glcontainer.enter().append("div").classed("gl-container",!0),rt._paperdiv.selectAll(".main-svg").remove(),rt._paperdiv.select(".modebar-container").remove(),rt._paper=rt._paperdiv.insert("svg",":first-child").classed("main-svg",!0),rt._toppaper=rt._paperdiv.append("svg").classed("main-svg",!0),rt._modebardiv=rt._paperdiv.append("div"),delete rt._modeBar,rt._hoverpaper=rt._paperdiv.append("svg").classed("main-svg",!0),!rt._uid){var ut={};l.selectAll("defs").each(function(){this.id&&(ut[this.id.split("-")[1]]=1)}),rt._uid=p.randstr(ut)}rt._paperdiv.selectAll(".main-svg").attr(y.svgAttrs),rt._defs=rt._paper.append("defs").attr("id","defs-"+rt._uid),rt._clips=rt._defs.append("g").classed("clips",!0),rt._topdefs=rt._toppaper.append("defs").attr("id","topdefs-"+rt._uid),rt._topclips=rt._topdefs.append("g").classed("clips",!0),rt._bgLayer=rt._paper.append("g").classed("bglayer",!0),rt._draggers=rt._paper.append("g").classed("draglayer",!0);var Pt=rt._paper.append("g").classed("layer-below",!0);rt._imageLowerLayer=Pt.append("g").classed("imagelayer",!0),rt._shapeLowerLayer=Pt.append("g").classed("shapelayer",!0),rt._cartesianlayer=rt._paper.append("g").classed("cartesianlayer",!0),rt._polarlayer=rt._paper.append("g").classed("polarlayer",!0),rt._smithlayer=rt._paper.append("g").classed("smithlayer",!0),rt._ternarylayer=rt._paper.append("g").classed("ternarylayer",!0),rt._geolayer=rt._paper.append("g").classed("geolayer",!0),rt._funnelarealayer=rt._paper.append("g").classed("funnelarealayer",!0),rt._pielayer=rt._paper.append("g").classed("pielayer",!0),rt._iciclelayer=rt._paper.append("g").classed("iciclelayer",!0),rt._treemaplayer=rt._paper.append("g").classed("treemaplayer",!0),rt._sunburstlayer=rt._paper.append("g").classed("sunburstlayer",!0),rt._indicatorlayer=rt._toppaper.append("g").classed("indicatorlayer",!0),rt._glimages=rt._paper.append("g").classed("glimages",!0);var kt=rt._toppaper.append("g").classed("layer-above",!0);rt._imageUpperLayer=kt.append("g").classed("imagelayer",!0),rt._shapeUpperLayer=kt.append("g").classed("shapelayer",!0),rt._infolayer=rt._toppaper.append("g").classed("infolayer",!0),rt._menulayer=rt._toppaper.append("g").classed("menulayer",!0),rt._zoomlayer=rt._toppaper.append("g").classed("zoomlayer",!0),rt._hoverlayer=rt._hoverpaper.append("g").classed("hoverlayer",!0),rt._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Ee.emit("plotly_framework")}z.animate=Nt,z.addFrames=Et,z.deleteFrames=At,z.addTraces=ue,z.deleteTraces=se,z.extendTraces=J,z.moveTraces=G,z.prependTraces=le,z.newPlot=I,z._doPlot=v,z.purge=it,z.react=dt,z.redraw=O,z.relayout=oe,z.restyle=Y,z.setPlotConfig=M,z.update=Oe,z._guiRelayout=He(oe),z._guiRestyle=He(Y),z._guiUpdate=He(Oe),z._storeDirectGUIEdit=Q},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"../lib/events":492,"../lib/queue":519,"../plots/cartesian/axes":554,"../plots/cartesian/constants":561,"../plots/cartesian/graph_interact":564,"../plots/cartesian/select":575,"../plots/plots":619,"../registry":638,"./edit_types":536,"./helpers":537,"./manage_arrays":539,"./plot_config":541,"./plot_schema":542,"./subroutines":544,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],541:[function(e,k,z){var l={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},o={};function c(p,t){for(var n in p){var a=p[n];a.valType?t[n]=a.dflt:(t[n]||(t[n]={}),c(a,t[n]))}}c(l,o),k.exports={configAttributes:l,dfltConfig:o}},{}],542:[function(e,k,z){var l=e("../registry"),o=e("../lib"),c=e("../plots/attributes"),p=e("../plots/layout_attributes"),t=e("../plots/frame_attributes"),n=e("../plots/animation_attributes"),a=e("./plot_config").configAttributes,i=e("./edit_types"),r=o.extendDeepAll,f=o.isPlainObject,u=o.isArrayOrTypedArray,s=o.nestedProperty,h=o.valObjectMeta,d="_isSubplotObj",y="_isLinkedToArray",m="_arrayAttrRegexps",g="_deprecated",x=[d,y,m,g];z.IS_SUBPLOT_OBJ=d,z.IS_LINKED_TO_ARRAY=y,z.DEPRECATED=g,z.UNDERSCORE_ATTRS=x,z.get=function(){var I={};l.allTypes.forEach(function(V){I[V]=w(V)});var F={};return Object.keys(l.transformsRegistry).forEach(function(V){F[V]=_(V)}),{defs:{valObjects:h,metaKeys:x.concat(["description","role","editType","impliedEdits"]),editType:{traces:i.traces,layout:i.layout},impliedEdits:{}},traces:I,layout:T(),transforms:F,frames:v(),animation:P(n),config:P(a)}},z.crawl=function(I,F,V,U){var j=V||0;U=U||"",Object.keys(I).forEach(function(Z){var te=I[Z];if(x.indexOf(Z)===-1){var re=(U?U+".":"")+Z;F(te,Z,I,j,re),!z.isValObject(te)&&f(te)&&Z!=="impliedEdits"&&z.crawl(te,F,j+1,re)}})},z.isValObject=function(I){return I&&I.valType!==void 0},z.findArrayAttributes=function(I){var F=[],V=[],U=[],j,Z;function te(se,G,Y,ee){V=V.slice(0,ee).concat([G]),U=U.slice(0,ee).concat([se&&se._isLinkedToArray]);var $=se&&(se.valType==="data_array"||se.arrayOk===!0)&&!(V[ee-1]==="colorbar"&&(G==="ticktext"||G==="tickvals"));!$||re(j,0,"")}function re(se,G,Y){var ee=se[V[G]],$=Y+V[G];if(G===V.length-1)u(ee)&&F.push(Z+$);else if(U[G]){if(Array.isArray(ee))for(var K=0;K<ee.length;K++)f(ee[K])&&re(ee[K],G+1,$+"["+K+"].")}else f(ee)&&re(ee,G+1,$+".")}j=I,Z="",z.crawl(c,te),I._module&&I._module.attributes&&z.crawl(I._module.attributes,te);var W=I.transforms;if(W)for(var J=0;J<W.length;J++){var le=W[J],ue=le._module;ue&&(Z="transforms["+J+"].",j=le,z.crawl(ue.attributes,te))}return F},z.getTraceValObject=function(I,F){var V=F[0],U=1,j,Z;if(V==="transforms"){if(F.length===1)return c.transforms;var te=I.transforms;if(!Array.isArray(te)||!te.length)return!1;var re=F[1];if(!S(re)||re>=te.length)return!1;j=(l.transformsRegistry[te[re].type]||{}).attributes,Z=j&&j[F[2]],U=3}else{var W=I._module;if(W||(W=(l.modules[I.type||c.type.dflt]||{})._module),!W)return!1;if(j=W.attributes,Z=j&&j[V],!Z){var J=W.basePlotModule;J&&J.attributes&&(Z=J.attributes[V])}Z||(Z=c[V])}return b(Z,F,U)},z.getLayoutValObject=function(I,F){var V=A(I,F[0]);return b(V,F,1)};function A(I,F){var V,U,j,Z,te=I._basePlotModules;if(te){var re;for(V=0;V<te.length;V++){if(j=te[V],j.attrRegex&&j.attrRegex.test(F)){if(j.layoutAttrOverrides)return j.layoutAttrOverrides;!re&&j.layoutAttributes&&(re=j.layoutAttributes)}var W=j.baseLayoutAttrOverrides;if(W&&F in W)return W[F]}if(re)return re}var J=I._modules;if(J){for(V=0;V<J.length;V++)if(Z=J[V].layoutAttributes,Z&&F in Z)return Z[F]}for(U in l.componentsRegistry){if(j=l.componentsRegistry[U],j.name==="colorscale"&&F.indexOf("coloraxis")===0)return j.layoutAttributes[F];if(!j.schema&&F===j.name)return j.layoutAttributes}return F in p?p[F]:!1}function b(I,F,V){if(!I)return!1;if(I._isLinkedToArray){if(S(F[V]))V++;else if(V<F.length)return!1}for(;V<F.length;V++){var U=I[F[V]];if(f(U))I=U;else break;if(V===F.length-1)break;if(I._isLinkedToArray){if(V++,!S(F[V]))return!1}else if(I.valType==="info_array"){V++;var j=F[V];if(!S(j))return!1;var Z=I.items;if(Array.isArray(Z)){if(j>=Z.length)return!1;if(I.dimensions===2){if(V++,F.length===V)return I;var te=F[V];if(!S(te))return!1;I=Z[j][te]}else I=Z[j]}else I=Z}}return I}function S(I){return I===Math.round(I)&&I>=0}function w(I){var F,V;F=l.modules[I]._module,V=F.basePlotModule;var U={};U.type=null;var j=r({},c),Z=r({},F.attributes);z.crawl(Z,function(W,J,le,ue,se){s(j,se).set(void 0),W===void 0&&s(Z,se).set(void 0)}),r(U,j),l.traceIs(I,"noOpacity")&&delete U.opacity,l.traceIs(I,"showLegend")||(delete U.showlegend,delete U.legendgroup),l.traceIs(I,"noHover")&&(delete U.hoverinfo,delete U.hoverlabel),F.selectPoints||delete U.selectedpoints,r(U,Z),V.attributes&&r(U,V.attributes),U.type=I;var te={meta:F.meta||{},categories:F.categories||{},animatable:Boolean(F.animatable),type:I,attributes:P(U)};if(F.layoutAttributes){var re={};r(re,F.layoutAttributes),te.layoutAttributes=P(re)}return F.animatable||z.crawl(te,function(W){z.isValObject(W)&&"anim"in W&&delete W.anim}),te}function T(){var I={},F,V;r(I,p);for(F in l.subplotsRegistry)if(V=l.subplotsRegistry[F],!!V.layoutAttributes)if(Array.isArray(V.attr))for(var U=0;U<V.attr.length;U++)N(I,V,V.attr[U]);else{var j=V.attr==="subplot"?V.name:V.attr;N(I,V,j)}for(F in l.componentsRegistry){V=l.componentsRegistry[F];var Z=V.schema;if(Z&&(Z.subplots||Z.layout)){var te=Z.subplots;if(te&&te.xaxis&&!te.yaxis)for(var re in te.xaxis)delete I.yaxis[re]}else V.name==="colorscale"?r(I,V.layoutAttributes):V.layoutAttributes&&O(I,V.layoutAttributes,V.name)}return{layoutAttributes:P(I)}}function _(I){var F=l.transformsRegistry[I],V=r({},F.attributes);return Object.keys(l.componentsRegistry).forEach(function(U){var j=l.componentsRegistry[U];j.schema&&j.schema.transforms&&j.schema.transforms[I]&&Object.keys(j.schema.transforms[I]).forEach(function(Z){O(V,j.schema.transforms[I][Z],Z)})}),{attributes:P(V)}}function v(){var I={frames:r({},t)};return P(I),I.frames}function P(I){return M(I),E(I),D(I),I}function M(I){function F(U){return{valType:"string",editType:"none"}}function V(U,j,Z){z.isValObject(U)?(U.arrayOk===!0||U.valType==="data_array")&&(Z[j+"src"]=F()):f(U)&&(U.role="object")}z.crawl(I,V)}function E(I){function F(V,U,j){if(!!V){var Z=V[y];!Z||(delete V[y],j[U]={items:{}},j[U].items[Z]=V,j[U].role="object")}}z.crawl(I,F)}function D(I){function F(V){for(var U in V)if(f(V[U]))F(V[U]);else if(Array.isArray(V[U]))for(var j=0;j<V[U].length;j++)F(V[U][j]);else V[U]instanceof RegExp&&(V[U]=V[U].toString())}F(I)}function N(I,F,V){var U=s(I,V),j=r({},F.layoutAttributes);j[d]=!0,U.set(j)}function O(I,F,V){var U=s(I,V);U.set(r(U.get()||{},F))}},{"../lib":503,"../plots/animation_attributes":548,"../plots/attributes":550,"../plots/frame_attributes":586,"../plots/layout_attributes":610,"../registry":638,"./edit_types":536,"./plot_config":541}],543:[function(e,k,z){var l=e("../lib"),o=e("../plots/attributes"),c="templateitemname",p={name:{valType:"string",editType:"none"}};p[c]={valType:"string",editType:"calc"},z.templatedArray=function(a,i){return i._isLinkedToArray=a,i.name=p.name,i[c]=p[c],i},z.traceTemplater=function(a){var i={},r,f;for(r in a)f=a[r],Array.isArray(f)&&f.length&&(i[r]=0);function u(s){r=l.coerce(s,{},o,"type");var h={type:r,_template:null};if(r in i){f=a[r];var d=i[r]%f.length;i[r]++,h._template=f[d]}return h}return{newTrace:u}},z.newContainer=function(a,i,r){var f=a._template,u=f&&(f[i]||r&&f[r]);l.isPlainObject(u)||(u=null);var s=a[i]={_template:u};return s},z.arrayTemplater=function(a,i,r){var f=a._template,u=f&&f[n(i)],s=f&&f[i];(!Array.isArray(s)||!s.length)&&(s=[]);var h={};function d(m){var g={name:m.name,_input:m},x=g[c]=m[c];if(!t(x))return g._template=u,g;for(var A=0;A<s.length;A++){var b=s[A];if(b.name===x)return h[x]=1,g._template=b,g}return g[r]=m[r]||!1,g._template=!1,g}function y(){for(var m=[],g=0;g<s.length;g++){var x=s[g],A=x.name;if(t(A)&&!h[A]){var b={_template:x,name:A,_input:{_templateitemname:A}};b[c]=x[c],m.push(b),h[A]=1}}return m}return{newItem:d,defaultItems:y}};function t(a){return a&&typeof a=="string"}function n(a){var i=a.length-1;return a.charAt(i)!=="s"&&l.warn("bad argument to arrayDefaultKey: "+a),a.substr(0,a.length-1)+"defaults"}z.arrayDefaultKey=n,z.arrayEditor=function(a,i,r){var f=(l.nestedProperty(a,i).get()||[]).length,u=r._index,s=u>=f&&(r._input||{})._templateitemname;s&&(u=f);var h=i+"["+u+"]",d;function y(){d={},s&&(d[h]={},d[h][c]=s)}y();function m(b,S){d[b]=S}function g(b,S){s?l.nestedProperty(d[h],b).set(S):d[h+"."+b]=S}function x(){var b=d;return y(),b}function A(b,S){b&&g(b,S);var w=x();for(var T in w)l.nestedProperty(a,T).set(w[T])}return{modifyBase:m,modifyItem:g,getUpdateObj:x,applyUpdate:A}}},{"../lib":503,"../plots/attributes":550}],544:[function(e,k,z){var l=e("@plotly/d3"),o=e("../registry"),c=e("../plots/plots"),p=e("../lib"),t=e("../lib/clear_gl_canvases"),n=e("../components/color"),a=e("../components/drawing"),i=e("../components/titles"),r=e("../components/modebar"),f=e("../plots/cartesian/axes"),u=e("../constants/alignment"),s=e("../plots/cartesian/constraints"),h=s.enforce,d=s.clean,y=e("../plots/cartesian/autorange").doAutoRange,m="start",g="middle",x="end";z.layoutStyles=function(E){return p.syncOrAsync([c.doAutoMargin,b],E)};function A(E,D,N){for(var O=0;O<N.length;O++){var I=N[O][0],F=N[O][1];if(!(I[0]>=E[1]||I[1]<=E[0])&&F[0]<D[1]&&F[1]>D[0])return!0}return!1}function b(E){var D=E._fullLayout,N=D._size,O=N.p,I=f.list(E,"",!0),F,V,U,j,Z,te;if(D._paperdiv.style({width:E._context.responsive&&D.autosize&&!E._context._hasZeroWidth&&!E.layout.width?"100%":D.width+"px",height:E._context.responsive&&D.autosize&&!E._context._hasZeroHeight&&!E.layout.height?"100%":D.height+"px"}).selectAll(".main-svg").call(a.setSize,D.width,D.height),E._context.setBackground(E,D.paper_bgcolor),z.drawMainTitle(E),r.manage(E),!D._has("cartesian"))return c.previousPromises(E);function re(zt,Nt,Et){var At=zt._lw/2;if(zt._id.charAt(0)==="x"){if(Nt){if(Et==="top")return Nt._offset-O-At}else return N.t+N.h*(1-(zt.position||0))+At%1;return Nt._offset+Nt._length+O+At}if(Nt){if(Et==="right")return Nt._offset+Nt._length+O+At}else return N.l+N.w*(zt.position||0)+At%1;return Nt._offset-O-At}for(F=0;F<I.length;F++){j=I[F];var W=j._anchorAxis;j._linepositions={},j._lw=a.crispRound(E,j.linewidth,1),j._mainLinePosition=re(j,W,j.side),j._mainMirrorPosition=j.mirror&&W?re(j,W,u.OPPOSITE_SIDE[j.side]):null}var J=[],le=[],ue=[],se=n.opacity(D.paper_bgcolor)===1&&n.opacity(D.plot_bgcolor)===1&&D.paper_bgcolor===D.plot_bgcolor;for(V in D._plots)if(U=D._plots[V],U.mainplot)U.bg&&U.bg.remove(),U.bg=void 0;else{var G=U.xaxis.domain,Y=U.yaxis.domain,ee=U.plotgroup;if(A(G,Y,ue)){var $=ee.node(),K=U.bg=p.ensureSingle(ee,"rect","bg");$.insertBefore(K.node(),$.childNodes[0]),le.push(V)}else ee.select("rect.bg").remove(),ue.push([G,Y]),se||(J.push(V),le.push(V))}var Q=D._bgLayer.selectAll(".bg").data(J);for(Q.enter().append("rect").classed("bg",!0),Q.exit().remove(),Q.each(function(zt){D._plots[zt].bg=l.select(this)}),F=0;F<le.length;F++)U=D._plots[le[F]],Z=U.xaxis,te=U.yaxis,U.bg&&Z._offset!==void 0&&te._offset!==void 0&&U.bg.call(a.setRect,Z._offset-O,te._offset-O,Z._length+2*O,te._length+2*O).call(n.fill,D.plot_bgcolor).style("stroke-width",0);if(!D._hasOnlyLargeSploms)for(V in D._plots){U=D._plots[V],Z=U.xaxis,te=U.yaxis;var ae=U.clipId="clip"+D._uid+V+"plot",ie=p.ensureSingleById(D._clips,"clipPath",ae,function(zt){zt.classed("plotclip",!0).append("rect")});U.clipRect=ie.select("rect").attr({width:Z._length,height:te._length}),a.setTranslate(U.plot,Z._offset,te._offset);var oe,fe;U._hasClipOnAxisFalse?(oe=null,fe=ae):(oe=ae,fe=null),a.setClipUrl(U.plot,oe,E),U.layerClipId=fe}var ye,ce,me,xe,ke,Ae,Oe,He,Ge,_e,Ie,We,et;function Ne(zt){return"M"+ye+","+zt+"H"+ce}function De(zt){return"M"+Z._offset+","+zt+"h"+Z._length}function Ve(zt){return"M"+zt+","+He+"V"+Oe}function dt(zt){return"M"+zt+","+te._offset+"v"+te._length}function Dt(zt,Nt,Et){if(!zt.showline||V!==zt._mainSubplot)return"";if(!zt._anchorAxis)return Et(zt._mainLinePosition);var At=Nt(zt._mainLinePosition);return zt.mirror&&(At+=Nt(zt._mainMirrorPosition)),At}for(V in D._plots){U=D._plots[V],Z=U.xaxis,te=U.yaxis;var Gt="M0,0";S(Z,V)&&(ke=T(Z,"left",te,I),ye=Z._offset-(ke?O+ke:0),Ae=T(Z,"right",te,I),ce=Z._offset+Z._length+(Ae?O+Ae:0),me=re(Z,te,"bottom"),xe=re(Z,te,"top"),et=!Z._anchorAxis||V!==Z._mainSubplot,et&&(Z.mirror==="allticks"||Z.mirror==="all")&&(Z._linepositions[V]=[me,xe]),Gt=Dt(Z,Ne,De),et&&Z.showline&&(Z.mirror==="all"||Z.mirror==="allticks")&&(Gt+=Ne(me)+Ne(xe)),U.xlines.style("stroke-width",Z._lw+"px").call(n.stroke,Z.showline?Z.linecolor:"rgba(0,0,0,0)")),U.xlines.attr("d",Gt);var Mt="M0,0";S(te,V)&&(Ie=T(te,"bottom",Z,I),Oe=te._offset+te._length+(Ie?O:0),We=T(te,"top",Z,I),He=te._offset-(We?O:0),Ge=re(te,Z,"left"),_e=re(te,Z,"right"),et=!te._anchorAxis||V!==te._mainSubplot,et&&(te.mirror==="allticks"||te.mirror==="all")&&(te._linepositions[V]=[Ge,_e]),Mt=Dt(te,Ve,dt),et&&te.showline&&(te.mirror==="all"||te.mirror==="allticks")&&(Mt+=Ve(Ge)+Ve(_e)),U.ylines.style("stroke-width",te._lw+"px").call(n.stroke,te.showline?te.linecolor:"rgba(0,0,0,0)")),U.ylines.attr("d",Mt)}return f.makeClipPaths(E),c.previousPromises(E)}function S(E,D){return(E.ticks||E.showline)&&(D===E._mainSubplot||E.mirror==="all"||E.mirror==="allticks")}function w(E,D,N){if(!N.showline||!N._lw)return!1;if(N.mirror==="all"||N.mirror==="allticks")return!0;var O=N._anchorAxis;if(!O)return!1;var I=u.FROM_BL[D];return N.side===D?O.domain[I]===E.domain[I]:N.mirror&&O.domain[1-I]===E.domain[1-I]}function T(E,D,N,O){if(w(E,D,N))return N._lw;for(var I=0;I<O.length;I++){var F=O[I];if(F._mainAxis===N._mainAxis&&w(E,D,F))return F._lw}return 0}z.drawMainTitle=function(E){var D=E._fullLayout,N=P(D),O=M(D);i.draw(E,"gtitle",{propContainer:D,propName:"title.text",placeholder:D._dfltTitle.plot,attributes:{x:_(D,N),y:v(D,O),"text-anchor":N,dy:O}})};function _(E,D){var N=E.title,O=E._size,I=0;switch(D===m?I=N.pad.l:D===x&&(I=-N.pad.r),N.xref){case"paper":return O.l+O.w*N.x+I;case"container":default:return E.width*N.x+I}}function v(E,D){var N=E.title,O=E._size,I=0;if(D==="0em"||!D?I=-N.pad.b:D===u.CAP_SHIFT+"em"&&(I=N.pad.t),N.y==="auto")return O.t/2;switch(N.yref){case"paper":return O.t+O.h-O.h*N.y+I;case"container":default:return E.height-E.height*N.y+I}}function P(E){var D=E.title,N=g;return p.isRightAnchor(D)?N=x:p.isLeftAnchor(D)&&(N=m),N}function M(E){var D=E.title,N="0em";return p.isTopAnchor(D)?N=u.CAP_SHIFT+"em":p.isMiddleAnchor(D)&&(N=u.MID_SHIFT+"em"),N}z.doTraceStyle=function(E){var D=E.calcdata,N=[],O;for(O=0;O<D.length;O++){var I=D[O],F=I[0]||{},V=F.trace||{},U=V._module||{},j=U.arraysToCalcdata;j&&j(I,V);var Z=U.editStyle;Z&&N.push({fn:Z,cd0:F})}if(N.length){for(O=0;O<N.length;O++){var te=N[O];te.fn(E,te.cd0)}t(E),z.redrawReglTraces(E)}return c.style(E),o.getComponentMethod("legend","draw")(E),c.previousPromises(E)},z.doColorBars=function(E){return o.getComponentMethod("colorbar","draw")(E),c.previousPromises(E)},z.layoutReplot=function(E){var D=E.layout;return E.layout=void 0,o.call("_doPlot",E,"",D)},z.doLegend=function(E){return o.getComponentMethod("legend","draw")(E),c.previousPromises(E)},z.doTicksRelayout=function(E){return f.draw(E,"redraw"),E._fullLayout._hasOnlyLargeSploms&&(o.subplotsRegistry.splom.updateGrid(E),t(E),z.redrawReglTraces(E)),z.drawMainTitle(E),c.previousPromises(E)},z.doModeBar=function(E){var D=E._fullLayout;r.manage(E);for(var N=0;N<D._basePlotModules.length;N++){var O=D._basePlotModules[N].updateFx;O&&O(E)}return c.previousPromises(E)},z.doCamera=function(E){for(var D=E._fullLayout,N=D._subplots.gl3d,O=0;O<N.length;O++){var I=D[N[O]],F=I._scene;F.setViewport(I)}},z.drawData=function(E){var D=E._fullLayout;t(E);for(var N=D._basePlotModules,O=0;O<N.length;O++)N[O].plot(E);return z.redrawReglTraces(E),c.style(E),o.getComponentMethod("shapes","draw")(E),o.getComponentMethod("annotations","draw")(E),o.getComponentMethod("images","draw")(E),D._replotting=!1,c.previousPromises(E)},z.redrawReglTraces=function(E){var D=E._fullLayout;if(D._has("regl")){var N=E._fullData,O=[],I=[],F,V;for(D._hasOnlyLargeSploms&&D._splomGrid.draw(),F=0;F<N.length;F++){var U=N[F];U.visible===!0&&U._length!==0&&(U.type==="splom"?D._splomScenes[U.uid].draw():U.type==="scattergl"?p.pushUnique(O,U.xaxis+U.yaxis):U.type==="scatterpolargl"&&p.pushUnique(I,U.subplot))}for(F=0;F<O.length;F++)V=D._plots[O[F]],V._scene&&V._scene.draw();for(F=0;F<I.length;F++)V=D[I[F]]._subplot,V._scene&&V._scene.draw()}},z.doAutoRangeAndConstraints=function(E){for(var D=f.list(E,"",!0),N,O={},I=0;I<D.length;I++)if(N=D[I],!O[N._id]){O[N._id]=1,d(E,N),y(E,N);var F=N._matchGroup;if(F)for(var V in F){var U=f.getFromId(E,V);y(E,U,N.range),O[V]=1}}h(E)},z.finalDraw=function(E){o.getComponentMethod("rangeslider","draw")(E),o.getComponentMethod("rangeselector","draw")(E)},z.drawMarginPushers=function(E){o.getComponentMethod("legend","draw")(E),o.getComponentMethod("rangeselector","draw")(E),o.getComponentMethod("sliders","draw")(E),o.getComponentMethod("updatemenus","draw")(E),o.getComponentMethod("colorbar","draw")(E)}},{"../components/color":366,"../components/drawing":388,"../components/modebar":429,"../components/titles":464,"../constants/alignment":471,"../lib":503,"../lib/clear_gl_canvases":487,"../plots/cartesian/autorange":553,"../plots/cartesian/axes":554,"../plots/cartesian/constraints":562,"../plots/plots":619,"../registry":638,"@plotly/d3":58}],545:[function(e,k,z){var l=e("../lib"),o=l.isPlainObject,c=e("./plot_schema"),p=e("../plots/plots"),t=e("../plots/attributes"),n=e("./plot_template"),a=e("./plot_config").dfltConfig;z.makeTemplate=function(m){m=l.isPlainObject(m)?m:l.getGraphDiv(m),m=l.extendDeep({_context:a},{data:m.data,layout:m.layout}),p.supplyDefaults(m);var g=m.data||[],x=m.layout||{};x._basePlotModules=m._fullLayout._basePlotModules,x._modules=m._fullLayout._modules;var A={data:{},layout:{}};g.forEach(function(D){var N={};f(D,N,s.bind(null,D));var O=l.coerce(D,{},t,"type"),I=A.data[O];I||(I=A.data[O]=[]),I.push(N)}),f(x,A.layout,u.bind(null,x)),delete A.layout.template;var b=x.template;if(o(b)){var S=b.layout,w,T,_,v,P,M;o(S)&&i(S,A.layout);var E=b.data;if(o(E)){for(T in A.data)if(_=E[T],Array.isArray(_)){for(P=A.data[T],M=P.length,v=_.length,w=0;w<M;w++)i(_[w%v],P[w]);for(w=M;w<v;w++)P.push(l.extendDeep({},_[w]))}for(T in E)T in A.data||(A.data[T]=l.extendDeep([],E[T]))}}return A};function i(m,g){m=l.extendDeep({},m);var x=Object.keys(m).sort(),A,b;function S(P,M,E){if(o(M)&&o(P))i(P,M);else if(Array.isArray(M)&&Array.isArray(P)){var D=n.arrayTemplater({_template:m},E);for(b=0;b<M.length;b++){var N=M[b],O=D.newItem(N)._template;O&&i(O,N)}var I=D.defaultItems();for(b=0;b<I.length;b++)M.push(I[b]._template);for(b=0;b<M.length;b++)delete M[b].templateitemname}}for(A=0;A<x.length;A++){var w=x[A],T=m[w];if(w in g?S(T,g[w],w):g[w]=T,r(w)===w)for(var _ in g){var v=r(_);_!==v&&v===w&&!(_ in m)&&S(T,g[_],w)}}}function r(m){return m.replace(/[0-9]+$/,"")}function f(m,g,x,A,b){var S=b&&x(b);for(var w in m){var T=m[w],_=h(m,w,A),v=h(m,w,b),P=x(v);if(!P){var M=r(w);M!==w&&(v=h(m,M,b),P=x(v))}if(!(S&&S===P)&&!(!P||P._noTemplating||P.valType==="data_array"||P.arrayOk&&Array.isArray(T)))if(!P.valType&&o(T))f(T,g,x,_,v);else if(P._isLinkedToArray&&Array.isArray(T))for(var E=!1,D=0,N={},O=0;O<T.length;O++){var I=T[O];if(o(I)){var F=I.name;if(F)N[F]||(f(I,g,x,h(T,D,_),h(T,D,v)),D++,N[F]=1);else if(!E){var V=n.arrayDefaultKey(w),U=h(m,V,A),j=h(T,D,_);f(I,g,x,j,h(T,D,v));var Z=l.nestedProperty(g,j),te=l.nestedProperty(g,U);te.set(Z.get()),Z.set(null),E=!0}}}else{var re=l.nestedProperty(g,_);re.set(T)}}}function u(m,g){return c.getLayoutValObject(m,l.nestedProperty({},g).parts)}function s(m,g){return c.getTraceValObject(m,l.nestedProperty({},g).parts)}function h(m,g,x){var A;return x?Array.isArray(m)?A=x+"["+g+"]":A=x+"."+g:A=g,A}z.validateTemplate=function(m,g){var x=l.extendDeep({},{_context:a,data:m.data,layout:m.layout}),A=x.layout||{};o(g)||(g=A.template||{});var b=g.layout,S=g.data,w=[];x.layout=A,x.layout.template=g,p.supplyDefaults(x);var T=x._fullLayout,_=x._fullData,v={};function P(U,j){for(var Z in U)if(Z.charAt(0)!=="_"&&o(U[Z])){var te=r(Z),re=[],W;for(W=0;W<j.length;W++)re.push(h(U,Z,j[W])),te!==Z&&re.push(h(U,te,j[W]));for(W=0;W<re.length;W++)v[re[W]]=1;P(U[Z],re)}}function M(U,j){for(var Z in U)if(Z.indexOf("defaults")===-1&&o(U[Z])){var te=h(U,Z,j);v[te]?M(U[Z],te):w.push({code:"unused",path:te})}}if(o(b)?(P(T,["layout"]),M(b,"layout")):w.push({code:"layout"}),!o(S))w.push({code:"data"});else{for(var E={},D,N=0;N<_.length;N++){var O=_[N];D=O.type,E[D]=(E[D]||0)+1,O._fullInput._template||w.push({code:"missing",index:O._fullInput.index,traceType:D})}for(D in S){var I=S[D].length,F=E[D]||0;I>F?w.push({code:"unused",traceType:D,templateCount:I,dataCount:F}):F>I&&w.push({code:"reused",traceType:D,templateCount:I,dataCount:F})}}function V(U,j){for(var Z in U)if(Z.charAt(0)!=="_"){var te=U[Z],re=h(U,Z,j);o(te)?(Array.isArray(U)&&te._template===!1&&te.templateitemname&&w.push({code:"missing",path:re,templateitemname:te.templateitemname}),V(te,re)):Array.isArray(te)&&d(te)&&V(te,re)}}if(V({data:_,layout:T},""),w.length)return w.map(y)};function d(m){for(var g=0;g<m.length;g++)if(o(m[g]))return!0}function y(m){var g;switch(m.code){case"data":g="The template has no key data.";break;case"layout":g="The template has no key layout.";break;case"missing":m.path?g="There are no templates for item "+m.path+" with name "+m.templateitemname:g="There are no templates for trace "+m.index+", of type "+m.traceType+".";break;case"unused":m.path?g="The template item at "+m.path+" was not used in constructing the plot.":m.dataCount?g="Some of the templates of type "+m.traceType+" were not used. The template has "+m.templateCount+" traces, the data only has "+m.dataCount+" of this type.":g="The template has "+m.templateCount+" traces of type "+m.traceType+" but there are none in the data.";break;case"reused":g="Some of the templates of type "+m.traceType+" were used more than once. The template has "+m.templateCount+" traces, the data has "+m.dataCount+" of this type.";break}return m.msg=g,m}},{"../lib":503,"../plots/attributes":550,"../plots/plots":619,"./plot_config":541,"./plot_schema":542,"./plot_template":543}],546:[function(e,k,z){var l=e("fast-isnumeric"),o=e("./plot_api"),c=e("../plots/plots"),p=e("../lib"),t=e("../snapshot/helpers"),n=e("../snapshot/tosvg"),a=e("../snapshot/svgtoimg"),i=e("../version").version,r={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function f(u,s){s=s||{};var h,d,y,m;p.isPlainObject(u)?(h=u.data||[],d=u.layout||{},y=u.config||{},m={}):(u=p.getGraphDiv(u),h=p.extendDeep([],u.data),d=p.extendDeep({},u.layout),y=u._context,m=u._fullLayout||{});function g(F){return!(F in s)||p.validate(s[F],r[F])}if(!g("width")&&s.width!==null||!g("height")&&s.height!==null)throw new Error("Height and width should be pixel values.");if(!g("format"))throw new Error("Export format is not "+p.join2(r.format.values,", "," or ")+".");var x={};function A(F,V){return p.coerce(s,x,r,F,V)}var b=A("format"),S=A("width"),w=A("height"),T=A("scale"),_=A("setBackground"),v=A("imageDataOnly"),P=document.createElement("div");P.style.position="absolute",P.style.left="-5000px",document.body.appendChild(P);var M=p.extendFlat({},d);S?M.width=S:s.width===null&&l(m.width)&&(M.width=m.width),w?M.height=w:s.height===null&&l(m.height)&&(M.height=m.height);var E=p.extendFlat({},y,{_exportedPlot:!0,staticPlot:!0,setBackground:_}),D=t.getRedrawFunc(P);function N(){return new Promise(function(F){setTimeout(F,t.getDelay(P._fullLayout))})}function O(){return new Promise(function(F,V){var U=n(P,b,T),j=P._fullLayout.width,Z=P._fullLayout.height;function te(){o.purge(P),document.body.removeChild(P)}if(b==="full-json"){var re=c.graphJson(P,!1,"keepdata","object",!0,!0);return re.version=i,re=JSON.stringify(re),te(),F(v?re:t.encodeJSON(re))}if(te(),b==="svg")return F(v?U:t.encodeSVG(U));var W=document.createElement("canvas");W.id=p.randstr(),a({format:b,width:j,height:Z,scale:T,canvas:W,svg:U,promise:!0}).then(F).catch(V)})}function I(F){return v?F.replace(t.IMAGE_URL_PREFIX,""):F}return new Promise(function(F,V){o.newPlot(P,h,M,E).then(D).then(N).then(O).then(function(U){F(I(U))}).catch(function(U){V(U)})})}k.exports=f},{"../lib":503,"../plots/plots":619,"../snapshot/helpers":642,"../snapshot/svgtoimg":644,"../snapshot/tosvg":646,"../version":1119,"./plot_api":540,"fast-isnumeric":190}],547:[function(e,k,z){var l=e("../lib"),o=e("../plots/plots"),c=e("./plot_schema"),p=e("./plot_config").dfltConfig,t=l.isPlainObject,n=Array.isArray,a=l.isArrayOrTypedArray;k.exports=function(A,b){A===void 0&&(A=[]),b===void 0&&(b={});var S=c.get(),w=[],T={_context:l.extendFlat({},p)},_,v;n(A)?(T.data=l.extendDeep([],A),_=A):(T.data=[],_=[],w.push(s("array","data"))),t(b)?(T.layout=l.extendDeep({},b),v=b):(T.layout={},v={},arguments.length>1&&w.push(s("object","layout"))),o.supplyDefaults(T);for(var P=T._fullData,M=_.length,E=0;E<M;E++){var D=_[E],N=["data",E];if(!t(D)){w.push(s("object",N));continue}var O=P[E],I=O.type,F=S.traces[I].attributes;F.type={valType:"enumerated",values:[I]},O.visible===!1&&D.visible!==!1&&w.push(s("invisible",N)),i(D,O,F,w,N);var V=D.transforms,U=O.transforms;if(V){n(V)||w.push(s("array",N,["transforms"])),N.push("transforms");for(var j=0;j<V.length;j++){var Z=["transforms",j],te=V[j].type;if(!t(V[j])){w.push(s("object",N,Z));continue}var re=S.transforms[te]?S.transforms[te].attributes:{};re.type={valType:"enumerated",values:Object.keys(S.transforms)},i(V[j],U[j],re,w,N,Z)}}}var W=T._fullLayout,J=r(S,P);return i(v,W,J,w,"layout"),w.length===0?void 0:w};function i(x,A,b,S,w,T){T=T||[];for(var _=Object.keys(x),v=0;v<_.length;v++){var P=_[v];if(P!=="transforms"){var M=T.slice();M.push(P);var E=x[P],D=A[P],N=d(b,P),O=(N||{}).valType,I=O==="info_array",F=O==="colorscale",V=(N||{}).items;if(!h(b,P))S.push(s("schema",w,M));else if(t(E)&&t(D)&&O!=="any")i(E,D,N,S,w,M);else if(I&&n(E)){E.length>D.length&&S.push(s("unused",w,M.concat(D.length)));var U=D.length,j=Array.isArray(V);j&&(U=Math.min(U,V.length));var Z,te,re,W,J;if(N.dimensions===2)for(te=0;te<U;te++)if(n(E[te])){E[te].length>D[te].length&&S.push(s("unused",w,M.concat(te,D[te].length)));var le=D[te].length;for(Z=0;Z<(j?Math.min(le,V[te].length):le);Z++)re=j?V[te][Z]:V,W=E[te][Z],J=D[te][Z],l.validate(W,re)?J!==W&&J!==+W&&S.push(s("dynamic",w,M.concat(te,Z),W,J)):S.push(s("value",w,M.concat(te,Z),W))}else S.push(s("array",w,M.concat(te),E[te]));else for(te=0;te<U;te++)re=j?V[te]:V,W=E[te],J=D[te],l.validate(W,re)?J!==W&&J!==+W&&S.push(s("dynamic",w,M.concat(te),W,J)):S.push(s("value",w,M.concat(te),W))}else if(N.items&&!I&&n(E)){var ue=V[Object.keys(V)[0]],se=[],G,Y;for(G=0;G<D.length;G++){var ee=D[G]._index||G;if(Y=M.slice(),Y.push(ee),t(E[ee])&&t(D[G])){se.push(ee);var $=E[ee],K=D[G];t($)&&$.visible!==!1&&K.visible===!1?S.push(s("invisible",w,Y)):i($,K,ue,S,w,Y)}}for(G=0;G<E.length;G++)Y=M.slice(),Y.push(G),t(E[G])?se.indexOf(G)===-1&&S.push(s("unused",w,Y)):S.push(s("object",w,Y,E[G]))}else!t(E)&&t(D)?S.push(s("object",w,M,E)):!a(E)&&a(D)&&!I&&!F?S.push(s("array",w,M,E)):P in A?l.validate(E,N)?N.valType==="enumerated"&&(N.coerceNumber&&E!==+D||E!==D)&&S.push(s("dynamic",w,M,E,D)):S.push(s("value",w,M,E)):S.push(s("unused",w,M,E))}}return S}function r(x,A){for(var b=x.layout.layoutAttributes,S=0;S<A.length;S++){var w=A[S],T=x.traces[w.type],_=T.layoutAttributes;_&&(w.subplot?l.extendFlat(b[T.attributes.subplot.dflt],_):l.extendFlat(b,_))}return b}var f={object:function(x,A){var b;return x==="layout"&&A===""?b="The layout argument":x[0]==="data"&&A===""?b="Trace "+x[1]+" in the data argument":b=u(x)+"key "+A,b+" must be linked to an object container"},array:function(x,A){var b;return x==="data"?b="The data argument":b=u(x)+"key "+A,b+" must be linked to an array container"},schema:function(x,A){return u(x)+"key "+A+" is not part of the schema"},unused:function(x,A,b){var S=t(b)?"container":"key";return u(x)+S+" "+A+" did not get coerced"},dynamic:function(x,A,b,S){return[u(x)+"key",A,"(set to '"+b+"')","got reset to","'"+S+"'","during defaults."].join(" ")},invisible:function(x,A){return(A?u(x)+"item "+A:"Trace "+x[1])+" got defaulted to be not visible"},value:function(x,A,b){return[u(x)+"key "+A,"is set to an invalid value ("+b+")"].join(" ")}};function u(x){return n(x)?"In data trace "+x[1]+", ":"In "+x+", "}function s(x,A,b,S,w){b=b||"";var T,_;n(A)?(T=A[0],_=A[1]):(T=A,_=null);var v=g(b),P=f[x](A,v,S,w);return l.log(P),{code:x,container:T,trace:_,path:b,astr:v,msg:P}}function h(x,A){var b=m(A),S=b.keyMinusId,w=b.id;return S in x&&x[S]._isSubplotObj&&w?!0:A in x}function d(x,A){if(A in x)return x[A];var b=m(A);return x[b.keyMinusId]}var y=l.counterRegex("([a-z]+)");function m(x){var A=x.match(y);return{keyMinusId:A&&A[1],id:A&&A[2]}}function g(x){if(!n(x))return String(x);for(var A="",b=0;b<x.length;b++){var S=x[b];typeof S=="number"?A=A.substr(0,A.length-1)+"["+S+"]":A+=S,b<x.length-1&&(A+=".")}return A}},{"../lib":503,"../plots/plots":619,"./plot_config":541,"./plot_schema":542}],548:[function(e,k,z){k.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],549:[function(e,k,z){var l=e("../lib"),o=e("../plot_api/plot_template");k.exports=function(p,t,n){var a=n.name,i=n.inclusionAttr||"visible",r=t[a],f=l.isArrayOrTypedArray(p[a])?p[a]:[],u=t[a]=[],s=o.arrayTemplater(t,a,i),h,d;for(h=0;h<f.length;h++){var y=f[h];l.isPlainObject(y)?d=s.newItem(y):(d=s.newItem({}),d[i]=!1),d._index=h,d[i]!==!1&&n.handleItemDefaults(y,d,t,n),u.push(d)}var m=s.defaultItems();for(h=0;h<m.length;h++)d=m[h],d._index=u.length,n.handleItemDefaults({},d,t,n,{}),u.push(d);if(l.isArrayOrTypedArray(r)){var g=Math.min(r.length,u.length);for(h=0;h<g;h++)l.relinkPrivateKeys(u[h],r[h])}return u}},{"../lib":503,"../plot_api/plot_template":543}],550:[function(e,k,z){var l=e("./font_attributes"),o=e("../components/fx/attributes");k.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:l({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:o.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":397,"./font_attributes":585}],551:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../lib"),c=o.dateTime2ms,p=o.incrementMonth,t=e("../../constants/numerical"),n=t.ONEAVGMONTH;k.exports=function(i,r,f,u){if(r.type!=="date")return{vals:u};var s=i[f+"periodalignment"];if(!s)return{vals:u};var h=i[f+"period"],d;if(l(h)){if(h=+h,h<=0)return{vals:u}}else if(typeof h=="string"&&h.charAt(0)==="M"){var y=+h.substring(1);if(y>0&&Math.round(y)===y)d=y;else return{vals:u}}for(var m=r.calendar,g=s==="start",x=s==="end",A=i[f+"period0"],b=c(A,m)||0,S=[],w=[],T=[],_=u.length,v=0;v<_;v++){var P=u[v],M,E,D;if(d){for(M=Math.round((P-b)/(d*n)),D=p(b,d*M,m);D>P;)D=p(D,-d,m);for(;D<=P;)D=p(D,d,m);E=p(D,-d,m)}else{for(M=Math.round((P-b)/h),D=b+M*h;D>P;)D-=h;for(;D<=P;)D+=h;E=D-h}S[v]=g?E:x?D:(E+D)/2,w[v]=E,T[v]=D}return{vals:S,starts:w,ends:T}}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],552:[function(e,k,z){k.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],553:[function(e,k,z){var l=e("@plotly/d3"),o=e("fast-isnumeric"),c=e("../../lib"),p=e("../../constants/numerical").FP_SAFE,t=e("../../registry"),n=e("../../components/drawing"),a=e("./axis_ids"),i=a.getFromId,r=a.isLinked;k.exports={getAutoRange:f,makePadFn:s,doAutoRange:m,findExtremes:g,concatExtremes:y};function f(_,v){var P,M,E=[],D=_._fullLayout,N=s(D,v,0),O=s(D,v,1),I=y(_,v),F=I.min,V=I.max;if(F.length===0||V.length===0)return c.simpleMap(v.range,v.r2l);var U=F[0].val,j=V[0].val;for(P=1;P<F.length&&U===j;P++)U=Math.min(U,F[P].val);for(P=1;P<V.length&&U===j;P++)j=Math.max(j,V[P].val);var Z=!1;if(v.range){var te=c.simpleMap(v.range,v.r2l);Z=te[1]<te[0]}v.autorange==="reversed"&&(Z=!0,v.autorange=!0);var re=v.rangemode,W=re==="tozero",J=re==="nonnegative",le=v._length,ue=le/10,se=0,G,Y,ee,$,K,Q;for(P=0;P<F.length;P++)for(G=F[P],M=0;M<V.length;M++)Y=V[M],Q=Y.val-G.val-u(v,G.val,Y.val),Q>0&&(K=le-N(G)-O(Y),K>ue?Q/K>se&&(ee=G,$=Y,se=Q/K):Q/le>se&&(ee={val:G.val,nopad:1},$={val:Y.val,nopad:1},se=Q/le));function ae(ce,me){return Math.max(ce,O(me))}if(U===j){var ie=U-1,oe=U+1;if(W)if(U===0)E=[0,1];else{var fe=(U>0?V:F).reduce(ae,0),ye=U/(1-Math.min(.5,fe/le));E=U>0?[0,ye]:[ye,0]}else J?E=[Math.max(0,ie),Math.max(1,oe)]:E=[ie,oe]}else W?(ee.val>=0&&(ee={val:0,nopad:1}),$.val<=0&&($={val:0,nopad:1})):J&&(ee.val-se*N(ee)<0&&(ee={val:0,nopad:1}),$.val<=0&&($={val:1,nopad:1})),se=($.val-ee.val-u(v,G.val,Y.val))/(le-N(ee)-O($)),E=[ee.val-se*N(ee),$.val+se*O($)];return Z&&E.reverse(),c.simpleMap(E,v.l2r||Number)}function u(_,v,P){var M=0;if(_.rangebreaks)for(var E=_.locateBreaks(v,P),D=0;D<E.length;D++){var N=E[D];M+=N.max-N.min}return M}function s(_,v,P){var M=.05*v._length,E=v._anchorAxis||{};if((v.ticklabelposition||"").indexOf("inside")!==-1||(E.ticklabelposition||"").indexOf("inside")!==-1){var D=v.autorange==="reversed";if(!D){var N=c.simpleMap(v.range,v.r2l);D=N[1]<N[0]}D&&(P=!P)}var O=0;return r(_,v._id)||(O=d(_,v,P)),M=Math.max(O,M),v.constrain==="domain"&&v._inputDomain&&(M*=(v._inputDomain[1]-v._inputDomain[0])/(v.domain[1]-v.domain[0])),function(F){return F.nopad?0:F.pad+(F.extrapad?M:O)}}var h=3;function d(_,v,P){var M=0,E=v._id.charAt(0)==="x";for(var D in _._plots){var N=_._plots[D];if(!(v._id!==N.xaxis._id&&v._id!==N.yaxis._id)){var O=(E?N.yaxis:N.xaxis)||{};if((O.ticklabelposition||"").indexOf("inside")!==-1&&(!P&&(O.side==="left"||O.side==="bottom")||P&&(O.side==="top"||O.side==="right"))){if(O._vals){var I=c.deg2rad(O._tickAngles[O._id+"tick"]||0),F=Math.abs(Math.cos(I)),V=Math.abs(Math.sin(I));if(!O._vals[0].bb){var U=O._id+"tick",j=O._selections[U];j.each(function(le){var ue=l.select(this),se=ue.select(".text-math-group");se.empty()&&(le.bb=n.bBox(ue.node()))})}for(var Z=0;Z<O._vals.length;Z++){var te=O._vals[Z],re=te.bb;if(re){var W=2*h+re.width,J=2*h+re.height;M=Math.max(M,E?Math.max(W*F,J*V):Math.max(J*F,W*V))}}}O.ticks==="inside"&&O.ticklabelposition==="inside"&&(M+=O.ticklen||0)}}}return M}function y(_,v,P){var M=v._id,E=_._fullData,D=_._fullLayout,N=[],O=[],I,F,V;function U(W,J){for(I=0;I<J.length;I++){var le=W[J[I]],ue=(le._extremes||{})[M];if(le.visible===!0&&ue){for(F=0;F<ue.min.length;F++)V=ue.min[F],x(N,V.val,V.pad,{extrapad:V.extrapad});for(F=0;F<ue.max.length;F++)V=ue.max[F],A(O,V.val,V.pad,{extrapad:V.extrapad})}}}if(U(E,v._traceIndices),U(D.annotations||[],v._annIndices||[]),U(D.shapes||[],v._shapeIndices||[]),v._matchGroup&&!P){for(var j in v._matchGroup)if(j!==v._id){var Z=i(_,j),te=y(_,Z,!0),re=v._length/Z._length;for(F=0;F<te.min.length;F++)V=te.min[F],x(N,V.val,V.pad*re,{extrapad:V.extrapad});for(F=0;F<te.max.length;F++)V=te.max[F],A(O,V.val,V.pad*re,{extrapad:V.extrapad})}}return{min:N,max:O}}function m(_,v,P){if(v.setScale(),v.autorange){v.range=P?P.slice():f(_,v),v._r=v.range.slice(),v._rl=c.simpleMap(v._r,v.r2l);var M=v._input,E={};E[v._attr+".range"]=v.range,E[v._attr+".autorange"]=v.autorange,t.call("_storeDirectGUIEdit",_.layout,_._fullLayout._preGUI,E),M.range=v.range.slice(),M.autorange=v.autorange}var D=v._anchorAxis;if(D&&D.rangeslider){var N=D.rangeslider[v._name];N&&N.rangemode==="auto"&&(N.range=f(_,v)),D._input.rangeslider[v._name]=c.extendFlat({},N)}}function g(_,v,P){P||(P={}),_._m||_.setScale();var M=[],E=[],D=v.length,N=P.padded||!1,O=P.tozero&&(_.type==="linear"||_.type==="-"),I=_.type==="log",F=!1,V=P.vpadLinearized||!1,U,j,Z,te,re,W,J,le,ue;function se(ie){if(Array.isArray(ie))return F=!0,function(fe){return Math.max(Number(ie[fe]||0),0)};var oe=Math.max(Number(ie||0),0);return function(){return oe}}var G=se((_._m>0?P.ppadplus:P.ppadminus)||P.ppad||0),Y=se((_._m>0?P.ppadminus:P.ppadplus)||P.ppad||0),ee=se(P.vpadplus||P.vpad),$=se(P.vpadminus||P.vpad);if(!F){if(le=1/0,ue=-1/0,I)for(U=0;U<D;U++)j=v[U],j<le&&j>0&&(le=j),j>ue&&j<p&&(ue=j);else for(U=0;U<D;U++)j=v[U],j<le&&j>-p&&(le=j),j>ue&&j<p&&(ue=j);v=[le,ue],D=2}var K={tozero:O,extrapad:N};function Q(ie){Z=v[ie],!!o(Z)&&(W=G(ie),J=Y(ie),V?(te=_.c2l(Z)-$(ie),re=_.c2l(Z)+ee(ie)):(le=Z-$(ie),ue=Z+ee(ie),I&&le<ue/10&&(le=ue/10),te=_.c2l(le),re=_.c2l(ue)),O&&(te=Math.min(0,te),re=Math.max(0,re)),S(te)&&x(M,te,J,K),S(re)&&A(E,re,W,K))}var ae=Math.min(6,D);for(U=0;U<ae;U++)Q(U);for(U=D-1;U>=ae;U--)Q(U);return{min:M,max:E,opts:P}}function x(_,v,P,M){b(_,v,P,M,w)}function A(_,v,P,M){b(_,v,P,M,T)}function b(_,v,P,M,E){for(var D=M.tozero,N=M.extrapad,O=!0,I=0;I<_.length&&O;I++){var F=_[I];if(E(F.val,v)&&F.pad>=P&&(F.extrapad||!N)){O=!1;break}else E(v,F.val)&&F.pad<=P&&(N||!F.extrapad)&&(_.splice(I,1),I--)}if(O){var V=D&&v===0;_.push({val:v,pad:V?0:P,extrapad:V?!1:N})}}function S(_){return o(_)&&Math.abs(_)<p}function w(_,v){return _<=v}function T(_,v){return _>=v}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../../registry":638,"./axis_ids":558,"@plotly/d3":58,"fast-isnumeric":190}],554:[function(e,k,z){var l=e("@plotly/d3"),o=e("fast-isnumeric"),c=e("../../plots/plots"),p=e("../../registry"),t=e("../../lib"),n=t.strTranslate,a=e("../../lib/svg_text_utils"),i=e("../../components/titles"),r=e("../../components/color"),f=e("../../components/drawing"),u=e("./layout_attributes"),s=e("./clean_ticks"),h=e("../../constants/numerical"),d=h.ONEMAXYEAR,y=h.ONEAVGYEAR,m=h.ONEMINYEAR,g=h.ONEMAXQUARTER,x=h.ONEAVGQUARTER,A=h.ONEMINQUARTER,b=h.ONEMAXMONTH,S=h.ONEAVGMONTH,w=h.ONEMINMONTH,T=h.ONEWEEK,_=h.ONEDAY,v=_/2,P=h.ONEHOUR,M=h.ONEMIN,E=h.ONESEC,D=h.MINUS_SIGN,N=h.BADNUM,O={K:"zeroline"},I={K:"gridline",L:"path"},F={K:"tick",L:"path"},V={K:"tick",L:"text"},U=e("../../constants/alignment"),j=U.MID_SHIFT,Z=U.CAP_SHIFT,te=U.LINE_SPACING,re=U.OPPOSITE_SIDE,W=3,J=k.exports={};J.setConvert=e("./set_convert");var le=e("./axis_autotype"),ue=e("./axis_ids"),se=ue.idSort,G=ue.isLinked;J.id2name=ue.id2name,J.name2id=ue.name2id,J.cleanId=ue.cleanId,J.list=ue.list,J.listIds=ue.listIds,J.getFromId=ue.getFromId,J.getFromTrace=ue.getFromTrace;var Y=e("./autorange");J.getAutoRange=Y.getAutoRange,J.findExtremes=Y.findExtremes;var ee=1e-4;function $(we){var Me=(we[1]-we[0])*ee;return[we[0]-Me,we[1]+Me]}J.coerceRef=function(we,Me,Re,Ye,Qe,ot){var st=Ye.charAt(Ye.length-1),pt=Re._fullLayout._subplots[st+"axis"],wt=Ye+"ref",Yt={};return Qe||(Qe=pt[0]||(typeof ot=="string"?ot:ot[0])),ot||(ot=Qe),pt=pt.concat(pt.map(function(wr){return wr+" domain"})),Yt[wt]={valType:"enumerated",values:pt.concat(ot?typeof ot=="string"?[ot]:ot:[]),dflt:Qe},t.coerce(we,Me,Yt,wt)},J.getRefType=function(we){return we===void 0?we:we==="paper"?"paper":we==="pixel"?"pixel":/( domain)$/.test(we)?"domain":"range"},J.coercePosition=function(we,Me,Re,Ye,Qe,ot){var st,pt,wt=J.getRefType(Ye);if(wt!=="range")st=t.ensureNumber,pt=Re(Qe,ot);else{var Yt=J.getFromId(Me,Ye);ot=Yt.fraction2r(ot),pt=Re(Qe,ot),st=Yt.cleanPos}we[Qe]=st(pt)},J.cleanPosition=function(we,Me,Re){var Ye=Re==="paper"||Re==="pixel"?t.ensureNumber:J.getFromId(Me,Re).cleanPos;return Ye(we)},J.redrawComponents=function(we,Me){Me=Me||J.listIds(we);var Re=we._fullLayout;function Ye(Qe,ot,st,pt){for(var wt=p.getComponentMethod(Qe,ot),Yt={},wr=0;wr<Me.length;wr++)for(var Tr=Re[J.id2name(Me[wr])],Mr=Tr[st],_r=0;_r<Mr.length;_r++){var Or=Mr[_r];if(!Yt[Or]&&(wt(we,Or),Yt[Or]=1,pt))return}}Ye("annotations","drawOne","_annIndices"),Ye("shapes","drawOne","_shapeIndices"),Ye("images","draw","_imgIndices",!0)};var K=J.getDataConversions=function(we,Me,Re,Ye){var Qe,ot=Re==="x"||Re==="y"||Re==="z"?Re:Ye;if(Array.isArray(ot)){if(Qe={type:le(Ye,void 0,{autotypenumbers:we._fullLayout.autotypenumbers}),_categories:[]},J.setConvert(Qe),Qe.type==="category")for(var st=0;st<Ye.length;st++)Qe.d2c(Ye[st])}else Qe=J.getFromTrace(we,Me,ot);return Qe?{d2c:Qe.d2c,c2d:Qe.c2d}:ot==="ids"?{d2c:ae,c2d:ae}:{d2c:Q,c2d:Q}};function Q(we){return+we}function ae(we){return String(we)}J.getDataToCoordFunc=function(we,Me,Re,Ye){return K(we,Me,Re,Ye).d2c},J.counterLetter=function(we){var Me=we.charAt(0);if(Me==="x")return"y";if(Me==="y")return"x"},J.minDtick=function(we,Me,Re,Ye){["log","category","multicategory"].indexOf(we.type)!==-1||!Ye?we._minDtick=0:we._minDtick===void 0?(we._minDtick=Me,we._forceTick0=Re):we._minDtick&&((we._minDtick/Me+1e-6)%1<2e-6&&((Re-we._forceTick0)/Me%1+1.000001)%1<2e-6?(we._minDtick=Me,we._forceTick0=Re):((Me/we._minDtick+1e-6)%1>2e-6||((Re-we._forceTick0)/we._minDtick%1+1.000001)%1>2e-6)&&(we._minDtick=0))},J.saveRangeInitial=function(we,Me){for(var Re=J.list(we,"",!0),Ye=!1,Qe=0;Qe<Re.length;Qe++){var ot=Re[Qe],st=ot._rangeInitial===void 0,pt=st||!(ot.range[0]===ot._rangeInitial[0]&&ot.range[1]===ot._rangeInitial[1]);(st&&ot.autorange===!1||Me&&pt)&&(ot._rangeInitial=ot.range.slice(),Ye=!0)}return Ye},J.saveShowSpikeInitial=function(we,Me){for(var Re=J.list(we,"",!0),Ye=!1,Qe="on",ot=0;ot<Re.length;ot++){var st=Re[ot],pt=st._showSpikeInitial===void 0,wt=pt||st.showspikes!==st._showspikes;(pt||Me&&wt)&&(st._showSpikeInitial=st.showspikes,Ye=!0),Qe==="on"&&!st.showspikes&&(Qe="off")}return we._fullLayout._cartesianSpikesEnabled=Qe,Ye},J.autoBin=function(we,Me,Re,Ye,Qe,ot){var st=t.aggNums(Math.min,null,we),pt=t.aggNums(Math.max,null,we);if(Me.type==="category"||Me.type==="multicategory")return{start:st-.5,end:pt+.5,size:Math.max(1,Math.round(ot)||1),_dataSpan:pt-st};Qe||(Qe=Me.calendar);var wt;if(Me.type==="log"?wt={type:"linear",range:[st,pt]}:wt={type:Me.type,range:t.simpleMap([st,pt],Me.c2r,0,Qe),calendar:Qe},J.setConvert(wt),ot=ot&&s.dtick(ot,wt.type),ot)wt.dtick=ot,wt.tick0=s.tick0(void 0,wt.type,Qe);else{var Yt;if(Re)Yt=(pt-st)/Re;else{var wr=t.distinctVals(we),Tr=Math.pow(10,Math.floor(Math.log(wr.minDiff)/Math.LN10)),Mr=Tr*t.roundUp(wr.minDiff/Tr,[.9,1.9,4.9,9.9],!0);Yt=Math.max(Mr,2*t.stdev(we)/Math.pow(we.length,Ye?.25:.4)),o(Yt)||(Yt=1)}J.autoTicks(wt,Yt)}var _r=wt.dtick,Or=J.tickIncrement(J.tickFirst(wt),_r,"reverse",Qe),nn,Sr;if(typeof _r=="number")Or=ie(Or,we,wt,st,pt),Sr=1+Math.floor((pt-Or)/_r),nn=Or+Sr*_r;else for(wt.dtick.charAt(0)==="M"&&(Or=oe(Or,we,_r,st,Qe)),nn=Or,Sr=0;nn<=pt;)nn=J.tickIncrement(nn,_r,!1,Qe),Sr++;return{start:Me.c2r(Or,0,Qe),end:Me.c2r(nn,0,Qe),size:_r,_dataSpan:pt-st}};function ie(we,Me,Re,Ye,Qe){var ot=0,st=0,pt=0,wt=0;function Yt(_r){return(1+(_r-we)*100/Re.dtick)%100<2}for(var wr=0;wr<Me.length;wr++)Me[wr]%1==0?pt++:o(Me[wr])||wt++,Yt(Me[wr])&&ot++,Yt(Me[wr]+Re.dtick/2)&&st++;var Tr=Me.length-wt;if(pt===Tr&&Re.type!=="date")Re.dtick<1?we=Ye-.5*Re.dtick:(we-=.5,we+Re.dtick<Ye&&(we+=Re.dtick));else if(st<Tr*.1&&(ot>Tr*.3||Yt(Ye)||Yt(Qe))){var Mr=Re.dtick/2;we+=we+Mr<Ye?Mr:-Mr}return we}function oe(we,Me,Re,Ye,Qe){var ot=t.findExactDates(Me,Qe),st=.8;if(ot.exactDays>st){var pt=Number(Re.substr(1));ot.exactYears>st&&pt%12==0?we=J.tickIncrement(we,"M6","reverse")+_*1.5:ot.exactMonths>st?we=J.tickIncrement(we,"M1","reverse")+_*15.5:we-=v;var wt=J.tickIncrement(we,Re);if(wt<=Ye)return wt}return we}J.prepTicks=function(we,Me){var Re=t.simpleMap(we.range,we.r2l,void 0,void 0,Me);if(we._dtickInit=we.dtick,we._tick0Init=we.tick0,we.tickmode==="auto"||!we.dtick){var Ye=we.nticks,Qe;Ye||(we.type==="category"||we.type==="multicategory"?(Qe=we.tickfont?t.bigFont(we.tickfont.size||12):15,Ye=we._length/Qe):(Qe=we._id.charAt(0)==="y"?40:80,Ye=t.constrain(we._length/Qe,4,9)+1),we._name==="radialaxis"&&(Ye*=2)),we.tickmode==="array"&&(Ye*=100),we._roughDTick=Math.abs(Re[1]-Re[0])/Ye,J.autoTicks(we,we._roughDTick),we._minDtick>0&&we.dtick<we._minDtick*2&&(we.dtick=we._minDtick,we.tick0=we.l2r(we._forceTick0))}we.ticklabelmode==="period"&&ye(we),we.tick0||(we.tick0=we.type==="date"?"2000-01-01":0),we.type==="date"&&we.dtick<.1&&(we.dtick=.1),We(we)};function fe(we){return+we.substring(1)}function ye(we){var Me;function Re(){return!(o(we.dtick)||we.dtick.charAt(0)!=="M")}var Ye=Re(),Qe=J.getTickFormat(we);if(Qe){var ot=we._dtickInit!==we.dtick;/%[fLQsSMX]/.test(Qe)||(/%[HI]/.test(Qe)?(Me=P,ot&&!Ye&&we.dtick<P&&(we.dtick=P)):/%p/.test(Qe)?(Me=v,ot&&!Ye&&we.dtick<v&&(we.dtick=v)):/%[Aadejuwx]/.test(Qe)?(Me=_,ot&&!Ye&&we.dtick<_&&(we.dtick=_)):/%[UVW]/.test(Qe)?(Me=T,ot&&!Ye&&we.dtick<T&&(we.dtick=T)):/%[Bbm]/.test(Qe)?(Me=S,ot&&(Ye?fe(we.dtick)<1:we.dtick<w)&&(we.dtick="M1")):/%[q]/.test(Qe)?(Me=x,ot&&(Ye?fe(we.dtick)<3:we.dtick<A)&&(we.dtick="M3")):/%[Yy]/.test(Qe)&&(Me=y,ot&&(Ye?fe(we.dtick)<12:we.dtick<m)&&(we.dtick="M12")))}Ye=Re(),Ye&&we.tick0===we._dowTick0&&(we.tick0=we._rawTick0),we._definedDelta=Me}function ce(we,Me,Re){for(var Ye=0;Ye<we.length;Ye++){var Qe=we[Ye].value,ot=Ye,st=Ye+1;Ye<we.length-1?(ot=Ye,st=Ye+1):Ye>0?(ot=Ye-1,st=Ye):(ot=Ye,st=Ye);var pt=we[ot].value,wt=we[st].value,Yt=Math.abs(wt-pt),wr=Re||Yt,Tr=0;wr>=m?Yt>=m&&Yt<=d?Tr=Yt:Tr=y:Re===x&&wr>=A?Yt>=A&&Yt<=g?Tr=Yt:Tr=x:wr>=w?Yt>=w&&Yt<=b?Tr=Yt:Tr=S:Re===T&&wr>=T?Tr=T:wr>=_?Tr=_:Re===v&&wr>=v?Tr=v:Re===P&&wr>=P&&(Tr=P);var Mr;Tr>=Yt&&(Tr=Yt,Mr=!0);var _r=Qe+Tr;if(Me.rangebreaks&&Tr>0){for(var Or=84,nn=0,Sr=0;Sr<Or;Sr++){var yr=(Sr+.5)/Or;Me.maskBreaks(Qe*(1-yr)+yr*_r)!==N&&nn++}Tr*=nn/Or,Tr||(we[Ye].drop=!0),Mr&&Yt>T&&(Tr=Yt)}(Tr>0||Ye===0)&&(we[Ye].periodX=Qe+Tr/2)}}J.calcTicks=function(Me,Re){J.prepTicks(Me,Re);var Ye=t.simpleMap(Me.range,Me.r2l,void 0,void 0,Re);if(Me.tickmode==="array")return me(Me);var Qe=$(Ye),ot=Qe[0],st=Qe[1],pt=Ye[1]<Ye[0],wt=Math.min(Ye[0],Ye[1]),Yt=Math.max(Ye[0],Ye[1]),wr=Me.type==="log"&&!(o(Me.dtick)||Me.dtick.charAt(0)==="L"),Tr=Me.ticklabelmode==="period";if(Me._tmin=J.tickFirst(Me,Re),Me._tmin<ot!==pt)return[];(Me.type==="category"||Me.type==="multicategory")&&(st=pt?Math.max(-.5,st):Math.min(Me._categories.length-.5,st));var Mr=Me._tmin;Me.rangebreaks&&Me._tick0Init!==Me.tick0&&(Mr=ir(Mr,Me),pt||(Mr=J.tickIncrement(Mr,Me.dtick,!pt,Me.calendar))),Tr&&(Mr=J.tickIncrement(Mr,Me.dtick,!pt,Me.calendar));for(var _r=Math.max(1e3,Me._length||0),Or=[],nn=null;pt?Mr>=st:Mr<=st;Mr=J.tickIncrement(Mr,Me.dtick,pt,Me.calendar)){if(Me.rangebreaks&&!pt){if(Mr<ot)continue;if(Me.maskBreaks(Mr)===N&&ir(Mr,Me)>=Yt)break}if(Or.length>_r||Mr===nn)break;nn=Mr;var Sr=!1;wr&&Mr!==(Mr|0)&&(Sr=!0),Or.push({minor:Sr,value:Mr})}Tr&&ce(Or,Me,Me._definedDelta);var yr;if(Me.rangebreaks){var gn=Me._id.charAt(0)==="y",Xr=1;Me.tickmode==="auto"&&(Xr=Me.tickfont?Me.tickfont.size:12);var kr=NaN;for(yr=Or.length-1;yr>-1;yr--){if(Or[yr].drop){Or.splice(yr,1);continue}Or[yr].value=ir(Or[yr].value,Me);var sn=Me.c2p(Or[yr].value);(gn?kr>sn-Xr:kr<sn+Xr)?Or.splice(pt?yr+1:yr,1):kr=sn}}Rr(Me)&&Math.abs(Ye[1]-Ye[0])===360&&Or.pop(),Me._tmax=(Or[Or.length-1]||{}).value,Me._prevDateHead="",Me._inCalcTicks=!0;var cn=[],$r,at;for(yr=0;yr<Or.length;yr++){var Ot=Or[yr].minor,nr=Or[yr].value;$r=J.tickText(Me,nr,!1,Ot),at=Or[yr].periodX,at!==void 0&&($r.periodX=at,(at>Yt||at<wt)&&(at>Yt&&($r.periodX=Yt),at<wt&&($r.periodX=wt),$r.text=" ",Me._prevDateHead="")),cn.push($r)}return Me._inCalcTicks=!1,cn};function me(we){var Me=we.tickvals,Re=we.ticktext,Ye=new Array(Me.length),Qe=t.simpleMap(we.range,we.r2l),ot=$(Qe),st=Math.min(ot[0],ot[1]),pt=Math.max(ot[0],ot[1]),wt=0;Array.isArray(Re)||(Re=[]);var Yt=we.type==="category"?we.d2l_noadd:we.d2l;we.type==="log"&&String(we.dtick).charAt(0)!=="L"&&(we.dtick="L"+Math.pow(10,Math.floor(Math.min(we.range[0],we.range[1]))-1));for(var wr=0;wr<Me.length;wr++){var Tr=Yt(Me[wr]);Tr>st&&Tr<pt&&(Re[wr]===void 0?Ye[wt]=J.tickText(we,Tr):Ye[wt]=et(we,Tr,String(Re[wr])),wt++)}return wt<Me.length&&Ye.splice(wt,Me.length-wt),we.rangebreaks&&(Ye=Ye.filter(function(Mr){return we.maskBreaks(Mr.x)!==N})),Ye}var xe=[2,5,10],ke=[1,2,3,6,12],Ae=[1,2,5,10,15,30],Oe=[1,2,3,7,14],He=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ge=[-.301,0,.301,.699,1],_e=[15,30,45,90,180];function Ie(we,Me,Re){return Me*t.roundUp(we/Me,Re)}J.autoTicks=function(we,Me){var Re;function Ye(wr){return Math.pow(wr,Math.floor(Math.log(Me)/Math.LN10))}if(we.type==="date"){we.tick0=t.dateTick0(we.calendar,0);var Qe=2*Me;if(Qe>y)Me/=y,Re=Ye(10),we.dtick="M"+12*Ie(Me,Re,xe);else if(Qe>S)Me/=S,we.dtick="M"+Ie(Me,1,ke);else if(Qe>_){we.dtick=Ie(Me,_,we._hasDayOfWeekBreaks?[1,2,7,14]:Oe);var ot=J.getTickFormat(we),st=we.ticklabelmode==="period";st&&(we._rawTick0=we.tick0),/%[uVW]/.test(ot)?we.tick0=t.dateTick0(we.calendar,2):we.tick0=t.dateTick0(we.calendar,1),st&&(we._dowTick0=we.tick0)}else Qe>P?we.dtick=Ie(Me,P,ke):Qe>M?we.dtick=Ie(Me,M,Ae):Qe>E?we.dtick=Ie(Me,E,Ae):(Re=Ye(10),we.dtick=Ie(Me,Re,xe))}else if(we.type==="log"){we.tick0=0;var pt=t.simpleMap(we.range,we.r2l);if(Me>.7)we.dtick=Math.ceil(Me);else if(Math.abs(pt[1]-pt[0])<1){var wt=1.5*Math.abs((pt[1]-pt[0])/Me);Me=Math.abs(Math.pow(10,pt[1])-Math.pow(10,pt[0]))/wt,Re=Ye(10),we.dtick="L"+Ie(Me,Re,xe)}else we.dtick=Me>.3?"D2":"D1"}else we.type==="category"||we.type==="multicategory"?(we.tick0=0,we.dtick=Math.ceil(Math.max(Me,1))):Rr(we)?(we.tick0=0,Re=1,we.dtick=Ie(Me,Re,_e)):(we.tick0=0,Re=Ye(10),we.dtick=Ie(Me,Re,xe));if(we.dtick===0&&(we.dtick=1),!o(we.dtick)&&typeof we.dtick!="string"){var Yt=we.dtick;throw we.dtick=1,"ax.dtick error: "+String(Yt)}};function We(we){var Me=we.dtick;if(we._tickexponent=0,!o(Me)&&typeof Me!="string"&&(Me=1),(we.type==="category"||we.type==="multicategory")&&(we._tickround=null),we.type==="date"){var Re=we.r2l(we.tick0),Ye=we.l2r(Re).replace(/(^-|i)/g,""),Qe=Ye.length;if(String(Me).charAt(0)==="M")Qe>10||Ye.substr(5)!=="01-01"?we._tickround="d":we._tickround=+Me.substr(1)%12==0?"y":"m";else if(Me>=_&&Qe<=10||Me>=_*15)we._tickround="d";else if(Me>=M&&Qe<=16||Me>=P)we._tickround="M";else if(Me>=E&&Qe<=19||Me>=M)we._tickround="S";else{var ot=we.l2r(Re+Me).replace(/^-/,"").length;we._tickround=Math.max(Qe,ot)-20,we._tickround<0&&(we._tickround=4)}}else if(o(Me)||Me.charAt(0)==="L"){var st=we.range.map(we.r2d||Number);o(Me)||(Me=Number(Me.substr(1))),we._tickround=2-Math.floor(Math.log(Me)/Math.LN10+.01);var pt=Math.max(Math.abs(st[0]),Math.abs(st[1])),wt=Math.floor(Math.log(pt)/Math.LN10+.01),Yt=we.minexponent===void 0?3:we.minexponent;Math.abs(wt)>Yt&&(Nt(we.exponentformat)&&!Et(wt)?we._tickexponent=3*Math.round((wt-1)/3):we._tickexponent=wt)}else we._tickround=null}J.tickIncrement=function(we,Me,Re,Ye){var Qe=Re?-1:1;if(o(Me))return t.increment(we,Qe*Me);var ot=Me.charAt(0),st=Qe*Number(Me.substr(1));if(ot==="M")return t.incrementMonth(we,st,Ye);if(ot==="L")return Math.log(Math.pow(10,we)+st)/Math.LN10;if(ot==="D"){var pt=Me==="D2"?Ge:He,wt=we+Qe*.01,Yt=t.roundUp(t.mod(wt,1),pt,Re);return Math.floor(wt)+Math.log(l.round(Math.pow(10,Yt),1))/Math.LN10}throw"unrecognized dtick "+String(Me)},J.tickFirst=function(we,Me){var Re=we.r2l||Number,Ye=t.simpleMap(we.range,Re,void 0,void 0,Me),Qe=Ye[1]<Ye[0],ot=Qe?Math.floor:Math.ceil,st=$(Ye)[0],pt=we.dtick,wt=Re(we.tick0);if(o(pt)){var Yt=ot((st-wt)/pt)*pt+wt;return(we.type==="category"||we.type==="multicategory")&&(Yt=t.constrain(Yt,0,we._categories.length-1)),Yt}var wr=pt.charAt(0),Tr=Number(pt.substr(1));if(wr==="M"){for(var Mr=0,_r=wt,Or,nn,Sr;Mr<10;){if(Or=J.tickIncrement(_r,pt,Qe,we.calendar),(Or-st)*(_r-st)<=0)return Qe?Math.min(_r,Or):Math.max(_r,Or);nn=(st-(_r+Or)/2)/(Or-_r),Sr=wr+(Math.abs(Math.round(nn))||1)*Tr,_r=J.tickIncrement(_r,Sr,nn<0?!Qe:Qe,we.calendar),Mr++}return t.error("tickFirst did not converge",we),_r}else{if(wr==="L")return Math.log(ot((Math.pow(10,st)-wt)/Tr)*Tr+wt)/Math.LN10;if(wr==="D"){var yr=pt==="D2"?Ge:He,gn=t.roundUp(t.mod(st,1),yr,Qe);return Math.floor(st)+Math.log(l.round(Math.pow(10,gn),1))/Math.LN10}else throw"unrecognized dtick "+String(pt)}},J.tickText=function(we,Me,Re,Ye){var Qe=et(we,Me),ot=we.tickmode==="array",st=Re||ot,pt=we.type,wt=pt==="category"?we.d2l_noadd:we.d2l,Yt;if(ot&&Array.isArray(we.ticktext)){var wr=t.simpleMap(we.range,we.r2l),Tr=(Math.abs(wr[1]-wr[0])-(we._lBreaks||0))/1e4;for(Yt=0;Yt<we.ticktext.length&&!(Math.abs(Me-wt(we.tickvals[Yt]))<Tr);Yt++);if(Yt<we.ticktext.length)return Qe.text=String(we.ticktext[Yt]),Qe}function Mr(nn){if(nn===void 0)return!0;if(Re)return nn==="none";var Sr={first:we._tmin,last:we._tmax}[nn];return nn!=="all"&&Me!==Sr}var _r=Re?"never":we.exponentformat!=="none"&&Mr(we.showexponent)?"hide":"";if(pt==="date"?Ne(we,Qe,Re,st):pt==="log"?De(we,Qe,Re,st,_r):pt==="category"?Ve(we,Qe):pt==="multicategory"?dt(we,Qe,Re):Rr(we)?Gt(we,Qe,Re,st,_r):Dt(we,Qe,Re,st,_r),Ye||(we.tickprefix&&!Mr(we.showtickprefix)&&(Qe.text=we.tickprefix+Qe.text),we.ticksuffix&&!Mr(we.showticksuffix)&&(Qe.text+=we.ticksuffix)),we.tickson==="boundaries"||we.showdividers){var Or=function(nn){var Sr=we.l2p(nn);return Sr>=0&&Sr<=we._length?nn:null};Qe.xbnd=[Or(Qe.x-.5),Or(Qe.x+we.dtick-.5)]}return Qe},J.hoverLabelText=function(we,Me,Re){Re&&(we=t.extendFlat({},we,{hoverformat:Re}));var Ye=Array.isArray(Me)?Me[0]:Me,Qe=Array.isArray(Me)?Me[1]:void 0;if(Qe!==void 0&&Qe!==Ye)return J.hoverLabelText(we,Ye,Re)+" - "+J.hoverLabelText(we,Qe,Re);var ot=we.type==="log"&&Ye<=0,st=J.tickText(we,we.c2l(ot?-Ye:Ye),"hover").text;return ot?Ye===0?"0":D+st:st};function et(we,Me,Re){var Ye=we.tickfont||{};return{x:Me,dx:0,dy:0,text:Re||"",fontSize:Ye.size,font:Ye.family,fontColor:Ye.color}}function Ne(we,Me,Re,Ye){var Qe=we._tickround,ot=Re&&we.hoverformat||J.getTickFormat(we);Ye&&(o(Qe)?Qe=4:Qe={y:"m",m:"d",d:"M",M:"S",S:4}[Qe]);var st=t.formatDate(Me.x,ot,Qe,we._dateFormat,we.calendar,we._extraFormat),pt,wt=st.indexOf(`
`);if(wt!==-1&&(pt=st.substr(wt+1),st=st.substr(0,wt)),Ye&&(st==="00:00:00"||st==="00:00"?(st=pt,pt=""):st.length===8&&(st=st.replace(/:00$/,""))),pt)if(Re)Qe==="d"?st+=", "+pt:st=pt+(st?", "+st:"");else if(!we._inCalcTicks||we._prevDateHead!==pt)we._prevDateHead=pt,st+="<br>"+pt;else{var Yt=Vr(we),wr=we._trueSide||we.side;(!Yt&&wr==="top"||Yt&&wr==="bottom")&&(st+="<br> ")}Me.text=st}function De(we,Me,Re,Ye,Qe){var ot=we.dtick,st=Me.x,pt=we.tickformat,wt=typeof ot=="string"&&ot.charAt(0);if(Qe==="never"&&(Qe=""),Ye&&wt!=="L"&&(ot="L3",wt="L"),pt||wt==="L")Me.text=At(Math.pow(10,st),we,Qe,Ye);else if(o(ot)||wt==="D"&&t.mod(st+.01,1)<.1){var Yt=Math.round(st),wr=Math.abs(Yt),Tr=we.exponentformat;Tr==="power"||Nt(Tr)&&Et(Yt)?(Yt===0?Me.text=1:Yt===1?Me.text="10":Me.text="10<sup>"+(Yt>1?"":D)+wr+"</sup>",Me.fontSize*=1.25):(Tr==="e"||Tr==="E")&&wr>2?Me.text="1"+Tr+(Yt>0?"+":D)+wr:(Me.text=At(Math.pow(10,st),we,"","fakehover"),ot==="D1"&&we._id.charAt(0)==="y"&&(Me.dy-=Me.fontSize/6))}else if(wt==="D")Me.text=String(Math.round(Math.pow(10,t.mod(st,1)))),Me.fontSize*=.75;else throw"unrecognized dtick "+String(ot);if(we.dtick==="D1"){var Mr=String(Me.text).charAt(0);(Mr==="0"||Mr==="1")&&(we._id.charAt(0)==="y"?Me.dx-=Me.fontSize/4:(Me.dy+=Me.fontSize/2,Me.dx+=(we.range[1]>we.range[0]?1:-1)*Me.fontSize*(st<0?.5:.25)))}}function Ve(we,Me){var Re=we._categories[Math.round(Me.x)];Re===void 0&&(Re=""),Me.text=String(Re)}function dt(we,Me,Re){var Ye=Math.round(Me.x),Qe=we._categories[Ye]||[],ot=Qe[1]===void 0?"":String(Qe[1]),st=Qe[0]===void 0?"":String(Qe[0]);Re?Me.text=st+" - "+ot:(Me.text=ot,Me.text2=st)}function Dt(we,Me,Re,Ye,Qe){Qe==="never"?Qe="":we.showexponent==="all"&&Math.abs(Me.x/we.dtick)<1e-6&&(Qe="hide"),Me.text=At(Me.x,we,Qe,Ye)}function Gt(we,Me,Re,Ye,Qe){if(we.thetaunit==="radians"&&!Re){var ot=Me.x/180;if(ot===0)Me.text="0";else{var st=Mt(ot);if(st[1]>=100)Me.text=At(t.deg2rad(Me.x),we,Qe,Ye);else{var pt=Me.x<0;st[1]===1?st[0]===1?Me.text="\u03C0":Me.text=st[0]+"\u03C0":Me.text=["<sup>",st[0],"</sup>","\u2044","<sub>",st[1],"</sub>","\u03C0"].join(""),pt&&(Me.text=D+Me.text)}}}else Me.text=At(Me.x,we,Qe,Ye)}function Mt(we){function Me(pt,wt){return Math.abs(pt-wt)<=1e-6}function Re(pt,wt){return Me(wt,0)?pt:Re(wt,pt%wt)}function Ye(pt){for(var wt=1;!Me(Math.round(pt*wt)/wt,pt);)wt*=10;return wt}var Qe=Ye(we),ot=we*Qe,st=Math.abs(Re(ot,Qe));return[Math.round(ot/st),Math.round(Qe/st)]}var zt=["f","p","n","\u03BC","m","","k","M","G","T"];function Nt(we){return we==="SI"||we==="B"}function Et(we){return we>14||we<-15}function At(we,Me,Re,Ye){var Qe=we<0,ot=Me._tickround,st=Re||Me.exponentformat||"B",pt=Me._tickexponent,wt=J.getTickFormat(Me),Yt=Me.separatethousands;if(Ye){var wr={exponentformat:st,minexponent:Me.minexponent,dtick:Me.showexponent==="none"?Me.dtick:o(we)&&Math.abs(we)||1,range:Me.showexponent==="none"?Me.range.map(Me.r2d):[0,we||1]};We(wr),ot=(Number(wr._tickround)||0)+4,pt=wr._tickexponent,Me.hoverformat&&(wt=Me.hoverformat)}if(wt)return Me._numFormat(wt)(we).replace(/-/g,D);var Tr=Math.pow(10,-ot)/2;if(st==="none"&&(pt=0),we=Math.abs(we),we<Tr)we="0",Qe=!1;else{if(we+=Tr,pt&&(we*=Math.pow(10,-pt),ot+=pt),ot===0)we=String(Math.floor(we));else if(ot<0){we=String(Math.round(we)),we=we.substr(0,we.length+ot);for(var Mr=ot;Mr<0;Mr++)we+="0"}else{we=String(we);var _r=we.indexOf(".")+1;_r&&(we=we.substr(0,_r+ot).replace(/\.?0+$/,""))}we=t.numSeparate(we,Me._separators,Yt)}if(pt&&st!=="hide"){Nt(st)&&Et(pt)&&(st="power");var Or;pt<0?Or=D+-pt:st!=="power"?Or="+"+pt:Or=String(pt),st==="e"||st==="E"?we+=st+Or:st==="power"?we+="\xD710<sup>"+Or+"</sup>":st==="B"&&pt===9?we+="B":Nt(st)&&(we+=zt[pt/3+5])}return Qe?D+we:we}J.getTickFormat=function(we){var Me;function Re(wt){return typeof wt!="string"?wt:Number(wt.replace("M",""))*S}function Ye(wt,Yt){var wr=["L","D"];if(typeof wt==typeof Yt){if(typeof wt=="number")return wt-Yt;var Tr=wr.indexOf(wt.charAt(0)),Mr=wr.indexOf(Yt.charAt(0));return Tr===Mr?Number(wt.replace(/(L|D)/g,""))-Number(Yt.replace(/(L|D)/g,"")):Tr-Mr}else return typeof wt=="number"?1:-1}function Qe(wt,Yt,wr){var Tr=wr||function(Or){return Or},Mr=Yt[0],_r=Yt[1];return(!Mr&&typeof Mr!="number"||Tr(Mr)<=Tr(wt))&&(!_r&&typeof _r!="number"||Tr(_r)>=Tr(wt))}function ot(wt,Yt){var wr=Yt[0]===null,Tr=Yt[1]===null,Mr=Ye(wt,Yt[0])>=0,_r=Ye(wt,Yt[1])<=0;return(wr||Mr)&&(Tr||_r)}var st,pt;if(we.tickformatstops&&we.tickformatstops.length>0)switch(we.type){case"date":case"linear":{for(Me=0;Me<we.tickformatstops.length;Me++)if(pt=we.tickformatstops[Me],pt.enabled&&Qe(we.dtick,pt.dtickrange,Re)){st=pt;break}break}case"log":{for(Me=0;Me<we.tickformatstops.length;Me++)if(pt=we.tickformatstops[Me],pt.enabled&&ot(we.dtick,pt.dtickrange)){st=pt;break}break}}return st?st.value:we.tickformat},J.getSubplots=function(we,Me){var Re=we._fullLayout._subplots,Ye=Re.cartesian.concat(Re.gl2d||[]),Qe=Me?J.findSubplotsWithAxis(Ye,Me):Ye;return Qe.sort(function(ot,st){var pt=ot.substr(1).split("y"),wt=st.substr(1).split("y");return pt[0]===wt[0]?+pt[1]-+wt[1]:+pt[0]-+wt[0]}),Qe},J.findSubplotsWithAxis=function(we,Me){for(var Re=new RegExp(Me._id.charAt(0)==="x"?"^"+Me._id+"y":Me._id+"$"),Ye=[],Qe=0;Qe<we.length;Qe++){var ot=we[Qe];Re.test(ot)&&Ye.push(ot)}return Ye},J.makeClipPaths=function(we){var Me=we._fullLayout;if(!Me._hasOnlyLargeSploms){var Re={_offset:0,_length:Me.width,_id:""},Ye={_offset:0,_length:Me.height,_id:""},Qe=J.list(we,"x",!0),ot=J.list(we,"y",!0),st=[],pt,wt;for(pt=0;pt<Qe.length;pt++)for(st.push({x:Qe[pt],y:Ye}),wt=0;wt<ot.length;wt++)pt===0&&st.push({x:Re,y:ot[wt]}),st.push({x:Qe[pt],y:ot[wt]});var Yt=Me._clips.selectAll(".axesclip").data(st,function(wr){return wr.x._id+wr.y._id});Yt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(wr){return"clip"+Me._uid+wr.x._id+wr.y._id}).append("rect"),Yt.exit().remove(),Yt.each(function(wr){l.select(this).select("rect").attr({x:wr.x._offset||0,y:wr.y._offset||0,width:wr.x._length||1,height:wr.y._length||1})})}},J.draw=function(we,Me,Re){var Ye=we._fullLayout;Me==="redraw"&&Ye._paper.selectAll("g.subplot").each(function(ot){var st=ot[0],pt=Ye._plots[st];if(pt){var wt=pt.xaxis,Yt=pt.yaxis;pt.xaxislayer.selectAll("."+wt._id+"tick").remove(),pt.yaxislayer.selectAll("."+Yt._id+"tick").remove(),pt.xaxislayer.selectAll("."+wt._id+"tick2").remove(),pt.yaxislayer.selectAll("."+Yt._id+"tick2").remove(),pt.xaxislayer.selectAll("."+wt._id+"divider").remove(),pt.yaxislayer.selectAll("."+Yt._id+"divider").remove(),pt.gridlayer&&pt.gridlayer.selectAll("path").remove(),pt.zerolinelayer&&pt.zerolinelayer.selectAll("path").remove(),Ye._infolayer.select(".g-"+wt._id+"title").remove(),Ye._infolayer.select(".g-"+Yt._id+"title").remove()}});var Qe=!Me||Me==="redraw"?J.listIds(we):Me;return t.syncOrAsync(Qe.map(function(ot){return function(){if(!!ot){var st=J.getFromId(we,ot),pt=J.drawOne(we,st,Re);return st._r=st.range.slice(),st._rl=t.simpleMap(st._r,st.r2l),pt}}}))},J.drawOne=function(we,Me,Re){Re=Re||{};var Ye,Qe,ot;Me.setScale();var st=we._fullLayout,pt=Me._id,wt=pt.charAt(0),Yt=J.counterLetter(pt),wr=st._plots[Me._mainSubplot];if(!wr)return;var Tr=wr[wt+"axislayer"],Mr=Me._mainLinePosition,_r=Me._mainMirrorPosition,Or=Me._vals=J.calcTicks(Me),nn=[Me.mirror,Mr,_r].join("_");for(Ye=0;Ye<Or.length;Ye++)Or[Ye].axInfo=nn;Me._selections={},Me._tickAngles&&(Me._prevTickAngles=Me._tickAngles),Me._tickAngles={},Me._depth=null;var Sr={};function yr(ha){var qn=pt+(ha||"tick");return Sr[qn]||(Sr[qn]=Ee(Me,qn)),Sr[qn]}if(!!Me.visible){var gn=J.makeTransTickFn(Me),Xr=J.makeTransTickLabelFn(Me),kr,sn,cn=Me.ticks==="inside",$r=Me.ticks==="outside";if(Me.tickson==="boundaries"){var at=it(Me,Or);sn=J.clipEnds(Me,at),kr=cn?sn:at}else sn=J.clipEnds(Me,Or),kr=cn&&Me.ticklabelmode!=="period"?sn:Or;var Ot=Me._gridVals=sn,nr=$e(Me,Or);if(!st._hasOnlyLargeSploms){var dr=Me._subplotsWith,Zr={};for(Ye=0;Ye<dr.length;Ye++){Qe=dr[Ye],ot=st._plots[Qe];var Lr=ot[Yt+"axis"],Ur=Lr._mainAxis._id;if(!Zr[Ur]){Zr[Ur]=1;var xr=wt==="x"?"M0,"+Lr._offset+"v"+Lr._length:"M"+Lr._offset+",0h"+Lr._length;J.drawGrid(we,Me,{vals:Ot,counterAxis:Lr,layer:ot.gridlayer.select("."+pt),path:xr,transFn:gn}),J.drawZeroLine(we,Me,{counterAxis:Lr,layer:ot.zerolinelayer,path:xr,transFn:gn})}}}var on=J.getTickSigns(Me),Pn=[];if(Me.ticks){var En=J.makeTickPath(Me,Mr,on[2]),$n,aa;Me._anchorAxis&&Me.mirror&&Me.mirror!==!0?($n=J.makeTickPath(Me,_r,on[3]),aa=En+$n):($n="",aa=En);var Ca;if(Me.showdividers&&$r&&Me.tickson==="boundaries"){var ba={};for(Ye=0;Ye<nr.length;Ye++)ba[nr[Ye].x]=1;Ca=function(ha){return ba[ha.x]?$n:aa}}else Ca=aa;J.drawTicks(we,Me,{vals:kr,layer:Tr,path:Ca,transFn:gn}),Me.mirror==="allticks"&&(Pn=Object.keys(Me._linepositions||{}))}for(Ye=0;Ye<Pn.length;Ye++){Qe=Pn[Ye],ot=st._plots[Qe];var vr=Me._linepositions[Qe]||[],yn=J.makeTickPath(Me,vr[0],on[0])+J.makeTickPath(Me,vr[1],on[1]);J.drawTicks(we,Me,{vals:kr,layer:ot[wt+"axislayer"],path:yn,transFn:gn})}var en=[];if(en.push(function(){return J.drawLabels(we,Me,{vals:Or,layer:Tr,plotinfo:ot,transFn:Xr,labelFns:J.makeLabelFns(Me,Mr)})}),Me.type==="multicategory"){var In={x:2,y:10}[wt];en.push(function(){var ha={x:"height",y:"width"}[wt],qn=yr()[ha]+In+(Me._tickAngles[pt+"tick"]?Me.tickfont.size*te:0);return J.drawLabels(we,Me,{vals:ht(Me,Or),layer:Tr,cls:pt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:gn,labelFns:J.makeLabelFns(Me,Mr+qn*on[4])})}),en.push(function(){return Me._depth=on[4]*(yr("tick2")[Me.side]-Mr),Pt(we,Me,{vals:nr,layer:Tr,path:J.makeTickPath(Me,Mr,on[4],Me._depth),transFn:gn})})}else Me.title.hasOwnProperty("standoff")&&en.push(function(){Me._depth=on[4]*(yr()[Me.side]-Mr)});var Bn=p.getComponentMethod("rangeslider","isVisible")(Me);return en.push(function(){var ha=Me.side.charAt(0),qn=re[Me.side].charAt(0),Hn=J.getPxPosition(we,Me),la=$r?Me.ticklen:0,da,hr,zr,ln;if((Me.automargin||Bn)&&(Me.type==="multicategory"?da=yr("tick2"):(da=yr(),wt==="x"&&ha==="b"&&(Me._depth=Math.max(da.width>0?da.bottom-Hn:0,la)))),Me.automargin){hr={x:0,y:0,r:0,l:0,t:0,b:0};var Rt=[0,1];if(wt==="x"){if(ha==="b"?hr[ha]=Me._depth:(hr[ha]=Me._depth=Math.max(da.width>0?Hn-da.top:0,la),Rt.reverse()),da.width>0){var qt=da.right-(Me._offset+Me._length);qt>0&&(hr.xr=1,hr.r=qt);var br=Me._offset-da.left;br>0&&(hr.xl=0,hr.l=br)}}else if(ha==="l"?hr[ha]=Me._depth=Math.max(da.height>0?Hn-da.left:0,la):(hr[ha]=Me._depth=Math.max(da.height>0?da.right-Hn:0,la),Rt.reverse()),da.height>0){var Hr=da.bottom-(Me._offset+Me._length);Hr>0&&(hr.yb=0,hr.b=Hr);var ar=Me._offset-da.top;ar>0&&(hr.yt=1,hr.t=ar)}hr[Yt]=Me.anchor==="free"?Me.position:Me._anchorAxis.domain[Rt[0]],Me.title.text!==st._dfltTitle[wt]&&(hr[ha]+=kt(Me)+(Me.title.standoff||0)),Me.mirror&&Me.anchor!=="free"&&(zr={x:0,y:0,r:0,l:0,t:0,b:0},zr[qn]=Me.linewidth,Me.mirror&&Me.mirror!==!0&&(zr[qn]+=la),Me.mirror===!0||Me.mirror==="ticks"?zr[Yt]=Me._anchorAxis.domain[Rt[1]]:(Me.mirror==="all"||Me.mirror==="allticks")&&(zr[Yt]=[Me._counterDomainMin,Me._counterDomainMax][Rt[1]]))}Bn&&(ln=p.getComponentMethod("rangeslider","autoMarginOpts")(we,Me)),c.autoMargin(we,gt(Me),hr),c.autoMargin(we,Ct(Me),zr),c.autoMargin(we,or(Me),ln)}),!Re.skipTitle&&!(Bn&&Me.side==="bottom")&&en.push(function(){return Bt(we,Me)}),t.syncOrAsync(en)}};function it(we,Me){var Re=[],Ye,Qe=function(ot,st){var pt=ot.xbnd[st];pt!==null&&Re.push(t.extendFlat({},ot,{x:pt}))};if(Me.length){for(Ye=0;Ye<Me.length;Ye++)Qe(Me[Ye],0);Qe(Me[Ye-1],1)}return Re}function ht(we,Me){for(var Re=[],Ye={},Qe=0;Qe<Me.length;Qe++){var ot=Me[Qe];Ye[ot.text2]?Ye[ot.text2].push(ot.x):Ye[ot.text2]=[ot.x]}for(var st in Ye)Re.push(et(we,t.interp(Ye[st],.5),st));return Re}function $e(we,Me){var Re=[],Ye,Qe,ot=Me.length&&Me[Me.length-1].x<Me[0].x,st=function(wt,Yt){var wr=wt.xbnd[Yt];wr!==null&&Re.push(t.extendFlat({},wt,{x:wr}))};if(we.showdividers&&Me.length){for(Ye=0;Ye<Me.length;Ye++){var pt=Me[Ye];pt.text2!==Qe&&st(pt,ot?1:0),Qe=pt.text2}st(Me[Ye-1],ot?0:1)}return Re}function Ee(we,Me){var Re,Ye,Qe,ot;return we._selections[Me].size()?(Re=1/0,Ye=-1/0,Qe=1/0,ot=-1/0,we._selections[Me].each(function(){var st=Je(this),pt=f.bBox(st.node().parentNode);Re=Math.min(Re,pt.top),Ye=Math.max(Ye,pt.bottom),Qe=Math.min(Qe,pt.left),ot=Math.max(ot,pt.right)})):(Re=0,Ye=0,Qe=0,ot=0),{top:Re,bottom:Ye,left:Qe,right:ot,height:Ye-Re,width:ot-Qe}}J.getTickSigns=function(we){var Me=we._id.charAt(0),Re={x:"top",y:"right"}[Me],Ye=we.side===Re?1:-1,Qe=[-1,1,Ye,-Ye];return we.ticks!=="inside"==(Me==="x")&&(Qe=Qe.map(function(ot){return-ot})),we.side&&Qe.push({l:-1,t:-1,r:1,b:1}[we.side.charAt(0)]),Qe},J.makeTransTickFn=function(we){return we._id.charAt(0)==="x"?function(Me){return n(we._offset+we.l2p(Me.x),0)}:function(Me){return n(0,we._offset+we.l2p(Me.x))}},J.makeTransTickLabelFn=function(we){var Me=rt(we),Re=Me[0],Ye=Me[1];return we._id.charAt(0)==="x"?function(Qe){return n(Re+we._offset+we.l2p(Xe(Qe)),Ye)}:function(Qe){return n(Ye,Re+we._offset+we.l2p(Xe(Qe)))}};function Xe(we){return we.periodX!==void 0?we.periodX:we.x}function rt(we){var Me=we.ticklabelposition||"",Re=function(_r){return Me.indexOf(_r)!==-1},Ye=Re("top"),Qe=Re("left"),ot=Re("right"),st=Re("bottom"),pt=Re("inside"),wt=st||Qe||Ye||ot;if(!wt&&!pt)return[0,0];var Yt=we.side,wr=wt?(we.tickwidth||0)/2:0,Tr=W,Mr=we.tickfont?we.tickfont.size:12;return(st||Ye)&&(wr+=Mr*Z,Tr+=(we.linewidth||0)/2),(Qe||ot)&&(wr+=(we.linewidth||0)/2,Tr+=W),pt&&Yt==="top"&&(Tr-=Mr*(1-Z)),(Qe||Ye)&&(wr=-wr),(Yt==="bottom"||Yt==="right")&&(Tr=-Tr),[wt?wr:0,pt?Tr:0]}J.makeTickPath=function(we,Me,Re,Ye){Ye=Ye!==void 0?Ye:we.ticklen;var Qe=we._id.charAt(0),ot=(we.linewidth||1)/2;return Qe==="x"?"M0,"+(Me+ot*Re)+"v"+Ye*Re:"M"+(Me+ot*Re)+",0h"+Ye*Re},J.makeLabelFns=function(we,Me,Re){var Ye=we.ticklabelposition||"",Qe=function(Zr){return Ye.indexOf(Zr)!==-1},ot=Qe("top"),st=Qe("left"),pt=Qe("right"),wt=Qe("bottom"),Yt=wt||st||ot||pt,wr=Qe("inside"),Tr=Ye==="inside"&&we.ticks==="inside"||!wr&&we.ticks==="outside"&&we.tickson!=="boundaries",Mr=0,_r=0,Or=Tr?we.ticklen:0;if(wr?Or*=-1:Yt&&(Or=0),Tr&&(Mr+=Or,Re)){var nn=t.deg2rad(Re);Mr=Or*Math.cos(nn)+1,_r=Or*Math.sin(nn)}we.showticklabels&&(Tr||we.showline)&&(Mr+=.2*we.tickfont.size),Mr+=(we.linewidth||1)/2*(wr?-1:1);var Sr={labelStandoff:Mr,labelShift:_r},yr,gn,Xr,kr,sn=0,cn=we.side,$r=we._id.charAt(0),at=we.tickangle,Ot;if($r==="x")Ot=!wr&&cn==="bottom"||wr&&cn==="top",kr=Ot?1:-1,wr&&(kr*=-1),yr=_r*kr,gn=Me+Mr*kr,Xr=Ot?1:-.2,Math.abs(at)===90&&(wr?Xr+=j:at===-90&&cn==="bottom"?Xr=Z:at===90&&cn==="top"?Xr=j:Xr=.5,sn=j/2*(at/90)),Sr.xFn=function(Zr){return Zr.dx+yr+sn*Zr.fontSize},Sr.yFn=function(Zr){return Zr.dy+gn+Zr.fontSize*Xr},Sr.anchorFn=function(Zr,Lr){if(Yt){if(st)return"end";if(pt)return"start"}return!o(Lr)||Lr===0||Lr===180?"middle":Lr*kr<0!==wr?"end":"start"},Sr.heightFn=function(Zr,Lr,Ur){return Lr<-60||Lr>60?-.5*Ur:we.side==="top"!==wr?-Ur:0};else if($r==="y"){if(Ot=!wr&&cn==="left"||wr&&cn==="right",kr=Ot?1:-1,wr&&(kr*=-1),yr=Mr,gn=_r*kr,Xr=0,!wr&&Math.abs(at)===90&&(at===-90&&cn==="left"||at===90&&cn==="right"?Xr=Z:Xr=.5),wr){var nr=o(at)?+at:0;if(nr!==0){var dr=t.deg2rad(nr);sn=Math.abs(Math.sin(dr))*Z*kr,Xr=0}}Sr.xFn=function(Zr){return Zr.dx+Me-(yr+Zr.fontSize*Xr)*kr+sn*Zr.fontSize},Sr.yFn=function(Zr){return Zr.dy+gn+Zr.fontSize*j},Sr.anchorFn=function(Zr,Lr){return o(Lr)&&Math.abs(Lr)===90?"middle":Ot?"end":"start"},Sr.heightFn=function(Zr,Lr,Ur){return we.side==="right"&&(Lr*=-1),Lr<-30?-Ur:Lr<30?-.5*Ur:0}}return Sr};function ut(we){return[we.text,we.x,we.axInfo,we.font,we.fontSize,we.fontColor].join("_")}J.drawTicks=function(we,Me,Re){Re=Re||{};var Ye=Me._id+"tick",Qe=Re.vals;Me.ticklabelmode==="period"&&(Qe=Qe.slice(),Qe.shift());var ot=Re.layer.selectAll("path."+Ye).data(Me.ticks?Qe:[],ut);ot.exit().remove(),ot.enter().append("path").classed(Ye,1).classed("ticks",1).classed("crisp",Re.crisp!==!1).call(r.stroke,Me.tickcolor).style("stroke-width",f.crispRound(we,Me.tickwidth,1)+"px").attr("d",Re.path).style("display",null),qe(Me,[F]),ot.attr("transform",Re.transFn)},J.drawGrid=function(we,Me,Re){Re=Re||{};var Ye=Me._id+"grid",Qe=Re.vals,ot=Re.counterAxis;if(Me.showgrid===!1)Qe=[];else if(ot&&J.shouldShowZeroLine(we,Me,ot))for(var st=Me.tickmode==="array",pt=0;pt<Qe.length;pt++){var wt=Qe[pt].x;if(st?!wt:Math.abs(wt)<Me.dtick/100)if(Qe=Qe.slice(0,pt).concat(Qe.slice(pt+1)),st)pt--;else break}var Yt=Re.layer.selectAll("path."+Ye).data(Qe,ut);Yt.exit().remove(),Yt.enter().append("path").classed(Ye,1).classed("crisp",Re.crisp!==!1),Me._gw=f.crispRound(we,Me.gridwidth,1),Yt.attr("transform",Re.transFn).attr("d",Re.path).call(r.stroke,Me.gridcolor||"#ddd").style("stroke-width",Me._gw+"px").style("display",null),qe(Me,[I]),typeof Re.path=="function"&&Yt.attr("d",Re.path)},J.drawZeroLine=function(we,Me,Re){Re=Re||Re;var Ye=Me._id+"zl",Qe=J.shouldShowZeroLine(we,Me,Re.counterAxis),ot=Re.layer.selectAll("path."+Ye).data(Qe?[{x:0,id:Me._id}]:[]);ot.exit().remove(),ot.enter().append("path").classed(Ye,1).classed("zl",1).classed("crisp",Re.crisp!==!1).each(function(){Re.layer.selectAll("path").sort(function(st,pt){return se(st.id,pt.id)})}),ot.attr("transform",Re.transFn).attr("d",Re.path).call(r.stroke,Me.zerolinecolor||r.defaultLine).style("stroke-width",f.crispRound(we,Me.zerolinewidth,Me._gw||1)+"px").style("display",null),qe(Me,[O])},J.drawLabels=function(we,Me,Re){Re=Re||{};var Ye=we._fullLayout,Qe=Me._id,ot=Qe.charAt(0),st=Re.cls||Qe+"tick",pt=Re.vals,wt=Re.labelFns,Yt=Re.secondary?0:Me.tickangle,wr=(Me._prevTickAngles||{})[st],Tr=Re.layer.selectAll("g."+st).data(Me.showticklabels?pt:[],ut),Mr=[];Tr.enter().append("g").classed(st,1).append("text").attr("text-anchor","middle").each(function(kr){var sn=l.select(this),cn=we._promises.length;sn.call(a.positionText,wt.xFn(kr),wt.yFn(kr)).call(f.font,kr.font,kr.fontSize,kr.fontColor).text(kr.text).call(a.convertToTspans,we),we._promises[cn]?Mr.push(we._promises.pop().then(function(){_r(sn,Yt)})):_r(sn,Yt)}),qe(Me,[V]),Tr.exit().remove(),Re.repositionOnUpdate&&Tr.each(function(kr){l.select(this).select("text").call(a.positionText,wt.xFn(kr),wt.yFn(kr))});function _r(kr,sn){kr.each(function(cn){var $r=l.select(this),at=$r.select(".text-math-group"),Ot=wt.anchorFn(cn,sn),nr=Re.transFn.call($r.node(),cn)+(o(sn)&&+sn!=0?" rotate("+sn+","+wt.xFn(cn)+","+(wt.yFn(cn)-cn.fontSize/2)+")":""),dr=a.lineCount($r),Zr=te*cn.fontSize,Lr=wt.heightFn(cn,o(sn)?+sn:0,(dr-1)*Zr);if(Lr&&(nr+=n(0,Lr)),at.empty()){var Ur=$r.select("text");Ur.attr({transform:nr,"text-anchor":Ot}),Ur.style("opacity",1),Me._adjustTickLabelsOverflow&&Me._adjustTickLabelsOverflow()}else{var xr=f.bBox(at.node()).width,on=xr*{end:-.5,start:.5}[Ot];at.attr("transform",nr+n(on,0))}})}Me._adjustTickLabelsOverflow=function(){var kr=Me.ticklabeloverflow;if(!(!kr||kr==="allow")){var sn=kr.indexOf("hide")!==-1,cn=Me._id.charAt(0)==="x",$r=0,at=cn?we._fullLayout.width:we._fullLayout.height;if(kr.indexOf("domain")!==-1){var Ot=t.simpleMap(Me.range,Me.r2l);$r=Me.l2p(Ot[0])+Me._offset,at=Me.l2p(Ot[1])+Me._offset}var nr=Math.min($r,at),dr=Math.max($r,at),Zr=Me.side,Lr=1/0,Ur=-1/0;Tr.each(function(En){var $n=l.select(this),aa=$n.select(".text-math-group");if(aa.empty()){var Ca=f.bBox($n.node()),ba=0;cn?(Ca.right>dr||Ca.left<nr)&&(ba=1):(Ca.bottom>dr||Ca.top+(Me.tickangle?0:En.fontSize/4)<nr)&&(ba=1);var vr=$n.select("text");ba?sn&&vr.style("opacity",0):(vr.style("opacity",1),Zr==="bottom"||Zr==="right"?Lr=Math.min(Lr,cn?Ca.top:Ca.left):Lr=-1/0,Zr==="top"||Zr==="left"?Ur=Math.max(Ur,cn?Ca.bottom:Ca.right):Ur=1/0)}});for(var xr in Ye._plots){var on=Ye._plots[xr];if(!(Me._id!==on.xaxis._id&&Me._id!==on.yaxis._id)){var Pn=cn?on.yaxis:on.xaxis;Pn&&(Pn["_visibleLabelMin_"+Me._id]=Lr,Pn["_visibleLabelMax_"+Me._id]=Ur)}}}},Me._hideCounterAxisInsideTickLabels=function(kr){var sn=Me._id.charAt(0)==="x",cn=[];for(var $r in Ye._plots){var at=Ye._plots[$r];Me._id!==at.xaxis._id&&Me._id!==at.yaxis._id||cn.push(sn?at.yaxis:at.xaxis)}cn.forEach(function(Ot,nr){Ot&&Vr(Ot)&&(kr||[O,I,F,V]).forEach(function(dr){var Zr=dr.K==="tick"&&dr.L==="text"&&Me.ticklabelmode==="period",Lr=Ye._plots[Me._mainSubplot],Ur;dr.K===O.K?Ur=Lr.zerolinelayer.selectAll("."+Me._id+"zl"):dr.K===I.K?Ur=Lr.gridlayer.selectAll("."+Me._id):Ur=Lr[Me._id.charAt(0)+"axislayer"],Ur.each(function(){var xr=l.select(this);dr.L&&(xr=xr.selectAll(dr.L)),xr.each(function(on){var Pn=Me.l2p(Zr?Xe(on):on.x)+Me._offset,En=l.select(this);Pn<Me["_visibleLabelMax_"+Ot._id]&&Pn>Me["_visibleLabelMin_"+Ot._id]?En.style("display","none"):dr.K==="tick"&&!nr&&En.style("display",null)})})})})},_r(Tr,wr+1?wr:Yt);function Or(){return Mr.length&&Promise.all(Mr)}var nn=null;function Sr(){if(_r(Tr,Yt),pt.length&&ot==="x"&&!o(Yt)&&(Me.type!=="log"||String(Me.dtick).charAt(0)!=="D")){nn=0;var kr=0,sn=[],cn;if(Tr.each(function(Ca){kr=Math.max(kr,Ca.fontSize);var ba=Me.l2p(Ca.x),vr=Je(this),yn=f.bBox(vr.node());sn.push({top:0,bottom:10,height:10,left:ba-yn.width/2,right:ba+yn.width/2+2,width:yn.width+2})}),(Me.tickson==="boundaries"||Me.showdividers)&&!Re.secondary){var $r=2;for(Me.ticks&&($r+=Me.tickwidth/2),cn=0;cn<sn.length;cn++){var at=pt[cn].xbnd,Ot=sn[cn];if(at[0]!==null&&Ot.left-Me.l2p(at[0])<$r||at[1]!==null&&Me.l2p(at[1])-Ot.right<$r){nn=90;break}}}else{var nr=pt.length,dr=Math.abs((pt[nr-1].x-pt[0].x)*Me._m)/(nr-1),Zr=Me.ticklabelposition||"",Lr=function(Ca){return Zr.indexOf(Ca)!==-1},Ur=Lr("top"),xr=Lr("left"),on=Lr("right"),Pn=Lr("bottom"),En=Pn||xr||Ur||on,$n=En?(Me.tickwidth||0)+2*W:0,aa=dr<kr*2.5||Me.type==="multicategory"||Me._name==="realaxis";for(cn=0;cn<sn.length-1;cn++)if(t.bBoxIntersect(sn[cn],sn[cn+1],$n)){nn=aa?90:30;break}}nn&&_r(Tr,nn)}}Me._selections&&(Me._selections[st]=Tr);var yr=[Or];Me.automargin&&Ye._redrawFromAutoMarginCount&&wr===90?(nn=90,yr.push(function(){_r(Tr,wr)})):yr.push(Sr),Me._tickAngles&&yr.push(function(){Me._tickAngles[st]=nn===null?o(Yt)?Yt:0:nn});var gn=Me._anchorAxis;gn&&gn.autorange&&Vr(Me)&&!G(Ye,Me._id)&&(Ye._insideTickLabelsAutorange||(Ye._insideTickLabelsAutorange={}),Ye._insideTickLabelsAutorange[gn._name+".autorange"]=gn.autorange,yr.push(function(){Tr.each(function(sn,cn){var $r=Je(this),at=$r.select(".text-math-group");at.empty()&&(Me._vals[cn].bb=f.bBox($r.node()))})}));var Xr=t.syncOrAsync(yr);return Xr&&Xr.then&&we._promises.push(Xr),Xr};function Pt(we,Me,Re){var Ye=Me._id+"divider",Qe=Re.vals,ot=Re.layer.selectAll("path."+Ye).data(Qe,ut);ot.exit().remove(),ot.enter().insert("path",":first-child").classed(Ye,1).classed("crisp",1).call(r.stroke,Me.dividercolor).style("stroke-width",f.crispRound(we,Me.dividerwidth,1)+"px"),ot.attr("transform",Re.transFn).attr("d",Re.path)}J.getPxPosition=function(we,Me){var Re=we._fullLayout._size,Ye=Me._id.charAt(0),Qe=Me.side,ot;if(Me.anchor!=="free"?ot=Me._anchorAxis:Ye==="x"?ot={_offset:Re.t+(1-(Me.position||0))*Re.h,_length:0}:Ye==="y"&&(ot={_offset:Re.l+(Me.position||0)*Re.w,_length:0}),Qe==="top"||Qe==="left")return ot._offset;if(Qe==="bottom"||Qe==="right")return ot._offset+ot._length};function kt(we){var Me=we.title.font.size,Re=(we.title.text.match(a.BR_TAG_ALL)||[]).length;return we.title.hasOwnProperty("standoff")?Re?Me*(Z+Re*te):Me*Z:Re?Me*(Re+1)*te:Me}function Bt(we,Me){var Re=we._fullLayout,Ye=Me._id,Qe=Ye.charAt(0),ot=Me.title.font.size,st;if(Me.title.hasOwnProperty("standoff"))st=Me._depth+Me.title.standoff+kt(Me);else{var pt=Vr(Me);if(Me.type==="multicategory")st=Me._depth;else{var wt=1.5*ot;pt&&(wt=.5*ot,Me.ticks==="outside"&&(wt+=Me.ticklen)),st=10+wt+(Me.linewidth?Me.linewidth-1:0)}pt||(Qe==="x"?st+=Me.side==="top"?ot*(Me.showticklabels?1:0):ot*(Me.showticklabels?1.5:.5):st+=Me.side==="right"?ot*(Me.showticklabels?1:.5):ot*(Me.showticklabels?.5:0))}var Yt=J.getPxPosition(we,Me),wr,Tr,Mr;Qe==="x"?(Tr=Me._offset+Me._length/2,Mr=Me.side==="top"?Yt-st:Yt+st):(Mr=Me._offset+Me._length/2,Tr=Me.side==="right"?Yt+st:Yt-st,wr={rotate:"-90",offset:0});var _r;if(Me.type!=="multicategory"){var Or=Me._selections[Me._id+"tick"];if(_r={selection:Or,side:Me.side},Or&&Or.node()&&Or.node().parentNode){var nn=f.getTranslate(Or.node().parentNode);_r.offsetLeft=nn.x,_r.offsetTop=nn.y}Me.title.hasOwnProperty("standoff")&&(_r.pad=0)}return i.draw(we,Ye+"title",{propContainer:Me,propName:Me._name+".title.text",placeholder:Re._dfltTitle[Qe],avoid:_r,transform:wr,attributes:{x:Tr,y:Mr,"text-anchor":"middle"}})}J.shouldShowZeroLine=function(we,Me,Re){var Ye=t.simpleMap(Me.range,Me.r2l);return Ye[0]*Ye[1]<=0&&Me.zeroline&&(Me.type==="linear"||Me.type==="-")&&!(Me.rangebreaks&&Me.maskBreaks(0)===N)&&(Xt(Me,0)||!Ut(we,Me,Re,Ye)||Jt(we,Me))},J.clipEnds=function(we,Me){return Me.filter(function(Re){return Xt(we,Re.x)})};function Xt(we,Me){var Re=we.l2p(Me);return Re>1&&Re<we._length-1}function Ut(we,Me,Re,Ye){var Qe=Re._mainAxis;if(!Qe)return;var ot=we._fullLayout,st=Me._id.charAt(0),pt=J.counterLetter(Me._id),wt=Me._offset+(Math.abs(Ye[0])<Math.abs(Ye[1])==(st==="x")?0:Me._length);function Yt(Or){if(!Or.showline||!Or.linewidth)return!1;var nn=Math.max((Or.linewidth+Me.zerolinewidth)/2,1);function Sr(Xr){return typeof Xr=="number"&&Math.abs(Xr-wt)<nn}if(Sr(Or._mainLinePosition)||Sr(Or._mainMirrorPosition))return!0;var yr=Or._linepositions||{};for(var gn in yr)if(Sr(yr[gn][0])||Sr(yr[gn][1]))return!0}var wr=ot._plots[Re._mainSubplot];if(!(wr.mainplotinfo||wr).overlays.length)return Yt(Re);for(var Tr=J.list(we,pt),Mr=0;Mr<Tr.length;Mr++){var _r=Tr[Mr];if(_r._mainAxis===Qe&&Yt(_r))return!0}}function Jt(we,Me){for(var Re=we._fullData,Ye=Me._mainSubplot,Qe=Me._id.charAt(0),ot=0;ot<Re.length;ot++){var st=Re[ot];if(st.visible===!0&&st.xaxis+st.yaxis===Ye&&(p.traceIs(st,"bar-like")&&st.orientation==={x:"h",y:"v"}[Qe]||st.fill&&st.fill.charAt(st.fill.length-1)===Qe))return!0}return!1}function Je(we){var Me=l.select(we),Re=Me.select(".text-math-group");return Re.empty()?Me.select("text"):Re}J.allowAutoMargin=function(we){for(var Me=J.list(we,"",!0),Re=0;Re<Me.length;Re++){var Ye=Me[Re];Ye.automargin&&(c.allowAutoMargin(we,gt(Ye)),Ye.mirror&&c.allowAutoMargin(we,Ct(Ye))),p.getComponentMethod("rangeslider","isVisible")(Ye)&&c.allowAutoMargin(we,or(Ye))}};function gt(we){return we._id+".automargin"}function Ct(we){return gt(we)+".mirror"}function or(we){return we._id+".rangeslider"}J.swap=function(we,Me){for(var Re=gr(we,Me),Ye=0;Ye<Re.length;Ye++)mr(we,Re[Ye].x,Re[Ye].y)};function gr(we,Me){var Re=[],Ye,Qe;for(Ye=0;Ye<Me.length;Ye++){var ot=[],st=we._fullData[Me[Ye]].xaxis,pt=we._fullData[Me[Ye]].yaxis;if(!(!st||!pt)){for(Qe=0;Qe<Re.length;Qe++)(Re[Qe].x.indexOf(st)!==-1||Re[Qe].y.indexOf(pt)!==-1)&&ot.push(Qe);if(!ot.length){Re.push({x:[st],y:[pt]});continue}var wt=Re[ot[0]],Yt;if(ot.length>1)for(Qe=1;Qe<ot.length;Qe++)Yt=Re[ot[Qe]],lr(wt.x,Yt.x),lr(wt.y,Yt.y);lr(wt.x,[st]),lr(wt.y,[pt])}}return Re}function lr(we,Me){for(var Re=0;Re<Me.length;Re++)we.indexOf(Me[Re])===-1&&we.push(Me[Re])}function mr(we,Me,Re){var Ye=[],Qe=[],ot=we.layout,st,pt;for(st=0;st<Me.length;st++)Ye.push(J.getFromId(we,Me[st]));for(st=0;st<Re.length;st++)Qe.push(J.getFromId(we,Re[st]));var wt=Object.keys(u),Yt=["anchor","domain","overlaying","position","side","tickangle","editType"],wr=["linear","log"];for(st=0;st<wt.length;st++){var Tr=wt[st],Mr=Ye[0][Tr],_r=Qe[0][Tr],Or=!0,nn=!1,Sr=!1;if(!(Tr.charAt(0)==="_"||typeof Mr=="function"||Yt.indexOf(Tr)!==-1)){for(pt=1;pt<Ye.length&&Or;pt++){var yr=Ye[pt][Tr];Tr==="type"&&wr.indexOf(Mr)!==-1&&wr.indexOf(yr)!==-1&&Mr!==yr?nn=!0:yr!==Mr&&(Or=!1)}for(pt=1;pt<Qe.length&&Or;pt++){var gn=Qe[pt][Tr];Tr==="type"&&wr.indexOf(_r)!==-1&&wr.indexOf(gn)!==-1&&_r!==gn?Sr=!0:Qe[pt][Tr]!==_r&&(Or=!1)}Or&&(nn&&(ot[Ye[0]._name].type="linear"),Sr&&(ot[Qe[0]._name].type="linear"),Fr(ot,Tr,Ye,Qe,we._fullLayout._dfltTitle))}}for(st=0;st<we._fullLayout.annotations.length;st++){var Xr=we._fullLayout.annotations[st];Me.indexOf(Xr.xref)!==-1&&Re.indexOf(Xr.yref)!==-1&&t.swapAttrs(ot.annotations[st],["?"])}}function Fr(we,Me,Re,Ye,Qe){var ot=t.nestedProperty,st=ot(we[Re[0]._name],Me).get(),pt=ot(we[Ye[0]._name],Me).get(),wt;for(Me==="title"&&(st&&st.text===Qe.x&&(st.text=Qe.y),pt&&pt.text===Qe.y&&(pt.text=Qe.x)),wt=0;wt<Re.length;wt++)ot(we,Re[wt]._name+"."+Me).set(pt);for(wt=0;wt<Ye.length;wt++)ot(we,Ye[wt]._name+"."+Me).set(st)}function Rr(we){return we._id==="angularaxis"}function ir(we,Me){for(var Re=Me._rangebreaks.length,Ye=0;Ye<Re;Ye++){var Qe=Me._rangebreaks[Ye];if(we>=Qe.min&&we<Qe.max)return Qe.max}return we}function Vr(we){return(we.ticklabelposition||"").indexOf("inside")!==-1}function qe(we,Me){Vr(we._anchorAxis||{})&&we._hideCounterAxisInsideTickLabels&&we._hideCounterAxisInsideTickLabels(Me)}},{"../../components/color":366,"../../components/drawing":388,"../../components/titles":464,"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"./autorange":553,"./axis_autotype":555,"./axis_ids":558,"./clean_ticks":560,"./layout_attributes":569,"./set_convert":576,"@plotly/d3":58,"fast-isnumeric":190}],555:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../lib"),c=e("../../constants/numerical").BADNUM,p=o.isArrayOrTypedArray,t=o.isDateTime,n=o.cleanNumber,a=Math.round;k.exports=function(y,m,g){var x=y,A=g.noMultiCategory;if(p(x)&&!x.length)return"-";if(!A&&h(x))return"multicategory";if(A&&Array.isArray(x[0])){for(var b=[],S=0;S<x.length;S++)if(p(x[S]))for(var w=0;w<x[S].length;w++)b.push(x[S][w]);x=b}if(f(x,m))return"date";var T=g.autotypenumbers!=="strict";return s(x,T)?"category":r(x,T)?"linear":"-"};function i(d,y){return y?l(d):typeof d=="number"}function r(d,y){for(var m=d.length,g=0;g<m;g++)if(i(d[g],y))return!0;return!1}function f(d,y){for(var m=d.length,g=u(m),x=0,A=0,b={},S=0;S<m;S+=g){var w=a(S),T=d[w],_=String(T);b[_]||(b[_]=1,t(T,y)&&x++,l(T)&&A++)}return x>A*2}function u(d){return Math.max(1,(d-1)/1e3)}function s(d,y){for(var m=d.length,g=u(m),x=0,A=0,b={},S=0;S<m;S+=g){var w=a(S),T=d[w],_=String(T);if(!b[_]){b[_]=1;var v=typeof T;v==="boolean"?A++:(y?n(T)!==c:v==="number")?x++:v==="string"&&A++}}return A>x*2}function h(d){return p(d[0])&&p(d[1])}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],556:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../registry"),c=e("../../lib"),p=e("../array_container_defaults"),t=e("./layout_attributes"),n=e("./tick_value_defaults"),a=e("./tick_mark_defaults"),i=e("./tick_label_defaults"),r=e("./prefix_suffix_defaults"),f=e("./category_order_defaults"),u=e("./line_grid_defaults"),s=e("./set_convert"),h=e("./constants").WEEKDAY_PATTERN,d=e("./constants").HOUR_PATTERN;k.exports=function(A,b,S,w,T){var _=w.letter,v=w.font||{},P=w.splomStash||{},M=S("visible",!w.visibleDflt),E=b._template||{},D=b.type||E.type||"-",N;if(D==="date"){var O=o.getComponentMethod("calendars","handleDefaults");O(A,b,"calendar",w.calendar),w.noTicklabelmode||(N=S("ticklabelmode"))}var I="";(!w.noTicklabelposition||D==="multicategory")&&(I=c.coerce(A,b,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:N==="period"?["outside","inside"]:_==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),w.noTicklabeloverflow||S("ticklabeloverflow",I.indexOf("inside")!==-1?"hide past domain":D==="category"||D==="multicategory"?"allow":"hide past div"),s(b,T);var F=!b.isValidRange(A.range);F&&w.reverseDflt&&(F="reversed");var V=S("autorange",F);V&&(D==="linear"||D==="-")&&S("rangemode"),S("range"),b.cleanRange(),f(A,b,S,w),D!=="category"&&!w.noHover&&S("hoverformat");var U=S("color"),j=U!==t.color.dflt?U:v.color,Z=P.label||T._dfltTitle[_];if(r(A,b,S,D,w),!M)return b;S("title.text",Z),c.coerceFont(S,"title.font",{family:v.family,size:c.bigFont(v.size),color:j}),n(A,b,S,D),i(A,b,S,D,w),a(A,b,S,w),u(A,b,S,{dfltColor:U,bgColor:w.bgColor,showGrid:w.showGrid,attributes:t}),(b.showline||b.ticks)&&S("mirror"),w.automargin&&S("automargin");var te=D==="multicategory";if(!w.noTickson&&(D==="category"||te)&&(b.ticks||b.showgrid)){var re;te&&(re="boundaries");var W=S("tickson",re);W==="boundaries"&&delete b.ticklabelposition}if(te){var J=S("showdividers");J&&(S("dividercolor"),S("dividerwidth"))}if(D==="date")if(p(A,b,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:y}),!b.rangebreaks.length)delete b.rangebreaks;else{for(var le=0;le<b.rangebreaks.length;le++)if(b.rangebreaks[le].pattern===h){b._hasDayOfWeekBreaks=!0;break}if(s(b,T),T._has("scattergl")||T._has("splom"))for(var ue=0;ue<w.data.length;ue++){var se=w.data[ue];(se.type==="scattergl"||se.type==="splom")&&(se.visible=!1,c.warn(se.type+" traces do not work on axes with rangebreaks. Setting trace "+se.index+" to `visible: false`."))}}return b};function y(x,A,b){function S(N,O){return c.coerce(x,A,t.rangebreaks,N,O)}var w=S("enabled");if(w){var T=S("bounds");if(T&&T.length>=2){var _="",v,P;if(T.length===2){for(v=0;v<2;v++)if(P=g(T[v]),P){_=h;break}}var M=S("pattern",_);if(M===h)for(v=0;v<2;v++)P=g(T[v]),P&&(A.bounds[v]=T[v]=P-1);if(M)for(v=0;v<2;v++)switch(P=T[v],M){case h:if(!l(P)){A.enabled=!1;return}if(P=+P,P!==Math.floor(P)||P<0||P>=7){A.enabled=!1;return}A.bounds[v]=T[v]=P;break;case d:if(!l(P)){A.enabled=!1;return}if(P=+P,P<0||P>24){A.enabled=!1;return}A.bounds[v]=T[v]=P;break}if(b.autorange===!1){var E=b.range;if(E[0]<E[1]){if(T[0]<E[0]&&T[1]>E[1]){A.enabled=!1;return}}else if(T[0]>E[0]&&T[1]<E[1]){A.enabled=!1;return}}}else{var D=S("values");if(D&&D.length)S("dvalue");else{A.enabled=!1;return}}}}var m={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function g(x){if(typeof x=="string")return m[x.substr(0,3).toLowerCase()]}},{"../../lib":503,"../../registry":638,"../array_container_defaults":549,"./category_order_defaults":559,"./constants":561,"./layout_attributes":569,"./line_grid_defaults":571,"./prefix_suffix_defaults":573,"./set_convert":576,"./tick_label_defaults":578,"./tick_mark_defaults":579,"./tick_value_defaults":580,"fast-isnumeric":190}],557:[function(e,k,z){var l=e("../../constants/docs"),o=l.FORMAT_LINK,c=l.DATE_FORMAT_LINK;function p(a,i){return{valType:"string",dflt:"",editType:"none",description:(i?t:n)("hover text",a)+["By default the values are formatted using "+(i?"generic number format":"`"+a+"axis.hoverformat`")+"."].join(" ")}}function t(a,i){return["Sets the "+a+" formatting rule"+(i?"for `"+i+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+o+"."].join(" ")}function n(a,i){return t(a,i)+[" And for dates see: "+c+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}k.exports={axisHoverFormat:p,descriptionOnlyNumbers:t,descriptionWithDates:n}},{"../../constants/docs":474}],558:[function(e,k,z){var l=e("../../registry"),o=e("./constants");z.id2name=function(t){if(!(typeof t!="string"||!t.match(o.AX_ID_PATTERN))){var n=t.split(" ")[0].substr(1);return n==="1"&&(n=""),t.charAt(0)+"axis"+n}},z.name2id=function(t){if(!!t.match(o.AX_NAME_PATTERN)){var n=t.substr(5);return n==="1"&&(n=""),t.charAt(0)+n}},z.cleanId=function(t,n,a){var i=/( domain)$/.test(t);if(!(typeof t!="string"||!t.match(o.AX_ID_PATTERN))&&!(n&&t.charAt(0)!==n)&&!(i&&!a)){var r=t.split(" ")[0].substr(1).replace(/^0+/,"");return r==="1"&&(r=""),t.charAt(0)+r+(i&&a?" domain":"")}},z.list=function(p,t,n){var a=p._fullLayout;if(!a)return[];var i=z.listIds(p,t),r=new Array(i.length),f;for(f=0;f<i.length;f++){var u=i[f];r[f]=a[u.charAt(0)+"axis"+u.substr(1)]}if(!n){var s=a._subplots.gl3d||[];for(f=0;f<s.length;f++){var h=a[s[f]];t?r.push(h[t+"axis"]):r.push(h.xaxis,h.yaxis,h.zaxis)}}return r},z.listIds=function(p,t){var n=p._fullLayout;if(!n)return[];var a=n._subplots;return t?a[t+"axis"]:a.xaxis.concat(a.yaxis)},z.getFromId=function(p,t,n){var a=p._fullLayout;return t=t===void 0||typeof t!="string"?t:t.replace(" domain",""),n==="x"?t=t.replace(/y[0-9]*/,""):n==="y"&&(t=t.replace(/x[0-9]*/,"")),a[z.id2name(t)]},z.getFromTrace=function(p,t,n){var a=p._fullLayout,i=null;if(l.traceIs(t,"gl3d")){var r=t.scene;r.substr(0,5)==="scene"&&(i=a[r][n+"axis"])}else i=z.getFromId(p,t[n+"axis"]||n);return i},z.idSort=function(p,t){var n=p.charAt(0),a=t.charAt(0);return n!==a?n>a?1:-1:+(p.substr(1)||1)-+(t.substr(1)||1)},z.ref2id=function(p){return/^[xyz]/.test(p)?p.split(" ")[0]:!1};function c(p,t){if(t&&t.length){for(var n=0;n<t.length;n++)if(t[n][p])return!0}return!1}z.isLinked=function(p,t){return c(t,p._axisMatchGroups)||c(t,p._axisConstraintGroups)}},{"../../registry":638,"./constants":561}],559:[function(e,k,z){function l(o,c){var p=c.dataAttr||o._id.charAt(0),t={},n,a,i;if(c.axData)n=c.axData;else for(n=[],a=0;a<c.data.length;a++){var r=c.data[a];r[p+"axis"]===o._id&&n.push(r)}for(a=0;a<n.length;a++){var f=n[a][p];for(i=0;i<f.length;i++){var u=f[i];u!=null&&(t[u]=1)}}return Object.keys(t)}k.exports=function(c,p,t,n){if(p.type==="category"){var a=c.categoryarray,i=Array.isArray(a)&&a.length>0,r;i&&(r="array");var f=t("categoryorder",r),u;f==="array"&&(u=t("categoryarray")),!i&&f==="array"&&(f=p.categoryorder="trace"),f==="trace"?p._initialCategories=[]:f==="array"?p._initialCategories=u.slice():(u=l(p,n).sort(),f==="category ascending"?p._initialCategories=u:f==="category descending"&&(p._initialCategories=u.reverse()))}}},{}],560:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../lib"),c=e("../../constants/numerical"),p=c.ONEDAY,t=c.ONEWEEK;z.dtick=function(n,a){var i=a==="log",r=a==="date",f=a==="category",u=r?p:1;if(!n)return u;if(l(n))return n=Number(n),n<=0?u:f?Math.max(1,Math.round(n)):r?Math.max(.1,n):n;if(typeof n!="string"||!(r||i))return u;var s=n.charAt(0),h=n.substr(1);return h=l(h)?Number(h):0,h<=0||!(r&&s==="M"&&h===Math.round(h)||i&&s==="L"||i&&s==="D"&&(h===1||h===2))?u:n},z.tick0=function(n,a,i,r){if(a==="date")return o.cleanDate(n,o.dateTick0(i,r%t==0?1:0));if(!(r==="D1"||r==="D2"))return l(n)?Number(n):0}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],561:[function(e,k,z){var l=e("../../lib/regex").counter;k.exports={idRegex:{x:l("x","( domain)?"),y:l("y","( domain)?")},attrRegex:l("[xy]axis"),xAxisMatch:l("xaxis"),yAxisMatch:l("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":520}],562:[function(e,k,z){var l=e("../../lib"),o=e("./autorange"),c=e("./axis_ids").id2name,p=e("./layout_attributes"),t=e("./scale_zoom"),n=e("./set_convert"),a=e("../../constants/numerical").ALMOST_EQUAL,i=e("../../constants/alignment").FROM_BL;z.handleDefaults=function(m,g,x){var A=x.axIds,b=x.axHasImage,S=g._axisConstraintGroups=[],w=g._axisMatchGroups=[],T,_,v,P,M,E,D,N;for(T=0;T<A.length;T++)P=c(A[T]),M=m[P],E=g[P],r(M,E,{axIds:A,layoutOut:g,hasImage:b[P]});function O(W,J){for(T=0;T<W.length;T++){_=W[T];for(v in _)g[c(v)][J]=_}}for(O(w,"_matchGroup"),T=0;T<S.length;T++){_=S[T];for(v in _)if(E=g[c(v)],E.fixedrange){for(var I in _){var F=c(I);(m[F]||{}).fixedrange===!1&&l.warn("fixedrange was specified as false for axis "+F+" but was overridden because another axis in its constraint group has fixedrange true"),g[F].fixedrange=!0}break}}for(T=0;T<S.length;){_=S[T];for(v in _){E=g[c(v)],E._matchGroup&&Object.keys(E._matchGroup).length===Object.keys(_).length&&(S.splice(T,1),T--);break}T++}O(S,"_constraintGroup");var V=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],U=!1,j=!1;function Z(){N=E[D],D==="rangebreaks"&&(j=E._hasDayOfWeekBreaks)}for(T=0;T<w.length;T++){_=w[T];for(var te=0;te<V.length;te++){D=V[te],N=null;var re;for(v in _)if(P=c(v),M=m[P],E=g[P],D in E){if(!E.matches&&(re=E,D in M)){Z();break}N===null&&D in M&&Z()}if(D==="range"&&N&&(U=!0),D==="autorange"&&N===null&&U&&(N=!1),N===null&&D in re&&(N=re[D]),N!==null)for(v in _)E=g[c(v)],E[D]=D==="range"?N.slice():N,D==="rangebreaks"&&(E._hasDayOfWeekBreaks=j,n(E,g))}}};function r(m,g,x){var A=x.axIds,b=x.layoutOut,S=x.hasImage,w=b._axisConstraintGroups,T=b._axisMatchGroups,_=g._id,v=_.charAt(0),P=((b._splomAxes||{})[v]||{})[_]||{},M=g._id,E=M.charAt(0)==="x";g._matchGroup=null,g._constraintGroup=null;function D(se,G){return l.coerce(m,g,p,se,G)}D("constrain",S?"domain":"range"),l.coerce(m,g,{constraintoward:{valType:"enumerated",values:E?["left","center","right"]:["bottom","middle","top"],dflt:E?"center":"middle"}},"constraintoward");var N=g.type,O,I,F=[];for(O=0;O<A.length;O++)if(I=A[O],I!==M){var V=b[c(I)];V.type===N&&F.push(I)}var U=u(w,M);if(U){var j=[];for(O=0;O<F.length;O++)I=F[O],U[I]||j.push(I);F=j}var Z=F.length,te,re;Z&&(m.matches||P.matches)&&(te=l.coerce(m,g,{matches:{valType:"enumerated",values:F,dflt:F.indexOf(P.matches)!==-1?P.matches:void 0}},"matches"));var W=S&&!E?g.anchor:void 0;if(Z&&!te&&(m.scaleanchor||W)&&(re=l.coerce(m,g,{scaleanchor:{valType:"enumerated",values:F}},"scaleanchor",W)),te){g._matchGroup=s(T,M,te,1);var J=b[c(te)],le=f(b,g)/f(b,J);E!==(te.charAt(0)==="x")&&(le=(E?"x":"y")+le),s(w,M,te,le)}else m.matches&&A.indexOf(m.matches)!==-1&&l.warn("ignored "+g._name+'.matches: "'+m.matches+'" to avoid an infinite loop');if(re){var ue=D("scaleratio");ue||(ue=g.scaleratio=1),s(w,M,re,ue)}else m.scaleanchor&&A.indexOf(m.scaleanchor)!==-1&&l.warn("ignored "+g._name+'.scaleanchor: "'+m.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function f(m,g){var x=g.domain;return x||(x=m[c(g.overlaying)].domain),x[1]-x[0]}function u(m,g){for(var x=0;x<m.length;x++)if(m[x][g])return m[x];return null}function s(m,g,x,A){var b,S,w,T,_,v=u(m,g);v===null?(v={},v[g]=1,_=m.length,m.push(v)):_=m.indexOf(v);var P=Object.keys(v);for(b=0;b<m.length;b++)if(w=m[b],b!==_&&w[x]){var M=w[x];for(S=0;S<P.length;S++)T=P[S],w[T]=h(M,h(A,v[T]));m.splice(_,1);return}if(A!==1)for(S=0;S<P.length;S++){var E=P[S];v[E]=h(A,v[E])}v[x]=1}function h(m,g){var x="",A="",b,S;typeof m=="string"&&(x=m.match(/^[xy]*/)[0],b=x.length,m=+m.substr(b)),typeof g=="string"&&(A=g.match(/^[xy]*/)[0],S=A.length,g=+g.substr(S));var w=m*g;return!b&&!S?w:!b||!S||x.charAt(0)===A.charAt(0)?x+A+m*g:b===S?w:(b>S?x.substr(S):A.substr(b))+w}function d(m,g){for(var x=g._size,A=x.h/x.w,b={},S=Object.keys(m),w=0;w<S.length;w++){var T=S[w],_=m[T];if(typeof _=="string"){var v=_.match(/^[xy]*/)[0],P=v.length;_=+_.substr(P);for(var M=v.charAt(0)==="y"?A:1/A,E=0;E<P;E++)_*=M}b[T]=_}return b}z.enforce=function(g){var x=g._fullLayout,A=x._axisConstraintGroups||[],b,S,w,T,_,v,P,M;for(b=0;b<A.length;b++){w=d(A[b],x);var E=Object.keys(w),D=1/0,N=0,O=1/0,I={},F={},V=!1;for(S=0;S<E.length;S++)T=E[S],F[T]=_=x[c(T)],_._inputDomain?_.domain=_._inputDomain.slice():_._inputDomain=_.domain.slice(),_._inputRange||(_._inputRange=_.range.slice()),_.setScale(),I[T]=v=Math.abs(_._m)/w[T],D=Math.min(D,v),(_.constrain==="domain"||!_._constraintShrinkable)&&(O=Math.min(O,v)),delete _._constraintShrinkable,N=Math.max(N,v),_.constrain==="domain"&&(V=!0);if(!(D>a*N&&!V)){for(S=0;S<E.length;S++)if(T=E[S],v=I[T],_=F[T],P=_.constrain,v!==O||P==="domain")if(M=v/O,P==="range")t(_,M);else{var U=_._inputDomain,j=(_.domain[1]-_.domain[0])/(U[1]-U[0]),Z=(_.r2l(_.range[1])-_.r2l(_.range[0]))/(_.r2l(_._inputRange[1])-_.r2l(_._inputRange[0]));if(M/=j,M*Z<1){_.domain=_._input.domain=U.slice(),t(_,M);continue}if(Z<1&&(_.range=_._input.range=_._inputRange.slice(),M*=Z),_.autorange){var te=_.r2l(_.range[0]),re=_.r2l(_.range[1]),W=(te+re)/2,J=W,le=W,ue=Math.abs(re-W),se=W-ue*M*1.0001,G=W+ue*M*1.0001,Y=o.makePadFn(x,_,0),ee=o.makePadFn(x,_,1);y(_,M);var $=Math.abs(_._m),K=o.concatExtremes(g,_),Q=K.min,ae=K.max,ie,oe;for(oe=0;oe<Q.length;oe++)ie=Q[oe].val-Y(Q[oe])/$,ie>se&&ie<J&&(J=ie);for(oe=0;oe<ae.length;oe++)ie=ae[oe].val+ee(ae[oe])/$,ie<G&&ie>le&&(le=ie);var fe=(le-J)/(2*ue);M/=fe,J=_.l2r(J),le=_.l2r(le),_.range=_._input.range=te<re?[J,le]:[le,J]}y(_,M)}}}},z.getAxisGroup=function(g,x){for(var A=g._axisMatchGroups,b=0;b<A.length;b++){var S=A[b];if(S[x])return"g"+b}return x},z.clean=function(g,x){if(x._inputDomain){for(var A=!1,b=x._id,S=g._fullLayout._axisConstraintGroups,w=0;w<S.length;w++)if(S[w][b]){A=!0;break}(!A||x.constrain!=="domain")&&(x._input.domain=x.domain=x._inputDomain,delete x._inputDomain)}};function y(m,g){var x=m._inputDomain,A=i[m.constraintoward],b=x[0]+(x[1]-x[0])*A;m.domain=m._input.domain=[b+(x[0]-b)/g,b+(x[1]-b)/g],m.setScale()}},{"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"./autorange":553,"./axis_ids":558,"./layout_attributes":569,"./scale_zoom":574,"./set_convert":576}],563:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../lib"),c=o.numberFormat,p=e("tinycolor2"),t=e("has-passive-events"),n=e("../../registry"),a=o.strTranslate,i=e("../../lib/svg_text_utils"),r=e("../../components/color"),f=e("../../components/drawing"),u=e("../../components/fx"),s=e("./axes"),h=e("../../lib/setcursor"),d=e("../../components/dragelement"),y=e("../../components/dragelement/helpers"),m=y.selectingOrDrawing,g=y.freeMode,x=e("../../constants/alignment").FROM_TL,A=e("../../lib/clear_gl_canvases"),b=e("../../plot_api/subroutines").redrawReglTraces,S=e("../plots"),w=e("./axis_ids").getFromId,T=e("./select").prepSelect,_=e("./select").clearSelect,v=e("./select").selectOnClick,P=e("./scale_zoom"),M=e("./constants"),E=M.MINDRAG,D=M.MINZOOM,N=!0;function O(ie,oe,fe,ye,ce,me,xe,ke){var Ae=ie._fullLayout._zoomlayer,Oe=xe+ke==="nsew",He=(xe+ke).length===1,Ge,_e,Ie,We,et,Ne,De,Ve,dt,Dt,Gt,Mt,zt,Nt,Et,At,it,ht,$e,Ee,Xe,rt,ut;function Pt(){if(Ge=oe.xaxis,_e=oe.yaxis,dt=Ge._length,Dt=_e._length,De=Ge._offset,Ve=_e._offset,Ie={},Ie[Ge._id]=Ge,We={},We[_e._id]=_e,xe&&ke)for(var Sr=oe.overlays,yr=0;yr<Sr.length;yr++){var gn=Sr[yr].xaxis;Ie[gn._id]=gn;var Xr=Sr[yr].yaxis;We[Xr._id]=Xr}et=ae(Ie),Ne=ae(We),zt=V(et,ke),Nt=V(Ne,xe),Et=!Nt&&!zt,Mt=K(ie,ie._fullLayout._axisMatchGroups,Ie,We),Gt=K(ie,ie._fullLayout._axisConstraintGroups,Ie,We,Mt);var kr=Gt.isSubplotConstrained||Mt.isSubplotConstrained;At=ke||kr,it=xe||kr;var sn=ie._fullLayout;ht=sn._has("scattergl"),$e=sn._has("splom"),Ee=sn._has("svg")}Pt();var kt=re(Nt+zt,ie._fullLayout.dragmode,Oe),Bt=F(oe,xe+ke+"drag",kt,fe,ye,ce,me);if(Et&&!Oe)return Bt.onmousedown=null,Bt.style.pointerEvents="none",Bt;var Xt={element:Bt,gd:ie,plotinfo:oe};Xt.prepFn=function(Sr,yr,gn){var Xr=Xt.dragmode,kr=ie._fullLayout.dragmode;kr!==Xr&&(Xt.dragmode=kr),Pt(),rt=ie._fullLayout._invScaleX,ut=ie._fullLayout._invScaleY,Et||(Oe?Sr.shiftKey?kr==="pan"?kr="zoom":m(kr)||(kr="pan"):Sr.ctrlKey&&(kr="pan"):kr="pan"),g(kr)?Xt.minDrag=1:Xt.minDrag=void 0,m(kr)?(Xt.xaxes=et,Xt.yaxes=Ne,T(Sr,yr,gn,Xt,kr)):(Xt.clickFn=Jt,m(Xr)&&Ut(),Et||(kr==="zoom"?(Xt.moveFn=qe,Xt.doneFn=Me,Xt.minDrag=1,Vr(Sr,yr,gn)):kr==="pan"&&(Xt.moveFn=pt,Xt.doneFn=Tr))),ie._fullLayout._redrag=function(){var sn=ie._dragdata;if(sn&&sn.element===Bt){var cn=ie._fullLayout.dragmode;m(cn)||(Pt(),Mr([0,0,dt,Dt]),Xt.moveFn(sn.dx,sn.dy))}}};function Ut(){Xt.plotinfo.selection=!1,_(ie)}function Jt(Sr,yr){var gn=Xt.gd;if(gn._fullLayout._activeShapeIndex>=0){gn._fullLayout._deactivateShape(gn);return}var Xr=gn._fullLayout.clickmode;if(se(gn),Sr===2&&!He&&wr(),Oe)Xr.indexOf("select")>-1&&v(yr,gn,et,Ne,oe.id,Xt),Xr.indexOf("event")>-1&&u.click(gn,yr,oe.id);else if(Sr===1&&He){var kr=xe?_e:Ge,sn=xe==="s"||ke==="w"?0:1,cn=kr._name+".range["+sn+"]",$r=U(kr,sn),at="left",Ot="middle";if(kr.fixedrange)return;xe?(Ot=xe==="n"?"top":"bottom",kr.side==="right"&&(at="right")):ke==="e"&&(at="right"),gn._context.showAxisRangeEntryBoxes&&l.select(Bt).call(i.makeEditable,{gd:gn,immediate:!0,background:gn._fullLayout.paper_bgcolor,text:String($r),fill:kr.tickfont?kr.tickfont.color:"#444",horizontalAlign:at,verticalAlign:Ot}).on("edit",function(nr){var dr=kr.d2r(nr);dr!==void 0&&n.call("_guiRelayout",gn,cn,dr)})}}d.init(Xt);var Je,gt,Ct,or,gr,lr,mr,Fr,Rr,ir;function Vr(Sr,yr,gn){var Xr=Bt.getBoundingClientRect();Je=yr-Xr.left,gt=gn-Xr.top,ie._fullLayout._calcInverseTransform(ie);var kr=o.apply3DTransform(ie._fullLayout._invTransform)(Je,gt);Je=kr[0],gt=kr[1],Ct={l:Je,r:Je,w:0,t:gt,b:gt,h:0},or=ie._hmpixcount?ie._hmlumcount/ie._hmpixcount:p(ie._fullLayout.plot_bgcolor).getLuminance(),gr="M0,0H"+dt+"V"+Dt+"H0V0",lr=!1,mr="xy",ir=!1,Fr=W(Ae,or,De,Ve,gr),Rr=J(Ae,De,Ve)}function qe(Sr,yr){if(ie._transitioningWithDuration)return!1;var gn=Math.max(0,Math.min(dt,rt*Sr+Je)),Xr=Math.max(0,Math.min(Dt,ut*yr+gt)),kr=Math.abs(gn-Je),sn=Math.abs(Xr-gt);Ct.l=Math.min(Je,gn),Ct.r=Math.max(Je,gn),Ct.t=Math.min(gt,Xr),Ct.b=Math.max(gt,Xr);function cn(){mr="",Ct.r=Ct.l,Ct.t=Ct.b,Rr.attr("d","M0,0Z")}if(Gt.isSubplotConstrained)kr>D||sn>D?(mr="xy",kr/dt>sn/Dt?(sn=kr*Dt/dt,gt>Xr?Ct.t=gt-sn:Ct.b=gt+sn):(kr=sn*dt/Dt,Je>gn?Ct.l=Je-kr:Ct.r=Je+kr),Rr.attr("d",$(Ct))):cn();else if(Mt.isSubplotConstrained)if(kr>D||sn>D){mr="xy";var $r=Math.min(Ct.l/dt,(Dt-Ct.b)/Dt),at=Math.max(Ct.r/dt,(Dt-Ct.t)/Dt);Ct.l=$r*dt,Ct.r=at*dt,Ct.b=(1-$r)*Dt,Ct.t=(1-at)*Dt,Rr.attr("d",$(Ct))}else cn();else!Nt||sn<Math.min(Math.max(kr*.6,E),D)?kr<E||!zt?cn():(Ct.t=0,Ct.b=Dt,mr="x",Rr.attr("d",Y(Ct,gt))):!zt||kr<Math.min(sn*.6,D)?(Ct.l=0,Ct.r=dt,mr="y",Rr.attr("d",ee(Ct,Je))):(mr="xy",Rr.attr("d",$(Ct)));Ct.w=Ct.r-Ct.l,Ct.h=Ct.b-Ct.t,mr&&(ir=!0),ie._dragged=ir,le(Fr,Rr,Ct,gr,lr,or),we(),ie.emit("plotly_relayouting",Xe),lr=!0}function we(){Xe={},(mr==="xy"||mr==="x")&&(j(et,Ct.l/dt,Ct.r/dt,Xe,Gt.xaxes),wt("x",Xe)),(mr==="xy"||mr==="y")&&(j(Ne,(Dt-Ct.b)/Dt,(Dt-Ct.t)/Dt,Xe,Gt.yaxes),wt("y",Xe))}function Me(){we(),se(ie),Tr(),G(ie)}var Re=[0,0,dt,Dt],Ye=null,Qe=M.REDRAWDELAY,ot=oe.mainplot?ie._fullLayout._plots[oe.mainplot]:oe;function st(Sr){if(!ie._context._scrollZoom.cartesian&&!ie._fullLayout._enablescrollzoom)return;if(Ut(),ie._transitioningWithDuration){Sr.preventDefault(),Sr.stopPropagation();return}Pt(),clearTimeout(Ye);var yr=-Sr.deltaY;if(isFinite(yr)||(yr=Sr.wheelDelta/10),!isFinite(yr)){o.log("Did not find wheel motion attributes: ",Sr);return}var gn=Math.exp(-Math.min(Math.max(yr,-20),20)/200),Xr=ot.draglayer.select(".nsewdrag").node().getBoundingClientRect(),kr=(Sr.clientX-Xr.left)/Xr.width,sn=(Xr.bottom-Sr.clientY)/Xr.height,cn;function $r(at,Ot,nr){if(at.fixedrange)return;var dr=o.simpleMap(at.range,at.r2l),Zr=dr[0]+(dr[1]-dr[0])*Ot;function Lr(Ur){return at.l2r(Zr+(Ur-Zr)*nr)}at.range=dr.map(Lr)}if(At){for(ke||(kr=.5),cn=0;cn<et.length;cn++)$r(et[cn],kr,gn);wt("x"),Re[2]*=gn,Re[0]+=Re[2]*kr*(1/gn-1)}if(it){for(xe||(sn=.5),cn=0;cn<Ne.length;cn++)$r(Ne[cn],sn,gn);wt("y"),Re[3]*=gn,Re[1]+=Re[3]*(1-sn)*(1/gn-1)}Mr(Re),Yt(),ie.emit("plotly_relayouting",Xe),Ye=setTimeout(function(){!ie._fullLayout||(Re=[0,0,dt,Dt],Tr())},Qe),Sr.preventDefault()}xe.length*ke.length!=1&&Q(Bt,st);function pt(Sr,yr){if(Sr=Sr*rt,yr=yr*ut,ie._transitioningWithDuration)return;if(ie._fullLayout._replotting=!0,zt==="ew"||Nt==="ns"){var gn=zt?-Sr:0,Xr=Nt?-yr:0;if(Mt.isSubplotConstrained){if(zt&&Nt){var kr=(Sr/dt-yr/Dt)/2;Sr=kr*dt,yr=-kr*Dt,gn=-Sr,Xr=-yr}Nt?gn=-Xr*dt/Dt:Xr=-gn*Dt/dt}zt&&(Z(et,Sr),wt("x")),Nt&&(Z(Ne,yr),wt("y")),Mr([gn,Xr,dt,Dt]),Yt(),ie.emit("plotly_relayouting",Xe);return}function sn(Lr,Ur,xr){for(var on=1-Ur,Pn,En,$n=0;$n<Lr.length;$n++){var aa=Lr[$n];if(!aa.fixedrange){Pn=aa,En=aa._rl[on]+(aa._rl[Ur]-aa._rl[on])/te(xr/aa._length);var Ca=aa.l2r(En);Ca!==!1&&Ca!==void 0&&(aa.range[Ur]=Ca)}}return Pn._length*(Pn._rl[Ur]-En)/(Pn._rl[Ur]-Pn._rl[on])}var cn=zt==="w"==(Nt==="n")?1:-1;if(zt&&Nt&&(Gt.isSubplotConstrained||Mt.isSubplotConstrained)){var $r=(Sr/dt+cn*yr/Dt)/2;Sr=$r*dt,yr=cn*$r*Dt}var at,Ot;if(zt==="w"?Sr=sn(et,0,Sr):zt==="e"?Sr=sn(et,1,-Sr):zt||(Sr=0),Nt==="n"?yr=sn(Ne,1,yr):Nt==="s"?yr=sn(Ne,0,-yr):Nt||(yr=0),at=zt==="w"?Sr:0,Ot=Nt==="n"?yr:0,Gt.isSubplotConstrained&&!Mt.isSubplotConstrained||Mt.isSubplotConstrained&&zt&&Nt&&cn>0){var nr;if(Mt.isSubplotConstrained||!zt&&Nt.length===1){for(nr=0;nr<et.length;nr++)et[nr].range=et[nr]._r.slice(),P(et[nr],1-yr/Dt);Sr=yr*dt/Dt,at=Sr/2}if(Mt.isSubplotConstrained||!Nt&&zt.length===1){for(nr=0;nr<Ne.length;nr++)Ne[nr].range=Ne[nr]._r.slice(),P(Ne[nr],1-Sr/dt);yr=Sr*Dt/dt,Ot=yr/2}}(!Mt.isSubplotConstrained||!Nt)&&wt("x"),(!Mt.isSubplotConstrained||!zt)&&wt("y");var dr=dt-Sr,Zr=Dt-yr;Mt.isSubplotConstrained&&!(zt&&Nt)&&(zt?(Ot=at?0:Sr*Dt/dt,Zr=dr*Dt/dt):(at=Ot?0:yr*dt/Dt,dr=Zr*dt/Dt)),Mr([at,Ot,dr,Zr]),Yt(),ie.emit("plotly_relayouting",Xe)}function wt(Sr,yr){for(var gn=Mt.isSubplotConstrained?{x:Ne,y:et}[Sr]:Mt[Sr+"axes"],Xr=Mt.isSubplotConstrained?{x:et,y:Ne}[Sr]:[],kr=0;kr<gn.length;kr++){var sn=gn[kr],cn=sn._id,$r=Mt.xLinks[cn]||Mt.yLinks[cn],at=Xr[0]||Ie[$r]||We[$r];at&&(yr?(yr[sn._name+".range[0]"]=yr[at._name+".range[0]"],yr[sn._name+".range[1]"]=yr[at._name+".range[1]"]):sn.range=at.range.slice())}}function Yt(){var Sr=[],yr;function gn(sn){for(yr=0;yr<sn.length;yr++)sn[yr].fixedrange||Sr.push(sn[yr]._id)}for(At&&(gn(et),gn(Gt.xaxes),gn(Mt.xaxes)),it&&(gn(Ne),gn(Gt.yaxes),gn(Mt.yaxes)),Xe={},yr=0;yr<Sr.length;yr++){var Xr=Sr[yr],kr=w(ie,Xr);s.drawOne(ie,kr,{skipTitle:!0}),Xe[kr._name+".range[0]"]=kr.range[0],Xe[kr._name+".range[1]"]=kr.range[1]}s.redrawComponents(ie,Sr)}function wr(){if(!ie._transitioningWithDuration){var Sr=ie._context.doubleClick,yr=[];zt&&(yr=yr.concat(et)),Nt&&(yr=yr.concat(Ne)),Mt.xaxes&&(yr=yr.concat(Mt.xaxes)),Mt.yaxes&&(yr=yr.concat(Mt.yaxes));var gn={},Xr,kr,sn;if(Sr==="reset+autosize"){for(Sr="autosize",kr=0;kr<yr.length;kr++)if(Xr=yr[kr],Xr._rangeInitial&&(Xr.range[0]!==Xr._rangeInitial[0]||Xr.range[1]!==Xr._rangeInitial[1])||!Xr._rangeInitial&&!Xr.autorange){Sr="reset";break}}if(Sr==="autosize")for(kr=0;kr<yr.length;kr++)Xr=yr[kr],Xr.fixedrange||(gn[Xr._name+".autorange"]=!0);else if(Sr==="reset")for((zt||Gt.isSubplotConstrained)&&(yr=yr.concat(Gt.xaxes)),Nt&&!Gt.isSubplotConstrained&&(yr=yr.concat(Gt.yaxes)),Gt.isSubplotConstrained&&(zt?Nt||(yr=yr.concat(Ne)):yr=yr.concat(et)),kr=0;kr<yr.length;kr++)Xr=yr[kr],Xr.fixedrange||(Xr._rangeInitial?(sn=Xr._rangeInitial,gn[Xr._name+".range[0]"]=sn[0],gn[Xr._name+".range[1]"]=sn[1]):gn[Xr._name+".autorange"]=!0);ie.emit("plotly_doubleclick",null),n.call("_guiRelayout",ie,gn)}}function Tr(){Mr([0,0,dt,Dt]),o.syncOrAsync([S.previousPromises,function(){ie._fullLayout._replotting=!1,n.call("_guiRelayout",ie,Xe)}],ie)}function Mr(Sr){var yr=ie._fullLayout,gn=yr._plots,Xr=yr._subplots.cartesian,kr,sn,cn,$r;if($e&&n.subplotsRegistry.splom.drag(ie),ht){for(kr=0;kr<Xr.length;kr++)if(sn=gn[Xr[kr]],cn=sn.xaxis,$r=sn.yaxis,sn._scene){var at=o.simpleMap(cn.range,cn.r2l),Ot=o.simpleMap($r.range,$r.r2l);sn._scene.update({range:[at[0],Ot[0],at[1],Ot[1]]})}}if(($e||ht)&&(A(ie),b(ie)),Ee){var nr=Sr[2]/Ge._length,dr=Sr[3]/_e._length;for(kr=0;kr<Xr.length;kr++){sn=gn[Xr[kr]],cn=sn.xaxis,$r=sn.yaxis;var Zr=(At||Mt.isSubplotConstrained)&&!cn.fixedrange&&Ie[cn._id],Lr=(it||Mt.isSubplotConstrained)&&!$r.fixedrange&&We[$r._id],Ur,xr,on,Pn;if(Zr?(Ur=nr,on=ke||Mt.isSubplotConstrained?Sr[0]:nn(cn,Ur)):Mt.xaHash[cn._id]?(Ur=nr,on=Sr[0]*cn._length/Ge._length):Mt.yaHash[cn._id]?(Ur=dr,on=Nt==="ns"?-Sr[1]*cn._length/_e._length:nn(cn,Ur,{n:"top",s:"bottom"}[Nt])):(Ur=_r(cn,nr,dr),on=Or(cn,Ur)),Lr?(xr=dr,Pn=xe||Mt.isSubplotConstrained?Sr[1]:nn($r,xr)):Mt.yaHash[$r._id]?(xr=dr,Pn=Sr[1]*$r._length/_e._length):Mt.xaHash[$r._id]?(xr=nr,Pn=zt==="ew"?-Sr[0]*$r._length/Ge._length:nn($r,xr,{e:"right",w:"left"}[zt])):(xr=_r($r,nr,dr),Pn=Or($r,xr)),!(!Ur&&!xr)){Ur||(Ur=1),xr||(xr=1);var En=cn._offset-on/Ur,$n=$r._offset-Pn/xr;sn.clipRect.call(f.setTranslate,on,Pn).call(f.setScale,Ur,xr),sn.plot.call(f.setTranslate,En,$n).call(f.setScale,1/Ur,1/xr),(Ur!==sn.xScaleFactor||xr!==sn.yScaleFactor)&&(f.setPointGroupScale(sn.zoomScalePts,Ur,xr),f.setTextPointsScale(sn.zoomScaleTxt,Ur,xr)),f.hideOutsideRangePoints(sn.clipOnAxisFalseTraces,sn),sn.xScaleFactor=Ur,sn.yScaleFactor=xr}}}}function _r(Sr,yr,gn){return Sr.fixedrange?0:At&&Gt.xaHash[Sr._id]?yr:it&&(Gt.isSubplotConstrained?Gt.xaHash:Gt.yaHash)[Sr._id]?gn:0}function Or(Sr,yr){return yr?(Sr.range=Sr._r.slice(),P(Sr,yr),nn(Sr,yr)):0}function nn(Sr,yr,gn){return Sr._length*(1-yr)*x[gn||Sr.constraintoward||"middle"]}return Bt}function I(ie,oe,fe,ye){var ce=o.ensureSingle(ie.draglayer,oe,fe,function(me){me.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ie.id)});return ce.call(h,ye),ce.node()}function F(ie,oe,fe,ye,ce,me,xe){var ke=I(ie,"rect",oe,fe);return l.select(ke).call(f.setRect,ye,ce,me,xe),ke}function V(ie,oe){for(var fe=0;fe<ie.length;fe++)if(!ie[fe].fixedrange)return oe;return""}function U(ie,oe){var fe=ie.range[oe],ye=Math.abs(fe-ie.range[1-oe]),ce;return ie.type==="date"?fe:ie.type==="log"?(ce=Math.ceil(Math.max(0,-Math.log(ye)/Math.LN10))+3,c("."+ce+"g")(Math.pow(10,fe))):(ce=Math.floor(Math.log(Math.abs(fe))/Math.LN10)-Math.floor(Math.log(ye)/Math.LN10)+4,c("."+String(ce)+"g")(fe))}function j(ie,oe,fe,ye,ce){for(var me=0;me<ie.length;me++){var xe=ie[me];if(!xe.fixedrange)if(xe.rangebreaks){var ke=xe._id.charAt(0)==="y",Ae=ke?1-oe:oe,Oe=ke?1-fe:fe;ye[xe._name+".range[0]"]=xe.l2r(xe.p2l(Ae*xe._length)),ye[xe._name+".range[1]"]=xe.l2r(xe.p2l(Oe*xe._length))}else{var He=xe._rl[0],Ge=xe._rl[1]-He;ye[xe._name+".range[0]"]=xe.l2r(He+Ge*oe),ye[xe._name+".range[1]"]=xe.l2r(He+Ge*fe)}}if(ce&&ce.length){var _e=(oe+(1-fe))/2;j(ce,_e,1-_e,ye,[])}}function Z(ie,oe){for(var fe=0;fe<ie.length;fe++){var ye=ie[fe];if(!ye.fixedrange)if(ye.rangebreaks){var ce=0,me=ye._length,xe=ye.p2l(ce+oe)-ye.p2l(ce),ke=ye.p2l(me+oe)-ye.p2l(me),Ae=(xe+ke)/2;ye.range=[ye.l2r(ye._rl[0]-Ae),ye.l2r(ye._rl[1]-Ae)]}else ye.range=[ye.l2r(ye._rl[0]-oe/ye._m),ye.l2r(ye._rl[1]-oe/ye._m)]}}function te(ie){return 1-(ie>=0?Math.min(ie,.9):1/(1/Math.max(ie,-.3)+3.222))}function re(ie,oe,fe){return ie?ie==="nsew"?fe?"":oe==="pan"?"move":"crosshair":ie.toLowerCase()+"-resize":"pointer"}function W(ie,oe,fe,ye,ce){return ie.append("path").attr("class","zoombox").style({fill:oe>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",a(fe,ye)).attr("d",ce+"Z")}function J(ie,oe,fe){return ie.append("path").attr("class","zoombox-corners").style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,opacity:0}).attr("transform",a(oe,fe)).attr("d","M0,0Z")}function le(ie,oe,fe,ye,ce,me){ie.attr("d",ye+"M"+fe.l+","+fe.t+"v"+fe.h+"h"+fe.w+"v-"+fe.h+"h-"+fe.w+"Z"),ue(ie,oe,ce,me)}function ue(ie,oe,fe,ye){fe||(ie.transition().style("fill",ye>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),oe.transition().style("opacity",1).duration(200))}function se(ie){l.select(ie).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function G(ie){N&&ie.data&&ie._context.showTips&&(o.notifier(o._(ie,"Double-click to zoom back out"),"long"),N=!1)}function Y(ie,oe){return"M"+(ie.l-.5)+","+(oe-D-.5)+"h-3v"+(2*D+1)+"h3ZM"+(ie.r+.5)+","+(oe-D-.5)+"h3v"+(2*D+1)+"h-3Z"}function ee(ie,oe){return"M"+(oe-D-.5)+","+(ie.t-.5)+"v-3h"+(2*D+1)+"v3ZM"+(oe-D-.5)+","+(ie.b+.5)+"v3h"+(2*D+1)+"v-3Z"}function $(ie){var oe=Math.floor(Math.min(ie.b-ie.t,ie.r-ie.l,D)/2);return"M"+(ie.l-3.5)+","+(ie.t-.5+oe)+"h3v"+-oe+"h"+oe+"v-3h-"+(oe+3)+"ZM"+(ie.r+3.5)+","+(ie.t-.5+oe)+"h-3v"+-oe+"h"+-oe+"v-3h"+(oe+3)+"ZM"+(ie.r+3.5)+","+(ie.b+.5-oe)+"h-3v"+oe+"h"+-oe+"v3h"+(oe+3)+"ZM"+(ie.l-3.5)+","+(ie.b+.5-oe)+"h3v"+oe+"h"+oe+"v3h-"+(oe+3)+"Z"}function K(ie,oe,fe,ye,ce){for(var me=!1,xe={},ke={},Ae,Oe,He,Ge,_e=(ce||{}).xaHash,Ie=(ce||{}).yaHash,We=0;We<oe.length;We++){var et=oe[We];for(Ae in fe)if(et[Ae]){for(He in et)!(ce&&(_e[He]||Ie[He]))&&!(He.charAt(0)==="x"?fe:ye)[He]&&(xe[He]=Ae);for(Oe in ye)!(ce&&(_e[Oe]||Ie[Oe]))&&et[Oe]&&(me=!0)}for(Oe in ye)if(et[Oe])for(Ge in et)!(ce&&(_e[Ge]||Ie[Ge]))&&!(Ge.charAt(0)==="x"?fe:ye)[Ge]&&(ke[Ge]=Oe)}me&&(o.extendFlat(xe,ke),ke={});var Ne={},De=[];for(He in xe){var Ve=w(ie,He);De.push(Ve),Ne[Ve._id]=Ve}var dt={},Dt=[];for(Ge in ke){var Gt=w(ie,Ge);Dt.push(Gt),dt[Gt._id]=Gt}return{xaHash:Ne,yaHash:dt,xaxes:De,yaxes:Dt,xLinks:xe,yLinks:ke,isSubplotConstrained:me}}function Q(ie,oe){if(!t)ie.onwheel!==void 0?ie.onwheel=oe:ie.onmousewheel!==void 0?ie.onmousewheel=oe:ie.isAddedWheelEvent||(ie.isAddedWheelEvent=!0,ie.addEventListener("wheel",oe,{passive:!1}));else{var fe=ie.onwheel!==void 0?"wheel":"mousewheel";ie._onwheel&&ie.removeEventListener(fe,ie._onwheel),ie._onwheel=oe,ie.addEventListener(fe,oe,{passive:!1})}}function ae(ie){var oe=[];for(var fe in ie)oe.push(ie[fe]);return oe}k.exports={makeDragBox:O,makeDragger:I,makeRectDragger:F,makeZoombox:W,makeCorners:J,updateZoombox:le,xyCorners:$,transitionZoombox:ue,removeZoombox:se,showDoubleClickNotifier:G,attachWheelEventHandler:Q}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/subroutines":544,"../../registry":638,"../plots":619,"./axes":554,"./axis_ids":558,"./constants":561,"./scale_zoom":574,"./select":575,"@plotly/d3":58,"has-passive-events":229,tinycolor2:312}],564:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../components/fx"),c=e("../../components/dragelement"),p=e("../../lib/setcursor"),t=e("./dragbox").makeDragBox,n=e("./constants").DRAGGERSIZE;z.initInteractions=function(i){var r=i._fullLayout;if(i._context.staticPlot){l.select(i).selectAll(".drag").remove();return}if(!(!r._has("cartesian")&&!r._has("splom"))){var f=Object.keys(r._plots||{}).sort(function(s,h){if((r._plots[s].mainplot&&!0)===(r._plots[h].mainplot&&!0)){var d=s.split("y"),y=h.split("y");return d[0]===y[0]?Number(d[1]||1)-Number(y[1]||1):Number(d[0]||1)-Number(y[0]||1)}return r._plots[s].mainplot?1:-1});f.forEach(function(s){var h=r._plots[s],d=h.xaxis,y=h.yaxis;if(!h.mainplot){var m=t(i,h,d._offset,y._offset,d._length,y._length,"ns","ew");m.onmousemove=function(A){i._fullLayout._rehover=function(){i._fullLayout._hoversubplot===s&&i._fullLayout._plots[s]&&o.hover(i,A,s)},o.hover(i,A,s),i._fullLayout._lasthover=m,i._fullLayout._hoversubplot=s},m.onmouseout=function(A){i._dragging||(i._fullLayout._hoversubplot=null,c.unhover(i,A))},i._context.showAxisDragHandles&&(t(i,h,d._offset-n,y._offset-n,n,n,"n","w"),t(i,h,d._offset+d._length,y._offset-n,n,n,"n","e"),t(i,h,d._offset-n,y._offset+y._length,n,n,"s","w"),t(i,h,d._offset+d._length,y._offset+y._length,n,n,"s","e"))}if(i._context.showAxisDragHandles){if(s===d._mainSubplot){var g=d._mainLinePosition;d.side==="top"&&(g-=n),t(i,h,d._offset+d._length*.1,g,d._length*.8,n,"","ew"),t(i,h,d._offset,g,d._length*.1,n,"","w"),t(i,h,d._offset+d._length*.9,g,d._length*.1,n,"","e")}if(s===y._mainSubplot){var x=y._mainLinePosition;y.side!=="right"&&(x-=n),t(i,h,x,y._offset+y._length*.1,n,y._length*.8,"ns",""),t(i,h,x,y._offset+y._length*.9,n,y._length*.1,"s",""),t(i,h,x,y._offset,n,y._length*.1,"n","")}}});var u=r._hoverlayer.node();u.onmousemove=function(s){s.target=i._fullLayout._lasthover,o.hover(i,s,r._hoversubplot)},u.onclick=function(s){s.target=i._fullLayout._lasthover,o.click(i,s)},u.onmousedown=function(s){i._fullLayout._lasthover.onmousedown(s)},z.updateFx(i)}},z.updateFx=function(a){var i=a._fullLayout,r=i.dragmode==="pan"?"move":"crosshair";p(i._draggers,r)}},{"../../components/dragelement":385,"../../components/fx":406,"../../lib/setcursor":524,"./constants":561,"./dragbox":563,"@plotly/d3":58}],565:[function(e,k,z){function l(c){var p=c._fullLayout._zoomlayer;p&&p.selectAll(".outline-controllers").remove()}function o(c){var p=c._fullLayout._zoomlayer;p&&p.selectAll(".select-outline").remove(),c._fullLayout._drawing=!1}k.exports={clearOutlineControllers:l,clearSelect:o}},{}],566:[function(e,k,z){var l=e("../../lib").strTranslate;function o(n,a){switch(n.type){case"log":return n.p2d(a);case"date":return n.p2r(a,0,n.calendar);default:return n.p2r(a)}}function c(n,a){switch(n.type){case"log":return n.d2p(a);case"date":return n.r2p(a,0,n.calendar);default:return n.r2p(a)}}function p(n){var a=n._id.charAt(0)==="y"?1:0;return function(i){return o(n,i[a])}}function t(n){return l(n.xaxis._offset,n.yaxis._offset)}k.exports={p2r:o,r2p:c,axValue:p,getTransform:t}},{"../../lib":503}],567:[function(e,k,z){var l=e("../../registry"),o=e("../../lib"),c=e("./axis_ids");k.exports=function(t){return function(a,i){var r=a[t];if(!!Array.isArray(r))for(var f=l.subplotsRegistry.cartesian,u=f.idRegex,s=i._subplots,h=s.xaxis,d=s.yaxis,y=s.cartesian,m=i._has("cartesian")||i._has("gl2d"),g=0;g<r.length;g++){var x=r[g];if(!!o.isPlainObject(x)){var A=c.cleanId(x.xref,"x",!1),b=c.cleanId(x.yref,"y",!1),S=u.x.test(A),w=u.y.test(b);if(S||w){m||o.pushUnique(i._basePlotModules,f);var T=!1;S&&h.indexOf(A)===-1&&(h.push(A),T=!0),w&&d.indexOf(b)===-1&&(d.push(b),T=!0),T&&S&&w&&y.push(A+b)}}}}}},{"../../lib":503,"../../registry":638,"./axis_ids":558}],568:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../registry"),c=e("../../lib"),p=e("../plots"),t=e("../../components/drawing"),n=e("../get_data").getModuleCalcData,a=e("./axis_ids"),i=e("./constants"),r=e("../../constants/xmlns_namespaces"),f=c.ensureSingle;function u(g,x,A){return c.ensureSingle(g,x,A,function(b){b.datum(A)})}z.name="cartesian",z.attr=["xaxis","yaxis"],z.idRoot=["x","y"],z.idRegex=i.idRegex,z.attrRegex=i.attrRegex,z.attributes=e("./attributes"),z.layoutAttributes=e("./layout_attributes"),z.supplyLayoutDefaults=e("./layout_defaults"),z.transitionAxes=e("./transition_axes"),z.finalizeSubplots=function(g,x){var A=x._subplots,b=A.xaxis,S=A.yaxis,w=A.cartesian,T=w.concat(A.gl2d||[]),_={},v={},P,M,E;for(P=0;P<T.length;P++){var D=T[P].split("y");_[D[0]]=1,v["y"+D[1]]=1}for(P=0;P<b.length;P++)M=b[P],_[M]||(E=(g[a.id2name(M)]||{}).anchor,i.idRegex.y.test(E)||(E="y"),w.push(M+E),T.push(M+E),v[E]||(v[E]=1,c.pushUnique(S,E)));for(P=0;P<S.length;P++)E=S[P],v[E]||(M=(g[a.id2name(E)]||{}).anchor,i.idRegex.x.test(M)||(M="x"),w.push(M+E),T.push(M+E),_[M]||(_[M]=1,c.pushUnique(b,M)));if(!T.length){M="",E="";for(var N in g)if(i.attrRegex.test(N)){var O=N.charAt(0);O==="x"?(!M||+N.substr(5)<+M.substr(5))&&(M=N):(!E||+N.substr(5)<+E.substr(5))&&(E=N)}M=M?a.name2id(M):"x",E=E?a.name2id(E):"y",b.push(M),S.push(E),w.push(M+E)}},z.plot=function(g,x,A,b){var S=g._fullLayout,w=S._subplots.cartesian,T=g.calcdata,_;if(!Array.isArray(x))for(x=[],_=0;_<T.length;_++)x.push(_);for(_=0;_<w.length;_++){for(var v=w[_],P=S._plots[v],M=[],E,D=0;D<T.length;D++){var N=T[D],O=N[0].trace;O.xaxis+O.yaxis===v&&((x.indexOf(O.index)!==-1||O.carpet)&&(E&&E[0].trace.xaxis+E[0].trace.yaxis===v&&["tonextx","tonexty","tonext"].indexOf(O.fill)!==-1&&M.indexOf(E)===-1&&M.push(E),M.push(N)),E=N)}s(g,P,M,A,b)}};function s(g,x,A,b,S){for(var w=i.traceLayerClasses,T=g._fullLayout,_=T._modules,v,P,M,E=[],D=[],N=0;N<_.length;N++){v=_[N];var O=v.name,I=o.modules[O].categories;if(I.svg){var F=v.layerName||O+"layer",V=v.plot;P=n(A,V),M=P[0],A=P[1],M.length&&E.push({i:w.indexOf(F),className:F,plotMethod:V,cdModule:M}),I.zoomScale&&D.push("."+F)}}E.sort(function(Z,te){return Z.i-te.i});var U=x.plot.selectAll("g.mlayer").data(E,function(Z){return Z.className});if(U.enter().append("g").attr("class",function(Z){return Z.className}).classed("mlayer",!0).classed("rangeplot",x.isRangePlot),U.exit().remove(),U.order(),U.each(function(Z){var te=l.select(this),re=Z.className;Z.plotMethod(g,x,Z.cdModule,te,b,S),i.clipOnAxisFalseQuery.indexOf("."+re)===-1&&t.setClipUrl(te,x.layerClipId,g)}),T._has("scattergl")&&(v=o.getModule("scattergl"),M=n(A,v)[0],v.plot(g,x,M)),!g._context.staticPlot&&(x._hasClipOnAxisFalse&&(x.clipOnAxisFalseTraces=x.plot.selectAll(i.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),D.length)){var j=x.plot.selectAll(D.join(",")).selectAll(".trace");x.zoomScalePts=j.selectAll("path.point"),x.zoomScaleTxt=j.selectAll(".textpoint")}}z.clean=function(g,x,A,b){var S=b._plots||{},w=x._plots||{},T=b._subplots||{},_,v,P;if(b._hasOnlyLargeSploms&&!x._hasOnlyLargeSploms)for(P in S)_=S[P],_.plotgroup&&_.plotgroup.remove();var M=b._has&&b._has("gl"),E=x._has&&x._has("gl");if(M&&!E)for(P in S)_=S[P],_._scene&&_._scene.destroy();if(T.xaxis&&T.yaxis){var D=a.listIds({_fullLayout:b});for(v=0;v<D.length;v++){var N=D[v];x[a.id2name(N)]||b._infolayer.selectAll(".g-"+N+"title").remove()}}var O=b._has&&b._has("cartesian"),I=x._has&&x._has("cartesian");if(O&&!I)y(b._cartesianlayer.selectAll(".subplot"),b),b._defs.selectAll(".axesclip").remove(),delete b._axisConstraintGroups,delete b._axisMatchGroups;else if(T.cartesian)for(v=0;v<T.cartesian.length;v++){var F=T.cartesian[v];if(!w[F]){var V="."+F+",."+F+"-x,."+F+"-y";b._cartesianlayer.selectAll(V).remove(),m(F,b)}}},z.drawFramework=function(g){var x=g._fullLayout,A=h(g),b=x._cartesianlayer.selectAll(".subplot").data(A,String);b.enter().append("g").attr("class",function(S){return"subplot "+S[0]}),b.order(),b.exit().call(y,x),b.each(function(S){var w=S[0],T=x._plots[w];T.plotgroup=l.select(this),d(g,T),T.draglayer=f(x._draggers,"g",w)})},z.rangePlot=function(g,x,A){d(g,x),s(g,x,A),p.style(g)};function h(g){var x=g._fullLayout,A=x._subplots.cartesian,b=A.length,S,w,T,_,v,P,M=[],E=[];for(S=0;S<b;S++){T=A[S],_=x._plots[T],v=_.xaxis,P=_.yaxis;var D=v._mainAxis,N=P._mainAxis,O=D._id+N._id,I=x._plots[O];_.overlays=[],O!==T&&I?(_.mainplot=O,_.mainplotinfo=I,E.push(T)):(_.mainplot=void 0,_.mainplotinfo=void 0,M.push(T))}for(S=0;S<E.length;S++)T=E[S],_=x._plots[T],_.mainplotinfo.overlays.push(_);var F=M.concat(E),V=new Array(b);for(S=0;S<b;S++){T=F[S],_=x._plots[T],v=_.xaxis,P=_.yaxis;var U=[T,v.layer,P.layer,v.overlaying||"",P.overlaying||""];for(w=0;w<_.overlays.length;w++)U.push(_.overlays[w].id);V[S]=U}return V}function d(g,x){var A=x.plotgroup,b=x.id,S=i.layerValue2layerClass[x.xaxis.layer],w=i.layerValue2layerClass[x.yaxis.layer],T=g._fullLayout._hasOnlyLargeSploms;if(x.mainplot){var v=x.mainplotinfo,P=v.plotgroup,M=b+"-x",E=b+"-y";x.gridlayer=v.gridlayer,x.zerolinelayer=v.zerolinelayer,f(v.overlinesBelow,"path",M),f(v.overlinesBelow,"path",E),f(v.overaxesBelow,"g",M),f(v.overaxesBelow,"g",E),x.plot=f(v.overplot,"g",b),f(v.overlinesAbove,"path",M),f(v.overlinesAbove,"path",E),f(v.overaxesAbove,"g",M),f(v.overaxesAbove,"g",E),x.xlines=P.select(".overlines-"+S).select("."+M),x.ylines=P.select(".overlines-"+w).select("."+E),x.xaxislayer=P.select(".overaxes-"+S).select("."+M),x.yaxislayer=P.select(".overaxes-"+w).select("."+E)}else if(T)x.xlines=f(A,"path","xlines-above"),x.ylines=f(A,"path","ylines-above"),x.xaxislayer=f(A,"g","xaxislayer-above"),x.yaxislayer=f(A,"g","yaxislayer-above");else{var _=f(A,"g","layer-subplot");x.shapelayer=f(_,"g","shapelayer"),x.imagelayer=f(_,"g","imagelayer"),x.gridlayer=f(A,"g","gridlayer"),x.zerolinelayer=f(A,"g","zerolinelayer"),f(A,"path","xlines-below"),f(A,"path","ylines-below"),x.overlinesBelow=f(A,"g","overlines-below"),f(A,"g","xaxislayer-below"),f(A,"g","yaxislayer-below"),x.overaxesBelow=f(A,"g","overaxes-below"),x.plot=f(A,"g","plot"),x.overplot=f(A,"g","overplot"),x.xlines=f(A,"path","xlines-above"),x.ylines=f(A,"path","ylines-above"),x.overlinesAbove=f(A,"g","overlines-above"),f(A,"g","xaxislayer-above"),f(A,"g","yaxislayer-above"),x.overaxesAbove=f(A,"g","overaxes-above"),x.xlines=A.select(".xlines-"+S),x.ylines=A.select(".ylines-"+w),x.xaxislayer=A.select(".xaxislayer-"+S),x.yaxislayer=A.select(".yaxislayer-"+w)}T||(u(x.gridlayer,"g",x.xaxis._id),u(x.gridlayer,"g",x.yaxis._id),x.gridlayer.selectAll("g").map(function(D){return D[0]}).sort(a.idSort)),x.xlines.style("fill","none").classed("crisp",!0),x.ylines.style("fill","none").classed("crisp",!0)}function y(g,x){if(!!g){var A={};g.each(function(v){var P=v[0],M=l.select(this);M.remove(),m(P,x),A[P]=!0});for(var b in x._plots)for(var S=x._plots[b],w=S.overlays||[],T=0;T<w.length;T++){var _=w[T];A[_.id]&&_.plot.selectAll(".trace").remove()}}}function m(g,x){x._draggers.selectAll("g."+g).remove(),x._defs.select("#clip"+x._uid+g+"plot").remove()}z.toSVG=function(g){var x=g._fullLayout._glimages,A=l.select(g).selectAll(".svg-container"),b=A.filter(function(w,T){return T===A.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function S(){var w=this,T=w.toDataURL("image/png"),_=x.append("svg:image");_.attr({xmlns:r.svg,"xlink:href":T,preserveAspectRatio:"none",x:0,y:0,width:w.style.width,height:w.style.height})}b.each(S)},z.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../registry":638,"../get_data":593,"../plots":619,"./attributes":552,"./axis_ids":558,"./constants":561,"./graph_interact":564,"./layout_attributes":569,"./layout_defaults":570,"./transition_axes":581,"@plotly/d3":58}],569:[function(e,k,z){var l=e("../font_attributes"),o=e("../../components/color/attributes"),c=e("../../components/drawing/attributes").dash,p=e("../../lib/extend").extendFlat,t=e("../../plot_api/plot_template").templatedArray,n=e("../../plots/cartesian/axis_format_attributes").descriptionWithDates,a=e("../../constants/numerical").ONEDAY,i=e("./constants"),r=i.HOUR_PATTERN,f=i.WEEKDAY_PATTERN;k.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:o.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:l({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[i.idRegex.x.toString(),i.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[i.idRegex.x.toString(),i.idRegex.y.toString()],editType:"calc"},rangebreaks:t("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[f,r,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:a},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:o.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:p({},c,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:l({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:n("tick label")},tickformatstops:t("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:n("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:o.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:o.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:o.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:o.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",i.idRegex.x.toString(),i.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",i.idRegex.x.toString(),i.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:l({editType:"ticks"})}}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../constants/numerical":479,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../font_attributes":585,"./constants":561}],570:[function(e,k,z){var l=e("../../lib"),o=e("../../components/color"),c=e("../../components/fx/helpers").isUnifiedHover,p=e("../../components/fx/hovermode_defaults"),t=e("../../plot_api/plot_template"),n=e("../layout_attributes"),a=e("./layout_attributes"),i=e("./type_defaults"),r=e("./axis_defaults"),f=e("./constraints"),u=e("./position_defaults"),s=e("./axis_ids"),h=s.id2name,d=s.name2id,y=e("./constants").AX_ID_PATTERN,m=e("../../registry"),g=m.traceIs,x=m.getComponentMethod;function A(b,S,w){Array.isArray(b[S])?b[S].push(w):b[S]=[w]}k.exports=function(S,w,T){var _=w.autotypenumbers,v={},P={},M={},E={},D={},N={},O={},I={},F={},V={},U,j;for(U=0;U<T.length;U++){var Z=T[U];if(!(!g(Z,"cartesian")&&!g(Z,"gl2d"))){var te;if(Z.xaxis)te=h(Z.xaxis),A(v,te,Z);else if(Z.xaxes)for(j=0;j<Z.xaxes.length;j++)A(v,h(Z.xaxes[j]),Z);var re;if(Z.yaxis)re=h(Z.yaxis),A(v,re,Z);else if(Z.yaxes)for(j=0;j<Z.yaxes.length;j++)A(v,h(Z.yaxes[j]),Z);if(Z.type==="funnel"?Z.orientation==="h"?(te&&(P[te]=!0),re&&(O[re]=!0)):re&&(M[re]=!0):Z.type==="image"?(re&&(I[re]=!0),te&&(I[te]=!0)):(re&&(D[re]=!0,N[re]=!0),(!g(Z,"carpet")||Z.type==="carpet"&&!Z._cheater)&&te&&(E[te]=!0)),Z.type==="carpet"&&Z._cheater&&te&&(P[te]=!0),g(Z,"2dMap")&&(F[te]=!0,F[re]=!0),g(Z,"oriented")){var W=Z.orientation==="h"?re:te;V[W]=!0}}}var J=w._subplots,le=J.xaxis,ue=J.yaxis,se=l.simpleMap(le,h),G=l.simpleMap(ue,h),Y=se.concat(G),ee=o.background;le.length&&ue.length&&(ee=l.coerce(S,w,n,"plot_bgcolor"));var $=o.combine(ee,w.paper_bgcolor),K,Q,ae,ie,oe;function fe(){var $e=v[K]||[];oe._traceIndices=$e.map(function(Ee){return Ee._expandedIndex}),oe._annIndices=[],oe._shapeIndices=[],oe._imgIndices=[],oe._subplotsWith=[],oe._counterAxes=[],oe._name=oe._attr=K,oe._id=Q}function ye($e,Ee){return l.coerce(ie,oe,a,$e,Ee)}function ce($e,Ee){return l.coerce2(ie,oe,a,$e,Ee)}function me($e){return $e==="x"?ue:le}function xe($e,Ee){for(var Xe=$e==="x"?se:G,rt=[],ut=0;ut<Xe.length;ut++){var Pt=Xe[ut];Pt!==Ee&&!(S[Pt]||{}).overlaying&&rt.push(d(Pt))}return rt}var ke={x:me("x"),y:me("y")},Ae=ke.x.concat(ke.y),Oe={},He=[];function Ge(){var $e=ie.matches;y.test($e)&&Ae.indexOf($e)===-1&&(Oe[$e]=ie.type,He=Object.keys(Oe))}var _e=p(S,w),Ie=c(_e);for(U=0;U<Y.length;U++){K=Y[U],Q=d(K),ae=K.charAt(0),l.isPlainObject(S[K])||(S[K]={}),ie=S[K],oe=t.newContainer(w,K,ae+"axis"),fe();var We=ae==="x"&&!E[K]&&P[K]||ae==="y"&&!D[K]&&M[K],et=ae==="y"&&(!N[K]&&O[K]||I[K]),Ne={letter:ae,font:w.font,outerTicks:F[K],showGrid:!V[K],data:v[K]||[],bgColor:$,calendar:w.calendar,automargin:!0,visibleDflt:We,reverseDflt:et,autotypenumbersDflt:_,splomStash:((w._splomAxes||{})[ae]||{})[Q]};ye("uirevision",w.uirevision),i(ie,oe,ye,Ne),r(ie,oe,ye,Ne,w);var De=Ie&&ae===_e.charAt(0),Ve=ce("spikecolor",Ie?oe.color:void 0),dt=ce("spikethickness",Ie?1.5:void 0),Dt=ce("spikedash",Ie?"dot":void 0),Gt=ce("spikemode",Ie?"across":void 0),Mt=ce("spikesnap"),zt=ye("showspikes",!!De||!!Ve||!!dt||!!Dt||!!Gt||!!Mt);zt||(delete oe.spikecolor,delete oe.spikethickness,delete oe.spikedash,delete oe.spikemode,delete oe.spikesnap),u(ie,oe,ye,{letter:ae,counterAxes:ke[ae],overlayableAxes:xe(ae,K),grid:w.grid}),ye("title.standoff"),Ge(),oe._input=ie}for(U=0;U<He.length;){Q=He[U++],K=h(Q),ae=K.charAt(0),l.isPlainObject(S[K])||(S[K]={}),ie=S[K],oe=t.newContainer(w,K,ae+"axis"),fe();var Nt={letter:ae,font:w.font,outerTicks:F[K],showGrid:!V[K],data:[],bgColor:$,calendar:w.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:_,splomStash:((w._splomAxes||{})[ae]||{})[Q]};ye("uirevision",w.uirevision),oe.type=Oe[Q]||"linear",r(ie,oe,ye,Nt,w),u(ie,oe,ye,{letter:ae,counterAxes:ke[ae],overlayableAxes:xe(ae,K),grid:w.grid}),ye("fixedrange"),Ge(),oe._input=ie}var Et=x("rangeslider","handleDefaults"),At=x("rangeselector","handleDefaults");for(U=0;U<se.length;U++)K=se[U],ie=S[K],oe=w[K],Et(S,w,K),oe.type==="date"&&At(ie,oe,w,G,oe.calendar),ye("fixedrange");for(U=0;U<G.length;U++){K=G[U],ie=S[K],oe=w[K];var it=w[h(oe.anchor)],ht=x("rangeslider","isVisible")(it);ye("fixedrange",ht)}f.handleDefaults(S,w,{axIds:Ae.concat(He).sort(s.idSort),axHasImage:I})}},{"../../components/color":366,"../../components/fx/helpers":402,"../../components/fx/hovermode_defaults":405,"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../layout_attributes":610,"./axis_defaults":556,"./axis_ids":558,"./constants":561,"./constraints":562,"./layout_attributes":569,"./position_defaults":572,"./type_defaults":582}],571:[function(e,k,z){var l=e("tinycolor2").mix,o=e("../../components/color/attributes").lightFraction,c=e("../../lib");k.exports=function(t,n,a,i){i=i||{};var r=i.dfltColor;function f(S,w){return c.coerce2(t,n,i.attributes,S,w)}var u=f("linecolor",r),s=f("linewidth"),h=a("showline",i.showLine||!!u||!!s);h||(delete n.linecolor,delete n.linewidth);var d=l(r,i.bgColor,i.blend||o).toRgbString(),y=f("gridcolor",d),m=f("gridwidth"),g=a("showgrid",i.showGrid||!!y||!!m);if(g||(delete n.gridcolor,delete n.gridwidth),!i.noZeroLine){var x=f("zerolinecolor",r),A=f("zerolinewidth"),b=a("zeroline",i.showGrid||!!x||!!A);b||(delete n.zerolinecolor,delete n.zerolinewidth)}}},{"../../components/color/attributes":365,"../../lib":503,tinycolor2:312}],572:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../lib");k.exports=function(p,t,n,a){var i=a.counterAxes||[],r=a.overlayableAxes||[],f=a.letter,u=a.grid,s,h,d,y;u&&(h=u._domains[f][u._axisMap[t._id]],s=u._anchors[t._id],h&&(d=u[f+"side"].split(" ")[0],y=u.domain[f][d==="right"||d==="top"?1:0])),h=h||[0,1],s=s||(l(p.position)?"free":i[0]||"free"),d=d||(f==="x"?"bottom":"left"),y=y||0;var m=o.coerce(p,t,{anchor:{valType:"enumerated",values:["free"].concat(i),dflt:s}},"anchor");m==="free"&&n("position",y),o.coerce(p,t,{side:{valType:"enumerated",values:f==="x"?["bottom","top"]:["left","right"],dflt:d}},"side");var g=!1;if(r.length&&(g=o.coerce(p,t,{overlaying:{valType:"enumerated",values:[!1].concat(r),dflt:!1}},"overlaying")),!g){var x=n("domain",h);x[0]>x[1]-1/4096&&(t.domain=h),o.noneOrAll(p.domain,t.domain,h)}return n("layer"),t}},{"../../lib":503,"fast-isnumeric":190}],573:[function(e,k,z){var l=e("./show_dflt");k.exports=function(c,p,t,n,a){a||(a={});var i=a.tickSuffixDflt,r=l(c),f=t("tickprefix");f&&t("showtickprefix",r);var u=t("ticksuffix",i);u&&t("showticksuffix",r)}},{"./show_dflt":577}],574:[function(e,k,z){var l=e("../../constants/alignment").FROM_BL;k.exports=function(c,p,t){t===void 0&&(t=l[c.constraintoward||"center"]);var n=[c.r2l(c.range[0]),c.r2l(c.range[1])],a=n[0]+(n[1]-n[0])*t;c.range=c._input.range=[c.l2r(a+(n[0]-a)*p),c.l2r(a+(n[1]-a)*p)],c.setScale()}},{"../../constants/alignment":471}],575:[function(e,k,z){var l=e("polybooljs"),o=e("../../registry"),c=e("../../components/drawing").dashStyle,p=e("../../components/color"),t=e("../../components/fx"),n=e("../../components/fx/helpers").makeEventData,a=e("../../components/dragelement/helpers"),i=a.freeMode,r=a.rectMode,f=a.drawMode,u=a.openMode,s=a.selectMode,h=e("../../components/shapes/draw_newshape/display_outlines"),d=e("../../components/shapes/draw_newshape/helpers").handleEllipse,y=e("../../components/shapes/draw_newshape/newshapes"),m=e("../../lib"),g=e("../../lib/polygon"),x=e("../../lib/throttle"),A=e("./axis_ids").getFromId,b=e("../../lib/clear_gl_canvases"),S=e("../../plot_api/subroutines").redrawReglTraces,w=e("./constants"),T=w.MINSELECT,_=g.filter,v=g.tester,P=e("./handle_outline").clearSelect,M=e("./helpers"),E=M.p2r,D=M.axValue,N=M.getTransform;function O(K,Q,ae,ie,oe){var fe=i(oe),ye=r(oe),ce=u(oe),me=f(oe),xe=s(oe),ke=oe==="drawline",Ae=oe==="drawcircle",Oe=ke||Ae,He=ie.gd,Ge=He._fullLayout,_e=Ge._zoomlayer,Ie=ie.element.getBoundingClientRect(),We=ie.plotinfo,et=N(We),Ne=Q-Ie.left,De=ae-Ie.top;Ge._calcInverseTransform(He);var Ve=m.apply3DTransform(Ge._invTransform)(Ne,De);Ne=Ve[0],De=Ve[1];var dt=Ge._invScaleX,Dt=Ge._invScaleY,Gt=Ne,Mt=De,zt="M"+Ne+","+De,Nt=ie.xaxes[0]._length,Et=ie.yaxes[0]._length,At=ie.xaxes.concat(ie.yaxes),it=K.altKey&&!(f(oe)&&ce),ht,$e,Ee,Xe,rt,ut,Pt;Z(K,He,ie),fe&&(ht=_([[Ne,De]],w.BENDPX));var kt=_e.selectAll("path.select-outline-"+We.id).data(me?[0]:[1,2]),Bt=Ge.newshape;kt.enter().append("path").attr("class",function(or){return"select-outline select-outline-"+or+" select-outline-"+We.id}).style(me?{opacity:Bt.opacity/2,fill:ce?void 0:Bt.fillcolor,stroke:Bt.line.color,"stroke-dasharray":c(Bt.line.dash,Bt.line.width),"stroke-width":Bt.line.width+"px"}:{}).attr("fill-rule",Bt.fillrule).classed("cursor-move",!!me).attr("transform",et).attr("d",zt+"Z");var Xt=_e.append("path").attr("class","zoombox-corners").style({fill:p.background,stroke:p.defaultLine,"stroke-width":1}).attr("transform",et).attr("d","M0,0Z"),Ut=Ge._uid+w.SELECTID,Jt=[],Je=re(He,ie.xaxes,ie.yaxes,ie.subplot);function gt(or,gr){return or-gr}var Ct;We.fillRangeItems?Ct=We.fillRangeItems:ye?Ct=function(or,gr){var lr=or.range={};for(rt=0;rt<At.length;rt++){var mr=At[rt],Fr=mr._id.charAt(0);lr[mr._id]=[E(mr,gr[Fr+"min"]),E(mr,gr[Fr+"max"])].sort(gt)}}:Ct=function(or,gr,lr){var mr=or.lassoPoints={};for(rt=0;rt<At.length;rt++){var Fr=At[rt];mr[Fr._id]=lr.filtered.map(D(Fr))}},ie.moveFn=function(or,gr){Gt=Math.max(0,Math.min(Nt,dt*or+Ne)),Mt=Math.max(0,Math.min(Et,Dt*gr+De));var lr=Math.abs(Gt-Ne),mr=Math.abs(Mt-De);if(ye){var Fr,Rr,ir;if(xe){var Vr=Ge.selectdirection;switch(Vr==="any"?mr<Math.min(lr*.6,T)?Fr="h":lr<Math.min(mr*.6,T)?Fr="v":Fr="d":Fr=Vr,Fr){case"h":Rr=Ae?Et/2:0,ir=Et;break;case"v":Rr=Ae?Nt/2:0,ir=Nt;break}}if(me)switch(Ge.newshape.drawdirection){case"vertical":Fr="h",Rr=Ae?Et/2:0,ir=Et;break;case"horizontal":Fr="v",Rr=Ae?Nt/2:0,ir=Nt;break;case"ortho":lr<mr?(Fr="h",Rr=De,ir=Mt):(Fr="v",Rr=Ne,ir=Gt);break;default:Fr="d"}Fr==="h"?(Xe=Oe?d(Ae,[Gt,Rr],[Gt,ir]):[[Ne,Rr],[Ne,ir],[Gt,ir],[Gt,Rr]],Xe.xmin=Oe?Gt:Math.min(Ne,Gt),Xe.xmax=Oe?Gt:Math.max(Ne,Gt),Xe.ymin=Math.min(Rr,ir),Xe.ymax=Math.max(Rr,ir),Xt.attr("d","M"+Xe.xmin+","+(De-T)+"h-4v"+2*T+"h4ZM"+(Xe.xmax-1)+","+(De-T)+"h4v"+2*T+"h-4Z")):Fr==="v"?(Xe=Oe?d(Ae,[Rr,Mt],[ir,Mt]):[[Rr,De],[Rr,Mt],[ir,Mt],[ir,De]],Xe.xmin=Math.min(Rr,ir),Xe.xmax=Math.max(Rr,ir),Xe.ymin=Oe?Mt:Math.min(De,Mt),Xe.ymax=Oe?Mt:Math.max(De,Mt),Xt.attr("d","M"+(Ne-T)+","+Xe.ymin+"v-4h"+2*T+"v4ZM"+(Ne-T)+","+(Xe.ymax-1)+"v4h"+2*T+"v-4Z")):Fr==="d"&&(Xe=Oe?d(Ae,[Ne,De],[Gt,Mt]):[[Ne,De],[Ne,Mt],[Gt,Mt],[Gt,De]],Xe.xmin=Math.min(Ne,Gt),Xe.xmax=Math.max(Ne,Gt),Xe.ymin=Math.min(De,Mt),Xe.ymax=Math.max(De,Mt),Xt.attr("d","M0,0Z"))}else fe&&(ht.addPt([Gt,Mt]),Xe=ht.filtered);ie.selectionDefs&&ie.selectionDefs.length?(Ee=Y(ie.mergedPolygons,Xe,it),Xe.subtract=it,$e=j(ie.selectionDefs.concat([Xe]))):(Ee=[Xe],$e=v(Xe)),h($(Ee,ce),kt,ie),xe&&x.throttle(Ut,w.SELECTDELAY,function(){Jt=[];var qe,we;for(rt=0;rt<Je.length;rt++)if(ut=Je[rt],we=ut._module.selectPoints(ut,$e),qe=ee(we,ut),Jt.length)for(var Me=0;Me<qe.length;Me++)Jt.push(qe[Me]);else Jt=qe;Pt={points:Jt},G(He,Je,Pt),Ct(Pt,Xe,ht),ie.gd.emit("plotly_selecting",Pt)})},ie.clickFn=function(or,gr){if(Xt.remove(),He._fullLayout._activeShapeIndex>=0){He._fullLayout._deactivateShape(He);return}if(!me){var lr=Ge.clickmode;x.done(Ut).then(function(){if(x.clear(Ut),or===2){for(kt.remove(),rt=0;rt<Je.length;rt++)ut=Je[rt],ut._module.selectPoints(ut,!1);G(He,Je),te(ie),He.emit("plotly_deselect",null)}else lr.indexOf("select")>-1&&I(gr,He,ie.xaxes,ie.yaxes,ie.subplot,ie,kt),lr==="event"&&He.emit("plotly_selected",void 0);t.click(He,gr)}).catch(m.error)}},ie.doneFn=function(){Xt.remove(),x.done(Ut).then(function(){x.clear(Ut),ie.gd.emit("plotly_selected",Pt),Xe&&ie.selectionDefs&&(Xe.subtract=it,ie.selectionDefs.push(Xe),ie.mergedPolygons.length=0,[].push.apply(ie.mergedPolygons,Ee)),ie.doneFnCompleted&&ie.doneFnCompleted(Jt)}).catch(m.error),me&&te(ie)}}function I(K,Q,ae,ie,oe,fe,ye){var ce=Q._hoverdata,me=Q._fullLayout,xe=me.clickmode,ke=xe.indexOf("event")>-1,Ae=[],Oe,He,Ge,_e,Ie,We,et,Ne,De,Ve;if(W(ce)){Z(K,Q,fe),Oe=re(Q,ae,ie,oe);var dt=J(ce,Oe),Dt=dt.pointNumbers.length>0;if(Dt?ue(Oe,dt):se(Oe)&&(et=le(dt))){for(ye&&ye.remove(),Ve=0;Ve<Oe.length;Ve++)He=Oe[Ve],He._module.selectPoints(He,!1);G(Q,Oe),te(fe),ke&&Q.emit("plotly_deselect",null)}else{Ne=K.shiftKey&&(et!==void 0?et:le(dt)),Ge=F(dt.pointNumber,dt.searchInfo,Ne);var Gt=fe.selectionDefs.concat([Ge]);for(_e=j(Gt),Ve=0;Ve<Oe.length;Ve++)if(Ie=Oe[Ve]._module.selectPoints(Oe[Ve],_e),We=ee(Ie,Oe[Ve]),Ae.length)for(var Mt=0;Mt<We.length;Mt++)Ae.push(We[Mt]);else Ae=We;if(De={points:Ae},G(Q,Oe,De),Ge&&fe&&fe.selectionDefs.push(Ge),ye){var zt=fe.mergedPolygons,Nt=u(fe.dragmode);h($(zt,Nt),ye,fe)}ke&&Q.emit("plotly_selected",De)}}}function F(K,Q,ae){return{pointNumber:K,searchInfo:Q,subtract:ae}}function V(K){return"pointNumber"in K&&"searchInfo"in K}function U(K){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(Q,ae,ie,oe){var fe=K.searchInfo.cd[0].trace._expandedIndex,ye=oe.cd[0].trace._expandedIndex;return ye===fe&&ie===K.pointNumber},isRect:!1,degenerate:!1,subtract:K.subtract}}function j(K){for(var Q=[],ae=V(K[0])?0:K[0][0][0],ie=ae,oe=V(K[0])?0:K[0][0][1],fe=oe,ye=0;ye<K.length;ye++)if(V(K[ye]))Q.push(U(K[ye]));else{var ce=g.tester(K[ye]);ce.subtract=K[ye].subtract,Q.push(ce),ae=Math.min(ae,ce.xmin),ie=Math.max(ie,ce.xmax),oe=Math.min(oe,ce.ymin),fe=Math.max(fe,ce.ymax)}function me(xe,ke,Ae,Oe){for(var He=!1,Ge=0;Ge<Q.length;Ge++)Q[Ge].contains(xe,ke,Ae,Oe)&&(He=Q[Ge].subtract===!1);return He}return{xmin:ae,xmax:ie,ymin:oe,ymax:fe,pts:[],contains:me,isRect:!1,degenerate:!1}}function Z(K,Q,ae){Q._fullLayout._drawing=!1;var ie=Q._fullLayout,oe=ae.plotinfo,fe=ae.dragmode,ye=ie._lastSelectedSubplot&&ie._lastSelectedSubplot===oe.id,ce=(K.shiftKey||K.altKey)&&!(f(fe)&&u(fe));ye&&ce&&oe.selection&&oe.selection.selectionDefs&&!ae.selectionDefs?(ae.selectionDefs=oe.selection.selectionDefs,ae.mergedPolygons=oe.selection.mergedPolygons):(!ce||!oe.selection)&&te(ae),ye||(P(Q),ie._lastSelectedSubplot=oe.id)}function te(K){var Q=K.dragmode,ae=K.plotinfo,ie=K.gd;if(ie._fullLayout._activeShapeIndex>=0&&ie._fullLayout._deactivateShape(ie),f(Q)){var oe=ie._fullLayout,fe=oe._zoomlayer,ye=fe.selectAll(".select-outline-"+ae.id);if(ye&&ie._fullLayout._drawing){var ce=y(ye,K);ce&&o.call("_guiRelayout",ie,{shapes:ce}),ie._fullLayout._drawing=!1}}ae.selection={},ae.selection.selectionDefs=K.selectionDefs=[],ae.selection.mergedPolygons=K.mergedPolygons=[]}function re(K,Q,ae,ie){var oe=[],fe=Q.map(function(He){return He._id}),ye=ae.map(function(He){return He._id}),ce,me,xe;for(xe=0;xe<K.calcdata.length;xe++)if(ce=K.calcdata[xe],me=ce[0].trace,!(me.visible!==!0||!me._module||!me._module.selectPoints))if(ie&&(me.subplot===ie||me.geo===ie))oe.push(Oe(me._module,ce,Q[0],ae[0]));else if(me.type==="splom"&&me._xaxes[fe[0]]&&me._yaxes[ye[0]]){var ke=Oe(me._module,ce,Q[0],ae[0]);ke.scene=K._fullLayout._splomScenes[me.uid],oe.push(ke)}else if(me.type==="sankey"){var Ae=Oe(me._module,ce,Q[0],ae[0]);oe.push(Ae)}else{if(fe.indexOf(me.xaxis)===-1||ye.indexOf(me.yaxis)===-1)continue;oe.push(Oe(me._module,ce,A(K,me.xaxis),A(K,me.yaxis)))}return oe;function Oe(He,Ge,_e,Ie){return{_module:He,cd:Ge,xaxis:_e,yaxis:Ie}}}function W(K){return K&&Array.isArray(K)&&K[0].hoverOnBox!==!0}function J(K,Q){var ae=K[0],ie=-1,oe=[],fe,ye;for(ye=0;ye<Q.length;ye++)if(fe=Q[ye],ae.fullData._expandedIndex===fe.cd[0].trace._expandedIndex){if(ae.hoverOnBox===!0)break;ae.pointNumber!==void 0?ie=ae.pointNumber:ae.binNumber!==void 0&&(ie=ae.binNumber,oe=ae.pointNumbers);break}return{pointNumber:ie,pointNumbers:oe,searchInfo:fe}}function le(K){var Q=K.searchInfo.cd[0].trace,ae=K.pointNumber,ie=K.pointNumbers,oe=ie.length>0,fe=oe?ie[0]:ae;return Q.selectedpoints?Q.selectedpoints.indexOf(fe)>-1:!1}function ue(K,Q){var ae=[],ie,oe,fe,ye;for(ye=0;ye<K.length;ye++)ie=K[ye],ie.cd[0].trace.selectedpoints&&ie.cd[0].trace.selectedpoints.length>0&&ae.push(ie);if(ae.length===1&&(fe=ae[0]===Q.searchInfo,fe&&(oe=Q.searchInfo.cd[0].trace,oe.selectedpoints.length===Q.pointNumbers.length))){for(ye=0;ye<Q.pointNumbers.length;ye++)if(oe.selectedpoints.indexOf(Q.pointNumbers[ye])<0)return!1;return!0}return!1}function se(K){var Q=0,ae,ie,oe;for(oe=0;oe<K.length;oe++)if(ae=K[oe],ie=ae.cd[0].trace,ie.selectedpoints&&(ie.selectedpoints.length>1||(Q+=ie.selectedpoints.length,Q>1)))return!1;return Q===1}function G(K,Q,ae){var ie,oe,fe,ye;for(ie=0;ie<Q.length;ie++){var ce=Q[ie].cd[0].trace._fullInput,me=K._fullLayout._tracePreGUI[ce.uid]||{};me.selectedpoints===void 0&&(me.selectedpoints=ce._input.selectedpoints||null)}if(ae){var xe=ae.points||[];for(ie=0;ie<Q.length;ie++)ye=Q[ie].cd[0].trace,ye._input.selectedpoints=ye._fullInput.selectedpoints=[],ye._fullInput!==ye&&(ye.selectedpoints=[]);for(ie=0;ie<xe.length;ie++){var ke=xe[ie],Ae=ke.data,Oe=ke.fullData;ke.pointIndices?([].push.apply(Ae.selectedpoints,ke.pointIndices),ye._fullInput!==ye&&[].push.apply(Oe.selectedpoints,ke.pointIndices)):(Ae.selectedpoints.push(ke.pointIndex),ye._fullInput!==ye&&Oe.selectedpoints.push(ke.pointIndex))}}else for(ie=0;ie<Q.length;ie++)ye=Q[ie].cd[0].trace,delete ye.selectedpoints,delete ye._input.selectedpoints,ye._fullInput!==ye&&delete ye._fullInput.selectedpoints;var He=!1;for(ie=0;ie<Q.length;ie++){oe=Q[ie],fe=oe.cd,ye=fe[0].trace,o.traceIs(ye,"regl")&&(He=!0);var Ge=oe._module,_e=Ge.styleOnSelect||Ge.style;_e&&(_e(K,fe,fe[0].node3),fe[0].nodeRangePlot3&&_e(K,fe,fe[0].nodeRangePlot3))}He&&(b(K),S(K))}function Y(K,Q,ae){var ie;return ae?(ie=l.difference({regions:K,inverted:!1},{regions:[Q],inverted:!1}),ie.regions):(ie=l.union({regions:K,inverted:!1},{regions:[Q],inverted:!1}),ie.regions)}function ee(K,Q){if(Array.isArray(K))for(var ae=Q.cd,ie=Q.cd[0].trace,oe=0;oe<K.length;oe++)K[oe]=n(K[oe],ie,ae);return K}function $(K,Q){for(var ae=[],ie=0;ie<K.length;ie++){ae[ie]=[];for(var oe=0;oe<K[ie].length;oe++){ae[ie][oe]=[],ae[ie][oe][0]=oe?"L":"M";for(var fe=0;fe<K[ie][oe].length;fe++)ae[ie][oe].push(K[ie][oe][fe])}Q||ae[ie].push(["Z",ae[ie][0][1],ae[ie][0][2]])}return ae}k.exports={prepSelect:O,clearSelect:P,clearSelectionsCache:te,selectOnClick:I}},{"../../components/color":366,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/fx/helpers":402,"../../components/shapes/draw_newshape/display_outlines":454,"../../components/shapes/draw_newshape/helpers":455,"../../components/shapes/draw_newshape/newshapes":456,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/polygon":515,"../../lib/throttle":530,"../../plot_api/subroutines":544,"../../registry":638,"./axis_ids":558,"./constants":561,"./handle_outline":565,"./helpers":566,polybooljs:254}],576:[function(e,k,z){var l=e("@plotly/d3"),o=e("d3-time-format").utcFormat,c=e("../../lib"),p=c.numberFormat,t=e("fast-isnumeric"),n=c.cleanNumber,a=c.ms2DateTime,i=c.dateTime2ms,r=c.ensureNumber,f=c.isArrayOrTypedArray,u=e("../../constants/numerical"),s=u.FP_SAFE,h=u.BADNUM,d=u.LOG_CLIP,y=u.ONEWEEK,m=u.ONEDAY,g=u.ONEHOUR,x=u.ONEMIN,A=u.ONESEC,b=e("./axis_ids"),S=e("./constants"),w=S.HOUR_PATTERN,T=S.WEEKDAY_PATTERN;function _(P){return Math.pow(10,P)}function v(P){return P!=null}k.exports=function(M,E){E=E||{};var D=M._id||"x",N=D.charAt(0);function O(Y,ee){if(Y>0)return Math.log(Y)/Math.LN10;if(Y<=0&&ee&&M.range&&M.range.length===2){var $=M.range[0],K=M.range[1];return .5*($+K-2*d*Math.abs($-K))}else return h}function I(Y,ee,$,K){if((K||{}).msUTC&&t(Y))return+Y;var Q=i(Y,$||M.calendar);if(Q===h)if(t(Y)){Y=+Y;var ae=Math.floor(c.mod(Y+.05,1)*10),ie=Math.round(Y-ae/10);Q=i(new Date(ie))+ae/10}else return h;return Q}function F(Y,ee,$){return a(Y,ee,$||M.calendar)}function V(Y){return M._categories[Math.round(Y)]}function U(Y){if(v(Y)){if(M._categoriesMap===void 0&&(M._categoriesMap={}),M._categoriesMap[Y]!==void 0)return M._categoriesMap[Y];M._categories.push(typeof Y=="number"?String(Y):Y);var ee=M._categories.length-1;return M._categoriesMap[Y]=ee,ee}return h}function j(Y,ee){for(var $=new Array(ee),K=0;K<ee;K++){var Q=(Y[0]||[])[K],ae=(Y[1]||[])[K];$[K]=Z([Q,ae])}return $}function Z(Y){if(M._categoriesMap)return M._categoriesMap[Y]}function te(Y){var ee=Z(Y);if(ee!==void 0)return ee;if(t(Y))return+Y}function re(Y){return t(Y)?+Y:Z(Y)}function W(Y,ee,$){return l.round($+ee*Y,2)}function J(Y,ee,$){return(Y-$)/ee}var le=function(ee){return t(ee)?W(ee,M._m,M._b):h},ue=function(Y){return J(Y,M._m,M._b)};if(M.rangebreaks){var se=N==="y";le=function(Y){if(!t(Y))return h;var ee=M._rangebreaks.length;if(!ee)return W(Y,M._m,M._b);var $=se;M.range[0]>M.range[1]&&($=!$);for(var K=$?-1:1,Q=K*Y,ae=0,ie=0;ie<ee;ie++){var oe=K*M._rangebreaks[ie].min,fe=K*M._rangebreaks[ie].max;if(Q<oe)break;if(Q>fe)ae=ie+1;else{ae=Q<(oe+fe)/2?ie:ie+1;break}}var ye=M._B[ae]||0;return isFinite(ye)?W(Y,M._m2,ye):0},ue=function(Y){var ee=M._rangebreaks.length;if(!ee)return J(Y,M._m,M._b);for(var $=0,K=0;K<ee&&!(Y<M._rangebreaks[K].pmin);K++)Y>M._rangebreaks[K].pmax&&($=K+1);return J(Y,M._m2,M._B[$])}}M.c2l=M.type==="log"?O:r,M.l2c=M.type==="log"?_:r,M.l2p=le,M.p2l=ue,M.c2p=M.type==="log"?function(Y,ee){return le(O(Y,ee))}:le,M.p2c=M.type==="log"?function(Y){return _(ue(Y))}:ue,["linear","-"].indexOf(M.type)!==-1?(M.d2r=M.r2d=M.d2c=M.r2c=M.d2l=M.r2l=n,M.c2d=M.c2r=M.l2d=M.l2r=r,M.d2p=M.r2p=function(Y){return M.l2p(n(Y))},M.p2d=M.p2r=ue,M.cleanPos=r):M.type==="log"?(M.d2r=M.d2l=function(Y,ee){return O(n(Y),ee)},M.r2d=M.r2c=function(Y){return _(n(Y))},M.d2c=M.r2l=n,M.c2d=M.l2r=r,M.c2r=O,M.l2d=_,M.d2p=function(Y,ee){return M.l2p(M.d2r(Y,ee))},M.p2d=function(Y){return _(ue(Y))},M.r2p=function(Y){return M.l2p(n(Y))},M.p2r=ue,M.cleanPos=r):M.type==="date"?(M.d2r=M.r2d=c.identity,M.d2c=M.r2c=M.d2l=M.r2l=I,M.c2d=M.c2r=M.l2d=M.l2r=F,M.d2p=M.r2p=function(Y,ee,$){return M.l2p(I(Y,0,$))},M.p2d=M.p2r=function(Y,ee,$){return F(ue(Y),ee,$)},M.cleanPos=function(Y){return c.cleanDate(Y,h,M.calendar)}):M.type==="category"?(M.d2c=M.d2l=U,M.r2d=M.c2d=M.l2d=V,M.d2r=M.d2l_noadd=te,M.r2c=function(Y){var ee=re(Y);return ee!==void 0?ee:M.fraction2r(.5)},M.l2r=M.c2r=r,M.r2l=re,M.d2p=function(Y){return M.l2p(M.r2c(Y))},M.p2d=function(Y){return V(ue(Y))},M.r2p=M.d2p,M.p2r=ue,M.cleanPos=function(Y){return typeof Y=="string"&&Y!==""?Y:r(Y)}):M.type==="multicategory"&&(M.r2d=M.c2d=M.l2d=V,M.d2r=M.d2l_noadd=te,M.r2c=function(Y){var ee=te(Y);return ee!==void 0?ee:M.fraction2r(.5)},M.r2c_just_indices=Z,M.l2r=M.c2r=r,M.r2l=te,M.d2p=function(Y){return M.l2p(M.r2c(Y))},M.p2d=function(Y){return V(ue(Y))},M.r2p=M.d2p,M.p2r=ue,M.cleanPos=function(Y){return Array.isArray(Y)||typeof Y=="string"&&Y!==""?Y:r(Y)},M.setupMultiCategory=function(Y){var ee=M._traceIndices,$,K,Q=M._matchGroup;if(Q&&M._categories.length===0){for(var ae in Q)if(ae!==D){var ie=E[b.id2name(ae)];ee=ee.concat(ie._traceIndices)}}var oe=[[0,{}],[0,{}]],fe=[];for($=0;$<ee.length;$++){var ye=Y[ee[$]];if(N in ye){var ce=ye[N],me=ye._length||c.minRowLength(ce);if(f(ce[0])&&f(ce[1]))for(K=0;K<me;K++){var xe=ce[0][K],ke=ce[1][K];v(xe)&&v(ke)&&(fe.push([xe,ke]),xe in oe[0][1]||(oe[0][1][xe]=oe[0][0]++),ke in oe[1][1]||(oe[1][1][ke]=oe[1][0]++))}}}for(fe.sort(function(Ae,Oe){var He=oe[0][1],Ge=He[Ae[0]]-He[Oe[0]];if(Ge)return Ge;var _e=oe[1][1];return _e[Ae[1]]-_e[Oe[1]]}),$=0;$<fe.length;$++)U(fe[$])}),M.fraction2r=function(Y){var ee=M.r2l(M.range[0]),$=M.r2l(M.range[1]);return M.l2r(ee+Y*($-ee))},M.r2fraction=function(Y){var ee=M.r2l(M.range[0]),$=M.r2l(M.range[1]);return(M.r2l(Y)-ee)/($-ee)},M.cleanRange=function(Y,ee){ee||(ee={}),Y||(Y="range");var $=c.nestedProperty(M,Y).get(),K,Q;if(M.type==="date"?Q=c.dfltRange(M.calendar):N==="y"?Q=S.DFLTRANGEY:M._name==="realaxis"?Q=[0,1]:Q=ee.dfltRange||S.DFLTRANGEX,Q=Q.slice(),(M.rangemode==="tozero"||M.rangemode==="nonnegative")&&(Q[0]=0),!$||$.length!==2){c.nestedProperty(M,Y).set(Q);return}for(M.type==="date"&&!M.autorange&&($[0]=c.cleanDate($[0],h,M.calendar),$[1]=c.cleanDate($[1],h,M.calendar)),K=0;K<2;K++)if(M.type==="date"){if(!c.isDateTime($[K],M.calendar)){M[Y]=Q;break}if(M.r2l($[0])===M.r2l($[1])){var ae=c.constrain(M.r2l($[0]),c.MIN_MS+1e3,c.MAX_MS-1e3);$[0]=M.l2r(ae-1e3),$[1]=M.l2r(ae+1e3);break}}else{if(!t($[K]))if(t($[1-K]))$[K]=$[1-K]*(K?10:.1);else{M[Y]=Q;break}if($[K]<-s?$[K]=-s:$[K]>s&&($[K]=s),$[0]===$[1]){var ie=Math.max(1,Math.abs($[0]*1e-6));$[0]-=ie,$[1]+=ie}}},M.setScale=function(Y){var ee=E._size;if(M.overlaying){var $=b.getFromId({_fullLayout:E},M.overlaying);M.domain=$.domain}var K=Y&&M._r?"_r":"range",Q=M.calendar;M.cleanRange(K);var ae=M.r2l(M[K][0],Q),ie=M.r2l(M[K][1],Q),oe=N==="y";if(oe?(M._offset=ee.t+(1-M.domain[1])*ee.h,M._length=ee.h*(M.domain[1]-M.domain[0]),M._m=M._length/(ae-ie),M._b=-M._m*ie):(M._offset=ee.l+M.domain[0]*ee.w,M._length=ee.w*(M.domain[1]-M.domain[0]),M._m=M._length/(ie-ae),M._b=-M._m*ae),M._rangebreaks=[],M._lBreaks=0,M._m2=0,M._B=[],M.rangebreaks){var fe,ye;if(M._rangebreaks=M.locateBreaks(Math.min(ae,ie),Math.max(ae,ie)),M._rangebreaks.length){for(fe=0;fe<M._rangebreaks.length;fe++)ye=M._rangebreaks[fe],M._lBreaks+=Math.abs(ye.max-ye.min);var ce=oe;ae>ie&&(ce=!ce),ce&&M._rangebreaks.reverse();var me=ce?-1:1;for(M._m2=me*M._length/(Math.abs(ie-ae)-M._lBreaks),M._B.push(-M._m2*(oe?ie:ae)),fe=0;fe<M._rangebreaks.length;fe++)ye=M._rangebreaks[fe],M._B.push(M._B[M._B.length-1]-me*M._m2*(ye.max-ye.min));for(fe=0;fe<M._rangebreaks.length;fe++)ye=M._rangebreaks[fe],ye.pmin=le(ye.min),ye.pmax=le(ye.max)}}if(!isFinite(M._m)||!isFinite(M._b)||M._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},M.maskBreaks=function(Y){var ee=M.rangebreaks||[],$,K,Q,ae,ie;ee._cachedPatterns||(ee._cachedPatterns=ee.map(function(He){return He.enabled&&He.bounds?c.simpleMap(He.bounds,He.pattern?n:M.d2c):null})),ee._cachedValues||(ee._cachedValues=ee.map(function(He){return He.enabled&&He.values?c.simpleMap(He.values,M.d2c).sort(c.sorterAsc):null}));for(var oe=0;oe<ee.length;oe++){var fe=ee[oe];if(fe.enabled){if(fe.bounds){var ye=fe.pattern;switch($=ee._cachedPatterns[oe],K=$[0],Q=$[1],ye){case T:ie=new Date(Y),ae=ie.getUTCDay(),K>Q&&(Q+=7,ae<K&&(ae+=7));break;case w:ie=new Date(Y);var ce=ie.getUTCHours(),me=ie.getUTCMinutes(),xe=ie.getUTCSeconds(),ke=ie.getUTCMilliseconds();ae=ce+(me/60+xe/3600+ke/36e5),K>Q&&(Q+=24,ae<K&&(ae+=24));break;case"":ae=Y;break}if(ae>=K&&ae<Q)return h}else for(var Ae=ee._cachedValues[oe],Oe=0;Oe<Ae.length;Oe++)if(K=Ae[Oe],Q=K+fe.dvalue,Y>=K&&Y<Q)return h}}return Y},M.locateBreaks=function(Y,ee){var $,K,Q,ae,ie=[];if(!M.rangebreaks)return ie;var oe=M.rangebreaks.slice().sort(function(_e,Ie){return _e.pattern===T&&Ie.pattern===w?-1:Ie.pattern===T&&_e.pattern===w?1:0}),fe=function(_e,Ie){if(_e=c.constrain(_e,Y,ee),Ie=c.constrain(Ie,Y,ee),_e!==Ie){for(var We=!0,et=0;et<ie.length;et++){var Ne=ie[et];_e<Ne.max&&Ie>=Ne.min&&(_e<Ne.min&&(Ne.min=_e),Ie>Ne.max&&(Ne.max=Ie),We=!1)}We&&ie.push({min:_e,max:Ie})}};for($=0;$<oe.length;$++){var ye=oe[$];if(ye.enabled)if(ye.bounds){var ce=Y,me=ee;ye.pattern&&(ce=Math.floor(ce)),K=c.simpleMap(ye.bounds,ye.pattern?n:M.r2l),Q=K[0],ae=K[1];var xe=new Date(ce),ke,Ae;switch(ye.pattern){case T:Ae=y,ke=((ae<Q?7:0)+(ae-Q))*m,ce+=Q*m-(xe.getUTCDay()*m+xe.getUTCHours()*g+xe.getUTCMinutes()*x+xe.getUTCSeconds()*A+xe.getUTCMilliseconds());break;case w:Ae=m,ke=((ae<Q?24:0)+(ae-Q))*g,ce+=Q*g-(xe.getUTCHours()*g+xe.getUTCMinutes()*x+xe.getUTCSeconds()*A+xe.getUTCMilliseconds());break;default:ce=Math.min(K[0],K[1]),me=Math.max(K[0],K[1]),Ae=me-ce,ke=Ae}for(var Oe=ce;Oe<me;Oe+=Ae)fe(Oe,Oe+ke)}else for(var He=c.simpleMap(ye.values,M.d2c),Ge=0;Ge<He.length;Ge++)Q=He[Ge],ae=Q+ye.dvalue,fe(Q,ae)}return ie.sort(function(_e,Ie){return _e.min-Ie.min}),ie},M.makeCalcdata=function(Y,ee,$){var K,Q,ae,ie,oe=M.type,fe=oe==="date"&&Y[ee+"calendar"];if(ee in Y){if(K=Y[ee],ie=Y._length||c.minRowLength(K),c.isTypedArray(K)&&(oe==="linear"||oe==="log")){if(ie===K.length)return K;if(K.subarray)return K.subarray(0,ie)}if(oe==="multicategory")return j(K,ie);for(Q=new Array(ie),ae=0;ae<ie;ae++)Q[ae]=M.d2c(K[ae],0,fe,$)}else{var ye=ee+"0"in Y?M.d2c(Y[ee+"0"],0,fe):0,ce=Y["d"+ee]?Number(Y["d"+ee]):1;for(K=Y[{x:"y",y:"x"}[ee]],ie=Y._length||K.length,Q=new Array(ie),ae=0;ae<ie;ae++)Q[ae]=ye+ae*ce}if(M.rangebreaks)for(ae=0;ae<ie;ae++)Q[ae]=M.maskBreaks(Q[ae]);return Q},M.isValidRange=function(Y){return Array.isArray(Y)&&Y.length===2&&t(M.r2l(Y[0]))&&t(M.r2l(Y[1]))},M.isPtWithinRange=function(Y,ee){var $=M.c2l(Y[N],null,ee),K=M.r2l(M.range[0]),Q=M.r2l(M.range[1]);return K<Q?K<=$&&$<=Q:Q<=$&&$<=K},M._emptyCategories=function(){M._categories=[],M._categoriesMap={}},M.clearCalc=function(){var Y=M._matchGroup;if(Y){var ee=null,$=null;for(var K in Y){var Q=E[b.id2name(K)];if(Q._categories){ee=Q._categories,$=Q._categoriesMap;break}}ee&&$?(M._categories=ee,M._categoriesMap=$):M._emptyCategories()}else M._emptyCategories();if(M._initialCategories)for(var ae=0;ae<M._initialCategories.length;ae++)U(M._initialCategories[ae])},M.sortByInitialCategories=function(){var Y=[];if(M._emptyCategories(),M._initialCategories)for(var ee=0;ee<M._initialCategories.length;ee++)U(M._initialCategories[ee]);Y=Y.concat(M._traceIndices);var $=M._matchGroup;for(var K in $)if(D!==K){var Q=E[b.id2name(K)];Q._categories=M._categories,Q._categoriesMap=M._categoriesMap,Y=Y.concat(Q._traceIndices)}return Y};var G=E._d3locale;M.type==="date"&&(M._dateFormat=G?G.timeFormat:o,M._extraFormat=E._extraFormat),M._separators=E.separators,M._numFormat=G?G.numberFormat:p,delete M._minDtick,delete M._forceTick0}},{"../../constants/numerical":479,"../../lib":503,"./axis_ids":558,"./constants":561,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],577:[function(e,k,z){k.exports=function(o){var c=["showexponent","showtickprefix","showticksuffix"],p=c.filter(function(n){return o[n]!==void 0}),t=function(n){return o[n]===o[p[0]]};if(p.every(t)||p.length===1)return o[p[0]]}},{}],578:[function(e,k,z){var l=e("../../lib"),o=e("../../components/color").contrast,c=e("./layout_attributes"),p=e("./show_dflt"),t=e("../array_container_defaults");k.exports=function(i,r,f,u,s){s||(s={});var h=p(i),d=f("showticklabels");if(d){var y=s.font||{},m=r.color,g=r.ticklabelposition||"",x=g.indexOf("inside")!==-1?o(s.bgColor):m&&m!==c.color.dflt?m:y.color;if(l.coerceFont(f,"tickfont",{family:y.family,size:y.size,color:x}),s.noAng||f("tickangle"),u!=="category"){var A=f("tickformat");t(i,r,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:n}),r.tickformatstops.length||delete r.tickformatstops,!s.noExp&&!A&&u!=="date"&&(f("showexponent",h),f("exponentformat"),f("minexponent"),f("separatethousands"))}}};function n(a,i){function r(u,s){return l.coerce(a,i,c.tickformatstops,u,s)}var f=r("enabled");f&&(r("dtickrange"),r("value"))}},{"../../components/color":366,"../../lib":503,"../array_container_defaults":549,"./layout_attributes":569,"./show_dflt":577}],579:[function(e,k,z){var l=e("../../lib"),o=e("./layout_attributes");k.exports=function(p,t,n,a){var i=l.coerce2(p,t,o,"ticklen"),r=l.coerce2(p,t,o,"tickwidth"),f=l.coerce2(p,t,o,"tickcolor",t.color),u=n("ticks",a.outerTicks||i||r||f?"outside":"");u||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)}},{"../../lib":503,"./layout_attributes":569}],580:[function(e,k,z){var l=e("./clean_ticks"),o=e("../../lib").isArrayOrTypedArray;k.exports=function(p,t,n,a){function i(m){var g=p[m];return g!==void 0?g:(t._template||{})[m]}var r=i("tick0"),f=i("dtick"),u=i("tickvals"),s=o(u)?"array":f?"linear":"auto",h=n("tickmode",s);if(h==="auto")n("nticks");else if(h==="linear"){var d=t.dtick=l.dtick(f,a);t.tick0=l.tick0(r,a,t.calendar,d)}else if(a!=="multicategory"){var y=n("tickvals");y===void 0?t.tickmode="auto":n("ticktext")}}},{"../../lib":503,"./clean_ticks":560}],581:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../registry"),c=e("../../lib"),p=e("../../components/drawing"),t=e("./axes");k.exports=function(a,i,r,f){var u=a._fullLayout;if(i.length===0){t.redrawComponents(a);return}function s(w){var T=w.xaxis,_=w.yaxis;u._defs.select("#"+w.clipId+"> rect").call(p.setTranslate,0,0).call(p.setScale,1,1),w.plot.call(p.setTranslate,T._offset,_._offset).call(p.setScale,1,1);var v=w.plot.selectAll(".scatterlayer .trace");v.selectAll(".point").call(p.setPointGroupScale,1,1),v.selectAll(".textpoint").call(p.setTextPointsScale,1,1),v.call(p.hideOutsideRangePoints,w)}function h(w,T){var _=w.plotinfo,v=_.xaxis,P=_.yaxis,M=v._length,E=P._length,D=!!w.xr1,N=!!w.yr1,O=[];if(D){var I=c.simpleMap(w.xr0,v.r2l),F=c.simpleMap(w.xr1,v.r2l),V=I[1]-I[0],U=F[1]-F[0];O[0]=(I[0]*(1-T)+T*F[0]-I[0])/(I[1]-I[0])*M,O[2]=M*(1-T+T*U/V),v.range[0]=v.l2r(I[0]*(1-T)+T*F[0]),v.range[1]=v.l2r(I[1]*(1-T)+T*F[1])}else O[0]=0,O[2]=M;if(N){var j=c.simpleMap(w.yr0,P.r2l),Z=c.simpleMap(w.yr1,P.r2l),te=j[1]-j[0],re=Z[1]-Z[0];O[1]=(j[1]*(1-T)+T*Z[1]-j[1])/(j[0]-j[1])*E,O[3]=E*(1-T+T*re/te),P.range[0]=v.l2r(j[0]*(1-T)+T*Z[0]),P.range[1]=P.l2r(j[1]*(1-T)+T*Z[1])}else O[1]=0,O[3]=E;t.drawOne(a,v,{skipTitle:!0}),t.drawOne(a,P,{skipTitle:!0}),t.redrawComponents(a,[v._id,P._id]);var W=D?M/O[2]:1,J=N?E/O[3]:1,le=D?O[0]:0,ue=N?O[1]:0,se=D?O[0]/O[2]*M:0,G=N?O[1]/O[3]*E:0,Y=v._offset-se,ee=P._offset-G;_.clipRect.call(p.setTranslate,le,ue).call(p.setScale,1/W,1/J),_.plot.call(p.setTranslate,Y,ee).call(p.setScale,W,J),p.setPointGroupScale(_.zoomScalePts,1/W,1/J),p.setTextPointsScale(_.zoomScaleTxt,1/W,1/J)}var d;f&&(d=f());function y(){for(var w={},T=0;T<i.length;T++){var _=i[T],v=_.plotinfo.xaxis,P=_.plotinfo.yaxis;_.xr1&&(w[v._name+".range"]=_.xr1.slice()),_.yr1&&(w[P._name+".range"]=_.yr1.slice())}return d&&d(),o.call("relayout",a,w).then(function(){for(var M=0;M<i.length;M++)s(i[M].plotinfo)})}function m(){for(var w={},T=0;T<i.length;T++){var _=i[T],v=_.plotinfo.xaxis,P=_.plotinfo.yaxis;_.xr0&&(w[v._name+".range"]=_.xr0.slice()),_.yr0&&(w[P._name+".range"]=_.yr0.slice())}return o.call("relayout",a,w).then(function(){for(var M=0;M<i.length;M++)s(i[M].plotinfo)})}var g,x,A,b=l.ease(r.easing);a._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(A),A=null,m()});function S(){x=Date.now();for(var w=Math.min(1,(x-g)/r.duration),T=b(w),_=0;_<i.length;_++)h(i[_],T);x-g>r.duration?(y(),A=window.cancelAnimationFrame(S)):A=window.requestAnimationFrame(S)}return g=Date.now(),A=window.requestAnimationFrame(S),Promise.resolve()}},{"../../components/drawing":388,"../../lib":503,"../../registry":638,"./axes":554,"@plotly/d3":58}],582:[function(e,k,z){var l=e("../../registry").traceIs,o=e("./axis_autotype");k.exports=function(i,r,f,u){f("autotypenumbers",u.autotypenumbersDflt);var s=f("type",(u.splomStash||{}).type);s==="-"&&(c(r,u.data),r.type==="-"?r.type="linear":i.type=r.type)};function c(a,i){if(a.type==="-"){var r=a._id,f=r.charAt(0),u;r.indexOf("scene")!==-1&&(r=f);var s=p(i,r,f);if(!!s){if(s.type==="histogram"&&f==={v:"y",h:"x"}[s.orientation||"v"]){a.type="linear";return}var h=f+"calendar",d=s[h],y={noMultiCategory:!l(s,"cartesian")||l(s,"noMultiCategory")};if(s.type==="box"&&s._hasPreCompStats&&f==={h:"x",v:"y"}[s.orientation||"v"]&&(y.noMultiCategory=!0),y.autotypenumbers=a.autotypenumbers,n(s,f)){var m=t(s),g=[];for(u=0;u<i.length;u++){var x=i[u];!l(x,"box-violin")||(x[f+"axis"]||f)!==r||(x[m]!==void 0?g.push(x[m][0]):x.name!==void 0?g.push(x.name):g.push("text"),x[h]!==d&&(d=void 0))}a.type=o(g,d,y)}else if(s.type==="splom"){var A=s.dimensions,b=A[s._axesDim[r]];b.visible&&(a.type=o(b.values,d,y))}else a.type=o(s[f]||[s[f+"0"]],d,y)}}}function p(a,i,r){for(var f=0;f<a.length;f++){var u=a[f];if(u.type==="splom"&&u._length>0&&(u["_"+r+"axes"]||{})[i])return u;if((u[r+"axis"]||r)===i){if(n(u,r))return u;if((u[r]||[]).length||u[r+"0"])return u}}}function t(a){return{v:"x",h:"y"}[a.orientation||"v"]}function n(a,i){var r=t(a),f=l(a,"box-violin"),u=l(a._fullInput||{},"candlestick");return f&&!u&&i===r&&a[r]===void 0&&a[r+"0"]===void 0}},{"../../registry":638,"./axis_autotype":555}],583:[function(e,k,z){var l=e("../registry"),o=e("../lib");z.manageCommandObserver=function(i,r,f,u){var s={},h=!0;r&&r._commandObserver&&(s=r._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var d=z.hasSimpleAPICommandBindings(i,f,s.lookupTable);if(r&&r._commandObserver){if(d)return s;if(r._commandObserver.remove)return r._commandObserver.remove(),r._commandObserver=null,s}if(d){c(i,d,s.cache),s.check=function(){if(!!h){var x=c(i,d,s.cache);return x.changed&&u&&s.lookupTable[x.value]!==void 0&&(s.disable(),Promise.resolve(u({value:x.value,type:d.type,prop:d.prop,traces:d.traces,index:s.lookupTable[x.value]})).then(s.enable,s.enable)),x.changed}};for(var y=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],m=0;m<y.length;m++)i._internalOn(y[m],s.check);s.remove=function(){for(var g=0;g<y.length;g++)i._removeInternalListener(y[g],s.check)}}else o.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){h=!1},s.enable=function(){h=!0},r&&(r._commandObserver=s),s},z.hasSimpleAPICommandBindings=function(i,r,f){var u,s=r.length,h;for(u=0;u<s;u++){var d,y=r[u],m=y.method,g=y.args;if(Array.isArray(g)||(g=[]),!m)return!1;var x=z.computeAPICommandBindings(i,m,g);if(x.length!==1)return!1;if(!h)h=x[0],Array.isArray(h.traces)&&h.traces.sort();else{if(d=x[0],d.type!==h.type||d.prop!==h.prop)return!1;if(Array.isArray(h.traces))if(Array.isArray(d.traces)){d.traces.sort();for(var A=0;A<h.traces.length;A++)if(h.traces[A]!==d.traces[A])return!1}else return!1;else if(d.prop!==h.prop)return!1}d=x[0];var b=d.value;if(Array.isArray(b))if(b.length===1)b=b[0];else return!1;f&&(f[b]=u)}return h};function c(i,r,f){var u,s,h,d=!1;if(r.type==="data")u=i._fullData[r.traces!==null?r.traces[0]:0];else if(r.type==="layout")u=i._fullLayout;else return!1;return s=o.nestedProperty(u,r.prop).get(),h=f[r.type]=f[r.type]||{},h.hasOwnProperty(r.prop)&&h[r.prop]!==s&&(d=!0),h[r.prop]=s,{changed:d,value:s}}z.executeAPICommand=function(i,r,f){if(r==="skip")return Promise.resolve();var u=l.apiMethodRegistry[r],s=[i];Array.isArray(f)||(f=[]);for(var h=0;h<f.length;h++)s.push(f[h]);return u.apply(null,s).catch(function(d){return o.warn("API call to Plotly."+r+" rejected.",d),Promise.reject(d)})},z.computeAPICommandBindings=function(i,r,f){var u;switch(Array.isArray(f)||(f=[]),r){case"restyle":u=n(i,f);break;case"relayout":u=t(i,f);break;case"update":u=n(i,[f[0],f[2]]).concat(t(i,[f[1]]));break;case"animate":u=p(i,f);break;default:u=[]}return u};function p(i,r){return Array.isArray(r[0])&&r[0].length===1&&["string","number"].indexOf(typeof r[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:r[0][0].toString()}]:[]}function t(i,r){var f=[],u=r[0],s={};if(typeof u=="string")s[u]=r[1];else if(o.isPlainObject(u))s=u;else return f;return a(s,function(h,d,y){f.push({type:"layout",prop:h,value:y})},"",0),f}function n(i,r){var f,u,s,h,d=[];if(u=r[0],s=r[1],f=r[2],h={},typeof u=="string")h[u]=s;else if(o.isPlainObject(u))h=u,f===void 0&&(f=s);else return d;return f===void 0&&(f=null),a(h,function(y,m,g){var x,A;if(Array.isArray(g)){A=g.slice();var b=Math.min(A.length,i.data.length);f&&(b=Math.min(b,f.length)),x=[];for(var S=0;S<b;S++)x[S]=f?f[S]:S}else A=g,x=f?f.slice():null;if(x===null)Array.isArray(A)&&(A=A[0]);else if(Array.isArray(x)){if(!Array.isArray(A)){var w=A;A=[];for(var T=0;T<x.length;T++)A[T]=w}A.length=Math.min(x.length,A.length)}d.push({type:"data",prop:y,traces:x,value:A})},"",0),d}function a(i,r,f,u){Object.keys(i).forEach(function(s){var h=i[s];if(s[0]!=="_"){var d=f+(u>0?".":"")+s;o.isPlainObject(h)?a(h,r,d,u+1):r(d,s,h)}})}},{"../lib":503,"../registry":638}],584:[function(e,k,z){var l=e("../lib/extend").extendFlat;z.attributes=function(o,c){o=o||{},c=c||{};var p={valType:"info_array",editType:o.editType,items:[{valType:"number",min:0,max:1,editType:o.editType},{valType:"number",min:0,max:1,editType:o.editType}],dflt:[0,1]};o.name&&o.name+"",o.trace,c.description&&""+c.description;var t={x:l({},p,{}),y:l({},p,{}),editType:o.editType};return o.noGridCell||(t.row={valType:"integer",min:0,dflt:0,editType:o.editType},t.column={valType:"integer",min:0,dflt:0,editType:o.editType}),t},z.defaults=function(o,c,p,t){var n=t&&t.x||[0,1],a=t&&t.y||[0,1],i=c.grid;if(i){var r=p("domain.column");r!==void 0&&(r<i.columns?n=i._domains.x[r]:delete o.domain.column);var f=p("domain.row");f!==void 0&&(f<i.rows?a=i._domains.y[f]:delete o.domain.row)}var u=p("domain.x",n),s=p("domain.y",a);u[0]<u[1]||(o.domain.x=n.slice()),s[0]<s[1]||(o.domain.y=a.slice())}},{"../lib/extend":493}],585:[function(e,k,z){k.exports=function(l){var o=l.editType,c=l.colorEditType;c===void 0&&(c=o);var p={family:{valType:"string",noBlank:!0,strict:!0,editType:o},size:{valType:"number",min:1,editType:o},color:{valType:"color",editType:c},editType:o};return l.autoSize&&(p.size.dflt="auto"),l.autoColor&&(p.color.dflt="auto"),l.arrayOk&&(p.family.arrayOk=!0,p.size.arrayOk=!0,p.color.arrayOk=!0),p}},{}],586:[function(e,k,z){k.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],587:[function(e,k,z){z.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},z.axesNames=["lonaxis","lataxis"],z.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},z.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},z.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},z.clipPad=.001,z.precision=.1,z.landColor="#F0DC82",z.waterColor="#3399FF",z.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},z.sphereSVG={type:"Sphere"},z.fillLayers={ocean:1,land:1,lakes:1},z.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},z.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],z.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],z.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],588:[function(e,k,z){var l=e("@plotly/d3"),o=e("d3-geo"),c=o.geoPath,p=o.geoDistance,t=e("d3-geo-projection"),n=e("../../registry"),a=e("../../lib"),i=a.strTranslate,r=e("../../components/color"),f=e("../../components/drawing"),u=e("../../components/fx"),s=e("../plots"),h=e("../cartesian/axes"),d=e("../cartesian/autorange").getAutoRange,y=e("../../components/dragelement"),m=e("../cartesian/select").prepSelect,g=e("../cartesian/select").clearSelect,x=e("../cartesian/select").selectOnClick,A=e("./zoom"),b=e("./constants"),S=e("../../lib/geo_location_utils"),w=e("../../lib/topojson_utils"),T=e("topojson-client").feature;function _(D){this.id=D.id,this.graphDiv=D.graphDiv,this.container=D.container,this.topojsonURL=D.topojsonURL,this.isStatic=D.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var v=_.prototype;k.exports=function(N){return new _(N)},v.plot=function(D,N,O){var I=this,F=N[this.id],V=[],U=!1;for(var j in b.layerNameToAdjective)if(j!=="frame"&&F["show"+j]){U=!0;break}for(var Z=0;Z<D.length;Z++)if(D[0][0].trace.locationmode){U=!0;break}if(U){var te=w.getTopojsonName(F);(I.topojson===null||te!==I.topojsonName)&&(I.topojsonName=te,PlotlyGeoAssets.topojson[I.topojsonName]===void 0&&V.push(I.fetchTopojson()))}V=V.concat(S.fetchTraceGeoData(D)),O.push(new Promise(function(re,W){Promise.all(V).then(function(){I.topojson=PlotlyGeoAssets.topojson[I.topojsonName],I.update(D,N),re()}).catch(W)}))},v.fetchTopojson=function(){var D=this,N=w.getTopojsonPath(D.topojsonURL,D.topojsonName);return new Promise(function(O,I){l.json(N,function(F,V){if(F)return F.status===404?I(new Error(["plotly.js could not find topojson file at",N,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):I(new Error(["unexpected error while fetching topojson file at",N].join(" ")));PlotlyGeoAssets.topojson[D.topojsonName]=V,O()})})},v.update=function(D,N){var O=N[this.id];this.hasChoropleth=!1;for(var I=0;I<D.length;I++){var F=D[I],V=F[0].trace;V.type==="choropleth"&&(this.hasChoropleth=!0),V.visible===!0&&V._length>0&&V._module.calcGeoJSON(F,N)}var U=this.updateProjection(D,N);if(!U){(!this.viewInitial||this.scope!==O.scope)&&this.saveViewInitial(O),this.scope=O.scope,this.updateBaseLayers(N,O),this.updateDims(N,O),this.updateFx(N,O),s.generalUpdatePerTraceModule(this.graphDiv,this,D,O);var j=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=j.selectAll(".point"),this.dataPoints.text=j.selectAll("text"),this.dataPaths.line=j.selectAll(".js-line");var Z=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=Z.selectAll("path"),this.render()}},v.updateProjection=function(D,N){var O=this.graphDiv,I=N[this.id],F=N._size,V=I.domain,U=I.projection,j=I.lonaxis,Z=I.lataxis,te=j._ax,re=Z._ax,W=this.projection=P(I),J=[[F.l+F.w*V.x[0],F.t+F.h*(1-V.y[1])],[F.l+F.w*V.x[1],F.t+F.h*(1-V.y[0])]],le=I.center||{},ue=U.rotation||{},se=j.range||[],G=Z.range||[];if(I.fitbounds){te._length=J[1][0]-J[0][0],re._length=J[1][1]-J[0][1],te.range=d(O,te),re.range=d(O,re);var Y=(te.range[0]+te.range[1])/2,ee=(re.range[0]+re.range[1])/2;if(I._isScoped)le={lon:Y,lat:ee};else if(I._isClipped){le={lon:Y,lat:ee},ue={lon:Y,lat:ee,roll:ue.roll};var $=U.type,K=b.lonaxisSpan[$]/2||180,Q=b.lataxisSpan[$]/2||90;se=[Y-K,Y+K],G=[ee-Q,ee+Q]}else le={lon:Y,lat:ee},ue={lon:Y,lat:ue.lat,roll:ue.roll}}W.center([le.lon-ue.lon,le.lat-ue.lat]).rotate([-ue.lon,-ue.lat,ue.roll]).parallels(U.parallels);var ae=E(se,G);W.fitExtent(J,ae);var ie=this.bounds=W.getBounds(ae),oe=this.fitScale=W.scale(),fe=W.translate();if(I.fitbounds){var ye=W.getBounds(E(te.range,re.range)),ce=Math.min((ie[1][0]-ie[0][0])/(ye[1][0]-ye[0][0]),(ie[1][1]-ie[0][1])/(ye[1][1]-ye[0][1]));isFinite(ce)?W.scale(ce*oe):a.warn("Something went wrong during"+this.id+"fitbounds computations.")}else W.scale(U.scale*oe);var me=this.midPt=[(ie[0][0]+ie[1][0])/2,(ie[0][1]+ie[1][1])/2];if(W.translate([fe[0]+(me[0]-fe[0]),fe[1]+(me[1]-fe[1])]).clipExtent(ie),I._isAlbersUsa){var xe=W([le.lon,le.lat]),ke=W.translate();W.translate([ke[0]-(xe[0]-ke[0]),ke[1]-(xe[1]-ke[1])])}},v.updateBaseLayers=function(D,N){var O=this,I=O.topojson,F=O.layers,V=O.basePaths;function U(J){return J==="lonaxis"||J==="lataxis"}function j(J){return Boolean(b.lineLayers[J])}function Z(J){return Boolean(b.fillLayers[J])}var te=this.hasChoropleth?b.layersForChoropleth:b.layers,re=te.filter(function(J){return j(J)||Z(J)?N["show"+J]:U(J)?N[J].showgrid:!0}),W=O.framework.selectAll(".layer").data(re,String);W.exit().each(function(J){delete F[J],delete V[J],l.select(this).remove()}),W.enter().append("g").attr("class",function(J){return"layer "+J}).each(function(J){var le=F[J]=l.select(this);J==="bg"?O.bgRect=le.append("rect").style("pointer-events","all"):U(J)?V[J]=le.append("path").style("fill","none"):J==="backplot"?le.append("g").classed("choroplethlayer",!0):J==="frontplot"?le.append("g").classed("scatterlayer",!0):j(J)?V[J]=le.append("path").style("fill","none").style("stroke-miterlimit",2):Z(J)&&(V[J]=le.append("path").style("stroke","none"))}),W.order(),W.each(function(J){var le=V[J],ue=b.layerNameToAdjective[J];J==="frame"?le.datum(b.sphereSVG):j(J)||Z(J)?le.datum(T(I,I.objects[J])):U(J)&&le.datum(M(J,N,D)).call(r.stroke,N[J].gridcolor).call(f.dashLine,"",N[J].gridwidth),j(J)?le.call(r.stroke,N[ue+"color"]).call(f.dashLine,"",N[ue+"width"]):Z(J)&&le.call(r.fill,N[ue+"color"])})},v.updateDims=function(D,N){var O=this.bounds,I=(N.framewidth||0)/2,F=O[0][0]-I,V=O[0][1]-I,U=O[1][0]-F+I,j=O[1][1]-V+I;f.setRect(this.clipRect,F,V,U,j),this.bgRect.call(f.setRect,F,V,U,j).call(r.fill,N.bgcolor),this.xaxis._offset=F,this.xaxis._length=U,this.yaxis._offset=V,this.yaxis._length=j},v.updateFx=function(D,N){var O=this,I=O.graphDiv,F=O.bgRect,V=D.dragmode,U=D.clickmode;if(O.isStatic)return;function j(){var W=O.viewInitial,J={};for(var le in W)J[O.id+"."+le]=W[le];n.call("_guiRelayout",I,J),I.emit("plotly_doubleclick",null)}function Z(W){return O.projection.invert([W[0]+O.xaxis._offset,W[1]+O.yaxis._offset])}var te;V==="select"?te=function(W,J){var le=W.range={};le[O.id]=[Z([J.xmin,J.ymin]),Z([J.xmax,J.ymax])]}:V==="lasso"&&(te=function(W,J,le){var ue=W.lassoPoints={};ue[O.id]=le.filtered.map(Z)});var re={element:O.bgRect.node(),gd:I,plotinfo:{id:O.id,xaxis:O.xaxis,yaxis:O.yaxis,fillRangeItems:te},xaxes:[O.xaxis],yaxes:[O.yaxis],subplot:O.id,clickFn:function(W){W===2&&g(I)}};V==="pan"?(F.node().onmousedown=null,F.call(A(O,N)),F.on("dblclick.zoom",j),I._context._scrollZoom.geo||F.on("wheel.zoom",null)):(V==="select"||V==="lasso")&&(F.on(".zoom",null),re.prepFn=function(W,J,le){m(W,J,le,re,V)},y.init(re)),F.on("mousemove",function(){var W=O.projection.invert(a.getPositionFromD3Event());if(!W)return y.unhover(I,l.event);O.xaxis.p2c=function(){return W[0]},O.yaxis.p2c=function(){return W[1]},u.hover(I,l.event,O.id)}),F.on("mouseout",function(){I._dragging||y.unhover(I,l.event)}),F.on("click",function(){V!=="select"&&V!=="lasso"&&(U.indexOf("select")>-1&&x(l.event,I,[O.xaxis],[O.yaxis],O.id,re),U.indexOf("event")>-1&&u.click(I,l.event))})},v.makeFramework=function(){var D=this,N=D.graphDiv,O=N._fullLayout,I="clip"+O._uid+D.id;D.clipDef=O._clips.append("clipPath").attr("id",I),D.clipRect=D.clipDef.append("rect"),D.framework=l.select(D.container).append("g").attr("class","geo "+D.id).call(f.setClipUrl,I,N),D.project=function(F){var V=D.projection(F);return V?[V[0]-D.xaxis._offset,V[1]-D.yaxis._offset]:[null,null]},D.xaxis={_id:"x",c2p:function(F){return D.project(F)[0]}},D.yaxis={_id:"y",c2p:function(F){return D.project(F)[1]}},D.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},h.setConvert(D.mockAxis,O)},v.saveViewInitial=function(D){var N=D.center||{},O=D.projection,I=O.rotation||{};this.viewInitial={fitbounds:D.fitbounds,"projection.scale":O.scale};var F;D._isScoped?F={"center.lon":N.lon,"center.lat":N.lat}:D._isClipped?F={"projection.rotation.lon":I.lon,"projection.rotation.lat":I.lat}:F={"center.lon":N.lon,"center.lat":N.lat,"projection.rotation.lon":I.lon},a.extendFlat(this.viewInitial,F)},v.render=function(){var D=this.projection,N=D.getPath(),O;function I(V){var U=D(V.lonlat);return U?i(U[0],U[1]):null}function F(V){return D.isLonLatOverEdges(V.lonlat)?"none":null}for(O in this.basePaths)this.basePaths[O].attr("d",N);for(O in this.dataPaths)this.dataPaths[O].attr("d",function(V){return N(V.geojson)});for(O in this.dataPoints)this.dataPoints[O].attr("display",F).attr("transform",I)};function P(D){var N=D.projection,O=N.type,I=b.projNames[O];I="geo"+a.titleCase(I);for(var F=o[I]||t[I],V=F(),U=D._isSatellite?Math.acos(1/N.distance)*180/Math.PI:D._isClipped?b.lonaxisSpan[O]/2:null,j=["center","rotate","parallels","clipExtent"],Z=function(W){return W?V:[]},te=0;te<j.length;te++){var re=j[te];typeof V[re]!="function"&&(V[re]=Z)}return V.isLonLatOverEdges=function(W){if(V(W)===null)return!0;if(U){var J=V.rotate(),le=p(W,[-J[0],-J[1]]),ue=U*Math.PI/180;return le>ue}else return!1},V.getPath=function(){return c().projection(V)},V.getBounds=function(W){return V.getPath().bounds(W)},V.precision(b.precision),D._isSatellite&&V.tilt(N.tilt).distance(N.distance),U&&V.clipAngle(U-b.clipPad),V}function M(D,N,O){var I=1e-6,F=2.5,V=N[D],U=b.scopeDefaults[N.scope],j,Z,te;D==="lonaxis"?(j=U.lonaxisRange,Z=U.lataxisRange,te=function(ee,$){return[ee,$]}):D==="lataxis"&&(j=U.lataxisRange,Z=U.lonaxisRange,te=function(ee,$){return[$,ee]});var re={type:"linear",range:[j[0],j[1]-I],tick0:V.tick0,dtick:V.dtick};h.setConvert(re,O);var W=h.calcTicks(re);!N.isScoped&&D==="lonaxis"&&W.pop();for(var J=W.length,le=new Array(J),ue=0;ue<J;ue++)for(var se=W[ue].x,G=le[ue]=[],Y=Z[0];Y<Z[1]+F;Y+=F)G.push(te(se,Y));return{type:"MultiLineString",coordinates:le}}function E(D,N){var O=b.clipPad,I=D[0]+O,F=D[1]-O,V=N[0]+O,U=N[1]-O;I>0&&F<0&&(F+=360);var j=(F-I)/4;return{type:"Polygon",coordinates:[[[I,V],[I,U],[I+j,U],[I+2*j,U],[I+3*j,U],[F,U],[F,V],[F-j,V],[F-2*j,V],[F-3*j,V],[I,V]]]}}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../registry":638,"../cartesian/autorange":553,"../cartesian/axes":554,"../cartesian/select":575,"../plots":619,"./constants":587,"./zoom":592,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":315}],589:[function(e,k,z){var l=e("../../plots/get_data").getSubplotCalcData,o=e("../../lib").counterRegex,c=e("./geo"),p="geo",t=o(p),n={};n[p]={valType:"subplotid",dflt:p,editType:"calc"};function a(f){for(var u=f._fullLayout,s=f.calcdata,h=u._subplots[p],d=0;d<h.length;d++){var y=h[d],m=l(s,p,y),g=u[y],x=g._subplot;x||(x=c({id:y,graphDiv:f,container:u._geolayer.node(),topojsonURL:f._context.topojsonURL,staticPlot:f._context.staticPlot}),u[y]._subplot=x),x.plot(m,u,f._promises)}}function i(f,u,s,h){for(var d=h._subplots[p]||[],y=0;y<d.length;y++){var m=d[y],g=h[m]._subplot;!u[m]&&!!g&&(g.framework.remove(),g.clipDef.remove())}}function r(f){for(var u=f._fullLayout,s=u._subplots[p],h=0;h<s.length;h++){var d=u[s[h]],y=d._subplot;y.updateFx(u,d)}}k.exports={attr:p,name:p,idRoot:p,idRegex:t,attrRegex:t,attributes:n,layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),plot:a,updateFx:r,clean:i}},{"../../lib":503,"../../plots/get_data":593,"./geo":588,"./layout_attributes":590,"./layout_defaults":591}],590:[function(e,k,z){var l=e("../../components/color/attributes"),o=e("../domain").attributes,c=e("./constants"),p=e("../../plot_api/edit_types").overrideAll,t=e("../../lib/sort_object_keys"),n={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:l.lightLine},gridwidth:{valType:"number",min:0,dflt:1}},a=k.exports=p({domain:o({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:t(c.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:t(c.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:l.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:c.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:c.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:c.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:c.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:l.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:l.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:l.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:l.background},lonaxis:n,lataxis:n},"plot","from-root");a.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../domain":584,"./constants":587}],591:[function(e,k,z){var l=e("../../lib"),o=e("../subplot_defaults"),c=e("../get_data").getSubplotData,p=e("./constants"),t=e("./layout_attributes"),n=p.axesNames;k.exports=function(r,f,u){o(r,f,u,{type:"geo",attributes:t,handleDefaults:a,fullData:u,partition:"y"})};function a(i,r,f,u){var s=c(u.fullData,"geo",u.id),h=s.map(function(G){return G._expandedIndex}),d=f("resolution"),y=f("scope"),m=p.scopeDefaults[y],g=f("projection.type",m.projType),x=r._isAlbersUsa=g==="albers usa";x&&(y=r.scope="usa");var A=r._isScoped=y!=="world",b=r._isSatellite=g==="satellite",S=r._isConic=g.indexOf("conic")!==-1||g==="albers",w=r._isClipped=!!p.lonaxisSpan[g];if(i.visible===!1){var T=l.extendDeep({},r._template);T.showcoastlines=!1,T.showcountries=!1,T.showframe=!1,T.showlakes=!1,T.showland=!1,T.showocean=!1,T.showrivers=!1,T.showsubunits=!1,T.lonaxis&&(T.lonaxis.showgrid=!1),T.lataxis&&(T.lataxis.showgrid=!1),r._template=T}for(var _=f("visible"),v,P=0;P<n.length;P++){var M=n[P],E=[30,10][P],D;if(A)D=m[M+"Range"];else{var N=p[M+"Span"],O=(N[g]||N["*"])/2,I=f("projection.rotation."+M.substr(0,3),m.projRotate[P]);D=[I-O,I+O]}var F=f(M+".range",D);f(M+".tick0"),f(M+".dtick",E),v=f(M+".showgrid",_?void 0:!1),v&&(f(M+".gridcolor"),f(M+".gridwidth")),r[M]._ax={type:"linear",_id:M.slice(0,3),_traceIndices:h,setScale:l.identity,c2l:l.identity,r2l:l.identity,autorange:!0,range:F.slice(),_m:1,_input:{}}}var V=r.lonaxis.range,U=r.lataxis.range,j=V[0],Z=V[1];j>0&&Z<0&&(Z+=360);var te=(j+Z)/2,re;if(!x){var W=A?m.projRotate:[te,0,0];re=f("projection.rotation.lon",W[0]),f("projection.rotation.lat",W[1]),f("projection.rotation.roll",W[2]),v=f("showcoastlines",!A&&_),v&&(f("coastlinecolor"),f("coastlinewidth")),v=f("showocean",_?void 0:!1),v&&f("oceancolor")}var J,le;if(x?(J=-96.6,le=38.7):(J=A?te:re,le=(U[0]+U[1])/2),f("center.lon",J),f("center.lat",le),b&&(f("projection.tilt"),f("projection.distance")),S){var ue=m.projParallels||[0,60];f("projection.parallels",ue)}f("projection.scale"),v=f("showland",_?void 0:!1),v&&f("landcolor"),v=f("showlakes",_?void 0:!1),v&&f("lakecolor"),v=f("showrivers",_?void 0:!1),v&&(f("rivercolor"),f("riverwidth")),v=f("showcountries",A&&y!=="usa"&&_),v&&(f("countrycolor"),f("countrywidth")),(y==="usa"||y==="north america"&&d===50)&&(f("showsubunits",_),f("subunitcolor"),f("subunitwidth")),A||(v=f("showframe",_),v&&(f("framecolor"),f("framewidth"))),f("bgcolor");var se=f("fitbounds");se&&(delete r.projection.scale,A?(delete r.center.lon,delete r.center.lat):w?(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon,delete r.projection.rotation.lat,delete r.lonaxis.range,delete r.lataxis.range):(delete r.center.lon,delete r.center.lat,delete r.projection.rotation.lon))}},{"../../lib":503,"../get_data":593,"../subplot_defaults":632,"./constants":587,"./layout_attributes":590}],592:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../lib"),c=e("../../registry"),p=Math.PI/180,t=180/Math.PI,n={cursor:"pointer"},a={cursor:"auto"};function i(M,E){var D=M.projection,N;return E._isScoped?N=u:E._isClipped?N=h:N=s,N(M,D)}k.exports=i;function r(M,E){return l.behavior.zoom().translate(E.translate()).scale(E.scale())}function f(M,E,D){var N=M.id,O=M.graphDiv,I=O.layout,F=I[N],V=O._fullLayout,U=V[N],j={},Z={};function te(re,W){j[N+"."+re]=o.nestedProperty(F,re).get(),c.call("_storeDirectGUIEdit",I,V._preGUI,j);var J=o.nestedProperty(U,re);J.get()!==W&&(J.set(W),o.nestedProperty(F,re).set(W),Z[N+"."+re]=W)}D(te),te("projection.scale",E.scale()/M.fitScale),te("fitbounds",!1),O.emit("plotly_relayout",Z)}function u(M,E){var D=r(M,E);function N(){l.select(this).style(n)}function O(){E.scale(l.event.scale).translate(l.event.translate),M.render();var V=E.invert(M.midPt);M.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/M.fitScale,"geo.center.lon":V[0],"geo.center.lat":V[1]})}function I(V){var U=E.invert(M.midPt);V("center.lon",U[0]),V("center.lat",U[1])}function F(){l.select(this).style(a),f(M,E,I)}return D.on("zoomstart",N).on("zoom",O).on("zoomend",F),D}function s(M,E){var D=r(M,E),N=2,O,I,F,V,U,j,Z,te,re;function W(Y){return E.invert(Y)}function J(Y){var ee=W(Y);if(!ee)return!0;var $=E(ee);return Math.abs($[0]-Y[0])>N||Math.abs($[1]-Y[1])>N}function le(){l.select(this).style(n),O=l.mouse(this),I=E.rotate(),F=E.translate(),V=I,U=W(O)}function ue(){if(j=l.mouse(this),J(O)){D.scale(E.scale()),D.translate(E.translate());return}E.scale(l.event.scale),E.translate([F[0],l.event.translate[1]]),U?W(j)&&(te=W(j),Z=[V[0]+(te[0]-U[0]),I[1],I[2]],E.rotate(Z),V=Z):(O=j,U=W(O)),re=!0,M.render();var Y=E.rotate(),ee=E.invert(M.midPt);M.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/M.fitScale,"geo.center.lon":ee[0],"geo.center.lat":ee[1],"geo.projection.rotation.lon":-Y[0]})}function se(){l.select(this).style(a),re&&f(M,E,G)}function G(Y){var ee=E.rotate(),$=E.invert(M.midPt);Y("projection.rotation.lon",-ee[0]),Y("center.lon",$[0]),Y("center.lat",$[1])}return D.on("zoomstart",le).on("zoom",ue).on("zoomend",se),D}function h(M,E){E.rotate(),E.scale();var D=r(M,E),N=P(D,"zoomstart","zoom","zoomend"),O=0,I=D.on,F;D.on("zoomstart",function(){l.select(this).style(n);var te=l.mouse(this),re=E.rotate(),W=re,J=E.translate(),le=y(re);F=d(E,te),I.call(D,"zoom",function(){var ue=l.mouse(this);if(E.scale(l.event.scale),!F)te=ue,F=d(E,te);else if(d(E,ue)){E.rotate(re).translate(J);var se=d(E,ue),G=g(F,se),Y=w(m(le,G)),ee=x(Y,F,W);(!isFinite(ee[0])||!isFinite(ee[1])||!isFinite(ee[2]))&&(ee=W),E.rotate(ee),W=ee}U(N.of(this,arguments))}),V(N.of(this,arguments))}).on("zoomend",function(){l.select(this).style(a),I.call(D,"zoom",null),j(N.of(this,arguments)),f(M,E,Z)}).on("zoom.redraw",function(){M.render();var te=E.rotate();M.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/M.fitScale,"geo.projection.rotation.lon":-te[0],"geo.projection.rotation.lat":-te[1]})});function V(te){O++||te({type:"zoomstart"})}function U(te){te({type:"zoom"})}function j(te){--O||te({type:"zoomend"})}function Z(te){var re=E.rotate();te("projection.rotation.lon",-re[0]),te("projection.rotation.lat",-re[1])}return l.rebind(D,N,"on")}function d(M,E){var D=M.invert(E);return D&&isFinite(D[0])&&isFinite(D[1])&&T(D)}function y(M){var E=.5*M[0]*p,D=.5*M[1]*p,N=.5*M[2]*p,O=Math.sin(E),I=Math.cos(E),F=Math.sin(D),V=Math.cos(D),U=Math.sin(N),j=Math.cos(N);return[I*V*j+O*F*U,O*V*j-I*F*U,I*F*j+O*V*U,I*V*U-O*F*j]}function m(M,E){var D=M[0],N=M[1],O=M[2],I=M[3],F=E[0],V=E[1],U=E[2],j=E[3];return[D*F-N*V-O*U-I*j,D*V+N*F+O*j-I*U,D*U-N*j+O*F+I*V,D*j+N*U-O*V+I*F]}function g(M,E){if(!(!M||!E)){var D=v(M,E),N=Math.sqrt(_(D,D)),O=.5*Math.acos(Math.max(-1,Math.min(1,_(M,E)))),I=Math.sin(O)/N;return N&&[Math.cos(O),D[2]*I,-D[1]*I,D[0]*I]}}function x(M,E,D){var N=S(E,2,M[0]);N=S(N,1,M[1]),N=S(N,0,M[2]-D[2]);var O=E[0],I=E[1],F=E[2],V=N[0],U=N[1],j=N[2],Z=Math.atan2(I,O)*t,te=Math.sqrt(O*O+I*I),re,W;Math.abs(U)>te?(W=(U>0?90:-90)-Z,re=0):(W=Math.asin(U/te)*t-Z,re=Math.sqrt(te*te-U*U));var J=180-W-2*Z,le=(Math.atan2(j,V)-Math.atan2(F,re))*t,ue=(Math.atan2(j,V)-Math.atan2(F,-re))*t,se=A(D[0],D[1],W,le),G=A(D[0],D[1],J,ue);return se<=G?[W,le,D[2]]:[J,ue,D[2]]}function A(M,E,D,N){var O=b(D-M),I=b(N-E);return Math.sqrt(O*O+I*I)}function b(M){return(M%360+540)%360-180}function S(M,E,D){var N=D*p,O=M.slice(),I=E===0?1:0,F=E===2?1:2,V=Math.cos(N),U=Math.sin(N);return O[I]=M[I]*V-M[F]*U,O[F]=M[F]*V+M[I]*U,O}function w(M){return[Math.atan2(2*(M[0]*M[1]+M[2]*M[3]),1-2*(M[1]*M[1]+M[2]*M[2]))*t,Math.asin(Math.max(-1,Math.min(1,2*(M[0]*M[2]-M[3]*M[1]))))*t,Math.atan2(2*(M[0]*M[3]+M[1]*M[2]),1-2*(M[2]*M[2]+M[3]*M[3]))*t]}function T(M){var E=M[0]*p,D=M[1]*p,N=Math.cos(D);return[N*Math.cos(E),N*Math.sin(E),Math.sin(D)]}function _(M,E){for(var D=0,N=0,O=M.length;N<O;++N)D+=M[N]*E[N];return D}function v(M,E){return[M[1]*E[2]-M[2]*E[1],M[2]*E[0]-M[0]*E[2],M[0]*E[1]-M[1]*E[0]]}function P(M){for(var E=0,D=arguments.length,N=[];++E<D;)N.push(arguments[E]);var O=l.dispatch.apply(null,N);return O.of=function(I,F){return function(V){var U;try{U=V.sourceEvent=l.event,V.target=M,l.event=V,O[V.type].apply(I,F)}finally{l.event=U}}},O}},{"../../lib":503,"../../registry":638,"@plotly/d3":58}],593:[function(e,k,z){var l=e("../registry"),o=e("./cartesian/constants").SUBPLOT_PATTERN;z.getSubplotCalcData=function(c,p,t){var n=l.subplotsRegistry[p];if(!n)return[];for(var a=n.attr,i=[],r=0;r<c.length;r++){var f=c[r],u=f[0].trace;u[a]===t&&i.push(f)}return i},z.getModuleCalcData=function(c,p){var t=[],n=[],a;if(typeof p=="string"?a=l.getModule(p).plot:typeof p=="function"?a=p:a=p.plot,!a)return[t,c];for(var i=0;i<c.length;i++){var r=c[i],f=r[0].trace;f.visible!==!0||f._length===0||(f._module.plot===a?t.push(r):n.push(r))}return[t,n]},z.getSubplotData=function(p,t,n){if(!l.subplotsRegistry[t])return[];var a=l.subplotsRegistry[t].attr,i=[],r,f,u;if(t==="gl2d"){var s=n.match(o);f="x"+s[1],u="y"+s[2]}for(var h=0;h<p.length;h++)r=p[h],t==="gl2d"&&l.traceIs(r,"gl2d")?r[a[0]]===f&&r[a[1]]===u&&i.push(r):r[a]===n&&i.push(r);return i}},{"../registry":638,"./cartesian/constants":561}],594:[function(e,k,z){var l=e("mouse-change"),o=e("mouse-wheel"),c=e("mouse-event-offset"),p=e("../cartesian/constants"),t=e("has-passive-events");k.exports=a;function n(i,r){this.element=i,this.plot=r,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function a(i){var r=i.mouseContainer,f=i.glplot,u=new n(r,f);function s(){i.xaxis.autorange=!1,i.yaxis.autorange=!1}function h(){for(var y=i.graphDiv._fullLayout._axisConstraintGroups,m=i.xaxis._id,g=i.yaxis._id,x=0;x<y.length;x++)if(y[x][m]!==-1){if(y[x][g]!==-1)return!0;break}return!1}u.mouseListener=l(r,d),r.addEventListener("touchstart",function(y){var m=c(y.changedTouches[0],r);d(0,m[0],m[1]),d(1,m[0],m[1]),y.preventDefault()},t?{passive:!1}:!1),r.addEventListener("touchmove",function(y){y.preventDefault();var m=c(y.changedTouches[0],r);d(1,m[0],m[1]),y.preventDefault()},t?{passive:!1}:!1),r.addEventListener("touchend",function(y){d(0,u.lastPos[0],u.lastPos[1]),y.preventDefault()},t?{passive:!1}:!1);function d(y,m,g){var x=i.calcDataBox(),A=f.viewBox,b=u.lastPos[0],S=u.lastPos[1],w=p.MINDRAG*f.pixelRatio,T=p.MINZOOM*f.pixelRatio,_,v;m*=f.pixelRatio,g*=f.pixelRatio,g=A[3]-A[1]-g;function P(I,F,V){var U=Math.min(F,V),j=Math.max(F,V);U!==j?(x[I]=U,x[I+2]=j,u.dataBox=x,i.setRanges(x)):(i.selectBox.selectBox=[0,0,1,1],i.glplot.setDirty())}switch(i.fullLayout.dragmode){case"zoom":if(y){var M=m/(A[2]-A[0])*(x[2]-x[0])+x[0],E=g/(A[3]-A[1])*(x[3]-x[1])+x[1];u.boxInited||(u.boxStart[0]=M,u.boxStart[1]=E,u.dragStart[0]=m,u.dragStart[1]=g),u.boxEnd[0]=M,u.boxEnd[1]=E,u.boxInited=!0,!u.boxEnabled&&(u.boxStart[0]!==u.boxEnd[0]||u.boxStart[1]!==u.boxEnd[1])&&(u.boxEnabled=!0);var D=Math.abs(u.dragStart[0]-m)<T,N=Math.abs(u.dragStart[1]-g)<T;if(h()&&!(D&&N)){_=u.boxEnd[0]-u.boxStart[0],v=u.boxEnd[1]-u.boxStart[1];var O=(x[3]-x[1])/(x[2]-x[0]);Math.abs(_*O)>Math.abs(v)?(u.boxEnd[1]=u.boxStart[1]+Math.abs(_)*O*(v>=0?1:-1),u.boxEnd[1]<x[1]?(u.boxEnd[1]=x[1],u.boxEnd[0]=u.boxStart[0]+(x[1]-u.boxStart[1])/Math.abs(O)):u.boxEnd[1]>x[3]&&(u.boxEnd[1]=x[3],u.boxEnd[0]=u.boxStart[0]+(x[3]-u.boxStart[1])/Math.abs(O))):(u.boxEnd[0]=u.boxStart[0]+Math.abs(v)/O*(_>=0?1:-1),u.boxEnd[0]<x[0]?(u.boxEnd[0]=x[0],u.boxEnd[1]=u.boxStart[1]+(x[0]-u.boxStart[0])*Math.abs(O)):u.boxEnd[0]>x[2]&&(u.boxEnd[0]=x[2],u.boxEnd[1]=u.boxStart[1]+(x[2]-u.boxStart[0])*Math.abs(O)))}else D&&(u.boxEnd[0]=u.boxStart[0]),N&&(u.boxEnd[1]=u.boxStart[1])}else u.boxEnabled?(_=u.boxStart[0]!==u.boxEnd[0],v=u.boxStart[1]!==u.boxEnd[1],_||v?(_&&(P(0,u.boxStart[0],u.boxEnd[0]),i.xaxis.autorange=!1),v&&(P(1,u.boxStart[1],u.boxEnd[1]),i.yaxis.autorange=!1),i.relayoutCallback()):i.glplot.setDirty(),u.boxEnabled=!1,u.boxInited=!1):u.boxInited&&(u.boxInited=!1);break;case"pan":u.boxEnabled=!1,u.boxInited=!1,y?(u.panning||(u.dragStart[0]=m,u.dragStart[1]=g),Math.abs(u.dragStart[0]-m)<w&&(m=u.dragStart[0]),Math.abs(u.dragStart[1]-g)<w&&(g=u.dragStart[1]),_=(b-m)*(x[2]-x[0])/(f.viewBox[2]-f.viewBox[0]),v=(S-g)*(x[3]-x[1])/(f.viewBox[3]-f.viewBox[1]),x[0]+=_,x[2]+=_,x[1]+=v,x[3]+=v,i.setRanges(x),u.panning=!0,u.lastInputTime=Date.now(),s(),i.cameraChanged(),i.handleAnnotations()):u.panning&&(u.panning=!1,i.relayoutCallback());break}u.lastPos[0]=m,u.lastPos[1]=g}return u.wheelListener=o(r,function(y,m){if(!i.scrollZoom)return!1;var g=i.calcDataBox(),x=f.viewBox,A=u.lastPos[0],b=u.lastPos[1],S=Math.exp(5*m/(x[3]-x[1])),w=A/(x[2]-x[0])*(g[2]-g[0])+g[0],T=b/(x[3]-x[1])*(g[3]-g[1])+g[1];return g[0]=(g[0]-w)*S+w,g[2]=(g[2]-w)*S+w,g[1]=(g[1]-T)*S+T,g[3]=(g[3]-T)*S+T,i.setRanges(g),u.lastInputTime=Date.now(),s(),i.cameraChanged(),i.handleAnnotations(),i.relayoutCallback(),!0},!0),u}},{"../cartesian/constants":561,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],595:[function(e,k,z){var l=e("../cartesian/axes"),o=e("../../lib/str2rgbarray");function c(a){this.scene=a,this.gl=a.gl,this.pixelRatio=a.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var p=c.prototype,t=["xaxis","yaxis"];p.merge=function(a){this.titleEnable=!1,this.backgroundColor=o(a.plot_bgcolor);var i,r,f,u,s,h,d,y,m,g,x;for(g=0;g<2;++g){i=t[g];var A=i.charAt(0);for(r=a[this.scene[i]._name],f=r.title.text===this.scene.fullLayout._dfltTitle[A]?"":r.title.text,x=0;x<=2;x+=2)this.labelEnable[g+x]=!1,this.labels[g+x]=f,this.labelColor[g+x]=o(r.title.font.color),this.labelFont[g+x]=r.title.font.family,this.labelSize[g+x]=r.title.font.size,this.labelPad[g+x]=this.getLabelPad(i,r),this.tickEnable[g+x]=!1,this.tickColor[g+x]=o((r.tickfont||{}).color),this.tickAngle[g+x]=r.tickangle==="auto"?0:Math.PI*-r.tickangle/180,this.tickPad[g+x]=this.getTickPad(r),this.tickMarkLength[g+x]=0,this.tickMarkWidth[g+x]=r.tickwidth||0,this.tickMarkColor[g+x]=o(r.tickcolor),this.borderLineEnable[g+x]=!1,this.borderLineColor[g+x]=o(r.linecolor),this.borderLineWidth[g+x]=r.linewidth||0;d=this.hasSharedAxis(r),s=this.hasAxisInDfltPos(i,r)&&!d,h=this.hasAxisInAltrPos(i,r)&&!d,u=r.mirror||!1,y=d?String(u).indexOf("all")!==-1:!!u,m=d?u==="allticks":String(u).indexOf("ticks")!==-1,s?this.labelEnable[g]=!0:h&&(this.labelEnable[g+2]=!0),s?this.tickEnable[g]=r.showticklabels:h&&(this.tickEnable[g+2]=r.showticklabels),(s||y)&&(this.borderLineEnable[g]=r.showline),(h||y)&&(this.borderLineEnable[g+2]=r.showline),(s||m)&&(this.tickMarkLength[g]=this.getTickMarkLength(r)),(h||m)&&(this.tickMarkLength[g+2]=this.getTickMarkLength(r)),this.gridLineEnable[g]=r.showgrid,this.gridLineColor[g]=o(r.gridcolor),this.gridLineWidth[g]=r.gridwidth,this.zeroLineEnable[g]=r.zeroline,this.zeroLineColor[g]=o(r.zerolinecolor),this.zeroLineWidth[g]=r.zerolinewidth}},p.hasSharedAxis=function(a){var i=this.scene,r=i.fullLayout._subplots.gl2d,f=l.findSubplotsWithAxis(r,a);return f.indexOf(i.id)!==0},p.hasAxisInDfltPos=function(a,i){var r=i.side;if(a==="xaxis")return r==="bottom";if(a==="yaxis")return r==="left"},p.hasAxisInAltrPos=function(a,i){var r=i.side;if(a==="xaxis")return r==="top";if(a==="yaxis")return r==="right"},p.getLabelPad=function(a,i){var r=1.5,f=i.title.font.size,u=i.showticklabels;if(a==="xaxis")return i.side==="top"?-10+f*(r+(u?1:0)):-10+f*(r+(u?.5:0));if(a==="yaxis")return i.side==="right"?10+f*(r+(u?1:.5)):10+f*(r+(u?.5:0))},p.getTickPad=function(a){return a.ticks==="outside"?10+a.ticklen:15},p.getTickMarkLength=function(a){if(!a.ticks)return 0;var i=a.ticklen;return a.ticks==="inside"?-i:i};function n(a){return new c(a)}k.exports=n},{"../../lib/str2rgbarray":528,"../cartesian/axes":554}],596:[function(e,k,z){var l=e("../../plot_api/edit_types").overrideAll,o=e("./scene2d"),c=e("../layout_attributes"),p=e("../../constants/xmlns_namespaces"),t=e("../cartesian/constants"),n=e("../cartesian"),a=e("../../components/fx/layout_attributes"),i=e("../get_data").getSubplotData;z.name="gl2d",z.attr=["xaxis","yaxis"],z.idRoot=["x","y"],z.idRegex=t.idRegex,z.attrRegex=t.attrRegex,z.attributes=e("../cartesian/attributes"),z.supplyLayoutDefaults=function(r,f,u){f._has("cartesian")||n.supplyLayoutDefaults(r,f,u)},z.layoutAttrOverrides=l(n.layoutAttributes,"plot","from-root"),z.baseLayoutAttrOverrides=l({plot_bgcolor:c.plot_bgcolor,hoverlabel:a.hoverlabel},"plot","nested"),z.plot=function(f){for(var u=f._fullLayout,s=f._fullData,h=u._subplots.gl2d,d=0;d<h.length;d++){var y=h[d],m=u._plots[y],g=i(s,"gl2d",y),x=m._scene2d;x===void 0&&(x=new o({id:y,graphDiv:f,container:f.querySelector(".gl-container"),staticPlot:f._context.staticPlot,plotGlPixelRatio:f._context.plotGlPixelRatio},u),m._scene2d=x),x.plot(g,f.calcdata,u,f.layout)}},z.clean=function(r,f,u,s){for(var h=s._subplots.gl2d||[],d=0;d<h.length;d++){var y=h[d],m=s._plots[y];if(!!m._scene2d){var g=i(r,"gl2d",y);g.length===0&&(m._scene2d.destroy(),delete s._plots[y])}}n.clean.apply(this,arguments)},z.drawFramework=function(r){r._context.staticPlot||n.drawFramework(r)},z.toSVG=function(r){for(var f=r._fullLayout,u=f._subplots.gl2d,s=0;s<u.length;s++){var h=f._plots[u[s]],d=h._scene2d,y=d.toImage("png"),m=f._glimages.append("svg:image");m.attr({xmlns:p.svg,"xlink:href":y,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),d.destroy()}},z.updateFx=function(r){for(var f=r._fullLayout,u=f._subplots.gl2d,s=0;s<u.length;s++){var h=f._plots[u[s]]._scene2d;h.updateFx(f.dragmode)}}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../plot_api/edit_types":536,"../cartesian":568,"../cartesian/attributes":552,"../cartesian/constants":561,"../get_data":593,"../layout_attributes":610,"./scene2d":597}],597:[function(e,k,z){var l=e("../../registry"),o=e("../../plots/cartesian/axes"),c=e("../../components/fx"),p=e("../../../stackgl_modules").gl_plot2d,t=e("../../../stackgl_modules").gl_spikes2d,n=e("../../../stackgl_modules").gl_select_box,a=e("webgl-context"),i=e("./convert"),r=e("./camera"),f=e("../../lib/show_no_webgl_msg"),u=e("../cartesian/constraints"),s=u.enforce,h=u.clean,d=e("../cartesian/autorange").doAutoRange,y=e("../../components/dragelement/helpers"),m=y.drawMode,g=y.selectMode,x=["xaxis","yaxis"],A,b,S=e("../cartesian/constants").SUBPLOT_PATTERN;function w(v,P){this.container=v.container,this.graphDiv=v.graphDiv,this.pixelRatio=v.plotGlPixelRatio||window.devicePixelRatio,this.id=v.id,this.staticPlot=!!v.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(P),this.makeFramework(),!this.stopped&&(this.glplotOptions=i(this),this.glplotOptions.merge(P),this.glplot=p(this.glplotOptions),this.camera=r(this),this.traces={},this.spikes=t(this.glplot),this.selectBox=n(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}k.exports=w;var T=w.prototype;T.makeFramework=function(){if(this.staticPlot){if(!b&&(A=document.createElement("canvas"),b=a({canvas:A,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!b))throw new Error("Error creating static canvas/context for image server");this.canvas=A,this.gl=b}else{var v=this.container.querySelector(".gl-canvas-focus"),P=a({canvas:v,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!P){f(this),this.stopped=!0;return}this.canvas=v,this.gl=P}var M=this.canvas;M.style.width="100%",M.style.height="100%",M.style.position="absolute",M.style.top="0px",M.style.left="0px",M.style["pointer-events"]="none",this.updateSize(M);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var D=this.mouseContainer=document.createElement("div");D.style.position="absolute",D.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var N=this.container;N.appendChild(E),N.appendChild(D);var O=this;D.addEventListener("mouseout",function(){O.isMouseOver=!1,O.unhover()}),D.addEventListener("mouseover",function(){O.isMouseOver=!0})},T.toImage=function(v){v||(v="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(A),this.updateSize(this.canvas);var P=this.glplot.gl,M=P.drawingBufferWidth,E=P.drawingBufferHeight;P.clearColor(1,1,1,0),P.clear(P.COLOR_BUFFER_BIT|P.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),P.bindFramebuffer(P.FRAMEBUFFER,null);var D=new Uint8Array(M*E*4);P.readPixels(0,0,M,E,P.RGBA,P.UNSIGNED_BYTE,D);for(var N=0,O=E-1;N<O;++N,--O)for(var I=0;I<M;++I)for(var F=0;F<4;++F){var V=D[4*(M*N+I)+F];D[4*(M*N+I)+F]=D[4*(M*O+I)+F],D[4*(M*O+I)+F]=V}var U=document.createElement("canvas");U.width=M,U.height=E;var j=U.getContext("2d"),Z=j.createImageData(M,E);Z.data.set(D),j.putImageData(Z,0,0);var te;switch(v){case"jpeg":te=U.toDataURL("image/jpeg");break;case"webp":te=U.toDataURL("image/webp");break;default:te=U.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(A),te},T.updateSize=function(v){v||(v=this.canvas);var P=this.pixelRatio,M=this.fullLayout,E=M.width,D=M.height,N=Math.ceil(P*E)|0,O=Math.ceil(P*D)|0;return(v.width!==N||v.height!==O)&&(v.width=N,v.height=O),v},T.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var v=[o.calcTicks(this.xaxis),o.calcTicks(this.yaxis)],P=0;P<2;++P)for(var M=0;M<v[P].length;++M)v[P][M].text=v[P][M].text+"";return v};function _(v,P){for(var M=0;M<2;++M){var E=v[M],D=P[M];if(E.length!==D.length)return!0;for(var N=0;N<E.length;++N)if(E[N].x!==D[N].x)return!0}return!1}T.updateRefs=function(v){this.fullLayout=v;var P=this.id.match(S),M="xaxis"+P[1],E="yaxis"+P[2];this.xaxis=this.fullLayout[M],this.yaxis=this.fullLayout[E]},T.relayoutCallback=function(){var v=this.graphDiv,P=this.xaxis,M=this.yaxis,E=v.layout,D={},N=D[P._name+".range"]=P.range.slice(),O=D[M._name+".range"]=M.range.slice();D[P._name+".autorange"]=P.autorange,D[M._name+".autorange"]=M.autorange,l.call("_storeDirectGUIEdit",v.layout,v._fullLayout._preGUI,D);var I=E[P._name];I.range=N,I.autorange=P.autorange;var F=E[M._name];F.range=O,F.autorange=M.autorange,D.lastInputTime=this.camera.lastInputTime,v.emit("plotly_relayout",D)},T.cameraChanged=function(){var v=this.camera;this.glplot.setDataBox(this.calcDataBox());var P=this.computeTickMarks(),M=this.glplotOptions.ticks;_(P,M)&&(this.glplotOptions.ticks=P,this.glplotOptions.dataBox=v.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},T.handleAnnotations=function(){for(var v=this.graphDiv,P=this.fullLayout.annotations,M=0;M<P.length;M++){var E=P[M];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&l.getComponentMethod("annotations","drawOne")(v,M)}},T.destroy=function(){if(!!this.glplot){var v=this.traces;v&&Object.keys(v).map(function(P){v[P].dispose(),delete v[P]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},T.plot=function(v,P,M){var E=this.glplot;this.updateRefs(M),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(v,P),this.updateFx(M.dragmode);var D=M.width,N=M.height;this.updateSize(this.canvas);var O=this.glplotOptions;O.merge(M),O.screenBox=[0,0,D,N];var I={_fullLayout:{_axisConstraintGroups:M._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:M._size}};h(I,this.xaxis),h(I,this.yaxis);var F=M._size,V=this.xaxis.domain,U=this.yaxis.domain;O.viewBox=[F.l+V[0]*F.w,F.b+U[0]*F.h,D-F.r-(1-V[1])*F.w,N-F.t-(1-U[1])*F.h],this.mouseContainer.style.width=F.w*(V[1]-V[0])+"px",this.mouseContainer.style.height=F.h*(U[1]-U[0])+"px",this.mouseContainer.height=F.h*(U[1]-U[0]),this.mouseContainer.style.left=F.l+V[0]*F.w+"px",this.mouseContainer.style.top=F.t+(1-U[1])*F.h+"px";var j,Z;for(Z=0;Z<2;++Z)j=this[x[Z]],j._length=O.viewBox[Z+2]-O.viewBox[Z],d(this.graphDiv,j),j.setScale();s(I),O.ticks=this.computeTickMarks(),O.dataBox=this.calcDataBox(),O.merge(M),E.update(O),this.glplot.draw()},T.calcDataBox=function(){var v=this.xaxis,P=this.yaxis,M=v.range,E=P.range,D=v.r2l,N=P.r2l;return[D(M[0]),N(E[0]),D(M[1]),N(E[1])]},T.setRanges=function(v){var P=this.xaxis,M=this.yaxis,E=P.l2r,D=M.l2r;P.range=[E(v[0]),E(v[2])],M.range=[D(v[1]),D(v[3])]},T.updateTraces=function(v,P){var M=Object.keys(this.traces),E,D,N;this.fullData=v;e:for(E=0;E<M.length;E++){var O=M[E],I=this.traces[O];for(D=0;D<v.length;D++)if(N=v[D],N.uid===O&&N.type===I.type)continue e;I.dispose(),delete this.traces[O]}for(E=0;E<v.length;E++){N=v[E];var F=P[E],V=this.traces[N.uid];V?V.update(N,F):(V=N._module.plot(this,N,F),this.traces[N.uid]=V)}this.glplot.objects.sort(function(U,j){return U._trace.index-j._trace.index})},T.updateFx=function(v){g(v)||m(v)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),v==="pan"?this.mouseContainer.style.cursor="move":v==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},T.emitPointAction=function(v,P){for(var M=v.trace.uid,E=v.pointIndex,D,N=0;N<this.fullData.length;N++)this.fullData[N].uid===M&&(D=this.fullData[N]);var O={x:v.traceCoord[0],y:v.traceCoord[1],curveNumber:D.index,pointNumber:E,data:D._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};c.appendArrayPointValue(O,D,E),this.graphDiv.emit(P,{points:[O]})},T.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var v=this.glplot,P=this.camera,M=P.mouseListener,E=this.lastButtonState===1&&M.buttons===0,D=this.fullLayout;this.lastButtonState=M.buttons,this.cameraChanged();var N=M.x*v.pixelRatio,O=this.canvas.height-v.pixelRatio*M.y,I;if(P.boxEnabled&&D.dragmode==="zoom"){this.selectBox.enabled=!0;for(var F=this.selectBox.selectBox=[Math.min(P.boxStart[0],P.boxEnd[0]),Math.min(P.boxStart[1],P.boxEnd[1]),Math.max(P.boxStart[0],P.boxEnd[0]),Math.max(P.boxStart[1],P.boxEnd[1])],V=0;V<2;V++)P.boxStart[V]===P.boxEnd[V]&&(F[V]=v.dataBox[V],F[V+2]=v.dataBox[V+2]);v.setDirty()}else if(!P.panning&&this.isMouseOver){this.selectBox.enabled=!1;var U=D._size,j=this.xaxis.domain,Z=this.yaxis.domain;I=v.pick(N/v.pixelRatio+U.l+j[0]*U.w,O/v.pixelRatio-(U.t+(1-Z[1])*U.h));var te=I&&I.object._trace.handlePick(I);if(te&&E&&this.emitPointAction(te,"plotly_click"),I&&I.object._trace.hoverinfo!=="skip"&&D.hovermode&&te&&(!this.lastPickResult||this.lastPickResult.traceUid!==te.trace.uid||this.lastPickResult.dataCoord[0]!==te.dataCoord[0]||this.lastPickResult.dataCoord[1]!==te.dataCoord[1])){var re=te;this.lastPickResult={traceUid:te.trace?te.trace.uid:null,dataCoord:te.dataCoord.slice()},this.spikes.update({center:I.dataCoord}),re.screenCoord=[((v.viewBox[2]-v.viewBox[0])*(I.dataCoord[0]-v.dataBox[0])/(v.dataBox[2]-v.dataBox[0])+v.viewBox[0])/v.pixelRatio,(this.canvas.height-(v.viewBox[3]-v.viewBox[1])*(I.dataCoord[1]-v.dataBox[1])/(v.dataBox[3]-v.dataBox[1])-v.viewBox[1])/v.pixelRatio],this.emitPointAction(te,"plotly_hover");var W=this.fullData[re.trace.index]||{},J=re.pointIndex,le=c.castHoverinfo(W,D,J);if(le&&le!=="all"){var ue=le.split("+");ue.indexOf("x")===-1&&(re.traceCoord[0]=void 0),ue.indexOf("y")===-1&&(re.traceCoord[1]=void 0),ue.indexOf("z")===-1&&(re.traceCoord[2]=void 0),ue.indexOf("text")===-1&&(re.textLabel=void 0),ue.indexOf("name")===-1&&(re.name=void 0)}c.loneHover({x:re.screenCoord[0],y:re.screenCoord[1],xLabel:this.hoverFormatter("xaxis",re.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",re.traceCoord[1]),zLabel:re.traceCoord[2],text:re.textLabel,name:re.name,color:c.castHoverOption(W,J,"bgcolor")||re.color,borderColor:c.castHoverOption(W,J,"bordercolor"),fontFamily:c.castHoverOption(W,J,"font.family"),fontSize:c.castHoverOption(W,J,"font.size"),fontColor:c.castHoverOption(W,J,"font.color"),nameLength:c.castHoverOption(W,J,"namelength"),textAlign:c.castHoverOption(W,J,"align")},{container:this.svgContainer,gd:this.graphDiv})}}I||this.unhover(),v.draw()}},T.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),c.loneUnhover(this.svgContainer))},T.hoverFormatter=function(v,P){if(P!==void 0){var M=this[v];return o.tickText(M,M.c2l(P),"hover").text}}},{"../../../stackgl_modules":1120,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib/show_no_webgl_msg":525,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/constants":561,"../cartesian/constraints":562,"./camera":594,"./convert":595,"webgl-context":331}],598:[function(e,k,z){var l=e("../../plot_api/edit_types").overrideAll,o=e("../../components/fx/layout_attributes"),c=e("./scene"),p=e("../get_data").getSubplotData,t=e("../../lib"),n=e("../../constants/xmlns_namespaces"),a="gl3d",i="scene";z.name=a,z.attr=i,z.idRoot=i,z.idRegex=z.attrRegex=t.counterRegex("scene"),z.attributes=e("./layout/attributes"),z.layoutAttributes=e("./layout/layout_attributes"),z.baseLayoutAttrOverrides=l({hoverlabel:o.hoverlabel},"plot","nested"),z.supplyLayoutDefaults=e("./layout/defaults"),z.plot=function(f){for(var u=f._fullLayout,s=f._fullData,h=u._subplots[a],d=0;d<h.length;d++){var y=h[d],m=p(s,a,y),g=u[y],x=g.camera,A=g._scene;A||(A=new c({id:y,graphDiv:f,container:f.querySelector(".gl-container"),staticPlot:f._context.staticPlot,plotGlPixelRatio:f._context.plotGlPixelRatio,camera:x},u),g._scene=A),A.viewInitial||(A.viewInitial={up:{x:x.up.x,y:x.up.y,z:x.up.z},eye:{x:x.eye.x,y:x.eye.y,z:x.eye.z},center:{x:x.center.x,y:x.center.y,z:x.center.z}}),A.plot(m,u,f.layout)}},z.clean=function(r,f,u,s){for(var h=s._subplots[a]||[],d=0;d<h.length;d++){var y=h[d];!f[y]&&!!s[y]._scene&&(s[y]._scene.destroy(),s._infolayer&&s._infolayer.selectAll(".annotation-"+y).remove())}},z.toSVG=function(r){for(var f=r._fullLayout,u=f._subplots[a],s=f._size,h=0;h<u.length;h++){var d=f[u[h]],y=d.domain,m=d._scene,g=m.toImage("png"),x=f._glimages.append("svg:image");x.attr({xmlns:n.svg,"xlink:href":g,x:s.l+s.w*y.x[0],y:s.t+s.h*(1-y.y[1]),width:s.w*(y.x[1]-y.x[0]),height:s.h*(y.y[1]-y.y[0]),preserveAspectRatio:"none"}),m.destroy()}},z.cleanId=function(f){if(!!f.match(/^scene[0-9]*$/)){var u=f.substr(5);return u==="1"&&(u=""),i+u}},z.updateFx=function(r){for(var f=r._fullLayout,u=f._subplots[a],s=0;s<u.length;s++){var h=f[u[s]]._scene;h.updateFx(f.dragmode,f.hovermode)}}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../plot_api/edit_types":536,"../get_data":593,"./layout/attributes":599,"./layout/defaults":603,"./layout/layout_attributes":604,"./scene":608}],599:[function(e,k,z){k.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],600:[function(e,k,z){var l=e("../../../components/color"),o=e("../../cartesian/layout_attributes"),c=e("../../../lib/extend").extendFlat,p=e("../../../plot_api/edit_types").overrideAll;k.exports=p({visible:o.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:l.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:o.color,categoryorder:o.categoryorder,categoryarray:o.categoryarray,title:{text:o.title.text,font:o.title.font},type:c({},o.type,{values:["-","linear","log","date","category"]}),autotypenumbers:o.autotypenumbers,autorange:o.autorange,rangemode:o.rangemode,range:c({},o.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:o.tickmode,nticks:o.nticks,tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:o.ticks,mirror:o.mirror,ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,showticklabels:o.showticklabels,tickfont:o.tickfont,tickangle:o.tickangle,tickprefix:o.tickprefix,showtickprefix:o.showtickprefix,ticksuffix:o.ticksuffix,showticksuffix:o.showticksuffix,showexponent:o.showexponent,exponentformat:o.exponentformat,minexponent:o.minexponent,separatethousands:o.separatethousands,tickformat:o.tickformat,tickformatstops:o.tickformatstops,hoverformat:o.hoverformat,showline:o.showline,linecolor:o.linecolor,linewidth:o.linewidth,showgrid:o.showgrid,gridcolor:c({},o.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:o.gridwidth,zeroline:o.zeroline,zerolinecolor:o.zerolinecolor,zerolinewidth:o.zerolinewidth,_deprecated:{title:o._deprecated.title,titlefont:o._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":366,"../../../lib/extend":493,"../../../plot_api/edit_types":536,"../../cartesian/layout_attributes":569}],601:[function(e,k,z){var l=e("tinycolor2").mix,o=e("../../../lib"),c=e("../../../plot_api/plot_template"),p=e("./axis_attributes"),t=e("../../cartesian/type_defaults"),n=e("../../cartesian/axis_defaults"),a=["xaxis","yaxis","zaxis"],i=100*(204-68)/(255-68);k.exports=function(f,u,s){var h,d;function y(x,A){return o.coerce(h,d,p,x,A)}for(var m=0;m<a.length;m++){var g=a[m];h=f[g]||{},d=c.newContainer(u,g),d._id=g[0]+s.scene,d._name=g,t(h,d,y,s),n(h,d,y,{font:s.font,letter:g[0],data:s.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:s.bgColor,calendar:s.calendar},s.fullLayout),y("gridcolor",l(d.color,s.bgColor,i).toRgbString()),y("title.text",g[0]),d.setScale=o.noop,y("showspikes")&&(y("spikesides"),y("spikethickness"),y("spikecolor",d.color)),y("showaxeslabels"),y("showbackground")&&y("backgroundcolor")}}},{"../../../lib":503,"../../../plot_api/plot_template":543,"../../cartesian/axis_defaults":556,"../../cartesian/type_defaults":582,"./axis_attributes":600,tinycolor2:312}],602:[function(e,k,z){var l=e("../../../lib/str2rgbarray"),o=e("../../../lib"),c=["xaxis","yaxis","zaxis"];function p(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var t=p.prototype;t.merge=function(a,i){for(var r=this,f=0;f<3;++f){var u=i[c[f]];if(!u.visible){r.tickEnable[f]=!1,r.labelEnable[f]=!1,r.lineEnable[f]=!1,r.lineTickEnable[f]=!1,r.gridEnable[f]=!1,r.zeroEnable[f]=!1,r.backgroundEnable[f]=!1;continue}r.labels[f]=a._meta?o.templateString(u.title.text,a._meta):u.title.text,"font"in u.title&&(u.title.font.color&&(r.labelColor[f]=l(u.title.font.color)),u.title.font.family&&(r.labelFont[f]=u.title.font.family),u.title.font.size&&(r.labelSize[f]=u.title.font.size)),"showline"in u&&(r.lineEnable[f]=u.showline),"linecolor"in u&&(r.lineColor[f]=l(u.linecolor)),"linewidth"in u&&(r.lineWidth[f]=u.linewidth),"showgrid"in u&&(r.gridEnable[f]=u.showgrid),"gridcolor"in u&&(r.gridColor[f]=l(u.gridcolor)),"gridwidth"in u&&(r.gridWidth[f]=u.gridwidth),u.type==="log"?r.zeroEnable[f]=!1:"zeroline"in u&&(r.zeroEnable[f]=u.zeroline),"zerolinecolor"in u&&(r.zeroLineColor[f]=l(u.zerolinecolor)),"zerolinewidth"in u&&(r.zeroLineWidth[f]=u.zerolinewidth),"ticks"in u&&!!u.ticks?r.lineTickEnable[f]=!0:r.lineTickEnable[f]=!1,"ticklen"in u&&(r.lineTickLength[f]=r._defaultLineTickLength[f]=u.ticklen),"tickcolor"in u&&(r.lineTickColor[f]=l(u.tickcolor)),"tickwidth"in u&&(r.lineTickWidth[f]=u.tickwidth),"tickangle"in u&&(r.tickAngle[f]=u.tickangle==="auto"?-3600:Math.PI*-u.tickangle/180),"showticklabels"in u&&(r.tickEnable[f]=u.showticklabels),"tickfont"in u&&(u.tickfont.color&&(r.tickColor[f]=l(u.tickfont.color)),u.tickfont.family&&(r.tickFont[f]=u.tickfont.family),u.tickfont.size&&(r.tickSize[f]=u.tickfont.size)),"mirror"in u?["ticks","all","allticks"].indexOf(u.mirror)!==-1?(r.lineTickMirror[f]=!0,r.lineMirror[f]=!0):u.mirror===!0?(r.lineTickMirror[f]=!1,r.lineMirror[f]=!0):(r.lineTickMirror[f]=!1,r.lineMirror[f]=!1):r.lineMirror[f]=!1,"showbackground"in u&&u.showbackground!==!1?(r.backgroundEnable[f]=!0,r.backgroundColor[f]=l(u.backgroundcolor)):r.backgroundEnable[f]=!1}};function n(a,i){var r=new p;return r.merge(a,i),r}k.exports=n},{"../../../lib":503,"../../../lib/str2rgbarray":528}],603:[function(e,k,z){var l=e("../../../lib"),o=e("../../../components/color"),c=e("../../../registry"),p=e("../../subplot_defaults"),t=e("./axis_defaults"),n=e("./layout_attributes"),a=e("../../get_data").getSubplotData,i="gl3d";k.exports=function(u,s,h){var d=s._basePlotModules.length>1;function y(m){if(!d){var g=l.validate(u[m],n[m]);if(g)return u[m]}}p(u,s,h,{type:i,attributes:n,handleDefaults:r,fullLayout:s,font:s.font,fullData:h,getDfltFromLayout:y,autotypenumbersDflt:s.autotypenumbers,paper_bgcolor:s.paper_bgcolor,calendar:s.calendar})};function r(f,u,s,h){for(var d=s("bgcolor"),y=o.combine(d,h.paper_bgcolor),m=["up","center","eye"],g=0;g<m.length;g++)s("camera."+m[g]+".x"),s("camera."+m[g]+".y"),s("camera."+m[g]+".z");s("camera.projection.type");var x=!!s("aspectratio.x")&&!!s("aspectratio.y")&&!!s("aspectratio.z"),A=x?"manual":"auto",b=s("aspectmode",A);x||(f.aspectratio=u.aspectratio={x:1,y:1,z:1},b==="manual"&&(u.aspectmode="auto"),f.aspectmode=u.aspectmode);var S=a(h.fullData,i,h.id);t(f,u,{font:h.font,scene:h.id,data:S,bgColor:y,calendar:h.calendar,autotypenumbersDflt:h.autotypenumbersDflt,fullLayout:h.fullLayout}),c.getComponentMethod("annotations3d","handleDefaults")(f,u,h);var w=h.getDfltFromLayout("dragmode");if(w!==!1&&!w)if(w="orbit",f.camera&&f.camera.up){var T=f.camera.up.x,_=f.camera.up.y,v=f.camera.up.z;v!==0&&(!T||!_||!v||v/Math.sqrt(T*T+_*_+v*v)>.999)&&(w="turntable")}else w="turntable";s("dragmode",w),s("hovermode",h.getDfltFromLayout("hovermode"))}},{"../../../components/color":366,"../../../lib":503,"../../../registry":638,"../../get_data":593,"../../subplot_defaults":632,"./axis_defaults":601,"./layout_attributes":604}],604:[function(e,k,z){var l=e("./axis_attributes"),o=e("../../domain").attributes,c=e("../../../lib/extend").extendFlat,p=e("../../../lib").counterRegex;function t(n,a,i){return{x:{valType:"number",dflt:n,editType:"camera"},y:{valType:"number",dflt:a,editType:"camera"},z:{valType:"number",dflt:i,editType:"camera"},editType:"camera"}}k.exports={_arrayAttrRegexps:[p("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:c(t(0,0,1),{}),center:c(t(0,0,0),{}),eye:c(t(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:o({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:l,yaxis:l,zaxis:l,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":503,"../../../lib/extend":493,"../../domain":584,"./axis_attributes":600}],605:[function(e,k,z){var l=e("../../../lib/str2rgbarray"),o=["xaxis","yaxis","zaxis"];function c(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var p=c.prototype;p.merge=function(n){for(var a=0;a<3;++a){var i=n[o[a]];if(!i.visible){this.enabled[a]=!1,this.drawSides[a]=!1;continue}this.enabled[a]=i.showspikes,this.colors[a]=l(i.spikecolor),this.drawSides[a]=i.spikesides,this.lineWidth[a]=i.spikethickness}};function t(n){var a=new c;return a.merge(n),a}k.exports=t},{"../../../lib/str2rgbarray":528}],606:[function(e,k,z){k.exports=n;var l=e("../../cartesian/axes"),o=e("../../../lib"),c=["xaxis","yaxis","zaxis"],p=[0,0,0];function t(a){for(var i=new Array(3),r=0;r<3;++r){for(var f=a[r],u=new Array(f.length),s=0;s<f.length;++s)u[s]=f[s].x;i[r]=u}return i}function n(a){for(var i=a.axesOptions,r=a.glplot.axesPixels,f=a.fullSceneLayout,u=[[],[],[]],s=0;s<3;++s){var h=f[c[s]];if(h._length=(r[s].hi-r[s].lo)*r[s].pixelsPerDataUnit/a.dataScale[s],Math.abs(h._length)===1/0||isNaN(h._length))u[s]=[];else{h._input_range=h.range.slice(),h.range[0]=r[s].lo/a.dataScale[s],h.range[1]=r[s].hi/a.dataScale[s],h._m=1/(a.dataScale[s]*r[s].pixelsPerDataUnit),h.range[0]===h.range[1]&&(h.range[0]-=1,h.range[1]+=1);var d=h.tickmode;if(h.tickmode==="auto"){h.tickmode="linear";var y=h.nticks||o.constrain(h._length/40,4,9);l.autoTicks(h,Math.abs(h.range[1]-h.range[0])/y)}for(var m=l.calcTicks(h,{msUTC:!0}),g=0;g<m.length;++g)m[g].x=m[g].x*a.dataScale[s],h.type==="date"&&(m[g].text=m[g].text.replace(/\<br\>/g," "));u[s]=m,h.tickmode=d}}i.ticks=u;for(var s=0;s<3;++s){p[s]=.5*(a.glplot.bounds[0][s]+a.glplot.bounds[1][s]);for(var g=0;g<2;++g)i.bounds[g][s]=a.glplot.bounds[g][s]}a.contourLevels=t(u)}},{"../../../lib":503,"../../cartesian/axes":554}],607:[function(e,k,z){function l(c,p){var t=[0,0,0,0],n,a;for(n=0;n<4;++n)for(a=0;a<4;++a)t[a]+=c[4*n+a]*p[n];return t}function o(c,p){var t=l(c.projection,l(c.view,l(c.model,[p[0],p[1],p[2],1])));return t}k.exports=o},{}],608:[function(e,k,z){var l=e("../../../stackgl_modules").gl_plot3d,o=l.createCamera,c=l.createScene,p=e("webgl-context"),t=e("has-passive-events"),n=e("../../registry"),a=e("../../lib"),i=a.preserveDrawingBuffer(),r=e("../../plots/cartesian/axes"),f=e("../../components/fx"),u=e("../../lib/str2rgbarray"),s=e("../../lib/show_no_webgl_msg"),h=e("./project"),d=e("./layout/convert"),y=e("./layout/spikes"),m=e("./layout/tick_marks"),g,x;function A(D,N){var O=document.createElement("div"),I=D.container;this.graphDiv=D.graphDiv;var F=document.createElementNS("http://www.w3.org/2000/svg","svg");F.style.position="absolute",F.style.top=F.style.left="0px",F.style.width=F.style.height="100%",F.style["z-index"]=20,F.style["pointer-events"]="none",O.appendChild(F),this.svgContainer=F,O.id=D.id,O.style.position="absolute",O.style.top=O.style.left="0px",O.style.width=O.style.height="100%",I.appendChild(O),this.fullLayout=N,this.id=D.id||"scene",this.fullSceneLayout=N[this.id],this.plotArgs=[[],{},{}],this.axesOptions=d(N,N[this.id]),this.spikeOptions=y(N[this.id]),this.container=O,this.staticMode=!!D.staticPlot,this.pixelRatio=this.pixelRatio||D.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=n.getComponentMethod("annotations3d","convert"),this.drawAnnotations=n.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var b=A.prototype;b.prepareOptions=function(){var D=this,N={canvas:D.canvas,gl:D.gl,glOptions:{preserveDrawingBuffer:i,premultipliedAlpha:!0,antialias:!0},container:D.container,axes:D.axesOptions,spikes:D.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:D.camera,pixelRatio:D.pixelRatio};if(D.staticMode){if(!x&&(g=document.createElement("canvas"),x=p({canvas:g,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!x))throw new Error("error creating static canvas/context for image server");N.gl=x,N.canvas=g}return N};var S=!0;b.tryCreatePlot=function(){var D=this,N=D.prepareOptions(),O=!0;try{D.glplot=c(N)}catch{if(D.staticMode||!S||i)O=!1;else{a.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{i=N.glOptions.preserveDrawingBuffer=!0,D.glplot=c(N)}catch{i=N.glOptions.preserveDrawingBuffer=!1,O=!1}}}return S=!1,O},b.initializeGLCamera=function(){var D=this,N=D.fullSceneLayout.camera,O=N.projection.type==="orthographic";D.camera=o(D.container,{center:[N.center.x,N.center.y,N.center.z],eye:[N.eye.x,N.eye.y,N.eye.z],up:[N.up.x,N.up.y,N.up.z],_ortho:O,zoomMin:.01,zoomMax:100,mode:"orbit"})},b.initializeGLPlot=function(){var D=this;D.initializeGLCamera();var N=D.tryCreatePlot();if(!N)return s(D);D.traces={},D.make4thDimension();var O=D.graphDiv,I=O.layout,F=function(){var U={};return D.isCameraChanged(I)&&(U[D.id+".camera"]=D.getCamera()),D.isAspectChanged(I)&&(U[D.id+".aspectratio"]=D.glplot.getAspectratio(),I[D.id].aspectmode!=="manual"&&(D.fullSceneLayout.aspectmode=I[D.id].aspectmode=U[D.id+".aspectmode"]="manual")),U},V=function(U){if(U.fullSceneLayout.dragmode!==!1){var j=F();U.saveLayout(I),U.graphDiv.emit("plotly_relayout",j)}};return D.glplot.canvas&&(D.glplot.canvas.addEventListener("mouseup",function(){V(D)}),D.glplot.canvas.addEventListener("wheel",function(U){if(O._context._scrollZoom.gl3d){if(D.camera._ortho){var j=U.deltaX>U.deltaY?1.1:1/1.1,Z=D.glplot.getAspectratio();D.glplot.setAspectratio({x:j*Z.x,y:j*Z.y,z:j*Z.z})}V(D)}},t?{passive:!1}:!1),D.glplot.canvas.addEventListener("mousemove",function(){if(D.fullSceneLayout.dragmode!==!1&&D.camera.mouseListener.buttons!==0){var U=F();D.graphDiv.emit("plotly_relayouting",U)}}),D.staticMode||D.glplot.canvas.addEventListener("webglcontextlost",function(U){O&&O.emit&&O.emit("plotly_webglcontextlost",{event:U,layer:D.id})},!1)),D.glplot.oncontextloss=function(){D.recoverContext()},D.glplot.onrender=function(){D.render()},!0},b.render=function(){var D=this,N=D.graphDiv,O,I=D.svgContainer,F=D.container.getBoundingClientRect();N._fullLayout._calcInverseTransform(N);var V=N._fullLayout._invScaleX,U=N._fullLayout._invScaleY,j=F.width*V,Z=F.height*U;I.setAttributeNS(null,"viewBox","0 0 "+j+" "+Z),I.setAttributeNS(null,"width",j),I.setAttributeNS(null,"height",Z),m(D),D.glplot.axes.update(D.axesOptions);for(var te=Object.keys(D.traces),re=null,W=D.glplot.selection,J=0;J<te.length;++J)O=D.traces[te[J]],O.data.hoverinfo!=="skip"&&O.handlePick(W)&&(re=O),O.setContourLevels&&O.setContourLevels();function le(ye,ce,me){var xe=D.fullSceneLayout[ye+"axis"];return xe.type!=="log"&&(ce=xe.d2l(ce)),r.hoverLabelText(xe,ce,me)}if(re!==null){var ue=h(D.glplot.cameraParams,W.dataCoordinate);O=re.data;var se=N._fullData[O.index],G=W.index,Y={xLabel:le("x",W.traceCoordinate[0],O.xhoverformat),yLabel:le("y",W.traceCoordinate[1],O.yhoverformat),zLabel:le("z",W.traceCoordinate[2],O.zhoverformat)},ee=f.castHoverinfo(se,D.fullLayout,G),$=(ee||"").split("+"),K=ee&&ee==="all";!se.hovertemplate&&!K&&($.indexOf("x")===-1&&(Y.xLabel=void 0),$.indexOf("y")===-1&&(Y.yLabel=void 0),$.indexOf("z")===-1&&(Y.zLabel=void 0),$.indexOf("text")===-1&&(W.textLabel=void 0),$.indexOf("name")===-1&&(re.name=void 0));var Q,ae=[];O.type==="cone"||O.type==="streamtube"?(Y.uLabel=le("x",W.traceCoordinate[3],O.uhoverformat),(K||$.indexOf("u")!==-1)&&ae.push("u: "+Y.uLabel),Y.vLabel=le("y",W.traceCoordinate[4],O.vhoverformat),(K||$.indexOf("v")!==-1)&&ae.push("v: "+Y.vLabel),Y.wLabel=le("z",W.traceCoordinate[5],O.whoverformat),(K||$.indexOf("w")!==-1)&&ae.push("w: "+Y.wLabel),Y.normLabel=W.traceCoordinate[6].toPrecision(3),(K||$.indexOf("norm")!==-1)&&ae.push("norm: "+Y.normLabel),O.type==="streamtube"&&(Y.divergenceLabel=W.traceCoordinate[7].toPrecision(3),(K||$.indexOf("divergence")!==-1)&&ae.push("divergence: "+Y.divergenceLabel)),W.textLabel&&ae.push(W.textLabel),Q=ae.join("<br>")):O.type==="isosurface"||O.type==="volume"?(Y.valueLabel=r.hoverLabelText(D._mockAxis,D._mockAxis.d2l(W.traceCoordinate[3]),O.valuehoverformat),ae.push("value: "+Y.valueLabel),W.textLabel&&ae.push(W.textLabel),Q=ae.join("<br>")):Q=W.textLabel;var ie={x:W.traceCoordinate[0],y:W.traceCoordinate[1],z:W.traceCoordinate[2],data:se._input,fullData:se,curveNumber:se.index,pointNumber:G};f.appendArrayPointValue(ie,se,G),O._module.eventData&&(ie=se._module.eventData(ie,W,se,{},G));var oe={points:[ie]};if(D.fullSceneLayout.hovermode){var fe=[];f.loneHover({trace:se,x:(.5+.5*ue[0]/ue[3])*j,y:(.5-.5*ue[1]/ue[3])*Z,xLabel:Y.xLabel,yLabel:Y.yLabel,zLabel:Y.zLabel,text:Q,name:re.name,color:f.castHoverOption(se,G,"bgcolor")||re.color,borderColor:f.castHoverOption(se,G,"bordercolor"),fontFamily:f.castHoverOption(se,G,"font.family"),fontSize:f.castHoverOption(se,G,"font.size"),fontColor:f.castHoverOption(se,G,"font.color"),nameLength:f.castHoverOption(se,G,"namelength"),textAlign:f.castHoverOption(se,G,"align"),hovertemplate:a.castOption(se,G,"hovertemplate"),hovertemplateLabels:a.extendFlat({},ie,Y),eventData:[ie]},{container:I,gd:N,inOut_bbox:fe}),ie.bbox=fe[0]}W.buttons&&W.distance<5?N.emit("plotly_click",oe):N.emit("plotly_hover",oe),this.oldEventData=oe}else f.loneUnhover(I),this.oldEventData&&N.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;D.drawAnnotations(D)},b.recoverContext=function(){var D=this;D.glplot.dispose();var N=function(){if(D.glplot.gl.isContextLost()){requestAnimationFrame(N);return}if(!D.initializeGLPlot()){a.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}D.plot.apply(D,D.plotArgs)};requestAnimationFrame(N)};var w=["xaxis","yaxis","zaxis"];function T(D,N,O){for(var I=D.fullSceneLayout,F=0;F<3;F++){var V=w[F],U=V.charAt(0),j=I[V],Z=N[U],te=N[U+"calendar"],re=N["_"+U+"length"];if(!a.isArrayOrTypedArray(Z))O[0][F]=Math.min(O[0][F],0),O[1][F]=Math.max(O[1][F],re-1);else for(var W,J=0;J<(re||Z.length);J++)if(a.isArrayOrTypedArray(Z[J]))for(var le=0;le<Z[J].length;++le)W=j.d2l(Z[J][le],0,te),!isNaN(W)&&isFinite(W)&&(O[0][F]=Math.min(O[0][F],W),O[1][F]=Math.max(O[1][F],W));else W=j.d2l(Z[J],0,te),!isNaN(W)&&isFinite(W)&&(O[0][F]=Math.min(O[0][F],W),O[1][F]=Math.max(O[1][F],W))}}function _(D,N){for(var O=D.fullSceneLayout,I=O.annotations||[],F=0;F<3;F++)for(var V=w[F],U=V.charAt(0),j=O[V],Z=0;Z<I.length;Z++){var te=I[Z];if(te.visible){var re=j.r2l(te[U]);!isNaN(re)&&isFinite(re)&&(N[0][F]=Math.min(N[0][F],re),N[1][F]=Math.max(N[1][F],re))}}}b.plot=function(D,N,O){var I=this;if(I.plotArgs=[D,N,O],I.glplot.contextLost)return;var F,V,U,j,Z,te,re=N[I.id],W=O[I.id];I.fullLayout=N,I.fullSceneLayout=re,I.axesOptions.merge(N,re),I.spikeOptions.merge(re),I.setViewport(re),I.updateFx(re.dragmode,re.hovermode),I.camera.enableWheel=I.graphDiv._context._scrollZoom.gl3d,I.glplot.setClearColor(u(re.bgcolor)),I.setConvert(Z),D?Array.isArray(D)||(D=[D]):D=[];var J=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(U=0;U<D.length;++U)F=D[U],!(F.visible!==!0||F._length===0)&&T(this,F,J);_(this,J);var le=[1,1,1];for(j=0;j<3;++j)J[1][j]===J[0][j]?le[j]=1:le[j]=1/(J[1][j]-J[0][j]);for(I.dataScale=le,I.convertAnnotations(this),U=0;U<D.length;++U)F=D[U],!(F.visible!==!0||F._length===0)&&(V=I.traces[F.uid],V?V.data.type===F.type?V.update(F):(V.dispose(),V=F._module.plot(this,F),I.traces[F.uid]=V):(V=F._module.plot(this,F),I.traces[F.uid]=V),V.name=F.name);var ue=Object.keys(I.traces);e:for(U=0;U<ue.length;++U){for(j=0;j<D.length;++j)if(D[j].uid===ue[U]&&D[j].visible===!0&&D[j]._length!==0)continue e;V=I.traces[ue[U]],V.dispose(),delete I.traces[ue[U]]}I.glplot.objects.sort(function(We,et){return We._trace.data.index-et._trace.data.index});var se=[[0,0,0],[0,0,0]],G=[],Y={};for(U=0;U<3;++U){if(Z=re[w[U]],te=Z.type,te in Y?(Y[te].acc*=le[U],Y[te].count+=1):Y[te]={acc:le[U],count:1},Z.autorange){se[0][U]=1/0,se[1][U]=-1/0;var ee=I.glplot.objects,$=I.fullSceneLayout.annotations||[],K=Z._name.charAt(0);for(j=0;j<ee.length;j++){var Q=ee[j],ae=Q.bounds,ie=Q._trace.data._pad||0;Q.constructor.name==="ErrorBars"&&Z._lowerLogErrorBound?se[0][U]=Math.min(se[0][U],Z._lowerLogErrorBound):se[0][U]=Math.min(se[0][U],ae[0][U]/le[U]-ie),se[1][U]=Math.max(se[1][U],ae[1][U]/le[U]+ie)}for(j=0;j<$.length;j++){var oe=$[j];if(oe.visible){var fe=Z.r2l(oe[K]);se[0][U]=Math.min(se[0][U],fe),se[1][U]=Math.max(se[1][U],fe)}}if("rangemode"in Z&&Z.rangemode==="tozero"&&(se[0][U]=Math.min(se[0][U],0),se[1][U]=Math.max(se[1][U],0)),se[0][U]>se[1][U])se[0][U]=-1,se[1][U]=1;else{var ye=se[1][U]-se[0][U];se[0][U]-=ye/32,se[1][U]+=ye/32}if(Z.autorange==="reversed"){var ce=se[0][U];se[0][U]=se[1][U],se[1][U]=ce}}else{var me=Z.range;se[0][U]=Z.r2l(me[0]),se[1][U]=Z.r2l(me[1])}se[0][U]===se[1][U]&&(se[0][U]-=1,se[1][U]+=1),G[U]=se[1][U]-se[0][U],I.glplot.setBounds(U,{min:se[0][U]*le[U],max:se[1][U]*le[U]})}var xe,ke=re.aspectmode;if(ke==="cube")xe=[1,1,1];else if(ke==="manual"){var Ae=re.aspectratio;xe=[Ae.x,Ae.y,Ae.z]}else if(ke==="auto"||ke==="data"){var Oe=[1,1,1];for(U=0;U<3;++U){Z=re[w[U]],te=Z.type;var He=Y[te];Oe[U]=Math.pow(He.acc,1/He.count)/le[U]}ke==="data"||Math.max.apply(null,Oe)/Math.min.apply(null,Oe)<=4?xe=Oe:xe=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");re.aspectratio.x=W.aspectratio.x=xe[0],re.aspectratio.y=W.aspectratio.y=xe[1],re.aspectratio.z=W.aspectratio.z=xe[2],I.glplot.setAspectratio(re.aspectratio),I.viewInitial.aspectratio||(I.viewInitial.aspectratio={x:re.aspectratio.x,y:re.aspectratio.y,z:re.aspectratio.z}),I.viewInitial.aspectmode||(I.viewInitial.aspectmode=re.aspectmode);var Ge=re.domain||null,_e=N._size||null;if(Ge&&_e){var Ie=I.container.style;Ie.position="absolute",Ie.left=_e.l+Ge.x[0]*_e.w+"px",Ie.top=_e.t+(1-Ge.y[1])*_e.h+"px",Ie.width=_e.w*(Ge.x[1]-Ge.x[0])+"px",Ie.height=_e.h*(Ge.y[1]-Ge.y[0])+"px"}I.glplot.redraw()},b.destroy=function(){var D=this;!D.glplot||(D.camera.mouseListener.enabled=!1,D.container.removeEventListener("wheel",D.camera.wheelListener),D.camera=null,D.glplot.dispose(),D.container.parentNode.removeChild(D.container),D.glplot=null)};function v(D){return[[D.eye.x,D.eye.y,D.eye.z],[D.center.x,D.center.y,D.center.z],[D.up.x,D.up.y,D.up.z]]}function P(D){return{up:{x:D.up[0],y:D.up[1],z:D.up[2]},center:{x:D.center[0],y:D.center[1],z:D.center[2]},eye:{x:D.eye[0],y:D.eye[1],z:D.eye[2]},projection:{type:D._ortho===!0?"orthographic":"perspective"}}}b.getCamera=function(){var D=this;return D.camera.view.recalcMatrix(D.camera.view.lastT()),P(D.camera)},b.setViewport=function(D){var N=this,O=D.camera;N.camera.lookAt.apply(this,v(O)),N.glplot.setAspectratio(D.aspectratio);var I=O.projection.type==="orthographic",F=N.camera._ortho;I!==F&&(N.glplot.redraw(),N.glplot.clearRGBA(),N.glplot.dispose(),N.initializeGLPlot())},b.isCameraChanged=function(D){var N=this,O=N.getCamera(),I=a.nestedProperty(D,N.id+".camera"),F=I.get();function V(te,re,W,J){var le=["up","center","eye"],ue=["x","y","z"];return re[le[W]]&&te[le[W]][ue[J]]===re[le[W]][ue[J]]}var U=!1;if(F===void 0)U=!0;else{for(var j=0;j<3;j++)for(var Z=0;Z<3;Z++)if(!V(O,F,j,Z)){U=!0;break}(!F.projection||O.projection&&O.projection.type!==F.projection.type)&&(U=!0)}return U},b.isAspectChanged=function(D){var N=this,O=N.glplot.getAspectratio(),I=a.nestedProperty(D,N.id+".aspectratio"),F=I.get();return F===void 0||F.x!==O.x||F.y!==O.y||F.z!==O.z},b.saveLayout=function(D){var N=this,O=N.fullLayout,I,F,V,U,j,Z,te=N.isCameraChanged(D),re=N.isAspectChanged(D),W=te||re;if(W){var J={};if(te&&(I=N.getCamera(),F=a.nestedProperty(D,N.id+".camera"),V=F.get(),J[N.id+".camera"]=V),re&&(U=N.glplot.getAspectratio(),j=a.nestedProperty(D,N.id+".aspectratio"),Z=j.get(),J[N.id+".aspectratio"]=Z),n.call("_storeDirectGUIEdit",D,O._preGUI,J),te){F.set(I);var le=a.nestedProperty(O,N.id+".camera");le.set(I)}if(re){j.set(U);var ue=a.nestedProperty(O,N.id+".aspectratio");ue.set(U),N.glplot.redraw()}}return W},b.updateFx=function(D,N){var O=this,I=O.camera;if(I)if(D==="orbit")I.mode="orbit",I.keyBindingMode="rotate";else if(D==="turntable"){I.up=[0,0,1],I.mode="turntable",I.keyBindingMode="rotate";var F=O.graphDiv,V=F._fullLayout,U=O.fullSceneLayout.camera,j=U.up.x,Z=U.up.y,te=U.up.z;if(te/Math.sqrt(j*j+Z*Z+te*te)<.999){var re=O.id+".camera.up",W={x:0,y:0,z:1},J={};J[re]=W;var le=F.layout;n.call("_storeDirectGUIEdit",le,V._preGUI,J),U.up=W,a.nestedProperty(le,re).set(W)}}else I.keyBindingMode=D;O.fullSceneLayout.hovermode=N};function M(D,N,O){for(var I=0,F=O-1;I<F;++I,--F)for(var V=0;V<N;++V)for(var U=0;U<4;++U){var j=4*(N*I+V)+U,Z=4*(N*F+V)+U,te=D[j];D[j]=D[Z],D[Z]=te}}function E(D,N,O){for(var I=0;I<O;++I)for(var F=0;F<N;++F){var V=4*(N*I+F),U=D[V+3];if(U>0)for(var j=255/U,Z=0;Z<3;++Z)D[V+Z]=Math.min(j*D[V+Z],255)}}b.toImage=function(D){var N=this;D||(D="png"),N.staticMode&&N.container.appendChild(g),N.glplot.redraw();var O=N.glplot.gl,I=O.drawingBufferWidth,F=O.drawingBufferHeight;O.bindFramebuffer(O.FRAMEBUFFER,null);var V=new Uint8Array(I*F*4);O.readPixels(0,0,I,F,O.RGBA,O.UNSIGNED_BYTE,V),M(V,I,F),E(V,I,F);var U=document.createElement("canvas");U.width=I,U.height=F;var j=U.getContext("2d"),Z=j.createImageData(I,F);Z.data.set(V),j.putImageData(Z,0,0);var te;switch(D){case"jpeg":te=U.toDataURL("image/jpeg");break;case"webp":te=U.toDataURL("image/webp");break;default:te=U.toDataURL("image/png")}return N.staticMode&&N.container.removeChild(g),te},b.setConvert=function(){for(var D=this,N=0;N<3;N++){var O=D.fullSceneLayout[w[N]];r.setConvert(O,D.fullLayout),O.setScale=a.noop}},b.make4thDimension=function(){var D=this,N=D.graphDiv,O=N._fullLayout;D._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},r.setConvert(D._mockAxis,O)},k.exports=A},{"../../../stackgl_modules":1120,"../../components/fx":406,"../../lib":503,"../../lib/show_no_webgl_msg":525,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../../registry":638,"./layout/convert":602,"./layout/spikes":605,"./layout/tick_marks":606,"./project":607,"has-passive-events":229,"webgl-context":331}],609:[function(e,k,z){k.exports=function(o,c,p,t){t=t||o.length;for(var n=new Array(t),a=0;a<t;a++)n[a]=[o[a],c[a],p[a]];return n}},{}],610:[function(e,k,z){var l=e("./font_attributes"),o=e("./animation_attributes"),c=e("../components/color/attributes"),p=e("../components/shapes/draw_newshape/attributes"),t=e("./pad_attributes"),n=e("../lib/extend").extendFlat,a=l({editType:"calc"});a.family.dflt='"Open Sans", verdana, arial, sans-serif',a.size.dflt=12,a.color.dflt=c.defaultLine,k.exports={font:a,title:{text:{valType:"string",editType:"layoutstyle"},font:l({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:n(t({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:c.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:c.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:c.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:p.newshape,activeshape:p.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:n({},o.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:l({editType:"layoutstyle"})}}},{"../components/color/attributes":365,"../components/shapes/draw_newshape/attributes":451,"../lib/extend":493,"./animation_attributes":548,"./font_attributes":585,"./pad_attributes":618}],611:[function(e,k,z){var l=e("../../lib/sort_object_keys"),o="1.10.1",c='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',p=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',c].join(" "),t=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),n=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),a={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:c,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:p,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:p,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:t,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:t,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:n,tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},i=l(a);k.exports={requiredVersion:o,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:a,styleValuesNonMapbox:i,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+o+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",i.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},{"../../lib/sort_object_keys":526}],612:[function(e,k,z){var l=e("../../lib");k.exports=function(c,p){var t=c.split(" "),n=t[0],a=t[1],i=l.isArrayOrTypedArray(p)?l.mean(p):p,r=.5+i/100,f=1.5+i/100,u=["",""],s=[0,0];switch(n){case"top":u[0]="top",s[1]=-f;break;case"bottom":u[0]="bottom",s[1]=f;break}switch(a){case"left":u[1]="right",s[0]=-r;break;case"right":u[1]="left",s[0]=r;break}var h;return u[0]&&u[1]?h=u.join("-"):u[0]?h=u[0]:u[1]?h=u[1]:h="center",{anchor:h,offset:s}}},{"../../lib":503}],613:[function(e,k,z){var l=e("mapbox-gl/dist/mapbox-gl-unminified"),o=e("../../lib"),c=o.strTranslate,p=o.strScale,t=e("../../plots/get_data").getSubplotCalcData,n=e("../../constants/xmlns_namespaces"),a=e("@plotly/d3"),i=e("../../components/drawing"),r=e("../../lib/svg_text_utils"),f=e("./mapbox"),u="mapbox",s=z.constants=e("./constants");z.name=u,z.attr="subplot",z.idRoot=u,z.idRegex=z.attrRegex=o.counterRegex(u),z.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},z.layoutAttributes=e("./layout_attributes"),z.supplyLayoutDefaults=e("./layout_defaults"),z.plot=function(m){var g=m._fullLayout,x=m.calcdata,A=g._subplots[u];if(l.version!==s.requiredVersion)throw new Error(s.wrongVersionErrorMsg);var b=h(m,A);l.accessToken=b;for(var S=0;S<A.length;S++){var w=A[S],T=t(x,u,w),_=g[w],v=_._subplot;v||(v=new f(m,w),g[w]._subplot=v),v.viewInitial||(v.viewInitial={center:o.extendFlat({},_.center),zoom:_.zoom,bearing:_.bearing,pitch:_.pitch}),v.plot(T,g,m._promises)}},z.clean=function(y,m,g,x){for(var A=x._subplots[u]||[],b=0;b<A.length;b++){var S=A[b];!m[S]&&!!x[S]._subplot&&x[S]._subplot.destroy()}},z.toSVG=function(y){for(var m=y._fullLayout,g=m._subplots[u],x=m._size,A=0;A<g.length;A++){var b=m[g[A]],S=b.domain,w=b._subplot,T=w.toImage("png"),_=m._glimages.append("svg:image");_.attr({xmlns:n.svg,"xlink:href":T,x:x.l+x.w*S.x[0],y:x.t+x.h*(1-S.y[1]),width:x.w*(S.x[1]-S.x[0]),height:x.h*(S.y[1]-S.y[0]),preserveAspectRatio:"none"});var v=a.select(b._subplot.div),P=v.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!P){var M=m._glimages.append("g");M.attr("transform",c(x.l+x.w*S.x[0]+10,x.t+x.h*(1-S.y[0])-31)),M.append("path").attr("d",s.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),M.append("path").attr("d",s.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),M.append("path").attr("d",s.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),M.append("polygon").attr("points",s.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var E=v.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),D=m._glimages.append("g"),N=D.append("text");N.text(E).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":E});var O=i.bBox(N.node()),I=x.w*(S.x[1]-S.x[0]);if(O.width>I/2){var F=E.split("|").join("<br>");N.text(F).attr("data-unformatted",F).call(r.convertToTspans,y),O=i.bBox(N.node())}N.attr("transform",c(-3,-O.height+8)),D.insert("rect",".static-attribution").attr({x:-O.width-6,y:-O.height-3,width:O.width+6,height:O.height+3,fill:"rgba(255, 255, 255, 0.75)"});var V=1;O.width+6>I&&(V=I/(O.width+6));var U=[x.l+x.w*S.x[1],x.t+x.h*(1-S.y[0])];D.attr("transform",c(U[0],U[1])+p(V))}};function h(y,m){var g=y._fullLayout,x=y._context;if(x.mapboxAccessToken==="")return"";for(var A=[],b=[],S=!1,w=!1,T=0;T<m.length;T++){var _=g[m[T]],v=_.accesstoken;d(_.style)&&(v?o.pushUnique(A,v):(d(_._input.style)&&(o.error("Uses Mapbox map style, but did not set an access token."),S=!0),w=!0)),v&&o.pushUnique(b,v)}if(w){var P=S?s.noAccessTokenErrorMsg:s.missingStyleErrorMsg;throw o.error(P),new Error(P)}return A.length?(A.length>1&&o.warn(s.multipleTokensErrorMsg),A[0]):(b.length&&o.log(["Listed mapbox access token(s)",b.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function d(y){return typeof y=="string"&&(s.styleValuesMapbox.indexOf(y)!==-1||y.indexOf("mapbox://")===0)}z.updateFx=function(y){for(var m=y._fullLayout,g=m._subplots[u],x=0;x<g.length;x++){var A=m[g[x]]._subplot;A.updateFx(m)}}},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/get_data":593,"./constants":611,"./layout_attributes":615,"./layout_defaults":616,"./mapbox":617,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],614:[function(e,k,z){var l=e("../../lib"),o=e("../../lib/svg_text_utils").sanitizeHTML,c=e("./convert_text_opts"),p=e("./constants");function t(f,u){this.subplot=f,this.uid=f.uid+"-"+u,this.index=u,this.idSource="source-"+this.uid,this.idLayer=p.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var n=t.prototype;n.update=function(u){this.visible?this.needsNewImage(u)?this.updateImage(u):this.needsNewSource(u)?(this.removeLayer(),this.updateSource(u),this.updateLayer(u)):this.needsNewLayer(u)?this.updateLayer(u):this.updateStyle(u):(this.updateSource(u),this.updateLayer(u)),this.visible=a(u)},n.needsNewImage=function(f){var u=this.subplot.map;return u.getSource(this.idSource)&&this.sourceType==="image"&&f.sourcetype==="image"&&(this.source!==f.source||JSON.stringify(this.coordinates)!==JSON.stringify(f.coordinates))},n.needsNewSource=function(f){return this.sourceType!==f.sourcetype||JSON.stringify(this.source)!==JSON.stringify(f.source)||this.layerType!==f.type},n.needsNewLayer=function(f){return this.layerType!==f.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},n.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},n.updateImage=function(f){var u=this.subplot.map;u.getSource(this.idSource).updateImage({url:f.source,coordinates:f.coordinates});var s=this.findFollowingMapboxLayerId(this.lookupBelow());s!==null&&this.subplot.map.moveLayer(this.idLayer,s)},n.updateSource=function(f){var u=this.subplot.map;if(u.getSource(this.idSource)&&u.removeSource(this.idSource),this.sourceType=f.sourcetype,this.source=f.source,!!a(f)){var s=r(f);u.addSource(this.idSource,s)}},n.findFollowingMapboxLayerId=function(f){if(f==="traces")for(var u=this.subplot.getMapLayers(),s=0;s<u.length;s++){var h=u[s].id;if(typeof h=="string"&&h.indexOf(p.traceLayerPrefix)===0){f=h;break}}return f},n.updateLayer=function(f){var u=this.subplot,s=i(f),h=this.lookupBelow(),d=this.findFollowingMapboxLayerId(h);this.removeLayer(),a(f)&&u.addLayer({id:this.idLayer,source:this.idSource,"source-layer":f.sourcelayer||"",type:f.type,minzoom:f.minzoom,maxzoom:f.maxzoom,layout:s.layout,paint:s.paint},d),this.layerType=f.type,this.below=h},n.updateStyle=function(f){if(a(f)){var u=i(f);this.subplot.setOptions(this.idLayer,"setLayoutProperty",u.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",u.paint)}},n.removeLayer=function(){var f=this.subplot.map;f.getLayer(this.idLayer)&&f.removeLayer(this.idLayer)},n.dispose=function(){var f=this.subplot.map;f.getLayer(this.idLayer)&&f.removeLayer(this.idLayer),f.getSource(this.idSource)&&f.removeSource(this.idSource)};function a(f){if(!f.visible)return!1;var u=f.source;if(Array.isArray(u)&&u.length>0){for(var s=0;s<u.length;s++)if(typeof u[s]!="string"||u[s].length===0)return!1;return!0}return l.isPlainObject(u)||typeof u=="string"&&u.length>0}function i(f){var u={},s={};switch(f.type){case"circle":l.extendFlat(s,{"circle-radius":f.circle.radius,"circle-color":f.color,"circle-opacity":f.opacity});break;case"line":l.extendFlat(s,{"line-width":f.line.width,"line-color":f.color,"line-opacity":f.opacity,"line-dasharray":f.line.dash});break;case"fill":l.extendFlat(s,{"fill-color":f.color,"fill-outline-color":f.fill.outlinecolor,"fill-opacity":f.opacity});break;case"symbol":var h=f.symbol,d=c(h.textposition,h.iconsize);l.extendFlat(u,{"icon-image":h.icon+"-15","icon-size":h.iconsize/10,"text-field":h.text,"text-size":h.textfont.size,"text-anchor":d.anchor,"text-offset":d.offset,"symbol-placement":h.placement}),l.extendFlat(s,{"icon-color":f.color,"text-color":h.textfont.color,"text-opacity":f.opacity});break;case"raster":l.extendFlat(s,{"raster-fade-duration":0,"raster-opacity":f.opacity});break}return{layout:u,paint:s}}function r(f){var u=f.sourcetype,s=f.source,h={type:u},d;return u==="geojson"?d="data":u==="vector"?d=typeof s=="string"?"url":"tiles":u==="raster"?(d="tiles",h.tileSize=256):u==="image"&&(d="url",h.coordinates=f.coordinates),h[d]=s,f.sourceattribution&&(h.attribution=o(f.sourceattribution)),h}k.exports=function(u,s,h){var d=new t(u,s);return d.update(h),d}},{"../../lib":503,"../../lib/svg_text_utils":529,"./constants":611,"./convert_text_opts":612}],615:[function(e,k,z){var l=e("../../lib"),o=e("../../components/color").defaultLine,c=e("../domain").attributes,p=e("../font_attributes"),t=e("../../traces/scatter/attributes").textposition,n=e("../../plot_api/edit_types").overrideAll,a=e("../../plot_api/plot_template").templatedArray,i=e("./constants"),r=p({});r.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var f=k.exports=n({_arrayAttrRegexps:[l.counterRegex("mapbox",".layers",!0)],domain:c({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:i.styleValuesMapbox.concat(i.styleValuesNonMapbox),dflt:i.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:a("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:o},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:o}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:r,textposition:l.extendFlat({},t,{arrayOk:!1})}})},"plot","from-root");f.uirevision={valType:"any",editType:"none"}},{"../../components/color":366,"../../lib":503,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":926,"../domain":584,"../font_attributes":585,"./constants":611}],616:[function(e,k,z){var l=e("../../lib"),o=e("../subplot_defaults"),c=e("../array_container_defaults"),p=e("./layout_attributes");k.exports=function(i,r,f){o(i,r,f,{type:"mapbox",attributes:p,handleDefaults:t,partition:"y",accessToken:r._mapboxAccessToken})};function t(a,i,r,f){r("accesstoken",f.accessToken),r("style"),r("center.lon"),r("center.lat"),r("zoom"),r("bearing"),r("pitch"),c(a,i,{name:"layers",handleItemDefaults:n}),i._input=a}function n(a,i){function r(y,m){return l.coerce(a,i,p.layers,y,m)}var f=r("visible");if(f){var u=r("sourcetype"),s=u==="raster"||u==="image";r("source"),r("sourceattribution"),u==="vector"&&r("sourcelayer"),u==="image"&&r("coordinates");var h;s&&(h="raster");var d=r("type",h);s&&d!=="raster"&&(d=i.type="raster",l.log("Source types *raster* and *image* must drawn *raster* layer type.")),r("below"),r("color"),r("opacity"),r("minzoom"),r("maxzoom"),d==="circle"&&r("circle.radius"),d==="line"&&(r("line.width"),r("line.dash")),d==="fill"&&r("fill.outlinecolor"),d==="symbol"&&(r("symbol.icon"),r("symbol.iconsize"),r("symbol.text"),l.coerceFont(r,"symbol.textfont"),r("symbol.textposition"),r("symbol.placement"))}}},{"../../lib":503,"../array_container_defaults":549,"../subplot_defaults":632,"./layout_attributes":615}],617:[function(e,k,z){var l=e("mapbox-gl/dist/mapbox-gl-unminified"),o=e("../../lib"),c=e("../../lib/geo_location_utils"),p=e("../../registry"),t=e("../cartesian/axes"),n=e("../../components/dragelement"),a=e("../../components/fx"),i=e("../../components/dragelement/helpers"),r=i.rectMode,f=i.drawMode,u=i.selectMode,s=e("../cartesian/select").prepSelect,h=e("../cartesian/select").clearSelect,d=e("../cartesian/select").clearSelectionsCache,y=e("../cartesian/select").selectOnClick,m=e("./constants"),g=e("./layers");function x(_,v){this.id=v,this.gd=_;var P=_._fullLayout,M=_._context;this.container=P._glcontainer.node(),this.isStatic=M.staticPlot,this.uid=P._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(P),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var A=x.prototype;A.plot=function(_,v,P){var M=this,E=v[M.id];M.map&&E.accesstoken!==M.accessToken&&(M.map.remove(),M.map=null,M.styleObj=null,M.traceHash={},M.layerList=[]);var D;M.map?D=new Promise(function(N,O){M.updateMap(_,v,N,O)}):D=new Promise(function(N,O){M.createMap(_,v,N,O)}),P.push(D)},A.createMap=function(_,v,P,M){var E=this,D=v[E.id],N=E.styleObj=S(D.style);E.accessToken=D.accesstoken;var O=E.map=new l.Map({container:E.div,style:N.style,center:T(D.center),zoom:D.zoom,bearing:D.bearing,pitch:D.pitch,interactive:!E.isStatic,preserveDrawingBuffer:E.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new l.AttributionControl({compact:!0}));O._canvas.style.left="0px",O._canvas.style.top="0px",E.rejectOnError(M),E.isStatic||E.initFx(_,v);var I=[];I.push(new Promise(function(F){O.once("load",F)})),I=I.concat(c.fetchTraceGeoData(_)),Promise.all(I).then(function(){E.fillBelowLookup(_,v),E.updateData(_),E.updateLayout(v),E.resolveOnRender(P)}).catch(M)},A.updateMap=function(_,v,P,M){var E=this,D=E.map,N=v[this.id];E.rejectOnError(M);var O=[],I=S(N.style);JSON.stringify(E.styleObj)!==JSON.stringify(I)&&(E.styleObj=I,D.setStyle(I.style),E.traceHash={},O.push(new Promise(function(F){D.once("styledata",F)}))),O=O.concat(c.fetchTraceGeoData(_)),Promise.all(O).then(function(){E.fillBelowLookup(_,v),E.updateData(_),E.updateLayout(v),E.resolveOnRender(P)}).catch(M)},A.fillBelowLookup=function(_,v){var P=v[this.id],M=P.layers,E,D,N=this.belowLookup={},O=!1;for(E=0;E<_.length;E++){var I=_[E][0].trace,F=I._module;typeof I.below=="string"?D=I.below:F.getBelow&&(D=F.getBelow(I,this)),D===""&&(O=!0),N["trace-"+I.uid]=D||""}for(E=0;E<M.length;E++){var V=M[E];typeof V.below=="string"?D=V.below:O?D="traces":D="",N["layout-"+E]=D}var U={},j,Z;for(j in N)D=N[j],U[D]?U[D].push(j):U[D]=[j];for(D in U){var te=U[D];if(te.length>1)for(E=0;E<te.length;E++)j=te[E],j.indexOf("trace-")===0?(Z=j.split("trace-")[1],this.traceHash[Z]&&(this.traceHash[Z].below=null)):j.indexOf("layout-")===0&&(Z=j.split("layout-")[1],this.layerList[Z]&&(this.layerList[Z].below=null))}};var b={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};A.updateData=function(_){var v=this.traceHash,P,M,E,D,N=_.slice().sort(function(U,j){return b[U[0].trace.type]-b[j[0].trace.type]});for(E=0;E<N.length;E++){var O=N[E];M=O[0].trace,P=v[M.uid];var I=!1;P&&(P.type===M.type?(P.update(O),I=!0):P.dispose()),!I&&M._module&&(v[M.uid]=M._module.plot(this,O))}var F=Object.keys(v);e:for(E=0;E<F.length;E++){var V=F[E];for(D=0;D<_.length;D++)if(M=_[D][0].trace,V===M.uid)continue e;P=v[V],P.dispose(),delete v[V]}},A.updateLayout=function(_){var v=this.map,P=_[this.id];!this.dragging&&!this.wheeling&&(v.setCenter(T(P.center)),v.setZoom(P.zoom),v.setBearing(P.bearing),v.setPitch(P.pitch)),this.updateLayers(_),this.updateFramework(_),this.updateFx(_),this.map.resize(),this.gd._context._scrollZoom.mapbox?v.scrollZoom.enable():v.scrollZoom.disable()},A.resolveOnRender=function(_){var v=this.map;v.on("render",function P(){v.loaded()&&(v.off("render",P),setTimeout(_,10))})},A.rejectOnError=function(_){var v=this.map;function P(){_(new Error(m.mapOnErrorMsg))}v.once("error",P),v.once("style.error",P),v.once("source.error",P),v.once("tile.error",P),v.once("layer.error",P)},A.createFramework=function(_){var v=this,P=v.div=document.createElement("div");P.id=v.uid,P.style.position="absolute",v.container.appendChild(P),v.xaxis={_id:"x",c2p:function(M){return v.project(M).x}},v.yaxis={_id:"y",c2p:function(M){return v.project(M).y}},v.updateFramework(_),v.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},t.setConvert(v.mockAxis,_)},A.initFx=function(_,v){var P=this,M=P.gd,E=P.map;E.on("moveend",function(O){if(!!P.map){var I=M._fullLayout;if(O.originalEvent||P.wheeling){var F=I[P.id];p.call("_storeDirectGUIEdit",M.layout,I._preGUI,P.getViewEdits(F));var V=P.getView();F._input.center=F.center=V.center,F._input.zoom=F.zoom=V.zoom,F._input.bearing=F.bearing=V.bearing,F._input.pitch=F.pitch=V.pitch,M.emit("plotly_relayout",P.getViewEditsWithDerived(V))}O.originalEvent&&O.originalEvent.type==="mouseup"?P.dragging=!1:P.wheeling&&(P.wheeling=!1),I._rehover&&I._rehover()}}),E.on("wheel",function(){P.wheeling=!0}),E.on("mousemove",function(O){var I=P.div.getBoundingClientRect(),F=[O.originalEvent.offsetX,O.originalEvent.offsetY];O.target.getBoundingClientRect=function(){return I},P.xaxis.p2c=function(){return E.unproject(F).lng},P.yaxis.p2c=function(){return E.unproject(F).lat},M._fullLayout._rehover=function(){M._fullLayout._hoversubplot===P.id&&M._fullLayout[P.id]&&a.hover(M,O,P.id)},a.hover(M,O,P.id),M._fullLayout._hoversubplot=P.id});function D(){a.loneUnhover(v._hoverlayer)}E.on("dragstart",function(){P.dragging=!0,D()}),E.on("zoomstart",D),E.on("mouseout",function(){M._fullLayout._hoversubplot=null});function N(){var O=P.getView();M.emit("plotly_relayouting",P.getViewEditsWithDerived(O))}E.on("drag",N),E.on("zoom",N),E.on("dblclick",function(){var O=M._fullLayout[P.id];p.call("_storeDirectGUIEdit",M.layout,M._fullLayout._preGUI,P.getViewEdits(O));var I=P.viewInitial;E.setCenter(T(I.center)),E.setZoom(I.zoom),E.setBearing(I.bearing),E.setPitch(I.pitch);var F=P.getView();O._input.center=O.center=F.center,O._input.zoom=O.zoom=F.zoom,O._input.bearing=O.bearing=F.bearing,O._input.pitch=O.pitch=F.pitch,M.emit("plotly_doubleclick",null),M.emit("plotly_relayout",P.getViewEditsWithDerived(F))}),P.clearSelect=function(){d(P.dragOptions),h(P.dragOptions.gd)},P.onClickInPanFn=function(O){return function(I){var F=M._fullLayout.clickmode;F.indexOf("select")>-1&&y(I.originalEvent,M,[P.xaxis],[P.yaxis],P.id,O),F.indexOf("event")>-1&&a.click(M,I.originalEvent)}}},A.updateFx=function(_){var v=this,P=v.map,M=v.gd;if(v.isStatic)return;function E(I){var F=v.map.unproject(I);return[F.lng,F.lat]}var D=_.dragmode,N;r(D)?N=function(I,F){var V=I.range={};V[v.id]=[E([F.xmin,F.ymin]),E([F.xmax,F.ymax])]}:N=function(I,F,V){var U=I.lassoPoints={};U[v.id]=V.filtered.map(E)};var O=v.dragOptions;v.dragOptions=o.extendDeep(O||{},{dragmode:_.dragmode,element:v.div,gd:M,plotinfo:{id:v.id,domain:_[v.id].domain,xaxis:v.xaxis,yaxis:v.yaxis,fillRangeItems:N},xaxes:[v.xaxis],yaxes:[v.yaxis],subplot:v.id}),P.off("click",v.onClickInPanHandler),u(D)||f(D)?(P.dragPan.disable(),P.on("zoomstart",v.clearSelect),v.dragOptions.prepFn=function(I,F,V){s(I,F,V,v.dragOptions,D)},n.init(v.dragOptions)):(P.dragPan.enable(),P.off("zoomstart",v.clearSelect),v.div.onmousedown=null,v.onClickInPanHandler=v.onClickInPanFn(v.dragOptions),P.on("click",v.onClickInPanHandler))},A.updateFramework=function(_){var v=_[this.id].domain,P=_._size,M=this.div.style;M.width=P.w*(v.x[1]-v.x[0])+"px",M.height=P.h*(v.y[1]-v.y[0])+"px",M.left=P.l+v.x[0]*P.w+"px",M.top=P.t+(1-v.y[1])*P.h+"px",this.xaxis._offset=P.l+v.x[0]*P.w,this.xaxis._length=P.w*(v.x[1]-v.x[0]),this.yaxis._offset=P.t+(1-v.y[1])*P.h,this.yaxis._length=P.h*(v.y[1]-v.y[0])},A.updateLayers=function(_){var v=_[this.id],P=v.layers,M=this.layerList,E;if(P.length!==M.length){for(E=0;E<M.length;E++)M[E].dispose();for(M=this.layerList=[],E=0;E<P.length;E++)M.push(g(this,E,P[E]))}else for(E=0;E<P.length;E++)M[E].update(P[E])},A.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},A.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},A.setOptions=function(_,v,P){for(var M in P)this.map[v](_,M,P[M])},A.getMapLayers=function(){return this.map.getStyle().layers},A.addLayer=function(_,v){var P=this.map;if(typeof v=="string"){if(v===""){P.addLayer(_,v);return}for(var M=this.getMapLayers(),E=0;E<M.length;E++)if(v===M[E].id){P.addLayer(_,v);return}o.warn(["Trying to add layer with *below* value",v,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}P.addLayer(_)},A.project=function(_){return this.map.project(new l.LngLat(_[0],_[1]))},A.getView=function(){var _=this.map,v=_.getCenter(),P=v.lng,M=v.lat,E={lon:P,lat:M},D=_.getCanvas(),N=parseInt(D.style.width),O=parseInt(D.style.height);return{center:E,zoom:_.getZoom(),bearing:_.getBearing(),pitch:_.getPitch(),_derived:{coordinates:[_.unproject([0,0]).toArray(),_.unproject([N,0]).toArray(),_.unproject([N,O]).toArray(),_.unproject([0,O]).toArray()]}}},A.getViewEdits=function(_){for(var v=this.id,P=["center","zoom","bearing","pitch"],M={},E=0;E<P.length;E++){var D=P[E];M[v+"."+D]=_[D]}return M},A.getViewEditsWithDerived=function(_){var v=this.id,P=this.getViewEdits(_);return P[v+"._derived"]=_._derived,P};function S(_){var v={};return o.isPlainObject(_)?(v.id=_.id,v.style=_):typeof _=="string"?(v.id=_,m.styleValuesMapbox.indexOf(_)!==-1?v.style=w(_):m.stylesNonMapbox[_]?v.style=m.stylesNonMapbox[_]:v.style=_):(v.id=m.styleValueDflt,v.style=w(m.styleValueDflt)),v.transition={duration:0,delay:0},v}function w(_){return m.styleUrlPrefix+_+"-"+m.styleUrlSuffix}function T(_){return[_.lon,_.lat]}k.exports=x},{"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../registry":638,"../cartesian/axes":554,"../cartesian/select":575,"./constants":611,"./layers":614,"mapbox-gl/dist/mapbox-gl-unminified":239}],618:[function(e,k,z){k.exports=function(l){var o=l.editType;return{t:{valType:"number",dflt:0,editType:o},r:{valType:"number",dflt:0,editType:o},b:{valType:"number",dflt:0,editType:o},l:{valType:"number",dflt:0,editType:o},editType:o}}},{}],619:[function(e,k,z){var l=e("@plotly/d3"),o=e("d3-time-format").timeFormatLocale,c=e("d3-format").formatLocale,p=e("fast-isnumeric"),t=e("../registry"),n=e("../plot_api/plot_schema"),a=e("../plot_api/plot_template"),i=e("../lib"),r=e("../components/color"),f=e("../constants/numerical").BADNUM,u=e("./cartesian/axis_ids"),s=e("./cartesian/handle_outline").clearSelect,h=e("./animation_attributes"),d=e("./frame_attributes"),y=e("../plots/get_data").getModuleCalcData,m=i.relinkPrivateKeys,g=i._,x=k.exports={};i.extendFlat(x,t),x.attributes=e("./attributes"),x.attributes.type.values=x.allTypes,x.fontAttrs=e("./font_attributes"),x.layoutAttributes=e("./layout_attributes"),x.fontWeight="normal";var A=x.transformsRegistry,b=e("./command");x.executeAPICommand=b.executeAPICommand,x.computeAPICommandBindings=b.computeAPICommandBindings,x.manageCommandObserver=b.manageCommandObserver,x.hasSimpleAPICommandBindings=b.hasSimpleAPICommandBindings,x.redrawText=function(G){return G=i.getGraphDiv(G),new Promise(function(Y){setTimeout(function(){!G._fullLayout||(t.getComponentMethod("annotations","draw")(G),t.getComponentMethod("legend","draw")(G),t.getComponentMethod("colorbar","draw")(G),Y(x.previousPromises(G)))},300)})},x.resize=function(G){G=i.getGraphDiv(G);var Y,ee=new Promise(function($,K){(!G||i.isHidden(G))&&K(new Error("Resize must be passed a displayed plot div element.")),G._redrawTimer&&clearTimeout(G._redrawTimer),G._resolveResize&&(Y=G._resolveResize),G._resolveResize=$,G._redrawTimer=setTimeout(function(){if(!G.layout||G.layout.width&&G.layout.height||i.isHidden(G)){$(G);return}delete G.layout.width,delete G.layout.height;var Q=G.changed;G.autoplay=!0,t.call("relayout",G,{autosize:!0}).then(function(){G.changed=Q,G._resolveResize===$&&(delete G._resolveResize,$(G))})},100)});return Y&&Y(ee),ee},x.previousPromises=function(G){if((G._promises||[]).length)return Promise.all(G._promises).then(function(){G._promises=[]})},x.addLinks=function(G){if(!(!G._context.showLink&&!G._context.showSources)){var Y=G._fullLayout,ee=i.ensureSingle(Y._paper,"text","js-plot-link-container",function(oe){oe.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:r.defaultLine,"pointer-events":"all"}).each(function(){var fe=l.select(this);fe.append("tspan").classed("js-link-to-tool",!0),fe.append("tspan").classed("js-link-spacer",!0),fe.append("tspan").classed("js-sourcelinks",!0)})}),$=ee.node(),K={y:Y._paper.attr("height")-9};document.body.contains($)&&$.getComputedTextLength()>=Y.width-20?(K["text-anchor"]="start",K.x=5):(K["text-anchor"]="end",K.x=Y._paper.attr("width")-7),ee.attr(K);var Q=ee.select(".js-link-to-tool"),ae=ee.select(".js-link-spacer"),ie=ee.select(".js-sourcelinks");G._context.showSources&&G._context.showSources(G),G._context.showLink&&S(G,Q),ae.text(Q.text()&&ie.text()?" - ":"")}};function S(G,Y){Y.text("");var ee=Y.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(G._context.linkText+" "+String.fromCharCode(187));if(G._context.sendData)ee.on("click",function(){x.sendDataToCloud(G)});else{var $=window.location.pathname.split("/"),K=window.location.search;ee.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+$[2].split(".")[0]+"/"+$[1]+K})}}x.sendDataToCloud=function(G){var Y=(window.PLOTLYENV||{}).BASE_URL||G._context.plotlyServerURL;if(!!Y){G.emit("plotly_beforeexport");var ee=l.select(G).append("div").attr("id","hiddenform").style("display","none"),$=ee.append("form").attr({action:Y+"/external",method:"post",target:"_blank"}),K=$.append("input").attr({type:"text",name:"data"});return K.node().value=x.graphJson(G,!1,"keepdata"),$.node().submit(),ee.remove(),G.emit("plotly_afterexport"),!1}};var w=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],T=["year","month","dayMonth","dayMonthYear"];x.supplyDefaults=function(G,Y){var ee=Y&&Y.skipUpdateCalc,$=G._fullLayout||{};if($._skipDefaults){delete $._skipDefaults;return}var K=G._fullLayout={},Q=G.layout||{},ae=G._fullData||[],ie=G._fullData=[],oe=G.data||[],fe=G.calcdata||[],ye=G._context||{},ce;G._transitionData||x.createTransitionData(G),K._dfltTitle={plot:g(G,"Click to enter Plot title"),x:g(G,"Click to enter X axis title"),y:g(G,"Click to enter Y axis title"),colorbar:g(G,"Click to enter Colorscale title"),annotation:g(G,"new text")},K._traceWord=g(G,"trace");var me=P(G,w);if(K._mapboxAccessToken=ye.mapboxAccessToken,$._initialAutoSizeIsDone){var xe=$.width,ke=$.height;x.supplyLayoutGlobalDefaults(Q,K,me),Q.width||(K.width=xe),Q.height||(K.height=ke),x.sanitizeMargins(K)}else{x.supplyLayoutGlobalDefaults(Q,K,me);var Ae=!Q.width||!Q.height,Oe=K.autosize,He=ye.autosizable,Ge=Ae&&(Oe||He);Ge?x.plotAutoSize(G,Q,K):Ae&&x.sanitizeMargins(K),!Oe&&Ae&&(Q.width=K.width,Q.height=K.height)}K._d3locale=M(me,K.separators),K._extraFormat=P(G,T),K._initialAutoSizeIsDone=!0,K._dataLength=oe.length,K._modules=[],K._visibleModules=[],K._basePlotModules=[];var _e=K._subplots=v(),Ie=K._splomAxes={x:{},y:{}},We=K._splomSubplots={};K._splomGridDflt={},K._scatterStackOpts={},K._firstScatter={},K._alignmentOpts={},K._colorAxes={},K._requestRangeslider={},K._traceUids=_(ae,oe),K._globalTransforms=(G._context||{}).globalTransforms,x.supplyDataDefaults(oe,ie,Q,K);var et=Object.keys(Ie.x),Ne=Object.keys(Ie.y);if(et.length>1&&Ne.length>1){for(t.getComponentMethod("grid","sizeDefaults")(Q,K),ce=0;ce<et.length;ce++)i.pushUnique(_e.xaxis,et[ce]);for(ce=0;ce<Ne.length;ce++)i.pushUnique(_e.yaxis,Ne[ce]);for(var De in We)i.pushUnique(_e.cartesian,De)}if(K._has=x._hasPlotType.bind(K),ae.length===ie.length)for(ce=0;ce<ie.length;ce++)m(ie[ce],ae[ce]);x.supplyLayoutModuleDefaults(Q,K,ie,G._transitionData);var Ve=K._visibleModules,dt=[];for(ce=0;ce<Ve.length;ce++){var Dt=Ve[ce].crossTraceDefaults;Dt&&i.pushUnique(dt,Dt)}for(ce=0;ce<dt.length;ce++)dt[ce](ie,K);K._hasOnlyLargeSploms=K._basePlotModules.length===1&&K._basePlotModules[0].name==="splom"&&et.length>15&&Ne.length>15&&K.shapes.length===0&&K.images.length===0,x.linkSubplots(ie,K,ae,$),x.cleanPlot(ie,K,ae,$);var Gt=!!($._has&&$._has("gl2d")),Mt=!!(K._has&&K._has("gl2d")),zt=!!($._has&&$._has("cartesian")),Nt=!!(K._has&&K._has("cartesian")),Et=zt||Gt,At=Nt||Mt;Et&&!At?$._bgLayer.remove():At&&!Et&&(K._shouldCreateBgLayer=!0),$._zoomlayer&&!G._dragging&&s({_fullLayout:$}),E(ie,K),m(K,$),t.getComponentMethod("colorscale","crossTraceDefaults")(ie,K),K._preGUI||(K._preGUI={}),K._tracePreGUI||(K._tracePreGUI={});var it=K._tracePreGUI,ht={},$e;for($e in it)ht[$e]="old";for(ce=0;ce<ie.length;ce++)$e=ie[ce]._fullInput.uid,ht[$e]||(it[$e]={}),ht[$e]="new";for($e in ht)ht[$e]==="old"&&delete it[$e];F(K),t.getComponentMethod("rangeslider","makeData")(K),!ee&&fe.length===ie.length&&x.supplyDefaultsUpdateCalc(fe,ie)},x.supplyDefaultsUpdateCalc=function(G,Y){for(var ee=0;ee<Y.length;ee++){var $=Y[ee],K=(G[ee]||[])[0];if(K&&K.trace){var Q=K.trace;if(Q._hasCalcTransform){var ae=Q._arrayAttrs,ie,oe,fe;for(ie=0;ie<ae.length;ie++)oe=ae[ie],fe=i.nestedProperty(Q,oe).get().slice(),i.nestedProperty($,oe).set(fe)}K.trace=$}}};function _(G,Y){var ee=Y.length,$=[],K,Q;for(K=0;K<G.length;K++){var ae=G[K]._fullInput;ae!==Q&&$.push(ae),Q=ae}var ie=$.length,oe=new Array(ee),fe={};function ye(xe,ke){oe[ke]=xe,fe[xe]=1}function ce(xe,ke){if(xe&&typeof xe=="string"&&!fe[xe])return ye(xe,ke),!0}for(K=0;K<ee;K++){var me=Y[K].uid;typeof me=="number"&&(me=String(me)),!ce(me,K)&&(K<ie&&ce($[K].uid,K)||ye(i.randstr(fe),K))}return oe}function v(){var G=t.collectableSubplotTypes,Y={},ee,$;if(!G){G=[];var K=t.subplotsRegistry;for(var Q in K){var ae=K[Q],ie=ae.attr;if(ie&&(G.push(Q),Array.isArray(ie)))for($=0;$<ie.length;$++)i.pushUnique(G,ie[$])}}for(ee=0;ee<G.length;ee++)Y[G[ee]]=[];return Y}function P(G,Y){var ee=G._context.locale;ee||(ee="en-US");var $=!1,K={};function Q(ce){for(var me=!0,xe=0;xe<Y.length;xe++){var ke=Y[xe];K[ke]||(ce[ke]?K[ke]=ce[ke]:me=!1)}me&&($=!0)}for(var ae=0;ae<2;ae++){for(var ie=G._context.locales,oe=0;oe<2;oe++){var fe=(ie[ee]||{}).format;if(fe&&(Q(fe),$))break;ie=t.localeRegistry}var ye=ee.split("-")[0];if($||ye===ee)break;ee=ye}return $||Q(t.localeRegistry.en.format),K}function M(G,Y){return G.decimal=Y.charAt(0),G.thousands=Y.charAt(1),{numberFormat:function(ee){try{ee=c(G).format(i.adjustFormat(ee))}catch{return i.warnBadFormat(ee),i.noFormat}return ee},timeFormat:o(G).utcFormat}}function E(G,Y){var ee,$=[];Y.meta&&(ee=Y._meta={meta:Y.meta,layout:{meta:Y.meta}});for(var K=0;K<G.length;K++){var Q=G[K];Q.meta?$[Q.index]=Q._meta={meta:Q.meta}:Y.meta&&(Q._meta={meta:Y.meta}),Y.meta&&(Q._meta.layout={meta:Y.meta})}$.length&&(ee||(ee=Y._meta={}),ee.data=$)}x.createTransitionData=function(G){G._transitionData||(G._transitionData={}),G._transitionData._frames||(G._transitionData._frames=[]),G._transitionData._frameHash||(G._transitionData._frameHash={}),G._transitionData._counter||(G._transitionData._counter=0),G._transitionData._interruptCallbacks||(G._transitionData._interruptCallbacks=[])},x._hasPlotType=function(G){var Y,ee=this._basePlotModules||[];for(Y=0;Y<ee.length;Y++)if(ee[Y].name===G)return!0;var $=this._modules||[];for(Y=0;Y<$.length;Y++){var K=$[Y].name;if(K===G)return!0;var Q=t.modules[K];if(Q&&Q.categories[G])return!0}return!1},x.cleanPlot=function(G,Y,ee,$){var K,Q,ae=$._basePlotModules||[];for(K=0;K<ae.length;K++){var ie=ae[K];ie.clean&&ie.clean(G,Y,ee,$)}var oe=$._has&&$._has("gl"),fe=Y._has&&Y._has("gl");oe&&!fe&&$._glcontainer!==void 0&&($._glcontainer.selectAll(".gl-canvas").remove(),$._glcontainer.selectAll(".no-webgl").remove(),$._glcanvas=null);var ye=!!$._infolayer;e:for(K=0;K<ee.length;K++){var ce=ee[K],me=ce.uid;for(Q=0;Q<G.length;Q++){var xe=G[Q];if(me===xe.uid)continue e}ye&&$._infolayer.select(".cb"+me).remove()}},x.linkSubplots=function(G,Y,ee,$){var K,Q,ae=$._plots||{},ie=Y._plots={},oe=Y._subplots,fe={_fullData:G,_fullLayout:Y},ye=oe.cartesian.concat(oe.gl2d||[]);for(K=0;K<ye.length;K++){var ce=ye[K],me=ae[ce],xe=u.getFromId(fe,ce,"x"),ke=u.getFromId(fe,ce,"y"),Ae;for(me?Ae=ie[ce]=me:(Ae=ie[ce]={},Ae.id=ce),xe._counterAxes.push(ke._id),ke._counterAxes.push(xe._id),xe._subplotsWith.push(ce),ke._subplotsWith.push(ce),Ae.xaxis=xe,Ae.yaxis=ke,Ae._hasClipOnAxisFalse=!1,Q=0;Q<G.length;Q++){var Oe=G[Q];if(Oe.xaxis===Ae.xaxis._id&&Oe.yaxis===Ae.yaxis._id&&Oe.cliponaxis===!1){Ae._hasClipOnAxisFalse=!0;break}}}var He=u.list(fe,null,!0),Ge;for(K=0;K<He.length;K++){Ge=He[K];var _e=null;Ge.overlaying&&(_e=u.getFromId(fe,Ge.overlaying),_e&&_e.overlaying&&(Ge.overlaying=!1,_e=null)),Ge._mainAxis=_e||Ge,_e&&(Ge.domain=_e.domain.slice()),Ge._anchorAxis=Ge.anchor==="free"?null:u.getFromId(fe,Ge.anchor)}for(K=0;K<He.length;K++)if(Ge=He[K],Ge._counterAxes.sort(u.idSort),Ge._subplotsWith.sort(i.subplotSort),Ge._mainSubplot=D(Ge,Y),Ge._counterAxes.length&&(Ge.spikemode&&Ge.spikemode.indexOf("across")!==-1||Ge.automargin&&Ge.mirror&&Ge.anchor!=="free"||t.getComponentMethod("rangeslider","isVisible")(Ge))){var Ie=1,We=0;for(Q=0;Q<Ge._counterAxes.length;Q++){var et=u.getFromId(fe,Ge._counterAxes[Q]);Ie=Math.min(Ie,et.domain[0]),We=Math.max(We,et.domain[1])}Ie<We&&(Ge._counterDomainMin=Ie,Ge._counterDomainMax=We)}};function D(G,Y){var ee={_fullLayout:Y},$=G._id.charAt(0)==="x",K=G._mainAxis._anchorAxis,Q="",ae="",ie="";if(K&&(ie=K._mainAxis._id,Q=$?G._id+ie:ie+G._id),!Q||!Y._plots[Q]){Q="";for(var oe=G._counterAxes,fe=0;fe<oe.length;fe++){var ye=oe[fe],ce=$?G._id+ye:ye+G._id;ae||(ae=ce);var me=u.getFromId(ee,ye);if(ie&&me.overlaying===ie){Q=ce;break}}}return Q||ae}x.clearExpandedTraceDefaultColors=function(G){var Y,ee,$;function K(ae,ie,oe,fe){ee[fe]=ie,ee.length=fe+1,ae.valType==="color"&&ae.dflt===void 0&&Y.push(ee.join("."))}for(ee=[],Y=G._module._colorAttrs,Y||(G._module._colorAttrs=Y=[],n.crawl(G._module.attributes,K)),$=0;$<Y.length;$++){var Q=i.nestedProperty(G,"_input."+Y[$]);Q.get()||i.nestedProperty(G,Y[$]).set(null)}},x.supplyDataDefaults=function(G,Y,ee,$){var K=$._modules,Q=$._visibleModules,ae=$._basePlotModules,ie=0,oe=0,fe,ye,ce;$._transformModules=[];function me(Ne){Y.push(Ne);var De=Ne._module;!De||(i.pushUnique(K,De),Ne.visible===!0&&i.pushUnique(Q,De),i.pushUnique(ae,Ne._module.basePlotModule),ie++,Ne._input.visible!==!1&&oe++)}var xe={},ke=[],Ae=(ee.template||{}).data||{},Oe=a.traceTemplater(Ae);for(fe=0;fe<G.length;fe++){if(ce=G[fe],ye=Oe.newTrace(ce),ye.uid=$._traceUids[fe],x.supplyTraceDefaults(ce,ye,oe,$,fe),ye.index=fe,ye._input=ce,ye._expandedIndex=ie,ye.transforms&&ye.transforms.length)for(var He=ce.visible!==!1&&ye.visible===!1,Ge=O(ye,Y,ee,$),_e=0;_e<Ge.length;_e++){var Ie=Ge[_e],We={_template:ye._template,type:ye.type,uid:ye.uid+_e};He&&Ie.visible===!1&&delete Ie.visible,x.supplyTraceDefaults(Ie,We,ie,$,fe),m(We,Ie),We.index=fe,We._input=ce,We._fullInput=ye,We._expandedIndex=ie,We._expandedInput=Ie,me(We)}else ye._fullInput=ye,ye._expandedInput=ye,me(ye);t.traceIs(ye,"carpetAxis")&&(xe[ye.carpet]=ye),t.traceIs(ye,"carpetDependent")&&ke.push(fe)}for(fe=0;fe<ke.length;fe++)if(ye=Y[ke[fe]],!!ye.visible){var et=xe[ye.carpet];if(ye._carpet=et,!et||!et.visible){ye.visible=!1;continue}ye.xaxis=et.xaxis,ye.yaxis=et.yaxis}},x.supplyAnimationDefaults=function(G){G=G||{};var Y,ee={};function $(K,Q){return i.coerce(G||{},ee,h,K,Q)}if($("mode"),$("direction"),$("fromcurrent"),Array.isArray(G.frame))for(ee.frame=[],Y=0;Y<G.frame.length;Y++)ee.frame[Y]=x.supplyAnimationFrameDefaults(G.frame[Y]||{});else ee.frame=x.supplyAnimationFrameDefaults(G.frame||{});if(Array.isArray(G.transition))for(ee.transition=[],Y=0;Y<G.transition.length;Y++)ee.transition[Y]=x.supplyAnimationTransitionDefaults(G.transition[Y]||{});else ee.transition=x.supplyAnimationTransitionDefaults(G.transition||{});return ee},x.supplyAnimationFrameDefaults=function(G){var Y={};function ee($,K){return i.coerce(G||{},Y,h.frame,$,K)}return ee("duration"),ee("redraw"),Y},x.supplyAnimationTransitionDefaults=function(G){var Y={};function ee($,K){return i.coerce(G||{},Y,h.transition,$,K)}return ee("duration"),ee("easing"),Y},x.supplyFrameDefaults=function(G){var Y={};function ee($,K){return i.coerce(G,Y,d,$,K)}return ee("group"),ee("name"),ee("traces"),ee("baseframe"),ee("data"),ee("layout"),Y},x.supplyTraceDefaults=function(G,Y,ee,$,K){var Q=$.colorway||r.defaults,ae=Q[ee%Q.length],ie;function oe(Ge,_e){return i.coerce(G,Y,x.attributes,Ge,_e)}var fe=oe("visible");oe("type"),oe("name",$._traceWord+" "+K),oe("uirevision",$.uirevision);var ye=x.getModule(Y);if(Y._module=ye,ye){var ce=ye.basePlotModule,me=ce.attr,xe=ce.attributes;if(me&&xe){var ke=$._subplots,Ae="";if(fe||ce.name!=="gl2d"){if(Array.isArray(me))for(ie=0;ie<me.length;ie++){var Oe=me[ie],He=i.coerce(G,Y,xe,Oe);ke[Oe]&&i.pushUnique(ke[Oe],He),Ae+=He}else Ae=i.coerce(G,Y,xe,me);ke[ce.name]&&i.pushUnique(ke[ce.name],Ae)}}}return fe&&(oe("customdata"),oe("ids"),oe("meta"),t.traceIs(Y,"showLegend")?(i.coerce(G,Y,ye.attributes.showlegend?ye.attributes:x.attributes,"showlegend"),oe("legendgroup"),oe("legendgrouptitle.text"),oe("legendrank"),Y._dfltShowLegend=!0):Y._dfltShowLegend=!1,ye&&ye.supplyDefaults(G,Y,ae,$),t.traceIs(Y,"noOpacity")||oe("opacity"),t.traceIs(Y,"notLegendIsolatable")&&(Y.visible=!!Y.visible),t.traceIs(Y,"noHover")||(Y.hovertemplate||i.coerceHoverinfo(G,Y,$),Y.type!=="parcats"&&t.getComponentMethod("fx","supplyDefaults")(G,Y,ae,$)),ye&&ye.selectPoints&&oe("selectedpoints"),x.supplyTransformDefaults(G,Y,$)),Y};function N(G){var Y=G.transforms;if(Array.isArray(Y)&&Y.length)for(var ee=0;ee<Y.length;ee++){var $=Y[ee],K=$._module||A[$.type];if(K&&K.makesData)return!0}return!1}x.hasMakesDataTransform=N,x.supplyTransformDefaults=function(G,Y,ee){if(!!(Y._length||N(G))){var $=ee._globalTransforms||[],K=ee._transformModules||[];if(!(!Array.isArray(G.transforms)&&$.length===0))for(var Q=G.transforms||[],ae=$.concat(Q),ie=Y.transforms=[],oe=0;oe<ae.length;oe++){var fe=ae[oe],ye=fe.type,ce=A[ye],me,xe=!(fe._module&&fe._module===ce),ke=ce&&typeof ce.transform=="function";ce||i.warn("Unrecognized transform type "+ye+"."),ce&&ce.supplyDefaults&&(xe||ke)?(me=ce.supplyDefaults(fe,Y,ee,G),me.type=ye,me._module=ce,i.pushUnique(K,ce)):me=i.extendFlat({},fe),ie.push(me)}}};function O(G,Y,ee,$){for(var K=G.transforms,Q=[G],ae=0;ae<K.length;ae++){var ie=K[ae],oe=A[ie.type];oe&&oe.transform&&(Q=oe.transform(Q,{transform:ie,fullTrace:G,fullData:Y,layout:ee,fullLayout:$,transformIndex:ae}))}return Q}x.supplyLayoutGlobalDefaults=function(G,Y,ee){function $(fe,ye){return i.coerce(G,Y,x.layoutAttributes,fe,ye)}var K=G.template;i.isPlainObject(K)&&(Y.template=K,Y._template=K.layout,Y._dataTemplate=K.data),$("autotypenumbers");var Q=i.coerceFont($,"font"),ae=Q.size;i.coerceFont($,"title.font",i.extendFlat({},Q,{size:Math.round(ae*1.4)})),$("title.text",Y._dfltTitle.plot),$("title.xref"),$("title.yref"),$("title.x"),$("title.y"),$("title.xanchor"),$("title.yanchor"),$("title.pad.t"),$("title.pad.r"),$("title.pad.b"),$("title.pad.l");var ie=$("uniformtext.mode");ie&&$("uniformtext.minsize"),$("autosize",!(G.width&&G.height)),$("width"),$("height"),$("margin.l"),$("margin.r"),$("margin.t"),$("margin.b"),$("margin.pad"),$("margin.autoexpand"),G.width&&G.height&&x.sanitizeMargins(Y),t.getComponentMethod("grid","sizeDefaults")(G,Y),$("paper_bgcolor"),$("separators",ee.decimal+ee.thousands),$("hidesources"),$("colorway"),$("datarevision");var oe=$("uirevision");$("editrevision",oe),$("selectionrevision",oe),t.getComponentMethod("modebar","supplyLayoutDefaults")(G,Y),t.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(G,Y,$),$("meta"),i.isPlainObject(G.transition)&&($("transition.duration"),$("transition.easing"),$("transition.ordering")),t.getComponentMethod("calendars","handleDefaults")(G,Y,"calendar"),t.getComponentMethod("fx","supplyLayoutGlobalDefaults")(G,Y,$)};function I(G){return typeof G=="string"&&G.substr(G.length-2)==="px"&&parseFloat(G)}x.plotAutoSize=function(Y,ee,$){var K=Y._context||{},Q=K.frameMargins,ae,ie,oe=i.isPlotDiv(Y);if(oe&&Y.emit("plotly_autosize"),K.fillFrame)ae=window.innerWidth,ie=window.innerHeight,document.body.style.overflow="hidden";else{var fe=oe?window.getComputedStyle(Y):{};if(ae=I(fe.width)||I(fe.maxWidth)||$.width,ie=I(fe.height)||I(fe.maxHeight)||$.height,p(Q)&&Q>0){var ye=1-2*Q;ae=Math.round(ye*ae),ie=Math.round(ye*ie)}}var ce=x.layoutAttributes.width.min,me=x.layoutAttributes.height.min;ae<ce&&(ae=ce),ie<me&&(ie=me);var xe=!ee.width&&Math.abs($.width-ae)>1,ke=!ee.height&&Math.abs($.height-ie)>1;(ke||xe)&&(xe&&($.width=ae),ke&&($.height=ie)),Y._initialAutoSize||(Y._initialAutoSize={width:ae,height:ie}),x.sanitizeMargins($)},x.supplyLayoutModuleDefaults=function(G,Y,ee,$){var K=t.componentsRegistry,Q=Y._basePlotModules,ae,ie,oe,fe=t.subplotsRegistry.cartesian;for(ae in K)oe=K[ae],oe.includeBasePlot&&oe.includeBasePlot(G,Y);Q.length||Q.push(fe),Y._has("cartesian")&&(t.getComponentMethod("grid","contentDefaults")(G,Y),fe.finalizeSubplots(G,Y));for(var ye in Y._subplots)Y._subplots[ye].sort(i.subplotSort);for(ie=0;ie<Q.length;ie++)oe=Q[ie],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(G,Y,ee);var ce=Y._modules;for(ie=0;ie<ce.length;ie++)oe=ce[ie],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(G,Y,ee);var me=Y._transformModules;for(ie=0;ie<me.length;ie++)oe=me[ie],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(G,Y,ee,$);for(ae in K)oe=K[ae],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(G,Y,ee)},x.purge=function(G){var Y=G._fullLayout||{};Y._glcontainer!==void 0&&(Y._glcontainer.selectAll(".gl-canvas").remove(),Y._glcontainer.remove(),Y._glcanvas=null),Y._modeBar&&Y._modeBar.destroy(),G._transitionData&&(G._transitionData._interruptCallbacks&&(G._transitionData._interruptCallbacks.length=0),G._transitionData._animationRaf&&window.cancelAnimationFrame(G._transitionData._animationRaf)),i.clearThrottle(),i.clearResponsive(G),delete G.data,delete G.layout,delete G._fullData,delete G._fullLayout,delete G.calcdata,delete G.empty,delete G.fid,delete G.undoqueue,delete G.undonum,delete G.autoplay,delete G.changed,delete G._promises,delete G._redrawTimer,delete G._hmlumcount,delete G._hmpixcount,delete G._transitionData,delete G._transitioning,delete G._initialAutoSize,delete G._transitioningWithDuration,delete G._dragging,delete G._dragged,delete G._dragdata,delete G._hoverdata,delete G._snapshotInProgress,delete G._editing,delete G._mouseDownTime,delete G._legendMouseDownTime,G.removeAllListeners&&G.removeAllListeners()},x.style=function(G){var Y=G._fullLayout._visibleModules,ee=[],$;for($=0;$<Y.length;$++){var K=Y[$];K.style&&i.pushUnique(ee,K.style)}for($=0;$<ee.length;$++)ee[$](G)},x.sanitizeMargins=function(G){if(!(!G||!G.margin)){var Y=G.width,ee=G.height,$=G.margin,K=Y-($.l+$.r),Q=ee-($.t+$.b),ae;K<0&&(ae=(Y-1)/($.l+$.r),$.l=Math.floor(ae*$.l),$.r=Math.floor(ae*$.r)),Q<0&&(ae=(ee-1)/($.t+$.b),$.t=Math.floor(ae*$.t),$.b=Math.floor(ae*$.b))}},x.clearAutoMarginIds=function(G){G._fullLayout._pushmarginIds={}},x.allowAutoMargin=function(G,Y){G._fullLayout._pushmarginIds[Y]=1};function F(G){var Y=G.margin;if(!G._size){var ee=G._size={l:Math.round(Y.l),r:Math.round(Y.r),t:Math.round(Y.t),b:Math.round(Y.b),p:Math.round(Y.pad)};ee.w=Math.round(G.width)-ee.l-ee.r,ee.h=Math.round(G.height)-ee.t-ee.b}G._pushmargin||(G._pushmargin={}),G._pushmarginIds||(G._pushmarginIds={})}var V=2,U=2,j=64,Z=64;x.autoMargin=function(G,Y,ee){var $=G._fullLayout,K=$.width,Q=$.height,ae=$.margin,ie=i.constrain(K-ae.l-ae.r,V,j),oe=i.constrain(Q-ae.t-ae.b,U,Z),fe=Math.max(0,K-ie),ye=Math.max(0,Q-oe),ce=$._pushmargin,me=$._pushmarginIds;if(ae.autoexpand!==!1){if(!ee)delete ce[Y],delete me[Y];else{var xe=ee.pad;if(xe===void 0&&(xe=Math.min(12,ae.l,ae.r,ae.t,ae.b)),fe){var ke=(ee.l+ee.r)/fe;ke>1&&(ee.l/=ke,ee.r/=ke)}if(ye){var Ae=(ee.t+ee.b)/ye;Ae>1&&(ee.t/=Ae,ee.b/=Ae)}var Oe=ee.xl!==void 0?ee.xl:ee.x,He=ee.xr!==void 0?ee.xr:ee.x,Ge=ee.yt!==void 0?ee.yt:ee.y,_e=ee.yb!==void 0?ee.yb:ee.y;ce[Y]={l:{val:Oe,size:ee.l+xe},r:{val:He,size:ee.r+xe},b:{val:_e,size:ee.b+xe},t:{val:Ge,size:ee.t+xe}},me[Y]=1}if(!$._replotting)return x.doAutoMargin(G)}},x.doAutoMargin=function(G){var Y=G._fullLayout,ee=Y.width,$=Y.height;Y._size||(Y._size={}),F(Y);var K=Y._size,Q=Y.margin,ae=i.extendFlat({},K),ie=Q.l,oe=Q.r,fe=Q.t,ye=Q.b,ce=Y._pushmargin,me=Y._pushmarginIds;if(Y.margin.autoexpand!==!1){for(var xe in ce)me[xe]||delete ce[xe];ce.base={l:{val:0,size:ie},r:{val:1,size:oe},t:{val:1,size:fe},b:{val:0,size:ye}};for(var ke in ce){var Ae=ce[ke].l||{},Oe=ce[ke].b||{},He=Ae.val,Ge=Ae.size,_e=Oe.val,Ie=Oe.size;for(var We in ce){if(p(Ge)&&ce[We].r){var et=ce[We].r.val,Ne=ce[We].r.size;if(et>He){var De=(Ge*et+(Ne-ee)*He)/(et-He),Ve=(Ne*(1-He)+(Ge-ee)*(1-et))/(et-He);De+Ve>ie+oe&&(ie=De,oe=Ve)}}if(p(Ie)&&ce[We].t){var dt=ce[We].t.val,Dt=ce[We].t.size;if(dt>_e){var Gt=(Ie*dt+(Dt-$)*_e)/(dt-_e),Mt=(Dt*(1-_e)+(Ie-$)*(1-dt))/(dt-_e);Gt+Mt>ye+fe&&(ye=Gt,fe=Mt)}}}}}var zt=i.constrain(ee-Q.l-Q.r,V,j),Nt=i.constrain($-Q.t-Q.b,U,Z),Et=Math.max(0,ee-zt),At=Math.max(0,$-Nt);if(Et){var it=(ie+oe)/Et;it>1&&(ie/=it,oe/=it)}if(At){var ht=(ye+fe)/At;ht>1&&(ye/=ht,fe/=ht)}if(K.l=Math.round(ie),K.r=Math.round(oe),K.t=Math.round(fe),K.b=Math.round(ye),K.p=Math.round(Q.pad),K.w=Math.round(ee)-K.l-K.r,K.h=Math.round($)-K.t-K.b,!Y._replotting&&x.didMarginChange(ae,K)){"_redrawFromAutoMarginCount"in Y?Y._redrawFromAutoMarginCount++:Y._redrawFromAutoMarginCount=1;var $e=3*(1+Object.keys(me).length);if(Y._redrawFromAutoMarginCount<$e)return t.call("_doPlot",G);Y._size=ae,i.warn("Too many auto-margin redraws.")}te(G)};function te(G){var Y=u.list(G,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(ee){for(var $=0;$<Y.length;$++){var K=Y[$][ee];K&&K()}})}var re=["l","r","t","b","p","w","h"];x.didMarginChange=function(G,Y){for(var ee=0;ee<re.length;ee++){var $=re[ee],K=G[$],Q=Y[$];if(!p(K)||Math.abs(Q-K)>1)return!0}return!1},x.graphJson=function(G,Y,ee,$,K,Q){(K&&Y&&!G._fullData||K&&!Y&&!G._fullLayout)&&x.supplyDefaults(G);var ae=K?G._fullData:G.data,ie=K?G._fullLayout:G.layout,oe=(G._transitionData||{})._frames;function fe(me,xe){if(typeof me=="function")return xe?"_function_":null;if(i.isPlainObject(me)){var ke={},Ae;return Object.keys(me).sort().forEach(function(Oe){if(["_","["].indexOf(Oe.charAt(0))===-1){if(typeof me[Oe]=="function"){xe&&(ke[Oe]="_function");return}if(ee==="keepdata"){if(Oe.substr(Oe.length-3)==="src")return}else if(ee==="keepstream"){if(Ae=me[Oe+"src"],typeof Ae=="string"&&Ae.indexOf(":")>0&&!i.isPlainObject(me.stream))return}else if(ee!=="keepall"&&(Ae=me[Oe+"src"],typeof Ae=="string"&&Ae.indexOf(":")>0))return;ke[Oe]=fe(me[Oe],xe)}}),ke}return Array.isArray(me)?me.map(function(Oe){return fe(Oe,xe)}):i.isTypedArray(me)?i.simpleMap(me,i.identity):i.isJSDate(me)?i.ms2DateTimeLocal(+me):me}var ye={data:(ae||[]).map(function(me){var xe=fe(me);return Y&&delete xe.fit,xe})};if(!Y&&(ye.layout=fe(ie),K)){var ce=ie._size;ye.layout.computed={margin:{b:ce.b,l:ce.l,r:ce.r,t:ce.t}}}return oe&&(ye.frames=fe(oe)),Q&&(ye.config=fe(G._context,!0)),$==="object"?ye:JSON.stringify(ye)},x.modifyFrames=function(G,Y){var ee,$,K,Q=G._transitionData._frames,ae=G._transitionData._frameHash;for(ee=0;ee<Y.length;ee++)switch($=Y[ee],$.type){case"replace":K=$.value;var ie=(Q[$.index]||{}).name,oe=K.name;Q[$.index]=ae[oe]=K,oe!==ie&&(delete ae[ie],ae[oe]=K);break;case"insert":K=$.value,ae[K.name]=K,Q.splice($.index,0,K);break;case"delete":K=Q[$.index],delete ae[K.name],Q.splice($.index,1);break}return Promise.resolve()},x.computeFrame=function(G,Y){var ee=G._transitionData._frameHash,$,K,Q,ae;if(!Y)throw new Error("computeFrame must be given a string frame name");var ie=ee[Y.toString()];if(!ie)return!1;for(var oe=[ie],fe=[ie.name];ie.baseframe&&(ie=ee[ie.baseframe.toString()])&&fe.indexOf(ie.name)===-1;)oe.push(ie),fe.push(ie.name);for(var ye={};ie=oe.pop();)if(ie.layout&&(ye.layout=x.extendLayout(ye.layout,ie.layout)),ie.data){if(ye.data||(ye.data=[]),K=ie.traces,!K)for(K=[],$=0;$<ie.data.length;$++)K[$]=$;for(ye.traces||(ye.traces=[]),$=0;$<ie.data.length;$++)Q=K[$],Q!=null&&(ae=ye.traces.indexOf(Q),ae===-1&&(ae=ye.data.length,ye.traces[ae]=Q),ye.data[ae]=x.extendTrace(ye.data[ae],ie.data[$]))}return ye},x.recomputeFrameHash=function(G){for(var Y=G._transitionData._frameHash={},ee=G._transitionData._frames,$=0;$<ee.length;$++){var K=ee[$];K&&K.name&&(Y[K.name]=K)}},x.extendObjectWithContainers=function(G,Y,ee){var $,K,Q,ae,ie,oe,fe,ye,ce=i.extendDeepNoArrays({},Y||{}),me=i.expandObjectPaths(ce),xe={};if(ee&&ee.length)for(Q=0;Q<ee.length;Q++)$=i.nestedProperty(me,ee[Q]),K=$.get(),K===void 0?i.nestedProperty(xe,ee[Q]).set(null):($.set(null),i.nestedProperty(xe,ee[Q]).set(K));if(G=i.extendDeepNoArrays(G||{},me),ee&&ee.length){for(Q=0;Q<ee.length;Q++)if(ie=i.nestedProperty(xe,ee[Q]),fe=ie.get(),!!fe){for(oe=i.nestedProperty(G,ee[Q]),ye=oe.get(),Array.isArray(ye)||(ye=[],oe.set(ye)),ae=0;ae<fe.length;ae++){var ke=fe[ae];ke===null?ye[ae]=null:ye[ae]=x.extendObjectWithContainers(ye[ae],ke)}oe.set(ye)}}return G},x.dataArrayContainers=["transforms","dimensions"],x.layoutArrayContainers=t.layoutArrayContainers,x.extendTrace=function(G,Y){return x.extendObjectWithContainers(G,Y,x.dataArrayContainers)},x.extendLayout=function(G,Y){return x.extendObjectWithContainers(G,Y,x.layoutArrayContainers)},x.transition=function(G,Y,ee,$,K,Q){var ae={redraw:K.redraw},ie={},oe=[];return ae.prepareFn=function(){for(var fe=Array.isArray(Y)?Y.length:0,ye=$.slice(0,fe),ce=0;ce<ye.length;ce++){var me=ye[ce],xe=G._fullData[me],ke=xe._module;if(!!ke){if(ke.animatable){var Ae=ke.basePlotModule.name;ie[Ae]||(ie[Ae]=[]),ie[Ae].push(me)}G.data[ye[ce]]=x.extendTrace(G.data[ye[ce]],Y[ce])}}var Oe=i.expandObjectPaths(i.extendDeepNoArrays({},ee)),He=/^[xy]axis[0-9]*$/;for(var Ge in Oe)!He.test(Ge)||delete Oe[Ge].range;x.extendLayout(G.layout,Oe),delete G.calcdata,x.supplyDefaults(G),x.doCalcdata(G);var _e=i.expandObjectPaths(ee);if(_e){var Ie=G._fullLayout._plots;for(var We in Ie){var et=Ie[We],Ne=et.xaxis,De=et.yaxis,Ve=Ne.range.slice(),dt=De.range.slice(),Dt=null,Gt=null,Mt=null,zt=null;Array.isArray(_e[Ne._name+".range"])?Dt=_e[Ne._name+".range"].slice():Array.isArray((_e[Ne._name]||{}).range)&&(Dt=_e[Ne._name].range.slice()),Array.isArray(_e[De._name+".range"])?Gt=_e[De._name+".range"].slice():Array.isArray((_e[De._name]||{}).range)&&(Gt=_e[De._name].range.slice()),Ve&&Dt&&(Ne.r2l(Ve[0])!==Ne.r2l(Dt[0])||Ne.r2l(Ve[1])!==Ne.r2l(Dt[1]))&&(Mt={xr0:Ve,xr1:Dt}),dt&&Gt&&(De.r2l(dt[0])!==De.r2l(Gt[0])||De.r2l(dt[1])!==De.r2l(Gt[1]))&&(zt={yr0:dt,yr1:Gt}),(Mt||zt)&&oe.push(i.extendFlat({plotinfo:et},Mt,zt))}}return Promise.resolve()},ae.runFn=function(fe){var ye,ce=G._fullLayout._basePlotModules,me=oe.length,xe;if(ee)for(xe=0;xe<ce.length;xe++)ce[xe].transitionAxes&&ce[xe].transitionAxes(G,oe,Q,fe);me?(ye=i.extendFlat({},Q),ye.duration=0,delete ie.cartesian):ye=Q;for(var ke in ie){var Ae=ie[ke],Oe=G._fullData[Ae[0]]._module;Oe.basePlotModule.plot(G,Ae,ye,fe)}},W(G,Q,ae)},x.transitionFromReact=function(G,Y,ee,$){var K=G._fullLayout,Q=K.transition,ae={},ie=[];return ae.prepareFn=function(){var oe=K._plots;ae.redraw=!1,Y.anim==="some"&&(ae.redraw=!0),ee.anim==="some"&&(ae.redraw=!0);for(var fe in oe){var ye=oe[fe],ce=ye.xaxis,me=ye.yaxis,xe=$[ce._name].range.slice(),ke=$[me._name].range.slice(),Ae=ce.range.slice(),Oe=me.range.slice();ce.setScale(),me.setScale();var He=null,Ge=null;(ce.r2l(xe[0])!==ce.r2l(Ae[0])||ce.r2l(xe[1])!==ce.r2l(Ae[1]))&&(He={xr0:xe,xr1:Ae}),(me.r2l(ke[0])!==me.r2l(Oe[0])||me.r2l(ke[1])!==me.r2l(Oe[1]))&&(Ge={yr0:ke,yr1:Oe}),(He||Ge)&&ie.push(i.extendFlat({plotinfo:ye},He,Ge))}return Promise.resolve()},ae.runFn=function(oe){for(var fe=G._fullData,ye=G._fullLayout,ce=ye._basePlotModules,me,xe,ke,Ae=[],Oe=0;Oe<fe.length;Oe++)Ae.push(Oe);function He(){if(!!G._fullLayout)for(var _e=0;_e<ce.length;_e++)ce[_e].transitionAxes&&ce[_e].transitionAxes(G,ie,me,oe)}function Ge(){if(!!G._fullLayout)for(var _e=0;_e<ce.length;_e++)ce[_e].plot(G,ke,xe,oe)}ie.length&&Y.anim?Q.ordering==="traces first"?(me=i.extendFlat({},Q,{duration:0}),ke=Ae,xe=Q,setTimeout(He,Q.duration),Ge()):(me=Q,ke=null,xe=i.extendFlat({},Q,{duration:0}),setTimeout(Ge,me.duration),He()):ie.length?(me=Q,He()):Y.anim&&(ke=Ae,xe=Q,Ge())},W(G,Q,ae)};function W(G,Y,ee){var $=!1;function K(ce){var me=Promise.resolve();if(!ce)return me;for(;ce.length;)me=me.then(ce.shift());return me}function Q(ce){if(!!ce)for(;ce.length;)ce.shift()}function ae(){return G.emit("plotly_transitioning",[]),new Promise(function(ce){G._transitioning=!0,Y.duration>0&&(G._transitioningWithDuration=!0),G._transitionData._interruptCallbacks.push(function(){$=!0}),ee.redraw&&G._transitionData._interruptCallbacks.push(function(){return t.call("redraw",G)}),G._transitionData._interruptCallbacks.push(function(){G.emit("plotly_transitioninterrupted",[])});var me=0,xe=0;function ke(){return me++,function(){xe++,!$&&xe===me&&ie(ce)}}ee.runFn(ke),setTimeout(ke())})}function ie(ce){if(!!G._transitionData)return Q(G._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(ee.redraw)return t.call("redraw",G)}).then(function(){G._transitioning=!1,G._transitioningWithDuration=!1,G.emit("plotly_transitioned",[])}).then(ce)}function oe(){if(!!G._transitionData)return G._transitioning=!1,K(G._transitionData._interruptCallbacks)}var fe=[x.previousPromises,oe,ee.prepareFn,x.rehover,ae],ye=i.syncOrAsync(fe,G);return(!ye||!ye.then)&&(ye=Promise.resolve()),ye.then(function(){return G})}x.doCalcdata=function(G,Y){var ee=u.list(G),$=G._fullData,K=G._fullLayout,Q,ae,ie,oe,fe=new Array($.length),ye=(G.calcdata||[]).slice();for(G.calcdata=fe,K._numBoxes=0,K._numViolins=0,K._violinScaleGroupStats={},G._hmpixcount=0,G._hmlumcount=0,K._piecolormap={},K._sunburstcolormap={},K._treemapcolormap={},K._iciclecolormap={},K._funnelareacolormap={},ie=0;ie<$.length;ie++)if(Array.isArray(Y)&&Y.indexOf(ie)===-1){fe[ie]=ye[ie];continue}for(ie=0;ie<$.length;ie++)Q=$[ie],Q._arrayAttrs=n.findArrayAttributes(Q),Q._extremes={};var ce=K._subplots.polar||[];for(ie=0;ie<ce.length;ie++)ee.push(K[ce[ie]].radialaxis,K[ce[ie]].angularaxis);for(var me in K._colorAxes){var xe=K[me];xe.cauto!==!1&&(delete xe.cmin,delete xe.cmax)}var ke=!1;function Ae(Ge){if(Q=$[Ge],ae=Q._module,Q.visible===!0&&Q.transforms){if(ae&&ae.calc){var _e=ae.calc(G,Q);_e[0]&&_e[0].t&&_e[0].t._scene&&delete _e[0].t._scene.dirty}for(oe=0;oe<Q.transforms.length;oe++){var Ie=Q.transforms[oe];ae=A[Ie.type],ae&&ae.calcTransform&&(Q._hasCalcTransform=!0,ke=!0,ae.calcTransform(G,Q,Ie))}}}function Oe(Ge,_e){if(Q=$[Ge],ae=Q._module,!!ae.isContainer===_e){var Ie=[];if(Q.visible===!0&&Q._length!==0){delete Q._indexToPoints;var We=Q.transforms||[];for(oe=We.length-1;oe>=0;oe--)if(We[oe].enabled){Q._indexToPoints=We[oe]._indexToPoints;break}ae&&ae.calc&&(Ie=ae.calc(G,Q))}(!Array.isArray(Ie)||!Ie[0])&&(Ie=[{x:f,y:f}]),Ie[0].t||(Ie[0].t={}),Ie[0].trace=Q,fe[Ge]=Ie}}for(ue(ee,$,K),ie=0;ie<$.length;ie++)Oe(ie,!0);for(ie=0;ie<$.length;ie++)Ae(ie);for(ke&&ue(ee,$,K),ie=0;ie<$.length;ie++)Oe(ie,!0);for(ie=0;ie<$.length;ie++)Oe(ie,!1);se(G);var He=le(ee,G);if(He.length){for(K._numBoxes=0,K._numViolins=0,ie=0;ie<He.length;ie++)Oe(He[ie],!0);for(ie=0;ie<He.length;ie++)Oe(He[ie],!1);se(G)}t.getComponentMethod("fx","calc")(G),t.getComponentMethod("errorbars","calc")(G)};var J=/(total|sum|min|max|mean|median) (ascending|descending)/;function le(G,Y){var ee=[],$,K,Q,ae,ie;function oe(Et,At,it){var ht=At._id.charAt(0);if(Et==="histogram2dcontour"){var $e=At._counterAxes[0],Ee=u.getFromId(Y,$e),Xe=ht==="x"||$e==="x"&&Ee.type==="category",rt=ht==="y"||$e==="y"&&Ee.type==="category";return function(ut,Pt){return ut===0||Pt===0||Xe&&ut===it[Pt].length-1||rt&&Pt===it.length-1?-1:(ht==="y"?Pt:ut)-1}}else return function(ut,Pt){return ht==="y"?Pt:ut}}var fe={min:function(Et){return i.aggNums(Math.min,null,Et)},max:function(Et){return i.aggNums(Math.max,null,Et)},sum:function(Et){return i.aggNums(function(At,it){return At+it},null,Et)},total:function(Et){return i.aggNums(function(At,it){return At+it},null,Et)},mean:function(Et){return i.mean(Et)},median:function(Et){return i.median(Et)}};for($=0;$<G.length;$++){var ye=G[$];if(ye.type==="category"){var ce=ye.categoryorder.match(J);if(ce){var me=ce[1],xe=ce[2],ke=ye._id.charAt(0),Ae=ke==="x",Oe=[];for(K=0;K<ye._categories.length;K++)Oe.push([ye._categories[K],[]]);for(K=0;K<ye._traceIndices.length;K++){var He=ye._traceIndices[K],Ge=Y._fullData[He];if(Ge.visible===!0){var _e=Ge.type;t.traceIs(Ge,"histogram")&&(delete Ge._xautoBinFinished,delete Ge._yautoBinFinished);var Ie=_e==="splom",We=_e==="scattergl",et=Y.calcdata[He];for(Q=0;Q<et.length;Q++){var Ne=et[Q],De,Ve;if(Ie){var dt=Ge._axesDim[ye._id];if(!Ae){var Dt=Ge._diag[dt][0];Dt&&(ye=Y._fullLayout[u.id2name(Dt)])}var Gt=Ne.trace.dimensions[dt].values;for(ae=0;ae<Gt.length;ae++)for(De=ye._categoriesMap[Gt[ae]],ie=0;ie<Ne.trace.dimensions.length;ie++)if(ie!==dt){var Mt=Ne.trace.dimensions[ie];Oe[De][1].push(Mt.values[ae])}}else if(We){for(ae=0;ae<Ne.t.x.length;ae++)Ae?(De=Ne.t.x[ae],Ve=Ne.t.y[ae]):(De=Ne.t.y[ae],Ve=Ne.t.x[ae]),Oe[De][1].push(Ve);Ne.t&&Ne.t._scene&&delete Ne.t._scene.dirty}else if(Ne.hasOwnProperty("z")){Ve=Ne.z;var zt=oe(Ge.type,ye,Ve);for(ae=0;ae<Ve.length;ae++)for(ie=0;ie<Ve[ae].length;ie++)De=zt(ie,ae),De+1&&Oe[De][1].push(Ve[ae][ie])}else for(De=Ne.p,De===void 0&&(De=Ne[ke]),Ve=Ne.s,Ve===void 0&&(Ve=Ne.v),Ve===void 0&&(Ve=Ae?Ne.y:Ne.x),Array.isArray(Ve)||(Ve===void 0?Ve=[]:Ve=[Ve]),ae=0;ae<Ve.length;ae++)Oe[De][1].push(Ve[ae])}}}ye._categoriesValue=Oe;var Nt=[];for(K=0;K<Oe.length;K++)Nt.push([Oe[K][0],fe[me](Oe[K][1])]);Nt.sort(function(Et,At){return Et[1]-At[1]}),ye._categoriesAggregatedValue=Nt,ye._initialCategories=Nt.map(function(Et){return Et[0]}),xe==="descending"&&ye._initialCategories.reverse(),ee=ee.concat(ye.sortByInitialCategories())}}}return ee}function ue(G,Y,ee){var $={};function K(oe){oe.clearCalc(),oe.type==="multicategory"&&oe.setupMultiCategory(Y),$[oe._id]=1}i.simpleMap(G,K);for(var Q=ee._axisMatchGroups||[],ae=0;ae<Q.length;ae++)for(var ie in Q[ae])$[ie]||K(ee[u.id2name(ie)])}function se(G){var Y=G._fullLayout,ee=Y._visibleModules,$={},K,Q,ae;for(Q=0;Q<ee.length;Q++){var ie=ee[Q],oe=ie.crossTraceCalc;if(oe){var fe=ie.basePlotModule.name;$[fe]?i.pushUnique($[fe],oe):$[fe]=[oe]}}for(ae in $){var ye=$[ae],ce=Y._subplots[ae];if(Array.isArray(ce))for(K=0;K<ce.length;K++){var me=ce[K],xe=ae==="cartesian"?Y._plots[me]:Y[me];for(Q=0;Q<ye.length;Q++)ye[Q](G,xe,me)}else for(Q=0;Q<ye.length;Q++)ye[Q](G)}}x.rehover=function(G){G._fullLayout._rehover&&G._fullLayout._rehover()},x.redrag=function(G){G._fullLayout._redrag&&G._fullLayout._redrag()},x.generalUpdatePerTraceModule=function(G,Y,ee,$){var K=Y.traceHash,Q={},ae;for(ae=0;ae<ee.length;ae++){var ie=ee[ae],oe=ie[0].trace;oe.visible&&(Q[oe.type]=Q[oe.type]||[],Q[oe.type].push(ie))}for(var fe in K)if(!Q[fe]){var ye=K[fe][0],ce=ye[0].trace;ce.visible=!1,Q[fe]=[ye]}for(var me in Q){var xe=Q[me],ke=xe[0][0].trace._module;ke.plot(G,Y,i.filterVisible(xe),$)}Y.traceHash=Q},x.plotBasePlot=function(G,Y,ee,$,K){var Q=t.getModule(G),ae=y(Y.calcdata,Q)[0];Q.plot(Y,ae,$,K)},x.cleanBasePlot=function(G,Y,ee,$,K){var Q=K._has&&K._has(G),ae=ee._has&&ee._has(G);Q&&!ae&&K["_"+G+"layer"].selectAll("g.trace").remove()}},{"../components/color":366,"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plot_api/plot_template":543,"../plots/get_data":593,"../registry":638,"./animation_attributes":548,"./attributes":550,"./cartesian/axis_ids":558,"./cartesian/handle_outline":565,"./command":583,"./font_attributes":585,"./frame_attributes":586,"./layout_attributes":610,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],620:[function(e,k,z){k.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],621:[function(e,k,z){var l=e("../../lib"),o=e("../../lib/polygon").tester,c=l.findIndexOfMin,p=l.isAngleInsideSector,t=l.angleDelta,n=l.angleDist;function a(A,b,S,w,T){if(!p(b,w))return!1;var _,v;S[0]<S[1]?(_=S[0],v=S[1]):(_=S[1],v=S[0]);var P=o(s(_,w[0],w[1],T)),M=o(s(v,w[0],w[1],T)),E=[A*Math.cos(b),A*Math.sin(b)];return M.contains(E)&&!P.contains(E)}function i(A,b,S,w){var T,_,v=w[0],P=w[1],M=y(Math.sin(b)-Math.sin(A)),E=y(Math.cos(b)-Math.cos(A)),D=Math.tan(S),N=y(1/D),O=M/E,I=P-O*v;return N?M&&E?(T=I/(D-O),_=D*T):E?(T=P*N,_=P):(T=v,_=v*D):M&&E?(T=0,_=I):E?(T=0,_=P):T=_=NaN,[T,_]}function r(A,b,S,w){var T=-b*S,_=b*b+1,v=2*(b*T-S),P=T*T+S*S-A*A,M=Math.sqrt(v*v-4*_*P),E=(-v+M)/(2*_),D=(-v-M)/(2*_);return[[E,b*E+T+w],[D,b*D+T+w]]}function f(A,b){var S=b.length,w=new Array(S+1),T;for(T=0;T<S;T++){var _=b[T];w[T]=[A*Math.cos(_),A*Math.sin(_)]}return w[T]=w[0].slice(),w}function u(A,b,S,w){var T=w.length,_=[],v,P;function M(j){return[A*Math.cos(j),A*Math.sin(j)]}function E(j,Z,te){return i(j,Z,te,M(j))}function D(j){return l.mod(j,T)}function N(j){return p(j,[b,S])}var O=c(w,function(j){return N(j)?n(j,b):1/0}),I=E(w[O],w[D(O-1)],b);for(_.push(I),v=O,P=0;P<T;v++,P++){var F=w[D(v)];if(!N(F))break;_.push(M(F))}var V=c(w,function(j){return N(j)?n(j,S):1/0}),U=E(w[V],w[D(V+1)],S);return _.push(U),_.push([0,0]),_.push(_[0].slice()),_}function s(A,b,S,w){return l.isFullCircle([b,S])?f(A,w):u(A,b,S,w)}function h(A,b,S,w){for(var T=1/0,_=1/0,v=s(A,b,S,w),P=0;P<v.length;P++){var M=v[P];T=Math.min(T,M[0]),_=Math.min(_,-M[1])}return[T,_]}function d(A,b){var S=function(_){var v=t(_,A);return v>0?v:1/0},w=c(b,S),T=l.mod(w+1,b.length);return[b[w],b[T]]}function y(A){return Math.abs(A)>1e-10?A:0}function m(A,b,S){b=b||0,S=S||0;for(var w=A.length,T=new Array(w),_=0;_<w;_++){var v=A[_];T[_]=[b+v[0],S-v[1]]}return T}function g(A,b,S,w,T,_){var v=s(A,b,S,w);return"M"+m(v,T,_).join("L")}function x(A,b,S,w,T,_,v){var P,M;A<b?(P=A,M=b):(P=b,M=A);var E=m(s(P,S,w,T),_,v),D=m(s(M,S,w,T),_,v);return"M"+D.reverse().join("L")+"M"+E.join("L")}k.exports={isPtInsidePolygon:a,findPolygonOffset:h,findEnclosingVertexAngles:d,findIntersectionXY:i,findXYatLength:r,clampTiny:y,pathPolygon:g,pathPolygonAnnulus:x}},{"../../lib":503,"../../lib/polygon":515}],622:[function(e,k,z){var l=e("../get_data").getSubplotCalcData,o=e("../../lib").counterRegex,c=e("./polar"),p=e("./constants"),t=p.attr,n=p.name,a=o(n),i={};i[t]={valType:"subplotid",dflt:n,editType:"calc"};function r(u){for(var s=u._fullLayout,h=u.calcdata,d=s._subplots[n],y=0;y<d.length;y++){var m=d[y],g=l(h,n,m),x=s[m]._subplot;x||(x=c(u,m),s[m]._subplot=x),x.plot(g,s,u._promises)}}function f(u,s,h,d){for(var y=d._subplots[n]||[],m=d._has&&d._has("gl"),g=s._has&&s._has("gl"),x=m&&!g,A=0;A<y.length;A++){var b=y[A],S=d[b]._subplot;if(!s[b]&&!!S){S.framework.remove(),S.layers["radial-axis-title"].remove();for(var w in S.clipPaths)S.clipPaths[w].remove()}x&&S._scene&&(S._scene.destroy(),S._scene=null)}}k.exports={attr:t,name:n,idRoot:n,idRegex:a,attrRegex:a,attributes:i,layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),plot:r,clean:f,toSVG:e("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"./constants":620,"./layout_attributes":623,"./layout_defaults":624,"./polar":625}],623:[function(e,k,z){var l=e("../../components/color/attributes"),o=e("../cartesian/layout_attributes"),c=e("../domain").attributes,p=e("../../lib").extendFlat,t=e("../../plot_api/edit_types").overrideAll,n=t({color:o.color,showline:p({},o.showline,{dflt:!0}),linecolor:o.linecolor,linewidth:o.linewidth,showgrid:p({},o.showgrid,{dflt:!0}),gridcolor:o.gridcolor,gridwidth:o.gridwidth},"plot","from-root"),a=t({tickmode:o.tickmode,nticks:o.nticks,tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:o.ticks,ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,showticklabels:o.showticklabels,showtickprefix:o.showtickprefix,tickprefix:o.tickprefix,showticksuffix:o.showticksuffix,ticksuffix:o.ticksuffix,showexponent:o.showexponent,exponentformat:o.exponentformat,minexponent:o.minexponent,separatethousands:o.separatethousands,tickfont:o.tickfont,tickangle:o.tickangle,tickformat:o.tickformat,tickformatstops:o.tickformatstops,layer:o.layer},"plot","from-root"),i={visible:p({},o.visible,{dflt:!0}),type:p({},o.type,{values:["-","linear","log","date","category"]}),autotypenumbers:o.autotypenumbers,autorange:p({},o.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:p({},o.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:o.categoryorder,categoryarray:o.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:p({},o.title.text,{editType:"plot",dflt:""}),font:p({},o.title.font,{editType:"plot"}),editType:"plot"},hoverformat:o.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:o._deprecated.title,titlefont:o._deprecated.titlefont}};p(i,n,a);var r={visible:p({},o.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:o.autotypenumbers,categoryorder:o.categoryorder,categoryarray:o.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:o.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};p(r,n,a),k.exports={domain:c({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:l.background},radialaxis:i,angularaxis:r,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],624:[function(e,k,z){var l=e("../../lib"),o=e("../../components/color"),c=e("../../plot_api/plot_template"),p=e("../subplot_defaults"),t=e("../get_data").getSubplotData,n=e("../cartesian/tick_value_defaults"),a=e("../cartesian/tick_mark_defaults"),i=e("../cartesian/tick_label_defaults"),r=e("../cartesian/prefix_suffix_defaults"),f=e("../cartesian/category_order_defaults"),u=e("../cartesian/line_grid_defaults"),s=e("../cartesian/axis_autotype"),h=e("./layout_attributes"),d=e("./set_convert"),y=e("./constants"),m=y.axisNames;function g(A,b,S,w){var T=S("bgcolor");w.bgColor=o.combine(T,w.paper_bgcolor);var _=S("sector");S("hole");var v=t(w.fullData,y.name,w.id),P=w.layoutOut,M;function E(ue,se){return S(M+"."+ue,se)}for(var D=0;D<m.length;D++){M=m[D],l.isPlainObject(A[M])||(A[M]={});var N=A[M],O=c.newContainer(b,M);O._id=O._name=M,O._attr=w.id+"."+M,O._traceIndices=v.map(function(ue){return ue._expandedIndex});var I=y.axisName2dataArray[M],F=x(N,O,E,v,I,w);f(N,O,E,{axData:v,dataAttr:I});var V=E("visible");switch(d(O,b,P),E("uirevision",b.uirevision),O._m=1,M){case"radialaxis":var U=E("autorange",!O.isValidRange(N.range));N.autorange=U,U&&(F==="linear"||F==="-")&&E("rangemode"),U==="reversed"&&(O._m=-1),E("range"),O.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(F==="date"){l.log("Polar plots do not support date angular axes yet.");for(var j=0;j<v.length;j++)v[j].visible=!1;F=N.type=O.type="linear"}E(F==="linear"?"thetaunit":"period");var Z=E("direction");E("rotation",{counterclockwise:0,clockwise:90}[Z]);break}if(r(N,O,E,O.type,{tickSuffixDflt:O.thetaunit==="degrees"?"\xB0":void 0}),V){var te,re,W,J,le=w.font||{};te=E("color"),re=te===N.color?te:le.color,W=le.size,J=le.family,n(N,O,E,O.type),i(N,O,E,O.type,{font:{color:re,size:W,family:J}}),a(N,O,E,{outerTicks:!0}),u(N,O,E,{dfltColor:te,bgColor:w.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:h[M]}),E("layer"),M==="radialaxis"&&(E("side"),E("angle",_[0]),E("title.text"),l.coerceFont(E,"title.font",{color:re,size:l.bigFont(W),family:J}))}F!=="category"&&E("hoverformat"),O._input=N}b.angularaxis.type==="category"&&S("gridshape")}function x(A,b,S,w,T,_){var v=S("autotypenumbers",_.autotypenumbersDflt),P=S("type");if(P==="-"){for(var M,E=0;E<w.length;E++)if(w[E].visible){M=w[E];break}M&&M[T]&&(b.type=s(M[T],"gregorian",{noMultiCategory:!0,autotypenumbers:v})),b.type==="-"?b.type="linear":A.type=b.type}return b.type}k.exports=function(b,S,w){p(b,S,w,{type:y.name,attributes:h,handleDefaults:g,font:S.font,autotypenumbersDflt:S.autotypenumbers,paper_bgcolor:S.paper_bgcolor,fullData:w,layoutOut:S})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/axis_autotype":555,"../cartesian/category_order_defaults":559,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../get_data":593,"../subplot_defaults":632,"./constants":620,"./layout_attributes":623,"./set_convert":626}],625:[function(e,k,z){var l=e("@plotly/d3"),o=e("tinycolor2"),c=e("../../registry"),p=e("../../lib"),t=p.strRotate,n=p.strTranslate,a=e("../../components/color"),i=e("../../components/drawing"),r=e("../plots"),f=e("../../plots/cartesian/axes"),u=e("../cartesian/set_convert"),s=e("./set_convert"),h=e("../cartesian/autorange").doAutoRange,d=e("../cartesian/dragbox"),y=e("../../components/dragelement"),m=e("../../components/fx"),g=e("../../components/titles"),x=e("../cartesian/select").prepSelect,A=e("../cartesian/select").selectOnClick,b=e("../cartesian/select").clearSelect,S=e("../../lib/setcursor"),w=e("../../lib/clear_gl_canvases"),T=e("../../plot_api/subroutines").redrawReglTraces,_=e("../../constants/alignment").MID_SHIFT,v=e("./constants"),P=e("./helpers"),M=e("../smith/helpers"),E=M.smith,D=M.reactanceArc,N=M.resistanceArc,O=M.smithTransform,I=p._,F=p.mod,V=p.deg2rad,U=p.rad2deg;function j(le,ue,se){this.isSmith=se||!1,this.id=ue,this.gd=le,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var G=le._fullLayout,Y="clip"+G._uid+ue;this.clipIds.forTraces=Y+"-for-traces",this.clipPaths.forTraces=G._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=G["_"+(se?"smith":"polar")+"layer"].append("g").attr("class",ue),this.getHole=function(ee){return this.isSmith?0:ee.hole},this.getSector=function(ee){return this.isSmith?[0,360]:ee.sector},this.getRadial=function(ee){return this.isSmith?ee.realaxis:ee.radialaxis},this.getAngular=function(ee){return this.isSmith?ee.imaginaryaxis:ee.angularaxis},se||(this.radialTickLayout=null,this.angularTickLayout=null)}var Z=j.prototype;k.exports=function(ue,se,G){return new j(ue,se,G)},Z.plot=function(le,ue){for(var se=this,G=ue[se.id],Y=!1,ee=0;ee<le.length;ee++){var $=le[ee][0].trace;if($.cliponaxis===!1){Y=!0;break}}se._hasClipOnAxisFalse=Y,se.updateLayers(ue,G),se.updateLayout(ue,G),r.generalUpdatePerTraceModule(se.gd,se,le,G),se.updateFx(ue,G),se.isSmith&&(delete G.realaxis.range,delete G.imaginaryaxis.range)},Z.updateLayers=function(le,ue){var se=this,G=se.isSmith,Y=se.layers,ee=se.getRadial(ue),$=se.getAngular(ue),K=v.layerNames,Q=K.indexOf("frontplot"),ae=K.slice(0,Q),ie=$.layer==="below traces",oe=ee.layer==="below traces";ie&&ae.push("angular-line"),oe&&ae.push("radial-line"),ie&&ae.push("angular-axis"),oe&&ae.push("radial-axis"),ae.push("frontplot"),ie||ae.push("angular-line"),oe||ae.push("radial-line"),ie||ae.push("angular-axis"),oe||ae.push("radial-axis");var fe=(G?"smith":"polar")+"sublayer",ye=se.framework.selectAll("."+fe).data(ae,String);ye.enter().append("g").attr("class",function(ce){return fe+" "+ce}).each(function(ce){var me=Y[ce]=l.select(this);switch(ce){case"frontplot":G||me.append("g").classed("barlayer",!0),me.append("g").classed("scatterlayer",!0);break;case"backplot":me.append("g").classed("maplayer",!0);break;case"plotbg":Y.bg=me.append("path");break;case"radial-grid":me.style("fill","none");break;case"angular-grid":me.style("fill","none");break;case"radial-line":me.append("line").style("fill","none");break;case"angular-line":me.append("path").style("fill","none");break}}),ye.order()},Z.updateLayout=function(le,ue){var se=this,G=se.layers,Y=le._size,ee=se.getRadial(ue),$=se.getAngular(ue),K=ue.domain.x,Q=ue.domain.y;se.xOffset=Y.l+Y.w*K[0],se.yOffset=Y.t+Y.h*(1-Q[1]);var ae=se.xLength=Y.w*(K[1]-K[0]),ie=se.yLength=Y.h*(Q[1]-Q[0]),oe=se.getSector(ue);se.sectorInRad=oe.map(V);var fe=se.sectorBBox=re(oe),ye=fe[2]-fe[0],ce=fe[3]-fe[1],me=ie/ae,xe=Math.abs(ce/ye),ke,Ae,Oe,He,Ge;me>xe?(ke=ae,Ae=ae*xe,Ge=(ie-Ae)/Y.h/2,Oe=[K[0],K[1]],He=[Q[0]+Ge,Q[1]-Ge]):(ke=ie/xe,Ae=ie,Ge=(ae-ke)/Y.w/2,Oe=[K[0]+Ge,K[1]-Ge],He=[Q[0],Q[1]]),se.xLength2=ke,se.yLength2=Ae,se.xDomain2=Oe,se.yDomain2=He;var _e=se.xOffset2=Y.l+Y.w*Oe[0],Ie=se.yOffset2=Y.t+Y.h*(1-He[1]),We=se.radius=ke/ye,et=se.innerRadius=se.getHole(ue)*We,Ne=se.cx=_e-We*fe[0],De=se.cy=Ie+We*fe[3],Ve=se.cxx=Ne-_e,dt=se.cyy=De-Ie,Dt=ee.side,Gt;Dt==="counterclockwise"?(Gt=Dt,Dt="top"):Dt==="clockwise"&&(Gt=Dt,Dt="bottom"),se.radialAxis=se.mockAxis(le,ue,ee,{_id:"x",side:Dt,_trueSide:Gt,domain:[et/Y.w,We/Y.w]}),se.angularAxis=se.mockAxis(le,ue,$,{side:"right",domain:[0,Math.PI],autorange:!1}),se.doAutoRange(le,ue),se.updateAngularAxis(le,ue),se.updateRadialAxis(le,ue),se.updateRadialAxisTitle(le,ue),se.xaxis=se.mockCartesianAxis(le,ue,{_id:"x",domain:Oe}),se.yaxis=se.mockCartesianAxis(le,ue,{_id:"y",domain:He});var Mt=se.pathSubplot();se.clipPaths.forTraces.select("path").attr("d",Mt).attr("transform",n(Ve,dt)),G.frontplot.attr("transform",n(_e,Ie)).call(i.setClipUrl,se._hasClipOnAxisFalse?null:se.clipIds.forTraces,se.gd),G.bg.attr("d",Mt).attr("transform",n(Ne,De)).call(a.fill,ue.bgcolor)},Z.mockAxis=function(le,ue,se,G){var Y=p.extendFlat({},se,G);return s(Y,ue,le),Y},Z.mockCartesianAxis=function(le,ue,se){var G=this,Y=G.isSmith,ee=se._id,$=p.extendFlat({type:"linear"},se);u($,le);var K={x:[0,2],y:[1,3]};return $.setRange=function(){var Q=G.sectorBBox,ae=K[ee],ie=G.radialAxis._rl,oe=(ie[1]-ie[0])/(1-G.getHole(ue));$.range=[Q[ae[0]]*oe,Q[ae[1]]*oe]},$.isPtWithinRange=ee==="x"&&!Y?function(Q){return G.isPtInside(Q)}:function(){return!0},$.setRange(),$.setScale(),$},Z.doAutoRange=function(le,ue){var se=this,G=se.gd,Y=se.radialAxis,ee=se.getRadial(ue);h(G,Y);var $=Y.range;ee.range=$.slice(),ee._input.range=$.slice(),Y._rl=[Y.r2l($[0],null,"gregorian"),Y.r2l($[1],null,"gregorian")]},Z.updateRadialAxis=function(le,ue){var se=this,G=se.gd,Y=se.layers,ee=se.radius,$=se.innerRadius,K=se.cx,Q=se.cy,ae=se.getRadial(ue),ie=F(se.getSector(ue)[0],360),oe=se.radialAxis,fe=$<ee,ye=se.isSmith;ye||(se.fillViewInitialKey("radialaxis.angle",ae.angle),se.fillViewInitialKey("radialaxis.range",oe.range.slice()),oe.setGeometry()),oe.tickangle==="auto"&&ie>90&&ie<=270&&(oe.tickangle=180);var ce=ye?function(We){var et=O(se,E([We.x,0]));return n(et[0]-K,et[1]-Q)}:function(We){return n(oe.l2p(We.x)+$,0)},me=ye?function(We){return N(se,We.x,-1/0,1/0)}:function(We){return se.pathArc(oe.r2p(We.x)+$)},xe=te(ae);if(se.radialTickLayout!==xe&&(Y["radial-axis"].selectAll(".xtick").remove(),se.radialTickLayout=xe),fe){oe.setScale();var ke=0,Ae=ye?(oe.tickvals||[]).filter(function(We){return We>=0}).map(function(We){return f.tickText(oe,We,!0,!1)}):f.calcTicks(oe),Oe=ye?Ae:f.clipEnds(oe,Ae),He=f.getTickSigns(oe)[2];ye&&((oe.ticks==="top"&&oe.side==="bottom"||oe.ticks==="bottom"&&oe.side==="top")&&(He=-He),oe.ticks==="top"&&oe.side==="top"&&(ke=-oe.ticklen),oe.ticks==="bottom"&&oe.side==="bottom"&&(ke=oe.ticklen)),f.drawTicks(G,oe,{vals:Ae,layer:Y["radial-axis"],path:f.makeTickPath(oe,0,He),transFn:ce,crisp:!1}),f.drawGrid(G,oe,{vals:Oe,layer:Y["radial-grid"],path:me,transFn:p.noop,crisp:!1}),f.drawLabels(G,oe,{vals:Ae,layer:Y["radial-axis"],transFn:ce,labelFns:f.makeLabelFns(oe,ke)})}var Ge=se.radialAxisAngle=se.vangles?U(W(V(ae.angle),se.vangles)):ae.angle,_e=n(K,Q),Ie=_e+t(-Ge);J(Y["radial-axis"],fe&&(ae.showticklabels||ae.ticks),{transform:Ie}),J(Y["radial-grid"],fe&&ae.showgrid,{transform:ye?"":_e}),J(Y["radial-line"].select("line"),fe&&ae.showline,{x1:ye?-ee:$,y1:0,x2:ee,y2:0,transform:Ie}).attr("stroke-width",ae.linewidth).call(a.stroke,ae.linecolor)},Z.updateRadialAxisTitle=function(le,ue,se){if(!this.isSmith){var G=this,Y=G.gd,ee=G.radius,$=G.cx,K=G.cy,Q=G.getRadial(ue),ae=G.id+"title",ie=0;if(Q.title){var oe=i.bBox(G.layers["radial-axis"].node()).height,fe=Q.title.font.size,ye=Q.side;ie=ye==="top"?fe:ye==="counterclockwise"?-(oe+fe*.4):oe+fe*.8}var ce=se!==void 0?se:G.radialAxisAngle,me=V(ce),xe=Math.cos(me),ke=Math.sin(me),Ae=$+ee/2*xe+ie*ke,Oe=K-ee/2*ke+ie*xe;G.layers["radial-axis-title"]=g.draw(Y,ae,{propContainer:Q,propName:G.id+".radialaxis.title",placeholder:I(Y,"Click to enter radial axis title"),attributes:{x:Ae,y:Oe,"text-anchor":"middle"},transform:{rotate:-ce}})}},Z.updateAngularAxis=function(le,ue){var se=this,G=se.gd,Y=se.layers,ee=se.radius,$=se.innerRadius,K=se.cx,Q=se.cy,ae=se.getAngular(ue),ie=se.angularAxis,oe=se.isSmith;oe||(se.fillViewInitialKey("angularaxis.rotation",ae.rotation),ie.setGeometry(),ie.setScale());var fe=oe?function(et){var Ne=O(se,E([0,et.x]));return Math.atan2(Ne[0]-K,Ne[1]-Q)-Math.PI/2}:function(et){return ie.t2g(et.x)};ie.type==="linear"&&ie.thetaunit==="radians"&&(ie.tick0=U(ie.tick0),ie.dtick=U(ie.dtick));var ye=function(et){return n(K+ee*Math.cos(et),Q-ee*Math.sin(et))},ce=oe?function(et){var Ne=O(se,E([0,et.x]));return n(Ne[0],Ne[1])}:function(et){return ye(fe(et))},me=oe?function(et){var Ne=O(se,E([0,et.x])),De=Math.atan2(Ne[0]-K,Ne[1]-Q)-Math.PI/2;return n(Ne[0],Ne[1])+t(-U(De))}:function(et){var Ne=fe(et);return ye(Ne)+t(-U(Ne))},xe=oe?function(et){return D(se,et.x,0,1/0)}:function(et){var Ne=fe(et),De=Math.cos(Ne),Ve=Math.sin(Ne);return"M"+[K+$*De,Q-$*Ve]+"L"+[K+ee*De,Q-ee*Ve]},ke=f.makeLabelFns(ie,0),Ae=ke.labelStandoff,Oe={};Oe.xFn=function(et){var Ne=fe(et);return Math.cos(Ne)*Ae},Oe.yFn=function(et){var Ne=fe(et),De=Math.sin(Ne)>0?.2:1;return-Math.sin(Ne)*(Ae+et.fontSize*De)+Math.abs(Math.cos(Ne))*(et.fontSize*_)},Oe.anchorFn=function(et){var Ne=fe(et),De=Math.cos(Ne);return Math.abs(De)<.1?"middle":De>0?"start":"end"},Oe.heightFn=function(et,Ne,De){var Ve=fe(et);return-.5*(1+Math.sin(Ve))*De};var He=te(ae);se.angularTickLayout!==He&&(Y["angular-axis"].selectAll("."+ie._id+"tick").remove(),se.angularTickLayout=He);var Ge=oe?[1/0].concat(ie.tickvals||[]).map(function(et){return f.tickText(ie,et,!0,!1)}):f.calcTicks(ie);oe&&(Ge[0].text="\u221E",Ge[0].fontSize*=1.75);var _e;if(ue.gridshape==="linear"?(_e=Ge.map(fe),p.angleDelta(_e[0],_e[1])<0&&(_e=_e.slice().reverse())):_e=null,se.vangles=_e,ie.type==="category"&&(Ge=Ge.filter(function(et){return p.isAngleInsideSector(fe(et),se.sectorInRad)})),ie.visible){var Ie=ie.ticks==="inside"?-1:1,We=(ie.linewidth||1)/2;f.drawTicks(G,ie,{vals:Ge,layer:Y["angular-axis"],path:"M"+Ie*We+",0h"+Ie*ie.ticklen,transFn:me,crisp:!1}),f.drawGrid(G,ie,{vals:Ge,layer:Y["angular-grid"],path:xe,transFn:p.noop,crisp:!1}),f.drawLabels(G,ie,{vals:Ge,layer:Y["angular-axis"],repositionOnUpdate:!0,transFn:ce,labelFns:Oe})}J(Y["angular-line"].select("path"),ae.showline,{d:se.pathSubplot(),transform:n(K,Q)}).attr("stroke-width",ae.linewidth).call(a.stroke,ae.linecolor)},Z.updateFx=function(le,ue){if(!this.gd._context.staticPlot){var se=!this.isSmith;se&&(this.updateAngularDrag(le),this.updateRadialDrag(le,ue,0),this.updateRadialDrag(le,ue,1)),this.updateHoverAndMainDrag(le)}},Z.updateHoverAndMainDrag=function(le){var ue=this,se=ue.isSmith,G=ue.gd,Y=ue.layers,ee=le._zoomlayer,$=v.MINZOOM,K=v.OFFEDGE,Q=ue.radius,ae=ue.innerRadius,ie=ue.cx,oe=ue.cy,fe=ue.cxx,ye=ue.cyy,ce=ue.sectorInRad,me=ue.vangles,xe=ue.radialAxis,ke=P.clampTiny,Ae=P.findXYatLength,Oe=P.findEnclosingVertexAngles,He=v.cornerHalfWidth,Ge=v.cornerLen/2,_e,Ie,We=d.makeDragger(Y,"path","maindrag","crosshair");l.select(We).attr("d",ue.pathSubplot()).attr("transform",n(ie,oe)),We.onmousemove=function(Je){m.hover(G,Je,ue.id),G._fullLayout._lasthover=We,G._fullLayout._hoversubplot=ue.id},We.onmouseout=function(Je){G._dragging||y.unhover(G,Je)};var et={element:We,gd:G,subplot:ue.id,plotinfo:{id:ue.id,xaxis:ue.xaxis,yaxis:ue.yaxis},xaxes:[ue.xaxis],yaxes:[ue.yaxis]},Ne,De,Ve,dt,Dt,Gt,Mt,zt,Nt;function Et(Je,gt){return Math.sqrt(Je*Je+gt*gt)}function At(Je,gt){return Et(Je-fe,gt-ye)}function it(Je,gt){return Math.atan2(ye-gt,Je-fe)}function ht(Je,gt){return[Je*Math.cos(gt),Je*Math.sin(-gt)]}function $e(Je,gt){if(Je===0)return ue.pathSector(2*He);var Ct=Ge/Je,or=gt-Ct,gr=gt+Ct,lr=Math.max(0,Math.min(Je,Q)),mr=lr-He,Fr=lr+He;return"M"+ht(mr,or)+"A"+[mr,mr]+" 0,0,0 "+ht(mr,gr)+"L"+ht(Fr,gr)+"A"+[Fr,Fr]+" 0,0,1 "+ht(Fr,or)+"Z"}function Ee(Je,gt,Ct){if(Je===0)return ue.pathSector(2*He);var or=ht(Je,gt),gr=ht(Je,Ct),lr=ke((or[0]+gr[0])/2),mr=ke((or[1]+gr[1])/2),Fr,Rr;if(lr&&mr){var ir=mr/lr,Vr=-1/ir,qe=Ae(He,ir,lr,mr);Fr=Ae(Ge,Vr,qe[0][0],qe[0][1]),Rr=Ae(Ge,Vr,qe[1][0],qe[1][1])}else{var we,Me;mr?(we=Ge,Me=He):(we=He,Me=Ge),Fr=[[lr-we,mr-Me],[lr+we,mr-Me]],Rr=[[lr-we,mr+Me],[lr+we,mr+Me]]}return"M"+Fr.join("L")+"L"+Rr.reverse().join("L")+"Z"}function Xe(){Ve=null,dt=null,Dt=ue.pathSubplot(),Gt=!1;var Je=G._fullLayout[ue.id];Mt=o(Je.bgcolor).getLuminance(),zt=d.makeZoombox(ee,Mt,ie,oe,Dt),zt.attr("fill-rule","evenodd"),Nt=d.makeCorners(ee,ie,oe),b(G)}function rt(Je,gt){return gt=Math.max(Math.min(gt,Q),ae),Je<K?Je=0:Q-Je<K?Je=Q:gt<K?gt=0:Q-gt<K&&(gt=Q),Math.abs(gt-Je)>$?(Je<gt?(Ve=Je,dt=gt):(Ve=gt,dt=Je),!0):(Ve=null,dt=null,!1)}function ut(Je,gt){Je=Je||Dt,gt=gt||"M0,0Z",zt.attr("d",Je),Nt.attr("d",gt),d.transitionZoombox(zt,Nt,Gt,Mt),Gt=!0;var Ct={};Ut(Ct),G.emit("plotly_relayouting",Ct)}function Pt(Je,gt){Je=Je*_e,gt=gt*Ie;var Ct=Ne+Je,or=De+gt,gr=At(Ne,De),lr=Math.min(At(Ct,or),Q),mr=it(Ne,De),Fr,Rr;rt(gr,lr)&&(Fr=Dt+ue.pathSector(dt),Ve&&(Fr+=ue.pathSector(Ve)),Rr=$e(Ve,mr)+$e(dt,mr)),ut(Fr,Rr)}function kt(Je,gt,Ct,or){var gr=P.findIntersectionXY(Ct,or,Ct,[Je-fe,ye-gt]);return Et(gr[0],gr[1])}function Bt(Je,gt){var Ct=Ne+Je,or=De+gt,gr=it(Ne,De),lr=it(Ct,or),mr=Oe(gr,me),Fr=Oe(lr,me),Rr=kt(Ne,De,mr[0],mr[1]),ir=Math.min(kt(Ct,or,Fr[0],Fr[1]),Q),Vr,qe;rt(Rr,ir)&&(Vr=Dt+ue.pathSector(dt),Ve&&(Vr+=ue.pathSector(Ve)),qe=[Ee(Ve,mr[0],mr[1]),Ee(dt,mr[0],mr[1])].join(" ")),ut(Vr,qe)}function Xt(){if(d.removeZoombox(G),!(Ve===null||dt===null)){var Je={};Ut(Je),d.showDoubleClickNotifier(G),c.call("_guiRelayout",G,Je)}}function Ut(Je){var gt=xe._rl,Ct=(gt[1]-gt[0])/(1-ae/Q)/Q,or=[gt[0]+(Ve-ae)*Ct,gt[0]+(dt-ae)*Ct];Je[ue.id+".radialaxis.range"]=or}function Jt(Je,gt){var Ct=G._fullLayout.clickmode;if(d.removeZoombox(G),Je===2){var or={};for(var gr in ue.viewInitial)or[ue.id+"."+gr]=ue.viewInitial[gr];G.emit("plotly_doubleclick",null),c.call("_guiRelayout",G,or)}Ct.indexOf("select")>-1&&Je===1&&A(gt,G,[ue.xaxis],[ue.yaxis],ue.id,et),Ct.indexOf("event")>-1&&m.click(G,gt,ue.id)}et.prepFn=function(Je,gt,Ct){var or=G._fullLayout.dragmode,gr=We.getBoundingClientRect();G._fullLayout._calcInverseTransform(G);var lr=G._fullLayout._invTransform;_e=G._fullLayout._invScaleX,Ie=G._fullLayout._invScaleY;var mr=p.apply3DTransform(lr)(gt-gr.left,Ct-gr.top);if(Ne=mr[0],De=mr[1],me){var Fr=P.findPolygonOffset(Q,ce[0],ce[1],me);Ne+=fe+Fr[0],De+=ye+Fr[1]}switch(or){case"zoom":et.clickFn=Jt,se||(me?et.moveFn=Bt:et.moveFn=Pt,et.doneFn=Xt,Xe());break;case"select":case"lasso":x(Je,gt,Ct,et,or);break}},y.init(et)},Z.updateRadialDrag=function(le,ue,se){var G=this,Y=G.gd,ee=G.layers,$=G.radius,K=G.innerRadius,Q=G.cx,ae=G.cy,ie=G.radialAxis,oe=v.radialDragBoxSize,fe=oe/2;if(!ie.visible)return;var ye=V(G.radialAxisAngle),ce=ie._rl,me=ce[0],xe=ce[1],ke=ce[se],Ae=.75*(ce[1]-ce[0])/(1-G.getHole(ue))/$,Oe,He,Ge;se?(Oe=Q+($+fe)*Math.cos(ye),He=ae-($+fe)*Math.sin(ye),Ge="radialdrag"):(Oe=Q+(K-fe)*Math.cos(ye),He=ae-(K-fe)*Math.sin(ye),Ge="radialdrag-inner");var _e=d.makeRectDragger(ee,Ge,"crosshair",-fe,-fe,oe,oe),Ie={element:_e,gd:Y};J(l.select(_e),ie.visible&&K<$,{transform:n(Oe,He)});var We,et,Ne;function De(Mt,zt){if(We)We(Mt,zt);else{var Nt=[Mt,-zt],Et=[Math.cos(ye),Math.sin(ye)],At=Math.abs(p.dot(Nt,Et)/Math.sqrt(p.dot(Nt,Nt)));isNaN(At)||(We=At<.5?Dt:Gt)}var it={};Ve(it),Y.emit("plotly_relayouting",it)}function Ve(Mt){et!==null?Mt[G.id+".radialaxis.angle"]=et:Ne!==null&&(Mt[G.id+".radialaxis.range["+se+"]"]=Ne)}function dt(){et!==null?c.call("_guiRelayout",Y,G.id+".radialaxis.angle",et):Ne!==null&&c.call("_guiRelayout",Y,G.id+".radialaxis.range["+se+"]",Ne)}function Dt(Mt,zt){if(se!==0){var Nt=Oe+Mt,Et=He+zt;et=Math.atan2(ae-Et,Nt-Q),G.vangles&&(et=W(et,G.vangles)),et=U(et);var At=n(Q,ae)+t(-et);ee["radial-axis"].attr("transform",At),ee["radial-line"].select("line").attr("transform",At);var it=G.gd._fullLayout,ht=it[G.id];G.updateRadialAxisTitle(it,ht,et)}}function Gt(Mt,zt){var Nt=p.dot([Mt,-zt],[Math.cos(ye),Math.sin(ye)]);if(Ne=ke-Ae*Nt,Ae>0!=(se?Ne>me:Ne<xe)){Ne=null;return}var Et=Y._fullLayout,At=Et[G.id];ie.range[se]=Ne,ie._rl[se]=Ne,G.updateRadialAxis(Et,At),G.xaxis.setRange(),G.xaxis.setScale(),G.yaxis.setRange(),G.yaxis.setScale();var it=!1;for(var ht in G.traceHash){var $e=G.traceHash[ht],Ee=p.filterVisible($e),Xe=$e[0][0].trace._module;Xe.plot(Y,G,Ee,At),c.traceIs(ht,"gl")&&Ee.length&&(it=!0)}it&&(w(Y),T(Y))}Ie.prepFn=function(){We=null,et=null,Ne=null,Ie.moveFn=De,Ie.doneFn=dt,b(Y)},Ie.clampFn=function(Mt,zt){return Math.sqrt(Mt*Mt+zt*zt)<v.MINDRAG&&(Mt=0,zt=0),[Mt,zt]},y.init(Ie)},Z.updateAngularDrag=function(le){var ue=this,se=ue.gd,G=ue.layers,Y=ue.radius,ee=ue.angularAxis,$=ue.cx,K=ue.cy,Q=ue.cxx,ae=ue.cyy,ie=v.angularDragBoxSize,oe=d.makeDragger(G,"path","angulardrag","move"),fe={element:oe,gd:se};l.select(oe).attr("d",ue.pathAnnulus(Y,Y+ie)).attr("transform",n($,K)).call(S,"move");function ye(Ne,De){return Math.atan2(ae+ie-De,Ne-Q-ie)}var ce=G.frontplot.select(".scatterlayer").selectAll(".trace"),me=ce.selectAll(".point"),xe=ce.selectAll(".textpoint"),ke,Ae,Oe,He,Ge,_e;function Ie(Ne,De){var Ve=ue.gd._fullLayout,dt=Ve[ue.id],Dt=ke+Ne*le._invScaleX,Gt=Ae+De*le._invScaleY,Mt=ye(Dt,Gt),zt=U(Mt-_e);if(He=Oe+zt,G.frontplot.attr("transform",n(ue.xOffset2,ue.yOffset2)+t([-zt,Q,ae])),ue.vangles){Ge=ue.radialAxisAngle+zt;var Nt=n($,K)+t(-zt),Et=n($,K)+t(-Ge);G.bg.attr("transform",Nt),G["radial-grid"].attr("transform",Nt),G["radial-axis"].attr("transform",Et),G["radial-line"].select("line").attr("transform",Et),ue.updateRadialAxisTitle(Ve,dt,Ge)}else ue.clipPaths.forTraces.select("path").attr("transform",n(Q,ae)+t(zt));me.each(function(){var rt=l.select(this),ut=i.getTranslate(rt);rt.attr("transform",n(ut.x,ut.y)+t([zt]))}),xe.each(function(){var rt=l.select(this),ut=rt.select("text"),Pt=i.getTranslate(rt);rt.attr("transform",t([zt,ut.attr("x"),ut.attr("y")])+n(Pt.x,Pt.y))}),ee.rotation=p.modHalf(He,360),ue.updateAngularAxis(Ve,dt),ue._hasClipOnAxisFalse&&!p.isFullCircle(ue.sectorInRad)&&ce.call(i.hideOutsideRangePoints,ue);var At=!1;for(var it in ue.traceHash)if(c.traceIs(it,"gl")){var ht=ue.traceHash[it],$e=p.filterVisible(ht),Ee=ht[0][0].trace._module;Ee.plot(se,ue,$e,dt),$e.length&&(At=!0)}At&&(w(se),T(se));var Xe={};We(Xe),se.emit("plotly_relayouting",Xe)}function We(Ne){Ne[ue.id+".angularaxis.rotation"]=He,ue.vangles&&(Ne[ue.id+".radialaxis.angle"]=Ge)}function et(){xe.select("text").attr("transform",null);var Ne={};We(Ne),c.call("_guiRelayout",se,Ne)}fe.prepFn=function(Ne,De,Ve){var dt=le[ue.id];Oe=dt.angularaxis.rotation;var Dt=oe.getBoundingClientRect();ke=De-Dt.left,Ae=Ve-Dt.top,se._fullLayout._calcInverseTransform(se);var Gt=p.apply3DTransform(le._invTransform)(ke,Ae);ke=Gt[0],Ae=Gt[1],_e=ye(ke,Ae),fe.moveFn=Ie,fe.doneFn=et,b(se)},ue.vangles&&!p.isFullCircle(ue.sectorInRad)&&(fe.prepFn=p.noop,S(l.select(oe),null)),y.init(fe)},Z.isPtInside=function(le){if(this.isSmith)return!0;var ue=this.sectorInRad,se=this.vangles,G=this.angularAxis.c2g(le.theta),Y=this.radialAxis,ee=Y.c2l(le.r),$=Y._rl,K=se?P.isPtInsidePolygon:p.isPtInsideSector;return K(ee,G,$,ue,se)},Z.pathArc=function(le){var ue=this.sectorInRad,se=this.vangles,G=se?P.pathPolygon:p.pathArc;return G(le,ue[0],ue[1],se)},Z.pathSector=function(le){var ue=this.sectorInRad,se=this.vangles,G=se?P.pathPolygon:p.pathSector;return G(le,ue[0],ue[1],se)},Z.pathAnnulus=function(le,ue){var se=this.sectorInRad,G=this.vangles,Y=G?P.pathPolygonAnnulus:p.pathAnnulus;return Y(le,ue,se[0],se[1],G)},Z.pathSubplot=function(){var le=this.innerRadius,ue=this.radius;return le?this.pathAnnulus(le,ue):this.pathSector(ue)},Z.fillViewInitialKey=function(le,ue){le in this.viewInitial||(this.viewInitial[le]=ue)};function te(le){var ue=le.ticks+String(le.ticklen)+String(le.showticklabels);return"side"in le&&(ue+=le.side),ue}function re(le){var ue=le[0],se=le[1],G=se-ue,Y=F(ue,360),ee=Y+G,$=Math.cos(V(Y)),K=Math.sin(V(Y)),Q=Math.cos(V(ee)),ae=Math.sin(V(ee)),ie,oe,fe,ye;return Y<=90&&ee>=90||Y>90&&ee>=450?ye=1:K<=0&&ae<=0?ye=0:ye=Math.max(K,ae),Y<=180&&ee>=180||Y>180&&ee>=540?ie=-1:$>=0&&Q>=0?ie=0:ie=Math.min($,Q),Y<=270&&ee>=270||Y>270&&ee>=630?oe=-1:K>=0&&ae>=0?oe=0:oe=Math.min(K,ae),ee>=360?fe=1:$<=0&&Q<=0?fe=0:fe=Math.max($,Q),[ie,oe,fe,ye]}function W(le,ue){var se=function(Y){return p.angleDist(le,Y)},G=p.findIndexOfMin(ue,se);return ue[G]}function J(le,ue,se){return ue?(le.attr("display",null),le.attr(se)):le&&le.attr("display","none"),le}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../plot_api/subroutines":544,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/dragbox":563,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"../smith/helpers":628,"./constants":620,"./helpers":621,"./set_convert":626,"@plotly/d3":58,tinycolor2:312}],626:[function(e,k,z){var l=e("../../lib"),o=e("../cartesian/set_convert"),c=l.deg2rad,p=l.rad2deg;k.exports=function(f,u,s){switch(o(f,s),f._id){case"x":case"radialaxis":t(f,u);break;case"angularaxis":i(f,u);break}};function t(r,f){var u=f._subplot;r.setGeometry=function(){var s=r._rl[0],h=r._rl[1],d=u.innerRadius,y=(u.radius-d)/(h-s),m=d/y,g=s>h?function(x){return x<=0}:function(x){return x>=0};r.c2g=function(x){var A=r.c2l(x)-s;return(g(A)?A:0)+m},r.g2c=function(x){return r.l2c(x+s-m)},r.g2p=function(x){return x*y},r.c2p=function(x){return r.g2p(r.c2g(x))}}}function n(r,f){return f==="degrees"?c(r):r}function a(r,f){return f==="degrees"?p(r):r}function i(r,f){var u=r.type;if(u==="linear"){var s=r.d2c,h=r.c2d;r.d2c=function(d,y){return n(s(d),y)},r.c2d=function(d,y){return h(a(d,y))}}r.makeCalcdata=function(d,y){var m=d[y],g=d._length,x,A,b=function(v){return r.d2c(v,d.thetaunit)};if(m){if(l.isTypedArray(m)&&u==="linear"){if(g===m.length)return m;if(m.subarray)return m.subarray(0,g)}for(x=new Array(g),A=0;A<g;A++)x[A]=b(m[A])}else{var S=y+"0",w="d"+y,T=S in d?b(d[S]):0,_=d[w]?b(d[w]):(r.period||2*Math.PI)/g;for(x=new Array(g),A=0;A<g;A++)x[A]=T+A*_}return x},r.setGeometry=function(){var d=f.sector,y=d.map(c),m={clockwise:-1,counterclockwise:1}[r.direction],g=c(r.rotation),x=function(P){return m*P+g},A=function(P){return(P-g)/m},b,S,w,T;switch(u){case"linear":S=b=l.identity,T=c,w=p,r.range=l.isFullCircle(y)?[d[0],d[0]+360]:y.map(A).map(p);break;case"category":var _=r._categories.length,v=r.period?Math.max(r.period,_):_;v===0&&(v=1),S=T=function(P){return P*2*Math.PI/v},b=w=function(P){return P*v/Math.PI/2},r.range=[0,v];break}r.c2g=function(P){return x(S(P))},r.g2c=function(P){return b(A(P))},r.t2g=function(P){return x(T(P))},r.g2t=function(P){return w(A(P))}}}},{"../../lib":503,"../cartesian/set_convert":576}],627:[function(e,k,z){k.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],628:[function(e,k,z){function l(a){return a<0?-1:a>0?1:0}function o(a){var i=a[0],r=a[1];if(!isFinite(i)||!isFinite(r))return[1,0];var f=(i+1)*(i+1)+r*r;return[(i*i+r*r-1)/f,2*r/f]}function c(a,i){var r=i[0],f=i[1];return[r*a.radius+a.cx,-f*a.radius+a.cy]}function p(a,i){return i*a.radius}function t(a,i,r,f){var u=c(a,o([r,i])),s=u[0],h=u[1],d=c(a,o([f,i])),y=d[0],m=d[1];if(i===0)return["M"+s+","+h,"L"+y+","+m].join(" ");var g=p(a,1/Math.abs(i));return["M"+s+","+h,"A"+g+","+g+" 0 0,"+(i<0?1:0)+" "+y+","+m].join(" ")}function n(a,i,r,f){var u=p(a,1/(i+1)),s=c(a,o([i,r])),h=s[0],d=s[1],y=c(a,o([i,f])),m=y[0],g=y[1];if(l(r)!==l(f)){var x=c(a,o([i,0])),A=x[0],b=x[1];return["M"+h+","+d,"A"+u+","+u+" 0 0,"+(0<r?0:1)+" "+A+","+b,"A"+u+","+u+" 0 0,"+(f<0?0:1)+m+","+g].join(" ")}return["M"+h+","+d,"A"+u+","+u+" 0 0,"+(f<r?0:1)+" "+m+","+g].join(" ")}k.exports={smith:o,reactanceArc:t,resistanceArc:n,smithTransform:c}},{}],629:[function(e,k,z){var l=e("../get_data").getSubplotCalcData,o=e("../../lib").counterRegex,c=e("../polar/polar"),p=e("./constants"),t=p.attr,n=p.name,a=o(n),i={};i[t]={valType:"subplotid",dflt:n,editType:"calc"};function r(u){for(var s=u._fullLayout,h=u.calcdata,d=s._subplots[n],y=0;y<d.length;y++){var m=d[y],g=l(h,n,m),x=s[m]._subplot;x||(x=c(u,m,!0),s[m]._subplot=x),x.plot(g,s,u._promises)}}function f(u,s,h,d){for(var y=d._subplots[n]||[],m=0;m<y.length;m++){var g=y[m],x=d[g]._subplot;if(!s[g]&&!!x){x.framework.remove();for(var A in x.clipPaths)x.clipPaths[A].remove()}}}k.exports={attr:t,name:n,idRoot:n,idRegex:a,attrRegex:a,attributes:i,layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),plot:r,clean:f,toSVG:e("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"../polar/polar":625,"./constants":627,"./layout_attributes":630,"./layout_defaults":631}],630:[function(e,k,z){var l=e("../../components/color/attributes"),o=e("../cartesian/layout_attributes"),c=e("../domain").attributes,p=e("../../lib").extendFlat,t=e("../../plot_api/edit_types").overrideAll,n=t({color:o.color,showline:p({},o.showline,{dflt:!0}),linecolor:o.linecolor,linewidth:o.linewidth,showgrid:p({},o.showgrid,{dflt:!0}),gridcolor:o.gridcolor,gridwidth:o.gridwidth},"plot","from-root"),a=t({ticklen:o.ticklen,tickwidth:p({},o.tickwidth,{dflt:2}),tickcolor:o.tickcolor,showticklabels:o.showticklabels,showtickprefix:o.showtickprefix,tickprefix:o.tickprefix,showticksuffix:o.showticksuffix,ticksuffix:o.ticksuffix,tickfont:o.tickfont,tickformat:o.tickformat,hoverformat:o.hoverformat,layer:o.layer},"plot","from-root"),i=p({visible:p({},o.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:p({},o.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},n,a),r=p({visible:p({},o.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:o.ticks,editType:"calc"},n,a);k.exports={domain:c({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:l.background},realaxis:i,imaginaryaxis:r,editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],631:[function(e,k,z){var l=e("../../lib"),o=e("../../components/color"),c=e("../../plot_api/plot_template"),p=e("../subplot_defaults"),t=e("../get_data").getSubplotData,n=e("../cartesian/prefix_suffix_defaults"),a=e("../cartesian/tick_label_defaults"),i=e("../cartesian/line_grid_defaults"),r=e("../cartesian/set_convert"),f=e("./layout_attributes"),u=e("./constants"),s=u.axisNames,h=y(function(m){return m.slice().reverse().map(function(g){return-g}).concat([0]).concat(m)},String);function d(m,g,x,A){var b=x("bgcolor");A.bgColor=o.combine(b,A.paper_bgcolor);var S=t(A.fullData,u.name,A.id),w=A.layoutOut,T;function _(Z,te){return x(T+"."+Z,te)}for(var v=0;v<s.length;v++){T=s[v],l.isPlainObject(m[T])||(m[T]={});var P=m[T],M=c.newContainer(g,T);M._id=M._name=T,M._attr=A.id+"."+T,M._traceIndices=S.map(function(Z){return Z._expandedIndex});var E=_("visible");if(M.type="linear",r(M,w),n(P,M,_,M.type),E){var D=T==="realaxis";if(D&&_("side"),D)_("tickvals");else{var N=h(g.realaxis.tickvals||f.realaxis.tickvals.dflt);_("tickvals",N)}var O,I,F,V,U=A.font||{};E&&(O=_("color"),I=O===P.color?O:U.color,F=U.size,V=U.family),a(P,M,_,M.type,{noAng:!D,noExp:!0,font:{color:I,size:F,family:V}}),l.coerce2(m,g,f,T+".ticklen"),l.coerce2(m,g,f,T+".tickwidth"),l.coerce2(m,g,f,T+".tickcolor",g.color);var j=_("ticks");j||(delete g[T].ticklen,delete g[T].tickwidth,delete g[T].tickcolor),i(P,M,_,{dfltColor:O,bgColor:A.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:f[T]}),_("layer")}_("hoverformat"),delete M.type,M._input=P}}k.exports=function(g,x,A){p(g,x,A,{noUirevision:!0,type:u.name,attributes:f,handleDefaults:d,font:x.font,paper_bgcolor:x.paper_bgcolor,fullData:A,layoutOut:x})};function y(m,g){var x={};return function(A){var b=g?g(A):A;if(b in x)return x[b];var S=m(A);return x[b]=S,S}}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/set_convert":576,"../cartesian/tick_label_defaults":578,"../get_data":593,"../subplot_defaults":632,"./constants":627,"./layout_attributes":630}],632:[function(e,k,z){var l=e("../lib"),o=e("../plot_api/plot_template"),c=e("./domain").defaults;k.exports=function(t,n,a,i){var r=i.type,f=i.attributes,u=i.handleDefaults,s=i.partition||"x",h=n._subplots[r],d=h.length,y=d&&h[0].replace(/\d+$/,""),m,g;function x(w,T){return l.coerce(m,g,f,w,T)}for(var A=0;A<d;A++){var b=h[A];t[b]?m=t[b]:m=t[b]={},g=o.newContainer(n,b,y),i.noUirevision||x("uirevision",n.uirevision);var S={};S[s]=[A/d,(A+1)/d],c(g,n,x,S),i.id=b,u(m,g,x,i)}}},{"../lib":503,"../plot_api/plot_template":543,"./domain":584}],633:[function(e,k,z){var l=e("../constants/docs");l.FORMAT_LINK,l.DATE_FORMAT_LINK;function o(c){var p=c.description?" "+c.description:"",t=c.keys||[];if(t.length>0){for(var n=[],a=0;a<t.length;a++)n[a]="`"+t[a]+"`";p=p+"Finally, the template string has access to ",t.length===1?p="variable "+n[0]:p="variables "+n.slice(0,-1).join(", ")+" and "+n.slice(-1)+"."}return p}z.hovertemplateAttrs=function(c,p){c=c||{},p=p||{},o(p);var t={valType:"string",dflt:"",editType:c.editType||"none"};return c.arrayOk!==!1&&(t.arrayOk=!0),t},z.texttemplateAttrs=function(c,p){c=c||{},p=p||{},o(p);var t={valType:"string",dflt:"",editType:c.editType||"calc"};return c.arrayOk!==!1&&(t.arrayOk=!0),t}},{"../constants/docs":474}],634:[function(e,k,z){var l=e("./ternary"),o=e("../../plots/get_data").getSubplotCalcData,c=e("../../lib").counterRegex,p="ternary";z.name=p;var t=z.attr="subplot";z.idRoot=p,z.idRegex=z.attrRegex=c(p);var n=z.attributes={};n[t]={valType:"subplotid",dflt:"ternary",editType:"calc"},z.layoutAttributes=e("./layout_attributes"),z.supplyLayoutDefaults=e("./layout_defaults"),z.plot=function(i){for(var r=i._fullLayout,f=i.calcdata,u=r._subplots[p],s=0;s<u.length;s++){var h=u[s],d=o(f,p,h),y=r[h]._subplot;y||(y=new l({id:h,graphDiv:i,container:r._ternarylayer.node()},r),r[h]._subplot=y),y.plot(d,r,i._promises)}},z.clean=function(a,i,r,f){for(var u=f._subplots[p]||[],s=0;s<u.length;s++){var h=u[s],d=f[h]._subplot;!i[h]&&!!d&&(d.plotContainer.remove(),d.clipDef.remove(),d.clipDefRelative.remove(),d.layers["a-title"].remove(),d.layers["b-title"].remove(),d.layers["c-title"].remove())}}},{"../../lib":503,"../../plots/get_data":593,"./layout_attributes":635,"./layout_defaults":636,"./ternary":637}],635:[function(e,k,z){var l=e("../../components/color/attributes"),o=e("../domain").attributes,c=e("../cartesian/layout_attributes"),p=e("../../plot_api/edit_types").overrideAll,t=e("../../lib/extend").extendFlat,n={title:{text:c.title.text,font:c.title.font},color:c.color,tickmode:c.tickmode,nticks:t({},c.nticks,{dflt:6,min:1}),tick0:c.tick0,dtick:c.dtick,tickvals:c.tickvals,ticktext:c.ticktext,ticks:c.ticks,ticklen:c.ticklen,tickwidth:c.tickwidth,tickcolor:c.tickcolor,showticklabels:c.showticklabels,showtickprefix:c.showtickprefix,tickprefix:c.tickprefix,showticksuffix:c.showticksuffix,ticksuffix:c.ticksuffix,showexponent:c.showexponent,exponentformat:c.exponentformat,minexponent:c.minexponent,separatethousands:c.separatethousands,tickfont:c.tickfont,tickangle:c.tickangle,tickformat:c.tickformat,tickformatstops:c.tickformatstops,hoverformat:c.hoverformat,showline:t({},c.showline,{dflt:!0}),linecolor:c.linecolor,linewidth:c.linewidth,showgrid:t({},c.showgrid,{dflt:!0}),gridcolor:c.gridcolor,gridwidth:c.gridwidth,layer:c.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:c._deprecated.title,titlefont:c._deprecated.titlefont}},a=k.exports=p({domain:o({name:"ternary"}),bgcolor:{valType:"color",dflt:l.background},sum:{valType:"number",dflt:1,min:0},aaxis:n,baxis:n,caxis:n},"plot","from-root");a.uirevision={valType:"any",editType:"none"},a.aaxis.uirevision=a.baxis.uirevision=a.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],636:[function(e,k,z){var l=e("../../components/color"),o=e("../../plot_api/plot_template"),c=e("../../lib"),p=e("../subplot_defaults"),t=e("../cartesian/tick_label_defaults"),n=e("../cartesian/prefix_suffix_defaults"),a=e("../cartesian/tick_mark_defaults"),i=e("../cartesian/tick_value_defaults"),r=e("../cartesian/line_grid_defaults"),f=e("./layout_attributes"),u=["aaxis","baxis","caxis"];k.exports=function(y,m,g){p(y,m,g,{type:"ternary",attributes:f,handleDefaults:s,font:m.font,paper_bgcolor:m.paper_bgcolor})};function s(d,y,m,g){var x=m("bgcolor"),A=m("sum");g.bgColor=l.combine(x,g.paper_bgcolor);for(var b,S,w,T=0;T<u.length;T++)b=u[T],S=d[b]||{},w=o.newContainer(y,b),w._name=b,h(S,w,g,y);var _=y.aaxis,v=y.baxis,P=y.caxis;_.min+v.min+P.min>=A&&(_.min=0,v.min=0,P.min=0,d.aaxis&&delete d.aaxis.min,d.baxis&&delete d.baxis.min,d.caxis&&delete d.caxis.min)}function h(d,y,m,g){var x=f[y._name];function A(M,E){return c.coerce(d,y,x,M,E)}A("uirevision",g.uirevision),y.type="linear";var b=A("color"),S=b!==x.color.dflt?b:m.font.color,w=y._name,T=w.charAt(0).toUpperCase(),_="Component "+T,v=A("title.text",_);y._hovertitle=v===_?v:T,c.coerceFont(A,"title.font",{family:m.font.family,size:c.bigFont(m.font.size),color:S}),A("min"),i(d,y,A,"linear"),n(d,y,A,"linear"),t(d,y,A,"linear"),a(d,y,A,{outerTicks:!0});var P=A("showticklabels");P&&(c.coerceFont(A,"tickfont",{family:m.font.family,size:m.font.size,color:S}),A("tickangle"),A("tickformat")),r(d,y,A,{dfltColor:b,bgColor:m.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:x}),A("hoverformat"),A("layer")}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../subplot_defaults":632,"./layout_attributes":635}],637:[function(e,k,z){var l=e("@plotly/d3"),o=e("tinycolor2"),c=e("../../registry"),p=e("../../lib"),t=p.strTranslate,n=p._,a=e("../../components/color"),i=e("../../components/drawing"),r=e("../cartesian/set_convert"),f=e("../../lib/extend").extendFlat,u=e("../plots"),s=e("../cartesian/axes"),h=e("../../components/dragelement"),d=e("../../components/fx"),y=e("../../components/dragelement/helpers"),m=y.freeMode,g=y.rectMode,x=e("../../components/titles"),A=e("../cartesian/select").prepSelect,b=e("../cartesian/select").selectOnClick,S=e("../cartesian/select").clearSelect,w=e("../cartesian/select").clearSelectionsCache,T=e("../cartesian/constants");function _(U,j){this.id=U.id,this.graphDiv=U.graphDiv,this.init(j),this.makeFramework(j),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}k.exports=_;var v=_.prototype;v.init=function(U){this.container=U._ternarylayer,this.defs=U._defs,this.layoutId=U._uid,this.traceHash={},this.layers={}},v.plot=function(U,j){var Z=this,te=j[Z.id],re=j._size;Z._hasClipOnAxisFalse=!1;for(var W=0;W<U.length;W++){var J=U[W][0].trace;if(J.cliponaxis===!1){Z._hasClipOnAxisFalse=!0;break}}Z.updateLayers(te),Z.adjustLayout(te,re),u.generalUpdatePerTraceModule(Z.graphDiv,Z,U,te),Z.layers.plotbg.select("path").call(a.fill,te.bgcolor)},v.makeFramework=function(U){var j=this,Z=j.graphDiv,te=U[j.id],re=j.clipId="clip"+j.layoutId+j.id,W=j.clipIdRelative="clip-relative"+j.layoutId+j.id;j.clipDef=p.ensureSingleById(U._clips,"clipPath",re,function(J){J.append("path").attr("d","M0,0Z")}),j.clipDefRelative=p.ensureSingleById(U._clips,"clipPath",W,function(J){J.append("path").attr("d","M0,0Z")}),j.plotContainer=p.ensureSingle(j.container,"g",j.id),j.updateLayers(te),i.setClipUrl(j.layers.backplot,re,Z),i.setClipUrl(j.layers.grids,re,Z)},v.updateLayers=function(U){var j=this,Z=j.layers,te=["draglayer","plotbg","backplot","grids"];U.aaxis.layer==="below traces"&&te.push("aaxis","aline"),U.baxis.layer==="below traces"&&te.push("baxis","bline"),U.caxis.layer==="below traces"&&te.push("caxis","cline"),te.push("frontplot"),U.aaxis.layer==="above traces"&&te.push("aaxis","aline"),U.baxis.layer==="above traces"&&te.push("baxis","bline"),U.caxis.layer==="above traces"&&te.push("caxis","cline");var re=j.plotContainer.selectAll("g.toplevel").data(te,String),W=["agrid","bgrid","cgrid"];re.enter().append("g").attr("class",function(J){return"toplevel "+J}).each(function(J){var le=l.select(this);Z[J]=le,J==="frontplot"?le.append("g").classed("scatterlayer",!0):J==="backplot"?le.append("g").classed("maplayer",!0):J==="plotbg"?le.append("path").attr("d","M0,0Z"):J==="aline"||J==="bline"||J==="cline"?le.append("path"):J==="grids"&&W.forEach(function(ue){Z[ue]=le.append("g").classed("grid "+ue,!0)})}),re.order()};var P=Math.sqrt(4/3);v.adjustLayout=function(U,j){var Z=this,te=U.domain,re=(te.x[0]+te.x[1])/2,W=(te.y[0]+te.y[1])/2,J=te.x[1]-te.x[0],le=te.y[1]-te.y[0],ue=J*j.w,se=le*j.h,G=U.sum,Y=U.aaxis.min,ee=U.baxis.min,$=U.caxis.min,K,Q,ae,ie,oe,fe;ue>P*se?(ie=se,ae=ie*P):(ae=ue,ie=ae/P),oe=J*ae/ue,fe=le*ie/se,K=j.l+j.w*re-ae/2,Q=j.t+j.h*(1-W)-ie/2,Z.x0=K,Z.y0=Q,Z.w=ae,Z.h=ie,Z.sum=G,Z.xaxis={type:"linear",range:[Y+2*$-G,G-Y-2*ee],domain:[re-oe/2,re+oe/2],_id:"x"},r(Z.xaxis,Z.graphDiv._fullLayout),Z.xaxis.setScale(),Z.xaxis.isPtWithinRange=function(Ie){return Ie.a>=Z.aaxis.range[0]&&Ie.a<=Z.aaxis.range[1]&&Ie.b>=Z.baxis.range[1]&&Ie.b<=Z.baxis.range[0]&&Ie.c>=Z.caxis.range[1]&&Ie.c<=Z.caxis.range[0]},Z.yaxis={type:"linear",range:[Y,G-ee-$],domain:[W-fe/2,W+fe/2],_id:"y"},r(Z.yaxis,Z.graphDiv._fullLayout),Z.yaxis.setScale(),Z.yaxis.isPtWithinRange=function(){return!0};var ye=Z.yaxis.domain[0],ce=Z.aaxis=f({},U.aaxis,{range:[Y,G-ee-$],side:"left",tickangle:(+U.aaxis.tickangle||0)-30,domain:[ye,ye+fe*P],anchor:"free",position:0,_id:"y",_length:ae});r(ce,Z.graphDiv._fullLayout),ce.setScale();var me=Z.baxis=f({},U.baxis,{range:[G-Y-$,ee],side:"bottom",domain:Z.xaxis.domain,anchor:"free",position:0,_id:"x",_length:ae});r(me,Z.graphDiv._fullLayout),me.setScale();var xe=Z.caxis=f({},U.caxis,{range:[G-Y-ee,$],side:"right",tickangle:(+U.caxis.tickangle||0)+30,domain:[ye,ye+fe*P],anchor:"free",position:0,_id:"y",_length:ae});r(xe,Z.graphDiv._fullLayout),xe.setScale();var ke="M"+K+","+(Q+ie)+"h"+ae+"l-"+ae/2+",-"+ie+"Z";Z.clipDef.select("path").attr("d",ke),Z.layers.plotbg.select("path").attr("d",ke);var Ae="M0,"+ie+"h"+ae+"l-"+ae/2+",-"+ie+"Z";Z.clipDefRelative.select("path").attr("d",Ae);var Oe=t(K,Q);Z.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Oe),Z.clipDefRelative.select("path").attr("transform",null);var He=t(K-me._offset,Q+ie);Z.layers.baxis.attr("transform",He),Z.layers.bgrid.attr("transform",He);var Ge=t(K+ae/2,Q)+"rotate(30)"+t(0,-ce._offset);Z.layers.aaxis.attr("transform",Ge),Z.layers.agrid.attr("transform",Ge);var _e=t(K+ae/2,Q)+"rotate(-30)"+t(0,-xe._offset);Z.layers.caxis.attr("transform",_e),Z.layers.cgrid.attr("transform",_e),Z.drawAxes(!0),Z.layers.aline.select("path").attr("d",ce.showline?"M"+K+","+(Q+ie)+"l"+ae/2+",-"+ie:"M0,0").call(a.stroke,ce.linecolor||"#000").style("stroke-width",(ce.linewidth||0)+"px"),Z.layers.bline.select("path").attr("d",me.showline?"M"+K+","+(Q+ie)+"h"+ae:"M0,0").call(a.stroke,me.linecolor||"#000").style("stroke-width",(me.linewidth||0)+"px"),Z.layers.cline.select("path").attr("d",xe.showline?"M"+(K+ae/2)+","+Q+"l"+ae/2+","+ie:"M0,0").call(a.stroke,xe.linecolor||"#000").style("stroke-width",(xe.linewidth||0)+"px"),Z.graphDiv._context.staticPlot||Z.initInteractions(),i.setClipUrl(Z.layers.frontplot,Z._hasClipOnAxisFalse?null:Z.clipId,Z.graphDiv)},v.drawAxes=function(U){var j=this,Z=j.graphDiv,te=j.id.substr(7)+"title",re=j.layers,W=j.aaxis,J=j.baxis,le=j.caxis;if(j.drawAx(W),j.drawAx(J),j.drawAx(le),U){var ue=Math.max(W.showticklabels?W.tickfont.size/2:0,(le.showticklabels?le.tickfont.size*.75:0)+(le.ticks==="outside"?le.ticklen*.87:0)),se=(J.showticklabels?J.tickfont.size:0)+(J.ticks==="outside"?J.ticklen:0)+3;re["a-title"]=x.draw(Z,"a"+te,{propContainer:W,propName:j.id+".aaxis.title",placeholder:n(Z,"Click to enter Component A title"),attributes:{x:j.x0+j.w/2,y:j.y0-W.title.font.size/3-ue,"text-anchor":"middle"}}),re["b-title"]=x.draw(Z,"b"+te,{propContainer:J,propName:j.id+".baxis.title",placeholder:n(Z,"Click to enter Component B title"),attributes:{x:j.x0-se,y:j.y0+j.h+J.title.font.size*.83+se,"text-anchor":"middle"}}),re["c-title"]=x.draw(Z,"c"+te,{propContainer:le,propName:j.id+".caxis.title",placeholder:n(Z,"Click to enter Component C title"),attributes:{x:j.x0+j.w+se,y:j.y0+j.h+le.title.font.size*.83+se,"text-anchor":"middle"}})}},v.drawAx=function(U){var j=this,Z=j.graphDiv,te=U._name,re=te.charAt(0),W=U._id,J=j.layers[te],le=30,ue=re+"tickLayout",se=M(U);j[ue]!==se&&(J.selectAll("."+W+"tick").remove(),j[ue]=se),U.setScale();var G=s.calcTicks(U),Y=s.clipEnds(U,G),ee=s.makeTransTickFn(U),$=s.getTickSigns(U)[2],K=p.deg2rad(le),Q=$*(U.linewidth||1)/2,ae=$*U.ticklen,ie=j.w,oe=j.h,fe=re==="b"?"M0,"+Q+"l"+Math.sin(K)*ae+","+Math.cos(K)*ae:"M"+Q+",0l"+Math.cos(K)*ae+","+-Math.sin(K)*ae,ye={a:"M0,0l"+oe+",-"+ie/2,b:"M0,0l-"+ie/2+",-"+oe,c:"M0,0l-"+oe+","+ie/2}[re];s.drawTicks(Z,U,{vals:U.ticks==="inside"?Y:G,layer:J,path:fe,transFn:ee,crisp:!1}),s.drawGrid(Z,U,{vals:Y,layer:j.layers[re+"grid"],path:ye,transFn:ee,crisp:!1}),s.drawLabels(Z,U,{vals:G,layer:J,transFn:ee,labelFns:s.makeLabelFns(U,0,le)})};function M(U){return U.ticks+String(U.ticklen)+String(U.showticklabels)}var E=T.MINZOOM/2+.87,D="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(E*.87+4.5)+"l2.6,1.5l-"+E/2+","+E*.87+"Z",N="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(E*.87+4.5)+"l-2.6,1.5l"+E/2+","+E*.87+"Z",O="m0,1l"+E/2+","+E*.87+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(E*.87+4.5)+"l-"+(E/2+2.6)+","+(E*.87+4.5)+"l2.6,1.5l"+E/2+",-"+E*.87+"Z",I="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",F=!0;v.clearSelect=function(){w(this.dragOptions),S(this.dragOptions.gd)},v.initInteractions=function(){var U=this,j=U.layers.plotbg.select("path").node(),Z=U.graphDiv,te=Z._fullLayout._zoomlayer,re,W;this.dragOptions={element:j,gd:Z,plotinfo:{id:U.id,domain:Z._fullLayout[U.id].domain,xaxis:U.xaxis,yaxis:U.yaxis},subplot:U.id,prepFn:function(He,Ge,_e){U.dragOptions.xaxes=[U.xaxis],U.dragOptions.yaxes=[U.yaxis],re=Z._fullLayout._invScaleX,W=Z._fullLayout._invScaleY;var Ie=U.dragOptions.dragmode=Z._fullLayout.dragmode;m(Ie)?U.dragOptions.minDrag=1:U.dragOptions.minDrag=void 0,Ie==="zoom"?(U.dragOptions.moveFn=me,U.dragOptions.clickFn=ie,U.dragOptions.doneFn=xe,oe(He,Ge,_e)):Ie==="pan"?(U.dragOptions.moveFn=Ae,U.dragOptions.clickFn=ie,U.dragOptions.doneFn=Oe,ke(),U.clearSelect(Z)):(g(Ie)||m(Ie))&&A(He,Ge,_e,U.dragOptions,Ie)}};var J,le,ue,se,G,Y,ee,$,K,Q;function ae(He){var Ge={};return Ge[U.id+".aaxis.min"]=He.a,Ge[U.id+".baxis.min"]=He.b,Ge[U.id+".caxis.min"]=He.c,Ge}function ie(He,Ge){var _e=Z._fullLayout.clickmode;V(Z),He===2&&(Z.emit("plotly_doubleclick",null),c.call("_guiRelayout",Z,ae({a:0,b:0,c:0}))),_e.indexOf("select")>-1&&He===1&&b(Ge,Z,[U.xaxis],[U.yaxis],U.id,U.dragOptions),_e.indexOf("event")>-1&&d.click(Z,Ge,U.id)}function oe(He,Ge,_e){var Ie=j.getBoundingClientRect();J=Ge-Ie.left,le=_e-Ie.top,Z._fullLayout._calcInverseTransform(Z);var We=Z._fullLayout._invTransform,et=p.apply3DTransform(We)(J,le);J=et[0],le=et[1],ue={a:U.aaxis.range[0],b:U.baxis.range[1],c:U.caxis.range[1]},G=ue,se=U.aaxis.range[1]-ue.a,Y=o(U.graphDiv._fullLayout[U.id].bgcolor).getLuminance(),ee="M0,"+U.h+"L"+U.w/2+", 0L"+U.w+","+U.h+"Z",$=!1,K=te.append("path").attr("class","zoombox").attr("transform",t(U.x0,U.y0)).style({fill:Y>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",ee),Q=te.append("path").attr("class","zoombox-corners").attr("transform",t(U.x0,U.y0)).style({fill:a.background,stroke:a.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),U.clearSelect(Z)}function fe(He,Ge){return 1-Ge/U.h}function ye(He,Ge){return 1-(He+(U.h-Ge)/Math.sqrt(3))/U.w}function ce(He,Ge){return(He-(U.h-Ge)/Math.sqrt(3))/U.w}function me(He,Ge){var _e=J+He*re,Ie=le+Ge*W,We=Math.max(0,Math.min(1,fe(J,le),fe(_e,Ie))),et=Math.max(0,Math.min(1,ye(J,le),ye(_e,Ie))),Ne=Math.max(0,Math.min(1,ce(J,le),ce(_e,Ie))),De=(We/2+Ne)*U.w,Ve=(1-We/2-et)*U.w,dt=(De+Ve)/2,Dt=Ve-De,Gt=(1-We)*U.h,Mt=Gt-Dt/P;Dt<T.MINZOOM?(G=ue,K.attr("d",ee),Q.attr("d","M0,0Z")):(G={a:ue.a+We*se,b:ue.b+et*se,c:ue.c+Ne*se},K.attr("d",ee+"M"+De+","+Gt+"H"+Ve+"L"+dt+","+Mt+"L"+De+","+Gt+"Z"),Q.attr("d","M"+J+","+le+I+"M"+De+","+Gt+D+"M"+Ve+","+Gt+N+"M"+dt+","+Mt+O)),$||(K.transition().style("fill",Y>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),Q.transition().style("opacity",1).duration(200),$=!0),Z.emit("plotly_relayouting",ae(G))}function xe(){V(Z),G!==ue&&(c.call("_guiRelayout",Z,ae(G)),F&&Z.data&&Z._context.showTips&&(p.notifier(n(Z,"Double-click to zoom back out"),"long"),F=!1))}function ke(){ue={a:U.aaxis.range[0],b:U.baxis.range[1],c:U.caxis.range[1]},G=ue}function Ae(He,Ge){var _e=He/U.xaxis._m,Ie=Ge/U.yaxis._m;G={a:ue.a-Ie,b:ue.b+(_e+Ie)/2,c:ue.c-(_e-Ie)/2};var We=[G.a,G.b,G.c].sort(p.sorterAsc),et={a:We.indexOf(G.a),b:We.indexOf(G.b),c:We.indexOf(G.c)};We[0]<0&&(We[1]+We[0]/2<0?(We[2]+=We[0]+We[1],We[0]=We[1]=0):(We[2]+=We[0]/2,We[1]+=We[0]/2,We[0]=0),G={a:We[et.a],b:We[et.b],c:We[et.c]},Ge=(ue.a-G.a)*U.yaxis._m,He=(ue.c-G.c-ue.b+G.b)*U.xaxis._m);var Ne=t(U.x0+He,U.y0+Ge);U.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Ne);var De=t(-He,-Ge);U.clipDefRelative.select("path").attr("transform",De),U.aaxis.range=[G.a,U.sum-G.b-G.c],U.baxis.range=[U.sum-G.a-G.c,G.b],U.caxis.range=[U.sum-G.a-G.b,G.c],U.drawAxes(!1),U._hasClipOnAxisFalse&&U.plotContainer.select(".scatterlayer").selectAll(".trace").call(i.hideOutsideRangePoints,U),Z.emit("plotly_relayouting",ae(G))}function Oe(){c.call("_guiRelayout",Z,ae(G))}j.onmousemove=function(He){d.hover(Z,He,U.id),Z._fullLayout._lasthover=j,Z._fullLayout._hoversubplot=U.id},j.onmouseout=function(He){Z._dragging||h.unhover(Z,He)},h.init(this.dragOptions)};function V(U){l.select(U).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../lib":503,"../../lib/extend":493,"../../registry":638,"../cartesian/axes":554,"../cartesian/constants":561,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"@plotly/d3":58,tinycolor2:312}],638:[function(e,k,z){var l=e("./lib/loggers"),o=e("./lib/noop"),c=e("./lib/push_unique"),p=e("./lib/is_plain_object"),t=e("./lib/dom").addStyleRule,n=e("./lib/extend"),a=e("./plots/attributes"),i=e("./plots/layout_attributes"),r=n.extendFlat,f=n.extendDeepAll;z.modules={},z.allCategories={},z.allTypes=[],z.subplotsRegistry={},z.transformsRegistry={},z.componentsRegistry={},z.layoutArrayContainers=[],z.layoutArrayRegexes=[],z.traceLayoutAttributes={},z.localeRegistry={},z.apiMethodRegistry={},z.collectableSubplotTypes=null,z.register=function(w){if(z.collectableSubplotTypes=null,w)w&&!Array.isArray(w)&&(w=[w]);else throw new Error("No argument passed to Plotly.register.");for(var T=0;T<w.length;T++){var _=w[T];if(!_)throw new Error("Invalid module was attempted to be registered!");switch(_.moduleType){case"trace":u(_);break;case"transform":d(_);break;case"component":h(_);break;case"locale":y(_);break;case"apiMethod":var v=_.name;z.apiMethodRegistry[v]=_.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},z.getModule=function(S){var w=z.modules[b(S)];return w?w._module:!1},z.traceIs=function(S,w){if(S=b(S),S==="various")return!1;var T=z.modules[S];return T||(S&&l.log("Unrecognized trace type "+S+"."),T=z.modules[a.type.dflt]),!!T.categories[w]},z.getTransformIndices=function(S,w){for(var T=[],_=S.transforms||[],v=0;v<_.length;v++)_[v].type===w&&T.push(v);return T},z.hasTransform=function(S,w){for(var T=S.transforms||[],_=0;_<T.length;_++)if(T[_].type===w)return!0;return!1},z.getComponentMethod=function(S,w){var T=z.componentsRegistry[S];return T&&T[w]||o},z.call=function(){var S=arguments[0],w=[].slice.call(arguments,1);return z.apiMethodRegistry[S].apply(null,w)};function u(S){var w=S.name,T=S.categories,_=S.meta;if(z.modules[w]){l.log("Type "+w+" already registered");return}z.subplotsRegistry[S.basePlotModule.name]||s(S.basePlotModule);for(var v={},P=0;P<T.length;P++)v[T[P]]=!0,z.allCategories[T[P]]=!0;z.modules[w]={_module:S,categories:v},_&&Object.keys(_).length&&(z.modules[w].meta=_),z.allTypes.push(w);for(var M in z.componentsRegistry)g(M,w);S.layoutAttributes&&r(z.traceLayoutAttributes,S.layoutAttributes);var E=S.basePlotModule,D=E.name;if(D==="mapbox"){var N=E.constants.styleRules;for(var O in N)t(".js-plotly-plot .plotly .mapboxgl-"+O,N[O])}(D==="geo"||D==="mapbox")&&typeof window!==void 0&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function s(S){var w=S.name;if(z.subplotsRegistry[w]){l.log("Plot type "+w+" already registered.");return}m(S),z.subplotsRegistry[w]=S;for(var T in z.componentsRegistry)A(T,S.name)}function h(S){if(typeof S.name!="string")throw new Error("Component module *name* must be a string.");var w=S.name;z.componentsRegistry[w]=S,S.layoutAttributes&&(S.layoutAttributes._isLinkedToArray&&c(z.layoutArrayContainers,w),m(S));for(var T in z.modules)g(w,T);for(var _ in z.subplotsRegistry)A(w,_);for(var v in z.transformsRegistry)x(w,v);S.schema&&S.schema.layout&&f(i,S.schema.layout)}function d(S){if(typeof S.name!="string")throw new Error("Transform module *name* must be a string.");var w="Transform module "+S.name,T=typeof S.transform=="function",_=typeof S.calcTransform=="function";if(!T&&!_)throw new Error(w+" is missing a *transform* or *calcTransform* method.");T&&_&&l.log([w+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),p(S.attributes)||l.log(w+" registered without an *attributes* object."),typeof S.supplyDefaults!="function"&&l.log(w+" registered without a *supplyDefaults* method."),z.transformsRegistry[S.name]=S;for(var v in z.componentsRegistry)x(v,S.name)}function y(S){var w=S.name,T=w.split("-")[0],_=S.dictionary,v=S.format,P=_&&Object.keys(_).length,M=v&&Object.keys(v).length,E=z.localeRegistry,D=E[w];if(D||(E[w]=D={}),T!==w){var N=E[T];N||(E[T]=N={}),P&&N.dictionary===D.dictionary&&(N.dictionary=_),M&&N.format===D.format&&(N.format=v)}P&&(D.dictionary=_),M&&(D.format=v)}function m(S){if(S.layoutAttributes){var w=S.layoutAttributes._arrayAttrRegexps;if(w)for(var T=0;T<w.length;T++)c(z.layoutArrayRegexes,w[T])}}function g(S,w){var T=z.componentsRegistry[S].schema;if(!(!T||!T.traces)){var _=T.traces[w];_&&f(z.modules[w]._module.attributes,_)}}function x(S,w){var T=z.componentsRegistry[S].schema;if(!(!T||!T.transforms)){var _=T.transforms[w];_&&f(z.transformsRegistry[w].attributes,_)}}function A(S,w){var T=z.componentsRegistry[S].schema;if(!(!T||!T.subplots)){var _=z.subplotsRegistry[w],v=_.layoutAttributes,P=_.attr==="subplot"?_.name:_.attr;Array.isArray(P)&&(P=P[0]);var M=T.subplots[P];v&&M&&f(v,M)}}function b(S){return typeof S=="object"&&(S=S.type),S}},{"./lib/dom":491,"./lib/extend":493,"./lib/is_plain_object":504,"./lib/loggers":507,"./lib/noop":512,"./lib/push_unique":518,"./plots/attributes":550,"./plots/layout_attributes":610}],639:[function(e,k,z){var l=e("../registry"),o=e("../lib"),c=o.extendFlat,p=o.extendDeep;function t(a){var i;switch(a){case"themes__thumb":i={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":i={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:i={}}return i}function n(a){var i=["xaxis","yaxis","zaxis"];return i.indexOf(a.slice(0,5))>-1}k.exports=function(i,r){var f,u=i.data,s=i.layout,h=p([],u),d=p({},s,t(r.tileClass)),y=i._context||{};if(r.width&&(d.width=r.width),r.height&&(d.height=r.height),r.tileClass==="thumbnail"||r.tileClass==="themes__thumb"){d.annotations=[];var m=Object.keys(d);for(f=0;f<m.length;f++)n(m[f])&&(d[m[f]].title={text:""});for(f=0;f<h.length;f++){var g=h[f];g.showscale=!1,g.marker&&(g.marker.showscale=!1),l.traceIs(g,"pie-like")&&(g.textposition="none")}}if(Array.isArray(r.annotations))for(f=0;f<r.annotations.length;f++)d.annotations.push(r.annotations[f]);var x=Object.keys(d).filter(function(T){return T.match(/^scene\d*$/)});if(x.length){var A={};for(r.tileClass==="thumbnail"&&(A={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),f=0;f<x.length;f++){var b=d[x[f]];b.xaxis||(b.xaxis={}),b.yaxis||(b.yaxis={}),b.zaxis||(b.zaxis={}),c(b.xaxis,A),c(b.yaxis,A),c(b.zaxis,A),b._scene=null}}var S=document.createElement("div");r.tileClass&&(S.className=r.tileClass);var w={gd:S,td:S,layout:d,data:h,config:{staticPlot:r.staticPlot===void 0?!0:r.staticPlot,plotGlPixelRatio:r.plotGlPixelRatio===void 0?2:r.plotGlPixelRatio,displaylogo:r.displaylogo||!1,showLink:r.showLink||!1,showTips:r.showTips||!1,mapboxAccessToken:y.mapboxAccessToken}};return r.setBackground!=="transparent"&&(w.config.setBackground=r.setBackground||"opaque"),w.gd.defaultLayout=t(r.tileClass),w}},{"../lib":503,"../registry":638}],640:[function(e,k,z){var l=e("../lib"),o=e("../plot_api/to_image"),c=e("./filesaver"),p=e("./helpers");function t(n,a){var i;return l.isPlainObject(n)||(i=l.getGraphDiv(n)),a=a||{},a.format=a.format||"png",a.width=a.width||null,a.height=a.height||null,a.imageDataOnly=!0,new Promise(function(r,f){i&&i._snapshotInProgress&&f(new Error("Snapshotting already in progress.")),l.isIE()&&a.format!=="svg"&&f(new Error(p.MSG_IE_BAD_FORMAT)),i&&(i._snapshotInProgress=!0);var u=o(n,a),s=a.filename||n.fn||"newplot";s+="."+a.format.replace("-","."),u.then(function(h){return i&&(i._snapshotInProgress=!1),c(h,s,a.format)}).then(function(h){r(h)}).catch(function(h){i&&(i._snapshotInProgress=!1),f(h)})})}k.exports=t},{"../lib":503,"../plot_api/to_image":546,"./filesaver":641,"./helpers":642}],641:[function(e,k,z){var l=e("../lib"),o=e("./helpers");function c(p,t,n){var a=document.createElement("a"),i="download"in a,r=new Promise(function(f,u){var s,h;if(l.isIE())return s=o.createBlob(p,"svg"),window.navigator.msSaveBlob(s,t),s=null,f(t);if(i)return s=o.createBlob(p,n),h=o.createObjectURL(s),a.href=h,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),o.revokeObjectURL(h),s=null,f(t);if(l.isSafari()){var d=n==="svg"?",":";base64,";return o.octetStream(d+encodeURIComponent(p)),f(t)}u(new Error("download error"))});return r}k.exports=c},{"../lib":503,"./helpers":642}],642:[function(e,k,z){var l=e("../registry");z.getDelay=function(p){return p._has&&(p._has("gl3d")||p._has("gl2d")||p._has("mapbox"))?500:0},z.getRedrawFunc=function(p){return function(){l.getComponentMethod("colorbar","draw")(p)}},z.encodeSVG=function(p){return"data:image/svg+xml,"+encodeURIComponent(p)},z.encodeJSON=function(p){return"data:application/json,"+encodeURIComponent(p)};var o=window.URL||window.webkitURL;z.createObjectURL=function(p){return o.createObjectURL(p)},z.revokeObjectURL=function(p){return o.revokeObjectURL(p)},z.createBlob=function(p,t){if(t==="svg")return new window.Blob([p],{type:"image/svg+xml;charset=utf-8"});if(t==="full-json")return new window.Blob([p],{type:"application/json;charset=utf-8"});var n=c(window.atob(p));return new window.Blob([n],{type:"image/"+t})},z.octetStream=function(p){document.location.href="data:application/octet-stream"+p};function c(p){for(var t=p.length,n=new ArrayBuffer(t),a=new Uint8Array(n),i=0;i<t;i++)a[i]=p.charCodeAt(i);return n}z.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,z.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":638}],643:[function(e,k,z){var l=e("./helpers"),o={getDelay:l.getDelay,getRedrawFunc:l.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};k.exports=o},{"./cloneplot":639,"./download":640,"./helpers":642,"./svgtoimg":644,"./toimage":645,"./tosvg":646}],644:[function(e,k,z){var l=e("../lib"),o=e("events").EventEmitter,c=e("./helpers");function p(t){var n=t.emitter||new o,a=new Promise(function(i,r){var f=window.Image,u=t.svg,s=t.format||"png";if(l.isIE()&&s!=="svg"){var h=new Error(c.MSG_IE_BAD_FORMAT);return r(h),t.promise?a:n.emit("error",h)}var d=t.canvas,y=t.scale||1,m=t.width||300,g=t.height||150,x=y*m,A=y*g,b=d.getContext("2d"),S=new f,w,T;s==="svg"||l.isSafari()?T=c.encodeSVG(u):(w=c.createBlob(u,"svg"),T=c.createObjectURL(w)),d.width=x,d.height=A,S.onload=function(){var _;switch(w=null,c.revokeObjectURL(T),s!=="svg"&&b.drawImage(S,0,0,x,A),s){case"jpeg":_=d.toDataURL("image/jpeg");break;case"png":_=d.toDataURL("image/png");break;case"webp":_=d.toDataURL("image/webp");break;case"svg":_=T;break;default:var v="Image format is not jpeg, png, svg or webp.";if(r(new Error(v)),!t.promise)return n.emit("error",v)}i(_),t.promise||n.emit("success",_)},S.onerror=function(_){if(w=null,c.revokeObjectURL(T),r(_),!t.promise)return n.emit("error",_)},S.src=T});return t.promise?a:n}k.exports=p},{"../lib":503,"./helpers":642,events:84}],645:[function(e,k,z){var l=e("events").EventEmitter,o=e("../registry"),c=e("../lib"),p=e("./helpers"),t=e("./cloneplot"),n=e("./tosvg"),a=e("./svgtoimg");function i(r,f){var u=new l,s=t(r,{format:"png"}),h=s.gd;h.style.position="absolute",h.style.left="-5000px",document.body.appendChild(h);function d(){var m=p.getDelay(h._fullLayout);setTimeout(function(){var g=n(h),x=document.createElement("canvas");x.id=c.randstr(),u=a({format:f.format,width:h._fullLayout.width,height:h._fullLayout.height,canvas:x,emitter:u,svg:g}),u.clean=function(){h&&document.body.removeChild(h)}},m)}var y=p.getRedrawFunc(h);return o.call("_doPlot",h,s.data,s.layout,s.config).then(y).then(d).catch(function(m){u.emit("error",m)}),u}k.exports=i},{"../lib":503,"../registry":638,"./cloneplot":639,"./helpers":642,"./svgtoimg":644,"./tosvg":646,events:84}],646:[function(e,k,z){var l=e("@plotly/d3"),o=e("../lib"),c=e("../components/drawing"),p=e("../components/color"),t=e("../constants/xmlns_namespaces"),n=/"/g,a="TOBESTRIPPED",i=new RegExp('("'+a+")|("+a+'")',"g");function r(u){var s=l.select("body").append("div").style({display:"none"}).html(""),h=u.replace(/(&[^;]*;)/gi,function(d){return d==="&lt;"?"&#60;":d==="&rt;"?"&#62;":d.indexOf("<")!==-1||d.indexOf(">")!==-1?"":s.html(d).text()});return s.remove(),h}function f(u){return u.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}k.exports=function(s,h,d){var y=s._fullLayout,m=y._paper,g=y._toppaper,x=y.width,A=y.height,b,S;m.insert("rect",":first-child").call(c.setRect,0,0,x,A).call(p.fill,y.paper_bgcolor);var w=y._basePlotModules||[];for(b=0;b<w.length;b++){var T=w[b];T.toSVG&&T.toSVG(s)}if(g){var _=g.node().childNodes,v=Array.prototype.slice.call(_);for(b=0;b<v.length;b++){var P=v[b];P.childNodes.length&&m.node().appendChild(P)}}y._draggers&&y._draggers.remove(),m.node().style.background="",m.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var D=l.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){D.remove();return}else D.style({visibility:null,display:null});var N=this.style.fontFamily;N&&N.indexOf('"')!==-1&&D.style("font-family",N.replace(n,a))});var M=[];if(y._gradientUrlQueryParts)for(S in y._gradientUrlQueryParts)M.push(S);if(y._patternUrlQueryParts)for(S in y._patternUrlQueryParts)M.push(S);M.length&&m.selectAll(M.join(",")).each(function(){var D=l.select(this),N=this.style.fill;N&&N.indexOf("url(")!==-1&&D.style("fill",N.replace(n,a));var O=this.style.stroke;O&&O.indexOf("url(")!==-1&&D.style("stroke",O.replace(n,a))}),(h==="pdf"||h==="eps")&&m.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),m.node().setAttributeNS(t.xmlns,"xmlns",t.svg),m.node().setAttributeNS(t.xmlns,"xmlns:xlink",t.xlink),h==="svg"&&d&&(m.attr("width",d*x),m.attr("height",d*A),m.attr("viewBox","0 0 "+x+" "+A));var E=new window.XMLSerializer().serializeToString(m.node());return E=r(E),E=f(E),E=E.replace(i,"'"),o.isIE()&&(E=E.replace(/"/gi,"'"),E=E.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),E=E.replace(/(\\')/gi,'"')),E}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],647:[function(e,k,z){var l=e("../../lib");k.exports=function(c,p){for(var t=0;t<c.length;t++)c[t].i=t;l.mergeArray(p.text,c,"tx"),l.mergeArray(p.hovertext,c,"htx");var n=p.marker;if(n){l.mergeArray(n.opacity,c,"mo",!0),l.mergeArray(n.color,c,"mc");var a=n.line;a&&(l.mergeArray(a.color,c,"mlc"),l.mergeArrayCastPositive(a.width,c,"mlw"))}}},{"../../lib":503}],648:[function(e,k,z){var l=e("../scatter/attributes"),o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,c=e("../../plots/template_attributes").hovertemplateAttrs,p=e("../../plots/template_attributes").texttemplateAttrs,t=e("../../components/colorscale/attributes"),n=e("../../plots/font_attributes"),a=e("./constants"),i=e("../../components/drawing/attributes").pattern,r=e("../../lib/extend").extendFlat,f=n({editType:"calc",arrayOk:!0,colorEditType:"style"}),u=l.marker,s=u.line,h=r({},s.width,{dflt:0}),d=r({width:h,editType:"calc"},t("marker.line")),y=r({line:d,editType:"calc"},t("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:i});k.exports={x:l.x,x0:l.x0,dx:l.dx,y:l.y,y0:l.y0,dy:l.dy,xperiod:l.xperiod,yperiod:l.yperiod,xperiod0:l.xperiod0,yperiod0:l.yperiod0,xperiodalignment:l.xperiodalignment,yperiodalignment:l.yperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),text:l.text,texttemplate:p({editType:"plot"},{keys:a.eventDataKeys}),hovertext:l.hovertext,hovertemplate:c({},{keys:a.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:r({},f,{}),insidetextfont:r({},f,{}),outsidetextfont:r({},f,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:r({},l.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:y,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:l.selected.marker.opacity,color:l.selected.marker.color,editType:"style"},textfont:l.selected.textfont,editType:"style"},unselected:{marker:{opacity:l.unselected.marker.opacity,color:l.unselected.marker.color,editType:"style"},textfont:l.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":926,"./constants":650}],649:[function(e,k,z){var l=e("../../plots/cartesian/axes"),o=e("../../plots/cartesian/align_period"),c=e("../../components/colorscale/helpers").hasColorscale,p=e("../../components/colorscale/calc"),t=e("./arrays_to_calcdata"),n=e("../scatter/calc_selection");k.exports=function(i,r){var f=l.getFromId(i,r.xaxis||"x"),u=l.getFromId(i,r.yaxis||"y"),s,h,d,y,m,g,x={msUTC:!!(r.base||r.base===0)};r.orientation==="h"?(s=f.makeCalcdata(r,"x",x),d=u.makeCalcdata(r,"y"),y=o(r,u,"y",d),m=!!r.yperiodalignment,g="y"):(s=u.makeCalcdata(r,"y",x),d=f.makeCalcdata(r,"x"),y=o(r,f,"x",d),m=!!r.xperiodalignment,g="x"),h=y.vals;for(var A=Math.min(h.length,s.length),b=new Array(A),S=0;S<A;S++)b[S]={p:h[S],s:s[S]},m&&(b[S].orig_p=d[S],b[S][g+"End"]=y.ends[S],b[S][g+"Start"]=y.starts[S]),r.ids&&(b[S].id=String(r.ids[S]));return c(r,"marker")&&p(i,r,{vals:r.marker.color,containerStr:"marker",cLetter:"c"}),c(r,"marker.line")&&p(i,r,{vals:r.marker.line.color,containerStr:"marker.line",cLetter:"c"}),t(b,r),n(b,r),b}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928,"./arrays_to_calcdata":647}],650:[function(e,k,z){k.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],651:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../lib").isArrayOrTypedArray,c=e("../../constants/numerical").BADNUM,p=e("../../registry"),t=e("../../plots/cartesian/axes"),n=e("../../plots/cartesian/constraints").getAxisGroup,a=e("./sieve.js");function i(P,M){for(var E=M.xaxis,D=M.yaxis,N=P._fullLayout,O=P._fullData,I=P.calcdata,F=[],V=[],U=0;U<O.length;U++){var j=O[U];if(j.visible===!0&&p.traceIs(j,"bar")&&j.xaxis===E._id&&j.yaxis===D._id&&(j.orientation==="h"?F.push(I[U]):V.push(I[U]),j._computePh))for(var Z=P.calcdata[U],te=0;te<Z.length;te++)typeof Z[te].ph0=="function"&&(Z[te].ph0=Z[te].ph0()),typeof Z[te].ph1=="function"&&(Z[te].ph1=Z[te].ph1())}var re={xCat:E.type==="category"||E.type==="multicategory",yCat:D.type==="category"||D.type==="multicategory",mode:N.barmode,norm:N.barnorm,gap:N.bargap,groupgap:N.bargroupgap};r(P,E,D,V,re),r(P,D,E,F,re)}function r(P,M,E,D,N){if(!!D.length){var O,I,F,V,U;switch(f(E,D),N.mode){case"overlay":u(M,E,D,N);break;case"group":for(O=[],I=[],F=0;F<D.length;F++)V=D[F],U=V[0].trace,U.offset===void 0?I.push(V):O.push(V);I.length&&s(P,M,E,I,N),O.length&&u(M,E,O,N);break;case"stack":case"relative":for(O=[],I=[],F=0;F<D.length;F++)V=D[F],U=V[0].trace,U.base===void 0?I.push(V):O.push(V);I.length&&h(P,M,E,I,N),O.length&&u(M,E,O,N);break}_(D,M)}}function f(P,M){var E,D;for(E=0;E<M.length;E++){var N=M[E],O=N[0].trace,I=O.type==="funnel"?O._base:O.base,F,V=O.orientation==="h"?O.xcalendar:O.ycalendar,U=P.type==="category"||P.type==="multicategory"?function(){return null}:P.d2c;if(o(I)){for(D=0;D<Math.min(I.length,N.length);D++)F=U(I[D],0,V),l(F)?(N[D].b=+F,N[D].hasB=1):N[D].b=0;for(;D<N.length;D++)N[D].b=0}else{F=U(I,0,V);var j=l(F);for(F=j?F:0,D=0;D<N.length;D++)N[D].b=F,j&&(N[D].hasB=1)}}}function u(P,M,E,D){for(var N=0;N<E.length;N++){var O=E[N],I=new a([O],{posAxis:P,sepNegVal:!1,overlapNoMerge:!D.norm});d(P,I,D),D.norm?(S(I),T(M,I,D)):A(M,I)}}function s(P,M,E,D,N){var O=new a(D,{posAxis:M,sepNegVal:!1,overlapNoMerge:!N.norm});y(P,M,O,N),w(O,M),N.norm?(S(O),T(E,O,N)):A(E,O)}function h(P,M,E,D,N){var O=new a(D,{posAxis:M,sepNegVal:N.mode==="relative",overlapNoMerge:!(N.norm||N.mode==="stack"||N.mode==="relative")});d(M,O,N),b(E,O,N);for(var I=0;I<D.length;I++)for(var F=D[I],V=0;V<F.length;V++){var U=F[V];if(U.s!==c){var j=U.b+U.s===O.get(U.p,U.s);j&&(U._outmost=!0)}}N.norm&&T(E,O,N)}function d(P,M,E){for(var D=M.minDiff,N=M.traces,O=D*(1-E.gap),I=O,F=I*(1-(E.groupgap||0)),V=-F/2,U=0;U<N.length;U++){var j=N[U],Z=j[0].t;Z.barwidth=F,Z.poffset=V,Z.bargroupwidth=O,Z.bardelta=D}M.binWidth=N[0][0].t.barwidth/100,m(M),g(P,M),x(P,M)}function y(P,M,E,D){for(var N=P._fullLayout,O=E.positions,I=E.distinctPositions,F=E.minDiff,V=E.traces,U=V.length,j=O.length!==I.length,Z=F*(1-D.gap),te=n(N,M._id)+V[0][0].trace.orientation,re=N._alignmentOpts[te]||{},W=0;W<U;W++){var J=V[W],le=J[0].trace,ue=re[le.alignmentgroup]||{},se=Object.keys(ue.offsetGroups||{}).length,G;se?G=Z/se:G=j?Z/U:Z;var Y=G*(1-(D.groupgap||0)),ee;se?ee=((2*le._offsetIndex+1-se)*G-Y)/2:ee=j?((2*W+1-U)*G-Y)/2:-Y/2;var $=J[0].t;$.barwidth=Y,$.poffset=ee,$.bargroupwidth=Z,$.bardelta=F}E.binWidth=V[0][0].t.barwidth/100,m(E),g(M,E),x(M,E,j)}function m(P){var M=P.traces,E,D;for(E=0;E<M.length;E++){var N=M[E],O=N[0],I=O.trace,F=O.t,V=I._offset||I.offset,U=F.poffset,j;if(o(V)){for(j=Array.prototype.slice.call(V,0,N.length),D=0;D<j.length;D++)l(j[D])||(j[D]=U);for(D=j.length;D<N.length;D++)j.push(U);F.poffset=j}else V!==void 0&&(F.poffset=V);var Z=I._width||I.width,te=F.barwidth;if(o(Z)){var re=Array.prototype.slice.call(Z,0,N.length);for(D=0;D<re.length;D++)l(re[D])||(re[D]=te);for(D=re.length;D<N.length;D++)re.push(te);if(F.barwidth=re,V===void 0){for(j=[],D=0;D<N.length;D++)j.push(U+(te-re[D])/2);F.poffset=j}}else Z!==void 0&&(F.barwidth=Z,V===void 0&&(F.poffset=U+(te-Z)/2))}}function g(P,M){for(var E=M.traces,D=v(P),N=0;N<E.length;N++)for(var O=E[N],I=O[0].t,F=I.poffset,V=Array.isArray(F),U=I.barwidth,j=Array.isArray(U),Z=0;Z<O.length;Z++){var te=O[Z],re=te.w=j?U[Z]:U;te[D]=te.p+(V?F[Z]:F)+re/2}}function x(P,M,E){var D=M.traces,N=M.minDiff,O=N/2;t.minDtick(P,M.minDiff,M.distinctPositions[0],E);for(var I=0;I<D.length;I++){var F=D[I],V=F[0],U=V.trace,j=[],Z,te,re,W;for(W=0;W<F.length;W++)Z=F[W],te=Z.p-O,re=Z.p+O,j.push(te,re);if(U.width||U.offset){var J=V.t,le=J.poffset,ue=J.barwidth,se=Array.isArray(le),G=Array.isArray(ue);for(W=0;W<F.length;W++){Z=F[W];var Y=se?le[W]:le,ee=G?ue[W]:ue;te=Z.p+Y,re=te+ee,j.push(te,re)}}U._extremes[P._id]=t.findExtremes(P,j,{padded:!1})}}function A(P,M){for(var E=M.traces,D=v(P),N=0;N<E.length;N++){for(var O=E[N],I=O[0].trace,F=[],V=!1,U=0;U<O.length;U++){var j=O[U],Z=j.b,te=Z+j.s;j[D]=te,F.push(te),j.hasB&&F.push(Z),(!j.hasB||!j.b)&&(V=!0)}I._extremes[P._id]=t.findExtremes(P,F,{tozero:V,padded:!0})}}function b(P,M,E){var D=v(P),N=M.traces,O,I,F,V,U,j;for(V=0;V<N.length;V++)if(O=N[V],I=O[0].trace,I.type==="funnel")for(U=0;U<O.length;U++)j=O[U],j.s!==c&&M.put(j.p,-.5*j.s);for(V=0;V<N.length;V++){O=N[V],I=O[0].trace,F=I.type==="funnel";var Z=[];for(U=0;U<O.length;U++)if(j=O[U],j.s!==c){var te;F?te=j.s:te=j.s+j.b;var re=M.put(j.p,te),W=re+te;j.b=re,j[D]=W,E.norm||(Z.push(W),j.hasB&&Z.push(re))}E.norm||(I._extremes[P._id]=t.findExtremes(P,Z,{tozero:!0,padded:!0}))}}function S(P){for(var M=P.traces,E=0;E<M.length;E++)for(var D=M[E],N=0;N<D.length;N++){var O=D[N];O.s!==c&&P.put(O.p,O.b+O.s)}}function w(P,M){for(var E=P.traces,D=0;D<E.length;D++){var N=E[D],O=N[0].trace;if(O.base===void 0)for(var I=new a([N],{posAxis:M,sepNegVal:!0,overlapNoMerge:!0}),F=0;F<N.length;F++){var V=N[F];if(V.p!==c){var U=I.put(V.p,V.b+V.s);U&&(V.b=U)}}}}function T(P,M,E){var D=M.traces,N=v(P),O=E.norm==="fraction"?1:100,I=O/1e9,F=P.l2c(P.c2l(0)),V=E.mode==="stack"?O:F;function U(ee){return l(P.c2l(ee))&&(ee<F-I||ee>V+I||!l(F))}for(var j=0;j<D.length;j++){for(var Z=D[j],te=Z[0].trace,re=[],W=!1,J=!1,le=0;le<Z.length;le++){var ue=Z[le];if(ue.s!==c){var se=Math.abs(O/M.get(ue.p,ue.s));ue.b*=se,ue.s*=se;var G=ue.b,Y=G+ue.s;ue[N]=Y,re.push(Y),J=J||U(Y),ue.hasB&&(re.push(G),J=J||U(G)),(!ue.hasB||!ue.b)&&(W=!0)}}te._extremes[P._id]=t.findExtremes(P,re,{tozero:W,padded:J})}}function _(P,M){var E=v(M),D={},N,O,I,F=1/0,V=-1/0;for(N=0;N<P.length;N++)for(I=P[N],O=0;O<I.length;O++){var U=I[O].p;l(U)&&(F=Math.min(F,U),V=Math.max(V,U))}var j=1e4/(V-F),Z=D.round=function(se){return String(Math.round(j*(se-F)))};for(N=0;N<P.length;N++){I=P[N],I[0].t.extents=D;var te=I[0].t.poffset,re=Array.isArray(te);for(O=0;O<I.length;O++){var W=I[O],J=W[E]-W.w/2;if(l(J)){var le=W[E]+W.w/2,ue=Z(W.p);D[ue]?D[ue]=[Math.min(J,D[ue][0]),Math.max(le,D[ue][1])]:D[ue]=[J,le]}W.p0=W.p+(re?te[O]:te),W.p1=W.p0+W.w,W.s0=W.b,W.s1=W.s0+W.s}}}function v(P){return P._id.charAt(0)}k.exports={crossTraceCalc:i,setGroupPositions:r}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562,"../../registry":638,"./sieve.js":661,"fast-isnumeric":190}],652:[function(e,k,z){var l=e("../../lib"),o=e("../../components/color"),c=e("../../registry"),p=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),n=e("./style_defaults"),a=e("../../plots/cartesian/constraints").getAxisGroup,i=e("./attributes"),r=l.coerceFont;function f(d,y,m,g){function x(T,_){return l.coerce(d,y,i,T,_)}var A=p(d,y,g,x);if(!A){y.visible=!1;return}t(d,y,g,x),x("xhoverformat"),x("yhoverformat"),x("orientation",y.x&&!y.y?"h":"v"),x("base"),x("offset"),x("width"),x("text"),x("hovertext"),x("hovertemplate");var b=x("textposition");h(d,y,g,x,b,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),n(d,y,x,m,g);var S=(y.marker.line||{}).color,w=c.getComponentMethod("errorbars","supplyDefaults");w(d,y,S||o.defaultLine,{axis:"y"}),w(d,y,S||o.defaultLine,{axis:"x",inherit:"y"}),l.coerceSelectionMarkerOpacity(y,x)}function u(d,y,m,g){var x=y.orientation,A=y[{v:"x",h:"y"}[x]+"axis"],b=a(m,A)+x,S=m._alignmentOpts||{},w=g("alignmentgroup"),T=S[b];T||(T=S[b]={});var _=T[w];_?_.traces.push(y):_=T[w]={traces:[y],alignmentIndex:Object.keys(T).length,offsetGroups:{}};var v=g("offsetgroup"),P=_.offsetGroups,M=P[v];v&&(M||(M=P[v]={offsetIndex:Object.keys(P).length}),y._offsetIndex=M.offsetIndex)}function s(d,y){var m,g;function x(b){return l.coerce(g._input,g,i,b)}if(y.barmode==="group")for(var A=0;A<d.length;A++)g=d[A],g.type==="bar"&&(m=g._input,u(m,g,y,x))}function h(d,y,m,g,x,A){A=A||{};var b=A.moduleHasSelected!==!1,S=A.moduleHasUnselected!==!1,w=A.moduleHasConstrain!==!1,T=A.moduleHasCliponaxis!==!1,_=A.moduleHasTextangle!==!1,v=A.moduleHasInsideanchor!==!1,P=!!A.hasPathbar,M=Array.isArray(x)||x==="auto",E=M||x==="inside",D=M||x==="outside";if(E||D){var N=r(g,"textfont",m.font),O=l.extendFlat({},N),I=d.textfont&&d.textfont.color,F=!I;if(F&&delete O.color,r(g,"insidetextfont",O),P){var V=l.extendFlat({},N);F&&delete V.color,r(g,"pathbar.textfont",V)}D&&r(g,"outsidetextfont",N),b&&g("selected.textfont.color"),S&&g("unselected.textfont.color"),w&&g("constraintext"),T&&g("cliponaxis"),_&&g("textangle"),g("texttemplate")}E&&v&&g("insidetextanchor")}k.exports={supplyDefaults:f,crossTraceDefaults:s,handleGroupingDefaults:u,handleText:h}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/constraints":562,"../../registry":638,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":648,"./style_defaults":663}],653:[function(e,k,z){k.exports=function(o,c,p){return o.x="xVal"in c?c.xVal:c.x,o.y="yVal"in c?c.yVal:c.y,c.xa&&(o.xaxis=c.xa),c.ya&&(o.yaxis=c.ya),p.orientation==="h"?(o.label=o.y,o.value=o.x):(o.label=o.x,o.value=o.y),o}},{}],654:[function(e,k,z){var l=e("fast-isnumeric"),o=e("tinycolor2"),c=e("../../lib").isArrayOrTypedArray;z.coerceString=function(p,t,n){if(typeof t=="string"){if(t||!p.noBlank)return t}else if((typeof t=="number"||t===!0)&&!p.strict)return String(t);return n!==void 0?n:p.dflt},z.coerceNumber=function(p,t,n){if(l(t)){t=+t;var a=p.min,i=p.max,r=a!==void 0&&t<a||i!==void 0&&t>i;if(!r)return t}return n!==void 0?n:p.dflt},z.coerceColor=function(p,t,n){return o(t).isValid()?t:n!==void 0?n:p.dflt},z.coerceEnumerated=function(p,t,n){return p.coerceNumber&&(t=+t),p.values.indexOf(t)!==-1?t:n!==void 0?n:p.dflt},z.getValue=function(p,t){var n;return Array.isArray(p)?t<p.length&&(n=p[t]):n=p,n},z.getLineWidth=function(p,t){var n=0<t.mlw?t.mlw:c(p.marker.line.width)?0:p.marker.line.width;return n}},{"../../lib":503,"fast-isnumeric":190,tinycolor2:312}],655:[function(e,k,z){var l=e("../../components/fx"),o=e("../../registry"),c=e("../../components/color"),p=e("../../lib").fillText,t=e("./helpers").getLineWidth,n=e("../../plots/cartesian/axes").hoverLabelText,a=e("../../constants/numerical").BADNUM;function i(u,s,h,d,y){var m=r(u,s,h,d,y);if(m){var g=m.cd,x=g[0].trace,A=g[m.index];return m.color=f(x,A),o.getComponentMethod("errorbars","hoverInfo")(A,x,m),[m]}}function r(u,s,h,d,y){var m=u.cd,g=m[0].trace,x=m[0].t,A=d==="closest",b=g.type==="waterfall",S=u.maxHoverDistance,w=u.maxSpikeDistance,T,_,v,P,M,E,D;g.orientation==="h"?(T=h,_=s,v="y",P="x",M=le,E=re):(T=s,_=h,v="x",P="y",E=le,M=re);var N=g[v+"period"],O=A||N;function I(oe){return V(oe,-1)}function F(oe){return V(oe,1)}function V(oe,fe){var ye=oe.w;return oe[v]+fe*ye/2}function U(oe){return oe[v+"End"]-oe[v+"Start"]}var j=A?I:N?function(oe){return oe.p-U(oe)/2}:function(oe){return Math.min(I(oe),oe.p-x.bardelta/2)},Z=A?F:N?function(oe){return oe.p+U(oe)/2}:function(oe){return Math.max(F(oe),oe.p+x.bardelta/2)};function te(oe,fe,ye){return y.finiteRange&&(ye=0),l.inbox(oe-T,fe-T,ye+Math.min(1,Math.abs(fe-oe)/D)-1)}function re(oe){return te(j(oe),Z(oe),S)}function W(oe){return te(I(oe),F(oe),w)}function J(oe){var fe=oe[P];if(b){var ye=Math.abs(oe.rawS)||0;_>0?fe+=ye:_<0&&(fe-=ye)}return fe}function le(oe){var fe=_,ye=oe.b,ce=J(oe);return l.inbox(ye-fe,ce-fe,S+(ce-fe)/(ce-ye)-1)}function ue(oe){var fe=_,ye=oe.b,ce=J(oe);return l.inbox(ye-fe,ce-fe,w+(ce-fe)/(ce-ye)-1)}var se=u[v+"a"],G=u[P+"a"];D=Math.abs(se.r2c(se.range[1])-se.r2c(se.range[0]));function Y(oe){return(M(oe)+E(oe))/2}var ee=l.getDistanceFunction(d,M,E,Y);if(l.getClosest(m,ee,u),u.index!==!1&&m[u.index].p!==a){O||(j=function(oe){return Math.min(I(oe),oe.p-x.bargroupwidth/2)},Z=function(oe){return Math.max(F(oe),oe.p+x.bargroupwidth/2)});var $=u.index,K=m[$],Q=g.base?K.b+K.s:K.s;u[P+"0"]=u[P+"1"]=G.c2p(K[P],!0),u[P+"LabelVal"]=Q;var ae=x.extents[x.extents.round(K.p)];u[v+"0"]=se.c2p(A?j(K):ae[0],!0),u[v+"1"]=se.c2p(A?Z(K):ae[1],!0);var ie=K.orig_p!==void 0;return u[v+"LabelVal"]=ie?K.orig_p:K.p,u.labelLabel=n(se,u[v+"LabelVal"],g[v+"hoverformat"]),u.valueLabel=n(G,u[P+"LabelVal"],g[P+"hoverformat"]),u.baseLabel=n(G,K.b,g[P+"hoverformat"]),u.spikeDistance=(ue(K)+W(K))/2,u[v+"Spike"]=se.c2p(K.p,!0),p(K,g,u),u.hovertemplate=g.hovertemplate,u}}function f(u,s){var h=s.mcc||u.marker.color,d=s.mlcc||u.marker.line.color,y=t(u,s);if(c.opacity(h))return h;if(c.opacity(d)&&y)return d}k.exports={hoverPoints:i,hoverOnBars:r,getTraceColor:f}},{"../../components/color":366,"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./helpers":654}],656:[function(e,k,z){k.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,colorbar:e("../scatter/marker_colorbar"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"bar",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":944,"./arrays_to_calcdata":647,"./attributes":648,"./calc":649,"./cross_trace_calc":651,"./defaults":652,"./event_data":653,"./hover":655,"./layout_attributes":657,"./layout_defaults":658,"./plot":659,"./select":660,"./style":662}],657:[function(e,k,z){k.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],658:[function(e,k,z){var l=e("../../registry"),o=e("../../plots/cartesian/axes"),c=e("../../lib"),p=e("./layout_attributes");k.exports=function(t,n,a){function i(x,A){return c.coerce(t,n,p,x,A)}for(var r=!1,f=!1,u=!1,s={},h=i("barmode"),d=0;d<a.length;d++){var y=a[d];if(l.traceIs(y,"bar")&&y.visible)r=!0;else continue;if(h==="group"){var m=y.xaxis+y.yaxis;s[m]&&(u=!0),s[m]=!0}if(y.visible&&y.type==="histogram"){var g=o.getFromId({_fullLayout:n},y[y.orientation==="v"?"xaxis":"yaxis"]);g.type!=="category"&&(f=!0)}}if(!r){delete n.barmode;return}h!=="overlay"&&i("barnorm"),i("bargap",f&&!u?0:.2),i("bargroupgap")}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./layout_attributes":657}],659:[function(e,k,z){var l=e("@plotly/d3"),o=e("fast-isnumeric"),c=e("../../lib"),p=e("../../lib/svg_text_utils"),t=e("../../components/color"),n=e("../../components/drawing"),a=e("../../registry"),i=e("../../plots/cartesian/axes").tickText,r=e("./uniform_text"),f=r.recordMinTextSize,u=r.clearMinTextSize,s=e("./style"),h=e("./helpers"),d=e("./constants"),y=e("./attributes"),m=y.text,g=y.textposition,x=e("../../components/fx/helpers").appendArrayPointValue,A=d.TEXTPAD;function b(j){return j.id}function S(j){if(j.ids)return b}function w(j,Z){return j<Z?1:-1}function T(j,Z,te,re){var W=[],J=[],le=re?Z:te,ue=re?te:Z;return W[0]=le.c2p(j.s0,!0),J[0]=ue.c2p(j.p0,!0),W[1]=le.c2p(j.s1,!0),J[1]=ue.c2p(j.p1,!0),re?[W,J]:[J,W]}function _(j,Z,te,re){if(!Z.uniformtext.mode&&v(te)){var W;return re&&(W=re()),j.transition().duration(te.duration).ease(te.easing).each("end",function(){W&&W()}).each("interrupt",function(){W&&W()})}else return j}function v(j){return j&&j.duration>0}function P(j,Z,te,re,W,J){var le=Z.xaxis,ue=Z.yaxis,se=j._fullLayout;W||(W={mode:se.barmode,norm:se.barmode,gap:se.bargap,groupgap:se.bargroupgap},u("bar",se));var G=c.makeTraceGroups(re,te,"trace bars").each(function(Y){var ee=l.select(this),$=Y[0].trace,K=$.type==="waterfall",Q=$.type==="funnel",ae=$.type==="bar",ie=ae||Q,oe=0;K&&$.connector.visible&&$.connector.mode==="between"&&(oe=$.connector.line.width/2);var fe=$.orientation==="h",ye=v(W),ce=c.ensureSingle(ee,"g","points"),me=S($),xe=ce.selectAll("g.point").data(c.identity,me);xe.enter().append("g").classed("point",!0),xe.exit().remove(),xe.each(function(Ae,Oe){var He=l.select(this),Ge=T(Ae,le,ue,fe),_e=Ge[0][0],Ie=Ge[0][1],We=Ge[1][0],et=Ge[1][1],Ne=(fe?Ie-_e:et-We)==0;Ne&&ie&&h.getLineWidth($,Ae)&&(Ne=!1),Ne||(Ne=!o(_e)||!o(Ie)||!o(We)||!o(et)),Ae.isBlank=Ne,Ne&&(fe?Ie=_e:et=We),oe&&!Ne&&(fe?(_e-=w(_e,Ie)*oe,Ie+=w(_e,Ie)*oe):(We-=w(We,et)*oe,et+=w(We,et)*oe));var De,Ve;if($.type==="waterfall"){if(!Ne){var dt=$[Ae.dir].marker;De=dt.line.width,Ve=dt.color}}else De=h.getLineWidth($,Ae),Ve=Ae.mc||$.marker.color;function Dt(At){var it=l.round(De/2%1,2);return W.gap===0&&W.groupgap===0?l.round(Math.round(At)-it,2):At}function Gt(At,it,ht){return ht&&At===it?At:Math.abs(At-it)>=2?Dt(At):At>it?Math.ceil(At):Math.floor(At)}if(!j._context.staticPlot){var Mt=t.opacity(Ve),zt=Mt<1||De>.01?Dt:Gt;_e=zt(_e,Ie,fe),Ie=zt(Ie,_e,fe),We=zt(We,et,!fe),et=zt(et,We,!fe)}var Nt=_(c.ensureSingle(He,"path"),se,W,J);if(Nt.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Ie-_e)*(et-We))||Ne&&j._context.staticPlot?"M0,0Z":"M"+_e+","+We+"V"+et+"H"+Ie+"V"+We+"Z").call(n.setClipUrl,Z.layerClipId,j),!se.uniformtext.mode&&ye){var Et=n.makePointStyleFns($);n.singlePointStyle(Ae,Nt,$,Et,j)}M(j,Z,He,Y,Oe,_e,Ie,We,et,W,J),Z.layerClipId&&n.hideOutsideRangePoint(Ae,He.select("text"),le,ue,$.xcalendar,$.ycalendar)});var ke=$.cliponaxis===!1;n.setClipUrl(ee,ke?null:Z.layerClipId,j)});a.getComponentMethod("errorbars","plot")(j,G,Z,W)}function M(j,Z,te,re,W,J,le,ue,se,G,Y){var ee=Z.xaxis,$=Z.yaxis,K=j._fullLayout,Q;function ae(At,it,ht){var $e=c.ensureSingle(At,"text").text(it).attr({class:"bartext bartext-"+Q,"text-anchor":"middle","data-notex":1}).call(n.font,ht).call(p.convertToTspans,j);return $e}var ie=re[0].trace,oe=ie.orientation==="h",fe=I(K,re,W,ee,$);Q=F(ie,W);var ye=G.mode==="stack"||G.mode==="relative",ce=re[W],me=!ye||ce._outmost;if(!fe||Q==="none"||(ce.isBlank||J===le||ue===se)&&(Q==="auto"||Q==="inside")){te.select("text").remove();return}var xe=K.font,ke=s.getBarColor(re[W],ie),Ae=s.getInsideTextFont(ie,W,xe,ke),Oe=s.getOutsideTextFont(ie,W,xe),He=te.datum();oe?ee.type==="log"&&He.s0<=0&&(ee.range[0]<ee.range[1]?J=0:J=ee._length):$.type==="log"&&He.s0<=0&&($.range[0]<$.range[1]?ue=$._length:ue=0);var Ge=Math.abs(le-J)-2*A,_e=Math.abs(se-ue)-2*A,Ie,We,et,Ne,De;if(Q==="outside"&&!me&&!ce.hasB&&(Q="inside"),Q==="auto")if(me){Q="inside",De=c.ensureUniformFontSize(j,Ae),Ie=ae(te,fe,De),We=n.bBox(Ie.node()),et=We.width,Ne=We.height;var Ve=et>0&&Ne>0,dt=et<=Ge&&Ne<=_e,Dt=et<=_e&&Ne<=Ge,Gt=oe?Ge>=et*(_e/Ne):_e>=Ne*(Ge/et);Ve&&(dt||Dt||Gt)?Q="inside":(Q="outside",Ie.remove(),Ie=null)}else Q="inside";if(!Ie){De=c.ensureUniformFontSize(j,Q==="outside"?Oe:Ae),Ie=ae(te,fe,De);var Mt=Ie.attr("transform");if(Ie.attr("transform",""),We=n.bBox(Ie.node()),et=We.width,Ne=We.height,Ie.attr("transform",Mt),et<=0||Ne<=0){Ie.remove();return}}var zt=ie.textangle,Nt,Et;Q==="outside"?(Et=ie.constraintext==="both"||ie.constraintext==="outside",Nt=O(J,le,ue,se,We,{isHorizontal:oe,constrained:Et,angle:zt})):(Et=ie.constraintext==="both"||ie.constraintext==="inside",Nt=N(J,le,ue,se,We,{isHorizontal:oe,constrained:Et,angle:zt,anchor:ie.insidetextanchor})),Nt.fontSize=De.size,f(ie.type==="histogram"?"bar":ie.type,Nt,K),ce.transform=Nt,_(Ie,K,G,Y).attr("transform",c.getTextTransform(Nt))}function E(j){return j==="auto"?0:j}function D(j,Z){var te=Math.PI/180*Z,re=Math.abs(Math.sin(te)),W=Math.abs(Math.cos(te));return{x:j.width*W+j.height*re,y:j.width*re+j.height*W}}function N(j,Z,te,re,W,J){var le=!!J.isHorizontal,ue=!!J.constrained,se=J.angle||0,G=J.anchor||"end",Y=G==="end",ee=G==="start",$=J.leftToRight||0,K=($+1)/2,Q=1-K,ae=W.width,ie=W.height,oe=Math.abs(Z-j),fe=Math.abs(re-te),ye=oe>2*A&&fe>2*A?A:0;oe-=2*ye,fe-=2*ye;var ce=E(se);se==="auto"&&!(ae<=oe&&ie<=fe)&&(ae>oe||ie>fe)&&(!(ae>fe||ie>oe)||ae<ie!=oe<fe)&&(ce+=90);var me=D(W,ce),xe=1;ue&&(xe=Math.min(1,oe/me.x,fe/me.y));var ke=W.left*Q+W.right*K,Ae=(W.top+W.bottom)/2,Oe=(j+A)*Q+(Z-A)*K,He=(te+re)/2,Ge=0,_e=0;if(ee||Y){var Ie=(le?me.x:me.y)/2,We=le?w(j,Z):w(te,re);le?ee?(Oe=j+We*ye,Ge=-We*Ie):(Oe=Z-We*ye,Ge=We*Ie):ee?(He=te+We*ye,_e=-We*Ie):(He=re-We*ye,_e=We*Ie)}return{textX:ke,textY:Ae,targetX:Oe,targetY:He,anchorX:Ge,anchorY:_e,scale:xe,rotate:ce}}function O(j,Z,te,re,W,J){var le=!!J.isHorizontal,ue=!!J.constrained,se=J.angle||0,G=W.width,Y=W.height,ee=Math.abs(Z-j),$=Math.abs(re-te),K;le?K=$>2*A?A:0:K=ee>2*A?A:0;var Q=1;ue&&(Q=le?Math.min(1,$/Y):Math.min(1,ee/G));var ae=E(se),ie=D(W,ae),oe=(le?ie.x:ie.y)/2,fe=(W.left+W.right)/2,ye=(W.top+W.bottom)/2,ce=(j+Z)/2,me=(te+re)/2,xe=0,ke=0,Ae=le?w(Z,j):w(te,re);return le?(ce=Z-Ae*K,xe=Ae*oe):(me=re+Ae*K,ke=-Ae*oe),{textX:fe,textY:ye,targetX:ce,targetY:me,anchorX:xe,anchorY:ke,scale:Q,rotate:ae}}function I(j,Z,te,re,W){var J=Z[0].trace,le=J.texttemplate,ue;return le?ue=V(j,Z,te,re,W):J.textinfo?ue=U(Z,te,re,W):ue=h.getValue(J.text,te),h.coerceString(m,ue)}function F(j,Z){var te=h.getValue(j.textposition,Z);return h.coerceEnumerated(g,te)}function V(j,Z,te,re,W){var J=Z[0].trace,le=c.castOption(J,te,"texttemplate");if(!le)return"";var ue=J.type==="waterfall",se=J.type==="funnel",G,Y,ee,$;J.orientation==="h"?(G="y",Y=W,ee="x",$=re):(G="x",Y=re,ee="y",$=W);function K(ce){return i(Y,Y.c2l(ce),!0).text}function Q(ce){return i($,$.c2l(ce),!0).text}var ae=Z[te],ie={};ie.label=ae.p,ie.labelLabel=ie[G+"Label"]=K(ae.p);var oe=c.castOption(J,ae.i,"text");(oe===0||oe)&&(ie.text=oe),ie.value=ae.s,ie.valueLabel=ie[ee+"Label"]=Q(ae.s);var fe={};x(fe,J,ae.i),ue&&(ie.delta=+ae.rawS||ae.s,ie.deltaLabel=Q(ie.delta),ie.final=ae.v,ie.finalLabel=Q(ie.final),ie.initial=ie.final-ie.delta,ie.initialLabel=Q(ie.initial)),se&&(ie.value=ae.s,ie.valueLabel=Q(ie.value),ie.percentInitial=ae.begR,ie.percentInitialLabel=c.formatPercent(ae.begR),ie.percentPrevious=ae.difR,ie.percentPreviousLabel=c.formatPercent(ae.difR),ie.percentTotal=ae.sumR,ie.percenTotalLabel=c.formatPercent(ae.sumR));var ye=c.castOption(J,ae.i,"customdata");return ye&&(ie.customdata=ye),c.texttemplateString(le,ie,j._d3locale,fe,ie,J._meta||{})}function U(j,Z,te,re){var W=j[0].trace,J=W.orientation==="h",le=W.type==="waterfall",ue=W.type==="funnel";function se(me){var xe=J?re:te;return i(xe,me,!0).text}function G(me){var xe=J?te:re;return i(xe,+me,!0).text}var Y=W.textinfo,ee=j[Z],$=Y.split("+"),K=[],Q,ae=function(me){return $.indexOf(me)!==-1};if(ae("label")&&K.push(se(j[Z].p)),ae("text")&&(Q=c.castOption(W,ee.i,"text"),(Q===0||Q)&&K.push(Q)),le){var ie=+ee.rawS||ee.s,oe=ee.v,fe=oe-ie;ae("initial")&&K.push(G(fe)),ae("delta")&&K.push(G(ie)),ae("final")&&K.push(G(oe))}if(ue){ae("value")&&K.push(G(ee.s));var ye=0;ae("percent initial")&&ye++,ae("percent previous")&&ye++,ae("percent total")&&ye++;var ce=ye>1;ae("percent initial")&&(Q=c.formatPercent(ee.begR),ce&&(Q+=" of initial"),K.push(Q)),ae("percent previous")&&(Q=c.formatPercent(ee.difR),ce&&(Q+=" of previous"),K.push(Q)),ae("percent total")&&(Q=c.formatPercent(ee.sumR),ce&&(Q+=" of total"),K.push(Q))}return K.join("<br>")}k.exports={plot:P,toMoveInsideBar:N}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx/helpers":402,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"./attributes":648,"./constants":650,"./helpers":654,"./style":662,"./uniform_text":664,"@plotly/d3":58,"fast-isnumeric":190}],660:[function(e,k,z){k.exports=function(c,p){var t=c.cd,n=c.xaxis,a=c.yaxis,i=t[0].trace,r=i.type==="funnel",f=i.orientation==="h",u=[],s;if(p===!1)for(s=0;s<t.length;s++)t[s].selected=0;else for(s=0;s<t.length;s++){var h=t[s],d="ct"in h?h.ct:l(h,n,a,f,r);p.contains(d,!1,s,c)?(u.push({pointNumber:s,x:n.c2d(h.x),y:a.c2d(h.y)}),h.selected=1):h.selected=0}return u};function l(o,c,p,t,n){var a=c.c2p(t?o.s0:o.p0,!0),i=c.c2p(t?o.s1:o.p1,!0),r=p.c2p(t?o.p0:o.s0,!0),f=p.c2p(t?o.p1:o.s1,!0);return n?[(a+i)/2,(r+f)/2]:t?[i,(r+f)/2]:[(a+i)/2,f]}},{}],661:[function(e,k,z){k.exports=c;var l=e("../../lib").distinctVals,o=e("../../constants/numerical").BADNUM;function c(p,t){this.traces=p,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var n=1/0,a=[],i=0;i<p.length;i++){for(var r=p[i],f=0;f<r.length;f++){var u=r[f];u.p!==o&&a.push(u.p)}r[0]&&r[0].width1&&(n=Math.min(r[0].width1,n))}this.positions=a;var s=l(a);this.distinctPositions=s.vals,s.vals.length===1&&n!==1/0?this.minDiff=n:this.minDiff=Math.min(s.minDiff,n);var h=(t.posAxis||{}).type;(h==="category"||h==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}c.prototype.put=function(t,n){var a=this.getLabel(t,n),i=this.bins[a]||0;return this.bins[a]=i+n,i},c.prototype.get=function(t,n){var a=this.getLabel(t,n);return this.bins[a]||0},c.prototype.getLabel=function(t,n){var a=n<0&&this.sepNegVal?"v":"^",i=this.overlapNoMerge?t:Math.round(t/this.binWidth);return a+i}},{"../../constants/numerical":479,"../../lib":503}],662:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../components/color"),c=e("../../components/drawing"),p=e("../../lib"),t=e("../../registry"),n=e("./uniform_text").resizeText,a=e("./attributes"),i=a.textfont,r=a.insidetextfont,f=a.outsidetextfont,u=e("./helpers");function s(_){var v=l.select(_).selectAll("g.barlayer").selectAll("g.trace");n(_,v,"bar");var P=v.size(),M=_._fullLayout;v.style("opacity",function(E){return E[0].trace.opacity}).each(function(E){(M.barmode==="stack"&&P>1||M.bargap===0&&M.bargroupgap===0&&!E[0].trace.marker.line.width)&&l.select(this).attr("shape-rendering","crispEdges")}),v.selectAll("g.points").each(function(E){var D=l.select(this),N=E[0].trace;h(D,N,_)}),t.getComponentMethod("errorbars","style")(v)}function h(_,v,P){c.pointStyle(_.selectAll("path"),v,P),d(_,v,P)}function d(_,v,P){_.selectAll("text").each(function(M){var E=l.select(this),D=p.ensureUniformFontSize(P,x(E,M,v,P));c.font(E,D)})}function y(_,v,P){var M=v[0].trace;M.selectedpoints?m(P,M,_):(h(P,M,_),t.getComponentMethod("errorbars","style")(P))}function m(_,v,P){c.selectedPointStyle(_.selectAll("path"),v),g(_.selectAll("text"),v,P)}function g(_,v,P){_.each(function(M){var E=l.select(this),D;if(M.selected){D=p.ensureUniformFontSize(P,x(E,M,v,P));var N=v.selected.textfont&&v.selected.textfont.color;N&&(D.color=N),c.font(E,D)}else c.selectedTextStyle(E,v)})}function x(_,v,P,M){var E=M._fullLayout.font,D=P.textfont;if(_.classed("bartext-inside")){var N=T(v,P);D=b(P,v.i,E,N)}else _.classed("bartext-outside")&&(D=S(P,v.i,E));return D}function A(_,v,P){return w(i,_.textfont,v,P)}function b(_,v,P,M){var E=A(_,v,P),D=_._input.textfont===void 0||_._input.textfont.color===void 0||Array.isArray(_.textfont.color)&&_.textfont.color[v]===void 0;return D&&(E={color:o.contrast(M),family:E.family,size:E.size}),w(r,_.insidetextfont,v,E)}function S(_,v,P){var M=A(_,v,P);return w(f,_.outsidetextfont,v,M)}function w(_,v,P,M){v=v||{};var E=u.getValue(v.family,P),D=u.getValue(v.size,P),N=u.getValue(v.color,P);return{family:u.coerceString(_.family,E,M.family),size:u.coerceNumber(_.size,D,M.size),color:u.coerceColor(_.color,N,M.color)}}function T(_,v){return v.type==="waterfall"?v[_.dir].marker.color:_.mcc||_.mc||v.marker.color}k.exports={style:s,styleTextPoints:d,styleOnSelect:y,getInsideTextFont:b,getOutsideTextFont:S,getBarColor:T,resizeText:n}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../registry":638,"./attributes":648,"./helpers":654,"./uniform_text":664,"@plotly/d3":58}],663:[function(e,k,z){var l=e("../../components/color"),o=e("../../components/colorscale/helpers").hasColorscale,c=e("../../components/colorscale/defaults"),p=e("../../lib").coercePattern;k.exports=function(n,a,i,r,f){var u=i("marker.color",r),s=o(n,"marker");s&&c(n,a,f,i,{prefix:"marker.",cLetter:"c"}),i("marker.line.color",l.defaultLine),o(n,"marker.line")&&c(n,a,f,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width"),i("marker.opacity"),p(i,"marker.pattern",u,s),i("selected.marker.color"),i("unselected.marker.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],664:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../lib");function c(a,i,r){var f=a._fullLayout,u=f["_"+r+"Text_minsize"];if(u){var s=f.uniformtext.mode==="hide",h;switch(r){case"funnelarea":case"pie":case"sunburst":h="g.slice";break;case"treemap":case"icicle":h="g.slice, g.pathbar";break;default:h="g.points > g.point"}i.selectAll(h).each(function(d){var y=d.transform;if(y){y.scale=s&&y.hide?0:u/y.fontSize;var m=l.select(this).select("text");m.attr("transform",o.getTextTransform(y))}})}}function p(a,i,r){if(r.uniformtext.mode){var f=n(a),u=r.uniformtext.minsize,s=i.scale*i.fontSize;i.hide=s<u,r[f]=r[f]||1/0,i.hide||(r[f]=Math.min(r[f],Math.max(s,u)))}}function t(a,i){var r=n(a);i[r]=void 0}function n(a){return"_"+a+"Text_minsize"}k.exports={recordMinTextSize:p,clearMinTextSize:t,resizeText:c}},{"../../lib":503,"@plotly/d3":58}],665:[function(e,k,z){var l=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../lib/extend").extendFlat,c=e("../scatterpolar/attributes"),p=e("../bar/attributes");k.exports={r:c.r,theta:c.theta,r0:c.r0,dr:c.dr,theta0:c.theta0,dtheta:c.dtheta,thetaunit:c.thetaunit,base:o({},p.base,{}),offset:o({},p.offset,{}),width:o({},p.width,{}),text:o({},p.text,{}),hovertext:o({},p.hovertext,{}),marker:p.marker,hoverinfo:c.hoverinfo,hovertemplate:l(),selected:p.selected,unselected:p.unselected}},{"../../lib/extend":493,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatterpolar/attributes":1e3}],666:[function(e,k,z){var l=e("../../components/colorscale/helpers").hasColorscale,o=e("../../components/colorscale/calc"),c=e("../bar/arrays_to_calcdata"),p=e("../bar/cross_trace_calc").setGroupPositions,t=e("../scatter/calc_selection"),n=e("../../registry").traceIs,a=e("../../lib").extendFlat;function i(f,u){for(var s=f._fullLayout,h=u.subplot,d=s[h].radialaxis,y=s[h].angularaxis,m=d.makeCalcdata(u,"r"),g=y.makeCalcdata(u,"theta"),x=u._length,A=new Array(x),b=m,S=g,w=0;w<x;w++)A[w]={p:S[w],s:b[w]};function T(_){var v=u[_];v!==void 0&&(u["_"+_]=Array.isArray(v)?y.makeCalcdata(u,_):y.d2c(v,u.thetaunit))}return y.type==="linear"&&(T("width"),T("offset")),l(u,"marker")&&o(f,u,{vals:u.marker.color,containerStr:"marker",cLetter:"c"}),l(u,"marker.line")&&o(f,u,{vals:u.marker.line.color,containerStr:"marker.line",cLetter:"c"}),c(A,u),t(A,u),A}function r(f,u,s){for(var h=f.calcdata,d=[],y=0;y<h.length;y++){var m=h[y],g=m[0].trace;g.visible===!0&&n(g,"bar")&&g.subplot===s&&d.push(m)}var x=a({},u.radialaxis,{_id:"x"}),A=u.angularaxis;p(f,A,x,d,{mode:u.barmode,norm:u.barnorm,gap:u.bargap,groupgap:u.bargroupgap})}k.exports={calc:i,crossTraceCalc:r}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../lib":503,"../../registry":638,"../bar/arrays_to_calcdata":647,"../bar/cross_trace_calc":651,"../scatter/calc_selection":928}],667:[function(e,k,z){var l=e("../../lib"),o=e("../scatterpolar/defaults").handleRThetaDefaults,c=e("../bar/style_defaults"),p=e("./attributes");k.exports=function(n,a,i,r){function f(s,h){return l.coerce(n,a,p,s,h)}var u=o(n,a,r,f);if(!u){a.visible=!1;return}f("thetaunit"),f("base"),f("offset"),f("width"),f("text"),f("hovertext"),f("hovertemplate"),c(n,a,f,i,r),l.coerceSelectionMarkerOpacity(a,f)}},{"../../lib":503,"../bar/style_defaults":663,"../scatterpolar/defaults":1002,"./attributes":665}],668:[function(e,k,z){var l=e("../../components/fx"),o=e("../../lib"),c=e("../bar/hover").getTraceColor,p=o.fillText,t=e("../scatterpolar/hover").makeHoverPointText,n=e("../../plots/polar/helpers").isPtInsidePolygon;k.exports=function(i,r,f){var u=i.cd,s=u[0].trace,h=i.subplot,d=h.radialAxis,y=h.angularAxis,m=h.vangles,g=m?n:o.isPtInsideSector,x=i.maxHoverDistance,A=y._period||2*Math.PI,b=Math.abs(d.g2p(Math.sqrt(r*r+f*f))),S=Math.atan2(f,r);d.range[0]>d.range[1]&&(S+=Math.PI);var w=function(P){return g(b,S,[P.rp0,P.rp1],[P.thetag0,P.thetag1],m)?x+Math.min(1,Math.abs(P.thetag1-P.thetag0)/A)-1+(P.rp1-b)/(P.rp1-P.rp0)-1:1/0};if(l.getClosest(u,w,i),i.index!==!1){var T=i.index,_=u[T];i.x0=i.x1=_.ct[0],i.y0=i.y1=_.ct[1];var v=o.extendFlat({},_,{r:_.s,theta:_.p});return p(_,s,i),t(v,s,h,i),i.hovertemplate=s.hovertemplate,i.color=c(s,_),i.xLabelVal=i.yLabelVal=void 0,_.s<0&&(i.idealAlign="left"),[i]}}},{"../../components/fx":406,"../../lib":503,"../../plots/polar/helpers":621,"../bar/hover":655,"../scatterpolar/hover":1004}],669:[function(e,k,z){k.exports={moduleType:"trace",name:"barpolar",basePlotModule:e("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("../scatterpolar/format_labels"),style:e("../bar/style").style,styleOnSelect:e("../bar/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../bar/select"),meta:{}}},{"../../plots/polar":622,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":944,"../scatterpolar/format_labels":1003,"./attributes":665,"./calc":666,"./defaults":667,"./hover":668,"./layout_attributes":670,"./layout_defaults":671,"./plot":672}],670:[function(e,k,z){k.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],671:[function(e,k,z){var l=e("../../lib"),o=e("./layout_attributes");k.exports=function(c,p,t){var n={},a;function i(u,s){return l.coerce(c[a]||{},p[a],o,u,s)}for(var r=0;r<t.length;r++){var f=t[r];f.type==="barpolar"&&f.visible===!0&&(a=f.subplot,n[a]||(i("barmode"),i("bargap"),n[a]=1))}}},{"../../lib":503,"./layout_attributes":670}],672:[function(e,k,z){var l=e("@plotly/d3"),o=e("fast-isnumeric"),c=e("../../lib"),p=e("../../components/drawing"),t=e("../../plots/polar/helpers");k.exports=function(i,r,f){var u=r.xaxis,s=r.yaxis,h=r.radialAxis,d=r.angularAxis,y=n(r),m=r.layers.frontplot.select("g.barlayer");c.makeTraceGroups(m,f,"trace bars").each(function(){var g=l.select(this),x=c.ensureSingle(g,"g","points"),A=x.selectAll("g.point").data(c.identity);A.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),A.exit().remove(),A.each(function(b){var S=l.select(this),w=b.rp0=h.c2p(b.s0),T=b.rp1=h.c2p(b.s1),_=b.thetag0=d.c2g(b.p0),v=b.thetag1=d.c2g(b.p1),P;if(!o(w)||!o(T)||!o(_)||!o(v)||w===T||_===v)P="M0,0Z";else{var M=h.c2g(b.s1),E=(_+v)/2;b.ct=[u.c2p(M*Math.cos(E)),s.c2p(M*Math.sin(E))],P=y(w,T,_,v)}c.ensureSingle(S,"path").attr("d",P)}),p.setClipUrl(g,r._hasClipOnAxisFalse?r.clipIds.forTraces:null,i)})};function n(a){var i=a.cxx,r=a.cyy;return a.vangles?function(f,u,s,h){var d,y;c.angleDelta(s,h)>0?(d=s,y=h):(d=h,y=s);var m=t.findEnclosingVertexAngles(d,a.vangles)[0],g=t.findEnclosingVertexAngles(y,a.vangles)[1],x=[m,(d+y)/2,g];return t.pathPolygonAnnulus(f,u,d,y,x,i,r)}:function(f,u,s,h){return c.pathAnnulus(f,u,s,h,i,r)}}},{"../../components/drawing":388,"../../lib":503,"../../plots/polar/helpers":621,"@plotly/d3":58,"fast-isnumeric":190}],673:[function(e,k,z){var l=e("../scatter/attributes"),o=e("../bar/attributes"),c=e("../../components/color/attributes"),p=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../plots/template_attributes").hovertemplateAttrs,n=e("../../lib/extend").extendFlat,a=l.marker,i=a.line;k.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:l.xperiod,yperiod:l.yperiod,xperiod0:l.xperiod0,yperiod0:l.yperiod0,xperiodalignment:l.xperiodalignment,yperiodalignment:l.yperiodalignment,xhoverformat:p("x"),yhoverformat:p("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:n({},a.symbol,{arrayOk:!1,editType:"plot"}),opacity:n({},a.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:n({},a.size,{arrayOk:!1,editType:"calc"}),color:n({},a.color,{arrayOk:!1,editType:"style"}),line:{color:n({},i.color,{arrayOk:!1,dflt:c.defaultLine,editType:"style"}),width:n({},i.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:l.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:o.offsetgroup,alignmentgroup:o.alignmentgroup,selected:{marker:l.selected.marker,editType:"style"},unselected:{marker:l.unselected.marker,editType:"style"},text:n({},l.text,{}),hovertext:n({},l.hovertext,{}),hovertemplate:t({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926}],674:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../plots/cartesian/axes"),c=e("../../plots/cartesian/align_period"),p=e("../../lib"),t=e("../../constants/numerical").BADNUM,n=p._;k.exports=function(S,w){var T=S._fullLayout,_=o.getFromId(S,w.xaxis||"x"),v=o.getFromId(S,w.yaxis||"y"),P=[],M=w.type==="violin"?"_numViolins":"_numBoxes",E,D,N,O,I,F,V;w.orientation==="h"?(N=_,O="x",I=v,F="y",V=!!w.yperiodalignment):(N=v,O="y",I=_,F="x",V=!!w.xperiodalignment);var U=a(w,F,I,T[M]),j=U[0],Z=U[1],te=p.distinctVals(j,I),re=te.vals,W=te.minDiff/2,J,le,ue,se,G,Y,ee=(w.boxpoints||w.points)==="all"?p.identity:function(Mt){return Mt.v<J.lf||Mt.v>J.uf};if(w._hasPreCompStats){var $=w[O],K=function(Mt){return N.d2c((w[Mt]||[])[E])},Q=1/0,ae=-1/0;for(E=0;E<w._length;E++){var ie=j[E];if(!!l(ie)){if(J={},J.pos=J[F]=ie,V&&Z&&(J.orig_p=Z[E]),J.q1=K("q1"),J.med=K("median"),J.q3=K("q3"),le=[],$&&p.isArrayOrTypedArray($[E]))for(D=0;D<$[E].length;D++)Y=N.d2c($[E][D]),Y!==t&&(G={v:Y,i:[E,D]},u(G,w,[E,D]),le.push(G));if(J.pts=le.sort(h),ue=J[O]=le.map(d),se=ue.length,J.med!==t&&J.q1!==t&&J.q3!==t&&J.med>=J.q1&&J.q3>=J.med){var oe=K("lowerfence");J.lf=oe!==t&&oe<=J.q1?oe:y(J,ue,se);var fe=K("upperfence");J.uf=fe!==t&&fe>=J.q3?fe:m(J,ue,se);var ye=K("mean");J.mean=ye!==t?ye:se?p.mean(ue,se):(J.q1+J.q3)/2;var ce=K("sd");J.sd=ye!==t&&ce>=0?ce:se?p.stdev(ue,se,J.mean):J.q3-J.q1,J.lo=g(J),J.uo=x(J);var me=K("notchspan");me=me!==t&&me>0?me:A(J,se),J.ln=J.med-me,J.un=J.med+me;var xe=J.lf,ke=J.uf;w.boxpoints&&ue.length&&(xe=Math.min(xe,ue[0]),ke=Math.max(ke,ue[se-1])),w.notched&&(xe=Math.min(xe,J.ln),ke=Math.max(ke,J.un)),J.min=xe,J.max=ke}else{p.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+J.q1,"median = "+J.med,"q3 = "+J.q3].join(`
`));var Ae;J.med!==t?Ae=J.med:J.q1!==t?J.q3!==t?Ae=(J.q1+J.q3)/2:Ae=J.q1:J.q3!==t?Ae=J.q3:Ae=0,J.med=Ae,J.q1=J.q3=Ae,J.lf=J.uf=Ae,J.mean=J.sd=Ae,J.ln=J.un=Ae,J.min=J.max=Ae}Q=Math.min(Q,J.min),ae=Math.max(ae,J.max),J.pts2=le.filter(ee),P.push(J)}}w._extremes[N._id]=o.findExtremes(N,[Q,ae],{padded:!0})}else{var Oe=N.makeCalcdata(w,O),He=i(re,W),Ge=re.length,_e=r(Ge);for(E=0;E<w._length;E++)if(Y=Oe[E],!!l(Y)){var Ie=p.findBin(j[E],He);Ie>=0&&Ie<Ge&&(G={v:Y,i:E},u(G,w,E),_e[Ie].push(G))}var We=1/0,et=-1/0,Ne=w.quartilemethod,De=Ne==="exclusive",Ve=Ne==="inclusive";for(E=0;E<Ge;E++)if(_e[E].length>0){if(J={},J.pos=J[F]=re[E],le=J.pts=_e[E].sort(h),ue=J[O]=le.map(d),se=ue.length,J.min=ue[0],J.max=ue[se-1],J.mean=p.mean(ue,se),J.sd=p.stdev(ue,se,J.mean),J.med=p.interp(ue,.5),se%2&&(De||Ve)){var dt,Dt;De?(dt=ue.slice(0,se/2),Dt=ue.slice(se/2+1)):Ve&&(dt=ue.slice(0,se/2+1),Dt=ue.slice(se/2)),J.q1=p.interp(dt,.5),J.q3=p.interp(Dt,.5)}else J.q1=p.interp(ue,.25),J.q3=p.interp(ue,.75);J.lf=y(J,ue,se),J.uf=m(J,ue,se),J.lo=g(J),J.uo=x(J);var Gt=A(J,se);J.ln=J.med-Gt,J.un=J.med+Gt,We=Math.min(We,J.ln),et=Math.max(et,J.un),J.pts2=le.filter(ee),P.push(J)}w._extremes[N._id]=o.findExtremes(N,w.notched?Oe.concat([We,et]):Oe,{padded:!0})}return s(P,w),P.length>0?(P[0].t={num:T[M],dPos:W,posLetter:F,valLetter:O,labels:{med:n(S,"median:"),min:n(S,"min:"),q1:n(S,"q1:"),q3:n(S,"q3:"),max:n(S,"max:"),mean:w.boxmean==="sd"?n(S,"mean \xB1 \u03C3:"):n(S,"mean:"),lf:n(S,"lower fence:"),uf:n(S,"upper fence:")}},T[M]++,P):[{t:{empty:!0}}]};function a(b,S,w,T){var _=S in b,v=S+"0"in b,P="d"+S in b;if(_||v&&P){var M=w.makeCalcdata(b,S),E=c(b,w,S,M).vals;return[E,M]}var D;v?D=b[S+"0"]:"name"in b&&(w.type==="category"||l(b.name)&&["linear","log"].indexOf(w.type)!==-1||p.isDateTime(b.name)&&w.type==="date")?D=b.name:D=T;for(var N=w.type==="multicategory"?w.r2c_just_indices(D):w.d2c(D,0,b[S+"calendar"]),O=b._length,I=new Array(O),F=0;F<O;F++)I[F]=N;return[I]}function i(b,S){for(var w=b.length,T=new Array(w+1),_=0;_<w;_++)T[_]=b[_]-S;return T[w]=b[w-1]+S,T}function r(b){for(var S=new Array(b),w=0;w<b;w++)S[w]=[];return S}var f={text:"tx",hovertext:"htx"};function u(b,S,w){for(var T in f)p.isArrayOrTypedArray(S[T])&&(Array.isArray(w)?p.isArrayOrTypedArray(S[T][w[0]])&&(b[f[T]]=S[T][w[0]][w[1]]):b[f[T]]=S[T][w])}function s(b,S){if(p.isArrayOrTypedArray(S.selectedpoints))for(var w=0;w<b.length;w++){for(var T=b[w].pts||[],_={},v=0;v<T.length;v++)_[T[v].i]=v;p.tagSelected(T,S,_)}}function h(b,S){return b.v-S.v}function d(b){return b.v}function y(b,S,w){return w===0?b.q1:Math.min(b.q1,S[Math.min(p.findBin(2.5*b.q1-1.5*b.q3,S,!0)+1,w-1)])}function m(b,S,w){return w===0?b.q3:Math.max(b.q3,S[Math.max(p.findBin(2.5*b.q3-1.5*b.q1,S),0)])}function g(b){return 4*b.q1-3*b.q3}function x(b){return 4*b.q3-3*b.q1}function A(b,S){return S===0?0:1.57*(b.q3-b.q1)/Math.sqrt(S)}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"fast-isnumeric":190}],675:[function(e,k,z){var l=e("../../plots/cartesian/axes"),o=e("../../lib"),c=e("../../plots/cartesian/constraints").getAxisGroup,p=["v","h"];function t(a,i){for(var r=a.calcdata,f=i.xaxis,u=i.yaxis,s=0;s<p.length;s++){for(var h=p[s],d=h==="h"?u:f,y=[],m=0;m<r.length;m++){var g=r[m],x=g[0].t,A=g[0].trace;A.visible===!0&&(A.type==="box"||A.type==="candlestick")&&!x.empty&&(A.orientation||"v")===h&&A.xaxis===f._id&&A.yaxis===u._id&&y.push(m)}n("box",a,y,d)}}function n(a,i,r,f){var u=i.calcdata,s=i._fullLayout,h=f._id,d=h.charAt(0),y,m,g,x=[],A=0;for(y=0;y<r.length;y++)for(g=u[r[y]],m=0;m<g.length;m++)x.push(f.c2l(g[m].pos,!0)),A+=(g[m].pts2||[]).length;if(!!x.length){var b=o.distinctVals(x);(f.type==="category"||f.type==="multicategory")&&(b.minDiff=1);var S=b.minDiff/2;l.minDtick(f,b.minDiff,b.vals[0],!0);var w=a==="violin"?"_numViolins":"_numBoxes",T=s[w],_=s[a+"mode"]==="group"&&T>1,v=1-s[a+"gap"],P=1-s[a+"groupgap"];for(y=0;y<r.length;y++){g=u[r[y]];var M=g[0].trace,E=g[0].t,D=M.width,N=M.side,O,I,F,V;if(D)O=I=V=D/2,F=0;else if(O=S,_){var U=c(s,f._id)+M.orientation,j=s._alignmentOpts[U]||{},Z=j[M.alignmentgroup]||{},te=Object.keys(Z.offsetGroups||{}).length,re=te||T,W=te?M._offsetIndex:E.num;I=O*v*P/re,F=2*O*(-.5+(W+.5)/re)*v,V=O*v/re}else I=O*v*P,F=0,V=O;E.dPos=O,E.bPos=F,E.bdPos=I,E.wHover=V;var J,le,ue=F+I,se,G,Y,ee,$,K,Q=Boolean(D),ae=(M.boxpoints||M.points)&&A>0;if(N==="positive"?(J=O*(D?1:.5),se=ue,le=se=F):N==="negative"?(J=se=F,le=O*(D?1:.5),G=ue):(J=le=O,se=G=ue),ae){var ie=M.pointpos,oe=M.jitter,fe=M.marker.size/2,ye=0;ie+oe>=0&&(ye=ue*(ie+oe),ye>J?(Q=!0,$=fe,Y=ye):ye>se&&($=fe,Y=J)),ye<=J&&(Y=J);var ce=0;ie-oe<=0&&(ce=-ue*(ie-oe),ce>le?(Q=!0,K=fe,ee=ce):ce>G&&(K=fe,ee=le)),ce<=le&&(ee=le)}else Y=J,ee=le;var me=new Array(g.length);for(m=0;m<g.length;m++)me[m]=g[m].pos;M._extremes[h]=l.findExtremes(f,me,{padded:Q,vpadminus:ee,vpadplus:Y,vpadLinearized:!0,ppadminus:{x:K,y:$}[d],ppadplus:{x:$,y:K}[d]})}}}k.exports={crossTraceCalc:t,setPositionOffset:n}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562}],676:[function(e,k,z){var l=e("../../lib"),o=e("../../registry"),c=e("../../components/color"),p=e("../scatter/period_defaults"),t=e("../bar/defaults").handleGroupingDefaults,n=e("../../plots/cartesian/axis_autotype"),a=e("./attributes");function i(s,h,d,y){function m(_,v){return l.coerce(s,h,a,_,v)}if(r(s,h,m,y),h.visible!==!1){p(s,h,y,m),m("xhoverformat"),m("yhoverformat");var g=h._hasPreCompStats;g&&(m("lowerfence"),m("upperfence")),m("line.color",(s.marker||{}).color||d),m("line.width"),m("fillcolor",c.addOpacity(h.line.color,.5));var x=!1;if(g){var A=m("mean"),b=m("sd");A&&A.length&&(x=!0,b&&b.length&&(x="sd"))}m("boxmean",x),m("whiskerwidth"),m("width"),m("quartilemethod");var S=!1;if(g){var w=m("notchspan");w&&w.length&&(S=!0)}else l.validate(s.notchwidth,a.notchwidth)&&(S=!0);var T=m("notched",S);T&&m("notchwidth"),f(s,h,m,{prefix:"box"})}}function r(s,h,d,y){function m(te){var re=0;return te&&te.length&&(re+=1,l.isArrayOrTypedArray(te[0])&&te[0].length&&(re+=1)),re}function g(te){return l.validate(s[te],a[te])}var x=d("y"),A=d("x"),b;if(h.type==="box"){var S=d("q1"),w=d("median"),T=d("q3");h._hasPreCompStats=S&&S.length&&w&&w.length&&T&&T.length,b=Math.min(l.minRowLength(S),l.minRowLength(w),l.minRowLength(T))}var _=m(x),v=m(A),P=_&&l.minRowLength(x),M=v&&l.minRowLength(A),E=y.calendar,D={autotypenumbers:y.autotypenumbers},N,O;if(h._hasPreCompStats)switch(String(v)+String(_)){case"00":var I=g("x0")||g("dx"),F=g("y0")||g("dy");F&&!I?N="h":N="v",O=b;break;case"10":N="v",O=Math.min(b,M);break;case"20":N="h",O=Math.min(b,A.length);break;case"01":N="h",O=Math.min(b,P);break;case"02":N="v",O=Math.min(b,x.length);break;case"12":N="v",O=Math.min(b,M,x.length);break;case"21":N="h",O=Math.min(b,A.length,P);break;case"11":O=0;break;case"22":var V=!1,U;for(U=0;U<A.length;U++)if(n(A[U],E,D)==="category"){V=!0;break}if(V)N="v",O=Math.min(b,M,x.length);else{for(U=0;U<x.length;U++)if(n(x[U],E,D)==="category"){V=!0;break}V?(N="h",O=Math.min(b,A.length,P)):(N="v",O=Math.min(b,M,x.length))}break}else _>0?(N="v",v>0?O=Math.min(M,P):O=Math.min(P)):v>0?(N="h",O=Math.min(M)):O=0;if(!O){h.visible=!1;return}h._length=O;var j=d("orientation",N);h._hasPreCompStats?j==="v"&&v===0?(d("x0",0),d("dx",1)):j==="h"&&_===0&&(d("y0",0),d("dy",1)):j==="v"&&v===0?d("x0"):j==="h"&&_===0&&d("y0");var Z=o.getComponentMethod("calendars","handleTraceDefaults");Z(s,h,["x","y"],y)}function f(s,h,d,y){var m=y.prefix,g=l.coerce2(s,h,a,"marker.outliercolor"),x=d("marker.line.outliercolor"),A="outliers";h._hasPreCompStats?A="all":(g||x)&&(A="suspectedoutliers");var b=d(m+"points",A);b?(d("jitter",b==="all"?.3:0),d("pointpos",b==="all"?-1.5:0),d("marker.symbol"),d("marker.opacity"),d("marker.size"),d("marker.color",h.line.color),d("marker.line.color"),d("marker.line.width"),b==="suspectedoutliers"&&(d("marker.line.outliercolor",h.marker.color),d("marker.line.outlierwidth")),d("selected.marker.color"),d("unselected.marker.color"),d("selected.marker.size"),d("unselected.marker.size"),d("text"),d("hovertext")):delete h.marker;var S=d("hoveron");(S==="all"||S.indexOf("points")!==-1)&&d("hovertemplate"),l.coerceSelectionMarkerOpacity(h,d)}function u(s,h){var d,y;function m(A){return l.coerce(y._input,y,a,A)}for(var g=0;g<s.length;g++){y=s[g];var x=y.type;(x==="box"||x==="violin")&&(d=y._input,h[x+"mode"]==="group"&&t(d,y,h,m))}}k.exports={supplyDefaults:i,crossTraceDefaults:u,handleSampleDefaults:r,handlePointsDefaults:f}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../registry":638,"../bar/defaults":652,"../scatter/period_defaults":946,"./attributes":673}],677:[function(e,k,z){k.exports=function(o,c){return c.hoverOnBox&&(o.hoverOnBox=c.hoverOnBox),"xVal"in c&&(o.x=c.xVal),"yVal"in c&&(o.y=c.yVal),c.xa&&(o.xaxis=c.xa),c.ya&&(o.yaxis=c.ya),o}},{}],678:[function(e,k,z){var l=e("../../plots/cartesian/axes"),o=e("../../lib"),c=e("../../components/fx"),p=e("../../components/color"),t=o.fillText;function n(r,f,u,s){var h=r.cd,d=h[0].trace,y=d.hoveron,m=[],g;return y.indexOf("boxes")!==-1&&(m=m.concat(a(r,f,u,s))),y.indexOf("points")!==-1&&(g=i(r,f,u)),s==="closest"?g?[g]:m:(g&&m.push(g),m)}function a(r,f,u,s){var h=r.cd,d=r.xa,y=r.ya,m=h[0].trace,g=h[0].t,x=m.type==="violin",A=[],b,S,w,T,_,v,P,M,E,D,N,O=g.bdPos,I,F,V=g.wHover,U=function(ae){return w.c2l(ae.pos)+g.bPos-w.c2l(v)};x&&m.side!=="both"?(m.side==="positive"&&(E=function(ae){var ie=U(ae);return c.inbox(ie,ie+V,D)},I=O,F=0),m.side==="negative"&&(E=function(ae){var ie=U(ae);return c.inbox(ie-V,ie,D)},I=0,F=O)):(E=function(ae){var ie=U(ae);return c.inbox(ie-V,ie+V,D)},I=F=O);var j;x?j=function(ae){return c.inbox(ae.span[0]-_,ae.span[1]-_,D)}:j=function(ae){return c.inbox(ae.min-_,ae.max-_,D)},m.orientation==="h"?(_=f,v=u,P=j,M=E,b="y",w=y,S="x",T=d):(_=u,v=f,P=E,M=j,b="x",w=d,S="y",T=y);var Z=Math.min(1,O/Math.abs(w.r2c(w.range[1])-w.r2c(w.range[0])));D=r.maxHoverDistance-Z,N=r.maxSpikeDistance-Z;function te(ae){return(P(ae)+M(ae))/2}var re=c.getDistanceFunction(s,P,M,te);if(c.getClosest(h,re,r),r.index===!1)return[];var W=h[r.index],J=m.line.color,le=(m.marker||{}).color;p.opacity(J)&&m.line.width?r.color=J:p.opacity(le)&&m.boxpoints?r.color=le:r.color=m.fillcolor,r[b+"0"]=w.c2p(W.pos+g.bPos-F,!0),r[b+"1"]=w.c2p(W.pos+g.bPos+I,!0),r[b+"LabelVal"]=W.orig_p!==void 0?W.orig_p:W.pos;var ue=b+"Spike";r.spikeDistance=te(W)*N/D,r[ue]=w.c2p(W.pos,!0);var se={},G=["med","q1","q3","min","max"];(m.boxmean||(m.meanline||{}).visible)&&G.push("mean"),(m.boxpoints||m.points)&&G.push("lf","uf");for(var Y=0;Y<G.length;Y++){var ee=G[Y];if(!(!(ee in W)||W[ee]in se)){se[W[ee]]=!0;var $=W[ee],K=T.c2p($,!0),Q=o.extendFlat({},r);Q.attr=ee,Q[S+"0"]=Q[S+"1"]=K,Q[S+"LabelVal"]=$,Q[S+"Label"]=(g.labels?g.labels[ee]+" ":"")+l.hoverLabelText(T,$,m[S+"hoverformat"]),Q.hoverOnBox=!0,ee==="mean"&&"sd"in W&&m.boxmean==="sd"&&(Q[S+"err"]=W.sd),r.name="",r.spikeDistance=void 0,r[ue]=void 0,Q.hovertemplate=!1,A.push(Q)}}return A}function i(r,f,u){for(var s=r.cd,h=r.xa,d=r.ya,y=s[0].trace,m=h.c2p(f),g=d.c2p(u),x,A=function(U){var j=Math.max(3,U.mrc||0);return Math.max(Math.abs(h.c2p(U.x)-m)-j,1-3/j)},b=function(U){var j=Math.max(3,U.mrc||0);return Math.max(Math.abs(d.c2p(U.y)-g)-j,1-3/j)},S=c.quadrature(A,b),w=!1,T,_,v=0;v<s.length;v++){T=s[v];for(var P=0;P<(T.pts||[]).length;P++){_=T.pts[P];var M=S(_);M<=r.distance&&(r.distance=M,w=[v,P])}}if(!w)return!1;T=s[w[0]],_=T.pts[w[1]];var E=h.c2p(_.x,!0),D=d.c2p(_.y,!0),N=_.mrc||1;x=o.extendFlat({},r,{index:_.i,color:(y.marker||{}).color,name:y.name,x0:E-N,x1:E+N,y0:D-N,y1:D+N,spikeDistance:r.distance,hovertemplate:y.hovertemplate});var O=T.orig_p,I=O!==void 0?O:T.pos,F;y.orientation==="h"?(F=d,x.xLabelVal=_.x,x.yLabelVal=I):(F=h,x.xLabelVal=I,x.yLabelVal=_.y);var V=F._id.charAt(0);return x[V+"Spike"]=F.c2p(T.pos,!0),t(_,y,x),x}k.exports={hoverPoints:n,hoverOnBoxes:a,hoverOnPoints:i}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],679:[function(e,k,z){k.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults").supplyLayoutDefaults,calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"box",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./attributes":673,"./calc":674,"./cross_trace_calc":675,"./defaults":676,"./event_data":677,"./hover":678,"./layout_attributes":680,"./layout_defaults":681,"./plot":682,"./select":683,"./style":684}],680:[function(e,k,z){k.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],681:[function(e,k,z){var l=e("../../registry"),o=e("../../lib"),c=e("./layout_attributes");function p(n,a,i,r,f){for(var u=f+"Layout",s=!1,h=0;h<i.length;h++){var d=i[h];if(l.traceIs(d,u)){s=!0;break}}!s||(r(f+"mode"),r(f+"gap"),r(f+"groupgap"))}function t(n,a,i){function r(f,u){return o.coerce(n,a,c,f,u)}p(n,a,i,r,"box")}k.exports={supplyLayoutDefaults:t,_supply:p}},{"../../lib":503,"../../registry":638,"./layout_attributes":680}],682:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../lib"),c=e("../../components/drawing"),p=5,t=.01;function n(f,u,s,h){var d=u.xaxis,y=u.yaxis;o.makeTraceGroups(h,s,"trace boxes").each(function(m){var g=l.select(this),x=m[0],A=x.t,b=x.trace;if(A.wdPos=A.bdPos*b.whiskerwidth,b.visible!==!0||A.empty){g.remove();return}var S,w;b.orientation==="h"?(S=y,w=d):(S=d,w=y),a(g,{pos:S,val:w},b,A),i(g,{x:d,y},b,A),r(g,{pos:S,val:w},b,A)})}function a(f,u,s,h){var d=s.orientation==="h",y=u.val,m=u.pos,g=!!m.rangebreaks,x=h.bPos,A=h.wdPos||0,b=h.bPosPxOffset||0,S=s.whiskerwidth||0,w=s.notched||!1,T=w?1-2*s.notchwidth:1,_,v;Array.isArray(h.bdPos)?(_=h.bdPos[0],v=h.bdPos[1]):(_=h.bdPos,v=h.bdPos);var P=f.selectAll("path.box").data(s.type!=="violin"||s.box.visible?o.identity:[]);P.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),P.exit().remove(),P.each(function(M){if(M.empty)return"M0,0Z";var E=m.c2l(M.pos+x,!0),D=m.l2p(E-_)+b,N=m.l2p(E+v)+b,O=g?(D+N)/2:m.l2p(E)+b,I=s.whiskerwidth,F=g?D*I+(1-I)*O:m.l2p(E-A)+b,V=g?N*I+(1-I)*O:m.l2p(E+A)+b,U=m.l2p(E-_*T)+b,j=m.l2p(E+v*T)+b,Z=y.c2p(M.q1,!0),te=y.c2p(M.q3,!0),re=o.constrain(y.c2p(M.med,!0),Math.min(Z,te)+1,Math.max(Z,te)-1),W=M.lf===void 0||s.boxpoints===!1,J=y.c2p(W?M.min:M.lf,!0),le=y.c2p(W?M.max:M.uf,!0),ue=y.c2p(M.ln,!0),se=y.c2p(M.un,!0);d?l.select(this).attr("d","M"+re+","+U+"V"+j+"M"+Z+","+D+"V"+N+(w?"H"+ue+"L"+re+","+j+"L"+se+","+N:"")+"H"+te+"V"+D+(w?"H"+se+"L"+re+","+U+"L"+ue+","+D:"")+"ZM"+Z+","+O+"H"+J+"M"+te+","+O+"H"+le+(S===0?"":"M"+J+","+F+"V"+V+"M"+le+","+F+"V"+V)):l.select(this).attr("d","M"+U+","+re+"H"+j+"M"+D+","+Z+"H"+N+(w?"V"+ue+"L"+j+","+re+"L"+N+","+se:"")+"V"+te+"H"+D+(w?"V"+se+"L"+U+","+re+"L"+D+","+ue:"")+"ZM"+O+","+Z+"V"+J+"M"+O+","+te+"V"+le+(S===0?"":"M"+F+","+J+"H"+V+"M"+F+","+le+"H"+V))})}function i(f,u,s,h){var d=u.x,y=u.y,m=h.bdPos,g=h.bPos,x=s.boxpoints||s.points;o.seedPseudoRandom();var A=function(w){return w.forEach(function(T){T.t=h,T.trace=s}),w},b=f.selectAll("g.points").data(x?A:[]);b.enter().append("g").attr("class","points"),b.exit().remove();var S=b.selectAll("path").data(function(w){var T,_=w.pts2,v=Math.max((w.max-w.min)/10,w.q3-w.q1),P=v*1e-9,M=v*t,E=[],D=0,N;if(s.jitter){if(v===0)for(D=1,E=new Array(_.length),T=0;T<_.length;T++)E[T]=1;else for(T=0;T<_.length;T++){var O=Math.max(0,T-p),I=_[O].v,F=Math.min(_.length-1,T+p),V=_[F].v;x!=="all"&&(_[T].v<w.lf?V=Math.min(V,w.lf):I=Math.max(I,w.uf));var U=Math.sqrt(M*(F-O)/(V-I+P))||0;U=o.constrain(Math.abs(U),0,1),E.push(U),D=Math.max(U,D)}N=s.jitter*2/(D||1)}for(T=0;T<_.length;T++){var j=_[T],Z=j.v,te=s.jitter?N*E[T]*(o.pseudoRandom()-.5):0,re=w.pos+g+m*(s.pointpos+te);s.orientation==="h"?(j.y=re,j.x=Z):(j.x=re,j.y=Z),x==="suspectedoutliers"&&Z<w.uo&&Z>w.lo&&(j.so=!0)}return _});S.enter().append("path").classed("point",!0),S.exit().remove(),S.call(c.translatePoints,d,y)}function r(f,u,s,h){var d=u.val,y=u.pos,m=!!y.rangebreaks,g=h.bPos,x=h.bPosPxOffset||0,A=s.boxmean||(s.meanline||{}).visible,b,S;Array.isArray(h.bdPos)?(b=h.bdPos[0],S=h.bdPos[1]):(b=h.bdPos,S=h.bdPos);var w=f.selectAll("path.mean").data(s.type==="box"&&s.boxmean||s.type==="violin"&&s.box.visible&&s.meanline.visible?o.identity:[]);w.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),w.exit().remove(),w.each(function(T){var _=y.c2l(T.pos+g,!0),v=y.l2p(_-b)+x,P=y.l2p(_+S)+x,M=m?(v+P)/2:y.l2p(_)+x,E=d.c2p(T.mean,!0),D=d.c2p(T.mean-T.sd,!0),N=d.c2p(T.mean+T.sd,!0);s.orientation==="h"?l.select(this).attr("d","M"+E+","+v+"V"+P+(A==="sd"?"m0,0L"+D+","+M+"L"+E+","+v+"L"+N+","+M+"Z":"")):l.select(this).attr("d","M"+v+","+E+"H"+P+(A==="sd"?"m0,0L"+M+","+D+"L"+v+","+E+"L"+M+","+N+"Z":""))})}k.exports={plot:n,plotBoxAndWhiskers:a,plotPoints:i,plotBoxMean:r}},{"../../components/drawing":388,"../../lib":503,"@plotly/d3":58}],683:[function(e,k,z){k.exports=function(o,c){var p=o.cd,t=o.xaxis,n=o.yaxis,a=[],i,r;if(c===!1)for(i=0;i<p.length;i++)for(r=0;r<(p[i].pts||[]).length;r++)p[i].pts[r].selected=0;else for(i=0;i<p.length;i++)for(r=0;r<(p[i].pts||[]).length;r++){var f=p[i].pts[r],u=t.c2p(f.x),s=n.c2p(f.y);c.contains([u,s],null,f.i,o)?(a.push({pointNumber:f.i,x:t.c2d(f.x),y:n.c2d(f.y)}),f.selected=1):f.selected=0}return a}},{}],684:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../components/color"),c=e("../../components/drawing");function p(n,a,i){var r=i||l.select(n).selectAll("g.trace.boxes");r.style("opacity",function(f){return f[0].trace.opacity}),r.each(function(f){var u=l.select(this),s=f[0].trace,h=s.line.width;function d(g,x,A,b){g.style("stroke-width",x+"px").call(o.stroke,A).call(o.fill,b)}var y=u.selectAll("path.box");if(s.type==="candlestick")y.each(function(g){if(!g.empty){var x=l.select(this),A=s[g.dir];d(x,A.line.width,A.line.color,A.fillcolor),x.style("opacity",s.selectedpoints&&!g.selected?.3:1)}});else{d(y,h,s.line.color,s.fillcolor),u.selectAll("path.mean").style({"stroke-width":h,"stroke-dasharray":2*h+"px,"+h+"px"}).call(o.stroke,s.line.color);var m=u.selectAll("path.point");c.pointStyle(m,s,n)}})}function t(n,a,i){var r=a[0].trace,f=i.selectAll("path.point");r.selectedpoints?c.selectedPointStyle(f,r):c.pointStyle(f,r,n)}k.exports={style:p,styleOnSelect:t}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],685:[function(e,k,z){var l=e("../../lib").extendFlat,o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,c=e("../ohlc/attributes"),p=e("../box/attributes");function t(n){return{line:{color:l({},p.line.color,{dflt:n}),width:p.line.width,editType:"style"},fillcolor:p.fillcolor,editType:"style"}}k.exports={xperiod:c.xperiod,xperiod0:c.xperiod0,xperiodalignment:c.xperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),x:c.x,open:c.open,high:c.high,low:c.low,close:c.close,line:{width:l({},p.line.width,{}),editType:"style"},increasing:t(c.increasing.line.color.dflt),decreasing:t(c.decreasing.line.color.dflt),text:c.text,hovertext:c.hovertext,whiskerwidth:l({},p.whiskerwidth,{dflt:0}),hoverlabel:c.hoverlabel}},{"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673,"../ohlc/attributes":872}],686:[function(e,k,z){var l=e("../../lib"),o=e("../../plots/cartesian/axes"),c=e("../../plots/cartesian/align_period"),p=e("../ohlc/calc").calcCommon;k.exports=function(n,a){var i=n._fullLayout,r=o.getFromId(n,a.xaxis),f=o.getFromId(n,a.yaxis),u=r.makeCalcdata(a,"x"),s=c(a,r,"x",u).vals,h=p(n,a,u,s,f,t);return h.length?(l.extendFlat(h[0].t,{num:i._numBoxes,dPos:l.distinctVals(s).minDiff/2,posLetter:"x",valLetter:"y"}),i._numBoxes++,h):[{t:{empty:!0}}]};function t(n,a,i,r){return{min:i,q1:Math.min(n,r),med:r,q3:Math.max(n,r),max:a}}},{"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../ohlc/calc":873}],687:[function(e,k,z){var l=e("../../lib"),o=e("../../components/color"),c=e("../ohlc/ohlc_defaults"),p=e("../scatter/period_defaults"),t=e("./attributes");k.exports=function(i,r,f,u){function s(d,y){return l.coerce(i,r,t,d,y)}var h=c(i,r,s,u);if(!h){r.visible=!1;return}p(i,r,u,s,{x:!0}),s("xhoverformat"),s("yhoverformat"),s("line.width"),n(i,r,s,"increasing"),n(i,r,s,"decreasing"),s("text"),s("hovertext"),s("whiskerwidth"),u._requestRangeslider[r.xaxis]=!0};function n(a,i,r,f){var u=r(f+".line.color");r(f+".line.width",i.line.width),r(f+".fillcolor",o.addOpacity(u,.5))}},{"../../components/color":366,"../../lib":503,"../ohlc/ohlc_defaults":877,"../scatter/period_defaults":946,"./attributes":685}],688:[function(e,k,z){k.exports={moduleType:"trace",name:"candlestick",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e("./attributes"),layoutAttributes:e("../box/layout_attributes"),supplyLayoutDefaults:e("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:e("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("../box/plot").plot,layerName:"boxlayer",style:e("../box/style").style,hoverPoints:e("../ohlc/hover").hoverPoints,selectPoints:e("../ohlc/select")}},{"../../plots/cartesian":568,"../box/cross_trace_calc":675,"../box/layout_attributes":680,"../box/layout_defaults":681,"../box/plot":682,"../box/style":684,"../ohlc/hover":875,"../ohlc/select":879,"./attributes":685,"./calc":686,"./defaults":687}],689:[function(e,k,z){var l=e("./axis_defaults"),o=e("../../plot_api/plot_template");k.exports=function(t,n,a,i,r){var f=i("a");f||(i("da"),i("a0"));var u=i("b");u||(i("db"),i("b0")),c(t,n,a,r)};function c(p,t,n,a){var i=["aaxis","baxis"];i.forEach(function(r){var f=r.charAt(0),u=p[r]||{},s=o.newContainer(t,r),h={tickfont:"x",id:f+"axis",letter:f,font:t.font,name:r,data:p[f],calendar:t.calendar,dfltColor:a,bgColor:n.paper_bgcolor,autotypenumbersDflt:n.autotypenumbers,fullLayout:n};l(u,s,h),s._categories=s._categories||[],!p[r]&&u.type!=="-"&&(p[r]={type:u.type})})}},{"../../plot_api/plot_template":543,"./axis_defaults":694}],690:[function(e,k,z){var l=e("../../lib").isArrayOrTypedArray;k.exports=function(c){return o(c,0)};function o(c,p){if(!l(c)||p>=10)return null;for(var t=1/0,n=-1/0,a=c.length,i=0;i<a;i++){var r=c[i];if(l(r)){var f=o(r,p+1);f&&(t=Math.min(f[0],t),n=Math.max(f[1],n))}else t=Math.min(r,t),n=Math.max(r,n)}return[t,n]}},{"../../lib":503}],691:[function(e,k,z){var l=e("../../plots/font_attributes"),o=e("./axis_attributes"),c=e("../../components/color/attributes"),p=l({editType:"calc"});p.family.dflt='"Open Sans", verdana, arial, sans-serif',p.size.dflt=12,p.color.dflt=c.defaultLine,k.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:o,baxis:o,font:p,color:{valType:"color",dflt:c.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":365,"../../plots/font_attributes":585,"./axis_attributes":693}],692:[function(e,k,z){var l=e("../../lib").isArrayOrTypedArray;k.exports=function(o,c,p,t){var n,a,i,r,f,u,s,h,d,y,m,g,x,A=l(p)?"a":"b",b=A==="a"?o.aaxis:o.baxis,S=b.smoothing,w=A==="a"?o.a2i:o.b2j,T=A==="a"?p:t,_=A==="a"?t:p,v=A==="a"?c.a.length:c.b.length,P=A==="a"?c.b.length:c.a.length,M=Math.floor(A==="a"?o.b2j(_):o.a2i(_)),E=A==="a"?function(W){return o.evalxy([],W,M)}:function(W){return o.evalxy([],M,W)};S&&(i=Math.max(0,Math.min(P-2,M)),r=M-i,a=A==="a"?function(W,J){return o.dxydi([],W,i,J,r)}:function(W,J){return o.dxydj([],i,W,r,J)});var D=w(T[0]),N=w(T[1]),O=D<N?1:-1,I=(N-D)*1e-8,F=O>0?Math.floor:Math.ceil,V=O>0?Math.ceil:Math.floor,U=O>0?Math.min:Math.max,j=O>0?Math.max:Math.min,Z=F(D+I),te=V(N-I);s=E(D);var re=[[s]];for(n=Z;n*O<te*O;n+=O)f=[],m=j(D,n),g=U(N,n+O),x=g-m,u=Math.max(0,Math.min(v-2,Math.floor(.5*(m+g)))),h=E(g),S&&(d=a(u,m-u),y=a(u,g-u),f.push([s[0]+d[0]/3*x,s[1]+d[1]/3*x]),f.push([h[0]-y[0]/3*x,h[1]-y[1]/3*x])),f.push(h),re.push(f),s=h;return re}},{"../../lib":503}],693:[function(e,k,z){var l=e("../../plots/font_attributes"),o=e("../../components/color/attributes"),c=e("../../plots/cartesian/layout_attributes"),p=e("../../plots/cartesian/axis_format_attributes").descriptionWithDates,t=e("../../plot_api/edit_types").overrideAll;k.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:l({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:c.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:l({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:p("tick label")},tickformatstops:t(c.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:o.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:o.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:l({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":365,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],694:[function(e,k,z){var l=e("./attributes"),o=e("../../components/color").addOpacity,c=e("../../registry"),p=e("../../lib"),t=e("../../plots/cartesian/tick_value_defaults"),n=e("../../plots/cartesian/tick_label_defaults"),a=e("../../plots/cartesian/prefix_suffix_defaults"),i=e("../../plots/cartesian/category_order_defaults"),r=e("../../plots/cartesian/set_convert"),f=e("../../plots/cartesian/axis_autotype");k.exports=function(h,d,y){var m=y.letter,g=y.font||{},x=l[m+"axis"];function A(j,Z){return p.coerce(h,d,x,j,Z)}function b(j,Z){return p.coerce2(h,d,x,j,Z)}y.name&&(d._name=y.name,d._id=y.name),A("autotypenumbers",y.autotypenumbersDflt);var S=A("type");if(S==="-"&&(y.data&&u(d,y.data),d.type==="-"?d.type="linear":S=h.type=d.type),A("smoothing"),A("cheatertype"),A("showticklabels"),A("labelprefix",m+" = "),A("labelsuffix"),A("showtickprefix"),A("showticksuffix"),A("separatethousands"),A("tickformat"),A("exponentformat"),A("minexponent"),A("showexponent"),A("categoryorder"),A("tickmode"),A("tickvals"),A("ticktext"),A("tick0"),A("dtick"),d.tickmode==="array"&&(A("arraytick0"),A("arraydtick")),A("labelpadding"),d._hovertitle=m,S==="date"){var w=c.getComponentMethod("calendars","handleDefaults");w(h,d,"calendar",y.calendar)}r(d,y.fullLayout),d.c2p=p.identity;var T=A("color",y.dfltColor),_=T===h.color?T:g.color,v=A("title.text");v&&(p.coerceFont(A,"title.font",{family:g.family,size:p.bigFont(g.size),color:_}),A("title.offset")),A("tickangle");var P=A("autorange",!d.isValidRange(h.range));P&&A("rangemode"),A("range"),d.cleanRange(),A("fixedrange"),t(h,d,A,S),a(h,d,A,S,y),n(h,d,A,S,y),i(h,d,A,{data:y.data,dataAttr:m});var M=b("gridcolor",o(T,.3)),E=b("gridwidth"),D=A("showgrid");D||(delete d.gridcolor,delete d.gridwidth);var N=b("startlinecolor",T),O=b("startlinewidth",E),I=A("startline",d.showgrid||!!N||!!O);I||(delete d.startlinecolor,delete d.startlinewidth);var F=b("endlinecolor",T),V=b("endlinewidth",E),U=A("endline",d.showgrid||!!F||!!V);return U||(delete d.endlinecolor,delete d.endlinewidth),D?(A("minorgridcount"),A("minorgridwidth",E),A("minorgridcolor",o(M,.06)),d.minorgridcount||(delete d.minorgridwidth,delete d.minorgridcolor)):(delete d.gridcolor,delete d.gridWidth),d.showticklabels==="none"&&(delete d.tickfont,delete d.tickangle,delete d.showexponent,delete d.exponentformat,delete d.minexponent,delete d.tickformat,delete d.showticksuffix,delete d.showtickprefix),d.showticksuffix||delete d.ticksuffix,d.showtickprefix||delete d.tickprefix,A("tickmode"),d};function u(s,h){if(s.type==="-"){var d=s._id,y=d.charAt(0),m=y+"calendar",g=s[m];s.type=f(h,g,{autotypenumbers:s.autotypenumbers})}}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../plots/cartesian/category_order_defaults":559,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/set_convert":576,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_value_defaults":580,"../../registry":638,"./attributes":691}],695:[function(e,k,z){var l=e("../../plots/cartesian/axes"),o=e("../../lib").isArray1D,c=e("./cheater_basis"),p=e("./array_minmax"),t=e("./calc_gridlines"),n=e("./calc_labels"),a=e("./calc_clippath"),i=e("../heatmap/clean_2d_array"),r=e("./smooth_fill_2d_array"),f=e("../heatmap/convert_column_xyz"),u=e("./set_convert");k.exports=function(h,d){var y=l.getFromId(h,d.xaxis),m=l.getFromId(h,d.yaxis),g=d.aaxis,x=d.baxis,A=d.x,b=d.y,S=[];A&&o(A)&&S.push("x"),b&&o(b)&&S.push("y"),S.length&&f(d,g,x,"a","b",S);var w=d._a=d._a||d.a,T=d._b=d._b||d.b;A=d._x||d.x,b=d._y||d.y;var _={};if(d._cheater){var v=g.cheatertype==="index"?w.length:w,P=x.cheatertype==="index"?T.length:T;A=c(v,P,d.cheaterslope)}d._x=A=i(A),d._y=b=i(b),r(A,w,T),r(b,w,T),u(d),d.setScale();var M=p(A),E=p(b),D=.5*(M[1]-M[0]),N=.5*(M[1]+M[0]),O=.5*(E[1]-E[0]),I=.5*(E[1]+E[0]),F=1.3;return M=[N-D*F,N+D*F],E=[I-O*F,I+O*F],d._extremes[y._id]=l.findExtremes(y,M,{padded:!0}),d._extremes[m._id]=l.findExtremes(m,E,{padded:!0}),t(d,"a","b"),t(d,"b","a"),n(d,g),n(d,x),_.clipsegments=a(d._xctrl,d._yctrl,g,x),_.x=A,_.y=b,_.a=w,_.b=T,[_]}},{"../../lib":503,"../../plots/cartesian/axes":554,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"./array_minmax":690,"./calc_clippath":696,"./calc_gridlines":697,"./calc_labels":698,"./cheater_basis":700,"./set_convert":713,"./smooth_fill_2d_array":714}],696:[function(e,k,z){k.exports=function(o,c,p,t){var n,a,i,r=[],f=!!p.smoothing,u=!!t.smoothing,s=o[0].length-1,h=o.length-1;for(n=0,a=[],i=[];n<=s;n++)a[n]=o[0][n],i[n]=c[0][n];for(r.push({x:a,y:i,bicubic:f}),n=0,a=[],i=[];n<=h;n++)a[n]=o[n][s],i[n]=c[n][s];for(r.push({x:a,y:i,bicubic:u}),n=s,a=[],i=[];n>=0;n--)a[s-n]=o[h][n],i[s-n]=c[h][n];for(r.push({x:a,y:i,bicubic:f}),n=h,a=[],i=[];n>=0;n--)a[h-n]=o[n][0],i[h-n]=c[n][0];return r.push({x:a,y:i,bicubic:u}),r}},{}],697:[function(e,k,z){var l=e("../../plots/cartesian/axes"),o=e("../../lib/extend").extendFlat;k.exports=function(p,t,n){var a,i,r,f,u,s,h,d,y,m,g,x,A,b,S=p["_"+t],w=p[t+"axis"],T=w._gridlines=[],_=w._minorgridlines=[],v=w._boundarylines=[],P=p["_"+n],M=p[n+"axis"];w.tickmode==="array"&&(w.tickvals=S.slice());var E=p._xctrl,D=p._yctrl,N=E[0].length,O=E.length,I=p._a.length,F=p._b.length;l.prepTicks(w),w.tickmode==="array"&&delete w.tickvals;var V=w.smoothing?3:1;function U(Z){var te,re,W,J,le,ue,se,G,Y,ee,$,K,Q=[],ae=[],ie={};if(t==="b")for(re=p.b2j(Z),W=Math.floor(Math.max(0,Math.min(F-2,re))),J=re-W,ie.length=F,ie.crossLength=I,ie.xy=function(oe){return p.evalxy([],oe,re)},ie.dxy=function(oe,fe){return p.dxydi([],oe,W,fe,J)},te=0;te<I;te++)ue=Math.min(I-2,te),se=te-ue,G=p.evalxy([],te,re),M.smoothing&&te>0&&(Y=p.dxydi([],te-1,W,0,J),Q.push(le[0]+Y[0]/3),ae.push(le[1]+Y[1]/3),ee=p.dxydi([],te-1,W,1,J),Q.push(G[0]-ee[0]/3),ae.push(G[1]-ee[1]/3)),Q.push(G[0]),ae.push(G[1]),le=G;else for(te=p.a2i(Z),ue=Math.floor(Math.max(0,Math.min(I-2,te))),se=te-ue,ie.length=I,ie.crossLength=F,ie.xy=function(oe){return p.evalxy([],te,oe)},ie.dxy=function(oe,fe){return p.dxydj([],ue,oe,se,fe)},re=0;re<F;re++)W=Math.min(F-2,re),J=re-W,G=p.evalxy([],te,re),M.smoothing&&re>0&&($=p.dxydj([],ue,re-1,se,0),Q.push(le[0]+$[0]/3),ae.push(le[1]+$[1]/3),K=p.dxydj([],ue,re-1,se,1),Q.push(G[0]-K[0]/3),ae.push(G[1]-K[1]/3)),Q.push(G[0]),ae.push(G[1]),le=G;return ie.axisLetter=t,ie.axis=w,ie.crossAxis=M,ie.value=Z,ie.constvar=n,ie.index=d,ie.x=Q,ie.y=ae,ie.smoothing=M.smoothing,ie}function j(Z){var te,re,W,J,le,ue=[],se=[],G={};if(G.length=S.length,G.crossLength=P.length,t==="b")for(W=Math.max(0,Math.min(F-2,Z)),le=Math.min(1,Math.max(0,Z-W)),G.xy=function(Y){return p.evalxy([],Y,Z)},G.dxy=function(Y,ee){return p.dxydi([],Y,W,ee,le)},te=0;te<N;te++)ue[te]=E[Z*V][te],se[te]=D[Z*V][te];else for(re=Math.max(0,Math.min(I-2,Z)),J=Math.min(1,Math.max(0,Z-re)),G.xy=function(Y){return p.evalxy([],Z,Y)},G.dxy=function(Y,ee){return p.dxydj([],re,Y,J,ee)},te=0;te<O;te++)ue[te]=E[te][Z*V],se[te]=D[te][Z*V];return G.axisLetter=t,G.axis=w,G.crossAxis=M,G.value=S[Z],G.constvar=n,G.index=Z,G.x=ue,G.y=se,G.smoothing=M.smoothing,G}if(w.tickmode==="array"){for(f=5e-15,u=[Math.floor((S.length-1-w.arraytick0)/w.arraydtick*(1+f)),Math.ceil(-w.arraytick0/w.arraydtick/(1+f))].sort(function(Z,te){return Z-te}),s=u[0]-1,h=u[1]+1,d=s;d<h;d++)i=w.arraytick0+w.arraydtick*d,!(i<0||i>S.length-1)&&T.push(o(j(i),{color:w.gridcolor,width:w.gridwidth}));for(d=s;d<h;d++)if(r=w.arraytick0+w.arraydtick*d,g=Math.min(r+w.arraydtick,S.length-1),!(r<0||r>S.length-1)&&!(g<0||g>S.length-1))for(x=S[r],A=S[g],a=0;a<w.minorgridcount;a++)b=g-r,!(b<=0)&&(m=x+(A-x)*(a+1)/(w.minorgridcount+1)*(w.arraydtick/b),!(m<S[0]||m>S[S.length-1])&&_.push(o(U(m),{color:w.minorgridcolor,width:w.minorgridwidth})));w.startline&&v.push(o(j(0),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&v.push(o(j(S.length-1),{color:w.endlinecolor,width:w.endlinewidth}))}else{for(f=5e-15,u=[Math.floor((S[S.length-1]-w.tick0)/w.dtick*(1+f)),Math.ceil((S[0]-w.tick0)/w.dtick/(1+f))].sort(function(Z,te){return Z-te}),s=u[0],h=u[1],d=s;d<=h;d++)y=w.tick0+w.dtick*d,T.push(o(U(y),{color:w.gridcolor,width:w.gridwidth}));for(d=s-1;d<h+1;d++)for(y=w.tick0+w.dtick*d,a=0;a<w.minorgridcount;a++)m=y+w.dtick*(a+1)/(w.minorgridcount+1),!(m<S[0]||m>S[S.length-1])&&_.push(o(U(m),{color:w.minorgridcolor,width:w.minorgridwidth}));w.startline&&v.push(o(U(S[0]),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&v.push(o(U(S[S.length-1]),{color:w.endlinecolor,width:w.endlinewidth}))}}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],698:[function(e,k,z){var l=e("../../plots/cartesian/axes"),o=e("../../lib/extend").extendFlat;k.exports=function(p,t){var n,a,i,r,f,u=t._labels=[],s=t._gridlines;for(n=0;n<s.length;n++)f=s[n],["start","both"].indexOf(t.showticklabels)!==-1&&(a=l.tickText(t,f.value),o(a,{prefix:i,suffix:r,endAnchor:!0,xy:f.xy(0),dxy:f.dxy(0,0),axis:f.axis,length:f.crossAxis.length,font:f.axis.tickfont,isFirst:n===0,isLast:n===s.length-1}),u.push(a)),["end","both"].indexOf(t.showticklabels)!==-1&&(a=l.tickText(t,f.value),o(a,{endAnchor:!1,xy:f.xy(f.crossLength-1),dxy:f.dxy(f.crossLength-2,1),axis:f.axis,length:f.crossAxis.length,font:f.axis.tickfont,isFirst:n===0,isLast:n===s.length-1}),u.push(a))}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],699:[function(e,k,z){var l=.5;k.exports=function(c,p,t,n){var a=c[0]-p[0],i=c[1]-p[1],r=t[0]-p[0],f=t[1]-p[1],u=Math.pow(a*a+i*i,l/2),s=Math.pow(r*r+f*f,l/2),h=(s*s*a-u*u*r)*n,d=(s*s*i-u*u*f)*n,y=s*(u+s)*3,m=u*(u+s)*3;return[[p[0]+(y&&h/y),p[1]+(y&&d/y)],[p[0]-(m&&h/m),p[1]-(m&&d/m)]]}},{}],700:[function(e,k,z){var l=e("../../lib").isArrayOrTypedArray;k.exports=function(o,c,p){var t,n,a,i,r,f,u=[],s=l(o)?o.length:o,h=l(c)?c.length:c,d=l(o)?o:null,y=l(c)?c:null;d&&(a=(d.length-1)/(d[d.length-1]-d[0])/(s-1)),y&&(i=(y.length-1)/(y[y.length-1]-y[0])/(h-1));var m,g=1/0,x=-1/0;for(n=0;n<h;n++)for(u[n]=[],f=y?(y[n]-y[0])*i:n/(h-1),t=0;t<s;t++)r=d?(d[t]-d[0])*a:t/(s-1),m=r-f*p,g=Math.min(m,g),x=Math.max(m,x),u[n][t]=m;var A=1/(x-g),b=-g*A;for(n=0;n<h;n++)for(t=0;t<s;t++)u[n][t]=A*u[n][t]+b;return u}},{"../../lib":503}],701:[function(e,k,z){var l=e("./catmull_rom"),o=e("../../lib").ensureArray;function c(p,t,n){var a=-.5*n[0]+1.5*t[0],i=-.5*n[1]+1.5*t[1];return[(2*a+p[0])/3,(2*i+p[1])/3]}k.exports=function(t,n,a,i,r,f){var u,s,h,d,y,m,g,x,A,b,S=a[0].length,w=a.length,T=r?3*S-2:S,_=f?3*w-2:w;for(t=o(t,_),n=o(n,_),h=0;h<_;h++)t[h]=o(t[h],T),n[h]=o(n[h],T);for(s=0,d=0;s<w;s++,d+=f?3:1)for(y=t[d],m=n[d],g=a[s],x=i[s],u=0,h=0;u<S;u++,h+=r?3:1)y[h]=g[u],m[h]=x[u];if(r)for(s=0,d=0;s<w;s++,d+=f?3:1){for(u=1,h=3;u<S-1;u++,h+=3)A=l([a[s][u-1],i[s][u-1]],[a[s][u],i[s][u]],[a[s][u+1],i[s][u+1]],r),t[d][h-1]=A[0][0],n[d][h-1]=A[0][1],t[d][h+1]=A[1][0],n[d][h+1]=A[1][1];b=c([t[d][0],n[d][0]],[t[d][2],n[d][2]],[t[d][3],n[d][3]]),t[d][1]=b[0],n[d][1]=b[1],b=c([t[d][T-1],n[d][T-1]],[t[d][T-3],n[d][T-3]],[t[d][T-4],n[d][T-4]]),t[d][T-2]=b[0],n[d][T-2]=b[1]}if(f)for(h=0;h<T;h++){for(d=3;d<_-3;d+=3)A=l([t[d-3][h],n[d-3][h]],[t[d][h],n[d][h]],[t[d+3][h],n[d+3][h]],f),t[d-1][h]=A[0][0],n[d-1][h]=A[0][1],t[d+1][h]=A[1][0],n[d+1][h]=A[1][1];b=c([t[0][h],n[0][h]],[t[2][h],n[2][h]],[t[3][h],n[3][h]]),t[1][h]=b[0],n[1][h]=b[1],b=c([t[_-1][h],n[_-1][h]],[t[_-3][h],n[_-3][h]],[t[_-4][h],n[_-4][h]]),t[_-2][h]=b[0],n[_-2][h]=b[1]}if(r&&f)for(d=1;d<_;d+=(d+1)%3==0?2:1){for(h=3;h<T-3;h+=3)A=l([t[d][h-3],n[d][h-3]],[t[d][h],n[d][h]],[t[d][h+3],n[d][h+3]],r),t[d][h-1]=.5*(t[d][h-1]+A[0][0]),n[d][h-1]=.5*(n[d][h-1]+A[0][1]),t[d][h+1]=.5*(t[d][h+1]+A[1][0]),n[d][h+1]=.5*(n[d][h+1]+A[1][1]);b=c([t[d][0],n[d][0]],[t[d][2],n[d][2]],[t[d][3],n[d][3]]),t[d][1]=.5*(t[d][1]+b[0]),n[d][1]=.5*(n[d][1]+b[1]),b=c([t[d][T-1],n[d][T-1]],[t[d][T-3],n[d][T-3]],[t[d][T-4],n[d][T-4]]),t[d][T-2]=.5*(t[d][T-2]+b[0]),n[d][T-2]=.5*(n[d][T-2]+b[1])}return[t,n]}},{"../../lib":503,"./catmull_rom":699}],702:[function(e,k,z){k.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],703:[function(e,k,z){k.exports=function(l,o,c){return o&&c?function(p,t,n,a,i){p||(p=[]);var r,f,u,s,h,d;t*=3,n*=3;var y=a*a,m=1-a,g=m*m,x=m*a*2,A=-3*g,b=3*(g-x),S=3*(x-y),w=3*y,T=i*i,_=T*i,v=1-i,P=v*v,M=P*v;for(d=0;d<l.length;d++)h=l[d],r=A*h[n][t]+b*h[n][t+1]+S*h[n][t+2]+w*h[n][t+3],f=A*h[n+1][t]+b*h[n+1][t+1]+S*h[n+1][t+2]+w*h[n+1][t+3],u=A*h[n+2][t]+b*h[n+2][t+1]+S*h[n+2][t+2]+w*h[n+2][t+3],s=A*h[n+3][t]+b*h[n+3][t+1]+S*h[n+3][t+2]+w*h[n+3][t+3],p[d]=M*r+3*(P*i*f+v*T*u)+_*s;return p}:o?function(p,t,n,a,i){p||(p=[]);var r,f,u,s;t*=3;var h=a*a,d=1-a,y=d*d,m=d*a*2,g=-3*y,x=3*(y-m),A=3*(m-h),b=3*h,S=1-i;for(u=0;u<l.length;u++)s=l[u],r=g*s[n][t]+x*s[n][t+1]+A*s[n][t+2]+b*s[n][t+3],f=g*s[n+1][t]+x*s[n+1][t+1]+A*s[n+1][t+2]+b*s[n+1][t+3],p[u]=S*r+i*f;return p}:c?function(p,t,n,a,i){p||(p=[]);var r,f,u,s,h,d;n*=3;var y=i*i,m=y*i,g=1-i,x=g*g,A=x*g;for(h=0;h<l.length;h++)d=l[h],r=d[n][t+1]-d[n][t],f=d[n+1][t+1]-d[n+1][t],u=d[n+2][t+1]-d[n+2][t],s=d[n+3][t+1]-d[n+3][t],p[h]=A*r+3*(x*i*f+g*y*u)+m*s;return p}:function(p,t,n,a,i){p||(p=[]);var r,f,u,s,h=1-i;for(u=0;u<l.length;u++)s=l[u],r=s[n][t+1]-s[n][t],f=s[n+1][t+1]-s[n+1][t],p[u]=h*r+i*f;return p}}},{}],704:[function(e,k,z){k.exports=function(l,o,c){return o&&c?function(p,t,n,a,i){p||(p=[]);var r,f,u,s,h,d;t*=3,n*=3;var y=a*a,m=y*a,g=1-a,x=g*g,A=x*g,b=i*i,S=1-i,w=S*S,T=S*i*2,_=-3*w,v=3*(w-T),P=3*(T-b),M=3*b;for(d=0;d<l.length;d++)h=l[d],r=_*h[n][t]+v*h[n+1][t]+P*h[n+2][t]+M*h[n+3][t],f=_*h[n][t+1]+v*h[n+1][t+1]+P*h[n+2][t+1]+M*h[n+3][t+1],u=_*h[n][t+2]+v*h[n+1][t+2]+P*h[n+2][t+2]+M*h[n+3][t+2],s=_*h[n][t+3]+v*h[n+1][t+3]+P*h[n+2][t+3]+M*h[n+3][t+3],p[d]=A*r+3*(x*a*f+g*y*u)+m*s;return p}:o?function(p,t,n,a,i){p||(p=[]);var r,f,u,s,h,d;t*=3;var y=i*i,m=y*i,g=1-i,x=g*g,A=x*g;for(h=0;h<l.length;h++)d=l[h],r=d[n+1][t]-d[n][t],f=d[n+1][t+1]-d[n][t+1],u=d[n+1][t+2]-d[n][t+2],s=d[n+1][t+3]-d[n][t+3],p[h]=A*r+3*(x*i*f+g*y*u)+m*s;return p}:c?function(p,t,n,a,i){p||(p=[]);var r,f,u,s;n*=3;var h=1-a,d=i*i,y=1-i,m=y*y,g=y*i*2,x=-3*m,A=3*(m-g),b=3*(g-d),S=3*d;for(u=0;u<l.length;u++)s=l[u],r=x*s[n][t]+A*s[n+1][t]+b*s[n+2][t]+S*s[n+3][t],f=x*s[n][t+1]+A*s[n+1][t+1]+b*s[n+2][t+1]+S*s[n+3][t+1],p[u]=h*r+a*f;return p}:function(p,t,n,a,i){p||(p=[]);var r,f,u,s,h=1-a;for(u=0;u<l.length;u++)s=l[u],r=s[n+1][t]-s[n][t],f=s[n+1][t+1]-s[n][t+1],p[u]=h*r+a*f;return p}}},{}],705:[function(e,k,z){k.exports=function(l,o,c,p,t){var n=o-2,a=c-2;return p&&t?function(i,r,f){i||(i=[]);var u,s,h,d,y,m,g=Math.max(0,Math.min(Math.floor(r),n)),x=Math.max(0,Math.min(Math.floor(f),a)),A=Math.max(0,Math.min(1,r-g)),b=Math.max(0,Math.min(1,f-x));g*=3,x*=3;var S=A*A,w=S*A,T=1-A,_=T*T,v=_*T,P=b*b,M=P*b,E=1-b,D=E*E,N=D*E;for(m=0;m<l.length;m++)y=l[m],u=v*y[x][g]+3*(_*A*y[x][g+1]+T*S*y[x][g+2])+w*y[x][g+3],s=v*y[x+1][g]+3*(_*A*y[x+1][g+1]+T*S*y[x+1][g+2])+w*y[x+1][g+3],h=v*y[x+2][g]+3*(_*A*y[x+2][g+1]+T*S*y[x+2][g+2])+w*y[x+2][g+3],d=v*y[x+3][g]+3*(_*A*y[x+3][g+1]+T*S*y[x+3][g+2])+w*y[x+3][g+3],i[m]=N*u+3*(D*b*s+E*P*h)+M*d;return i}:p?function(i,r,f){i||(i=[]);var u=Math.max(0,Math.min(Math.floor(r),n)),s=Math.max(0,Math.min(Math.floor(f),a)),h=Math.max(0,Math.min(1,r-u)),d=Math.max(0,Math.min(1,f-s)),y,m,g,x,A,b;u*=3;var S=h*h,w=S*h,T=1-h,_=T*T,v=_*T,P=1-d;for(A=0;A<l.length;A++)b=l[A],y=P*b[s][u]+d*b[s+1][u],m=P*b[s][u+1]+d*b[s+1][u+1],g=P*b[s][u+2]+d*b[s+1][u+1],x=P*b[s][u+3]+d*b[s+1][u+1],i[A]=v*y+3*(_*h*m+T*S*g)+w*x;return i}:t?function(i,r,f){i||(i=[]);var u=Math.max(0,Math.min(Math.floor(r),n)),s=Math.max(0,Math.min(Math.floor(f),a)),h=Math.max(0,Math.min(1,r-u)),d=Math.max(0,Math.min(1,f-s)),y,m,g,x,A,b;s*=3;var S=d*d,w=S*d,T=1-d,_=T*T,v=_*T,P=1-h;for(A=0;A<l.length;A++)b=l[A],y=P*b[s][u]+h*b[s][u+1],m=P*b[s+1][u]+h*b[s+1][u+1],g=P*b[s+2][u]+h*b[s+2][u+1],x=P*b[s+3][u]+h*b[s+3][u+1],i[A]=v*y+3*(_*d*m+T*S*g)+w*x;return i}:function(i,r,f){i||(i=[]);var u=Math.max(0,Math.min(Math.floor(r),n)),s=Math.max(0,Math.min(Math.floor(f),a)),h=Math.max(0,Math.min(1,r-u)),d=Math.max(0,Math.min(1,f-s)),y,m,g,x,A=1-d,b=1-h;for(g=0;g<l.length;g++)x=l[g],y=b*x[s][u]+h*x[s][u+1],m=b*x[s+1][u]+h*x[s+1][u+1],i[g]=A*y+d*m;return i}}},{}],706:[function(e,k,z){var l=e("../../lib"),o=e("./xy_defaults"),c=e("./ab_defaults"),p=e("./attributes"),t=e("../../components/color/attributes");k.exports=function(a,i,r,f){function u(d,y){return l.coerce(a,i,p,d,y)}i._clipPathId="clip"+i.uid+"carpet";var s=u("color",t.defaultLine);if(l.coerceFont(u,"font"),u("carpet"),c(a,i,f,u,s),!i.a||!i.b){i.visible=!1;return}i.a.length<3&&(i.aaxis.smoothing=0),i.b.length<3&&(i.baxis.smoothing=0);var h=o(a,i,u);h||(i.visible=!1),i._cheater&&u("cheaterslope")}},{"../../components/color/attributes":365,"../../lib":503,"./ab_defaults":689,"./attributes":691,"./xy_defaults":715}],707:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),plot:e("./plot"),calc:e("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"./attributes":691,"./calc":695,"./defaults":706,"./plot":712}],708:[function(e,k,z){k.exports=function(l,o){for(var c=l._fullData.length,p,t=0;t<c;t++){var n=l._fullData[t];if(n.index!==o.index&&n.type==="carpet"&&(p||(p=n),n.carpet===o.carpet))return n}return p}},{}],709:[function(e,k,z){k.exports=function(o,c,p){if(o.length===0)return"";var t,n=[],a=p?3:1;for(t=0;t<o.length;t+=a)n.push(o[t]+","+c[t]),p&&t<o.length-a&&(n.push("C"),n.push([o[t+1]+","+c[t+1],o[t+2]+","+c[t+2]+" "].join(" ")));return n.join(p?"":"L")}},{}],710:[function(e,k,z){var l=e("../../lib").isArrayOrTypedArray;k.exports=function(c,p,t){var n;for(l(c)?c.length>p.length&&(c=c.slice(0,p.length)):c=[],n=0;n<p.length;n++)c[n]=t(p[n]);return c}},{"../../lib":503}],711:[function(e,k,z){k.exports=function(o,c,p,t,n,a){var i=n[0]*o.dpdx(c),r=n[1]*o.dpdy(p),f=1,u=1;if(a){var s=Math.sqrt(n[0]*n[0]+n[1]*n[1]),h=Math.sqrt(a[0]*a[0]+a[1]*a[1]),d=(n[0]*a[0]+n[1]*a[1])/s/h;u=Math.max(0,d)}var y=Math.atan2(r,i)*180/Math.PI;return y<-90?(y+=180,f=-f):y>90&&(y-=180,f=-f),{angle:y,flip:f,p:o.c2p(t,c,p),offsetMultplier:u}}},{}],712:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../components/drawing"),c=e("./map_1d_array"),p=e("./makepath"),t=e("./orient_text"),n=e("../../lib/svg_text_utils"),a=e("../../lib"),i=a.strRotate,r=a.strTranslate,f=e("../../constants/alignment");k.exports=function(A,b,S,w){var T=b.xaxis,_=b.yaxis,v=A._fullLayout,P=v._clips;a.makeTraceGroups(w,S,"trace").each(function(M){var E=l.select(this),D=M[0],N=D.trace,O=N.aaxis,I=N.baxis,F=a.ensureSingle(E,"g","minorlayer"),V=a.ensureSingle(E,"g","majorlayer"),U=a.ensureSingle(E,"g","boundarylayer"),j=a.ensureSingle(E,"g","labellayer");E.style("opacity",N.opacity),s(T,_,V,O,"a",O._gridlines),s(T,_,V,I,"b",I._gridlines),s(T,_,F,O,"a",O._minorgridlines),s(T,_,F,I,"b",I._minorgridlines),s(T,_,U,O,"a-boundary",O._boundarylines),s(T,_,U,I,"b-boundary",I._boundarylines);var Z=h(A,T,_,N,D,j,O._labels,"a-label"),te=h(A,T,_,N,D,j,I._labels,"b-label");d(A,j,N,D,T,_,Z,te),u(N,D,P,T,_)})};function u(x,A,b,S,w){var T,_,v,P,M=b.select("#"+x._clipPathId);M.size()||(M=b.append("clipPath").classed("carpetclip",!0));var E=a.ensureSingle(M,"path","carpetboundary"),D=A.clipsegments,N=[];for(P=0;P<D.length;P++)T=D[P],_=c([],T.x,S.c2p),v=c([],T.y,w.c2p),N.push(p(_,v,T.bicubic));var O="M"+N.join("L")+"Z";M.attr("id",x._clipPathId),E.attr("d",O)}function s(x,A,b,S,w,T){var _="const-"+w+"-lines",v=b.selectAll("."+_).data(T);v.enter().append("path").classed(_,!0).style("vector-effect","non-scaling-stroke"),v.each(function(P){var M=P,E=M.x,D=M.y,N=c([],E,x.c2p),O=c([],D,A.c2p),I="M"+p(N,O,M.smoothing),F=l.select(this);F.attr("d",I).style("stroke-width",M.width).style("stroke",M.color).style("fill","none")}),v.exit().remove()}function h(x,A,b,S,w,T,_,v){var P=T.selectAll("text."+v).data(_);P.enter().append("text").classed(v,!0);var M=0,E={};return P.each(function(D,N){var O;if(D.axis.tickangle==="auto")O=t(S,A,b,D.xy,D.dxy);else{var I=(D.axis.tickangle+180)*Math.PI/180;O=t(S,A,b,D.xy,[Math.cos(I),Math.sin(I)])}N||(E={angle:O.angle,flip:O.flip});var F=(D.endAnchor?-1:1)*O.flip,V=l.select(this).attr({"text-anchor":F>0?"start":"end","data-notex":1}).call(o.font,D.font).text(D.text).call(n.convertToTspans,x),U=o.bBox(this);V.attr("transform",r(O.p[0],O.p[1])+i(O.angle)+r(D.axis.labelpadding*F,U.height*.3)),M=Math.max(M,U.width+D.axis.labelpadding)}),P.exit().remove(),E.maxExtent=M,E}function d(x,A,b,S,w,T,_,v){var P,M,E,D,N=a.aggNums(Math.min,null,b.a),O=a.aggNums(Math.max,null,b.a),I=a.aggNums(Math.min,null,b.b),F=a.aggNums(Math.max,null,b.b);P=.5*(N+O),M=I,E=b.ab2xy(P,M,!0),D=b.dxyda_rough(P,M),_.angle===void 0&&a.extendFlat(_,t(b,w,T,E,b.dxydb_rough(P,M))),g(x,A,b,S,E,D,b.aaxis,w,T,_,"a-title"),P=N,M=.5*(I+F),E=b.ab2xy(P,M,!0),D=b.dxydb_rough(P,M),v.angle===void 0&&a.extendFlat(v,t(b,w,T,E,b.dxyda_rough(P,M))),g(x,A,b,S,E,D,b.baxis,w,T,v,"b-title")}var y=f.LINE_SPACING,m=(1-f.MID_SHIFT)/y+1;function g(x,A,b,S,w,T,_,v,P,M,E){var D=[];_.title.text&&D.push(_.title.text);var N=A.selectAll("text."+E).data(D),O=M.maxExtent;N.enter().append("text").classed(E,!0),N.each(function(){var I=t(b,v,P,w,T);["start","both"].indexOf(_.showticklabels)===-1&&(O=0);var F=_.title.font.size;O+=F+_.title.offset;var V=M.angle+(M.flip<0?180:0),U=(V-I.angle+450)%360,j=U>90&&U<270,Z=l.select(this);Z.text(_.title.text).call(n.convertToTspans,x),j&&(O=(-n.lineCount(Z)+m)*y*F-O),Z.attr("transform",r(I.p[0],I.p[1])+i(I.angle)+r(0,O)).attr("text-anchor","middle").call(o.font,_.title.font)}),N.exit().remove()}},{"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"./makepath":709,"./map_1d_array":710,"./orient_text":711,"@plotly/d3":58}],713:[function(e,k,z){var l=e("./constants"),o=e("../../lib/search").findBin,c=e("./compute_control_points"),p=e("./create_spline_evaluator"),t=e("./create_i_derivative_evaluator"),n=e("./create_j_derivative_evaluator");k.exports=function(i){var r=i._a,f=i._b,u=r.length,s=f.length,h=i.aaxis,d=i.baxis,y=r[0],m=r[u-1],g=f[0],x=f[s-1],A=r[r.length-1]-r[0],b=f[f.length-1]-f[0],S=A*l.RELATIVE_CULL_TOLERANCE,w=b*l.RELATIVE_CULL_TOLERANCE;y-=S,m+=S,g-=w,x+=w,i.isVisible=function(T,_){return T>y&&T<m&&_>g&&_<x},i.isOccluded=function(T,_){return T<y||T>m||_<g||_>x},i.setScale=function(){var T=i._x,_=i._y,v=c(i._xctrl,i._yctrl,T,_,h.smoothing,d.smoothing);i._xctrl=v[0],i._yctrl=v[1],i.evalxy=p([i._xctrl,i._yctrl],u,s,h.smoothing,d.smoothing),i.dxydi=t([i._xctrl,i._yctrl],h.smoothing,d.smoothing),i.dxydj=n([i._xctrl,i._yctrl],h.smoothing,d.smoothing)},i.i2a=function(T){var _=Math.max(0,Math.floor(T[0]),u-2),v=T[0]-_;return(1-v)*r[_]+v*r[_+1]},i.j2b=function(T){var _=Math.max(0,Math.floor(T[1]),u-2),v=T[1]-_;return(1-v)*f[_]+v*f[_+1]},i.ij2ab=function(T){return[i.i2a(T[0]),i.j2b(T[1])]},i.a2i=function(T){var _=Math.max(0,Math.min(o(T,r),u-2)),v=r[_],P=r[_+1];return Math.max(0,Math.min(u-1,_+(T-v)/(P-v)))},i.b2j=function(T){var _=Math.max(0,Math.min(o(T,f),s-2)),v=f[_],P=f[_+1];return Math.max(0,Math.min(s-1,_+(T-v)/(P-v)))},i.ab2ij=function(T){return[i.a2i(T[0]),i.b2j(T[1])]},i.i2c=function(T,_){return i.evalxy([],T,_)},i.ab2xy=function(T,_,v){if(!v&&(T<r[0]||T>r[u-1]|_<f[0]||_>f[s-1]))return[!1,!1];var P=i.a2i(T),M=i.b2j(_),E=i.evalxy([],P,M);if(v){var D=0,N=0,O=[],I,F,V,U;T<r[0]?(I=0,F=0,D=(T-r[0])/(r[1]-r[0])):T>r[u-1]?(I=u-2,F=1,D=(T-r[u-1])/(r[u-1]-r[u-2])):(I=Math.max(0,Math.min(u-2,Math.floor(P))),F=P-I),_<f[0]?(V=0,U=0,N=(_-f[0])/(f[1]-f[0])):_>f[s-1]?(V=s-2,U=1,N=(_-f[s-1])/(f[s-1]-f[s-2])):(V=Math.max(0,Math.min(s-2,Math.floor(M))),U=M-V),D&&(i.dxydi(O,I,V,F,U),E[0]+=O[0]*D,E[1]+=O[1]*D),N&&(i.dxydj(O,I,V,F,U),E[0]+=O[0]*N,E[1]+=O[1]*N)}return E},i.c2p=function(T,_,v){return[_.c2p(T[0]),v.c2p(T[1])]},i.p2x=function(T,_,v){return[_.p2c(T[0]),v.p2c(T[1])]},i.dadi=function(T){var _=Math.max(0,Math.min(r.length-2,T));return r[_+1]-r[_]},i.dbdj=function(T){var _=Math.max(0,Math.min(f.length-2,T));return f[_+1]-f[_]},i.dxyda=function(T,_,v,P){var M=i.dxydi(null,T,_,v,P),E=i.dadi(T,v);return[M[0]/E,M[1]/E]},i.dxydb=function(T,_,v,P){var M=i.dxydj(null,T,_,v,P),E=i.dbdj(_,P);return[M[0]/E,M[1]/E]},i.dxyda_rough=function(T,_,v){var P=A*(v||.1),M=i.ab2xy(T+P,_,!0),E=i.ab2xy(T-P,_,!0);return[(M[0]-E[0])*.5/P,(M[1]-E[1])*.5/P]},i.dxydb_rough=function(T,_,v){var P=b*(v||.1),M=i.ab2xy(T,_+P,!0),E=i.ab2xy(T,_-P,!0);return[(M[0]-E[0])*.5/P,(M[1]-E[1])*.5/P]},i.dpdx=function(T){return T._m},i.dpdy=function(T){return T._m}}},{"../../lib/search":523,"./compute_control_points":701,"./constants":702,"./create_i_derivative_evaluator":703,"./create_j_derivative_evaluator":704,"./create_spline_evaluator":705}],714:[function(e,k,z){var l=e("../../lib");k.exports=function(c,p,t){var n,a,i,r=[],f=[],u=c[0].length,s=c.length;function h(re,W){var J=0,le,ue=0;return re>0&&(le=c[W][re-1])!==void 0&&(ue++,J+=le),re<u-1&&(le=c[W][re+1])!==void 0&&(ue++,J+=le),W>0&&(le=c[W-1][re])!==void 0&&(ue++,J+=le),W<s-1&&(le=c[W+1][re])!==void 0&&(ue++,J+=le),J/Math.max(1,ue)}var d=0;for(n=0;n<u;n++)for(a=0;a<s;a++)c[a][n]===void 0&&(r.push(n),f.push(a),c[a][n]=h(n,a)),d=Math.max(d,Math.abs(c[a][n]));if(!r.length)return c;var y,m,g,x,A,b,S,w,T,_,v,P=1e-5,M=0,E=100,D=0,N=r.length;do{for(M=0,i=0;i<N;i++){n=r[i],a=f[i];var O=0,I=0,F,V,U,j,Z,te;n===0?(Z=Math.min(u-1,2),U=p[Z],j=p[1],F=c[a][Z],V=c[a][1],I+=V+(V-F)*(p[0]-j)/(j-U),O++):n===u-1&&(Z=Math.max(0,u-3),U=p[Z],j=p[u-2],F=c[a][Z],V=c[a][u-2],I+=V+(V-F)*(p[u-1]-j)/(j-U),O++),(n===0||n===u-1)&&a>0&&a<s-1&&(y=t[a+1]-t[a],m=t[a]-t[a-1],I+=(m*c[a+1][n]+y*c[a-1][n])/(m+y),O++),a===0?(te=Math.min(s-1,2),U=t[te],j=t[1],F=c[te][n],V=c[1][n],I+=V+(V-F)*(t[0]-j)/(j-U),O++):a===s-1&&(te=Math.max(0,s-3),U=t[te],j=t[s-2],F=c[te][n],V=c[s-2][n],I+=V+(V-F)*(t[s-1]-j)/(j-U),O++),(a===0||a===s-1)&&n>0&&n<u-1&&(y=p[n+1]-p[n],m=p[n]-p[n-1],I+=(m*c[a][n+1]+y*c[a][n-1])/(m+y),O++),O?I/=O:(g=p[n+1]-p[n],x=p[n]-p[n-1],A=t[a+1]-t[a],b=t[a]-t[a-1],S=g*x*(g+x),w=A*b*(A+b),I=(S*(b*c[a+1][n]+A*c[a-1][n])+w*(x*c[a][n+1]+g*c[a][n-1]))/(w*(x+g)+S*(b+A))),T=I-c[a][n],_=T/d,M+=_*_,v=O?0:.85,c[a][n]+=T*(1+v)}M=Math.sqrt(M)}while(D++<E&&M>P);return l.log("Smoother converged to",M,"after",D,"iterations"),c}},{"../../lib":503}],715:[function(e,k,z){var l=e("../../lib").isArray1D;k.exports=function(c,p,t){var n=t("x"),a=n&&n.length,i=t("y"),r=i&&i.length;if(!a&&!r)return!1;if(p._cheater=!n,(!a||l(n))&&(!r||l(i))){var f=a?n.length:1/0;r&&(f=Math.min(f,i.length)),p.a&&p.a.length&&(f=Math.min(f,p.a.length)),p.b&&p.b.length&&(f=Math.min(f,p.b.length)),p._length=f}else p._length=null;return!0}},{"../../lib":503}],716:[function(e,k,z){var l=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../scattergeo/attributes"),c=e("../../components/colorscale/attributes"),p=e("../../plots/attributes"),t=e("../../components/color/attributes").defaultLine,n=e("../../lib/extend").extendFlat,a=o.marker.line;k.exports=n({locations:{valType:"data_array",editType:"calc"},locationmode:o.locationmode,z:{valType:"data_array",editType:"calc"},geojson:n({},o.geojson,{}),featureidkey:o.featureidkey,text:n({},o.text,{}),hovertext:n({},o.hovertext,{}),marker:{line:{color:n({},a.color,{dflt:t}),width:n({},a.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:o.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:o.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:n({},p.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:l(),showlegend:n({},p.showlegend,{dflt:!1})},c("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattergeo/attributes":968}],717:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../constants/numerical").BADNUM,c=e("../../components/colorscale/calc"),p=e("../scatter/arrays_to_calcdata"),t=e("../scatter/calc_selection");function n(a){return a&&typeof a=="string"}k.exports=function(i,r){var f=r._length,u=new Array(f),s;r.geojson?s=function(g){return n(g)||l(g)}:s=n;for(var h=0;h<f;h++){var d=u[h]={},y=r.locations[h],m=r.z[h];s(y)&&l(m)?(d.loc=y,d.z=m):(d.loc=null,d.z=o),d.index=h}return p(u,r),c(i,r,{vals:r.z,containerStr:"",cLetter:"z"}),t(u,r),u}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../scatter/arrays_to_calcdata":925,"../scatter/calc_selection":928,"fast-isnumeric":190}],718:[function(e,k,z){var l=e("../../lib"),o=e("../../components/colorscale/defaults"),c=e("./attributes");k.exports=function(t,n,a,i){function r(m,g){return l.coerce(t,n,c,m,g)}var f=r("locations"),u=r("z");if(!(f&&f.length&&l.isArrayOrTypedArray(u)&&u.length)){n.visible=!1;return}n._length=Math.min(f.length,u.length);var s=r("geojson"),h;(typeof s=="string"&&s!==""||l.isPlainObject(s))&&(h="geojson-id");var d=r("locationmode",h);d==="geojson-id"&&r("featureidkey"),r("text"),r("hovertext"),r("hovertemplate");var y=r("marker.line.width");y&&r("marker.line.color"),r("marker.opacity"),o(t,n,i,r,{prefix:"",cLetter:"z"}),l.coerceSelectionMarkerOpacity(n,r)}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":716}],719:[function(e,k,z){k.exports=function(o,c,p,t,n){o.location=c.location,o.z=c.z;var a=t[n];return a.fIn&&a.fIn.properties&&(o.properties=a.fIn.properties),o.ct=a.ct,o}},{}],720:[function(e,k,z){var l=e("../../plots/cartesian/axes"),o=e("./attributes"),c=e("../../lib").fillText;k.exports=function(n,a,i){var r=n.cd,f=r[0].trace,u=n.subplot,s,h,d,y,m=[a,i],g=[a+360,i];for(h=0;h<r.length;h++)if(s=r[h],y=!1,s._polygons){for(d=0;d<s._polygons.length;d++)s._polygons[d].contains(m)&&(y=!y),s._polygons[d].contains(g)&&(y=!y);if(y)break}if(!(!y||!s))return n.x0=n.x1=n.xa.c2p(s.ct),n.y0=n.y1=n.ya.c2p(s.ct),n.index=s.index,n.location=s.loc,n.z=s.z,n.zLabel=l.tickText(u.mockAxis,u.mockAxis.c2l(s.z),"hover").text,n.hovertemplate=s.hovertemplate,p(n,f,s),[n]};function p(t,n,a){if(!n.hovertemplate){var i=a.hi||n.hoverinfo,r=String(a.loc),f=i==="all"?o.hoverinfo.flags:i.split("+"),u=f.indexOf("name")!==-1,s=f.indexOf("location")!==-1,h=f.indexOf("z")!==-1,d=f.indexOf("text")!==-1,y=!u&&s,m=[];y?t.nameOverride=r:(u&&(t.nameOverride=n.name),s&&m.push(r)),h&&m.push(t.zLabel),d&&c(a,n,m),t.extraText=m.join("<br>")}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./attributes":716}],721:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("./calc"),calcGeoJSON:e("./plot").calcGeoJSON,plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"choropleth",basePlotModule:e("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":589,"../heatmap/colorbar":795,"./attributes":716,"./calc":717,"./defaults":718,"./event_data":719,"./hover":720,"./plot":722,"./select":723,"./style":724}],722:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../lib"),c=e("../../lib/geo_location_utils"),p=e("../../lib/topojson_utils").getTopojsonFeatures,t=e("../../plots/cartesian/autorange").findExtremes,n=e("./style").style;function a(r,f,u){var s=f.layers.backplot.select(".choroplethlayer");o.makeTraceGroups(s,u,"trace choropleth").each(function(h){var d=l.select(this),y=d.selectAll("path.choroplethlocation").data(o.identity);y.enter().append("path").classed("choroplethlocation",!0),y.exit().remove(),n(r,h)})}function i(r,f){for(var u=r[0].trace,s=f[u.geo],h=s._subplot,d=u.locationmode,y=u._length,m=d==="geojson-id"?c.extractTraceFeature(r):p(u,h.topojson),g=[],x=[],A=0;A<y;A++){var b=r[A],S=d==="geojson-id"?b.fOut:c.locationToFeature(d,b.loc,m);if(S){b.geojson=S,b.ct=S.properties.ct,b._polygons=c.feature2polygons(S);var w=c.computeBbox(S);g.push(w[0],w[2]),x.push(w[1],w[3])}else b.geojson=null}if(s.fitbounds==="geojson"&&d==="geojson-id"){var T=c.computeBbox(c.getTraceGeojson(u));g=[T[0],T[2]],x=[T[1],T[3]]}var _={padded:!0};u._extremes.lon=t(s.lonaxis._ax,g,_),u._extremes.lat=t(s.lataxis._ax,x,_)}k.exports={calcGeoJSON:i,plot:a}},{"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"./style":724,"@plotly/d3":58}],723:[function(e,k,z){k.exports=function(o,c){var p=o.cd,t=o.xaxis,n=o.yaxis,a=[],i,r,f,u,s;if(c===!1)for(i=0;i<p.length;i++)p[i].selected=0;else for(i=0;i<p.length;i++)r=p[i],f=r.ct,!!f&&(u=t.c2p(f),s=n.c2p(f),c.contains([u,s],null,i,o)?(a.push({pointNumber:i,lon:f[0],lat:f[1]}),r.selected=1):r.selected=0);return a}},{}],724:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../components/color"),c=e("../../components/drawing"),p=e("../../components/colorscale");function t(i,r){r&&n(i,r)}function n(i,r){var f=r[0].trace,u=r[0].node3,s=u.selectAll(".choroplethlocation"),h=f.marker||{},d=h.line||{},y=p.makeColorScaleFuncFromTrace(f);s.each(function(m){l.select(this).attr("fill",y(m.z)).call(o.stroke,m.mlc||d.color).call(c.dashLine,"",m.mlw||d.width||0).style("opacity",h.opacity)}),c.selectedPointStyle(s,f,i)}function a(i,r){var f=r[0].node3,u=r[0].trace;u.selectedpoints?c.selectedPointStyle(f.selectAll(".choroplethlocation"),u,i):n(i,r)}k.exports={style:t,styleOnSelect:a}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"@plotly/d3":58}],725:[function(e,k,z){var l=e("../choropleth/attributes"),o=e("../../components/colorscale/attributes"),c=e("../../plots/template_attributes").hovertemplateAttrs,p=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat;k.exports=t({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:t({},l.featureidkey,{}),below:{valType:"string",editType:"plot"},text:l.text,hovertext:l.hovertext,marker:{line:{color:t({},l.marker.line.color,{editType:"plot"}),width:t({},l.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:t({},l.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:t({},l.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:t({},l.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:l.hoverinfo,hovertemplate:c({},{keys:["properties"]}),showlegend:t({},p.showlegend,{dflt:!1})},o("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../choropleth/attributes":716}],726:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../lib"),c=e("../../components/colorscale"),p=e("../../components/drawing"),t=e("../../lib/geojson_utils").makeBlank,n=e("../../lib/geo_location_utils");function a(r){var f=r[0].trace,u=f.visible===!0&&f._length!==0,s={layout:{visibility:"none"},paint:{}},h={layout:{visibility:"none"},paint:{}},d=f._opts={fill:s,line:h,geojson:t()};if(!u)return d;var y=n.extractTraceFeature(r);if(!y)return d;var m=c.makeColorScaleFuncFromTrace(f),g=f.marker,x=g.line||{},A;o.isArrayOrTypedArray(g.opacity)&&(A=function(M){var E=M.mo;return l(E)?+o.constrain(E,0,1):0});var b;o.isArrayOrTypedArray(x.color)&&(b=function(M){return M.mlc});var S;o.isArrayOrTypedArray(x.width)&&(S=function(M){return M.mlw});for(var w=0;w<r.length;w++){var T=r[w],_=T.fOut;if(_){var v=_.properties;v.fc=m(T.z),A&&(v.mo=A(T)),b&&(v.mlc=b(T)),S&&(v.mlw=S(T)),T.ct=v.ct,T._polygons=n.feature2polygons(_)}}var P=A?{type:"identity",property:"mo"}:g.opacity;return o.extendFlat(s.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":P}),o.extendFlat(h.paint,{"line-color":b?{type:"identity",property:"mlc"}:x.color,"line-width":S?{type:"identity",property:"mlw"}:x.width,"line-opacity":P}),s.layout.visibility="visible",h.layout.visibility="visible",d.geojson={type:"FeatureCollection",features:y},i(r),d}function i(r){var f=r[0].trace,u=f._opts,s;if(f.selectedpoints){for(var h=p.makeSelectedPointStyleFns(f),d=0;d<r.length;d++){var y=r[d];y.fOut&&(y.fOut.properties.mo2=h.selectedOpacityFn(y))}s={type:"identity",property:"mo2"}}else s=o.isArrayOrTypedArray(f.marker.opacity)?{type:"identity",property:"mo"}:f.marker.opacity;return o.extendFlat(u.fill.paint,{"fill-opacity":s}),o.extendFlat(u.line.paint,{"line-opacity":s}),u}k.exports={convert:a,convertOnSelect:i}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"fast-isnumeric":190}],727:[function(e,k,z){var l=e("../../lib"),o=e("../../components/colorscale/defaults"),c=e("./attributes");k.exports=function(t,n,a,i){function r(d,y){return l.coerce(t,n,c,d,y)}var f=r("locations"),u=r("z"),s=r("geojson");if(!l.isArrayOrTypedArray(f)||!f.length||!l.isArrayOrTypedArray(u)||!u.length||!(typeof s=="string"&&s!==""||l.isPlainObject(s))){n.visible=!1;return}r("featureidkey"),n._length=Math.min(f.length,u.length),r("below"),r("text"),r("hovertext"),r("hovertemplate");var h=r("marker.line.width");h&&r("marker.line.color"),r("marker.opacity"),o(t,n,i,r,{prefix:"",cLetter:"z"}),l.coerceSelectionMarkerOpacity(n,r)}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":725}],728:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("../choropleth/calc"),plot:e("./plot"),hoverPoints:e("../choropleth/hover"),eventData:e("../choropleth/event_data"),selectPoints:e("../choropleth/select"),styleOnSelect:function(l,o){if(o){var c=o[0].trace;c._glTrace.updateOnSelect(o)}},getBelow:function(l,o){for(var c=o.getMapLayers(),p=c.length-2;p>=0;p--){var t=c[p].id;if(typeof t=="string"&&t.indexOf("water")===0){for(var n=p+1;n<c.length;n++)if(t=c[n].id,typeof t=="string"&&t.indexOf("plotly-")===-1)return t}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":613,"../choropleth/calc":717,"../choropleth/event_data":719,"../choropleth/hover":720,"../choropleth/select":723,"../heatmap/colorbar":795,"./attributes":725,"./defaults":727,"./plot":729}],729:[function(e,k,z){var l=e("./convert").convert,o=e("./convert").convertOnSelect,c=e("../../plots/mapbox/constants").traceLayerPrefix;function p(n,a){this.type="choroplethmapbox",this.subplot=n,this.uid=a,this.sourceId="source-"+a,this.layerList=[["fill",c+a+"-fill"],["line",c+a+"-line"]],this.below=null}var t=p.prototype;t.update=function(n){this._update(l(n))},t.updateOnSelect=function(n){this._update(o(n))},t._update=function(n){var a=this.subplot,i=this.layerList,r=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(n.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(n,r),this.below=r);for(var f=0;f<i.length;f++){var u=i[f],s=u[0],h=u[1],d=n[s];a.setOptions(h,"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&a.setOptions(h,"setPaintProperty",d.paint)}},t._addLayers=function(n,a){for(var i=this.subplot,r=this.layerList,f=this.sourceId,u=0;u<r.length;u++){var s=r[u],h=s[0],d=n[h];i.addLayer({type:h,id:s[1],source:f,layout:d.layout,paint:d.paint},a)}},t._removeLayers=function(){for(var n=this.subplot.map,a=this.layerList,i=a.length-1;i>=0;i--)n.removeLayer(a[i][1])},t.dispose=function(){var n=this.subplot.map;this._removeLayers(),n.removeSource(this.sourceId)},k.exports=function(a,i){var r=i[0].trace,f=new p(a,r.uid),u=f.sourceId,s=l(i),h=f.below=a.belowLookup["trace-"+r.uid];return a.map.addSource(u,{type:"geojson",data:s.geojson}),f._addLayers(s,h),i[0].trace._glTrace=f,f}},{"../../plots/mapbox/constants":611,"./convert":726}],730:[function(e,k,z){var l=e("../../components/colorscale/attributes"),o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,c=e("../../plots/template_attributes").hovertemplateAttrs,p=e("../mesh3d/attributes"),t=e("../../plots/attributes"),n=e("../../lib/extend").extendFlat,a={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:c({editType:"calc"},{keys:["norm"]}),uhoverformat:o("u",1),vhoverformat:o("v",1),whoverformat:o("w",1),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),showlegend:n({},t.showlegend,{dflt:!1})};n(a,l("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var i=["opacity","lightposition","lighting"];i.forEach(function(r){a[r]=p[r]}),a.hoverinfo=n({},t.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),a.transforms=void 0,k.exports=a},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],731:[function(e,k,z){var l=e("../../components/colorscale/calc");k.exports=function(c,p){for(var t=p.u,n=p.v,a=p.w,i=Math.min(p.x.length,p.y.length,p.z.length,t.length,n.length,a.length),r=-1/0,f=1/0,u=0;u<i;u++){var s=t[u],h=n[u],d=a[u],y=Math.sqrt(s*s+h*h+d*d);r=Math.max(r,y),f=Math.min(f,y)}p._len=i,p._normMax=r,l(c,p,{vals:[f,r],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],732:[function(e,k,z){var l=e("../../../stackgl_modules").gl_cone3d,o=e("../../../stackgl_modules").gl_cone3d.createConeMesh,c=e("../../lib").simpleMap,p=e("../../lib/gl_format_color").parseColorScale,t=e("../../components/colorscale").extractOpts,n=e("../../plots/gl3d/zip3");function a(d,y){this.scene=d,this.uid=y,this.mesh=null,this.data=null}var i=a.prototype;i.handlePick=function(d){if(d.object===this.mesh){var y=d.index=d.data.index,m=this.data.x[y],g=this.data.y[y],x=this.data.z[y],A=this.data.u[y],b=this.data.v[y],S=this.data.w[y];d.traceCoordinate=[m,g,x,A,b,S,Math.sqrt(A*A+b*b+S*S)];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&w[y]!==void 0?d.textLabel=w[y]:w&&(d.textLabel=w),!0}};var r={xaxis:0,yaxis:1,zaxis:2},f={tip:1,tail:0,cm:.25,center:.5},u={tip:1,tail:1,cm:.75,center:.5};function s(d,y){var m=d.fullSceneLayout,g=d.dataScale,x={};function A(T,_){var v=m[_],P=g[r[_]];return c(T,function(M){return v.d2l(M)*P})}x.vectors=n(A(y.u,"xaxis"),A(y.v,"yaxis"),A(y.w,"zaxis"),y._len),x.positions=n(A(y.x,"xaxis"),A(y.y,"yaxis"),A(y.z,"zaxis"),y._len);var b=t(y);x.colormap=p(y),x.vertexIntensityBounds=[b.min/y._normMax,b.max/y._normMax],x.coneOffset=f[y.anchor],y.sizemode==="scaled"?x.coneSize=y.sizeref||.5:x.coneSize=y.sizeref&&y._normMax?y.sizeref/y._normMax:.5;var S=l(x),w=y.lightposition;return S.lightPosition=[w.x,w.y,w.z],S.ambient=y.lighting.ambient,S.diffuse=y.lighting.diffuse,S.specular=y.lighting.specular,S.roughness=y.lighting.roughness,S.fresnel=y.lighting.fresnel,S.opacity=y.opacity,y._pad=u[y.anchor]*S.vectorScale*S.coneScale*y._normMax,S}i.update=function(d){this.data=d;var y=s(this.scene,d);this.mesh.update(y)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function h(d,y){var m=d.glplot.gl,g=s(d,y),x=o(m,g),A=new a(d,y.uid);return A.mesh=x,A.data=y,x._trace=A,d.glplot.add(x),A}k.exports=h},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],733:[function(e,k,z){var l=e("../../lib"),o=e("../../components/colorscale/defaults"),c=e("./attributes");k.exports=function(t,n,a,i){function r(m,g){return l.coerce(t,n,c,m,g)}var f=r("u"),u=r("v"),s=r("w"),h=r("x"),d=r("y"),y=r("z");if(!f||!f.length||!u||!u.length||!s||!s.length||!h||!h.length||!d||!d.length||!y||!y.length){n.visible=!1;return}r("sizeref"),r("sizemode"),r("anchor"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),o(t,n,i,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),n._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":730}],734:[function(e,k,z){k.exports={moduleType:"trace",name:"cone",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:e("./calc"),plot:e("./convert"),eventData:function(l,o){return l.norm=o.traceCoordinate[6],l},meta:{}}},{"../../plots/gl3d":598,"./attributes":730,"./calc":731,"./convert":732,"./defaults":733}],735:[function(e,k,z){var l=e("../heatmap/attributes"),o=e("../scatter/attributes"),c=e("../../plots/cartesian/axis_format_attributes"),p=c.axisHoverFormat,t=c.descriptionOnlyNumbers,n=e("../../components/colorscale/attributes"),a=e("../../components/drawing/attributes").dash,i=e("../../plots/font_attributes"),r=e("../../lib/extend").extendFlat,f=e("../../constants/filter_ops"),u=f.COMPARISON_OPS2,s=f.INTERVAL_OPS,h=o.line;k.exports=r({z:l.z,x:l.x,x0:l.x0,dx:l.dx,y:l.y,y0:l.y0,dy:l.dy,xperiod:l.xperiod,yperiod:l.yperiod,xperiod0:o.xperiod0,yperiod0:o.yperiod0,xperiodalignment:l.xperiodalignment,yperiodalignment:l.yperiodalignment,text:l.text,hovertext:l.hovertext,transpose:l.transpose,xtype:l.xtype,ytype:l.ytype,xhoverformat:p("x"),yhoverformat:p("y"),zhoverformat:p("z",1),hovertemplate:l.hovertemplate,texttemplate:r({},l.texttemplate,{}),textfont:r({},l.textfont,{}),hoverongaps:l.hoverongaps,connectgaps:r({},l.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:i({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:t("contour label")},operation:{valType:"enumerated",values:[].concat(u).concat(s),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:r({},h.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:a,smoothing:r({},h.smoothing,{}),editType:"plot"}},n("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../constants/filter_ops":475,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../heatmap/attributes":792,"../scatter/attributes":926}],736:[function(e,k,z){var l=e("../../components/colorscale"),o=e("../heatmap/calc"),c=e("./set_contours"),p=e("./end_plus");k.exports=function(n,a){var i=o(n,a),r=i[0].z;c(a,r);var f=a.contours,u=l.extractOpts(a),s;if(f.coloring==="heatmap"&&u.auto&&a.autocontour===!1){var h=f.start,d=p(f),y=f.size||1,m=Math.floor((d-h)/y)+1;isFinite(y)||(y=1,m=1);var g=h-y/2,x=g+m*y;s=[g,x]}else s=r;return l.calc(n,a,{vals:s,cLetter:"z"}),i}},{"../../components/colorscale":378,"../heatmap/calc":793,"./end_plus":746,"./set_contours":754}],737:[function(e,k,z){k.exports=function(l,o){var c=l[0],p=c.z,t;switch(o.type){case"levels":var n=Math.min(p[0][0],p[0][1]);for(t=0;t<l.length;t++){var a=l[t];a.prefixBoundary=!a.edgepaths.length&&(n>a.level||a.starts.length&&n===a.level)}break;case"constraint":if(c.prefixBoundary=!1,c.edgepaths.length)return;var i=c.x.length,r=c.y.length,f=-1/0,u=1/0;for(t=0;t<r;t++)u=Math.min(u,p[t][0]),u=Math.min(u,p[t][i-1]),f=Math.max(f,p[t][0]),f=Math.max(f,p[t][i-1]);for(t=1;t<i-1;t++)u=Math.min(u,p[0][t]),u=Math.min(u,p[r-1][t]),f=Math.max(f,p[0][t]),f=Math.max(f,p[r-1][t]);var s=o.value,h,d;switch(o._operation){case">":s>f&&(c.prefixBoundary=!0);break;case"<":(s<u||c.starts.length&&s===u)&&(c.prefixBoundary=!0);break;case"[]":h=Math.min(s[0],s[1]),d=Math.max(s[0],s[1]),(d<u||h>f||c.starts.length&&d===u)&&(c.prefixBoundary=!0);break;case"][":h=Math.min(s[0],s[1]),d=Math.max(s[0],s[1]),h<u&&d>f&&(c.prefixBoundary=!0);break}break}}},{}],738:[function(e,k,z){var l=e("../../components/colorscale"),o=e("./make_color_map"),c=e("./end_plus");function p(t,n,a){var i=n.contours,r=n.line,f=i.size||1,u=i.coloring,s=o(n,{isColorbar:!0});if(u==="heatmap"){var h=l.extractOpts(n);a._fillgradient=h.reversescale?l.flipScale(h.colorscale):h.colorscale,a._zrange=[h.min,h.max]}else u==="fill"&&(a._fillcolor=s);a._line={color:u==="lines"?s:r.color,width:i.showlines!==!1?r.width:0,dash:r.dash},a._levels={start:i.start,end:c(i),size:f}}k.exports={min:"zmin",max:"zmax",calc:p}},{"../../components/colorscale":378,"./end_plus":746,"./make_color_map":751}],739:[function(e,k,z){k.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],740:[function(e,k,z){var l=e("fast-isnumeric"),o=e("./label_defaults"),c=e("../../components/color"),p=c.addOpacity,t=c.opacity,n=e("../../constants/filter_ops"),a=n.CONSTRAINT_REDUCTION,i=n.COMPARISON_OPS2;k.exports=function(u,s,h,d,y,m){var g=s.contours,x,A,b,S=h("contours.operation");if(g._operation=a[S],r(h,g),S==="="?x=g.showlines=!0:(x=h("contours.showlines"),b=h("fillcolor",p((u.line||{}).color||y,.5))),x){var w=b&&t(b)?p(s.fillcolor,1):y;A=h("line.color",w),h("line.width",2),h("line.dash")}h("line.smoothing"),o(h,d,A,m)};function r(f,u){var s;i.indexOf(u.operation)===-1?(f("contours.value",[0,1]),Array.isArray(u.value)?u.value.length>2?u.value=u.value.slice(2):u.length===0?u.value=[0,1]:u.length<2?(s=parseFloat(u.value[0]),u.value=[s,s+1]):u.value=[parseFloat(u.value[0]),parseFloat(u.value[1])]:l(u.value)&&(s=parseFloat(u.value),u.value=[s,s+1])):(f("contours.value",0),l(u.value)||(Array.isArray(u.value)?u.value=parseFloat(u.value[0]):u.value=0))}},{"../../components/color":366,"../../constants/filter_ops":475,"./label_defaults":750,"fast-isnumeric":190}],741:[function(e,k,z){var l=e("../../constants/filter_ops"),o=e("fast-isnumeric");k.exports={"[]":p("[]"),"][":p("]["),">":t(">"),"<":t("<"),"=":t("=")};function c(n,a){var i=Array.isArray(a),r;function f(u){return o(u)?+u:null}return l.COMPARISON_OPS2.indexOf(n)!==-1?r=f(i?a[0]:a):l.INTERVAL_OPS.indexOf(n)!==-1?r=i?[f(a[0]),f(a[1])]:[f(a),f(a)]:l.SET_OPS.indexOf(n)!==-1&&(r=i?a.map(f):[f(a)]),r}function p(n){return function(a){a=c(n,a);var i=Math.min(a[0],a[1]),r=Math.max(a[0],a[1]);return{start:i,end:r,size:r-i}}}function t(n){return function(a){return a=c(n,a),{start:a,end:1/0,size:1/0}}}},{"../../constants/filter_ops":475,"fast-isnumeric":190}],742:[function(e,k,z){k.exports=function(o,c,p,t){var n=t("contours.start"),a=t("contours.end"),i=n===!1||a===!1,r=p("contours.size"),f;i?f=c.autocontour=!0:f=p("autocontour",!1),(f||!r)&&p("ncontours")}},{}],743:[function(e,k,z){var l=e("../../lib");k.exports=function(c,p){var t,n,a,i=function(u){return u.reverse()},r=function(u){return u};switch(p){case"=":case"<":return c;case">":for(c.length!==1&&l.warn("Contour data invalid for the specified inequality operation."),n=c[0],t=0;t<n.edgepaths.length;t++)n.edgepaths[t]=i(n.edgepaths[t]);for(t=0;t<n.paths.length;t++)n.paths[t]=i(n.paths[t]);for(t=0;t<n.starts.length;t++)n.starts[t]=i(n.starts[t]);return c;case"][":var f=i;i=r,r=f;case"[]":for(c.length!==2&&l.warn("Contour data invalid for the specified inequality range operation."),n=o(c[0]),a=o(c[1]),t=0;t<n.edgepaths.length;t++)n.edgepaths[t]=i(n.edgepaths[t]);for(t=0;t<n.paths.length;t++)n.paths[t]=i(n.paths[t]);for(t=0;t<n.starts.length;t++)n.starts[t]=i(n.starts[t]);for(;a.edgepaths.length;)n.edgepaths.push(r(a.edgepaths.shift()));for(;a.paths.length;)n.paths.push(r(a.paths.shift()));for(;a.starts.length;)n.starts.push(r(a.starts.shift()));return[n]}};function o(c){return l.extendFlat({},c,{edgepaths:l.extendDeep([],c.edgepaths),paths:l.extendDeep([],c.paths),starts:l.extendDeep([],c.starts)})}},{"../../lib":503}],744:[function(e,k,z){var l=e("../../lib"),o=e("../heatmap/xyz_defaults"),c=e("../scatter/period_defaults"),p=e("./constraint_defaults"),t=e("./contours_defaults"),n=e("./style_defaults"),a=e("../heatmap/label_defaults"),i=e("./attributes");k.exports=function(f,u,s,h){function d(x,A){return l.coerce(f,u,i,x,A)}function y(x){return l.coerce2(f,u,i,x)}var m=o(f,u,d,h);if(!m){u.visible=!1;return}c(f,u,h,d),d("xhoverformat"),d("yhoverformat"),d("text"),d("hovertext"),d("hoverongaps"),d("hovertemplate");var g=d("contours.type")==="constraint";d("connectgaps",l.isArray1D(u.z)),g?p(f,u,d,h,s):(t(f,u,d,y),n(f,u,d,h)),u.contours&&u.contours.coloring==="heatmap"&&a(d,h)}},{"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/xyz_defaults":807,"../scatter/period_defaults":946,"./attributes":735,"./constraint_defaults":740,"./contours_defaults":742,"./style_defaults":756}],745:[function(e,k,z){var l=e("../../lib"),o=e("./constraint_mapping"),c=e("./end_plus");k.exports=function(t,n,a){for(var i=t.type==="constraint"?o[t._operation](t.value):t,r=i.size,f=[],u=c(i),s=a.trace._carpetTrace,h=s?{xaxis:s.aaxis,yaxis:s.baxis,x:a.a,y:a.b}:{xaxis:n.xaxis,yaxis:n.yaxis,x:a.x,y:a.y},d=i.start;d<u;d+=r)if(f.push(l.extendFlat({level:d,crossings:{},starts:[],edgepaths:[],paths:[],z:a.z,smoothing:a.trace.line.smoothing},h)),f.length>1e3){l.warn("Too many contours, clipping at 1000",t);break}return f}},{"../../lib":503,"./constraint_mapping":741,"./end_plus":746}],746:[function(e,k,z){k.exports=function(o){return o.end+o.size/1e6}},{}],747:[function(e,k,z){var l=e("../../lib"),o=e("./constants");k.exports=function(r,f,u){var s,h,d,y,m;for(f=f||.01,u=u||.01,d=0;d<r.length;d++){for(y=r[d],m=0;m<y.starts.length;m++)h=y.starts[m],t(y,h,"edge",f,u);for(s=0;Object.keys(y.crossings).length&&s<1e4;)s++,h=Object.keys(y.crossings)[0].split(",").map(Number),t(y,h,void 0,f,u);s===1e4&&l.log("Infinite loop in contour?")}};function c(i,r,f,u){return Math.abs(i[0]-r[0])<f&&Math.abs(i[1]-r[1])<u}function p(i,r){var f=i[2]-r[2],u=i[3]-r[3];return Math.sqrt(f*f+u*u)}function t(i,r,f,u,s){var h=r.join(","),d=i.crossings[h],y=n(d,f,r),m=[a(i,r,[-y[0],-y[1]])],g=i.z.length,x=i.z[0].length,A=r.slice(),b=y.slice(),S;for(S=0;S<1e4;S++){if(d>20?(d=o.CHOOSESADDLE[d][(y[0]||y[1])<0?0:1],i.crossings[h]=o.SADDLEREMAINDER[d]):delete i.crossings[h],y=o.NEWDELTA[d],!y){l.log("Found bad marching index:",d,r,i.level);break}m.push(a(i,r,y)),r[0]+=y[0],r[1]+=y[1],h=r.join(","),c(m[m.length-1],m[m.length-2],u,s)&&m.pop();var w=y[0]&&(r[0]<0||r[0]>x-2)||y[1]&&(r[1]<0||r[1]>g-2),T=r[0]===A[0]&&r[1]===A[1]&&y[0]===b[0]&&y[1]===b[1];if(T||f&&w)break;d=i.crossings[h]}S===1e4&&l.log("Infinite loop in contour?");var _=c(m[0],m[m.length-1],u,s),v=0,P=.2*i.smoothing,M=[],E=0,D,N,O,I,F,V,U,j,Z,te,re;for(S=1;S<m.length;S++)U=p(m[S],m[S-1]),v+=U,M.push(U);var W=v/M.length*P;function J(se){return m[se%m.length]}for(S=m.length-2;S>=E;S--)if(D=M[S],D<W){for(O=0,N=S-1;N>=E&&D+M[N]<W;N--)D+=M[N];if(_&&S===m.length-2)for(O=0;O<N&&D+M[O]<W;O++)D+=M[O];F=S-N+O+1,V=Math.floor((S+N+O+2)/2),!_&&S===m.length-2?I=m[m.length-1]:!_&&N===-1?I=m[0]:F%2?I=J(V):I=[(J(V)[0]+J(V+1)[0])/2,(J(V)[1]+J(V+1)[1])/2],m.splice(N+1,S-N+1,I),S=N+1,O&&(E=O),_&&(S===m.length-2?m[O]=m[m.length-1]:S===0&&(m[m.length-1]=m[0]))}for(m.splice(0,E),S=0;S<m.length;S++)m[S].length=2;if(!(m.length<2))if(_)m.pop(),i.paths.push(m);else{f||l.log("Unclosed interior contour?",i.level,A.join(","),m.join("L"));var le=!1;for(j=0;j<i.edgepaths.length;j++)if(te=i.edgepaths[j],!le&&c(te[0],m[m.length-1],u,s)){m.pop(),le=!0;var ue=!1;for(Z=0;Z<i.edgepaths.length;Z++)if(re=i.edgepaths[Z],c(re[re.length-1],m[0],u,s)){ue=!0,m.shift(),i.edgepaths.splice(j,1),Z===j?i.paths.push(m.concat(re)):(Z>j&&Z--,i.edgepaths[Z]=re.concat(m,te));break}ue||(i.edgepaths[j]=m.concat(te))}for(j=0;j<i.edgepaths.length&&!le;j++)te=i.edgepaths[j],c(te[te.length-1],m[0],u,s)&&(m.shift(),i.edgepaths[j]=te.concat(m),le=!0);le||i.edgepaths.push(m)}}function n(i,r,f){var u=0,s=0;return i>20&&r?i===208||i===1114?u=f[0]===0?1:-1:s=f[1]===0?1:-1:o.BOTTOMSTART.indexOf(i)!==-1?s=1:o.LEFTSTART.indexOf(i)!==-1?u=1:o.TOPSTART.indexOf(i)!==-1?s=-1:u=-1,[u,s]}function a(i,r,f){var u=r[0]+Math.max(f[0],0),s=r[1]+Math.max(f[1],0),h=i.z[s][u],d=i.xaxis,y=i.yaxis;if(f[1]){var m=(i.level-h)/(i.z[s][u+1]-h),g=(m!==1?(1-m)*d.c2l(i.x[u]):0)+(m!==0?m*d.c2l(i.x[u+1]):0);return[d.c2p(d.l2c(g),!0),y.c2p(i.y[s],!0),u+m,s]}else{var x=(i.level-h)/(i.z[s+1][u]-h),A=(x!==1?(1-x)*y.c2l(i.y[s]):0)+(x!==0?x*y.c2l(i.y[s+1]):0);return[d.c2p(i.x[u],!0),y.c2p(y.l2c(A),!0),u,s+x]}}},{"../../lib":503,"./constants":739}],748:[function(e,k,z){var l=e("../../components/color"),o=e("../heatmap/hover");k.exports=function(p,t,n,a,i){i||(i={}),i.isContour=!0;var r=o(p,t,n,a,i);return r&&r.forEach(function(f){var u=f.trace;u.contours.type==="constraint"&&(u.fillcolor&&l.opacity(u.fillcolor)?f.color=l.addOpacity(u.fillcolor,1):u.contours.showlines&&l.opacity(u.line.color)&&(f.color=l.addOpacity(u.line.color,1)))}),r}},{"../../components/color":366,"../heatmap/hover":799}],749:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot").plot,style:e("./style"),colorbar:e("./colorbar"),hoverPoints:e("./hover"),moduleType:"trace",name:"contour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":735,"./calc":736,"./colorbar":738,"./defaults":744,"./hover":748,"./plot":753,"./style":755}],750:[function(e,k,z){var l=e("../../lib");k.exports=function(c,p,t,n){n||(n={});var a=c("contours.showlabels");if(a){var i=p.font;l.coerceFont(c,"contours.labelfont",{family:i.family,size:i.size,color:t}),c("contours.labelformat")}n.hasHover!==!1&&c("zhoverformat")}},{"../../lib":503}],751:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../components/colorscale"),c=e("./end_plus");k.exports=function(t){var n=t.contours,a=n.start,i=c(n),r=n.size||1,f=Math.floor((i-a)/r)+1,u=n.coloring==="lines"?0:1,s=o.extractOpts(t);isFinite(r)||(r=1,f=1);var h=s.reversescale?o.flipScale(s.colorscale):s.colorscale,d=h.length,y=new Array(d),m=new Array(d),g,x;if(n.coloring==="heatmap"){var A=s.min,b=s.max;for(x=0;x<d;x++)g=h[x],y[x]=g[0]*(b-A)+A,m[x]=g[1];var S=l.extent([A,b,n.start,n.start+r*(f-1)]),w=S[A<b?0:1],T=S[A<b?1:0];w!==A&&(y.splice(0,0,w),m.splice(0,0,m[0])),T!==b&&(y.push(T),m.push(m[m.length-1]))}else for(x=0;x<d;x++)g=h[x],y[x]=(g[0]*(f+u-1)-u/2)*r+a,m[x]=g[1];return o.makeColorScaleFunc({domain:y,range:m},{noNumericCheck:!0})}},{"../../components/colorscale":378,"./end_plus":746,"@plotly/d3":58}],752:[function(e,k,z){var l=e("./constants");k.exports=function(p){var t=p[0].z,n=t.length,a=t[0].length,i=n===2||a===2,r,f,u,s,h,d,y,m,g;for(f=0;f<n-1;f++)for(s=[],f===0&&(s=s.concat(l.BOTTOMSTART)),f===n-2&&(s=s.concat(l.TOPSTART)),r=0;r<a-1;r++)for(u=s.slice(),r===0&&(u=u.concat(l.LEFTSTART)),r===a-2&&(u=u.concat(l.RIGHTSTART)),h=r+","+f,d=[[t[f][r],t[f][r+1]],[t[f+1][r],t[f+1][r+1]]],g=0;g<p.length;g++)m=p[g],y=o(m.level,d),!!y&&(m.crossings[h]=y,u.indexOf(y)!==-1&&(m.starts.push([r,f]),i&&u.indexOf(y,u.indexOf(y)+1)!==-1&&m.starts.push([r,f])))};function o(c,p){var t=(p[0][0]>c?0:1)+(p[0][1]>c?0:2)+(p[1][1]>c?0:4)+(p[1][0]>c?0:8);if(t===5||t===10){var n=(p[0][0]+p[0][1]+p[1][0]+p[1][1])/4;return c>n?t===5?713:1114:t===5?104:208}return t===15?0:t}},{"./constants":739}],753:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../lib"),c=e("../../components/drawing"),p=e("../../components/colorscale"),t=e("../../lib/svg_text_utils"),n=e("../../plots/cartesian/axes"),a=e("../../plots/cartesian/set_convert"),i=e("../heatmap/plot"),r=e("./make_crossings"),f=e("./find_all_paths"),u=e("./empty_pathinfo"),s=e("./convert_to_constraints"),h=e("./close_boundaries"),d=e("./constants"),y=d.LABELOPTIMIZER;z.plot=function(_,v,P,M){var E=v.xaxis,D=v.yaxis;o.makeTraceGroups(M,P,"contour").each(function(N){var O=l.select(this),I=N[0],F=I.trace,V=I.x,U=I.y,j=F.contours,Z=u(j,v,I),te=o.ensureSingle(O,"g","heatmapcoloring"),re=[];j.coloring==="heatmap"&&(re=[N]),i(_,v,re,te),r(Z),f(Z);var W=E.c2p(V[0],!0),J=E.c2p(V[V.length-1],!0),le=D.c2p(U[0],!0),ue=D.c2p(U[U.length-1],!0),se=[[W,ue],[J,ue],[J,le],[W,le]],G=Z;j.type==="constraint"&&(G=s(Z,j._operation)),m(O,se,j),g(O,G,se,j),A(O,Z,_,I,j),S(O,v,_,I,se)})};function m(T,_,v){var P=o.ensureSingle(T,"g","contourbg"),M=P.selectAll("path").data(v.coloring==="fill"?[0]:[]);M.enter().append("path"),M.exit().remove(),M.attr("d","M"+_.join("L")+"Z").style("stroke","none")}function g(T,_,v,P){var M=P.coloring==="fill"||P.type==="constraint"&&P._operation!=="=",E="M"+v.join("L")+"Z";M&&h(_,P);var D=o.ensureSingle(T,"g","contourfill"),N=D.selectAll("path").data(M?_:[]);N.enter().append("path"),N.exit().remove(),N.each(function(O){var I=(O.prefixBoundary?E:"")+x(O,v);I?l.select(this).attr("d",I).style("stroke","none"):l.select(this).remove()})}function x(T,_){var v="",P=0,M=T.edgepaths.map(function(W,J){return J}),E=!0,D,N,O,I,F,V;function U(W){return Math.abs(W[1]-_[0][1])<.01}function j(W){return Math.abs(W[1]-_[2][1])<.01}function Z(W){return Math.abs(W[0]-_[0][0])<.01}function te(W){return Math.abs(W[0]-_[2][0])<.01}for(;M.length;){for(V=c.smoothopen(T.edgepaths[P],T.smoothing),v+=E?V:V.replace(/^M/,"L"),M.splice(M.indexOf(P),1),D=T.edgepaths[P][T.edgepaths[P].length-1],I=-1,O=0;O<4;O++){if(!D){o.log("Missing end?",P,T);break}for(U(D)&&!te(D)?N=_[1]:Z(D)?N=_[0]:j(D)?N=_[3]:te(D)&&(N=_[2]),F=0;F<T.edgepaths.length;F++){var re=T.edgepaths[F][0];Math.abs(D[0]-N[0])<.01?Math.abs(D[0]-re[0])<.01&&(re[1]-D[1])*(N[1]-re[1])>=0&&(N=re,I=F):Math.abs(D[1]-N[1])<.01?Math.abs(D[1]-re[1])<.01&&(re[0]-D[0])*(N[0]-re[0])>=0&&(N=re,I=F):o.log("endpt to newendpt is not vert. or horz.",D,N,re)}if(D=N,I>=0)break;v+="L"+N}if(I===T.edgepaths.length){o.log("unclosed perimeter path");break}P=I,E=M.indexOf(P)===-1,E&&(P=M[0],v+="Z")}for(P=0;P<T.paths.length;P++)v+=c.smoothclosed(T.paths[P],T.smoothing);return v}function A(T,_,v,P,M){var E=o.ensureSingle(T,"g","contourlines"),D=M.showlines!==!1,N=M.showlabels,O=D&&N,I=z.createLines(E,D||N,_),F=z.createLineClip(E,O,v,P.trace.uid),V=T.selectAll("g.contourlabels").data(N?[0]:[]);if(V.exit().remove(),V.enter().append("g").classed("contourlabels",!0),N){var U=[],j=[];o.clearLocationCache();var Z=z.labelFormatter(v,P),te=c.tester.append("text").attr("data-notex",1).call(c.font,M.labelfont),re=_[0].xaxis,W=_[0].yaxis,J=re._length,le=W._length,ue=re.range,se=W.range,G=o.aggNums(Math.min,null,P.x),Y=o.aggNums(Math.max,null,P.x),ee=o.aggNums(Math.min,null,P.y),$=o.aggNums(Math.max,null,P.y),K=Math.max(re.c2p(G,!0),0),Q=Math.min(re.c2p(Y,!0),J),ae=Math.max(W.c2p($,!0),0),ie=Math.min(W.c2p(ee,!0),le),oe={};ue[0]<ue[1]?(oe.left=K,oe.right=Q):(oe.left=Q,oe.right=K),se[0]<se[1]?(oe.top=ae,oe.bottom=ie):(oe.top=ie,oe.bottom=ae),oe.middle=(oe.top+oe.bottom)/2,oe.center=(oe.left+oe.right)/2,U.push([[oe.left,oe.top],[oe.right,oe.top],[oe.right,oe.bottom],[oe.left,oe.bottom]]);var fe=Math.sqrt(J*J+le*le),ye=d.LABELDISTANCE*fe/Math.max(1,_.length/d.LABELINCREASE);I.each(function(ce){var me=z.calcTextOpts(ce.level,Z,te,v);l.select(this).selectAll("path").each(function(){var xe=this,ke=o.getVisibleSegment(xe,oe,me.height/2);if(!!ke&&!(ke.len<(me.width+me.height)*d.LABELMIN))for(var Ae=Math.min(Math.ceil(ke.len/ye),d.LABELMAX),Oe=0;Oe<Ae;Oe++){var He=z.findBestTextLocation(xe,ke,me,j,oe);if(!He)break;z.addLabelData(He,me,j,U)}})}),te.remove(),z.drawLabels(V,j,v,F,O?U:null)}N&&!D&&I.remove()}z.createLines=function(T,_,v){var P=v[0].smoothing,M=T.selectAll("g.contourlevel").data(_?v:[]);if(M.exit().remove(),M.enter().append("g").classed("contourlevel",!0),_){var E=M.selectAll("path.openline").data(function(N){return N.pedgepaths||N.edgepaths});E.exit().remove(),E.enter().append("path").classed("openline",!0),E.attr("d",function(N){return c.smoothopen(N,P)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var D=M.selectAll("path.closedline").data(function(N){return N.ppaths||N.paths});D.exit().remove(),D.enter().append("path").classed("closedline",!0),D.attr("d",function(N){return c.smoothclosed(N,P)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return M},z.createLineClip=function(T,_,v,P){var M=v._fullLayout._clips,E=_?"clipline"+P:null,D=M.selectAll("#"+E).data(_?[0]:[]);return D.exit().remove(),D.enter().append("clipPath").classed("contourlineclip",!0).attr("id",E),c.setClipUrl(T,E,v),D},z.labelFormatter=function(T,_){var v=T._fullLayout,P=_.trace,M=P.contours,E={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(M.labelformat)E.tickformat=M.labelformat,a(E,v);else{var D=p.extractOpts(P);if(D&&D.colorbar&&D.colorbar._axis)E=D.colorbar._axis;else{if(M.type==="constraint"){var N=M.value;Array.isArray(N)?E.range=[N[0],N[N.length-1]]:E.range=[N,N]}else E.range=[M.start,M.end],E.nticks=(M.end-M.start)/M.size;E.range[0]===E.range[1]&&(E.range[1]+=E.range[0]||1),E.nticks||(E.nticks=1e3),a(E,v),n.prepTicks(E),E._tmin=null,E._tmax=null}}return function(O){return n.tickText(E,O).text}},z.calcTextOpts=function(T,_,v,P){var M=_(T);v.text(M).call(t.convertToTspans,P);var E=v.node(),D=c.bBox(E,!0);return{text:M,width:D.width,height:D.height,fontSize:+E.style["font-size"].replace("px",""),level:T,dy:(D.top+D.bottom)/2}},z.findBestTextLocation=function(T,_,v,P,M){var E=v.width,D,N,O,I,F;_.isClosed?(N=_.len/y.INITIALSEARCHPOINTS,D=_.min+N/2,O=_.max):(N=(_.len-E)/(y.INITIALSEARCHPOINTS+1),D=_.min+N+E/2,O=_.max-(N+E)/2);for(var V=1/0,U=0;U<y.ITERATIONS;U++){for(var j=D;j<O;j+=N){var Z=o.getTextLocation(T,_.total,j,E),te=b(Z,v,P,M);te<V&&(V=te,F=Z,I=j)}if(V>y.MAXCOST*2)break;U&&(N/=2),D=I-N/2,O=D+N*1.5}if(V<=y.MAXCOST)return F};function b(T,_,v,P){var M=_.width/2,E=_.height/2,D=T.x,N=T.y,O=T.theta,I=Math.cos(O)*M,F=Math.sin(O)*M,V=(D>P.center?P.right-D:D-P.left)/(I+Math.abs(Math.sin(O)*E)),U=(N>P.middle?P.bottom-N:N-P.top)/(Math.abs(F)+Math.cos(O)*E);if(V<1||U<1)return 1/0;var j=y.EDGECOST*(1/(V-1)+1/(U-1));j+=y.ANGLECOST*O*O;for(var Z=D-I,te=N-F,re=D+I,W=N+F,J=0;J<v.length;J++){var le=v[J],ue=Math.cos(le.theta)*le.width/2,se=Math.sin(le.theta)*le.width/2,G=o.segmentDistance(Z,te,re,W,le.x-ue,le.y-se,le.x+ue,le.y+se)*2/(_.height+le.height),Y=le.level===_.level,ee=Y?y.SAMELEVELDISTANCE:1;if(G<=ee)return 1/0;var $=y.NEIGHBORCOST*(Y?y.SAMELEVELFACTOR:1);j+=$/(G-ee)}return j}z.addLabelData=function(T,_,v,P){var M=_.fontSize,E=_.width+M/3,D=Math.max(0,_.height-M/3),N=T.x,O=T.y,I=T.theta,F=Math.sin(I),V=Math.cos(I),U=function(Z,te){return[N+Z*V-te*F,O+Z*F+te*V]},j=[U(-E/2,-D/2),U(-E/2,D/2),U(E/2,D/2),U(E/2,-D/2)];v.push({text:_.text,x:N,y:O,dy:_.dy,theta:I,level:_.level,width:E,height:D}),P.push(j)},z.drawLabels=function(T,_,v,P,M){var E=T.selectAll("text").data(_,function(I){return I.text+","+I.x+","+I.y+","+I.theta});if(E.exit().remove(),E.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(I){var F=I.x+Math.sin(I.theta)*I.dy,V=I.y-Math.cos(I.theta)*I.dy;l.select(this).text(I.text).attr({x:F,y:V,transform:"rotate("+180*I.theta/Math.PI+" "+F+" "+V+")"}).call(t.convertToTspans,v)}),M){for(var D="",N=0;N<M.length;N++)D+="M"+M[N].join("L")+"Z";var O=o.ensureSingle(P,"path","");O.attr("d",D)}};function S(T,_,v,P,M){var E=P.trace,D=v._fullLayout._clips,N="clip"+E.uid,O=D.selectAll("#"+N).data(E.connectgaps?[]:[0]);if(O.enter().append("clipPath").classed("contourclip",!0).attr("id",N),O.exit().remove(),E.connectgaps===!1){var I={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:_.xaxis,yaxis:_.yaxis,x:P.x,y:P.y,z:w(P),smoothing:0};r([I]),f([I]),h([I],{type:"levels"});var F=o.ensureSingle(O,"path","");F.attr("d",(I.prefixBoundary?"M"+M.join("L")+"Z":"")+x(I,M))}else N=null;c.setClipUrl(T,N,v)}function w(T){var _=T.trace._emptypoints,v=[],P=T.z.length,M=T.z[0].length,E,D=[],N;for(E=0;E<M;E++)D.push(1);for(E=0;E<P;E++)v.push(D.slice());for(E=0;E<_.length;E++)N=_[E],v[N[0]][N[1]]=0;return T.zmask=v,v}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/set_convert":576,"../heatmap/plot":804,"./close_boundaries":737,"./constants":739,"./convert_to_constraints":743,"./empty_pathinfo":745,"./find_all_paths":747,"./make_crossings":752,"@plotly/d3":58}],754:[function(e,k,z){var l=e("../../plots/cartesian/axes"),o=e("../../lib");k.exports=function(t,n){var a=t.contours;if(t.autocontour){var i=t.zmin,r=t.zmax;(t.zauto||i===void 0)&&(i=o.aggNums(Math.min,null,n)),(t.zauto||r===void 0)&&(r=o.aggNums(Math.max,null,n));var f=c(i,r,t.ncontours);a.size=f.dtick,a.start=l.tickFirst(f),f.range.reverse(),a.end=l.tickFirst(f),a.start===i&&(a.start+=a.size),a.end===r&&(a.end-=a.size),a.start>a.end&&(a.start=a.end=(a.start+a.end)/2),t._input.contours||(t._input.contours={}),o.extendFlat(t._input.contours,{start:a.start,end:a.end,size:a.size}),t._input.autocontour=!0}else if(a.type!=="constraint"){var u=a.start,s=a.end,h=t._input.contours;if(u>s&&(a.start=h.start=s,s=a.end=h.end=u,u=a.start),!(a.size>0)){var d;u===s?d=1:d=c(u,s,t.ncontours).dtick,h.size=a.size=d}}};function c(p,t,n){var a={type:"linear",range:[p,t]};return l.autoTicks(a,(t-p)/(n||15)),a}},{"../../lib":503,"../../plots/cartesian/axes":554}],755:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../components/drawing"),c=e("../heatmap/style"),p=e("./make_color_map");k.exports=function(n){var a=l.select(n).selectAll("g.contour");a.style("opacity",function(i){return i[0].trace.opacity}),a.each(function(i){var r=l.select(this),f=i[0].trace,u=f.contours,s=f.line,h=u.size||1,d=u.start,y=u.type==="constraint",m=!y&&u.coloring==="lines",g=!y&&u.coloring==="fill",x=m||g?p(f):null;r.selectAll("g.contourlevel").each(function(S){l.select(this).selectAll("path").call(o.lineGroupStyle,s.width,m?x(S.level):s.color,s.dash)});var A=u.labelfont;if(r.selectAll("g.contourlabels text").each(function(S){o.font(l.select(this),{family:A.family,size:A.size,color:A.color||(m?x(S.level):s.color)})}),y)r.selectAll("g.contourfill path").style("fill",f.fillcolor);else if(g){var b;r.selectAll("g.contourfill path").style("fill",function(S){return b===void 0&&(b=S.level),x(S.level+.5*h)}),b===void 0&&(b=d),r.selectAll("g.contourbg path").style("fill",x(b-.5*h))}}),c(n)}},{"../../components/drawing":388,"../heatmap/style":805,"./make_color_map":751,"@plotly/d3":58}],756:[function(e,k,z){var l=e("../../components/colorscale/defaults"),o=e("./label_defaults");k.exports=function(p,t,n,a,i){var r=n("contours.coloring"),f,u="";r==="fill"&&(f=n("contours.showlines")),f!==!1&&(r!=="lines"&&(u=n("line.color","#000")),n("line.width",.5),n("line.dash")),r!=="none"&&(p.showlegend!==!0&&(t.showlegend=!1),t._dfltShowLegend=!1,l(p,t,a,n,{prefix:"",cLetter:"z"})),n("line.smoothing"),o(n,a,u,i)}},{"../../components/colorscale/defaults":376,"./label_defaults":750}],757:[function(e,k,z){var l=e("../heatmap/attributes"),o=e("../contour/attributes"),c=e("../../components/colorscale/attributes"),p=e("../../lib/extend").extendFlat,t=o.contours;k.exports=p({carpet:{valType:"string",editType:"calc"},z:l.z,a:l.x,a0:l.x0,da:l.dx,b:l.y,b0:l.y0,db:l.dy,text:l.text,hovertext:l.hovertext,transpose:l.transpose,atype:l.xtype,btype:l.ytype,fillcolor:o.fillcolor,autocontour:o.autocontour,ncontours:o.ncontours,contours:{type:t.type,start:t.start,end:t.end,size:t.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:t.showlines,showlabels:t.showlabels,labelfont:t.labelfont,labelformat:t.labelformat,operation:t.operation,value:t.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:o.line.color,width:o.line.width,dash:o.line.dash,smoothing:o.line.smoothing,editType:"plot"},transforms:void 0},c("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../contour/attributes":735,"../heatmap/attributes":792}],758:[function(e,k,z){var l=e("../../components/colorscale/calc"),o=e("../../lib"),c=e("../heatmap/convert_column_xyz"),p=e("../heatmap/clean_2d_array"),t=e("../heatmap/interp2d"),n=e("../heatmap/find_empties"),a=e("../heatmap/make_bound_array"),i=e("./defaults"),r=e("../carpet/lookup_carpetid"),f=e("../contour/set_contours");k.exports=function(h,d){var y=d._carpetTrace=r(h,d);if(!(!y||!y.visible||y.visible==="legendonly")){if(!d.a||!d.b){var m=h.data[y.index],g=h.data[d.index];g.a||(g.a=m.a),g.b||(g.b=m.b),i(g,d,d._defaultColor,h._fullLayout)}var x=u(h,d);return f(d,d._z),x}};function u(s,h){var d=h._carpetTrace,y=d.aaxis,m=d.baxis,g,x,A,b,S,w,T;y._minDtick=0,m._minDtick=0,o.isArray1D(h.z)&&c(h,y,m,"a","b",["z"]),g=h._a=h._a||h.a,b=h._b=h._b||h.b,g=g?y.makeCalcdata(h,"_a"):[],b=b?m.makeCalcdata(h,"_b"):[],x=h.a0||0,A=h.da||1,S=h.b0||0,w=h.db||1,T=h._z=p(h._z||h.z,h.transpose),h._emptypoints=n(T),t(T,h._emptypoints);var _=o.maxRowLength(T),v=h.xtype==="scaled"?"":g,P=a(h,v,x,A,_,y),M=h.ytype==="scaled"?"":b,E=a(h,M,S,w,T.length,m),D={a:P,b:E,z:T};return h.contours.type==="levels"&&h.contours.coloring!=="none"&&l(s,h,{vals:T,containerStr:"",cLetter:"z"}),[D]}},{"../../components/colorscale/calc":374,"../../lib":503,"../carpet/lookup_carpetid":708,"../contour/set_contours":754,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"../heatmap/find_empties":798,"../heatmap/interp2d":801,"../heatmap/make_bound_array":803,"./defaults":759}],759:[function(e,k,z){var l=e("../../lib"),o=e("../heatmap/xyz_defaults"),c=e("./attributes"),p=e("../contour/constraint_defaults"),t=e("../contour/contours_defaults"),n=e("../contour/style_defaults");k.exports=function(i,r,f,u){function s(m,g){return l.coerce(i,r,c,m,g)}function h(m){return l.coerce2(i,r,c,m)}if(s("carpet"),i.a&&i.b){var d=o(i,r,s,u,"a","b");if(!d){r.visible=!1;return}s("text");var y=s("contours.type")==="constraint";y?p(i,r,s,u,f,{hasHover:!1}):(t(i,r,s,h),n(i,r,s,u,{hasHover:!1}))}else r._defaultColor=f,r._length=null}},{"../../lib":503,"../contour/constraint_defaults":740,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/xyz_defaults":807,"./attributes":757}],760:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../contour/colorbar"),calc:e("./calc"),plot:e("./plot"),style:e("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"../contour/colorbar":738,"../contour/style":755,"./attributes":757,"./calc":758,"./defaults":759,"./plot":761}],761:[function(e,k,z){var l=e("@plotly/d3"),o=e("../carpet/map_1d_array"),c=e("../carpet/makepath"),p=e("../../components/drawing"),t=e("../../lib"),n=e("../contour/make_crossings"),a=e("../contour/find_all_paths"),i=e("../contour/plot"),r=e("../contour/constants"),f=e("../contour/convert_to_constraints"),u=e("../contour/empty_pathinfo"),s=e("../contour/close_boundaries"),h=e("../carpet/lookup_carpetid"),d=e("../carpet/axis_aligned_line");k.exports=function(v,P,M,E){var D=P.xaxis,N=P.yaxis;t.makeTraceGroups(E,M,"contour").each(function(O){var I=l.select(this),F=O[0],V=F.trace,U=V._carpetTrace=h(v,V),j=v.calcdata[U.index][0];if(!U.visible||U.visible==="legendonly")return;var Z=F.a,te=F.b,re=V.contours,W=u(re,P,F),J=re.type==="constraint",le=re._operation,ue=J?le==="="?"lines":"fill":re.coloring;function se(ye){var ce=U.ab2xy(ye[0],ye[1],!0);return[D.c2p(ce[0]),N.c2p(ce[1])]}var G=[[Z[0],te[te.length-1]],[Z[Z.length-1],te[te.length-1]],[Z[Z.length-1],te[0]],[Z[0],te[0]]];n(W);var Y=(Z[Z.length-1]-Z[0])*1e-8,ee=(te[te.length-1]-te[0])*1e-8;a(W,Y,ee);var $=W;re.type==="constraint"&&($=f(W,le)),y(W,se);var K,Q,ae,ie,oe=[];for(ie=j.clipsegments.length-1;ie>=0;ie--)K=j.clipsegments[ie],Q=o([],K.x,D.c2p),ae=o([],K.y,N.c2p),Q.reverse(),ae.reverse(),oe.push(c(Q,ae,K.bicubic));var fe="M"+oe.join("L")+"Z";S(I,j.clipsegments,D,N,J,ue),w(V,I,D,N,$,G,se,U,j,ue,fe),m(I,W,v,F,re,P,U),p.setClipUrl(I,U._clipPathId,v)})};function y(_,v){var P,M,E,D,N,O,I,F,V;for(P=0;P<_.length;P++){for(D=_[P],N=D.pedgepaths=[],O=D.ppaths=[],M=0;M<D.edgepaths.length;M++){for(V=D.edgepaths[M],I=[],E=0;E<V.length;E++)I[E]=v(V[E]);N.push(I)}for(M=0;M<D.paths.length;M++){for(V=D.paths[M],F=[],E=0;E<V.length;E++)F[E]=v(V[E]);O.push(F)}}}function m(_,v,P,M,E,D,N){var O=t.ensureSingle(_,"g","contourlines"),I=E.showlines!==!1,F=E.showlabels,V=I&&F,U=i.createLines(O,I||F,v),j=i.createLineClip(O,V,P,M.trace.uid),Z=_.selectAll("g.contourlabels").data(F?[0]:[]);if(Z.exit().remove(),Z.enter().append("g").classed("contourlabels",!0),F){var te=D.xaxis,re=D.yaxis,W=te._length,J=re._length,le=[[[0,0],[W,0],[W,J],[0,J]]],ue=[];t.clearLocationCache();var se=i.labelFormatter(P,M),G=p.tester.append("text").attr("data-notex",1).call(p.font,E.labelfont),Y={left:0,right:W,center:W/2,top:0,bottom:J,middle:J/2},ee=Math.sqrt(W*W+J*J),$=r.LABELDISTANCE*ee/Math.max(1,v.length/r.LABELINCREASE);U.each(function(K){var Q=i.calcTextOpts(K.level,se,G,P);l.select(this).selectAll("path").each(function(ae){var ie=this,oe=t.getVisibleSegment(ie,Y,Q.height/2);if(!!oe&&(g(ie,ae,K,oe,N,Q.height),!(oe.len<(Q.width+Q.height)*r.LABELMIN)))for(var fe=Math.min(Math.ceil(oe.len/$),r.LABELMAX),ye=0;ye<fe;ye++){var ce=i.findBestTextLocation(ie,oe,Q,ue,Y);if(!ce)break;i.addLabelData(ce,Q,ue,le)}})}),G.remove(),i.drawLabels(Z,ue,P,j,V?le:null)}F&&!I&&U.remove()}function g(_,v,P,M,E,D){for(var N,O=0;O<P.pedgepaths.length;O++)v===P.pedgepaths[O]&&(N=P.edgepaths[O]);if(!N)return;var I=E.a[0],F=E.a[E.a.length-1],V=E.b[0],U=E.b[E.b.length-1];function j(J,le){var ue=0,se,G=.1;return(Math.abs(J[0]-I)<G||Math.abs(J[0]-F)<G)&&(se=A(E.dxydb_rough(J[0],J[1],G)),ue=Math.max(ue,D*b(le,se)/2)),(Math.abs(J[1]-V)<G||Math.abs(J[1]-U)<G)&&(se=A(E.dxyda_rough(J[0],J[1],G)),ue=Math.max(ue,D*b(le,se)/2)),ue}var Z=x(_,0,1),te=x(_,M.total,M.total-1),re=j(N[0],Z),W=M.total-j(N[N.length-1],te);M.min<re&&(M.min=re),M.max>W&&(M.max=W),M.len=M.max-M.min}function x(_,v,P){var M=_.getPointAtLength(v),E=_.getPointAtLength(P),D=E.x-M.x,N=E.y-M.y,O=Math.sqrt(D*D+N*N);return[D/O,N/O]}function A(_){var v=Math.sqrt(_[0]*_[0]+_[1]*_[1]);return[_[0]/v,_[1]/v]}function b(_,v){var P=Math.abs(_[0]*v[0]+_[1]*v[1]),M=Math.sqrt(1-P*P);return M/P}function S(_,v,P,M,E,D){var N,O,I,F,V=t.ensureSingle(_,"g","contourbg"),U=V.selectAll("path").data(D==="fill"&&!E?[0]:[]);U.enter().append("path"),U.exit().remove();var j=[];for(F=0;F<v.length;F++)N=v[F],O=o([],N.x,P.c2p),I=o([],N.y,M.c2p),j.push(c(O,I,N.bicubic));U.attr("d","M"+j.join("L")+"Z").style("stroke","none")}function w(_,v,P,M,E,D,N,O,I,F,V){var U=F==="fill";U&&s(E,_.contours);var j=t.ensureSingle(v,"g","contourfill"),Z=j.selectAll("path").data(U?E:[]);Z.enter().append("path"),Z.exit().remove(),Z.each(function(te){var re=(te.prefixBoundary?V:"")+T(_,te,D,N,O,I,P,M);re?l.select(this).attr("d",re).style("stroke","none"):l.select(this).remove()})}function T(_,v,P,M,E,D,N,O){var I,F="",V=v.edgepaths.map(function(ae,ie){return ie}),U=!0,j,Z,te,re,W,J,le=Math.abs(P[0][0]-P[2][0])*1e-4,ue=Math.abs(P[0][1]-P[2][1])*1e-4;function se(ae){return Math.abs(ae[1]-P[0][1])<ue}function G(ae){return Math.abs(ae[1]-P[2][1])<ue}function Y(ae){return Math.abs(ae[0]-P[0][0])<le}function ee(ae){return Math.abs(ae[0]-P[2][0])<le}function $(ae,ie){var oe,fe,ye,ce,me="";for(se(ae)&&!ee(ae)||G(ae)&&!Y(ae)?(ce=E.aaxis,ye=d(E,D,[ae[0],ie[0]],.5*(ae[1]+ie[1]))):(ce=E.baxis,ye=d(E,D,.5*(ae[0]+ie[0]),[ae[1],ie[1]])),oe=1;oe<ye.length;oe++)for(me+=ce.smoothing?"C":"L",fe=0;fe<ye[oe].length;fe++){var xe=ye[oe][fe];me+=[N.c2p(xe[0]),O.c2p(xe[1])]+" "}return me}for(I=0,j=null;V.length;){var K=v.edgepaths[I][0];for(j&&(F+=$(j,K)),J=p.smoothopen(v.edgepaths[I].map(M),v.smoothing),F+=U?J:J.replace(/^M/,"L"),V.splice(V.indexOf(I),1),j=v.edgepaths[I][v.edgepaths[I].length-1],re=-1,te=0;te<4;te++){if(!j){t.log("Missing end?",I,v);break}for(se(j)&&!ee(j)?Z=P[1]:Y(j)?Z=P[0]:G(j)?Z=P[3]:ee(j)&&(Z=P[2]),W=0;W<v.edgepaths.length;W++){var Q=v.edgepaths[W][0];Math.abs(j[0]-Z[0])<le?Math.abs(j[0]-Q[0])<le&&(Q[1]-j[1])*(Z[1]-Q[1])>=0&&(Z=Q,re=W):Math.abs(j[1]-Z[1])<ue?Math.abs(j[1]-Q[1])<ue&&(Q[0]-j[0])*(Z[0]-Q[0])>=0&&(Z=Q,re=W):t.log("endpt to newendpt is not vert. or horz.",j,Z,Q)}if(re>=0)break;F+=$(j,Z),j=Z}if(re===v.edgepaths.length){t.log("unclosed perimeter path");break}I=re,U=V.indexOf(I)===-1,U&&(I=V[0],F+=$(j,Z)+"Z",j=null)}for(I=0;I<v.paths.length;I++)F+=p.smoothclosed(v.paths[I].map(M),v.smoothing);return F}},{"../../components/drawing":388,"../../lib":503,"../carpet/axis_aligned_line":692,"../carpet/lookup_carpetid":708,"../carpet/makepath":709,"../carpet/map_1d_array":710,"../contour/close_boundaries":737,"../contour/constants":739,"../contour/convert_to_constraints":743,"../contour/empty_pathinfo":745,"../contour/find_all_paths":747,"../contour/make_crossings":752,"../contour/plot":753,"@plotly/d3":58}],762:[function(e,k,z){var l=e("../../components/colorscale/attributes"),o=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../../plots/attributes"),p=e("../scattermapbox/attributes"),t=e("../../lib/extend").extendFlat;k.exports=t({lon:p.lon,lat:p.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:p.text,hovertext:p.hovertext,hoverinfo:t({},c.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:o(),showlegend:t({},c.showlegend,{dflt:!1})},l("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattermapbox/attributes":991}],763:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../lib").isArrayOrTypedArray,c=e("../../constants/numerical").BADNUM,p=e("../../components/colorscale/calc"),t=e("../../lib")._;k.exports=function(a,i){for(var r=i._length,f=new Array(r),u=i.z,s=o(u)&&u.length,h=0;h<r;h++){var d=f[h]={},y=i.lon[h],m=i.lat[h];if(d.lonlat=l(y)&&l(m)?[+y,+m]:[c,c],s){var g=u[h];d.z=l(g)?g:c}}return p(a,i,{vals:s?u:[0,1],containerStr:"",cLetter:"z"}),r&&(f[0].t={labels:{lat:t(a,"lat:")+" ",lon:t(a,"lon:")+" "}}),f}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],764:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../lib"),c=e("../../components/color"),p=e("../../components/colorscale"),t=e("../../constants/numerical").BADNUM,n=e("../../lib/geojson_utils").makeBlank;k.exports=function(i){var r=i[0].trace,f=r.visible===!0&&r._length!==0,u={layout:{visibility:"none"},paint:{}},s=r._opts={heatmap:u,geojson:n()};if(!f)return s;var h=[],d,y=r.z,m=r.radius,g=o.isArrayOrTypedArray(y)&&y.length,x=o.isArrayOrTypedArray(m);for(d=0;d<i.length;d++){var A=i[d],b=A.lonlat;if(b[0]!==t){var S={};if(g){var w=A.z;S.z=w!==t?w:0}x&&(S.r=l(m[d])&&m[d]>0?+m[d]:0),h.push({type:"Feature",geometry:{type:"Point",coordinates:b},properties:S})}}var T=p.extractOpts(r),_=T.reversescale?p.flipScale(T.colorscale):T.colorscale,v=_[0][1],P=c.opacity(v)<1?v:c.addOpacity(v,0),M=["interpolate",["linear"],["heatmap-density"],0,P];for(d=1;d<_.length;d++)M.push(_[d][0],_[d][1]);var E=["interpolate",["linear"],["get","z"],T.min,0,T.max,1];return o.extendFlat(s.heatmap.paint,{"heatmap-weight":g?E:1/(T.max-T.min),"heatmap-color":M,"heatmap-radius":x?{type:"identity",property:"r"}:r.radius,"heatmap-opacity":r.opacity}),s.geojson={type:"FeatureCollection",features:h},s.heatmap.layout.visibility="visible",s}},{"../../components/color":366,"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"fast-isnumeric":190}],765:[function(e,k,z){var l=e("../../lib"),o=e("../../components/colorscale/defaults"),c=e("./attributes");k.exports=function(t,n,a,i){function r(h,d){return l.coerce(t,n,c,h,d)}var f=r("lon")||[],u=r("lat")||[],s=Math.min(f.length,u.length);if(!s){n.visible=!1;return}n._length=s,r("z"),r("radius"),r("below"),r("text"),r("hovertext"),r("hovertemplate"),o(t,n,i,r,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":762}],766:[function(e,k,z){k.exports=function(o,c){return o.lon=c.lon,o.lat=c.lat,o.z=c.z,o}},{}],767:[function(e,k,z){var l=e("../../plots/cartesian/axes"),o=e("../scattermapbox/hover").hoverPoints,c=e("../scattermapbox/hover").getExtraText;k.exports=function(t,n,a){var i=o(t,n,a);if(!!i){var r=i[0],f=r.cd,u=f[0].trace,s=f[r.index];if(delete r.color,"z"in s){var h=r.subplot.mockAxis;r.z=s.z,r.zLabel=l.tickText(h,h.c2l(s.z),"hover").text}return r.extraText=c(u,s,f[0].t.labels),[r]}}},{"../../plots/cartesian/axes":554,"../scattermapbox/hover":996}],768:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),formatLabels:e("../scattermapbox/format_labels"),calc:e("./calc"),plot:e("./plot"),hoverPoints:e("./hover"),eventData:e("./event_data"),getBelow:function(l,o){for(var c=o.getMapLayers(),p=0;p<c.length;p++){var t=c[p],n=t.id;if(t.type==="symbol"&&typeof n=="string"&&n.indexOf("plotly-")===-1)return n}},moduleType:"trace",name:"densitymapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":613,"../heatmap/colorbar":795,"../scattermapbox/format_labels":995,"./attributes":762,"./calc":763,"./defaults":765,"./event_data":766,"./hover":767,"./plot":769}],769:[function(e,k,z){var l=e("./convert"),o=e("../../plots/mapbox/constants").traceLayerPrefix;function c(t,n){this.type="densitymapbox",this.subplot=t,this.uid=n,this.sourceId="source-"+n,this.layerList=[["heatmap",o+n+"-heatmap"]],this.below=null}var p=c.prototype;p.update=function(t){var n=this.subplot,a=this.layerList,i=l(t),r=n.belowLookup["trace-"+this.uid];n.map.getSource(this.sourceId).setData(i.geojson),r!==this.below&&(this._removeLayers(),this._addLayers(i,r),this.below=r);for(var f=0;f<a.length;f++){var u=a[f],s=u[0],h=u[1],d=i[s];n.setOptions(h,"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&n.setOptions(h,"setPaintProperty",d.paint)}},p._addLayers=function(t,n){for(var a=this.subplot,i=this.layerList,r=this.sourceId,f=0;f<i.length;f++){var u=i[f],s=u[0],h=t[s];a.addLayer({type:s,id:u[1],source:r,layout:h.layout,paint:h.paint},n)}},p._removeLayers=function(){for(var t=this.subplot.map,n=this.layerList,a=n.length-1;a>=0;a--)t.removeLayer(n[a][1])},p.dispose=function(){var t=this.subplot.map;this._removeLayers(),t.removeSource(this.sourceId)},k.exports=function(n,a){var i=a[0].trace,r=new c(n,i.uid),f=r.sourceId,u=l(a),s=r.below=n.belowLookup["trace-"+i.uid];return n.map.addSource(f,{type:"geojson",data:u.geojson}),r._addLayers(u,s),r}},{"../../plots/mapbox/constants":611,"./convert":764}],770:[function(e,k,z){var l=e("../../lib");k.exports=function(c,p){for(var t=0;t<c.length;t++)c[t].i=t;l.mergeArray(p.text,c,"tx"),l.mergeArray(p.hovertext,c,"htx");var n=p.marker;if(n){l.mergeArray(n.opacity,c,"mo"),l.mergeArray(n.color,c,"mc");var a=n.line;a&&(l.mergeArray(a.color,c,"mlc"),l.mergeArrayCastPositive(a.width,c,"mlw"))}}},{"../../lib":503}],771:[function(e,k,z){var l=e("../bar/attributes"),o=e("../scatter/attributes").line,c=e("../../plots/attributes"),p=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../plots/template_attributes").hovertemplateAttrs,n=e("../../plots/template_attributes").texttemplateAttrs,a=e("./constants"),i=e("../../lib/extend").extendFlat,r=e("../../components/color");k.exports={x:l.x,x0:l.x0,dx:l.dx,y:l.y,y0:l.y0,dy:l.dy,xperiod:l.xperiod,yperiod:l.yperiod,xperiod0:l.xperiod0,yperiod0:l.yperiod0,xperiodalignment:l.xperiodalignment,yperiodalignment:l.yperiodalignment,xhoverformat:p("x"),yhoverformat:p("y"),hovertext:l.hovertext,hovertemplate:t({},{keys:a.eventDataKeys}),hoverinfo:i({},c.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:n({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),text:l.text,textposition:l.textposition,insidetextanchor:i({},l.insidetextanchor,{dflt:"middle"}),textangle:i({},l.textangle,{dflt:0}),textfont:l.textfont,insidetextfont:l.insidetextfont,outsidetextfont:l.outsidetextfont,constraintext:l.constraintext,cliponaxis:l.cliponaxis,orientation:i({},l.orientation,{}),offset:i({},l.offset,{arrayOk:!1}),width:i({},l.width,{arrayOk:!1}),marker:f(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:i({},o.color,{dflt:r.defaultLine}),width:i({},o.width,{dflt:0,editType:"plot"}),dash:o.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:l.offsetgroup,alignmentgroup:l.alignmentgroup};function f(){var u=i({},l.marker);return delete u.pattern,u}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926,"./constants":773}],772:[function(e,k,z){var l=e("../../plots/cartesian/axes"),o=e("../../plots/cartesian/align_period"),c=e("./arrays_to_calcdata"),p=e("../scatter/calc_selection"),t=e("../../constants/numerical").BADNUM;k.exports=function(i,r){var f=l.getFromId(i,r.xaxis||"x"),u=l.getFromId(i,r.yaxis||"y"),s,h,d,y,m,g,x,A;r.orientation==="h"?(s=f.makeCalcdata(r,"x"),d=u.makeCalcdata(r,"y"),y=o(r,u,"y",d),m=!!r.yperiodalignment,g="y"):(s=u.makeCalcdata(r,"y"),d=f.makeCalcdata(r,"x"),y=o(r,f,"x",d),m=!!r.xperiodalignment,g="x"),h=y.vals;var b=Math.min(h.length,s.length),S=new Array(b);for(r._base=[],x=0;x<b;x++){s[x]<0&&(s[x]=t);var w=!1;s[x]!==t&&x+1<b&&s[x+1]!==t&&(w=!0),A=S[x]={p:h[x],s:s[x],cNext:w},r._base[x]=-.5*A.s,m&&(S[x].orig_p=d[x],S[x][g+"End"]=y.ends[x],S[x][g+"Start"]=y.starts[x]),r.ids&&(A.id=String(r.ids[x])),x===0&&(S[0].vTotal=0),S[0].vTotal+=n(A.s),A.begR=n(A.s)/n(S[0].s)}var T;for(x=0;x<b;x++)A=S[x],A.s!==t&&(A.sumR=A.s/S[0].vTotal,A.difR=T!==void 0?A.s/T:1,T=A.s);return c(S,r),p(S,r),S};function n(a){return a===t?0:a}},{"../../constants/numerical":479,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928,"./arrays_to_calcdata":770}],773:[function(e,k,z){k.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],774:[function(e,k,z){var l=e("../bar/cross_trace_calc").setGroupPositions;k.exports=function(c,p){var t=c._fullLayout,n=c._fullData,a=c.calcdata,i=p.xaxis,r=p.yaxis,f=[],u=[],s=[],h,d;for(d=0;d<n.length;d++){var y=n[d],m=y.orientation==="h";y.visible===!0&&y.xaxis===i._id&&y.yaxis===r._id&&y.type==="funnel"&&(h=a[d],m?s.push(h):u.push(h),f.push(h))}var g={mode:t.funnelmode,norm:t.funnelnorm,gap:t.funnelgap,groupgap:t.funnelgroupgap};for(l(c,i,r,u,g),l(c,r,i,s,g),d=0;d<f.length;d++){h=f[d];for(var x=0;x<h.length;x++)x+1<h.length&&(h[x].nextP0=h[x+1].p0,h[x].nextS0=h[x+1].s0,h[x].nextP1=h[x+1].p1,h[x].nextS1=h[x+1].s1)}}},{"../bar/cross_trace_calc":651}],775:[function(e,k,z){var l=e("../../lib"),o=e("../bar/defaults").handleGroupingDefaults,c=e("../bar/defaults").handleText,p=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),n=e("./attributes"),a=e("../../components/color");function i(u,s,h,d){function y(w,T){return l.coerce(u,s,n,w,T)}var m=p(u,s,d,y);if(!m){s.visible=!1;return}t(u,s,d,y),y("xhoverformat"),y("yhoverformat"),y("orientation",s.y&&!s.x?"v":"h"),y("offset"),y("width");var g=y("text");y("hovertext"),y("hovertemplate");var x=y("textposition");c(u,s,d,y,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s.textposition!=="none"&&!s.texttemplate&&y("textinfo",Array.isArray(g)?"text+value":"value");var A=y("marker.color",h);y("marker.line.color",a.defaultLine),y("marker.line.width");var b=y("connector.visible");if(b){y("connector.fillcolor",r(A));var S=y("connector.line.width");S&&(y("connector.line.color"),y("connector.line.dash"))}}function r(u){var s=l.isArrayOrTypedArray(u)?"#000":u;return a.addOpacity(s,.5*a.opacity(s))}function f(u,s){var h,d;function y(g){return l.coerce(d._input,d,n,g)}if(s.funnelmode==="group")for(var m=0;m<u.length;m++)d=u[m],h=d._input,o(h,d,s,y)}k.exports={supplyDefaults:i,crossTraceDefaults:f}},{"../../components/color":366,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":771}],776:[function(e,k,z){k.exports=function(o,c){return o.x="xVal"in c?c.xVal:c.x,o.y="yVal"in c?c.yVal:c.y,"percentInitial"in c&&(o.percentInitial=c.percentInitial),"percentPrevious"in c&&(o.percentPrevious=c.percentPrevious),"percentTotal"in c&&(o.percentTotal=c.percentTotal),c.xa&&(o.xaxis=c.xa),c.ya&&(o.yaxis=c.ya),o}},{}],777:[function(e,k,z){var l=e("../../components/color").opacity,o=e("../bar/hover").hoverOnBars,c=e("../../lib").formatPercent;k.exports=function(n,a,i,r,f){var u=o(n,a,i,r,f);if(!!u){var s=u.cd,h=s[0].trace,d=h.orientation==="h",y=u.index,m=s[y],g=d?"x":"y";u[g+"LabelVal"]=m.s,u.percentInitial=m.begR,u.percentInitialLabel=c(m.begR,1),u.percentPrevious=m.difR,u.percentPreviousLabel=c(m.difR,1),u.percentTotal=m.sumR,u.percentTotalLabel=c(m.sumR,1);var x=m.hi||h.hoverinfo,A=[];if(x&&x!=="none"&&x!=="skip"){var b=x==="all",S=x.split("+"),w=function(T){return b||S.indexOf(T)!==-1};w("percent initial")&&A.push(u.percentInitialLabel+" of initial"),w("percent previous")&&A.push(u.percentPreviousLabel+" of previous"),w("percent total")&&A.push(u.percentTotalLabel+" of total")}return u.extraText=A.join("<br>"),u.color=p(h,m),[u]}};function p(t,n){var a=t.marker,i=n.mc||a.color,r=n.mlc||a.line.color,f=n.mlw||a.line.width;if(l(i))return i;if(l(r)&&f)return r}},{"../../components/color":366,"../../lib":503,"../bar/hover":655}],778:[function(e,k,z){k.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style").style,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":771,"./calc":772,"./cross_trace_calc":774,"./defaults":775,"./event_data":776,"./hover":777,"./layout_attributes":779,"./layout_defaults":780,"./plot":781,"./style":782}],779:[function(e,k,z){k.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],780:[function(e,k,z){var l=e("../../lib"),o=e("./layout_attributes");k.exports=function(c,p,t){var n=!1;function a(f,u){return l.coerce(c,p,o,f,u)}for(var i=0;i<t.length;i++){var r=t[i];if(r.visible&&r.type==="funnel"){n=!0;break}}n&&(a("funnelmode"),a("funnelgap",.2),a("funnelgroupgap"))}},{"../../lib":503,"./layout_attributes":779}],781:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../lib"),c=e("../../components/drawing"),p=e("../../constants/numerical").BADNUM,t=e("../bar/plot"),n=e("../bar/uniform_text").clearMinTextSize;k.exports=function(u,s,h,d){var y=u._fullLayout;n("funnel",y),a(u,s,h,d),i(u,s,h,d),t.plot(u,s,h,d,{mode:y.funnelmode,norm:y.funnelmode,gap:y.funnelgap,groupgap:y.funnelgroupgap})};function a(f,u,s,h){var d=u.xaxis,y=u.yaxis;o.makeTraceGroups(h,s,"trace bars").each(function(m){var g=l.select(this),x=m[0].trace,A=o.ensureSingle(g,"g","regions");if(!x.connector||!x.connector.visible){A.remove();return}var b=x.orientation==="h",S=A.selectAll("g.region").data(o.identity);S.enter().append("g").classed("region",!0),S.exit().remove();var w=S.size();S.each(function(T,_){if(!(_!==w-1&&!T.cNext)){var v=r(T,d,y,b),P=v[0],M=v[1],E="";P[0]!==p&&M[0]!==p&&P[1]!==p&&M[1]!==p&&P[2]!==p&&M[2]!==p&&P[3]!==p&&M[3]!==p&&(b?E+="M"+P[0]+","+M[1]+"L"+P[2]+","+M[2]+"H"+P[3]+"L"+P[1]+","+M[1]+"Z":E+="M"+P[1]+","+M[1]+"L"+P[2]+","+M[3]+"V"+M[2]+"L"+P[1]+","+M[0]+"Z"),E===""&&(E="M0,0Z"),o.ensureSingle(l.select(this),"path").attr("d",E).call(c.setClipUrl,u.layerClipId,f)}})})}function i(f,u,s,h){var d=u.xaxis,y=u.yaxis;o.makeTraceGroups(h,s,"trace bars").each(function(m){var g=l.select(this),x=m[0].trace,A=o.ensureSingle(g,"g","lines");if(!x.connector||!x.connector.visible||!x.connector.line.width){A.remove();return}var b=x.orientation==="h",S=A.selectAll("g.line").data(o.identity);S.enter().append("g").classed("line",!0),S.exit().remove();var w=S.size();S.each(function(T,_){if(!(_!==w-1&&!T.cNext)){var v=r(T,d,y,b),P=v[0],M=v[1],E="";P[3]!==void 0&&M[3]!==void 0&&(b?(E+="M"+P[0]+","+M[1]+"L"+P[2]+","+M[2],E+="M"+P[1]+","+M[1]+"L"+P[3]+","+M[2]):(E+="M"+P[1]+","+M[1]+"L"+P[2]+","+M[3],E+="M"+P[1]+","+M[0]+"L"+P[2]+","+M[2])),E===""&&(E="M0,0Z"),o.ensureSingle(l.select(this),"path").attr("d",E).call(c.setClipUrl,u.layerClipId,f)}})})}function r(f,u,s,h){var d=[],y=[],m=h?u:s,g=h?s:u;return d[0]=m.c2p(f.s0,!0),y[0]=g.c2p(f.p0,!0),d[1]=m.c2p(f.s1,!0),y[1]=g.c2p(f.p1,!0),d[2]=m.c2p(f.nextS0,!0),y[2]=g.c2p(f.nextP0,!0),d[3]=m.c2p(f.nextS1,!0),y[3]=g.c2p(f.nextP1,!0),h?[d,y]:[y,d]}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],782:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../components/drawing"),c=e("../../components/color"),p=e("../../constants/interactions").DESELECTDIM,t=e("../bar/style"),n=e("../bar/uniform_text").resizeText,a=t.styleTextPoints;function i(r,f,u){var s=u||l.select(r).selectAll("g.funnellayer").selectAll("g.trace");n(r,s,"funnel"),s.style("opacity",function(h){return h[0].trace.opacity}),s.each(function(h){var d=l.select(this),y=h[0].trace;d.selectAll(".point > path").each(function(m){if(!m.isBlank){var g=y.marker;l.select(this).call(c.fill,m.mc||g.color).call(c.stroke,m.mlc||g.line.color).call(o.dashLine,g.line.dash,m.mlw||g.line.width).style("opacity",y.selectedpoints&&!m.selected?p:1)}}),a(d,y,r),d.selectAll(".regions").each(function(){l.select(this).selectAll("path").style("stroke-width",0).call(c.fill,y.connector.fillcolor)}),d.selectAll(".lines").each(function(){var m=y.connector.line;o.lineGroupStyle(l.select(this).selectAll("path"),m.width,m.color,m.dash)})})}k.exports={style:i}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],783:[function(e,k,z){var l=e("../pie/attributes"),o=e("../../plots/attributes"),c=e("../../plots/domain").attributes,p=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/template_attributes").texttemplateAttrs,n=e("../../lib/extend").extendFlat;k.exports={labels:l.labels,label0:l.label0,dlabel:l.dlabel,values:l.values,marker:{colors:l.marker.colors,line:{color:n({},l.marker.line.color,{dflt:null}),width:n({},l.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:l.text,hovertext:l.hovertext,scalegroup:n({},l.scalegroup,{}),textinfo:n({},l.textinfo,{flags:["label","text","value","percent"]}),texttemplate:t({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:n({},o.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:p({},{keys:["label","color","value","text","percent"]}),textposition:n({},l.textposition,{values:["inside","none"],dflt:"inside"}),textfont:l.textfont,insidetextfont:l.insidetextfont,title:{text:l.title.text,font:l.title.font,position:n({},l.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:c({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900}],784:[function(e,k,z){var l=e("../../plots/plots");z.name="funnelarea",z.plot=function(o,c,p,t){l.plotBasePlot(z.name,o,c,p,t)},z.clean=function(o,c,p,t){l.cleanBasePlot(z.name,o,c,p,t)}},{"../../plots/plots":619}],785:[function(e,k,z){var l=e("../pie/calc");function o(p,t){return l.calc(p,t)}function c(p){l.crossTraceCalc(p,{type:"funnelarea"})}k.exports={calc:o,crossTraceCalc:c}},{"../pie/calc":902}],786:[function(e,k,z){var l=e("../../lib"),o=e("./attributes"),c=e("../../plots/domain").defaults,p=e("../bar/defaults").handleText,t=e("../pie/defaults").handleLabelsAndValues;k.exports=function(a,i,r,f){function u(w,T){return l.coerce(a,i,o,w,T)}var s=u("labels"),h=u("values"),d=t(s,h),y=d.len;if(i._hasLabels=d.hasLabels,i._hasValues=d.hasValues,!i._hasLabels&&i._hasValues&&(u("label0"),u("dlabel")),!y){i.visible=!1;return}i._length=y;var m=u("marker.line.width");m&&u("marker.line.color",f.paper_bgcolor),u("marker.colors"),u("scalegroup");var g=u("text"),x=u("texttemplate"),A;if(x||(A=u("textinfo",Array.isArray(g)?"text+percent":"percent")),u("hovertext"),u("hovertemplate"),x||A&&A!=="none"){var b=u("textposition");p(a,i,f,u,b,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}c(i,f,u);var S=u("title.text");S&&(u("title.position"),l.coerceFont(u,"title.font",f.font)),u("aspectratio"),u("baseratio")}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"../pie/defaults":903,"./attributes":783}],787:[function(e,k,z){k.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),style:e("./style"),styleOne:e("../pie/style_one"),meta:{}}},{"../pie/style_one":911,"./attributes":783,"./base_plot":784,"./calc":785,"./defaults":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(e,k,z){var l=e("../pie/layout_attributes").hiddenlabels;k.exports={hiddenlabels:l,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":907}],789:[function(e,k,z){var l=e("../../lib"),o=e("./layout_attributes");k.exports=function(p,t){function n(a,i){return l.coerce(p,t,o,a,i)}n("hiddenlabels"),n("funnelareacolorway",t.colorway),n("extendfunnelareacolors")}},{"../../lib":503,"./layout_attributes":788}],790:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../components/drawing"),c=e("../../lib"),p=c.strScale,t=c.strTranslate,n=e("../../lib/svg_text_utils"),a=e("../bar/plot"),i=a.toMoveInsideBar,r=e("../bar/uniform_text"),f=r.recordMinTextSize,u=r.clearMinTextSize,s=e("../pie/helpers"),h=e("../pie/plot"),d=h.attachFxHandlers,y=h.determineInsideTextFont,m=h.layoutAreas,g=h.prerenderTitles,x=h.positionTitleOutside,A=h.formatSliceLabel;k.exports=function(_,v){var P=_._fullLayout;u("funnelarea",P),g(v,_),m(v,P._size),c.makeTraceGroups(P._funnelarealayer,v,"trace").each(function(M){var E=l.select(this),D=M[0],N=D.trace;w(M),E.each(function(){var O=l.select(this).selectAll("g.slice").data(M);O.enter().append("g").classed("slice",!0),O.exit().remove(),O.each(function(F,V){if(F.hidden){l.select(this).selectAll("path,g").remove();return}F.pointNumber=F.i,F.curveNumber=N.index;var U=D.cx,j=D.cy,Z=l.select(this),te=Z.selectAll("path.surface").data([F]);te.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),Z.call(d,_,M);var re="M"+(U+F.TR[0])+","+(j+F.TR[1])+b(F.TR,F.BR)+b(F.BR,F.BL)+b(F.BL,F.TL)+"Z";te.attr("d",re),A(_,F,D);var W=s.castOption(N.textposition,F.pts),J=Z.selectAll("g.slicetext").data(F.text&&W!=="none"?[0]:[]);J.enter().append("g").classed("slicetext",!0),J.exit().remove(),J.each(function(){var le=c.ensureSingle(l.select(this),"text","",function(Q){Q.attr("data-notex",1)}),ue=c.ensureUniformFontSize(_,y(N,F,P.font));le.text(F.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(o.font,ue).call(n.convertToTspans,_);var se=o.bBox(le.node()),G,Y,ee,$=Math.min(F.BL[1],F.BR[1])+j,K=Math.max(F.TL[1],F.TR[1])+j;Y=Math.max(F.TL[0],F.BL[0])+U,ee=Math.min(F.TR[0],F.BR[0])+U,G=i(Y,ee,$,K,se,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),G.fontSize=ue.size,f(N.type,G,P),M[V].transform=G,le.attr("transform",c.getTextTransform(G))})});var I=l.select(this).selectAll("g.titletext").data(N.title.text?[0]:[]);I.enter().append("g").classed("titletext",!0),I.exit().remove(),I.each(function(){var F=c.ensureSingle(l.select(this),"text","",function(j){j.attr("data-notex",1)}),V=N.title.text;N._meta&&(V=c.templateString(V,N._meta)),F.text(V).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(o.font,N.title.font).call(n.convertToTspans,_);var U=x(D,P._size);F.attr("transform",t(U.x,U.y)+p(Math.min(1,U.scale))+t(U.tx,U.ty))})})})};function b(T,_){var v=_[0]-T[0],P=_[1]-T[1];return"l"+v+","+P}function S(T,_){return[.5*(T[0]+_[0]),.5*(T[1]+_[1])]}function w(T){if(!T.length)return;var _=T[0],v=_.trace,P=v.aspectratio,M=v.baseratio;M>.999&&(M=.999);var E=Math.pow(M,2),D=_.vTotal,N=D*E/(1-E),O=D,I=N/D;function F(){var ie=Math.sqrt(I);return{x:ie,y:-ie}}function V(){var ie=F();return[ie.x,ie.y]}var U,j=[];j.push(V());var Z,te;for(Z=T.length-1;Z>-1;Z--)if(te=T[Z],!te.hidden){var re=te.v/O;I+=re,j.push(V())}var W=1/0,J=-1/0;for(Z=0;Z<j.length;Z++)U=j[Z],W=Math.min(W,U[1]),J=Math.max(J,U[1]);for(Z=0;Z<j.length;Z++)j[Z][1]-=(J+W)/2;var le=j[j.length-1][0],ue=_.r,se=(J-W)/2,G=ue/le,Y=ue/se*P;for(_.r=Y*se,Z=0;Z<j.length;Z++)j[Z][0]*=G,j[Z][1]*=Y;U=j[0];var ee=[-U[0],U[1]],$=[U[0],U[1]],K=0;for(Z=T.length-1;Z>-1;Z--)if(te=T[Z],!te.hidden){K+=1;var Q=j[K][0],ae=j[K][1];te.TL=[-Q,ae],te.TR=[Q,ae],te.BL=ee,te.BR=$,te.pxmid=S(te.TR,te.BR),ee=te.TL,$=te.TR}}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/plot":659,"../bar/uniform_text":664,"../pie/helpers":905,"../pie/plot":909,"@plotly/d3":58}],791:[function(e,k,z){var l=e("@plotly/d3"),o=e("../pie/style_one"),c=e("../bar/uniform_text").resizeText;k.exports=function(t){var n=t._fullLayout._funnelarealayer.selectAll(".trace");c(t,n,"funnelarea"),n.each(function(a){var i=a[0],r=i.trace,f=l.select(this);f.style({opacity:r.opacity}),f.selectAll("path.surface").each(function(u){l.select(this).call(o,u,r)})})}},{"../bar/uniform_text":664,"../pie/style_one":911,"@plotly/d3":58}],792:[function(e,k,z){var l=e("../scatter/attributes"),o=e("../../plots/attributes"),c=e("../../plots/font_attributes"),p=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../plots/template_attributes").hovertemplateAttrs,n=e("../../plots/template_attributes").texttemplateAttrs,a=e("../../components/colorscale/attributes"),i=e("../../lib/extend").extendFlat;k.exports=i({z:{valType:"data_array",editType:"calc"},x:i({},l.x,{impliedEdits:{xtype:"array"}}),x0:i({},l.x0,{impliedEdits:{xtype:"scaled"}}),dx:i({},l.dx,{impliedEdits:{xtype:"scaled"}}),y:i({},l.y,{impliedEdits:{ytype:"array"}}),y0:i({},l.y0,{impliedEdits:{ytype:"scaled"}}),dy:i({},l.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:i({},l.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:i({},l.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:i({},l.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:i({},l.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:i({},l.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:i({},l.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:p("x"),yhoverformat:p("y"),zhoverformat:p("z",1),hovertemplate:t(),texttemplate:n({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:c({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:i({},o.showlegend,{dflt:!1})},{transforms:void 0},a("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":926}],793:[function(e,k,z){var l=e("../../registry"),o=e("../../lib"),c=e("../../plots/cartesian/axes"),p=e("../../plots/cartesian/align_period"),t=e("../histogram2d/calc"),n=e("../../components/colorscale/calc"),a=e("./convert_column_xyz"),i=e("./clean_2d_array"),r=e("./interp2d"),f=e("./find_empties"),u=e("./make_bound_array"),s=e("../../constants/numerical").BADNUM;k.exports=function(m,g){var x=c.getFromId(m,g.xaxis||"x"),A=c.getFromId(m,g.yaxis||"y"),b=l.traceIs(g,"contour"),S=l.traceIs(g,"histogram"),w=l.traceIs(g,"gl2d"),T=b?"best":g.zsmooth,_,v,P,M,E,D,N,O,I,F,V;if(x._minDtick=0,A._minDtick=0,S)V=t(m,g),M=V.orig_x,_=V.x,v=V.x0,P=V.dx,O=V.orig_y,E=V.y,D=V.y0,N=V.dy,I=V.z;else{var U=g.z;o.isArray1D(U)?(a(g,x,A,"x","y",["z"]),_=g._x,E=g._y,U=g._z):(M=g.x?x.makeCalcdata(g,"x"):[],O=g.y?A.makeCalcdata(g,"y"):[],_=p(g,x,"x",M).vals,E=p(g,A,"y",O).vals,g._x=_,g._y=E),v=g.x0,P=g.dx,D=g.y0,N=g.dy,I=i(U,g,x,A)}(x.rangebreaks||A.rangebreaks)&&(I=d(_,E,I),S||(_=h(_),E=h(E),g._x=_,g._y=E)),!S&&(b||g.connectgaps)&&(g._emptypoints=f(I),r(I,g._emptypoints));function j($){T=g._input.zsmooth=g.zsmooth=!1,o.warn('cannot use zsmooth: "fast": '+$)}if(T==="fast"){if(x.type==="log"||A.type==="log")j("log axis found");else if(!S){if(_.length){var Z=(_[_.length-1]-_[0])/(_.length-1),te=Math.abs(Z/100);for(F=0;F<_.length-1;F++)if(Math.abs(_[F+1]-_[F]-Z)>te){j("x scale is not linear");break}}if(E.length&&T==="fast"){var re=(E[E.length-1]-E[0])/(E.length-1),W=Math.abs(re/100);for(F=0;F<E.length-1;F++)if(Math.abs(E[F+1]-E[F]-re)>W){j("y scale is not linear");break}}}}var J=o.maxRowLength(I),le=g.xtype==="scaled"?"":_,ue=u(g,le,v,P,J,x),se=g.ytype==="scaled"?"":E,G=u(g,se,D,N,I.length,A);w||(g._extremes[x._id]=c.findExtremes(x,ue),g._extremes[A._id]=c.findExtremes(A,G));var Y={x:ue,y:G,z:I,text:g._text||g.text,hovertext:g._hovertext||g.hovertext};if(g.xperiodalignment&&M&&(Y.orig_x=M),g.yperiodalignment&&O&&(Y.orig_y=O),le&&le.length===ue.length-1&&(Y.xCenter=le),se&&se.length===G.length-1&&(Y.yCenter=se),S&&(Y.xRanges=V.xRanges,Y.yRanges=V.yRanges,Y.pts=V.pts),b||n(m,g,{vals:I,cLetter:"z"}),b&&g.contours&&g.contours.coloring==="heatmap"){var ee={type:g.type==="contour"?"heatmap":"histogram2d",xcalendar:g.xcalendar,ycalendar:g.ycalendar};Y.xfill=u(ee,le,v,P,J,x),Y.yfill=u(ee,se,D,N,I.length,A)}return[Y]};function h(y){for(var m=[],g=y.length,x=0;x<g;x++){var A=y[x];A!==s&&m.push(A)}return m}function d(y,m,g){for(var x=[],A=-1,b=0;b<g.length;b++)if(m[b]!==s){A++,x[A]=[];for(var S=0;S<g[b].length;S++)y[S]!==s&&x[A].push(g[b][S])}return x}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../../registry":638,"../histogram2d/calc":826,"./clean_2d_array":794,"./convert_column_xyz":796,"./find_empties":798,"./interp2d":801,"./make_bound_array":803}],794:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../lib"),c=e("../../constants/numerical").BADNUM;k.exports=function(t,n,a,i){var r,f,u,s,h,d;function y(S){if(!!l(S))return+S}if(n&&n.transpose){for(r=0,h=0;h<t.length;h++)r=Math.max(r,t[h].length);if(r===0)return!1;u=function(S){return S.length},s=function(S,w,T){return(S[T]||[])[w]}}else r=t.length,u=function(S,w){return S[w].length},s=function(S,w,T){return(S[w]||[])[T]};var m=function(S,w,T){return w===c||T===c?c:s(S,w,T)};function g(S){if(n&&n.type!=="carpet"&&n.type!=="contourcarpet"&&S&&S.type==="category"&&n["_"+S._id.charAt(0)].length){var w=S._id.charAt(0),T={},_=n["_"+w+"CategoryMap"]||n[w];for(h=0;h<_.length;h++)T[_[h]]=h;return function(v){var P=T[S._categories[v]];return P+1?P:c}}else return o.identity}var x=g(a),A=g(i);i&&i.type==="category"&&(r=i._categories.length);var b=new Array(r);for(h=0;h<r;h++)for(a&&a.type==="category"?f=a._categories.length:f=u(t,h),b[h]=new Array(f),d=0;d<f;d++)b[h][d]=y(m(t,A(h),x(d)));return b}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],795:[function(e,k,z){k.exports={min:"zmin",max:"zmax"}},{}],796:[function(e,k,z){var l=e("../../lib"),o=e("../../constants/numerical").BADNUM,c=e("../../plots/cartesian/align_period");k.exports=function(t,n,a,i,r,f){var u=t._length,s=n.makeCalcdata(t,i),h=a.makeCalcdata(t,r);s=c(t,n,i,s).vals,h=c(t,a,r,h).vals;var d=t.text,y=d!==void 0&&l.isArray1D(d),m=t.hovertext,g=m!==void 0&&l.isArray1D(m),x,A,b=l.distinctVals(s),S=b.vals,w=l.distinctVals(h),T=w.vals,_=[],v,P,M=T.length,E=S.length;for(x=0;x<f.length;x++)_[x]=l.init2dArray(M,E);y&&(v=l.init2dArray(M,E)),g&&(P=l.init2dArray(M,E));var D=l.init2dArray(M,E);for(x=0;x<u;x++)if(s[x]!==o&&h[x]!==o){var N=l.findBin(s[x]+b.minDiff/2,S),O=l.findBin(h[x]+w.minDiff/2,T);for(A=0;A<f.length;A++){var I=f[A],F=t[I],V=_[A];V[O][N]=F[x],D[O][N]=x}y&&(v[O][N]=d[x]),g&&(P[O][N]=m[x])}for(t["_"+i]=S,t["_"+r]=T,A=0;A<f.length;A++)t["_"+f[A]]=_[A];y&&(t._text=v),g&&(t._hovertext=P),n&&n.type==="category"&&(t["_"+i+"CategoryMap"]=S.map(function(U){return n._categories[U]})),a&&a.type==="category"&&(t["_"+r+"CategoryMap"]=T.map(function(U){return a._categories[U]})),t._after2before=D}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551}],797:[function(e,k,z){var l=e("../../lib"),o=e("./xyz_defaults"),c=e("./label_defaults"),p=e("../scatter/period_defaults"),t=e("./style_defaults"),n=e("../../components/colorscale/defaults"),a=e("./attributes");k.exports=function(r,f,u,s){function h(y,m){return l.coerce(r,f,a,y,m)}var d=o(r,f,h,s);if(!d){f.visible=!1;return}p(r,f,s,h),h("xhoverformat"),h("yhoverformat"),h("text"),h("hovertext"),h("hovertemplate"),c(h,s),t(r,f,h,s),h("hoverongaps"),h("connectgaps",l.isArray1D(f.z)&&f.zsmooth!==!1),n(r,f,s,h,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"../scatter/period_defaults":946,"./attributes":792,"./label_defaults":802,"./style_defaults":806,"./xyz_defaults":807}],798:[function(e,k,z){var l=e("../../lib").maxRowLength;k.exports=function(c){var p=[],t={},n=[],a=c[0],i=[],r=[0,0,0],f=l(c),u,s,h,d,y,m,g,x;for(s=0;s<c.length;s++)for(u=i,i=a,a=c[s+1]||[],h=0;h<f;h++)i[h]===void 0&&(m=(i[h-1]!==void 0?1:0)+(i[h+1]!==void 0?1:0)+(u[h]!==void 0?1:0)+(a[h]!==void 0?1:0),m?(s===0&&m++,h===0&&m++,s===c.length-1&&m++,h===i.length-1&&m++,m<4&&(t[[s,h]]=[s,h,m]),p.push([s,h,m])):n.push([s,h]));for(;n.length;){for(g={},x=!1,y=n.length-1;y>=0;y--)d=n[y],s=d[0],h=d[1],m=((t[[s-1,h]]||r)[2]+(t[[s+1,h]]||r)[2]+(t[[s,h-1]]||r)[2]+(t[[s,h+1]]||r)[2])/20,m&&(g[d]=[s,h,m],n.splice(y,1),x=!0);if(!x)throw"findEmpties iterated with no new neighbors";for(d in g)t[d]=g[d],p.push(g[d])}return p.sort(function(A,b){return b[2]-A[2]})}},{"../../lib":503}],799:[function(e,k,z){var l=e("../../components/fx"),o=e("../../lib"),c=e("../../plots/cartesian/axes"),p=e("../../components/colorscale").extractOpts;k.exports=function(n,a,i,r,f){f||(f={});var u=f.isContour,s=n.cd[0],h=s.trace,d=n.xa,y=n.ya,m=s.x,g=s.y,x=s.z,A=s.xCenter,b=s.yCenter,S=s.zmask,w=h.zhoverformat,T=m,_=g,v,P,M,E;if(n.index!==!1){try{M=Math.round(n.index[1]),E=Math.round(n.index[0])}catch{o.error("Error hovering on heatmap, pointNumber must be [row,col], found:",n.index);return}if(M<0||M>=x[0].length||E<0||E>x.length)return}else{if(l.inbox(a-m[0],a-m[m.length-1],0)>0||l.inbox(i-g[0],i-g[g.length-1],0)>0)return;if(u){var D;for(T=[2*m[0]-m[1]],D=1;D<m.length;D++)T.push((m[D]+m[D-1])/2);for(T.push([2*m[m.length-1]-m[m.length-2]]),_=[2*g[0]-g[1]],D=1;D<g.length;D++)_.push((g[D]+g[D-1])/2);_.push([2*g[g.length-1]-g[g.length-2]])}M=Math.max(0,Math.min(T.length-2,o.findBin(a,T))),E=Math.max(0,Math.min(_.length-2,o.findBin(i,_)))}var N=d.c2p(m[M]),O=d.c2p(m[M+1]),I=y.c2p(g[E]),F=y.c2p(g[E+1]),V,U;u?(V=s.orig_x||m,U=s.orig_y||g,O=N,v=V[M],F=I,P=U[E]):(V=s.orig_x||A||m,U=s.orig_y||b||g,v=A?V[M]:(V[M]+V[M+1])/2,P=b?U[E]:(U[E]+U[E+1])/2,d&&d.type==="category"&&(v=m[M]),y&&y.type==="category"&&(P=g[E]),h.zsmooth&&(N=O=d.c2p(v),I=F=y.c2p(P)));var j=x[E][M];if(S&&!S[E][M]&&(j=void 0),!(j===void 0&&!h.hoverongaps)){var Z;Array.isArray(s.hovertext)&&Array.isArray(s.hovertext[E])?Z=s.hovertext[E][M]:Array.isArray(s.text)&&Array.isArray(s.text[E])&&(Z=s.text[E][M]);var te=p(h),re={type:"linear",range:[te.min,te.max],hoverformat:w,_separators:d._separators,_numFormat:d._numFormat},W=c.tickText(re,j,"hover").text;return[o.extendFlat(n,{index:h._after2before?h._after2before[E][M]:[E,M],distance:n.maxHoverDistance,spikeDistance:n.maxSpikeDistance,x0:N,x1:O,y0:I,y1:F,xLabelVal:v,yLabelVal:P,zLabelVal:j,zLabel:W,text:Z})]}}},{"../../components/colorscale":378,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],800:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:e("./colorbar"),style:e("./style"),hoverPoints:e("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":792,"./calc":793,"./colorbar":795,"./defaults":797,"./hover":799,"./plot":804,"./style":805}],801:[function(e,k,z){var l=e("../../lib"),o=.01,c=[[-1,0],[1,0],[0,-1],[0,1]];function p(n){return .5-.25*Math.min(1,n*.5)}k.exports=function(a,i){var r=1,f;for(t(a,i),f=0;f<i.length&&!(i[f][2]<4);f++);for(i=i.slice(f),f=0;f<100&&r>o;f++)r=t(a,i,p(r));return r>o&&l.log("interp2d didn't converge quickly",r),a};function t(n,a,i){var r=0,f,u,s,h,d,y,m,g,x,A,b,S,w;for(h=0;h<a.length;h++){for(f=a[h],u=f[0],s=f[1],b=n[u][s],A=0,x=0,d=0;d<4;d++)y=c[d],m=n[u+y[0]],!!m&&(g=m[s+y[1]],g!==void 0&&(A===0?S=w=g:(S=Math.min(S,g),w=Math.max(w,g)),x++,A+=g));if(x===0)throw"iterateInterp2d order is wrong: no defined neighbors";n[u][s]=A/x,b===void 0?x<4&&(r=1):(n[u][s]=(1+i)*n[u][s]-i*b,w>S&&(r=Math.max(r,Math.abs(n[u][s]-b)/(w-S))))}return r}},{"../../lib":503}],802:[function(e,k,z){var l=e("../../lib");k.exports=function(c,p){c("texttemplate");var t=l.extendFlat({},p.font,{color:"auto",size:"auto"});l.coerceFont(c,"textfont",t)}},{"../../lib":503}],803:[function(e,k,z){var l=e("../../registry"),o=e("../../lib").isArrayOrTypedArray;k.exports=function(p,t,n,a,i,r){var f=[],u=l.traceIs(p,"contour"),s=l.traceIs(p,"histogram"),h=l.traceIs(p,"gl2d"),d,y,m,g=o(t)&&t.length>1;if(g&&!s&&r.type!=="category"){var x=t.length;if(x<=i){if(u||h)f=t.slice(0,i);else if(i===1)f=[t[0]-.5,t[0]+.5];else{for(f=[1.5*t[0]-.5*t[1]],m=1;m<x;m++)f.push((t[m-1]+t[m])*.5);f.push(1.5*t[x-1]-.5*t[x-2])}if(x<i){var A=f[f.length-1],b=A-f[f.length-2];for(m=x;m<i;m++)A+=b,f.push(A)}}else return u?t.slice(0,i):t.slice(0,i+1)}else{var S=p[r._id.charAt(0)+"calendar"];if(s)d=r.r2c(n,0,S);else if(o(t)&&t.length===1)d=t[0];else if(n===void 0)d=0;else{var w=r.type==="log"?r.d2c:r.r2c;d=w(n,0,S)}for(y=a||1,m=u||h?0:-.5;m<i;m++)f.push(d+y*m)}return f}},{"../../lib":503,"../../registry":638}],804:[function(e,k,z){var l=e("@plotly/d3"),o=e("tinycolor2"),c=e("../../registry"),p=e("../../components/drawing"),t=e("../../plots/cartesian/axes"),n=e("../../lib"),a=e("../../lib/svg_text_utils"),i=e("../scatter/format_labels"),r=e("../../components/color"),f=e("../../components/colorscale").extractOpts,u=e("../../components/colorscale").makeColorScaleFuncFromTrace,s=e("../../constants/xmlns_namespaces"),h=e("../../constants/alignment"),d=h.LINE_SPACING,y="heatmap-label";function m(S){return S.selectAll("g."+y)}function g(S){m(S).remove()}k.exports=function(S,w,T,_){var v=w.xaxis,P=w.yaxis;n.makeTraceGroups(_,T,"hm").each(function(M){var E=l.select(this),D=M[0],N=D.trace,O=N.xgap||0,I=N.ygap||0,F=D.z,V=D.x,U=D.y,j=D.xCenter,Z=D.yCenter,te=c.traceIs(N,"contour"),re=te?"best":N.zsmooth,W=F.length,J=n.maxRowLength(F),le=!1,ue=!1,se,G,Y,ee,$,K,Q,ae;for(K=0;se===void 0&&K<V.length-1;)se=v.c2p(V[K]),K++;for(K=V.length-1;G===void 0&&K>0;)G=v.c2p(V[K]),K--;for(G<se&&(Y=G,G=se,se=Y,le=!0),K=0;ee===void 0&&K<U.length-1;)ee=P.c2p(U[K]),K++;for(K=U.length-1;$===void 0&&K>0;)$=P.c2p(U[K]),K--;if($<ee&&(Y=ee,ee=$,$=Y,ue=!0),te&&(j=V,Z=U,V=D.xfill,U=D.yfill),re!=="fast"){var ie=re==="best"?0:.5;se=Math.max(-ie*v._length,se),G=Math.min((1+ie)*v._length,G),ee=Math.max(-ie*P._length,ee),$=Math.min((1+ie)*P._length,$)}var oe=Math.round(G-se),fe=Math.round($-ee),ye=oe<=0||fe<=0;if(ye){var ce=E.selectAll("image").data([]);ce.exit().remove(),g(E);return}var me,xe;re==="fast"?(me=J,xe=W):(me=oe,xe=fe);var ke=document.createElement("canvas");ke.width=me,ke.height=xe;var Ae=ke.getContext("2d"),Oe=u(N,{noNumericCheck:!0,returnArray:!0}),He,Ge;re==="fast"?(He=le?function(Lr){return J-1-Lr}:n.identity,Ge=ue?function(Lr){return W-1-Lr}:n.identity):(He=function(Lr){return n.constrain(Math.round(v.c2p(V[Lr])-se),0,oe)},Ge=function(Lr){return n.constrain(Math.round(P.c2p(U[Lr])-ee),0,fe)});var _e=Ge(0),Ie=[_e,_e],We=le?0:1,et=ue?0:1,Ne=0,De=0,Ve=0,dt=0,Dt,Gt,Mt,zt,Nt;function Et(Lr,Ur){if(Lr!==void 0){var xr=Oe(Lr);return xr[0]=Math.round(xr[0]),xr[1]=Math.round(xr[1]),xr[2]=Math.round(xr[2]),Ne+=Ur,De+=xr[0]*Ur,Ve+=xr[1]*Ur,dt+=xr[2]*Ur,xr}return[0,0,0,0]}function At(Lr,Ur,xr,on){var Pn=Lr[xr.bin0];if(Pn===void 0)return Et(void 0,1);var En=Lr[xr.bin1],$n=Ur[xr.bin0],aa=Ur[xr.bin1],Ca=En-Pn||0,ba=$n-Pn||0,vr;return En===void 0?aa===void 0?vr=0:$n===void 0?vr=2*(aa-Pn):vr=(2*aa-$n-Pn)*2/3:aa===void 0?$n===void 0?vr=0:vr=(2*Pn-En-$n)*2/3:$n===void 0?vr=(2*aa-En-Pn)*2/3:vr=aa+Pn-En-$n,Et(Pn+xr.frac*Ca+on.frac*(ba+xr.frac*vr))}if(re){var it=0,ht;try{ht=new Uint8Array(oe*fe*4)}catch{ht=new Array(oe*fe*4)}if(re==="best"){var $e=j||V,Ee=Z||U,Xe=new Array($e.length),rt=new Array(Ee.length),ut=new Array(oe),Pt=j?A:x,kt=Z?A:x,Bt,Xt,Ut;for(K=0;K<$e.length;K++)Xe[K]=Math.round(v.c2p($e[K])-se);for(K=0;K<Ee.length;K++)rt[K]=Math.round(P.c2p(Ee[K])-ee);for(K=0;K<oe;K++)ut[K]=Pt(K,Xe);for(Q=0;Q<fe;Q++)for(Bt=kt(Q,rt),Xt=F[Bt.bin0],Ut=F[Bt.bin1],K=0;K<oe;K++,it+=4)Nt=At(Xt,Ut,ut[K],Bt),b(ht,it,Nt)}else for(Q=0;Q<W;Q++)for(zt=F[Q],Ie=Ge(Q),K=0;K<oe;K++)Nt=Et(zt[K],1),it=(Ie*oe+He(K))*4,b(ht,it,Nt);var Jt=Ae.createImageData(oe,fe);try{Jt.data.set(ht)}catch{var Je=Jt.data,gt=Je.length;for(Q=0;Q<gt;Q++)Je[Q]=ht[Q]}Ae.putImageData(Jt,0,0)}else{var Ct=Math.floor(O/2),or=Math.floor(I/2);for(Q=0;Q<W;Q++)if(zt=F[Q],Ie.reverse(),Ie[et]=Ge(Q+1),!(Ie[0]===Ie[1]||Ie[0]===void 0||Ie[1]===void 0))for(Gt=He(0),Dt=[Gt,Gt],K=0;K<J;K++)Dt.reverse(),Dt[We]=He(K+1),!(Dt[0]===Dt[1]||Dt[0]===void 0||Dt[1]===void 0)&&(Mt=zt[K],Nt=Et(Mt,(Dt[1]-Dt[0])*(Ie[1]-Ie[0])),Ae.fillStyle="rgba("+Nt.join(",")+")",Ae.fillRect(Dt[0]+Ct,Ie[0]+or,Dt[1]-Dt[0]-O,Ie[1]-Ie[0]-I))}De=Math.round(De/Ne),Ve=Math.round(Ve/Ne),dt=Math.round(dt/Ne);var gr=o("rgb("+De+","+Ve+","+dt+")");S._hmpixcount=(S._hmpixcount||0)+Ne,S._hmlumcount=(S._hmlumcount||0)+Ne*gr.getLuminance();var lr=E.selectAll("image").data(M);lr.enter().append("svg:image").attr({xmlns:s.svg,preserveAspectRatio:"none"}),lr.attr({height:fe,width:oe,x:se,y:ee,"xlink:href":ke.toDataURL("image/png")}),g(E);var mr=N.texttemplate;if(mr){var Fr=f(N),Rr={type:"linear",range:[Fr.min,Fr.max],_separators:v._separators,_numFormat:v._numFormat},ir=N.type==="histogram2dcontour",Vr=N.type==="contour",qe=Vr?1:0,we=Vr?W-1:W,Me=Vr?1:0,Re=Vr?J-1:J,Ye=[];for(K=qe;K<we;K++){var Qe;if(Vr)Qe=D.y[K];else if(ir){if(K===0||K===W-1)continue;Qe=D.y[K]}else if(D.yCenter)Qe=D.yCenter[K];else{if(K+1===W&&D.y[K+1]===void 0)continue;Qe=(D.y[K]+D.y[K+1])/2}var ot=Math.round(P.c2p(Qe));if(!(0>ot||ot>P._length))for(Q=Me;Q<Re;Q++){var st;if(Vr)st=D.x[Q];else if(ir){if(Q===0||Q===J-1)continue;st=D.x[Q]}else if(D.xCenter)st=D.xCenter[Q];else{if(Q+1===J&&D.x[Q+1]===void 0)continue;st=(D.x[Q]+D.x[Q+1])/2}var pt=Math.round(v.c2p(st));if(!(0>pt||pt>v._length)){var wt=i({x:st,y:Qe},N,S._fullLayout);wt.x=st,wt.y=Qe;var Yt=D.z[K][Q];Yt===void 0?(wt.z="",wt.zLabel=""):(wt.z=Yt,wt.zLabel=t.tickText(Rr,Yt,"hover").text);var wr=D.text&&D.text[K]&&D.text[K][Q];(wr===void 0||wr===!1)&&(wr=""),wt.text=wr;var Tr=n.texttemplateString(mr,wt,S._fullLayout._d3locale,wt,N._meta||{});if(!!Tr){var Mr=Tr.split("<br>"),_r=Mr.length,Or=0;for(ae=0;ae<_r;ae++)Or=Math.max(Or,Mr[ae].length);Ye.push({l:_r,c:Or,t:Tr,x:pt,y:ot,z:Yt})}}}}var nn=N.textfont,Sr=nn.family,yr=nn.size;if(!yr||yr==="auto"){var gn=1/0,Xr=1/0,kr=0,sn=0;for(ae=0;ae<Ye.length;ae++){var cn=Ye[ae];if(kr=Math.max(kr,cn.l),sn=Math.max(sn,cn.c),ae<Ye.length-1){var $r=Ye[ae+1],at=Math.abs($r.x-cn.x),Ot=Math.abs($r.y-cn.y);at&&(gn=Math.min(gn,at)),Ot&&(Xr=Math.min(Xr,Ot))}}!isFinite(gn)||!isFinite(Xr)?yr=12:(gn-=O,Xr-=I,gn/=sn,Xr/=kr,gn/=d/2,Xr/=d,yr=Math.min(Math.floor(gn),Math.floor(Xr)))}if(yr<=0||!isFinite(yr))return;var nr=function(Lr){return Lr.x},dr=function(Lr){return Lr.y-yr*(Lr.l*d/2-1)},Zr=m(E).data(Ye);Zr.enter().append("g").classed(y,1).append("text").attr("text-anchor","middle").each(function(Lr){var Ur=l.select(this),xr=nn.color;(!xr||xr==="auto")&&(xr=r.contrast("rgba("+Oe(Lr.z).join()+")")),Ur.attr("data-notex",1).call(a.positionText,nr(Lr),dr(Lr)).call(p.font,Sr,yr,xr).text(Lr.t).call(a.convertToTspans,S)})}})};function x(S,w){var T=w.length-2,_=n.constrain(n.findBin(S,w),0,T),v=w[_],P=w[_+1],M=n.constrain(_+(S-v)/(P-v)-.5,0,T),E=Math.round(M),D=Math.abs(M-E);return!M||M===T||!D?{bin0:E,bin1:E,frac:0}:{bin0:E,frac:D,bin1:Math.round(E+D/(M-E))}}function A(S,w){var T=w.length-1,_=n.constrain(n.findBin(S,w),0,T),v=w[_],P=w[_+1],M=(S-v)/(P-v)||0;return M<=0?{bin0:_,bin1:_,frac:0}:M<.5?{bin0:_,bin1:_+1,frac:M}:{bin0:_+1,bin1:_,frac:1-M}}function b(S,w,T){S[w]=T[0],S[w+1]=T[1],S[w+2]=T[2],S[w+3]=Math.round(T[3]*255)}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"../../constants/alignment":471,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../scatter/format_labels":935,"@plotly/d3":58,tinycolor2:312}],805:[function(e,k,z){var l=e("@plotly/d3");k.exports=function(c){l.select(c).selectAll(".hm image").style("opacity",function(p){return p.trace.opacity})}},{"@plotly/d3":58}],806:[function(e,k,z){k.exports=function(o,c,p){var t=p("zsmooth");t===!1&&(p("xgap"),p("ygap")),p("zhoverformat")}},{}],807:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../lib"),c=e("../../registry");k.exports=function(a,i,r,f,u,s){var h=r("z");u=u||"x",s=s||"y";var d,y;if(h===void 0||!h.length)return 0;if(o.isArray1D(a.z)){d=r(u),y=r(s);var m=o.minRowLength(d),g=o.minRowLength(y);if(m===0||g===0)return 0;i._length=Math.min(m,g,h.length)}else{if(d=p(u,r),y=p(s,r),!t(h))return 0;r("transpose"),i._length=null}if(a.type==="heatmapgl")return!0;var x=c.getComponentMethod("calendars","handleTraceDefaults");return x(a,i,[u,s],f),!0};function p(n,a){var i=a(n),r=i?a(n+"type","array"):"scaled";return r==="scaled"&&(a(n+"0"),a("d"+n)),i}function t(n){for(var a=!0,i=!1,r=!1,f,u=0;u<n.length;u++){if(f=n[u],!o.isArrayOrTypedArray(f)){a=!1;break}f.length>0&&(i=!0);for(var s=0;s<f.length;s++)if(l(f[s])){r=!0;break}}return a&&i&&r}},{"../../lib":503,"../../registry":638,"fast-isnumeric":190}],808:[function(e,k,z){for(var l=e("../heatmap/attributes"),o=e("../../components/colorscale/attributes"),c=e("../../lib/extend").extendFlat,p=e("../../plot_api/edit_types").overrideAll,t=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],n={},a=0;a<t.length;a++){var i=t[a];n[i]=l[i]}n.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},c(n,o("",{cLetter:"z",autoColorDflt:!1})),k.exports=p(n,"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../heatmap/attributes":792}],809:[function(e,k,z){var l=e("../../../stackgl_modules").gl_heatmap2d,o=e("../../plots/cartesian/axes"),c=e("../../lib/str2rgbarray");function p(i,r){this.scene=i,this.uid=r,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=l(i.glplot,this.options),this.heatmap._trace=this}var t=p.prototype;t.handlePick=function(i){var r=this.options,f=r.shape,u=i.pointId,s=u%f[0],h=Math.floor(u/f[0]),d=u;return{trace:this,dataCoord:i.dataCoord,traceCoord:[r.x[s],r.y[h],r.z[d]],textLabel:this.textLabels[u],name:this.name,pointIndex:[h,s],hoverinfo:this.hoverinfo}},t.update=function(i,r){var f=r[0];this.index=i.index,this.name=i.name,this.hoverinfo=i.hoverinfo;var u=f.z;this.options.z=[].concat.apply([],u);var s=u[0].length,h=u.length;this.options.shape=[s,h],this.options.x=f.x,this.options.y=f.y,this.options.zsmooth=i.zsmooth;var d=n(i);this.options.colorLevels=d.colorLevels,this.options.colorValues=d.colorValues,this.textLabels=[].concat.apply([],i.text),this.heatmap.update(this.options);var y=this.scene.xaxis,m=this.scene.yaxis,g,x;i.zsmooth===!1&&(g={ppad:f.x[1]-f.x[0]},x={ppad:f.y[1]-f.y[0]}),i._extremes[y._id]=o.findExtremes(y,f.x,g),i._extremes[m._id]=o.findExtremes(m,f.y,x)},t.dispose=function(){this.heatmap.dispose()};function n(i){for(var r=i.colorscale,f=i.zmin,u=i.zmax,s=r.length,h=new Array(s),d=new Array(4*s),y=0;y<s;y++){var m=r[y],g=c(m[1]);h[y]=f+m[0]*(u-f);for(var x=0;x<4;x++)d[4*y+x]=g[x]}return{colorLevels:h,colorValues:d}}function a(i,r,f){var u=new p(i,r.uid);return u.update(r,f),u}k.exports=a},{"../../../stackgl_modules":1120,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554}],810:[function(e,k,z){var l=e("../../lib"),o=e("../heatmap/xyz_defaults"),c=e("../../components/colorscale/defaults"),p=e("./attributes");k.exports=function(n,a,i,r){function f(s,h){return l.coerce(n,a,p,s,h)}var u=o(n,a,f,r);if(!u){a.visible=!1;return}f("text"),f("zsmooth"),c(n,a,r,f,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/xyz_defaults":807,"./attributes":808}],811:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("../heatmap/calc"),plot:e("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:e("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":596,"../heatmap/calc":793,"../heatmap/colorbar":795,"./attributes":808,"./convert":809,"./defaults":810}],812:[function(e,k,z){var l=e("../bar/attributes"),o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,c=e("../../plots/template_attributes").hovertemplateAttrs,p=e("../../plots/template_attributes").texttemplateAttrs,t=e("../../plots/font_attributes"),n=e("./bin_attributes"),a=e("./constants"),i=e("../../lib/extend").extendFlat;k.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:o("x"),yhoverformat:o("y"),text:i({},l.text,{}),hovertext:i({},l.hovertext,{}),orientation:l.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:n("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:n("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:c({},{keys:a.eventDataKeys}),texttemplate:p({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:i({},l.textposition,{arrayOk:!1}),textfont:t({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:t({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:t({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:l.insidetextanchor,textangle:l.textangle,cliponaxis:l.cliponaxis,constraintext:l.constraintext,marker:l.marker,offsetgroup:l.offsetgroup,alignmentgroup:l.alignmentgroup,selected:l.selected,unselected:l.unselected,_deprecated:{bardir:l._deprecated.bardir}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../bar/attributes":648,"./bin_attributes":814,"./constants":818}],813:[function(e,k,z){k.exports=function(o,c){for(var p=o.length,t=0,n=0;n<p;n++)c[n]?(o[n]/=c[n],t+=o[n]):o[n]=null;return t}},{}],814:[function(e,k,z){k.exports=function(o,c){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],815:[function(e,k,z){var l=e("fast-isnumeric");k.exports={count:function(o,c,p){return p[o]++,1},sum:function(o,c,p,t){var n=t[c];return l(n)?(n=Number(n),p[o]+=n,n):0},avg:function(o,c,p,t,n){var a=t[c];return l(a)&&(a=Number(a),p[o]+=a,n[o]++),0},min:function(o,c,p,t){var n=t[c];if(l(n))if(n=Number(n),l(p[o])){if(p[o]>n){var a=n-p[o];return p[o]=n,a}}else return p[o]=n,n;return 0},max:function(o,c,p,t){var n=t[c];if(l(n))if(n=Number(n),l(p[o])){if(p[o]<n){var a=n-p[o];return p[o]=n,a}}else return p[o]=n,n;return 0}}},{"fast-isnumeric":190}],816:[function(e,k,z){var l=e("../../constants/numerical"),o=l.ONEAVGYEAR,c=l.ONEAVGMONTH,p=l.ONEDAY,t=l.ONEHOUR,n=l.ONEMIN,a=l.ONESEC,i=e("../../plots/cartesian/axes").tickIncrement;k.exports=function(d,y,m,g,x){var A=-1.1*y,b=-.1*y,S=d-b,w=m[0],T=m[1],_=Math.min(r(w+b,w+S,g,x),r(T+b,T+S,g,x)),v=Math.min(r(w+A,w+b,g,x),r(T+A,T+b,g,x)),P,M;if(_>v&&v<Math.abs(T-w)/4e3?(P=_,M=!1):(P=Math.min(_,v),M=!0),g.type==="date"&&P>p){var E=P===o?1:6,D=P===o?"M12":"M1";return function(N,O){var I=g.c2d(N,o,x),F=I.indexOf("-",E);F>0&&(I=I.substr(0,F));var V=g.d2c(I,0,x);if(V<N){var U=i(V,D,!1,x);(V+U)/2<N+d&&(V=U)}return O&&M?i(V,D,!0,x):V}}return function(N,O){var I=P*Math.round(N/P);return I+P/10<N&&I+P*.9<N+d&&(I+=P),O&&M&&(I-=P),I}};function r(h,d,y,m){if(h*d<=0)return 1/0;for(var g=Math.abs(d-h),x=y.type==="date",A=f(g,x),b=0;b<10;b++){var S=f(A*80,x);if(A===S)break;if(u(S,h,d,x,y,m))A=S;else break}return A}function f(h,d){return d&&h>a?h>p?h>o*1.1?o:h>c*1.1?c:p:h>t?t:h>n?n:a:Math.pow(10,Math.floor(Math.log(h)/Math.LN10))}function u(h,d,y,m,g,x){if(m&&h>p){var A=s(d,g,x),b=s(y,g,x),S=h===o?0:1;return A[S]!==b[S]}return Math.floor(y/h)-Math.floor(d/h)>.1}function s(h,d,y){var m=d.c2d(h,o,y).split("-");return m[0]===""&&(m.unshift(),m[0]="-"+m[0]),m}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554}],817:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../lib"),c=e("../../registry"),p=e("../../plots/cartesian/axes"),t=e("../bar/arrays_to_calcdata"),n=e("./bin_functions"),a=e("./norm_functions"),i=e("./average"),r=e("./bin_label_vals");function f(y,m){var g=[],x=[],A=p.getFromId(y,m.orientation==="h"?m.yaxis:m.xaxis),b=m.orientation==="h"?"y":"x",S={x:"y",y:"x"}[b],w=m[b+"calendar"],T=m.cumulative,_,v=u(y,m,A,b),P=v[0],M=v[1],E=typeof P.size=="string",D=[],N=E?D:P,O=[],I=[],F=[],V=0,U=m.histnorm,j=m.histfunc,Z=U.indexOf("density")!==-1,te,re,W;T.enabled&&Z&&(U=U.replace(/ ?density$/,""),Z=!1);var J=j==="max"||j==="min",le=J?null:0,ue=n.count,se=a[U],G=!1,Y=function(He){return A.r2c(He,0,w)},ee;for(o.isArrayOrTypedArray(m[S])&&j!=="count"&&(ee=m[S],G=j==="avg",ue=n[j]),_=Y(P.start),re=Y(P.end)+(_-p.tickIncrement(_,P.size,!1,w))/1e6;_<re&&g.length<1e6&&(te=p.tickIncrement(_,P.size,!1,w),g.push((_+te)/2),x.push(le),F.push([]),D.push(_),Z&&O.push(1/(te-_)),G&&I.push(0),!(te<=_));)_=te;D.push(_),!E&&A.type==="date"&&(N={start:Y(N.start),end:Y(N.end),size:N.size}),y._fullLayout._roundFnOpts||(y._fullLayout._roundFnOpts={});var $=m["_"+b+"bingroup"],K={leftGap:1/0,rightGap:1/0};$&&(y._fullLayout._roundFnOpts[$]||(y._fullLayout._roundFnOpts[$]=K),K=y._fullLayout._roundFnOpts[$]);var Q=x.length,ae=!0,ie=K.leftGap,oe=K.rightGap,fe={};for(_=0;_<M.length;_++){var ye=M[_];W=o.findBin(ye,N),W>=0&&W<Q&&(V+=ue(W,_,x,ee,I),ae&&F[W].length&&ye!==M[F[W][0]]&&(ae=!1),F[W].push(_),fe[_]=W,ie=Math.min(ie,ye-D[W]),oe=Math.min(oe,D[W+1]-ye))}K.leftGap=ie,K.rightGap=oe;var ce;ae||(ce=function(He,Ge){return function(){var _e=y._fullLayout._roundFnOpts[$];return r(_e.leftGap,_e.rightGap,D,A,w)(He,Ge)}}),G&&(V=i(x,I)),se&&se(x,V,O),T.enabled&&d(x,T.direction,T.currentbin);var me=Math.min(g.length,x.length),xe=[],ke=0,Ae=me-1;for(_=0;_<me;_++)if(x[_]){ke=_;break}for(_=me-1;_>=ke;_--)if(x[_]){Ae=_;break}for(_=ke;_<=Ae;_++)if(l(g[_])&&l(x[_])){var Oe={p:g[_],s:x[_],b:0};T.enabled||(Oe.pts=F[_],ae?Oe.ph0=Oe.ph1=F[_].length?M[F[_][0]]:g[_]:(m._computePh=!0,Oe.ph0=ce(D[_]),Oe.ph1=ce(D[_+1],!0))),xe.push(Oe)}return xe.length===1&&(xe[0].width1=p.tickIncrement(xe[0].p,P.size,!1,w)-xe[0].p),t(xe,m),o.isArrayOrTypedArray(m.selectedpoints)&&o.tagSelected(xe,m,fe),xe}function u(y,m,g,x,A){var b=x+"bins",S=y._fullLayout,w=m["_"+x+"bingroup"],T=S._histogramBinOpts[w],_=S.barmode==="overlay",v,P,M,E,D,N,O,I=function(ce){return g.r2c(ce,0,E)},F=function(ce){return g.c2r(ce,0,E)},V=g.type==="date"?function(ce){return ce||ce===0?o.cleanDate(ce,null,E):null}:function(ce){return l(ce)?Number(ce):null};function U(ce,me,xe){me[ce+"Found"]?(me[ce]=V(me[ce]),me[ce]===null&&(me[ce]=xe[ce])):(N[ce]=me[ce]=xe[ce],o.nestedProperty(P[0],b+"."+ce).set(xe[ce]))}if(m["_"+x+"autoBinFinished"])delete m["_"+x+"autoBinFinished"];else{P=T.traces;var j=[],Z=!0,te=!1,re=!1;for(v=0;v<P.length;v++)if(M=P[v],M.visible){var W=T.dirs[v];D=M["_"+W+"pos0"]=g.makeCalcdata(M,W),j=o.concat(j,D),delete M["_"+x+"autoBinFinished"],m.visible===!0&&(Z?Z=!1:(delete M._autoBin,M["_"+x+"autoBinFinished"]=1),c.traceIs(M,"2dMap")&&(te=!0),M.type==="histogram2dcontour"&&(re=!0))}E=P[0][x+"calendar"];var J=p.autoBin(j,g,T.nbins,te,E,T.sizeFound&&T.size),le=P[0]._autoBin={};if(N=le[T.dirs[0]]={},re&&(T.size||(J.start=F(p.tickIncrement(I(J.start),J.size,!0,E))),T.end===void 0&&(J.end=F(p.tickIncrement(I(J.end),J.size,!1,E)))),_&&!c.traceIs(m,"2dMap")&&J._dataSpan===0&&g.type!=="category"&&g.type!=="multicategory"){if(A)return[J,D,!0];J=s(y,m,g,x,b)}O=M.cumulative||{},O.enabled&&O.currentbin!=="include"&&(O.direction==="decreasing"?J.start=F(p.tickIncrement(I(J.start),J.size,!0,E)):J.end=F(p.tickIncrement(I(J.end),J.size,!1,E))),T.size=J.size,T.sizeFound||(N.size=J.size,o.nestedProperty(P[0],b+".size").set(J.size)),U("start",T,J),U("end",T,J)}D=m["_"+x+"pos0"],delete m["_"+x+"pos0"];var ue=m._input[b]||{},se=o.extendFlat({},T),G=T.start,Y=g.r2l(ue.start),ee=Y!==void 0;if((T.startFound||ee)&&Y!==g.r2l(G)){var $=ee?Y:o.aggNums(Math.min,null,D),K={type:g.type==="category"||g.type==="multicategory"?"linear":g.type,r2l:g.r2l,dtick:T.size,tick0:G,calendar:E,range:[$,p.tickIncrement($,T.size,!1,E)].map(g.l2r)},Q=p.tickFirst(K);Q>g.r2l($)&&(Q=p.tickIncrement(Q,T.size,!0,E)),se.start=g.l2r(Q),ee||o.nestedProperty(m,b+".start").set(se.start)}var ae=T.end,ie=g.r2l(ue.end),oe=ie!==void 0;if((T.endFound||oe)&&ie!==g.r2l(ae)){var fe=oe?ie:o.aggNums(Math.max,null,D);se.end=g.l2r(fe),oe||o.nestedProperty(m,b+".start").set(se.end)}var ye="autobin"+x;return m._input[ye]===!1&&(m._input[b]=o.extendFlat({},m[b]||{}),delete m._input[ye],delete m[ye]),[se,D]}function s(y,m,g,x,A){var b=y._fullLayout,S=h(y,m),w=!1,T=1/0,_=[m],v,P,M;for(v=0;v<S.length;v++)if(P=S[v],P===m)w=!0;else if(!w)M=b._histogramBinOpts[P["_"+x+"bingroup"]],T=Math.min(T,M.size||P[A].size);else{var E=u(y,P,g,x,!0),D=E[0],N=E[2];P["_"+x+"autoBinFinished"]=1,P["_"+x+"pos0"]=E[1],N?_.push(P):T=Math.min(T,D.size)}var O=new Array(_.length);for(v=0;v<_.length;v++)for(var I=_[v]["_"+x+"pos0"],F=0;F<I.length;F++)if(I[F]!==void 0){O[v]=I[F];break}for(isFinite(T)||(T=o.distinctVals(O).minDiff),v=0;v<_.length;v++){P=_[v];var V=P[x+"calendar"],U={start:g.c2r(O[v]-T/2,0,V),end:g.c2r(O[v]+T/2,0,V),size:T};P._input[A]=P[A]=U,M=b._histogramBinOpts[P["_"+x+"bingroup"]],M&&o.extendFlat(M,U)}return m[A]}function h(y,m){for(var g=m.xaxis,x=m.yaxis,A=m.orientation,b=[],S=y._fullData,w=0;w<S.length;w++){var T=S[w];T.type==="histogram"&&T.visible===!0&&T.orientation===A&&T.xaxis===g&&T.yaxis===x&&b.push(T)}return b}function d(y,m,g){var x,A,b;function S(T){b=y[T],y[T]/=2}function w(T){A=y[T],y[T]=b+A/2,b+=A}if(g==="half")if(m==="increasing")for(S(0),x=1;x<y.length;x++)w(x);else for(S(y.length-1),x=y.length-2;x>=0;x--)w(x);else if(m==="increasing"){for(x=1;x<y.length;x++)y[x]+=y[x-1];g==="exclude"&&(y.unshift(0),y.pop())}else{for(x=y.length-2;x>=0;x--)y[x]+=y[x+1];g==="exclude"&&(y.push(0),y.shift())}}k.exports={calc:f,calcAllAutoBins:u}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"../bar/arrays_to_calcdata":647,"./average":813,"./bin_functions":815,"./bin_label_vals":816,"./norm_functions":824,"fast-isnumeric":190}],818:[function(e,k,z){k.exports={eventDataKeys:["binNumber"]}},{}],819:[function(e,k,z){var l=e("../../lib"),o=e("../../plots/cartesian/axis_ids"),c=e("../../registry").traceIs,p=e("../bar/defaults").handleGroupingDefaults,t=l.nestedProperty,n=e("../../plots/cartesian/constraints").getAxisGroup,a=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],i=["x","y"];k.exports=function(f,u){var s=u._histogramBinOpts={},h=[],d={},y=[],m,g,x,A,b,S,w;function T(re,W){return l.coerce(m._input,m,m._module.attributes,re,W)}function _(re){return re.orientation==="v"?"x":"y"}function v(re,W){var J=o.getFromTrace({_fullLayout:u},re,W);return J.type}function P(re,W,J){var le=re.uid+"__"+J;W||(W=le);var ue=v(re,J),se=re[J+"calendar"]||"",G=s[W],Y=!0;G&&(ue===G.axType&&se===G.calendar?(Y=!1,G.traces.push(re),G.dirs.push(J)):(W=le,ue!==G.axType&&l.warn(["Attempted to group the bins of trace",re.index,"set on a","type:"+ue,"axis","with bins on","type:"+G.axType,"axis."].join(" ")),se!==G.calendar&&l.warn(["Attempted to group the bins of trace",re.index,"set with a",se,"calendar","with bins",G.calendar?"on a "+G.calendar+" calendar":"w/o a set calendar"].join(" ")))),Y&&(s[W]={traces:[re],dirs:[J],axType:ue,calendar:re[J+"calendar"]||""}),re["_"+J+"bingroup"]=W}for(b=0;b<f.length;b++)m=f[b],c(m,"histogram")&&(h.push(m),delete m._xautoBinFinished,delete m._yautoBinFinished,c(m,"2dMap")||p(m._input,m,u,T));var M=u._alignmentOpts||{};for(b=0;b<h.length;b++){if(m=h[b],x="",!c(m,"2dMap")){if(A=_(m),u.barmode==="group"&&m.alignmentgroup){var E=m[A+"axis"],D=n(u,E)+m.orientation;(M[D]||{})[m.alignmentgroup]&&(x=D)}!x&&u.barmode!=="overlay"&&(x=n(u,m.xaxis)+n(u,m.yaxis)+_(m))}x?(d[x]||(d[x]=[]),d[x].push(m)):y.push(m)}for(x in d){if(g=d[x],g.length===1){y.push(g[0]);continue}var N=!1;for(g.length&&(m=g[0],N=T("bingroup")),x=N||x,b=0;b<g.length;b++){m=g[b];var O=m._input.bingroup;O&&O!==x&&l.warn(["Trace",m.index,"must match","within bingroup",x+".","Ignoring its bingroup:",O,"setting."].join(" ")),m.bingroup=x,P(m,x,_(m))}}for(b=0;b<y.length;b++){m=y[b];var I=T("bingroup");if(c(m,"2dMap"))for(w=0;w<2;w++){A=i[w];var F=T(A+"bingroup",I?I+"__"+A:null);P(m,F,A)}else P(m,I,_(m))}for(x in s){var V=s[x];for(g=V.traces,S=0;S<a.length;S++){var U=a[S],j=U.name,Z,te;if(!(j==="nbins"&&V.sizeFound)){for(b=0;b<g.length;b++){if(m=g[b],A=V.dirs[b],Z=U.aStr[A],t(m._input,Z).get()!==void 0){V[j]=T(Z),V[j+"Found"]=!0;break}te=(m._autoBin||{})[A]||{},te[j]&&t(m,Z).set(te[j])}if(j==="start"||j==="end")for(;b<g.length;b++)m=g[b],m["_"+A+"bingroup"]&&(te=(m._autoBin||{})[A]||{},T(Z,te[j]));j==="nbins"&&!V.sizeFound&&!V.nbinsFound&&(m=g[0],V[j]=T(Z))}}}}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/cartesian/constraints":562,"../../registry":638,"../bar/defaults":652}],820:[function(e,k,z){var l=e("../../registry"),o=e("../../lib"),c=e("../../components/color"),p=e("../bar/defaults").handleText,t=e("../bar/style_defaults"),n=e("./attributes");k.exports=function(i,r,f,u){function s(v,P){return o.coerce(i,r,n,v,P)}var h=s("x"),d=s("y"),y=s("cumulative.enabled");y&&(s("cumulative.direction"),s("cumulative.currentbin")),s("text");var m=s("textposition");p(i,r,u,s,m,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat");var g=s("orientation",d&&!h?"h":"v"),x=g==="v"?"x":"y",A=g==="v"?"y":"x",b=h&&d?Math.min(o.minRowLength(h)&&o.minRowLength(d)):o.minRowLength(r[x]||[]);if(!b){r.visible=!1;return}r._length=b;var S=l.getComponentMethod("calendars","handleTraceDefaults");S(i,r,["x","y"],u);var w=r[A];w&&s("histfunc"),s("histnorm"),s("autobin"+x),t(i,r,s,f,u),o.coerceSelectionMarkerOpacity(r,s);var T=(r.marker.line||{}).color,_=l.getComponentMethod("errorbars","supplyDefaults");_(i,r,T||c.defaultLine,{axis:"y"}),_(i,r,T||c.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":366,"../../lib":503,"../../registry":638,"../bar/defaults":652,"../bar/style_defaults":663,"./attributes":812}],821:[function(e,k,z){k.exports=function(o,c,p,t,n){if(o.x="xVal"in c?c.xVal:c.x,o.y="yVal"in c?c.yVal:c.y,"zLabelVal"in c&&(o.z=c.zLabelVal),c.xa&&(o.xaxis=c.xa),c.ya&&(o.yaxis=c.ya),!(p.cumulative||{}).enabled){var a=Array.isArray(n)?t[0].pts[n[0]][n[1]]:t[n].pts;o.pointNumbers=a,o.binNumber=o.pointNumber,delete o.pointNumber,delete o.pointIndex;var i;if(p._indexToPoints){i=[];for(var r=0;r<a.length;r++)i=i.concat(p._indexToPoints[a[r]])}else i=a;o.pointIndices=i}return o}},{}],822:[function(e,k,z){var l=e("../bar/hover").hoverPoints,o=e("../../plots/cartesian/axes").hoverLabelText;k.exports=function(p,t,n,a,i){var r=l(p,t,n,a,i);if(!!r){p=r[0];var f=p.cd[p.index],u=p.cd[0].trace;if(!u.cumulative.enabled){var s=u.orientation==="h"?"y":"x";p[s+"Label"]=o(p[s+"a"],[f.ph0,f.ph1],u[s+"hoverformat"])}return r}}},{"../../plots/cartesian/axes":554,"../bar/hover":655}],823:[function(e,k,z){k.exports={attributes:e("./attributes"),layoutAttributes:e("../bar/layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),supplyLayoutDefaults:e("../bar/layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("../bar/cross_trace_calc").crossTraceCalc,plot:e("../bar/plot").plot,layerName:"barlayer",style:e("../bar/style").style,styleOnSelect:e("../bar/style").styleOnSelect,colorbar:e("../scatter/marker_colorbar"),hoverPoints:e("./hover"),selectPoints:e("../bar/select"),eventData:e("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../bar/cross_trace_calc":651,"../bar/layout_attributes":657,"../bar/layout_defaults":658,"../bar/plot":659,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":944,"./attributes":812,"./calc":817,"./cross_trace_defaults":819,"./defaults":820,"./event_data":821,"./hover":822}],824:[function(e,k,z){k.exports={percent:function(l,o){for(var c=l.length,p=100/o,t=0;t<c;t++)l[t]*=p},probability:function(l,o){for(var c=l.length,p=0;p<c;p++)l[p]/=o},density:function(l,o,c,p){var t=l.length;p=p||1;for(var n=0;n<t;n++)l[n]*=c[n]*p},"probability density":function(l,o,c,p){var t=l.length;p&&(o/=p);for(var n=0;n<t;n++)l[n]*=c[n]/o}}},{}],825:[function(e,k,z){var l=e("../histogram/attributes"),o=e("../histogram/bin_attributes"),c=e("../heatmap/attributes"),p=e("../../plots/attributes"),t=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,n=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,i=e("../../components/colorscale/attributes"),r=e("../../lib/extend").extendFlat;k.exports=r({x:l.x,y:l.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:l.histnorm,histfunc:l.histfunc,nbinsx:l.nbinsx,xbins:o("x"),nbinsy:l.nbinsy,ybins:o("y"),autobinx:l.autobinx,autobiny:l.autobiny,bingroup:r({},l.bingroup,{}),xbingroup:r({},l.bingroup,{}),ybingroup:r({},l.bingroup,{}),xgap:c.xgap,ygap:c.ygap,zsmooth:c.zsmooth,xhoverformat:t("x"),yhoverformat:t("y"),zhoverformat:t("z",1),hovertemplate:n({},{keys:"z"}),texttemplate:a({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:c.textfont,showlegend:r({},p.showlegend,{dflt:!1})},i("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../heatmap/attributes":792,"../histogram/attributes":812,"../histogram/bin_attributes":814}],826:[function(e,k,z){var l=e("../../lib"),o=e("../../plots/cartesian/axes"),c=e("../histogram/bin_functions"),p=e("../histogram/norm_functions"),t=e("../histogram/average"),n=e("../histogram/bin_label_vals"),a=e("../histogram/calc").calcAllAutoBins;k.exports=function(s,h){var d=o.getFromId(s,h.xaxis),y=o.getFromId(s,h.yaxis),m=h.xcalendar,g=h.ycalendar,x=function(it){return d.r2c(it,0,m)},A=function(it){return y.r2c(it,0,g)},b=function(it){return d.c2r(it,0,m)},S=function(it){return y.c2r(it,0,g)},w,T,_,v,P=a(s,h,d,"x"),M=P[0],E=P[1],D=a(s,h,y,"y"),N=D[0],O=D[1],I=h._length;E.length>I&&E.splice(I,E.length-I),O.length>I&&O.splice(I,O.length-I);var F=[],V=[],U=[],j=typeof M.size=="string",Z=typeof N.size=="string",te=[],re=[],W=j?te:M,J=Z?re:N,le=0,ue=[],se=[],G=h.histnorm,Y=h.histfunc,ee=G.indexOf("density")!==-1,$=Y==="max"||Y==="min",K=$?null:0,Q=c.count,ae=p[G],ie=!1,oe=[],fe=[],ye="z"in h?h.z:"marker"in h&&Array.isArray(h.marker.color)?h.marker.color:"";ye&&Y!=="count"&&(ie=Y==="avg",Q=c[Y]);var ce=M.size,me=x(M.start),xe=x(M.end)+(me-o.tickIncrement(me,ce,!1,m))/1e6;for(w=me;w<xe;w=o.tickIncrement(w,ce,!1,m))V.push(K),te.push(w),ie&&U.push(0);te.push(w);var ke=V.length,Ae=(w-me)/ke,Oe=b(me+Ae/2),He=N.size,Ge=A(N.start),_e=A(N.end)+(Ge-o.tickIncrement(Ge,He,!1,g))/1e6;for(w=Ge;w<_e;w=o.tickIncrement(w,He,!1,g)){F.push(V.slice()),re.push(w);var Ie=new Array(ke);for(T=0;T<ke;T++)Ie[T]=[];se.push(Ie),ie&&ue.push(U.slice())}re.push(w);var We=F.length,et=(w-Ge)/We,Ne=S(Ge+et/2);ee&&(oe=i(V.length,W,Ae,j),fe=i(F.length,J,et,Z)),!j&&d.type==="date"&&(W=r(x,W)),!Z&&y.type==="date"&&(J=r(A,J));var De=!0,Ve=!0,dt=new Array(ke),Dt=new Array(We),Gt=1/0,Mt=1/0,zt=1/0,Nt=1/0;for(w=0;w<I;w++){var Et=E[w],At=O[w];_=l.findBin(Et,W),v=l.findBin(At,J),_>=0&&_<ke&&v>=0&&v<We&&(le+=Q(_,w,F[v],ye,ue[v]),se[v][_].push(w),De&&(dt[_]===void 0?dt[_]=Et:dt[_]!==Et&&(De=!1)),Ve&&(Dt[v]===void 0?Dt[v]=At:Dt[v]!==At&&(Ve=!1)),Gt=Math.min(Gt,Et-te[_]),Mt=Math.min(Mt,te[_+1]-Et),zt=Math.min(zt,At-re[v]),Nt=Math.min(Nt,re[v+1]-At))}if(ie)for(v=0;v<We;v++)le+=t(F[v],ue[v]);if(ae)for(v=0;v<We;v++)ae(F[v],le,oe,fe[v]);return{x:E,xRanges:f(te,De&&dt,Gt,Mt,d,m),x0:Oe,dx:Ae,y:O,yRanges:f(re,Ve&&Dt,zt,Nt,y,g),y0:Ne,dy:et,z:F,pts:se}};function i(u,s,h,d){var y=new Array(u),m;if(d)for(m=0;m<u;m++)y[m]=1/(s[m+1]-s[m]);else{var g=1/h;for(m=0;m<u;m++)y[m]=g}return y}function r(u,s){return{start:u(s.start),end:u(s.end),size:s.size}}function f(u,s,h,d,y,m){var g,x=u.length-1,A=new Array(x),b=n(h,d,u,y,m);for(g=0;g<x;g++){var S=(s||[])[g];A[g]=S===void 0?[b(u[g]),b(u[g+1],!0)]:[S,S]}return A}},{"../../lib":503,"../../plots/cartesian/axes":554,"../histogram/average":813,"../histogram/bin_functions":815,"../histogram/bin_label_vals":816,"../histogram/calc":817,"../histogram/norm_functions":824}],827:[function(e,k,z){var l=e("../../lib"),o=e("./sample_defaults"),c=e("../heatmap/style_defaults"),p=e("../../components/colorscale/defaults"),t=e("../heatmap/label_defaults"),n=e("./attributes");k.exports=function(i,r,f,u){function s(h,d){return l.coerce(i,r,n,h,d)}o(i,r,s,u),r.visible!==!1&&(c(i,r,s,u),p(i,r,u,s,{prefix:"",cLetter:"z"}),s("hovertemplate"),t(s,u),s("xhoverformat"),s("yhoverformat"))}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/style_defaults":806,"./attributes":825,"./sample_defaults":830}],828:[function(e,k,z){var l=e("../heatmap/hover"),o=e("../../plots/cartesian/axes").hoverLabelText;k.exports=function(p,t,n,a,i){var r=l(p,t,n,a,i);if(!!r){p=r[0];var f=p.index,u=f[0],s=f[1],h=p.cd[0],d=h.trace,y=h.xRanges[s],m=h.yRanges[u];return p.xLabel=o(p.xa,[y[0],y[1]],d.xhoverformat),p.yLabel=o(p.ya,[m[0],m[1]],d.yhoverformat),r}}},{"../../plots/cartesian/axes":554,"../heatmap/hover":799}],829:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../heatmap/calc"),plot:e("../heatmap/plot"),layerName:"heatmaplayer",colorbar:e("../heatmap/colorbar"),style:e("../heatmap/style"),hoverPoints:e("./hover"),eventData:e("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../heatmap/calc":793,"../heatmap/colorbar":795,"../heatmap/plot":804,"../heatmap/style":805,"../histogram/cross_trace_defaults":819,"../histogram/event_data":821,"./attributes":825,"./defaults":827,"./hover":828}],830:[function(e,k,z){var l=e("../../registry"),o=e("../../lib");k.exports=function(p,t,n,a){var i=n("x"),r=n("y"),f=o.minRowLength(i),u=o.minRowLength(r);if(!f||!u){t.visible=!1;return}t._length=Math.min(f,u);var s=l.getComponentMethod("calendars","handleTraceDefaults");s(p,t,["x","y"],a);var h=n("z")||n("marker.color");h&&n("histfunc"),n("histnorm"),n("autobinx"),n("autobiny")}},{"../../lib":503,"../../registry":638}],831:[function(e,k,z){var l=e("../histogram2d/attributes"),o=e("../contour/attributes"),c=e("../../components/colorscale/attributes"),p=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../lib/extend").extendFlat;k.exports=t({x:l.x,y:l.y,z:l.z,marker:l.marker,histnorm:l.histnorm,histfunc:l.histfunc,nbinsx:l.nbinsx,xbins:l.xbins,nbinsy:l.nbinsy,ybins:l.ybins,autobinx:l.autobinx,autobiny:l.autobiny,bingroup:l.bingroup,xbingroup:l.xbingroup,ybingroup:l.ybingroup,autocontour:o.autocontour,ncontours:o.ncontours,contours:o.contours,line:{color:o.line.color,width:t({},o.line.width,{dflt:.5}),dash:o.line.dash,smoothing:o.line.smoothing,editType:"plot"},xhoverformat:p("x"),yhoverformat:p("y"),zhoverformat:p("z",1),hovertemplate:l.hovertemplate,texttemplate:o.texttemplate,textfont:o.textfont},c("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../contour/attributes":735,"../histogram2d/attributes":825}],832:[function(e,k,z){var l=e("../../lib"),o=e("../histogram2d/sample_defaults"),c=e("../contour/contours_defaults"),p=e("../contour/style_defaults"),t=e("../heatmap/label_defaults"),n=e("./attributes");k.exports=function(i,r,f,u){function s(d,y){return l.coerce(i,r,n,d,y)}function h(d){return l.coerce2(i,r,n,d)}o(i,r,s,u),r.visible!==!1&&(c(i,r,s,h),p(i,r,s,u),s("xhoverformat"),s("yhoverformat"),s("hovertemplate"),r.contours&&r.contours.coloring==="heatmap"&&t(s,u))}},{"../../lib":503,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/label_defaults":802,"../histogram2d/sample_defaults":830,"./attributes":831}],833:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../contour/calc"),plot:e("../contour/plot").plot,layerName:"contourlayer",style:e("../contour/style"),colorbar:e("../contour/colorbar"),hoverPoints:e("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../contour/calc":736,"../contour/colorbar":738,"../contour/hover":748,"../contour/plot":753,"../contour/style":755,"../histogram/cross_trace_defaults":819,"./attributes":831,"./defaults":832}],834:[function(e,k,z){var l=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../plots/template_attributes").texttemplateAttrs,c=e("../../components/colorscale/attributes"),p=e("../../plots/domain").attributes,t=e("../pie/attributes"),n=e("../sunburst/attributes"),a=e("../treemap/attributes"),i=e("../treemap/constants"),r=e("../../lib/extend").extendFlat;k.exports={labels:n.labels,parents:n.parents,values:n.values,branchvalues:n.branchvalues,count:n.count,level:n.level,maxdepth:n.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:a.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:r({colors:n.marker.colors,line:n.marker.line,editType:"calc"},c("marker",{colorAttr:"colors",anim:!1})),leaf:n.leaf,pathbar:a.pathbar,text:t.text,textinfo:n.textinfo,texttemplate:o({editType:"plot"},{keys:i.eventDataKeys.concat(["label","value"])}),hovertext:t.hovertext,hoverinfo:n.hoverinfo,hovertemplate:l({},{keys:i.eventDataKeys}),textfont:t.textfont,insidetextfont:t.insidetextfont,outsidetextfont:a.outsidetextfont,textposition:a.textposition,sort:t.sort,root:n.root,domain:p({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"../sunburst/attributes":1045,"../treemap/attributes":1071,"../treemap/constants":1074}],835:[function(e,k,z){var l=e("../../plots/plots");z.name="icicle",z.plot=function(o,c,p,t){l.plotBasePlot(z.name,o,c,p,t)},z.clean=function(o,c,p,t){l.cleanBasePlot(z.name,o,c,p,t)}},{"../../plots/plots":619}],836:[function(e,k,z){var l=e("../sunburst/calc");z.calc=function(o,c){return l.calc(o,c)},z.crossTraceCalc=function(o){return l._runCrossTraceCalc("icicle",o)}},{"../sunburst/calc":1047}],837:[function(e,k,z){var l=e("../../lib"),o=e("./attributes"),c=e("../../components/color"),p=e("../../plots/domain").defaults,t=e("../bar/defaults").handleText,n=e("../bar/constants").TEXTPAD,a=e("../../components/colorscale"),i=a.hasColorscale,r=a.handleDefaults;k.exports=function(u,s,h,d){function y(_,v){return l.coerce(u,s,o,_,v)}var m=y("labels"),g=y("parents");if(!m||!m.length||!g||!g.length){s.visible=!1;return}var x=y("values");x&&x.length?y("branchvalues"):y("count"),y("level"),y("maxdepth"),y("tiling.orientation"),y("tiling.flip"),y("tiling.pad");var A=y("text");y("texttemplate"),s.texttemplate||y("textinfo",Array.isArray(A)?"text+label":"label"),y("hovertext"),y("hovertemplate");var b=y("pathbar.visible"),S="auto";t(u,s,d,y,S,{hasPathbar:b,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),y("textposition");var w=y("marker.line.width");w&&y("marker.line.color",d.paper_bgcolor),y("marker.colors");var T=s._hasColorscale=i(u,"marker","colors")||(u.marker||{}).coloraxis;T&&r(u,s,d,y,{prefix:"marker.",cLetter:"c"}),y("leaf.opacity",T?1:.7),s._hovered={marker:{line:{width:2,color:c.contrast(d.paper_bgcolor)}}},b&&(y("pathbar.thickness",s.pathbar.textfont.size+2*n),y("pathbar.side"),y("pathbar.edgeshape")),y("sort"),y("root.color"),p(s,d,y),s._length=null}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":834}],838:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../lib"),c=e("../../components/drawing"),p=e("../../lib/svg_text_utils"),t=e("./partition"),n=e("./style").styleOne,a=e("../treemap/constants"),i=e("../sunburst/helpers"),r=e("../sunburst/fx"),f=e("../sunburst/plot").formatSliceLabel,u=!1;k.exports=function(h,d,y,m,g){var x=g.width,A=g.height,b=g.viewX,S=g.viewY,w=g.pathSlice,T=g.toMoveInsideSlice,_=g.strTransform,v=g.hasTransition,P=g.handleSlicesExit,M=g.makeUpdateSliceInterpolator,E=g.makeUpdateTextInterpolator,D=g.prevEntry,N={},O=h._fullLayout,I=d[0],F=I.trace,V=F.textposition.indexOf("left")!==-1,U=F.textposition.indexOf("right")!==-1,j=F.textposition.indexOf("bottom")!==-1,Z=t(y,[x,A],{flipX:F.tiling.flip.indexOf("x")>-1,flipY:F.tiling.flip.indexOf("y")>-1,orientation:F.tiling.orientation,pad:{inner:F.tiling.pad},maxDepth:F._maxDepth}),te=Z.descendants(),re=1/0,W=-1/0;te.forEach(function(G){var Y=G.depth;Y>=F._maxDepth?(G.x0=G.x1=(G.x0+G.x1)/2,G.y0=G.y1=(G.y0+G.y1)/2):(re=Math.min(re,Y),W=Math.max(W,Y))}),m=m.data(te,i.getPtId),F._maxVisibleLayers=isFinite(W)?W-re+1:0,m.enter().append("g").classed("slice",!0),P(m,u,N,[x,A],w),m.order();var J=null;if(v&&D){var le=i.getPtId(D);m.each(function(G){J===null&&i.getPtId(G)===le&&(J={x0:G.x0,x1:G.x1,y0:G.y0,y1:G.y1})})}var ue=function(){return J||{x0:0,x1:x,y0:0,y1:A}},se=m;return v&&(se=se.transition().each("end",function(){var G=l.select(this);i.setSliceCursor(G,h,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),se.each(function(G){G._x0=b(G.x0),G._x1=b(G.x1),G._y0=S(G.y0),G._y1=S(G.y1),G._hoverX=b(G.x1-F.tiling.pad),G._hoverY=S(j?G.y1-F.tiling.pad/2:G.y0+F.tiling.pad/2);var Y=l.select(this),ee=o.ensureSingle(Y,"path","surface",function(ae){ae.style("pointer-events","all")});v?ee.transition().attrTween("d",function(ae){var ie=M(ae,u,ue(),[x,A],{orientation:F.tiling.orientation,flipX:F.tiling.flip.indexOf("x")>-1,flipY:F.tiling.flip.indexOf("y")>-1});return function(oe){return w(ie(oe))}}):ee.attr("d",w),Y.call(r,y,h,d,{styleOne:n,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(i.setSliceCursor,h,{isTransitioning:h._transitioning}),ee.call(n,G,F,{hovered:!1}),G.x0===G.x1||G.y0===G.y1?G._text="":G._text=f(G,y,F,d,O)||"";var $=o.ensureSingle(Y,"g","slicetext"),K=o.ensureSingle($,"text","",function(ae){ae.attr("data-notex",1)}),Q=o.ensureUniformFontSize(h,i.determineTextFont(F,G,O.font));K.text(G._text||" ").classed("slicetext",!0).attr("text-anchor",U?"end":V?"start":"middle").call(c.font,Q).call(p.convertToTspans,h),G.textBB=c.bBox(K.node()),G.transform=T(G,{fontSize:Q.size}),G.transform.fontSize=Q.size,v?K.transition().attrTween("transform",function(ae){var ie=E(ae,u,ue(),[x,A]);return function(oe){return _(ie(oe))}}):K.attr("transform",_(G))}),J}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"../sunburst/plot":1055,"../treemap/constants":1074,"./partition":842,"./style":844,"@plotly/d3":58}],839:[function(e,k,z){k.exports={moduleType:"trace",name:"icicle",basePlotModule:e("./base_plot"),categories:[],animatable:!0,attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),style:e("./style").style,colorbar:e("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":834,"./base_plot":835,"./calc":836,"./defaults":837,"./layout_attributes":840,"./layout_defaults":841,"./plot":843,"./style":844}],840:[function(e,k,z){k.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],841:[function(e,k,z){var l=e("../../lib"),o=e("./layout_attributes");k.exports=function(p,t){function n(a,i){return l.coerce(p,t,o,a,i)}n("iciclecolorway",t.colorway),n("extendiciclecolors")}},{"../../lib":503,"./layout_attributes":840}],842:[function(e,k,z){var l=e("d3-hierarchy"),o=e("../treemap/flip_tree");k.exports=function(p,t,n){var a=n.flipX,i=n.flipY,r=n.orientation==="h",f=n.maxDepth,u=t[0],s=t[1];f&&(u=(p.height+1)*t[0]/Math.min(p.height+1,f),s=(p.height+1)*t[1]/Math.min(p.height+1,f));var h=l.partition().padding(n.pad.inner).size(r?[t[1],u]:[t[0],s])(p);return(r||a||i)&&o(h,t,{swapXY:r,flipX:a,flipY:i}),h}},{"../treemap/flip_tree":1079,"d3-hierarchy":115}],843:[function(e,k,z){var l=e("../treemap/draw"),o=e("./draw_descendants");k.exports=function(p,t,n,a){return l(p,t,n,a,{type:"icicle",drawDescendants:o})}},{"../treemap/draw":1076,"./draw_descendants":838}],844:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../components/color"),c=e("../../lib"),p=e("../bar/uniform_text").resizeText;function t(a){var i=a._fullLayout._iciclelayer.selectAll(".trace");p(a,i,"icicle"),i.each(function(r){var f=l.select(this),u=r[0],s=u.trace;f.style("opacity",s.opacity),f.selectAll("path.surface").each(function(h){l.select(this).call(n,h,s)})})}function n(a,i,r){var f=i.data.data,u=!i.children,s=f.i,h=c.castOption(r,s,"marker.line.color")||o.defaultLine,d=c.castOption(r,s,"marker.line.width")||0;a.style("stroke-width",d).call(o.fill,f.color).call(o.stroke,h).style("opacity",u?r.leaf.opacity:null)}k.exports={style:t,styleOne:n}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],845:[function(e,k,z){for(var l=e("../../plots/attributes"),o=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../../lib/extend").extendFlat,p=e("./constants").colormodel,t=["rgb","rgba","rgba256","hsl","hsla"],n=[],a=[],i=0;i<t.length;i++){var r=p[t[i]];n.push("For the `"+t[i]+"` colormodel, it is ["+(r.zminDflt||r.min).join(", ")+"]."),a.push("For the `"+t[i]+"` colormodel, it is ["+(r.zmaxDflt||r.max).join(", ")+"].")}k.exports=c({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:t,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:c({},l.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:o({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"./constants":847}],846:[function(e,k,z){var l=e("../../lib"),o=e("./constants"),c=e("fast-isnumeric"),p=e("../../plots/cartesian/axes"),t=e("../../lib").maxRowLength,n=e("./helpers").getImageSize;k.exports=function(u,s){var h,d;if(s._hasZ)h=s.z.length,d=t(s.z);else if(s._hasSource){var y=n(s.source);h=y.height,d=y.width}var m=p.getFromId(u,s.xaxis||"x"),g=p.getFromId(u,s.yaxis||"y"),x=m.d2c(s.x0)-s.dx/2,A=g.d2c(s.y0)-s.dy/2,b,S=[x,x+d*s.dx],w=[A,A+h*s.dy];if(m&&m.type==="log")for(b=0;b<d;b++)S.push(x+b*s.dx);if(g&&g.type==="log")for(b=0;b<h;b++)w.push(A+b*s.dy);s._extremes[m._id]=p.findExtremes(m,S),s._extremes[g._id]=p.findExtremes(g,w),s._scaler=r(s);var T={x0:x,y0:A,z:s.z,w:d,h};return[T]};function a(f,u,s,h){return function(d){return l.constrain((d-f)*u,s,h)}}function i(f,u){return function(s){return l.constrain(s,f,u)}}function r(f){var u=o.colormodel[f.colormodel],s=u.colormodel||f.colormodel,h=s.length;f._sArray=[];for(var d=0;d<h;d++)u.min[d]!==f.zmin[d]||u.max[d]!==f.zmax[d]?f._sArray.push(a(f.zmin[d],(u.max[d]-u.min[d])/(f.zmax[d]-f.zmin[d]),u.min[d],u.max[d])):f._sArray.push(i(u.min[d],u.max[d]));return function(y){for(var m=y.slice(0,h),g=0;g<h;g++){var x=m[g];if(!c(x))return!1;m[g]=f._sArray[g](x)}return m}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":847,"./helpers":850,"fast-isnumeric":190}],847:[function(e,k,z){k.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(l){return l.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(l){return l.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(l){return l.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(l){var o=l.slice(0,3);return o[1]=o[1]+"%",o[2]=o[2]+"%",o},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(l){var o=l.slice(0,4);return o[1]=o[1]+"%",o[2]=o[2]+"%",o},suffix:["\xB0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],848:[function(e,k,z){var l=e("../../lib"),o=e("./attributes"),c=e("./constants"),p=e("../../snapshot/helpers").IMAGE_URL_PREFIX;k.exports=function(n,a){function i(u,s){return l.coerce(n,a,o,u,s)}i("source"),a.source&&!a.source.match(p)&&delete a.source,a._hasSource=!!a.source;var r=i("z");if(a._hasZ=!(r===void 0||!r.length||!r[0]||!r[0].length),!a._hasZ&&!a._hasSource){a.visible=!1;return}i("x0"),i("y0"),i("dx"),i("dy");var f;a._hasZ?(i("colormodel","rgb"),f=c.colormodel[a.colormodel],i("zmin",f.zminDflt||f.min),i("zmax",f.zmaxDflt||f.max)):a._hasSource&&(a.colormodel="rgba256",f=c.colormodel[a.colormodel],a.zmin=f.zminDflt,a.zmax=f.zmaxDflt),i("zsmooth"),i("text"),i("hovertext"),i("hovertemplate"),a._length=null}},{"../../lib":503,"../../snapshot/helpers":642,"./attributes":845,"./constants":847}],849:[function(e,k,z){k.exports=function(o,c){return"xVal"in c&&(o.x=c.xVal),"yVal"in c&&(o.y=c.yVal),c.xa&&(o.xaxis=c.xa),c.ya&&(o.yaxis=c.ya),o.color=c.color,o.colormodel=c.trace.colormodel,o.z||(o.z=c.color),o}},{}],850:[function(e,k,z){var l=e("probe-image-size/sync"),o=e("../../snapshot/helpers").IMAGE_URL_PREFIX,c=e("buffer/").Buffer;z.getImageSize=function(p){var t=p.replace(o,""),n=new c(t,"base64");return l(n)}},{"../../snapshot/helpers":642,"buffer/":85,"probe-image-size/sync":276}],851:[function(e,k,z){var l=e("../../components/fx"),o=e("../../lib"),c=e("./constants");k.exports=function(t,n,a){var i=t.cd[0],r=i.trace,f=t.xa,u=t.ya;if(!(l.inbox(n-i.x0,n-(i.x0+i.w*r.dx),0)>0||l.inbox(a-i.y0,a-(i.y0+i.h*r.dy),0)>0)){var s=Math.floor((n-i.x0)/r.dx),h=Math.floor(Math.abs(a-i.y0)/r.dy),d;if(r._hasZ?d=i.z[h][s]:r._hasSource&&(d=r._canvas.el.getContext("2d").getImageData(s,h,1,1).data),!!d){var y=i.hi||r.hoverinfo,m;if(y){var g=y.split("+");g.indexOf("all")!==-1&&(g=["color"]),g.indexOf("color")!==-1&&(m=!0)}var x=c.colormodel[r.colormodel],A=x.colormodel||r.colormodel,b=A.length,S=r._scaler(d),w=x.suffix,T=[];(r.hovertemplate||m)&&(T.push("["+[S[0]+w[0],S[1]+w[1],S[2]+w[2]].join(", ")),b===4&&T.push(", "+S[3]+w[3]),T.push("]"),T=T.join(""),t.extraText=A.toUpperCase()+": "+T);var _;Array.isArray(r.hovertext)&&Array.isArray(r.hovertext[h])?_=r.hovertext[h][s]:Array.isArray(r.text)&&Array.isArray(r.text[h])&&(_=r.text[h][s]);var v=u.c2p(i.y0+(h+.5)*r.dy),P=i.x0+(s+.5)*r.dx,M=i.y0+(h+.5)*r.dy,E="["+d.slice(0,r.colormodel.length).join(", ")+"]";return[o.extendFlat(t,{index:[h,s],x0:f.c2p(i.x0+s*r.dx),x1:f.c2p(i.x0+(s+1)*r.dx),y0:v,y1:v,color:S,xVal:P,xLabelVal:P,yVal:M,yLabelVal:M,zLabelVal:E,text:_,hovertemplateLabels:{zLabel:E,colorLabel:T,"color[0]Label":S[0]+w[0],"color[1]Label":S[1]+w[1],"color[2]Label":S[2]+w[2],"color[3]Label":S[3]+w[3]}})]}}}},{"../../components/fx":406,"../../lib":503,"./constants":847}],852:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),style:e("./style"),hoverPoints:e("./hover"),eventData:e("./event_data"),moduleType:"trace",name:"image",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":568,"./attributes":845,"./calc":846,"./defaults":848,"./event_data":849,"./hover":851,"./plot":853,"./style":854}],853:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../lib"),c=o.strTranslate,p=e("../../constants/xmlns_namespaces"),t=e("./constants"),n=o.isIOS()||o.isSafari()||o.isIE();k.exports=function(i,r,f,u){var s=r.xaxis,h=r.yaxis,d=!(n||i._context._exportedPlot);o.makeTraceGroups(u,f,"im").each(function(y){var m=l.select(this),g=y[0],x=g.trace,A=(x.zsmooth==="fast"||x.zsmooth===!1&&d)&&!x._hasZ&&x._hasSource&&s.type==="linear"&&h.type==="linear";x._realImage=A;var b=g.z,S=g.x0,w=g.y0,T=g.w,_=g.h,v=x.dx,P=x.dy,M,E,D,N,O,I;for(I=0;M===void 0&&I<T;)M=s.c2p(S+I*v),I++;for(I=T;E===void 0&&I>0;)E=s.c2p(S+I*v),I--;for(I=0;N===void 0&&I<_;)N=h.c2p(w+I*P),I++;for(I=_;O===void 0&&I>0;)O=h.c2p(w+I*P),I--;if(E<M&&(D=E,E=M,M=D),O<N&&(D=N,N=O,O=D),!A){var F=.5;M=Math.max(-F*s._length,M),E=Math.min((1+F)*s._length,E),N=Math.max(-F*h._length,N),O=Math.min((1+F)*h._length,O)}var V=Math.round(E-M),U=Math.round(O-N),j=V<=0||U<=0;if(j){var Z=m.selectAll("image").data([]);Z.exit().remove();return}function te($){var K=document.createElement("canvas");K.width=V,K.height=U;var Q=K.getContext("2d"),ae=function(He){return o.constrain(Math.round(s.c2p(S+He*v)-M),0,V)},ie=function(He){return o.constrain(Math.round(h.c2p(w+He*P)-N),0,U)},oe=t.colormodel[x.colormodel],fe=oe.colormodel||x.colormodel,ye=oe.fmt,ce;for(I=0;I<g.w;I++){var me=ae(I),xe=ae(I+1);if(!(xe===me||isNaN(xe)||isNaN(me)))for(var ke=0;ke<g.h;ke++){var Ae=ie(ke),Oe=ie(ke+1);Oe===Ae||isNaN(Oe)||isNaN(Ae)||!$(I,ke)||(ce=x._scaler($(I,ke)),ce?Q.fillStyle=fe+"("+ye(ce).join(",")+")":Q.fillStyle="rgba(0,0,0,0)",Q.fillRect(me,Ae,xe-me,Oe-Ae))}}return K}var re=m.selectAll("image").data([y]);re.enter().append("svg:image").attr({xmlns:p.svg,preserveAspectRatio:"none"}),re.exit().remove();var W=x.zsmooth===!1?t.pixelatedStyle:"";if(A){var J=o.simpleMap(s.range,s.r2l),le=o.simpleMap(h.range,h.r2l),ue=J[1]<J[0],se=le[1]>le[0];if(ue||se){var G=M+V/2,Y=N+U/2;W+="transform:"+c(G+"px",Y+"px")+"scale("+(ue?-1:1)+","+(se?-1:1)+")"+c(-G+"px",-Y+"px")+";"}}re.attr("style",W);var ee=new Promise(function($){if(x._hasZ)$();else if(x._hasSource)if(x._canvas&&x._canvas.el.width===T&&x._canvas.el.height===_&&x._canvas.source===x.source)$();else{var K=document.createElement("canvas");K.width=T,K.height=_;var Q=K.getContext("2d");x._image=x._image||new Image;var ae=x._image;ae.onload=function(){Q.drawImage(ae,0,0),x._canvas={el:K,source:x.source},$()},ae.setAttribute("src",x.source)}}).then(function(){var $,K;if(x._hasZ)K=te(function(ie,oe){return b[oe][ie]}),$=K.toDataURL("image/png");else if(x._hasSource)if(A)$=x.source;else{var Q=x._canvas.el.getContext("2d"),ae=Q.getImageData(0,0,T,_).data;K=te(function(ie,oe){var fe=4*(oe*T+ie);return[ae[fe],ae[fe+1],ae[fe+2],ae[fe+3]]}),$=K.toDataURL("image/png")}re.attr({"xlink:href":$,height:U,width:V,x:M,y:N})});i._promises.push(ee)})}},{"../../constants/xmlns_namespaces":480,"../../lib":503,"./constants":847,"@plotly/d3":58}],854:[function(e,k,z){var l=e("@plotly/d3");k.exports=function(c){l.select(c).selectAll(".im image").style("opacity",function(p){return p[0].trace.opacity})}},{"@plotly/d3":58}],855:[function(e,k,z){var l=e("../../lib/extend").extendFlat,o=e("../../lib/extend").extendDeep,c=e("../../plot_api/edit_types").overrideAll,p=e("../../plots/font_attributes"),t=e("../../components/color/attributes"),n=e("../../plots/domain").attributes,a=e("../../plots/cartesian/layout_attributes"),i=e("../../plot_api/plot_template").templatedArray,r=e("../../constants/delta.js"),f=e("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,u=p({editType:"plot",colorEditType:"plot"}),s={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:t.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},h={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},d=i("step",o({},s,{range:h}));k.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:n({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:l({},u,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:f("value")},font:l({},u,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:f("value")},increasing:{symbol:{valType:"string",dflt:r.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:r.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:r.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:l({},u,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:o({},s,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:t.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:c({range:h,visible:l({},a.visible,{dflt:!0}),tickmode:a.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:l({},a.ticks,{dflt:"outside"}),ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,showticklabels:a.showticklabels,tickfont:p({}),tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,tickprefix:a.tickprefix,showtickprefix:a.showtickprefix,ticksuffix:a.ticksuffix,showticksuffix:a.showticksuffix,separatethousands:a.separatethousands,exponentformat:a.exponentformat,minexponent:a.minexponent,showexponent:a.showexponent,editType:"plot"},"plot"),steps:d,threshold:{line:{color:l({},s.line.color,{}),width:l({},s.line.width,{dflt:1}),editType:"plot"},thickness:l({},s.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":365,"../../constants/delta.js":473,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],856:[function(e,k,z){var l=e("../../plots/plots");z.name="indicator",z.plot=function(o,c,p,t){l.plotBasePlot(z.name,o,c,p,t)},z.clean=function(o,c,p,t){l.cleanBasePlot(z.name,o,c,p,t)}},{"../../plots/plots":619}],857:[function(e,k,z){function l(o,c){var p=[],t=c.value;typeof c._lastValue!="number"&&(c._lastValue=c.value);var n=c._lastValue,a=n;return c._hasDelta&&typeof c.delta.reference=="number"&&(a=c.delta.reference),p[0]={y:t,lastY:n,delta:t-a,relativeDelta:(t-a)/a},p}k.exports={calc:l}},{}],858:[function(e,k,z){k.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],859:[function(e,k,z){var l=e("../../lib"),o=e("./attributes"),c=e("../../plots/domain").defaults,p=e("../../plot_api/plot_template"),t=e("../../plots/array_container_defaults"),n=e("./constants.js"),a=e("../../plots/cartesian/tick_value_defaults"),i=e("../../plots/cartesian/tick_mark_defaults"),r=e("../../plots/cartesian/tick_label_defaults"),f=e("../../plots/cartesian/prefix_suffix_defaults");function u(h,d,y,m){function g(I,F){return l.coerce(h,d,o,I,F)}c(d,m,g),g("mode"),d._hasNumber=d.mode.indexOf("number")!==-1,d._hasDelta=d.mode.indexOf("delta")!==-1,d._hasGauge=d.mode.indexOf("gauge")!==-1;var x=g("value");d._range=[0,typeof x=="number"?1.5*x:1];var A=new Array(2),b;d._hasNumber&&(g("number.valueformat"),g("number.font.color",m.font.color),g("number.font.family",m.font.family),g("number.font.size"),d.number.font.size===void 0&&(d.number.font.size=n.defaultNumberFontSize,A[0]=!0),g("number.prefix"),g("number.suffix"),b=d.number.font.size);var S;d._hasDelta&&(g("delta.font.color",m.font.color),g("delta.font.family",m.font.family),g("delta.font.size"),d.delta.font.size===void 0&&(d.delta.font.size=(d._hasNumber?.5:1)*(b||n.defaultNumberFontSize),A[1]=!0),g("delta.reference",d.value),g("delta.relative"),g("delta.valueformat",d.delta.relative?"2%":""),g("delta.increasing.symbol"),g("delta.increasing.color"),g("delta.decreasing.symbol"),g("delta.decreasing.color"),g("delta.position"),S=d.delta.font.size),d._scaleNumbers=(!d._hasNumber||A[0])&&(!d._hasDelta||A[1])||!1,g("title.font.color",m.font.color),g("title.font.family",m.font.family),g("title.font.size",.25*(b||S||n.defaultNumberFontSize)),g("title.text");var w,T,_,v;function P(I,F){return l.coerce(w,T,o.gauge,I,F)}function M(I,F){return l.coerce(_,v,o.gauge.axis,I,F)}if(d._hasGauge){w=h.gauge,w||(w={}),T=p.newContainer(d,"gauge"),P("shape");var E=d._isBullet=d.gauge.shape==="bullet";E||g("title.align","center");var D=d._isAngular=d.gauge.shape==="angular";D||g("align","center"),P("bgcolor",m.paper_bgcolor),P("borderwidth"),P("bordercolor"),P("bar.color"),P("bar.line.color"),P("bar.line.width");var N=n.valueThickness*(d.gauge.shape==="bullet"?.5:1);P("bar.thickness",N),t(w,T,{name:"steps",handleItemDefaults:s}),P("threshold.value"),P("threshold.thickness"),P("threshold.line.width"),P("threshold.line.color"),_={},w&&(_=w.axis||{}),v=p.newContainer(T,"axis"),M("visible"),d._range=M("range",d._range);var O={outerTicks:!0};a(_,v,M,"linear"),f(_,v,M,"linear",O),r(_,v,M,"linear",O),i(_,v,M,O)}else g("title.align","center"),g("align","center"),d._isAngular=d._isBullet=!1;d._length=null}function s(h,d){function y(m,g){return l.coerce(h,d,o.gauge.steps,m,g)}y("color"),y("line.color"),y("line.width"),y("range"),y("thickness")}k.exports={supplyDefaults:u}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"../../plots/domain":584,"./attributes":855,"./constants.js":858}],860:[function(e,k,z){k.exports={moduleType:"trace",name:"indicator",basePlotModule:e("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,calc:e("./calc").calc,plot:e("./plot"),meta:{}}},{"./attributes":855,"./base_plot":856,"./calc":857,"./defaults":859,"./plot":861}],861:[function(e,k,z){var l=e("@plotly/d3"),o=e("d3-interpolate").interpolate,c=e("d3-interpolate").interpolateNumber,p=e("../../lib"),t=p.strScale,n=p.strTranslate,a=p.rad2deg,i=e("../../constants/alignment").MID_SHIFT,r=e("../../components/drawing"),f=e("./constants"),u=e("../../lib/svg_text_utils"),s=e("../../plots/cartesian/axes"),h=e("../../plots/cartesian/axis_defaults"),d=e("../../plots/cartesian/position_defaults"),y=e("../../plots/cartesian/layout_attributes"),m=e("../../components/color"),g={left:"start",center:"middle",right:"end"},x={left:0,center:.5,right:1},A=/[yzafpnmkMGTPEZY]/;function b(O){return O&&O.duration>0}k.exports=function(I,F,V,U){var j=I._fullLayout,Z;b(V)&&U&&(Z=U()),p.makeTraceGroups(j._indicatorlayer,F,"trace").each(function(te){var re=te[0],W=re.trace,J=l.select(this),le=W._hasGauge,ue=W._isAngular,se=W._isBullet,G=W.domain,Y={w:j._size.w*(G.x[1]-G.x[0]),h:j._size.h*(G.y[1]-G.y[0]),l:j._size.l+j._size.w*G.x[0],r:j._size.r+j._size.w*(1-G.x[1]),t:j._size.t+j._size.h*(1-G.y[1]),b:j._size.b+j._size.h*G.y[0]},ee=Y.l+Y.w/2,$=Y.t+Y.h/2,K=Math.min(Y.w/2,Y.h),Q=f.innerRadius*K,ae,ie,oe,fe=W.align||"center";if(ie=$,!le)ae=Y.l+x[fe]*Y.w,oe=function(_e){return M(_e,Y.w,Y.h)};else if(ue&&(ae=ee,ie=$+K/2,oe=function(_e){return E(_e,.9*Q)}),se){var ye=f.bulletPadding,ce=1-f.bulletNumberDomainSize+ye;ae=Y.l+(ce+(1-ce)*x[fe])*Y.w,oe=function(_e){return M(_e,(f.bulletNumberDomainSize-ye)*Y.w,Y.h)}}T(I,J,te,{numbersX:ae,numbersY:ie,numbersScaler:oe,transitionOpts:V,onComplete:Z});var me,xe;le&&(me={range:W.gauge.axis.range,color:W.gauge.bgcolor,line:{color:W.gauge.bordercolor,width:0},thickness:1},xe={range:W.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:W.gauge.bordercolor,width:W.gauge.borderwidth},thickness:1});var ke=J.selectAll("g.angular").data(ue?te:[]);ke.exit().remove();var Ae=J.selectAll("g.angularaxis").data(ue?te:[]);Ae.exit().remove(),ue&&w(I,J,te,{radius:K,innerRadius:Q,gauge:ke,layer:Ae,size:Y,gaugeBg:me,gaugeOutline:xe,transitionOpts:V,onComplete:Z});var Oe=J.selectAll("g.bullet").data(se?te:[]);Oe.exit().remove();var He=J.selectAll("g.bulletaxis").data(se?te:[]);He.exit().remove(),se&&S(I,J,te,{gauge:Oe,layer:He,size:Y,gaugeBg:me,gaugeOutline:xe,transitionOpts:V,onComplete:Z});var Ge=J.selectAll("text.title").data(te);Ge.exit().remove(),Ge.enter().append("text").classed("title",!0),Ge.attr("text-anchor",function(){return se?g.right:g[W.title.align]}).text(W.title.text).call(r.font,W.title.font).call(u.convertToTspans,I),Ge.attr("transform",function(){var _e=Y.l+Y.w*x[W.title.align],Ie,We=f.titlePadding,et=r.bBox(Ge.node());if(le){if(ue)if(W.gauge.axis.visible){var Ne=r.bBox(Ae.node());Ie=Ne.top-We-et.bottom}else Ie=Y.t+Y.h/2-K/2-et.bottom-We;se&&(Ie=ie-(et.top+et.bottom)/2,_e=Y.l-f.bulletPadding*Y.w)}else Ie=W._numbersTop-We-et.bottom;return n(_e,Ie)})})};function S(O,I,F,V){var U=F[0].trace,j=V.gauge,Z=V.layer,te=V.gaugeBg,re=V.gaugeOutline,W=V.size,J=U.domain,le=V.transitionOpts,ue=V.onComplete,se,G,Y,ee,$;j.enter().append("g").classed("bullet",!0),j.attr("transform",n(W.l,W.t)),Z.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Z.selectAll("g.xbulletaxistick,path,text").remove();var K=W.h,Q=U.gauge.bar.thickness*K,ae=J.x[0],ie=J.x[0]+(J.x[1]-J.x[0])*(U._hasNumber||U._hasDelta?1-f.bulletNumberDomainSize:1);se=P(O,U.gauge.axis),se._id="xbulletaxis",se.domain=[ae,ie],se.setScale(),G=s.calcTicks(se),Y=s.makeTransTickFn(se),ee=s.getTickSigns(se)[2],$=W.t+W.h,se.visible&&(s.drawTicks(O,se,{vals:se.ticks==="inside"?s.clipEnds(se,G):G,layer:Z,path:s.makeTickPath(se,$,ee),transFn:Y}),s.drawLabels(O,se,{vals:G,layer:Z,transFn:Y,labelFns:s.makeLabelFns(se,$)}));function oe(Ae){Ae.attr("width",function(Oe){return Math.max(0,se.c2p(Oe.range[1])-se.c2p(Oe.range[0]))}).attr("x",function(Oe){return se.c2p(Oe.range[0])}).attr("y",function(Oe){return .5*(1-Oe.thickness)*K}).attr("height",function(Oe){return Oe.thickness*K})}var fe=[te].concat(U.gauge.steps),ye=j.selectAll("g.bg-bullet").data(fe);ye.enter().append("g").classed("bg-bullet",!0).append("rect"),ye.select("rect").call(oe).call(_),ye.exit().remove();var ce=j.selectAll("g.value-bullet").data([U.gauge.bar]);ce.enter().append("g").classed("value-bullet",!0).append("rect"),ce.select("rect").attr("height",Q).attr("y",(K-Q)/2).call(_),b(le)?ce.select("rect").transition().duration(le.duration).ease(le.easing).each("end",function(){ue&&ue()}).each("interrupt",function(){ue&&ue()}).attr("width",Math.max(0,se.c2p(Math.min(U.gauge.axis.range[1],F[0].y)))):ce.select("rect").attr("width",typeof F[0].y=="number"?Math.max(0,se.c2p(Math.min(U.gauge.axis.range[1],F[0].y))):0),ce.exit().remove();var me=F.filter(function(){return U.gauge.threshold.value||U.gauge.threshold.value===0}),xe=j.selectAll("g.threshold-bullet").data(me);xe.enter().append("g").classed("threshold-bullet",!0).append("line"),xe.select("line").attr("x1",se.c2p(U.gauge.threshold.value)).attr("x2",se.c2p(U.gauge.threshold.value)).attr("y1",(1-U.gauge.threshold.thickness)/2*K).attr("y2",(1-(1-U.gauge.threshold.thickness)/2)*K).call(m.stroke,U.gauge.threshold.line.color).style("stroke-width",U.gauge.threshold.line.width),xe.exit().remove();var ke=j.selectAll("g.gauge-outline").data([re]);ke.enter().append("g").classed("gauge-outline",!0).append("rect"),ke.select("rect").call(oe).call(_),ke.exit().remove()}function w(O,I,F,V){var U=F[0].trace,j=V.size,Z=V.radius,te=V.innerRadius,re=V.gaugeBg,W=V.gaugeOutline,J=[j.l+j.w/2,j.t+j.h/2+Z/2],le=V.gauge,ue=V.layer,se=V.transitionOpts,G=V.onComplete,Y=Math.PI/2;function ee(De){var Ve=U.gauge.axis.range[0],dt=U.gauge.axis.range[1],Dt=(De-Ve)/(dt-Ve)*Math.PI-Y;return Dt<-Y?-Y:Dt>Y?Y:Dt}function $(De){return l.svg.arc().innerRadius((te+Z)/2-De/2*(Z-te)).outerRadius((te+Z)/2+De/2*(Z-te)).startAngle(-Y)}function K(De){De.attr("d",function(Ve){return $(Ve.thickness).startAngle(ee(Ve.range[0])).endAngle(ee(Ve.range[1]))()})}var Q,ae,ie,oe;le.enter().append("g").classed("angular",!0),le.attr("transform",n(J[0],J[1])),ue.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),ue.selectAll("g.xangularaxistick,path,text").remove(),Q=P(O,U.gauge.axis),Q.type="linear",Q.range=U.gauge.axis.range,Q._id="xangularaxis",Q.ticklabeloverflow="allow",Q.setScale();var fe=function(De){return(Q.range[0]-De.x)/(Q.range[1]-Q.range[0])*Math.PI+Math.PI},ye={},ce=s.makeLabelFns(Q,0),me=ce.labelStandoff;ye.xFn=function(De){var Ve=fe(De);return Math.cos(Ve)*me},ye.yFn=function(De){var Ve=fe(De),dt=Math.sin(Ve)>0?.2:1;return-Math.sin(Ve)*(me+De.fontSize*dt)+Math.abs(Math.cos(Ve))*(De.fontSize*i)},ye.anchorFn=function(De){var Ve=fe(De),dt=Math.cos(Ve);return Math.abs(dt)<.1?"middle":dt>0?"start":"end"},ye.heightFn=function(De,Ve,dt){var Dt=fe(De);return-.5*(1+Math.sin(Dt))*dt};var xe=function(De){return n(J[0]+Z*Math.cos(De),J[1]-Z*Math.sin(De))};ie=function(De){return xe(fe(De))};var ke=function(De){var Ve=fe(De);return xe(Ve)+"rotate("+-a(Ve)+")"};if(ae=s.calcTicks(Q),oe=s.getTickSigns(Q)[2],Q.visible){oe=Q.ticks==="inside"?-1:1;var Ae=(Q.linewidth||1)/2;s.drawTicks(O,Q,{vals:ae,layer:ue,path:"M"+oe*Ae+",0h"+oe*Q.ticklen,transFn:ke}),s.drawLabels(O,Q,{vals:ae,layer:ue,transFn:ie,labelFns:ye})}var Oe=[re].concat(U.gauge.steps),He=le.selectAll("g.bg-arc").data(Oe);He.enter().append("g").classed("bg-arc",!0).append("path"),He.select("path").call(K).call(_),He.exit().remove();var Ge=$(U.gauge.bar.thickness),_e=le.selectAll("g.value-arc").data([U.gauge.bar]);_e.enter().append("g").classed("value-arc",!0).append("path");var Ie=_e.select("path");b(se)?(Ie.transition().duration(se.duration).ease(se.easing).each("end",function(){G&&G()}).each("interrupt",function(){G&&G()}).attrTween("d",v(Ge,ee(F[0].lastY),ee(F[0].y))),U._lastValue=F[0].y):Ie.attr("d",typeof F[0].y=="number"?Ge.endAngle(ee(F[0].y)):"M0,0Z"),Ie.call(_),_e.exit().remove(),Oe=[];var We=U.gauge.threshold.value;(We||We===0)&&Oe.push({range:[We,We],color:U.gauge.threshold.color,line:{color:U.gauge.threshold.line.color,width:U.gauge.threshold.line.width},thickness:U.gauge.threshold.thickness});var et=le.selectAll("g.threshold-arc").data(Oe);et.enter().append("g").classed("threshold-arc",!0).append("path"),et.select("path").call(K).call(_),et.exit().remove();var Ne=le.selectAll("g.gauge-outline").data([W]);Ne.enter().append("g").classed("gauge-outline",!0).append("path"),Ne.select("path").call(K).call(_),Ne.exit().remove()}function T(O,I,F,V){var U=F[0].trace,j=V.numbersX,Z=V.numbersY,te=U.align||"center",re=g[te],W=V.transitionOpts,J=V.onComplete,le=p.ensureSingle(I,"g","numbers"),ue,se,G,Y=[];U._hasNumber&&Y.push("number"),U._hasDelta&&(Y.push("delta"),U.delta.position==="left"&&Y.reverse());var ee=le.selectAll("text").data(Y);ee.enter().append("text"),ee.attr("text-anchor",function(){return re}).attr("class",function(xe){return xe}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),ee.exit().remove();function $(xe,ke,Ae,Oe){if(xe.match("s")&&Ae>=0!=Oe>=0&&!ke(Ae).slice(-1).match(A)&&!ke(Oe).slice(-1).match(A)){var He=xe.slice().replace("s","f").replace(/\d+/,function(_e){return parseInt(_e)-1}),Ge=P(O,{tickformat:He});return function(_e){return Math.abs(_e)<1?s.tickText(Ge,_e).text:ke(_e)}}else return ke}function K(){var xe=P(O,{tickformat:U.number.valueformat},U._range);xe.setScale(),s.prepTicks(xe);var ke=function(_e){return s.tickText(xe,_e).text},Ae=U.number.suffix,Oe=U.number.prefix,He=le.select("text.number");function Ge(){var _e=typeof F[0].y=="number"?Oe+ke(F[0].y)+Ae:"-";He.text(_e).call(r.font,U.number.font).call(u.convertToTspans,O)}return b(W)?He.transition().duration(W.duration).ease(W.easing).each("end",function(){Ge(),J&&J()}).each("interrupt",function(){Ge(),J&&J()}).attrTween("text",function(){var _e=l.select(this),Ie=c(F[0].lastY,F[0].y);U._lastValue=F[0].y;var We=$(U.number.valueformat,ke,F[0].lastY,F[0].y);return function(et){_e.text(Oe+We(Ie(et))+Ae)}}):Ge(),ue=D(Oe+ke(F[0].y)+Ae,U.number.font,re,O),He}function Q(){var xe=P(O,{tickformat:U.delta.valueformat},U._range);xe.setScale(),s.prepTicks(xe);var ke=function(Ie){return s.tickText(xe,Ie).text},Ae=function(Ie){var We=U.delta.relative?Ie.relativeDelta:Ie.delta;return We},Oe=function(Ie,We){return Ie===0||typeof Ie!="number"||isNaN(Ie)?"-":(Ie>0?U.delta.increasing.symbol:U.delta.decreasing.symbol)+We(Ie)},He=function(Ie){return Ie.delta>=0?U.delta.increasing.color:U.delta.decreasing.color};U._deltaLastValue===void 0&&(U._deltaLastValue=Ae(F[0]));var Ge=le.select("text.delta");Ge.call(r.font,U.delta.font).call(m.fill,He({delta:U._deltaLastValue}));function _e(){Ge.text(Oe(Ae(F[0]),ke)).call(m.fill,He(F[0])).call(u.convertToTspans,O)}return b(W)?Ge.transition().duration(W.duration).ease(W.easing).tween("text",function(){var Ie=l.select(this),We=Ae(F[0]),et=U._deltaLastValue,Ne=$(U.delta.valueformat,ke,et,We),De=c(et,We);return U._deltaLastValue=We,function(Ve){Ie.text(Oe(De(Ve),Ne)),Ie.call(m.fill,He({delta:De(Ve)}))}}).each("end",function(){_e(),J&&J()}).each("interrupt",function(){_e(),J&&J()}):_e(),se=D(Oe(Ae(F[0]),ke),U.delta.font,re,O),Ge}var ae=U.mode+U.align,ie;if(U._hasDelta&&(ie=Q(),ae+=U.delta.position+U.delta.font.size+U.delta.font.family+U.delta.valueformat,ae+=U.delta.increasing.symbol+U.delta.decreasing.symbol,G=se),U._hasNumber&&(K(),ae+=U.number.font.size+U.number.font.family+U.number.valueformat+U.number.suffix+U.number.prefix,G=ue),U._hasDelta&&U._hasNumber){var oe=[(ue.left+ue.right)/2,(ue.top+ue.bottom)/2],fe=[(se.left+se.right)/2,(se.top+se.bottom)/2],ye,ce,me=.75*U.delta.font.size;U.delta.position==="left"&&(ye=N(U,"deltaPos",0,-1*(ue.width*x[U.align]+se.width*(1-x[U.align])+me),ae,Math.min),ce=oe[1]-fe[1],G={width:ue.width+se.width+me,height:Math.max(ue.height,se.height),left:se.left+ye,right:ue.right,top:Math.min(ue.top,se.top+ce),bottom:Math.max(ue.bottom,se.bottom+ce)}),U.delta.position==="right"&&(ye=N(U,"deltaPos",0,ue.width*(1-x[U.align])+se.width*x[U.align]+me,ae,Math.max),ce=oe[1]-fe[1],G={width:ue.width+se.width+me,height:Math.max(ue.height,se.height),left:ue.left,right:se.right+ye,top:Math.min(ue.top,se.top+ce),bottom:Math.max(ue.bottom,se.bottom+ce)}),U.delta.position==="bottom"&&(ye=null,ce=se.height,G={width:Math.max(ue.width,se.width),height:ue.height+se.height,left:Math.min(ue.left,se.left),right:Math.max(ue.right,se.right),top:ue.bottom-ue.height,bottom:ue.bottom+se.height}),U.delta.position==="top"&&(ye=null,ce=ue.top,G={width:Math.max(ue.width,se.width),height:ue.height+se.height,left:Math.min(ue.left,se.left),right:Math.max(ue.right,se.right),top:ue.bottom-ue.height-se.height,bottom:ue.bottom}),ie.attr({dx:ye,dy:ce})}(U._hasNumber||U._hasDelta)&&le.attr("transform",function(){var xe=V.numbersScaler(G);ae+=xe[2];var ke=N(U,"numbersScale",1,xe[0],ae,Math.min),Ae;U._scaleNumbers||(ke=1),U._isAngular?Ae=Z-ke*G.bottom:Ae=Z-ke*(G.top+G.bottom)/2,U._numbersTop=ke*G.top+Ae;var Oe=G[te];te==="center"&&(Oe=(G.left+G.right)/2);var He=j-ke*Oe;return He=N(U,"numbersTranslate",0,He,ae,Math.max),n(He,Ae)+t(ke)})}function _(O){O.each(function(I){m.stroke(l.select(this),I.line.color)}).each(function(I){m.fill(l.select(this),I.color)}).style("stroke-width",function(I){return I.line.width})}function v(O,I,F){return function(){var V=o(I,F);return function(U){return O.endAngle(V(U))()}}}function P(O,I,F){var V=O._fullLayout,U=p.extendFlat({type:"linear",ticks:"outside",range:F,showline:!0},I),j={type:"linear",_id:"x"+I._id},Z={letter:"x",font:V.font,noHover:!0,noTickson:!0};function te(re,W){return p.coerce(U,j,y,re,W)}return h(U,j,te,Z,V),d(U,j,te,Z),j}function M(O,I,F){var V=Math.min(I/O.width,F/O.height);return[V,O,I+"x"+F]}function E(O,I){var F=Math.sqrt(O.width/2*(O.width/2)+O.height*O.height),V=I/F;return[V,O,I]}function D(O,I,F,V){var U=document.createElementNS("http://www.w3.org/2000/svg","text"),j=l.select(U);return j.text(O).attr("x",0).attr("y",0).attr("text-anchor",F).attr("data-unformatted",O).call(u.convertToTspans,V).call(r.font,I),r.bBox(j.node())}function N(O,I,F,V,U,j){var Z="_cache"+I;O[Z]&&O[Z].key===U||(O[Z]={key:U,value:F});var te=p.aggNums(j,null,[O[Z].value,V],2);return O[Z].value=te,te}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"./constants":858,"@plotly/d3":58,"d3-interpolate":116}],862:[function(e,k,z){var l=e("../../components/colorscale/attributes"),o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,c=e("../../plots/template_attributes").hovertemplateAttrs,p=e("../mesh3d/attributes"),t=e("../../plots/attributes"),n=e("../../lib/extend").extendFlat,a=e("../../plot_api/edit_types").overrideAll;function i(u){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function r(u){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var f=k.exports=a(n({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:i(),y:i(),z:i()},caps:{x:r(),y:r(),z:r()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:c(),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),valuehoverformat:o("value",1),showlegend:n({},t.showlegend,{dflt:!1})},l("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:p.opacity,lightposition:p.lightposition,lighting:p.lighting,flatshading:p.flatshading,contour:p.contour,hoverinfo:n({},t.hoverinfo)}),"calc","nested");f.flatshading.dflt=!0,f.lighting.facenormalsepsilon.dflt=0,f.x.editType=f.y.editType=f.z.editType=f.value.editType="calc+clearAxisTypes",f.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],863:[function(e,k,z){var l=e("../../components/colorscale/calc"),o=e("../streamtube/calc").processGrid,c=e("../streamtube/calc").filter;k.exports=function(t,n){n._len=Math.min(n.x.length,n.y.length,n.z.length,n.value.length),n._x=c(n.x,n._len),n._y=c(n.y,n._len),n._z=c(n.z,n._len),n._value=c(n.value,n._len);var a=o(n);n._gridFill=a.fill,n._Xs=a.Xs,n._Ys=a.Ys,n._Zs=a.Zs,n._len=a.len;for(var i=1/0,r=-1/0,f=0;f<n._len;f++){var u=n._value[f];i=Math.min(i,u),r=Math.max(r,u)}n._minValues=i,n._maxValues=r,n._vMin=n.isomin===void 0||n.isomin===null?i:n.isomin,n._vMax=n.isomax===void 0||n.isomin===null?r:n.isomax,l(t,n,{vals:[n._vMin,n._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374,"../streamtube/calc":1041}],864:[function(e,k,z){var l=e("../../../stackgl_modules").gl_mesh3d,o=e("../../lib/gl_format_color").parseColorScale,c=e("../../lib/str2rgbarray"),p=e("../../components/colorscale").extractOpts,t=e("../../plots/gl3d/zip3"),n=function(s,h){for(var d=h.length-1;d>0;d--){var y=Math.min(h[d],h[d-1]),m=Math.max(h[d],h[d-1]);if(m>y&&y<s&&s<=m)return{id:d,distRatio:(m-s)/(m-y)}}return{id:0,distRatio:0}};function a(s,h,d){this.scene=s,this.uid=d,this.mesh=h,this.name="",this.data=null,this.showContour=!1}var i=a.prototype;i.handlePick=function(s){if(s.object===this.mesh){var h=s.data.index,d=this.data._meshX[h],y=this.data._meshY[h],m=this.data._meshZ[h],g=this.data._Ys.length,x=this.data._Zs.length,A=n(d,this.data._Xs).id,b=n(y,this.data._Ys).id,S=n(m,this.data._Zs).id,w=s.index=S+x*b+x*g*A;s.traceCoordinate=[this.data._meshX[w],this.data._meshY[w],this.data._meshZ[w],this.data._value[w]];var T=this.data.hovertext||this.data.text;return Array.isArray(T)&&T[w]!==void 0?s.textLabel=T[w]:T&&(s.textLabel=T),!0}},i.update=function(s){var h=this.scene,d=h.fullSceneLayout;this.data=f(s);function y(b,S,w,T){return S.map(function(_){return b.d2l(_,0,T)*w})}var m=t(y(d.xaxis,s._meshX,h.dataScale[0],s.xcalendar),y(d.yaxis,s._meshY,h.dataScale[1],s.ycalendar),y(d.zaxis,s._meshZ,h.dataScale[2],s.zcalendar)),g=t(s._meshI,s._meshJ,s._meshK),x={positions:m,cells:g,lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,contourEnable:s.contour.show,contourColor:c(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},A=p(s);x.vertexIntensity=s._meshIntensity,x.vertexIntensityBounds=[A.min,A.max],x.colormap=o(s),this.mesh.update(x)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var r=["xyz","xzy","yxz","yzx","zxy","zyx"];function f(s){s._meshI=[],s._meshJ=[],s._meshK=[];var h=s.surface.show,d=s.spaceframe.show,y=s.surface.fill,m=s.spaceframe.fill,g=!1,x=!1,A=0,b,S,w=s._Xs,T=s._Ys,_=s._Zs,v=w.length,P=T.length,M=_.length,E=r.indexOf(s._gridFill.replace(/-/g,"").replace(/\+/g,"")),D=function(Et,At,it){switch(E){case 5:return it+M*At+M*P*Et;case 4:return it+M*Et+M*v*At;case 3:return At+P*it+P*M*Et;case 2:return At+P*Et+P*v*it;case 1:return Et+v*it+v*M*At;default:return Et+v*At+v*P*it}},N=s._minValues,O=s._maxValues,I=s._vMin,F=s._vMax,V,U,j,Z;function te(Et,At,it){for(var ht=Z.length,$e=S;$e<ht;$e++)if(Et===V[$e]&&At===U[$e]&&it===j[$e])return $e;return-1}function re(){S=b}function W(){V=[],U=[],j=[],Z=[],b=0,re()}function J(Et,At,it,ht){return V.push(Et),U.push(At),j.push(it),Z.push(ht),b++,b-1}function le(Et,At,it){return s._meshI.push(Et),s._meshJ.push(At),s._meshK.push(it),A++,A-1}function ue(Et,At,it){for(var ht=[],$e=0;$e<Et.length;$e++)ht[$e]=(Et[$e]+At[$e]+it[$e])/3;return ht}function se(Et,At,it){for(var ht=[],$e=0;$e<Et.length;$e++)ht[$e]=Et[$e]*(1-it)+it*At[$e];return ht}var G;function Y(Et){G=Et}function ee(Et,At){var it=Et[0],ht=Et[1],$e=Et[2],Ee=ue(it,ht,$e),Xe=Math.sqrt(1-G),rt=se(Ee,it,Xe),ut=se(Ee,ht,Xe),Pt=se(Ee,$e,Xe),kt=At[0],Bt=At[1],Xt=At[2];return{xyzv:[[it,ht,ut],[ut,rt,it],[ht,$e,Pt],[Pt,ut,ht],[$e,it,rt],[rt,Pt,$e]],abc:[[kt,Bt,-1],[-1,-1,kt],[Bt,Xt,-1],[-1,-1,Bt],[Xt,kt,-1],[-1,-1,Xt]]}}function $(Et,At){return Et==="all"||Et===null?!0:Et.indexOf(At)>-1}function K(Et,At){return Et===null?At:Et}function Q(Et,At,it){re();var ht=[At],$e=[it];if(G>=1)ht=[At],$e=[it];else if(G>0){var Ee=ee(At,it);ht=Ee.xyzv,$e=Ee.abc}for(var Xe=0;Xe<ht.length;Xe++){At=ht[Xe],it=$e[Xe];for(var rt=[],ut=0;ut<3;ut++){var Pt=At[ut][0],kt=At[ut][1],Bt=At[ut][2],Xt=At[ut][3],Ut=it[ut]>-1?it[ut]:te(Pt,kt,Bt);Ut>-1?rt[ut]=Ut:rt[ut]=J(Pt,kt,Bt,K(Et,Xt))}le(rt[0],rt[1],rt[2])}}function ae(Et,At,it){var ht=function($e,Ee,Xe){Q(Et,[At[$e],At[Ee],At[Xe]],[it[$e],it[Ee],it[Xe]])};ht(0,1,2),ht(2,3,0)}function ie(Et,At,it){var ht=function($e,Ee,Xe){Q(Et,[At[$e],At[Ee],At[Xe]],[it[$e],it[Ee],it[Xe]])};ht(0,1,2),ht(3,0,1),ht(2,3,0),ht(1,2,3)}function oe(Et,At,it,ht){var $e=Et[3];$e<it&&($e=it),$e>ht&&($e=ht);for(var Ee=(Et[3]-$e)/(Et[3]-At[3]+1e-9),Xe=[],rt=0;rt<4;rt++)Xe[rt]=(1-Ee)*Et[rt]+Ee*At[rt];return Xe}function fe(Et,At,it){return Et>=At&&Et<=it}function ye(Et){var At=.001*(F-I);return Et>=I-At&&Et<=F+At}function ce(Et){for(var At=[],it=0;it<4;it++){var ht=Et[it];At.push([s._x[ht],s._y[ht],s._z[ht],s._value[ht]])}return At}var me=3;function xe(Et,At,it,ht,$e,Ee){Ee||(Ee=1),it=[-1,-1,-1];var Xe=!1,rt=[fe(At[0][3],ht,$e),fe(At[1][3],ht,$e),fe(At[2][3],ht,$e)];if(!rt[0]&&!rt[1]&&!rt[2])return!1;var ut=function(kt,Bt,Xt){return ye(Bt[0][3])&&ye(Bt[1][3])&&ye(Bt[2][3])?(Q(kt,Bt,Xt),!0):Ee<me?xe(kt,Bt,Xt,I,F,++Ee):!1};if(rt[0]&&rt[1]&&rt[2])return ut(Et,At,it)||Xe;var Pt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(kt){if(rt[kt[0]]&&rt[kt[1]]&&!rt[kt[2]]){var Bt=At[kt[0]],Xt=At[kt[1]],Ut=At[kt[2]],Jt=oe(Ut,Bt,ht,$e),Je=oe(Ut,Xt,ht,$e);Xe=ut(Et,[Je,Jt,Bt],[-1,-1,it[kt[0]]])||Xe,Xe=ut(Et,[Bt,Xt,Je],[it[kt[0]],it[kt[1]],-1])||Xe,Pt=!0}}),Pt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(kt){if(rt[kt[0]]&&!rt[kt[1]]&&!rt[kt[2]]){var Bt=At[kt[0]],Xt=At[kt[1]],Ut=At[kt[2]],Jt=oe(Xt,Bt,ht,$e),Je=oe(Ut,Bt,ht,$e);Xe=ut(Et,[Je,Jt,Bt],[-1,-1,it[kt[0]]])||Xe,Pt=!0}}),Xe}function ke(Et,At,it,ht){var $e=!1,Ee=ce(At),Xe=[fe(Ee[0][3],it,ht),fe(Ee[1][3],it,ht),fe(Ee[2][3],it,ht),fe(Ee[3][3],it,ht)];if(!Xe[0]&&!Xe[1]&&!Xe[2]&&!Xe[3])return $e;if(Xe[0]&&Xe[1]&&Xe[2]&&Xe[3])return x&&($e=ie(Et,Ee,At)||$e),$e;var rt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(ut){if(Xe[ut[0]]&&Xe[ut[1]]&&Xe[ut[2]]&&!Xe[ut[3]]){var Pt=Ee[ut[0]],kt=Ee[ut[1]],Bt=Ee[ut[2]],Xt=Ee[ut[3]];if(x)$e=Q(Et,[Pt,kt,Bt],[At[ut[0]],At[ut[1]],At[ut[2]]])||$e;else{var Ut=oe(Xt,Pt,it,ht),Jt=oe(Xt,kt,it,ht),Je=oe(Xt,Bt,it,ht);$e=Q(null,[Ut,Jt,Je],[-1,-1,-1])||$e}rt=!0}}),rt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(ut){if(Xe[ut[0]]&&Xe[ut[1]]&&!Xe[ut[2]]&&!Xe[ut[3]]){var Pt=Ee[ut[0]],kt=Ee[ut[1]],Bt=Ee[ut[2]],Xt=Ee[ut[3]],Ut=oe(Bt,Pt,it,ht),Jt=oe(Bt,kt,it,ht),Je=oe(Xt,kt,it,ht),gt=oe(Xt,Pt,it,ht);x?($e=Q(Et,[Pt,gt,Ut],[At[ut[0]],-1,-1])||$e,$e=Q(Et,[kt,Jt,Je],[At[ut[1]],-1,-1])||$e):$e=ae(null,[Ut,Jt,Je,gt],[-1,-1,-1,-1])||$e,rt=!0}}),rt)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(ut){if(Xe[ut[0]]&&!Xe[ut[1]]&&!Xe[ut[2]]&&!Xe[ut[3]]){var Pt=Ee[ut[0]],kt=Ee[ut[1]],Bt=Ee[ut[2]],Xt=Ee[ut[3]],Ut=oe(kt,Pt,it,ht),Jt=oe(Bt,Pt,it,ht),Je=oe(Xt,Pt,it,ht);x?($e=Q(Et,[Pt,Ut,Jt],[At[ut[0]],-1,-1])||$e,$e=Q(Et,[Pt,Jt,Je],[At[ut[0]],-1,-1])||$e,$e=Q(Et,[Pt,Je,Ut],[At[ut[0]],-1,-1])||$e):$e=Q(null,[Ut,Jt,Je],[-1,-1,-1])||$e,rt=!0}}),$e}function Ae(Et,At,it,ht,$e,Ee,Xe,rt,ut,Pt,kt){var Bt=!1;return g&&($(Et,"A")&&(Bt=ke(null,[At,it,ht,Ee],Pt,kt)||Bt),$(Et,"B")&&(Bt=ke(null,[it,ht,$e,ut],Pt,kt)||Bt),$(Et,"C")&&(Bt=ke(null,[it,Ee,Xe,ut],Pt,kt)||Bt),$(Et,"D")&&(Bt=ke(null,[ht,Ee,rt,ut],Pt,kt)||Bt),$(Et,"E")&&(Bt=ke(null,[it,ht,Ee,ut],Pt,kt)||Bt)),x&&(Bt=ke(Et,[it,ht,Ee,ut],Pt,kt)||Bt),Bt}function Oe(Et,At,it,ht,$e,Ee,Xe,rt){return[rt[0]===!0?!0:xe(Et,ce([At,it,ht]),[At,it,ht],Ee,Xe),rt[1]===!0?!0:xe(Et,ce([ht,$e,At]),[ht,$e,At],Ee,Xe)]}function He(Et,At,it,ht,$e,Ee,Xe,rt,ut){return rt?Oe(Et,At,it,$e,ht,Ee,Xe,ut):Oe(Et,it,$e,ht,At,Ee,Xe,ut)}function Ge(Et,At,it,ht,$e,Ee,Xe){var rt=!1,ut,Pt,kt,Bt,Xt=function(){rt=xe(Et,[ut,Pt,kt],[-1,-1,-1],$e,Ee)||rt,rt=xe(Et,[kt,Bt,ut],[-1,-1,-1],$e,Ee)||rt},Ut=Xe[0],Jt=Xe[1],Je=Xe[2];return Ut&&(ut=se(ce([D(At,it-0,ht-0)])[0],ce([D(At-1,it-0,ht-0)])[0],Ut),Pt=se(ce([D(At,it-0,ht-1)])[0],ce([D(At-1,it-0,ht-1)])[0],Ut),kt=se(ce([D(At,it-1,ht-1)])[0],ce([D(At-1,it-1,ht-1)])[0],Ut),Bt=se(ce([D(At,it-1,ht-0)])[0],ce([D(At-1,it-1,ht-0)])[0],Ut),Xt()),Jt&&(ut=se(ce([D(At-0,it,ht-0)])[0],ce([D(At-0,it-1,ht-0)])[0],Jt),Pt=se(ce([D(At-0,it,ht-1)])[0],ce([D(At-0,it-1,ht-1)])[0],Jt),kt=se(ce([D(At-1,it,ht-1)])[0],ce([D(At-1,it-1,ht-1)])[0],Jt),Bt=se(ce([D(At-1,it,ht-0)])[0],ce([D(At-1,it-1,ht-0)])[0],Jt),Xt()),Je&&(ut=se(ce([D(At-0,it-0,ht)])[0],ce([D(At-0,it-0,ht-1)])[0],Je),Pt=se(ce([D(At-0,it-1,ht)])[0],ce([D(At-0,it-1,ht-1)])[0],Je),kt=se(ce([D(At-1,it-1,ht)])[0],ce([D(At-1,it-1,ht-1)])[0],Je),Bt=se(ce([D(At-1,it-0,ht)])[0],ce([D(At-1,it-0,ht-1)])[0],Je),Xt()),rt}function _e(Et,At,it,ht,$e,Ee,Xe,rt,ut,Pt,kt,Bt){var Xt=Et;return Bt?(g&&Et==="even"&&(Xt=null),Ae(Xt,At,it,ht,$e,Ee,Xe,rt,ut,Pt,kt)):(g&&Et==="odd"&&(Xt=null),Ae(Xt,ut,rt,Xe,Ee,$e,ht,it,At,Pt,kt))}function Ie(Et,At,it,ht,$e){for(var Ee=[],Xe=0,rt=0;rt<At.length;rt++)for(var ut=At[rt],Pt=1;Pt<M;Pt++)for(var kt=1;kt<P;kt++)Ee.push(He(Et,D(ut,kt-1,Pt-1),D(ut,kt-1,Pt),D(ut,kt,Pt-1),D(ut,kt,Pt),it,ht,(ut+kt+Pt)%2,$e&&$e[Xe]?$e[Xe]:[])),Xe++;return Ee}function We(Et,At,it,ht,$e){for(var Ee=[],Xe=0,rt=0;rt<At.length;rt++)for(var ut=At[rt],Pt=1;Pt<v;Pt++)for(var kt=1;kt<M;kt++)Ee.push(He(Et,D(Pt-1,ut,kt-1),D(Pt,ut,kt-1),D(Pt-1,ut,kt),D(Pt,ut,kt),it,ht,(Pt+ut+kt)%2,$e&&$e[Xe]?$e[Xe]:[])),Xe++;return Ee}function et(Et,At,it,ht,$e){for(var Ee=[],Xe=0,rt=0;rt<At.length;rt++)for(var ut=At[rt],Pt=1;Pt<P;Pt++)for(var kt=1;kt<v;kt++)Ee.push(He(Et,D(kt-1,Pt-1,ut),D(kt-1,Pt,ut),D(kt,Pt-1,ut),D(kt,Pt,ut),it,ht,(kt+Pt+ut)%2,$e&&$e[Xe]?$e[Xe]:[])),Xe++;return Ee}function Ne(Et,At,it){for(var ht=1;ht<M;ht++)for(var $e=1;$e<P;$e++)for(var Ee=1;Ee<v;Ee++)_e(Et,D(Ee-1,$e-1,ht-1),D(Ee-1,$e-1,ht),D(Ee-1,$e,ht-1),D(Ee-1,$e,ht),D(Ee,$e-1,ht-1),D(Ee,$e-1,ht),D(Ee,$e,ht-1),D(Ee,$e,ht),At,it,(Ee+$e+ht)%2)}function De(Et,At,it){x=!0,Ne(Et,At,it),x=!1}function Ve(Et,At,it){g=!0,Ne(Et,At,it),g=!1}function dt(Et,At,it,ht,$e,Ee){for(var Xe=[],rt=0,ut=0;ut<At.length;ut++)for(var Pt=At[ut],kt=1;kt<M;kt++)for(var Bt=1;Bt<P;Bt++)Xe.push(Ge(Et,Pt,Bt,kt,it,ht,$e[ut],Ee&&Ee[rt]?Ee[rt]:[])),rt++;return Xe}function Dt(Et,At,it,ht,$e,Ee){for(var Xe=[],rt=0,ut=0;ut<At.length;ut++)for(var Pt=At[ut],kt=1;kt<v;kt++)for(var Bt=1;Bt<M;Bt++)Xe.push(Ge(Et,kt,Pt,Bt,it,ht,$e[ut],Ee&&Ee[rt]?Ee[rt]:[])),rt++;return Xe}function Gt(Et,At,it,ht,$e,Ee){for(var Xe=[],rt=0,ut=0;ut<At.length;ut++)for(var Pt=At[ut],kt=1;kt<P;kt++)for(var Bt=1;Bt<v;Bt++)Xe.push(Ge(Et,Bt,kt,Pt,it,ht,$e[ut],Ee&&Ee[rt]?Ee[rt]:[])),rt++;return Xe}function Mt(Et,At){for(var it=[],ht=Et;ht<At;ht++)it.push(ht);return it}function zt(){for(var Et=0;Et<v;Et++)for(var At=0;At<P;At++)for(var it=0;it<M;it++){var ht=D(Et,At,it);J(s._x[ht],s._y[ht],s._z[ht],s._value[ht])}}function Nt(){W(),zt();var Et=null;if(d&&m&&(Y(m),De(Et,I,F)),h&&y){Y(y);for(var At=s.surface.pattern,it=s.surface.count,ht=0;ht<it;ht++){var $e=it===1?.5:ht/(it-1),Ee=(1-$e)*I+$e*F,Xe=Math.abs(Ee-N),rt=Math.abs(Ee-O),ut=Xe>rt?[N,Ee]:[Ee,O];Ve(At,ut[0],ut[1])}}var Pt=[[Math.min(I,O),Math.max(I,O)],[Math.min(N,F),Math.max(N,F)]];["x","y","z"].forEach(function(kt){for(var Bt=[],Xt=0;Xt<Pt.length;Xt++){var Ut=0,Jt=Pt[Xt][0],Je=Pt[Xt][1],gt=s.slices[kt];if(gt.show&&gt.fill){Y(gt.fill);var Ct=[],or=[],gr=[];if(gt.locations.length)for(var lr=0;lr<gt.locations.length;lr++){var mr=n(gt.locations[lr],kt==="x"?w:kt==="y"?T:_);mr.distRatio===0?Ct.push(mr.id):mr.id>0&&(or.push(mr.id),kt==="x"?gr.push([mr.distRatio,0,0]):kt==="y"?gr.push([0,mr.distRatio,0]):gr.push([0,0,mr.distRatio]))}else kt==="x"?Ct=Mt(1,v-1):kt==="y"?Ct=Mt(1,P-1):Ct=Mt(1,M-1);or.length>0&&(kt==="x"?Bt[Ut]=dt(Et,or,Jt,Je,gr,Bt[Ut]):kt==="y"?Bt[Ut]=Dt(Et,or,Jt,Je,gr,Bt[Ut]):Bt[Ut]=Gt(Et,or,Jt,Je,gr,Bt[Ut]),Ut++),Ct.length>0&&(kt==="x"?Bt[Ut]=Ie(Et,Ct,Jt,Je,Bt[Ut]):kt==="y"?Bt[Ut]=We(Et,Ct,Jt,Je,Bt[Ut]):Bt[Ut]=et(Et,Ct,Jt,Je,Bt[Ut]),Ut++)}var Fr=s.caps[kt];Fr.show&&Fr.fill&&(Y(Fr.fill),kt==="x"?Bt[Ut]=Ie(Et,[0,v-1],Jt,Je,Bt[Ut]):kt==="y"?Bt[Ut]=We(Et,[0,P-1],Jt,Je,Bt[Ut]):Bt[Ut]=et(Et,[0,M-1],Jt,Je,Bt[Ut]),Ut++)}}),A===0&&W(),s._meshX=V,s._meshY=U,s._meshZ=j,s._meshIntensity=Z,s._Xs=w,s._Ys=T,s._Zs=_}return Nt(),s}function u(s,h){var d=s.glplot.gl,y=l({gl:d}),m=new a(s,y,h.uid);return y._trace=m,m.update(h),s.glplot.add(y),m}k.exports={findNearestOnAxis:n,generateIsoMeshes:f,createIsosurfaceTrace:u}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],865:[function(e,k,z){var l=e("../../lib"),o=e("../../registry"),c=e("./attributes"),p=e("../../components/colorscale/defaults");function t(a,i,r,f){function u(s,h){return l.coerce(a,i,c,s,h)}n(a,i,r,f,u)}function n(a,i,r,f,u){var s=u("isomin"),h=u("isomax");h!=null&&s!==void 0&&s!==null&&s>h&&(i.isomin=null,i.isomax=null);var d=u("x"),y=u("y"),m=u("z"),g=u("value");if(!d||!d.length||!y||!y.length||!m||!m.length||!g||!g.length){i.visible=!1;return}var x=o.getComponentMethod("calendars","handleTraceDefaults");x(a,i,["x","y","z"],f),u("valuehoverformat"),["x","y","z"].forEach(function(w){u(w+"hoverformat");var T="caps."+w,_=u(T+".show");_&&u(T+".fill");var v="slices."+w,P=u(v+".show");P&&(u(v+".fill"),u(v+".locations"))});var A=u("spaceframe.show");A&&u("spaceframe.fill");var b=u("surface.show");b&&(u("surface.count"),u("surface.fill"),u("surface.pattern"));var S=u("contour.show");S&&(u("contour.color"),u("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(w){u(w)}),p(a,i,f,u,{prefix:"",cLetter:"c"}),i._length=null}k.exports={supplyDefaults:t,supplyIsoDefaults:n}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":862}],866:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,calc:e("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":862,"./calc":863,"./convert":864,"./defaults":865}],867:[function(e,k,z){var l=e("../../components/colorscale/attributes"),o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,c=e("../../plots/template_attributes").hovertemplateAttrs,p=e("../surface/attributes"),t=e("../../plots/attributes"),n=e("../../lib/extend").extendFlat;k.exports=n({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:c({editType:"calc"}),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},l("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:p.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:n({},p.contours.x.show,{}),color:p.contours.x.color,width:p.contours.x.width,editType:"calc"},lightposition:{x:n({},p.lightposition.x,{dflt:1e5}),y:n({},p.lightposition.y,{dflt:1e5}),z:n({},p.lightposition.z,{dflt:0}),editType:"calc"},lighting:n({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},p.lighting),hoverinfo:n({},t.hoverinfo,{editType:"calc"}),showlegend:n({},t.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../surface/attributes":1057}],868:[function(e,k,z){var l=e("../../components/colorscale/calc");k.exports=function(c,p){p.intensity&&l(c,p,{vals:p.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],869:[function(e,k,z){var l=e("../../../stackgl_modules").gl_mesh3d,o=e("../../../stackgl_modules").delaunay_triangulate,c=e("../../../stackgl_modules").alpha_shape,p=e("../../../stackgl_modules").convex_hull,t=e("../../lib/gl_format_color").parseColorScale,n=e("../../lib/str2rgbarray"),a=e("../../components/colorscale").extractOpts,i=e("../../plots/gl3d/zip3");function r(g,x,A){this.scene=g,this.uid=A,this.mesh=x,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var f=r.prototype;f.handlePick=function(g){if(g.object===this.mesh){var x=g.index=g.data.index;g.data._cellCenter?g.traceCoordinate=g.data.dataCoordinate:g.traceCoordinate=[this.data.x[x],this.data.y[x],this.data.z[x]];var A=this.data.hovertext||this.data.text;return Array.isArray(A)&&A[x]!==void 0?g.textLabel=A[x]:A&&(g.textLabel=A),!0}};function u(g){for(var x=[],A=g.length,b=0;b<A;b++)x[b]=n(g[b]);return x}function s(g,x,A,b){for(var S=[],w=x.length,T=0;T<w;T++)S[T]=g.d2l(x[T],0,b)*A;return S}function h(g){for(var x=[],A=g.length,b=0;b<A;b++)x[b]=Math.round(g[b]);return x}function d(g,x){for(var A=["x","y","z"].indexOf(g),b=[],S=x.length,w=0;w<S;w++)b[w]=[x[w][(A+1)%3],x[w][(A+2)%3]];return o(b)}function y(g,x){for(var A=g.length,b=0;b<A;b++)if(g[b]<=-.5||g[b]>=x-.5)return!1;return!0}f.update=function(g){var x=this.scene,A=x.fullSceneLayout;this.data=g;var b=g.x.length,S=i(s(A.xaxis,g.x,x.dataScale[0],g.xcalendar),s(A.yaxis,g.y,x.dataScale[1],g.ycalendar),s(A.zaxis,g.z,x.dataScale[2],g.zcalendar)),w;if(g.i&&g.j&&g.k){if(g.i.length!==g.j.length||g.j.length!==g.k.length||!y(g.i,b)||!y(g.j,b)||!y(g.k,b))return;w=i(h(g.i),h(g.j),h(g.k))}else g.alphahull===0?w=p(S):g.alphahull>0?w=c(g.alphahull,S):w=d(g.delaunayaxis,S);var T={positions:S,cells:w,lightPosition:[g.lightposition.x,g.lightposition.y,g.lightposition.z],ambient:g.lighting.ambient,diffuse:g.lighting.diffuse,specular:g.lighting.specular,roughness:g.lighting.roughness,fresnel:g.lighting.fresnel,vertexNormalsEpsilon:g.lighting.vertexnormalsepsilon,faceNormalsEpsilon:g.lighting.facenormalsepsilon,opacity:g.opacity,contourEnable:g.contour.show,contourColor:n(g.contour.color).slice(0,3),contourWidth:g.contour.width,useFacetNormals:g.flatshading};if(g.intensity){var _=a(g);this.color="#fff";var v=g.intensitymode;T[v+"Intensity"]=g.intensity,T[v+"IntensityBounds"]=[_.min,_.max],T.colormap=t(g)}else g.vertexcolor?(this.color=g.vertexcolor[0],T.vertexColors=u(g.vertexcolor)):g.facecolor?(this.color=g.facecolor[0],T.cellColors=u(g.facecolor)):(this.color=g.color,T.meshColor=n(g.color));this.mesh.update(T)},f.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function m(g,x){var A=g.glplot.gl,b=l({gl:A}),S=new r(g,b,x.uid);return b._trace=S,S.update(x),g.glplot.add(b),S}k.exports=m},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],870:[function(e,k,z){var l=e("../../registry"),o=e("../../lib"),c=e("../../components/colorscale/defaults"),p=e("./attributes");k.exports=function(n,a,i,r){function f(y,m){return o.coerce(n,a,p,y,m)}function u(y){var m=y.map(function(g){var x=f(g);return x&&o.isArrayOrTypedArray(x)?x:null});return m.every(function(g){return g&&g.length===m[0].length})&&m}var s=u(["x","y","z"]);if(!s){a.visible=!1;return}if(u(["i","j","k"]),a.i&&(!a.j||!a.k)||a.j&&(!a.k||!a.i)||a.k&&(!a.i||!a.j)){a.visible=!1;return}var h=l.getComponentMethod("calendars","handleTraceDefaults");h(n,a,["x","y","z"],r),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(y){f(y)});var d=f("contour.show");d&&(f("contour.color"),f("contour.width")),"intensity"in n?(f("intensity"),f("intensitymode"),c(n,a,r,f,{prefix:"",cLetter:"c"})):(a.showscale=!1,"facecolor"in n?f("facecolor"):"vertexcolor"in n?f("vertexcolor"):f("color",i)),f("text"),f("hovertext"),f("hovertemplate"),f("xhoverformat"),f("yhoverformat"),f("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":867}],871:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":867,"./calc":868,"./convert":869,"./defaults":870}],872:[function(e,k,z){var l=e("../../lib").extendFlat,o=e("../scatter/attributes"),c=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,p=e("../../components/drawing/attributes").dash,t=e("../../components/fx/attributes"),n=e("../../constants/delta.js"),a=n.INCREASING.COLOR,i=n.DECREASING.COLOR,r=o.line;function f(u){return{line:{color:l({},r.color,{dflt:u}),width:r.width,dash:p,editType:"style"},editType:"style"}}k.exports={xperiod:o.xperiod,xperiod0:o.xperiod0,xperiodalignment:o.xperiodalignment,xhoverformat:c("x"),yhoverformat:c("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:l({},r.width,{}),dash:l({},p,{}),editType:"style"},increasing:f(a),decreasing:f(i),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:l({},t.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":387,"../../components/fx/attributes":397,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":926}],873:[function(e,k,z){var l=e("../../lib"),o=l._,c=e("../../plots/cartesian/axes"),p=e("../../plots/cartesian/align_period"),t=e("../../constants/numerical").BADNUM;function n(f,u){var s=c.getFromId(f,u.xaxis),h=c.getFromId(f,u.yaxis),d=r(f,s,u),y=u._minDiff;u._minDiff=null;var m=u._origX;u._origX=null;var g=u._xcalc;u._xcalc=null;var x=i(f,u,m,g,h,a);return u._extremes[s._id]=c.findExtremes(s,g,{vpad:y/2}),x.length?(l.extendFlat(x[0].t,{wHover:y/2,tickLen:d}),x):[{t:{empty:!0}}]}function a(f,u,s,h){return{o:f,h:u,l:s,c:h}}function i(f,u,s,h,d,y){for(var m=d.makeCalcdata(u,"open"),g=d.makeCalcdata(u,"high"),x=d.makeCalcdata(u,"low"),A=d.makeCalcdata(u,"close"),b=Array.isArray(u.text),S=Array.isArray(u.hovertext),w=!0,T=null,_=!!u.xperiodalignment,v=[],P=0;P<h.length;P++){var M=h[P],E=m[P],D=g[P],N=x[P],O=A[P];if(M!==t&&E!==t&&D!==t&&N!==t&&O!==t){O===E?T!==null&&O!==T&&(w=O>T):w=O>E,T=O;var I=y(E,D,N,O);I.pos=M,I.yc=(E+O)/2,I.i=P,I.dir=w?"increasing":"decreasing",I.x=I.pos,I.y=[N,D],_&&(I.orig_p=s[P]),b&&(I.tx=u.text[P]),S&&(I.htx=u.hovertext[P]),v.push(I)}else v.push({pos:M,empty:!0})}return u._extremes[d._id]=c.findExtremes(d,l.concat(x,g),{padded:!0}),v.length&&(v[0].t={labels:{open:o(f,"open:")+" ",high:o(f,"high:")+" ",low:o(f,"low:")+" ",close:o(f,"close:")+" "}}),v}function r(f,u,s){var h=s._minDiff;if(!h){var d=f._fullData,y=[];h=1/0;var m;for(m=0;m<d.length;m++){var g=d[m];if(g.type==="ohlc"&&g.visible===!0&&g.xaxis===u._id){y.push(g);var x=u.makeCalcdata(g,"x");g._origX=x;var A=p(s,u,"x",x).vals;g._xcalc=A;var b=l.distinctVals(A).minDiff;b&&isFinite(b)&&(h=Math.min(h,b))}}for(h===1/0&&(h=1),m=0;m<y.length;m++)y[m]._minDiff=h}return h*s.tickwidth}k.exports={calc:n,calcCommon:i}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554}],874:[function(e,k,z){var l=e("../../lib"),o=e("./ohlc_defaults"),c=e("../scatter/period_defaults"),p=e("./attributes");k.exports=function(a,i,r,f){function u(h,d){return l.coerce(a,i,p,h,d)}var s=o(a,i,u,f);if(!s){i.visible=!1;return}c(a,i,f,u,{x:!0}),u("xhoverformat"),u("yhoverformat"),u("line.width"),u("line.dash"),t(a,i,u,"increasing"),t(a,i,u,"decreasing"),u("text"),u("hovertext"),u("tickwidth"),f._requestRangeslider[i.xaxis]=!0};function t(n,a,i,r){i(r+".line.color"),i(r+".line.width",a.line.width),i(r+".line.dash",a.line.dash)}},{"../../lib":503,"../scatter/period_defaults":946,"./attributes":872,"./ohlc_defaults":877}],875:[function(e,k,z){var l=e("../../plots/cartesian/axes"),o=e("../../lib"),c=e("../../components/fx"),p=e("../../components/color"),t=e("../../lib").fillText,n=e("../../constants/delta.js"),a={increasing:n.INCREASING.SYMBOL,decreasing:n.DECREASING.SYMBOL};function i(s,h,d,y){var m=s.cd,g=m[0].trace;return g.hoverlabel.split?f(s,h,d,y):u(s,h,d,y)}function r(s,h,d,y){var m=s.cd,g=s.xa,x=m[0].trace,A=m[0].t,b=x.type,S=b==="ohlc"?"l":"min",w=b==="ohlc"?"h":"max",T,_,v=A.bPos||0,P=function(te){return te.pos+v-h},M=A.bdPos||A.tickLen,E=A.wHover,D=Math.min(1,M/Math.abs(g.r2c(g.range[1])-g.r2c(g.range[0])));T=s.maxHoverDistance-D,_=s.maxSpikeDistance-D;function N(te){var re=P(te);return c.inbox(re-E,re+E,T)}function O(te){var re=te[S],W=te[w];return re===W||c.inbox(re-d,W-d,T)}function I(te){return(N(te)+O(te))/2}var F=c.getDistanceFunction(y,N,O,I);if(c.getClosest(m,F,s),s.index===!1)return null;var V=m[s.index];if(V.empty)return null;var U=V.dir,j=x[U],Z=j.line.color;return p.opacity(Z)&&j.line.width?s.color=Z:s.color=j.fillcolor,s.x0=g.c2p(V.pos+v-M,!0),s.x1=g.c2p(V.pos+v+M,!0),s.xLabelVal=V.orig_p!==void 0?V.orig_p:V.pos,s.spikeDistance=I(V)*_/T,s.xSpike=g.c2p(V.pos,!0),s}function f(s,h,d,y){var m=s.cd,g=s.ya,x=m[0].trace,A=m[0].t,b=[],S=r(s,h,d,y);if(!S)return[];var w=S.index,T=m[w],_=T.hi||x.hoverinfo,v=_.split("+"),P=_==="all",M=P||v.indexOf("y")!==-1;if(!M)return[];for(var E=["high","open","close","low"],D={},N=0;N<E.length;N++){var O=E[N],I=x[O][S.index],F=g.c2p(I,!0),V;I in D?(V=D[I],V.yLabel+="<br>"+A.labels[O]+l.hoverLabelText(g,I,x.yhoverformat)):(V=o.extendFlat({},S),V.y0=V.y1=F,V.yLabelVal=I,V.yLabel=A.labels[O]+l.hoverLabelText(g,I,x.yhoverformat),V.name="",b.push(V),D[I]=V)}return b}function u(s,h,d,y){var m=s.cd,g=s.ya,x=m[0].trace,A=m[0].t,b=r(s,h,d,y);if(!b)return[];var S=b.index,w=m[S],T=b.index=w.i,_=w.dir;function v(I){return A.labels[I]+l.hoverLabelText(g,x[I][T],x.yhoverformat)}var P=w.hi||x.hoverinfo,M=P.split("+"),E=P==="all",D=E||M.indexOf("y")!==-1,N=E||M.indexOf("text")!==-1,O=D?[v("open"),v("high"),v("low"),v("close")+"  "+a[_]]:[];return N&&t(w,x,O),b.extraText=O.join("<br>"),b.y0=b.y1=g.c2p(w.yc,!0),[b]}k.exports={hoverPoints:i,hoverSplit:f,hoverOnPoints:u}},{"../../components/color":366,"../../components/fx":406,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axes":554}],876:[function(e,k,z){k.exports={moduleType:"trace",name:"ohlc",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc").calc,plot:e("./plot"),style:e("./style"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("./select")}},{"../../plots/cartesian":568,"./attributes":872,"./calc":873,"./defaults":874,"./hover":875,"./plot":878,"./select":879,"./style":880}],877:[function(e,k,z){var l=e("../../registry"),o=e("../../lib");k.exports=function(p,t,n,a){var i=n("x"),r=n("open"),f=n("high"),u=n("low"),s=n("close");n("hoverlabel.split");var h=l.getComponentMethod("calendars","handleTraceDefaults");if(h(p,t,["x"],a),!!(r&&f&&u&&s)){var d=Math.min(r.length,f.length,u.length,s.length);return i&&(d=Math.min(d,o.minRowLength(i))),t._length=d,d}}},{"../../lib":503,"../../registry":638}],878:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../lib");k.exports=function(p,t,n,a){var i=t.yaxis,r=t.xaxis,f=!!r.rangebreaks;o.makeTraceGroups(a,n,"trace ohlc").each(function(u){var s=l.select(this),h=u[0],d=h.t,y=h.trace;if(y.visible!==!0||d.empty){s.remove();return}var m=d.tickLen,g=s.selectAll("path").data(o.identity);g.enter().append("path"),g.exit().remove(),g.attr("d",function(x){if(x.empty)return"M0,0Z";var A=r.c2p(x.pos-m,!0),b=r.c2p(x.pos+m,!0),S=f?(A+b)/2:r.c2p(x.pos,!0),w=i.c2p(x.o,!0),T=i.c2p(x.h,!0),_=i.c2p(x.l,!0),v=i.c2p(x.c,!0);return"M"+A+","+w+"H"+S+"M"+S+","+T+"V"+_+"M"+b+","+v+"H"+S})})}},{"../../lib":503,"@plotly/d3":58}],879:[function(e,k,z){k.exports=function(o,c){var p=o.cd,t=o.xaxis,n=o.yaxis,a=[],i,r=p[0].t.bPos||0;if(c===!1)for(i=0;i<p.length;i++)p[i].selected=0;else for(i=0;i<p.length;i++){var f=p[i];c.contains([t.c2p(f.pos+r),n.c2p(f.yc)],null,f.i,o)?(a.push({pointNumber:f.i,x:t.c2d(f.pos),y:n.c2d(f.yc)}),f.selected=1):f.selected=0}return a}},{}],880:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../components/drawing"),c=e("../../components/color");k.exports=function(t,n,a){var i=a||l.select(t).selectAll("g.ohlclayer").selectAll("g.trace");i.style("opacity",function(r){return r[0].trace.opacity}),i.each(function(r){var f=r[0].trace;l.select(this).selectAll("path").each(function(u){if(!u.empty){var s=f[u.dir].line;l.select(this).style("fill","none").call(c.stroke,s.color).call(o.dashLine,s.dash,s.width).style("opacity",f.selectedpoints&&!u.selected?.3:1)}})})}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],881:[function(e,k,z){var l=e("../../lib/extend").extendFlat,o=e("../../plots/attributes"),c=e("../../plots/font_attributes"),p=e("../../components/colorscale/attributes"),t=e("../../plots/template_attributes").hovertemplateAttrs,n=e("../../plots/domain").attributes,a=l({editType:"calc"},p("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:t({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});k.exports={domain:n({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:l({},o.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:t({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:c({editType:"calc"}),tickfont:c({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:a,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],882:[function(e,k,z){var l=e("../../plots/get_data").getModuleCalcData,o=e("./plot"),c="parcats";z.name=c,z.plot=function(p,t,n,a){var i=l(p.calcdata,c);if(i.length){var r=i[0];o(p,r,n,a)}},z.clean=function(p,t,n,a){var i=a._has&&a._has("parcats"),r=t._has&&t._has("parcats");i&&!r&&a._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":593,"./plot":887}],883:[function(e,k,z){var l=e("../../lib/gup").wrap,o=e("../../components/colorscale/helpers").hasColorscale,c=e("../../components/colorscale/calc"),p=e("../../lib/filter_unique.js"),t=e("../../components/drawing"),n=e("../../lib"),a=e("fast-isnumeric");k.exports=function(A,b){var S=n.filterVisible(b.dimensions);if(S.length===0)return[];var w=S.map(function(ue){var se;if(ue.categoryorder==="trace")se=null;else if(ue.categoryorder==="array")se=ue.categoryarray;else{se=p(ue.values);for(var G=!0,Y=0;Y<se.length;Y++)if(!a(se[Y])){G=!1;break}se.sort(G?n.sorterAsc:void 0),ue.categoryorder==="category descending"&&(se=se.reverse())}return d(ue.values,se)}),T,_,v;n.isArrayOrTypedArray(b.counts)?T=b.counts:T=[b.counts],y(S),S.forEach(function(ue,se){m(ue,w[se])});var P=b.line,M;P?(o(b,"line")&&c(A,b,{vals:b.line.color,containerStr:"line",cLetter:"c"}),M=t.tryColorscale(P)):M=n.identity;function E(ue){var se,G;return n.isArrayOrTypedArray(P.color)?(se=P.color[ue%P.color.length],G=se):se=P.color,{color:M(se),rawColor:G}}var D=S[0].values.length,N={},O=w.map(function(ue){return ue.inds});v=0;var I,F;for(I=0;I<D;I++){var V=[];for(F=0;F<O.length;F++)V.push(O[F][I]);_=T[I%T.length],v+=_;var U=E(I),j=V+"-"+U.rawColor;N[j]===void 0&&(N[j]=s(V,U.color,U.rawColor)),h(N[j],I,_)}var Z=S.map(function(ue,se){return r(se,ue._index,ue._displayindex,ue.label,v)});for(I=0;I<D;I++)for(_=T[I%T.length],F=0;F<Z.length;F++){var te=Z[F].containerInd,re=w[F].inds[I],W=Z[F].categories;if(W[re]===void 0){var J=b.dimensions[te]._categoryarray[re],le=b.dimensions[te]._ticktext[re];W[re]=f(F,re,J,le)}u(W[re],I,_)}return l(i(Z,N,v))};function i(x,A,b){var S=x.map(function(w){return w.categories.length}).reduce(function(w,T){return Math.max(w,T)});return{dimensions:x,paths:A,trace:void 0,maxCats:S,count:b}}function r(x,A,b,S,w){return{dimensionInd:x,containerInd:A,displayInd:b,dimensionLabel:S,count:w,categories:[],dragX:null}}function f(x,A,b,S){return{dimensionInd:x,categoryInd:A,categoryValue:b,displayInd:A,categoryLabel:S,valueInds:[],count:0,dragY:null}}function u(x,A,b){x.valueInds.push(A),x.count+=b}function s(x,A,b){return{categoryInds:x,color:A,rawColor:b,valueInds:[],count:0}}function h(x,A,b){x.valueInds.push(A),x.count+=b}function d(x,A){A==null?A=[]:A=A.map(function(M){return M});var b={},S={},w=[];A.forEach(function(M,E){b[M]=0,S[M]=E});for(var T=0;T<x.length;T++){var _=x[T],v;b[_]===void 0?(b[_]=1,v=A.push(_)-1,S[_]=v):(b[_]++,v=S[_]),w.push(v)}var P=A.map(function(M){return b[M]});return{uniqueValues:A,uniqueCounts:P,inds:w}}function y(x){var A=x.map(function(S){return S.displayindex}),b;if(g(A))for(b=0;b<x.length;b++)x[b]._displayindex=x[b].displayindex;else for(b=0;b<x.length;b++)x[b]._displayindex=b}function m(x,A){x._categoryarray=A.uniqueValues,x.ticktext===null||x.ticktext===void 0?x._ticktext=[]:x._ticktext=x.ticktext.slice();for(var b=x._ticktext.length;b<A.uniqueValues.length;b++)x._ticktext.push(A.uniqueValues[b])}function g(x){for(var A=new Array(x.length),b=0;b<x.length;b++){if(x[b]<0||x[b]>=x.length||A[x[b]]!==void 0)return!1;A[x[b]]=!0}return!0}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../components/drawing":388,"../../lib":503,"../../lib/filter_unique.js":494,"../../lib/gup":500,"fast-isnumeric":190}],884:[function(e,k,z){var l=e("../../lib"),o=e("../../components/colorscale/helpers").hasColorscale,c=e("../../components/colorscale/defaults"),p=e("../../plots/domain").defaults,t=e("../../plots/array_container_defaults"),n=e("./attributes"),a=e("../parcoords/merge_length");function i(f,u,s,h,d){d("line.shape"),d("line.hovertemplate");var y=d("line.color",h.colorway[0]);if(o(f,"line")&&l.isArrayOrTypedArray(y)){if(y.length)return d("line.colorscale"),c(f,u,h,d,{prefix:"line.",cLetter:"c"}),y.length;u.line.color=s}return 1/0}function r(f,u){function s(A,b){return l.coerce(f,u,n.dimensions,A,b)}var h=s("values"),d=s("visible");if(h&&h.length||(d=u.visible=!1),d){s("label"),s("displayindex",u._index);var y=f.categoryarray,m=Array.isArray(y)&&y.length>0,g;m&&(g="array");var x=s("categoryorder",g);x==="array"?(s("categoryarray"),s("ticktext")):(delete f.categoryarray,delete f.ticktext),!m&&x==="array"&&(u.categoryorder="trace")}}k.exports=function(u,s,h,d){function y(b,S){return l.coerce(u,s,n,b,S)}var m=t(u,s,{name:"dimensions",handleItemDefaults:r}),g=i(u,s,h,d,y);p(s,d,y),(!Array.isArray(m)||!m.length)&&(s.visible=!1),a(s,m,"values",g),y("hoveron"),y("hovertemplate"),y("arrangement"),y("bundlecolors"),y("sortpaths"),y("counts");var x={family:d.font.family,size:Math.round(d.font.size),color:d.font.color};l.coerceFont(y,"labelfont",x);var A={family:d.font.family,size:Math.round(d.font.size/1.2),color:d.font.color};l.coerceFont(y,"tickfont",A)}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/domain":584,"../parcoords/merge_length":897,"./attributes":881}],885:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":881,"./base_plot":882,"./calc":883,"./defaults":884,"./plot":887}],886:[function(e,k,z){var l=e("@plotly/d3"),o=e("d3-interpolate").interpolateNumber,c=e("../../plot_api/plot_api"),p=e("../../components/fx"),t=e("../../lib"),n=t.strTranslate,a=e("../../components/drawing"),i=e("tinycolor2"),r=e("../../lib/svg_text_utils");function f(Y,ee,$,K){var Q=Y.map(J.bind(0,ee,$)),ae=K.selectAll("g.parcatslayer").data([null]);ae.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var ie=ae.selectAll("g.trace.parcats").data(Q,u),oe=ie.enter().append("g").attr("class","trace parcats");ie.attr("transform",function(_e){return n(_e.x,_e.y)}),oe.append("g").attr("class","paths");var fe=ie.select("g.paths"),ye=fe.selectAll("path.path").data(function(_e){return _e.paths},u);ye.attr("fill",function(_e){return _e.model.color});var ce=ye.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(_e){return _e.model.color}).attr("fill-opacity",0);A(ce),ye.attr("d",function(_e){return _e.svgD}),ce.empty()||ye.sort(h),ye.exit().remove(),ye.on("mouseover",d).on("mouseout",y).on("click",x),oe.append("g").attr("class","dimensions");var me=ie.select("g.dimensions"),xe=me.selectAll("g.dimension").data(function(_e){return _e.dimensions},u);xe.enter().append("g").attr("class","dimension"),xe.attr("transform",function(_e){return n(_e.x,0)}),xe.exit().remove();var ke=xe.selectAll("g.category").data(function(_e){return _e.categories},u),Ae=ke.enter().append("g").attr("class","category");ke.attr("transform",function(_e){return n(0,_e.y)}),Ae.append("rect").attr("class","catrect").attr("pointer-events","none"),ke.select("rect.catrect").attr("fill","none").attr("width",function(_e){return _e.width}).attr("height",function(_e){return _e.height}),w(Ae);var Oe=ke.selectAll("rect.bandrect").data(function(_e){return _e.bands},u);Oe.each(function(){t.raiseToTop(this)}),Oe.attr("fill",function(_e){return _e.color});var He=Oe.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(_e){return _e.color}).attr("fill-opacity",0);Oe.attr("fill",function(_e){return _e.color}).attr("width",function(_e){return _e.width}).attr("height",function(_e){return _e.height}).attr("y",function(_e){return _e.y}).attr("cursor",function(_e){return _e.parcatsViewModel.arrangement==="fixed"?"default":_e.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),_(He),Oe.exit().remove(),Ae.append("text").attr("class","catlabel").attr("pointer-events","none");var Ge=ee._fullLayout.paper_bgcolor;ke.select("text.catlabel").attr("text-anchor",function(_e){return s(_e)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",r.makeTextShadow(Ge)).style("fill","rgb(0, 0, 0)").attr("x",function(_e){return s(_e)?_e.width+5:-5}).attr("y",function(_e){return _e.height/2}).text(function(_e){return _e.model.categoryLabel}).each(function(_e){a.font(l.select(this),_e.parcatsViewModel.categorylabelfont),r.convertToTspans(l.select(this),ee)}),Ae.append("text").attr("class","dimlabel"),ke.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(_e){return _e.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(_e){return _e.width/2}).attr("y",-5).text(function(_e,Ie){return Ie===0?_e.parcatsViewModel.model.dimensions[_e.model.dimensionInd].dimensionLabel:null}).each(function(_e){a.font(l.select(this),_e.parcatsViewModel.labelfont)}),ke.selectAll("rect.bandrect").on("mouseover",F).on("mouseout",V),ke.exit().remove(),xe.call(l.behavior.drag().origin(function(_e){return{x:_e.x,y:0}}).on("dragstart",U).on("drag",j).on("dragend",Z)),ie.each(function(_e){_e.traceSelection=l.select(this),_e.pathSelection=l.select(this).selectAll("g.paths").selectAll("path.path"),_e.dimensionSelection=l.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ie.exit().remove()}k.exports=function(Y,ee,$,K){f($,Y,K,ee)};function u(Y){return Y.key}function s(Y){var ee=Y.parcatsViewModel.dimensions.length,$=Y.parcatsViewModel.dimensions[ee-1].model.dimensionInd;return Y.model.dimensionInd===$}function h(Y,ee){return Y.model.rawColor>ee.model.rawColor?1:Y.model.rawColor<ee.model.rawColor?-1:0}function d(Y){if(!Y.parcatsViewModel.dragDimension&&Y.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){t.raiseToTop(this),b(l.select(this));var ee=m(Y),$=g(Y);if(Y.parcatsViewModel.graphDiv.emit("plotly_hover",{points:ee,event:l.event,constraints:$}),Y.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var K=l.mouse(this)[0],Q=Y.parcatsViewModel.graphDiv,ae=Y.parcatsViewModel.trace,ie=Q._fullLayout,oe=ie._paperdiv.node().getBoundingClientRect(),fe=Y.parcatsViewModel.graphDiv.getBoundingClientRect(),ye,ce,me;for(me=0;me<Y.leftXs.length-1;me++)if(Y.leftXs[me]+Y.dimWidths[me]-2<=K&&K<=Y.leftXs[me+1]+2){var xe=Y.parcatsViewModel.dimensions[me],ke=Y.parcatsViewModel.dimensions[me+1];ye=(xe.x+xe.width+ke.x)/2,ce=(Y.topYs[me]+Y.topYs[me+1]+Y.height)/2;break}var Ae=Y.parcatsViewModel.x+ye,Oe=Y.parcatsViewModel.y+ce,He=i.mostReadable(Y.model.color,["black","white"]),Ge=Y.model.count,_e=Ge/Y.parcatsViewModel.model.count,Ie={countLabel:Ge,probabilityLabel:_e.toFixed(3)},We=[];Y.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&We.push(["Count:",Ie.countLabel].join(" ")),Y.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&We.push(["P:",Ie.probabilityLabel].join(" "));var et=We.join("<br>"),Ne=l.mouse(Q)[0];p.loneHover({trace:ae,x:Ae-oe.left+fe.left,y:Oe-oe.top+fe.top,text:et,color:Y.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:He,idealAlign:Ne<Ae?"right":"left",hovertemplate:(ae.line||{}).hovertemplate,hovertemplateLabels:Ie,eventData:[{data:ae._input,fullData:ae,count:Ge,probability:_e}]},{container:ie._hoverlayer.node(),outerContainer:ie._paper.node(),gd:Q})}}}function y(Y){if(!Y.parcatsViewModel.dragDimension&&(A(l.select(this)),p.loneUnhover(Y.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),Y.parcatsViewModel.pathSelection.sort(h),Y.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var ee=m(Y),$=g(Y);Y.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:ee,event:l.event,constraints:$})}}function m(Y){for(var ee=[],$=te(Y.parcatsViewModel),K=0;K<Y.model.valueInds.length;K++){var Q=Y.model.valueInds[K];ee.push({curveNumber:$,pointNumber:Q})}return ee}function g(Y){for(var ee={},$=Y.parcatsViewModel.model.dimensions,K=0;K<$.length;K++){var Q=$[K],ae=Q.categories[Y.model.categoryInds[K]];ee[Q.containerInd]=ae.categoryValue}return Y.model.rawColor!==void 0&&(ee.color=Y.model.rawColor),ee}function x(Y){if(Y.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var ee=m(Y),$=g(Y);Y.parcatsViewModel.graphDiv.emit("plotly_click",{points:ee,event:l.event,constraints:$})}}function A(Y){Y.attr("fill",function(ee){return ee.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function b(Y){Y.attr("fill-opacity",.8).attr("stroke",function(ee){return i.mostReadable(ee.model.color,["black","white"])}).attr("stroke-width",.3)}function S(Y){Y.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function w(Y){Y.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function T(Y){Y.attr("stroke","black").attr("stroke-width",1.5)}function _(Y){Y.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function v(Y){var ee=Y.parcatsViewModel.pathSelection,$=Y.categoryViewModel.model.dimensionInd,K=Y.categoryViewModel.model.categoryInd;return ee.filter(function(Q){return Q.model.categoryInds[$]===K&&Q.model.color===Y.color})}function P(Y){var ee=l.select(Y.parentNode).selectAll("rect.bandrect");ee.each(function($){var K=v($);b(K),K.each(function(){t.raiseToTop(this)})}),S(l.select(Y.parentNode))}function M(Y){var ee=l.select(Y).datum(),$=v(ee);b($),$.each(function(){t.raiseToTop(this)}),l.select(Y.parentNode).selectAll("rect.bandrect").filter(function(K){return K.color===ee.color}).each(function(){t.raiseToTop(this),T(l.select(this))})}function E(Y,ee,$){var K=l.select(Y).datum(),Q=K.categoryViewModel.model,ae=K.parcatsViewModel.graphDiv,ie=l.select(Y.parentNode).selectAll("rect.bandrect"),oe=[];ie.each(function(ye){var ce=v(ye);ce.each(function(me){Array.prototype.push.apply(oe,m(me))})});var fe={};fe[Q.dimensionInd]=Q.categoryValue,ae.emit(ee,{points:oe,event:$,constraints:fe})}function D(Y,ee,$){var K=l.select(Y).datum(),Q=K.categoryViewModel.model,ae=K.parcatsViewModel.graphDiv,ie=v(K),oe=[];ie.each(function(ye){Array.prototype.push.apply(oe,m(ye))});var fe={};fe[Q.dimensionInd]=Q.categoryValue,K.rawColor!==void 0&&(fe.color=K.rawColor),ae.emit(ee,{points:oe,event:$,constraints:fe})}function N(Y,ee,$){Y._fullLayout._calcInverseTransform(Y);var K=Y._fullLayout._invScaleX,Q=Y._fullLayout._invScaleY,ae=l.select($.parentNode).select("rect.catrect"),ie=ae.node().getBoundingClientRect(),oe=ae.datum(),fe=oe.parcatsViewModel,ye=fe.model.dimensions[oe.model.dimensionInd],ce=fe.trace,me=ie.top+ie.height/2,xe,ke;fe.dimensions.length>1&&ye.displayInd===fe.dimensions.length-1?(xe=ie.left,ke="left"):(xe=ie.left+ie.width,ke="right");var Ae=oe.model.count,Oe=oe.model.categoryLabel,He=Ae/oe.parcatsViewModel.model.count,Ge={countLabel:Ae,categoryLabel:Oe,probabilityLabel:He.toFixed(3)},_e=[];oe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&_e.push(["Count:",Ge.countLabel].join(" ")),oe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&_e.push(["P("+Ge.categoryLabel+"):",Ge.probabilityLabel].join(" "));var Ie=_e.join("<br>");return{trace:ce,x:K*(xe-ee.left),y:Q*(me-ee.top),text:Ie,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:ke,hovertemplate:ce.hovertemplate,hovertemplateLabels:Ge,eventData:[{data:ce._input,fullData:ce,count:Ae,category:Oe,probability:He}]}}function O(Y,ee,$){var K=[];return l.select($.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var Q=this;K.push(N(Y,ee,Q))}),K}function I(Y,ee,$){Y._fullLayout._calcInverseTransform(Y);var K=Y._fullLayout._invScaleX,Q=Y._fullLayout._invScaleY,ae=$.getBoundingClientRect(),ie=l.select($).datum(),oe=ie.categoryViewModel,fe=oe.parcatsViewModel,ye=fe.model.dimensions[oe.model.dimensionInd],ce=fe.trace,me=ae.y+ae.height/2,xe,ke;fe.dimensions.length>1&&ye.displayInd===fe.dimensions.length-1?(xe=ae.left,ke="left"):(xe=ae.left+ae.width,ke="right");var Ae=oe.model.categoryLabel,Oe=ie.parcatsViewModel.model.count,He=0;ie.categoryViewModel.bands.forEach(function(Dt){Dt.color===ie.color&&(He+=Dt.count)});var Ge=oe.model.count,_e=0;fe.pathSelection.each(function(Dt){Dt.model.color===ie.color&&(_e+=Dt.model.count)});var Ie=He/Oe,We=He/_e,et=He/Ge,Ne={countLabel:Oe,categoryLabel:Ae,probabilityLabel:Ie.toFixed(3)},De=[];oe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&De.push(["Count:",Ne.countLabel].join(" ")),oe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(De.push("P(color \u2229 "+Ae+"): "+Ne.probabilityLabel),De.push("P("+Ae+" | color): "+We.toFixed(3)),De.push("P(color | "+Ae+"): "+et.toFixed(3)));var Ve=De.join("<br>"),dt=i.mostReadable(ie.color,["black","white"]);return{trace:ce,x:K*(xe-ee.left),y:Q*(me-ee.top),text:Ve,color:ie.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:dt,fontSize:10,idealAlign:ke,hovertemplate:ce.hovertemplate,hovertemplateLabels:Ne,eventData:[{data:ce._input,fullData:ce,category:Ae,count:Oe,probability:Ie,categorycount:Ge,colorcount:_e,bandcolorcount:He}]}}function F(Y){if(!Y.parcatsViewModel.dragDimension&&Y.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var ee=l.mouse(this)[1];if(ee<-1)return;var $=Y.parcatsViewModel.graphDiv,K=$._fullLayout,Q=K._paperdiv.node().getBoundingClientRect(),ae=Y.parcatsViewModel.hoveron,ie=this;if(ae==="color"?(M(ie),D(ie,"plotly_hover",l.event)):(P(ie),E(ie,"plotly_hover",l.event)),Y.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var oe;ae==="category"?oe=N($,Q,ie):ae==="color"?oe=I($,Q,ie):ae==="dimension"&&(oe=O($,Q,ie)),oe&&p.loneHover(oe,{container:K._hoverlayer.node(),outerContainer:K._paper.node(),gd:$})}}}function V(Y){var ee=Y.parcatsViewModel;if(!ee.dragDimension&&(A(ee.pathSelection),w(ee.dimensionSelection.selectAll("g.category")),_(ee.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),p.loneUnhover(ee.graphDiv._fullLayout._hoverlayer.node()),ee.pathSelection.sort(h),ee.hoverinfoItems.indexOf("skip")===-1)){var $=Y.parcatsViewModel.hoveron,K=this;$==="color"?D(K,"plotly_unhover",l.event):E(K,"plotly_unhover",l.event)}}function U(Y){Y.parcatsViewModel.arrangement!=="fixed"&&(Y.dragDimensionDisplayInd=Y.model.displayInd,Y.initialDragDimensionDisplayInds=Y.parcatsViewModel.model.dimensions.map(function(ee){return ee.displayInd}),Y.dragHasMoved=!1,Y.dragCategoryDisplayInd=null,l.select(this).selectAll("g.category").select("rect.catrect").each(function(ee){var $=l.mouse(this)[0],K=l.mouse(this)[1];-2<=$&&$<=ee.width+2&&-2<=K&&K<=ee.height+2&&(Y.dragCategoryDisplayInd=ee.model.displayInd,Y.initialDragCategoryDisplayInds=Y.model.categories.map(function(Q){return Q.displayInd}),ee.model.dragY=ee.y,t.raiseToTop(this.parentNode),l.select(this.parentNode).selectAll("rect.bandrect").each(function(Q){Q.y<K&&K<=Q.y+Q.height&&(Y.potentialClickBand=this)}))}),Y.parcatsViewModel.dragDimension=Y,p.loneUnhover(Y.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function j(Y){if(Y.parcatsViewModel.arrangement!=="fixed"&&(Y.dragHasMoved=!0,Y.dragDimensionDisplayInd!==null)){var ee=Y.dragDimensionDisplayInd,$=ee-1,K=ee+1,Q=Y.parcatsViewModel.dimensions[ee];if(Y.dragCategoryDisplayInd!==null){var ae=Q.categories[Y.dragCategoryDisplayInd];ae.model.dragY+=l.event.dy;var ie=ae.model.dragY,oe=ae.model.displayInd,fe=Q.categories,ye=fe[oe-1],ce=fe[oe+1];ye!==void 0&&ie<ye.y+ye.height/2&&(ae.model.displayInd=ye.model.displayInd,ye.model.displayInd=oe),ce!==void 0&&ie+ae.height>ce.y+ce.height/2&&(ae.model.displayInd=ce.model.displayInd,ce.model.displayInd=oe),Y.dragCategoryDisplayInd=ae.model.displayInd}if(Y.dragCategoryDisplayInd===null||Y.parcatsViewModel.arrangement==="freeform"){Q.model.dragX=l.event.x;var me=Y.parcatsViewModel.dimensions[$],xe=Y.parcatsViewModel.dimensions[K];me!==void 0&&Q.model.dragX<me.x+me.width&&(Q.model.displayInd=me.model.displayInd,me.model.displayInd=ee),xe!==void 0&&Q.model.dragX+Q.width>xe.x&&(Q.model.displayInd=xe.model.displayInd,xe.model.displayInd=Y.dragDimensionDisplayInd),Y.dragDimensionDisplayInd=Q.model.displayInd}se(Y.parcatsViewModel),ue(Y.parcatsViewModel),W(Y.parcatsViewModel),re(Y.parcatsViewModel)}}function Z(Y){if(Y.parcatsViewModel.arrangement!=="fixed"&&Y.dragDimensionDisplayInd!==null){l.select(this).selectAll("text").attr("font-weight","normal");var ee={},$=te(Y.parcatsViewModel),K=Y.parcatsViewModel.model.dimensions.map(function(xe){return xe.displayInd}),Q=Y.initialDragDimensionDisplayInds.some(function(xe,ke){return xe!==K[ke]});Q&&K.forEach(function(xe,ke){var Ae=Y.parcatsViewModel.model.dimensions[ke].containerInd;ee["dimensions["+Ae+"].displayindex"]=xe});var ae=!1;if(Y.dragCategoryDisplayInd!==null){var ie=Y.model.categories.map(function(xe){return xe.displayInd});if(ae=Y.initialDragCategoryDisplayInds.some(function(xe,ke){return xe!==ie[ke]}),ae){var oe=Y.model.categories.slice().sort(function(xe,ke){return xe.displayInd-ke.displayInd}),fe=oe.map(function(xe){return xe.categoryValue}),ye=oe.map(function(xe){return xe.categoryLabel});ee["dimensions["+Y.model.containerInd+"].categoryarray"]=[fe],ee["dimensions["+Y.model.containerInd+"].ticktext"]=[ye],ee["dimensions["+Y.model.containerInd+"].categoryorder"]="array"}}if(Y.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!Y.dragHasMoved&&Y.potentialClickBand&&(Y.parcatsViewModel.hoveron==="color"?D(Y.potentialClickBand,"plotly_click",l.event.sourceEvent):E(Y.potentialClickBand,"plotly_click",l.event.sourceEvent)),Y.model.dragX=null,Y.dragCategoryDisplayInd!==null){var ce=Y.parcatsViewModel.dimensions[Y.dragDimensionDisplayInd].categories[Y.dragCategoryDisplayInd];ce.model.dragY=null,Y.dragCategoryDisplayInd=null}Y.dragDimensionDisplayInd=null,Y.parcatsViewModel.dragDimension=null,Y.dragHasMoved=null,Y.potentialClickBand=null,se(Y.parcatsViewModel),ue(Y.parcatsViewModel);var me=l.transition().duration(300).ease("cubic-in-out");me.each(function(){W(Y.parcatsViewModel,!0),re(Y.parcatsViewModel,!0)}).each("end",function(){(Q||ae)&&c.restyle(Y.parcatsViewModel.graphDiv,ee,[$])})}}function te(Y){for(var ee,$=Y.graphDiv._fullData,K=0;K<$.length;K++)if(Y.key===$[K].uid){ee=K;break}return ee}function re(Y,ee){ee===void 0&&(ee=!1);function $(K){return ee?K.transition():K}Y.pathSelection.data(function(K){return K.paths},u),$(Y.pathSelection).attr("d",function(K){return K.svgD})}function W(Y,ee){ee===void 0&&(ee=!1);function $(fe){return ee?fe.transition():fe}Y.dimensionSelection.data(function(fe){return fe.dimensions},u);var K=Y.dimensionSelection.selectAll("g.category").data(function(fe){return fe.categories},u);$(Y.dimensionSelection).attr("transform",function(fe){return n(fe.x,0)}),$(K).attr("transform",function(fe){return n(0,fe.y)});var Q=K.select(".dimlabel");Q.text(function(fe,ye){return ye===0?fe.parcatsViewModel.model.dimensions[fe.model.dimensionInd].dimensionLabel:null});var ae=K.select(".catlabel");ae.attr("text-anchor",function(fe){return s(fe)?"start":"end"}).attr("x",function(fe){return s(fe)?fe.width+5:-5}).each(function(fe){var ye,ce;s(fe)?(ye=fe.width+5,ce="start"):(ye=-5,ce="end"),l.select(this).selectAll("tspan").attr("x",ye).attr("text-anchor",ce)});var ie=K.selectAll("rect.bandrect").data(function(fe){return fe.bands},u),oe=ie.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(fe){return fe.color}).attr("fill-opacity",0);ie.attr("fill",function(fe){return fe.color}).attr("width",function(fe){return fe.width}).attr("height",function(fe){return fe.height}).attr("y",function(fe){return fe.y}),_(oe),ie.each(function(){t.raiseToTop(this)}),ie.exit().remove()}function J(Y,ee,$){var K=$[0],Q=ee.margin||{l:80,r:80,t:100,b:80},ae=K.trace,ie=ae.domain,oe=ee.width,fe=ee.height,ye=Math.floor(oe*(ie.x[1]-ie.x[0])),ce=Math.floor(fe*(ie.y[1]-ie.y[0])),me=ie.x[0]*oe+Q.l,xe=ee.height-ie.y[1]*ee.height+Q.t,ke=ae.line.shape,Ae;ae.hoverinfo==="all"?Ae=["count","probability"]:Ae=(ae.hoverinfo||"").split("+");var Oe={trace:ae,key:ae.uid,model:K,x:me,y:xe,width:ye,height:ce,hoveron:ae.hoveron,hoverinfoItems:Ae,arrangement:ae.arrangement,bundlecolors:ae.bundlecolors,sortpaths:ae.sortpaths,labelfont:ae.labelfont,categorylabelfont:ae.tickfont,pathShape:ke,dragDimension:null,margin:Q,paths:[],dimensions:[],graphDiv:Y,traceSelection:null,pathSelection:null,dimensionSelection:null};return K.dimensions&&(se(Oe),ue(Oe)),Oe}function le(Y,ee,$,K,Q){var ae=[],ie=[],oe,fe;for(fe=0;fe<$.length-1;fe++)oe=o($[fe]+Y[fe],Y[fe+1]),ae.push(oe(Q)),ie.push(oe(1-Q));var ye="M "+Y[0]+","+ee[0];for(ye+="l"+$[0]+",0 ",fe=1;fe<$.length;fe++)ye+="C"+ae[fe-1]+","+ee[fe-1]+" "+ie[fe-1]+","+ee[fe]+" "+Y[fe]+","+ee[fe],ye+="l"+$[fe]+",0 ";for(ye+="l0,"+K+" ",ye+="l -"+$[$.length-1]+",0 ",fe=$.length-2;fe>=0;fe--)ye+="C"+ie[fe]+","+(ee[fe+1]+K)+" "+ae[fe]+","+(ee[fe]+K)+" "+(Y[fe]+$[fe])+","+(ee[fe]+K),ye+="l-"+$[fe]+",0 ";return ye+="Z",ye}function ue(Y){var ee=Y.dimensions,$=Y.model,K=ee.map(function(zt){return zt.categories.map(function(Nt){return Nt.y})}),Q=Y.model.dimensions.map(function(zt){return zt.categories.map(function(Nt){return Nt.displayInd})}),ae=Y.model.dimensions.map(function(zt){return zt.displayInd}),ie=Y.dimensions.map(function(zt){return zt.model.dimensionInd}),oe=ee.map(function(zt){return zt.x}),fe=ee.map(function(zt){return zt.width}),ye=[];for(var ce in $.paths)$.paths.hasOwnProperty(ce)&&ye.push($.paths[ce]);function me(zt){var Nt=zt.categoryInds.map(function(At,it){return Q[it][At]}),Et=ie.map(function(At){return Nt[At]});return Et}ye.sort(function(zt,Nt){var Et=me(zt),At=me(Nt);return Y.sortpaths==="backward"&&(Et.reverse(),At.reverse()),Et.push(zt.valueInds[0]),At.push(Nt.valueInds[0]),Y.bundlecolors&&(Et.unshift(zt.rawColor),At.unshift(Nt.rawColor)),Et<At?-1:Et>At?1:0});for(var xe=new Array(ye.length),ke=ee[0].model.count,Ae=ee[0].categories.map(function(zt){return zt.height}).reduce(function(zt,Nt){return zt+Nt}),Oe=0;Oe<ye.length;Oe++){var He=ye[Oe],Ge;ke>0?Ge=Ae*(He.count/ke):Ge=0;for(var _e=new Array(K.length),Ie=0;Ie<He.categoryInds.length;Ie++){var We=He.categoryInds[Ie],et=Q[Ie][We],Ne=ae[Ie];_e[Ne]=K[Ne][et],K[Ne][et]+=Ge;var De=Y.dimensions[Ne].categories[et],Ve=De.bands.length,dt=De.bands[Ve-1];if(dt===void 0||He.rawColor!==dt.rawColor){var Dt=dt===void 0?0:dt.y+dt.height;De.bands.push({key:Dt,color:He.color,rawColor:He.rawColor,height:Ge,width:De.width,count:He.count,y:Dt,categoryViewModel:De,parcatsViewModel:Y})}else{var Gt=De.bands[Ve-1];Gt.height+=Ge,Gt.count+=He.count}}var Mt;Y.pathShape==="hspline"?Mt=le(oe,_e,fe,Ge,.5):Mt=le(oe,_e,fe,Ge,0),xe[Oe]={key:He.valueInds[0],model:He,height:Ge,leftXs:oe,topYs:_e,dimWidths:fe,svgD:Mt,parcatsViewModel:Y}}Y.paths=xe}function se(Y){var ee=Y.model.dimensions.map(function(ie){return{displayInd:ie.displayInd,dimensionInd:ie.dimensionInd}});ee.sort(function(ie,oe){return ie.displayInd-oe.displayInd});var $=[];for(var K in ee){var Q=ee[K].dimensionInd,ae=Y.model.dimensions[Q];$.push(G(Y,ae))}Y.dimensions=$}function G(Y,ee){var $=40,K=16,Q=Y.model.dimensions.length,ae=ee.displayInd,ie,oe,fe;Q>1?ie=(Y.width-2*$-K)/(Q-1):ie=0,oe=$,fe=oe+ie*ae;var ye=[],ce=Y.model.maxCats,me=ee.categories.length,xe=8,ke=ee.count,Ae=Y.height-xe*(ce-1),Oe,He,Ge,_e,Ie,We=(ce-me)*xe/2,et=ee.categories.map(function(Ne){return{displayInd:Ne.displayInd,categoryInd:Ne.categoryInd}});for(et.sort(function(Ne,De){return Ne.displayInd-De.displayInd}),Ie=0;Ie<me;Ie++)_e=et[Ie].categoryInd,He=ee.categories[_e],ke>0?Oe=He.count/ke*Ae:Oe=0,Ge={key:He.valueInds[0],model:He,width:K,height:Oe,y:He.dragY!==null?He.dragY:We,bands:[],parcatsViewModel:Y},We=We+Oe+xe,ye.push(Ge);return{key:ee.dimensionInd,x:ee.dragX!==null?ee.dragX:fe,y:0,width:K,model:ee,categories:ye,parcatsViewModel:Y,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},{"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_api":540,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:312}],887:[function(e,k,z){var l=e("./parcats");k.exports=function(c,p,t,n){var a=c._fullLayout,i=a._paper,r=a._size;l(c,i,p,{width:r.w,height:r.h,margin:{t:r.t,r:r.r,b:r.b,l:r.l}},t,n)}},{"./parcats":886}],888:[function(e,k,z){var l=e("../../components/colorscale/attributes"),o=e("../../plots/cartesian/layout_attributes"),c=e("../../plots/font_attributes"),p=e("../../plots/domain").attributes,t=e("../../lib/extend").extendFlat,n=e("../../plot_api/plot_template").templatedArray;k.exports={domain:p({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:c({editType:"plot"}),tickfont:c({editType:"plot"}),rangefont:c({editType:"plot"}),dimensions:n("dimension",{label:{valType:"string",editType:"plot"},tickvals:t({},o.tickvals,{editType:"plot"}),ticktext:t({},o.ticktext,{editType:"plot"}),tickformat:t({},o.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:t({editType:"calc"},l("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],889:[function(e,k,z){var l=e("./constants"),o=e("@plotly/d3"),c=e("../../lib/gup").keyFun,p=e("../../lib/gup").repeat,t=e("../../lib").sorterAsc,n=e("../../lib").strTranslate,a=l.bar.snapRatio;function i(Z,te){return Z*(1-a)+te*a}var r=l.bar.snapClose;function f(Z,te){return Z*(1-r)+te*r}function u(Z,te,re,W){if(s(re,W))return re;var J=Z?-1:1,le=0,ue=te.length-1;if(J<0){var se=le;le=ue,ue=se}for(var G=te[le],Y=G,ee=le;J*ee<J*ue;ee+=J){var $=ee+J,K=te[$];if(J*re<J*f(G,K))return i(G,Y);if(J*re<J*K||$===ue)return i(K,G);Y=G,G=K}}function s(Z,te){for(var re=0;re<te.length;re++)if(Z>=te[re][0]&&Z<=te[re][1])return!0;return!1}function h(Z){Z.attr("x",-l.bar.captureWidth/2).attr("width",l.bar.captureWidth)}function d(Z){Z.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function y(Z){if(!Z.brush.filterSpecified)return"0,"+Z.height;for(var te=m(Z.brush.filter.getConsolidated(),Z.height),re=[0],W,J,le,ue=te.length?te[0][0]:null,se=0;se<te.length;se++)W=te[se],J=W[1]-W[0],re.push(ue),re.push(J),le=se+1,le<te.length&&(ue=te[le][0]-W[1]);return re.push(Z.height),re}function m(Z,te){return Z.map(function(re){return re.map(function(W){return Math.max(0,W*te)}).sort(t)})}function g(Z,te){var re=l.bar.handleHeight;if(!(te>Z[1]+re||te<Z[0]-re))return te>=.9*Z[1]+.1*Z[0]?"n":te<=.9*Z[0]+.1*Z[1]?"s":"ns"}function x(){o.select(document.body).style("cursor",null)}function A(Z){Z.attr("stroke-dasharray",y)}function b(Z,te){var re=o.select(Z).selectAll(".highlight, .highlight-shadow"),W=te?re.transition().duration(l.bar.snapDuration).each("end",te):re;A(W)}function S(Z,te){var re=Z.brush,W=re.filterSpecified,J=NaN,le={},ue;if(W){var se=Z.height,G=re.filter.getConsolidated(),Y=m(G,se),ee=NaN,$=NaN,K=NaN;for(ue=0;ue<=Y.length;ue++){var Q=Y[ue];if(Q&&Q[0]<=te&&te<=Q[1]){ee=ue;break}else if($=ue?ue-1:NaN,Q&&Q[0]>te){K=ue;break}}if(J=ee,isNaN(J)&&(isNaN($)||isNaN(K)?J=isNaN($)?K:$:J=te-Y[$][1]<Y[K][0]-te?$:K),!isNaN(J)){var ae=Y[J],ie=g(ae,te);ie&&(le.interval=G[J],le.intervalPix=ae,le.region=ie)}}if(Z.ordinal&&!le.region){var oe=Z.unitTickvals,fe=Z.unitToPaddedPx.invert(te);for(ue=0;ue<oe.length;ue++){var ye=[oe[Math.max(ue-1,0)]*.25+oe[ue]*.75,oe[Math.min(ue+1,oe.length-1)]*.25+oe[ue]*.75];if(fe>=ye[0]&&fe<=ye[1]){le.clickableOrdinalRange=ye;break}}}return le}function w(Z,te){o.event.sourceEvent.stopPropagation();var re=te.height-o.mouse(Z)[1]-2*l.verticalPadding,W=te.unitToPaddedPx.invert(re),J=te.brush,le=S(te,re),ue=le.interval,se=J.svgBrush;if(se.wasDragged=!1,se.grabbingBar=le.region==="ns",se.grabbingBar){var G=ue.map(te.unitToPaddedPx);se.grabPoint=re-G[0]-l.verticalPadding,se.barLength=G[1]-G[0]}se.clickableOrdinalRange=le.clickableOrdinalRange,se.stayingIntervals=te.multiselect&&J.filterSpecified?J.filter.getConsolidated():[],ue&&(se.stayingIntervals=se.stayingIntervals.filter(function(Y){return Y[0]!==ue[0]&&Y[1]!==ue[1]})),se.startExtent=le.region?ue[le.region==="s"?1:0]:W,te.parent.inBrushDrag=!0,se.brushStartCallback()}function T(Z,te){o.event.sourceEvent.stopPropagation();var re=te.height-o.mouse(Z)[1]-2*l.verticalPadding,W=te.brush.svgBrush;W.wasDragged=!0,W._dragging=!0,W.grabbingBar?W.newExtent=[re-W.grabPoint,re+W.barLength-W.grabPoint].map(te.unitToPaddedPx.invert):W.newExtent=[W.startExtent,te.unitToPaddedPx.invert(re)].sort(t),te.brush.filterSpecified=!0,W.extent=W.stayingIntervals.concat([W.newExtent]),W.brushCallback(te),b(Z.parentNode)}function _(Z,te){var re=te.brush,W=re.filter,J=re.svgBrush;J._dragging||(v(Z,te),T(Z,te),te.brush.svgBrush.wasDragged=!1),J._dragging=!1;var le=o.event;le.sourceEvent.stopPropagation();var ue=J.grabbingBar;if(J.grabbingBar=!1,J.grabLocation=void 0,te.parent.inBrushDrag=!1,x(),!J.wasDragged){J.wasDragged=void 0,J.clickableOrdinalRange?re.filterSpecified&&te.multiselect?J.extent.push(J.clickableOrdinalRange):(J.extent=[J.clickableOrdinalRange],re.filterSpecified=!0):ue?(J.extent=J.stayingIntervals,J.extent.length===0&&O(re)):O(re),J.brushCallback(te),b(Z.parentNode),J.brushEndCallback(re.filterSpecified?W.getConsolidated():[]);return}var se=function(){W.set(W.getConsolidated())};if(te.ordinal){var G=te.unitTickvals;G[G.length-1]<G[0]&&G.reverse(),J.newExtent=[u(0,G,J.newExtent[0],J.stayingIntervals),u(1,G,J.newExtent[1],J.stayingIntervals)];var Y=J.newExtent[1]>J.newExtent[0];J.extent=J.stayingIntervals.concat(Y?[J.newExtent]:[]),J.extent.length||O(re),J.brushCallback(te),Y?b(Z.parentNode,se):(se(),b(Z.parentNode))}else se();J.brushEndCallback(re.filterSpecified?W.getConsolidated():[])}function v(Z,te){var re=te.height-o.mouse(Z)[1]-2*l.verticalPadding,W=S(te,re),J="crosshair";W.clickableOrdinalRange?J="pointer":W.region&&(J=W.region+"-resize"),o.select(document.body).style("cursor",J)}function P(Z){Z.on("mousemove",function(te){o.event.preventDefault(),te.parent.inBrushDrag||v(this,te)}).on("mouseleave",function(te){te.parent.inBrushDrag||x()}).call(o.behavior.drag().on("dragstart",function(te){w(this,te)}).on("drag",function(te){T(this,te)}).on("dragend",function(te){_(this,te)}))}function M(Z,te){return Z[0]-te[0]}function E(Z,te){var re=Z.selectAll(".background").data(p);re.enter().append("rect").classed("background",!0).call(h).call(d).style("pointer-events","auto").attr("transform",n(0,l.verticalPadding)),re.call(P).attr("height",function(le){return le.height-l.verticalPadding});var W=Z.selectAll(".highlight-shadow").data(p);W.enter().append("line").classed("highlight-shadow",!0).attr("x",-l.bar.width/2).attr("stroke-width",l.bar.width+l.bar.strokeWidth).attr("stroke",te).attr("opacity",l.bar.strokeOpacity).attr("stroke-linecap","butt"),W.attr("y1",function(le){return le.height}).call(A);var J=Z.selectAll(".highlight").data(p);J.enter().append("line").classed("highlight",!0).attr("x",-l.bar.width/2).attr("stroke-width",l.bar.width-l.bar.strokeWidth).attr("stroke",l.bar.fillColor).attr("opacity",l.bar.fillOpacity).attr("stroke-linecap","butt"),J.attr("y1",function(le){return le.height}).call(A)}function D(Z,te){var re=Z.selectAll("."+l.cn.axisBrush).data(p,c);re.enter().append("g").classed(l.cn.axisBrush,!0),E(re,te)}function N(Z){return Z.svgBrush.extent.map(function(te){return te.slice()})}function O(Z){Z.filterSpecified=!1,Z.svgBrush.extent=[[-1/0,1/0]]}function I(Z){return function(re){var W=re.brush,J=N(W),le=J.slice();W.filter.set(le),Z()}}function F(Z){for(var te=Z.slice(),re=[],W,J=te.shift();J;){for(W=J.slice();(J=te.shift())&&J[0]<=W[1];)W[1]=Math.max(W[1],J[1]);re.push(W)}return re.length===1&&re[0][0]>re[0][1]&&(re=[]),re}function V(){var Z=[],te,re;return{set:function(W){Z=W.map(function(J){return J.slice().sort(t)}).sort(M),Z.length===1&&Z[0][0]===-1/0&&Z[0][1]===1/0&&(Z=[[0,-1]]),te=F(Z),re=Z.reduce(function(J,le){return[Math.min(J[0],le[0]),Math.max(J[1],le[1])]},[1/0,-1/0])},get:function(){return Z.slice()},getConsolidated:function(){return te},getBounds:function(){return re}}}function U(Z,te,re,W,J,le){var ue=V();return ue.set(re),{filter:ue,filterSpecified:te,svgBrush:{extent:[],brushStartCallback:W,brushCallback:I(J),brushEndCallback:le}}}function j(Z,te){if(Array.isArray(Z[0])?(Z=Z.map(function(W){return W.sort(t)}),te.multiselect?Z=F(Z.sort(M)):Z=[Z[0]]):Z=[Z.sort(t)],te.tickvals){var re=te.tickvals.slice().sort(t);if(Z=Z.map(function(W){var J=[u(0,re,W[0],[]),u(1,re,W[1],[])];if(J[1]>J[0])return J}).filter(function(W){return W}),!Z.length)return}return Z.length>1?Z:Z[0]}k.exports={makeBrush:U,ensureAxisBrush:D,cleanRanges:j}},{"../../lib":503,"../../lib/gup":500,"./constants":892,"@plotly/d3":58}],890:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../plots/get_data").getModuleCalcData,c=e("./plot"),p=e("../../constants/xmlns_namespaces");z.name="parcoords",z.plot=function(t){var n=o(t.calcdata,"parcoords")[0];n.length&&c(t,n)},z.clean=function(t,n,a,i){var r=i._has&&i._has("parcoords"),f=n._has&&n._has("parcoords");r&&!f&&(i._paperdiv.selectAll(".parcoords").remove(),i._glimages.selectAll("*").remove())},z.toSVG=function(t){var n=t._fullLayout._glimages,a=l.select(t).selectAll(".svg-container"),i=a.filter(function(f,u){return u===a.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function r(){var f=this,u=f.toDataURL("image/png"),s=n.append("svg:image");s.attr({xmlns:p.svg,"xlink:href":u,preserveAspectRatio:"none",x:0,y:0,width:f.style.width,height:f.style.height})}i.each(r),window.setTimeout(function(){l.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":480,"../../plots/get_data":593,"./plot":899,"@plotly/d3":58}],891:[function(e,k,z){var l=e("../../lib").isArrayOrTypedArray,o=e("../../components/colorscale"),c=e("../../lib/gup").wrap;k.exports=function(n,a){var i,r;return o.hasColorscale(a,"line")&&l(a.line.color)?(i=a.line.color,r=o.extractOpts(a.line).colorscale,o.calc(n,a,{vals:i,containerStr:"line",cLetter:"c"})):(i=p(a._length),r=[[0,a.line.color],[1,a.line.color]]),c({lineColor:i,cscale:r})};function p(t){for(var n=new Array(t),a=0;a<t;a++)n[a]=.5;return n}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500}],892:[function(e,k,z){k.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],893:[function(e,k,z){var l=e("../../lib"),o=e("../../components/colorscale/helpers").hasColorscale,c=e("../../components/colorscale/defaults"),p=e("../../plots/domain").defaults,t=e("../../plots/array_container_defaults"),n=e("../../plots/cartesian/axes"),a=e("./attributes"),i=e("./axisbrush"),r=e("./constants").maxDimensionCount,f=e("./merge_length");function u(h,d,y,m,g){var x=g("line.color",y);if(o(h,"line")&&l.isArrayOrTypedArray(x)){if(x.length)return g("line.colorscale"),c(h,d,m,g,{prefix:"line.",cLetter:"c"}),x.length;d.line.color=y}return 1/0}function s(h,d,y,m){function g(w,T){return l.coerce(h,d,a.dimensions,w,T)}var x=g("values"),A=g("visible");if(x&&x.length||(A=d.visible=!1),A){g("label"),g("tickvals"),g("ticktext"),g("tickformat");var b=g("range");d._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:b},n.setConvert(d._ax,m.layout),g("multiselect");var S=g("constraintrange");S&&(d.constraintrange=i.cleanRanges(S,d))}}k.exports=function(d,y,m,g){function x(T,_){return l.coerce(d,y,a,T,_)}var A=d.dimensions;Array.isArray(A)&&A.length>r&&(l.log("parcoords traces support up to "+r+" dimensions at the moment"),A.splice(r));var b=t(d,y,{name:"dimensions",layout:g,handleItemDefaults:s}),S=u(d,y,m,g,x);p(y,g,x),(!Array.isArray(b)||!b.length)&&(y.visible=!1),f(y,b,"values",S);var w={family:g.font.family,size:Math.round(g.font.size/1.2),color:g.font.color};l.coerceFont(x,"labelfont",w),l.coerceFont(x,"tickfont",w),l.coerceFont(x,"rangefont",w),x("labelangle"),x("labelside")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../../plots/domain":584,"./attributes":888,"./axisbrush":889,"./constants":892,"./merge_length":897}],894:[function(e,k,z){var l=e("../../lib").isTypedArray;z.convertTypedArray=function(o){return l(o)?Array.prototype.slice.call(o):o},z.isOrdinal=function(o){return!!o.tickvals},z.isVisible=function(o){return o.visible||!("visible"in o)}},{"../../lib":503}],895:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":888,"./base_plot":890,"./calc":891,"./defaults":893,"./plot":899}],896:[function(e,k,z){var l=e("glslify"),o=l([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),c=l([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),p=e("./constants").maxDimensionCount,t=e("../../lib"),n=1e-6,a=2048,i=new Uint8Array(4),r=new Uint8Array(4),f={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function u(v){v.read({x:0,y:0,width:1,height:1,data:i})}function s(v,P,M,E,D){var N=v._gl;N.enable(N.SCISSOR_TEST),N.scissor(P,M,E,D),v.clear({color:[0,0,0,0],depth:1})}function h(v,P,M,E,D,N){var O=N.key;function I(F){var V=Math.min(E,D-F*E);F===0&&(window.cancelAnimationFrame(M.currentRafs[O]),delete M.currentRafs[O],s(v,N.scissorX,N.scissorY,N.scissorWidth,N.viewBoxSize[1])),!M.clearOnly&&(N.count=2*V,N.offset=2*F*E,P(N),F*E+V<D&&(M.currentRafs[O]=window.requestAnimationFrame(function(){I(F+1)})),M.drawCompleted=!1)}M.drawCompleted||(u(v),M.drawCompleted=!0),I(0)}function d(v){return Math.max(n,Math.min(1-n,v))}function y(v,P){for(var M=new Array(256),E=0;E<256;E++)M[E]=v(E/255).concat(P);return M}function m(v,P){return(v>>>8*P)%256/255}function g(v,P,M){for(var E=new Array(v*(p+4)),D=0,N=0;N<v;N++){for(var O=0;O<p;O++)E[D++]=O<P.length?P[O].paddedUnitValues[N]:.5;E[D++]=m(N,2),E[D++]=m(N,1),E[D++]=m(N,0),E[D++]=d(M[N])}return E}function x(v,P,M){for(var E=new Array(P*8),D=0,N=0;N<P;N++)for(var O=0;O<2;O++)for(var I=0;I<4;I++){var F=v*4+I,V=M[N*64+F];F===63&&O===0&&(V*=-1),E[D++]=V}return E}function A(v){var P="0"+v;return P.substr(P.length-2)}function b(v){return v<p?"p"+A(v+1)+"_"+A(v+4):"colors"}function S(v,P,M){for(var E=0;E<=p;E+=4)v[b(E)](x(E/4,P,M))}function w(v){for(var P={},M=0;M<=p;M+=4)P[b(M)]=v.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return P}function T(v,P,M,E,D,N,O,I,F,V,U,j,Z,te){for(var re=[[],[]],W=0;W<64;W++)re[0][W]=W===D?1:0,re[1][W]=W===N?1:0;O*=te,I*=te,F*=te,V*=te;var J=v.lines.canvasOverdrag*te,le=v.domain,ue=v.canvasWidth*te,se=v.canvasHeight*te,G=v.pad.l*te,Y=v.pad.b*te,ee=v.layoutHeight*te,$=v.layoutWidth*te,K=v.deselectedLines.color,Q=t.extendFlat({key:U,resolution:[ue,se],viewBoxPos:[O+J,I],viewBoxSize:[F,V],i0:D,i1:N,dim0A:re[0].slice(0,16),dim0B:re[0].slice(16,32),dim0C:re[0].slice(32,48),dim0D:re[0].slice(48,64),dim1A:re[1].slice(0,16),dim1B:re[1].slice(16,32),dim1C:re[1].slice(32,48),dim1D:re[1].slice(48,64),drwLayer:j,contextColor:[K[0]/255,K[1]/255,K[2]/255,K[3]<1?K[3]:Math.max(1/255,Math.pow(1/v.lines.color.length,1/3))],scissorX:(E===P?0:O+J)+(G-J)+$*le.x[0],scissorWidth:(E===M?ue-O+J:F+.5)+(E===P?O+J:0),scissorY:I+Y+ee*le.y[0],scissorHeight:V,viewportX:G-J+$*le.x[0],viewportY:Y+ee*le.y[0],viewportWidth:ue,viewportHeight:se},Z);return Q}function _(v){var P=a-1,M=Math.max(0,Math.floor(v[0]*P),0),E=Math.min(P,Math.ceil(v[1]*P),P);return[Math.min(M,E),Math.max(M,E)]}k.exports=function(v,P){var M=P.context,E=P.pick,D=P.regl,N=D._gl,O=N.getParameter(N.ALIASED_LINE_WIDTH_RANGE),I=Math.max(O[0],Math.min(O[1],P.viewModel.plotGlPixelRatio)),F={currentRafs:{},drawCompleted:!0,clearOnly:!1},V,U,j,Z,te=w(D),re,W=D.texture(f),J=[];ue(P);var le=D({profile:!1,blend:{enable:M,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!M,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:D.prop("scissorX"),y:D.prop("scissorY"),width:D.prop("scissorWidth"),height:D.prop("scissorHeight")}},viewport:{x:D.prop("viewportX"),y:D.prop("viewportY"),width:D.prop("viewportWidth"),height:D.prop("viewportHeight")},dither:!1,vert:o,frag:c,primitive:"lines",lineWidth:I,attributes:te,uniforms:{resolution:D.prop("resolution"),viewBoxPos:D.prop("viewBoxPos"),viewBoxSize:D.prop("viewBoxSize"),dim0A:D.prop("dim0A"),dim1A:D.prop("dim1A"),dim0B:D.prop("dim0B"),dim1B:D.prop("dim1B"),dim0C:D.prop("dim0C"),dim1C:D.prop("dim1C"),dim0D:D.prop("dim0D"),dim1D:D.prop("dim1D"),loA:D.prop("loA"),hiA:D.prop("hiA"),loB:D.prop("loB"),hiB:D.prop("hiB"),loC:D.prop("loC"),hiC:D.prop("hiC"),loD:D.prop("loD"),hiD:D.prop("hiD"),palette:W,contextColor:D.prop("contextColor"),maskTexture:D.prop("maskTexture"),drwLayer:D.prop("drwLayer"),maskHeight:D.prop("maskHeight")},offset:D.prop("offset"),count:D.prop("count")});function ue(K){V=K.model,U=K.viewModel,j=U.dimensions.slice(),Z=j[0]?j[0].values.length:0;var Q=V.lines,ae=E?Q.color.map(function(oe,fe){return fe/Q.color.length}):Q.color,ie=g(Z,j,ae);S(te,Z,ie),!M&&!E&&(W=D.texture(t.extendFlat({data:y(V.unitToColor,255)},f)))}function se(K){var Q,ae,ie,oe=[[],[]];for(ie=0;ie<64;ie++){var fe=!K&&ie<j.length?j[ie].brush.filter.getBounds():[-1/0,1/0];oe[0][ie]=fe[0],oe[1][ie]=fe[1]}var ye=a*8,ce=new Array(ye);for(Q=0;Q<ye;Q++)ce[Q]=255;if(!K)for(Q=0;Q<j.length;Q++){var me=Q%8,xe=(Q-me)/8,ke=Math.pow(2,me),Ae=j[Q],Oe=Ae.brush.filter.get();if(!(Oe.length<2)){var He=_(Oe[0])[1];for(ae=1;ae<Oe.length;ae++){var Ge=_(Oe[ae]);for(ie=He+1;ie<Ge[0];ie++)ce[ie*8+xe]&=~ke;He=Math.max(He,Ge[1])}}}var _e={shape:[8,a],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:ce};return re?re(_e):re=D.texture(_e),{maskTexture:re,maskHeight:a,loA:oe[0].slice(0,16),loB:oe[0].slice(16,32),loC:oe[0].slice(32,48),loD:oe[0].slice(48,64),hiA:oe[1].slice(0,16),hiB:oe[1].slice(16,32),hiC:oe[1].slice(32,48),hiD:oe[1].slice(48,64)}}function G(K,Q,ae){var ie=K.length,oe,fe,ye,ce=1/0,me=-1/0;for(oe=0;oe<ie;oe++)K[oe].dim0.canvasX<ce&&(ce=K[oe].dim0.canvasX,fe=oe),K[oe].dim1.canvasX>me&&(me=K[oe].dim1.canvasX,ye=oe);ie===0&&s(D,0,0,V.canvasWidth,V.canvasHeight);var xe=se(M);for(oe=0;oe<ie;oe++){var ke=K[oe],Ae=ke.dim0.crossfilterDimensionIndex,Oe=ke.dim1.crossfilterDimensionIndex,He=ke.canvasX,Ge=ke.canvasY,_e=He+ke.panelSizeX,Ie=ke.plotGlPixelRatio;if(Q||!J[Ae]||J[Ae][0]!==He||J[Ae][1]!==_e){J[Ae]=[He,_e];var We=T(V,fe,ye,oe,Ae,Oe,He,Ge,ke.panelSizeX,ke.panelSizeY,ke.dim0.crossfilterDimensionIndex,M?0:E?2:1,xe,Ie);F.clearOnly=ae;var et=Q?V.lines.blockLineCount:Z;h(D,le,F,et,Z,We)}}}function Y(K,Q){return D.read({x:K,y:Q,width:1,height:1,data:r}),r}function ee(K,Q,ae,ie){var oe=new Uint8Array(4*ae*ie);return D.read({x:K,y:Q,width:ae,height:ie,data:oe}),oe}function $(){v.style["pointer-events"]="none",W.destroy(),re&&re.destroy();for(var K in te)te[K].destroy()}return{render:G,readPixel:Y,readPixels:ee,destroy:$,update:ue}}},{"../../lib":503,"./constants":892,glslify:227}],897:[function(e,k,z){k.exports=function(l,o,c,p){p||(p=1/0);var t,n;for(t=0;t<o.length;t++)n=o[t],n.visible&&(p=Math.min(p,n[c].length));for(p===1/0&&(p=0),l._length=p,t=0;t<o.length;t++)n=o[t],n.visible&&(n._length=p);return p}},{}],898:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../lib"),c=o.numberFormat,p=e("color-rgba"),t=e("../../plots/cartesian/axes"),n=o.strRotate,a=o.strTranslate,i=e("../../lib/svg_text_utils"),r=e("../../components/drawing"),f=e("../../components/colorscale"),u=e("../../lib/gup"),s=u.keyFun,h=u.repeat,d=u.unwrap,y=e("./helpers"),m=e("./constants"),g=e("./axisbrush"),x=e("./lines");function A(re,W,J){return o.aggNums(re,null,W,J)}function b(re,W){return w(A(Math.min,re,W),A(Math.max,re,W))}function S(re){var W=re.range;return W?w(W[0],W[1]):b(re.values,re._length)}function w(re,W){return(isNaN(re)||!isFinite(re))&&(re=0),(isNaN(W)||!isFinite(W))&&(W=0),re===W&&(re===0?(re-=1,W+=1):(re*=.9,W*=1.1)),[re,W]}function T(re,W){return W?function(J,le){var ue=W[le];return ue??re(J)}:re}function _(re,W,J,le,ue){var se=S(J);return le?l.scale.ordinal().domain(le.map(T(c(J.tickformat),ue))).range(le.map(function(G){var Y=(G-se[0])/(se[1]-se[0]);return re-W+Y*(2*W-re)})):l.scale.linear().domain(se).range([re-W,W])}function v(re,W){return l.scale.linear().range([W,re-W])}function P(re,W){return l.scale.linear().domain(S(re)).range([W,1-W])}function M(re){if(!!re.tickvals){var W=S(re);return l.scale.ordinal().domain(re.tickvals).range(re.tickvals.map(function(J){return(J-W[0])/(W[1]-W[0])}))}}function E(re){var W=re.map(function(se){return se[0]}),J=re.map(function(se){var G=p(se[1]);return l.rgb("rgb("+G[0]+","+G[1]+","+G[2]+")")}),le=function(se){return function(G){return G[se]}},ue="rgb".split("").map(function(se){return l.scale.linear().clamp(!0).domain(W).range(J.map(le(se)))});return function(se){return ue.map(function(G){return G(se)})}}function D(re){return re.dimensions.some(function(W){return W.brush.filterSpecified})}function N(re,W,J){var le=d(W),ue=le.trace,se=y.convertTypedArray(le.lineColor),G=ue.line,Y={color:p(m.deselectedLineColor)},ee=f.extractOpts(G),$=ee.reversescale?f.flipScale(le.cscale):le.cscale,K=ue.domain,Q=ue.dimensions,ae=re.width,ie=ue.labelangle,oe=ue.labelside,fe=ue.labelfont,ye=ue.tickfont,ce=ue.rangefont,me=o.extendDeepNoArrays({},G,{color:se.map(l.scale.linear().domain(S({values:se,range:[ee.min,ee.max],_length:ue._length}))),blockLineCount:m.blockLineCount,canvasOverdrag:m.overdrag*m.canvasPixelRatio}),xe=Math.floor(ae*(K.x[1]-K.x[0])),ke=Math.floor(re.height*(K.y[1]-K.y[0])),Ae=re.margin||{l:80,r:80,t:100,b:80},Oe=xe,He=ke;return{key:J,colCount:Q.filter(y.isVisible).length,dimensions:Q,tickDistance:m.tickDistance,unitToColor:E($),lines:me,deselectedLines:Y,labelAngle:ie,labelSide:oe,labelFont:fe,tickFont:ye,rangeFont:ce,layoutWidth:ae,layoutHeight:re.height,domain:K,translateX:K.x[0]*ae,translateY:re.height-K.y[1]*re.height,pad:Ae,canvasWidth:Oe*m.canvasPixelRatio+2*me.canvasOverdrag,canvasHeight:He*m.canvasPixelRatio,width:Oe,height:He,canvasPixelRatio:m.canvasPixelRatio}}function O(re,W,J){var le=J.width,ue=J.height,se=J.dimensions,G=J.canvasPixelRatio,Y=function(ae){return le*ae/Math.max(1,J.colCount-1)},ee=m.verticalPadding/ue,$=v(ue,m.verticalPadding),K={key:J.key,xScale:Y,model:J,inBrushDrag:!1},Q={};return K.dimensions=se.filter(y.isVisible).map(function(ae,ie){var oe=P(ae,ee),fe=Q[ae.label];Q[ae.label]=(fe||0)+1;var ye=ae.label+(fe?"__"+fe:""),ce=ae.constraintrange,me=ce&&ce.length;me&&!Array.isArray(ce[0])&&(ce=[ce]);var xe=me?ce.map(function(Ne){return Ne.map(oe)}):[[-1/0,1/0]],ke=function(){var Ne=K;Ne.focusLayer&&Ne.focusLayer.render(Ne.panels,!0);var De=D(Ne);!re.contextShown()&&De?(Ne.contextLayer&&Ne.contextLayer.render(Ne.panels,!0),re.contextShown(!0)):re.contextShown()&&!De&&(Ne.contextLayer&&Ne.contextLayer.render(Ne.panels,!0,!0),re.contextShown(!1))},Ae=ae.values;Ae.length>ae._length&&(Ae=Ae.slice(0,ae._length));var Oe=ae.tickvals,He;function Ge(Ne,De){return{val:Ne,text:He[De]}}function _e(Ne,De){return Ne.val-De.val}if(Array.isArray(Oe)&&Oe.length){He=ae.ticktext,!Array.isArray(He)||!He.length?He=Oe.map(c(ae.tickformat)):He.length>Oe.length?He=He.slice(0,Oe.length):Oe.length>He.length&&(Oe=Oe.slice(0,He.length));for(var Ie=1;Ie<Oe.length;Ie++)if(Oe[Ie]<Oe[Ie-1]){for(var We=Oe.map(Ge).sort(_e),et=0;et<Oe.length;et++)Oe[et]=We[et].val,He[et]=We[et].text;break}}else Oe=void 0;return Ae=y.convertTypedArray(Ae),{key:ye,label:ae.label,tickFormat:ae.tickformat,tickvals:Oe,ticktext:He,ordinal:y.isOrdinal(ae),multiselect:ae.multiselect,xIndex:ie,crossfilterDimensionIndex:ie,visibleIndex:ae._index,height:ue,values:Ae,paddedUnitValues:Ae.map(oe),unitTickvals:Oe&&Oe.map(oe),xScale:Y,x:Y(ie),canvasX:Y(ie)*G,unitToPaddedPx:$,domainScale:_(ue,m.verticalPadding,ae,Oe,He),ordinalScale:M(ae),parent:K,model:J,brush:g.makeBrush(re,me,xe,function(){re.linePickActive(!1)},ke,function(Ne){if(K.focusLayer.render(K.panels,!0),K.pickLayer&&K.pickLayer.render(K.panels,!0),re.linePickActive(!0),W&&W.filterChanged){var De=oe.invert,Ve=Ne.map(function(dt){return dt.map(De).sort(o.sorterAsc)}).sort(function(dt,Dt){return dt[0]-Dt[0]});W.filterChanged(K.key,ae._index,Ve)}})}}),K}function I(re){re.classed(m.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function F(){var re=!0,W=!1;return{linePickActive:function(J){return arguments.length?re=!!J:re},contextShown:function(J){return arguments.length?W=!!J:W}}}function V(re,W){var J=W==="top"?1:-1,le=re*Math.PI/180,ue=Math.sin(le),se=Math.cos(le);return{dir:J,dx:ue,dy:se,degrees:re}}function U(re,W,J){for(var le=W.panels||(W.panels=[]),ue=re.data(),se=0;se<ue.length-1;se++){var G=le[se]||(le[se]={}),Y=ue[se],ee=ue[se+1];G.dim0=Y,G.dim1=ee,G.canvasX=Y.canvasX,G.panelSizeX=ee.canvasX-Y.canvasX,G.panelSizeY=W.model.canvasHeight,G.y=0,G.canvasY=0,G.plotGlPixelRatio=J}}function j(re){for(var W=0;W<re.length;W++)for(var J=0;J<re[W].length;J++)for(var le=re[W][J].trace,ue=le.dimensions,se=0;se<ue.length;se++){var G=ue[se].values,Y=ue[se]._ax;Y&&(Y.range?Y.range=w(Y.range[0],Y.range[1]):Y.range=b(G,le._length),Y.dtick||(Y.dtick=.01*(Math.abs(Y.range[1]-Y.range[0])||1)),Y.tickformat=ue[se].tickformat,t.calcTicks(Y),Y.cleanRange())}}function Z(re,W){return t.tickText(re._ax,W,!1).text}function te(re,W){if(re.ordinal)return"";var J=re.domainScale.domain(),le=J[W?J.length-1:0];return Z(re.model.dimensions[re.visibleIndex],le)}k.exports=function(W,J,le,ue){var se=W._fullLayout,G=se._toppaper,Y=se._glcontainer,ee=W._context.plotGlPixelRatio,$=W._fullLayout.paper_bgcolor;j(J);var K=F(),Q=J.filter(function(We){return d(We).trace.visible}).map(N.bind(0,le)).map(O.bind(0,K,ue));Y.each(function(We,et){return o.extendFlat(We,Q[et])});var ae=Y.selectAll(".gl-canvas").each(function(We){We.viewModel=Q[0],We.viewModel.plotGlPixelRatio=ee,We.viewModel.paperColor=$,We.model=We.viewModel?We.viewModel.model:null}),ie=null,oe=ae.filter(function(We){return We.pick});oe.style("pointer-events","auto").on("mousemove",function(We){if(K.linePickActive()&&We.lineLayer&&ue&&ue.hover){var et=l.event,Ne=this.width,De=this.height,Ve=l.mouse(this),dt=Ve[0],Dt=Ve[1];if(dt<0||Dt<0||dt>=Ne||Dt>=De)return;var Gt=We.lineLayer.readPixel(dt,De-1-Dt),Mt=Gt[3]!==0,zt=Mt?Gt[2]+256*(Gt[1]+256*Gt[0]):null,Nt={x:dt,y:Dt,clientX:et.clientX,clientY:et.clientY,dataIndex:We.model.key,curveNumber:zt};zt!==ie&&(Mt?ue.hover(Nt):ue.unhover&&ue.unhover(Nt),ie=zt)}}),ae.style("opacity",function(We){return We.pick?0:1}),G.style("background","rgba(255, 255, 255, 0)");var fe=G.selectAll("."+m.cn.parcoords).data(Q,s);fe.exit().remove(),fe.enter().append("g").classed(m.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),fe.attr("transform",function(We){return a(We.model.translateX,We.model.translateY)});var ye=fe.selectAll("."+m.cn.parcoordsControlView).data(h,s);ye.enter().append("g").classed(m.cn.parcoordsControlView,!0),ye.attr("transform",function(We){return a(We.model.pad.l,We.model.pad.t)});var ce=ye.selectAll("."+m.cn.yAxis).data(function(We){return We.dimensions},s);ce.enter().append("g").classed(m.cn.yAxis,!0),ye.each(function(We){U(ce,We,ee)}),ae.each(function(We){if(We.viewModel){!We.lineLayer||ue?We.lineLayer=x(this,We):We.lineLayer.update(We),(We.key||We.key===0)&&(We.viewModel[We.key]=We.lineLayer);var et=!We.context||ue;We.lineLayer.render(We.viewModel.panels,et)}}),ce.attr("transform",function(We){return a(We.xScale(We.xIndex),0)}),ce.call(l.behavior.drag().origin(function(We){return We}).on("drag",function(We){var et=We.parent;K.linePickActive(!1),We.x=Math.max(-m.overdrag,Math.min(We.model.width+m.overdrag,l.event.x)),We.canvasX=We.x*We.model.canvasPixelRatio,ce.sort(function(Ne,De){return Ne.x-De.x}).each(function(Ne,De){Ne.xIndex=De,Ne.x=We===Ne?Ne.x:Ne.xScale(Ne.xIndex),Ne.canvasX=Ne.x*Ne.model.canvasPixelRatio}),U(ce,et,ee),ce.filter(function(Ne){return Math.abs(We.xIndex-Ne.xIndex)!==0}).attr("transform",function(Ne){return a(Ne.xScale(Ne.xIndex),0)}),l.select(this).attr("transform",a(We.x,0)),ce.each(function(Ne,De,Ve){Ve===We.parent.key&&(et.dimensions[De]=Ne)}),et.contextLayer&&et.contextLayer.render(et.panels,!1,!D(et)),et.focusLayer.render&&et.focusLayer.render(et.panels)}).on("dragend",function(We){var et=We.parent;We.x=We.xScale(We.xIndex),We.canvasX=We.x*We.model.canvasPixelRatio,U(ce,et,ee),l.select(this).attr("transform",function(Ne){return a(Ne.x,0)}),et.contextLayer&&et.contextLayer.render(et.panels,!1,!D(et)),et.focusLayer&&et.focusLayer.render(et.panels),et.pickLayer&&et.pickLayer.render(et.panels,!0),K.linePickActive(!0),ue&&ue.axesMoved&&ue.axesMoved(et.key,et.dimensions.map(function(Ne){return Ne.crossfilterDimensionIndex}))})),ce.exit().remove();var me=ce.selectAll("."+m.cn.axisOverlays).data(h,s);me.enter().append("g").classed(m.cn.axisOverlays,!0),me.selectAll("."+m.cn.axis).remove();var xe=me.selectAll("."+m.cn.axis).data(h,s);xe.enter().append("g").classed(m.cn.axis,!0),xe.each(function(We){var et=We.model.height/We.model.tickDistance,Ne=We.domainScale,De=Ne.domain();l.select(this).call(l.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(et,We.tickFormat).tickValues(We.ordinal?De:null).tickFormat(function(Ve){return y.isOrdinal(We)?Ve:Z(We.model.dimensions[We.visibleIndex],Ve)}).scale(Ne)),r.font(xe.selectAll("text"),We.model.tickFont)}),xe.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),xe.selectAll("text").style("text-shadow",i.makeTextShadow($)).style("cursor","default");var ke=me.selectAll("."+m.cn.axisHeading).data(h,s);ke.enter().append("g").classed(m.cn.axisHeading,!0);var Ae=ke.selectAll("."+m.cn.axisTitle).data(h,s);Ae.enter().append("text").classed(m.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),Ae.text(function(We){return We.label}).each(function(We){var et=l.select(this);r.font(et,We.model.labelFont),i.convertToTspans(et,W)}).attr("transform",function(We){var et=V(We.model.labelAngle,We.model.labelSide),Ne=m.axisTitleOffset;return(et.dir>0?"":a(0,2*Ne+We.model.height))+n(et.degrees)+a(-Ne*et.dx,-Ne*et.dy)}).attr("text-anchor",function(We){var et=V(We.model.labelAngle,We.model.labelSide),Ne=Math.abs(et.dx),De=Math.abs(et.dy);return 2*Ne>De?et.dir*et.dx<0?"start":"end":"middle"});var Oe=me.selectAll("."+m.cn.axisExtent).data(h,s);Oe.enter().append("g").classed(m.cn.axisExtent,!0);var He=Oe.selectAll("."+m.cn.axisExtentTop).data(h,s);He.enter().append("g").classed(m.cn.axisExtentTop,!0),He.attr("transform",a(0,-m.axisExtentOffset));var Ge=He.selectAll("."+m.cn.axisExtentTopText).data(h,s);Ge.enter().append("text").classed(m.cn.axisExtentTopText,!0).call(I),Ge.text(function(We){return te(We,!0)}).each(function(We){r.font(l.select(this),We.model.rangeFont)});var _e=Oe.selectAll("."+m.cn.axisExtentBottom).data(h,s);_e.enter().append("g").classed(m.cn.axisExtentBottom,!0),_e.attr("transform",function(We){return a(0,We.model.height+m.axisExtentOffset)});var Ie=_e.selectAll("."+m.cn.axisExtentBottomText).data(h,s);Ie.enter().append("text").classed(m.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(I),Ie.text(function(We){return te(We,!1)}).each(function(We){r.font(l.select(this),We.model.rangeFont)}),g.ensureAxisBrush(me,$)}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"./axisbrush":889,"./constants":892,"./helpers":894,"./lines":896,"@plotly/d3":58,"color-rgba":91}],899:[function(e,k,z){var l=e("./parcoords"),o=e("../../lib/prepare_regl"),c=e("./helpers").isVisible;function p(n,a,i){var r=a.indexOf(i),f=n.indexOf(r);return f===-1&&(f+=a.length),f}function t(n,a){return function(r,f){return p(n,a,r)-p(n,a,f)}}k.exports=function(a,i){var r=a._fullLayout,f=o(a);if(!!f){var u={},s={},h={},d={},y=r._size;i.forEach(function(b,S){var w=b[0].trace;h[S]=w.index;var T=d[S]=w._fullInput.index;u[S]=a.data[T].dimensions,s[S]=a.data[T].dimensions.slice()});var m=function(b,S,w){var T=s[b][S],_=w.map(function(N){return N.slice()}),v="dimensions["+S+"].constraintrange",P=r._tracePreGUI[a._fullData[h[b]]._fullInput.uid];if(P[v]===void 0){var M=T.constraintrange;P[v]=M||null}var E=a._fullData[h[b]].dimensions[S];_.length?(_.length===1&&(_=_[0]),T.constraintrange=_,E.constraintrange=_.slice(),_=[_]):(delete T.constraintrange,delete E.constraintrange,_=null);var D={};D[v]=_,a.emit("plotly_restyle",[D,[d[b]]])},g=function(b){a.emit("plotly_hover",b)},x=function(b){a.emit("plotly_unhover",b)},A=function(b,S){var w=t(S,s[b].filter(c));u[b].sort(w),s[b].filter(function(T){return!c(T)}).sort(function(T){return s[b].indexOf(T)}).forEach(function(T){u[b].splice(u[b].indexOf(T),1),u[b].splice(s[b].indexOf(T),0,T)}),a.emit("plotly_restyle",[{dimensions:[u[b]]},[d[b]]])};l(a,i,{width:y.w,height:y.h,margin:{t:y.t,r:y.r,b:y.b,l:y.l}},{filterChanged:m,hover:g,unhover:x,axesMoved:A})}}},{"../../lib/prepare_regl":516,"./helpers":894,"./parcoords":898}],900:[function(e,k,z){var l=e("../../plots/attributes"),o=e("../../plots/domain").attributes,c=e("../../plots/font_attributes"),p=e("../../components/color/attributes"),t=e("../../plots/template_attributes").hovertemplateAttrs,n=e("../../plots/template_attributes").texttemplateAttrs,a=e("../../lib/extend").extendFlat,i=c({editType:"plot",arrayOk:!0,colorEditType:"plot"});k.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:p.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:a({},l.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:t({},{keys:["label","color","value","percent","text"]}),texttemplate:n({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:a({},i,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:a({},i,{}),outsidetextfont:a({},i,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:a({},i,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:o({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:a({},i,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],901:[function(e,k,z){var l=e("../../plots/plots");z.name="pie",z.plot=function(o,c,p,t){l.plotBasePlot(z.name,o,c,p,t)},z.clean=function(o,c,p,t){l.cleanBasePlot(z.name,o,c,p,t)}},{"../../plots/plots":619}],902:[function(e,k,z){var l=e("fast-isnumeric"),o=e("tinycolor2"),c=e("../../components/color"),p={};function t(r,f){var u=[],s=r._fullLayout,h=s.hiddenlabels||[],d=f.labels,y=f.marker.colors||[],m=f.values,g=f._length,x=f._hasValues&&g,A,b;if(f.dlabel)for(d=new Array(g),A=0;A<g;A++)d[A]=String(f.label0+A*f.dlabel);var S={},w=n(s["_"+f.type+"colormap"]),T=0,_=!1;for(A=0;A<g;A++){var v,P,M;if(x){if(v=m[A],!l(v))continue;v=+v}else v=1;P=d[A],(P===void 0||P==="")&&(P=A),P=String(P);var E=S[P];E===void 0?(S[P]=u.length,M=h.indexOf(P)!==-1,M||(T+=v),u.push({v,label:P,color:w(y[A],P),i:A,pts:[A],hidden:M})):(_=!0,b=u[E],b.v+=v,b.pts.push(A),b.hidden||(T+=v),b.color===!1&&y[A]&&(b.color=w(y[A],P)))}u=u.filter(function(N){return N.v>=0});var D=f.type==="funnelarea"?_:f.sort;return D&&u.sort(function(N,O){return O.v-N.v}),u[0]&&(u[0].vTotal=T),u}function n(r){return function(u,s){return!u||(u=o(u),!u.isValid())?!1:(u=c.addOpacity(u,u.getAlpha()),r[s]||(r[s]=u),u)}}function a(r,f){var u=(f||{}).type;u||(u="pie");var s=r._fullLayout,h=r.calcdata,d=s[u+"colorway"],y=s["_"+u+"colormap"];s["extend"+u+"colors"]&&(d=i(d,p));for(var m=0,g=0;g<h.length;g++){var x=h[g],A=x[0].trace.type;if(A===u)for(var b=0;b<x.length;b++){var S=x[b];S.color===!1&&(y[S.label]?S.color=y[S.label]:(y[S.label]=S.color=d[m%d.length],m++))}}}function i(r,f){var u,s=JSON.stringify(r),h=f[s];if(!h){for(h=r.slice(),u=0;u<r.length;u++)h.push(o(r[u]).lighten(20).toHexString());for(u=0;u<r.length;u++)h.push(o(r[u]).darken(20).toHexString());f[s]=h}return h}k.exports={calc:t,crossTraceCalc:a,makePullColorFn:n,generateExtendedColors:i}},{"../../components/color":366,"fast-isnumeric":190,tinycolor2:312}],903:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../lib"),c=e("./attributes"),p=e("../../plots/domain").defaults,t=e("../bar/defaults").handleText;function n(i,r){var f=Array.isArray(i),u=o.isArrayOrTypedArray(r),s=Math.min(f?i.length:1/0,u?r.length:1/0);if(isFinite(s)||(s=0),s&&u){for(var h,d=0;d<s;d++){var y=r[d];if(l(y)&&y>0){h=!0;break}}h||(s=0)}return{hasLabels:f,hasValues:u,len:s}}function a(i,r,f,u){function s(M,E){return o.coerce(i,r,c,M,E)}var h=s("labels"),d=s("values"),y=n(h,d),m=y.len;if(r._hasLabels=y.hasLabels,r._hasValues=y.hasValues,!r._hasLabels&&r._hasValues&&(s("label0"),s("dlabel")),!m){r.visible=!1;return}r._length=m;var g=s("marker.line.width");g&&s("marker.line.color"),s("marker.colors"),s("scalegroup");var x=s("text"),A=s("texttemplate"),b;if(A||(b=s("textinfo",Array.isArray(x)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),A||b&&b!=="none"){var S=s("textposition");t(i,r,u,s,S,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var w=Array.isArray(S)||S==="auto",T=w||S==="outside";T&&s("automargin"),(S==="inside"||S==="auto"||Array.isArray(S))&&s("insidetextorientation")}p(r,u,s);var _=s("hole"),v=s("title.text");if(v){var P=s("title.position",_?"middle center":"top center");!_&&P==="middle center"&&(r.title.position="top center"),o.coerceFont(s,"title.font",u.font)}s("sort"),s("direction"),s("rotation"),s("pull")}k.exports={handleLabelsAndValues:n,supplyDefaults:a}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":900,"fast-isnumeric":190}],904:[function(e,k,z){var l=e("../../components/fx/helpers").appendArrayMultiPointValues;k.exports=function(c,p){var t={curveNumber:p.index,pointNumbers:c.pts,data:p._input,fullData:p,label:c.label,color:c.color,value:c.v,percent:c.percent,text:c.text,bbox:c.bbox,v:c.v};return c.pts.length===1&&(t.pointNumber=t.i=c.pts[0]),l(t,p,c.pts),p.type==="funnelarea"&&(delete t.v,delete t.i),t}},{"../../components/fx/helpers":402}],905:[function(e,k,z){var l=e("../../lib");function o(c){return c.indexOf("e")!==-1?c.replace(/[.]?0+e/,"e"):c.indexOf(".")!==-1?c.replace(/[.]?0+$/,""):c}z.formatPiePercent=function(p,t){var n=o((p*100).toPrecision(3));return l.numSeparate(n,t)+"%"},z.formatPieValue=function(p,t){var n=o(p.toPrecision(10));return l.numSeparate(n,t)},z.getFirstFilled=function(p,t){if(!!Array.isArray(p))for(var n=0;n<t.length;n++){var a=p[t[n]];if(a||a===0||a==="")return a}},z.castOption=function(p,t){if(Array.isArray(p))return z.getFirstFilled(p,t);if(p)return p},z.getRotationAngle=function(c){return(c==="auto"?0:c)*Math.PI/180}},{"../../lib":503}],906:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,supplyLayoutDefaults:e("./layout_defaults"),layoutAttributes:e("./layout_attributes"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style"),styleOne:e("./style_one"),moduleType:"trace",name:"pie",basePlotModule:e("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":900,"./base_plot":901,"./calc":902,"./defaults":903,"./layout_attributes":907,"./layout_defaults":908,"./plot":909,"./style":910,"./style_one":911}],907:[function(e,k,z){k.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],908:[function(e,k,z){var l=e("../../lib"),o=e("./layout_attributes");k.exports=function(p,t){function n(a,i){return l.coerce(p,t,o,a,i)}n("hiddenlabels"),n("piecolorway",t.colorway),n("extendpiecolors")}},{"../../lib":503,"./layout_attributes":907}],909:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../plots/plots"),c=e("../../components/fx"),p=e("../../components/color"),t=e("../../components/drawing"),n=e("../../lib"),a=n.strScale,i=n.strTranslate,r=e("../../lib/svg_text_utils"),f=e("../bar/uniform_text"),u=f.recordMinTextSize,s=f.clearMinTextSize,h=e("../bar/constants").TEXTPAD,d=e("./helpers"),y=e("./event_data"),m=e("../../lib").isValidTextValue;function g(se,G){var Y=se._fullLayout,ee=Y._size;s("pie",Y),w(G,se),te(G,ee);var $=n.makeTraceGroups(Y._pielayer,G,"trace").each(function(K){var Q=l.select(this),ae=K[0],ie=ae.trace;W(K),Q.attr("stroke-linejoin","round"),Q.each(function(){var oe=l.select(this).selectAll("g.slice").data(K);oe.enter().append("g").classed("slice",!0),oe.exit().remove();var fe=[[[],[]],[[],[]]],ye=!1;oe.each(function(Ge,_e){if(Ge.hidden){l.select(this).selectAll("path,g").remove();return}Ge.pointNumber=Ge.i,Ge.curveNumber=ie.index,fe[Ge.pxmid[1]<0?0:1][Ge.pxmid[0]<0?0:1].push(Ge);var Ie=ae.cx,We=ae.cy,et=l.select(this),Ne=et.selectAll("path.surface").data([Ge]);if(Ne.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),et.call(A,se,K),ie.pull){var De=+d.castOption(ie.pull,Ge.pts)||0;De>0&&(Ie+=De*Ge.pxmid[0],We+=De*Ge.pxmid[1])}Ge.cxFinal=Ie,Ge.cyFinal=We;function Ve(Et,At,it,ht){var $e=ht*(At[0]-Et[0]),Ee=ht*(At[1]-Et[1]);return"a"+ht*ae.r+","+ht*ae.r+" 0 "+Ge.largeArc+(it?" 1 ":" 0 ")+$e+","+Ee}var dt=ie.hole;if(Ge.v===ae.vTotal){var Dt="M"+(Ie+Ge.px0[0])+","+(We+Ge.px0[1])+Ve(Ge.px0,Ge.pxmid,!0,1)+Ve(Ge.pxmid,Ge.px0,!0,1)+"Z";dt?Ne.attr("d","M"+(Ie+dt*Ge.px0[0])+","+(We+dt*Ge.px0[1])+Ve(Ge.px0,Ge.pxmid,!1,dt)+Ve(Ge.pxmid,Ge.px0,!1,dt)+"Z"+Dt):Ne.attr("d",Dt)}else{var Gt=Ve(Ge.px0,Ge.px1,!0,1);if(dt){var Mt=1-dt;Ne.attr("d","M"+(Ie+dt*Ge.px1[0])+","+(We+dt*Ge.px1[1])+Ve(Ge.px1,Ge.px0,!1,dt)+"l"+Mt*Ge.px0[0]+","+Mt*Ge.px0[1]+Gt+"Z")}else Ne.attr("d","M"+Ie+","+We+"l"+Ge.px0[0]+","+Ge.px0[1]+Gt+"Z")}le(se,Ge,ae);var zt=d.castOption(ie.textposition,Ge.pts),Nt=et.selectAll("g.slicetext").data(Ge.text&&zt!=="none"?[0]:[]);Nt.enter().append("g").classed("slicetext",!0),Nt.exit().remove(),Nt.each(function(){var Et=n.ensureSingle(l.select(this),"text","",function(ut){ut.attr("data-notex",1)}),At=n.ensureUniformFontSize(se,zt==="outside"?b(ie,Ge,Y.font):S(ie,Ge,Y.font));Et.text(Ge.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(t.font,At).call(r.convertToTspans,se);var it=t.bBox(Et.node()),ht;if(zt==="outside")ht=O(it,Ge);else if(ht=T(it,Ge,ae),zt==="auto"&&ht.scale<1){var $e=n.ensureUniformFontSize(se,ie.outsidetextfont);Et.call(t.font,$e),it=t.bBox(Et.node()),ht=O(it,Ge)}var Ee=ht.textPosAngle,Xe=Ee===void 0?Ge.pxmid:J(ae.r,Ee);if(ht.targetX=Ie+Xe[0]*ht.rCenter+(ht.x||0),ht.targetY=We+Xe[1]*ht.rCenter+(ht.y||0),ue(ht,it),ht.outside){var rt=ht.targetY;Ge.yLabelMin=rt-it.height/2,Ge.yLabelMid=rt,Ge.yLabelMax=rt+it.height/2,Ge.labelExtraX=0,Ge.labelExtraY=0,ye=!0}ht.fontSize=At.size,u(ie.type,ht,Y),K[_e].transform=ht,Et.attr("transform",n.getTextTransform(ht))})});var ce=l.select(this).selectAll("g.titletext").data(ie.title.text?[0]:[]);if(ce.enter().append("g").classed("titletext",!0),ce.exit().remove(),ce.each(function(){var Ge=n.ensureSingle(l.select(this),"text","",function(We){We.attr("data-notex",1)}),_e=ie.title.text;ie._meta&&(_e=n.templateString(_e,ie._meta)),Ge.text(_e).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(t.font,ie.title.font).call(r.convertToTspans,se);var Ie;ie.title.position==="middle center"?Ie=I(ae):Ie=F(ae,ee),Ge.attr("transform",i(Ie.x,Ie.y)+a(Math.min(1,Ie.scale))+i(Ie.tx,Ie.ty))}),ye&&Z(fe,ie),x(oe,ie),ye&&ie.automargin){var me=t.bBox(Q.node()),xe=ie.domain,ke=ee.w*(xe.x[1]-xe.x[0]),Ae=ee.h*(xe.y[1]-xe.y[0]),Oe=(.5*ke-ae.r)/ee.w,He=(.5*Ae-ae.r)/ee.h;o.autoMargin(se,"pie."+ie.uid+".automargin",{xl:xe.x[0]-Oe,xr:xe.x[1]+Oe,yb:xe.y[0]-He,yt:xe.y[1]+He,l:Math.max(ae.cx-ae.r-me.left,0),r:Math.max(me.right-(ae.cx+ae.r),0),b:Math.max(me.bottom-(ae.cy+ae.r),0),t:Math.max(ae.cy-ae.r-me.top,0),pad:5})}})});setTimeout(function(){$.selectAll("tspan").each(function(){var K=l.select(this);K.attr("dy")&&K.attr("dy",K.attr("dy"))})},0)}function x(se,G){se.each(function(Y){var ee=l.select(this);if(!Y.labelExtraX&&!Y.labelExtraY){ee.select("path.textline").remove();return}var $=ee.select("g.slicetext text");Y.transform.targetX+=Y.labelExtraX,Y.transform.targetY+=Y.labelExtraY,$.attr("transform",n.getTextTransform(Y.transform));var K=Y.cxFinal+Y.pxmid[0],Q=Y.cyFinal+Y.pxmid[1],ae="M"+K+","+Q,ie=(Y.yLabelMax-Y.yLabelMin)*(Y.pxmid[0]<0?-1:1)/4;if(Y.labelExtraX){var oe=Y.labelExtraX*Y.pxmid[1]/Y.pxmid[0],fe=Y.yLabelMid+Y.labelExtraY-(Y.cyFinal+Y.pxmid[1]);Math.abs(oe)>Math.abs(fe)?ae+="l"+fe*Y.pxmid[0]/Y.pxmid[1]+","+fe+"H"+(K+Y.labelExtraX+ie):ae+="l"+Y.labelExtraX+","+oe+"v"+(fe-oe)+"h"+ie}else ae+="V"+(Y.yLabelMid+Y.labelExtraY)+"h"+ie;n.ensureSingle(ee,"path","textline").call(p.stroke,G.outsidetextfont.color).attr({"stroke-width":Math.min(2,G.outsidetextfont.size/8),d:ae,fill:"none"})})}function A(se,G,Y){var ee=Y[0],$=ee.cx,K=ee.cy,Q=ee.trace,ae=Q.type==="funnelarea";"_hasHoverLabel"in Q||(Q._hasHoverLabel=!1),"_hasHoverEvent"in Q||(Q._hasHoverEvent=!1),se.on("mouseover",function(ie){var oe=G._fullLayout,fe=G._fullData[Q.index];if(!(G._dragging||oe.hovermode===!1)){var ye=fe.hoverinfo;if(Array.isArray(ye)&&(ye=c.castHoverinfo({hoverinfo:[d.castOption(ye,ie.pts)],_module:Q._module},oe,0)),ye==="all"&&(ye="label+text+value+percent+name"),fe.hovertemplate||ye!=="none"&&ye!=="skip"&&ye){var ce=ie.rInscribed||0,me=$+ie.pxmid[0]*(1-ce),xe=K+ie.pxmid[1]*(1-ce),ke=oe.separators,Ae=[];if(ye&&ye.indexOf("label")!==-1&&Ae.push(ie.label),ie.text=d.castOption(fe.hovertext||fe.text,ie.pts),ye&&ye.indexOf("text")!==-1){var Oe=ie.text;n.isValidTextValue(Oe)&&Ae.push(Oe)}ie.value=ie.v,ie.valueLabel=d.formatPieValue(ie.v,ke),ye&&ye.indexOf("value")!==-1&&Ae.push(ie.valueLabel),ie.percent=ie.v/ee.vTotal,ie.percentLabel=d.formatPiePercent(ie.percent,ke),ye&&ye.indexOf("percent")!==-1&&Ae.push(ie.percentLabel);var He=fe.hoverlabel,Ge=He.font,_e=[];c.loneHover({trace:Q,x0:me-ce*ee.r,x1:me+ce*ee.r,y:xe,_x0:ae?$+ie.TL[0]:me-ce*ee.r,_x1:ae?$+ie.TR[0]:me+ce*ee.r,_y0:ae?K+ie.TL[1]:xe-ce*ee.r,_y1:ae?K+ie.BL[1]:xe+ce*ee.r,text:Ae.join("<br>"),name:fe.hovertemplate||ye.indexOf("name")!==-1?fe.name:void 0,idealAlign:ie.pxmid[0]<0?"left":"right",color:d.castOption(He.bgcolor,ie.pts)||ie.color,borderColor:d.castOption(He.bordercolor,ie.pts),fontFamily:d.castOption(Ge.family,ie.pts),fontSize:d.castOption(Ge.size,ie.pts),fontColor:d.castOption(Ge.color,ie.pts),nameLength:d.castOption(He.namelength,ie.pts),textAlign:d.castOption(He.align,ie.pts),hovertemplate:d.castOption(fe.hovertemplate,ie.pts),hovertemplateLabels:ie,eventData:[y(ie,fe)]},{container:oe._hoverlayer.node(),outerContainer:oe._paper.node(),gd:G,inOut_bbox:_e}),ie.bbox=_e[0],Q._hasHoverLabel=!0}Q._hasHoverEvent=!0,G.emit("plotly_hover",{points:[y(ie,fe)],event:l.event})}}),se.on("mouseout",function(ie){var oe=G._fullLayout,fe=G._fullData[Q.index],ye=l.select(this).datum();Q._hasHoverEvent&&(ie.originalEvent=l.event,G.emit("plotly_unhover",{points:[y(ye,fe)],event:l.event}),Q._hasHoverEvent=!1),Q._hasHoverLabel&&(c.loneUnhover(oe._hoverlayer.node()),Q._hasHoverLabel=!1)}),se.on("click",function(ie){var oe=G._fullLayout,fe=G._fullData[Q.index];G._dragging||oe.hovermode===!1||(G._hoverdata=[y(ie,fe)],c.click(G,l.event))})}function b(se,G,Y){var ee=d.castOption(se.outsidetextfont.color,G.pts)||d.castOption(se.textfont.color,G.pts)||Y.color,$=d.castOption(se.outsidetextfont.family,G.pts)||d.castOption(se.textfont.family,G.pts)||Y.family,K=d.castOption(se.outsidetextfont.size,G.pts)||d.castOption(se.textfont.size,G.pts)||Y.size;return{color:ee,family:$,size:K}}function S(se,G,Y){var ee=d.castOption(se.insidetextfont.color,G.pts);!ee&&se._input.textfont&&(ee=d.castOption(se._input.textfont.color,G.pts));var $=d.castOption(se.insidetextfont.family,G.pts)||d.castOption(se.textfont.family,G.pts)||Y.family,K=d.castOption(se.insidetextfont.size,G.pts)||d.castOption(se.textfont.size,G.pts)||Y.size;return{color:ee||p.contrast(G.color),family:$,size:K}}function w(se,G){for(var Y,ee,$=0;$<se.length;$++)if(Y=se[$][0],ee=Y.trace,ee.title.text){var K=ee.title.text;ee._meta&&(K=n.templateString(K,ee._meta));var Q=t.tester.append("text").attr("data-notex",1).text(K).call(t.font,ee.title.font).call(r.convertToTspans,G),ae=t.bBox(Q.node(),!0);Y.titleBox={width:ae.width,height:ae.height},Q.remove()}}function T(se,G,Y){var ee=Y.r||G.rpx1,$=G.rInscribed,K=G.startangle===G.stopangle;if(K)return{rCenter:1-$,scale:0,rotate:0,textPosAngle:0};var Q=G.ring,ae=Q===1&&Math.abs(G.startangle-G.stopangle)===Math.PI*2,ie=G.halfangle,oe=G.midangle,fe=Y.trace.insidetextorientation,ye=fe==="horizontal",ce=fe==="tangential",me=fe==="radial",xe=fe==="auto",ke=[],Ae;if(!xe){var Oe=function(Ne,De){if(_(G,Ne)){var Ve=Math.abs(Ne-G.startangle),dt=Math.abs(Ne-G.stopangle),Dt=Ve<dt?Ve:dt;De==="tan"?Ae=P(se,ee,Q,Dt,0):Ae=v(se,ee,Q,Dt,Math.PI/2),Ae.textPosAngle=Ne,ke.push(Ae)}},He;if(ye||ce){for(He=4;He>=-4;He-=2)Oe(Math.PI*He,"tan");for(He=4;He>=-4;He-=2)Oe(Math.PI*(He+1),"tan")}if(ye||me){for(He=4;He>=-4;He-=2)Oe(Math.PI*(He+1.5),"rad");for(He=4;He>=-4;He-=2)Oe(Math.PI*(He+.5),"rad")}}if(ae||xe||ye){var Ge=Math.sqrt(se.width*se.width+se.height*se.height);if(Ae={scale:$*ee*2/Ge,rCenter:1-$,rotate:0},Ae.textPosAngle=(G.startangle+G.stopangle)/2,Ae.scale>=1)return Ae;ke.push(Ae)}(xe||me)&&(Ae=v(se,ee,Q,ie,oe),Ae.textPosAngle=(G.startangle+G.stopangle)/2,ke.push(Ae)),(xe||ce)&&(Ae=P(se,ee,Q,ie,oe),Ae.textPosAngle=(G.startangle+G.stopangle)/2,ke.push(Ae));for(var _e=0,Ie=0,We=0;We<ke.length;We++){var et=ke[We].scale;if(Ie<et&&(Ie=et,_e=We),!xe&&Ie>=1)break}return ke[_e]}function _(se,G){var Y=se.startangle,ee=se.stopangle;return Y>G&&G>ee||Y<G&&G<ee}function v(se,G,Y,ee,$){G=Math.max(0,G-2*h);var K=se.width/se.height,Q=D(K,ee,G,Y);return{scale:Q*2/se.height,rCenter:M(K,Q/G),rotate:E($)}}function P(se,G,Y,ee,$){G=Math.max(0,G-2*h);var K=se.height/se.width,Q=D(K,ee,G,Y);return{scale:Q*2/se.width,rCenter:M(K,Q/G),rotate:E($+Math.PI/2)}}function M(se,G){return Math.cos(G)-se*G}function E(se){return(180/Math.PI*se+720)%180-90}function D(se,G,Y,ee){var $=se+1/(2*Math.tan(G));return Y*Math.min(1/(Math.sqrt($*$+.5)+$),ee/(Math.sqrt(se*se+ee/2)+se))}function N(se,G){return se.v===G.vTotal&&!G.trace.hole?1:Math.min(1/(1+1/Math.sin(se.halfangle)),se.ring/2)}function O(se,G){var Y=G.pxmid[0],ee=G.pxmid[1],$=se.width/2,K=se.height/2;return Y<0&&($*=-1),ee<0&&(K*=-1),{scale:1,rCenter:1,rotate:0,x:$+Math.abs(K)*($>0?1:-1)/2,y:K/(1+Y*Y/(ee*ee)),outside:!0}}function I(se){var G=Math.sqrt(se.titleBox.width*se.titleBox.width+se.titleBox.height*se.titleBox.height);return{x:se.cx,y:se.cy,scale:se.trace.hole*se.r*2/G,tx:0,ty:-se.titleBox.height/2+se.trace.title.font.size}}function F(se,G){var Y=1,ee=1,$,K=se.trace,Q={x:se.cx,y:se.cy},ae={tx:0,ty:0};ae.ty+=K.title.font.size,$=j(K),K.title.position.indexOf("top")!==-1?(Q.y-=(1+$)*se.r,ae.ty-=se.titleBox.height):K.title.position.indexOf("bottom")!==-1&&(Q.y+=(1+$)*se.r);var ie=V(se.r,se.trace.aspectratio),oe=G.w*(K.domain.x[1]-K.domain.x[0])/2;return K.title.position.indexOf("left")!==-1?(oe=oe+ie,Q.x-=(1+$)*ie,ae.tx+=se.titleBox.width/2):K.title.position.indexOf("center")!==-1?oe*=2:K.title.position.indexOf("right")!==-1&&(oe=oe+ie,Q.x+=(1+$)*ie,ae.tx-=se.titleBox.width/2),Y=oe/se.titleBox.width,ee=U(se,G)/se.titleBox.height,{x:Q.x,y:Q.y,scale:Math.min(Y,ee),tx:ae.tx,ty:ae.ty}}function V(se,G){return se/(G===void 0?1:G)}function U(se,G){var Y=se.trace,ee=G.h*(Y.domain.y[1]-Y.domain.y[0]);return Math.min(se.titleBox.height,ee/2)}function j(se){var G=se.pull;if(!G)return 0;var Y;if(Array.isArray(G))for(G=0,Y=0;Y<se.pull.length;Y++)se.pull[Y]>G&&(G=se.pull[Y]);return G}function Z(se,G){var Y,ee,$,K,Q,ae,ie,oe,fe,ye,ce,me,xe;function ke(Ge,_e){return Ge.pxmid[1]-_e.pxmid[1]}function Ae(Ge,_e){return _e.pxmid[1]-Ge.pxmid[1]}function Oe(Ge,_e){_e||(_e={});var Ie=_e.labelExtraY+(ee?_e.yLabelMax:_e.yLabelMin),We=ee?Ge.yLabelMin:Ge.yLabelMax,et=ee?Ge.yLabelMax:Ge.yLabelMin,Ne=Ge.cyFinal+Q(Ge.px0[1],Ge.px1[1]),De=Ie-We,Ve,dt,Dt,Gt,Mt,zt;if(De*ie>0&&(Ge.labelExtraY=De),!!Array.isArray(G.pull))for(dt=0;dt<ye.length;dt++)Dt=ye[dt],!(Dt===Ge||(d.castOption(G.pull,Ge.pts)||0)>=(d.castOption(G.pull,Dt.pts)||0))&&((Ge.pxmid[1]-Dt.pxmid[1])*ie>0?(Gt=Dt.cyFinal+Q(Dt.px0[1],Dt.px1[1]),De=Gt-We-Ge.labelExtraY,De*ie>0&&(Ge.labelExtraY+=De)):(et+Ge.labelExtraY-Ne)*ie>0&&(Ve=3*ae*Math.abs(dt-ye.indexOf(Ge)),Mt=Dt.cxFinal+K(Dt.px0[0],Dt.px1[0]),zt=Mt+Ve-(Ge.cxFinal+Ge.pxmid[0])-Ge.labelExtraX,zt*ae>0&&(Ge.labelExtraX+=zt)))}for(ee=0;ee<2;ee++)for($=ee?ke:Ae,Q=ee?Math.max:Math.min,ie=ee?1:-1,Y=0;Y<2;Y++){for(K=Y?Math.max:Math.min,ae=Y?1:-1,oe=se[ee][Y],oe.sort($),fe=se[1-ee][Y],ye=fe.concat(oe),me=[],ce=0;ce<oe.length;ce++)oe[ce].yLabelMid!==void 0&&me.push(oe[ce]);for(xe=!1,ce=0;ee&&ce<fe.length;ce++)if(fe[ce].yLabelMid!==void 0){xe=fe[ce];break}for(ce=0;ce<me.length;ce++){var He=ce&&me[ce-1];xe&&!ce&&(He=xe),Oe(me[ce],He)}}}function te(se,G){for(var Y=[],ee=0;ee<se.length;ee++){var $=se[ee][0],K=$.trace,Q=K.domain,ae=G.w*(Q.x[1]-Q.x[0]),ie=G.h*(Q.y[1]-Q.y[0]);K.title.text&&K.title.position!=="middle center"&&(ie-=U($,G));var oe=ae/2,fe=ie/2;K.type==="funnelarea"&&!K.scalegroup&&(fe/=K.aspectratio),$.r=Math.min(oe,fe)/(1+j(K)),$.cx=G.l+G.w*(K.domain.x[1]+K.domain.x[0])/2,$.cy=G.t+G.h*(1-K.domain.y[0])-ie/2,K.title.text&&K.title.position.indexOf("bottom")!==-1&&($.cy-=U($,G)),K.scalegroup&&Y.indexOf(K.scalegroup)===-1&&Y.push(K.scalegroup)}re(se,Y)}function re(se,G){for(var Y,ee,$,K=0;K<G.length;K++){var Q=1/0,ae=G[K];for(ee=0;ee<se.length;ee++)if(Y=se[ee][0],$=Y.trace,$.scalegroup===ae){var ie;if($.type==="pie")ie=Y.r*Y.r;else if($.type==="funnelarea"){var oe,fe;$.aspectratio>1?(oe=Y.r,fe=oe/$.aspectratio):(fe=Y.r,oe=fe*$.aspectratio),oe*=(1+$.baseratio)/2,ie=oe*fe}Q=Math.min(Q,ie/Y.vTotal)}for(ee=0;ee<se.length;ee++)if(Y=se[ee][0],$=Y.trace,$.scalegroup===ae){var ye=Q*Y.vTotal;$.type==="funnelarea"&&(ye/=(1+$.baseratio)/2,ye/=$.aspectratio),Y.r=Math.sqrt(ye)}}}function W(se){var G=se[0],Y=G.r,ee=G.trace,$=d.getRotationAngle(ee.rotation),K=2*Math.PI/G.vTotal,Q="px0",ae="px1",ie,oe,fe;if(ee.direction==="counterclockwise"){for(ie=0;ie<se.length&&se[ie].hidden;ie++);if(ie===se.length)return;$+=K*se[ie].v,K*=-1,Q="px1",ae="px0"}for(fe=J(Y,$),ie=0;ie<se.length;ie++)oe=se[ie],!oe.hidden&&(oe[Q]=fe,oe.startangle=$,$+=K*oe.v/2,oe.pxmid=J(Y,$),oe.midangle=$,$+=K*oe.v/2,fe=J(Y,$),oe.stopangle=$,oe[ae]=fe,oe.largeArc=oe.v>G.vTotal/2?1:0,oe.halfangle=Math.PI*Math.min(oe.v/G.vTotal,.5),oe.ring=1-ee.hole,oe.rInscribed=N(oe,G))}function J(se,G){return[se*Math.sin(G),-se*Math.cos(G)]}function le(se,G,Y){var ee=se._fullLayout,$=Y.trace,K=$.texttemplate,Q=$.textinfo;if(!K&&Q&&Q!=="none"){var ae=Q.split("+"),ie=function(_e){return ae.indexOf(_e)!==-1},oe=ie("label"),fe=ie("text"),ye=ie("value"),ce=ie("percent"),me=ee.separators,xe;if(xe=oe?[G.label]:[],fe){var ke=d.getFirstFilled($.text,G.pts);m(ke)&&xe.push(ke)}ye&&xe.push(d.formatPieValue(G.v,me)),ce&&xe.push(d.formatPiePercent(G.v/Y.vTotal,me)),G.text=xe.join("<br>")}function Ae(_e){return{label:_e.label,value:_e.v,valueLabel:d.formatPieValue(_e.v,ee.separators),percent:_e.v/Y.vTotal,percentLabel:d.formatPiePercent(_e.v/Y.vTotal,ee.separators),color:_e.color,text:_e.text,customdata:n.castOption($,_e.i,"customdata")}}if(K){var Oe=n.castOption($,G.i,"texttemplate");if(!Oe)G.text="";else{var He=Ae(G),Ge=d.getFirstFilled($.text,G.pts);(m(Ge)||Ge==="")&&(He.text=Ge),G.text=n.texttemplateString(Oe,He,se._fullLayout._d3locale,He,$._meta||{})}}}function ue(se,G){var Y=se.rotate*Math.PI/180,ee=Math.cos(Y),$=Math.sin(Y),K=(G.left+G.right)/2,Q=(G.top+G.bottom)/2;se.textX=K*ee-Q*$,se.textY=K*$+Q*ee,se.noCenter=!0}k.exports={plot:g,formatSliceLabel:le,transformInsideText:T,determineInsideTextFont:S,positionTitleOutside:F,prerenderTitles:w,layoutAreas:te,attachFxHandlers:A,computeTransform:ue}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../bar/constants":650,"../bar/uniform_text":664,"./event_data":904,"./helpers":905,"@plotly/d3":58}],910:[function(e,k,z){var l=e("@plotly/d3"),o=e("./style_one"),c=e("../bar/uniform_text").resizeText;k.exports=function(t){var n=t._fullLayout._pielayer.selectAll(".trace");c(t,n,"pie"),n.each(function(a){var i=a[0],r=i.trace,f=l.select(this);f.style({opacity:r.opacity}),f.selectAll("path.surface").each(function(u){l.select(this).call(o,u,r)})})}},{"../bar/uniform_text":664,"./style_one":911,"@plotly/d3":58}],911:[function(e,k,z){var l=e("../../components/color"),o=e("./helpers").castOption;k.exports=function(p,t,n){var a=n.marker.line,i=o(a.color,t.pts)||l.defaultLine,r=o(a.width,t.pts)||0;p.style("stroke-width",r).call(l.fill,t.color).call(l.stroke,i)}},{"../../components/color":366,"./helpers":905}],912:[function(e,k,z){var l=e("../scatter/attributes");k.exports={x:l.x,y:l.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:l.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":926}],913:[function(e,k,z){var l=e("../../../stackgl_modules").gl_pointcloud2d,o=e("../../lib/str2rgbarray"),c=e("../../plots/cartesian/autorange").findExtremes,p=e("../scatter/get_trace_color");function t(i,r){this.scene=i,this.uid=r,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=l(i.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var n=t.prototype;n.handlePick=function(i){var r=this.idToIndex[i.pointId];return{trace:this,dataCoord:i.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[r*2],this.pickXYData[r*2+1]]:[this.pickXData[r],this.pickYData[r]],textLabel:Array.isArray(this.textLabels)?this.textLabels[r]:this.textLabels,color:this.color,name:this.name,pointIndex:r,hoverinfo:this.hoverinfo}},n.update=function(i){this.index=i.index,this.textLabels=i.text,this.name=i.name,this.hoverinfo=i.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(i),this.color=p(i,{})},n.updateFast=function(i){var r=this.xData=this.pickXData=i.x,f=this.yData=this.pickYData=i.y,u=this.pickXYData=i.xy,s=i.xbounds&&i.ybounds,h=i.indices,d,y,m,g=this.bounds,x,A,b;if(u){if(m=u,d=u.length>>>1,s)g[0]=i.xbounds[0],g[2]=i.xbounds[1],g[1]=i.ybounds[0],g[3]=i.ybounds[1];else for(b=0;b<d;b++)x=m[b*2],A=m[b*2+1],x<g[0]&&(g[0]=x),x>g[2]&&(g[2]=x),A<g[1]&&(g[1]=A),A>g[3]&&(g[3]=A);if(h)y=h;else for(y=new Int32Array(d),b=0;b<d;b++)y[b]=b}else for(d=r.length,m=new Float32Array(2*d),y=new Int32Array(d),b=0;b<d;b++)x=r[b],A=f[b],y[b]=b,m[b*2]=x,m[b*2+1]=A,x<g[0]&&(g[0]=x),x>g[2]&&(g[2]=x),A<g[1]&&(g[1]=A),A>g[3]&&(g[3]=A);this.idToIndex=y,this.pointcloudOptions.idToIndex=y,this.pointcloudOptions.positions=m;var S=o(i.marker.color),w=o(i.marker.border.color),T=i.opacity*i.marker.opacity;S[3]*=T,this.pointcloudOptions.color=S;var _=i.marker.blend;if(_===null){var v=100;_=r.length<v||f.length<v}this.pointcloudOptions.blend=_,w[3]*=T,this.pointcloudOptions.borderColor=w;var P=i.marker.sizemin,M=Math.max(i.marker.sizemax,i.marker.sizemin);this.pointcloudOptions.sizeMin=P,this.pointcloudOptions.sizeMax=M,this.pointcloudOptions.areaRatio=i.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var E=this.scene.xaxis,D=this.scene.yaxis,N=M/2||.5;i._extremes[E._id]=c(E,[g[0],g[2]],{ppad:N}),i._extremes[D._id]=c(D,[g[1],g[3]],{ppad:N})},n.dispose=function(){this.pointcloud.dispose()};function a(i,r){var f=new t(i,r.uid);return f.update(r),f}k.exports=a},{"../../../stackgl_modules":1120,"../../lib/str2rgbarray":528,"../../plots/cartesian/autorange":553,"../scatter/get_trace_color":936}],914:[function(e,k,z){var l=e("../../lib"),o=e("./attributes");k.exports=function(p,t,n){function a(i,r){return l.coerce(p,t,o,i,r)}a("x"),a("y"),a("xbounds"),a("ybounds"),p.xy&&p.xy instanceof Float32Array&&(t.xy=p.xy),p.indices&&p.indices instanceof Int32Array&&(t.indices=p.indices),a("text"),a("marker.color",n),a("marker.opacity"),a("marker.blend"),a("marker.sizemin"),a("marker.sizemax"),a("marker.border.color",n),a("marker.border.arearatio"),t._length=null}},{"../../lib":503,"./attributes":912}],915:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("../scatter3d/calc"),plot:e("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:e("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":596,"../scatter3d/calc":955,"./attributes":912,"./convert":913,"./defaults":914}],916:[function(e,k,z){var l=e("../../plots/font_attributes"),o=e("../../plots/attributes"),c=e("../../components/color/attributes"),p=e("../../components/fx/attributes"),t=e("../../plots/domain").attributes,n=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../components/colorscale/attributes"),i=e("../../plot_api/plot_template").templatedArray,r=e("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,f=e("../../lib/extend").extendFlat,u=e("../../plot_api/edit_types").overrideAll,s=k.exports=u({hoverinfo:f({},o.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:p.hoverlabel,domain:t({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:r("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:l({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:c.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:p.hoverlabel,hovertemplate:n({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:c.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:p.hoverlabel,hovertemplate:n({},{keys:["value","label"]}),colorscales:i("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:f(a().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");s.transforms=void 0},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../components/fx/attributes":397,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],917:[function(e,k,z){var l=e("../../plot_api/edit_types").overrideAll,o=e("../../plots/get_data").getModuleCalcData,c=e("./plot"),p=e("../../components/fx/layout_attributes"),t=e("../../lib/setcursor"),n=e("../../components/dragelement"),a=e("../../plots/cartesian/select").prepSelect,i=e("../../lib"),r=e("../../registry"),f="sankey";z.name=f,z.baseLayoutAttrOverrides=l({hoverlabel:p.hoverlabel},"plot","nested"),z.plot=function(s){var h=o(s.calcdata,f)[0];c(s,h),z.updateFx(s)},z.clean=function(s,h,d,y){var m=y._has&&y._has(f),g=h._has&&h._has(f);m&&!g&&(y._paperdiv.selectAll(".sankey").remove(),y._paperdiv.selectAll(".bgsankey").remove())},z.updateFx=function(s){for(var h=0;h<s._fullData.length;h++)u(s,h)};function u(s,h){var d=s._fullData[h],y=s._fullLayout,m=y.dragmode,g=y.dragmode==="pan"?"move":"crosshair",x=d._bgRect;if(!(m==="pan"||m==="zoom")){t(x,g);var A={_id:"x",c2p:i.identity,_offset:d._sankey.translateX,_length:d._sankey.width},b={_id:"y",c2p:i.identity,_offset:d._sankey.translateY,_length:d._sankey.height},S={gd:s,element:x.node(),plotinfo:{id:h,xaxis:A,yaxis:b,fillRangeItems:i.noop},subplot:h,xaxes:[A],yaxes:[b],doneFnCompleted:function(w){var T=s._fullData[h],_,v=T.node.groups.slice(),P=[];function M(O){for(var I=T._sankey.graph.nodes,F=0;F<I.length;F++)if(I[F].pointNumber===O)return I[F]}for(var E=0;E<w.length;E++){var D=M(w[E].pointNumber);if(!!D)if(D.group){for(var N=0;N<D.childrenNodes.length;N++)P.push(D.childrenNodes[N].pointNumber);v[D.pointNumber-T.node._count]=!1}else P.push(D.pointNumber)}_=v.filter(Boolean).concat([P]),r.call("_guiRestyle",s,{"node.groups":[_]},h)}};S.prepFn=function(w,T,_){a(w,T,_,S,m)},n.init(S)}}},{"../../components/dragelement":385,"../../components/fx/layout_attributes":407,"../../lib":503,"../../lib/setcursor":524,"../../plot_api/edit_types":536,"../../plots/cartesian/select":575,"../../plots/get_data":593,"../../registry":638,"./plot":922}],918:[function(e,k,z){var l=e("strongly-connected-components"),o=e("../../lib"),c=e("../../lib/gup").wrap,p=o.isArrayOrTypedArray,t=o.isIndex,n=e("../../components/colorscale");function a(r){var f=r.node,u=r.link,s=[],h=p(u.color),d=p(u.customdata),y={},m={},g=u.colorscales.length,x;for(x=0;x<g;x++){var A=u.colorscales[x],b=n.extractScale(A,{cLetter:"c"}),S=n.makeColorScaleFunc(b);m[A.label]=S}var w=0;for(x=0;x<u.value.length;x++)u.source[x]>w&&(w=u.source[x]),u.target[x]>w&&(w=u.target[x]);var T=w+1;r.node._count=T;var _,v=r.node.groups,P={};for(x=0;x<v.length;x++){var M=v[x];for(_=0;_<M.length;_++){var E=M[_],D=T+x;P.hasOwnProperty(E)?o.warn("Node "+E+" is already part of a group."):P[E]=D}}var N={source:[],target:[]};for(x=0;x<u.value.length;x++){var O=u.value[x],I=u.source[x],F=u.target[x];if(!!(O>0&&t(I,T)&&t(F,T))&&!(P.hasOwnProperty(I)&&P.hasOwnProperty(F)&&P[I]===P[F])){P.hasOwnProperty(F)&&(F=P[F]),P.hasOwnProperty(I)&&(I=P[I]),I=+I,F=+F,y[I]=y[F]=!0;var V="";u.label&&u.label[x]&&(V=u.label[x]);var U=null;V&&m.hasOwnProperty(V)&&(U=m[V]),s.push({pointNumber:x,label:V,color:h?u.color[x]:u.color,customdata:d?u.customdata[x]:u.customdata,concentrationscale:U,source:I,target:F,value:+O}),N.source.push(I),N.target.push(F)}}var j=T+v.length,Z=p(f.color),te=p(f.customdata),re=[];for(x=0;x<j;x++)if(!!y[x]){var W=f.label[x];re.push({group:x>T-1,childrenNodes:[],pointNumber:x,label:W,color:Z?f.color[x]:f.color,customdata:te?f.customdata[x]:f.customdata})}var J=!1;return i(j,N.source,N.target)&&(J=!0),{circular:J,links:s,nodes:re,groups:v,groupLookup:P}}function i(r,f,u){for(var s=o.init2dArray(r,0),h=0;h<Math.min(f.length,u.length);h++)if(o.isIndex(f[h],r)&&o.isIndex(u[h],r)){if(f[h]===u[h])return!0;s[f[h]].push(u[h])}var d=l(s);return d.components.some(function(y){return y.length>1})}k.exports=function(f,u){var s=a(u);return c({circular:s.circular,_nodes:s.nodes,_links:s.links,_groups:s.groups,_groupLookup:s.groupLookup})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500,"strongly-connected-components":306}],919:[function(e,k,z){k.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],920:[function(e,k,z){var l=e("../../lib"),o=e("./attributes"),c=e("../../components/color"),p=e("tinycolor2"),t=e("../../plots/domain").defaults,n=e("../../components/fx/hoverlabel_defaults"),a=e("../../plot_api/plot_template"),i=e("../../plots/array_container_defaults");k.exports=function(u,s,h,d){function y(M,E){return l.coerce(u,s,o,M,E)}var m=l.extendDeep(d.hoverlabel,u.hoverlabel),g=u.node,x=a.newContainer(s,"node");function A(M,E){return l.coerce(g,x,o.node,M,E)}A("label"),A("groups"),A("x"),A("y"),A("pad"),A("thickness"),A("line.color"),A("line.width"),A("hoverinfo",u.hoverinfo),n(g,x,A,m),A("hovertemplate");var b=d.colorway,S=function(M){return b[M%b.length]};A("color",x.label.map(function(M,E){return c.addOpacity(S(E),.8)})),A("customdata");var w=u.link||{},T=a.newContainer(s,"link");function _(M,E){return l.coerce(w,T,o.link,M,E)}_("label"),_("source"),_("target"),_("value"),_("line.color"),_("line.width"),_("hoverinfo",u.hoverinfo),n(w,T,_,m),_("hovertemplate");var v=p(d.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";_("color",l.repeat(v,T.value.length)),_("customdata"),i(w,T,{name:"colorscales",handleItemDefaults:r}),t(s,d,y),y("orientation"),y("valueformat"),y("valuesuffix");var P;x.x.length&&x.y.length&&(P="freeform"),y("arrangement",P),l.coerceFont(y,"textfont",l.extendFlat({},d.font)),s._length=null};function r(f,u){function s(h,d){return l.coerce(f,u,o.link.colorscales,h,d)}s("label"),s("cmin"),s("cmax"),s("colorscale")}},{"../../components/color":366,"../../components/fx/hoverlabel_defaults":404,"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/domain":584,"./attributes":916,tinycolor2:312}],921:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),moduleType:"trace",name:"sankey",basePlotModule:e("./base_plot"),selectPoints:e("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":916,"./base_plot":917,"./calc":918,"./defaults":920,"./plot":922,"./select.js":924}],922:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../lib"),c=o.numberFormat,p=e("./render"),t=e("../../components/fx"),n=e("../../components/color"),a=e("./constants").cn,i=o._;function r(b){return b!==""}function f(b,S){return b.filter(function(w){return w.key===S.traceId})}function u(b,S){l.select(b).select("path").style("fill-opacity",S),l.select(b).select("rect").style("fill-opacity",S)}function s(b){l.select(b).select("text.name").style("fill","black")}function h(b){return function(S){return b.node.sourceLinks.indexOf(S.link)!==-1||b.node.targetLinks.indexOf(S.link)!==-1}}function d(b){return function(S){return S.node.sourceLinks.indexOf(b.link)!==-1||S.node.targetLinks.indexOf(b.link)!==-1}}function y(b,S,w){S&&w&&f(w,S).selectAll("."+a.sankeyLink).filter(h(S)).call(g.bind(0,S,w,!1))}function m(b,S,w){S&&w&&f(w,S).selectAll("."+a.sankeyLink).filter(h(S)).call(x.bind(0,S,w,!1))}function g(b,S,w,T){var _=T.datum().link.label;T.style("fill-opacity",function(v){if(!v.link.concentrationscale)return .4}),_&&f(S,b).selectAll("."+a.sankeyLink).filter(function(v){return v.link.label===_}).style("fill-opacity",function(v){if(!v.link.concentrationscale)return .4}),w&&f(S,b).selectAll("."+a.sankeyNode).filter(d(b)).call(y)}function x(b,S,w,T){var _=T.datum().link.label;T.style("fill-opacity",function(v){return v.tinyColorAlpha}),_&&f(S,b).selectAll("."+a.sankeyLink).filter(function(v){return v.link.label===_}).style("fill-opacity",function(v){return v.tinyColorAlpha}),w&&f(S,b).selectAll(a.sankeyNode).filter(d(b)).call(m)}function A(b,S){var w=b.hoverlabel||{},T=o.nestedProperty(w,S).get();return Array.isArray(T)?!1:T}k.exports=function(S,w){for(var T=S._fullLayout,_=T._paper,v=T._size,P=0;P<S._fullData.length;P++)if(!!S._fullData[P].visible&&S._fullData[P].type===a.sankey&&!S._fullData[P]._viewInitial){var M=S._fullData[P].node;S._fullData[P]._viewInitial={node:{groups:M.groups.slice(),x:M.x.slice(),y:M.y.slice()}}}var E=function(J,le){var ue=le.link;ue.originalEvent=l.event,S._hoverdata=[ue],t.click(S,{target:!0})},D=function(J,le,ue){S._fullLayout.hovermode!==!1&&(l.select(J).call(g.bind(0,le,ue,!0)),le.link.trace.link.hoverinfo!=="skip"&&(le.link.fullData=le.link.trace,S.emit("plotly_hover",{event:l.event,points:[le.link]})))},N=i(S,"source:")+" ",O=i(S,"target:")+" ",I=i(S,"concentration:")+" ",F=i(S,"incoming flow count:")+" ",V=i(S,"outgoing flow count:")+" ",U=function(J,le){if(S._fullLayout.hovermode===!1)return;var ue=le.link.trace.link;if(ue.hoverinfo==="none"||ue.hoverinfo==="skip")return;var se=[];function G(ie){var oe,fe;ie.circular?(oe=(ie.circularPathData.leftInnerExtent+ie.circularPathData.rightInnerExtent)/2,fe=ie.circularPathData.verticalFullExtent):(oe=(ie.source.x1+ie.target.x0)/2,fe=(ie.y0+ie.y1)/2);var ye=[oe,fe];return ie.trace.orientation==="v"&&ye.reverse(),ye[0]+=le.parent.translateX,ye[1]+=le.parent.translateY,ye}for(var Y=0,ee=0;ee<le.flow.links.length;ee++){var $=le.flow.links[ee];if(!(S._fullLayout.hovermode==="closest"&&le.link.pointNumber!==$.pointNumber)){le.link.pointNumber===$.pointNumber&&(Y=ee),$.fullData=$.trace,ue=le.link.trace.link;var K=G($),Q={valueLabel:c(le.valueFormat)($.value)+le.valueSuffix};se.push({x:K[0],y:K[1],name:Q.valueLabel,text:[$.label||"",N+$.source.label,O+$.target.label,$.concentrationscale?I+c("%0.2f")($.flow.labelConcentration):""].filter(r).join("<br>"),color:A(ue,"bgcolor")||n.addOpacity($.color,1),borderColor:A(ue,"bordercolor"),fontFamily:A(ue,"font.family"),fontSize:A(ue,"font.size"),fontColor:A(ue,"font.color"),nameLength:A(ue,"namelength"),textAlign:A(ue,"align"),idealAlign:l.event.x<K[0]?"right":"left",hovertemplate:ue.hovertemplate,hovertemplateLabels:Q,eventData:[$]})}}var ae=t.loneHover(se,{container:T._hoverlayer.node(),outerContainer:T._paper.node(),gd:S,anchorIndex:Y});ae.each(function(){var ie=this;le.link.concentrationscale||u(ie,.65),s(ie)})},j=function(J,le,ue){S._fullLayout.hovermode!==!1&&(l.select(J).call(x.bind(0,le,ue,!0)),le.link.trace.link.hoverinfo!=="skip"&&(le.link.fullData=le.link.trace,S.emit("plotly_unhover",{event:l.event,points:[le.link]})),t.loneUnhover(T._hoverlayer.node()))},Z=function(J,le,ue){var se=le.node;se.originalEvent=l.event,S._hoverdata=[se],l.select(J).call(m,le,ue),t.click(S,{target:!0})},te=function(J,le,ue){S._fullLayout.hovermode!==!1&&(l.select(J).call(y,le,ue),le.node.trace.node.hoverinfo!=="skip"&&(le.node.fullData=le.node.trace,S.emit("plotly_hover",{event:l.event,points:[le.node]})))},re=function(J,le){if(S._fullLayout.hovermode!==!1){var ue=le.node.trace.node;if(!(ue.hoverinfo==="none"||ue.hoverinfo==="skip")){var se=l.select(J).select("."+a.nodeRect),G=S._fullLayout._paperdiv.node().getBoundingClientRect(),Y=se.node().getBoundingClientRect(),ee=Y.left-2-G.left,$=Y.right+2-G.left,K=Y.top+Y.height/4-G.top,Q={valueLabel:c(le.valueFormat)(le.node.value)+le.valueSuffix};le.node.fullData=le.node.trace,S._fullLayout._calcInverseTransform(S);var ae=S._fullLayout._invScaleX,ie=S._fullLayout._invScaleY,oe=t.loneHover({x0:ae*ee,x1:ae*$,y:ie*K,name:c(le.valueFormat)(le.node.value)+le.valueSuffix,text:[le.node.label,F+le.node.targetLinks.length,V+le.node.sourceLinks.length].filter(r).join("<br>"),color:A(ue,"bgcolor")||le.tinyColorHue,borderColor:A(ue,"bordercolor"),fontFamily:A(ue,"font.family"),fontSize:A(ue,"font.size"),fontColor:A(ue,"font.color"),nameLength:A(ue,"namelength"),textAlign:A(ue,"align"),idealAlign:"left",hovertemplate:ue.hovertemplate,hovertemplateLabels:Q,eventData:[le.node]},{container:T._hoverlayer.node(),outerContainer:T._paper.node(),gd:S});u(oe,.85),s(oe)}}},W=function(J,le,ue){S._fullLayout.hovermode!==!1&&(l.select(J).call(m,le,ue),le.node.trace.node.hoverinfo!=="skip"&&(le.node.fullData=le.node.trace,S.emit("plotly_unhover",{event:l.event,points:[le.node]})),t.loneUnhover(T._hoverlayer.node()))};p(S,_,w,{width:v.w,height:v.h,margin:{t:v.t,r:v.r,b:v.b,l:v.l}},{linkEvents:{hover:D,follow:U,unhover:j,select:E},nodeEvents:{hover:te,follow:re,unhover:W,select:Z}})}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"./constants":919,"./render":923,"@plotly/d3":58}],923:[function(e,k,z){var l=e("d3-force"),o=e("d3-interpolate").interpolateNumber,c=e("@plotly/d3"),p=e("@plotly/d3-sankey"),t=e("@plotly/d3-sankey-circular"),n=e("./constants"),a=e("tinycolor2"),i=e("../../components/color"),r=e("../../components/drawing"),f=e("../../lib"),u=f.strTranslate,s=f.strRotate,h=e("../../lib/gup"),d=h.keyFun,y=h.repeat,m=h.unwrap,g=e("../../lib/svg_text_utils"),x=e("../../registry"),A=e("../../constants/alignment"),b=A.CAP_SHIFT,S=A.LINE_SPACING,w=3;function T(G,Y,ee){var $=m(Y),K=$.trace,Q=K.domain,ae=K.orientation==="h",ie=K.node.pad,oe=K.node.thickness,fe=G.width*(Q.x[1]-Q.x[0]),ye=G.height*(Q.y[1]-Q.y[0]),ce=$._nodes,me=$._links,xe=$.circular,ke;xe?ke=t.sankeyCircular().circularLinkGap(0):ke=p.sankey(),ke.iterations(n.sankeyIterations).size(ae?[fe,ye]:[ye,fe]).nodeWidth(oe).nodePadding(ie).nodeId(function(Mt){return Mt.pointNumber}).nodes(ce).links(me);var Ae=ke();ke.nodePadding()<ie&&f.warn("node.pad was reduced to ",ke.nodePadding()," to fit within the figure.");var Oe,He,Ge;for(var _e in $._groupLookup){var Ie=parseInt($._groupLookup[_e]),We;for(Oe=0;Oe<Ae.nodes.length;Oe++)if(Ae.nodes[Oe].pointNumber===Ie){We=Ae.nodes[Oe];break}if(!!We){var et={pointNumber:parseInt(_e),x0:We.x0,x1:We.x1,y0:We.y0,y1:We.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};Ae.nodes.unshift(et),We.childrenNodes.unshift(et)}}function Ne(){for(Oe=0;Oe<Ae.nodes.length;Oe++){var Mt=Ae.nodes[Oe],zt={},Nt,Et;for(He=0;He<Mt.targetLinks.length;He++)Et=Mt.targetLinks[He],Nt=Et.source.pointNumber+":"+Et.target.pointNumber,zt.hasOwnProperty(Nt)||(zt[Nt]=[]),zt[Nt].push(Et);var At=Object.keys(zt);for(He=0;He<At.length;He++){Nt=At[He];var it=zt[Nt],ht=0,$e={};for(Ge=0;Ge<it.length;Ge++)Et=it[Ge],$e[Et.label]||($e[Et.label]=0),$e[Et.label]+=Et.value,ht+=Et.value;for(Ge=0;Ge<it.length;Ge++)Et=it[Ge],Et.flow={value:ht,labelConcentration:$e[Et.label]/ht,concentration:Et.value/ht,links:it},Et.concentrationscale&&(Et.color=a(Et.concentrationscale(Et.flow.labelConcentration)))}var Ee=0;for(He=0;He<Mt.sourceLinks.length;He++)Ee+=Mt.sourceLinks[He].value;for(He=0;He<Mt.sourceLinks.length;He++)Et=Mt.sourceLinks[He],Et.concentrationOut=Et.value/Ee;var Xe=0;for(He=0;He<Mt.targetLinks.length;He++)Xe+=Mt.targetLinks[He].value;for(He=0;He<Mt.targetLinks.length;He++)Et=Mt.targetLinks[He],Et.concenrationIn=Et.value/Xe}}Ne();function De(Mt){Mt.forEach(function(zt){var Nt,Et,At=0,it=zt.length,ht;for(zt.sort(function($e,Ee){return $e.y0-Ee.y0}),ht=0;ht<it;++ht)Nt=zt[ht],Nt.y0>=At||(Et=At-Nt.y0,Et>1e-6&&(Nt.y0+=Et,Nt.y1+=Et)),At=Nt.y1+ie})}function Ve(Mt){var zt=Mt.map(function(Ee,Xe){return{x0:Ee.x0,index:Xe}}).sort(function(Ee,Xe){return Ee.x0-Xe.x0}),Nt=[],Et=-1,At,it=-1/0,ht;for(Oe=0;Oe<zt.length;Oe++){var $e=Mt[zt[Oe].index];$e.x0>it+oe&&(Et+=1,At=$e.x0),it=$e.x0,Nt[Et]||(Nt[Et]=[]),Nt[Et].push($e),ht=At-$e.x0,$e.x0+=ht,$e.x1+=ht}return Nt}if(K.node.x.length&&K.node.y.length){for(Oe=0;Oe<Math.min(K.node.x.length,K.node.y.length,Ae.nodes.length);Oe++)if(K.node.x[Oe]&&K.node.y[Oe]){var dt=[K.node.x[Oe]*fe,K.node.y[Oe]*ye];Ae.nodes[Oe].x0=dt[0]-oe/2,Ae.nodes[Oe].x1=dt[0]+oe/2;var Dt=Ae.nodes[Oe].y1-Ae.nodes[Oe].y0;Ae.nodes[Oe].y0=dt[1]-Dt/2,Ae.nodes[Oe].y1=dt[1]+Dt/2}if(K.arrangement==="snap"){ce=Ae.nodes;var Gt=Ve(ce);De(Gt)}ke.update(Ae)}return{circular:xe,key:ee,trace:K,guid:f.randstr(),horizontal:ae,width:fe,height:ye,nodePad:K.node.pad,nodeLineColor:K.node.line.color,nodeLineWidth:K.node.line.width,linkLineColor:K.link.line.color,linkLineWidth:K.link.line.width,valueFormat:K.valueformat,valueSuffix:K.valuesuffix,textFont:K.textfont,translateX:Q.x[0]*G.width+G.margin.l,translateY:G.height-Q.y[1]*G.height+G.margin.t,dragParallel:ae?ye:fe,dragPerpendicular:ae?fe:ye,arrangement:K.arrangement,sankey:ke,graph:Ae,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function _(G,Y,ee){var $=a(Y.color),K=Y.source.label+"|"+Y.target.label,Q=K+"__"+ee;return Y.trace=G.trace,Y.curveNumber=G.trace.index,{circular:G.circular,key:Q,traceId:G.key,pointNumber:Y.pointNumber,link:Y,tinyColorHue:i.tinyRGB($),tinyColorAlpha:$.getAlpha(),linkPath:P,linkLineColor:G.linkLineColor,linkLineWidth:G.linkLineWidth,valueFormat:G.valueFormat,valueSuffix:G.valueSuffix,sankey:G.sankey,parent:G,interactionState:G.interactionState,flow:Y.flow}}function v(G){var Y="",ee=G.width/2,$=G.circularPathData;return G.circularLinkType==="top"?Y="M "+$.targetX+" "+($.targetY+ee)+" L"+$.rightInnerExtent+" "+($.targetY+ee)+"A"+($.rightLargeArcRadius+ee)+" "+($.rightSmallArcRadius+ee)+" 0 0 1 "+($.rightFullExtent-ee)+" "+($.targetY-$.rightSmallArcRadius)+"L"+($.rightFullExtent-ee)+" "+$.verticalRightInnerExtent+"A"+($.rightLargeArcRadius+ee)+" "+($.rightLargeArcRadius+ee)+" 0 0 1 "+$.rightInnerExtent+" "+($.verticalFullExtent-ee)+"L"+$.leftInnerExtent+" "+($.verticalFullExtent-ee)+"A"+($.leftLargeArcRadius+ee)+" "+($.leftLargeArcRadius+ee)+" 0 0 1 "+($.leftFullExtent+ee)+" "+$.verticalLeftInnerExtent+"L"+($.leftFullExtent+ee)+" "+($.sourceY-$.leftSmallArcRadius)+"A"+($.leftLargeArcRadius+ee)+" "+($.leftSmallArcRadius+ee)+" 0 0 1 "+$.leftInnerExtent+" "+($.sourceY+ee)+"L"+$.sourceX+" "+($.sourceY+ee)+"L"+$.sourceX+" "+($.sourceY-ee)+"L"+$.leftInnerExtent+" "+($.sourceY-ee)+"A"+($.leftLargeArcRadius-ee)+" "+($.leftSmallArcRadius-ee)+" 0 0 0 "+($.leftFullExtent-ee)+" "+($.sourceY-$.leftSmallArcRadius)+"L"+($.leftFullExtent-ee)+" "+$.verticalLeftInnerExtent+"A"+($.leftLargeArcRadius-ee)+" "+($.leftLargeArcRadius-ee)+" 0 0 0 "+$.leftInnerExtent+" "+($.verticalFullExtent+ee)+"L"+$.rightInnerExtent+" "+($.verticalFullExtent+ee)+"A"+($.rightLargeArcRadius-ee)+" "+($.rightLargeArcRadius-ee)+" 0 0 0 "+($.rightFullExtent+ee)+" "+$.verticalRightInnerExtent+"L"+($.rightFullExtent+ee)+" "+($.targetY-$.rightSmallArcRadius)+"A"+($.rightLargeArcRadius-ee)+" "+($.rightSmallArcRadius-ee)+" 0 0 0 "+$.rightInnerExtent+" "+($.targetY-ee)+"L"+$.targetX+" "+($.targetY-ee)+"Z":Y="M "+$.targetX+" "+($.targetY-ee)+" L"+$.rightInnerExtent+" "+($.targetY-ee)+"A"+($.rightLargeArcRadius+ee)+" "+($.rightSmallArcRadius+ee)+" 0 0 0 "+($.rightFullExtent-ee)+" "+($.targetY+$.rightSmallArcRadius)+"L"+($.rightFullExtent-ee)+" "+$.verticalRightInnerExtent+"A"+($.rightLargeArcRadius+ee)+" "+($.rightLargeArcRadius+ee)+" 0 0 0 "+$.rightInnerExtent+" "+($.verticalFullExtent+ee)+"L"+$.leftInnerExtent+" "+($.verticalFullExtent+ee)+"A"+($.leftLargeArcRadius+ee)+" "+($.leftLargeArcRadius+ee)+" 0 0 0 "+($.leftFullExtent+ee)+" "+$.verticalLeftInnerExtent+"L"+($.leftFullExtent+ee)+" "+($.sourceY+$.leftSmallArcRadius)+"A"+($.leftLargeArcRadius+ee)+" "+($.leftSmallArcRadius+ee)+" 0 0 0 "+$.leftInnerExtent+" "+($.sourceY-ee)+"L"+$.sourceX+" "+($.sourceY-ee)+"L"+$.sourceX+" "+($.sourceY+ee)+"L"+$.leftInnerExtent+" "+($.sourceY+ee)+"A"+($.leftLargeArcRadius-ee)+" "+($.leftSmallArcRadius-ee)+" 0 0 1 "+($.leftFullExtent-ee)+" "+($.sourceY+$.leftSmallArcRadius)+"L"+($.leftFullExtent-ee)+" "+$.verticalLeftInnerExtent+"A"+($.leftLargeArcRadius-ee)+" "+($.leftLargeArcRadius-ee)+" 0 0 1 "+$.leftInnerExtent+" "+($.verticalFullExtent-ee)+"L"+$.rightInnerExtent+" "+($.verticalFullExtent-ee)+"A"+($.rightLargeArcRadius-ee)+" "+($.rightLargeArcRadius-ee)+" 0 0 1 "+($.rightFullExtent+ee)+" "+$.verticalRightInnerExtent+"L"+($.rightFullExtent+ee)+" "+($.targetY+$.rightSmallArcRadius)+"A"+($.rightLargeArcRadius-ee)+" "+($.rightSmallArcRadius-ee)+" 0 0 1 "+$.rightInnerExtent+" "+($.targetY+ee)+"L"+$.targetX+" "+($.targetY+ee)+"Z",Y}function P(){var G=.5;function Y(ee){if(ee.link.circular)return v(ee.link);var $=ee.link.source.x1,K=ee.link.target.x0,Q=o($,K),ae=Q(G),ie=Q(1-G),oe=ee.link.y0-ee.link.width/2,fe=ee.link.y0+ee.link.width/2,ye=ee.link.y1-ee.link.width/2,ce=ee.link.y1+ee.link.width/2;return"M"+$+","+oe+"C"+ae+","+oe+" "+ie+","+ye+" "+K+","+ye+"L"+K+","+ce+"C"+ie+","+ce+" "+ae+","+fe+" "+$+","+fe+"Z"}return Y}function M(G,Y){var ee=a(Y.color),$=n.nodePadAcross,K=G.nodePad/2;Y.dx=Y.x1-Y.x0,Y.dy=Y.y1-Y.y0;var Q=Y.dx,ae=Math.max(.5,Y.dy),ie="node_"+Y.pointNumber;return Y.group&&(ie=f.randstr()),Y.trace=G.trace,Y.curveNumber=G.trace.index,{index:Y.pointNumber,key:ie,partOfGroup:Y.partOfGroup||!1,group:Y.group,traceId:G.key,trace:G.trace,node:Y,nodePad:G.nodePad,nodeLineColor:G.nodeLineColor,nodeLineWidth:G.nodeLineWidth,textFont:G.textFont,size:G.horizontal?G.height:G.width,visibleWidth:Math.ceil(Q),visibleHeight:ae,zoneX:-$,zoneY:-K,zoneWidth:Q+2*$,zoneHeight:ae+2*K,labelY:G.horizontal?Y.dy/2+1:Y.dx/2+1,left:Y.originalLayer===1,sizeAcross:G.width,forceLayouts:G.forceLayouts,horizontal:G.horizontal,darkBackground:ee.getBrightness()<=128,tinyColorHue:i.tinyRGB(ee),tinyColorAlpha:ee.getAlpha(),valueFormat:G.valueFormat,valueSuffix:G.valueSuffix,sankey:G.sankey,graph:G.graph,arrangement:G.arrangement,uniqueNodeLabelPathId:[G.guid,G.key,ie].join("_"),interactionState:G.interactionState,figure:G}}function E(G){G.attr("transform",function(Y){return u(Y.node.x0.toFixed(3),Y.node.y0.toFixed(3))})}function D(G){G.call(E)}function N(G,Y){G.call(D),Y.attr("d",P())}function O(G){G.attr("width",function(Y){return Y.node.x1-Y.node.x0}).attr("height",function(Y){return Y.visibleHeight})}function I(G){return G.link.width>1||G.linkLineWidth>0}function F(G){var Y=u(G.translateX,G.translateY);return Y+(G.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function V(G,Y,ee){G.on(".basic",null).on("mouseover.basic",function($){!$.interactionState.dragInProgress&&!$.partOfGroup&&(ee.hover(this,$,Y),$.interactionState.hovered=[this,$])}).on("mousemove.basic",function($){!$.interactionState.dragInProgress&&!$.partOfGroup&&(ee.follow(this,$),$.interactionState.hovered=[this,$])}).on("mouseout.basic",function($){!$.interactionState.dragInProgress&&!$.partOfGroup&&(ee.unhover(this,$,Y),$.interactionState.hovered=!1)}).on("click.basic",function($){$.interactionState.hovered&&(ee.unhover(this,$,Y),$.interactionState.hovered=!1),!$.interactionState.dragInProgress&&!$.partOfGroup&&ee.select(this,$,Y)})}function U(G,Y,ee,$){var K=c.behavior.drag().origin(function(Q){return{x:Q.node.x0+Q.visibleWidth/2,y:Q.node.y0+Q.visibleHeight/2}}).on("dragstart",function(Q){if(Q.arrangement!=="fixed"&&(f.ensureSingle($._fullLayout._infolayer,"g","dragcover",function(ie){$._fullLayout._dragCover=ie}),f.raiseToTop(this),Q.interactionState.dragInProgress=Q.node,J(Q.node),Q.interactionState.hovered&&(ee.nodeEvents.unhover.apply(0,Q.interactionState.hovered),Q.interactionState.hovered=!1),Q.arrangement==="snap")){var ae=Q.traceId+"|"+Q.key;Q.forceLayouts[ae]?Q.forceLayouts[ae].alpha(1):j(G,ae,Q),Z(G,Y,Q,ae,$)}}).on("drag",function(Q){if(Q.arrangement!=="fixed"){var ae=c.event.x,ie=c.event.y;Q.arrangement==="snap"?(Q.node.x0=ae-Q.visibleWidth/2,Q.node.x1=ae+Q.visibleWidth/2,Q.node.y0=ie-Q.visibleHeight/2,Q.node.y1=ie+Q.visibleHeight/2):(Q.arrangement==="freeform"&&(Q.node.x0=ae-Q.visibleWidth/2,Q.node.x1=ae+Q.visibleWidth/2),ie=Math.max(0,Math.min(Q.size-Q.visibleHeight/2,ie)),Q.node.y0=ie-Q.visibleHeight/2,Q.node.y1=ie+Q.visibleHeight/2),J(Q.node),Q.arrangement!=="snap"&&(Q.sankey.update(Q.graph),N(G.filter(le(Q)),Y))}}).on("dragend",function(Q){if(Q.arrangement!=="fixed"){Q.interactionState.dragInProgress=!1;for(var ae=0;ae<Q.node.childrenNodes.length;ae++)Q.node.childrenNodes[ae].x=Q.node.x,Q.node.childrenNodes[ae].y=Q.node.y;Q.arrangement!=="snap"&&re(Q,$)}});G.on(".drag",null).call(K)}function j(G,Y,ee,$){ue(ee.graph.nodes);var K=ee.graph.nodes.filter(function(Q){return Q.originalX===ee.node.originalX}).filter(function(Q){return!Q.partOfGroup});ee.forceLayouts[Y]=l.forceSimulation(K).alphaDecay(0).force("collide",l.forceCollide().radius(function(Q){return Q.dy/2+ee.nodePad/2}).strength(1).iterations(n.forceIterations)).force("constrain",te(G,Y,K,ee)).stop()}function Z(G,Y,ee,$,K){window.requestAnimationFrame(function Q(){var ae;for(ae=0;ae<n.forceTicksPerFrame;ae++)ee.forceLayouts[$].tick();var ie=ee.graph.nodes;if(se(ie),ee.sankey.update(ee.graph),N(G.filter(le(ee)),Y),ee.forceLayouts[$].alpha()>0)window.requestAnimationFrame(Q);else{var oe=ee.node.originalX;ee.node.x0=oe-ee.visibleWidth/2,ee.node.x1=oe+ee.visibleWidth/2,re(ee,K)}})}function te(G,Y,ee,$){return function(){for(var Q=0,ae=0;ae<ee.length;ae++){var ie=ee[ae];ie===$.interactionState.dragInProgress?(ie.x=ie.lastDraggedX,ie.y=ie.lastDraggedY):(ie.vx=(ie.originalX-ie.x)/n.forceTicksPerFrame,ie.y=Math.min($.size-ie.dy/2,Math.max(ie.dy/2,ie.y))),Q=Math.max(Q,Math.abs(ie.vx),Math.abs(ie.vy))}!$.interactionState.dragInProgress&&Q<.1&&$.forceLayouts[Y].alpha()>0&&$.forceLayouts[Y].alpha(0)}}function re(G,Y){for(var ee=[],$=[],K=0;K<G.graph.nodes.length;K++){var Q=(G.graph.nodes[K].x0+G.graph.nodes[K].x1)/2,ae=(G.graph.nodes[K].y0+G.graph.nodes[K].y1)/2;ee.push(Q/G.figure.width),$.push(ae/G.figure.height)}x.call("_guiRestyle",Y,{"node.x":[ee],"node.y":[$]},G.trace.index).then(function(){Y._fullLayout._dragCover&&Y._fullLayout._dragCover.remove()})}function W(G){var Y=[],ee;for(ee=0;ee<G.length;ee++)G[ee].originalX=(G[ee].x0+G[ee].x1)/2,G[ee].originalY=(G[ee].y0+G[ee].y1)/2,Y.indexOf(G[ee].originalX)===-1&&Y.push(G[ee].originalX);for(Y.sort(function($,K){return $-K}),ee=0;ee<G.length;ee++)G[ee].originalLayerIndex=Y.indexOf(G[ee].originalX),G[ee].originalLayer=G[ee].originalLayerIndex/(Y.length-1)}function J(G){G.lastDraggedX=G.x0+G.dx/2,G.lastDraggedY=G.y0+G.dy/2}function le(G){return function(Y){return Y.node.originalX===G.node.originalX}}function ue(G){for(var Y=0;Y<G.length;Y++)G[Y].y=(G[Y].y0+G[Y].y1)/2,G[Y].x=(G[Y].x0+G[Y].x1)/2}function se(G){for(var Y=0;Y<G.length;Y++)G[Y].y0=G[Y].y-G[Y].dy/2,G[Y].y1=G[Y].y0+G[Y].dy,G[Y].x0=G[Y].x-G[Y].dx/2,G[Y].x1=G[Y].x0+G[Y].dx}k.exports=function(G,Y,ee,$,K){var Q=!1;f.ensureSingle(G._fullLayout._infolayer,"g","first-render",function(){Q=!0});var ae=G._fullLayout._dragCover,ie=ee.filter(function(Ae){return m(Ae).trace.visible}).map(T.bind(null,$)),oe=Y.selectAll("."+n.cn.sankey).data(ie,d);oe.exit().remove(),oe.enter().append("g").classed(n.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",F),oe.each(function(Ae,Oe){G._fullData[Oe]._sankey=Ae;var He="bgsankey-"+Ae.trace.uid+"-"+Oe;f.ensureSingle(G._fullLayout._draggers,"rect",He),G._fullData[Oe]._bgRect=c.select("."+He),G._fullData[Oe]._bgRect.style("pointer-events","all").attr("width",Ae.width).attr("height",Ae.height).attr("x",Ae.translateX).attr("y",Ae.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),oe.transition().ease(n.ease).duration(n.duration).attr("transform",F);var fe=oe.selectAll("."+n.cn.sankeyLinks).data(y,d);fe.enter().append("g").classed(n.cn.sankeyLinks,!0).style("fill","none");var ye=fe.selectAll("."+n.cn.sankeyLink).data(function(Ae){var Oe=Ae.graph.links;return Oe.filter(function(He){return He.value}).map(_.bind(null,Ae))},d);ye.enter().append("path").classed(n.cn.sankeyLink,!0).call(V,oe,K.linkEvents),ye.style("stroke",function(Ae){return I(Ae)?i.tinyRGB(a(Ae.linkLineColor)):Ae.tinyColorHue}).style("stroke-opacity",function(Ae){return I(Ae)?i.opacity(Ae.linkLineColor):Ae.tinyColorAlpha}).style("fill",function(Ae){return Ae.tinyColorHue}).style("fill-opacity",function(Ae){return Ae.tinyColorAlpha}).style("stroke-width",function(Ae){return I(Ae)?Ae.linkLineWidth:1}).attr("d",P()),ye.style("opacity",function(){return G._context.staticPlot||Q||ae?1:0}).transition().ease(n.ease).duration(n.duration).style("opacity",1),ye.exit().transition().ease(n.ease).duration(n.duration).style("opacity",0).remove();var ce=oe.selectAll("."+n.cn.sankeyNodeSet).data(y,d);ce.enter().append("g").classed(n.cn.sankeyNodeSet,!0),ce.style("cursor",function(Ae){switch(Ae.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var me=ce.selectAll("."+n.cn.sankeyNode).data(function(Ae){var Oe=Ae.graph.nodes;return W(Oe),Oe.map(M.bind(null,Ae))},d);me.enter().append("g").classed(n.cn.sankeyNode,!0).call(E).style("opacity",function(Ae){return(G._context.staticPlot||Q)&&!Ae.partOfGroup?1:0}),me.call(V,oe,K.nodeEvents).call(U,ye,K,G),me.transition().ease(n.ease).duration(n.duration).call(E).style("opacity",function(Ae){return Ae.partOfGroup?0:1}),me.exit().transition().ease(n.ease).duration(n.duration).style("opacity",0).remove();var xe=me.selectAll("."+n.cn.nodeRect).data(y);xe.enter().append("rect").classed(n.cn.nodeRect,!0).call(O),xe.style("stroke-width",function(Ae){return Ae.nodeLineWidth}).style("stroke",function(Ae){return i.tinyRGB(a(Ae.nodeLineColor))}).style("stroke-opacity",function(Ae){return i.opacity(Ae.nodeLineColor)}).style("fill",function(Ae){return Ae.tinyColorHue}).style("fill-opacity",function(Ae){return Ae.tinyColorAlpha}),xe.transition().ease(n.ease).duration(n.duration).call(O);var ke=me.selectAll("."+n.cn.nodeLabel).data(y);ke.enter().append("text").classed(n.cn.nodeLabel,!0).style("cursor","default"),ke.attr("data-notex",1).text(function(Ae){return Ae.node.label}).each(function(Ae){var Oe=c.select(this);r.font(Oe,Ae.textFont),g.convertToTspans(Oe,G)}).style("text-shadow",g.makeTextShadow(G._fullLayout.paper_bgcolor)).attr("text-anchor",function(Ae){return Ae.horizontal&&Ae.left?"end":"start"}).attr("transform",function(Ae){var Oe=c.select(this),He=g.lineCount(Oe),Ge=Ae.textFont.size*((He-1)*S-b),_e=Ae.nodeLineWidth/2+w,Ie=((Ae.horizontal?Ae.visibleHeight:Ae.visibleWidth)-Ge)/2;Ae.horizontal&&(Ae.left?_e=-_e:_e+=Ae.visibleWidth);var We=Ae.horizontal?"":"scale(-1,1)"+s(90);return u(Ae.horizontal?_e:Ie,Ae.horizontal?Ie:_e)+We}),ke.transition().ease(n.ease).duration(n.duration)}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../registry":638,"./constants":919,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:312}],924:[function(e,k,z){k.exports=function(o,c){for(var p=o.cd,t=[],n=p[0].trace,a=n._sankey.graph.nodes,i=0;i<a.length;i++){var r=a[i];if(!r.partOfGroup){var f=[(r.x0+r.x1)/2,(r.y0+r.y1)/2];n.orientation==="v"&&f.reverse(),c&&c.contains(f,!1,i,o)&&t.push({pointNumber:r.pointNumber})}}return t}},{}],925:[function(e,k,z){var l=e("../../lib");k.exports=function(c,p){for(var t=0;t<c.length;t++)c[t].i=t;l.mergeArray(p.text,c,"tx"),l.mergeArray(p.texttemplate,c,"txt"),l.mergeArray(p.hovertext,c,"htx"),l.mergeArray(p.customdata,c,"data"),l.mergeArray(p.textposition,c,"tp"),p.textfont&&(l.mergeArrayCastPositive(p.textfont.size,c,"ts"),l.mergeArray(p.textfont.color,c,"tc"),l.mergeArray(p.textfont.family,c,"tf"));var n=p.marker;if(n){l.mergeArrayCastPositive(n.size,c,"ms"),l.mergeArrayCastPositive(n.opacity,c,"mo"),l.mergeArray(n.symbol,c,"mx"),l.mergeArray(n.color,c,"mc");var a=n.line;n.line&&(l.mergeArray(a.color,c,"mlc"),l.mergeArrayCastPositive(a.width,c,"mlw"));var i=n.gradient;i&&i.type!=="none"&&(l.mergeArray(i.type,c,"mgt"),l.mergeArray(i.color,c,"mgc"))}}},{"../../lib":503}],926:[function(e,k,z){var l=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,o=e("../../plots/template_attributes").texttemplateAttrs,c=e("../../plots/template_attributes").hovertemplateAttrs,p=e("../../components/colorscale/attributes"),t=e("../../plots/font_attributes"),n=e("../../components/drawing/attributes").dash,a=e("../../components/drawing"),i=e("./constants"),r=e("../../lib/extend").extendFlat;function f(h){return{valType:"any",dflt:0,editType:"calc"}}function u(h){return{valType:"any",editType:"calc"}}function s(h){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}k.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:f(),yperiod:f(),xperiod0:u(),yperiod0:u(),xperiodalignment:s(),yperiodalignment:s(),xhoverformat:l("x"),yhoverformat:l("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:o({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:c({},{keys:i.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:r({},n,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:r({symbol:{valType:"enumerated",values:a.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:r({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},p("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},p("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:t({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":373,"../../components/drawing":388,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"./constants":930}],927:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../lib"),c=e("../../plots/cartesian/axes"),p=e("../../plots/cartesian/align_period"),t=e("../../constants/numerical").BADNUM,n=e("./subtypes"),a=e("./colorscale_calc"),i=e("./arrays_to_calcdata"),r=e("./calc_selection");function f(m,g){var x=m._fullLayout,A=c.getFromId(m,g.xaxis||"x"),b=c.getFromId(m,g.yaxis||"y"),S=A.makeCalcdata(g,"x"),w=b.makeCalcdata(g,"y"),T=p(g,A,"x",S),_=p(g,b,"y",w),v=T.vals,P=_.vals,M=g._length,E=new Array(M),D=g.ids,N=y(g,x,A,b),O=!1,I,F,V,U,j,Z;h(x,g);var te="x",re="y",W;if(N)o.pushUnique(N.traceIndices,g._expandedIndex),I=N.orientation==="v",I?(re="s",W="x"):(te="s",W="y"),j=N.stackgaps==="interpolate";else{var J=s(g,M);u(m,g,A,b,v,P,J)}var le=!!g.xperiodalignment,ue=!!g.yperiodalignment;for(F=0;F<M;F++){var se=E[F]={},G=l(v[F]),Y=l(P[F]);G&&Y?(se[te]=v[F],se[re]=P[F],le&&(se.orig_x=S[F],se.xEnd=T.ends[F],se.xStart=T.starts[F]),ue&&(se.orig_y=w[F],se.yEnd=_.ends[F],se.yStart=_.starts[F])):N&&(I?G:Y)?(se[W]=I?v[F]:P[F],se.gap=!0,j?(se.s=t,O=!0):se.s=0):se[te]=se[re]=t,D&&(se.id=String(D[F]))}if(i(E,g),a(m,g),r(E,g),N){for(F=0;F<E.length;)E[F][W]===t?E.splice(F,1):F++;if(o.sort(E,function(Q,ae){return Q[W]-ae[W]||Q.i-ae.i}),O){for(F=0;F<E.length-1&&E[F].gap;)F++;for(Z=E[F].s,Z||(Z=E[F].s=0),V=0;V<F;V++)E[V].s=Z;for(U=E.length-1;U>F&&E[U].gap;)U--;for(Z=E[U].s,V=E.length-1;V>U;V--)E[V].s=Z;for(;F<U;)if(F++,E[F].gap){for(V=F+1;E[V].gap;)V++;for(var ee=E[F-1][W],$=E[F-1].s,K=(E[V].s-$)/(E[V][W]-ee);F<V;)E[F].s=$+(E[F][W]-ee)*K,F++}}}return E}function u(m,g,x,A,b,S,w){var T=g._length,_=m._fullLayout,v=x._id,P=A._id,M=_._firstScatter[d(g)]===g.uid,E=(y(g,_,x,A)||{}).orientation,D=g.fill;x._minDtick=0,A._minDtick=0;var N={padded:!0},O={padded:!0};w&&(N.ppad=O.ppad=w);var I=T<2||b[0]!==b[T-1]||S[0]!==S[T-1];I&&(D==="tozerox"||D==="tonextx"&&(M||E==="h"))?N.tozero=!0:!(g.error_y||{}).visible&&(D==="tonexty"||D==="tozeroy"||!n.hasMarkers(g)&&!n.hasText(g))&&(N.padded=!1,N.ppad=0),I&&(D==="tozeroy"||D==="tonexty"&&(M||E==="v"))?O.tozero=!0:(D==="tonextx"||D==="tozerox")&&(O.padded=!1),v&&(g._extremes[v]=c.findExtremes(x,b,N)),P&&(g._extremes[P]=c.findExtremes(A,S,O))}function s(m,g){if(!!n.hasMarkers(m)){var x=m.marker,A=1.6*(m.marker.sizeref||1),b;if(m.marker.sizemode==="area"?b=function(v){return Math.max(Math.sqrt((v||0)/A),3)}:b=function(v){return Math.max((v||0)/A,3)},o.isArrayOrTypedArray(x.size)){var S={type:"linear"};c.setConvert(S);for(var w=S.makeCalcdata(m.marker,"size"),T=new Array(g),_=0;_<g;_++)T[_]=b(w[_]);return T}else return b(x.size)}}function h(m,g){var x=d(g),A=m._firstScatter;A[x]||(A[x]=g.uid)}function d(m){var g=m.stackgroup;return m.xaxis+m.yaxis+m.type+(g?"-"+g:"")}function y(m,g,x,A){var b=m.stackgroup;if(!!b){var S=g._scatterStackOpts[x._id+A._id][b],w=S.orientation==="v"?A:x;if(w.type==="linear"||w.type==="log")return S}}k.exports={calc:f,calcMarkerSize:s,calcAxisExpansion:u,setFirstScatter:h,getStackOpts:y}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"./arrays_to_calcdata":925,"./calc_selection":928,"./colorscale_calc":929,"./subtypes":951,"fast-isnumeric":190}],928:[function(e,k,z){var l=e("../../lib");k.exports=function(c,p){l.isArrayOrTypedArray(p.selectedpoints)&&l.tagSelected(c,p)}},{"../../lib":503}],929:[function(e,k,z){var l=e("../../components/colorscale/helpers").hasColorscale,o=e("../../components/colorscale/calc"),c=e("./subtypes");k.exports=function(t,n){c.hasLines(n)&&l(n,"line")&&o(t,n,{vals:n.line.color,containerStr:"line",cLetter:"c"}),c.hasMarkers(n)&&(l(n,"marker")&&o(t,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),l(n,"marker.line")&&o(t,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"./subtypes":951}],930:[function(e,k,z){k.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],931:[function(e,k,z){var l=e("./calc");k.exports=function(t,n){var a=n.xaxis,i=n.yaxis,r=a._id+i._id,f=t._fullLayout._scatterStackOpts[r];if(!!f){var u=t.calcdata,s,h,d,y,m,g,x,A,b,S,w,T,_,v,P;for(var M in f){S=f[M];var E=S.traceIndices;if(!!E.length){for(w=S.stackgaps==="interpolate",T=S.groupnorm,S.orientation==="v"?(_="x",v="y"):(_="y",v="x"),P=new Array(E.length),s=0;s<P.length;s++)P[s]=!1;g=u[E[0]];var D=new Array(g.length);for(s=0;s<g.length;s++)D[s]=g[s][_];for(s=1;s<E.length;s++){for(m=u[E[s]],h=d=0;h<m.length;h++){for(x=m[h][_];x>D[d]&&d<D.length;d++)o(m,h,D[d],s,P,w,_),h++;if(x!==D[d]){for(y=0;y<s;y++)o(u[E[y]],d,x,y,P,w,_);D.splice(d,0,x)}d++}for(;d<D.length;d++)o(m,h,D[d],s,P,w,_),h++}var N=D.length;for(h=0;h<g.length;h++){for(A=g[h][v]=g[h].s,s=1;s<E.length;s++)m=u[E[s]],m[0].trace._rawLength=m[0].trace._length,m[0].trace._length=N,A+=m[h].s,m[h][v]=A;if(T)for(b=(T==="fraction"?A:A/100)||1,s=0;s<E.length;s++){var O=u[E[s]][h];O[v]/=b,O.sNorm=O.s/b}}for(s=0;s<E.length;s++){m=u[E[s]];var I=m[0].trace,F=l.calcMarkerSize(I,I._rawLength),V=Array.isArray(F);if(F&&P[s]||V){var U=F;for(F=new Array(N),h=0;h<N;h++)F[h]=m[h].gap?0:V?U[m[h].i]:U}var j=new Array(N),Z=new Array(N);for(h=0;h<N;h++)j[h]=m[h].x,Z[h]=m[h].y;l.calcAxisExpansion(t,I,a,i,j,Z,F),m[0].t.orientation=S.orientation}}}}};function o(p,t,n,a,i,r,f){i[a]=!0;var u={i:null,gap:!0,s:0};if(u[f]=n,p.splice(t,0,u),t&&n===p[t-1][f]){var s=p[t-1];u.s=s.s,u.i=s.i,u.gap=s.gap}else r&&(u.s=c(p,t,n,f));t||(p[0].t=p[1].t,p[0].trace=p[1].trace,delete p[1].t,delete p[1].trace)}function c(p,t,n,a){var i=p[t-1],r=p[t+1];return r?i?i.s+(r.s-i.s)*(n-i[a])/(r[a]-i[a]):r.s:i.s}},{"./calc":927}],932:[function(e,k,z){k.exports=function(o){for(var c=0;c<o.length;c++){var p=o[c];if(p.type==="scatter"){var t=p.fill;if(!(t==="none"||t==="toself")&&(p.opacity=void 0,t==="tonexty"||t==="tonextx"))for(var n=c-1;n>=0;n--){var a=o[n];if(a.type==="scatter"&&a.xaxis===p.xaxis&&a.yaxis===p.yaxis){a.opacity=void 0;break}}}}}},{}],933:[function(e,k,z){var l=e("../../lib"),o=e("../../registry"),c=e("./attributes"),p=e("./constants"),t=e("./subtypes"),n=e("./xy_defaults"),a=e("./period_defaults"),i=e("./stack_defaults"),r=e("./marker_defaults"),f=e("./line_defaults"),u=e("./line_shape_defaults"),s=e("./text_defaults"),h=e("./fillcolor_defaults");k.exports=function(y,m,g,x){function A(M,E){return l.coerce(y,m,c,M,E)}var b=n(y,m,x,A);if(b||(m.visible=!1),!!m.visible){a(y,m,x,A),A("xhoverformat"),A("yhoverformat");var S=i(y,m,x,A),w=!S&&b<p.PTS_LINESONLY?"lines+markers":"lines";A("text"),A("hovertext"),A("mode",w),t.hasLines(m)&&(f(y,m,g,x,A),u(y,m,A),A("connectgaps"),A("line.simplify")),t.hasMarkers(m)&&r(y,m,g,x,A,{gradient:!0}),t.hasText(m)&&(A("texttemplate"),s(y,m,x,A));var T=[];(t.hasMarkers(m)||t.hasText(m))&&(A("cliponaxis"),A("marker.maxdisplayed"),T.push("points")),A("fill",S?S.fillDflt:"none"),m.fill!=="none"&&(h(y,m,g,A),t.hasLines(m)||u(y,m,A));var _=(m.line||{}).color,v=(m.marker||{}).color;(m.fill==="tonext"||m.fill==="toself")&&T.push("fills"),A("hoveron",T.join("+")||"points"),m.hoveron!=="fills"&&A("hovertemplate");var P=o.getComponentMethod("errorbars","supplyDefaults");P(y,m,_||v||g,{axis:"y"}),P(y,m,_||v||g,{axis:"x",inherit:"y"}),l.coerceSelectionMarkerOpacity(m,A)}}},{"../../lib":503,"../../registry":638,"./attributes":926,"./constants":930,"./fillcolor_defaults":934,"./line_defaults":939,"./line_shape_defaults":941,"./marker_defaults":945,"./period_defaults":946,"./stack_defaults":949,"./subtypes":951,"./text_defaults":952,"./xy_defaults":953}],934:[function(e,k,z){var l=e("../../components/color"),o=e("../../lib").isArrayOrTypedArray;k.exports=function(p,t,n,a){var i=!1;if(t.marker){var r=t.marker.color,f=(t.marker.line||{}).color;r&&!o(r)?i=r:f&&!o(f)&&(i=f)}a("fillcolor",l.addOpacity((t.line||{}).color||i||n,.5))}},{"../../components/color":366,"../../lib":503}],935:[function(e,k,z){var l=e("../../plots/cartesian/axes");k.exports=function(c,p,t){var n={},a={_fullLayout:t},i=l.getFromTrace(a,p,"x"),r=l.getFromTrace(a,p,"y");return n.xLabel=l.tickText(i,i.c2l(c.x),!0).text,n.yLabel=l.tickText(r,r.c2l(c.y),!0).text,n}},{"../../plots/cartesian/axes":554}],936:[function(e,k,z){var l=e("../../components/color"),o=e("./subtypes");k.exports=function(p,t){var n,a;if(p.mode==="lines")return n=p.line.color,n&&l.opacity(n)?n:p.fillcolor;if(p.mode==="none")return p.fill?p.fillcolor:"";var i=t.mcc||(p.marker||{}).color,r=t.mlcc||((p.marker||{}).line||{}).color;return a=i&&l.opacity(i)?i:r&&l.opacity(r)&&(t.mlw||((p.marker||{}).line||{}).width)?r:"",a?l.opacity(a)<.3?l.addOpacity(a,.3):a:(n=(p.line||{}).color,n&&l.opacity(n)&&o.hasLines(p)&&p.line.width?n:p.fillcolor)}},{"../../components/color":366,"./subtypes":951}],937:[function(e,k,z){var l=e("../../lib"),o=e("../../components/fx"),c=e("../../registry"),p=e("./get_trace_color"),t=e("../../components/color"),n=l.fillText;k.exports=function(i,r,f,u){var s=i.cd,h=s[0].trace,d=i.xa,y=i.ya,m=d.c2p(r),g=y.c2p(f),x=[m,g],A=h.hoveron||"",b=h.mode.indexOf("markers")!==-1?3:.5,S=!!h.xperiodalignment,w=!!h.yperiodalignment;if(A.indexOf("points")!==-1){var T=function(oe){if(S){var fe=d.c2p(oe.xStart),ye=d.c2p(oe.xEnd);return m>=Math.min(fe,ye)&&m<=Math.max(fe,ye)?0:1/0}var ce=Math.max(3,oe.mrc||0),me=1-1/ce,xe=Math.abs(d.c2p(oe.x)-m);return xe<ce?me*xe/ce:xe-ce+me},_=function(oe){if(w){var fe=y.c2p(oe.yStart),ye=y.c2p(oe.yEnd);return g>=Math.min(fe,ye)&&g<=Math.max(fe,ye)?0:1/0}var ce=Math.max(3,oe.mrc||0),me=1-1/ce,xe=Math.abs(y.c2p(oe.y)-g);return xe<ce?me*xe/ce:xe-ce+me},v=function(oe){var fe=Math.max(b,oe.mrc||0),ye=d.c2p(oe.x)-m,ce=y.c2p(oe.y)-g;return Math.max(Math.sqrt(ye*ye+ce*ce)-fe,1-b/fe)},P=o.getDistanceFunction(u,T,_,v);if(o.getClosest(s,P,i),i.index!==!1){var M=s[i.index],E=d.c2p(M.x,!0),D=y.c2p(M.y,!0),N=M.mrc||1;i.index=M.i;var O=s[0].t.orientation,I=O&&(M.sNorm||M.s),F=O==="h"?I:M.orig_x!==void 0?M.orig_x:M.x,V=O==="v"?I:M.orig_y!==void 0?M.orig_y:M.y;return l.extendFlat(i,{color:p(h,M),x0:E-N,x1:E+N,xLabelVal:F,y0:D-N,y1:D+N,yLabelVal:V,spikeDistance:v(M),hovertemplate:h.hovertemplate}),n(M,h,i),c.getComponentMethod("errorbars","hoverInfo")(M,h,i),[i]}}if(A.indexOf("fills")!==-1&&h._polygons){var U=h._polygons,j=[],Z=!1,te=1/0,re=-1/0,W=1/0,J=-1/0,le,ue,se,G,Y,ee,$,K,Q;for(le=0;le<U.length;le++)se=U[le],se.contains(x)&&(Z=!Z,j.push(se),W=Math.min(W,se.ymin),J=Math.max(J,se.ymax));if(Z){W=Math.max(W,0),J=Math.min(J,y._length);var ae=(W+J)/2;for(le=0;le<j.length;le++)for(G=j[le].pts,ue=1;ue<G.length;ue++)K=G[ue-1][1],Q=G[ue][1],K>ae!=Q>=ae&&(ee=G[ue-1][0],$=G[ue][0],Q-K&&(Y=ee+($-ee)*(ae-K)/(Q-K),te=Math.min(te,Y),re=Math.max(re,Y)));te=Math.max(te,0),re=Math.min(re,d._length);var ie=t.defaultLine;return t.opacity(h.fillcolor)?ie=h.fillcolor:t.opacity((h.line||{}).color)&&(ie=h.line.color),l.extendFlat(i,{distance:i.maxHoverDistance,x0:te,x1:re,y0:ae,y1:ae,color:ie,hovertemplate:!1}),delete i.index,h.text&&!Array.isArray(h.text)?i.text=String(h.text):i.text=h.name,[i]}}}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../registry":638,"./get_trace_color":936}],938:[function(e,k,z){var l=e("./subtypes");k.exports={hasLines:l.hasLines,hasMarkers:l.hasMarkers,hasText:l.hasText,isBubble:l.isBubble,attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./cross_trace_calc"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot"),colorbar:e("./marker_colorbar"),formatLabels:e("./format_labels"),style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./arrays_to_calcdata":925,"./attributes":926,"./calc":927,"./cross_trace_calc":931,"./cross_trace_defaults":932,"./defaults":933,"./format_labels":935,"./hover":937,"./marker_colorbar":944,"./plot":947,"./select":948,"./style":950,"./subtypes":951}],939:[function(e,k,z){var l=e("../../lib").isArrayOrTypedArray,o=e("../../components/colorscale/helpers").hasColorscale,c=e("../../components/colorscale/defaults");k.exports=function(t,n,a,i,r,f){var u=(t.marker||{}).color;if(r("line.color",a),o(t,"line"))c(t,n,i,r,{prefix:"line.",cLetter:"c"});else{var s=(l(u)?!1:u)||a;r("line.color",s)}r("line.width"),(f||{}).noDash||r("line.dash")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],940:[function(e,k,z){var l=e("../../constants/numerical"),o=l.BADNUM,c=l.LOG_CLIP,p=c+.5,t=c-.5,n=e("../../lib"),a=n.segmentsIntersect,i=n.constrain,r=e("./constants");k.exports=function(u,s){var h=s.xaxis,d=s.yaxis,y=h.type==="log",m=d.type==="log",g=h._length,x=d._length,A=s.connectGaps,b=s.baseTolerance,S=s.shape,w=S==="linear",T=s.fill&&s.fill!=="none",_=[],v=r.minTolerance,P=u.length,M=new Array(P),E=0,D,N,O,I,F,V,U,j,Z,te,re,W,J,le,ue,se;function G(Mt){var zt=u[Mt];if(!zt)return!1;var Nt=s.linearized?h.l2p(zt.x):h.c2p(zt.x),Et=s.linearized?d.l2p(zt.y):d.c2p(zt.y);if(Nt===o){if(y&&(Nt=h.c2p(zt.x,!0)),Nt===o)return!1;m&&Et===o&&(Nt*=Math.abs(h._m*x*(h._m>0?p:t)/(d._m*g*(d._m>0?p:t)))),Nt*=1e3}if(Et===o){if(m&&(Et=d.c2p(zt.y,!0)),Et===o)return!1;Et*=1e3}return[Nt,Et]}function Y(Mt,zt,Nt,Et){var At=Nt-Mt,it=Et-zt,ht=.5-Mt,$e=.5-zt,Ee=At*At+it*it,Xe=At*ht+it*$e;if(Xe>0&&Xe<Ee){var rt=ht*it-$e*At;if(rt*rt<Ee)return!0}}var ee,$;function K(Mt,zt){var Nt=Mt[0]/g,Et=Mt[1]/x,At=Math.max(0,-Nt,Nt-1,-Et,Et-1);return At&&ee!==void 0&&Y(Nt,Et,ee,$)&&(At=0),At&&zt&&Y(Nt,Et,zt[0]/g,zt[1]/x)&&(At=0),(1+r.toleranceGrowth*At)*b}function Q(Mt,zt){var Nt=Mt[0]-zt[0],Et=Mt[1]-zt[1];return Math.sqrt(Nt*Nt+Et*Et)}var ae=r.maxScreensAway,ie=-g*ae,oe=g*(1+ae),fe=-x*ae,ye=x*(1+ae),ce=[[ie,fe,oe,fe],[oe,fe,oe,ye],[oe,ye,ie,ye],[ie,ye,ie,fe]],me,xe,ke,Ae,Oe,He;function Ge(Mt,zt){for(var Nt=[],Et=0,At=0;At<4;At++){var it=ce[At],ht=a(Mt[0],Mt[1],zt[0],zt[1],it[0],it[1],it[2],it[3]);ht&&(!Et||Math.abs(ht.x-Nt[0][0])>1||Math.abs(ht.y-Nt[0][1])>1)&&(ht=[ht.x,ht.y],Et&&Q(ht,Mt)<Q(Nt[0],Mt)?Nt.unshift(ht):Nt.push(ht),Et++)}return Nt}function _e(Mt){if(Mt[0]<ie||Mt[0]>oe||Mt[1]<fe||Mt[1]>ye)return[i(Mt[0],ie,oe),i(Mt[1],fe,ye)]}function Ie(Mt,zt){if(Mt[0]===zt[0]&&(Mt[0]===ie||Mt[0]===oe)||Mt[1]===zt[1]&&(Mt[1]===fe||Mt[1]===ye))return!0}function We(Mt,zt){var Nt=[],Et=_e(Mt),At=_e(zt);return Et&&At&&Ie(Et,At)||(Et&&Nt.push(Et),At&&Nt.push(At)),Nt}function et(Mt,zt,Nt){return function(Et,At){var it=_e(Et),ht=_e(At),$e=[];if(it&&ht&&Ie(it,ht))return $e;it&&$e.push(it),ht&&$e.push(ht);var Ee=2*n.constrain((Et[Mt]+At[Mt])/2,zt,Nt)-((it||Et)[Mt]+(ht||At)[Mt]);if(Ee){var Xe;it&&ht?Xe=Ee>0==it[Mt]>ht[Mt]?it:ht:Xe=it||ht,Xe[Mt]+=Ee}return $e}}var Ne;S==="linear"||S==="spline"?Ne=Ge:S==="hv"||S==="vh"?Ne=We:S==="hvh"?Ne=et(0,ie,oe):S==="vhv"&&(Ne=et(1,fe,ye));function De(Mt,zt){var Nt=zt[0]-Mt[0],Et=(zt[1]-Mt[1])/Nt,At=(Mt[1]*zt[0]-zt[1]*Mt[0])/Nt;return At>0?[Et>0?ie:oe,ye]:[Et>0?oe:ie,fe]}function Ve(Mt){var zt=Mt[0],Nt=Mt[1],Et=zt===M[E-1][0],At=Nt===M[E-1][1];if(!(Et&&At))if(E>1){var it=zt===M[E-2][0],ht=Nt===M[E-2][1];Et&&(zt===ie||zt===oe)&&it?ht?E--:M[E-1]=Mt:At&&(Nt===fe||Nt===ye)&&ht?it?E--:M[E-1]=Mt:M[E++]=Mt}else M[E++]=Mt}function dt(Mt){M[E-1][0]!==Mt[0]&&M[E-1][1]!==Mt[1]&&Ve([ke,Ae]),Ve(Mt),Oe=null,ke=Ae=0}function Dt(Mt){if(ee=Mt[0]/g,$=Mt[1]/x,me=Mt[0]<ie?ie:Mt[0]>oe?oe:0,xe=Mt[1]<fe?fe:Mt[1]>ye?ye:0,me||xe){if(!E)M[E++]=[me||Mt[0],xe||Mt[1]];else if(Oe){var zt=Ne(Oe,Mt);zt.length>1&&(dt(zt[0]),M[E++]=zt[1])}else He=Ne(M[E-1],Mt)[0],M[E++]=He;var Nt=M[E-1];me&&xe&&(Nt[0]!==me||Nt[1]!==xe)?(Oe&&(ke!==me&&Ae!==xe?Ve(ke&&Ae?De(Oe,Mt):[ke||me,Ae||xe]):ke&&Ae&&Ve([ke,Ae])),Ve([me,xe])):ke-me&&Ae-xe&&Ve([me||ke,xe||Ae]),Oe=Mt,ke=me,Ae=xe}else Oe&&dt(Ne(Oe,Mt)[0]),M[E++]=Mt}for(D=0;D<P;D++)if(N=G(D),!!N){for(E=0,Oe=null,Dt(N),D++;D<P;D++){if(I=G(D),!I){if(A)continue;break}if(!w||!s.simplify){Dt(I);continue}var Gt=G(D+1);if(te=Q(I,N),!(!(T&&(E===0||E===P-1))&&te<K(I,Gt)*v)){for(j=[(I[0]-N[0])/te,(I[1]-N[1])/te],F=N,re=te,W=le=ue=0,U=!1,O=I,D++;D<u.length;D++){if(V=Gt,Gt=G(D+1),!V){if(A)continue;break}if(Z=[V[0]-N[0],V[1]-N[1]],se=Z[0]*j[1]-Z[1]*j[0],le=Math.min(le,se),ue=Math.max(ue,se),ue-le>K(V,Gt))break;O=V,J=Z[0]*j[0]+Z[1]*j[1],J>re?(re=J,I=V,U=!1):J<W&&(W=J,F=V,U=!0)}if(U?(Dt(I),O!==F&&Dt(F)):(F!==N&&Dt(F),O!==I&&Dt(I)),Dt(O),D>=u.length||!V)break;Dt(V),N=V}}Oe&&Ve([ke||Oe[0],Ae||Oe[1]]),_.push(M.slice(0,E))}return _}},{"../../constants/numerical":479,"../../lib":503,"./constants":930}],941:[function(e,k,z){k.exports=function(o,c,p){var t=p("line.shape");t==="spline"&&p("line.smoothing")}},{}],942:[function(e,k,z){var l={tonextx:1,tonexty:1,tonext:1};k.exports=function(c,p,t){var n,a,i,r,f,u={},s=!1,h=-1,d=0,y=-1;for(a=0;a<t.length;a++)n=t[a][0].trace,i=n.stackgroup||"",i?i in u?f=u[i]:(f=u[i]=d,d++):n.fill in l&&y>=0?f=y:(f=y=d,d++),f<h&&(s=!0),n._groupIndex=h=f;var m=t.slice();s&&m.sort(function(x,A){var b=x[0].trace,S=A[0].trace;return b._groupIndex-S._groupIndex||b.index-S.index});var g={};for(a=0;a<m.length;a++)n=m[a][0].trace,i=n.stackgroup||"",n.visible===!0?(n._nexttrace=null,n.fill in l&&(r=g[i],n._prevtrace=r||null,r&&(r._nexttrace=n)),n._ownfill=n.fill&&(n.fill.substr(0,6)==="tozero"||n.fill==="toself"||n.fill.substr(0,2)==="to"&&!n._prevtrace),g[i]=n):n._prevtrace=n._nexttrace=n._ownfill=null;return m}},{}],943:[function(e,k,z){var l=e("fast-isnumeric");k.exports=function(c,p){p||(p=2);var t=c.marker,n=t.sizeref||1,a=t.sizemin||0,i=t.sizemode==="area"?function(r){return Math.sqrt(r/n)}:function(r){return r/n};return function(r){var f=i(r/p);return l(f)&&f>0?Math.max(f,a):0}}},{"fast-isnumeric":190}],944:[function(e,k,z){k.exports={container:"marker",min:"cmin",max:"cmax"}},{}],945:[function(e,k,z){var l=e("../../components/color"),o=e("../../components/colorscale/helpers").hasColorscale,c=e("../../components/colorscale/defaults"),p=e("./subtypes");k.exports=function(n,a,i,r,f,u){var s=p.isBubble(n),h=(n.line||{}).color,d;if(u=u||{},h&&(i=h),f("marker.symbol"),f("marker.opacity",s?.7:1),f("marker.size"),f("marker.color",i),o(n,"marker")&&c(n,a,r,f,{prefix:"marker.",cLetter:"c"}),u.noSelect||(f("selected.marker.color"),f("unselected.marker.color"),f("selected.marker.size"),f("unselected.marker.size")),u.noLine||(h&&!Array.isArray(h)&&a.marker.color!==h?d=h:s?d=l.background:d=l.defaultLine,f("marker.line.color",d),o(n,"marker.line")&&c(n,a,r,f,{prefix:"marker.line.",cLetter:"c"}),f("marker.line.width",s?1:0)),s&&(f("marker.sizeref"),f("marker.sizemin"),f("marker.sizemode")),u.gradient){var y=f("marker.gradient.type");y!=="none"&&f("marker.gradient.color")}}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"./subtypes":951}],946:[function(e,k,z){var l=e("../../lib").dateTick0,o=e("../../constants/numerical"),c=o.ONEWEEK;function p(t,n){return t%c==0?l(n,1):l(n,0)}k.exports=function(n,a,i,r,f){if(f||(f={x:!0,y:!0}),f.x){var u=r("xperiod");u&&(r("xperiod0",p(u,a.xcalendar)),r("xperiodalignment"))}if(f.y){var s=r("yperiod");s&&(r("yperiod0",p(s,a.ycalendar)),r("yperiodalignment"))}}},{"../../constants/numerical":479,"../../lib":503}],947:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../registry"),c=e("../../lib"),p=c.ensureSingle,t=c.identity,n=e("../../components/drawing"),a=e("./subtypes"),i=e("./line_points"),r=e("./link_traces"),f=e("../../lib/polygon").tester;k.exports=function(y,m,g,x,A,b){var S,w,T=!A,_=!!A&&A.duration>0,v=r(y,m,g);if(S=x.selectAll("g.trace").data(v,function(M){return M[0].trace.uid}),S.enter().append("g").attr("class",function(M){return"trace scatter trace"+M[0].trace.uid}).style("stroke-miterlimit",2),S.order(),u(y,S,m),_){b&&(w=b());var P=l.transition().duration(A.duration).ease(A.easing).each("end",function(){w&&w()}).each("interrupt",function(){w&&w()});P.each(function(){x.selectAll("g.trace").each(function(M,E){s(y,E,m,M,v,this,A)})})}else S.each(function(M,E){s(y,E,m,M,v,this,A)});T&&S.exit().remove(),x.selectAll("path:not([d])").remove()};function u(d,y,m){y.each(function(g){var x=p(l.select(this),"g","fills");n.setClipUrl(x,m.layerClipId,d);var A=g[0].trace,b=[];A._ownfill&&b.push("_ownFill"),A._nexttrace&&b.push("_nextFill");var S=x.selectAll("g").data(b,t);S.enter().append("g"),S.exit().each(function(w){A[w]=null}).remove(),S.order().each(function(w){A[w]=p(l.select(this),"path","js-fill")})})}function s(d,y,m,g,x,A,b){var S;h(d,y,m,g,x);var w=!!b&&b.duration>0;function T(Ge){return w?Ge.transition():Ge}var _=m.xaxis,v=m.yaxis,P=g[0].trace,M=P.line,E=l.select(A),D=p(E,"g","errorbars"),N=p(E,"g","lines"),O=p(E,"g","points"),I=p(E,"g","text");if(o.getComponentMethod("errorbars","plot")(d,D,m,b),P.visible!==!0)return;T(E).style("opacity",P.opacity);var F,V,U=P.fill.charAt(P.fill.length-1);U!=="x"&&U!=="y"&&(U=""),g[0][m.isRangePlot?"nodeRangePlot3":"node3"]=E;var j="",Z=[],te=P._prevtrace;te&&(j=te._prevRevpath||"",V=te._nextFill,Z=te._polygons);var re,W,J="",le="",ue,se,G,Y,ee,$,K,Q=[],ae=c.noop;if(F=P._ownFill,a.hasLines(P)||P.fill!=="none"){for(V&&V.datum(g),["hv","vh","hvh","vhv"].indexOf(M.shape)!==-1?(ue=n.steps(M.shape),se=n.steps(M.shape.split("").reverse().join(""))):M.shape==="spline"?ue=se=function(Ge){var _e=Ge[Ge.length-1];return Ge.length>1&&Ge[0][0]===_e[0]&&Ge[0][1]===_e[1]?n.smoothclosed(Ge.slice(1),M.smoothing):n.smoothopen(Ge,M.smoothing)}:ue=se=function(Ge){return"M"+Ge.join("L")},G=function(Ge){return se(Ge.reverse())},Q=i(g,{xaxis:_,yaxis:v,connectGaps:P.connectgaps,baseTolerance:Math.max(M.width||1,3)/4,shape:M.shape,simplify:M.simplify,fill:P.fill}),K=P._polygons=new Array(Q.length),S=0;S<Q.length;S++)P._polygons[S]=f(Q[S]);Q.length&&(Y=Q[0][0],ee=Q[Q.length-1],$=ee[ee.length-1]),ae=function(Ge){return function(_e){if(re=ue(_e),W=G(_e),J?U?(J+="L"+re.substr(1),le=W+("L"+le.substr(1))):(J+="Z"+re,le=W+"Z"+le):(J=re,le=W),a.hasLines(P)&&_e.length>1){var Ie=l.select(this);if(Ie.datum(g),Ge)T(Ie.style("opacity",0).attr("d",re).call(n.lineGroupStyle)).style("opacity",1);else{var We=T(Ie);We.attr("d",re),n.singleLineStyle(g,We)}}}}}var ie=N.selectAll(".js-line").data(Q);T(ie.exit()).style("opacity",0).remove(),ie.each(ae(!1)),ie.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(n.lineGroupStyle).each(ae(!0)),n.setClipUrl(ie,m.layerClipId,d);function oe(Ge){T(Ge).attr("d","M0,0Z")}Q.length?(F?(F.datum(g),Y&&$&&(U?(U==="y"?Y[1]=$[1]=v.c2p(0,!0):U==="x"&&(Y[0]=$[0]=_.c2p(0,!0)),T(F).attr("d","M"+$+"L"+Y+"L"+J.substr(1)).call(n.singleFillStyle)):T(F).attr("d",J+"Z").call(n.singleFillStyle))):V&&(P.fill.substr(0,6)==="tonext"&&J&&j?(P.fill==="tonext"?T(V).attr("d",J+"Z"+j+"Z").call(n.singleFillStyle):T(V).attr("d",J+"L"+j.substr(1)+"Z").call(n.singleFillStyle),P._polygons=P._polygons.concat(Z)):(oe(V),P._polygons=null)),P._prevRevpath=le,P._prevPolygons=K):(F?oe(F):V&&oe(V),P._polygons=P._prevRevpath=P._prevPolygons=null);function fe(Ge){return Ge.filter(function(_e){return!_e.gap&&_e.vis})}function ye(Ge){return Ge.filter(function(_e){return _e.vis})}function ce(Ge){return Ge.filter(function(_e){return!_e.gap})}function me(Ge){return Ge.id}function xe(Ge){if(Ge.ids)return me}function ke(){return!1}function Ae(Ge,_e,Ie){var We,et,Ne,De=Ie[0].trace,Ve=a.hasMarkers(De),dt=a.hasText(De),Dt=xe(De),Gt=ke,Mt=ke;if(Ve||dt){var zt=t,Nt=De.stackgroup,Et=Nt&&d._fullLayout._scatterStackOpts[_._id+v._id][Nt].stackgaps==="infer zero";De.marker.maxdisplayed||De._needsCull?zt=Et?ye:fe:Nt&&!Et&&(zt=ce),Ve&&(Gt=zt),dt&&(Mt=zt)}et=Ge.selectAll("path.point"),We=et.data(Gt,Dt);var At=We.enter().append("path").classed("point",!0);w&&At.call(n.pointStyle,De,d).call(n.translatePoints,_,v).style("opacity",0).transition().style("opacity",1),We.order();var it;Ve&&(it=n.makePointStyleFns(De)),We.each(function(ht){var $e=l.select(this),Ee=T($e);Ne=n.translatePoint(ht,Ee,_,v),Ne?(n.singlePointStyle(ht,Ee,De,it,d),m.layerClipId&&n.hideOutsideRangePoint(ht,Ee,_,v,De.xcalendar,De.ycalendar),De.customdata&&$e.classed("plotly-customdata",ht.data!==null&&ht.data!==void 0)):Ee.remove()}),w?We.exit().transition().style("opacity",0).remove():We.exit().remove(),et=_e.selectAll("g"),We=et.data(Mt,Dt),We.enter().append("g").classed("textpoint",!0).append("text"),We.order(),We.each(function(ht){var $e=l.select(this),Ee=T($e.select("text"));Ne=n.translatePoint(ht,Ee,_,v),Ne?m.layerClipId&&n.hideOutsideRangePoint(ht,$e,_,v,De.xcalendar,De.ycalendar):$e.remove()}),We.selectAll("text").call(n.textPointStyle,De,d).each(function(ht){var $e=_.c2p(ht.x),Ee=v.c2p(ht.y);l.select(this).selectAll("tspan.line").each(function(){T(l.select(this)).attr({x:$e,y:Ee})})}),We.exit().remove()}O.datum(g),I.datum(g),Ae(O,I,g);var Oe=P.cliponaxis===!1,He=Oe?null:m.layerClipId;n.setClipUrl(O,He,d),n.setClipUrl(I,He,d)}function h(d,y,m,g,x){var A=m.xaxis,b=m.yaxis,S=l.extent(c.simpleMap(A.range,A.r2c)),w=l.extent(c.simpleMap(b.range,b.r2c)),T=g[0].trace;if(!!a.hasMarkers(T)){var _=T.marker.maxdisplayed;if(_!==0){var v=g.filter(function(D){return D.x>=S[0]&&D.x<=S[1]&&D.y>=w[0]&&D.y<=w[1]}),P=Math.ceil(v.length/_),M=0;x.forEach(function(D,N){var O=D[0].trace;a.hasMarkers(O)&&O.marker.maxdisplayed>0&&N<y&&M++});var E=Math.round(M*P/3+Math.floor(M/3)*P/7.1);g.forEach(function(D){delete D.vis}),v.forEach(function(D,N){Math.round((N+E)%P)===0&&(D.vis=!0)})}}}},{"../../components/drawing":388,"../../lib":503,"../../lib/polygon":515,"../../registry":638,"./line_points":940,"./link_traces":942,"./subtypes":951,"@plotly/d3":58}],948:[function(e,k,z){var l=e("./subtypes");k.exports=function(c,p){var t=c.cd,n=c.xaxis,a=c.yaxis,i=[],r=t[0].trace,f,u,s,h,d=!l.hasMarkers(r)&&!l.hasText(r);if(d)return[];if(p===!1)for(f=0;f<t.length;f++)t[f].selected=0;else for(f=0;f<t.length;f++)u=t[f],s=n.c2p(u.x),h=a.c2p(u.y),u.i!==null&&p.contains([s,h],!1,f,c)?(i.push({pointNumber:u.i,x:n.c2d(u.x),y:a.c2d(u.y)}),u.selected=1):u.selected=0;return i}},{"./subtypes":951}],949:[function(e,k,z){var l=["orientation","groupnorm","stackgaps"];k.exports=function(c,p,t,n){var a=t._scatterStackOpts,i=n("stackgroup");if(i){var r=p.xaxis+p.yaxis,f=a[r];f||(f=a[r]={});var u=f[i],s=!1;u?u.traces.push(p):(u=f[i]={traceIndices:[],traces:[p]},s=!0);for(var h={orientation:p.x&&!p.y?"h":"v"},d=0;d<l.length;d++){var y=l[d],m=y+"Found";if(!u[m]){var g=c[y]!==void 0,x=y==="orientation";if((g||s)&&(u[y]=n(y,h[y]),x&&(u.fillDflt=u[y]==="h"?"tonextx":"tonexty"),g&&(u[m]=!0,!s&&(delete u.traces[0][y],x))))for(var A=0;A<u.traces.length-1;A++){var b=u.traces[A];b._input.fill!==b.fill&&(b.fill=u.fillDflt)}}}return u}}},{}],950:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../components/drawing"),c=e("../../registry");function p(i){var r=l.select(i).selectAll("g.trace.scatter");r.style("opacity",function(f){return f[0].trace.opacity}),r.selectAll("g.points").each(function(f){var u=l.select(this),s=f.trace||f[0].trace;t(u,s,i)}),r.selectAll("g.text").each(function(f){var u=l.select(this),s=f.trace||f[0].trace;n(u,s,i)}),r.selectAll("g.trace path.js-line").call(o.lineGroupStyle),r.selectAll("g.trace path.js-fill").call(o.fillGroupStyle),c.getComponentMethod("errorbars","style")(r)}function t(i,r,f){o.pointStyle(i.selectAll("path.point"),r,f)}function n(i,r,f){o.textPointStyle(i.selectAll("text"),r,f)}function a(i,r,f){var u=r[0].trace;u.selectedpoints?(o.selectedPointStyle(f.selectAll("path.point"),u),o.selectedTextStyle(f.selectAll("text"),u)):(t(f,u,i),n(f,u,i))}k.exports={style:p,stylePoints:t,styleText:n,styleOnSelect:a}},{"../../components/drawing":388,"../../registry":638,"@plotly/d3":58}],951:[function(e,k,z){var l=e("../../lib");k.exports={hasLines:function(o){return o.visible&&o.mode&&o.mode.indexOf("lines")!==-1},hasMarkers:function(o){return o.visible&&(o.mode&&o.mode.indexOf("markers")!==-1||o.type==="splom")},hasText:function(o){return o.visible&&o.mode&&o.mode.indexOf("text")!==-1},isBubble:function(o){return l.isPlainObject(o.marker)&&l.isArrayOrTypedArray(o.marker.size)}}},{"../../lib":503}],952:[function(e,k,z){var l=e("../../lib");k.exports=function(o,c,p,t,n){n=n||{},t("textposition"),l.coerceFont(t,"textfont",p.font),n.noSelect||(t("selected.textfont.color"),t("unselected.textfont.color"))}},{"../../lib":503}],953:[function(e,k,z){var l=e("../../lib"),o=e("../../registry");k.exports=function(p,t,n,a){var i=a("x"),r=a("y"),f,u=o.getComponentMethod("calendars","handleTraceDefaults");if(u(p,t,["x","y"],n),i){var s=l.minRowLength(i);r?f=Math.min(s,l.minRowLength(r)):(f=s,a("y0"),a("dy"))}else{if(!r)return 0;f=l.minRowLength(r),a("x0"),a("dx")}return t._length=f,f}},{"../../lib":503,"../../registry":638}],954:[function(e,k,z){var l=e("../scatter/attributes"),o=e("../../components/colorscale/attributes"),c=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,p=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/template_attributes").texttemplateAttrs,n=e("../../plots/attributes"),a=e("../../constants/gl3d_dashes"),i=e("../../constants/gl3d_markers"),r=e("../../lib/extend").extendFlat,f=e("../../plot_api/edit_types").overrideAll,u=e("../../lib/sort_object_keys"),s=l.line,h=l.marker,d=h.line,y=r({width:s.width,dash:{valType:"enumerated",values:u(a),dflt:"solid"}},o("line"));function m(x){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var g=k.exports=f({x:l.x,y:l.y,z:{valType:"data_array"},text:r({},l.text,{}),texttemplate:t({},{}),hovertext:r({},l.hovertext,{}),hovertemplate:p(),xhoverformat:c("x"),yhoverformat:c("y"),zhoverformat:c("z"),mode:r({},l.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:m(),y:m(),z:m()},connectgaps:l.connectgaps,line:y,marker:r({symbol:{valType:"enumerated",values:u(i),dflt:"circle",arrayOk:!0},size:r({},h.size,{dflt:8}),sizeref:h.sizeref,sizemin:h.sizemin,sizemode:h.sizemode,opacity:r({},h.opacity,{arrayOk:!1}),colorbar:h.colorbar,line:r({width:r({},d.width,{arrayOk:!1})},o("marker.line"))},o("marker")),textposition:r({},l.textposition,{dflt:"top center"}),textfont:{color:l.textfont.color,size:l.textfont.size,family:r({},l.textfont.family,{arrayOk:!1})},opacity:n.opacity,hoverinfo:r({},n.hoverinfo)},"calc","nested");g.x.editType=g.y.editType=g.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":373,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../scatter/attributes":926}],955:[function(e,k,z){var l=e("../scatter/arrays_to_calcdata"),o=e("../scatter/colorscale_calc");k.exports=function(p,t){var n=[{x:!1,y:!1,trace:t,t:{}}];return l(n,t),o(p,t),n}},{"../scatter/arrays_to_calcdata":925,"../scatter/colorscale_calc":929}],956:[function(e,k,z){var l=e("../../registry");function o(t,n,a,i){if(!n||!n.visible)return null;for(var r=l.getComponentMethod("errorbars","makeComputeError")(n),f=new Array(t.length),u=0;u<t.length;u++){var s=r(+t[u],u);if(i.type==="log"){var h=i.c2l(t[u]),d=t[u]-s[0],y=t[u]+s[1];if(f[u]=[(i.c2l(d,!0)-h)*a,(i.c2l(y,!0)-h)*a],d>0){var m=i.c2l(d);i._lowerLogErrorBound||(i._lowerLogErrorBound=m),i._lowerErrorBound=Math.min(i._lowerLogErrorBound,m)}}else f[u]=[-s[0]*a,s[1]*a]}return f}function c(t){for(var n=0;n<t.length;n++)if(t[n])return t[n].length;return 0}function p(t,n,a){var i=[o(t.x,t.error_x,n[0],a.xaxis),o(t.y,t.error_y,n[1],a.yaxis),o(t.z,t.error_z,n[2],a.zaxis)],r=c(i);if(r===0)return null;for(var f=new Array(r),u=0;u<r;u++){for(var s=[[0,0,0],[0,0,0]],h=0;h<3;h++)if(i[h])for(var d=0;d<2;d++)s[d][h]=i[h][u][d];f[u]=s}return f}k.exports=p},{"../../registry":638}],957:[function(e,k,z){var l=e("../../../stackgl_modules").gl_line3d,o=e("../../../stackgl_modules").gl_scatter3d,c=e("../../../stackgl_modules").gl_error3d,p=e("../../../stackgl_modules").gl_mesh3d,t=e("../../../stackgl_modules").delaunay_triangulate,n=e("../../lib"),a=e("../../lib/str2rgbarray"),i=e("../../lib/gl_format_color").formatColor,r=e("../scatter/make_bubble_size_func"),f=e("../../constants/gl3d_dashes"),u=e("../../constants/gl3d_markers"),s=e("../../plots/cartesian/axes"),h=e("../../components/fx/helpers").appendArrayPointValue,d=e("./calc_errors");function y(D,N){this.scene=D,this.uid=N,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var m=y.prototype;m.handlePick=function(D){if(D.object&&(D.object===this.linePlot||D.object===this.delaunayMesh||D.object===this.textMarkers||D.object===this.scatterPlot)){var N=D.index=D.data.index;return D.object.highlight&&D.object.highlight(null),this.scatterPlot&&(D.object=this.scatterPlot,this.scatterPlot.highlight(D.data)),D.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[N]||this.textLabels[N]===0)&&(D.textLabel=this.textLabels[N]):D.textLabel=this.textLabels),D.traceCoordinate=[this.data.x[N],this.data.y[N],this.data.z[N]],!0}};function g(D,N,O){var I=(O+1)%3,F=(O+2)%3,V=[],U=[],j;for(j=0;j<D.length;++j){var Z=D[j];isNaN(Z[I])||!isFinite(Z[I])||isNaN(Z[F])||!isFinite(Z[F])||(V.push([Z[I],Z[F]]),U.push(j))}var te=t(V);for(j=0;j<te.length;++j)for(var re=te[j],W=0;W<re.length;++W)re[W]=U[re[W]];return{positions:D,cells:te,meshColor:N}}function x(D){for(var N=[0,0,0],O=[[0,0,0],[0,0,0],[0,0,0]],I=[1,1,1],F=0;F<3;F++){var V=D[F];V&&V.copy_zstyle!==!1&&D[2].visible!==!1&&(V=D[2]),!(!V||!V.visible)&&(N[F]=V.width/2,O[F]=a(V.color),I[F]=V.thickness)}return{capSize:N,color:O,lineWidth:I}}function A(D){return D==null?0:D.indexOf("left")>-1?-1:D.indexOf("right")>-1?1:0}function b(D){return D==null?0:D.indexOf("top")>-1?-1:D.indexOf("bottom")>-1?1:0}function S(D){var N=0,O=0,I=[N,O];if(Array.isArray(D))for(var F=0;F<D.length;F++)I[F]=[N,O],D[F]&&(I[F][0]=A(D[F]),I[F][1]=b(D[F]));else I[0]=A(D),I[1]=b(D);return I}function w(D,N){return N(D*4)}function T(D){return u[D]}function _(D,N,O,I,F){var V=null;if(n.isArrayOrTypedArray(D)){V=[];for(var U=0;U<N;U++)D[U]===void 0?V[U]=I:V[U]=O(D[U],F)}else V=O(D,n.identity);return V}function v(D,N){var O=[],I=D.fullSceneLayout,F=D.dataScale,V=I.xaxis,U=I.yaxis,j=I.zaxis,Z=N.marker,te=N.line,re=N.x||[],W=N.y||[],J=N.z||[],le=re.length,ue=N.xcalendar,se=N.ycalendar,G=N.zcalendar,Y,ee,$,K,Q,ae;for(Q=0;Q<le;Q++)Y=V.d2l(re[Q],0,ue)*F[0],ee=U.d2l(W[Q],0,se)*F[1],$=j.d2l(J[Q],0,G)*F[2],O[Q]=[Y,ee,$];if(Array.isArray(N.text))ae=N.text;else if(N.text!==void 0)for(ae=new Array(le),Q=0;Q<le;Q++)ae[Q]=N.text;function ie(et,Ne){var De=I[et];return s.tickText(De,De.d2l(Ne),!0).text}var oe=N.texttemplate;if(oe){var fe=D.fullLayout,ye=fe._d3locale,ce=Array.isArray(oe),me=ce?Math.min(oe.length,le):le,xe=ce?function(et){return oe[et]}:function(){return oe};for(ae=new Array(me),Q=0;Q<me;Q++){var ke={x:re[Q],y:W[Q],z:J[Q]},Ae={xLabel:ie("xaxis",re[Q]),yLabel:ie("yaxis",W[Q]),zLabel:ie("zaxis",J[Q])},Oe={};h(Oe,N,Q);var He=N._meta||{};ae[Q]=n.texttemplateString(xe(Q),Ae,ye,Oe,ke,He)}}if(K={position:O,mode:N.mode,text:ae},"line"in N&&(K.lineColor=i(te,1,le),K.lineWidth=te.width,K.lineDashes=te.dash),"marker"in N){var Ge=r(N);K.scatterColor=i(Z,1,le),K.scatterSize=_(Z.size,le,w,20,Ge),K.scatterMarker=_(Z.symbol,le,T,"\u25CF"),K.scatterLineWidth=Z.line.width,K.scatterLineColor=i(Z.line,1,le),K.scatterAngle=0}"textposition"in N&&(K.textOffset=S(N.textposition),K.textColor=i(N.textfont,1,le),K.textSize=_(N.textfont.size,le,n.identity,12),K.textFont=N.textfont.family,K.textAngle=0);var _e=["x","y","z"];for(K.project=[!1,!1,!1],K.projectScale=[1,1,1],K.projectOpacity=[1,1,1],Q=0;Q<3;++Q){var Ie=N.projection[_e[Q]];(K.project[Q]=Ie.show)&&(K.projectOpacity[Q]=Ie.opacity,K.projectScale[Q]=Ie.scale)}K.errorBounds=d(N,F,I);var We=x([N.error_x,N.error_y,N.error_z]);return K.errorColor=We.color,K.errorLineWidth=We.lineWidth,K.errorCapSize=We.capSize,K.delaunayAxis=N.surfaceaxis,K.delaunayColor=a(N.surfacecolor),K}function P(D){if(n.isArrayOrTypedArray(D)){var N=D[0];return n.isArrayOrTypedArray(N)&&(D=N),"rgb("+D.slice(0,3).map(function(O){return Math.round(O*255)})+")"}return null}function M(D){return n.isArrayOrTypedArray(D)?D.length===4&&typeof D[0]=="number"?P(D):D.map(P):null}m.update=function(D){var N=this.scene.glplot.gl,O,I,F,V,U=f.solid;this.data=D;var j=v(this.scene,D);"mode"in j&&(this.mode=j.mode),"lineDashes"in j&&j.lineDashes in f&&(U=f[j.lineDashes]),this.color=M(j.scatterColor)||M(j.lineColor),this.dataPoints=j.position,O={gl:this.scene.glplot.gl,position:j.position,color:j.lineColor,lineWidth:j.lineWidth||1,dashes:U[0],dashScale:U[1],opacity:D.opacity,connectGaps:D.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(O):(this.linePlot=l(O),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var Z=D.opacity;if(D.marker&&D.marker.opacity&&(Z*=D.marker.opacity),I={gl:this.scene.glplot.gl,position:j.position,color:j.scatterColor,size:j.scatterSize,glyph:j.scatterMarker,opacity:Z,orthographic:!0,lineWidth:j.scatterLineWidth,lineColor:j.scatterLineColor,project:j.project,projectScale:j.projectScale,projectOpacity:j.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(I):(this.scatterPlot=o(I),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),V={gl:this.scene.glplot.gl,position:j.position,glyph:j.text,color:j.textColor,size:j.textSize,angle:j.textAngle,alignment:j.textOffset,font:j.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:D.opacity},this.textLabels=D.hovertext||D.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(V):(this.textMarkers=o(V),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),F={gl:this.scene.glplot.gl,position:j.position,color:j.errorColor,error:j.errorBounds,lineWidth:j.errorLineWidth,capSize:j.errorCapSize,opacity:D.opacity},this.errorBars?j.errorBounds?this.errorBars.update(F):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):j.errorBounds&&(this.errorBars=c(F),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),j.delaunayAxis>=0){var te=g(j.position,j.delaunayColor,j.delaunayAxis);te.opacity=D.opacity,this.delaunayMesh?this.delaunayMesh.update(te):(te.gl=N,this.delaunayMesh=p(te),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},m.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function E(D,N){var O=new y(D,N.uid);return O.update(N),O}k.exports=E},{"../../../stackgl_modules":1120,"../../components/fx/helpers":402,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../scatter/make_bubble_size_func":943,"./calc_errors":956}],958:[function(e,k,z){var l=e("../../registry"),o=e("../../lib"),c=e("../scatter/subtypes"),p=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),n=e("../scatter/text_defaults"),a=e("./attributes");k.exports=function(f,u,s,h){function d(w,T){return o.coerce(f,u,a,w,T)}var y=i(f,u,d,h);if(!y){u.visible=!1;return}d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),d("zhoverformat"),d("mode"),c.hasLines(u)&&(d("connectgaps"),t(f,u,s,h,d)),c.hasMarkers(u)&&p(f,u,s,h,d,{noSelect:!0}),c.hasText(u)&&(d("texttemplate"),n(f,u,h,d,{noSelect:!0}));var m=(u.line||{}).color,g=(u.marker||{}).color;d("surfaceaxis")>=0&&d("surfacecolor",m||g);for(var x=["x","y","z"],A=0;A<3;++A){var b="projection."+x[A];d(b+".show")&&(d(b+".opacity"),d(b+".scale"))}var S=l.getComponentMethod("errorbars","supplyDefaults");S(f,u,m||g||s,{axis:"z"}),S(f,u,m||g||s,{axis:"y",inherit:"z"}),S(f,u,m||g||s,{axis:"x",inherit:"z"})};function i(r,f,u,s){var h=0,d=u("x"),y=u("y"),m=u("z"),g=l.getComponentMethod("calendars","handleTraceDefaults");return g(r,f,["x","y","z"],s),d&&y&&m&&(h=Math.min(d.length,y.length,m.length),f._length=f._xlength=f._ylength=f._zlength=h),h}},{"../../lib":503,"../../registry":638,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":954}],959:[function(e,k,z){k.exports={plot:e("./convert"),attributes:e("./attributes"),markerSymbols:e("../../constants/gl3d_markers"),supplyDefaults:e("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":477,"../../plots/gl3d":598,"./attributes":954,"./calc":955,"./convert":957,"./defaults":958}],960:[function(e,k,z){var l=e("../scatter/attributes"),o=e("../../plots/attributes"),c=e("../../plots/template_attributes").hovertemplateAttrs,p=e("../../plots/template_attributes").texttemplateAttrs,t=e("../../components/colorscale/attributes"),n=e("../../lib/extend").extendFlat,a=l.marker,i=l.line,r=a.line;k.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:n({},l.mode,{dflt:"markers"}),text:n({},l.text,{}),texttemplate:p({editType:"plot"},{keys:["a","b","text"]}),hovertext:n({},l.hovertext,{}),line:{color:i.color,width:i.width,dash:i.dash,shape:n({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:l.connectgaps,fill:n({},l.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:l.fillcolor,marker:n({symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:n({width:r.width,editType:"calc"},t("marker.line")),gradient:a.gradient,editType:"calc"},t("marker")),textfont:l.textfont,textposition:l.textposition,selected:l.selected,unselected:l.unselected,hoverinfo:n({},o.hoverinfo,{flags:["a","b","text","name"]}),hoveron:l.hoveron,hovertemplate:c()}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],961:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../scatter/colorscale_calc"),c=e("../scatter/arrays_to_calcdata"),p=e("../scatter/calc_selection"),t=e("../scatter/calc").calcMarkerSize,n=e("../carpet/lookup_carpetid");k.exports=function(i,r){var f=r._carpetTrace=n(i,r);if(!(!f||!f.visible||f.visible==="legendonly")){var u;r.xaxis=f.xaxis,r.yaxis=f.yaxis;var s=r._length,h=new Array(s),d,y,m=!1;for(u=0;u<s;u++)if(d=r.a[u],y=r.b[u],l(d)&&l(y)){var g=f.ab2xy(+d,+y,!0),x=f.isVisible(+d,+y);x||(m=!0),h[u]={x:g[0],y:g[1],a:d,b:y,vis:x}}else h[u]={x:!1,y:!1};return r._needsCull=m,h[0].carpet=f,h[0].trace=r,t(r,s),o(i,r),c(h,r),p(h,r),h}}},{"../carpet/lookup_carpetid":708,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],962:[function(e,k,z){var l=e("../../lib"),o=e("../scatter/constants"),c=e("../scatter/subtypes"),p=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),n=e("../scatter/line_shape_defaults"),a=e("../scatter/text_defaults"),i=e("../scatter/fillcolor_defaults"),r=e("./attributes");k.exports=function(u,s,h,d){function y(w,T){return l.coerce(u,s,r,w,T)}y("carpet"),s.xaxis="x",s.yaxis="y";var m=y("a"),g=y("b"),x=Math.min(m.length,g.length);if(!x){s.visible=!1;return}s._length=x,y("text"),y("texttemplate"),y("hovertext");var A=x<o.PTS_LINESONLY?"lines+markers":"lines";y("mode",A),c.hasLines(s)&&(t(u,s,h,d,y),n(u,s,y),y("connectgaps")),c.hasMarkers(s)&&p(u,s,h,d,y,{gradient:!0}),c.hasText(s)&&a(u,s,d,y);var b=[];(c.hasMarkers(s)||c.hasText(s))&&(y("marker.maxdisplayed"),b.push("points")),y("fill"),s.fill!=="none"&&(i(u,s,h,y),c.hasLines(s)||n(u,s,y)),(s.fill==="tonext"||s.fill==="toself")&&b.push("fills");var S=y("hoveron",b.join("+")||"points");S!=="fills"&&y("hovertemplate"),l.coerceSelectionMarkerOpacity(s,y)}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":960}],963:[function(e,k,z){k.exports=function(o,c,p,t,n){var a=t[n];return o.a=a.a,o.b=a.b,o.y=a.y,o}},{}],964:[function(e,k,z){k.exports=function(o,c){var p={},t=c._carpet,n=t.ab2ij([o.a,o.b]),a=Math.floor(n[0]),i=n[0]-a,r=Math.floor(n[1]),f=n[1]-r,u=t.evalxy([],a,r,i,f);return p.yLabel=u[1].toFixed(3),p}},{}],965:[function(e,k,z){var l=e("../scatter/hover"),o=e("../../lib").fillText;k.exports=function(p,t,n,a){var i=l(p,t,n,a);if(!i||i[0].index===!1)return;var r=i[0];if(r.index===void 0){var f=1-r.y0/p.ya._length,u=p.xa._length,s=u*f/2,h=u-s;return r.x0=Math.max(Math.min(r.x0,h),s),r.x1=Math.max(Math.min(r.x1,h),s),i}var d=r.cd[r.index];r.a=d.a,r.b=d.b,r.xLabelVal=void 0,r.yLabelVal=void 0;var y=r.trace,m=y._carpet,g=y._module.formatLabels(d,y);r.yLabel=g.yLabel,delete r.text;var x=[];function A(w,T){var _;w.labelprefix&&w.labelprefix.length>0?_=w.labelprefix.replace(/ = $/,""):_=w._hovertitle,x.push(_+": "+T.toFixed(3)+w.labelsuffix)}if(!y.hovertemplate){var b=d.hi||y.hoverinfo,S=b.split("+");S.indexOf("all")!==-1&&(S=["a","b","text"]),S.indexOf("a")!==-1&&A(m.aaxis,d.a),S.indexOf("b")!==-1&&A(m.baxis,d.b),x.push("y: "+r.yLabel),S.indexOf("text")!==-1&&o(d,y,x),r.extraText=x.join("<br>")}return i}},{"../../lib":503,"../scatter/hover":937}],966:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../scatter/select"),eventData:e("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:e("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":960,"./calc":961,"./defaults":962,"./event_data":963,"./format_labels":964,"./hover":965,"./plot":967}],967:[function(e,k,z){var l=e("../scatter/plot"),o=e("../../plots/cartesian/axes"),c=e("../../components/drawing");k.exports=function(t,n,a,i){var r,f,u,s=a[0][0].carpet,h={xaxis:o.getFromId(t,s.xaxis||"x"),yaxis:o.getFromId(t,s.yaxis||"y"),plot:n.plot};for(l(t,h,a,i),r=0;r<a.length;r++)f=a[r][0].trace,u=i.selectAll("g.trace"+f.uid+" .js-line"),c.setClipUrl(u,a[r][0].carpet._clipPathId,t)}},{"../../components/drawing":388,"../../plots/cartesian/axes":554,"../scatter/plot":947}],968:[function(e,k,z){var l=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../plots/template_attributes").texttemplateAttrs,c=e("../scatter/attributes"),p=e("../../plots/attributes"),t=e("../../components/colorscale/attributes"),n=e("../../components/drawing/attributes").dash,a=e("../../lib/extend").extendFlat,i=e("../../plot_api/edit_types").overrideAll,r=c.marker,f=c.line,u=r.line;k.exports=i({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:a({},c.mode,{dflt:"markers"}),text:a({},c.text,{}),texttemplate:o({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:a({},c.hovertext,{}),textfont:c.textfont,textposition:c.textposition,line:{color:f.color,width:f.width,dash:n},connectgaps:c.connectgaps,marker:a({symbol:r.symbol,opacity:r.opacity,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,colorbar:r.colorbar,line:a({width:u.width},t("marker.line")),gradient:r.gradient},t("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:c.fillcolor,selected:c.selected,unselected:c.unselected,hoverinfo:a({},p.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:l()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],969:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../constants/numerical").BADNUM,c=e("../scatter/colorscale_calc"),p=e("../scatter/arrays_to_calcdata"),t=e("../scatter/calc_selection"),n=e("../../lib")._;function a(i){return i&&typeof i=="string"}k.exports=function(r,f){var u=Array.isArray(f.locations),s=u?f.locations.length:f._length,h=new Array(s),d;f.geojson?d=function(b){return a(b)||l(b)}:d=a;for(var y=0;y<s;y++){var m=h[y]={};if(u){var g=f.locations[y];m.loc=d(g)?g:null}else{var x=f.lon[y],A=f.lat[y];l(x)&&l(A)?m.lonlat=[+x,+A]:m.lonlat=[o,o]}}return p(h,f),c(r,f),t(h,f),s&&(h[0].t={labels:{lat:n(r,"lat:")+" ",lon:n(r,"lon:")+" "}}),h}},{"../../constants/numerical":479,"../../lib":503,"../scatter/arrays_to_calcdata":925,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],970:[function(e,k,z){var l=e("../../lib"),o=e("../scatter/subtypes"),c=e("../scatter/marker_defaults"),p=e("../scatter/line_defaults"),t=e("../scatter/text_defaults"),n=e("../scatter/fillcolor_defaults"),a=e("./attributes");k.exports=function(r,f,u,s){function h(S,w){return l.coerce(r,f,a,S,w)}var d=h("locations"),y;if(d&&d.length){var m=h("geojson"),g;(typeof m=="string"&&m!==""||l.isPlainObject(m))&&(g="geojson-id");var x=h("locationmode",g);x==="geojson-id"&&h("featureidkey"),y=d.length}else{var A=h("lon")||[],b=h("lat")||[];y=Math.min(A.length,b.length)}if(!y){f.visible=!1;return}f._length=y,h("text"),h("hovertext"),h("hovertemplate"),h("mode"),o.hasLines(f)&&(p(r,f,u,s,h),h("connectgaps")),o.hasMarkers(f)&&c(r,f,u,s,h,{gradient:!0}),o.hasText(f)&&(h("texttemplate"),t(r,f,s,h)),h("fill"),f.fill!=="none"&&n(r,f,u,h),l.coerceSelectionMarkerOpacity(f,h)}},{"../../lib":503,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":968}],971:[function(e,k,z){k.exports=function(o,c,p,t,n){o.lon=c.lon,o.lat=c.lat,o.location=c.loc?c.loc:null;var a=t[n];return a.fIn&&a.fIn.properties&&(o.properties=a.fIn.properties),o}},{}],972:[function(e,k,z){var l=e("../../plots/cartesian/axes");k.exports=function(c,p,t){var n={},a=t[p.geo]._subplot,i=a.mockAxis,r=c.lonlat;return n.lonLabel=l.tickText(i,i.c2l(r[0]),!0).text,n.latLabel=l.tickText(i,i.c2l(r[1]),!0).text,n}},{"../../plots/cartesian/axes":554}],973:[function(e,k,z){var l=e("../../components/fx"),o=e("../../constants/numerical").BADNUM,c=e("../scatter/get_trace_color"),p=e("../../lib").fillText,t=e("./attributes");k.exports=function(i,r,f){var u=i.cd,s=u[0].trace,h=i.xa,d=i.ya,y=i.subplot,m=y.projection.isLonLatOverEdges,g=y.project;function x(v){var P=v.lonlat;if(P[0]===o||m(P))return 1/0;var M=g(P),E=g([r,f]),D=Math.abs(M[0]-E[0]),N=Math.abs(M[1]-E[1]),O=Math.max(3,v.mrc||0);return Math.max(Math.sqrt(D*D+N*N)-O,1-3/O)}if(l.getClosest(u,x,i),i.index!==!1){var A=u[i.index],b=A.lonlat,S=[h.c2p(b),d.c2p(b)],w=A.mrc||1;i.x0=S[0]-w,i.x1=S[0]+w,i.y0=S[1]-w,i.y1=S[1]+w,i.loc=A.loc,i.lon=b[0],i.lat=b[1];var T={};T[s.geo]={_subplot:y};var _=s._module.formatLabels(A,s,T);return i.lonLabel=_.lonLabel,i.latLabel=_.latLabel,i.color=c(s,A),i.extraText=n(s,A,i,u[0].t.labels),i.hovertemplate=s.hovertemplate,[i]}};function n(a,i,r,f){if(a.hovertemplate)return;var u=i.hi||a.hoverinfo,s=u==="all"?t.hoverinfo.flags:u.split("+"),h=s.indexOf("location")!==-1&&Array.isArray(a.locations),d=s.indexOf("lon")!==-1,y=s.indexOf("lat")!==-1,m=s.indexOf("text")!==-1,g=[];function x(A){return A+"\xB0"}return h?g.push(i.loc):d&&y?g.push("("+x(r.latLabel)+", "+x(r.lonLabel)+")"):d?g.push(f.lon+x(r.lonLabel)):y&&g.push(f.lat+x(r.latLabel)),m&&p(i,a,g),g.join("<br>")}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":936,"./attributes":968}],974:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),calcGeoJSON:e("./plot").calcGeoJSON,plot:e("./plot").plot,style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:e("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":589,"../scatter/marker_colorbar":944,"../scatter/style":950,"./attributes":968,"./calc":969,"./defaults":970,"./event_data":971,"./format_labels":972,"./hover":973,"./plot":975,"./select":976,"./style":977}],975:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../lib"),c=e("../../lib/topojson_utils").getTopojsonFeatures,p=e("../../lib/geojson_utils"),t=e("../../lib/geo_location_utils"),n=e("../../plots/cartesian/autorange").findExtremes,a=e("../../constants/numerical").BADNUM,i=e("../scatter/calc").calcMarkerSize,r=e("../scatter/subtypes"),f=e("./style");function u(h,d,y){var m=d.layers.frontplot.select(".scatterlayer"),g=o.makeTraceGroups(m,y,"trace scattergeo");function x(A,b){A.lonlat[0]===a&&l.select(b).remove()}g.selectAll("*").remove(),g.each(function(A){var b=l.select(this),S=A[0].trace;if(r.hasLines(S)||S.fill!=="none"){var w=p.calcTraceToLineCoords(A),T=S.fill!=="none"?p.makePolygon(w):p.makeLine(w);b.selectAll("path.js-line").data([{geojson:T,trace:S}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}r.hasMarkers(S)&&b.selectAll("path.point").data(o.identity).enter().append("path").classed("point",!0).each(function(_){x(_,this)}),r.hasText(S)&&b.selectAll("g").data(o.identity).enter().append("g").append("text").each(function(_){x(_,this)}),f(h,A)})}function s(h,d){var y=h[0].trace,m=d[y.geo],g=m._subplot,x=y._length,A,b;if(Array.isArray(y.locations)){var S=y.locationmode,w=S==="geojson-id"?t.extractTraceFeature(h):c(y,g.topojson);for(A=0;A<x;A++){b=h[A];var T=S==="geojson-id"?b.fOut:t.locationToFeature(S,b.loc,w);b.lonlat=T?T.properties.ct:[a,a]}}var _={padded:!0},v,P;if(m.fitbounds==="geojson"&&y.locationmode==="geojson-id"){var M=t.computeBbox(t.getTraceGeojson(y));v=[M[0],M[2]],P=[M[1],M[3]]}else{for(v=new Array(x),P=new Array(x),A=0;A<x;A++)b=h[A],v[A]=b.lonlat[0],P[A]=b.lonlat[1];_.ppad=i(y,x)}y._extremes.lon=n(m.lonaxis._ax,v,_),y._extremes.lat=n(m.lataxis._ax,P,_)}k.exports={calcGeoJSON:s,plot:u}},{"../../constants/numerical":479,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"../scatter/calc":927,"../scatter/subtypes":951,"./style":977,"@plotly/d3":58}],976:[function(e,k,z){var l=e("../scatter/subtypes"),o=e("../../constants/numerical").BADNUM;k.exports=function(p,t){var n=p.cd,a=p.xaxis,i=p.yaxis,r=[],f=n[0].trace,u,s,h,d,y,m=!l.hasMarkers(f)&&!l.hasText(f);if(m)return[];if(t===!1)for(y=0;y<n.length;y++)n[y].selected=0;else for(y=0;y<n.length;y++)u=n[y],s=u.lonlat,s[0]!==o&&(h=a.c2p(s),d=i.c2p(s),t.contains([h,d],null,y,p)?(r.push({pointNumber:y,lon:s[0],lat:s[1]}),u.selected=1):u.selected=0);return r}},{"../../constants/numerical":479,"../scatter/subtypes":951}],977:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../components/drawing"),c=e("../../components/color"),p=e("../scatter/style"),t=p.stylePoints,n=p.styleText;k.exports=function(r,f){f&&a(r,f)};function a(i,r){var f=r[0].trace,u=r[0].node3;u.style("opacity",r[0].trace.opacity),t(u,f,i),n(u,f,i),u.selectAll("path.js-line").style("fill","none").each(function(s){var h=l.select(this),d=s.trace,y=d.line||{};h.call(c.stroke,y.color).call(o.dashLine,y.dash||"",y.width||0),d.fill!=="none"&&h.call(c.fill,d.fillcolor)})}},{"../../components/color":366,"../../components/drawing":388,"../scatter/style":950,"@plotly/d3":58}],978:[function(e,k,z){var l=e("../../plots/attributes"),o=e("../scatter/attributes"),c=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,p=e("../../components/colorscale/attributes"),t=e("../../lib/sort_object_keys"),n=e("../../lib/extend").extendFlat,a=e("../../plot_api/edit_types").overrideAll,i=e("./constants").DASHES,r=o.line,f=o.marker,u=f.line,s=k.exports=a({x:o.x,x0:o.x0,dx:o.dx,y:o.y,y0:o.y0,dy:o.dy,xperiod:o.xperiod,yperiod:o.yperiod,xperiod0:o.xperiod0,yperiod0:o.yperiod0,xperiodalignment:o.xperiodalignment,yperiodalignment:o.yperiodalignment,xhoverformat:c("x"),yhoverformat:c("y"),text:o.text,hovertext:o.hovertext,textposition:o.textposition,textfont:o.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:r.color,width:r.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:t(i),dflt:"solid"}},marker:n({},p("marker"),{symbol:f.symbol,size:f.size,sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,opacity:f.opacity,colorbar:f.colorbar,line:n({},p("marker.line"),{width:u.width})}),connectgaps:o.connectgaps,fill:n({},o.fill,{dflt:"none"}),fillcolor:o.fillcolor,selected:{marker:o.selected.marker,textfont:o.selected.textfont},unselected:{marker:o.unselected.marker,textfont:o.unselected.textfont},opacity:l.opacity},"calc","nested");s.x.editType=s.y.editType=s.x0.editType=s.y0.editType="calc+clearAxisTypes",s.hovertemplate=o.hovertemplate,s.texttemplate=o.texttemplate},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":926,"./constants":980}],979:[function(e,k,z){var l=e("@plotly/point-cluster"),o=e("../../lib"),c=e("../../plots/cartesian/axis_ids"),p=e("../../plots/cartesian/autorange").findExtremes,t=e("../../plots/cartesian/align_period"),n=e("../scatter/calc"),a=n.calcMarkerSize,i=n.calcAxisExpansion,r=n.setFirstScatter,f=e("../scatter/colorscale_calc"),u=e("./convert"),s=e("./scene_update"),h=e("../../constants/numerical").BADNUM,d=e("./constants").TOO_MANY_POINTS;k.exports=function(x,A){var b=x._fullLayout,S=c.getFromId(x,A.xaxis),w=c.getFromId(x,A.yaxis),T=b._plots[A.xaxis+A.yaxis],_=A._length,v=_>=d,P=_*2,M={},E,D=S.makeCalcdata(A,"x"),N=w.makeCalcdata(A,"y"),O=t(A,S,"x",D),I=t(A,w,"y",N),F=O.vals,V=I.vals;A._x=F,A._y=V,A.xperiodalignment&&(A._origX=D,A._xStarts=O.starts,A._xEnds=O.ends),A.yperiodalignment&&(A._origY=N,A._yStarts=I.starts,A._yEnds=I.ends);var U=new Array(P),j=new Array(_);for(E=0;E<_;E++)U[E*2]=F[E]===h?NaN:F[E],U[E*2+1]=V[E]===h?NaN:V[E],j[E]=E;if(S.type==="log")for(E=0;E<P;E+=2)U[E]=S.c2l(U[E]);if(w.type==="log")for(E=1;E<P;E+=2)U[E]=w.c2l(U[E]);v&&S.type!=="log"&&w.type!=="log"?M.tree=l(U):M.ids=j,f(x,A);var Z=m(x,T,A,U,F,V),te=s(x,T);r(b,A);var re;return v?Z.marker&&(re=Z.marker.sizeAvg||Math.max(Z.marker.size,3)):re=a(A,_),i(x,A,S,w,F,V,re),Z.errorX&&y(A,S,Z.errorX),Z.errorY&&y(A,w,Z.errorY),Z.fill&&!te.fill2d&&(te.fill2d=!0),Z.marker&&!te.scatter2d&&(te.scatter2d=!0),Z.line&&!te.line2d&&(te.line2d=!0),(Z.errorX||Z.errorY)&&!te.error2d&&(te.error2d=!0),Z.text&&!te.glText&&(te.glText=!0),Z.marker&&(Z.marker.snap=_),te.lineOptions.push(Z.line),te.errorXOptions.push(Z.errorX),te.errorYOptions.push(Z.errorY),te.fillOptions.push(Z.fill),te.markerOptions.push(Z.marker),te.markerSelectedOptions.push(Z.markerSel),te.markerUnselectedOptions.push(Z.markerUnsel),te.textOptions.push(Z.text),te.textSelectedOptions.push(Z.textSel),te.textUnselectedOptions.push(Z.textUnsel),te.selectBatch.push([]),te.unselectBatch.push([]),M._scene=te,M.index=te.count,M.x=F,M.y=V,M.positions=U,te.count++,[{x:!1,y:!1,t:M,trace:A}]};function y(g,x,A){var b=g._extremes[x._id],S=p(x,A._bnds,{padded:!0});b.min=b.min.concat(S.min),b.max=b.max.concat(S.max)}function m(g,x,A,b,S,w){var T=u.style(g,A);if(T.marker&&(T.marker.positions=b),T.line&&b.length>1&&o.extendFlat(T.line,u.linePositions(g,A,b)),T.errorX||T.errorY){var _=u.errorBarPositions(g,A,b,S,w);T.errorX&&o.extendFlat(T.errorX,_.x),T.errorY&&o.extendFlat(T.errorY,_.y)}return T.text&&(o.extendFlat(T.text,{positions:b},u.textPosition(g,A,T.text,T.marker)),o.extendFlat(T.textSel,{positions:b},u.textPosition(g,A,T.text,T.markerSel)),o.extendFlat(T.textUnsel,{positions:b},u.textPosition(g,A,T.text,T.markerUnsel))),T}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"../scatter/calc":927,"../scatter/colorscale_calc":929,"./constants":980,"./convert":981,"./scene_update":989,"@plotly/point-cluster":59}],980:[function(e,k,z){var l=20;k.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:l,SYMBOL_STROKE:l/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],981:[function(e,k,z){var l=e("fast-isnumeric"),o=e("svg-path-sdf"),c=e("color-normalize"),p=e("../../registry"),t=e("../../lib"),n=e("../../components/drawing"),a=e("../../plots/cartesian/axis_ids"),i=e("../../lib/gl_format_color").formatColor,r=e("../scatter/subtypes"),f=e("../scatter/make_bubble_size_func"),u=e("./helpers"),s=e("./constants"),h=e("../../constants/interactions").DESELECTDIM,d={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},y=e("../../components/fx/helpers").appendArrayPointValue;function m(O,I){var F,V={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},U=O._context.plotGlPixelRatio;if(I.visible!==!0)return V;if(r.hasText(I)&&(V.text=g(O,I),V.textSel=b(O,I,I.selected),V.textUnsel=b(O,I,I.unselected)),r.hasMarkers(I)&&(V.marker=x(I),V.markerSel=A(I,I.selected),V.markerUnsel=A(I,I.unselected),!I.unselected&&t.isArrayOrTypedArray(I.marker.opacity))){var j=I.marker.opacity;for(V.markerUnsel.opacity=new Array(j.length),F=0;F<j.length;F++)V.markerUnsel.opacity[F]=h*j[F]}if(r.hasLines(I)){V.line={overlay:!0,thickness:I.line.width*U,color:I.line.color,opacity:I.opacity};var Z=(s.DASHES[I.line.dash]||[1]).slice();for(F=0;F<Z.length;++F)Z[F]*=I.line.width*U;V.line.dashes=Z}return I.error_x&&I.error_x.visible&&(V.errorX=S(I,I.error_x,U)),I.error_y&&I.error_y.visible&&(V.errorY=S(I,I.error_y,U)),!!I.fill&&I.fill!=="none"&&(V.fill={closed:!0,fill:I.fillcolor,thickness:0}),V}function g(O,I){var F=O._fullLayout,V=I._length,U=I.textfont,j=I.textposition,Z=Array.isArray(j)?j:[j],te=U.color,re=U.size,W=U.family,J={},le,ue=O._context.plotGlPixelRatio,se=I.texttemplate;if(se){J.text=[];var G=F._d3locale,Y=Array.isArray(se),ee=Y?Math.min(se.length,V):V,$=Y?function(ye){return se[ye]}:function(){return se};for(le=0;le<ee;le++){var K={i:le},Q=I._module.formatLabels(K,I,F),ae={};y(ae,I,le);var ie=I._meta||{};J.text.push(t.texttemplateString($(le),Q,G,ae,K,ie))}}else Array.isArray(I.text)&&I.text.length<V?J.text=I.text.slice():J.text=I.text;if(Array.isArray(J.text))for(le=J.text.length;le<V;le++)J.text[le]="";for(J.opacity=I.opacity,J.font={},J.align=[],J.baseline=[],le=0;le<Z.length;le++){var oe=Z[le].split(/\s+/);switch(oe[1]){case"left":J.align.push("right");break;case"right":J.align.push("left");break;default:J.align.push(oe[1])}switch(oe[0]){case"top":J.baseline.push("bottom");break;case"bottom":J.baseline.push("top");break;default:J.baseline.push(oe[0])}}if(Array.isArray(te))for(J.color=new Array(V),le=0;le<V;le++)J.color[le]=te[le];else J.color=te;if(t.isArrayOrTypedArray(re)||Array.isArray(W))for(J.font=new Array(V),le=0;le<V;le++){var fe=J.font[le]={};fe.size=(t.isTypedArray(re)?re[le]:Array.isArray(re)?l(re[le])?re[le]:0:re)*ue,fe.family=Array.isArray(W)?W[le]:W}else J.font={size:re*ue,family:W};return J}function x(O){var I=O._length,F=O.marker,V={},U,j=t.isArrayOrTypedArray(F.symbol),Z=t.isArrayOrTypedArray(F.color),te=t.isArrayOrTypedArray(F.line.color),re=t.isArrayOrTypedArray(F.opacity),W=t.isArrayOrTypedArray(F.size),J=t.isArrayOrTypedArray(F.line.width),le;if(j||(le=u.isOpenSymbol(F.symbol)),j||Z||te||re){V.colors=new Array(I),V.borderColors=new Array(I);var ue=i(F,F.opacity,I),se=i(F.line,F.opacity,I);if(!Array.isArray(se[0])){var G=se;for(se=Array(I),U=0;U<I;U++)se[U]=G}if(!Array.isArray(ue[0])){var Y=ue;for(ue=Array(I),U=0;U<I;U++)ue[U]=Y}for(V.colors=ue,V.borderColors=se,U=0;U<I;U++){if(j){var ee=F.symbol[U];le=u.isOpenSymbol(ee)}le&&(se[U]=ue[U].slice(),ue[U]=ue[U].slice(),ue[U][3]=0)}V.opacity=O.opacity}else le?(V.color=c(F.color,"uint8"),V.color[3]=0,V.borderColor=c(F.color,"uint8")):(V.color=c(F.color,"uint8"),V.borderColor=c(F.line.color,"uint8")),V.opacity=O.opacity*F.opacity;if(j)for(V.markers=new Array(I),U=0;U<I;U++)V.markers[U]=M(F.symbol[U]);else V.marker=M(F.symbol);var $=1,K=f(O,$),Q;if(W||J){var ae=V.sizes=new Array(I),ie=V.borderSizes=new Array(I),oe=0,fe;if(W){for(U=0;U<I;U++)ae[U]=K(F.size[U]),oe+=ae[U];fe=oe/I}else for(Q=K(F.size),U=0;U<I;U++)ae[U]=Q;if(J)for(U=0;U<I;U++)ie[U]=F.line.width[U];else for(Q=F.line.width,U=0;U<I;U++)ie[U]=Q;V.sizeAvg=fe}else V.size=K(F&&F.size||10),V.borderSizes=K(F.line.width);return V}function A(O,I){var F=O.marker,V={};return I&&(I.marker&&I.marker.symbol?V=x(t.extendFlat({},F,I.marker)):I.marker&&(I.marker.size&&(V.size=I.marker.size),I.marker.color&&(V.colors=I.marker.color),I.marker.opacity!==void 0&&(V.opacity=I.marker.opacity))),V}function b(O,I,F){var V={};if(!F)return V;if(F.textfont){var U={opacity:1,text:I.text,texttemplate:I.texttemplate,textposition:I.textposition,textfont:t.extendFlat({},I.textfont)};F.textfont&&t.extendFlat(U.textfont,F.textfont),V=g(O,U)}return V}function S(O,I,F){var V={capSize:I.width*2*F,lineWidth:I.thickness*F,color:I.color};return I.copy_ystyle&&(V=O.error_y),V}var w=s.SYMBOL_SDF_SIZE,T=s.SYMBOL_SIZE,_=s.SYMBOL_STROKE,v={},P=n.symbolFuncs[0](T*.05);function M(O){if(O==="circle")return null;var I,F,V=n.symbolNumber(O),U=n.symbolFuncs[V%100],j=!!n.symbolNoDot[V%100],Z=!!n.symbolNoFill[V%100],te=u.isDotSymbol(O);return v[O]?v[O]:(te&&!j?I=U(T*1.1)+P:I=U(T),F=o(I,{w,h:w,viewBox:[-T,-T,T,T],stroke:Z?_:-_}),v[O]=F,F||null)}function E(O,I,F){var V=F.length,U=V/2,j,Z;if(r.hasLines(I)&&U)if(I.line.shape==="hv"){for(j=[],Z=0;Z<U-1;Z++)isNaN(F[Z*2])||isNaN(F[Z*2+1])?j.push(NaN,NaN,NaN,NaN):(j.push(F[Z*2],F[Z*2+1]),!isNaN(F[Z*2+2])&&!isNaN(F[Z*2+3])?j.push(F[Z*2+2],F[Z*2+1]):j.push(NaN,NaN));j.push(F[V-2],F[V-1])}else if(I.line.shape==="hvh"){for(j=[],Z=0;Z<U-1;Z++)if(isNaN(F[Z*2])||isNaN(F[Z*2+1])||isNaN(F[Z*2+2])||isNaN(F[Z*2+3]))!isNaN(F[Z*2])&&!isNaN(F[Z*2+1])?j.push(F[Z*2],F[Z*2+1]):j.push(NaN,NaN),j.push(NaN,NaN);else{var te=(F[Z*2]+F[Z*2+2])/2;j.push(F[Z*2],F[Z*2+1],te,F[Z*2+1],te,F[Z*2+3])}j.push(F[V-2],F[V-1])}else if(I.line.shape==="vhv"){for(j=[],Z=0;Z<U-1;Z++)if(isNaN(F[Z*2])||isNaN(F[Z*2+1])||isNaN(F[Z*2+2])||isNaN(F[Z*2+3]))!isNaN(F[Z*2])&&!isNaN(F[Z*2+1])?j.push(F[Z*2],F[Z*2+1]):j.push(NaN,NaN),j.push(NaN,NaN);else{var re=(F[Z*2+1]+F[Z*2+3])/2;j.push(F[Z*2],F[Z*2+1],F[Z*2],re,F[Z*2+2],re)}j.push(F[V-2],F[V-1])}else if(I.line.shape==="vh"){for(j=[],Z=0;Z<U-1;Z++)isNaN(F[Z*2])||isNaN(F[Z*2+1])?j.push(NaN,NaN,NaN,NaN):(j.push(F[Z*2],F[Z*2+1]),!isNaN(F[Z*2+2])&&!isNaN(F[Z*2+3])?j.push(F[Z*2],F[Z*2+3]):j.push(NaN,NaN));j.push(F[V-2],F[V-1])}else j=F;var W=!1;for(Z=0;Z<j.length;Z++)if(isNaN(j[Z])){W=!0;break}var J=W||j.length>s.TOO_MANY_POINTS||r.hasMarkers(I)?"rect":"round";if(W&&I.connectgaps){var le=j[0],ue=j[1];for(Z=0;Z<j.length;Z+=2)isNaN(j[Z])||isNaN(j[Z+1])?(j[Z]=le,j[Z+1]=ue):(le=j[Z],ue=j[Z+1])}return{join:J,positions:j}}function D(O,I,F,V,U){var j=p.getComponentMethod("errorbars","makeComputeError"),Z=a.getFromId(O,I.xaxis),te=a.getFromId(O,I.yaxis),re=F.length/2,W={};function J(le,ue){var se=ue._id.charAt(0),G=I["error_"+se];if(G&&G.visible&&(ue.type==="linear"||ue.type==="log")){for(var Y=j(G),ee={x:0,y:1}[se],$={x:[0,1,2,3],y:[2,3,0,1]}[se],K=new Float64Array(4*re),Q=1/0,ae=-1/0,ie=0,oe=0;ie<re;ie++,oe+=4){var fe=le[ie];if(l(fe)){var ye=F[ie*2+ee],ce=Y(fe,ie),me=ce[0],xe=ce[1];if(l(me)&&l(xe)){var ke=fe-me,Ae=fe+xe;K[oe+$[0]]=ye-ue.c2l(ke),K[oe+$[1]]=ue.c2l(Ae)-ye,K[oe+$[2]]=0,K[oe+$[3]]=0,Q=Math.min(Q,fe-me),ae=Math.max(ae,fe+xe)}}}W[se]={positions:F,errors:K,_bnds:[Q,ae]}}}return J(V,Z),J(U,te),W}function N(O,I,F,V){var U=I._length,j={},Z;if(r.hasMarkers(I)){var te=F.font,re=F.align,W=F.baseline;for(j.offset=new Array(U),Z=0;Z<U;Z++){var J=V.sizes?V.sizes[Z]:V.size,le=Array.isArray(te)?te[Z].size:te.size,ue=Array.isArray(re)?re.length>1?re[Z]:re[0]:re,se=Array.isArray(W)?W.length>1?W[Z]:W[0]:W,G=d[ue],Y=d[se],ee=J?J/.8+1:0,$=-Y*ee-Y*.5;j.offset[Z]=[G*ee/le,$/le]}}return j}k.exports={style:m,markerStyle:x,markerSelection:A,linePositions:E,errorBarPositions:D,textPosition:N}},{"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/interactions":478,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../scatter/make_bubble_size_func":943,"../scatter/subtypes":951,"./constants":980,"./helpers":985,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":310}],982:[function(e,k,z){var l=e("../../lib"),o=e("../../registry"),c=e("./helpers"),p=e("./attributes"),t=e("../scatter/constants"),n=e("../scatter/subtypes"),a=e("../scatter/xy_defaults"),i=e("../scatter/period_defaults"),r=e("../scatter/marker_defaults"),f=e("../scatter/line_defaults"),u=e("../scatter/fillcolor_defaults"),s=e("../scatter/text_defaults");k.exports=function(d,y,m,g){function x(P,M){return l.coerce(d,y,p,P,M)}var A=d.marker?c.isOpenSymbol(d.marker.symbol):!1,b=n.isBubble(d),S=a(d,y,g,x);if(!S){y.visible=!1;return}i(d,y,g,x),x("xhoverformat"),x("yhoverformat");var w=S<t.PTS_LINESONLY?"lines+markers":"lines";x("text"),x("hovertext"),x("hovertemplate"),x("mode",w),n.hasLines(y)&&(x("connectgaps"),f(d,y,m,g,x),x("line.shape")),n.hasMarkers(y)&&(r(d,y,m,g,x),x("marker.line.width",A||b?1:0)),n.hasText(y)&&(x("texttemplate"),s(d,y,g,x));var T=(y.line||{}).color,_=(y.marker||{}).color;x("fill"),y.fill!=="none"&&u(d,y,m,x);var v=o.getComponentMethod("errorbars","supplyDefaults");v(d,y,T||_||m,{axis:"y"}),v(d,y,T||_||m,{axis:"x",inherit:"y"}),l.coerceSelectionMarkerOpacity(y,x)}},{"../../lib":503,"../../registry":638,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/period_defaults":946,"../scatter/subtypes":951,"../scatter/text_defaults":952,"../scatter/xy_defaults":953,"./attributes":978,"./helpers":985}],983:[function(e,k,z){var l=e("../../lib"),o=e("../../components/color"),c=e("../../constants/interactions").DESELECTDIM;function p(t){var n=t[0],a=n.trace,i=n.t,r=i._scene,f=i.index,u=r.selectBatch[f],s=r.unselectBatch[f],h=r.textOptions[f],d=r.textSelectedOptions[f]||{},y=r.textUnselectedOptions[f]||{},m=l.extendFlat({},h),g,x;if(u.length||s.length){var A=d.color,b=y.color,S=h.color,w=Array.isArray(S);for(m.color=new Array(a._length),g=0;g<u.length;g++)x=u[g],m.color[x]=A||(w?S[x]:S);for(g=0;g<s.length;g++){x=s[g];var T=w?S[x]:S;m.color[x]=b||(A?T:o.addOpacity(T,c))}}r.glText[f].update(m)}k.exports={styleTextSelection:p}},{"../../components/color":366,"../../constants/interactions":478,"../../lib":503}],984:[function(e,k,z){var l=e("../scatter/format_labels");k.exports=function(c,p,t){var n=c.i;return"x"in c||(c.x=p._x[n]),"y"in c||(c.y=p._y[n]),l(c,p,t)}},{"../scatter/format_labels":935}],985:[function(e,k,z){var l=e("./constants");z.isOpenSymbol=function(o){return typeof o=="string"?l.OPEN_RE.test(o):o%200>100},z.isDotSymbol=function(o){return typeof o=="string"?l.DOT_RE.test(o):o>200}},{"./constants":980}],986:[function(e,k,z){var l=e("../../registry"),o=e("../../lib"),c=e("../scatter/get_trace_color");function p(n,a,i,r){var f=n.cd,u=f[0].t,s=f[0].trace,h=n.xa,d=n.ya,y=u.x,m=u.y,g=h.c2p(a),x=d.c2p(i),A=n.distance,b;if(u.tree){var S=h.p2c(g-A),w=h.p2c(g+A),T=d.p2c(x-A),_=d.p2c(x+A);r==="x"?b=u.tree.range(Math.min(S,w),Math.min(d._rl[0],d._rl[1]),Math.max(S,w),Math.max(d._rl[0],d._rl[1])):b=u.tree.range(Math.min(S,w),Math.min(T,_),Math.max(S,w),Math.max(T,_))}else b=u.ids;var v,P,M,E,D,N,O,I,F,V=A;if(r==="x"){var U=!!s.xperiodalignment,j=!!s.yperiodalignment;for(D=0;D<b.length;D++){if(v=b[D],M=y[v],N=Math.abs(h.c2p(M)-g),U){var Z=h.c2p(s._xStarts[v]),te=h.c2p(s._xEnds[v]);N=g>=Math.min(Z,te)&&g<=Math.max(Z,te)?0:1/0}if(N<V){if(V=N,E=m[v],O=d.c2p(E)-x,j){var re=d.c2p(s._yStarts[v]),W=d.c2p(s._yEnds[v]);O=x>=Math.min(re,W)&&x<=Math.max(re,W)?0:1/0}F=Math.sqrt(N*N+O*O),P=b[D]}}}else for(D=b.length-1;D>-1;D--)v=b[D],M=y[v],E=m[v],N=h.c2p(M)-g,O=d.c2p(E)-x,I=Math.sqrt(N*N+O*O),I<V&&(V=F=I,P=v);return n.index=P,n.distance=V,n.dxy=F,P===void 0?[n]:[t(n,y,m,s)]}function t(n,a,i,r){var f=n.xa,u=n.ya,s=n.distance,h=n.dxy,d=n.index,y={pointNumber:d,x:a[d],y:i[d]};y.tx=Array.isArray(r.text)?r.text[d]:r.text,y.htx=Array.isArray(r.hovertext)?r.hovertext[d]:r.hovertext,y.data=Array.isArray(r.customdata)?r.customdata[d]:r.customdata,y.tp=Array.isArray(r.textposition)?r.textposition[d]:r.textposition;var m=r.textfont;m&&(y.ts=o.isArrayOrTypedArray(m.size)?m.size[d]:m.size,y.tc=Array.isArray(m.color)?m.color[d]:m.color,y.tf=Array.isArray(m.family)?m.family[d]:m.family);var g=r.marker;g&&(y.ms=o.isArrayOrTypedArray(g.size)?g.size[d]:g.size,y.mo=o.isArrayOrTypedArray(g.opacity)?g.opacity[d]:g.opacity,y.mx=o.isArrayOrTypedArray(g.symbol)?g.symbol[d]:g.symbol,y.mc=o.isArrayOrTypedArray(g.color)?g.color[d]:g.color);var x=g&&g.line;x&&(y.mlc=Array.isArray(x.color)?x.color[d]:x.color,y.mlw=o.isArrayOrTypedArray(x.width)?x.width[d]:x.width);var A=g&&g.gradient;A&&A.type!=="none"&&(y.mgt=Array.isArray(A.type)?A.type[d]:A.type,y.mgc=Array.isArray(A.color)?A.color[d]:A.color);var b=f.c2p(y.x,!0),S=u.c2p(y.y,!0),w=y.mrc||1,T=r.hoverlabel;T&&(y.hbg=Array.isArray(T.bgcolor)?T.bgcolor[d]:T.bgcolor,y.hbc=Array.isArray(T.bordercolor)?T.bordercolor[d]:T.bordercolor,y.hts=o.isArrayOrTypedArray(T.font.size)?T.font.size[d]:T.font.size,y.htc=Array.isArray(T.font.color)?T.font.color[d]:T.font.color,y.htf=Array.isArray(T.font.family)?T.font.family[d]:T.font.family,y.hnl=o.isArrayOrTypedArray(T.namelength)?T.namelength[d]:T.namelength);var _=r.hoverinfo;_&&(y.hi=Array.isArray(_)?_[d]:_);var v=r.hovertemplate;v&&(y.ht=Array.isArray(v)?v[d]:v);var P={};P[n.index]=y;var M=r._origX,E=r._origY,D=o.extendFlat({},n,{color:c(r,y),x0:b-w,x1:b+w,xLabelVal:M?M[d]:y.x,y0:S-w,y1:S+w,yLabelVal:E?E[d]:y.y,cd:P,distance:s,spikeDistance:h,hovertemplate:y.ht});return y.htx?D.text=y.htx:y.tx?D.text=y.tx:r.text&&(D.text=r.text),o.fillText(y,r,D),l.getComponentMethod("errorbars","hoverInfo")(y,r,D),D}k.exports={hoverPoints:p,calcHover:t}},{"../../lib":503,"../../registry":638,"../scatter/get_trace_color":936}],987:[function(e,k,z){var l=e("./hover");k.exports={moduleType:"trace",name:"scattergl",basePlotModule:e("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../scatter/cross_trace_defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),hoverPoints:l.hoverPoints,selectPoints:e("./select"),meta:{}}},{"../../plots/cartesian":568,"../scatter/cross_trace_defaults":932,"../scatter/marker_colorbar":944,"./attributes":978,"./calc":979,"./defaults":982,"./format_labels":984,"./hover":986,"./plot":988,"./select":990}],988:[function(e,k,z){var l=e("regl-scatter2d"),o=e("regl-line2d"),c=e("regl-error2d"),p=e("gl-text"),t=e("../../lib"),n=e("../../components/dragelement/helpers").selectMode,a=e("../../lib/prepare_regl"),i=e("../scatter/subtypes"),r=e("../scatter/link_traces"),f=e("./edit_style").styleTextSelection;function u(s,h,d,y){var m=s._size,g=s.width*y,x=s.height*y,A=m.l*y,b=m.b*y,S=m.r*y,w=m.t*y,T=m.w*y,_=m.h*y;return[A+h.domain[0]*T,b+d.domain[0]*_,g-S-(1-h.domain[1])*T,x-w-(1-d.domain[1])*_]}k.exports=function(h,d,y){if(!!y.length){var m=h._fullLayout,g=d._scene,x=d.xaxis,A=d.yaxis,b,S;if(!!g){var w=a(h,["ANGLE_instanced_arrays","OES_element_index_uint"]);if(!w){g.init();return}var T=g.count,_=m._glcanvas.data()[0].regl;if(r(h,d,y),g.dirty){if(g.error2d===!0&&(g.error2d=c(_)),g.line2d===!0&&(g.line2d=o(_)),g.scatter2d===!0&&(g.scatter2d=l(_)),g.fill2d===!0&&(g.fill2d=o(_)),g.glText===!0)for(g.glText=new Array(T),b=0;b<T;b++)g.glText[b]=new p(_);if(g.glText){if(T>g.glText.length){var v=T-g.glText.length;for(b=0;b<v;b++)g.glText.push(new p(_))}else if(T<g.glText.length){var P=g.glText.length-T,M=g.glText.splice(T,P);M.forEach(function(ee){ee.destroy()})}for(b=0;b<T;b++)g.glText[b].update(g.textOptions[b])}if(g.line2d&&(g.line2d.update(g.lineOptions),g.lineOptions=g.lineOptions.map(function(ee){if(ee&&ee.positions){for(var $=ee.positions,K=0;K<$.length&&(isNaN($[K])||isNaN($[K+1]));)K+=2;for(var Q=$.length-2;Q>K&&(isNaN($[Q])||isNaN($[Q+1]));)Q-=2;ee.positions=$.slice(K,Q+2)}return ee}),g.line2d.update(g.lineOptions)),g.error2d){var E=(g.errorXOptions||[]).concat(g.errorYOptions||[]);g.error2d.update(E)}g.scatter2d&&g.scatter2d.update(g.markerOptions),g.fillOrder=t.repeat(null,T),g.fill2d&&(g.fillOptions=g.fillOptions.map(function(ee,$){var K=y[$];if(!(!ee||!K||!K[0]||!K[0].trace)){var Q=K[0],ae=Q.trace,ie=Q.t,oe=g.lineOptions[$],fe,ye,ce=[];ae._ownfill&&ce.push($),ae._nexttrace&&ce.push($+1),ce.length&&(g.fillOrder[$]=ce);var me=[],xe=oe&&oe.positions||ie.positions,ke,Ae;if(ae.fill==="tozeroy"){for(ke=0;ke<xe.length&&isNaN(xe[ke+1]);)ke+=2;for(Ae=xe.length-2;Ae>ke&&isNaN(xe[Ae+1]);)Ae-=2;xe[ke+1]!==0&&(me=[xe[ke],0]),me=me.concat(xe.slice(ke,Ae+2)),xe[Ae+1]!==0&&(me=me.concat([xe[Ae],0]))}else if(ae.fill==="tozerox"){for(ke=0;ke<xe.length&&isNaN(xe[ke]);)ke+=2;for(Ae=xe.length-2;Ae>ke&&isNaN(xe[Ae]);)Ae-=2;xe[ke]!==0&&(me=[0,xe[ke+1]]),me=me.concat(xe.slice(ke,Ae+2)),xe[Ae]!==0&&(me=me.concat([0,xe[Ae+1]]))}else if(ae.fill==="toself"||ae.fill==="tonext"){for(me=[],fe=0,ee.splitNull=!0,ye=0;ye<xe.length;ye+=2)(isNaN(xe[ye])||isNaN(xe[ye+1]))&&(me=me.concat(xe.slice(fe,ye)),me.push(xe[fe],xe[fe+1]),me.push(null,null),fe=ye+2);me=me.concat(xe.slice(fe)),fe&&me.push(xe[fe],xe[fe+1])}else{var Oe=ae._nexttrace;if(Oe){var He=g.lineOptions[$+1];if(He){var Ge=He.positions;if(ae.fill==="tonexty"){for(me=xe.slice(),$=Math.floor(Ge.length/2);$--;){var _e=Ge[$*2],Ie=Ge[$*2+1];isNaN(_e)||isNaN(Ie)||me.push(_e,Ie)}ee.fill=Oe.fillcolor}}}}if(ae._prevtrace&&ae._prevtrace.fill==="tonext"){var We=g.lineOptions[$-1].positions,et=me.length/2;fe=et;var Ne=[fe];for(ye=0;ye<We.length;ye+=2)(isNaN(We[ye])||isNaN(We[ye+1]))&&(Ne.push(ye/2+et+1),fe=ye+2);me=me.concat(We),ee.hole=Ne}return ee.fillmode=ae.fill,ee.opacity=ae.opacity,ee.positions=me,ee}}),g.fill2d.update(g.fillOptions))}var D=m.dragmode,N=n(D),O=m.clickmode.indexOf("select")>-1;for(b=0;b<T;b++){var I=y[b][0],F=I.trace,V=I.t,U=V.index,j=F._length,Z=V.x,te=V.y;if(F.selectedpoints||N||O){if(N||(N=!0),F.selectedpoints){var re=g.selectBatch[U]=t.selIndices2selPoints(F),W={};for(S=0;S<re.length;S++)W[re[S]]=1;var J=[];for(S=0;S<j;S++)W[S]||J.push(S);g.unselectBatch[U]=J}var le=V.xpx=new Array(j),ue=V.ypx=new Array(j);for(S=0;S<j;S++)le[S]=x.c2p(Z[S]),ue[S]=A.c2p(te[S])}else V.xpx=V.ypx=null}if(N){if(g.select2d||(g.select2d=l(m._glcanvas.data()[1].regl)),g.scatter2d){var se=new Array(T);for(b=0;b<T;b++)se[b]=g.selectBatch[b].length||g.unselectBatch[b].length?g.markerUnselectedOptions[b]:{};g.scatter2d.update(se)}g.select2d&&(g.select2d.update(g.markerOptions),g.select2d.update(g.markerSelectedOptions)),g.glText&&y.forEach(function(ee){var $=((ee||[])[0]||{}).trace||{};i.hasText($)&&f(ee)})}else g.scatter2d&&g.scatter2d.update(g.markerOptions);var G={viewport:u(m,x,A,h._context.plotGlPixelRatio),range:[(x._rl||x.range)[0],(A._rl||A.range)[0],(x._rl||x.range)[1],(A._rl||A.range)[1]]},Y=t.repeat(G,g.count);g.fill2d&&g.fill2d.update(Y),g.line2d&&g.line2d.update(Y),g.error2d&&g.error2d.update(Y.concat(Y)),g.scatter2d&&g.scatter2d.update(Y),g.select2d&&g.select2d.update(Y),g.glText&&g.glText.forEach(function(ee){ee.update(G)})}}}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../lib/prepare_regl":516,"../scatter/link_traces":942,"../scatter/subtypes":951,"./edit_style":983,"gl-text":225,"regl-error2d":279,"regl-line2d":280,"regl-scatter2d":281}],989:[function(e,k,z){var l=e("../../lib");k.exports=function(c,p){var t=p._scene,n={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},a={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return p._scene||(t=p._scene={},t.init=function(){l.extendFlat(t,a,n)},t.init(),t.update=function(r){var f=l.repeat(r,t.count);if(t.fill2d&&t.fill2d.update(f),t.scatter2d&&t.scatter2d.update(f),t.line2d&&t.line2d.update(f),t.error2d&&t.error2d.update(f.concat(f)),t.select2d&&t.select2d.update(f),t.glText)for(var u=0;u<t.count;u++)t.glText[u].update(r)},t.draw=function(){for(var r=t.count,f=t.fill2d,u=t.error2d,s=t.line2d,h=t.scatter2d,d=t.glText,y=t.select2d,m=t.selectBatch,g=t.unselectBatch,x=0;x<r;x++){if(f&&t.fillOrder[x]&&f.draw(t.fillOrder[x]),s&&t.lineOptions[x]&&s.draw(x),u&&(t.errorXOptions[x]&&u.draw(x),t.errorYOptions[x]&&u.draw(x+r)),h&&t.markerOptions[x])if(g[x].length){var A=l.repeat([],t.count);A[x]=g[x],h.draw(A)}else m[x].length||h.draw(x);d[x]&&t.textOptions[x]&&d[x].render()}y&&y.draw(m),t.dirty=!1},t.destroy=function(){t.fill2d&&t.fill2d.destroy&&t.fill2d.destroy(),t.scatter2d&&t.scatter2d.destroy&&t.scatter2d.destroy(),t.error2d&&t.error2d.destroy&&t.error2d.destroy(),t.line2d&&t.line2d.destroy&&t.line2d.destroy(),t.select2d&&t.select2d.destroy&&t.select2d.destroy(),t.glText&&t.glText.forEach(function(r){r.destroy&&r.destroy()}),t.lineOptions=null,t.fillOptions=null,t.markerOptions=null,t.markerSelectedOptions=null,t.markerUnselectedOptions=null,t.errorXOptions=null,t.errorYOptions=null,t.textOptions=null,t.textSelectedOptions=null,t.textUnselectedOptions=null,t.selectBatch=null,t.unselectBatch=null,p._scene=null}),t.dirty||l.extendFlat(t,n),t}},{"../../lib":503}],990:[function(e,k,z){var l=e("../scatter/subtypes"),o=e("./edit_style").styleTextSelection;k.exports=function(p,t){var n=p.cd,a=p.xaxis,i=p.yaxis,r=[],f=n[0].trace,u=n[0].t,s=f._length,h=u.x,d=u.y,y=u._scene,m=u.index;if(!y)return r;var g=l.hasText(f),x=l.hasMarkers(f),A=!x&&!g;if(f.visible!==!0||A)return r;var b=[],S=[];if(t!==!1&&!t.degenerate)for(var w=0;w<s;w++)t.contains([u.xpx[w],u.ypx[w]],!1,w,p)?(b.push(w),r.push({pointNumber:w,x:a.c2d(h[w]),y:i.c2d(d[w])})):S.push(w);if(x){var T=y.scatter2d;if(!b.length&&!S.length){var _=new Array(y.count);_[m]=y.markerOptions[m],T.update.apply(T,_)}else if(!y.selectBatch[m].length&&!y.unselectBatch[m].length){var v=new Array(y.count);v[m]=y.markerUnselectedOptions[m],T.update.apply(T,v)}}return y.selectBatch[m]=b,y.unselectBatch[m]=S,g&&o(n),r}},{"../scatter/subtypes":951,"./edit_style":983}],991:[function(e,k,z){var l=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../plots/template_attributes").texttemplateAttrs,c=e("../scattergeo/attributes"),p=e("../scatter/attributes"),t=e("../../plots/mapbox/layout_attributes"),n=e("../../plots/attributes"),a=e("../../components/colorscale/attributes"),i=e("../../lib/extend").extendFlat,r=e("../../plot_api/edit_types").overrideAll,f=c.line,u=c.marker;k.exports=r({lon:c.lon,lat:c.lat,mode:i({},p.mode,{dflt:"markers"}),text:i({},p.text,{}),texttemplate:o({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:i({},p.hovertext,{}),line:{color:f.color,width:f.width},connectgaps:p.connectgaps,marker:i({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:u.opacity,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode},a("marker")),fill:c.fill,fillcolor:p.fillcolor,textfont:t.layers.symbol.textfont,textposition:t.layers.symbol.textposition,below:{valType:"string"},selected:{marker:p.selected.marker},unselected:{marker:p.unselected.marker},hoverinfo:i({},n.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:l()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/mapbox/layout_attributes":615,"../../plots/template_attributes":633,"../scatter/attributes":926,"../scattergeo/attributes":968}],992:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../lib"),c=e("../../constants/numerical").BADNUM,p=e("../../lib/geojson_utils"),t=e("../../components/colorscale"),n=e("../../components/drawing"),a=e("../scatter/make_bubble_size_func"),i=e("../scatter/subtypes"),r=e("../../plots/mapbox/convert_text_opts"),f=e("../../components/fx/helpers").appendArrayPointValue,u=e("../../lib/svg_text_utils").NEWLINES,s=e("../../lib/svg_text_utils").BR_TAG_ALL;k.exports=function(b,S){var w=S[0].trace,T=w.visible===!0&&w._length!==0,_=w.fill!=="none",v=i.hasLines(w),P=i.hasMarkers(w),M=i.hasText(w),E=P&&w.marker.symbol==="circle",D=P&&w.marker.symbol!=="circle",N=h(),O=h(),I=h(),F=h(),V={fill:N,line:O,circle:I,symbol:F};if(!T)return V;var U;if((_||v)&&(U=p.calcTraceToLineCoords(S)),_&&(N.geojson=p.makePolygon(U),N.layout.visibility="visible",o.extendFlat(N.paint,{"fill-color":w.fillcolor})),v&&(O.geojson=p.makeLine(U),O.layout.visibility="visible",o.extendFlat(O.paint,{"line-width":w.line.width,"line-color":w.line.color,"line-opacity":w.opacity})),E){var j=d(S);I.geojson=j.geojson,I.layout.visibility="visible",o.extendFlat(I.paint,{"circle-color":j.mcc,"circle-radius":j.mrc,"circle-opacity":j.mo})}if((D||M)&&(F.geojson=y(S,b),o.extendFlat(F.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),D&&(o.extendFlat(F.layout,{"icon-size":w.marker.size/10}),"angle"in w.marker&&w.marker.angle!=="auto"&&o.extendFlat(F.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),F.layout["icon-allow-overlap"]=w.marker.allowoverlap,o.extendFlat(F.paint,{"icon-opacity":w.opacity*w.marker.opacity,"icon-color":w.marker.color})),M)){var Z=(w.marker||{}).size,te=r(w.textposition,Z);o.extendFlat(F.layout,{"text-size":w.textfont.size,"text-anchor":te.anchor,"text-offset":te.offset}),o.extendFlat(F.paint,{"text-color":w.textfont.color,"text-opacity":w.opacity})}return V};function h(){return{geojson:p.makeBlank(),layout:{visibility:"none"},paint:{}}}function d(A){var b=A[0].trace,S=b.marker,w=b.selectedpoints,T=o.isArrayOrTypedArray(S.color),_=o.isArrayOrTypedArray(S.size),v=o.isArrayOrTypedArray(S.opacity),P;function M(te){return b.opacity*te}function E(te){return te/2}var D;T&&(t.hasColorscale(b,"marker")?D=t.makeColorScaleFuncFromTrace(S):D=o.identity);var N;_&&(N=a(b));var O;v&&(O=function(te){var re=l(te)?+o.constrain(te,0,1):0;return M(re)});var I=[];for(P=0;P<A.length;P++){var F=A[P],V=F.lonlat;if(!x(V)){var U={};D&&(U.mcc=F.mcc=D(F.mc)),N&&(U.mrc=F.mrc=N(F.ms)),O&&(U.mo=O(F.mo)),w&&(U.selected=F.selected||0),I.push({type:"Feature",geometry:{type:"Point",coordinates:V},properties:U})}}var j;if(w)for(j=n.makeSelectedPointStyleFns(b),P=0;P<I.length;P++){var Z=I[P].properties;j.selectedOpacityFn&&(Z.mo=M(j.selectedOpacityFn(Z))),j.selectedColorFn&&(Z.mcc=j.selectedColorFn(Z)),j.selectedSizeFn&&(Z.mrc=j.selectedSizeFn(Z))}return{geojson:{type:"FeatureCollection",features:I},mcc:T||j&&j.selectedColorFn?{type:"identity",property:"mcc"}:S.color,mrc:_||j&&j.selectedSizeFn?{type:"identity",property:"mrc"}:E(S.size),mo:v||j&&j.selectedOpacityFn?{type:"identity",property:"mo"}:M(S.opacity)}}function y(A,b){for(var S=b._fullLayout,w=A[0].trace,T=w.marker||{},_=T.symbol,v=T.angle,P=_!=="circle"?m(_):g,M=v!=="auto"?m(v,!0):g,E=i.hasText(w)?m(w.text):g,D=[],N=0;N<A.length;N++){var O=A[N];if(!x(O.lonlat)){var I=w.texttemplate,F;if(I){var V=Array.isArray(I)?I[N]||"":I,U=w._module.formatLabels(O,w,S),j={};f(j,w,O.i);var Z=w._meta||{};F=o.texttemplateString(V,U,S._d3locale,j,O,Z)}else F=E(N);F&&(F=F.replace(u,"").replace(s,`
`)),D.push({type:"Feature",geometry:{type:"Point",coordinates:O.lonlat},properties:{symbol:P(N),angle:M(N),text:F}})}}return{type:"FeatureCollection",features:D}}function m(A,b){return o.isArrayOrTypedArray(A)?b?function(S){return l(A[S])?+A[S]:0}:function(S){return A[S]}:A?function(){return A}:g}function g(){return""}function x(A){return A[0]===c}},{"../../components/colorscale":378,"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"../../lib/svg_text_utils":529,"../../plots/mapbox/convert_text_opts":612,"../scatter/make_bubble_size_func":943,"../scatter/subtypes":951,"fast-isnumeric":190}],993:[function(e,k,z){var l=e("../../lib"),o=e("../scatter/subtypes"),c=e("../scatter/marker_defaults"),p=e("../scatter/line_defaults"),t=e("../scatter/text_defaults"),n=e("../scatter/fillcolor_defaults"),a=e("./attributes");k.exports=function(f,u,s,h){function d(g,x){return l.coerce(f,u,a,g,x)}var y=i(f,u,d);if(!y){u.visible=!1;return}if(d("text"),d("texttemplate"),d("hovertext"),d("hovertemplate"),d("mode"),d("below"),o.hasLines(u)&&(p(f,u,s,h,d,{noDash:!0}),d("connectgaps")),o.hasMarkers(u)){c(f,u,s,h,d,{noLine:!0}),d("marker.allowoverlap"),d("marker.angle");var m=u.marker;m.symbol!=="circle"&&(l.isArrayOrTypedArray(m.size)&&(m.size=m.size[0]),l.isArrayOrTypedArray(m.color)&&(m.color=m.color[0]))}o.hasText(u)&&t(f,u,h,d,{noSelect:!0}),d("fill"),u.fill!=="none"&&n(f,u,s,d),l.coerceSelectionMarkerOpacity(u,d)};function i(r,f,u){var s=u("lon")||[],h=u("lat")||[],d=Math.min(s.length,h.length);return f._length=d,d}},{"../../lib":503,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":991}],994:[function(e,k,z){k.exports=function(o,c){return o.lon=c.lon,o.lat=c.lat,o}},{}],995:[function(e,k,z){var l=e("../../plots/cartesian/axes");k.exports=function(c,p,t){var n={},a=t[p.subplot]._subplot,i=a.mockAxis,r=c.lonlat;return n.lonLabel=l.tickText(i,i.c2l(r[0]),!0).text,n.latLabel=l.tickText(i,i.c2l(r[1]),!0).text,n}},{"../../plots/cartesian/axes":554}],996:[function(e,k,z){var l=e("../../components/fx"),o=e("../../lib"),c=e("../scatter/get_trace_color"),p=o.fillText,t=e("../../constants/numerical").BADNUM;function n(i,r,f){var u=i.cd,s=u[0].trace,h=i.xa,d=i.ya,y=i.subplot,m=r>=0?Math.floor((r+180)/360):Math.ceil((r-180)/360),g=m*360,x=r-g;function A(E){var D=E.lonlat;if(D[0]===t)return 1/0;var N=o.modHalf(D[0],360),O=D[1],I=y.project([N,O]),F=I.x-h.c2p([x,O]),V=I.y-d.c2p([N,f]),U=Math.max(3,E.mrc||0);return Math.max(Math.sqrt(F*F+V*V)-U,1-3/U)}if(l.getClosest(u,A,i),i.index!==!1){var b=u[i.index],S=b.lonlat,w=[o.modHalf(S[0],360)+g,S[1]],T=h.c2p(w),_=d.c2p(w),v=b.mrc||1;i.x0=T-v,i.x1=T+v,i.y0=_-v,i.y1=_+v;var P={};P[s.subplot]={_subplot:y};var M=s._module.formatLabels(b,s,P);return i.lonLabel=M.lonLabel,i.latLabel=M.latLabel,i.color=c(s,b),i.extraText=a(s,b,u[0].t.labels),i.hovertemplate=s.hovertemplate,[i]}}function a(i,r,f){if(i.hovertemplate)return;var u=r.hi||i.hoverinfo,s=u.split("+"),h=s.indexOf("all")!==-1,d=s.indexOf("lon")!==-1,y=s.indexOf("lat")!==-1,m=r.lonlat,g=[];function x(A){return A+"\xB0"}return h||d&&y?g.push("("+x(m[1])+", "+x(m[0])+")"):d?g.push(f.lon+x(m[0])):y&&g.push(f.lat+x(m[1])),(h||s.indexOf("text")!==-1)&&p(r,i,g),g.join("<br>")}k.exports={hoverPoints:n,getExtraText:a}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":936}],997:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("../scattergeo/calc"),plot:e("./plot"),hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),styleOnSelect:function(l,o){if(o){var c=o[0].trace;c._glTrace.update(o)}},moduleType:"trace",name:"scattermapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":613,"../scatter/marker_colorbar":944,"../scattergeo/calc":969,"./attributes":991,"./defaults":993,"./event_data":994,"./format_labels":995,"./hover":996,"./plot":998,"./select":999}],998:[function(e,k,z){var l=e("./convert"),o=e("../../plots/mapbox/constants").traceLayerPrefix,c=["fill","line","circle","symbol"];function p(n,a){this.type="scattermapbox",this.subplot=n,this.uid=a,this.sourceIds={fill:"source-"+a+"-fill",line:"source-"+a+"-line",circle:"source-"+a+"-circle",symbol:"source-"+a+"-symbol"},this.layerIds={fill:o+a+"-fill",line:o+a+"-line",circle:o+a+"-circle",symbol:o+a+"-symbol"},this.below=null}var t=p.prototype;t.addSource=function(n,a){this.subplot.map.addSource(this.sourceIds[n],{type:"geojson",data:a.geojson})},t.setSourceData=function(n,a){this.subplot.map.getSource(this.sourceIds[n]).setData(a.geojson)},t.addLayer=function(n,a,i){this.subplot.addLayer({type:n,id:this.layerIds[n],source:this.sourceIds[n],layout:a.layout,paint:a.paint},i)},t.update=function(a){var i=this.subplot,r=i.map,f=l(i.gd,a),u=i.belowLookup["trace-"+this.uid],s,h,d;if(u!==this.below){for(s=c.length-1;s>=0;s--)h=c[s],r.removeLayer(this.layerIds[h]);for(s=0;s<c.length;s++)h=c[s],d=f[h],this.addLayer(h,d,u);this.below=u}for(s=0;s<c.length;s++)h=c[s],d=f[h],i.setOptions(this.layerIds[h],"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&(this.setSourceData(h,d),i.setOptions(this.layerIds[h],"setPaintProperty",d.paint));a[0].trace._glTrace=this},t.dispose=function(){for(var a=this.subplot.map,i=c.length-1;i>=0;i--){var r=c[i];a.removeLayer(this.layerIds[r]),a.removeSource(this.sourceIds[r])}},k.exports=function(a,i){for(var r=i[0].trace,f=new p(a,r.uid),u=l(a.gd,i),s=f.below=a.belowLookup["trace-"+r.uid],h=0;h<c.length;h++){var d=c[h],y=u[d];f.addSource(d,y),f.addLayer(d,y,s)}return i[0].trace._glTrace=f,f}},{"../../plots/mapbox/constants":611,"./convert":992}],999:[function(e,k,z){var l=e("../../lib"),o=e("../scatter/subtypes"),c=e("../../constants/numerical").BADNUM;k.exports=function(t,n){var a=t.cd,i=t.xaxis,r=t.yaxis,f=[],u=a[0].trace,s;if(!o.hasMarkers(u))return[];if(n===!1)for(s=0;s<a.length;s++)a[s].selected=0;else for(s=0;s<a.length;s++){var h=a[s],d=h.lonlat;if(d[0]!==c){var y=[l.modHalf(d[0],360),d[1]],m=[i.c2p(y),r.c2p(y)];n.contains(m,null,s,t)?(f.push({pointNumber:s,lon:d[0],lat:d[1]}),h.selected=1):h.selected=0}}return f}},{"../../constants/numerical":479,"../../lib":503,"../scatter/subtypes":951}],1e3:[function(e,k,z){var l=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../plots/template_attributes").texttemplateAttrs,c=e("../../lib/extend").extendFlat,p=e("../scatter/attributes"),t=e("../../plots/attributes"),n=p.line;k.exports={mode:p.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:p.text,texttemplate:o({editType:"plot"},{keys:["r","theta","text"]}),hovertext:p.hovertext,line:{color:n.color,width:n.width,dash:n.dash,shape:c({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:p.connectgaps,marker:p.marker,cliponaxis:c({},p.cliponaxis,{dflt:!1}),textposition:p.textposition,textfont:p.textfont,fill:c({},p.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:p.fillcolor,hoverinfo:c({},t.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:p.hoveron,hovertemplate:l(),selected:p.selected,unselected:p.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1001:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../constants/numerical").BADNUM,c=e("../../plots/cartesian/axes"),p=e("../scatter/colorscale_calc"),t=e("../scatter/arrays_to_calcdata"),n=e("../scatter/calc_selection"),a=e("../scatter/calc").calcMarkerSize;k.exports=function(r,f){for(var u=r._fullLayout,s=f.subplot,h=u[s].radialaxis,d=u[s].angularaxis,y=h.makeCalcdata(f,"r"),m=d.makeCalcdata(f,"theta"),g=f._length,x=new Array(g),A=0;A<g;A++){var b=y[A],S=m[A],w=x[A]={};l(b)&&l(S)?(w.r=b,w.theta=S):w.r=o}var T=a(f,g);return f._extremes.x=c.findExtremes(h,y,{ppad:T}),p(r,f),t(x,f),n(x,f),x}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1002:[function(e,k,z){var l=e("../../lib"),o=e("../scatter/subtypes"),c=e("../scatter/marker_defaults"),p=e("../scatter/line_defaults"),t=e("../scatter/line_shape_defaults"),n=e("../scatter/text_defaults"),a=e("../scatter/fillcolor_defaults"),i=e("../scatter/constants").PTS_LINESONLY,r=e("./attributes");function f(s,h,d,y){function m(A,b){return l.coerce(s,h,r,A,b)}var g=u(s,h,y,m);if(!g){h.visible=!1;return}m("thetaunit"),m("mode",g<i?"lines+markers":"lines"),m("text"),m("hovertext"),h.hoveron!=="fills"&&m("hovertemplate"),o.hasLines(h)&&(p(s,h,d,y,m),t(s,h,m),m("connectgaps")),o.hasMarkers(h)&&c(s,h,d,y,m,{gradient:!0}),o.hasText(h)&&(m("texttemplate"),n(s,h,y,m));var x=[];(o.hasMarkers(h)||o.hasText(h))&&(m("cliponaxis"),m("marker.maxdisplayed"),x.push("points")),m("fill"),h.fill!=="none"&&(a(s,h,d,m),o.hasLines(h)||t(s,h,m)),(h.fill==="tonext"||h.fill==="toself")&&x.push("fills"),m("hoveron",x.join("+")||"points"),l.coerceSelectionMarkerOpacity(h,m)}function u(s,h,d,y){var m=y("r"),g=y("theta"),x;if(m)g?x=Math.min(m.length,g.length):(x=m.length,y("theta0"),y("dtheta"));else{if(!g)return 0;x=h.theta.length,y("r0"),y("dr")}return h._length=x,x}k.exports={handleRThetaDefaults:u,supplyDefaults:f}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1e3}],1003:[function(e,k,z){var l=e("../../lib"),o=e("../../plots/cartesian/axes");k.exports=function(p,t,n){var a={},i=n[t.subplot]._subplot,r,f;i?(r=i.radialAxis,f=i.angularAxis):(i=n[t.subplot],r=i.radialaxis,f=i.angularaxis);var u=r.c2l(p.r);a.rLabel=o.tickText(r,u,!0).text;var s=f.thetaunit==="degrees"?l.rad2deg(p.theta):p.theta;return a.thetaLabel=o.tickText(f,s,!0).text,a}},{"../../lib":503,"../../plots/cartesian/axes":554}],1004:[function(e,k,z){var l=e("../scatter/hover");function o(p,t,n,a){var i=l(p,t,n,a);if(!(!i||i[0].index===!1)){var r=i[0];if(r.index===void 0)return i;var f=p.subplot,u=r.cd[r.index],s=r.trace;if(!!f.isPtInside(u))return r.xLabelVal=void 0,r.yLabelVal=void 0,c(u,s,f,r),r.hovertemplate=s.hovertemplate,i}}function c(p,t,n,a){var i=n.radialAxis,r=n.angularAxis;i._hovertitle="r",r._hovertitle="\u03B8";var f={};f[t.subplot]={_subplot:n};var u=t._module.formatLabels(p,t,f);a.rLabel=u.rLabel,a.thetaLabel=u.thetaLabel;var s=p.hi||t.hoverinfo,h=[];function d(m,g){h.push(m._hovertitle+": "+g)}if(!t.hovertemplate){var y=s.split("+");y.indexOf("all")!==-1&&(y=["r","theta","text"]),y.indexOf("r")!==-1&&d(i,a.rLabel),y.indexOf("theta")!==-1&&d(r,a.thetaLabel),y.indexOf("text")!==-1&&a.text&&(h.push(a.text),delete a.text),a.extraText=h.join("<br>")}}k.exports={hoverPoints:o,makeHoverPointText:c}},{"../scatter/hover":937}],1005:[function(e,k,z){k.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,selectPoints:e("../scatter/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1e3,"./calc":1001,"./defaults":1002,"./format_labels":1003,"./hover":1004,"./plot":1006}],1006:[function(e,k,z){var l=e("../scatter/plot"),o=e("../../constants/numerical").BADNUM;k.exports=function(p,t,n){for(var a=t.layers.frontplot.select("g.scatterlayer"),i={xaxis:t.xaxis,yaxis:t.yaxis,plot:t.framework,layerClipId:t._hasClipOnAxisFalse?t.clipIds.forTraces:null},r=t.radialAxis,f=t.angularAxis,u=0;u<n.length;u++)for(var s=n[u],h=0;h<s.length;h++){var d=s[h],y=d.r;if(y===o)d.x=d.y=o;else{var m=r.c2g(y),g=f.c2g(d.theta);d.x=m*Math.cos(g),d.y=m*Math.sin(g)}}l(p,i,n,a)}},{"../../constants/numerical":479,"../scatter/plot":947}],1007:[function(e,k,z){var l=e("../scatterpolar/attributes"),o=e("../scattergl/attributes"),c=e("../../plots/template_attributes").texttemplateAttrs;k.exports={mode:l.mode,r:l.r,theta:l.theta,r0:l.r0,dr:l.dr,theta0:l.theta0,dtheta:l.dtheta,thetaunit:l.thetaunit,text:l.text,texttemplate:c({editType:"plot"},{keys:["r","theta","text"]}),hovertext:l.hovertext,hovertemplate:l.hovertemplate,line:o.line,connectgaps:o.connectgaps,marker:o.marker,fill:o.fill,fillcolor:o.fillcolor,textposition:o.textposition,textfont:o.textfont,hoverinfo:l.hoverinfo,selected:l.selected,unselected:l.unselected}},{"../../plots/template_attributes":633,"../scattergl/attributes":978,"../scatterpolar/attributes":1e3}],1008:[function(e,k,z){var l=e("../scatter/colorscale_calc"),o=e("../scatter/calc").calcMarkerSize,c=e("../scattergl/convert"),p=e("../../plots/cartesian/axes"),t=e("../scattergl/constants").TOO_MANY_POINTS;k.exports=function(a,i){var r=a._fullLayout,f=i.subplot,u=r[f].radialaxis,s=r[f].angularaxis,h=i._r=u.makeCalcdata(i,"r"),d=i._theta=s.makeCalcdata(i,"theta"),y=i._length,m={};y<h.length&&(h=h.slice(0,y)),y<d.length&&(d=d.slice(0,y)),m.r=h,m.theta=d,l(a,i);var g=m.opts=c.style(a,i),x;return y<t?x=o(i,y):g.marker&&(x=2*(g.marker.sizeAvg||Math.max(g.marker.size,3))),i._extremes.x=p.findExtremes(u,h,{ppad:x}),[{x:!1,y:!1,t:m,trace:i}]}},{"../../plots/cartesian/axes":554,"../scatter/calc":927,"../scatter/colorscale_calc":929,"../scattergl/constants":980,"../scattergl/convert":981}],1009:[function(e,k,z){var l=e("../../lib"),o=e("../scatter/subtypes"),c=e("../scatterpolar/defaults").handleRThetaDefaults,p=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),n=e("../scatter/text_defaults"),a=e("../scatter/fillcolor_defaults"),i=e("../scatter/constants").PTS_LINESONLY,r=e("./attributes");k.exports=function(u,s,h,d){function y(g,x){return l.coerce(u,s,r,g,x)}var m=c(u,s,d,y);if(!m){s.visible=!1;return}y("thetaunit"),y("mode",m<i?"lines+markers":"lines"),y("text"),y("hovertext"),s.hoveron!=="fills"&&y("hovertemplate"),o.hasLines(s)&&(t(u,s,h,d,y),y("connectgaps")),o.hasMarkers(s)&&p(u,s,h,d,y),o.hasText(s)&&(y("texttemplate"),n(u,s,d,y)),y("fill"),s.fill!=="none"&&a(u,s,h,y),l.coerceSelectionMarkerOpacity(s,y)}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"../scatterpolar/defaults":1002,"./attributes":1007}],1010:[function(e,k,z){var l=e("../scatterpolar/format_labels");k.exports=function(c,p,t){var n=c.i;return"r"in c||(c.r=p._r[n]),"theta"in c||(c.theta=p._theta[n]),l(c,p,t)}},{"../scatterpolar/format_labels":1003}],1011:[function(e,k,z){var l=e("../scattergl/hover"),o=e("../scatterpolar/hover").makeHoverPointText;function c(p,t,n,a){var i=p.cd,r=i[0].t,f=r.r,u=r.theta,s=l.hoverPoints(p,t,n,a);if(!(!s||s[0].index===!1)){var h=s[0];if(h.index===void 0)return s;var d=p.subplot,y=h.cd[h.index],m=h.trace;if(y.r=f[h.index],y.theta=u[h.index],!!d.isPtInside(y))return h.xLabelVal=void 0,h.yLabelVal=void 0,o(y,m,d,h),s}}k.exports={hoverPoints:c}},{"../scattergl/hover":986,"../scatterpolar/hover":1004}],1012:[function(e,k,z){k.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("../scattergl/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":944,"../scattergl/select":990,"./attributes":1007,"./calc":1008,"./defaults":1009,"./format_labels":1010,"./hover":1011,"./plot":1013}],1013:[function(e,k,z){var l=e("@plotly/point-cluster"),o=e("fast-isnumeric"),c=e("../scattergl/plot"),p=e("../scattergl/scene_update"),t=e("../scattergl/convert"),n=e("../../lib"),a=e("../scattergl/constants").TOO_MANY_POINTS;k.exports=function(r,f,u){if(!!u.length){var s=f.radialAxis,h=f.angularAxis,d=p(r,f);return u.forEach(function(y){if(!(!y||!y[0]||!y[0].trace)){var m=y[0],g=m.trace,x=m.t,A=g._length,b=x.r,S=x.theta,w=x.opts,T,_=b.slice(),v=S.slice();for(T=0;T<b.length;T++)f.isPtInside({r:b[T],theta:S[T]})||(_[T]=NaN,v[T]=NaN);var P=new Array(A*2),M=Array(A),E=Array(A);for(T=0;T<A;T++){var D=_[T],N,O;if(o(D)){var I=s.c2g(D),F=h.c2g(v[T],g.thetaunit);N=I*Math.cos(F),O=I*Math.sin(F)}else N=O=NaN;M[T]=P[T*2]=N,E[T]=P[T*2+1]=O}x.tree=l(P),w.marker&&A>=a&&(w.marker.cluster=x.tree),w.marker&&(w.markerSel.positions=w.markerUnsel.positions=w.marker.positions=P),w.line&&P.length>1&&n.extendFlat(w.line,t.linePositions(r,g,P)),w.text&&(n.extendFlat(w.text,{positions:P},t.textPosition(r,g,w.text,w.marker)),n.extendFlat(w.textSel,{positions:P},t.textPosition(r,g,w.text,w.markerSel)),n.extendFlat(w.textUnsel,{positions:P},t.textPosition(r,g,w.text,w.markerUnsel))),w.fill&&!d.fill2d&&(d.fill2d=!0),w.marker&&!d.scatter2d&&(d.scatter2d=!0),w.line&&!d.line2d&&(d.line2d=!0),w.text&&!d.glText&&(d.glText=!0),d.lineOptions.push(w.line),d.fillOptions.push(w.fill),d.markerOptions.push(w.marker),d.markerSelectedOptions.push(w.markerSel),d.markerUnselectedOptions.push(w.markerUnsel),d.textOptions.push(w.text),d.textSelectedOptions.push(w.textSel),d.textUnselectedOptions.push(w.textUnsel),d.selectBatch.push([]),d.unselectBatch.push([]),x.x=M,x.y=E,x.rawx=M,x.rawy=E,x.r=b,x.theta=S,x.positions=P,x._scene=d,x.index=d.count,d.count++}}),c(r,f,u)}}},{"../../lib":503,"../scattergl/constants":980,"../scattergl/convert":981,"../scattergl/plot":988,"../scattergl/scene_update":989,"@plotly/point-cluster":59,"fast-isnumeric":190}],1014:[function(e,k,z){var l=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../plots/template_attributes").texttemplateAttrs,c=e("../../lib/extend").extendFlat,p=e("../scatter/attributes"),t=e("../../plots/attributes"),n=p.line;k.exports={mode:p.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:p.text,texttemplate:o({editType:"plot"},{keys:["real","imag","text"]}),hovertext:p.hovertext,line:{color:n.color,width:n.width,dash:n.dash,shape:c({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:p.connectgaps,marker:p.marker,cliponaxis:c({},p.cliponaxis,{dflt:!1}),textposition:p.textposition,textfont:p.textfont,fill:c({},p.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:p.fillcolor,hoverinfo:c({},t.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:p.hoveron,hovertemplate:l(),selected:p.selected,unselected:p.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1015:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../../constants/numerical").BADNUM,c=e("../scatter/colorscale_calc"),p=e("../scatter/arrays_to_calcdata"),t=e("../scatter/calc_selection"),n=e("../scatter/calc").calcMarkerSize;k.exports=function(i,r){for(var f=i._fullLayout,u=r.subplot,s=f[u].realaxis,h=f[u].imaginaryaxis,d=s.makeCalcdata(r,"real"),y=h.makeCalcdata(r,"imag"),m=r._length,g=new Array(m),x=0;x<m;x++){var A=d[x],b=y[x],S=g[x]={};l(A)&&l(b)?(S.real=A,S.imag=b):S.real=o}return n(r,m),c(i,r),p(g,r),t(g,r),g}},{"../../constants/numerical":479,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1016:[function(e,k,z){var l=e("../../lib"),o=e("../scatter/subtypes"),c=e("../scatter/marker_defaults"),p=e("../scatter/line_defaults"),t=e("../scatter/line_shape_defaults"),n=e("../scatter/text_defaults"),a=e("../scatter/fillcolor_defaults"),i=e("../scatter/constants").PTS_LINESONLY,r=e("./attributes");k.exports=function(s,h,d,y){function m(A,b){return l.coerce(s,h,r,A,b)}var g=f(s,h,y,m);if(!g){h.visible=!1;return}m("mode",g<i?"lines+markers":"lines"),m("text"),m("hovertext"),h.hoveron!=="fills"&&m("hovertemplate"),o.hasLines(h)&&(p(s,h,d,y,m),t(s,h,m),m("connectgaps")),o.hasMarkers(h)&&c(s,h,d,y,m,{gradient:!0}),o.hasText(h)&&(m("texttemplate"),n(s,h,y,m));var x=[];(o.hasMarkers(h)||o.hasText(h))&&(m("cliponaxis"),m("marker.maxdisplayed"),x.push("points")),m("fill"),h.fill!=="none"&&(a(s,h,d,m),o.hasLines(h)||t(s,h,m)),(h.fill==="tonext"||h.fill==="toself")&&x.push("fills"),m("hoveron",x.join("+")||"points"),l.coerceSelectionMarkerOpacity(h,m)};function f(u,s,h,d){var y=d("real"),m=d("imag"),g;return y&&m&&(g=Math.min(y.length,m.length)),s._length=g,g}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1014}],1017:[function(e,k,z){var l=e("../../plots/cartesian/axes");k.exports=function(c,p,t){var n={},a=t[p.subplot]._subplot;return n.realLabel=l.tickText(a.radialAxis,c.real,!0).text,n.imagLabel=l.tickText(a.angularAxis,c.imag,!0).text,n}},{"../../plots/cartesian/axes":554}],1018:[function(e,k,z){var l=e("../scatter/hover");function o(p,t,n,a){var i=l(p,t,n,a);if(!(!i||i[0].index===!1)){var r=i[0];if(r.index===void 0)return i;var f=p.subplot,u=r.cd[r.index],s=r.trace;if(!!f.isPtInside(u))return r.xLabelVal=void 0,r.yLabelVal=void 0,c(u,s,f,r),r.hovertemplate=s.hovertemplate,i}}function c(p,t,n,a){var i=n.radialAxis,r=n.angularAxis;i._hovertitle="real",r._hovertitle="imag";var f={};f[t.subplot]={_subplot:n};var u=t._module.formatLabels(p,t,f);a.realLabel=u.realLabel,a.imagLabel=u.imagLabel;var s=p.hi||t.hoverinfo,h=[];function d(m,g){h.push(m._hovertitle+": "+g)}if(!t.hovertemplate){var y=s.split("+");y.indexOf("all")!==-1&&(y=["real","imag","text"]),y.indexOf("real")!==-1&&d(i,a.realLabel),y.indexOf("imag")!==-1&&d(r,a.imagLabel),y.indexOf("text")!==-1&&a.text&&(h.push(a.text),delete a.text),a.extraText=h.join("<br>")}}k.exports={hoverPoints:o,makeHoverPointText:c}},{"../scatter/hover":937}],1019:[function(e,k,z){k.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,selectPoints:e("../scatter/select"),meta:{}}},{"../../plots/smith":629,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1014,"./calc":1015,"./defaults":1016,"./format_labels":1017,"./hover":1018,"./plot":1020}],1020:[function(e,k,z){var l=e("../scatter/plot"),o=e("../../constants/numerical").BADNUM,c=e("../../plots/smith/helpers"),p=c.smith;k.exports=function(n,a,i){for(var r=a.layers.frontplot.select("g.scatterlayer"),f={xaxis:a.xaxis,yaxis:a.yaxis,plot:a.framework,layerClipId:a._hasClipOnAxisFalse?a.clipIds.forTraces:null},u=0;u<i.length;u++)for(var s=i[u],h=0;h<s.length;h++){var d=s[h],y=d.real;if(y===o)d.x=d.y=o;else{var m=p([y,d.imag]);d.x=m[0],d.y=m[1]}}l(n,f,i,r)}},{"../../constants/numerical":479,"../../plots/smith/helpers":628,"../scatter/plot":947}],1021:[function(e,k,z){var l=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../plots/template_attributes").texttemplateAttrs,c=e("../scatter/attributes"),p=e("../../plots/attributes"),t=e("../../components/colorscale/attributes"),n=e("../../components/drawing/attributes").dash,a=e("../../lib/extend").extendFlat,i=c.marker,r=c.line,f=i.line;k.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:a({},c.mode,{dflt:"markers"}),text:a({},c.text,{}),texttemplate:o({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:a({},c.hovertext,{}),line:{color:r.color,width:r.width,dash:n,shape:a({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:c.connectgaps,cliponaxis:c.cliponaxis,fill:a({},c.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:c.fillcolor,marker:a({symbol:i.symbol,opacity:i.opacity,maxdisplayed:i.maxdisplayed,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,line:a({width:f.width,editType:"calc"},t("marker.line")),gradient:i.gradient,editType:"calc"},t("marker")),textfont:c.textfont,textposition:c.textposition,selected:c.selected,unselected:c.unselected,hoverinfo:a({},p.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:c.hoveron,hovertemplate:l()}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1022:[function(e,k,z){var l=e("fast-isnumeric"),o=e("../scatter/colorscale_calc"),c=e("../scatter/arrays_to_calcdata"),p=e("../scatter/calc_selection"),t=e("../scatter/calc").calcMarkerSize,n=["a","b","c"],a={a:["b","c"],b:["a","c"],c:["a","b"]};k.exports=function(r,f){var u=r._fullLayout[f.subplot],s=u.sum,h=f.sum||s,d={a:f.a,b:f.b,c:f.c},y,m,g,x,A,b;for(y=0;y<n.length;y++)if(g=n[y],!d[g]){for(A=d[a[g][0]],b=d[a[g][1]],x=new Array(A.length),m=0;m<A.length;m++)x[m]=h-A[m]-b[m];d[g]=x}var S=f._length,w=new Array(S),T,_,v,P,M,E;for(y=0;y<S;y++)T=d.a[y],_=d.b[y],v=d.c[y],l(T)&&l(_)&&l(v)?(T=+T,_=+_,v=+v,P=s/(T+_+v),P!==1&&(T*=P,_*=P,v*=P),E=T,M=v-_,w[y]={x:M,y:E,a:T,b:_,c:v}):w[y]={x:!1,y:!1};return t(f,S),o(r,f),c(w,f),p(w,f),w}},{"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1023:[function(e,k,z){var l=e("../../lib"),o=e("../scatter/constants"),c=e("../scatter/subtypes"),p=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),n=e("../scatter/line_shape_defaults"),a=e("../scatter/text_defaults"),i=e("../scatter/fillcolor_defaults"),r=e("./attributes");k.exports=function(u,s,h,d){function y(w,T){return l.coerce(u,s,r,w,T)}var m=y("a"),g=y("b"),x=y("c"),A;if(m?(A=m.length,g?(A=Math.min(A,g.length),x&&(A=Math.min(A,x.length))):x?A=Math.min(A,x.length):A=0):g&&x&&(A=Math.min(g.length,x.length)),!A){s.visible=!1;return}s._length=A,y("sum"),y("text"),y("hovertext"),s.hoveron!=="fills"&&y("hovertemplate");var b=A<o.PTS_LINESONLY?"lines+markers":"lines";y("mode",b),c.hasLines(s)&&(t(u,s,h,d,y),n(u,s,y),y("connectgaps")),c.hasMarkers(s)&&p(u,s,h,d,y,{gradient:!0}),c.hasText(s)&&(y("texttemplate"),a(u,s,d,y));var S=[];(c.hasMarkers(s)||c.hasText(s))&&(y("cliponaxis"),y("marker.maxdisplayed"),S.push("points")),y("fill"),s.fill!=="none"&&(i(u,s,h,y),c.hasLines(s)||n(u,s,y)),(s.fill==="tonext"||s.fill==="toself")&&S.push("fills"),y("hoveron",S.join("+")||"points"),l.coerceSelectionMarkerOpacity(s,y)}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1021}],1024:[function(e,k,z){k.exports=function(o,c,p,t,n){if(c.xa&&(o.xaxis=c.xa),c.ya&&(o.yaxis=c.ya),t[n]){var a=t[n];o.a=a.a,o.b=a.b,o.c=a.c}else o.a=c.a,o.b=c.b,o.c=c.c;return o}},{}],1025:[function(e,k,z){var l=e("../../plots/cartesian/axes");k.exports=function(c,p,t){var n={},a=t[p.subplot]._subplot;return n.aLabel=l.tickText(a.aaxis,c.a,!0).text,n.bLabel=l.tickText(a.baxis,c.b,!0).text,n.cLabel=l.tickText(a.caxis,c.c,!0).text,n}},{"../../plots/cartesian/axes":554}],1026:[function(e,k,z){var l=e("../scatter/hover");k.exports=function(c,p,t,n){var a=l(c,p,t,n);if(!a||a[0].index===!1)return;var i=a[0];if(i.index===void 0){var r=1-i.y0/c.ya._length,f=c.xa._length,u=f*r/2,s=f-u;return i.x0=Math.max(Math.min(i.x0,s),u),i.x1=Math.max(Math.min(i.x1,s),u),a}var h=i.cd[i.index],d=i.trace,y=i.subplot;i.a=h.a,i.b=h.b,i.c=h.c,i.xLabelVal=void 0,i.yLabelVal=void 0;var m={};m[d.subplot]={_subplot:y};var g=d._module.formatLabels(h,d,m);i.aLabel=g.aLabel,i.bLabel=g.bLabel,i.cLabel=g.cLabel;var x=h.hi||d.hoverinfo,A=[];function b(w,T){A.push(w._hovertitle+": "+T)}if(!d.hovertemplate){var S=x.split("+");S.indexOf("all")!==-1&&(S=["a","b","c"]),S.indexOf("a")!==-1&&b(y.aaxis,i.aLabel),S.indexOf("b")!==-1&&b(y.baxis,i.bLabel),S.indexOf("c")!==-1&&b(y.caxis,i.cLabel)}return i.extraText=A.join("<br>"),i.hovertemplate=d.hovertemplate,a}},{"../scatter/hover":937}],1027:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../scatter/select"),eventData:e("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:e("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":634,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1021,"./calc":1022,"./defaults":1023,"./event_data":1024,"./format_labels":1025,"./hover":1026,"./plot":1028}],1028:[function(e,k,z){var l=e("../scatter/plot");k.exports=function(c,p,t){var n=p.plotContainer;n.select(".scatterlayer").selectAll("*").remove();var a={xaxis:p.xaxis,yaxis:p.yaxis,plot:n,layerClipId:p._hasClipOnAxisFalse?p.clipIdRelative:null},i=p.layers.frontplot.select("g.scatterlayer");l(c,a,t,i)}},{"../scatter/plot":947}],1029:[function(e,k,z){var l=e("../scatter/attributes"),o=e("../../components/colorscale/attributes"),c=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,p=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../scattergl/attributes"),n=e("../../plots/cartesian/constants").idRegex,a=e("../../plot_api/plot_template").templatedArray,i=e("../../lib/extend").extendFlat,r=l.marker,f=r.line,u=i(o("marker.line",{editTypeOverride:"calc"}),{width:i({},f.width,{editType:"calc"}),editType:"calc"}),s=i(o("marker"),{symbol:r.symbol,size:i({},r.size,{editType:"markerSize"}),sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,opacity:r.opacity,colorbar:r.colorbar,line:u,editType:"calc"});s.color.editType=s.cmin.editType=s.cmax.editType="style";function h(d){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:n[d],editType:"plot"}}}k.exports={dimensions:a("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:i({},t.text,{}),hovertext:i({},t.hovertext,{}),hovertemplate:p(),xhoverformat:c("x"),yhoverformat:c("y"),marker:s,xaxes:h("x"),yaxes:h("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:t.selected.marker,editType:"calc"},unselected:{marker:t.unselected.marker,editType:"calc"},opacity:t.opacity}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/constants":561,"../../plots/template_attributes":633,"../scatter/attributes":926,"../scattergl/attributes":978}],1030:[function(e,k,z){var l=e("regl-line2d"),o=e("../../registry"),c=e("../../lib/prepare_regl"),p=e("../../plots/get_data").getModuleCalcData,t=e("../../plots/cartesian"),n=e("../../plots/cartesian/axis_ids").getFromId,a=e("../../plots/cartesian/axes").shouldShowZeroLine,i="splom";function r(y){var m=y._fullLayout,g=o.getModule(i),x=p(y.calcdata,g)[0],A=c(y,["ANGLE_instanced_arrays","OES_element_index_uint"]);!A||(m._hasOnlyLargeSploms&&s(y),g.plot(y,{},x))}function f(y){var m=y.calcdata,g=y._fullLayout;g._hasOnlyLargeSploms&&s(y);for(var x=0;x<m.length;x++){var A=m[x][0],b=A.trace,S=g._splomScenes[b.uid];b.type==="splom"&&S&&S.matrix&&u(y,b,S)}}function u(y,m,g){for(var x=g.matrixOptions.data.length,A=m._visibleDims,b=g.viewOpts.ranges=new Array(x),S=0;S<A.length;S++){var w=A[S],T=b[S]=new Array(4),_=n(y,m._diag[w][0]);_&&(T[0]=_.r2l(_.range[0]),T[2]=_.r2l(_.range[1]));var v=n(y,m._diag[w][1]);v&&(T[1]=v.r2l(v.range[0]),T[3]=v.r2l(v.range[1]))}g.selectBatch.length||g.unselectBatch.length?g.matrix.update({ranges:b},{ranges:b}):g.matrix.update({ranges:b})}function s(y){var m=y._fullLayout,g=m._glcanvas.data()[0].regl,x=m._splomGrid;x||(x=m._splomGrid=l(g)),x.update(h(y))}function h(y){var m=y._context.plotGlPixelRatio,g=y._fullLayout,x=g._size,A=[0,0,g.width*m,g.height*m],b={},S;function w(Z,te,re,W,J,le){re*=m,W*=m,J*=m,le*=m;var ue=te[Z+"color"],se=te[Z+"width"],G=String(ue+se);G in b?b[G].data.push(NaN,NaN,re,W,J,le):b[G]={data:[re,W,J,le],join:"rect",thickness:se*m,color:ue,viewport:A,range:A,overlay:!1}}for(S in g._splomSubplots){var T=g._plots[S],_=T.xaxis,v=T.yaxis,P=_._gridVals,M=v._gridVals,E=_._offset,D=_._length,N=v._length,O=x.b+v.domain[0]*x.h,I=-v._m,F=-I*v.r2l(v.range[0],v.calendar),V,U;if(_.showgrid)for(S=0;S<P.length;S++)V=E+_.l2p(P[S].x),w("grid",_,V,O,V,O+N);if(v.showgrid)for(S=0;S<M.length;S++)U=O+F+I*M[S].x,w("grid",v,E,U,E+D,U);a(y,_,v)&&(V=E+_.l2p(0),w("zeroline",_,V,O,V,O+N)),a(y,v,_)&&(U=O+F+0,w("zeroline",v,E,U,E+D,U))}var j=[];for(S in b)j.push(b[S]);return j}function d(y,m,g,x){var A={},b;if(x._splomScenes){for(b=0;b<y.length;b++){var S=y[b];S.type==="splom"&&(A[S.uid]=1)}for(b=0;b<g.length;b++){var w=g[b];if(!A[w.uid]){var T=x._splomScenes[w.uid];T&&T.destroy&&T.destroy(),x._splomScenes[w.uid]=null,delete x._splomScenes[w.uid]}}}Object.keys(x._splomScenes||{}).length===0&&delete x._splomScenes,x._splomGrid&&!m._hasOnlyLargeSploms&&x._hasOnlyLargeSploms&&(x._splomGrid.destroy(),x._splomGrid=null,delete x._splomGrid),t.clean(y,m,g,x)}k.exports={name:i,attr:t.attr,attrRegex:t.attrRegex,layoutAttributes:t.layoutAttributes,supplyLayoutDefaults:t.supplyLayoutDefaults,drawFramework:t.drawFramework,plot:r,drag:f,updateGrid:s,clean:d,updateFx:t.updateFx,toSVG:t.toSVG}},{"../../lib/prepare_regl":516,"../../plots/cartesian":568,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../../plots/get_data":593,"../../registry":638,"regl-line2d":280}],1031:[function(e,k,z){var l=e("../../lib"),o=e("../../plots/cartesian/axis_ids"),c=e("../scatter/calc").calcMarkerSize,p=e("../scatter/calc").calcAxisExpansion,t=e("../scatter/colorscale_calc"),n=e("../scattergl/convert").markerSelection,a=e("../scattergl/convert").markerStyle,i=e("./scene_update"),r=e("../../constants/numerical").BADNUM,f=e("../scattergl/constants").TOO_MANY_POINTS;k.exports=function(s,h){var d=h.dimensions,y=h._length,m={},g=m.cdata=[],x=m.data=[],A=h._visibleDims=[],b,S,w,T,_;function v(N,O){for(var I=N.makeCalcdata({v:O.values,vcalendar:h.calendar},"v"),F=0;F<I.length;F++)I[F]=I[F]===r?NaN:I[F];g.push(I),x.push(N.type==="log"?l.simpleMap(I,N.c2l):I)}for(b=0;b<d.length;b++)if(w=d[b],w.visible){if(T=o.getFromId(s,h._diag[b][0]),_=o.getFromId(s,h._diag[b][1]),T&&_&&T.type!==_.type){l.log("Skipping splom dimension "+b+" with conflicting axis types");continue}T?(v(T,w),_&&_.type==="category"&&(_._categories=T._categories.slice())):v(_,w),A.push(b)}t(s,h),l.extendFlat(m,a(h));var P=g.length,M=P*y>f,E;for(M?E=m.sizeAvg||Math.max(m.size,3):E=c(h,y),S=0;S<A.length;S++)b=A[S],w=d[b],T=o.getFromId(s,h._diag[b][0])||{},_=o.getFromId(s,h._diag[b][1])||{},p(s,h,T,_,g[S],g[S],E);var D=i(s,h);return D.matrix||(D.matrix=!0),D.matrixOptions=m,D.selectedOptions=n(h,h.selected),D.unselectedOptions=n(h,h.unselected),[{x:!1,y:!1,t:{},trace:h}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../scatter/calc":927,"../scatter/colorscale_calc":929,"../scattergl/constants":980,"../scattergl/convert":981,"./scene_update":1038}],1032:[function(e,k,z){var l=e("../../lib"),o=e("../../plots/array_container_defaults"),c=e("./attributes"),p=e("../scatter/subtypes"),t=e("../scatter/marker_defaults"),n=e("../parcoords/merge_length"),a=e("../scattergl/helpers").isOpenSymbol;k.exports=function(u,s,h,d){function y(T,_){return l.coerce(u,s,c,T,_)}var m=o(u,s,{name:"dimensions",handleItemDefaults:i}),g=y("diagonal.visible"),x=y("showupperhalf"),A=y("showlowerhalf"),b=n(s,m,"values");if(!b||!g&&!x&&!A){s.visible=!1;return}y("text"),y("hovertext"),y("hovertemplate"),y("xhoverformat"),y("yhoverformat"),t(u,s,h,d,y);var S=a(s.marker.symbol),w=p.isBubble(s);y("marker.line.width",S||w?1:0),r(u,s,d,y),l.coerceSelectionMarkerOpacity(s,y)};function i(f,u){function s(d,y){return l.coerce(f,u,c.dimensions,d,y)}s("label");var h=s("values");h&&h.length?s("visible"):u.visible=!1,s("axis.type"),s("axis.matches")}function r(f,u,s,h){var d=u.dimensions,y=d.length,m=u.showupperhalf,g=u.showlowerhalf,x=u.diagonal.visible,A,b,S=new Array(y),w=new Array(y);for(A=0;A<y;A++){var T=A?A+1:"";S[A]="x"+T,w[A]="y"+T}var _=h("xaxes",S),v=h("yaxes",w),P=u._diag=new Array(y);u._xaxes={},u._yaxes={};var M=[],E=[];function D(te,re,W,J){if(!!te){var le=te.charAt(0),ue=s._splomAxes[le];if(u["_"+le+"axes"][te]=1,J.push(te),!(te in ue)){var se=ue[te]={};W&&(se.label=W.label||"",W.visible&&W.axis&&(W.axis.type&&(se.type=W.axis.type),W.axis.matches&&(se.matches=re)))}}}var N=!x&&!g,O=!x&&!m;for(u._axesDim={},A=0;A<y;A++){var I=d[A],F=A===0,V=A===y-1,U=F&&N||V&&O?void 0:_[A],j=F&&O||V&&N?void 0:v[A];D(U,j,I,M),D(j,U,I,E),P[A]=[U,j],u._axesDim[U]=A,u._axesDim[j]=A}for(A=0;A<M.length;A++)for(b=0;b<E.length;b++){var Z=M[A]+E[b];(A>b&&m||A<b&&g||A===b&&(x||!g||!m))&&(s._splomSubplots[Z]=1)}(!g||!x&&m&&g)&&(s._splomGridDflt.xside="bottom",s._splomGridDflt.yside="left")}},{"../../lib":503,"../../plots/array_container_defaults":549,"../parcoords/merge_length":897,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scattergl/helpers":985,"./attributes":1029}],1033:[function(e,k,z){var l=e("../../lib"),o=e("../scatter/colorscale_calc"),c=e("../scattergl/convert").markerStyle;k.exports=function(t,n){var a=n.trace,i=t._fullLayout._splomScenes[a.uid];if(i){o(t,a),l.extendFlat(i.matrixOptions,c(a));var r=l.extendFlat({},i.matrixOptions,i.viewOpts);i.matrix.update(r,null)}}},{"../../lib":503,"../scatter/colorscale_calc":929,"../scattergl/convert":981}],1034:[function(e,k,z){z.getDimIndex=function(o,c){for(var p=c._id,t=p.charAt(0),n={x:0,y:1}[t],a=o._visibleDims,i=0;i<a.length;i++){var r=a[i];if(o._diag[r][n]===p)return i}return!1}},{}],1035:[function(e,k,z){var l=e("./helpers"),o=e("../scattergl/hover").calcHover;function c(p,t,n){var a=p.cd,i=a[0].trace,r=p.scene,f=r.matrixOptions.cdata,u=p.xa,s=p.ya,h=u.c2p(t),d=s.c2p(n),y=p.distance,m=l.getDimIndex(i,u),g=l.getDimIndex(i,s);if(m===!1||g===!1)return[p];for(var x=f[m],A=f[g],b,S,w=y,T=0;T<x.length;T++){var _=x[T],v=A[T],P=u.c2p(_)-h,M=s.c2p(v)-d,E=Math.sqrt(P*P+M*M);E<w&&(w=S=E,b=T)}return p.index=b,p.distance=w,p.dxy=S,b===void 0?[p]:[o(p,x,A,i)]}k.exports={hoverPoints:c}},{"../scattergl/hover":986,"./helpers":1034}],1036:[function(e,k,z){var l=e("../../registry"),o=e("../../components/grid");k.exports={moduleType:"trace",name:"splom",basePlotModule:e("./base_plot"),categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),calc:e("./calc"),plot:e("./plot"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("./select"),editStyle:e("./edit_style"),meta:{}},l.register(o)},{"../../components/grid":410,"../../registry":638,"../scatter/marker_colorbar":944,"./attributes":1029,"./base_plot":1030,"./calc":1031,"./defaults":1032,"./edit_style":1033,"./hover":1035,"./plot":1037,"./select":1039}],1037:[function(e,k,z){var l=e("regl-splom"),o=e("../../lib"),c=e("../../plots/cartesian/axis_ids"),p=e("../../components/dragelement/helpers").selectMode;k.exports=function(a,i,r){if(!!r.length)for(var f=0;f<r.length;f++)t(a,r[f][0])};function t(n,a){var i=n._fullLayout,r=i._size,f=a.trace,u=a.t,s=i._splomScenes[f.uid],h=s.matrixOptions,d=h.cdata,y=i._glcanvas.data()[0].regl,m=i.dragmode,g,x,A,b,S;if(d.length!==0){h.lower=f.showupperhalf,h.upper=f.showlowerhalf,h.diagonal=f.diagonal.visible;var w=f._visibleDims,T=d.length,_=s.viewOpts={};for(_.ranges=new Array(T),_.domains=new Array(T),S=0;S<w.length;S++){A=w[S];var v=_.ranges[S]=new Array(4),P=_.domains[S]=new Array(4);g=c.getFromId(n,f._diag[A][0]),g&&(v[0]=g._rl[0],v[2]=g._rl[1],P[0]=g.domain[0],P[2]=g.domain[1]),x=c.getFromId(n,f._diag[A][1]),x&&(v[1]=x._rl[0],v[3]=x._rl[1],P[1]=x.domain[0],P[3]=x.domain[1])}var M=n._context.plotGlPixelRatio,E=r.l*M,D=r.b*M,N=r.w*M,O=r.h*M;_.viewport=[E,D,N+E,O+D],s.matrix===!0&&(s.matrix=l(y));var I=i.clickmode.indexOf("select")>-1,F=p(m)||!!f.selectedpoints||I,V=!0;if(F){var U=f._length;if(f.selectedpoints){s.selectBatch=f.selectedpoints;var j=f.selectedpoints,Z={};for(A=0;A<j.length;A++)Z[j[A]]=!0;var te=[];for(A=0;A<U;A++)Z[A]||te.push(A);s.unselectBatch=te}var re=u.xpx=new Array(T),W=u.ypx=new Array(T);for(S=0;S<w.length;S++){if(A=w[S],g=c.getFromId(n,f._diag[A][0]),g)for(re[S]=new Array(U),b=0;b<U;b++)re[S][b]=g.c2p(d[S][b]);if(x=c.getFromId(n,f._diag[A][1]),x)for(W[S]=new Array(U),b=0;b<U;b++)W[S][b]=x.c2p(d[S][b])}if(s.selectBatch.length||s.unselectBatch.length){var J=o.extendFlat({},h,s.unselectedOptions,_),le=o.extendFlat({},h,s.selectedOptions,_);s.matrix.update(J,le),V=!1}}else u.xpx=u.ypx=null;if(V){var ue=o.extendFlat({},h,_);s.matrix.update(ue,null)}}}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../plots/cartesian/axis_ids":558,"regl-splom":282}],1038:[function(e,k,z){var l=e("../../lib");k.exports=function(c,p){var t=c._fullLayout,n=p.uid,a=t._splomScenes;a||(a=t._splomScenes={});var i={dirty:!0,selectBatch:[],unselectBatch:[]},r={matrix:!1,selectBatch:[],unselectBatch:[]},f=a[p.uid];return f||(f=a[n]=l.extendFlat({},i,r),f.draw=function(){f.matrix&&f.matrix.draw&&(f.selectBatch.length||f.unselectBatch.length?f.matrix.draw(f.unselectBatch,f.selectBatch):f.matrix.draw()),f.dirty=!1},f.destroy=function(){f.matrix&&f.matrix.destroy&&f.matrix.destroy(),f.matrixOptions=null,f.selectBatch=null,f.unselectBatch=null,f=null}),f.dirty||l.extendFlat(f,i),f}},{"../../lib":503}],1039:[function(e,k,z){var l=e("../../lib"),o=e("../scatter/subtypes"),c=e("./helpers");k.exports=function(t,n){var a=t.cd,i=a[0].trace,r=a[0].t,f=t.scene,u=f.matrixOptions.cdata,s=t.xaxis,h=t.yaxis,d=[];if(!f)return d;var y=!o.hasMarkers(i)&&!o.hasText(i);if(i.visible!==!0||y)return d;var m=c.getDimIndex(i,s),g=c.getDimIndex(i,h);if(m===!1||g===!1)return d;var x=r.xpx[m],A=r.ypx[g],b=u[m],S=u[g],w=[],T=[];if(n!==!1&&!n.degenerate)for(var _=0;_<b.length;_++)n.contains([x[_],A[_]],null,_,t)?(w.push(_),d.push({pointNumber:_,x:b[_],y:S[_]})):T.push(_);var v=f.matrixOptions;return!w.length&&!T.length?f.matrix.update(v,null):!f.selectBatch.length&&!f.unselectBatch.length&&f.matrix.update(f.unselectedOptions,l.extendFlat({},v,f.selectedOptions,f.viewOpts)),f.selectBatch=w,f.unselectBatch=T,d}},{"../../lib":503,"../scatter/subtypes":951,"./helpers":1034}],1040:[function(e,k,z){var l=e("../../components/colorscale/attributes"),o=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,c=e("../../plots/template_attributes").hovertemplateAttrs,p=e("../mesh3d/attributes"),t=e("../../plots/attributes"),n=e("../../lib/extend").extendFlat,a={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:c({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:o("u",1),vhoverformat:o("v",1),whoverformat:o("w",1),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),showlegend:n({},t.showlegend,{dflt:!1})};n(a,l("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var i=["opacity","lightposition","lighting"];i.forEach(function(r){a[r]=p[r]}),a.hoverinfo=n({},t.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),a.transforms=void 0,k.exports=a},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],1041:[function(e,k,z){var l=e("../../lib"),o=e("../../components/colorscale/calc");function c(a,i){i._len=Math.min(i.u.length,i.v.length,i.w.length,i.x.length,i.y.length,i.z.length),i._u=n(i.u,i._len),i._v=n(i.v,i._len),i._w=n(i.w,i._len),i._x=n(i.x,i._len),i._y=n(i.y,i._len),i._z=n(i.z,i._len);var r=p(i);i._gridFill=r.fill,i._Xs=r.Xs,i._Ys=r.Ys,i._Zs=r.Zs,i._len=r.len;var f=0,u,s,h;i.starts&&(u=n(i.starts.x||[]),s=n(i.starts.y||[]),h=n(i.starts.z||[]),f=Math.min(u.length,s.length,h.length)),i._startsX=u||[],i._startsY=s||[],i._startsZ=h||[];var d=0,y=1/0,m;for(m=0;m<i._len;m++){var g=i._u[m],x=i._v[m],A=i._w[m],b=Math.sqrt(g*g+x*x+A*A);d=Math.max(d,b),y=Math.min(y,b)}for(o(a,i,{vals:[y,d],containerStr:"",cLetter:"c"}),m=0;m<f;m++){var S=u[m];r.xMax=Math.max(r.xMax,S),r.xMin=Math.min(r.xMin,S);var w=s[m];r.yMax=Math.max(r.yMax,w),r.yMin=Math.min(r.yMin,w);var T=h[m];r.zMax=Math.max(r.zMax,T),r.zMin=Math.min(r.zMin,T)}i._slen=f,i._normMax=d,i._xbnds=[r.xMin,r.xMax],i._ybnds=[r.yMin,r.yMax],i._zbnds=[r.zMin,r.zMax]}function p(a){var i=a._x,r=a._y,f=a._z,u=a._len,s,h,d,y=-1/0,m=1/0,g=-1/0,x=1/0,A=-1/0,b=1/0,S="",w,T,_,v,P,M,E,D,N;for(u&&(v=i[0],M=r[0],D=f[0]),u>1&&(P=i[u-1],E=r[u-1],N=f[u-1]),s=0;s<u;s++)y=Math.max(y,i[s]),m=Math.min(m,i[s]),g=Math.max(g,r[s]),x=Math.min(x,r[s]),A=Math.max(A,f[s]),b=Math.min(b,f[s]),!w&&i[s]!==v&&(w=!0,S+="x"),!T&&r[s]!==M&&(T=!0,S+="y"),!_&&f[s]!==D&&(_=!0,S+="z");w||(S+="x"),T||(S+="y"),_||(S+="z");var O=t(a._x),I=t(a._y),F=t(a._z);S=S.replace("x",(v>P?"-":"+")+"x"),S=S.replace("y",(M>E?"-":"+")+"y"),S=S.replace("z",(D>N?"-":"+")+"z");var V=function(){u=0,O=[],I=[],F=[]};(!u||u<O.length*I.length*F.length)&&V();var U=function(oe){return oe==="x"?i:oe==="y"?r:f},j=function(oe){return oe==="x"?O:oe==="y"?I:F},Z=function(oe){return oe[u-1]<oe[0]?-1:1},te=U(S[1]),re=U(S[3]),W=U(S[5]),J=j(S[1]).length,le=j(S[3]).length,ue=j(S[5]).length,se=!1,G=function(oe,fe,ye){return J*(le*oe+fe)+ye},Y=Z(U(S[1])),ee=Z(U(S[3])),$=Z(U(S[5]));for(s=0;s<ue-1;s++){for(h=0;h<le-1;h++){for(d=0;d<J-1;d++){var K=G(s,h,d),Q=G(s,h,d+1),ae=G(s,h+1,d),ie=G(s+1,h,d);if((!(te[K]*Y<te[Q]*Y)||!(re[K]*ee<re[ae]*ee)||!(W[K]*$<W[ie]*$))&&(se=!0),se)break}if(se)break}if(se)break}return se&&(l.warn("Encountered arbitrary coordinates! Unable to input data grid."),V()),{xMin:m,yMin:x,zMin:b,xMax:y,yMax:g,zMax:A,Xs:O,Ys:I,Zs:F,len:u,fill:S}}function t(a){return l.distinctVals(a).vals}function n(a,i){if(i===void 0&&(i=a.length),l.isTypedArray(a))return a.subarray(0,i);for(var r=[],f=0;f<i;f++)r[f]=+a[f];return r}k.exports={calc:c,filter:n,processGrid:p}},{"../../components/colorscale/calc":374,"../../lib":503}],1042:[function(e,k,z){var l=e("../../../stackgl_modules").gl_streamtube3d,o=l.createTubeMesh,c=e("../../lib"),p=e("../../lib/gl_format_color").parseColorScale,t=e("../../components/colorscale").extractOpts,n=e("../../plots/gl3d/zip3"),a={xaxis:0,yaxis:1,zaxis:2};function i(d,y){this.scene=d,this.uid=y,this.mesh=null,this.data=null}var r=i.prototype;r.handlePick=function(d){var y=this.scene.fullSceneLayout,m=this.scene.dataScale;function g(b,S){var w=y[S],T=m[a[S]];return w.l2c(b)/T}if(d.object===this.mesh){var x=d.data.position,A=d.data.velocity;return d.traceCoordinate=[g(x[0],"xaxis"),g(x[1],"yaxis"),g(x[2],"zaxis"),g(A[0],"xaxis"),g(A[1],"yaxis"),g(A[2],"zaxis"),d.data.intensity*this.data._normMax,d.data.divergence],d.textLabel=this.data.hovertext||this.data.text,!0}};function f(d){var y=d.length,m;return y>2?m=d.slice(1,y-1):y===2?m=[(d[0]+d[1])/2]:m=d,m}function u(d){var y=d.length;return y===1?[.5,.5]:[d[1]-d[0],d[y-1]-d[y-2]]}function s(d,y){var m=d.fullSceneLayout,g=d.dataScale,x=y._len,A={};function b(le,ue){var se=m[ue],G=g[a[ue]];return c.simpleMap(le,function(Y){return se.d2l(Y)*G})}if(A.vectors=n(b(y._u,"xaxis"),b(y._v,"yaxis"),b(y._w,"zaxis"),x),!x)return{positions:[],cells:[]};var S=b(y._Xs,"xaxis"),w=b(y._Ys,"yaxis"),T=b(y._Zs,"zaxis");A.meshgrid=[S,w,T],A.gridFill=y._gridFill;var _=y._slen;if(_)A.startingPositions=n(b(y._startsX,"xaxis"),b(y._startsY,"yaxis"),b(y._startsZ,"zaxis"));else{for(var v=w[0],P=f(S),M=f(T),E=new Array(P.length*M.length),D=0,N=0;N<P.length;N++)for(var O=0;O<M.length;O++)E[D++]=[P[N],v,M[O]];A.startingPositions=E}A.colormap=p(y),A.tubeSize=y.sizeref,A.maxLength=y.maxdisplayed;var I=b(y._xbnds,"xaxis"),F=b(y._ybnds,"yaxis"),V=b(y._zbnds,"zaxis"),U=u(S),j=u(w),Z=u(T),te=[[I[0]-U[0],F[0]-j[0],V[0]-Z[0]],[I[1]+U[1],F[1]+j[1],V[1]+Z[1]]],re=l(A,te),W=t(y);re.vertexIntensityBounds=[W.min/y._normMax,W.max/y._normMax];var J=y.lightposition;return re.lightPosition=[J.x,J.y,J.z],re.ambient=y.lighting.ambient,re.diffuse=y.lighting.diffuse,re.specular=y.lighting.specular,re.roughness=y.lighting.roughness,re.fresnel=y.lighting.fresnel,re.opacity=y.opacity,y._pad=re.tubeScale*y.sizeref*2,re}r.update=function(d){this.data=d;var y=s(this.scene,d);this.mesh.update(y)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function h(d,y){var m=d.glplot.gl,g=s(d,y),x=o(m,g),A=new i(d,y.uid);return A.mesh=x,A.data=y,x._trace=A,d.glplot.add(x),A}k.exports=h},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],1043:[function(e,k,z){var l=e("../../lib"),o=e("../../components/colorscale/defaults"),c=e("./attributes");k.exports=function(t,n,a,i){function r(m,g){return l.coerce(t,n,c,m,g)}var f=r("u"),u=r("v"),s=r("w"),h=r("x"),d=r("y"),y=r("z");if(!f||!f.length||!u||!u.length||!s||!s.length||!h||!h.length||!d||!d.length||!y||!y.length){n.visible=!1;return}r("starts.x"),r("starts.y"),r("starts.z"),r("maxdisplayed"),r("sizeref"),r("lighting.ambient"),r("lighting.diffuse"),r("lighting.specular"),r("lighting.roughness"),r("lighting.fresnel"),r("lightposition.x"),r("lightposition.y"),r("lightposition.z"),o(t,n,i,r,{prefix:"",cLetter:"c"}),r("text"),r("hovertext"),r("hovertemplate"),r("uhoverformat"),r("vhoverformat"),r("whoverformat"),r("xhoverformat"),r("yhoverformat"),r("zhoverformat"),n._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":1040}],1044:[function(e,k,z){k.exports={moduleType:"trace",name:"streamtube",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:e("./calc").calc,plot:e("./convert"),eventData:function(l,o){return l.tubex=l.x,l.tubey=l.y,l.tubez=l.z,l.tubeu=o.traceCoordinate[3],l.tubev=o.traceCoordinate[4],l.tubew=o.traceCoordinate[5],l.norm=o.traceCoordinate[6],l.divergence=o.traceCoordinate[7],delete l.x,delete l.y,delete l.z,l},meta:{}}},{"../../plots/gl3d":598,"./attributes":1040,"./calc":1041,"./convert":1042,"./defaults":1043}],1045:[function(e,k,z){var l=e("../../plots/attributes"),o=e("../../plots/template_attributes").hovertemplateAttrs,c=e("../../plots/template_attributes").texttemplateAttrs,p=e("../../components/colorscale/attributes"),t=e("../../plots/domain").attributes,n=e("../pie/attributes"),a=e("./constants"),i=e("../../lib/extend").extendFlat;k.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:i({colors:{valType:"data_array",editType:"calc"},line:{color:i({},n.marker.line.color,{dflt:null}),width:i({},n.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},p("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:n.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:c({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:n.hovertext,hoverinfo:i({},l.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:o({},{keys:a.eventDataKeys}),textfont:n.textfont,insidetextorientation:n.insidetextorientation,insidetextfont:n.insidetextfont,outsidetextfont:i({},n.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:n.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:t({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"./constants":1048}],1046:[function(e,k,z){var l=e("../../plots/plots");z.name="sunburst",z.plot=function(o,c,p,t){l.plotBasePlot(z.name,o,c,p,t)},z.clean=function(o,c,p,t){l.cleanBasePlot(z.name,o,c,p,t)}},{"../../plots/plots":619}],1047:[function(e,k,z){var l=e("d3-hierarchy"),o=e("fast-isnumeric"),c=e("../../lib"),p=e("../../components/colorscale").makeColorScaleFuncFromTrace,t=e("../pie/calc").makePullColorFn,n=e("../pie/calc").generateExtendedColors,a=e("../../components/colorscale").calc,i=e("../../constants/numerical").ALMOST_EQUAL,r={},f={},u={};z.calc=function(h,d){var y=h._fullLayout,m=d.ids,g=c.isArrayOrTypedArray(m),x=d.labels,A=d.parents,b=d.values,S=c.isArrayOrTypedArray(b),w=[],T={},_={},v=function(Y,ee){T[Y]?T[Y].push(ee):T[Y]=[ee],_[ee]=1},P=function(Y){return Y||typeof Y=="number"},M=function(Y){return!S||o(b[Y])&&b[Y]>=0},E,D,N;g?(E=Math.min(m.length,A.length),D=function(Y){return P(m[Y])&&M(Y)},N=function(Y){return String(m[Y])}):(E=Math.min(x.length,A.length),D=function(Y){return P(x[Y])&&M(Y)},N=function(Y){return String(x[Y])}),S&&(E=Math.min(E,b.length));for(var O=0;O<E;O++)if(D(O)){var I=N(O),F=P(A[O])?String(A[O]):"",V={i:O,id:I,pid:F,label:P(x[O])?String(x[O]):""};S&&(V.v=+b[O]),w.push(V),v(F,I)}if(T[""]){if(T[""].length>1){for(var Z=c.randstr(),te=0;te<w.length;te++)w[te].pid===""&&(w[te].pid=Z);w.unshift({hasMultipleRoots:!0,id:Z,pid:"",label:""})}}else{var U=[],j;for(j in T)_[j]||U.push(j);if(U.length===1)j=U[0],w.unshift({hasImpliedRoot:!0,id:j,pid:"",label:j});else return c.warn(["Multiple implied roots, cannot build",d.type,"hierarchy of",d.name+".","These roots include:",U.join(", ")].join(" "))}var re;try{re=l.stratify().id(function(Y){return Y.id}).parentId(function(Y){return Y.pid})(w)}catch(Y){return c.warn(["Failed to build",d.type,"hierarchy of",d.name+".","Error:",Y.message].join(" "))}var W=l.hierarchy(re),J=!1;if(S)switch(d.branchvalues){case"remainder":W.sum(function(Y){return Y.data.v});break;case"total":W.each(function(Y){var ee=Y.data.data,$=ee.v;if(Y.children){var K=Y.children.reduce(function(Q,ae){return Q+ae.data.data.v},0);if((ee.hasImpliedRoot||ee.hasMultipleRoots)&&($=K),$<K*i)return J=!0,c.warn(["Total value for node",Y.data.data.id,"of",d.name,"is smaller than the sum of its children.",`
parent value =`,$,`
children sum =`,K].join(" "))}Y.value=$});break}else s(W,d,{branches:d.count.indexOf("branches")!==-1,leaves:d.count.indexOf("leaves")!==-1});if(!J){d.sort&&W.sort(function(Y,ee){return ee.value-Y.value});var le,ue,se=d.marker.colors||[],G=!!se.length;return d._hasColorscale?(G||(se=S?d.values:d._values),a(h,d,{vals:se,containerStr:"marker",cLetter:"c"}),ue=p(d.marker)):le=t(y["_"+d.type+"colormap"]),W.each(function(Y){var ee=Y.data.data;ee.color=d._hasColorscale?ue(se[ee.i]):le(se[ee.i],ee.id)}),w[0].hierarchy=W,w}},z._runCrossTraceCalc=function(h,d){var y=d._fullLayout,m=d.calcdata,g=y[h+"colorway"],x=y["_"+h+"colormap"];y["extend"+h+"colors"]&&(g=n(g,h==="icicle"?u:h==="treemap"?f:r));var A=0,b;function S(v){var P=v.data.data,M=P.id;P.color===!1&&(x[M]?P.color=x[M]:v.parent?v.parent.parent?P.color=v.parent.data.data.color:(x[M]=P.color=g[A%g.length],A++):P.color=b)}for(var w=0;w<m.length;w++){var T=m[w],_=T[0];_.trace.type===h&&_.hierarchy&&(b=_.trace.root.color,_.hierarchy.each(S))}},z.crossTraceCalc=function(h){return z._runCrossTraceCalc("sunburst",h)};function s(h,d,y){var m=0,g=h.children;if(g){for(var x=g.length,A=0;A<x;A++)m+=s(g[A],d,y);y.branches&&m++}else y.leaves&&m++;return h.value=h.data.data.value=m,d._values||(d._values=[]),d._values[h.data.data.i]=m,m}},{"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../pie/calc":902,"d3-hierarchy":115,"fast-isnumeric":190}],1048:[function(e,k,z){k.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1049:[function(e,k,z){var l=e("../../lib"),o=e("./attributes"),c=e("../../plots/domain").defaults,p=e("../bar/defaults").handleText,t=e("../../components/colorscale"),n=t.hasColorscale,a=t.handleDefaults;k.exports=function(r,f,u,s){function h(S,w){return l.coerce(r,f,o,S,w)}var d=h("labels"),y=h("parents");if(!d||!d.length||!y||!y.length){f.visible=!1;return}var m=h("values");m&&m.length?h("branchvalues"):h("count"),h("level"),h("maxdepth");var g=h("marker.line.width");g&&h("marker.line.color",s.paper_bgcolor),h("marker.colors");var x=f._hasColorscale=n(r,"marker","colors")||(r.marker||{}).coloraxis;x&&a(r,f,s,h,{prefix:"marker.",cLetter:"c"}),h("leaf.opacity",x?1:.7);var A=h("text");h("texttemplate"),f.texttemplate||h("textinfo",Array.isArray(A)?"text+label":"label"),h("hovertext"),h("hovertemplate");var b="auto";p(r,f,s,h,b,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),h("insidetextorientation"),h("sort"),h("rotation"),h("root.color"),c(f,s,h),f._length=null}},{"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":1045}],1050:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../registry"),c=e("../../components/fx/helpers").appendArrayPointValue,p=e("../../components/fx"),t=e("../../lib"),n=e("../../lib/events"),a=e("./helpers"),i=e("../pie/helpers"),r=i.formatPieValue;k.exports=function(s,h,d,y,m){var g=y[0],x=g.trace,A=g.hierarchy,b=x.type==="sunburst",S=x.type==="treemap"||x.type==="icicle";"_hasHoverLabel"in x||(x._hasHoverLabel=!1),"_hasHoverEvent"in x||(x._hasHoverEvent=!1);var w=function(v){var P=d._fullLayout;if(!(d._dragging||P.hovermode===!1)){var M=d._fullData[x.index],E=v.data.data,D=E.i,N=a.isHierarchyRoot(v),O=a.getParent(A,v),I=a.getValue(v),F=function(Q){return t.castOption(M,D,Q)},V=F("hovertemplate"),U=p.castHoverinfo(M,P,D),j=P.separators,Z;if(V||U&&U!=="none"&&U!=="skip"){var te,re;b&&(te=g.cx+v.pxmid[0]*(1-v.rInscribed),re=g.cy+v.pxmid[1]*(1-v.rInscribed)),S&&(te=v._hoverX,re=v._hoverY);var W={},J=[],le=[],ue=function(Q){return J.indexOf(Q)!==-1};U&&(J=U==="all"?M._module.attributes.hoverinfo.flags:U.split("+")),W.label=E.label,ue("label")&&W.label&&le.push(W.label),E.hasOwnProperty("v")&&(W.value=E.v,W.valueLabel=r(W.value,j),ue("value")&&le.push(W.valueLabel)),W.currentPath=v.currentPath=a.getPath(v.data),ue("current path")&&!N&&le.push(W.currentPath);var se,G=[],Y=function(){G.indexOf(se)===-1&&(le.push(se),G.push(se))};W.percentParent=v.percentParent=I/a.getValue(O),W.parent=v.parentString=a.getPtLabel(O),ue("percent parent")&&(se=a.formatPercent(W.percentParent,j)+" of "+W.parent,Y()),W.percentEntry=v.percentEntry=I/a.getValue(h),W.entry=v.entry=a.getPtLabel(h),ue("percent entry")&&!N&&!v.onPathbar&&(se=a.formatPercent(W.percentEntry,j)+" of "+W.entry,Y()),W.percentRoot=v.percentRoot=I/a.getValue(A),W.root=v.root=a.getPtLabel(A),ue("percent root")&&!N&&(se=a.formatPercent(W.percentRoot,j)+" of "+W.root,Y()),W.text=F("hovertext")||F("text"),ue("text")&&(se=W.text,t.isValidTextValue(se)&&le.push(se)),Z=[f(v,M,m.eventDataKeys)];var ee={trace:M,y:re,_x0:v._x0,_x1:v._x1,_y0:v._y0,_y1:v._y1,text:le.join("<br>"),name:V||ue("name")?M.name:void 0,color:F("hoverlabel.bgcolor")||E.color,borderColor:F("hoverlabel.bordercolor"),fontFamily:F("hoverlabel.font.family"),fontSize:F("hoverlabel.font.size"),fontColor:F("hoverlabel.font.color"),nameLength:F("hoverlabel.namelength"),textAlign:F("hoverlabel.align"),hovertemplate:V,hovertemplateLabels:W,eventData:Z};b&&(ee.x0=te-v.rInscribed*v.rpx1,ee.x1=te+v.rInscribed*v.rpx1,ee.idealAlign=v.pxmid[0]<0?"left":"right"),S&&(ee.x=te,ee.idealAlign=te<0?"left":"right");var $=[];p.loneHover(ee,{container:P._hoverlayer.node(),outerContainer:P._paper.node(),gd:d,inOut_bbox:$}),Z[0].bbox=$[0],x._hasHoverLabel=!0}if(S){var K=s.select("path.surface");m.styleOne(K,v,M,{hovered:!0})}x._hasHoverEvent=!0,d.emit("plotly_hover",{points:Z||[f(v,M,m.eventDataKeys)],event:l.event})}},T=function(v){var P=d._fullLayout,M=d._fullData[x.index],E=l.select(this).datum();if(x._hasHoverEvent&&(v.originalEvent=l.event,d.emit("plotly_unhover",{points:[f(E,M,m.eventDataKeys)],event:l.event}),x._hasHoverEvent=!1),x._hasHoverLabel&&(p.loneUnhover(P._hoverlayer.node()),x._hasHoverLabel=!1),S){var D=s.select("path.surface");m.styleOne(D,E,M,{hovered:!1})}},_=function(v){var P=d._fullLayout,M=d._fullData[x.index],E=b&&(a.isHierarchyRoot(v)||a.isLeaf(v)),D=a.getPtId(v),N=a.isEntry(v)?a.findEntryWithChild(A,D):a.findEntryWithLevel(A,D),O=a.getPtId(N),I={points:[f(v,M,m.eventDataKeys)],event:l.event};E||(I.nextLevel=O);var F=n.triggerHandler(d,"plotly_"+x.type+"click",I);if(F!==!1&&P.hovermode&&(d._hoverdata=[f(v,M,m.eventDataKeys)],p.click(d,l.event)),!E&&F!==!1&&!d._dragging&&!d._transitioning){o.call("_storeDirectGUIEdit",M,P._tracePreGUI[M.uid],{level:M.level});var V={data:[{level:O}],traces:[x.index]},U={frame:{redraw:!1,duration:m.transitionTime},transition:{duration:m.transitionTime,easing:m.transitionEasing},mode:"immediate",fromcurrent:!0};p.loneUnhover(P._hoverlayer.node()),o.call("animate",d,V,U)}};s.on("mouseover",w),s.on("mouseout",T),s.on("click",_)};function f(u,s,h){for(var d=u.data.data,y={curveNumber:s.index,pointNumber:d.i,data:s._input,fullData:s},m=0;m<h.length;m++){var g=h[m];g in u&&(y[g]=u[g])}return"parentString"in u&&!a.isHierarchyRoot(u)&&(y.parent=u.parentString),c(y,s,d.i),y}},{"../../components/fx":406,"../../components/fx/helpers":402,"../../lib":503,"../../lib/events":492,"../../registry":638,"../pie/helpers":905,"./helpers":1051,"@plotly/d3":58}],1051:[function(e,k,z){var l=e("../../lib"),o=e("../../components/color"),c=e("../../lib/setcursor"),p=e("../pie/helpers");z.findEntryWithLevel=function(i,r){var f;return r&&i.eachAfter(function(u){if(z.getPtId(u)===r)return f=u.copy()}),f||i},z.findEntryWithChild=function(i,r){var f;return i.eachAfter(function(u){for(var s=u.children||[],h=0;h<s.length;h++){var d=s[h];if(z.getPtId(d)===r)return f=u.copy()}}),f||i},z.isEntry=function(i){return!i.parent},z.isLeaf=function(i){return!i.children},z.getPtId=function(i){return i.data.data.id},z.getPtLabel=function(i){return i.data.data.label},z.getValue=function(i){return i.value},z.isHierarchyRoot=function(i){return a(i)===""},z.setSliceCursor=function(i,r,f){var u=f.isTransitioning;if(!u){var s=i.datum();u=f.hideOnRoot&&z.isHierarchyRoot(s)||f.hideOnLeaves&&z.isLeaf(s)}c(i,u?null:"pointer")};function t(i,r,f){return{color:z.getOutsideTextFontKey("color",i,r,f),family:z.getOutsideTextFontKey("family",i,r,f),size:z.getOutsideTextFontKey("size",i,r,f)}}function n(i,r,f,u){var s=(u||{}).onPathbar,h=r.data.data,d=h.i,y=l.castOption(i,d,(s?"pathbar.textfont":"insidetextfont")+".color");return!y&&i._input.textfont&&(y=l.castOption(i._input,d,"textfont.color")),{color:y||o.contrast(h.color),family:z.getInsideTextFontKey("family",i,r,f,u),size:z.getInsideTextFontKey("size",i,r,f,u)}}z.getInsideTextFontKey=function(i,r,f,u,s){var h=(s||{}).onPathbar,d=h?"pathbar.textfont":"insidetextfont",y=f.data.data.i;return l.castOption(r,y,d+"."+i)||l.castOption(r,y,"textfont."+i)||u.size},z.getOutsideTextFontKey=function(i,r,f,u){var s=f.data.data.i;return l.castOption(r,s,"outsidetextfont."+i)||l.castOption(r,s,"textfont."+i)||u.size},z.isOutsideText=function(i,r){return!i._hasColorscale&&z.isHierarchyRoot(r)},z.determineTextFont=function(i,r,f,u){return z.isOutsideText(i,r)?t(i,r,f):n(i,r,f,u)},z.hasTransition=function(i){return!!(i&&i.duration>0)},z.getMaxDepth=function(i){return i.maxdepth>=0?i.maxdepth:1/0},z.isHeader=function(i,r){return!(z.isLeaf(i)||i.depth===r._maxDepth-1)};function a(i){return i.data.data.pid}z.getParent=function(i,r){return z.findEntryWithLevel(i,a(r))},z.listPath=function(i,r){var f=i.parent;if(!f)return[];var u=r?[f.data[r]]:[f];return z.listPath(f,r).concat(u)},z.getPath=function(i){return z.listPath(i,"label").join("/")+"/"},z.formatValue=p.formatPieValue,z.formatPercent=function(i,r){var f=l.formatPercent(i,0);return f==="0%"&&(f=p.formatPiePercent(i,r)),f}},{"../../components/color":366,"../../lib":503,"../../lib/setcursor":524,"../pie/helpers":905}],1052:[function(e,k,z){k.exports={moduleType:"trace",name:"sunburst",basePlotModule:e("./base_plot"),categories:[],animatable:!0,attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style").style,colorbar:e("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":1045,"./base_plot":1046,"./calc":1047,"./defaults":1049,"./layout_attributes":1053,"./layout_defaults":1054,"./plot":1055,"./style":1056}],1053:[function(e,k,z){k.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1054:[function(e,k,z){var l=e("../../lib"),o=e("./layout_attributes");k.exports=function(p,t){function n(a,i){return l.coerce(p,t,o,a,i)}n("sunburstcolorway",t.colorway),n("extendsunburstcolors")}},{"../../lib":503,"./layout_attributes":1053}],1055:[function(e,k,z){var l=e("@plotly/d3"),o=e("d3-hierarchy"),c=e("d3-interpolate").interpolate,p=e("../../components/drawing"),t=e("../../lib"),n=e("../../lib/svg_text_utils"),a=e("../bar/uniform_text"),i=a.recordMinTextSize,r=a.clearMinTextSize,f=e("../pie/plot"),u=e("../pie/helpers").getRotationAngle,s=f.computeTransform,h=f.transformInsideText,d=e("./style").styleOne,y=e("../bar/style").resizeText,m=e("./fx"),g=e("./constants"),x=e("./helpers");z.plot=function(_,v,P,M){var E=_._fullLayout,D=E._sunburstlayer,N,O,I=!P,F=!E.uniformtext.mode&&x.hasTransition(P);if(r("sunburst",E),N=D.selectAll("g.trace.sunburst").data(v,function(U){return U[0].trace.uid}),N.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),N.order(),F){M&&(O=M());var V=l.transition().duration(P.duration).ease(P.easing).each("end",function(){O&&O()}).each("interrupt",function(){O&&O()});V.each(function(){D.selectAll("g.trace").each(function(U){A(_,U,this,P)})})}else N.each(function(U){A(_,U,this,P)}),E.uniformtext.mode&&y(_,E._sunburstlayer.selectAll(".trace"),"sunburst");I&&N.exit().remove()};function A(_,v,P,M){var E=_._fullLayout,D=!E.uniformtext.mode&&x.hasTransition(M),N=l.select(P),O=N.selectAll("g.slice"),I=v[0],F=I.trace,V=I.hierarchy,U=x.findEntryWithLevel(V,F.level),j=x.getMaxDepth(F),Z=E._size,te=F.domain,re=Z.w*(te.x[1]-te.x[0]),W=Z.h*(te.y[1]-te.y[0]),J=.5*Math.min(re,W),le=I.cx=Z.l+Z.w*(te.x[1]+te.x[0])/2,ue=I.cy=Z.t+Z.h*(1-te.y[0])-W/2;if(!U)return O.remove();var se=null,G={};D&&O.each(function(_e){G[x.getPtId(_e)]={rpx0:_e.rpx0,rpx1:_e.rpx1,x0:_e.x0,x1:_e.x1,transform:_e.transform},!se&&x.isEntry(_e)&&(se=_e)});var Y=b(U).descendants(),ee=U.height+1,$=0,K=j;I.hasMultipleRoots&&x.isHierarchyRoot(U)&&(Y=Y.slice(1),ee-=1,$=1,K+=1),Y=Y.filter(function(_e){return _e.y1<=K});var Q=u(F.rotation);Q&&Y.forEach(function(_e){_e.x0+=Q,_e.x1+=Q});var ae=Math.min(ee,j),ie=function(_e){return(_e-$)/ae*J},oe=function(_e,Ie){return[_e*Math.cos(Ie),-_e*Math.sin(Ie)]},fe=function(_e){return t.pathAnnulus(_e.rpx0,_e.rpx1,_e.x0,_e.x1,le,ue)},ye=function(_e){return le+w(_e)[0]*(_e.transform.rCenter||0)+(_e.transform.x||0)},ce=function(_e){return ue+w(_e)[1]*(_e.transform.rCenter||0)+(_e.transform.y||0)};O=O.data(Y,x.getPtId),O.enter().append("g").classed("slice",!0),D?O.exit().transition().each(function(){var _e=l.select(this),Ie=_e.select("path.surface");Ie.transition().attrTween("d",function(et){var Ne=Ae(et);return function(De){return fe(Ne(De))}});var We=_e.select("g.slicetext");We.attr("opacity",0)}).remove():O.exit().remove(),O.order();var me=null;if(D&&se){var xe=x.getPtId(se);O.each(function(_e){me===null&&x.getPtId(_e)===xe&&(me=_e.x1)})}var ke=O;D&&(ke=ke.transition().each("end",function(){var _e=l.select(this);x.setSliceCursor(_e,_,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),ke.each(function(_e){var Ie=l.select(this),We=t.ensureSingle(Ie,"path","surface",function(Dt){Dt.style("pointer-events","all")});_e.rpx0=ie(_e.y0),_e.rpx1=ie(_e.y1),_e.xmid=(_e.x0+_e.x1)/2,_e.pxmid=oe(_e.rpx1,_e.xmid),_e.midangle=-(_e.xmid-Math.PI/2),_e.startangle=-(_e.x0-Math.PI/2),_e.stopangle=-(_e.x1-Math.PI/2),_e.halfangle=.5*Math.min(t.angleDelta(_e.x0,_e.x1)||Math.PI,Math.PI),_e.ring=1-_e.rpx0/_e.rpx1,_e.rInscribed=S(_e),D?We.transition().attrTween("d",function(Dt){var Gt=Oe(Dt);return function(Mt){return fe(Gt(Mt))}}):We.attr("d",fe),Ie.call(m,U,_,v,{eventDataKeys:g.eventDataKeys,transitionTime:g.CLICK_TRANSITION_TIME,transitionEasing:g.CLICK_TRANSITION_EASING}).call(x.setSliceCursor,_,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:_._transitioning}),We.call(d,_e,F);var et=t.ensureSingle(Ie,"g","slicetext"),Ne=t.ensureSingle(et,"text","",function(Dt){Dt.attr("data-notex",1)}),De=t.ensureUniformFontSize(_,x.determineTextFont(F,_e,E.font));Ne.text(z.formatSliceLabel(_e,U,F,v,E)).classed("slicetext",!0).attr("text-anchor","middle").call(p.font,De).call(n.convertToTspans,_);var Ve=p.bBox(Ne.node());_e.transform=h(Ve,_e,I),_e.transform.targetX=ye(_e),_e.transform.targetY=ce(_e);var dt=function(Dt,Gt){var Mt=Dt.transform;return s(Mt,Gt),Mt.fontSize=De.size,i(F.type,Mt,E),t.getTextTransform(Mt)};D?Ne.transition().attrTween("transform",function(Dt){var Gt=He(Dt);return function(Mt){return dt(Gt(Mt),Ve)}}):Ne.attr("transform",dt(_e,Ve))});function Ae(_e){var Ie=x.getPtId(_e),We=G[Ie],et=G[x.getPtId(U)],Ne;if(et){var De=(_e.x1>et.x1?2*Math.PI:0)+Q;Ne=_e.rpx1<et.rpx1?{x0:_e.x0,x1:_e.x1,rpx0:0,rpx1:0}:{x0:De,x1:De,rpx0:_e.rpx0,rpx1:_e.rpx1}}else{var Ve,dt=x.getPtId(_e.parent);O.each(function(Nt){if(x.getPtId(Nt)===dt)return Ve=Nt});var Dt=Ve.children,Gt;Dt.forEach(function(Nt,Et){if(x.getPtId(Nt)===Ie)return Gt=Et});var Mt=Dt.length,zt=c(Ve.x0,Ve.x1);Ne={rpx0:J,rpx1:J,x0:zt(Gt/Mt),x1:zt((Gt+1)/Mt)}}return c(We,Ne)}function Oe(_e){var Ie=G[x.getPtId(_e)],We,et={x0:_e.x0,x1:_e.x1,rpx0:_e.rpx0,rpx1:_e.rpx1};if(Ie)We=Ie;else if(se)if(_e.parent)if(me){var Ne=(_e.x1>me?2*Math.PI:0)+Q;We={x0:Ne,x1:Ne}}else We={rpx0:J,rpx1:J},t.extendFlat(We,Ge(_e));else We={rpx0:0,rpx1:0};else We={x0:Q,x1:Q};return c(We,et)}function He(_e){var Ie=G[x.getPtId(_e)],We,et=_e.transform;if(Ie)We=Ie;else if(We={rpx1:_e.rpx1,transform:{textPosAngle:et.textPosAngle,scale:0,rotate:et.rotate,rCenter:et.rCenter,x:et.x,y:et.y}},se)if(_e.parent)if(me){var Ne=_e.x1>me?2*Math.PI:0;We.x0=We.x1=Ne}else t.extendFlat(We,Ge(_e));else We.x0=We.x1=Q;else We.x0=We.x1=Q;var De=c(We.transform.textPosAngle,_e.transform.textPosAngle),Ve=c(We.rpx1,_e.rpx1),dt=c(We.x0,_e.x0),Dt=c(We.x1,_e.x1),Gt=c(We.transform.scale,et.scale),Mt=c(We.transform.rotate,et.rotate),zt=et.rCenter===0?3:We.transform.rCenter===0?1/3:1,Nt=c(We.transform.rCenter,et.rCenter),Et=function(At){return Nt(Math.pow(At,zt))};return function(At){var it=Ve(At),ht=dt(At),$e=Dt(At),Ee=Et(At),Xe=oe(it,(ht+$e)/2),rt=De(At),ut={pxmid:Xe,rpx1:it,transform:{textPosAngle:rt,rCenter:Ee,x:et.x,y:et.y}};return i(F.type,et,E),{transform:{targetX:ye(ut),targetY:ce(ut),scale:Gt(At),rotate:Mt(At),rCenter:Ee}}}}function Ge(_e){var Ie=_e.parent,We=G[x.getPtId(Ie)],et={};if(We){var Ne=Ie.children,De=Ne.indexOf(_e),Ve=Ne.length,dt=c(We.x0,We.x1);et.x0=dt(De/Ve),et.x1=dt(De/Ve)}else et.x0=et.x1=0;return et}}function b(_){return o.partition().size([2*Math.PI,_.height+1])(_)}z.formatSliceLabel=function(_,v,P,M,E){var D=P.texttemplate,N=P.textinfo;if(!D&&(!N||N==="none"))return"";var O=E.separators,I=M[0],F=_.data.data,V=I.hierarchy,U=x.isHierarchyRoot(_),j=x.getParent(V,_),Z=x.getValue(_);if(!D){var te=N.split("+"),re=function(K){return te.indexOf(K)!==-1},W=[],J;if(re("label")&&F.label&&W.push(F.label),F.hasOwnProperty("v")&&re("value")&&W.push(x.formatValue(F.v,O)),!U){re("current path")&&W.push(x.getPath(_.data));var le=0;re("percent parent")&&le++,re("percent entry")&&le++,re("percent root")&&le++;var ue=le>1;if(le){var se,G=function(K){J=x.formatPercent(se,O),ue&&(J+=" of "+K),W.push(J)};re("percent parent")&&!U&&(se=Z/x.getValue(j),G("parent")),re("percent entry")&&(se=Z/x.getValue(v),G("entry")),re("percent root")&&(se=Z/x.getValue(V),G("root"))}}return re("text")&&(J=t.castOption(P,F.i,"text"),t.isValidTextValue(J)&&W.push(J)),W.join("<br>")}var Y=t.castOption(P,F.i,"texttemplate");if(!Y)return"";var ee={};F.label&&(ee.label=F.label),F.hasOwnProperty("v")&&(ee.value=F.v,ee.valueLabel=x.formatValue(F.v,O)),ee.currentPath=x.getPath(_.data),U||(ee.percentParent=Z/x.getValue(j),ee.percentParentLabel=x.formatPercent(ee.percentParent,O),ee.parent=x.getPtLabel(j)),ee.percentEntry=Z/x.getValue(v),ee.percentEntryLabel=x.formatPercent(ee.percentEntry,O),ee.entry=x.getPtLabel(v),ee.percentRoot=Z/x.getValue(V),ee.percentRootLabel=x.formatPercent(ee.percentRoot,O),ee.root=x.getPtLabel(V),F.hasOwnProperty("color")&&(ee.color=F.color);var $=t.castOption(P,F.i,"text");return(t.isValidTextValue($)||$==="")&&(ee.text=$),ee.customdata=t.castOption(P,F.i,"customdata"),t.texttemplateString(Y,ee,E._d3locale,ee,P._meta||{})};function S(_){return _.rpx0===0&&t.isFullCircle([_.x0,_.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(_.halfangle)),_.ring/2))}function w(_){return T(_.rpx1,_.transform.textPosAngle)}function T(_,v){return[_*Math.sin(v),-_*Math.cos(v)]}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/style":662,"../bar/uniform_text":664,"../pie/helpers":905,"../pie/plot":909,"./constants":1048,"./fx":1050,"./helpers":1051,"./style":1056,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1056:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../components/color"),c=e("../../lib"),p=e("../bar/uniform_text").resizeText;function t(a){var i=a._fullLayout._sunburstlayer.selectAll(".trace");p(a,i,"sunburst"),i.each(function(r){var f=l.select(this),u=r[0],s=u.trace;f.style("opacity",s.opacity),f.selectAll("path.surface").each(function(h){l.select(this).call(n,h,s)})})}function n(a,i,r){var f=i.data.data,u=!i.children,s=f.i,h=c.castOption(r,s,"marker.line.color")||o.defaultLine,d=c.castOption(r,s,"marker.line.width")||0;a.style("stroke-width",d).call(o.fill,f.color).call(o.stroke,h).style("opacity",u?r.leaf.opacity:null)}k.exports={style:t,styleOne:n}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],1057:[function(e,k,z){var l=e("../../components/color"),o=e("../../components/colorscale/attributes"),c=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,p=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/attributes"),n=e("../../lib/extend").extendFlat,a=e("../../plot_api/edit_types").overrideAll;function i(u){return{valType:"boolean",dflt:!1}}function r(u){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:i(),y:i(),z:i()},color:{valType:"color",dflt:l.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:l.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var f=k.exports=a(n({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:p(),xhoverformat:c("x"),yhoverformat:c("y"),zhoverformat:c("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},o("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:r(),y:r(),z:r()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:n({},o.zauto,{}),zmin:n({},o.zmin,{}),zmax:n({},o.zmax,{})},hoverinfo:n({},t.hoverinfo),showlegend:n({},t.showlegend,{dflt:!1})}),"calc","nested");f.x.editType=f.y.editType=f.z.editType="calc+clearAxisTypes",f.transforms=void 0},{"../../components/color":366,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633}],1058:[function(e,k,z){var l=e("../../components/colorscale/calc");k.exports=function(c,p){p.surfacecolor?l(c,p,{vals:p.surfacecolor,containerStr:"",cLetter:"c"}):l(c,p,{vals:p.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],1059:[function(e,k,z){var l=e("../../../stackgl_modules").gl_surface3d,o=e("../../../stackgl_modules").ndarray,c=e("../../../stackgl_modules").ndarray_linear_interpolate.d2,p=e("../heatmap/interp2d"),t=e("../heatmap/find_empties"),n=e("../../lib").isArrayOrTypedArray,a=e("../../lib/gl_format_color").parseColorScale,i=e("../../lib/str2rgbarray"),r=e("../../components/colorscale").extractOpts;function f(M,E,D){this.scene=M,this.uid=D,this.surface=E,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var u=f.prototype;u.getXat=function(M,E,D,N){var O=n(this.data.x)?n(this.data.x[0])?this.data.x[E][M]:this.data.x[M]:M;return D===void 0?O:N.d2l(O,0,D)},u.getYat=function(M,E,D,N){var O=n(this.data.y)?n(this.data.y[0])?this.data.y[E][M]:this.data.y[E]:E;return D===void 0?O:N.d2l(O,0,D)},u.getZat=function(M,E,D,N){var O=this.data.z[E][M];return O===null&&this.data.connectgaps&&this.data._interpolatedZ&&(O=this.data._interpolatedZ[E][M]),D===void 0?O:N.d2l(O,0,D)},u.handlePick=function(M){if(M.object===this.surface){var E=(M.data.index[0]-1)/this.dataScaleX-1,D=(M.data.index[1]-1)/this.dataScaleY-1,N=Math.max(Math.min(Math.round(E),this.data.z[0].length-1),0),O=Math.max(Math.min(Math.round(D),this.data._ylength-1),0);M.index=[N,O],M.traceCoordinate=[this.getXat(N,O),this.getYat(N,O),this.getZat(N,O)],M.dataCoordinate=[this.getXat(N,O,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(N,O,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(N,O,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var I=0;I<3;I++){var F=M.dataCoordinate[I];F!=null&&(M.dataCoordinate[I]*=this.scene.dataScale[I])}var V=this.data.hovertext||this.data.text;return Array.isArray(V)&&V[O]&&V[O][N]!==void 0?M.textLabel=V[O][N]:V?M.textLabel=V:M.textLabel="",M.data.dataCoordinate=M.dataCoordinate.slice(),this.surface.highlight(M.data),this.scene.glplot.spikes.position=M.dataCoordinate,!0}};function s(M){var E=M[0].rgb,D=M[M.length-1].rgb;return E[0]===D[0]&&E[1]===D[1]&&E[2]===D[2]&&E[3]===D[3]}var h=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function d(M,E){if(M<E)return 0;for(var D=0;Math.floor(M%E)===0;)M/=E,D++;return D}function y(M){for(var E=[],D=0;D<h.length;D++){var N=h[D];E.push(d(M,N))}return E}function m(M){for(var E=y(M),D=M,N=0;N<h.length;N++)if(E[N]>0){D=h[N];break}return D}function g(M,E){if(!(M<1||E<1)){for(var D=y(M),N=y(E),O=1,I=0;I<h.length;I++)O*=Math.pow(h[I],Math.max(D[I],N[I]));return O}}function x(M){if(M.length!==0){for(var E=1,D=0;D<M.length;D++)E=g(E,M[D]);return E}}u.calcXnums=function(M){var E,D=[];for(E=1;E<M;E++){var N=this.getXat(E-1,0),O=this.getXat(E,0);O!==N&&N!==void 0&&N!==null&&O!==void 0&&O!==null?D[E-1]=Math.abs(O-N):D[E-1]=0}var I=0;for(E=1;E<M;E++)I+=D[E-1];for(E=1;E<M;E++)D[E-1]===0?D[E-1]=1:D[E-1]=Math.round(I/D[E-1]);return D},u.calcYnums=function(M){var E,D=[];for(E=1;E<M;E++){var N=this.getYat(0,E-1),O=this.getYat(0,E);O!==N&&N!==void 0&&N!==null&&O!==void 0&&O!==null?D[E-1]=Math.abs(O-N):D[E-1]=0}var I=0;for(E=1;E<M;E++)I+=D[E-1];for(E=1;E<M;E++)D[E-1]===0?D[E-1]=1:D[E-1]=Math.round(I/D[E-1]);return D};var A=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],b=A[9],S=A[13];u.estimateScale=function(M,E){for(var D=E===0?this.calcXnums(M):this.calcYnums(M),N=1+x(D);N<b;)N*=2;for(;N>S;)N--,N/=m(N),N++,N<b&&(N=S);var O=Math.round(N/M);return O>1?O:1};function w(M,E,D){var N=D[8]+D[2]*E[0]+D[5]*E[1];return M[0]=(D[6]+D[0]*E[0]+D[3]*E[1])/N,M[1]=(D[7]+D[1]*E[0]+D[4]*E[1])/N,M}function T(M,E,D){return _(M,E,w,D),M}function _(M,E,D,N){for(var O=[0,0],I=M.shape[0],F=M.shape[1],V=0;V<I;V++)for(var U=0;U<F;U++)D(O,[V,U],N),M.set(V,U,c(E,O[0],O[1]));return M}u.refineCoords=function(M){for(var E=this.dataScaleX,D=this.dataScaleY,N=M[0].shape[0],O=M[0].shape[1],I=Math.floor(M[0].shape[0]*E+1)|0,F=Math.floor(M[0].shape[1]*D+1)|0,V=1+N+1,U=1+O+1,j=o(new Float32Array(V*U),[V,U]),Z=[1/E,0,0,0,1/D,0,0,0,1],te=0;te<M.length;++te){this.surface.padField(j,M[te]);var re=o(new Float32Array(I*F),[I,F]);T(re,j,Z),M[te]=re}};function v(M,E){for(var D=!1,N=0;N<M.length;N++)if(E===M[N]){D=!0;break}D===!1&&M.push(E)}u.setContourLevels=function(){var M=[[],[],[]],E=[!1,!1,!1],D=!1,N,O,I;for(N=0;N<3;++N)if(this.showContour[N]&&(D=!0,this.contourSize[N]>0&&this.contourStart[N]!==null&&this.contourEnd[N]!==null&&this.contourEnd[N]>this.contourStart[N]))for(E[N]=!0,O=this.contourStart[N];O<this.contourEnd[N];O+=this.contourSize[N])I=O*this.scene.dataScale[N],v(M[N],I);if(D){var F=[[],[],[]];for(N=0;N<3;++N)this.showContour[N]&&(F[N]=E[N]?M[N]:this.scene.contourLevels[N]);this.surface.update({levels:F})}},u.update=function(M){var E=this.scene,D=E.fullSceneLayout,N=this.surface,O=a(M),I=E.dataScale,F=M.z[0].length,V=M._ylength,U=E.contourLevels;this.data=M;var j,Z,te,re,W=[];for(j=0;j<3;j++)for(W[j]=[],Z=0;Z<F;Z++)W[j][Z]=[];for(Z=0;Z<F;Z++)for(te=0;te<V;te++)W[0][Z][te]=this.getXat(Z,te,M.xcalendar,D.xaxis),W[1][Z][te]=this.getYat(Z,te,M.ycalendar,D.yaxis),W[2][Z][te]=this.getZat(Z,te,M.zcalendar,D.zaxis);if(M.connectgaps)for(M._emptypoints=t(W[2]),p(W[2],M._emptypoints),M._interpolatedZ=[],Z=0;Z<F;Z++)for(M._interpolatedZ[Z]=[],te=0;te<V;te++)M._interpolatedZ[Z][te]=W[2][Z][te];for(j=0;j<3;j++)for(Z=0;Z<F;Z++)for(te=0;te<V;te++)re=W[j][Z][te],re==null?W[j][Z][te]=NaN:re=W[j][Z][te]*=I[j];for(j=0;j<3;j++)for(Z=0;Z<F;Z++)for(te=0;te<V;te++)re=W[j][Z][te],re!=null&&(this.minValues[j]>re&&(this.minValues[j]=re),this.maxValues[j]<re&&(this.maxValues[j]=re));for(j=0;j<3;j++)this.objectOffset[j]=.5*(this.minValues[j]+this.maxValues[j]);for(j=0;j<3;j++)for(Z=0;Z<F;Z++)for(te=0;te<V;te++)re=W[j][Z][te],re!=null&&(W[j][Z][te]-=this.objectOffset[j]);var J=[o(new Float32Array(F*V),[F,V]),o(new Float32Array(F*V),[F,V]),o(new Float32Array(F*V),[F,V])];for(j=0;j<3;j++)for(Z=0;Z<F;Z++)for(te=0;te<V;te++)J[j].set(Z,te,W[j][Z][te]);W=[];var le={colormap:O,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!M.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:M.opacityscale,opacity:M.opacity},ue=r(M);if(le.intensityBounds=[ue.min,ue.max],M.surfacecolor){var se=o(new Float32Array(F*V),[F,V]);for(Z=0;Z<F;Z++)for(te=0;te<V;te++)se.set(Z,te,M.surfacecolor[te][Z]);J.push(se)}else le.intensityBounds[0]*=I[2],le.intensityBounds[1]*=I[2];(S<J[0].shape[0]||S<J[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(J[0].shape[0],0),this.dataScaleY=this.estimateScale(J[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(J)),M.surfacecolor&&(le.intensity=J.pop());var G=[!0,!0,!0],Y=["x","y","z"];for(j=0;j<3;++j){var ee=M.contours[Y[j]];G[j]=ee.highlight,le.showContour[j]=ee.show||ee.highlight,!!le.showContour[j]&&(le.contourProject[j]=[ee.project.x,ee.project.y,ee.project.z],ee.show?(this.showContour[j]=!0,le.levels[j]=U[j],N.highlightColor[j]=le.contourColor[j]=i(ee.color),ee.usecolormap?N.highlightTint[j]=le.contourTint[j]=0:N.highlightTint[j]=le.contourTint[j]=1,le.contourWidth[j]=ee.width,this.contourStart[j]=ee.start,this.contourEnd[j]=ee.end,this.contourSize[j]=ee.size):(this.showContour[j]=!1,this.contourStart[j]=null,this.contourEnd[j]=null,this.contourSize[j]=0),ee.highlight&&(le.dynamicColor[j]=i(ee.highlightcolor),le.dynamicWidth[j]=ee.highlightwidth))}s(O)&&(le.vertexColor=!0),le.objectOffset=this.objectOffset,le.coords=J,N.update(le),N.visible=M.visible,N.enableDynamic=G,N.enableHighlight=G,N.snapToData=!0,"lighting"in M&&(N.ambientLight=M.lighting.ambient,N.diffuseLight=M.lighting.diffuse,N.specularLight=M.lighting.specular,N.roughness=M.lighting.roughness,N.fresnel=M.lighting.fresnel),"lightposition"in M&&(N.lightPosition=[M.lightposition.x,M.lightposition.y,M.lightposition.z])},u.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function P(M,E){var D=M.glplot.gl,N=l({gl:D}),O=new f(M,N,E.uid);return N._trace=O,O.update(E),M.glplot.add(N),O}k.exports=P},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../heatmap/find_empties":798,"../heatmap/interp2d":801}],1060:[function(e,k,z){var l=e("../../registry"),o=e("../../lib"),c=e("../../components/colorscale/defaults"),p=e("./attributes"),t=.1;function n(u,s){for(var h=[],d=32,y=0;y<d;y++){var m=y/(d-1),g=s+(1-s)*(1-Math.pow(Math.sin(u*m*Math.PI),2));h.push([m,Math.max(0,Math.min(1,g))])}return h}function a(u){var s=0;if(!Array.isArray(u)||u.length<2||!u[0]||!u[u.length-1]||+u[0][0]!=0||+u[u.length-1][0]!=1)return!1;for(var h=0;h<u.length;h++){var d=u[h];if(d.length!==2||+d[0]<s)return!1;s=+d[0]}return!0}function i(u,s,h,d){var y,m;function g(M,E){return o.coerce(u,s,p,M,E)}var x=g("x"),A=g("y"),b=g("z");if(!b||!b.length||(x?x.length<1:!1)||(A?A.length<1:!1)){s.visible=!1;return}s._xlength=Array.isArray(x)&&o.isArrayOrTypedArray(x[0])?b.length:b[0].length,s._ylength=b.length;var S=l.getComponentMethod("calendars","handleTraceDefaults");S(u,s,["x","y","z"],d),g("text"),g("hovertext"),g("hovertemplate"),g("xhoverformat"),g("yhoverformat"),g("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(M){g(M)});var w=g("surfacecolor"),T=["x","y","z"];for(y=0;y<3;++y){var _="contours."+T[y],v=g(_+".show"),P=g(_+".highlight");if(v||P)for(m=0;m<3;++m)g(_+".project."+T[m]);v&&(g(_+".color"),g(_+".width"),g(_+".usecolormap")),P&&(g(_+".highlightcolor"),g(_+".highlightwidth")),g(_+".start"),g(_+".end"),g(_+".size")}w||(f(u,"zmin","cmin"),f(u,"zmax","cmax"),f(u,"zauto","cauto")),c(u,s,d,g,{prefix:"",cLetter:"c"}),r(u,s,d,g),s._length=null}function r(u,s,h,d){var y=d("opacityscale");y==="max"?s.opacityscale=[[0,t],[1,1]]:y==="min"?s.opacityscale=[[0,1],[1,t]]:y==="extremes"?s.opacityscale=n(1,t):a(y)||(s.opacityscale=void 0)}function f(u,s,h){s in u&&!(h in u)&&(u[h]=u[s])}k.exports={supplyDefaults:i,opacityscaleDefaults:r}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":1057}],1061:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e("./calc"),plot:e("./convert"),moduleType:"trace",name:"surface",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":1057,"./calc":1058,"./convert":1059,"./defaults":1060}],1062:[function(e,k,z){var l=e("../../components/annotations/attributes"),o=e("../../lib/extend").extendFlat,c=e("../../plot_api/edit_types").overrideAll,p=e("../../plots/font_attributes"),t=e("../../plots/domain").attributes,n=e("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,a=k.exports=c({domain:t({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:n("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:o({},l.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:o({},p({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:n("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:o({},l.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:o({},p({arrayOk:!0}))}},"calc","from-root");a.transforms=void 0},{"../../components/annotations/attributes":349,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585}],1063:[function(e,k,z){var l=e("../../plots/get_data").getModuleCalcData,o=e("./plot"),c="table";z.name=c,z.plot=function(p){var t=l(p.calcdata,c)[0];t.length&&o(p,t)},z.clean=function(p,t,n,a){var i=a._has&&a._has(c),r=t._has&&t._has(c);i&&!r&&a._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":593,"./plot":1070}],1064:[function(e,k,z){var l=e("../../lib/gup").wrap;k.exports=function(){return l({})}},{"../../lib/gup":500}],1065:[function(e,k,z){k.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1066:[function(e,k,z){var l=e("./constants"),o=e("../../lib/extend").extendFlat,c=e("fast-isnumeric");k.exports=function(h,d){var y=n(d.cells.values),m=function(Z){return Z.slice(d.header.values.length,Z.length)},g=n(d.header.values);g.length&&!g[0].length&&(g[0]=[""],g=n(g));var x=g.concat(m(y).map(function(){return a((g[0]||[""]).length)})),A=d.domain,b=Math.floor(h._fullLayout._size.w*(A.x[1]-A.x[0])),S=Math.floor(h._fullLayout._size.h*(A.y[1]-A.y[0])),w=d.header.values.length?x[0].map(function(){return d.header.height}):[l.emptyHeaderHeight],T=y.length?y[0].map(function(){return d.cells.height}):[],_=w.reduce(t,0),v=S-_,P=v+l.uplift,M=f(T,P),E=f(w,_),D=r(E,[]),N=r(M,D),O={},I=d._fullInput.columnorder.concat(m(y.map(function(Z,te){return te}))),F=x.map(function(Z,te){var re=Array.isArray(d.columnwidth)?d.columnwidth[Math.min(te,d.columnwidth.length-1)]:d.columnwidth;return c(re)?Number(re):1}),V=F.reduce(t,0);F=F.map(function(Z){return Z/V*b});var U=Math.max(p(d.header.line.width),p(d.cells.line.width)),j={key:d.uid+h._context.staticPlot,translateX:A.x[0]*h._fullLayout._size.w,translateY:h._fullLayout._size.h*(1-A.y[1]),size:h._fullLayout._size,width:b,maxLineWidth:U,height:S,columnOrder:I,groupHeight:S,rowBlocks:N,headerRowBlocks:D,scrollY:0,cells:o({},d.cells,{values:y}),headerCells:o({},d.header,{values:x}),gdColumns:x.map(function(Z){return Z[0]}),gdColumnsOriginalOrder:x.map(function(Z){return Z[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:x.map(function(Z,te){var re=O[Z];O[Z]=(re||0)+1;var W=Z+"__"+O[Z];return{key:W,label:Z,specIndex:te,xIndex:I[te],xScale:i,x:void 0,calcdata:void 0,columnWidth:F[te]}})};return j.columns.forEach(function(Z){Z.calcdata=j,Z.x=i(Z)}),j};function p(s){if(Array.isArray(s)){for(var h=0,d=0;d<s.length;d++)h=Math.max(h,p(s[d]));return h}return s}function t(s,h){return s+h}function n(s){var h=s.slice(),d=1/0,y=0,m;for(m=0;m<h.length;m++)Array.isArray(h[m])||(h[m]=[h[m]]),d=Math.min(d,h[m].length),y=Math.max(y,h[m].length);if(d!==y)for(m=0;m<h.length;m++){var g=y-h[m].length;g&&(h[m]=h[m].concat(a(g)))}return h}function a(s){for(var h=new Array(s),d=0;d<s;d++)h[d]="";return h}function i(s){return s.calcdata.columns.reduce(function(h,d){return d.xIndex<s.xIndex?h+d.columnWidth:h},0)}function r(s,h){var d=Object.keys(s);return d.map(function(y){return o({},s[y],{auxiliaryBlocks:h})})}function f(s,h){for(var d={},y,m=0,g=0,x=u(),A=0,b=0,S=0;S<s.length;S++)y=s[S],x.rows.push({rowIndex:S,rowHeight:y}),g+=y,(g>=h||S===s.length-1)&&(d[m]=x,x.key=b++,x.firstRowIndex=A,x.lastRowIndex=S,x=u(),m+=g,A=S+1,g=0);return d}function u(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},{"../../lib/extend":493,"./constants":1065,"fast-isnumeric":190}],1067:[function(e,k,z){var l=e("../../lib/extend").extendFlat;z.splitToPanels=function(c){var p=[0,0],t=l({},c,{key:"header",type:"header",page:0,prevPages:p,currentRepaint:[null,null],dragHandle:!0,values:c.calcdata.headerCells.values[c.specIndex],rowBlocks:c.calcdata.headerRowBlocks,calcdata:l({},c.calcdata,{cells:c.calcdata.headerCells})}),n=l({},c,{key:"cells1",type:"cells",page:0,prevPages:p,currentRepaint:[null,null],dragHandle:!1,values:c.calcdata.cells.values[c.specIndex],rowBlocks:c.calcdata.rowBlocks}),a=l({},c,{key:"cells2",type:"cells",page:1,prevPages:p,currentRepaint:[null,null],dragHandle:!1,values:c.calcdata.cells.values[c.specIndex],rowBlocks:c.calcdata.rowBlocks});return[n,a,t]},z.splitToCells=function(c){var p=o(c);return(c.values||[]).slice(p[0],p[1]).map(function(t,n){var a=typeof t=="string"&&t.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:n+a,key:p[0]+n,column:c,calcdata:c.calcdata,page:c.page,rowBlocks:c.rowBlocks,value:t}})};function o(c){var p=c.rowBlocks[c.page],t=p?p.rows[0].rowIndex:0,n=p?t+p.rows.length:0;return[t,n]}},{"../../lib/extend":493}],1068:[function(e,k,z){var l=e("../../lib"),o=e("./attributes"),c=e("../../plots/domain").defaults;function p(t,n){for(var a=t.columnorder||[],i=t.header.values.length,r=a.slice(0,i),f=r.slice().sort(function(h,d){return h-d}),u=r.map(function(h){return f.indexOf(h)}),s=u.length;s<i;s++)u.push(s);n("columnorder",u)}k.exports=function(n,a,i,r){function f(u,s){return l.coerce(n,a,o,u,s)}c(a,r,f),f("columnwidth"),f("header.values"),f("header.format"),f("header.align"),f("header.prefix"),f("header.suffix"),f("header.height"),f("header.line.width"),f("header.line.color"),f("header.fill.color"),l.coerceFont(f,"header.font",l.extendFlat({},r.font)),p(a,f),f("cells.values"),f("cells.format"),f("cells.align"),f("cells.prefix"),f("cells.suffix"),f("cells.height"),f("cells.line.width"),f("cells.line.color"),f("cells.fill.color"),l.coerceFont(f,"cells.font",l.extendFlat({},r.font)),a._length=null}},{"../../lib":503,"../../plots/domain":584,"./attributes":1062}],1069:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),moduleType:"trace",name:"table",basePlotModule:e("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1062,"./base_plot":1063,"./calc":1064,"./defaults":1068,"./plot":1070}],1070:[function(e,k,z){var l=e("./constants"),o=e("@plotly/d3"),c=e("../../lib"),p=c.numberFormat,t=e("../../lib/gup"),n=e("../../components/drawing"),a=e("../../lib/svg_text_utils"),i=e("../../lib").raiseToTop,r=e("../../lib").strTranslate,f=e("../../lib").cancelTransition,u=e("./data_preparation_helper"),s=e("./data_split_helpers"),h=e("../../components/color");k.exports=function(ae,ie){var oe=!ae._context.staticPlot,fe=ae._fullLayout._paper.selectAll("."+l.cn.table).data(ie.map(function(Ne){var De=t.unwrap(Ne),Ve=De.trace;return u(ae,Ve)}),t.keyFun);fe.exit().remove(),fe.enter().append("g").classed(l.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),fe.attr("width",function(Ne){return Ne.width+Ne.size.l+Ne.size.r}).attr("height",function(Ne){return Ne.height+Ne.size.t+Ne.size.b}).attr("transform",function(Ne){return r(Ne.translateX,Ne.translateY)});var ye=fe.selectAll("."+l.cn.tableControlView).data(t.repeat,t.keyFun),ce=ye.enter().append("g").classed(l.cn.tableControlView,!0).style("box-sizing","content-box");if(oe){var me="onwheel"in document?"wheel":"mousewheel";ce.on("mousemove",function(Ne){ye.filter(function(De){return Ne===De}).call(x,ae)}).on(me,function(Ne){if(!Ne.scrollbarState.wheeling){Ne.scrollbarState.wheeling=!0;var De=Ne.scrollY+o.event.deltaY,Ve=re(ae,ye,null,De)(Ne);Ve||(o.event.stopPropagation(),o.event.preventDefault()),Ne.scrollbarState.wheeling=!1}}).call(x,ae,!0)}ye.attr("transform",function(Ne){return r(Ne.size.l,Ne.size.t)});var xe=ye.selectAll("."+l.cn.scrollBackground).data(t.repeat,t.keyFun);xe.enter().append("rect").classed(l.cn.scrollBackground,!0).attr("fill","none"),xe.attr("width",function(Ne){return Ne.width}).attr("height",function(Ne){return Ne.height}),ye.each(function(Ne){n.setClipUrl(o.select(this),y(ae,Ne),ae)});var ke=ye.selectAll("."+l.cn.yColumn).data(function(Ne){return Ne.columns},t.keyFun);ke.enter().append("g").classed(l.cn.yColumn,!0),ke.exit().remove(),ke.attr("transform",function(Ne){return r(Ne.x,0)}),oe&&ke.call(o.behavior.drag().origin(function(Ne){var De=o.select(this);return F(De,Ne,-l.uplift),i(this),Ne.calcdata.columnDragInProgress=!0,x(ye.filter(function(Ve){return Ne.calcdata.key===Ve.key}),ae),Ne}).on("drag",function(Ne){var De=o.select(this),Ve=function(Gt){return(Ne===Gt?o.event.x:Gt.x)+Gt.columnWidth/2};Ne.x=Math.max(-l.overdrag,Math.min(Ne.calcdata.width+l.overdrag-Ne.columnWidth,o.event.x));var dt=g(ke).filter(function(Gt){return Gt.calcdata.key===Ne.calcdata.key}),Dt=dt.sort(function(Gt,Mt){return Ve(Gt)-Ve(Mt)});Dt.forEach(function(Gt,Mt){Gt.xIndex=Mt,Gt.x=Ne===Gt?Gt.x:Gt.xScale(Gt)}),ke.filter(function(Gt){return Ne!==Gt}).transition().ease(l.transitionEase).duration(l.transitionDuration).attr("transform",function(Gt){return r(Gt.x,0)}),De.call(f).attr("transform",r(Ne.x,-l.uplift))}).on("dragend",function(Ne){var De=o.select(this),Ve=Ne.calcdata;Ne.x=Ne.xScale(Ne),Ne.calcdata.columnDragInProgress=!1,F(De,Ne,0),O(ae,Ve,Ve.columns.map(function(dt){return dt.xIndex}))})),ke.each(function(Ne){n.setClipUrl(o.select(this),m(ae,Ne),ae)});var Ae=ke.selectAll("."+l.cn.columnBlock).data(s.splitToPanels,t.keyFun);Ae.enter().append("g").classed(l.cn.columnBlock,!0).attr("id",function(Ne){return Ne.key}),Ae.style("cursor",function(Ne){return Ne.dragHandle?"ew-resize":Ne.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var Oe=Ae.filter(U),He=Ae.filter(V);oe&&He.call(o.behavior.drag().origin(function(Ne){return o.event.stopPropagation(),Ne}).on("drag",re(ae,ye,-1)).on("dragend",function(){})),A(ae,ye,Oe,Ae),A(ae,ye,He,Ae);var Ge=ye.selectAll("."+l.cn.scrollAreaClip).data(t.repeat,t.keyFun);Ge.enter().append("clipPath").classed(l.cn.scrollAreaClip,!0).attr("id",function(Ne){return y(ae,Ne)});var _e=Ge.selectAll("."+l.cn.scrollAreaClipRect).data(t.repeat,t.keyFun);_e.enter().append("rect").classed(l.cn.scrollAreaClipRect,!0).attr("x",-l.overdrag).attr("y",-l.uplift).attr("fill","none"),_e.attr("width",function(Ne){return Ne.width+2*l.overdrag}).attr("height",function(Ne){return Ne.height+l.uplift});var Ie=ke.selectAll("."+l.cn.columnBoundary).data(t.repeat,t.keyFun);Ie.enter().append("g").classed(l.cn.columnBoundary,!0);var We=ke.selectAll("."+l.cn.columnBoundaryClippath).data(t.repeat,t.keyFun);We.enter().append("clipPath").classed(l.cn.columnBoundaryClippath,!0),We.attr("id",function(Ne){return m(ae,Ne)});var et=We.selectAll("."+l.cn.columnBoundaryRect).data(t.repeat,t.keyFun);et.enter().append("rect").classed(l.cn.columnBoundaryRect,!0).attr("fill","none"),et.attr("width",function(Ne){return Ne.columnWidth+2*d(Ne)}).attr("height",function(Ne){return Ne.calcdata.height+2*d(Ne)+l.uplift}).attr("x",function(Ne){return-d(Ne)}).attr("y",function(Ne){return-d(Ne)}),te(null,He,ye)};function d(Q){return Math.ceil(Q.calcdata.maxLineWidth/2)}function y(Q,ae){return"clip"+Q._fullLayout._uid+"_scrollAreaBottomClip_"+ae.key}function m(Q,ae){return"clip"+Q._fullLayout._uid+"_columnBoundaryClippath_"+ae.calcdata.key+"_"+ae.specIndex}function g(Q){return[].concat.apply([],Q.map(function(ae){return ae})).map(function(ae){return ae.__data__})}function x(Q,ae,ie){function oe(ke){var Ae=ke.rowBlocks;return G(Ae,Ae.length-1)+(Ae.length?Y(Ae[Ae.length-1],1/0):1)}var fe=Q.selectAll("."+l.cn.scrollbarKit).data(t.repeat,t.keyFun);fe.enter().append("g").classed(l.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),fe.each(function(ke){var Ae=ke.scrollbarState;Ae.totalHeight=oe(ke),Ae.scrollableAreaHeight=ke.groupHeight-j(ke),Ae.currentlyVisibleHeight=Math.min(Ae.totalHeight,Ae.scrollableAreaHeight),Ae.ratio=Ae.currentlyVisibleHeight/Ae.totalHeight,Ae.barLength=Math.max(Ae.ratio*Ae.currentlyVisibleHeight,l.goldenRatio*l.scrollbarWidth),Ae.barWiggleRoom=Ae.currentlyVisibleHeight-Ae.barLength,Ae.wiggleRoom=Math.max(0,Ae.totalHeight-Ae.scrollableAreaHeight),Ae.topY=Ae.barWiggleRoom===0?0:ke.scrollY/Ae.wiggleRoom*Ae.barWiggleRoom,Ae.bottomY=Ae.topY+Ae.barLength,Ae.dragMultiplier=Ae.wiggleRoom/Ae.barWiggleRoom}).attr("transform",function(ke){var Ae=ke.width+l.scrollbarWidth/2+l.scrollbarOffset;return r(Ae,j(ke))});var ye=fe.selectAll("."+l.cn.scrollbar).data(t.repeat,t.keyFun);ye.enter().append("g").classed(l.cn.scrollbar,!0);var ce=ye.selectAll("."+l.cn.scrollbarSlider).data(t.repeat,t.keyFun);ce.enter().append("g").classed(l.cn.scrollbarSlider,!0),ce.attr("transform",function(ke){return r(0,ke.scrollbarState.topY||0)});var me=ce.selectAll("."+l.cn.scrollbarGlyph).data(t.repeat,t.keyFun);me.enter().append("line").classed(l.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",l.scrollbarWidth).attr("stroke-linecap","round").attr("y1",l.scrollbarWidth/2),me.attr("y2",function(ke){return ke.scrollbarState.barLength-l.scrollbarWidth/2}).attr("stroke-opacity",function(ke){return ke.columnDragInProgress||!ke.scrollbarState.barWiggleRoom||ie?0:.4}),me.transition().delay(0).duration(0),me.transition().delay(l.scrollbarHideDelay).duration(l.scrollbarHideDuration).attr("stroke-opacity",0);var xe=ye.selectAll("."+l.cn.scrollbarCaptureZone).data(t.repeat,t.keyFun);xe.enter().append("line").classed(l.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",l.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ke){var Ae=o.event.y,Oe=this.getBoundingClientRect(),He=ke.scrollbarState,Ge=Ae-Oe.top,_e=o.scale.linear().domain([0,He.scrollableAreaHeight]).range([0,He.totalHeight]).clamp(!0);He.topY<=Ge&&Ge<=He.bottomY||re(ae,Q,null,_e(Ge-He.barLength/2))(ke)}).call(o.behavior.drag().origin(function(ke){return o.event.stopPropagation(),ke.scrollbarState.scrollbarScrollInProgress=!0,ke}).on("drag",re(ae,Q)).on("dragend",function(){})),xe.attr("y2",function(ke){return ke.scrollbarState.scrollableAreaHeight}),ae._context.staticPlot&&(me.remove(),xe.remove())}function A(Q,ae,ie,oe){var fe=b(ie),ye=S(fe);v(ye);var ce=w(ye);M(ce);var me=_(ye),xe=T(me);P(xe),E(xe,ae,oe,Q),se(ye)}function b(Q){var ae=Q.selectAll("."+l.cn.columnCells).data(t.repeat,t.keyFun);return ae.enter().append("g").classed(l.cn.columnCells,!0),ae.exit().remove(),ae}function S(Q){var ae=Q.selectAll("."+l.cn.columnCell).data(s.splitToCells,function(ie){return ie.keyWithinBlock});return ae.enter().append("g").classed(l.cn.columnCell,!0),ae.exit().remove(),ae}function w(Q){var ae=Q.selectAll("."+l.cn.cellRect).data(t.repeat,function(ie){return ie.keyWithinBlock});return ae.enter().append("rect").classed(l.cn.cellRect,!0),ae}function T(Q){var ae=Q.selectAll("."+l.cn.cellText).data(t.repeat,function(ie){return ie.keyWithinBlock});return ae.enter().append("text").classed(l.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){o.event.stopPropagation()}),ae}function _(Q){var ae=Q.selectAll("."+l.cn.cellTextHolder).data(t.repeat,function(ie){return ie.keyWithinBlock});return ae.enter().append("g").classed(l.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ae}function v(Q){Q.each(function(ae,ie){var oe=ae.calcdata.cells.font,fe=ae.column.specIndex,ye={size:I(oe.size,fe,ie),color:I(oe.color,fe,ie),family:I(oe.family,fe,ie)};ae.rowNumber=ae.key,ae.align=I(ae.calcdata.cells.align,fe,ie),ae.cellBorderWidth=I(ae.calcdata.cells.line.width,fe,ie),ae.font=ye})}function P(Q){Q.each(function(ae){n.font(o.select(this),ae.font)})}function M(Q){Q.attr("width",function(ae){return ae.column.columnWidth}).attr("stroke-width",function(ae){return ae.cellBorderWidth}).each(function(ae){var ie=o.select(this);h.stroke(ie,I(ae.calcdata.cells.line.color,ae.column.specIndex,ae.rowNumber)),h.fill(ie,I(ae.calcdata.cells.fill.color,ae.column.specIndex,ae.rowNumber))})}function E(Q,ae,ie,oe){Q.text(function(fe){var ye=fe.column.specIndex,ce=fe.rowNumber,me=fe.value,xe=typeof me=="string",ke=xe&&me.match(/<br>/i),Ae=!xe||ke;fe.mayHaveMarkup=xe&&me.match(/[<&>]/);var Oe=D(me);fe.latex=Oe;var He=Oe?"":I(fe.calcdata.cells.prefix,ye,ce)||"",Ge=Oe?"":I(fe.calcdata.cells.suffix,ye,ce)||"",_e=Oe?null:I(fe.calcdata.cells.format,ye,ce)||null,Ie=He+(_e?p(_e)(fe.value):fe.value)+Ge,We;fe.wrappingNeeded=!fe.wrapped&&!Ae&&!Oe&&(We=N(Ie)),fe.cellHeightMayIncrease=ke||Oe||fe.mayHaveMarkup||(We===void 0?N(Ie):We),fe.needsConvertToTspans=fe.mayHaveMarkup||fe.wrappingNeeded||fe.latex;var et;if(fe.wrappingNeeded){var Ne=l.wrapSplitCharacter===" "?Ie.replace(/<a href=/ig,"<a_href="):Ie,De=Ne.split(l.wrapSplitCharacter),Ve=l.wrapSplitCharacter===" "?De.map(function(dt){return dt.replace(/<a_href=/ig,"<a href=")}):De;fe.fragments=Ve.map(function(dt){return{text:dt,width:null}}),fe.fragments.push({fragment:l.wrapSpacer,width:null}),et=Ve.join(l.lineBreaker)+l.lineBreaker+l.wrapSpacer}else delete fe.fragments,et=Ie;return et}).attr("dy",function(fe){return fe.needsConvertToTspans?0:"0.75em"}).each(function(fe){var ye=this,ce=o.select(ye),me=fe.wrappingNeeded?J:le;fe.needsConvertToTspans?a.convertToTspans(ce,oe,me(ie,ye,ae,oe,fe)):o.select(ye.parentNode).attr("transform",function(xe){return r(ue(xe),l.cellPad)}).attr("text-anchor",function(xe){return{left:"start",center:"middle",right:"end"}[xe.align]})})}function D(Q){return typeof Q=="string"&&Q.match(l.latexCheck)}function N(Q){return Q.indexOf(l.wrapSplitCharacter)!==-1}function O(Q,ae,ie){var oe=ae.gdColumnsOriginalOrder;ae.gdColumns.sort(function(fe,ye){return ie[oe.indexOf(fe)]-ie[oe.indexOf(ye)]}),ae.columnorder=ie,Q.emit("plotly_restyle")}function I(Q,ae,ie){if(Array.isArray(Q)){var oe=Q[Math.min(ae,Q.length-1)];return Array.isArray(oe)?oe[Math.min(ie,oe.length-1)]:oe}else return Q}function F(Q,ae,ie){Q.transition().ease(l.releaseTransitionEase).duration(l.releaseTransitionDuration).attr("transform",r(ae.x,ie))}function V(Q){return Q.type==="cells"}function U(Q){return Q.type==="header"}function j(Q){var ae=Q.rowBlocks.length?Q.rowBlocks[0].auxiliaryBlocks:[];return ae.reduce(function(ie,oe){return ie+Y(oe,1/0)},0)}function Z(Q,ae,ie){for(var oe=[],fe=0,ye=0;ye<Q.length;ye++){for(var ce=Q[ye],me=ce.rows,xe=0,ke=0;ke<me.length;ke++)xe+=me[ke].rowHeight;ce.allRowsHeight=xe;var Ae=fe+xe,Oe=ae,He=Oe+ie;Oe<Ae&&He>fe&&oe.push(ye),fe+=xe}return oe}function te(Q,ae,ie){var oe=g(ae)[0];if(oe!==void 0){var fe=oe.rowBlocks,ye=oe.calcdata,ce=G(fe,fe.length),me=oe.calcdata.groupHeight-j(oe),xe=ye.scrollY=Math.max(0,Math.min(ce-me,ye.scrollY)),ke=Z(fe,xe,me);ke.length===1&&(ke[0]===fe.length-1?ke.unshift(ke[0]-1):ke.push(ke[0]+1)),ke[0]%2&&ke.reverse(),ae.each(function(Ae,Oe){Ae.page=ke[Oe],Ae.scrollY=xe}),ae.attr("transform",function(Ae){var Oe=G(Ae.rowBlocks,Ae.page)-Ae.scrollY;return r(0,Oe)}),Q&&(W(Q,ie,ae,ke,oe.prevPages,oe,0),W(Q,ie,ae,ke,oe.prevPages,oe,1),x(ie,Q))}}function re(Q,ae,ie,oe){return function(ye){var ce=ye.calcdata?ye.calcdata:ye,me=ae.filter(function(Oe){return ce.key===Oe.key}),xe=ie||ce.scrollbarState.dragMultiplier,ke=ce.scrollY;ce.scrollY=oe===void 0?ce.scrollY+xe*o.event.dy:oe;var Ae=me.selectAll("."+l.cn.yColumn).selectAll("."+l.cn.columnBlock).filter(V);return te(Q,Ae,me),ce.scrollY===ke}}function W(Q,ae,ie,oe,fe,ye,ce){var me=oe[ce]!==fe[ce];me&&(clearTimeout(ye.currentRepaint[ce]),ye.currentRepaint[ce]=setTimeout(function(){var xe=ie.filter(function(ke,Ae){return Ae===ce&&oe[Ae]!==fe[Ae]});A(Q,ae,xe,ie),fe[ce]=oe[ce]}))}function J(Q,ae,ie,oe){return function(){var ye=o.select(ae.parentNode);ye.each(function(ce){var me=ce.fragments;ye.selectAll("tspan.line").each(function(Ie,We){me[We].width=this.getComputedTextLength()});var xe=me[me.length-1].width,ke=me.slice(0,-1),Ae=[],Oe,He,Ge=0,_e=ce.column.columnWidth-2*l.cellPad;for(ce.value="";ke.length;)Oe=ke.shift(),He=Oe.width+xe,Ge+He>_e&&(ce.value+=Ae.join(l.wrapSpacer)+l.lineBreaker,Ae=[],Ge=0),Ae.push(Oe.text),Ge+=He;Ge&&(ce.value+=Ae.join(l.wrapSpacer)),ce.wrapped=!0}),ye.selectAll("tspan.line").remove(),E(ye.select("."+l.cn.cellText),ie,Q,oe),o.select(ae.parentNode.parentNode).call(se)}}function le(Q,ae,ie,oe,fe){return function(){if(!fe.settledY){var ce=o.select(ae.parentNode),me=$(fe),xe=fe.key-me.firstRowIndex,ke=me.rows[xe].rowHeight,Ae=fe.cellHeightMayIncrease?ae.parentNode.getBoundingClientRect().height+2*l.cellPad:ke,Oe=Math.max(Ae,ke),He=Oe-me.rows[xe].rowHeight;He&&(me.rows[xe].rowHeight=Oe,Q.selectAll("."+l.cn.columnCell).call(se),te(null,Q.filter(V),0),x(ie,oe,!0)),ce.attr("transform",function(){var Ge=this,_e=Ge.parentNode,Ie=_e.getBoundingClientRect(),We=o.select(Ge.parentNode).select("."+l.cn.cellRect).node().getBoundingClientRect(),et=Ge.transform.baseVal.consolidate(),Ne=We.top-Ie.top+(et?et.matrix.f:l.cellPad);return r(ue(fe,o.select(Ge.parentNode).select("."+l.cn.cellTextHolder).node().getBoundingClientRect().width),Ne)}),fe.settledY=!0}}}function ue(Q,ae){switch(Q.align){case"left":return l.cellPad;case"right":return Q.column.columnWidth-(ae||0)-l.cellPad;case"center":return(Q.column.columnWidth-(ae||0))/2;default:return l.cellPad}}function se(Q){Q.attr("transform",function(ae){var ie=ae.rowBlocks[0].auxiliaryBlocks.reduce(function(ce,me){return ce+Y(me,1/0)},0),oe=$(ae),fe=Y(oe,ae.key),ye=fe+ie;return r(0,ye)}).selectAll("."+l.cn.cellRect).attr("height",function(ae){return K($(ae),ae.key).rowHeight})}function G(Q,ae){for(var ie=0,oe=ae-1;oe>=0;oe--)ie+=ee(Q[oe]);return ie}function Y(Q,ae){for(var ie=0,oe=0;oe<Q.rows.length&&Q.rows[oe].rowIndex<ae;oe++)ie+=Q.rows[oe].rowHeight;return ie}function ee(Q){var ae=Q.allRowsHeight;if(ae!==void 0)return ae;for(var ie=0,oe=0;oe<Q.rows.length;oe++)ie+=Q.rows[oe].rowHeight;return Q.allRowsHeight=ie,ie}function $(Q){return Q.rowBlocks[Q.page]}function K(Q,ae){return Q.rows[ae-Q.firstRowIndex]}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"./constants":1065,"./data_preparation_helper":1066,"./data_split_helpers":1067,"@plotly/d3":58}],1071:[function(e,k,z){var l=e("../../plots/template_attributes").hovertemplateAttrs,o=e("../../plots/template_attributes").texttemplateAttrs,c=e("../../components/colorscale/attributes"),p=e("../../plots/domain").attributes,t=e("../pie/attributes"),n=e("../sunburst/attributes"),a=e("./constants"),i=e("../../lib/extend").extendFlat;k.exports={labels:n.labels,parents:n.parents,values:n.values,branchvalues:n.branchvalues,count:n.count,level:n.level,maxdepth:n.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:i({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:n.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:n.marker.line,editType:"calc"},c("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:i({},t.textfont,{}),editType:"calc"},text:t.text,textinfo:n.textinfo,texttemplate:o({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:t.hovertext,hoverinfo:n.hoverinfo,hovertemplate:l({},{keys:a.eventDataKeys}),textfont:t.textfont,insidetextfont:t.insidetextfont,outsidetextfont:i({},t.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:t.sort,root:n.root,domain:p({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"../sunburst/attributes":1045,"./constants":1074}],1072:[function(e,k,z){var l=e("../../plots/plots");z.name="treemap",z.plot=function(o,c,p,t){l.plotBasePlot(z.name,o,c,p,t)},z.clean=function(o,c,p,t){l.cleanBasePlot(z.name,o,c,p,t)}},{"../../plots/plots":619}],1073:[function(e,k,z){var l=e("../sunburst/calc");z.calc=function(o,c){return l.calc(o,c)},z.crossTraceCalc=function(o){return l._runCrossTraceCalc("treemap",o)}},{"../sunburst/calc":1047}],1074:[function(e,k,z){k.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1075:[function(e,k,z){var l=e("../../lib"),o=e("./attributes"),c=e("../../components/color"),p=e("../../plots/domain").defaults,t=e("../bar/defaults").handleText,n=e("../bar/constants").TEXTPAD,a=e("../../components/colorscale"),i=a.hasColorscale,r=a.handleDefaults;k.exports=function(u,s,h,d){function y(E,D){return l.coerce(u,s,o,E,D)}var m=y("labels"),g=y("parents");if(!m||!m.length||!g||!g.length){s.visible=!1;return}var x=y("values");x&&x.length?y("branchvalues"):y("count"),y("level"),y("maxdepth");var A=y("tiling.packing");A==="squarify"&&y("tiling.squarifyratio"),y("tiling.flip"),y("tiling.pad");var b=y("text");y("texttemplate"),s.texttemplate||y("textinfo",Array.isArray(b)?"text+label":"label"),y("hovertext"),y("hovertemplate");var S=y("pathbar.visible"),w="auto";t(u,s,d,y,w,{hasPathbar:S,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),y("textposition");var T=s.textposition.indexOf("bottom")!==-1,_=y("marker.line.width");_&&y("marker.line.color",d.paper_bgcolor);var v=y("marker.colors"),P=s._hasColorscale=i(u,"marker","colors")||(u.marker||{}).coloraxis;P?r(u,s,d,y,{prefix:"marker.",cLetter:"c"}):y("marker.depthfade",!(v||[]).length);var M=s.textfont.size*2;y("marker.pad.t",T?M/4:M),y("marker.pad.l",M/4),y("marker.pad.r",M/4),y("marker.pad.b",T?M:M/4),s._hovered={marker:{line:{width:2,color:c.contrast(d.paper_bgcolor)}}},S&&(y("pathbar.thickness",s.pathbar.textfont.size+2*n),y("pathbar.side"),y("pathbar.edgeshape")),y("sort"),y("root.color"),p(s,d,y),s._length=null}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":1071}],1076:[function(e,k,z){var l=e("@plotly/d3"),o=e("../sunburst/helpers"),c=e("../bar/uniform_text"),p=c.clearMinTextSize,t=e("../bar/style").resizeText,n=e("./plot_one");k.exports=function(i,r,f,u,s){var h=s.type,d=s.drawDescendants,y=i._fullLayout,m=y["_"+h+"layer"],g,x,A=!f;if(p(h,y),g=m.selectAll("g.trace."+h).data(r,function(S){return S[0].trace.uid}),g.enter().append("g").classed("trace",!0).classed(h,!0),g.order(),!y.uniformtext.mode&&o.hasTransition(f)){u&&(x=u());var b=l.transition().duration(f.duration).ease(f.easing).each("end",function(){x&&x()}).each("interrupt",function(){x&&x()});b.each(function(){m.selectAll("g.trace").each(function(S){n(i,S,this,f,d)})})}else g.each(function(S){n(i,S,this,f,d)}),y.uniformtext.mode&&t(i,m.selectAll(".trace"),h);A&&g.exit().remove()}},{"../bar/style":662,"../bar/uniform_text":664,"../sunburst/helpers":1051,"./plot_one":1085,"@plotly/d3":58}],1077:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../lib"),c=e("../../components/drawing"),p=e("../../lib/svg_text_utils"),t=e("./partition"),n=e("./style").styleOne,a=e("./constants"),i=e("../sunburst/helpers"),r=e("../sunburst/fx"),f=!0;k.exports=function(s,h,d,y,m){var g=m.barDifY,x=m.width,A=m.height,b=m.viewX,S=m.viewY,w=m.pathSlice,T=m.toMoveInsideSlice,_=m.strTransform,v=m.hasTransition,P=m.handleSlicesExit,M=m.makeUpdateSliceInterpolator,E=m.makeUpdateTextInterpolator,D={},N=s._fullLayout,O=h[0],I=O.trace,F=O.hierarchy,V=x/I._entryDepth,U=i.listPath(d.data,"id"),j=t(F.copy(),[x,A],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();j=j.filter(function(te){var re=U.indexOf(te.data.id);return re===-1?!1:(te.x0=V*re,te.x1=V*(re+1),te.y0=g,te.y1=g+A,te.onPathbar=!0,!0)}),j.reverse(),y=y.data(j,i.getPtId),y.enter().append("g").classed("pathbar",!0),P(y,f,D,[x,A],w),y.order();var Z=y;v&&(Z=Z.transition().each("end",function(){var te=l.select(this);i.setSliceCursor(te,s,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),Z.each(function(te){te._x0=b(te.x0),te._x1=b(te.x1),te._y0=S(te.y0),te._y1=S(te.y1),te._hoverX=b(te.x1-Math.min(x,A)/2),te._hoverY=S(te.y1-A/2);var re=l.select(this),W=o.ensureSingle(re,"path","surface",function(se){se.style("pointer-events","all")});v?W.transition().attrTween("d",function(se){var G=M(se,f,D,[x,A]);return function(Y){return w(G(Y))}}):W.attr("d",w),re.call(r,d,s,h,{styleOne:n,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(i.setSliceCursor,s,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:s._transitioning}),W.call(n,te,I,{hovered:!1}),te._text=(i.getPtLabel(te)||"").split("<br>").join(" ")||"";var J=o.ensureSingle(re,"g","slicetext"),le=o.ensureSingle(J,"text","",function(se){se.attr("data-notex",1)}),ue=o.ensureUniformFontSize(s,i.determineTextFont(I,te,N.font,{onPathbar:!0}));le.text(te._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(c.font,ue).call(p.convertToTspans,s),te.textBB=c.bBox(le.node()),te.transform=T(te,{fontSize:ue.size,onPathbar:!0}),te.transform.fontSize=ue.size,v?le.transition().attrTween("transform",function(se){var G=E(se,f,D,[x,A]);return function(Y){return _(G(Y))}}):le.attr("transform",_(te))})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"./constants":1074,"./partition":1083,"./style":1086,"@plotly/d3":58}],1078:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../lib"),c=e("../../components/drawing"),p=e("../../lib/svg_text_utils"),t=e("./partition"),n=e("./style").styleOne,a=e("./constants"),i=e("../sunburst/helpers"),r=e("../sunburst/fx"),f=e("../sunburst/plot").formatSliceLabel,u=!1;k.exports=function(h,d,y,m,g){var x=g.width,A=g.height,b=g.viewX,S=g.viewY,w=g.pathSlice,T=g.toMoveInsideSlice,_=g.strTransform,v=g.hasTransition,P=g.handleSlicesExit,M=g.makeUpdateSliceInterpolator,E=g.makeUpdateTextInterpolator,D=g.prevEntry,N={},O=h._fullLayout,I=d[0],F=I.trace,V=F.textposition.indexOf("left")!==-1,U=F.textposition.indexOf("right")!==-1,j=F.textposition.indexOf("bottom")!==-1,Z=!j&&!F.marker.pad.t||j&&!F.marker.pad.b,te=t(y,[x,A],{packing:F.tiling.packing,squarifyratio:F.tiling.squarifyratio,flipX:F.tiling.flip.indexOf("x")>-1,flipY:F.tiling.flip.indexOf("y")>-1,pad:{inner:F.tiling.pad,top:F.marker.pad.t,left:F.marker.pad.l,right:F.marker.pad.r,bottom:F.marker.pad.b}}),re=te.descendants(),W=1/0,J=-1/0;re.forEach(function(Y){var ee=Y.depth;ee>=F._maxDepth?(Y.x0=Y.x1=(Y.x0+Y.x1)/2,Y.y0=Y.y1=(Y.y0+Y.y1)/2):(W=Math.min(W,ee),J=Math.max(J,ee))}),m=m.data(re,i.getPtId),F._maxVisibleLayers=isFinite(J)?J-W+1:0,m.enter().append("g").classed("slice",!0),P(m,u,N,[x,A],w),m.order();var le=null;if(v&&D){var ue=i.getPtId(D);m.each(function(Y){le===null&&i.getPtId(Y)===ue&&(le={x0:Y.x0,x1:Y.x1,y0:Y.y0,y1:Y.y1})})}var se=function(){return le||{x0:0,x1:x,y0:0,y1:A}},G=m;return v&&(G=G.transition().each("end",function(){var Y=l.select(this);i.setSliceCursor(Y,h,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),G.each(function(Y){var ee=i.isHeader(Y,F);Y._x0=b(Y.x0),Y._x1=b(Y.x1),Y._y0=S(Y.y0),Y._y1=S(Y.y1),Y._hoverX=b(Y.x1-F.marker.pad.r),Y._hoverY=S(j?Y.y1-F.marker.pad.b/2:Y.y0+F.marker.pad.t/2);var $=l.select(this),K=o.ensureSingle($,"path","surface",function(oe){oe.style("pointer-events","all")});v?K.transition().attrTween("d",function(oe){var fe=M(oe,u,se(),[x,A]);return function(ye){return w(fe(ye))}}):K.attr("d",w),$.call(r,y,h,d,{styleOne:n,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(i.setSliceCursor,h,{isTransitioning:h._transitioning}),K.call(n,Y,F,{hovered:!1}),Y.x0===Y.x1||Y.y0===Y.y1?Y._text="":ee?Y._text=Z?"":i.getPtLabel(Y)||"":Y._text=f(Y,y,F,d,O)||"";var Q=o.ensureSingle($,"g","slicetext"),ae=o.ensureSingle(Q,"text","",function(oe){oe.attr("data-notex",1)}),ie=o.ensureUniformFontSize(h,i.determineTextFont(F,Y,O.font));ae.text(Y._text||" ").classed("slicetext",!0).attr("text-anchor",U?"end":V||ee?"start":"middle").call(c.font,ie).call(p.convertToTspans,h),Y.textBB=c.bBox(ae.node()),Y.transform=T(Y,{fontSize:ie.size,isHeader:ee}),Y.transform.fontSize=ie.size,v?ae.transition().attrTween("transform",function(oe){var fe=E(oe,u,se(),[x,A]);return function(ye){return _(fe(ye))}}):ae.attr("transform",_(Y))}),le}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"../sunburst/plot":1055,"./constants":1074,"./partition":1083,"./style":1086,"@plotly/d3":58}],1079:[function(e,k,z){k.exports=function l(o,c,p){var t;p.swapXY&&(t=o.x0,o.x0=o.y0,o.y0=t,t=o.x1,o.x1=o.y1,o.y1=t),p.flipX&&(t=o.x0,o.x0=c[0]-o.x1,o.x1=c[0]-t),p.flipY&&(t=o.y0,o.y0=c[1]-o.y1,o.y1=c[1]-t);var n=o.children;if(n)for(var a=0;a<n.length;a++)l(n[a],c,p)}},{}],1080:[function(e,k,z){k.exports={moduleType:"trace",name:"treemap",basePlotModule:e("./base_plot"),categories:[],animatable:!0,attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),style:e("./style").style,colorbar:e("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":1071,"./base_plot":1072,"./calc":1073,"./defaults":1075,"./layout_attributes":1081,"./layout_defaults":1082,"./plot":1084,"./style":1086}],1081:[function(e,k,z){k.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1082:[function(e,k,z){var l=e("../../lib"),o=e("./layout_attributes");k.exports=function(p,t){function n(a,i){return l.coerce(p,t,o,a,i)}n("treemapcolorway",t.colorway),n("extendtreemapcolors")}},{"../../lib":503,"./layout_attributes":1081}],1083:[function(e,k,z){var l=e("d3-hierarchy"),o=e("./flip_tree");k.exports=function(t,n,a){var i=a.flipX,r=a.flipY,f=a.packing==="dice-slice",u=a.pad[r?"bottom":"top"],s=a.pad[i?"right":"left"],h=a.pad[i?"left":"right"],d=a.pad[r?"top":"bottom"],y;f&&(y=s,s=u,u=y,y=h,h=d,d=y);var m=l.treemap().tile(c(a.packing,a.squarifyratio)).paddingInner(a.pad.inner).paddingLeft(s).paddingRight(h).paddingTop(u).paddingBottom(d).size(f?[n[1],n[0]]:n)(t);return(f||i||r)&&o(m,n,{swapXY:f,flipX:i,flipY:r}),m};function c(p,t){switch(p){case"squarify":return l.treemapSquarify.ratio(t);case"binary":return l.treemapBinary;case"dice":return l.treemapDice;case"slice":return l.treemapSlice;default:return l.treemapSliceDice}}},{"./flip_tree":1079,"d3-hierarchy":115}],1084:[function(e,k,z){var l=e("./draw"),o=e("./draw_descendants");k.exports=function(p,t,n,a){return l(p,t,n,a,{type:"treemap",drawDescendants:o})}},{"./draw":1076,"./draw_descendants":1078}],1085:[function(e,k,z){var l=e("@plotly/d3"),o=e("d3-interpolate").interpolate,c=e("../sunburst/helpers"),p=e("../../lib"),t=e("../bar/constants").TEXTPAD,n=e("../bar/plot"),a=n.toMoveInsideBar,i=e("../bar/uniform_text"),r=i.recordMinTextSize,f=e("./constants"),u=e("./draw_ancestors");function s(h){return c.isHierarchyRoot(h)?"":c.getPtId(h)}k.exports=function(d,y,m,g,x){var A=d._fullLayout,b=y[0],S=b.trace,w=S.type,T=w==="icicle",_=b.hierarchy,v=c.findEntryWithLevel(_,S.level),P=l.select(m),M=P.selectAll("g.pathbar"),E=P.selectAll("g.slice");if(!v){M.remove(),E.remove();return}var D=c.isHierarchyRoot(v),N=!A.uniformtext.mode&&c.hasTransition(g),O=c.getMaxDepth(S),I=function(Ve){return Ve.data.depth-v.data.depth<O},F=A._size,V=S.domain,U=F.w*(V.x[1]-V.x[0]),j=F.h*(V.y[1]-V.y[0]),Z=U,te=S.pathbar.thickness,re=S.marker.line.width+f.gapWithPathbar,W=S.pathbar.visible?S.pathbar.side.indexOf("bottom")>-1?j+re:-(te+re):0,J={x0:Z,x1:Z,y0:W,y1:W+te},le=function(Ve,dt,Dt){var Gt=S.tiling.pad,Mt=function(At){return At-Gt<=dt.x0},zt=function(At){return At+Gt>=dt.x1},Nt=function(At){return At-Gt<=dt.y0},Et=function(At){return At+Gt>=dt.y1};return Ve.x0===dt.x0&&Ve.x1===dt.x1&&Ve.y0===dt.y0&&Ve.y1===dt.y1?{x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1}:{x0:Mt(Ve.x0-Gt)?0:zt(Ve.x0-Gt)?Dt[0]:Ve.x0,x1:Mt(Ve.x1+Gt)?0:zt(Ve.x1+Gt)?Dt[0]:Ve.x1,y0:Nt(Ve.y0-Gt)?0:Et(Ve.y0-Gt)?Dt[1]:Ve.y0,y1:Nt(Ve.y1+Gt)?0:Et(Ve.y1+Gt)?Dt[1]:Ve.y1}},ue=null,se={},G={},Y=null,ee=function(Ve,dt){return dt?se[s(Ve)]:G[s(Ve)]},$=function(Ve,dt,Dt,Gt){if(dt)return se[s(_)]||J;var Mt=G[S.level]||Dt;return I(Ve)?le(Ve,Mt,Gt):{}};b.hasMultipleRoots&&D&&O++,S._maxDepth=O,S._backgroundColor=A.paper_bgcolor,S._entryDepth=v.data.depth,S._atRootLevel=D;var K=-U/2+F.l+F.w*(V.x[1]+V.x[0])/2,Q=-j/2+F.t+F.h*(1-(V.y[1]+V.y[0])/2),ae=function(Ve){return K+Ve},ie=function(Ve){return Q+Ve},oe=ie(0),fe=ae(0),ye=function(Ve){return fe+Ve},ce=function(Ve){return oe+Ve};function me(Ve,dt){return Ve+","+dt}var xe=ye(0),ke=function(Ve){Ve.x=Math.max(xe,Ve.x)},Ae=S.pathbar.edgeshape,Oe=function(Ve){var dt=ye(Math.max(Math.min(Ve.x0,Ve.x0),0)),Dt=ye(Math.min(Math.max(Ve.x1,Ve.x1),Z)),Gt=ce(Ve.y0),Mt=ce(Ve.y1),zt=te/2,Nt={},Et={};Nt.x=dt,Et.x=Dt,Nt.y=Et.y=(Gt+Mt)/2;var At={x:dt,y:Gt},it={x:Dt,y:Gt},ht={x:Dt,y:Mt},$e={x:dt,y:Mt};return Ae===">"?(At.x-=zt,it.x-=zt,ht.x-=zt,$e.x-=zt):Ae==="/"?(ht.x-=zt,$e.x-=zt,Nt.x-=zt/2,Et.x-=zt/2):Ae==="\\"?(At.x-=zt,it.x-=zt,Nt.x-=zt/2,Et.x-=zt/2):Ae==="<"&&(Nt.x-=zt,Et.x-=zt),ke(At),ke($e),ke(Nt),ke(it),ke(ht),ke(Et),"M"+me(At.x,At.y)+"L"+me(it.x,it.y)+"L"+me(Et.x,Et.y)+"L"+me(ht.x,ht.y)+"L"+me($e.x,$e.y)+"L"+me(Nt.x,Nt.y)+"Z"},He=function(Ve){var dt=ae(Ve.x0),Dt=ae(Ve.x1),Gt=ie(Ve.y0),Mt=ie(Ve.y1),zt=Dt-dt,Nt=Mt-Gt;if(!zt||!Nt)return"";var Et=0,At=zt>2*Et&&Nt>2*Et?Et:0,it=function(ht,$e){return At?"a"+me(At,At)+" 0 0 1 "+me(ht,$e):""};return"M"+me(dt,Gt+At)+it(At,-At)+"L"+me(Dt-At,Gt)+it(At,At)+"L"+me(Dt,Mt-At)+it(-At,At)+"L"+me(dt+At,Mt)+it(-At,-At)+"Z"},Ge=function(Ve,dt){var Dt=Ve.x0,Gt=Ve.x1,Mt=Ve.y0,zt=Ve.y1,Nt=Ve.textBB,Et=function(Bt){return S.textposition.indexOf(Bt)!==-1},At=Et("bottom"),it=Et("top")||dt.isHeader&&!At,ht=it?"start":At?"end":"middle",$e=Et("right"),Ee=Et("left")||dt.onPathbar,Xe=Ee?-1:$e?1:0,rt=S[T?"tiling":"marker"].pad;if(dt.isHeader){if(Dt+=(T?rt:rt.l)-t,Gt-=(T?rt:rt.r)-t,Dt>=Gt){var ut=(Dt+Gt)/2;Dt=ut,Gt=ut}var Pt;At?(Pt=zt-(T?rt:rt.b),Mt<Pt&&Pt<zt&&(Mt=Pt)):(Pt=Mt+(T?rt:rt.t),Mt<Pt&&Pt<zt&&(zt=Pt))}var kt=a(Dt,Gt,Mt,zt,Nt,{isHorizontal:!1,constrained:!0,angle:0,anchor:ht,leftToRight:Xe});return kt.fontSize=dt.fontSize,kt.targetX=ae(kt.targetX),kt.targetY=ie(kt.targetY),isNaN(kt.targetX)||isNaN(kt.targetY)?{}:(Dt!==Gt&&Mt!==zt&&r(S.type,kt,A),{scale:kt.scale,rotate:kt.rotate,textX:kt.textX,textY:kt.textY,anchorX:kt.anchorX,anchorY:kt.anchorY,targetX:kt.targetX,targetY:kt.targetY})},_e=function(Ve,dt){for(var Dt,Gt=0,Mt=Ve;!Dt&&Gt<O;)Gt++,Mt=Mt.parent,Mt?Dt=ee(Mt,dt):Gt=O;return Dt||{}},Ie=function(Ve,dt,Dt,Gt){var Mt=ee(Ve,dt),zt;if(dt)zt=J;else{var Nt=ee(v,dt);Nt?zt=le(Ve,Nt,Gt):zt={}}return o(Mt,zt)},We=function(Ve,dt,Dt,Gt,Mt){var zt=ee(Ve,dt),Nt;if(zt)Nt=zt;else if(dt)Nt=J;else if(ue)if(Ve.parent){var Et=Y||Dt;Et&&!dt?Nt=le(Ve,Et,Gt):(Nt={},p.extendFlat(Nt,_e(Ve,dt)))}else Nt=p.extendFlat({},Ve),T&&(Mt.orientation==="h"?Mt.flipX?Nt.x0=Ve.x1:Nt.x1=0:Mt.flipY?Nt.y0=Ve.y1:Nt.y1=0);else Nt={};return o(Nt,{x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1})},et=function(Ve,dt,Dt,Gt){var Mt=ee(Ve,dt),zt={},Nt=$(Ve,dt,Dt,Gt);p.extendFlat(zt,{transform:Ge({x0:Nt.x0,x1:Nt.x1,y0:Nt.y0,y1:Nt.y1,textBB:Ve.textBB,_text:Ve._text},{isHeader:c.isHeader(Ve,S)})}),Mt?zt=Mt:Ve.parent&&p.extendFlat(zt,_e(Ve,dt));var Et=Ve.transform;return Ve.x0!==Ve.x1&&Ve.y0!==Ve.y1&&r(S.type,Et,A),o(zt,{transform:{scale:Et.scale,rotate:Et.rotate,textX:Et.textX,textY:Et.textY,anchorX:Et.anchorX,anchorY:Et.anchorY,targetX:Et.targetX,targetY:Et.targetY}})},Ne=function(Ve,dt,Dt,Gt,Mt){var zt=Gt[0],Nt=Gt[1];N?Ve.exit().transition().each(function(){var Et=l.select(this),At=Et.select("path.surface");At.transition().attrTween("d",function(ht){var $e=Ie(ht,dt,Dt,[zt,Nt]);return function(Ee){return Mt($e(Ee))}});var it=Et.select("g.slicetext");it.attr("opacity",0)}).remove():Ve.exit().remove()},De=function(Ve){var dt=Ve.transform;return Ve.x0!==Ve.x1&&Ve.y0!==Ve.y1&&r(S.type,dt,A),p.getTextTransform({textX:dt.textX,textY:dt.textY,anchorX:dt.anchorX,anchorY:dt.anchorY,targetX:dt.targetX,targetY:dt.targetY,scale:dt.scale,rotate:dt.rotate})};N&&(M.each(function(Ve){se[s(Ve)]={x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1},Ve.transform&&(se[s(Ve)].transform={textX:Ve.transform.textX,textY:Ve.transform.textY,anchorX:Ve.transform.anchorX,anchorY:Ve.transform.anchorY,targetX:Ve.transform.targetX,targetY:Ve.transform.targetY,scale:Ve.transform.scale,rotate:Ve.transform.rotate})}),E.each(function(Ve){G[s(Ve)]={x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1},Ve.transform&&(G[s(Ve)].transform={textX:Ve.transform.textX,textY:Ve.transform.textY,anchorX:Ve.transform.anchorX,anchorY:Ve.transform.anchorY,targetX:Ve.transform.targetX,targetY:Ve.transform.targetY,scale:Ve.transform.scale,rotate:Ve.transform.rotate}),!ue&&c.isEntry(Ve)&&(ue=Ve)})),Y=x(d,y,v,E,{width:U,height:j,viewX:ae,viewY:ie,pathSlice:He,toMoveInsideSlice:Ge,prevEntry:ue,makeUpdateSliceInterpolator:We,makeUpdateTextInterpolator:et,handleSlicesExit:Ne,hasTransition:N,strTransform:De}),S.pathbar.visible?u(d,y,v,M,{barDifY:W,width:Z,height:te,viewX:ye,viewY:ce,pathSlice:Oe,toMoveInsideSlice:Ge,makeUpdateSliceInterpolator:We,makeUpdateTextInterpolator:et,handleSlicesExit:Ne,hasTransition:N,strTransform:De}):M.remove()}},{"../../lib":503,"../bar/constants":650,"../bar/plot":659,"../bar/uniform_text":664,"../sunburst/helpers":1051,"./constants":1074,"./draw_ancestors":1077,"@plotly/d3":58,"d3-interpolate":116}],1086:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../components/color"),c=e("../../lib"),p=e("../sunburst/helpers"),t=e("../bar/uniform_text").resizeText;function n(i){var r=i._fullLayout._treemaplayer.selectAll(".trace");t(i,r,"treemap"),r.each(function(f){var u=l.select(this),s=f[0],h=s.trace;u.style("opacity",h.opacity),u.selectAll("path.surface").each(function(d){l.select(this).call(a,d,h,{hovered:!1})})})}function a(i,r,f,u){var s=(u||{}).hovered,h=r.data.data,d=h.i,y,m,g=h.color,x=p.isHierarchyRoot(r),A=1;if(s)y=f._hovered.marker.line.color,m=f._hovered.marker.line.width;else if(x&&g===f.root.color)A=100,y="rgba(0,0,0,0)",m=0;else if(y=c.castOption(f,d,"marker.line.color")||o.defaultLine,m=c.castOption(f,d,"marker.line.width")||0,!f._hasColorscale&&!r.onPathbar){var b=f.marker.depthfade;if(b){var S=o.combine(o.addOpacity(f._backgroundColor,.75),g),w;if(b===!0){var T=p.getMaxDepth(f);isFinite(T)?p.isLeaf(r)?w=0:w=f._maxVisibleLayers-(r.data.depth-f._entryDepth):w=r.data.height+1}else w=r.data.depth-f._entryDepth,f._atRootLevel||w++;if(w>0)for(var _=0;_<w;_++){var v=.5*_/w;g=o.combine(o.addOpacity(S,v),g)}}}i.style("stroke-width",m).call(o.fill,g).call(o.stroke,y).style("opacity",A)}k.exports={style:n,styleOne:a}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"../sunburst/helpers":1051,"@plotly/d3":58}],1087:[function(e,k,z){var l=e("../box/attributes"),o=e("../../lib/extend").extendFlat,c=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;k.exports={y:l.y,x:l.x,x0:l.x0,y0:l.y0,xhoverformat:c("x"),yhoverformat:c("y"),name:o({},l.name,{}),orientation:o({},l.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:l.fillcolor,points:o({},l.boxpoints,{}),jitter:o({},l.jitter,{}),pointpos:o({},l.pointpos,{}),width:o({},l.width,{}),marker:l.marker,text:l.text,hovertext:l.hovertext,hovertemplate:l.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:l.offsetgroup,alignmentgroup:l.alignmentgroup,selected:l.selected,unselected:l.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673}],1088:[function(e,k,z){var l=e("../../lib"),o=e("../../plots/cartesian/axes"),c=e("../box/calc"),p=e("./helpers"),t=e("../../constants/numerical").BADNUM;k.exports=function(f,u){var s=c(f,u);if(s[0].t.empty)return s;for(var h=f._fullLayout,d=o.getFromId(f,u[u.orientation==="h"?"xaxis":"yaxis"]),y=1/0,m=-1/0,g=0,x=0,A=0;A<s.length;A++){var b=s[A],S=b.pts.map(p.extractVal),w=b.bandwidth=a(u,b,S),T=b.span=i(u,b,d,w);if(b.min===b.max&&w===0)T=b.span=[b.min,b.max],b.density=[{v:1,t:T[0]}],b.bandwidth=w,g=Math.max(g,1);else{var _=T[1]-T[0],v=Math.ceil(_/(w/3)),P=_/v;if(!isFinite(P)||!isFinite(v))return l.error("Something went wrong with computing the violin span"),s[0].t.empty=!0,s;var M=p.makeKDE(b,u,S);b.density=new Array(v);for(var E=0,D=T[0];D<T[1]+P/2;E++,D+=P){var N=M(D);b.density[E]={v:N,t:D},g=Math.max(g,N)}}x=Math.max(x,S.length),y=Math.min(y,T[0]),m=Math.max(m,T[1])}var O=o.findExtremes(d,[y,m],{padded:!0});if(u._extremes[d._id]=O,u.width)s[0].t.maxKDE=g;else{var I=h._violinScaleGroupStats,F=u.scalegroup,V=I[F];V?(V.maxKDE=Math.max(V.maxKDE,g),V.maxCount=Math.max(V.maxCount,x)):I[F]={maxKDE:g,maxCount:x}}return s[0].t.labels.kde=l._(f,"kde:"),s};function n(r,f,u){var s=Math.min(f,u/1.349);return 1.059*s*Math.pow(r,-.2)}function a(r,f,u){var s=f.max-f.min;if(!s)return r.bandwidth?r.bandwidth:0;if(r.bandwidth)return Math.max(r.bandwidth,s/1e4);var h=u.length,d=l.stdev(u,h-1,f.mean);return Math.max(n(h,d,f.q3-f.q1),s/100)}function i(r,f,u,s){var h=r.spanmode,d=r.span||[],y=[f.min,f.max],m=[f.min-2*s,f.max+2*s],g;function x(b){var S=d[b],w=u.type==="multicategory"?u.r2c(S):u.d2c(S,0,r[f.valLetter+"calendar"]);return w===t?m[b]:w}h==="soft"?g=m:h==="hard"?g=y:g=[x(0),x(1)];var A={type:"linear",range:g};return o.setConvert(A),A.cleanRange(),g}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../box/calc":674,"./helpers":1091}],1089:[function(e,k,z){var l=e("../box/cross_trace_calc").setPositionOffset,o=["v","h"];k.exports=function(p,t){for(var n=p.calcdata,a=t.xaxis,i=t.yaxis,r=0;r<o.length;r++){for(var f=o[r],u=f==="h"?i:a,s=[],h=0;h<n.length;h++){var d=n[h],y=d[0].t,m=d[0].trace;m.visible===!0&&m.type==="violin"&&!y.empty&&m.orientation===f&&m.xaxis===a._id&&m.yaxis===i._id&&s.push(h)}l("violin",p,s,u)}}},{"../box/cross_trace_calc":675}],1090:[function(e,k,z){var l=e("../../lib"),o=e("../../components/color"),c=e("../box/defaults"),p=e("./attributes");k.exports=function(n,a,i,r){function f(P,M){return l.coerce(n,a,p,P,M)}function u(P,M){return l.coerce2(n,a,p,P,M)}if(c.handleSampleDefaults(n,a,f,r),a.visible!==!1){f("bandwidth"),f("side");var s=f("width");s||(f("scalegroup",a.name),f("scalemode"));var h=f("span"),d;Array.isArray(h)&&(d="manual"),f("spanmode",d);var y=f("line.color",(n.marker||{}).color||i),m=f("line.width"),g=f("fillcolor",o.addOpacity(a.line.color,.5));c.handlePointsDefaults(n,a,f,{prefix:""});var x=u("box.width"),A=u("box.fillcolor",g),b=u("box.line.color",y),S=u("box.line.width",m),w=f("box.visible",Boolean(x||A||b||S));w||(a.box={visible:!1});var T=u("meanline.color",y),_=u("meanline.width",m),v=f("meanline.visible",Boolean(T||_));v||(a.meanline={visible:!1})}}},{"../../components/color":366,"../../lib":503,"../box/defaults":676,"./attributes":1087}],1091:[function(e,k,z){var l=e("../../lib"),o={gaussian:function(c){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*c*c)}};z.makeKDE=function(c,p,t){var n=t.length,a=o.gaussian,i=c.bandwidth,r=1/(n*i);return function(f){for(var u=0,s=0;s<n;s++)u+=a((f-t[s])/i);return r*u}},z.getPositionOnKdePath=function(c,p,t){var n,a;p.orientation==="h"?(n="y",a="x"):(n="x",a="y");var i=l.findPointOnPath(c.path,t,a,{pathLength:c.pathLength}),r=c.posCenterPx,f=i[n],u=p.side==="both"?2*r-f:r;return[f,u]},z.getKdeValue=function(c,p,t){var n=c.pts.map(z.extractVal),a=z.makeKDE(c,p,n);return a(t)/c.posDensityScale},z.extractVal=function(c){return c.v}},{"../../lib":503}],1092:[function(e,k,z){var l=e("../../lib"),o=e("../../plots/cartesian/axes"),c=e("../box/hover"),p=e("./helpers");k.exports=function(n,a,i,r,f){f||(f={});var u=f.hoverLayer,s=n.cd,h=s[0].trace,d=h.hoveron,y=d.indexOf("violins")!==-1,m=d.indexOf("kde")!==-1,g=[],x,A;if(y||m){var b=c.hoverOnBoxes(n,a,i,r);if(m&&b.length>0){var S=n.xa,w=n.ya,T,_,v,P,M;h.orientation==="h"?(M=a,T="y",v=w,_="x",P=S):(M=i,T="x",v=S,_="y",P=w);var E=s[n.index];if(M>=E.span[0]&&M<=E.span[1]){var D=l.extendFlat({},n),N=P.c2p(M,!0),O=p.getKdeValue(E,h,M),I=p.getPositionOnKdePath(E,h,N),F=v._offset,V=v._length;D[T+"0"]=I[0],D[T+"1"]=I[1],D[_+"0"]=D[_+"1"]=N,D[_+"Label"]=_+": "+o.hoverLabelText(P,M,h[_+"hoverformat"])+", "+s[0].t.labels.kde+" "+O.toFixed(3),D.spikeDistance=b[0].spikeDistance;var U=T+"Spike";D[U]=b[0][U],b[0].spikeDistance=void 0,b[0][U]=void 0,D.hovertemplate=!1,g.push(D),A={stroke:n.color},A[T+"1"]=l.constrain(F+I[0],F,F+V),A[T+"2"]=l.constrain(F+I[1],F,F+V),A[_+"1"]=A[_+"2"]=P._offset+N}}y&&(g=g.concat(b))}d.indexOf("points")!==-1&&(x=c.hoverOnPoints(n,a,i));var j=u.selectAll(".violinline-"+h.uid).data(A?[0]:[]);return j.enter().append("line").classed("violinline-"+h.uid,!0).attr("stroke-width",1.5),j.exit().remove(),j.attr(A),r==="closest"?x?[x]:g:(x&&g.push(x),g)}},{"../../lib":503,"../../plots/cartesian/axes":554,"../box/hover":678,"./helpers":1091}],1093:[function(e,k,z){k.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../box/select"),moduleType:"trace",name:"violin",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../box/defaults":676,"../box/select":683,"../scatter/style":950,"./attributes":1087,"./calc":1088,"./cross_trace_calc":1089,"./defaults":1090,"./hover":1092,"./layout_attributes":1094,"./layout_defaults":1095,"./plot":1096,"./style":1097}],1094:[function(e,k,z){var l=e("../box/layout_attributes"),o=e("../../lib").extendFlat;k.exports={violinmode:o({},l.boxmode,{}),violingap:o({},l.boxgap,{}),violingroupgap:o({},l.boxgroupgap,{})}},{"../../lib":503,"../box/layout_attributes":680}],1095:[function(e,k,z){var l=e("../../lib"),o=e("./layout_attributes"),c=e("../box/layout_defaults");k.exports=function(t,n,a){function i(r,f){return l.coerce(t,n,o,r,f)}c._supply(t,n,a,i,"violin")}},{"../../lib":503,"../box/layout_defaults":681,"./layout_attributes":1094}],1096:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../lib"),c=e("../../components/drawing"),p=e("../box/plot"),t=e("../scatter/line_points"),n=e("./helpers");k.exports=function(i,r,f,u){var s=i._fullLayout,h=r.xaxis,d=r.yaxis;function y(m){var g=t(m,{xaxis:h,yaxis:d,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return c.smoothopen(g[0],1)}o.makeTraceGroups(u,f,"trace violins").each(function(m){var g=l.select(this),x=m[0],A=x.t,b=x.trace;if(b.visible!==!0||A.empty){g.remove();return}var S=A.bPos,w=A.bdPos,T=r[A.valLetter+"axis"],_=r[A.posLetter+"axis"],v=b.side==="both",P=v||b.side==="positive",M=v||b.side==="negative",E=g.selectAll("path.violin").data(o.identity);E.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),E.exit().remove(),E.each(function(j){var Z=l.select(this),te=j.density,re=te.length,W=_.c2l(j.pos+S,!0),J=_.l2p(W),le;if(b.width)le=A.maxKDE/w;else{var ue=s._violinScaleGroupStats[b.scalegroup];le=b.scalemode==="count"?ue.maxKDE/w*(ue.maxCount/j.pts.length):ue.maxKDE/w}var se,G,Y,ee,$,K,Q;if(P){for(K=new Array(re),ee=0;ee<re;ee++)Q=K[ee]={},Q[A.posLetter]=W+te[ee].v/le,Q[A.valLetter]=T.c2l(te[ee].t,!0);se=y(K)}if(M){for(K=new Array(re),$=0,ee=re-1;$<re;$++,ee--)Q=K[$]={},Q[A.posLetter]=W-te[ee].v/le,Q[A.valLetter]=T.c2l(te[ee].t,!0);G=y(K)}if(v)Y=se+"L"+G.substr(1)+"Z";else{var ae=[J,T.c2p(te[0].t)],ie=[J,T.c2p(te[re-1].t)];b.orientation==="h"&&(ae.reverse(),ie.reverse()),P?Y="M"+ae+"L"+se.substr(1)+"L"+ie:Y="M"+ie+"L"+G.substr(1)+"L"+ae}Z.attr("d",Y),j.posCenterPx=J,j.posDensityScale=le*w,j.path=Z.node(),j.pathLength=j.path.getTotalLength()/(v?2:1)});var D=b.box,N=D.width,O=(D.line||{}).width,I,F;v?(I=w*N,F=0):P?(I=[0,w*N/2],F=O*{x:1,y:-1}[A.posLetter]):(I=[w*N/2,0],F=O*{x:-1,y:1}[A.posLetter]),p.plotBoxAndWhiskers(g,{pos:_,val:T},b,{bPos:S,bdPos:I,bPosPxOffset:F}),p.plotBoxMean(g,{pos:_,val:T},b,{bPos:S,bdPos:I,bPosPxOffset:F});var V;!b.box.visible&&b.meanline.visible&&(V=o.identity);var U=g.selectAll("path.meanline").data(V||[]);U.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),U.exit().remove(),U.each(function(j){var Z=T.c2p(j.mean,!0),te=n.getPositionOnKdePath(j,b,Z);l.select(this).attr("d",b.orientation==="h"?"M"+Z+","+te[0]+"V"+te[1]:"M"+te[0]+","+Z+"H"+te[1])}),p.plotPoints(g,{x:h,y:d},b,A)})}},{"../../components/drawing":388,"../../lib":503,"../box/plot":682,"../scatter/line_points":940,"./helpers":1091,"@plotly/d3":58}],1097:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../components/color"),c=e("../scatter/style").stylePoints;k.exports=function(t){var n=l.select(t).selectAll("g.trace.violins");n.style("opacity",function(a){return a[0].trace.opacity}),n.each(function(a){var i=a[0].trace,r=l.select(this),f=i.box||{},u=f.line||{},s=i.meanline||{},h=s.width;r.selectAll("path.violin").style("stroke-width",i.line.width+"px").call(o.stroke,i.line.color).call(o.fill,i.fillcolor),r.selectAll("path.box").style("stroke-width",u.width+"px").call(o.stroke,u.color).call(o.fill,f.fillcolor);var d={"stroke-width":h+"px","stroke-dasharray":2*h+"px,"+h+"px"};r.selectAll("path.mean").style(d).call(o.stroke,s.color),r.selectAll("path.meanline").style(d).call(o.stroke,s.color),c(r,i,t)})}},{"../../components/color":366,"../scatter/style":950,"@plotly/d3":58}],1098:[function(e,k,z){var l=e("../../components/colorscale/attributes"),o=e("../isosurface/attributes"),c=e("../surface/attributes"),p=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat,n=e("../../plot_api/edit_types").overrideAll,a=k.exports=n(t({x:o.x,y:o.y,z:o.z,value:o.value,isomin:o.isomin,isomax:o.isomax,surface:o.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:o.slices,caps:o.caps,text:o.text,hovertext:o.hovertext,xhoverformat:o.xhoverformat,yhoverformat:o.yhoverformat,zhoverformat:o.zhoverformat,valuehoverformat:o.valuehoverformat,hovertemplate:o.hovertemplate},l("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:o.colorbar,opacity:o.opacity,opacityscale:c.opacityscale,lightposition:o.lightposition,lighting:o.lighting,flatshading:o.flatshading,contour:o.contour,hoverinfo:t({},p.hoverinfo),showlegend:t({},p.showlegend,{dflt:!1})}),"calc","nested");a.x.editType=a.y.editType=a.z.editType=a.value.editType="calc+clearAxisTypes",a.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../isosurface/attributes":862,"../surface/attributes":1057}],1099:[function(e,k,z){var l=e("../../../stackgl_modules").gl_mesh3d,o=e("../../lib/gl_format_color").parseColorScale,c=e("../../lib/str2rgbarray"),p=e("../../components/colorscale").extractOpts,t=e("../../plots/gl3d/zip3"),n=e("../isosurface/convert").findNearestOnAxis,a=e("../isosurface/convert").generateIsoMeshes;function i(u,s,h){this.scene=u,this.uid=h,this.mesh=s,this.name="",this.data=null,this.showContour=!1}var r=i.prototype;r.handlePick=function(u){if(u.object===this.mesh){var s=u.data.index,h=this.data._meshX[s],d=this.data._meshY[s],y=this.data._meshZ[s],m=this.data._Ys.length,g=this.data._Zs.length,x=n(h,this.data._Xs).id,A=n(d,this.data._Ys).id,b=n(y,this.data._Zs).id,S=u.index=b+g*A+g*m*x;u.traceCoordinate=[this.data._meshX[S],this.data._meshY[S],this.data._meshZ[S],this.data._value[S]];var w=this.data.hovertext||this.data.text;return Array.isArray(w)&&w[S]!==void 0?u.textLabel=w[S]:w&&(u.textLabel=w),!0}},r.update=function(u){var s=this.scene,h=s.fullSceneLayout;this.data=a(u);function d(A,b,S,w){return b.map(function(T){return A.d2l(T,0,w)*S})}var y=t(d(h.xaxis,u._meshX,s.dataScale[0],u.xcalendar),d(h.yaxis,u._meshY,s.dataScale[1],u.ycalendar),d(h.zaxis,u._meshZ,s.dataScale[2],u.zcalendar)),m=t(u._meshI,u._meshJ,u._meshK),g={positions:y,cells:m,lightPosition:[u.lightposition.x,u.lightposition.y,u.lightposition.z],ambient:u.lighting.ambient,diffuse:u.lighting.diffuse,specular:u.lighting.specular,roughness:u.lighting.roughness,fresnel:u.lighting.fresnel,vertexNormalsEpsilon:u.lighting.vertexnormalsepsilon,faceNormalsEpsilon:u.lighting.facenormalsepsilon,opacity:u.opacity,opacityscale:u.opacityscale,contourEnable:u.contour.show,contourColor:c(u.contour.color).slice(0,3),contourWidth:u.contour.width,useFacetNormals:u.flatshading},x=p(u);g.vertexIntensity=u._meshIntensity,g.vertexIntensityBounds=[x.min,x.max],g.colormap=o(u),this.mesh.update(g)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function f(u,s){var h=u.glplot.gl,d=l({gl:h}),y=new i(u,d,s.uid);return d._trace=y,y.update(s),u.glplot.add(d),y}k.exports=f},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609,"../isosurface/convert":864}],1100:[function(e,k,z){var l=e("../../lib"),o=e("./attributes"),c=e("../isosurface/defaults").supplyIsoDefaults,p=e("../surface/defaults").opacityscaleDefaults;k.exports=function(n,a,i,r){function f(u,s){return l.coerce(n,a,o,u,s)}c(n,a,i,r,f),p(n,a,r,f)}},{"../../lib":503,"../isosurface/defaults":865,"../surface/defaults":1060,"./attributes":1098}],1101:[function(e,k,z){k.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert"),moduleType:"trace",name:"volume",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"../isosurface/calc":863,"./attributes":1098,"./convert":1099,"./defaults":1100}],1102:[function(e,k,z){var l=e("../bar/attributes"),o=e("../scatter/attributes").line,c=e("../../plots/attributes"),p=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../plots/template_attributes").hovertemplateAttrs,n=e("../../plots/template_attributes").texttemplateAttrs,a=e("./constants"),i=e("../../lib/extend").extendFlat,r=e("../../components/color");function f(u){return{marker:{color:i({},l.marker.color,{arrayOk:!1,editType:"style"}),line:{color:i({},l.marker.line.color,{arrayOk:!1,editType:"style"}),width:i({},l.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}k.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:l.x,x0:l.x0,dx:l.dx,y:l.y,y0:l.y0,dy:l.dy,xperiod:l.xperiod,yperiod:l.yperiod,xperiod0:l.xperiod0,yperiod0:l.yperiod0,xperiodalignment:l.xperiodalignment,yperiodalignment:l.yperiodalignment,xhoverformat:p("x"),yhoverformat:p("y"),hovertext:l.hovertext,hovertemplate:t({},{keys:a.eventDataKeys}),hoverinfo:i({},c.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:n({editType:"plot"},{keys:a.eventDataKeys.concat(["label"])}),text:l.text,textposition:l.textposition,insidetextanchor:l.insidetextanchor,textangle:l.textangle,textfont:l.textfont,insidetextfont:l.insidetextfont,outsidetextfont:l.outsidetextfont,constraintext:l.constraintext,cliponaxis:l.cliponaxis,orientation:l.orientation,offset:l.offset,width:l.width,increasing:f(),decreasing:f(),totals:f(),connector:{line:{color:i({},o.color,{dflt:r.defaultLine}),width:i({},o.width,{editType:"plot"}),dash:o.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:l.offsetgroup,alignmentgroup:l.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926,"./constants":1104}],1103:[function(e,k,z){var l=e("../../plots/cartesian/axes"),o=e("../../plots/cartesian/align_period"),c=e("../../lib").mergeArray,p=e("../scatter/calc_selection"),t=e("../../constants/numerical").BADNUM;function n(i){return i==="a"||i==="absolute"}function a(i){return i==="t"||i==="total"}k.exports=function(r,f){var u=l.getFromId(r,f.xaxis||"x"),s=l.getFromId(r,f.yaxis||"y"),h,d,y,m,g,x;f.orientation==="h"?(h=u.makeCalcdata(f,"x"),y=s.makeCalcdata(f,"y"),m=o(f,s,"y",y),g=!!f.yperiodalignment,x="y"):(h=s.makeCalcdata(f,"y"),y=u.makeCalcdata(f,"x"),m=o(f,u,"x",y),g=!!f.xperiodalignment,x="x"),d=m.vals;for(var A=Math.min(d.length,h.length),b=new Array(A),S=0,w,T=!1,_=0;_<A;_++){var v=h[_]||0,P=!1;(h[_]!==t||a(f.measure[_])||n(f.measure[_]))&&_+1<A&&(h[_+1]!==t||a(f.measure[_+1])||n(f.measure[_+1]))&&(P=!0);var M=b[_]={i:_,p:d[_],s:v,rawS:v,cNext:P};n(f.measure[_])?(S=M.s,M.isSum=!0,M.dir="totals",M.s=S):a(f.measure[_])?(M.isSum=!0,M.dir="totals",M.s=S):(M.isSum=!1,M.dir=M.rawS<0?"decreasing":"increasing",w=M.s,M.s=S+w,S+=w),M.dir==="totals"&&(T=!0),g&&(b[_].orig_p=y[_],b[_][x+"End"]=m.ends[_],b[_][x+"Start"]=m.starts[_]),f.ids&&(M.id=String(f.ids[_])),M.v=(f.base||0)+S}return b.length&&(b[0].hasTotals=T),c(f.text,b,"tx"),c(f.hovertext,b,"htx"),p(b,f),b}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928}],1104:[function(e,k,z){k.exports={eventDataKeys:["initial","delta","final"]}},{}],1105:[function(e,k,z){var l=e("../bar/cross_trace_calc").setGroupPositions;k.exports=function(c,p){var t=c._fullLayout,n=c._fullData,a=c.calcdata,i=p.xaxis,r=p.yaxis,f=[],u=[],s=[],h,d;for(d=0;d<n.length;d++){var y=n[d];y.visible===!0&&y.xaxis===i._id&&y.yaxis===r._id&&y.type==="waterfall"&&(h=a[d],y.orientation==="h"?s.push(h):u.push(h),f.push(h))}var m={mode:t.waterfallmode,norm:t.waterfallnorm,gap:t.waterfallgap,groupgap:t.waterfallgroupgap};for(l(c,i,r,u,m),l(c,r,i,s,m),d=0;d<f.length;d++){h=f[d];for(var g=0;g<h.length;g++){var x=h[g];x.isSum===!1&&(x.s0+=g===0?0:h[g-1].s),g+1<h.length&&(h[g].nextP0=h[g+1].p0,h[g].nextS0=h[g+1].s0)}}}},{"../bar/cross_trace_calc":651}],1106:[function(e,k,z){var l=e("../../lib"),o=e("../bar/defaults").handleGroupingDefaults,c=e("../bar/defaults").handleText,p=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),n=e("./attributes"),a=e("../../components/color"),i=e("../../constants/delta.js"),r=i.INCREASING.COLOR,f=i.DECREASING.COLOR,u="#4499FF";function s(y,m,g){y(m+".marker.color",g),y(m+".marker.line.color",a.defaultLine),y(m+".marker.line.width")}function h(y,m,g,x){function A(_,v){return l.coerce(y,m,n,_,v)}var b=p(y,m,x,A);if(!b){m.visible=!1;return}t(y,m,x,A),A("xhoverformat"),A("yhoverformat"),A("measure"),A("orientation",m.x&&!m.y?"h":"v"),A("base"),A("offset"),A("width"),A("text"),A("hovertext"),A("hovertemplate");var S=A("textposition");c(y,m,x,A,S,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),m.textposition!=="none"&&(A("texttemplate"),m.texttemplate||A("textinfo")),s(A,"increasing",r),s(A,"decreasing",f),s(A,"totals",u);var w=A("connector.visible");if(w){A("connector.mode");var T=A("connector.line.width");T&&(A("connector.line.color"),A("connector.line.dash"))}}function d(y,m){var g,x;function A(S){return l.coerce(x._input,x,n,S)}if(m.waterfallmode==="group")for(var b=0;b<y.length;b++)x=y[b],g=x._input,o(g,x,m,A)}k.exports={supplyDefaults:h,crossTraceDefaults:d}},{"../../components/color":366,"../../constants/delta.js":473,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":1102}],1107:[function(e,k,z){k.exports=function(o,c){return o.x="xVal"in c?c.xVal:c.x,o.y="yVal"in c?c.yVal:c.y,"initial"in c&&(o.initial=c.initial),"delta"in c&&(o.delta=c.delta),"final"in c&&(o.final=c.final),c.xa&&(o.xaxis=c.xa),c.ya&&(o.yaxis=c.ya),o}},{}],1108:[function(e,k,z){var l=e("../../plots/cartesian/axes").hoverLabelText,o=e("../../components/color").opacity,c=e("../bar/hover").hoverOnBars,p=e("../../constants/delta.js"),t={increasing:p.INCREASING.SYMBOL,decreasing:p.DECREASING.SYMBOL};k.exports=function(i,r,f,u,s){var h=c(i,r,f,u,s);if(!h)return;var d=h.cd,y=d[0].trace,m=y.orientation==="h",g=m?"x":"y",x=m?i.xa:i.ya;function A(D){return l(x,D,y[g+"hoverformat"])}var b=h.index,S=d[b],w=S.isSum?S.b+S.s:S.rawS;if(!S.isSum){h.initial=S.b+S.s-w,h.delta=w,h.final=h.initial+h.delta;var T=A(Math.abs(h.delta));h.deltaLabel=w<0?"("+T+")":T,h.finalLabel=A(h.final),h.initialLabel=A(h.initial)}var _=S.hi||y.hoverinfo,v=[];if(_&&_!=="none"&&_!=="skip"){var P=_==="all",M=_.split("+"),E=function(D){return P||M.indexOf(D)!==-1};S.isSum||(E("final")&&(m?!E("x"):!E("y"))&&v.push(h.finalLabel),E("delta")&&(w<0?v.push(h.deltaLabel+" "+t.decreasing):v.push(h.deltaLabel+" "+t.increasing)),E("initial")&&v.push("Initial: "+h.initialLabel))}return v.length&&(h.extraText=v.join("<br>")),h.color=n(y,S),[h]};function n(a,i){var r=a[i.dir].marker,f=r.color,u=r.line.color,s=r.line.width;if(o(f))return f;if(o(u)&&s)return u}},{"../../components/color":366,"../../constants/delta.js":473,"../../plots/cartesian/axes":554,"../bar/hover":655}],1109:[function(e,k,z){k.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style").style,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":1102,"./calc":1103,"./cross_trace_calc":1105,"./defaults":1106,"./event_data":1107,"./hover":1108,"./layout_attributes":1110,"./layout_defaults":1111,"./plot":1112,"./style":1113}],1110:[function(e,k,z){k.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1111:[function(e,k,z){var l=e("../../lib"),o=e("./layout_attributes");k.exports=function(c,p,t){var n=!1;function a(f,u){return l.coerce(c,p,o,f,u)}for(var i=0;i<t.length;i++){var r=t[i];if(r.visible&&r.type==="waterfall"){n=!0;break}}n&&(a("waterfallmode"),a("waterfallgap",.2),a("waterfallgroupgap"))}},{"../../lib":503,"./layout_attributes":1110}],1112:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../lib"),c=e("../../components/drawing"),p=e("../../constants/numerical").BADNUM,t=e("../bar/plot"),n=e("../bar/uniform_text").clearMinTextSize;k.exports=function(f,u,s,h){var d=f._fullLayout;n("waterfall",d),t.plot(f,u,s,h,{mode:d.waterfallmode,norm:d.waterfallmode,gap:d.waterfallgap,groupgap:d.waterfallgroupgap}),a(f,u,s,h)};function a(r,f,u,s){var h=f.xaxis,d=f.yaxis;o.makeTraceGroups(s,u,"trace bars").each(function(y){var m=l.select(this),g=y[0].trace,x=o.ensureSingle(m,"g","lines");if(!g.connector||!g.connector.visible){x.remove();return}var A=g.orientation==="h",b=g.connector.mode,S=x.selectAll("g.line").data(o.identity);S.enter().append("g").classed("line",!0),S.exit().remove();var w=S.size();S.each(function(T,_){if(!(_!==w-1&&!T.cNext)){var v=i(T,h,d,A),P=v[0],M=v[1],E="";P[0]!==p&&M[0]!==p&&P[1]!==p&&M[1]!==p&&(b==="spanning"&&!T.isSum&&_>0&&(A?E+="M"+P[0]+","+M[1]+"V"+M[0]:E+="M"+P[1]+","+M[0]+"H"+P[0]),b!=="between"&&(T.isSum||_<w-1)&&(A?E+="M"+P[1]+","+M[0]+"V"+M[1]:E+="M"+P[0]+","+M[1]+"H"+P[1]),P[2]!==p&&M[2]!==p&&(A?E+="M"+P[1]+","+M[1]+"V"+M[2]:E+="M"+P[1]+","+M[1]+"H"+P[2])),E===""&&(E="M0,0Z"),o.ensureSingle(l.select(this),"path").attr("d",E).call(c.setClipUrl,f.layerClipId,r)}})})}function i(r,f,u,s){var h=[],d=[],y=s?f:u,m=s?u:f;return h[0]=y.c2p(r.s0,!0),d[0]=m.c2p(r.p0,!0),h[1]=y.c2p(r.s1,!0),d[1]=m.c2p(r.p1,!0),h[2]=y.c2p(r.nextS0,!0),d[2]=m.c2p(r.nextP0,!0),s?[h,d]:[d,h]}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],1113:[function(e,k,z){var l=e("@plotly/d3"),o=e("../../components/drawing"),c=e("../../components/color"),p=e("../../constants/interactions").DESELECTDIM,t=e("../bar/style"),n=e("../bar/uniform_text").resizeText,a=t.styleTextPoints;function i(r,f,u){var s=u||l.select(r).selectAll("g.waterfalllayer").selectAll("g.trace");n(r,s,"waterfall"),s.style("opacity",function(h){return h[0].trace.opacity}),s.each(function(h){var d=l.select(this),y=h[0].trace;d.selectAll(".point > path").each(function(m){if(!m.isBlank){var g=y[m.dir].marker;l.select(this).call(c.fill,g.color).call(c.stroke,g.line.color).call(o.dashLine,g.line.dash,g.line.width).style("opacity",y.selectedpoints&&!m.selected?p:1)}}),a(d,y,r),d.selectAll(".lines").each(function(){var m=y.connector.line;o.lineGroupStyle(l.select(this).selectAll("path"),m.width,m.color,m.dash)})})}k.exports={style:i}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],1114:[function(e,k,z){var l=e("../plots/cartesian/axes"),o=e("../lib"),c=e("../plot_api/plot_schema"),p=e("./helpers").pointsAccessorFunction,t=e("../constants/numerical").BADNUM;z.moduleType="transform",z.name="aggregate";var n=z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},a=n.aggregations;z.supplyDefaults=function(h,d){var y={},m;function g(D,N){return o.coerce(h,y,n,D,N)}var x=g("enabled");if(!x)return y;var A=c.findArrayAttributes(d),b={};for(m=0;m<A.length;m++)b[A[m]]=1;var S=g("groups");if(!Array.isArray(S)){if(!b[S])return y.enabled=!1,y;b[S]=0}var w=h.aggregations||[],T=y.aggregations=new Array(w.length),_;function v(D,N){return o.coerce(w[m],_,a,D,N)}for(m=0;m<w.length;m++){_={_index:m};var P=v("target"),M=v("func"),E=v("enabled");E&&P&&(b[P]||M==="count"&&b[P]===void 0)?(M==="stddev"&&v("funcmode"),b[P]=0,T[m]=_):T[m]={enabled:!1,_index:m}}for(m=0;m<A.length;m++)b[A[m]]&&T.push({target:A[m],func:a.func.dflt,enabled:!0,_index:-1});return y},z.calcTransform=function(h,d,y){if(!!y.enabled){var m=y.groups,g=o.getTargetArray(d,{target:m});if(!!g){var x,A,b,S,w={},T={},_=[],v=p(d.transforms,y),P=g.length;for(d._length&&(P=Math.min(P,d._length)),x=0;x<P;x++)A=g[x],b=w[A],b===void 0?(w[A]=_.length,S=[x],_.push(S),T[w[A]]=v(x)):(_[b].push(x),T[w[A]]=(T[w[A]]||[]).concat(v(x)));y._indexToPoints=T;var M=y.aggregations;for(x=0;x<M.length;x++)i(h,d,_,M[x]);typeof m=="string"&&i(h,d,_,{target:m,func:"first",enabled:!0}),d._length=_.length}}};function i(h,d,y,m){if(!!m.enabled){for(var g=m.target,x=o.nestedProperty(d,g),A=x.get(),b=l.getDataConversions(h,d,g,A),S=r(m,b),w=new Array(y.length),T=0;T<y.length;T++)w[T]=S(A,y[T]);x.set(w),m.func==="count"&&o.pushUnique(d._arrayAttrs,g)}}function r(h,d){var y=h.func,m=d.d2c,g=d.c2d;switch(y){case"count":return f;case"first":return u;case"last":return s;case"sum":return function(x,A){for(var b=0,S=0;S<A.length;S++){var w=m(x[A[S]]);w!==t&&(b+=w)}return g(b)};case"avg":return function(x,A){for(var b=0,S=0,w=0;w<A.length;w++){var T=m(x[A[w]]);T!==t&&(b+=T,S++)}return S?g(b/S):t};case"min":return function(x,A){for(var b=1/0,S=0;S<A.length;S++){var w=m(x[A[S]]);w!==t&&(b=Math.min(b,w))}return b===1/0?t:g(b)};case"max":return function(x,A){for(var b=-1/0,S=0;S<A.length;S++){var w=m(x[A[S]]);w!==t&&(b=Math.max(b,w))}return b===-1/0?t:g(b)};case"range":return function(x,A){for(var b=1/0,S=-1/0,w=0;w<A.length;w++){var T=m(x[A[w]]);T!==t&&(b=Math.min(b,T),S=Math.max(S,T))}return S===-1/0||b===1/0?t:g(S-b)};case"change":return function(x,A){var b=m(x[A[0]]),S=m(x[A[A.length-1]]);return b===t||S===t?t:g(S-b)};case"median":return function(x,A){for(var b=[],S=0;S<A.length;S++){var w=m(x[A[S]]);w!==t&&b.push(w)}if(!b.length)return t;b.sort(o.sorterAsc);var T=(b.length-1)/2;return g((b[Math.floor(T)]+b[Math.ceil(T)])/2)};case"mode":return function(x,A){for(var b={},S=0,w=t,T=0;T<A.length;T++){var _=m(x[A[T]]);if(_!==t){var v=b[_]=(b[_]||0)+1;v>S&&(S=v,w=_)}}return S?g(w):t};case"rms":return function(x,A){for(var b=0,S=0,w=0;w<A.length;w++){var T=m(x[A[w]]);T!==t&&(b+=T*T,S++)}return S?g(Math.sqrt(b/S)):t};case"stddev":return function(x,A){var b=0,S=0,w=1,T=t,_;for(_=0;_<A.length&&T===t;_++)T=m(x[A[_]]);if(T===t)return t;for(;_<A.length;_++){var v=m(x[A[_]]);if(v!==t){var P=v-T;b+=P,S+=P*P,w++}}var M=h.funcmode==="sample"?w-1:w;return M?Math.sqrt((S-b*b/w)/M):0}}}function f(h,d){return d.length}function u(h,d){return h[d[0]]}function s(h,d){return h[d[d.length-1]]}},{"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plots/cartesian/axes":554,"./helpers":1117}],1115:[function(e,k,z){var l=e("../lib"),o=e("../registry"),c=e("../plots/cartesian/axes"),p=e("./helpers").pointsAccessorFunction,t=e("../constants/filter_ops"),n=t.COMPARISON_OPS,a=t.INTERVAL_OPS,i=t.SET_OPS;z.moduleType="transform",z.name="filter",z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(n).concat(a).concat(i),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},z.supplyDefaults=function(f){var u={};function s(m,g){return l.coerce(f,u,z.attributes,m,g)}var h=s("enabled");if(h){var d=s("target");if(l.isArrayOrTypedArray(d)&&d.length===0)return u.enabled=!1,u;s("preservegaps"),s("operation"),s("value");var y=o.getComponentMethod("calendars","handleDefaults");y(f,u,"valuecalendar",null),y(f,u,"targetcalendar",null)}return u},z.calcTransform=function(f,u,s){if(!s.enabled)return;var h=l.getTargetArray(u,s);if(!h)return;var d=s.target,y=h.length;u._length&&(y=Math.min(y,u._length));var m=s.targetcalendar,g=u._arrayAttrs,x=s.preservegaps;if(typeof d=="string"){var A=l.nestedProperty(u,d+"calendar").get();A&&(m=A)}var b=c.getDataToCoordFunc(f,u,d,h),S=r(s,b,m),w={},T={},_=0;function v(O,I){for(var F=0;F<g.length;F++){var V=l.nestedProperty(u,g[F]);O(V,I)}}var P,M;x?(P=function(O){w[O.astr]=l.extendDeep([],O.get()),O.set(new Array(y))},M=function(O,I){var F=w[O.astr][I];O.get()[I]=F}):(P=function(O){w[O.astr]=l.extendDeep([],O.get()),O.set([])},M=function(O,I){var F=w[O.astr][I];O.get().push(F)}),v(P);for(var E=p(u.transforms,s),D=0;D<y;D++){var N=S(h[D]);N?(v(M,D),T[_++]=E(D)):x&&_++}s._indexToPoints=T,u._length=_};function r(f,u,s){var h=f.operation,d=f.value,y=Array.isArray(d);function m(b){return b.indexOf(h)!==-1}var g=function(b){return u(b,0,f.valuecalendar)},x=function(b){return u(b,0,s)},A;switch(m(n)?A=g(y?d[0]:d):m(a)?A=y?[g(d[0]),g(d[1])]:[g(d),g(d)]:m(i)&&(A=y?d.map(g):[g(d)]),h){case"=":return function(b){return x(b)===A};case"!=":return function(b){return x(b)!==A};case"<":return function(b){return x(b)<A};case"<=":return function(b){return x(b)<=A};case">":return function(b){return x(b)>A};case">=":return function(b){return x(b)>=A};case"[]":return function(b){var S=x(b);return S>=A[0]&&S<=A[1]};case"()":return function(b){var S=x(b);return S>A[0]&&S<A[1]};case"[)":return function(b){var S=x(b);return S>=A[0]&&S<A[1]};case"(]":return function(b){var S=x(b);return S>A[0]&&S<=A[1]};case"][":return function(b){var S=x(b);return S<=A[0]||S>=A[1]};case")(":return function(b){var S=x(b);return S<A[0]||S>A[1]};case"](":return function(b){var S=x(b);return S<=A[0]||S>A[1]};case")[":return function(b){var S=x(b);return S<A[0]||S>=A[1]};case"{}":return function(b){return A.indexOf(x(b))!==-1};case"}{":return function(b){return A.indexOf(x(b))===-1}}}},{"../constants/filter_ops":475,"../lib":503,"../plots/cartesian/axes":554,"../registry":638,"./helpers":1117}],1116:[function(e,k,z){var l=e("../lib"),o=e("../plot_api/plot_schema"),c=e("../plots/plots"),p=e("./helpers").pointsAccessorFunction;z.moduleType="transform",z.name="groupby",z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},z.supplyDefaults=function(n,a,i){var r,f={};function u(g,x){return l.coerce(n,f,z.attributes,g,x)}var s=u("enabled");if(!s)return f;u("groups"),u("nameformat",i._dataLength>1?"%{group} (%{trace})":"%{group}");var h=n.styles,d=f.styles=[];if(h)for(r=0;r<h.length;r++){var y=d[r]={};l.coerce(h[r],d[r],z.attributes.styles,"target");var m=l.coerce(h[r],d[r],z.attributes.styles,"value");l.isPlainObject(m)?y.value=l.extendDeep({},m):m&&delete y.value}return f},z.transform=function(n,a){var i,r,f,u=[];for(r=0;r<n.length;r++)for(i=t(n[r],a),f=0;f<i.length;f++)u.push(i[f]);return u};function t(n,a){var i,r,f,u,s,h,d,y,m,g,x=a.transform,A=a.transformIndex,b=n.transforms[A].groups,S=p(n.transforms,x);if(!l.isArrayOrTypedArray(b)||b.length===0)return[n];var w=l.filterUnique(b),T=new Array(w.length),_=b.length,v=o.findArrayAttributes(n),P=x.styles||[],M={};for(i=0;i<P.length;i++)M[P[i].target]=P[i].value;x.styles&&(g=l.keyedContainer(x,"styles","target","value.name"));var E={},D={};for(i=0;i<w.length;i++){h=w[i],E[h]=i,D[h]=0,d=T[i]=l.extendDeepNoArrays({},n),d._group=h,d.transforms[A]._indexToPoints={};var N=null;for(g&&(N=g.get(h)),N||N===""?d.name=N:d.name=l.templateString(x.nameformat,{trace:n.name,group:h}),y=d.transforms,d.transforms=[],r=0;r<y.length;r++)d.transforms[r]=l.extendDeepNoArrays({},y[r]);for(r=0;r<v.length;r++)l.nestedProperty(d,v[r]).set([])}for(f=0;f<v.length;f++){for(u=v[f],r=0,m=[];r<w.length;r++)m[r]=l.nestedProperty(T[r],u).get();for(s=l.nestedProperty(n,u).get(),r=0;r<_;r++)m[E[b[r]]].push(s[r])}for(r=0;r<_;r++){d=T[E[b[r]]];var O=d.transforms[A]._indexToPoints;O[D[b[r]]]=S(r),D[b[r]]++}for(i=0;i<w.length;i++)h=w[i],d=T[i],c.clearExpandedTraceDefaultColors(d),d=l.extendDeepNoArrays(d,M[h]||{});return T}},{"../lib":503,"../plot_api/plot_schema":542,"../plots/plots":619,"./helpers":1117}],1117:[function(e,k,z){z.pointsAccessorFunction=function(l,o){for(var c,p,t=0;t<l.length&&(c=l[t],c!==o);t++)!c._indexToPoints||c.enabled===!1||(p=c._indexToPoints);var n=p?function(a){return p[a]}:function(a){return[a]};return n}},{}],1118:[function(e,k,z){var l=e("../lib"),o=e("../plots/cartesian/axes"),c=e("./helpers").pointsAccessorFunction,p=e("../constants/numerical").BADNUM;z.moduleType="transform",z.name="sort",z.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},z.supplyDefaults=function(a){var i={};function r(u,s){return l.coerce(a,i,z.attributes,u,s)}var f=r("enabled");return f&&(r("target"),r("order")),i},z.calcTransform=function(a,i,r){if(!!r.enabled){var f=l.getTargetArray(i,r);if(!!f){var u=r.target,s=f.length;i._length&&(s=Math.min(s,i._length));var h=i._arrayAttrs,d=o.getDataToCoordFunc(a,i,u,f),y=t(r,f,d,s),m=c(i.transforms,r),g={},x,A;for(x=0;x<h.length;x++){var b=l.nestedProperty(i,h[x]),S=b.get(),w=new Array(s);for(A=0;A<s;A++)w[A]=S[y[A]];b.set(w)}for(A=0;A<s;A++)g[A]=m(y[A]);r._indexToPoints=g,i._length=s}}};function t(a,i,r,f){var u=new Array(f),s=new Array(f),h;for(h=0;h<f;h++)u[h]={v:i[h],i:h};for(u.sort(n(a,r)),h=0;h<f;h++)s[h]=u[h].i;return s}function n(a,i){switch(a.order){case"ascending":return function(r,f){var u=i(r.v),s=i(f.v);return u===p?1:s===p?-1:u-s};case"descending":return function(r,f){var u=i(r.v),s=i(f.v);return u===p?1:s===p?-1:s-u}}}},{"../constants/numerical":479,"../lib":503,"../plots/cartesian/axes":554,"./helpers":1117}],1119:[function(e,k,z){z.version="2.8.0"},{}],1120:[function(e,k,z){(function(l){(function(){(function(o){if(typeof z=="object"&&typeof k!="undefined")k.exports=o();else{var c;typeof window!="undefined"?c=window:typeof l!="undefined"?c=l:typeof self!="undefined"?c=self:c=this,c.stackgl=o()}})(function(){return function(){function o(c,p,t){function n(r,f){if(!p[r]){if(!c[r]){var u=typeof e=="function"&&e;if(!f&&u)return u(r,!0);if(a)return a(r,!0);var s=new Error("Cannot find module '"+r+"'");throw s.code="MODULE_NOT_FOUND",s}var h=p[r]={exports:{}};c[r][0].call(h.exports,function(d){var y=c[r][1][d];return n(y||d)},h,h.exports,o,c,p,t)}return p[r].exports}for(var a=typeof e=="function"&&e,i=0;i<t.length;i++)n(t[i]);return n}return o}()({1:[function(o,c,p){p.byteLength=s,p.toByteArray=d,p.fromByteArray=g;for(var t=[],n=[],a=typeof Uint8Array!="undefined"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,f=i.length;r<f;++r)t[r]=i[r],n[i.charCodeAt(r)]=r;n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63;function u(x){var A=x.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=x.indexOf("=");b===-1&&(b=A);var S=b===A?0:4-b%4;return[b,S]}function s(x){var A=u(x),b=A[0],S=A[1];return(b+S)*3/4-S}function h(x,A,b){return(A+b)*3/4-b}function d(x){var A,b=u(x),S=b[0],w=b[1],T=new a(h(x,S,w)),_=0,v=w>0?S-4:S,P;for(P=0;P<v;P+=4)A=n[x.charCodeAt(P)]<<18|n[x.charCodeAt(P+1)]<<12|n[x.charCodeAt(P+2)]<<6|n[x.charCodeAt(P+3)],T[_++]=A>>16&255,T[_++]=A>>8&255,T[_++]=A&255;return w===2&&(A=n[x.charCodeAt(P)]<<2|n[x.charCodeAt(P+1)]>>4,T[_++]=A&255),w===1&&(A=n[x.charCodeAt(P)]<<10|n[x.charCodeAt(P+1)]<<4|n[x.charCodeAt(P+2)]>>2,T[_++]=A>>8&255,T[_++]=A&255),T}function y(x){return t[x>>18&63]+t[x>>12&63]+t[x>>6&63]+t[x&63]}function m(x,A,b){for(var S,w=[],T=A;T<b;T+=3)S=(x[T]<<16&16711680)+(x[T+1]<<8&65280)+(x[T+2]&255),w.push(y(S));return w.join("")}function g(x){for(var A,b=x.length,S=b%3,w=[],T=16383,_=0,v=b-S;_<v;_+=T)w.push(m(x,_,_+T>v?v:_+T));return S===1?(A=x[b-1],w.push(t[A>>2]+t[A<<4&63]+"==")):S===2&&(A=(x[b-2]<<8)+x[b-1],w.push(t[A>>10]+t[A>>4&63]+t[A<<2&63]+"=")),w.join("")}},{}],2:[function(o,c,p){},{}],3:[function(o,c,p){(function(t){(function(){var n=o("base64-js"),a=o("ieee754");p.Buffer=u,p.SlowBuffer=S,p.INSPECT_MAX_BYTES=50;var i=2147483647;p.kMaxLength=i,u.TYPED_ARRAY_SUPPORT=r(),!u.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function r(){try{var ce=new Uint8Array(1);return ce.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ce.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(!!u.isBuffer(this))return this.byteOffset}});function f(ce){if(ce>i)throw new RangeError('The value "'+ce+'" is invalid for option "size"');var me=new Uint8Array(ce);return me.__proto__=u.prototype,me}function u(ce,me,xe){if(typeof ce=="number"){if(typeof me=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(ce)}return s(ce,me,xe)}typeof Symbol!="undefined"&&Symbol.species!=null&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),u.poolSize=8192;function s(ce,me,xe){if(typeof ce=="string")return m(ce,me);if(ArrayBuffer.isView(ce))return g(ce);if(ce==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ce);if(fe(ce,ArrayBuffer)||ce&&fe(ce.buffer,ArrayBuffer))return x(ce,me,xe);if(typeof ce=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ke=ce.valueOf&&ce.valueOf();if(ke!=null&&ke!==ce)return u.from(ke,me,xe);var Ae=A(ce);if(Ae)return Ae;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof ce[Symbol.toPrimitive]=="function")return u.from(ce[Symbol.toPrimitive]("string"),me,xe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ce)}u.from=function(ce,me,xe){return s(ce,me,xe)},u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array;function h(ce){if(typeof ce!="number")throw new TypeError('"size" argument must be of type number');if(ce<0)throw new RangeError('The value "'+ce+'" is invalid for option "size"')}function d(ce,me,xe){return h(ce),ce<=0?f(ce):me!==void 0?typeof xe=="string"?f(ce).fill(me,xe):f(ce).fill(me):f(ce)}u.alloc=function(ce,me,xe){return d(ce,me,xe)};function y(ce){return h(ce),f(ce<0?0:b(ce)|0)}u.allocUnsafe=function(ce){return y(ce)},u.allocUnsafeSlow=function(ce){return y(ce)};function m(ce,me){if((typeof me!="string"||me==="")&&(me="utf8"),!u.isEncoding(me))throw new TypeError("Unknown encoding: "+me);var xe=w(ce,me)|0,ke=f(xe),Ae=ke.write(ce,me);return Ae!==xe&&(ke=ke.slice(0,Ae)),ke}function g(ce){for(var me=ce.length<0?0:b(ce.length)|0,xe=f(me),ke=0;ke<me;ke+=1)xe[ke]=ce[ke]&255;return xe}function x(ce,me,xe){if(me<0||ce.byteLength<me)throw new RangeError('"offset" is outside of buffer bounds');if(ce.byteLength<me+(xe||0))throw new RangeError('"length" is outside of buffer bounds');var ke;return me===void 0&&xe===void 0?ke=new Uint8Array(ce):xe===void 0?ke=new Uint8Array(ce,me):ke=new Uint8Array(ce,me,xe),ke.__proto__=u.prototype,ke}function A(ce){if(u.isBuffer(ce)){var me=b(ce.length)|0,xe=f(me);return xe.length===0||ce.copy(xe,0,0,me),xe}if(ce.length!==void 0)return typeof ce.length!="number"||ye(ce.length)?f(0):g(ce);if(ce.type==="Buffer"&&Array.isArray(ce.data))return g(ce.data)}function b(ce){if(ce>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return ce|0}function S(ce){return+ce!=ce&&(ce=0),u.alloc(+ce)}u.isBuffer=function(me){return me!=null&&me._isBuffer===!0&&me!==u.prototype},u.compare=function(me,xe){if(fe(me,Uint8Array)&&(me=u.from(me,me.offset,me.byteLength)),fe(xe,Uint8Array)&&(xe=u.from(xe,xe.offset,xe.byteLength)),!u.isBuffer(me)||!u.isBuffer(xe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(me===xe)return 0;for(var ke=me.length,Ae=xe.length,Oe=0,He=Math.min(ke,Ae);Oe<He;++Oe)if(me[Oe]!==xe[Oe]){ke=me[Oe],Ae=xe[Oe];break}return ke<Ae?-1:Ae<ke?1:0},u.isEncoding=function(me){switch(String(me).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(me,xe){if(!Array.isArray(me))throw new TypeError('"list" argument must be an Array of Buffers');if(me.length===0)return u.alloc(0);var ke;if(xe===void 0)for(xe=0,ke=0;ke<me.length;++ke)xe+=me[ke].length;var Ae=u.allocUnsafe(xe),Oe=0;for(ke=0;ke<me.length;++ke){var He=me[ke];if(fe(He,Uint8Array)&&(He=u.from(He)),!u.isBuffer(He))throw new TypeError('"list" argument must be an Array of Buffers');He.copy(Ae,Oe),Oe+=He.length}return Ae};function w(ce,me){if(u.isBuffer(ce))return ce.length;if(ArrayBuffer.isView(ce)||fe(ce,ArrayBuffer))return ce.byteLength;if(typeof ce!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ce);var xe=ce.length,ke=arguments.length>2&&arguments[2]===!0;if(!ke&&xe===0)return 0;for(var Ae=!1;;)switch(me){case"ascii":case"latin1":case"binary":return xe;case"utf8":case"utf-8":return K(ce).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe*2;case"hex":return xe>>>1;case"base64":return ie(ce).length;default:if(Ae)return ke?-1:K(ce).length;me=(""+me).toLowerCase(),Ae=!0}}u.byteLength=w;function T(ce,me,xe){var ke=!1;if((me===void 0||me<0)&&(me=0),me>this.length||((xe===void 0||xe>this.length)&&(xe=this.length),xe<=0)||(xe>>>=0,me>>>=0,xe<=me))return"";for(ce||(ce="utf8");;)switch(ce){case"hex":return re(this,me,xe);case"utf8":case"utf-8":return V(this,me,xe);case"ascii":return Z(this,me,xe);case"latin1":case"binary":return te(this,me,xe);case"base64":return F(this,me,xe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,me,xe);default:if(ke)throw new TypeError("Unknown encoding: "+ce);ce=(ce+"").toLowerCase(),ke=!0}}u.prototype._isBuffer=!0;function _(ce,me,xe){var ke=ce[me];ce[me]=ce[xe],ce[xe]=ke}u.prototype.swap16=function(){var me=this.length;if(me%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var xe=0;xe<me;xe+=2)_(this,xe,xe+1);return this},u.prototype.swap32=function(){var me=this.length;if(me%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var xe=0;xe<me;xe+=4)_(this,xe,xe+3),_(this,xe+1,xe+2);return this},u.prototype.swap64=function(){var me=this.length;if(me%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var xe=0;xe<me;xe+=8)_(this,xe,xe+7),_(this,xe+1,xe+6),_(this,xe+2,xe+5),_(this,xe+3,xe+4);return this},u.prototype.toString=function(){var me=this.length;return me===0?"":arguments.length===0?V(this,0,me):T.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(me){if(!u.isBuffer(me))throw new TypeError("Argument must be a Buffer");return this===me?!0:u.compare(this,me)===0},u.prototype.inspect=function(){var me="",xe=p.INSPECT_MAX_BYTES;return me=this.toString("hex",0,xe).replace(/(.{2})/g,"$1 ").trim(),this.length>xe&&(me+=" ... "),"<Buffer "+me+">"},u.prototype.compare=function(me,xe,ke,Ae,Oe){if(fe(me,Uint8Array)&&(me=u.from(me,me.offset,me.byteLength)),!u.isBuffer(me))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof me);if(xe===void 0&&(xe=0),ke===void 0&&(ke=me?me.length:0),Ae===void 0&&(Ae=0),Oe===void 0&&(Oe=this.length),xe<0||ke>me.length||Ae<0||Oe>this.length)throw new RangeError("out of range index");if(Ae>=Oe&&xe>=ke)return 0;if(Ae>=Oe)return-1;if(xe>=ke)return 1;if(xe>>>=0,ke>>>=0,Ae>>>=0,Oe>>>=0,this===me)return 0;for(var He=Oe-Ae,Ge=ke-xe,_e=Math.min(He,Ge),Ie=this.slice(Ae,Oe),We=me.slice(xe,ke),et=0;et<_e;++et)if(Ie[et]!==We[et]){He=Ie[et],Ge=We[et];break}return He<Ge?-1:Ge<He?1:0};function v(ce,me,xe,ke,Ae){if(ce.length===0)return-1;if(typeof xe=="string"?(ke=xe,xe=0):xe>2147483647?xe=2147483647:xe<-2147483648&&(xe=-2147483648),xe=+xe,ye(xe)&&(xe=Ae?0:ce.length-1),xe<0&&(xe=ce.length+xe),xe>=ce.length){if(Ae)return-1;xe=ce.length-1}else if(xe<0)if(Ae)xe=0;else return-1;if(typeof me=="string"&&(me=u.from(me,ke)),u.isBuffer(me))return me.length===0?-1:P(ce,me,xe,ke,Ae);if(typeof me=="number")return me=me&255,typeof Uint8Array.prototype.indexOf=="function"?Ae?Uint8Array.prototype.indexOf.call(ce,me,xe):Uint8Array.prototype.lastIndexOf.call(ce,me,xe):P(ce,[me],xe,ke,Ae);throw new TypeError("val must be string, number or Buffer")}function P(ce,me,xe,ke,Ae){var Oe=1,He=ce.length,Ge=me.length;if(ke!==void 0&&(ke=String(ke).toLowerCase(),ke==="ucs2"||ke==="ucs-2"||ke==="utf16le"||ke==="utf-16le")){if(ce.length<2||me.length<2)return-1;Oe=2,He/=2,Ge/=2,xe/=2}function _e(De,Ve){return Oe===1?De[Ve]:De.readUInt16BE(Ve*Oe)}var Ie;if(Ae){var We=-1;for(Ie=xe;Ie<He;Ie++)if(_e(ce,Ie)===_e(me,We===-1?0:Ie-We)){if(We===-1&&(We=Ie),Ie-We+1===Ge)return We*Oe}else We!==-1&&(Ie-=Ie-We),We=-1}else for(xe+Ge>He&&(xe=He-Ge),Ie=xe;Ie>=0;Ie--){for(var et=!0,Ne=0;Ne<Ge;Ne++)if(_e(ce,Ie+Ne)!==_e(me,Ne)){et=!1;break}if(et)return Ie}return-1}u.prototype.includes=function(me,xe,ke){return this.indexOf(me,xe,ke)!==-1},u.prototype.indexOf=function(me,xe,ke){return v(this,me,xe,ke,!0)},u.prototype.lastIndexOf=function(me,xe,ke){return v(this,me,xe,ke,!1)};function M(ce,me,xe,ke){xe=Number(xe)||0;var Ae=ce.length-xe;ke?(ke=Number(ke),ke>Ae&&(ke=Ae)):ke=Ae;var Oe=me.length;ke>Oe/2&&(ke=Oe/2);for(var He=0;He<ke;++He){var Ge=parseInt(me.substr(He*2,2),16);if(ye(Ge))return He;ce[xe+He]=Ge}return He}function E(ce,me,xe,ke){return oe(K(me,ce.length-xe),ce,xe,ke)}function D(ce,me,xe,ke){return oe(Q(me),ce,xe,ke)}function N(ce,me,xe,ke){return D(ce,me,xe,ke)}function O(ce,me,xe,ke){return oe(ie(me),ce,xe,ke)}function I(ce,me,xe,ke){return oe(ae(me,ce.length-xe),ce,xe,ke)}u.prototype.write=function(me,xe,ke,Ae){if(xe===void 0)Ae="utf8",ke=this.length,xe=0;else if(ke===void 0&&typeof xe=="string")Ae=xe,ke=this.length,xe=0;else if(isFinite(xe))xe=xe>>>0,isFinite(ke)?(ke=ke>>>0,Ae===void 0&&(Ae="utf8")):(Ae=ke,ke=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Oe=this.length-xe;if((ke===void 0||ke>Oe)&&(ke=Oe),me.length>0&&(ke<0||xe<0)||xe>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ae||(Ae="utf8");for(var He=!1;;)switch(Ae){case"hex":return M(this,me,xe,ke);case"utf8":case"utf-8":return E(this,me,xe,ke);case"ascii":return D(this,me,xe,ke);case"latin1":case"binary":return N(this,me,xe,ke);case"base64":return O(this,me,xe,ke);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,me,xe,ke);default:if(He)throw new TypeError("Unknown encoding: "+Ae);Ae=(""+Ae).toLowerCase(),He=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function F(ce,me,xe){return me===0&&xe===ce.length?n.fromByteArray(ce):n.fromByteArray(ce.slice(me,xe))}function V(ce,me,xe){xe=Math.min(ce.length,xe);for(var ke=[],Ae=me;Ae<xe;){var Oe=ce[Ae],He=null,Ge=Oe>239?4:Oe>223?3:Oe>191?2:1;if(Ae+Ge<=xe){var _e,Ie,We,et;switch(Ge){case 1:Oe<128&&(He=Oe);break;case 2:_e=ce[Ae+1],(_e&192)==128&&(et=(Oe&31)<<6|_e&63,et>127&&(He=et));break;case 3:_e=ce[Ae+1],Ie=ce[Ae+2],(_e&192)==128&&(Ie&192)==128&&(et=(Oe&15)<<12|(_e&63)<<6|Ie&63,et>2047&&(et<55296||et>57343)&&(He=et));break;case 4:_e=ce[Ae+1],Ie=ce[Ae+2],We=ce[Ae+3],(_e&192)==128&&(Ie&192)==128&&(We&192)==128&&(et=(Oe&15)<<18|(_e&63)<<12|(Ie&63)<<6|We&63,et>65535&&et<1114112&&(He=et))}}He===null?(He=65533,Ge=1):He>65535&&(He-=65536,ke.push(He>>>10&1023|55296),He=56320|He&1023),ke.push(He),Ae+=Ge}return j(ke)}var U=4096;function j(ce){var me=ce.length;if(me<=U)return String.fromCharCode.apply(String,ce);for(var xe="",ke=0;ke<me;)xe+=String.fromCharCode.apply(String,ce.slice(ke,ke+=U));return xe}function Z(ce,me,xe){var ke="";xe=Math.min(ce.length,xe);for(var Ae=me;Ae<xe;++Ae)ke+=String.fromCharCode(ce[Ae]&127);return ke}function te(ce,me,xe){var ke="";xe=Math.min(ce.length,xe);for(var Ae=me;Ae<xe;++Ae)ke+=String.fromCharCode(ce[Ae]);return ke}function re(ce,me,xe){var ke=ce.length;(!me||me<0)&&(me=0),(!xe||xe<0||xe>ke)&&(xe=ke);for(var Ae="",Oe=me;Oe<xe;++Oe)Ae+=$(ce[Oe]);return Ae}function W(ce,me,xe){for(var ke=ce.slice(me,xe),Ae="",Oe=0;Oe<ke.length;Oe+=2)Ae+=String.fromCharCode(ke[Oe]+ke[Oe+1]*256);return Ae}u.prototype.slice=function(me,xe){var ke=this.length;me=~~me,xe=xe===void 0?ke:~~xe,me<0?(me+=ke,me<0&&(me=0)):me>ke&&(me=ke),xe<0?(xe+=ke,xe<0&&(xe=0)):xe>ke&&(xe=ke),xe<me&&(xe=me);var Ae=this.subarray(me,xe);return Ae.__proto__=u.prototype,Ae};function J(ce,me,xe){if(ce%1!=0||ce<0)throw new RangeError("offset is not uint");if(ce+me>xe)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUIntLE=function(me,xe,ke){me=me>>>0,xe=xe>>>0,ke||J(me,xe,this.length);for(var Ae=this[me],Oe=1,He=0;++He<xe&&(Oe*=256);)Ae+=this[me+He]*Oe;return Ae},u.prototype.readUIntBE=function(me,xe,ke){me=me>>>0,xe=xe>>>0,ke||J(me,xe,this.length);for(var Ae=this[me+--xe],Oe=1;xe>0&&(Oe*=256);)Ae+=this[me+--xe]*Oe;return Ae},u.prototype.readUInt8=function(me,xe){return me=me>>>0,xe||J(me,1,this.length),this[me]},u.prototype.readUInt16LE=function(me,xe){return me=me>>>0,xe||J(me,2,this.length),this[me]|this[me+1]<<8},u.prototype.readUInt16BE=function(me,xe){return me=me>>>0,xe||J(me,2,this.length),this[me]<<8|this[me+1]},u.prototype.readUInt32LE=function(me,xe){return me=me>>>0,xe||J(me,4,this.length),(this[me]|this[me+1]<<8|this[me+2]<<16)+this[me+3]*16777216},u.prototype.readUInt32BE=function(me,xe){return me=me>>>0,xe||J(me,4,this.length),this[me]*16777216+(this[me+1]<<16|this[me+2]<<8|this[me+3])},u.prototype.readIntLE=function(me,xe,ke){me=me>>>0,xe=xe>>>0,ke||J(me,xe,this.length);for(var Ae=this[me],Oe=1,He=0;++He<xe&&(Oe*=256);)Ae+=this[me+He]*Oe;return Oe*=128,Ae>=Oe&&(Ae-=Math.pow(2,8*xe)),Ae},u.prototype.readIntBE=function(me,xe,ke){me=me>>>0,xe=xe>>>0,ke||J(me,xe,this.length);for(var Ae=xe,Oe=1,He=this[me+--Ae];Ae>0&&(Oe*=256);)He+=this[me+--Ae]*Oe;return Oe*=128,He>=Oe&&(He-=Math.pow(2,8*xe)),He},u.prototype.readInt8=function(me,xe){return me=me>>>0,xe||J(me,1,this.length),this[me]&128?(255-this[me]+1)*-1:this[me]},u.prototype.readInt16LE=function(me,xe){me=me>>>0,xe||J(me,2,this.length);var ke=this[me]|this[me+1]<<8;return ke&32768?ke|4294901760:ke},u.prototype.readInt16BE=function(me,xe){me=me>>>0,xe||J(me,2,this.length);var ke=this[me+1]|this[me]<<8;return ke&32768?ke|4294901760:ke},u.prototype.readInt32LE=function(me,xe){return me=me>>>0,xe||J(me,4,this.length),this[me]|this[me+1]<<8|this[me+2]<<16|this[me+3]<<24},u.prototype.readInt32BE=function(me,xe){return me=me>>>0,xe||J(me,4,this.length),this[me]<<24|this[me+1]<<16|this[me+2]<<8|this[me+3]},u.prototype.readFloatLE=function(me,xe){return me=me>>>0,xe||J(me,4,this.length),a.read(this,me,!0,23,4)},u.prototype.readFloatBE=function(me,xe){return me=me>>>0,xe||J(me,4,this.length),a.read(this,me,!1,23,4)},u.prototype.readDoubleLE=function(me,xe){return me=me>>>0,xe||J(me,8,this.length),a.read(this,me,!0,52,8)},u.prototype.readDoubleBE=function(me,xe){return me=me>>>0,xe||J(me,8,this.length),a.read(this,me,!1,52,8)};function le(ce,me,xe,ke,Ae,Oe){if(!u.isBuffer(ce))throw new TypeError('"buffer" argument must be a Buffer instance');if(me>Ae||me<Oe)throw new RangeError('"value" argument is out of bounds');if(xe+ke>ce.length)throw new RangeError("Index out of range")}u.prototype.writeUIntLE=function(me,xe,ke,Ae){if(me=+me,xe=xe>>>0,ke=ke>>>0,!Ae){var Oe=Math.pow(2,8*ke)-1;le(this,me,xe,ke,Oe,0)}var He=1,Ge=0;for(this[xe]=me&255;++Ge<ke&&(He*=256);)this[xe+Ge]=me/He&255;return xe+ke},u.prototype.writeUIntBE=function(me,xe,ke,Ae){if(me=+me,xe=xe>>>0,ke=ke>>>0,!Ae){var Oe=Math.pow(2,8*ke)-1;le(this,me,xe,ke,Oe,0)}var He=ke-1,Ge=1;for(this[xe+He]=me&255;--He>=0&&(Ge*=256);)this[xe+He]=me/Ge&255;return xe+ke},u.prototype.writeUInt8=function(me,xe,ke){return me=+me,xe=xe>>>0,ke||le(this,me,xe,1,255,0),this[xe]=me&255,xe+1},u.prototype.writeUInt16LE=function(me,xe,ke){return me=+me,xe=xe>>>0,ke||le(this,me,xe,2,65535,0),this[xe]=me&255,this[xe+1]=me>>>8,xe+2},u.prototype.writeUInt16BE=function(me,xe,ke){return me=+me,xe=xe>>>0,ke||le(this,me,xe,2,65535,0),this[xe]=me>>>8,this[xe+1]=me&255,xe+2},u.prototype.writeUInt32LE=function(me,xe,ke){return me=+me,xe=xe>>>0,ke||le(this,me,xe,4,4294967295,0),this[xe+3]=me>>>24,this[xe+2]=me>>>16,this[xe+1]=me>>>8,this[xe]=me&255,xe+4},u.prototype.writeUInt32BE=function(me,xe,ke){return me=+me,xe=xe>>>0,ke||le(this,me,xe,4,4294967295,0),this[xe]=me>>>24,this[xe+1]=me>>>16,this[xe+2]=me>>>8,this[xe+3]=me&255,xe+4},u.prototype.writeIntLE=function(me,xe,ke,Ae){if(me=+me,xe=xe>>>0,!Ae){var Oe=Math.pow(2,8*ke-1);le(this,me,xe,ke,Oe-1,-Oe)}var He=0,Ge=1,_e=0;for(this[xe]=me&255;++He<ke&&(Ge*=256);)me<0&&_e===0&&this[xe+He-1]!==0&&(_e=1),this[xe+He]=(me/Ge>>0)-_e&255;return xe+ke},u.prototype.writeIntBE=function(me,xe,ke,Ae){if(me=+me,xe=xe>>>0,!Ae){var Oe=Math.pow(2,8*ke-1);le(this,me,xe,ke,Oe-1,-Oe)}var He=ke-1,Ge=1,_e=0;for(this[xe+He]=me&255;--He>=0&&(Ge*=256);)me<0&&_e===0&&this[xe+He+1]!==0&&(_e=1),this[xe+He]=(me/Ge>>0)-_e&255;return xe+ke},u.prototype.writeInt8=function(me,xe,ke){return me=+me,xe=xe>>>0,ke||le(this,me,xe,1,127,-128),me<0&&(me=255+me+1),this[xe]=me&255,xe+1},u.prototype.writeInt16LE=function(me,xe,ke){return me=+me,xe=xe>>>0,ke||le(this,me,xe,2,32767,-32768),this[xe]=me&255,this[xe+1]=me>>>8,xe+2},u.prototype.writeInt16BE=function(me,xe,ke){return me=+me,xe=xe>>>0,ke||le(this,me,xe,2,32767,-32768),this[xe]=me>>>8,this[xe+1]=me&255,xe+2},u.prototype.writeInt32LE=function(me,xe,ke){return me=+me,xe=xe>>>0,ke||le(this,me,xe,4,2147483647,-2147483648),this[xe]=me&255,this[xe+1]=me>>>8,this[xe+2]=me>>>16,this[xe+3]=me>>>24,xe+4},u.prototype.writeInt32BE=function(me,xe,ke){return me=+me,xe=xe>>>0,ke||le(this,me,xe,4,2147483647,-2147483648),me<0&&(me=4294967295+me+1),this[xe]=me>>>24,this[xe+1]=me>>>16,this[xe+2]=me>>>8,this[xe+3]=me&255,xe+4};function ue(ce,me,xe,ke,Ae,Oe){if(xe+ke>ce.length)throw new RangeError("Index out of range");if(xe<0)throw new RangeError("Index out of range")}function se(ce,me,xe,ke,Ae){return me=+me,xe=xe>>>0,Ae||ue(ce,me,xe,4),a.write(ce,me,xe,ke,23,4),xe+4}u.prototype.writeFloatLE=function(me,xe,ke){return se(this,me,xe,!0,ke)},u.prototype.writeFloatBE=function(me,xe,ke){return se(this,me,xe,!1,ke)};function G(ce,me,xe,ke,Ae){return me=+me,xe=xe>>>0,Ae||ue(ce,me,xe,8),a.write(ce,me,xe,ke,52,8),xe+8}u.prototype.writeDoubleLE=function(me,xe,ke){return G(this,me,xe,!0,ke)},u.prototype.writeDoubleBE=function(me,xe,ke){return G(this,me,xe,!1,ke)},u.prototype.copy=function(me,xe,ke,Ae){if(!u.isBuffer(me))throw new TypeError("argument should be a Buffer");if(ke||(ke=0),!Ae&&Ae!==0&&(Ae=this.length),xe>=me.length&&(xe=me.length),xe||(xe=0),Ae>0&&Ae<ke&&(Ae=ke),Ae===ke||me.length===0||this.length===0)return 0;if(xe<0)throw new RangeError("targetStart out of bounds");if(ke<0||ke>=this.length)throw new RangeError("Index out of range");if(Ae<0)throw new RangeError("sourceEnd out of bounds");Ae>this.length&&(Ae=this.length),me.length-xe<Ae-ke&&(Ae=me.length-xe+ke);var Oe=Ae-ke;if(this===me&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(xe,ke,Ae);else if(this===me&&ke<xe&&xe<Ae)for(var He=Oe-1;He>=0;--He)me[He+xe]=this[He+ke];else Uint8Array.prototype.set.call(me,this.subarray(ke,Ae),xe);return Oe},u.prototype.fill=function(me,xe,ke,Ae){if(typeof me=="string"){if(typeof xe=="string"?(Ae=xe,xe=0,ke=this.length):typeof ke=="string"&&(Ae=ke,ke=this.length),Ae!==void 0&&typeof Ae!="string")throw new TypeError("encoding must be a string");if(typeof Ae=="string"&&!u.isEncoding(Ae))throw new TypeError("Unknown encoding: "+Ae);if(me.length===1){var Oe=me.charCodeAt(0);(Ae==="utf8"&&Oe<128||Ae==="latin1")&&(me=Oe)}}else typeof me=="number"&&(me=me&255);if(xe<0||this.length<xe||this.length<ke)throw new RangeError("Out of range index");if(ke<=xe)return this;xe=xe>>>0,ke=ke===void 0?this.length:ke>>>0,me||(me=0);var He;if(typeof me=="number")for(He=xe;He<ke;++He)this[He]=me;else{var Ge=u.isBuffer(me)?me:u.from(me,Ae),_e=Ge.length;if(_e===0)throw new TypeError('The value "'+me+'" is invalid for argument "value"');for(He=0;He<ke-xe;++He)this[He+xe]=Ge[He%_e]}return this};var Y=/[^+/0-9A-Za-z-_]/g;function ee(ce){if(ce=ce.split("=")[0],ce=ce.trim().replace(Y,""),ce.length<2)return"";for(;ce.length%4!=0;)ce=ce+"=";return ce}function $(ce){return ce<16?"0"+ce.toString(16):ce.toString(16)}function K(ce,me){me=me||1/0;for(var xe,ke=ce.length,Ae=null,Oe=[],He=0;He<ke;++He){if(xe=ce.charCodeAt(He),xe>55295&&xe<57344){if(!Ae){if(xe>56319){(me-=3)>-1&&Oe.push(239,191,189);continue}else if(He+1===ke){(me-=3)>-1&&Oe.push(239,191,189);continue}Ae=xe;continue}if(xe<56320){(me-=3)>-1&&Oe.push(239,191,189),Ae=xe;continue}xe=(Ae-55296<<10|xe-56320)+65536}else Ae&&(me-=3)>-1&&Oe.push(239,191,189);if(Ae=null,xe<128){if((me-=1)<0)break;Oe.push(xe)}else if(xe<2048){if((me-=2)<0)break;Oe.push(xe>>6|192,xe&63|128)}else if(xe<65536){if((me-=3)<0)break;Oe.push(xe>>12|224,xe>>6&63|128,xe&63|128)}else if(xe<1114112){if((me-=4)<0)break;Oe.push(xe>>18|240,xe>>12&63|128,xe>>6&63|128,xe&63|128)}else throw new Error("Invalid code point")}return Oe}function Q(ce){for(var me=[],xe=0;xe<ce.length;++xe)me.push(ce.charCodeAt(xe)&255);return me}function ae(ce,me){for(var xe,ke,Ae,Oe=[],He=0;He<ce.length&&!((me-=2)<0);++He)xe=ce.charCodeAt(He),ke=xe>>8,Ae=xe%256,Oe.push(Ae),Oe.push(ke);return Oe}function ie(ce){return n.toByteArray(ee(ce))}function oe(ce,me,xe,ke){for(var Ae=0;Ae<ke&&!(Ae+xe>=me.length||Ae>=ce.length);++Ae)me[Ae+xe]=ce[Ae];return Ae}function fe(ce,me){return ce instanceof me||ce!=null&&ce.constructor!=null&&ce.constructor.name!=null&&ce.constructor.name===me.name}function ye(ce){return ce!==ce}}).call(this)}).call(this,o("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(o,c,p){p.read=function(t,n,a,i,r){var f,u,s=r*8-i-1,h=(1<<s)-1,d=h>>1,y=-7,m=a?r-1:0,g=a?-1:1,x=t[n+m];for(m+=g,f=x&(1<<-y)-1,x>>=-y,y+=s;y>0;f=f*256+t[n+m],m+=g,y-=8);for(u=f&(1<<-y)-1,f>>=-y,y+=i;y>0;u=u*256+t[n+m],m+=g,y-=8);if(f===0)f=1-d;else{if(f===h)return u?NaN:(x?-1:1)*(1/0);u=u+Math.pow(2,i),f=f-d}return(x?-1:1)*u*Math.pow(2,f-i)},p.write=function(t,n,a,i,r,f){var u,s,h,d=f*8-r-1,y=(1<<d)-1,m=y>>1,g=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=i?0:f-1,A=i?1:-1,b=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(s=isNaN(n)?1:0,u=y):(u=Math.floor(Math.log(n)/Math.LN2),n*(h=Math.pow(2,-u))<1&&(u--,h*=2),u+m>=1?n+=g/h:n+=g*Math.pow(2,1-m),n*h>=2&&(u++,h/=2),u+m>=y?(s=0,u=y):u+m>=1?(s=(n*h-1)*Math.pow(2,r),u=u+m):(s=n*Math.pow(2,m-1)*Math.pow(2,r),u=0));r>=8;t[a+x]=s&255,x+=A,s/=256,r-=8);for(u=u<<r|s,d+=r;d>0;t[a+x]=u&255,x+=A,u/=256,d-=8);t[a+x-A]|=b*128}},{}],5:[function(o,c,p){var t=c.exports={},n,a;function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=i}catch{n=i}try{typeof clearTimeout=="function"?a=clearTimeout:a=r}catch{a=r}})();function f(b){if(n===setTimeout)return setTimeout(b,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(b,0);try{return n(b,0)}catch{try{return n.call(null,b,0)}catch{return n.call(this,b,0)}}}function u(b){if(a===clearTimeout)return clearTimeout(b);if((a===r||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(b);try{return a(b)}catch{try{return a.call(null,b)}catch{return a.call(this,b)}}}var s=[],h=!1,d,y=-1;function m(){!h||!d||(h=!1,d.length?s=d.concat(s):y=-1,s.length&&g())}function g(){if(!h){var b=f(m);h=!0;for(var S=s.length;S;){for(d=s,s=[];++y<S;)d&&d[y].run();y=-1,S=s.length}d=null,h=!1,u(b)}}t.nextTick=function(b){var S=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)S[w-1]=arguments[w];s.push(new x(b,S)),s.length===1&&!h&&f(g)};function x(b,S){this.fun=b,this.array=S}x.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function A(){}t.on=A,t.addListener=A,t.once=A,t.off=A,t.removeListener=A,t.removeAllListeners=A,t.emit=A,t.prependListener=A,t.prependOnceListener=A,t.listeners=function(b){return[]},t.binding=function(b){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(b){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],6:[function(o,c,p){c.exports={alpha_shape:o("alpha-shape"),convex_hull:o("convex-hull"),delaunay_triangulate:o("delaunay-triangulate"),gl_cone3d:o("gl-cone3d"),gl_error3d:o("gl-error3d"),gl_heatmap2d:o("gl-heatmap2d"),gl_line3d:o("gl-line3d"),gl_mesh3d:o("gl-mesh3d"),gl_plot2d:o("gl-plot2d"),gl_plot3d:o("gl-plot3d"),gl_pointcloud2d:o("gl-pointcloud2d"),gl_scatter3d:o("gl-scatter3d"),gl_select_box:o("gl-select-box"),gl_spikes2d:o("gl-spikes2d"),gl_streamtube3d:o("gl-streamtube3d"),gl_surface3d:o("gl-surface3d"),ndarray:o("ndarray"),ndarray_linear_interpolate:o("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(o,c,p){c.exports=f;var t=o("turntable-camera-controller"),n=o("orbit-camera-controller"),a=o("matrix-camera-controller");function i(u,s){this._controllerNames=Object.keys(u),this._controllerList=this._controllerNames.map(function(h){return u[h]}),this._mode=s,this._active=u[s],this._active||(this._mode="turntable",this._active=u.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var r=i.prototype;r.flush=function(u){for(var s=this._controllerList,h=0;h<s.length;++h)s[h].flush(u)},r.idle=function(u){for(var s=this._controllerList,h=0;h<s.length;++h)s[h].idle(u)},r.lookAt=function(u,s,h,d){for(var y=this._controllerList,m=0;m<y.length;++m)y[m].lookAt(u,s,h,d)},r.rotate=function(u,s,h,d){for(var y=this._controllerList,m=0;m<y.length;++m)y[m].rotate(u,s,h,d)},r.pan=function(u,s,h,d){for(var y=this._controllerList,m=0;m<y.length;++m)y[m].pan(u,s,h,d)},r.translate=function(u,s,h,d){for(var y=this._controllerList,m=0;m<y.length;++m)y[m].translate(u,s,h,d)},r.setMatrix=function(u,s){for(var h=this._controllerList,d=0;d<h.length;++d)h[d].setMatrix(u,s)},r.setDistanceLimits=function(u,s){for(var h=this._controllerList,d=0;d<h.length;++d)h[d].setDistanceLimits(u,s)},r.setDistance=function(u,s){for(var h=this._controllerList,d=0;d<h.length;++d)h[d].setDistance(u,s)},r.recalcMatrix=function(u){this._active.recalcMatrix(u)},r.getDistance=function(u){return this._active.getDistance(u)},r.getDistanceLimits=function(u){return this._active.getDistanceLimits(u)},r.lastT=function(){return this._active.lastT()},r.setMode=function(u){if(u!==this._mode){var s=this._controllerNames.indexOf(u);if(!(s<0)){var h=this._active,d=this._controllerList[s],y=Math.max(h.lastT(),d.lastT());h.recalcMatrix(y),d.setMatrix(y,h.computedMatrix),this._active=d,this._mode=u,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},r.getMode=function(){return this._mode};function f(u){u=u||{};var s=u.eye||[0,0,1],h=u.center||[0,0,0],d=u.up||[0,1,0],y=u.distanceLimits||[0,1/0],m=u.mode||"turntable",g=t(),x=n(),A=a();return g.setDistanceLimits(y[0],y[1]),g.lookAt(0,s,h,d),x.setDistanceLimits(y[0],y[1]),x.lookAt(0,s,h,d),A.setDistanceLimits(y[0],y[1]),A.lookAt(0,s,h,d),new i({turntable:g,orbit:x,matrix:A},m)}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(o,c,p){var t=typeof WeakMap=="undefined"?o("weak-map"):WeakMap,n=o("gl-buffer"),a=o("gl-vao"),i=new t;function r(f){var u=i.get(f),s=u&&(u._triangleBuffer.handle||u._triangleBuffer.buffer);if(!s||!f.isBuffer(s)){var h=n(f,new Float32Array([-1,-1,-1,4,4,-1]));u=a(f,[{buffer:h,type:f.FLOAT,size:2}]),u._triangleBuffer=h,i.set(f,u)}u.bind(),f.drawArrays(f.TRIANGLES,0,3),u.unbind()}c.exports=r},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(o,c,p){var t=o("pad-left");c.exports=n;function n(a,i,r){i=typeof i=="number"?i:1,r=r||": ";var f=a.split(/\r?\n/),u=String(f.length+i-1).length;return f.map(function(s,h){var d=h+i,y=String(d).length,m=t(d,u-y);return m+r+s}).join(`
`)}},{"pad-left":264}],10:[function(o,c,p){c.exports=a;var t=o("robust-orientation");function n(i,r){for(var f=new Array(r+1),u=0;u<i.length;++u)f[u]=i[u];for(var u=0;u<=i.length;++u){for(var s=i.length;s<=r;++s){for(var h=new Array(r),d=0;d<r;++d)h[d]=Math.pow(s+1-u,d);f[s]=h}var y=t.apply(void 0,f);if(y)return!0}return!1}function a(i){var r=i.length;if(r===0)return[];if(r===1)return[0];for(var f=i[0].length,u=[i[0]],s=[0],h=1;h<r;++h){if(u.push(i[h]),!n(u,f)){u.pop();continue}if(s.push(h),s.length===f+1)return s}return s}},{"robust-orientation":284}],11:[function(o,c,p){c.exports=a;var t=o("delaunay-triangulate"),n=o("circumradius");function a(i,r){return t(r).filter(function(f){for(var u=new Array(f.length),s=0;s<f.length;++s)u[s]=r[f[s]];return n(u)*i<1})}},{circumradius:49,"delaunay-triangulate":63}],12:[function(o,c,p){c.exports=a;var t=o("alpha-complex"),n=o("simplicial-complex-boundary");function a(i,r){return n(t(i,r))}},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(o,c,p){c.exports=function(n){return atob(n)}},{}],14:[function(o,c,p){c.exports=a;var t=o("robust-linear-solve");function n(i){for(var r=0,f=0;f<i.length;++f)r+=i[f];return r}function a(i,r){for(var f=r.length,u=new Array(f+1),s=0;s<f;++s){for(var h=new Array(f+1),d=0;d<=f;++d)h[d]=i[d][s];u[s]=h}u[f]=new Array(f+1);for(var s=0;s<=f;++s)u[f][s]=1;for(var y=new Array(f+1),s=0;s<f;++s)y[s]=r[s];y[f]=1;var m=t(u,y),g=n(m[f+1]);g===0&&(g=1);for(var x=new Array(f+1),s=0;s<=f;++s)x[s]=n(m[s])/g;return x}},{"robust-linear-solve":283}],15:[function(o,c,p){var t=o("./lib/rationalize");c.exports=n;function n(a,i){return t(a[0].mul(i[1]).add(i[0].mul(a[1])),a[1].mul(i[1]))}},{"./lib/rationalize":25}],16:[function(o,c,p){c.exports=t;function t(n,a){return n[0].mul(a[1]).cmp(a[0].mul(n[1]))}},{}],17:[function(o,c,p){var t=o("./lib/rationalize");c.exports=n;function n(a,i){return t(a[0].mul(i[1]),a[1].mul(i[0]))}},{"./lib/rationalize":25}],18:[function(o,c,p){var t=o("./is-rat"),n=o("./lib/is-bn"),a=o("./lib/num-to-bn"),i=o("./lib/str-to-bn"),r=o("./lib/rationalize"),f=o("./div");c.exports=u;function u(s,h){if(t(s))return h?f(s,u(h)):[s[0].clone(),s[1].clone()];var d=0,y,m;if(n(s))y=s.clone();else if(typeof s=="string")y=i(s);else{if(s===0)return[a(0),a(1)];if(s===Math.floor(s))y=a(s);else{for(;s!==Math.floor(s);)s=s*Math.pow(2,256),d-=256;y=a(s)}}if(t(h))y.mul(h[1]),m=h[0].clone();else if(n(h))m=h.clone();else if(typeof h=="string")m=i(h);else if(!h)m=a(1);else if(h===Math.floor(h))m=a(h);else{for(;h!==Math.floor(h);)h=h*Math.pow(2,256),d+=256;m=a(h)}return d>0?y=y.ushln(d):d<0&&(m=m.ushln(-d)),r(y,m)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(o,c,p){var t=o("./lib/is-bn");c.exports=n;function n(a){return Array.isArray(a)&&a.length===2&&t(a[0])&&t(a[1])}},{"./lib/is-bn":23}],20:[function(o,c,p){var t=o("bn.js");c.exports=n;function n(a){return a.cmp(new t(0))}},{"bn.js":33}],21:[function(o,c,p){var t=o("./bn-sign");c.exports=n;function n(a){var i=a.length,r=a.words,f=0;if(i===1)f=r[0];else if(i===2)f=r[0]+r[1]*67108864;else for(var u=0;u<i;u++){var s=r[u];f+=s*Math.pow(67108864,u)}return t(a)*f}},{"./bn-sign":20}],22:[function(o,c,p){var t=o("double-bits"),n=o("bit-twiddle").countTrailingZeros;c.exports=a;function a(i){var r=n(t.lo(i));if(r<32)return r;var f=n(t.hi(i));return f>20?52:f+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(o,c,p){o("bn.js"),c.exports=t;function t(n){return n&&typeof n=="object"&&Boolean(n.words)}},{"bn.js":33}],24:[function(o,c,p){var t=o("bn.js"),n=o("double-bits");c.exports=a;function a(i){var r=n.exponent(i);return r<52?new t(i):new t(i*Math.pow(2,52-r)).ushln(r-52)}},{"bn.js":33,"double-bits":64}],25:[function(o,c,p){var t=o("./num-to-bn"),n=o("./bn-sign");c.exports=a;function a(i,r){var f=n(i),u=n(r);if(f===0)return[t(0),t(1)];if(u===0)return[t(0),t(0)];u<0&&(i=i.neg(),r=r.neg());var s=i.gcd(r);return s.cmpn(1)?[i.div(s),r.div(s)]:[i,r]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(o,c,p){var t=o("bn.js");c.exports=n;function n(a){return new t(a)}},{"bn.js":33}],27:[function(o,c,p){var t=o("./lib/rationalize");c.exports=n;function n(a,i){return t(a[0].mul(i[0]),a[1].mul(i[1]))}},{"./lib/rationalize":25}],28:[function(o,c,p){var t=o("./lib/bn-sign");c.exports=n;function n(a){return t(a[0])*t(a[1])}},{"./lib/bn-sign":20}],29:[function(o,c,p){var t=o("./lib/rationalize");c.exports=n;function n(a,i){return t(a[0].mul(i[1]).sub(a[1].mul(i[0])),a[1].mul(i[1]))}},{"./lib/rationalize":25}],30:[function(o,c,p){var t=o("./lib/bn-to-num"),n=o("./lib/ctz");c.exports=a;function a(i){var r=i[0],f=i[1];if(r.cmpn(0)===0)return 0;var u=r.abs().divmod(f.abs()),s=u.div,h=t(s),d=u.mod,y=r.negative!==f.negative?-1:1;if(d.cmpn(0)===0)return y*h;if(h){var m=n(h)+4,g=t(d.ushln(m).divRound(f));return y*(h+g*Math.pow(2,-m))}else{var x=f.bitLength()-d.bitLength()+53,g=t(d.ushln(x).divRound(f));return x<1023?y*g*Math.pow(2,-x):(g*=Math.pow(2,-1023),y*g*Math.pow(2,1023-x))}}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(o,c,p){function t(u,s,h,d,y){for(var m=y+1;d<=y;){var g=d+y>>>1,x=u[g],A=h!==void 0?h(x,s):x-s;A>=0?(m=g,y=g-1):d=g+1}return m}function n(u,s,h,d,y){for(var m=y+1;d<=y;){var g=d+y>>>1,x=u[g],A=h!==void 0?h(x,s):x-s;A>0?(m=g,y=g-1):d=g+1}return m}function a(u,s,h,d,y){for(var m=d-1;d<=y;){var g=d+y>>>1,x=u[g],A=h!==void 0?h(x,s):x-s;A<0?(m=g,d=g+1):y=g-1}return m}function i(u,s,h,d,y){for(var m=d-1;d<=y;){var g=d+y>>>1,x=u[g],A=h!==void 0?h(x,s):x-s;A<=0?(m=g,d=g+1):y=g-1}return m}function r(u,s,h,d,y){for(;d<=y;){var m=d+y>>>1,g=u[m],x=h!==void 0?h(g,s):g-s;if(x===0)return m;x<=0?d=m+1:y=m-1}return-1}function f(u,s,h,d,y,m){return typeof h=="function"?m(u,s,h,d===void 0?0:d|0,y===void 0?u.length-1:y|0):m(u,s,void 0,h===void 0?0:h|0,d===void 0?u.length-1:d|0)}c.exports={ge:function(u,s,h,d,y){return f(u,s,h,d,y,t)},gt:function(u,s,h,d,y){return f(u,s,h,d,y,n)},lt:function(u,s,h,d,y){return f(u,s,h,d,y,a)},le:function(u,s,h,d,y){return f(u,s,h,d,y,i)},eq:function(u,s,h,d,y){return f(u,s,h,d,y,r)}}},{}],32:[function(o,c,p){var t=32;p.INT_BITS=t,p.INT_MAX=2147483647,p.INT_MIN=-1<<t-1,p.sign=function(i){return(i>0)-(i<0)},p.abs=function(i){var r=i>>t-1;return(i^r)-r},p.min=function(i,r){return r^(i^r)&-(i<r)},p.max=function(i,r){return i^(i^r)&-(i<r)},p.isPow2=function(i){return!(i&i-1)&&!!i},p.log2=function(i){var r,f;return r=(i>65535)<<4,i>>>=r,f=(i>255)<<3,i>>>=f,r|=f,f=(i>15)<<2,i>>>=f,r|=f,f=(i>3)<<1,i>>>=f,r|=f,r|i>>1},p.log10=function(i){return i>=1e9?9:i>=1e8?8:i>=1e7?7:i>=1e6?6:i>=1e5?5:i>=1e4?4:i>=1e3?3:i>=100?2:i>=10?1:0},p.popCount=function(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),(i+(i>>>4)&252645135)*16843009>>>24};function n(i){var r=32;return i&=-i,i&&r--,i&65535&&(r-=16),i&16711935&&(r-=8),i&252645135&&(r-=4),i&858993459&&(r-=2),i&1431655765&&(r-=1),r}p.countTrailingZeros=n,p.nextPow2=function(i){return i+=i===0,--i,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i+1},p.prevPow2=function(i){return i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i-(i>>>1)},p.parity=function(i){return i^=i>>>16,i^=i>>>8,i^=i>>>4,i&=15,27030>>>i&1};var a=new Array(256);(function(i){for(var r=0;r<256;++r){var f=r,u=r,s=7;for(f>>>=1;f;f>>>=1)u<<=1,u|=f&1,--s;i[r]=u<<s&255}})(a),p.reverse=function(i){return a[i&255]<<24|a[i>>>8&255]<<16|a[i>>>16&255]<<8|a[i>>>24&255]},p.interleave2=function(i,r){return i&=65535,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,r&=65535,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,i|r<<1},p.deinterleave2=function(i,r){return i=i>>>r&1431655765,i=(i|i>>>1)&858993459,i=(i|i>>>2)&252645135,i=(i|i>>>4)&16711935,i=(i|i>>>16)&65535,i<<16>>16},p.interleave3=function(i,r,f){return i&=1023,i=(i|i<<16)&4278190335,i=(i|i<<8)&251719695,i=(i|i<<4)&3272356035,i=(i|i<<2)&1227133513,r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,i|=r<<1,f&=1023,f=(f|f<<16)&4278190335,f=(f|f<<8)&251719695,f=(f|f<<4)&3272356035,f=(f|f<<2)&1227133513,i|f<<2},p.deinterleave3=function(i,r){return i=i>>>r&1227133513,i=(i|i>>>2)&3272356035,i=(i|i>>>4)&251719695,i=(i|i>>>8)&4278190335,i=(i|i>>>16)&1023,i<<22>>22},p.nextCombination=function(i){var r=i|i-1;return r+1|(~r&-~r)-1>>>n(i)+1}},{}],33:[function(o,c,p){(function(t,n){function a(O,I){if(!O)throw new Error(I||"Assertion failed")}function i(O,I){O.super_=I;var F=function(){};F.prototype=I.prototype,O.prototype=new F,O.prototype.constructor=O}function r(O,I,F){if(r.isBN(O))return O;this.negative=0,this.words=null,this.length=0,this.red=null,O!==null&&((I==="le"||I==="be")&&(F=I,I=10),this._init(O||0,I||10,F||"be"))}typeof t=="object"?t.exports=r:n.BN=r,r.BN=r,r.wordSize=26;var f;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?f=window.Buffer:f=o("buffer").Buffer}catch{}r.isBN=function(I){return I instanceof r?!0:I!==null&&typeof I=="object"&&I.constructor.wordSize===r.wordSize&&Array.isArray(I.words)},r.max=function(I,F){return I.cmp(F)>0?I:F},r.min=function(I,F){return I.cmp(F)<0?I:F},r.prototype._init=function(I,F,V){if(typeof I=="number")return this._initNumber(I,F,V);if(typeof I=="object")return this._initArray(I,F,V);F==="hex"&&(F=16),a(F===(F|0)&&F>=2&&F<=36),I=I.toString().replace(/\s+/g,"");var U=0;I[0]==="-"&&(U++,this.negative=1),U<I.length&&(F===16?this._parseHex(I,U,V):(this._parseBase(I,F,U),V==="le"&&this._initArray(this.toArray(),F,V)))},r.prototype._initNumber=function(I,F,V){I<0&&(this.negative=1,I=-I),I<67108864?(this.words=[I&67108863],this.length=1):I<4503599627370496?(this.words=[I&67108863,I/67108864&67108863],this.length=2):(a(I<9007199254740992),this.words=[I&67108863,I/67108864&67108863,1],this.length=3),V==="le"&&this._initArray(this.toArray(),F,V)},r.prototype._initArray=function(I,F,V){if(a(typeof I.length=="number"),I.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(I.length/3),this.words=new Array(this.length);for(var U=0;U<this.length;U++)this.words[U]=0;var j,Z,te=0;if(V==="be")for(U=I.length-1,j=0;U>=0;U-=3)Z=I[U]|I[U-1]<<8|I[U-2]<<16,this.words[j]|=Z<<te&67108863,this.words[j+1]=Z>>>26-te&67108863,te+=24,te>=26&&(te-=26,j++);else if(V==="le")for(U=0,j=0;U<I.length;U+=3)Z=I[U]|I[U+1]<<8|I[U+2]<<16,this.words[j]|=Z<<te&67108863,this.words[j+1]=Z>>>26-te&67108863,te+=24,te>=26&&(te-=26,j++);return this.strip()};function u(O,I){var F=O.charCodeAt(I);return F>=65&&F<=70?F-55:F>=97&&F<=102?F-87:F-48&15}function s(O,I,F){var V=u(O,F);return F-1>=I&&(V|=u(O,F-1)<<4),V}r.prototype._parseHex=function(I,F,V){this.length=Math.ceil((I.length-F)/6),this.words=new Array(this.length);for(var U=0;U<this.length;U++)this.words[U]=0;var j=0,Z=0,te;if(V==="be")for(U=I.length-1;U>=F;U-=2)te=s(I,F,U)<<j,this.words[Z]|=te&67108863,j>=18?(j-=18,Z+=1,this.words[Z]|=te>>>26):j+=8;else{var re=I.length-F;for(U=re%2==0?F+1:F;U<I.length;U+=2)te=s(I,F,U)<<j,this.words[Z]|=te&67108863,j>=18?(j-=18,Z+=1,this.words[Z]|=te>>>26):j+=8}this.strip()};function h(O,I,F,V){for(var U=0,j=Math.min(O.length,F),Z=I;Z<j;Z++){var te=O.charCodeAt(Z)-48;U*=V,te>=49?U+=te-49+10:te>=17?U+=te-17+10:U+=te}return U}r.prototype._parseBase=function(I,F,V){this.words=[0],this.length=1;for(var U=0,j=1;j<=67108863;j*=F)U++;U--,j=j/F|0;for(var Z=I.length-V,te=Z%U,re=Math.min(Z,Z-te)+V,W=0,J=V;J<re;J+=U)W=h(I,J,J+U,F),this.imuln(j),this.words[0]+W<67108864?this.words[0]+=W:this._iaddn(W);if(te!==0){var le=1;for(W=h(I,J,I.length,F),J=0;J<te;J++)le*=F;this.imuln(le),this.words[0]+W<67108864?this.words[0]+=W:this._iaddn(W)}this.strip()},r.prototype.copy=function(I){I.words=new Array(this.length);for(var F=0;F<this.length;F++)I.words[F]=this.words[F];I.length=this.length,I.negative=this.negative,I.red=this.red},r.prototype.clone=function(){var I=new r(null);return this.copy(I),I},r.prototype._expand=function(I){for(;this.length<I;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},r.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],y=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];r.prototype.toString=function(I,F){I=I||10,F=F|0||1;var V;if(I===16||I==="hex"){V="";for(var U=0,j=0,Z=0;Z<this.length;Z++){var te=this.words[Z],re=((te<<U|j)&16777215).toString(16);j=te>>>24-U&16777215,j!==0||Z!==this.length-1?V=d[6-re.length]+re+V:V=re+V,U+=2,U>=26&&(U-=26,Z--)}for(j!==0&&(V=j.toString(16)+V);V.length%F!=0;)V="0"+V;return this.negative!==0&&(V="-"+V),V}if(I===(I|0)&&I>=2&&I<=36){var W=y[I],J=m[I];V="";var le=this.clone();for(le.negative=0;!le.isZero();){var ue=le.modn(J).toString(I);le=le.idivn(J),le.isZero()?V=ue+V:V=d[W-ue.length]+ue+V}for(this.isZero()&&(V="0"+V);V.length%F!=0;)V="0"+V;return this.negative!==0&&(V="-"+V),V}a(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var I=this.words[0];return this.length===2?I+=this.words[1]*67108864:this.length===3&&this.words[2]===1?I+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-I:I},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(I,F){return a(typeof f!="undefined"),this.toArrayLike(f,I,F)},r.prototype.toArray=function(I,F){return this.toArrayLike(Array,I,F)},r.prototype.toArrayLike=function(I,F,V){var U=this.byteLength(),j=V||Math.max(1,U);a(U<=j,"byte array longer than desired length"),a(j>0,"Requested array length <= 0"),this.strip();var Z=F==="le",te=new I(j),re,W,J=this.clone();if(Z){for(W=0;!J.isZero();W++)re=J.andln(255),J.iushrn(8),te[W]=re;for(;W<j;W++)te[W]=0}else{for(W=0;W<j-U;W++)te[W]=0;for(W=0;!J.isZero();W++)re=J.andln(255),J.iushrn(8),te[j-W-1]=re}return te},Math.clz32?r.prototype._countBits=function(I){return 32-Math.clz32(I)}:r.prototype._countBits=function(I){var F=I,V=0;return F>=4096&&(V+=13,F>>>=13),F>=64&&(V+=7,F>>>=7),F>=8&&(V+=4,F>>>=4),F>=2&&(V+=2,F>>>=2),V+F},r.prototype._zeroBits=function(I){if(I===0)return 26;var F=I,V=0;return(F&8191)==0&&(V+=13,F>>>=13),(F&127)==0&&(V+=7,F>>>=7),(F&15)==0&&(V+=4,F>>>=4),(F&3)==0&&(V+=2,F>>>=2),(F&1)==0&&V++,V},r.prototype.bitLength=function(){var I=this.words[this.length-1],F=this._countBits(I);return(this.length-1)*26+F};function g(O){for(var I=new Array(O.bitLength()),F=0;F<I.length;F++){var V=F/26|0,U=F%26;I[F]=(O.words[V]&1<<U)>>>U}return I}r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var I=0,F=0;F<this.length;F++){var V=this._zeroBits(this.words[F]);if(I+=V,V!==26)break}return I},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(I){return this.negative!==0?this.abs().inotn(I).iaddn(1):this.clone()},r.prototype.fromTwos=function(I){return this.testn(I-1)?this.notn(I).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return this.negative!==0},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(I){for(;this.length<I.length;)this.words[this.length++]=0;for(var F=0;F<I.length;F++)this.words[F]=this.words[F]|I.words[F];return this.strip()},r.prototype.ior=function(I){return a((this.negative|I.negative)==0),this.iuor(I)},r.prototype.or=function(I){return this.length>I.length?this.clone().ior(I):I.clone().ior(this)},r.prototype.uor=function(I){return this.length>I.length?this.clone().iuor(I):I.clone().iuor(this)},r.prototype.iuand=function(I){var F;this.length>I.length?F=I:F=this;for(var V=0;V<F.length;V++)this.words[V]=this.words[V]&I.words[V];return this.length=F.length,this.strip()},r.prototype.iand=function(I){return a((this.negative|I.negative)==0),this.iuand(I)},r.prototype.and=function(I){return this.length>I.length?this.clone().iand(I):I.clone().iand(this)},r.prototype.uand=function(I){return this.length>I.length?this.clone().iuand(I):I.clone().iuand(this)},r.prototype.iuxor=function(I){var F,V;this.length>I.length?(F=this,V=I):(F=I,V=this);for(var U=0;U<V.length;U++)this.words[U]=F.words[U]^V.words[U];if(this!==F)for(;U<F.length;U++)this.words[U]=F.words[U];return this.length=F.length,this.strip()},r.prototype.ixor=function(I){return a((this.negative|I.negative)==0),this.iuxor(I)},r.prototype.xor=function(I){return this.length>I.length?this.clone().ixor(I):I.clone().ixor(this)},r.prototype.uxor=function(I){return this.length>I.length?this.clone().iuxor(I):I.clone().iuxor(this)},r.prototype.inotn=function(I){a(typeof I=="number"&&I>=0);var F=Math.ceil(I/26)|0,V=I%26;this._expand(F),V>0&&F--;for(var U=0;U<F;U++)this.words[U]=~this.words[U]&67108863;return V>0&&(this.words[U]=~this.words[U]&67108863>>26-V),this.strip()},r.prototype.notn=function(I){return this.clone().inotn(I)},r.prototype.setn=function(I,F){a(typeof I=="number"&&I>=0);var V=I/26|0,U=I%26;return this._expand(V+1),F?this.words[V]=this.words[V]|1<<U:this.words[V]=this.words[V]&~(1<<U),this.strip()},r.prototype.iadd=function(I){var F;if(this.negative!==0&&I.negative===0)return this.negative=0,F=this.isub(I),this.negative^=1,this._normSign();if(this.negative===0&&I.negative!==0)return I.negative=0,F=this.isub(I),I.negative=1,F._normSign();var V,U;this.length>I.length?(V=this,U=I):(V=I,U=this);for(var j=0,Z=0;Z<U.length;Z++)F=(V.words[Z]|0)+(U.words[Z]|0)+j,this.words[Z]=F&67108863,j=F>>>26;for(;j!==0&&Z<V.length;Z++)F=(V.words[Z]|0)+j,this.words[Z]=F&67108863,j=F>>>26;if(this.length=V.length,j!==0)this.words[this.length]=j,this.length++;else if(V!==this)for(;Z<V.length;Z++)this.words[Z]=V.words[Z];return this},r.prototype.add=function(I){var F;return I.negative!==0&&this.negative===0?(I.negative=0,F=this.sub(I),I.negative^=1,F):I.negative===0&&this.negative!==0?(this.negative=0,F=I.sub(this),this.negative=1,F):this.length>I.length?this.clone().iadd(I):I.clone().iadd(this)},r.prototype.isub=function(I){if(I.negative!==0){I.negative=0;var F=this.iadd(I);return I.negative=1,F._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(I),this.negative=1,this._normSign();var V=this.cmp(I);if(V===0)return this.negative=0,this.length=1,this.words[0]=0,this;var U,j;V>0?(U=this,j=I):(U=I,j=this);for(var Z=0,te=0;te<j.length;te++)F=(U.words[te]|0)-(j.words[te]|0)+Z,Z=F>>26,this.words[te]=F&67108863;for(;Z!==0&&te<U.length;te++)F=(U.words[te]|0)+Z,Z=F>>26,this.words[te]=F&67108863;if(Z===0&&te<U.length&&U!==this)for(;te<U.length;te++)this.words[te]=U.words[te];return this.length=Math.max(this.length,te),U!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(I){return this.clone().isub(I)};function x(O,I,F){F.negative=I.negative^O.negative;var V=O.length+I.length|0;F.length=V,V=V-1|0;var U=O.words[0]|0,j=I.words[0]|0,Z=U*j,te=Z&67108863,re=Z/67108864|0;F.words[0]=te;for(var W=1;W<V;W++){for(var J=re>>>26,le=re&67108863,ue=Math.min(W,I.length-1),se=Math.max(0,W-O.length+1);se<=ue;se++){var G=W-se|0;U=O.words[G]|0,j=I.words[se]|0,Z=U*j+le,J+=Z/67108864|0,le=Z&67108863}F.words[W]=le|0,re=J|0}return re!==0?F.words[W]=re|0:F.length--,F.strip()}var A=function(I,F,V){var U=I.words,j=F.words,Z=V.words,te=0,re,W,J,le=U[0]|0,ue=le&8191,se=le>>>13,G=U[1]|0,Y=G&8191,ee=G>>>13,$=U[2]|0,K=$&8191,Q=$>>>13,ae=U[3]|0,ie=ae&8191,oe=ae>>>13,fe=U[4]|0,ye=fe&8191,ce=fe>>>13,me=U[5]|0,xe=me&8191,ke=me>>>13,Ae=U[6]|0,Oe=Ae&8191,He=Ae>>>13,Ge=U[7]|0,_e=Ge&8191,Ie=Ge>>>13,We=U[8]|0,et=We&8191,Ne=We>>>13,De=U[9]|0,Ve=De&8191,dt=De>>>13,Dt=j[0]|0,Gt=Dt&8191,Mt=Dt>>>13,zt=j[1]|0,Nt=zt&8191,Et=zt>>>13,At=j[2]|0,it=At&8191,ht=At>>>13,$e=j[3]|0,Ee=$e&8191,Xe=$e>>>13,rt=j[4]|0,ut=rt&8191,Pt=rt>>>13,kt=j[5]|0,Bt=kt&8191,Xt=kt>>>13,Ut=j[6]|0,Jt=Ut&8191,Je=Ut>>>13,gt=j[7]|0,Ct=gt&8191,or=gt>>>13,gr=j[8]|0,lr=gr&8191,mr=gr>>>13,Fr=j[9]|0,Rr=Fr&8191,ir=Fr>>>13;V.negative=I.negative^F.negative,V.length=19,re=Math.imul(ue,Gt),W=Math.imul(ue,Mt),W=W+Math.imul(se,Gt)|0,J=Math.imul(se,Mt);var Vr=(te+re|0)+((W&8191)<<13)|0;te=(J+(W>>>13)|0)+(Vr>>>26)|0,Vr&=67108863,re=Math.imul(Y,Gt),W=Math.imul(Y,Mt),W=W+Math.imul(ee,Gt)|0,J=Math.imul(ee,Mt),re=re+Math.imul(ue,Nt)|0,W=W+Math.imul(ue,Et)|0,W=W+Math.imul(se,Nt)|0,J=J+Math.imul(se,Et)|0;var qe=(te+re|0)+((W&8191)<<13)|0;te=(J+(W>>>13)|0)+(qe>>>26)|0,qe&=67108863,re=Math.imul(K,Gt),W=Math.imul(K,Mt),W=W+Math.imul(Q,Gt)|0,J=Math.imul(Q,Mt),re=re+Math.imul(Y,Nt)|0,W=W+Math.imul(Y,Et)|0,W=W+Math.imul(ee,Nt)|0,J=J+Math.imul(ee,Et)|0,re=re+Math.imul(ue,it)|0,W=W+Math.imul(ue,ht)|0,W=W+Math.imul(se,it)|0,J=J+Math.imul(se,ht)|0;var we=(te+re|0)+((W&8191)<<13)|0;te=(J+(W>>>13)|0)+(we>>>26)|0,we&=67108863,re=Math.imul(ie,Gt),W=Math.imul(ie,Mt),W=W+Math.imul(oe,Gt)|0,J=Math.imul(oe,Mt),re=re+Math.imul(K,Nt)|0,W=W+Math.imul(K,Et)|0,W=W+Math.imul(Q,Nt)|0,J=J+Math.imul(Q,Et)|0,re=re+Math.imul(Y,it)|0,W=W+Math.imul(Y,ht)|0,W=W+Math.imul(ee,it)|0,J=J+Math.imul(ee,ht)|0,re=re+Math.imul(ue,Ee)|0,W=W+Math.imul(ue,Xe)|0,W=W+Math.imul(se,Ee)|0,J=J+Math.imul(se,Xe)|0;var Me=(te+re|0)+((W&8191)<<13)|0;te=(J+(W>>>13)|0)+(Me>>>26)|0,Me&=67108863,re=Math.imul(ye,Gt),W=Math.imul(ye,Mt),W=W+Math.imul(ce,Gt)|0,J=Math.imul(ce,Mt),re=re+Math.imul(ie,Nt)|0,W=W+Math.imul(ie,Et)|0,W=W+Math.imul(oe,Nt)|0,J=J+Math.imul(oe,Et)|0,re=re+Math.imul(K,it)|0,W=W+Math.imul(K,ht)|0,W=W+Math.imul(Q,it)|0,J=J+Math.imul(Q,ht)|0,re=re+Math.imul(Y,Ee)|0,W=W+Math.imul(Y,Xe)|0,W=W+Math.imul(ee,Ee)|0,J=J+Math.imul(ee,Xe)|0,re=re+Math.imul(ue,ut)|0,W=W+Math.imul(ue,Pt)|0,W=W+Math.imul(se,ut)|0,J=J+Math.imul(se,Pt)|0;var Re=(te+re|0)+((W&8191)<<13)|0;te=(J+(W>>>13)|0)+(Re>>>26)|0,Re&=67108863,re=Math.imul(xe,Gt),W=Math.imul(xe,Mt),W=W+Math.imul(ke,Gt)|0,J=Math.imul(ke,Mt),re=re+Math.imul(ye,Nt)|0,W=W+Math.imul(ye,Et)|0,W=W+Math.imul(ce,Nt)|0,J=J+Math.imul(ce,Et)|0,re=re+Math.imul(ie,it)|0,W=W+Math.imul(ie,ht)|0,W=W+Math.imul(oe,it)|0,J=J+Math.imul(oe,ht)|0,re=re+Math.imul(K,Ee)|0,W=W+Math.imul(K,Xe)|0,W=W+Math.imul(Q,Ee)|0,J=J+Math.imul(Q,Xe)|0,re=re+Math.imul(Y,ut)|0,W=W+Math.imul(Y,Pt)|0,W=W+Math.imul(ee,ut)|0,J=J+Math.imul(ee,Pt)|0,re=re+Math.imul(ue,Bt)|0,W=W+Math.imul(ue,Xt)|0,W=W+Math.imul(se,Bt)|0,J=J+Math.imul(se,Xt)|0;var Ye=(te+re|0)+((W&8191)<<13)|0;te=(J+(W>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,re=Math.imul(Oe,Gt),W=Math.imul(Oe,Mt),W=W+Math.imul(He,Gt)|0,J=Math.imul(He,Mt),re=re+Math.imul(xe,Nt)|0,W=W+Math.imul(xe,Et)|0,W=W+Math.imul(ke,Nt)|0,J=J+Math.imul(ke,Et)|0,re=re+Math.imul(ye,it)|0,W=W+Math.imul(ye,ht)|0,W=W+Math.imul(ce,it)|0,J=J+Math.imul(ce,ht)|0,re=re+Math.imul(ie,Ee)|0,W=W+Math.imul(ie,Xe)|0,W=W+Math.imul(oe,Ee)|0,J=J+Math.imul(oe,Xe)|0,re=re+Math.imul(K,ut)|0,W=W+Math.imul(K,Pt)|0,W=W+Math.imul(Q,ut)|0,J=J+Math.imul(Q,Pt)|0,re=re+Math.imul(Y,Bt)|0,W=W+Math.imul(Y,Xt)|0,W=W+Math.imul(ee,Bt)|0,J=J+Math.imul(ee,Xt)|0,re=re+Math.imul(ue,Jt)|0,W=W+Math.imul(ue,Je)|0,W=W+Math.imul(se,Jt)|0,J=J+Math.imul(se,Je)|0;var Qe=(te+re|0)+((W&8191)<<13)|0;te=(J+(W>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,re=Math.imul(_e,Gt),W=Math.imul(_e,Mt),W=W+Math.imul(Ie,Gt)|0,J=Math.imul(Ie,Mt),re=re+Math.imul(Oe,Nt)|0,W=W+Math.imul(Oe,Et)|0,W=W+Math.imul(He,Nt)|0,J=J+Math.imul(He,Et)|0,re=re+Math.imul(xe,it)|0,W=W+Math.imul(xe,ht)|0,W=W+Math.imul(ke,it)|0,J=J+Math.imul(ke,ht)|0,re=re+Math.imul(ye,Ee)|0,W=W+Math.imul(ye,Xe)|0,W=W+Math.imul(ce,Ee)|0,J=J+Math.imul(ce,Xe)|0,re=re+Math.imul(ie,ut)|0,W=W+Math.imul(ie,Pt)|0,W=W+Math.imul(oe,ut)|0,J=J+Math.imul(oe,Pt)|0,re=re+Math.imul(K,Bt)|0,W=W+Math.imul(K,Xt)|0,W=W+Math.imul(Q,Bt)|0,J=J+Math.imul(Q,Xt)|0,re=re+Math.imul(Y,Jt)|0,W=W+Math.imul(Y,Je)|0,W=W+Math.imul(ee,Jt)|0,J=J+Math.imul(ee,Je)|0,re=re+Math.imul(ue,Ct)|0,W=W+Math.imul(ue,or)|0,W=W+Math.imul(se,Ct)|0,J=J+Math.imul(se,or)|0;var ot=(te+re|0)+((W&8191)<<13)|0;te=(J+(W>>>13)|0)+(ot>>>26)|0,ot&=67108863,re=Math.imul(et,Gt),W=Math.imul(et,Mt),W=W+Math.imul(Ne,Gt)|0,J=Math.imul(Ne,Mt),re=re+Math.imul(_e,Nt)|0,W=W+Math.imul(_e,Et)|0,W=W+Math.imul(Ie,Nt)|0,J=J+Math.imul(Ie,Et)|0,re=re+Math.imul(Oe,it)|0,W=W+Math.imul(Oe,ht)|0,W=W+Math.imul(He,it)|0,J=J+Math.imul(He,ht)|0,re=re+Math.imul(xe,Ee)|0,W=W+Math.imul(xe,Xe)|0,W=W+Math.imul(ke,Ee)|0,J=J+Math.imul(ke,Xe)|0,re=re+Math.imul(ye,ut)|0,W=W+Math.imul(ye,Pt)|0,W=W+Math.imul(ce,ut)|0,J=J+Math.imul(ce,Pt)|0,re=re+Math.imul(ie,Bt)|0,W=W+Math.imul(ie,Xt)|0,W=W+Math.imul(oe,Bt)|0,J=J+Math.imul(oe,Xt)|0,re=re+Math.imul(K,Jt)|0,W=W+Math.imul(K,Je)|0,W=W+Math.imul(Q,Jt)|0,J=J+Math.imul(Q,Je)|0,re=re+Math.imul(Y,Ct)|0,W=W+Math.imul(Y,or)|0,W=W+Math.imul(ee,Ct)|0,J=J+Math.imul(ee,or)|0,re=re+Math.imul(ue,lr)|0,W=W+Math.imul(ue,mr)|0,W=W+Math.imul(se,lr)|0,J=J+Math.imul(se,mr)|0;var st=(te+re|0)+((W&8191)<<13)|0;te=(J+(W>>>13)|0)+(st>>>26)|0,st&=67108863,re=Math.imul(Ve,Gt),W=Math.imul(Ve,Mt),W=W+Math.imul(dt,Gt)|0,J=Math.imul(dt,Mt),re=re+Math.imul(et,Nt)|0,W=W+Math.imul(et,Et)|0,W=W+Math.imul(Ne,Nt)|0,J=J+Math.imul(Ne,Et)|0,re=re+Math.imul(_e,it)|0,W=W+Math.imul(_e,ht)|0,W=W+Math.imul(Ie,it)|0,J=J+Math.imul(Ie,ht)|0,re=re+Math.imul(Oe,Ee)|0,W=W+Math.imul(Oe,Xe)|0,W=W+Math.imul(He,Ee)|0,J=J+Math.imul(He,Xe)|0,re=re+Math.imul(xe,ut)|0,W=W+Math.imul(xe,Pt)|0,W=W+Math.imul(ke,ut)|0,J=J+Math.imul(ke,Pt)|0,re=re+Math.imul(ye,Bt)|0,W=W+Math.imul(ye,Xt)|0,W=W+Math.imul(ce,Bt)|0,J=J+Math.imul(ce,Xt)|0,re=re+Math.imul(ie,Jt)|0,W=W+Math.imul(ie,Je)|0,W=W+Math.imul(oe,Jt)|0,J=J+Math.imul(oe,Je)|0,re=re+Math.imul(K,Ct)|0,W=W+Math.imul(K,or)|0,W=W+Math.imul(Q,Ct)|0,J=J+Math.imul(Q,or)|0,re=re+Math.imul(Y,lr)|0,W=W+Math.imul(Y,mr)|0,W=W+Math.imul(ee,lr)|0,J=J+Math.imul(ee,mr)|0,re=re+Math.imul(ue,Rr)|0,W=W+Math.imul(ue,ir)|0,W=W+Math.imul(se,Rr)|0,J=J+Math.imul(se,ir)|0;var pt=(te+re|0)+((W&8191)<<13)|0;te=(J+(W>>>13)|0)+(pt>>>26)|0,pt&=67108863,re=Math.imul(Ve,Nt),W=Math.imul(Ve,Et),W=W+Math.imul(dt,Nt)|0,J=Math.imul(dt,Et),re=re+Math.imul(et,it)|0,W=W+Math.imul(et,ht)|0,W=W+Math.imul(Ne,it)|0,J=J+Math.imul(Ne,ht)|0,re=re+Math.imul(_e,Ee)|0,W=W+Math.imul(_e,Xe)|0,W=W+Math.imul(Ie,Ee)|0,J=J+Math.imul(Ie,Xe)|0,re=re+Math.imul(Oe,ut)|0,W=W+Math.imul(Oe,Pt)|0,W=W+Math.imul(He,ut)|0,J=J+Math.imul(He,Pt)|0,re=re+Math.imul(xe,Bt)|0,W=W+Math.imul(xe,Xt)|0,W=W+Math.imul(ke,Bt)|0,J=J+Math.imul(ke,Xt)|0,re=re+Math.imul(ye,Jt)|0,W=W+Math.imul(ye,Je)|0,W=W+Math.imul(ce,Jt)|0,J=J+Math.imul(ce,Je)|0,re=re+Math.imul(ie,Ct)|0,W=W+Math.imul(ie,or)|0,W=W+Math.imul(oe,Ct)|0,J=J+Math.imul(oe,or)|0,re=re+Math.imul(K,lr)|0,W=W+Math.imul(K,mr)|0,W=W+Math.imul(Q,lr)|0,J=J+Math.imul(Q,mr)|0,re=re+Math.imul(Y,Rr)|0,W=W+Math.imul(Y,ir)|0,W=W+Math.imul(ee,Rr)|0,J=J+Math.imul(ee,ir)|0;var wt=(te+re|0)+((W&8191)<<13)|0;te=(J+(W>>>13)|0)+(wt>>>26)|0,wt&=67108863,re=Math.imul(Ve,it),W=Math.imul(Ve,ht),W=W+Math.imul(dt,it)|0,J=Math.imul(dt,ht),re=re+Math.imul(et,Ee)|0,W=W+Math.imul(et,Xe)|0,W=W+Math.imul(Ne,Ee)|0,J=J+Math.imul(Ne,Xe)|0,re=re+Math.imul(_e,ut)|0,W=W+Math.imul(_e,Pt)|0,W=W+Math.imul(Ie,ut)|0,J=J+Math.imul(Ie,Pt)|0,re=re+Math.imul(Oe,Bt)|0,W=W+Math.imul(Oe,Xt)|0,W=W+Math.imul(He,Bt)|0,J=J+Math.imul(He,Xt)|0,re=re+Math.imul(xe,Jt)|0,W=W+Math.imul(xe,Je)|0,W=W+Math.imul(ke,Jt)|0,J=J+Math.imul(ke,Je)|0,re=re+Math.imul(ye,Ct)|0,W=W+Math.imul(ye,or)|0,W=W+Math.imul(ce,Ct)|0,J=J+Math.imul(ce,or)|0,re=re+Math.imul(ie,lr)|0,W=W+Math.imul(ie,mr)|0,W=W+Math.imul(oe,lr)|0,J=J+Math.imul(oe,mr)|0,re=re+Math.imul(K,Rr)|0,W=W+Math.imul(K,ir)|0,W=W+Math.imul(Q,Rr)|0,J=J+Math.imul(Q,ir)|0;var Yt=(te+re|0)+((W&8191)<<13)|0;te=(J+(W>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,re=Math.imul(Ve,Ee),W=Math.imul(Ve,Xe),W=W+Math.imul(dt,Ee)|0,J=Math.imul(dt,Xe),re=re+Math.imul(et,ut)|0,W=W+Math.imul(et,Pt)|0,W=W+Math.imul(Ne,ut)|0,J=J+Math.imul(Ne,Pt)|0,re=re+Math.imul(_e,Bt)|0,W=W+Math.imul(_e,Xt)|0,W=W+Math.imul(Ie,Bt)|0,J=J+Math.imul(Ie,Xt)|0,re=re+Math.imul(Oe,Jt)|0,W=W+Math.imul(Oe,Je)|0,W=W+Math.imul(He,Jt)|0,J=J+Math.imul(He,Je)|0,re=re+Math.imul(xe,Ct)|0,W=W+Math.imul(xe,or)|0,W=W+Math.imul(ke,Ct)|0,J=J+Math.imul(ke,or)|0,re=re+Math.imul(ye,lr)|0,W=W+Math.imul(ye,mr)|0,W=W+Math.imul(ce,lr)|0,J=J+Math.imul(ce,mr)|0,re=re+Math.imul(ie,Rr)|0,W=W+Math.imul(ie,ir)|0,W=W+Math.imul(oe,Rr)|0,J=J+Math.imul(oe,ir)|0;var wr=(te+re|0)+((W&8191)<<13)|0;te=(J+(W>>>13)|0)+(wr>>>26)|0,wr&=67108863,re=Math.imul(Ve,ut),W=Math.imul(Ve,Pt),W=W+Math.imul(dt,ut)|0,J=Math.imul(dt,Pt),re=re+Math.imul(et,Bt)|0,W=W+Math.imul(et,Xt)|0,W=W+Math.imul(Ne,Bt)|0,J=J+Math.imul(Ne,Xt)|0,re=re+Math.imul(_e,Jt)|0,W=W+Math.imul(_e,Je)|0,W=W+Math.imul(Ie,Jt)|0,J=J+Math.imul(Ie,Je)|0,re=re+Math.imul(Oe,Ct)|0,W=W+Math.imul(Oe,or)|0,W=W+Math.imul(He,Ct)|0,J=J+Math.imul(He,or)|0,re=re+Math.imul(xe,lr)|0,W=W+Math.imul(xe,mr)|0,W=W+Math.imul(ke,lr)|0,J=J+Math.imul(ke,mr)|0,re=re+Math.imul(ye,Rr)|0,W=W+Math.imul(ye,ir)|0,W=W+Math.imul(ce,Rr)|0,J=J+Math.imul(ce,ir)|0;var Tr=(te+re|0)+((W&8191)<<13)|0;te=(J+(W>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,re=Math.imul(Ve,Bt),W=Math.imul(Ve,Xt),W=W+Math.imul(dt,Bt)|0,J=Math.imul(dt,Xt),re=re+Math.imul(et,Jt)|0,W=W+Math.imul(et,Je)|0,W=W+Math.imul(Ne,Jt)|0,J=J+Math.imul(Ne,Je)|0,re=re+Math.imul(_e,Ct)|0,W=W+Math.imul(_e,or)|0,W=W+Math.imul(Ie,Ct)|0,J=J+Math.imul(Ie,or)|0,re=re+Math.imul(Oe,lr)|0,W=W+Math.imul(Oe,mr)|0,W=W+Math.imul(He,lr)|0,J=J+Math.imul(He,mr)|0,re=re+Math.imul(xe,Rr)|0,W=W+Math.imul(xe,ir)|0,W=W+Math.imul(ke,Rr)|0,J=J+Math.imul(ke,ir)|0;var Mr=(te+re|0)+((W&8191)<<13)|0;te=(J+(W>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,re=Math.imul(Ve,Jt),W=Math.imul(Ve,Je),W=W+Math.imul(dt,Jt)|0,J=Math.imul(dt,Je),re=re+Math.imul(et,Ct)|0,W=W+Math.imul(et,or)|0,W=W+Math.imul(Ne,Ct)|0,J=J+Math.imul(Ne,or)|0,re=re+Math.imul(_e,lr)|0,W=W+Math.imul(_e,mr)|0,W=W+Math.imul(Ie,lr)|0,J=J+Math.imul(Ie,mr)|0,re=re+Math.imul(Oe,Rr)|0,W=W+Math.imul(Oe,ir)|0,W=W+Math.imul(He,Rr)|0,J=J+Math.imul(He,ir)|0;var _r=(te+re|0)+((W&8191)<<13)|0;te=(J+(W>>>13)|0)+(_r>>>26)|0,_r&=67108863,re=Math.imul(Ve,Ct),W=Math.imul(Ve,or),W=W+Math.imul(dt,Ct)|0,J=Math.imul(dt,or),re=re+Math.imul(et,lr)|0,W=W+Math.imul(et,mr)|0,W=W+Math.imul(Ne,lr)|0,J=J+Math.imul(Ne,mr)|0,re=re+Math.imul(_e,Rr)|0,W=W+Math.imul(_e,ir)|0,W=W+Math.imul(Ie,Rr)|0,J=J+Math.imul(Ie,ir)|0;var Or=(te+re|0)+((W&8191)<<13)|0;te=(J+(W>>>13)|0)+(Or>>>26)|0,Or&=67108863,re=Math.imul(Ve,lr),W=Math.imul(Ve,mr),W=W+Math.imul(dt,lr)|0,J=Math.imul(dt,mr),re=re+Math.imul(et,Rr)|0,W=W+Math.imul(et,ir)|0,W=W+Math.imul(Ne,Rr)|0,J=J+Math.imul(Ne,ir)|0;var nn=(te+re|0)+((W&8191)<<13)|0;te=(J+(W>>>13)|0)+(nn>>>26)|0,nn&=67108863,re=Math.imul(Ve,Rr),W=Math.imul(Ve,ir),W=W+Math.imul(dt,Rr)|0,J=Math.imul(dt,ir);var Sr=(te+re|0)+((W&8191)<<13)|0;return te=(J+(W>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,Z[0]=Vr,Z[1]=qe,Z[2]=we,Z[3]=Me,Z[4]=Re,Z[5]=Ye,Z[6]=Qe,Z[7]=ot,Z[8]=st,Z[9]=pt,Z[10]=wt,Z[11]=Yt,Z[12]=wr,Z[13]=Tr,Z[14]=Mr,Z[15]=_r,Z[16]=Or,Z[17]=nn,Z[18]=Sr,te!==0&&(Z[19]=te,V.length++),V};Math.imul||(A=x);function b(O,I,F){F.negative=I.negative^O.negative,F.length=O.length+I.length;for(var V=0,U=0,j=0;j<F.length-1;j++){var Z=U;U=0;for(var te=V&67108863,re=Math.min(j,I.length-1),W=Math.max(0,j-O.length+1);W<=re;W++){var J=j-W,le=O.words[J]|0,ue=I.words[W]|0,se=le*ue,G=se&67108863;Z=Z+(se/67108864|0)|0,G=G+te|0,te=G&67108863,Z=Z+(G>>>26)|0,U+=Z>>>26,Z&=67108863}F.words[j]=te,V=Z,Z=U}return V!==0?F.words[j]=V:F.length--,F.strip()}function S(O,I,F){var V=new w;return V.mulp(O,I,F)}r.prototype.mulTo=function(I,F){var V,U=this.length+I.length;return this.length===10&&I.length===10?V=A(this,I,F):U<63?V=x(this,I,F):U<1024?V=b(this,I,F):V=S(this,I,F),V};function w(O,I){this.x=O,this.y=I}w.prototype.makeRBT=function(I){for(var F=new Array(I),V=r.prototype._countBits(I)-1,U=0;U<I;U++)F[U]=this.revBin(U,V,I);return F},w.prototype.revBin=function(I,F,V){if(I===0||I===V-1)return I;for(var U=0,j=0;j<F;j++)U|=(I&1)<<F-j-1,I>>=1;return U},w.prototype.permute=function(I,F,V,U,j,Z){for(var te=0;te<Z;te++)U[te]=F[I[te]],j[te]=V[I[te]]},w.prototype.transform=function(I,F,V,U,j,Z){this.permute(Z,I,F,V,U,j);for(var te=1;te<j;te<<=1)for(var re=te<<1,W=Math.cos(2*Math.PI/re),J=Math.sin(2*Math.PI/re),le=0;le<j;le+=re)for(var ue=W,se=J,G=0;G<te;G++){var Y=V[le+G],ee=U[le+G],$=V[le+G+te],K=U[le+G+te],Q=ue*$-se*K;K=ue*K+se*$,$=Q,V[le+G]=Y+$,U[le+G]=ee+K,V[le+G+te]=Y-$,U[le+G+te]=ee-K,G!==re&&(Q=W*ue-J*se,se=W*se+J*ue,ue=Q)}},w.prototype.guessLen13b=function(I,F){var V=Math.max(F,I)|1,U=V&1,j=0;for(V=V/2|0;V;V=V>>>1)j++;return 1<<j+1+U},w.prototype.conjugate=function(I,F,V){if(!(V<=1))for(var U=0;U<V/2;U++){var j=I[U];I[U]=I[V-U-1],I[V-U-1]=j,j=F[U],F[U]=-F[V-U-1],F[V-U-1]=-j}},w.prototype.normalize13b=function(I,F){for(var V=0,U=0;U<F/2;U++){var j=Math.round(I[2*U+1]/F)*8192+Math.round(I[2*U]/F)+V;I[U]=j&67108863,j<67108864?V=0:V=j/67108864|0}return I},w.prototype.convert13b=function(I,F,V,U){for(var j=0,Z=0;Z<F;Z++)j=j+(I[Z]|0),V[2*Z]=j&8191,j=j>>>13,V[2*Z+1]=j&8191,j=j>>>13;for(Z=2*F;Z<U;++Z)V[Z]=0;a(j===0),a((j&~8191)==0)},w.prototype.stub=function(I){for(var F=new Array(I),V=0;V<I;V++)F[V]=0;return F},w.prototype.mulp=function(I,F,V){var U=2*this.guessLen13b(I.length,F.length),j=this.makeRBT(U),Z=this.stub(U),te=new Array(U),re=new Array(U),W=new Array(U),J=new Array(U),le=new Array(U),ue=new Array(U),se=V.words;se.length=U,this.convert13b(I.words,I.length,te,U),this.convert13b(F.words,F.length,J,U),this.transform(te,Z,re,W,U,j),this.transform(J,Z,le,ue,U,j);for(var G=0;G<U;G++){var Y=re[G]*le[G]-W[G]*ue[G];W[G]=re[G]*ue[G]+W[G]*le[G],re[G]=Y}return this.conjugate(re,W,U),this.transform(re,W,se,Z,U,j),this.conjugate(se,Z,U),this.normalize13b(se,U),V.negative=I.negative^F.negative,V.length=I.length+F.length,V.strip()},r.prototype.mul=function(I){var F=new r(null);return F.words=new Array(this.length+I.length),this.mulTo(I,F)},r.prototype.mulf=function(I){var F=new r(null);return F.words=new Array(this.length+I.length),S(this,I,F)},r.prototype.imul=function(I){return this.clone().mulTo(I,this)},r.prototype.imuln=function(I){a(typeof I=="number"),a(I<67108864);for(var F=0,V=0;V<this.length;V++){var U=(this.words[V]|0)*I,j=(U&67108863)+(F&67108863);F>>=26,F+=U/67108864|0,F+=j>>>26,this.words[V]=j&67108863}return F!==0&&(this.words[V]=F,this.length++),this},r.prototype.muln=function(I){return this.clone().imuln(I)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(I){var F=g(I);if(F.length===0)return new r(1);for(var V=this,U=0;U<F.length&&F[U]===0;U++,V=V.sqr());if(++U<F.length)for(var j=V.sqr();U<F.length;U++,j=j.sqr())F[U]!==0&&(V=V.mul(j));return V},r.prototype.iushln=function(I){a(typeof I=="number"&&I>=0);var F=I%26,V=(I-F)/26,U=67108863>>>26-F<<26-F,j;if(F!==0){var Z=0;for(j=0;j<this.length;j++){var te=this.words[j]&U,re=(this.words[j]|0)-te<<F;this.words[j]=re|Z,Z=te>>>26-F}Z&&(this.words[j]=Z,this.length++)}if(V!==0){for(j=this.length-1;j>=0;j--)this.words[j+V]=this.words[j];for(j=0;j<V;j++)this.words[j]=0;this.length+=V}return this.strip()},r.prototype.ishln=function(I){return a(this.negative===0),this.iushln(I)},r.prototype.iushrn=function(I,F,V){a(typeof I=="number"&&I>=0);var U;F?U=(F-F%26)/26:U=0;var j=I%26,Z=Math.min((I-j)/26,this.length),te=67108863^67108863>>>j<<j,re=V;if(U-=Z,U=Math.max(0,U),re){for(var W=0;W<Z;W++)re.words[W]=this.words[W];re.length=Z}if(Z!==0)if(this.length>Z)for(this.length-=Z,W=0;W<this.length;W++)this.words[W]=this.words[W+Z];else this.words[0]=0,this.length=1;var J=0;for(W=this.length-1;W>=0&&(J!==0||W>=U);W--){var le=this.words[W]|0;this.words[W]=J<<26-j|le>>>j,J=le&te}return re&&J!==0&&(re.words[re.length++]=J),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(I,F,V){return a(this.negative===0),this.iushrn(I,F,V)},r.prototype.shln=function(I){return this.clone().ishln(I)},r.prototype.ushln=function(I){return this.clone().iushln(I)},r.prototype.shrn=function(I){return this.clone().ishrn(I)},r.prototype.ushrn=function(I){return this.clone().iushrn(I)},r.prototype.testn=function(I){a(typeof I=="number"&&I>=0);var F=I%26,V=(I-F)/26,U=1<<F;if(this.length<=V)return!1;var j=this.words[V];return!!(j&U)},r.prototype.imaskn=function(I){a(typeof I=="number"&&I>=0);var F=I%26,V=(I-F)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=V)return this;if(F!==0&&V++,this.length=Math.min(V,this.length),F!==0){var U=67108863^67108863>>>F<<F;this.words[this.length-1]&=U}return this.strip()},r.prototype.maskn=function(I){return this.clone().imaskn(I)},r.prototype.iaddn=function(I){return a(typeof I=="number"),a(I<67108864),I<0?this.isubn(-I):this.negative!==0?this.length===1&&(this.words[0]|0)<I?(this.words[0]=I-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(I),this.negative=1,this):this._iaddn(I)},r.prototype._iaddn=function(I){this.words[0]+=I;for(var F=0;F<this.length&&this.words[F]>=67108864;F++)this.words[F]-=67108864,F===this.length-1?this.words[F+1]=1:this.words[F+1]++;return this.length=Math.max(this.length,F+1),this},r.prototype.isubn=function(I){if(a(typeof I=="number"),a(I<67108864),I<0)return this.iaddn(-I);if(this.negative!==0)return this.negative=0,this.iaddn(I),this.negative=1,this;if(this.words[0]-=I,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var F=0;F<this.length&&this.words[F]<0;F++)this.words[F]+=67108864,this.words[F+1]-=1;return this.strip()},r.prototype.addn=function(I){return this.clone().iaddn(I)},r.prototype.subn=function(I){return this.clone().isubn(I)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(I,F,V){var U=I.length+V,j;this._expand(U);var Z,te=0;for(j=0;j<I.length;j++){Z=(this.words[j+V]|0)+te;var re=(I.words[j]|0)*F;Z-=re&67108863,te=(Z>>26)-(re/67108864|0),this.words[j+V]=Z&67108863}for(;j<this.length-V;j++)Z=(this.words[j+V]|0)+te,te=Z>>26,this.words[j+V]=Z&67108863;if(te===0)return this.strip();for(a(te===-1),te=0,j=0;j<this.length;j++)Z=-(this.words[j]|0)+te,te=Z>>26,this.words[j]=Z&67108863;return this.negative=1,this.strip()},r.prototype._wordDiv=function(I,F){var V=this.length-I.length,U=this.clone(),j=I,Z=j.words[j.length-1]|0,te=this._countBits(Z);V=26-te,V!==0&&(j=j.ushln(V),U.iushln(V),Z=j.words[j.length-1]|0);var re=U.length-j.length,W;if(F!=="mod"){W=new r(null),W.length=re+1,W.words=new Array(W.length);for(var J=0;J<W.length;J++)W.words[J]=0}var le=U.clone()._ishlnsubmul(j,1,re);le.negative===0&&(U=le,W&&(W.words[re]=1));for(var ue=re-1;ue>=0;ue--){var se=(U.words[j.length+ue]|0)*67108864+(U.words[j.length+ue-1]|0);for(se=Math.min(se/Z|0,67108863),U._ishlnsubmul(j,se,ue);U.negative!==0;)se--,U.negative=0,U._ishlnsubmul(j,1,ue),U.isZero()||(U.negative^=1);W&&(W.words[ue]=se)}return W&&W.strip(),U.strip(),F!=="div"&&V!==0&&U.iushrn(V),{div:W||null,mod:U}},r.prototype.divmod=function(I,F,V){if(a(!I.isZero()),this.isZero())return{div:new r(0),mod:new r(0)};var U,j,Z;return this.negative!==0&&I.negative===0?(Z=this.neg().divmod(I,F),F!=="mod"&&(U=Z.div.neg()),F!=="div"&&(j=Z.mod.neg(),V&&j.negative!==0&&j.iadd(I)),{div:U,mod:j}):this.negative===0&&I.negative!==0?(Z=this.divmod(I.neg(),F),F!=="mod"&&(U=Z.div.neg()),{div:U,mod:Z.mod}):(this.negative&I.negative)!=0?(Z=this.neg().divmod(I.neg(),F),F!=="div"&&(j=Z.mod.neg(),V&&j.negative!==0&&j.isub(I)),{div:Z.div,mod:j}):I.length>this.length||this.cmp(I)<0?{div:new r(0),mod:this}:I.length===1?F==="div"?{div:this.divn(I.words[0]),mod:null}:F==="mod"?{div:null,mod:new r(this.modn(I.words[0]))}:{div:this.divn(I.words[0]),mod:new r(this.modn(I.words[0]))}:this._wordDiv(I,F)},r.prototype.div=function(I){return this.divmod(I,"div",!1).div},r.prototype.mod=function(I){return this.divmod(I,"mod",!1).mod},r.prototype.umod=function(I){return this.divmod(I,"mod",!0).mod},r.prototype.divRound=function(I){var F=this.divmod(I);if(F.mod.isZero())return F.div;var V=F.div.negative!==0?F.mod.isub(I):F.mod,U=I.ushrn(1),j=I.andln(1),Z=V.cmp(U);return Z<0||j===1&&Z===0?F.div:F.div.negative!==0?F.div.isubn(1):F.div.iaddn(1)},r.prototype.modn=function(I){a(I<=67108863);for(var F=(1<<26)%I,V=0,U=this.length-1;U>=0;U--)V=(F*V+(this.words[U]|0))%I;return V},r.prototype.idivn=function(I){a(I<=67108863);for(var F=0,V=this.length-1;V>=0;V--){var U=(this.words[V]|0)+F*67108864;this.words[V]=U/I|0,F=U%I}return this.strip()},r.prototype.divn=function(I){return this.clone().idivn(I)},r.prototype.egcd=function(I){a(I.negative===0),a(!I.isZero());var F=this,V=I.clone();F.negative!==0?F=F.umod(I):F=F.clone();for(var U=new r(1),j=new r(0),Z=new r(0),te=new r(1),re=0;F.isEven()&&V.isEven();)F.iushrn(1),V.iushrn(1),++re;for(var W=V.clone(),J=F.clone();!F.isZero();){for(var le=0,ue=1;(F.words[0]&ue)==0&&le<26;++le,ue<<=1);if(le>0)for(F.iushrn(le);le-- >0;)(U.isOdd()||j.isOdd())&&(U.iadd(W),j.isub(J)),U.iushrn(1),j.iushrn(1);for(var se=0,G=1;(V.words[0]&G)==0&&se<26;++se,G<<=1);if(se>0)for(V.iushrn(se);se-- >0;)(Z.isOdd()||te.isOdd())&&(Z.iadd(W),te.isub(J)),Z.iushrn(1),te.iushrn(1);F.cmp(V)>=0?(F.isub(V),U.isub(Z),j.isub(te)):(V.isub(F),Z.isub(U),te.isub(j))}return{a:Z,b:te,gcd:V.iushln(re)}},r.prototype._invmp=function(I){a(I.negative===0),a(!I.isZero());var F=this,V=I.clone();F.negative!==0?F=F.umod(I):F=F.clone();for(var U=new r(1),j=new r(0),Z=V.clone();F.cmpn(1)>0&&V.cmpn(1)>0;){for(var te=0,re=1;(F.words[0]&re)==0&&te<26;++te,re<<=1);if(te>0)for(F.iushrn(te);te-- >0;)U.isOdd()&&U.iadd(Z),U.iushrn(1);for(var W=0,J=1;(V.words[0]&J)==0&&W<26;++W,J<<=1);if(W>0)for(V.iushrn(W);W-- >0;)j.isOdd()&&j.iadd(Z),j.iushrn(1);F.cmp(V)>=0?(F.isub(V),U.isub(j)):(V.isub(F),j.isub(U))}var le;return F.cmpn(1)===0?le=U:le=j,le.cmpn(0)<0&&le.iadd(I),le},r.prototype.gcd=function(I){if(this.isZero())return I.abs();if(I.isZero())return this.abs();var F=this.clone(),V=I.clone();F.negative=0,V.negative=0;for(var U=0;F.isEven()&&V.isEven();U++)F.iushrn(1),V.iushrn(1);do{for(;F.isEven();)F.iushrn(1);for(;V.isEven();)V.iushrn(1);var j=F.cmp(V);if(j<0){var Z=F;F=V,V=Z}else if(j===0||V.cmpn(1)===0)break;F.isub(V)}while(!0);return V.iushln(U)},r.prototype.invm=function(I){return this.egcd(I).a.umod(I)},r.prototype.isEven=function(){return(this.words[0]&1)==0},r.prototype.isOdd=function(){return(this.words[0]&1)==1},r.prototype.andln=function(I){return this.words[0]&I},r.prototype.bincn=function(I){a(typeof I=="number");var F=I%26,V=(I-F)/26,U=1<<F;if(this.length<=V)return this._expand(V+1),this.words[V]|=U,this;for(var j=U,Z=V;j!==0&&Z<this.length;Z++){var te=this.words[Z]|0;te+=j,j=te>>>26,te&=67108863,this.words[Z]=te}return j!==0&&(this.words[Z]=j,this.length++),this},r.prototype.isZero=function(){return this.length===1&&this.words[0]===0},r.prototype.cmpn=function(I){var F=I<0;if(this.negative!==0&&!F)return-1;if(this.negative===0&&F)return 1;this.strip();var V;if(this.length>1)V=1;else{F&&(I=-I),a(I<=67108863,"Number is too big");var U=this.words[0]|0;V=U===I?0:U<I?-1:1}return this.negative!==0?-V|0:V},r.prototype.cmp=function(I){if(this.negative!==0&&I.negative===0)return-1;if(this.negative===0&&I.negative!==0)return 1;var F=this.ucmp(I);return this.negative!==0?-F|0:F},r.prototype.ucmp=function(I){if(this.length>I.length)return 1;if(this.length<I.length)return-1;for(var F=0,V=this.length-1;V>=0;V--){var U=this.words[V]|0,j=I.words[V]|0;if(U!==j){U<j?F=-1:U>j&&(F=1);break}}return F},r.prototype.gtn=function(I){return this.cmpn(I)===1},r.prototype.gt=function(I){return this.cmp(I)===1},r.prototype.gten=function(I){return this.cmpn(I)>=0},r.prototype.gte=function(I){return this.cmp(I)>=0},r.prototype.ltn=function(I){return this.cmpn(I)===-1},r.prototype.lt=function(I){return this.cmp(I)===-1},r.prototype.lten=function(I){return this.cmpn(I)<=0},r.prototype.lte=function(I){return this.cmp(I)<=0},r.prototype.eqn=function(I){return this.cmpn(I)===0},r.prototype.eq=function(I){return this.cmp(I)===0},r.red=function(I){return new D(I)},r.prototype.toRed=function(I){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),I.convertTo(this)._forceRed(I)},r.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(I){return this.red=I,this},r.prototype.forceRed=function(I){return a(!this.red,"Already a number in reduction context"),this._forceRed(I)},r.prototype.redAdd=function(I){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,I)},r.prototype.redIAdd=function(I){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,I)},r.prototype.redSub=function(I){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,I)},r.prototype.redISub=function(I){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,I)},r.prototype.redShl=function(I){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,I)},r.prototype.redMul=function(I){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,I),this.red.mul(this,I)},r.prototype.redIMul=function(I){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,I),this.red.imul(this,I)},r.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(I){return a(this.red&&!I.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,I)};var T={k256:null,p224:null,p192:null,p25519:null};function _(O,I){this.name=O,this.p=new r(I,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}_.prototype._tmp=function(){var I=new r(null);return I.words=new Array(Math.ceil(this.n/13)),I},_.prototype.ireduce=function(I){var F=I,V;do this.split(F,this.tmp),F=this.imulK(F),F=F.iadd(this.tmp),V=F.bitLength();while(V>this.n);var U=V<this.n?-1:F.ucmp(this.p);return U===0?(F.words[0]=0,F.length=1):U>0?F.isub(this.p):F.strip!==void 0?F.strip():F._strip(),F},_.prototype.split=function(I,F){I.iushrn(this.n,0,F)},_.prototype.imulK=function(I){return I.imul(this.k)};function v(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(v,_),v.prototype.split=function(I,F){for(var V=4194303,U=Math.min(I.length,9),j=0;j<U;j++)F.words[j]=I.words[j];if(F.length=U,I.length<=9){I.words[0]=0,I.length=1;return}var Z=I.words[9];for(F.words[F.length++]=Z&V,j=10;j<I.length;j++){var te=I.words[j]|0;I.words[j-10]=(te&V)<<4|Z>>>22,Z=te}Z>>>=22,I.words[j-10]=Z,Z===0&&I.length>10?I.length-=10:I.length-=9},v.prototype.imulK=function(I){I.words[I.length]=0,I.words[I.length+1]=0,I.length+=2;for(var F=0,V=0;V<I.length;V++){var U=I.words[V]|0;F+=U*977,I.words[V]=F&67108863,F=U*64+(F/67108864|0)}return I.words[I.length-1]===0&&(I.length--,I.words[I.length-1]===0&&I.length--),I};function P(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(P,_);function M(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(M,_);function E(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(E,_),E.prototype.imulK=function(I){for(var F=0,V=0;V<I.length;V++){var U=(I.words[V]|0)*19+F,j=U&67108863;U>>>=26,I.words[V]=j,F=U}return F!==0&&(I.words[I.length++]=F),I},r._prime=function(I){if(T[I])return T[I];var F;if(I==="k256")F=new v;else if(I==="p224")F=new P;else if(I==="p192")F=new M;else if(I==="p25519")F=new E;else throw new Error("Unknown prime "+I);return T[I]=F,F};function D(O){if(typeof O=="string"){var I=r._prime(O);this.m=I.p,this.prime=I}else a(O.gtn(1),"modulus must be greater than 1"),this.m=O,this.prime=null}D.prototype._verify1=function(I){a(I.negative===0,"red works only with positives"),a(I.red,"red works only with red numbers")},D.prototype._verify2=function(I,F){a((I.negative|F.negative)==0,"red works only with positives"),a(I.red&&I.red===F.red,"red works only with red numbers")},D.prototype.imod=function(I){return this.prime?this.prime.ireduce(I)._forceRed(this):I.umod(this.m)._forceRed(this)},D.prototype.neg=function(I){return I.isZero()?I.clone():this.m.sub(I)._forceRed(this)},D.prototype.add=function(I,F){this._verify2(I,F);var V=I.add(F);return V.cmp(this.m)>=0&&V.isub(this.m),V._forceRed(this)},D.prototype.iadd=function(I,F){this._verify2(I,F);var V=I.iadd(F);return V.cmp(this.m)>=0&&V.isub(this.m),V},D.prototype.sub=function(I,F){this._verify2(I,F);var V=I.sub(F);return V.cmpn(0)<0&&V.iadd(this.m),V._forceRed(this)},D.prototype.isub=function(I,F){this._verify2(I,F);var V=I.isub(F);return V.cmpn(0)<0&&V.iadd(this.m),V},D.prototype.shl=function(I,F){return this._verify1(I),this.imod(I.ushln(F))},D.prototype.imul=function(I,F){return this._verify2(I,F),this.imod(I.imul(F))},D.prototype.mul=function(I,F){return this._verify2(I,F),this.imod(I.mul(F))},D.prototype.isqr=function(I){return this.imul(I,I.clone())},D.prototype.sqr=function(I){return this.mul(I,I)},D.prototype.sqrt=function(I){if(I.isZero())return I.clone();var F=this.m.andln(3);if(a(F%2==1),F===3){var V=this.m.add(new r(1)).iushrn(2);return this.pow(I,V)}for(var U=this.m.subn(1),j=0;!U.isZero()&&U.andln(1)===0;)j++,U.iushrn(1);a(!U.isZero());var Z=new r(1).toRed(this),te=Z.redNeg(),re=this.m.subn(1).iushrn(1),W=this.m.bitLength();for(W=new r(2*W*W).toRed(this);this.pow(W,re).cmp(te)!==0;)W.redIAdd(te);for(var J=this.pow(W,U),le=this.pow(I,U.addn(1).iushrn(1)),ue=this.pow(I,U),se=j;ue.cmp(Z)!==0;){for(var G=ue,Y=0;G.cmp(Z)!==0;Y++)G=G.redSqr();a(Y<se);var ee=this.pow(J,new r(1).iushln(se-Y-1));le=le.redMul(ee),J=ee.redSqr(),ue=ue.redMul(J),se=Y}return le},D.prototype.invm=function(I){var F=I._invmp(this.m);return F.negative!==0?(F.negative=0,this.imod(F).redNeg()):this.imod(F)},D.prototype.pow=function(I,F){if(F.isZero())return new r(1).toRed(this);if(F.cmpn(1)===0)return I.clone();var V=4,U=new Array(1<<V);U[0]=new r(1).toRed(this),U[1]=I;for(var j=2;j<U.length;j++)U[j]=this.mul(U[j-1],I);var Z=U[0],te=0,re=0,W=F.bitLength()%26;for(W===0&&(W=26),j=F.length-1;j>=0;j--){for(var J=F.words[j],le=W-1;le>=0;le--){var ue=J>>le&1;if(Z!==U[0]&&(Z=this.sqr(Z)),ue===0&&te===0){re=0;continue}te<<=1,te|=ue,re++,!(re!==V&&(j!==0||le!==0))&&(Z=this.mul(Z,U[te]),re=0,te=0)}W=26}return Z},D.prototype.convertTo=function(I){var F=I.umod(this.m);return F===I?F.clone():F},D.prototype.convertFrom=function(I){var F=I.clone();return F.red=null,F},r.mont=function(I){return new N(I)};function N(O){D.call(this,O),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(N,D),N.prototype.convertTo=function(I){return this.imod(I.ushln(this.shift))},N.prototype.convertFrom=function(I){var F=this.imod(I.mul(this.rinv));return F.red=null,F},N.prototype.imul=function(I,F){if(I.isZero()||F.isZero())return I.words[0]=0,I.length=1,I;var V=I.imul(F),U=V.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),j=V.isub(U).iushrn(this.shift),Z=j;return j.cmp(this.m)>=0?Z=j.isub(this.m):j.cmpn(0)<0&&(Z=j.iadd(this.m)),Z._forceRed(this)},N.prototype.mul=function(I,F){if(I.isZero()||F.isZero())return new r(0)._forceRed(this);var V=I.mul(F),U=V.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),j=V.isub(U).iushrn(this.shift),Z=j;return j.cmp(this.m)>=0?Z=j.isub(this.m):j.cmpn(0)<0&&(Z=j.iadd(this.m)),Z._forceRed(this)},N.prototype.invm=function(I){var F=this.imod(I._invmp(this.m).mul(this.r2));return F._forceRed(this)}})(typeof c=="undefined"||c,this)},{buffer:2}],34:[function(o,c,p){c.exports=t;function t(n){var a,i,r,f=n.length,u=0;for(a=0;a<f;++a)u+=n[a].length;var s=new Array(u),h=0;for(a=0;a<f;++a){var d=n[a],y=d.length;for(i=0;i<y;++i){var m=s[h++]=new Array(y-1),g=0;for(r=0;r<y;++r)r!==i&&(m[g++]=d[r]);if(i&1){var x=m[1];m[1]=m[0],m[0]=x}}}return s}},{}],35:[function(o,c,p){c.exports=y;var t=o("typedarray-pool"),n=o("./lib/sweep"),a=o("./lib/intersect");function i(m,g){for(var x=0;x<m;++x)if(!(g[x]<=g[x+m]))return!0;return!1}function r(m,g,x,A){for(var b=0,S=0,w=0,T=m.length;w<T;++w){var _=m[w];if(!i(g,_)){for(var v=0;v<2*g;++v)x[b++]=_[v];A[S++]=w}}return S}function f(m,g,x,A){var b=m.length,S=g.length;if(!(b<=0||S<=0)){var w=m[0].length>>>1;if(!(w<=0)){var T,_=t.mallocDouble(2*w*b),v=t.mallocInt32(b);if(b=r(m,w,_,v),b>0){if(w===1&&A)n.init(b),T=n.sweepComplete(w,x,0,b,_,v,0,b,_,v);else{var P=t.mallocDouble(2*w*S),M=t.mallocInt32(S);S=r(g,w,P,M),S>0&&(n.init(b+S),w===1?T=n.sweepBipartite(w,x,0,b,_,v,0,S,P,M):T=a(w,x,A,b,_,v,S,P,M),t.free(P),t.free(M))}t.free(_),t.free(v)}return T}}}var u;function s(m,g){u.push([m,g])}function h(m){return u=[],f(m,m,s,!0),u}function d(m,g){return u=[],f(m,g,s,!1),u}function y(m,g,x){switch(arguments.length){case 1:return h(m);case 2:return typeof g=="function"?f(m,m,g,!0):d(m,g);case 3:return f(m,g,x,!1);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(o,c,p){function t(){function i(u,s,h,d,y,m,g,x,A,b,S){for(var w=2*u,T=d,_=w*d;T<y;++T,_+=w){var v=m[s+_],P=m[s+_+u],M=g[T];e:for(var E=x,D=w*x;E<A;++E,D+=w){var N=b[s+D],O=b[s+D+u],I=S[E];if(!(O<v||P<N)){for(var F=s+1;F<u;++F){var V=m[F+_],U=m[F+u+_],j=b[F+D],Z=b[F+u+D];if(U<j||Z<V)continue e}var te=h(M,I);if(te!==void 0)return te}}}}function r(u,s,h,d,y,m,g,x,A,b,S){for(var w=2*u,T=x,_=w*x;T<A;++T,_+=w){var v=b[s+_],P=b[s+_+u],M=S[T];e:for(var E=d,D=w*d;E<y;++E,D+=w){var N=m[s+D],O=m[s+D+u],I=g[E];if(!(P<N||O<v)){for(var F=s+1;F<u;++F){var V=m[F+D],U=m[F+u+D],j=b[F+_],Z=b[F+u+_];if(U<j||Z<V)continue e}var te=h(I,M);if(te!==void 0)return te}}}}function f(u,s,h,d,y,m,g,x,A,b,S){return y-d>A-x?i(u,s,h,d,y,m,g,x,A,b,S):r(u,s,h,d,y,m,g,x,A,b,S)}return f}function n(){function i(h,d,y,m,g,x,A,b,S,w,T){for(var _=2*h,v=m,P=_*m;v<g;++v,P+=_){var M=x[d+P],E=x[d+P+h],D=A[v];e:for(var N=b,O=_*b;N<S;++N,O+=_){var I=w[d+O],F=T[N];if(!(I<=M||E<I)){for(var V=d+1;V<h;++V){var U=x[V+P],j=x[V+h+P],Z=w[V+O],te=w[V+h+O];if(j<Z||te<U)continue e}var re=y(F,D);if(re!==void 0)return re}}}}function r(h,d,y,m,g,x,A,b,S,w,T){for(var _=2*h,v=m,P=_*m;v<g;++v,P+=_){var M=x[d+P],E=x[d+P+h],D=A[v];e:for(var N=b,O=_*b;N<S;++N,O+=_){var I=w[d+O],F=T[N];if(!(I<M||E<I)){for(var V=d+1;V<h;++V){var U=x[V+P],j=x[V+h+P],Z=w[V+O],te=w[V+h+O];if(j<Z||te<U)continue e}var re=y(D,F);if(re!==void 0)return re}}}}function f(h,d,y,m,g,x,A,b,S,w,T){for(var _=2*h,v=b,P=_*b;v<S;++v,P+=_){var M=w[d+P],E=T[v];e:for(var D=m,N=_*m;D<g;++D,N+=_){var O=x[d+N],I=x[d+N+h],F=A[D];if(!(M<=O||I<M)){for(var V=d+1;V<h;++V){var U=x[V+N],j=x[V+h+N],Z=w[V+P],te=w[V+h+P];if(j<Z||te<U)continue e}var re=y(E,F);if(re!==void 0)return re}}}}function u(h,d,y,m,g,x,A,b,S,w,T){for(var _=2*h,v=b,P=_*b;v<S;++v,P+=_){var M=w[d+P],E=T[v];e:for(var D=m,N=_*m;D<g;++D,N+=_){var O=x[d+N],I=x[d+N+h],F=A[D];if(!(M<O||I<M)){for(var V=d+1;V<h;++V){var U=x[V+N],j=x[V+h+N],Z=w[V+P],te=w[V+h+P];if(j<Z||te<U)continue e}var re=y(F,E);if(re!==void 0)return re}}}}function s(h,d,y,m,g,x,A,b,S,w,T,_){return x-g>w-S?m?i(h,d,y,g,x,A,b,S,w,T,_):r(h,d,y,g,x,A,b,S,w,T,_):m?f(h,d,y,g,x,A,b,S,w,T,_):u(h,d,y,g,x,A,b,S,w,T,_)}return s}function a(i){return i?t():n()}p.partial=a(!1),p.full=a(!0)},{}],37:[function(o,c,p){c.exports=O;var t=o("typedarray-pool"),n=o("bit-twiddle"),a=o("./brute"),i=a.partial,r=a.full,f=o("./sweep"),u=o("./median"),s=o("./partition"),h=128,d=1<<22,y=1<<22,m=s("!(lo>=p0)&&!(p1>=hi)"),g=s("lo===p0"),x=s("lo<p0"),A=s("hi<=p0"),b=s("lo<=p0&&p0<=hi"),S=s("lo<p0&&p0<=hi"),w=6,T=2,_=1024,v=t.mallocInt32(_),P=t.mallocDouble(_);function M(I,F){var V=8*n.log2(F+1)*(I+1)|0,U=n.nextPow2(w*V);v.length<U&&(t.free(v),v=t.mallocInt32(U));var j=n.nextPow2(T*V);P.length<j&&(t.free(P),P=t.mallocDouble(j))}function E(I,F,V,U,j,Z,te,re,W){var J=w*I;v[J]=F,v[J+1]=V,v[J+2]=U,v[J+3]=j,v[J+4]=Z,v[J+5]=te;var le=T*I;P[le]=re,P[le+1]=W}function D(I,F,V,U,j,Z,te,re,W,J,le){var ue=2*I,se=W*ue,G=J[se+F];e:for(var Y=j,ee=j*ue;Y<Z;++Y,ee+=ue){var $=te[ee+F],K=te[ee+F+I];if(!(G<$||K<G)&&!(U&&G===$)){for(var Q=re[Y],ae=F+1;ae<I;++ae){var $=te[ee+ae],K=te[ee+ae+I],ie=J[se+ae],oe=J[se+ae+I];if(K<ie||oe<$)continue e}var fe;if(U?fe=V(le,Q):fe=V(Q,le),fe!==void 0)return fe}}}function N(I,F,V,U,j,Z,te,re,W,J){var le=2*I,ue=re*le,se=W[ue+F];e:for(var G=U,Y=U*le;G<j;++G,Y+=le){var ee=te[G];if(ee!==J){var $=Z[Y+F],K=Z[Y+F+I];if(!(se<$||K<se)){for(var Q=F+1;Q<I;++Q){var $=Z[Y+Q],K=Z[Y+Q+I],ae=W[ue+Q],ie=W[ue+Q+I];if(K<ae||ie<$)continue e}var oe=V(ee,J);if(oe!==void 0)return oe}}}}function O(I,F,V,U,j,Z,te,re,W){M(I,U+te);var J=0,le=2*I,ue;for(E(J++,0,0,U,0,te,V?16:0,-1/0,1/0),V||E(J++,0,0,te,0,U,1,-1/0,1/0);J>0;){J-=1;var se=J*w,G=v[se],Y=v[se+1],ee=v[se+2],$=v[se+3],K=v[se+4],Q=v[se+5],ae=J*T,ie=P[ae],oe=P[ae+1],fe=Q&1,ye=!!(Q&16),ce=j,me=Z,xe=re,ke=W;if(fe&&(ce=re,me=W,xe=j,ke=Z),!(Q&2&&(ee=x(I,G,Y,ee,ce,me,oe),Y>=ee))&&!(Q&4&&(Y=A(I,G,Y,ee,ce,me,ie),Y>=ee))){var Ae=ee-Y,Oe=K-$;if(ye){if(I*Ae*(Ae+Oe)<y){if(ue=f.scanComplete(I,G,F,Y,ee,ce,me,$,K,xe,ke),ue!==void 0)return ue;continue}}else if(I*Math.min(Ae,Oe)<h){if(ue=i(I,G,F,fe,Y,ee,ce,me,$,K,xe,ke),ue!==void 0)return ue;continue}else if(I*Ae*Oe<d){if(ue=f.scanBipartite(I,G,F,fe,Y,ee,ce,me,$,K,xe,ke),ue!==void 0)return ue;continue}var He=m(I,G,Y,ee,ce,me,ie,oe);if(Y<He)if(I*(He-Y)<h){if(ue=r(I,G+1,F,Y,He,ce,me,$,K,xe,ke),ue!==void 0)return ue}else if(G===I-2){if(fe?ue=f.sweepBipartite(I,F,$,K,xe,ke,Y,He,ce,me):ue=f.sweepBipartite(I,F,Y,He,ce,me,$,K,xe,ke),ue!==void 0)return ue}else E(J++,G+1,Y,He,$,K,fe,-1/0,1/0),E(J++,G+1,$,K,Y,He,fe^1,-1/0,1/0);if(He<ee){var Ge=u(I,G,$,K,xe,ke),_e=xe[le*Ge+G],Ie=g(I,G,Ge,K,xe,ke,_e);if(Ie<K&&E(J++,G,He,ee,Ie,K,(fe|4)+(ye?16:0),_e,oe),$<Ge&&E(J++,G,He,ee,$,Ge,(fe|2)+(ye?16:0),ie,_e),Ge+1===Ie){if(ye?ue=N(I,G,F,He,ee,ce,me,Ge,xe,ke[Ge]):ue=D(I,G,F,fe,He,ee,ce,me,Ge,xe,ke[Ge]),ue!==void 0)return ue}else if(Ge<Ie){var We;if(ye){if(We=b(I,G,He,ee,ce,me,_e),He<We){var et=g(I,G,He,We,ce,me,_e);if(G===I-2){if(He<et&&(ue=f.sweepComplete(I,F,He,et,ce,me,Ge,Ie,xe,ke),ue!==void 0)||et<We&&(ue=f.sweepBipartite(I,F,et,We,ce,me,Ge,Ie,xe,ke),ue!==void 0))return ue}else He<et&&E(J++,G+1,He,et,Ge,Ie,16,-1/0,1/0),et<We&&(E(J++,G+1,et,We,Ge,Ie,0,-1/0,1/0),E(J++,G+1,Ge,Ie,et,We,1,-1/0,1/0))}}else fe?We=S(I,G,He,ee,ce,me,_e):We=b(I,G,He,ee,ce,me,_e),He<We&&(G===I-2?fe?ue=f.sweepBipartite(I,F,Ge,Ie,xe,ke,He,We,ce,me):ue=f.sweepBipartite(I,F,He,We,ce,me,Ge,Ie,xe,ke):(E(J++,G+1,He,We,Ge,Ie,fe,-1/0,1/0),E(J++,G+1,Ge,Ie,He,We,fe^1,-1/0,1/0)))}}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(o,c,p){c.exports=r;var t=o("./partition"),n=t("lo<p0"),a=8;function i(f,u,s,h,d,y){for(var m=2*f,g=m*(s+1)+u,x=s+1;x<h;++x,g+=m)for(var A=d[g],b=x,S=m*(x-1);b>s&&d[S+u]>A;--b,S-=m){for(var w=S,T=S+m,_=0;_<m;++_,++w,++T){var v=d[w];d[w]=d[T],d[T]=v}var P=y[b];y[b]=y[b-1],y[b-1]=P}}function r(f,u,s,h,d,y){if(h<=s+1)return s;for(var m=s,g=h,x=h+s>>>1,A=2*f,b=x,S=d[A*x+u];m<g;){if(g-m<a){i(f,u,m,g,d,y),S=d[A*x+u];break}var w=g-m,T=Math.random()*w+m|0,_=d[A*T+u],v=Math.random()*w+m|0,P=d[A*v+u],M=Math.random()*w+m|0,E=d[A*M+u];_<=P?E>=P?(b=v,S=P):_>=E?(b=T,S=_):(b=M,S=E):P>=E?(b=v,S=P):E>=_?(b=T,S=_):(b=M,S=E);for(var D=A*(g-1),N=A*b,O=0;O<A;++O,++D,++N){var I=d[D];d[D]=d[N],d[N]=I}var F=y[g-1];y[g-1]=y[b],y[b]=F,b=n(f,u,m,g-1,d,y,S);for(var D=A*(g-1),N=A*b,O=0;O<A;++O,++D,++N){var I=d[D];d[D]=d[N],d[N]=I}var F=y[g-1];if(y[g-1]=y[b],y[b]=F,x<b){for(g=b-1;m<g&&d[A*(g-1)+u]===S;)g-=1;g+=1}else if(b<x)for(m=b+1;m<g&&d[A*m+u]===S;)m+=1;else break}return n(f,u,s,x,d,y,d[A*x+u])}},{"./partition":39}],39:[function(o,c,p){c.exports=n;var t={"lo===p0":a,"lo<p0":i,"lo<=p0":r,"hi<=p0":f,"lo<p0&&p0<=hi":s,"lo<=p0&&p0<=hi":u,"!(lo>=p0)&&!(p1>=hi)":h};function n(d){return t[d]}function a(d,y,m,g,x,A,b){for(var S=2*d,w=S*m,T=w,_=m,v=y,P=m;g>P;++P,w+=S){var M=x[w+v];if(M===b)if(_===P)_+=1,T+=S;else{for(var E=0;S>E;++E){var D=x[w+E];x[w+E]=x[T],x[T++]=D}var N=A[P];A[P]=A[_],A[_++]=N}}return _}function i(d,y,m,g,x,A,b){for(var S=2*d,w=S*m,T=w,_=m,v=y,P=m;g>P;++P,w+=S){var M=x[w+v];if(M<b)if(_===P)_+=1,T+=S;else{for(var E=0;S>E;++E){var D=x[w+E];x[w+E]=x[T],x[T++]=D}var N=A[P];A[P]=A[_],A[_++]=N}}return _}function r(d,y,m,g,x,A,b){for(var S=2*d,w=S*m,T=w,_=m,v=d+y,P=m;g>P;++P,w+=S){var M=x[w+v];if(M<=b)if(_===P)_+=1,T+=S;else{for(var E=0;S>E;++E){var D=x[w+E];x[w+E]=x[T],x[T++]=D}var N=A[P];A[P]=A[_],A[_++]=N}}return _}function f(d,y,m,g,x,A,b){for(var S=2*d,w=S*m,T=w,_=m,v=d+y,P=m;g>P;++P,w+=S){var M=x[w+v];if(M<=b)if(_===P)_+=1,T+=S;else{for(var E=0;S>E;++E){var D=x[w+E];x[w+E]=x[T],x[T++]=D}var N=A[P];A[P]=A[_],A[_++]=N}}return _}function u(d,y,m,g,x,A,b){for(var S=2*d,w=S*m,T=w,_=m,v=y,P=d+y,M=m;g>M;++M,w+=S){var E=x[w+v],D=x[w+P];if(E<=b&&b<=D)if(_===M)_+=1,T+=S;else{for(var N=0;S>N;++N){var O=x[w+N];x[w+N]=x[T],x[T++]=O}var I=A[M];A[M]=A[_],A[_++]=I}}return _}function s(d,y,m,g,x,A,b){for(var S=2*d,w=S*m,T=w,_=m,v=y,P=d+y,M=m;g>M;++M,w+=S){var E=x[w+v],D=x[w+P];if(E<b&&b<=D)if(_===M)_+=1,T+=S;else{for(var N=0;S>N;++N){var O=x[w+N];x[w+N]=x[T],x[T++]=O}var I=A[M];A[M]=A[_],A[_++]=I}}return _}function h(d,y,m,g,x,A,b,S){for(var w=2*d,T=w*m,_=T,v=m,P=y,M=d+y,E=m;g>E;++E,T+=w){var D=x[T+P],N=x[T+M];if(!(D>=b)&&!(S>=N))if(v===E)v+=1,_+=w;else{for(var O=0;w>O;++O){var I=x[T+O];x[T+O]=x[_],x[_++]=I}var F=A[E];A[E]=A[v],A[v++]=F}}return v}},{}],40:[function(o,c,p){c.exports=n;var t=32;function n(y,m){m<=4*t?a(0,m-1,y):d(0,m-1,y)}function a(y,m,g){for(var x=2*(y+1),A=y+1;A<=m;++A){for(var b=g[x++],S=g[x++],w=A,T=x-2;w-- >y;){var _=g[T-2],v=g[T-1];if(_<b)break;if(_===b&&v<S)break;g[T]=_,g[T+1]=v,T-=2}g[T]=b,g[T+1]=S}}function i(y,m,g){y*=2,m*=2;var x=g[y],A=g[y+1];g[y]=g[m],g[y+1]=g[m+1],g[m]=x,g[m+1]=A}function r(y,m,g){y*=2,m*=2,g[y]=g[m],g[y+1]=g[m+1]}function f(y,m,g,x){y*=2,m*=2,g*=2;var A=x[y],b=x[y+1];x[y]=x[m],x[y+1]=x[m+1],x[m]=x[g],x[m+1]=x[g+1],x[g]=A,x[g+1]=b}function u(y,m,g,x,A){y*=2,m*=2,A[y]=A[m],A[m]=g,A[y+1]=A[m+1],A[m+1]=x}function s(y,m,g){y*=2,m*=2;var x=g[y],A=g[m];return x<A?!1:x===A?g[y+1]>g[m+1]:!0}function h(y,m,g,x){y*=2;var A=x[y];return A<m?!0:A===m?x[y+1]<g:!1}function d(y,m,g){var x=(m-y+1)/6|0,A=y+x,b=m-x,S=y+m>>1,w=S-x,T=S+x,_=A,v=w,P=S,M=T,E=b,D=y+1,N=m-1,O=0;s(_,v,g)&&(O=_,_=v,v=O),s(M,E,g)&&(O=M,M=E,E=O),s(_,P,g)&&(O=_,_=P,P=O),s(v,P,g)&&(O=v,v=P,P=O),s(_,M,g)&&(O=_,_=M,M=O),s(P,M,g)&&(O=P,P=M,M=O),s(v,E,g)&&(O=v,v=E,E=O),s(v,P,g)&&(O=v,v=P,P=O),s(M,E,g)&&(O=M,M=E,E=O);for(var I=g[2*v],F=g[2*v+1],V=g[2*M],U=g[2*M+1],j=2*_,Z=2*P,te=2*E,re=2*A,W=2*S,J=2*b,le=0;le<2;++le){var ue=g[j+le],se=g[Z+le],G=g[te+le];g[re+le]=ue,g[W+le]=se,g[J+le]=G}r(w,y,g),r(T,m,g);for(var Y=D;Y<=N;++Y)if(h(Y,I,F,g))Y!==D&&i(Y,D,g),++D;else if(!h(Y,V,U,g))for(;;)if(h(N,V,U,g)){h(N,I,F,g)?(f(Y,D,N,g),++D,--N):(i(Y,N,g),--N);break}else{if(--N<Y)break;continue}u(y,D-1,I,F,g),u(m,N+1,V,U,g),D-2-y<=t?a(y,D-2,g):d(y,D-2,g),m-(N+2)<=t?a(N+2,m,g):d(N+2,m,g),N-D<=t?a(D,N,g):d(D,N,g)}},{}],41:[function(o,c,p){c.exports={init:g,sweepBipartite:b,sweepComplete:S,scanBipartite:w,scanComplete:T};var t=o("typedarray-pool"),n=o("bit-twiddle"),a=o("./sort"),i=1<<28,r=1024,f=t.mallocInt32(r),u=t.mallocInt32(r),s=t.mallocInt32(r),h=t.mallocInt32(r),d=t.mallocInt32(r),y=t.mallocInt32(r),m=t.mallocDouble(r*8);function g(_){var v=n.nextPow2(_);f.length<v&&(t.free(f),f=t.mallocInt32(v)),u.length<v&&(t.free(u),u=t.mallocInt32(v)),s.length<v&&(t.free(s),s=t.mallocInt32(v)),h.length<v&&(t.free(h),h=t.mallocInt32(v)),d.length<v&&(t.free(d),d=t.mallocInt32(v)),y.length<v&&(t.free(y),y=t.mallocInt32(v));var P=8*v;m.length<P&&(t.free(m),m=t.mallocDouble(P))}function x(_,v,P,M){var E=v[M],D=_[P-1];_[E]=D,v[D]=E}function A(_,v,P,M){_[P]=M,v[M]=P}function b(_,v,P,M,E,D,N,O,I,F){for(var V=0,U=2*_,j=_-1,Z=U-1,te=P;te<M;++te){var re=D[te],W=U*te;m[V++]=E[W+j],m[V++]=-(re+1),m[V++]=E[W+Z],m[V++]=re}for(var te=N;te<O;++te){var re=F[te]+i,J=U*te;m[V++]=I[J+j],m[V++]=-re,m[V++]=I[J+Z],m[V++]=re}var le=V>>>1;a(m,le);for(var ue=0,se=0,te=0;te<le;++te){var G=m[2*te+1]|0;if(G>=i)G=G-i|0,x(s,h,se--,G);else if(G>=0)x(f,u,ue--,G);else if(G<=-i){G=-G-i|0;for(var Y=0;Y<ue;++Y){var ee=v(f[Y],G);if(ee!==void 0)return ee}A(s,h,se++,G)}else{G=-G-1|0;for(var Y=0;Y<se;++Y){var ee=v(G,s[Y]);if(ee!==void 0)return ee}A(f,u,ue++,G)}}}function S(_,v,P,M,E,D,N,O,I,F){for(var V=0,U=2*_,j=_-1,Z=U-1,te=P;te<M;++te){var re=D[te]+1<<1,W=U*te;m[V++]=E[W+j],m[V++]=-re,m[V++]=E[W+Z],m[V++]=re}for(var te=N;te<O;++te){var re=F[te]+1<<1,J=U*te;m[V++]=I[J+j],m[V++]=-re|1,m[V++]=I[J+Z],m[V++]=re|1}var le=V>>>1;a(m,le);for(var ue=0,se=0,G=0,te=0;te<le;++te){var Y=m[2*te+1]|0,ee=Y&1;if(te<le-1&&Y>>1==m[2*te+3]>>1&&(ee=2,te+=1),Y<0){for(var $=-(Y>>1)-1,K=0;K<G;++K){var Q=v(d[K],$);if(Q!==void 0)return Q}if(ee!==0)for(var K=0;K<ue;++K){var Q=v(f[K],$);if(Q!==void 0)return Q}if(ee!==1)for(var K=0;K<se;++K){var Q=v(s[K],$);if(Q!==void 0)return Q}ee===0?A(f,u,ue++,$):ee===1?A(s,h,se++,$):ee===2&&A(d,y,G++,$)}else{var $=(Y>>1)-1;ee===0?x(f,u,ue--,$):ee===1?x(s,h,se--,$):ee===2&&x(d,y,G--,$)}}}function w(_,v,P,M,E,D,N,O,I,F,V,U){var j=0,Z=2*_,te=v,re=v+_,W=1,J=1;M?J=i:W=i;for(var le=E;le<D;++le){var ue=le+W,se=Z*le;m[j++]=N[se+te],m[j++]=-ue,m[j++]=N[se+re],m[j++]=ue}for(var le=I;le<F;++le){var ue=le+J,G=Z*le;m[j++]=V[G+te],m[j++]=-ue}var Y=j>>>1;a(m,Y);for(var ee=0,le=0;le<Y;++le){var $=m[2*le+1]|0;if($<0){var ue=-$,K=!1;if(ue>=i?(K=!M,ue-=i):(K=!!M,ue-=1),K)A(f,u,ee++,ue);else{var Q=U[ue],ae=Z*ue,ie=V[ae+v+1],oe=V[ae+v+1+_];e:for(var fe=0;fe<ee;++fe){var ye=f[fe],ce=Z*ye;if(!(oe<N[ce+v+1]||N[ce+v+1+_]<ie)){for(var me=v+2;me<_;++me)if(V[ae+me+_]<N[ce+me]||N[ce+me+_]<V[ae+me])continue e;var xe=O[ye],ke;if(M?ke=P(Q,xe):ke=P(xe,Q),ke!==void 0)return ke}}}}else x(f,u,ee--,$-W)}}function T(_,v,P,M,E,D,N,O,I,F,V){for(var U=0,j=2*_,Z=v,te=v+_,re=M;re<E;++re){var W=re+i,J=j*re;m[U++]=D[J+Z],m[U++]=-W,m[U++]=D[J+te],m[U++]=W}for(var re=O;re<I;++re){var W=re+1,le=j*re;m[U++]=F[le+Z],m[U++]=-W}var ue=U>>>1;a(m,ue);for(var se=0,re=0;re<ue;++re){var G=m[2*re+1]|0;if(G<0){var W=-G;if(W>=i)f[se++]=W-i;else{W-=1;var Y=V[W],ee=j*W,$=F[ee+v+1],K=F[ee+v+1+_];e:for(var Q=0;Q<se;++Q){var ae=f[Q],ie=N[ae];if(ie===Y)break;var oe=j*ae;if(!(K<D[oe+v+1]||D[oe+v+1+_]<$)){for(var fe=v+2;fe<_;++fe)if(F[ee+fe+_]<D[oe+fe]||D[oe+fe+_]<F[ee+fe])continue e;var ye=P(ie,Y);if(ye!==void 0)return ye}}}}else{for(var W=G-i,Q=se-1;Q>=0;--Q)if(f[Q]===W){for(var fe=Q+1;fe<se;++fe)f[fe-1]=f[fe];break}--se}}}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(o,c,p){var t=o("./lib/monotone"),n=o("./lib/triangulation"),a=o("./lib/delaunay"),i=o("./lib/filter");c.exports=h;function r(d){return[Math.min(d[0],d[1]),Math.max(d[0],d[1])]}function f(d,y){return d[0]-y[0]||d[1]-y[1]}function u(d){return d.map(r).sort(f)}function s(d,y,m){return y in d?d[y]:m}function h(d,y,m){Array.isArray(y)?(m=m||{},y=y||[]):(m=y||{},y=[]);var g=!!s(m,"delaunay",!0),x=!!s(m,"interior",!0),A=!!s(m,"exterior",!0),b=!!s(m,"infinity",!1);if(!x&&!A||d.length===0)return[];var S=t(d,y);if(g||x!==A||b){for(var w=n(d.length,u(y)),T=0;T<S.length;++T){var _=S[T];w.addTriangle(_[0],_[1],_[2])}return g&&a(d,w),A?x?b?i(w,0,b):w.cells():i(w,1,b):i(w,-1)}else return S}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(o,c,p){var t=o("robust-in-sphere")[4];o("binary-search-bounds"),c.exports=a;function n(i,r,f,u,s,h){var d=r.opposite(u,s);if(!(d<0)){if(s<u){var y=u;u=s,s=y,y=h,h=d,d=y}r.isConstraint(u,s)||t(i[u],i[s],i[h],i[d])<0&&f.push(u,s)}}function a(i,r){for(var f=[],u=i.length,s=r.stars,h=0;h<u;++h)for(var d=s[h],y=1;y<d.length;y+=2){var m=d[y];if(!(m<h)&&!r.isConstraint(h,m)){for(var g=d[y-1],x=-1,A=1;A<d.length;A+=2)if(d[A-1]===m){x=d[A];break}x<0||t(i[h],i[m],i[g],i[x])<0&&f.push(h,m)}}for(;f.length>0;){for(var m=f.pop(),h=f.pop(),g=-1,x=-1,d=s[h],b=1;b<d.length;b+=2){var S=d[b-1],w=d[b];S===m?x=w:w===m&&(g=S)}g<0||x<0||t(i[h],i[m],i[g],i[x])>=0||(r.flip(h,m),n(i,r,f,g,h,x),n(i,r,f,h,x,g),n(i,r,f,x,m,g),n(i,r,f,m,g,x))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(o,c,p){var t=o("binary-search-bounds");c.exports=u;function n(s,h,d,y,m,g,x){this.cells=s,this.neighbor=h,this.flags=y,this.constraint=d,this.active=m,this.next=g,this.boundary=x}var a=n.prototype;function i(s,h){return s[0]-h[0]||s[1]-h[1]||s[2]-h[2]}a.locate=function(){var s=[0,0,0];return function(h,d,y){var m=h,g=d,x=y;return d<y?d<h&&(m=d,g=y,x=h):y<h&&(m=y,g=h,x=d),m<0?-1:(s[0]=m,s[1]=g,s[2]=x,t.eq(this.cells,s,i))}}();function r(s,h){for(var d=s.cells(),y=d.length,m=0;m<y;++m){var g=d[m],x=g[0],A=g[1],b=g[2];A<b?A<x&&(g[0]=A,g[1]=b,g[2]=x):b<x&&(g[0]=b,g[1]=x,g[2]=A)}d.sort(i);for(var S=new Array(y),m=0;m<S.length;++m)S[m]=0;var w=[],T=[],_=new Array(3*y),v=new Array(3*y),P=null;h&&(P=[]);for(var M=new n(d,_,v,S,w,T,P),m=0;m<y;++m)for(var g=d[m],E=0;E<3;++E){var x=g[E],A=g[(E+1)%3],D=_[3*m+E]=M.locate(A,x,s.opposite(A,x)),N=v[3*m+E]=s.isConstraint(x,A);D<0&&(N?T.push(m):(w.push(m),S[m]=1),h&&P.push([A,x,-1]))}return M}function f(s,h,d){for(var y=0,m=0;m<s.length;++m)h[m]===d&&(s[y++]=s[m]);return s.length=y,s}function u(s,h,d){var y=r(s,d);if(h===0)return d?y.cells.concat(y.boundary):y.cells;for(var m=1,g=y.active,x=y.next,A=y.flags,b=y.cells,S=y.constraint,w=y.neighbor;g.length>0||x.length>0;){for(;g.length>0;){var T=g.pop();if(A[T]!==-m){A[T]=m,b[T];for(var _=0;_<3;++_){var v=w[3*T+_];v>=0&&A[v]===0&&(S[3*T+_]?x.push(v):(g.push(v),A[v]=m))}}}var P=x;x=g,g=P,x.length=0,m=-m}var M=f(b,A,h);return d?M.concat(y.boundary):M}},{"binary-search-bounds":31}],45:[function(o,c,p){var t=o("binary-search-bounds"),n=o("robust-orientation")[3],a=0,i=1,r=2;c.exports=x;function f(A,b,S,w,T){this.a=A,this.b=b,this.idx=S,this.lowerIds=w,this.upperIds=T}function u(A,b,S,w){this.a=A,this.b=b,this.type=S,this.idx=w}function s(A,b){var S=A.a[0]-b.a[0]||A.a[1]-b.a[1]||A.type-b.type;return S||A.type!==a&&(S=n(A.a,A.b,b.b),S)?S:A.idx-b.idx}function h(A,b){return n(A.a,A.b,b)}function d(A,b,S,w,T){for(var _=t.lt(b,w,h),v=t.gt(b,w,h),P=_;P<v;++P){for(var M=b[P],E=M.lowerIds,D=E.length;D>1&&n(S[E[D-2]],S[E[D-1]],w)>0;)A.push([E[D-1],E[D-2],T]),D-=1;E.length=D,E.push(T);for(var N=M.upperIds,D=N.length;D>1&&n(S[N[D-2]],S[N[D-1]],w)<0;)A.push([N[D-2],N[D-1],T]),D-=1;N.length=D,N.push(T)}}function y(A,b){var S;return A.a[0]<b.a[0]?S=n(A.a,A.b,b.a):S=n(b.b,b.a,A.a),S||(b.b[0]<A.b[0]?S=n(A.a,A.b,b.b):S=n(b.b,b.a,A.b),S||A.idx-b.idx)}function m(A,b,S){var w=t.le(A,S,y),T=A[w],_=T.upperIds,v=_[_.length-1];T.upperIds=[v],A.splice(w+1,0,new f(S.a,S.b,S.idx,[v],_))}function g(A,b,S){var w=S.a;S.a=S.b,S.b=w;var T=t.eq(A,S,y),_=A[T],v=A[T-1];v.upperIds=_.upperIds,A.splice(T,1)}function x(A,b){for(var S=A.length,w=b.length,T=[],_=0;_<S;++_)T.push(new u(A[_],null,a,_));for(var _=0;_<w;++_){var v=b[_],P=A[v[0]],M=A[v[1]];P[0]<M[0]?T.push(new u(P,M,r,_),new u(M,P,i,_)):P[0]>M[0]&&T.push(new u(M,P,r,_),new u(P,M,i,_))}T.sort(s);for(var E=T[0].a[0]-(1+Math.abs(T[0].a[0]))*Math.pow(2,-52),D=[new f([E,1],[E,0],-1,[],[],[],[])],N=[],_=0,O=T.length;_<O;++_){var I=T[_],F=I.type;F===a?d(N,D,A,I.a,I.idx):F===r?m(D,A,I):g(D,A,I)}return N}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(o,c,p){var t=o("binary-search-bounds");c.exports=r;function n(f,u){this.stars=f,this.edges=u}var a=n.prototype;function i(f,u,s){for(var h=1,d=f.length;h<d;h+=2)if(f[h-1]===u&&f[h]===s){f[h-1]=f[d-2],f[h]=f[d-1],f.length=d-2;return}}a.isConstraint=function(){var f=[0,0];function u(s,h){return s[0]-h[0]||s[1]-h[1]}return function(s,h){return f[0]=Math.min(s,h),f[1]=Math.max(s,h),t.eq(this.edges,f,u)>=0}}(),a.removeTriangle=function(f,u,s){var h=this.stars;i(h[f],u,s),i(h[u],s,f),i(h[s],f,u)},a.addTriangle=function(f,u,s){var h=this.stars;h[f].push(u,s),h[u].push(s,f),h[s].push(f,u)},a.opposite=function(f,u){for(var s=this.stars[u],h=1,d=s.length;h<d;h+=2)if(s[h]===f)return s[h-1];return-1},a.flip=function(f,u){var s=this.opposite(f,u),h=this.opposite(u,f);this.removeTriangle(f,u,s),this.removeTriangle(u,f,h),this.addTriangle(f,h,s),this.addTriangle(u,s,h)},a.edges=function(){for(var f=this.stars,u=[],s=0,h=f.length;s<h;++s)for(var d=f[s],y=0,m=d.length;y<m;y+=2)u.push([d[y],d[y+1]]);return u},a.cells=function(){for(var f=this.stars,u=[],s=0,h=f.length;s<h;++s)for(var d=f[s],y=0,m=d.length;y<m;y+=2){var g=d[y],x=d[y+1];s<Math.min(g,x)&&u.push([s,g,x])}return u};function r(f,u){for(var s=new Array(f),h=0;h<f;++h)s[h]=[];return new n(s,u)}},{"binary-search-bounds":31}],47:[function(o,c,p){c.exports=t;function t(n){for(var a=1,i=1;i<n.length;++i)for(var r=0;r<i;++r)if(n[i]<n[r])a=-a;else if(n[r]===n[i])return 0;return a}},{}],48:[function(o,c,p){var t=o("dup"),n=o("robust-linear-solve");function a(f,u){for(var s=0,h=f.length,d=0;d<h;++d)s+=f[d]*u[d];return s}function i(f){var u=f.length;if(u===0)return[];f[0].length;var s=t([f.length+1,f.length+1],1),h=t([f.length+1],1);s[u][u]=0;for(var d=0;d<u;++d){for(var y=0;y<=d;++y)s[y][d]=s[d][y]=2*a(f[d],f[y]);h[d]=a(f[d],f[d])}for(var m=n(s,h),g=0,x=m[u+1],d=0;d<x.length;++d)g+=x[d];for(var A=new Array(u),d=0;d<u;++d){for(var x=m[d],b=0,y=0;y<x.length;++y)b+=x[y];A[d]=b/g}return A}function r(f){if(f.length===0)return[];for(var u=f[0].length,s=t([u]),h=i(f),d=0;d<f.length;++d)for(var y=0;y<u;++y)s[y]+=f[d][y]*h[d];return s}r.barycenetric=i,c.exports=r},{dup:65,"robust-linear-solve":283}],49:[function(o,c,p){c.exports=n;var t=o("circumcenter");function n(a){for(var i=t(a),r=0,f=0;f<a.length;++f)for(var u=a[f],s=0;s<i.length;++s)r+=Math.pow(u[s]-i[s],2);return Math.sqrt(r/a.length)}},{circumcenter:48}],50:[function(o,c,p){c.exports=P;var t=o("union-find"),n=o("box-intersect"),a=o("robust-segment-intersect"),i=o("big-rat"),r=o("big-rat/cmp"),f=o("big-rat/to-float"),u=o("rat-vec"),s=o("nextafter"),h=o("./lib/rat-seg-intersect");function d(M){var E=f(M);return[s(E,-1/0),s(E,1/0)]}function y(M,E){for(var D=new Array(E.length),N=0;N<E.length;++N){var O=E[N],I=M[O[0]],F=M[O[1]];D[N]=[s(Math.min(I[0],F[0]),-1/0),s(Math.min(I[1],F[1]),-1/0),s(Math.max(I[0],F[0]),1/0),s(Math.max(I[1],F[1]),1/0)]}return D}function m(M){for(var E=new Array(M.length),D=0;D<M.length;++D){var N=M[D];E[D]=[s(N[0],-1/0),s(N[1],-1/0),s(N[0],1/0),s(N[1],1/0)]}return E}function g(M,E,D){var N=[];return n(D,function(O,I){var F=E[O],V=E[I];if(!(F[0]===V[0]||F[0]===V[1]||F[1]===V[0]||F[1]===V[1])){var U=M[F[0]],j=M[F[1]],Z=M[V[0]],te=M[V[1]];a(U,j,Z,te)&&N.push([O,I])}}),N}function x(M,E,D,N){var O=[];return n(D,N,function(I,F){var V=E[I];if(!(V[0]===F||V[1]===F)){var U=M[F],j=M[V[0]],Z=M[V[1]];a(j,Z,U,U)&&O.push([I,F])}}),O}function A(M,E,D,N,O){var I,F,V=M.map(function(ae){return[i(ae[0]),i(ae[1])]});for(I=0;I<D.length;++I){var U=D[I];F=U[0];var j=U[1],Z=E[F],te=E[j],re=h(u(M[Z[0]]),u(M[Z[1]]),u(M[te[0]]),u(M[te[1]]));if(!!re){var W=M.length;M.push([f(re[0]),f(re[1])]),V.push(re),N.push([F,W],[j,W])}}for(N.sort(function(ae,ie){if(ae[0]!==ie[0])return ae[0]-ie[0];var oe=V[ae[1]],fe=V[ie[1]];return r(oe[0],fe[0])||r(oe[1],fe[1])}),I=N.length-1;I>=0;--I){var J=N[I];F=J[0];var le=E[F],ue=le[0],se=le[1],G=M[ue],Y=M[se];if((G[0]-Y[0]||G[1]-Y[1])<0){var ee=ue;ue=se,se=ee}le[0]=ue;var $=le[1]=J[1],K;for(O&&(K=le[2]);I>0&&N[I-1][0]===F;){var J=N[--I],Q=J[1];O?E.push([$,Q,K]):E.push([$,Q]),$=Q}O?E.push([$,se,K]):E.push([$,se])}return V}function b(M,E,D){for(var N=E.length,O=new t(N),I=[],F=0;F<E.length;++F){var V=E[F],U=d(V[0]),j=d(V[1]);I.push([s(U[0],-1/0),s(j[0],-1/0),s(U[1],1/0),s(j[1],1/0)])}n(I,function(J,le){O.link(J,le)});for(var Z=!0,te=new Array(N),F=0;F<N;++F){var re=O.find(F);re!==F&&(Z=!1,M[re]=[Math.min(M[F][0],M[re][0]),Math.min(M[F][1],M[re][1])])}if(Z)return null;for(var W=0,F=0;F<N;++F){var re=O.find(F);re===F?(te[F]=W,M[W++]=M[F]):te[F]=-1}M.length=W;for(var F=0;F<N;++F)te[F]<0&&(te[F]=te[O.find(F)]);return te}function S(M,E){return M[0]-E[0]||M[1]-E[1]}function w(M,E){var D=M[0]-E[0]||M[1]-E[1];return D||(M[2]<E[2]?-1:M[2]>E[2]?1:0)}function T(M,E,D){if(M.length!==0){if(E)for(var N=0;N<M.length;++N){var O=M[N],I=E[O[0]],F=E[O[1]];O[0]=Math.min(I,F),O[1]=Math.max(I,F)}else for(var N=0;N<M.length;++N){var O=M[N],I=O[0],F=O[1];O[0]=Math.min(I,F),O[1]=Math.max(I,F)}D?M.sort(w):M.sort(S);for(var V=1,N=1;N<M.length;++N){var U=M[N-1],j=M[N];j[0]===U[0]&&j[1]===U[1]&&(!D||j[2]===U[2])||(M[V++]=j)}M.length=V}}function _(M,E,D){var N=b(M,[],m(M));return T(E,N,D),!!N}function v(M,E,D){var N=y(M,E),O=g(M,E,N),I=m(M),F=x(M,E,N,I),V=A(M,E,O,F,D),U=b(M,V);return T(E,U,D),U?!0:O.length>0||F.length>0}function P(M,E,D){var N;if(D){N=E;for(var O=new Array(E.length),I=0;I<E.length;++I){var F=E[I];O[I]=[F[0],F[1],D[I]]}E=O}for(var V=_(M,E,!!D);v(M,E,!!D);)V=!0;if(!!D&&V){N.length=0,D.length=0;for(var I=0;I<E.length;++I){var F=E[I];N.push([F[0],F[1]]),D.push(F[2])}}return V}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(o,c,p){c.exports=h;var t=o("big-rat/mul"),n=o("big-rat/div"),a=o("big-rat/sub"),i=o("big-rat/sign"),r=o("rat-vec/sub"),f=o("rat-vec/add"),u=o("rat-vec/muls");function s(d,y){return a(t(d[0],y[1]),t(d[1],y[0]))}function h(d,y,m,g){var x=r(y,d),A=r(g,m),b=s(x,A);if(i(b)===0)return null;var S=r(d,m),w=s(A,S),T=n(w,b),_=u(x,T),v=f(d,_);return v}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(o,c,p){c.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(o,c,p){var t=o("./colorScale"),n=o("lerp");c.exports=a;function a(u){var s,h,d,y,m,g,x,A,b,S,w;if(u||(u={}),A=(u.nshades||72)-1,x=u.format||"hex",g=u.colormap,g||(g="jet"),typeof g=="string"){if(g=g.toLowerCase(),!t[g])throw Error(g+" not a supported colorscale");m=t[g]}else if(Array.isArray(g))m=g.slice();else throw Error("unsupported colormap option",g);if(m.length>A+1)throw new Error(g+" map requires nshades to be at least size "+m.length);Array.isArray(u.alpha)?u.alpha.length!==2?S=[1,1]:S=u.alpha.slice():typeof u.alpha=="number"?S=[u.alpha,u.alpha]:S=[1,1],s=m.map(function(P){return Math.round(P.index*A)}),S[0]=Math.min(Math.max(S[0],0),1),S[1]=Math.min(Math.max(S[1],0),1);var T=m.map(function(P,M){var E=m[M].index,D=m[M].rgb.slice();return D.length===4&&D[3]>=0&&D[3]<=1||(D[3]=S[0]+(S[1]-S[0])*E),D}),b=[];for(w=0;w<s.length-1;++w){y=s[w+1]-s[w],h=T[w],d=T[w+1];for(var _=0;_<y;_++){var v=_/y;b.push([Math.round(n(h[0],d[0],v)),Math.round(n(h[1],d[1],v)),Math.round(n(h[2],d[2],v)),n(h[3],d[3],v)])}}return b.push(m[m.length-1].rgb.concat(S[1])),x==="hex"?b=b.map(r):x==="rgbaString"?b=b.map(f):x==="float"&&(b=b.map(i)),b}function i(u){return[u[0]/255,u[1]/255,u[2]/255,u[3]]}function r(u){for(var s,h="#",d=0;d<3;++d)s=u[d],s=s.toString(16),h+=("00"+s).substr(s.length);return h}function f(u){return"rgba("+u.join(",")+")"}},{"./colorScale":52,lerp:240}],54:[function(o,c,p){c.exports=u;var t=o("robust-orientation"),n=o("signum"),a=o("two-sum"),i=o("robust-product"),r=o("robust-sum");function f(s,h,d){var y=a(s[0],-h[0]),m=a(s[1],-h[1]),g=a(d[0],-h[0]),x=a(d[1],-h[1]),A=r(i(y,g),i(m,x));return A[A.length-1]>=0}function u(s,h,d,y){var m=t(h,d,y);if(m===0){var g=n(t(s,h,d)),x=n(t(s,h,y));if(g===x){if(g===0){var A=f(s,h,d),b=f(s,h,y);return A===b?0:A?1:-1}return 0}else{if(x===0)return g>0||f(s,h,y)?-1:1;if(g===0)return x>0||f(s,h,d)?1:-1}return n(x-g)}var S=t(s,h,d);if(S>0)return m>0&&t(s,h,y)>0?1:-1;if(S<0)return m>0||t(s,h,y)>0?1:-1;var w=t(s,h,y);return w>0||f(s,h,d)?1:-1}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(o,c,p){c.exports=function(n){return n<0?-1:n>0?1:0}},{}],56:[function(o,c,p){c.exports=a;var t=Math.min;function n(i,r){return i-r}function a(i,r){var f=i.length,u=i.length-r.length;if(u)return u;switch(f){case 0:return 0;case 1:return i[0]-r[0];case 2:return i[0]+i[1]-r[0]-r[1]||t(i[0],i[1])-t(r[0],r[1]);case 3:var s=i[0]+i[1],h=r[0]+r[1];if(u=s+i[2]-(h+r[2]),u)return u;var d=t(i[0],i[1]),y=t(r[0],r[1]);return t(d,i[2])-t(y,r[2])||t(d+i[2],s)-t(y+r[2],h);case 4:var m=i[0],g=i[1],x=i[2],A=i[3],b=r[0],S=r[1],w=r[2],T=r[3];return m+g+x+A-(b+S+w+T)||t(m,g,x,A)-t(b,S,w,T,b)||t(m+g,m+x,m+A,g+x,g+A,x+A)-t(b+S,b+w,b+T,S+w,S+T,w+T)||t(m+g+x,m+g+A,m+x+A,g+x+A)-t(b+S+w,b+S+T,b+w+T,S+w+T);default:for(var _=i.slice().sort(n),v=r.slice().sort(n),P=0;P<f;++P)if(u=_[P]-v[P],u)return u;return 0}}},{}],57:[function(o,c,p){var t=o("compare-cell"),n=o("cell-orientation");c.exports=a;function a(i,r){return t(i,r)||n(i)-n(r)}},{"cell-orientation":47,"compare-cell":56}],58:[function(o,c,p){var t=o("./lib/ch1d"),n=o("./lib/ch2d"),a=o("./lib/chnd");c.exports=i;function i(r){var f=r.length;if(f===0)return[];if(f===1)return[[0]];var u=r[0].length;return u===0?[]:u===1?t(r):u===2?n(r):a(r,u)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(o,c,p){c.exports=t;function t(n){for(var a=0,i=0,r=1;r<n.length;++r)n[r][0]<n[a][0]&&(a=r),n[r][0]>n[i][0]&&(i=r);return a<i?[[a],[i]]:a>i?[[i],[a]]:[[a]]}},{}],60:[function(o,c,p){c.exports=n;var t=o("monotone-convex-hull-2d");function n(a){var i=t(a),r=i.length;if(r<=2)return[];for(var f=new Array(r),u=i[r-1],s=0;s<r;++s){var h=i[s];f[s]=[u,h],u=h}return f}},{"monotone-convex-hull-2d":246}],61:[function(o,c,p){c.exports=r;var t=o("incremental-convex-hull"),n=o("affine-hull");function a(f,u){for(var s=f.length,h=new Array(s),d=0;d<u.length;++d)h[d]=f[u[d]];for(var y=u.length,d=0;d<s;++d)u.indexOf(d)<0&&(h[y++]=f[d]);return h}function i(f,u){for(var s=f.length,h=u.length,d=0;d<s;++d)for(var y=f[d],m=0;m<y.length;++m){var g=y[m];if(g<h)y[m]=u[g];else{g=g-h;for(var x=0;x<h;++x)g>=u[x]&&(g+=1);y[m]=g}}return f}function r(f,u){try{return t(f,!0)}catch{var s=n(f);if(s.length<=u)return[];var h=a(f,s),d=t(h,!0);return i(d,s)}}},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(o,c,p){function t(a,i,r,f,u,s){var h=6*u*u-6*u,d=3*u*u-4*u+1,y=-6*u*u+6*u,m=3*u*u-2*u;if(a.length){s||(s=new Array(a.length));for(var g=a.length-1;g>=0;--g)s[g]=h*a[g]+d*i[g]+y*r[g]+m*f[g];return s}return h*a+d*i+y*r[g]+m*f}function n(a,i,r,f,u,s){var h=u-1,d=u*u,y=h*h,m=(1+2*u)*y,g=u*y,x=d*(3-2*u),A=d*h;if(a.length){s||(s=new Array(a.length));for(var b=a.length-1;b>=0;--b)s[b]=m*a[b]+g*i[b]+x*r[b]+A*f[b];return s}return m*a+g*i+x*r+A*f}c.exports=n,c.exports.derivative=t},{}],63:[function(o,c,p){var t=o("incremental-convex-hull"),n=o("uniq");c.exports=f;function a(u,s){this.point=u,this.index=s}function i(u,s){for(var h=u.point,d=s.point,y=h.length,m=0;m<y;++m){var g=d[m]-h[m];if(g)return g}return 0}function r(u,s,h){if(u===1)return h?[[-1,0]]:[];var d=s.map(function(A,b){return[A[0],b]});d.sort(function(A,b){return A[0]-b[0]});for(var y=new Array(u-1),m=1;m<u;++m){var g=d[m-1],x=d[m];y[m-1]=[g[1],x[1]]}return h&&y.push([-1,y[0][1]],[y[u-1][1],-1]),y}function f(u,s){var h=u.length;if(h===0)return[];var d=u[0].length;if(d<1)return[];if(d===1)return r(h,u,s);for(var y=new Array(h),m=1,g=0;g<h;++g){for(var x=u[g],A=new Array(d+1),b=0,S=0;S<d;++S){var w=x[S];A[S]=w,b+=w*w}A[d]=b,y[g]=new a(A,g),m=Math.max(b,m)}n(y,i),h=y.length;for(var T=new Array(h+d+1),_=new Array(h+d+1),v=(d+1)*(d+1)*m,P=new Array(d+1),g=0;g<=d;++g)P[g]=0;P[d]=v,T[0]=P.slice(),_[0]=-1;for(var g=0;g<=d;++g){var A=P.slice();A[g]=1,T[g+1]=A,_[g+1]=-1}for(var g=0;g<h;++g){var M=y[g];T[g+d+1]=M.point,_[g+d+1]=M.index}var E=t(T,!1);if(s?E=E.filter(function(D){for(var N=0,O=0;O<=d;++O){var I=_[D[O]];if(I<0&&++N>=2)return!1;D[O]=I}return!0}):E=E.filter(function(D){for(var N=0;N<=d;++N){var O=_[D[N]];if(O<0)return!1;D[N]=O}return!0}),d&1)for(var g=0;g<E.length;++g){var M=E[g],A=M[0];M[0]=M[1],M[1]=A}return E}},{"incremental-convex-hull":233,uniq:310}],64:[function(o,c,p){(function(t){(function(){var n=!1;if(typeof Float64Array!="undefined"){var a=new Float64Array(1),i=new Uint32Array(a.buffer);if(a[0]=1,n=!0,i[1]===1072693248){let f=function(h,d){return i[0]=h,i[1]=d,a[0]},u=function(h){return a[0]=h,i[0]},s=function(h){return a[0]=h,i[1]};c.exports=function(d){return a[0]=d,[i[0],i[1]]},c.exports.pack=f,c.exports.lo=u,c.exports.hi=s}else if(i[0]===1072693248){let f=function(h,d){return i[1]=h,i[0]=d,a[0]},u=function(h){return a[0]=h,i[1]},s=function(h){return a[0]=h,i[0]};c.exports=function(d){return a[0]=d,[i[1],i[0]]},c.exports.pack=f,c.exports.lo=u,c.exports.hi=s}else n=!1}if(!n){let f=function(h,d){return r.writeUInt32LE(h,0,!0),r.writeUInt32LE(d,4,!0),r.readDoubleLE(0,!0)},u=function(h){return r.writeDoubleLE(h,0,!0),r.readUInt32LE(0,!0)},s=function(h){return r.writeDoubleLE(h,0,!0),r.readUInt32LE(4,!0)};var r=new t(8);c.exports=function(d){return r.writeDoubleLE(d,0,!0),[r.readUInt32LE(0,!0),r.readUInt32LE(4,!0)]},c.exports.pack=f,c.exports.lo=u,c.exports.hi=s}c.exports.sign=function(f){return c.exports.hi(f)>>>31},c.exports.exponent=function(f){var u=c.exports.hi(f);return(u<<1>>>21)-1023},c.exports.fraction=function(f){var u=c.exports.lo(f),s=c.exports.hi(f),h=s&(1<<20)-1;return s&2146435072&&(h+=1<<20),[u,h]},c.exports.denormalized=function(f){var u=c.exports.hi(f);return!(u&2146435072)}}).call(this)}).call(this,o("buffer").Buffer)},{buffer:3}],65:[function(o,c,p){function t(i,r,f){var u=i[f]|0;if(u<=0)return[];var s=new Array(u),h;if(f===i.length-1)for(h=0;h<u;++h)s[h]=r;else for(h=0;h<u;++h)s[h]=t(i,r,f+1);return s}function n(i,r){var f,u;for(f=new Array(i),u=0;u<i;++u)f[u]=r;return f}function a(i,r){switch(typeof r=="undefined"&&(r=0),typeof i){case"number":if(i>0)return n(i|0,r);break;case"object":if(typeof i.length=="number")return t(i,r,0);break}return[]}c.exports=a},{}],66:[function(o,c,p){c.exports=n;var t=o("uniq");function n(a,i){var r=a.length;if(typeof i!="number"){i=0;for(var f=0;f<r;++f){var u=a[f];i=Math.max(i,u[0],u[1])}i=(i|0)+1}i=i|0;for(var s=new Array(i),f=0;f<i;++f)s[f]=[];for(var f=0;f<r;++f){var u=a[f];s[u[0]].push(u[1]),s[u[1]].push(u[0])}for(var h=0;h<i;++h)t(s[h],function(d,y){return d-y});return s}},{uniq:310}],67:[function(o,c,p){c.exports=t;function t(n,a,i){var r=a||0,f=i||1;return[[n[12]+n[0],n[13]+n[1],n[14]+n[2],n[15]+n[3]],[n[12]-n[0],n[13]-n[1],n[14]-n[2],n[15]-n[3]],[n[12]+n[4],n[13]+n[5],n[14]+n[6],n[15]+n[7]],[n[12]-n[4],n[13]-n[5],n[14]-n[6],n[15]-n[7]],[r*n[12]+n[8],r*n[13]+n[9],r*n[14]+n[10],r*n[15]+n[11]],[f*n[12]-n[8],f*n[13]-n[9],f*n[14]-n[10],f*n[15]-n[11]]]}},{}],68:[function(o,c,p){c.exports=u;var t=o("cubic-hermite"),n=o("binary-search-bounds");function a(s,h,d){return Math.min(h,Math.max(s,d))}function i(s,h,d){this.dimension=s.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var y=0;y<this.dimension;++y)this.bounds[0][y]=-1/0,this.bounds[1][y]=1/0;this._state=s.slice().reverse(),this._velocity=h.slice().reverse(),this._time=[d],this._scratch=[s.slice(),s.slice(),s.slice(),s.slice(),s.slice()]}var r=i.prototype;r.flush=function(s){var h=n.gt(this._time,s)-1;h<=0||(this._time.splice(0,h),this._state.splice(0,h*this.dimension),this._velocity.splice(0,h*this.dimension))},r.curve=function(s){var h=this._time,d=h.length,y=n.le(h,s),m=this._scratch[0],g=this._state,x=this._velocity,A=this.dimension,b=this.bounds;if(y<0)for(var S=A-1,w=0;w<A;++w,--S)m[w]=g[S];else if(y>=d-1)for(var S=g.length-1,T=s-h[d-1],w=0;w<A;++w,--S)m[w]=g[S]+T*x[S];else{for(var S=A*(y+1)-1,_=h[y],v=h[y+1],P=v-_||1,M=this._scratch[1],E=this._scratch[2],D=this._scratch[3],N=this._scratch[4],O=!0,w=0;w<A;++w,--S)M[w]=g[S],D[w]=x[S]*P,E[w]=g[S+A],N[w]=x[S+A]*P,O=O&&M[w]===E[w]&&D[w]===N[w]&&D[w]===0;if(O)for(var w=0;w<A;++w)m[w]=M[w];else t(M,D,E,N,(s-_)/P,m)}for(var I=b[0],F=b[1],w=0;w<A;++w)m[w]=a(I[w],F[w],m[w]);return m},r.dcurve=function(s){var h=this._time,d=h.length,y=n.le(h,s),m=this._scratch[0],g=this._state,x=this._velocity,A=this.dimension;if(y>=d-1){var b=g.length-1;s-h[d-1];for(var S=0;S<A;++S,--b)m[S]=x[b]}else{for(var b=A*(y+1)-1,w=h[y],T=h[y+1],_=T-w||1,v=this._scratch[1],P=this._scratch[2],M=this._scratch[3],E=this._scratch[4],D=!0,S=0;S<A;++S,--b)v[S]=g[b],M[S]=x[b]*_,P[S]=g[b+A],E[S]=x[b+A]*_,D=D&&v[S]===P[S]&&M[S]===E[S]&&M[S]===0;if(D)for(var S=0;S<A;++S)m[S]=0;else{t.derivative(v,M,P,E,(s-w)/_,m);for(var S=0;S<A;++S)m[S]/=_}}return m},r.lastT=function(){var s=this._time;return s[s.length-1]},r.stable=function(){for(var s=this._velocity,h=s.length,d=this.dimension-1;d>=0;--d)if(s[--h])return!1;return!0},r.jump=function(s){var h=this.lastT(),d=this.dimension;if(!(s<h||arguments.length!==d+1)){var y=this._state,m=this._velocity,g=y.length-this.dimension,x=this.bounds,A=x[0],b=x[1];this._time.push(h,s);for(var S=0;S<2;++S)for(var w=0;w<d;++w)y.push(y[g++]),m.push(0);this._time.push(s);for(var w=d;w>0;--w)y.push(a(A[w-1],b[w-1],arguments[w])),m.push(0)}},r.push=function(s){var h=this.lastT(),d=this.dimension;if(!(s<h||arguments.length!==d+1)){var y=this._state,m=this._velocity,g=y.length-this.dimension,x=s-h,A=this.bounds,b=A[0],S=A[1],w=x>1e-6?1/x:0;this._time.push(s);for(var T=d;T>0;--T){var _=a(b[T-1],S[T-1],arguments[T]);y.push(_),m.push((_-y[g++])*w)}}},r.set=function(s){var h=this.dimension;if(!(s<this.lastT()||arguments.length!==h+1)){var d=this._state,y=this._velocity,m=this.bounds,g=m[0],x=m[1];this._time.push(s);for(var A=h;A>0;--A)d.push(a(g[A-1],x[A-1],arguments[A])),y.push(0)}},r.move=function(s){var h=this.lastT(),d=this.dimension;if(!(s<=h||arguments.length!==d+1)){var y=this._state,m=this._velocity,g=y.length-this.dimension,x=this.bounds,A=x[0],b=x[1],S=s-h,w=S>1e-6?1/S:0;this._time.push(s);for(var T=d;T>0;--T){var _=arguments[T];y.push(a(A[T-1],b[T-1],y[g++]+_)),m.push(_*w)}}},r.idle=function(s){var h=this.lastT();if(!(s<h)){var d=this.dimension,y=this._state,m=this._velocity,g=y.length-d,x=this.bounds,A=x[0],b=x[1],S=s-h;this._time.push(s);for(var w=d-1;w>=0;--w)y.push(a(A[w],b[w],y[g]+S*m[g])),m.push(0),g+=1}};function f(s){for(var h=new Array(s),d=0;d<s;++d)h[d]=0;return h}function u(s,h,d){switch(arguments.length){case 0:return new i([0],[0],0);case 1:if(typeof s=="number"){var y=f(s);return new i(y,y,0)}else return new i(s,f(s.length),0);case 2:if(typeof h=="number"){var y=f(s.length);return new i(s,y,+h)}else d=0;case 3:if(s.length!==h.length)throw new Error("state and velocity lengths must match");return new i(s,h,d)}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(o,c,p){c.exports=S;var t=0,n=1;function a(w,T,_,v,P,M){this._color=w,this.key=T,this.value=_,this.left=v,this.right=P,this._count=M}function i(w){return new a(w._color,w.key,w.value,w.left,w.right,w._count)}function r(w,T){return new a(w,T.key,T.value,T.left,T.right,T._count)}function f(w){w._count=1+(w.left?w.left._count:0)+(w.right?w.right._count:0)}function u(w,T){this._compare=w,this.root=T}var s=u.prototype;Object.defineProperty(s,"keys",{get:function(){var w=[];return this.forEach(function(T,_){w.push(T)}),w}}),Object.defineProperty(s,"values",{get:function(){var w=[];return this.forEach(function(T,_){w.push(_)}),w}}),Object.defineProperty(s,"length",{get:function(){return this.root?this.root._count:0}}),s.insert=function(w,T){for(var _=this._compare,v=this.root,P=[],M=[];v;){var E=_(w,v.key);P.push(v),M.push(E),E<=0?v=v.left:v=v.right}P.push(new a(t,w,T,null,null,1));for(var D=P.length-2;D>=0;--D){var v=P[D];M[D]<=0?P[D]=new a(v._color,v.key,v.value,P[D+1],v.right,v._count+1):P[D]=new a(v._color,v.key,v.value,v.left,P[D+1],v._count+1)}for(var D=P.length-1;D>1;--D){var N=P[D-1],v=P[D];if(N._color===n||v._color===n)break;var O=P[D-2];if(O.left===N)if(N.left===v){var I=O.right;if(I&&I._color===t)N._color=n,O.right=r(n,I),O._color=t,D-=1;else{if(O._color=t,O.left=N.right,N._color=n,N.right=O,P[D-2]=N,P[D-1]=v,f(O),f(N),D>=3){var F=P[D-3];F.left===O?F.left=N:F.right=N}break}}else{var I=O.right;if(I&&I._color===t)N._color=n,O.right=r(n,I),O._color=t,D-=1;else{if(N.right=v.left,O._color=t,O.left=v.right,v._color=n,v.left=N,v.right=O,P[D-2]=v,P[D-1]=N,f(O),f(N),f(v),D>=3){var F=P[D-3];F.left===O?F.left=v:F.right=v}break}}else if(N.right===v){var I=O.left;if(I&&I._color===t)N._color=n,O.left=r(n,I),O._color=t,D-=1;else{if(O._color=t,O.right=N.left,N._color=n,N.left=O,P[D-2]=N,P[D-1]=v,f(O),f(N),D>=3){var F=P[D-3];F.right===O?F.right=N:F.left=N}break}}else{var I=O.left;if(I&&I._color===t)N._color=n,O.left=r(n,I),O._color=t,D-=1;else{if(N.left=v.right,O._color=t,O.right=v.left,v._color=n,v.right=N,v.left=O,P[D-2]=v,P[D-1]=N,f(O),f(N),f(v),D>=3){var F=P[D-3];F.right===O?F.right=v:F.left=v}break}}}return P[0]._color=n,new u(_,P[0])};function h(w,T){if(T.left){var _=h(w,T.left);if(_)return _}var _=w(T.key,T.value);if(_)return _;if(T.right)return h(w,T.right)}function d(w,T,_,v){var P=T(w,v.key);if(P<=0){if(v.left){var M=d(w,T,_,v.left);if(M)return M}var M=_(v.key,v.value);if(M)return M}if(v.right)return d(w,T,_,v.right)}function y(w,T,_,v,P){var M=_(w,P.key),E=_(T,P.key),D;if(M<=0&&(P.left&&(D=y(w,T,_,v,P.left),D)||E>0&&(D=v(P.key,P.value),D)))return D;if(E>0&&P.right)return y(w,T,_,v,P.right)}s.forEach=function(T,_,v){if(!!this.root)switch(arguments.length){case 1:return h(T,this.root);case 2:return d(_,this._compare,T,this.root);case 3:return this._compare(_,v)>=0?void 0:y(_,v,this._compare,T,this.root)}},Object.defineProperty(s,"begin",{get:function(){for(var w=[],T=this.root;T;)w.push(T),T=T.left;return new m(this,w)}}),Object.defineProperty(s,"end",{get:function(){for(var w=[],T=this.root;T;)w.push(T),T=T.right;return new m(this,w)}}),s.at=function(w){if(w<0)return new m(this,[]);for(var T=this.root,_=[];;){if(_.push(T),T.left){if(w<T.left._count){T=T.left;continue}w-=T.left._count}if(!w)return new m(this,_);if(w-=1,T.right){if(w>=T.right._count)break;T=T.right}else break}return new m(this,[])},s.ge=function(w){for(var T=this._compare,_=this.root,v=[],P=0;_;){var M=T(w,_.key);v.push(_),M<=0&&(P=v.length),M<=0?_=_.left:_=_.right}return v.length=P,new m(this,v)},s.gt=function(w){for(var T=this._compare,_=this.root,v=[],P=0;_;){var M=T(w,_.key);v.push(_),M<0&&(P=v.length),M<0?_=_.left:_=_.right}return v.length=P,new m(this,v)},s.lt=function(w){for(var T=this._compare,_=this.root,v=[],P=0;_;){var M=T(w,_.key);v.push(_),M>0&&(P=v.length),M<=0?_=_.left:_=_.right}return v.length=P,new m(this,v)},s.le=function(w){for(var T=this._compare,_=this.root,v=[],P=0;_;){var M=T(w,_.key);v.push(_),M>=0&&(P=v.length),M<0?_=_.left:_=_.right}return v.length=P,new m(this,v)},s.find=function(w){for(var T=this._compare,_=this.root,v=[];_;){var P=T(w,_.key);if(v.push(_),P===0)return new m(this,v);P<=0?_=_.left:_=_.right}return new m(this,[])},s.remove=function(w){var T=this.find(w);return T?T.remove():this},s.get=function(w){for(var T=this._compare,_=this.root;_;){var v=T(w,_.key);if(v===0)return _.value;v<=0?_=_.left:_=_.right}};function m(w,T){this.tree=w,this._stack=T}var g=m.prototype;Object.defineProperty(g,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(g,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),g.clone=function(){return new m(this.tree,this._stack.slice())};function x(w,T){w.key=T.key,w.value=T.value,w.left=T.left,w.right=T.right,w._color=T._color,w._count=T._count}function A(w){for(var T,_,v,P,M=w.length-1;M>=0;--M){if(T=w[M],M===0){T._color=n;return}if(_=w[M-1],_.left===T){if(v=_.right,v.right&&v.right._color===t){if(v=_.right=i(v),P=v.right=i(v.right),_.right=v.left,v.left=_,v.right=P,v._color=_._color,T._color=n,_._color=n,P._color=n,f(_),f(v),M>1){var E=w[M-2];E.left===_?E.left=v:E.right=v}w[M-1]=v;return}else if(v.left&&v.left._color===t){if(v=_.right=i(v),P=v.left=i(v.left),_.right=P.left,v.left=P.right,P.left=_,P.right=v,P._color=_._color,_._color=n,v._color=n,T._color=n,f(_),f(v),f(P),M>1){var E=w[M-2];E.left===_?E.left=P:E.right=P}w[M-1]=P;return}if(v._color===n)if(_._color===t){_._color=n,_.right=r(t,v);return}else{_.right=r(t,v);continue}else{if(v=i(v),_.right=v.left,v.left=_,v._color=_._color,_._color=t,f(_),f(v),M>1){var E=w[M-2];E.left===_?E.left=v:E.right=v}w[M-1]=v,w[M]=_,M+1<w.length?w[M+1]=T:w.push(T),M=M+2}}else{if(v=_.left,v.left&&v.left._color===t){if(v=_.left=i(v),P=v.left=i(v.left),_.left=v.right,v.right=_,v.left=P,v._color=_._color,T._color=n,_._color=n,P._color=n,f(_),f(v),M>1){var E=w[M-2];E.right===_?E.right=v:E.left=v}w[M-1]=v;return}else if(v.right&&v.right._color===t){if(v=_.left=i(v),P=v.right=i(v.right),_.left=P.right,v.right=P.left,P.right=_,P.left=v,P._color=_._color,_._color=n,v._color=n,T._color=n,f(_),f(v),f(P),M>1){var E=w[M-2];E.right===_?E.right=P:E.left=P}w[M-1]=P;return}if(v._color===n)if(_._color===t){_._color=n,_.left=r(t,v);return}else{_.left=r(t,v);continue}else{if(v=i(v),_.left=v.right,v.right=_,v._color=_._color,_._color=t,f(_),f(v),M>1){var E=w[M-2];E.right===_?E.right=v:E.left=v}w[M-1]=v,w[M]=_,M+1<w.length?w[M+1]=T:w.push(T),M=M+2}}}}g.remove=function(){var w=this._stack;if(w.length===0)return this.tree;var T=new Array(w.length),_=w[w.length-1];T[T.length-1]=new a(_._color,_.key,_.value,_.left,_.right,_._count);for(var v=w.length-2;v>=0;--v){var _=w[v];_.left===w[v+1]?T[v]=new a(_._color,_.key,_.value,T[v+1],_.right,_._count):T[v]=new a(_._color,_.key,_.value,_.left,T[v+1],_._count)}if(_=T[T.length-1],_.left&&_.right){var P=T.length;for(_=_.left;_.right;)T.push(_),_=_.right;var M=T[P-1];T.push(new a(_._color,M.key,M.value,_.left,_.right,_._count)),T[P-1].key=_.key,T[P-1].value=_.value;for(var v=T.length-2;v>=P;--v)_=T[v],T[v]=new a(_._color,_.key,_.value,_.left,T[v+1],_._count);T[P-1].left=T[P]}if(_=T[T.length-1],_._color===t){var E=T[T.length-2];E.left===_?E.left=null:E.right===_&&(E.right=null),T.pop();for(var v=0;v<T.length;++v)T[v]._count--;return new u(this.tree._compare,T[0])}else if(_.left||_.right){_.left?x(_,_.left):_.right&&x(_,_.right),_._color=n;for(var v=0;v<T.length-1;++v)T[v]._count--;return new u(this.tree._compare,T[0])}else{if(T.length===1)return new u(this.tree._compare,null);for(var v=0;v<T.length;++v)T[v]._count--;var D=T[T.length-2];A(T),D.left===_?D.left=null:D.right=null}return new u(this.tree._compare,T[0])},Object.defineProperty(g,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(g,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(g,"index",{get:function(){var w=0,T=this._stack;if(T.length===0){var _=this.tree.root;return _?_._count:0}else T[T.length-1].left&&(w=T[T.length-1].left._count);for(var v=T.length-2;v>=0;--v)T[v+1]===T[v].right&&(++w,T[v].left&&(w+=T[v].left._count));return w},enumerable:!0}),g.next=function(){var w=this._stack;if(w.length!==0){var T=w[w.length-1];if(T.right)for(T=T.right;T;)w.push(T),T=T.left;else for(w.pop();w.length>0&&w[w.length-1].right===T;)T=w[w.length-1],w.pop()}},Object.defineProperty(g,"hasNext",{get:function(){var w=this._stack;if(w.length===0)return!1;if(w[w.length-1].right)return!0;for(var T=w.length-1;T>0;--T)if(w[T-1].left===w[T])return!0;return!1}}),g.update=function(w){var T=this._stack;if(T.length===0)throw new Error("Can't update empty node!");var _=new Array(T.length),v=T[T.length-1];_[_.length-1]=new a(v._color,v.key,w,v.left,v.right,v._count);for(var P=T.length-2;P>=0;--P)v=T[P],v.left===T[P+1]?_[P]=new a(v._color,v.key,v.value,_[P+1],v.right,v._count):_[P]=new a(v._color,v.key,v.value,v.left,_[P+1],v._count);return new u(this.tree._compare,_[0])},g.prev=function(){var w=this._stack;if(w.length!==0){var T=w[w.length-1];if(T.left)for(T=T.left;T;)w.push(T),T=T.right;else for(w.pop();w.length>0&&w[w.length-1].left===T;)T=w[w.length-1],w.pop()}},Object.defineProperty(g,"hasPrev",{get:function(){var w=this._stack;if(w.length===0)return!1;if(w[w.length-1].left)return!0;for(var T=w.length-1;T>0;--T)if(w[T-1].right===w[T])return!0;return!1}});function b(w,T){return w<T?-1:w>T?1:0}function S(w){return new u(w||b,null)}},{}],70:[function(o,c,p){c.exports=T;var t=o("./lib/text.js"),n=o("./lib/lines.js"),a=o("./lib/background.js"),i=o("./lib/cube.js"),r=o("./lib/ticks.js"),f=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function u(_,v){return _[0]=v[0],_[1]=v[1],_[2]=v[2],_}function s(_){this.gl=_,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=a(_)}var h=s.prototype;h.update=function(_){_=_||{};function v(Z,te,re){if(re in _){var W=_[re],J=this[re],le;(Z?Array.isArray(W)&&Array.isArray(W[0]):Array.isArray(W))?this[re]=le=[te(W[0]),te(W[1]),te(W[2])]:this[re]=le=[te(W),te(W),te(W)];for(var ue=0;ue<3;++ue)if(le[ue]!==J[ue])return!0}return!1}var P=v.bind(this,!1,Number),M=v.bind(this,!1,Boolean),E=v.bind(this,!1,String),D=v.bind(this,!0,function(Z){if(Array.isArray(Z)){if(Z.length===3)return[+Z[0],+Z[1],+Z[2],1];if(Z.length===4)return[+Z[0],+Z[1],+Z[2],+Z[3]]}return[0,0,0,1]}),N,O=!1,I=!1;if("bounds"in _)for(var F=_.bounds,V=0;V<2;++V)for(var U=0;U<3;++U)F[V][U]!==this.bounds[V][U]&&(I=!0),this.bounds[V][U]=F[V][U];if("ticks"in _){N=_.ticks,O=!0,this.autoTicks=!1;for(var V=0;V<3;++V)this.tickSpacing[V]=0}else P("tickSpacing")&&(this.autoTicks=!0,I=!0);if(this._firstInit&&("ticks"in _||"tickSpacing"in _||(this.autoTicks=!0),I=!0,O=!0,this._firstInit=!1),I&&this.autoTicks&&(N=r.create(this.bounds,this.tickSpacing),O=!0),O){for(var V=0;V<3;++V)N[V].sort(function(te,re){return te.x-re.x});r.equal(N,this.ticks)?O=!1:this.ticks=N}M("tickEnable"),E("tickFont")&&(O=!0),P("tickSize"),P("tickAngle"),P("tickPad"),D("tickColor");var j=E("labels");E("labelFont")&&(j=!0),M("labelEnable"),P("labelSize"),P("labelPad"),D("labelColor"),M("lineEnable"),M("lineMirror"),P("lineWidth"),D("lineColor"),M("lineTickEnable"),M("lineTickMirror"),P("lineTickLength"),P("lineTickWidth"),D("lineTickColor"),M("gridEnable"),P("gridWidth"),D("gridColor"),M("zeroEnable"),D("zeroLineColor"),P("zeroLineWidth"),M("backgroundEnable"),D("backgroundColor"),this._text?this._text&&(j||O)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=t(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&O&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=n(this.gl,this.bounds,this.ticks))};function d(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var y=[new d,new d,new d];function m(_,v,P,M,E){for(var D=_.primalOffset,N=_.primalMinor,O=_.mirrorOffset,I=_.mirrorMinor,F=M[v],V=0;V<3;++V)if(v!==V){var U=D,j=O,Z=N,te=I;F&1<<V&&(U=O,j=D,Z=I,te=N),U[V]=P[0][V],j[V]=P[1][V],E[V]>0?(Z[V]=-1,te[V]=0):(Z[V]=0,te[V]=1)}}var g=[0,0,0],x={model:f,view:f,projection:f,_ortho:!1};h.isOpaque=function(){return!0},h.isTransparent=function(){return!1},h.drawTransparent=function(_){};var A=0,b=[0,0,0],S=[0,0,0],w=[0,0,0];h.draw=function(_){_=_||x;for(var v=this.gl,P=_.model||f,M=_.view||f,E=_.projection||f,D=this.bounds,N=_._ortho||!1,O=i(P,M,E,D,N),I=O.cubeEdges,F=O.axis,V=M[12],U=M[13],j=M[14],Z=M[15],te=N?2:1,re=te*this.pixelRatio*(E[3]*V+E[7]*U+E[11]*j+E[15]*Z)/v.drawingBufferHeight,W=0;W<3;++W)this.lastCubeProps.cubeEdges[W]=I[W],this.lastCubeProps.axis[W]=F[W];for(var J=y,W=0;W<3;++W)m(y[W],W,this.bounds,I,F);for(var v=this.gl,le=g,W=0;W<3;++W)this.backgroundEnable[W]?le[W]=F[W]:le[W]=0;this._background.draw(P,M,E,D,le,this.backgroundColor),this._lines.bind(P,M,E,this);for(var W=0;W<3;++W){var ue=[0,0,0];F[W]>0?ue[W]=D[1][W]:ue[W]=D[0][W];for(var se=0;se<2;++se){var G=(W+1+se)%3,Y=(W+1+(se^1))%3;this.gridEnable[G]&&this._lines.drawGrid(G,Y,this.bounds,ue,this.gridColor[G],this.gridWidth[G]*this.pixelRatio)}for(var se=0;se<2;++se){var G=(W+1+se)%3,Y=(W+1+(se^1))%3;this.zeroEnable[Y]&&Math.min(D[0][Y],D[1][Y])<=0&&Math.max(D[0][Y],D[1][Y])>=0&&this._lines.drawZero(G,Y,this.bounds,ue,this.zeroLineColor[Y],this.zeroLineWidth[Y]*this.pixelRatio)}}for(var W=0;W<3;++W){this.lineEnable[W]&&this._lines.drawAxisLine(W,this.bounds,J[W].primalOffset,this.lineColor[W],this.lineWidth[W]*this.pixelRatio),this.lineMirror[W]&&this._lines.drawAxisLine(W,this.bounds,J[W].mirrorOffset,this.lineColor[W],this.lineWidth[W]*this.pixelRatio);for(var ee=u(b,J[W].primalMinor),$=u(S,J[W].mirrorMinor),K=this.lineTickLength,se=0;se<3;++se){var Q=re/P[5*se];ee[se]*=K[se]*Q,$[se]*=K[se]*Q}this.lineTickEnable[W]&&this._lines.drawAxisTicks(W,J[W].primalOffset,ee,this.lineTickColor[W],this.lineTickWidth[W]*this.pixelRatio),this.lineTickMirror[W]&&this._lines.drawAxisTicks(W,J[W].mirrorOffset,$,this.lineTickColor[W],this.lineTickWidth[W]*this.pixelRatio)}this._lines.unbind(),this._text.bind(P,M,E,this.pixelRatio);var ae,ie=.5,oe,fe;function ye(Oe){fe=[0,0,0],fe[Oe]=1}function ce(Oe,He,Ge){var _e=(Oe+1)%3,Ie=(Oe+2)%3,We=He[_e],et=He[Ie],Ne=Ge[_e],De=Ge[Ie];if(We>0&&De>0){ye(_e);return}else if(We>0&&De<0){ye(_e);return}else if(We<0&&De>0){ye(_e);return}else if(We<0&&De<0){ye(_e);return}else if(et>0&&Ne>0){ye(Ie);return}else if(et>0&&Ne<0){ye(Ie);return}else if(et<0&&Ne>0){ye(Ie);return}else if(et<0&&Ne<0){ye(Ie);return}}for(var W=0;W<3;++W){for(var me=J[W].primalMinor,xe=J[W].mirrorMinor,ke=u(w,J[W].primalOffset),se=0;se<3;++se)this.lineTickEnable[W]&&(ke[se]+=re*me[se]*Math.max(this.lineTickLength[se],0)/P[5*se]);var Ae=[0,0,0];if(Ae[W]=1,this.tickEnable[W]){this.tickAngle[W]===-3600?(this.tickAngle[W]=0,this.tickAlign[W]="auto"):this.tickAlign[W]=-1,oe=1,ae=[this.tickAlign[W],ie,oe],ae[0]==="auto"?ae[0]=A:ae[0]=parseInt(""+ae[0]),fe=[0,0,0],ce(W,me,xe);for(var se=0;se<3;++se)ke[se]+=re*me[se]*this.tickPad[se]/P[5*se];this._text.drawTicks(W,this.tickSize[W],this.tickAngle[W],ke,this.tickColor[W],Ae,fe,ae)}if(this.labelEnable[W]){oe=0,fe=[0,0,0],this.labels[W].length>4&&(ye(W),oe=1),ae=[this.labelAlign[W],ie,oe],ae[0]==="auto"?ae[0]=A:ae[0]=parseInt(""+ae[0]);for(var se=0;se<3;++se)ke[se]+=re*me[se]*this.labelPad[se]/P[5*se];ke[W]+=.5*(D[0][W]+D[1][W]),this._text.drawLabel(W,this.labelSize[W],this.labelAngle[W],ke,this.labelColor[W],[0,0,0],fe,ae)}}this._text.unbind()},h.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function T(_,v){var P=new s(_);return P.update(v),P}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(o,c,p){c.exports=f;var t=o("gl-buffer"),n=o("gl-vao"),a=o("./shaders").bg;function i(u,s,h,d){this.gl=u,this.buffer=s,this.vao=h,this.shader=d}var r=i.prototype;r.draw=function(u,s,h,d,y,m){for(var g=!1,x=0;x<3;++x)g=g||y[x];if(!!g){var A=this.gl;A.enable(A.POLYGON_OFFSET_FILL),A.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:u,view:s,projection:h,bounds:d,enable:y,colors:m},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),A.disable(A.POLYGON_OFFSET_FILL)}},r.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function f(u){for(var s=[],h=[],d=0,y=0;y<3;++y)for(var m=(y+1)%3,g=(y+2)%3,x=[0,0,0],A=[0,0,0],b=-1;b<=1;b+=2){h.push(d,d+2,d+1,d+1,d+2,d+3),x[y]=b,A[y]=b;for(var S=-1;S<=1;S+=2){x[m]=S;for(var w=-1;w<=1;w+=2)x[g]=w,s.push(x[0],x[1],x[2],A[0],A[1],A[2]),d+=1}var T=m;m=g,g=T}var _=t(u,new Float32Array(s)),v=t(u,new Uint16Array(h),u.ELEMENT_ARRAY_BUFFER),P=n(u,[{buffer:_,type:u.FLOAT,size:3,offset:0,stride:24},{buffer:_,type:u.FLOAT,size:3,offset:12,stride:24}],v),M=a(u);return M.attributes.position.location=0,M.attributes.normal.location=1,new i(u,_,P,M)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(o,c,p){c.exports=b;var t=o("bit-twiddle"),n=o("gl-mat4/multiply"),a=o("split-polygon"),i=o("robust-orientation"),r=new Array(16),f=new Array(8),u=new Array(8),s=new Array(3),h=[0,0,0];(function(){for(var S=0;S<8;++S)f[S]=[1,1,1,1],u[S]=[1,1,1]})();function d(S,w,T){for(var _=0;_<4;++_){S[_]=T[12+_];for(var v=0;v<3;++v)S[_]+=w[v]*T[4*v+_]}}var y=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function m(S){for(var w=0;w<y.length;++w)if(S=a.positive(S,y[w]),S.length<3)return 0;for(var T=S[0],_=T[0]/T[3],v=T[1]/T[3],P=0,w=1;w+1<S.length;++w){var M=S[w],E=S[w+1],D=M[0]/M[3],N=M[1]/M[3],O=E[0]/E[3],I=E[1]/E[3],F=D-_,V=N-v,U=O-_,j=I-v;P+=Math.abs(F*j-V*U)}return P}var g=[1,1,1],x=[0,0,0],A={cubeEdges:g,axis:x};function b(S,w,T,_,v){n(r,w,S),n(r,T,r);for(var P=0,M=0;M<2;++M){s[2]=_[M][2];for(var E=0;E<2;++E){s[1]=_[E][1];for(var D=0;D<2;++D)s[0]=_[D][0],d(f[P],s,r),P+=1}}for(var N=-1,M=0;M<8;++M){for(var O=f[M][3],I=0;I<3;++I)u[M][I]=f[M][I]/O;v&&(u[M][2]*=-1),O<0&&(N<0||u[M][2]<u[N][2])&&(N=M)}if(N<0){N=0;for(var F=0;F<3;++F){for(var V=(F+2)%3,U=(F+1)%3,j=-1,Z=-1,te=0;te<2;++te){var re=te<<F,W=re+(te<<V)+(1-te<<U),J=re+(1-te<<V)+(te<<U);i(u[re],u[W],u[J],h)<0||(te?j=1:Z=1)}if(j<0||Z<0){Z>j&&(N|=1<<F);continue}for(var te=0;te<2;++te){var re=te<<F,W=re+(te<<V)+(1-te<<U),J=re+(1-te<<V)+(te<<U),le=m([f[re],f[W],f[J],f[re+(1<<V)+(1<<U)]]);te?j=le:Z=le}if(Z>j){N|=1<<F;continue}}}for(var ue=7^N,se=-1,M=0;M<8;++M)M===N||M===ue||(se<0||u[se][1]>u[M][1])&&(se=M);for(var G=-1,M=0;M<3;++M){var Y=se^1<<M;if(!(Y===N||Y===ue)){G<0&&(G=Y);var U=u[Y];U[0]<u[G][0]&&(G=Y)}}for(var ee=-1,M=0;M<3;++M){var Y=se^1<<M;if(!(Y===N||Y===ue||Y===G)){ee<0&&(ee=Y);var U=u[Y];U[0]>u[ee][0]&&(ee=Y)}}var $=g;$[0]=$[1]=$[2]=0,$[t.log2(G^se)]=se&G,$[t.log2(se^ee)]=se&ee;var K=ee^7;K===N||K===ue?(K=G^7,$[t.log2(ee^K)]=K&ee):$[t.log2(G^K)]=K&G;for(var Q=x,ae=N,F=0;F<3;++F)ae&1<<F?Q[F]=-1:Q[F]=1;return A}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(o,c,p){c.exports=g;var t=o("gl-buffer"),n=o("gl-vao"),a=o("./shaders").line,i=[0,0,0],r=[0,0,0],f=[0,0,0],u=[0,0,0],s=[1,1];function h(x){return x[0]=x[1]=x[2]=0,x}function d(x,A){return x[0]=A[0],x[1]=A[1],x[2]=A[2],x}function y(x,A,b,S,w,T,_,v){this.gl=x,this.vertBuffer=A,this.vao=b,this.shader=S,this.tickCount=w,this.tickOffset=T,this.gridCount=_,this.gridOffset=v}var m=y.prototype;m.bind=function(x,A,b){this.shader.bind(),this.shader.uniforms.model=x,this.shader.uniforms.view=A,this.shader.uniforms.projection=b,s[0]=this.gl.drawingBufferWidth,s[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=s,this.vao.bind()},m.unbind=function(){this.vao.unbind()},m.drawAxisLine=function(x,A,b,S,w){var T=h(r);this.shader.uniforms.majorAxis=r,T[x]=A[1][x]-A[0][x],this.shader.uniforms.minorAxis=T;var _=d(u,b);_[x]+=A[0][x],this.shader.uniforms.offset=_,this.shader.uniforms.lineWidth=w,this.shader.uniforms.color=S;var v=h(f);v[(x+2)%3]=1,this.shader.uniforms.screenAxis=v,this.vao.draw(this.gl.TRIANGLES,6);var v=h(f);v[(x+1)%3]=1,this.shader.uniforms.screenAxis=v,this.vao.draw(this.gl.TRIANGLES,6)},m.drawAxisTicks=function(x,A,b,S,w){if(!!this.tickCount[x]){var T=h(i);T[x]=1,this.shader.uniforms.majorAxis=T,this.shader.uniforms.offset=A,this.shader.uniforms.minorAxis=b,this.shader.uniforms.color=S,this.shader.uniforms.lineWidth=w;var _=h(f);_[x]=1,this.shader.uniforms.screenAxis=_,this.vao.draw(this.gl.TRIANGLES,this.tickCount[x],this.tickOffset[x])}},m.drawGrid=function(x,A,b,S,w,T){if(!!this.gridCount[x]){var _=h(r);_[A]=b[1][A]-b[0][A],this.shader.uniforms.minorAxis=_;var v=d(u,S);v[A]+=b[0][A],this.shader.uniforms.offset=v;var P=h(i);P[x]=1,this.shader.uniforms.majorAxis=P;var M=h(f);M[x]=1,this.shader.uniforms.screenAxis=M,this.shader.uniforms.lineWidth=T,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,this.gridCount[x],this.gridOffset[x])}},m.drawZero=function(x,A,b,S,w,T){var _=h(r);this.shader.uniforms.majorAxis=_,_[x]=b[1][x]-b[0][x],this.shader.uniforms.minorAxis=_;var v=d(u,S);v[x]+=b[0][x],this.shader.uniforms.offset=v;var P=h(f);P[A]=1,this.shader.uniforms.screenAxis=P,this.shader.uniforms.lineWidth=T,this.shader.uniforms.color=w,this.vao.draw(this.gl.TRIANGLES,6)},m.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function g(x,A,b){var S=[],w=[0,0,0],T=[0,0,0],_=[0,0,0],v=[0,0,0];S.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var P=0;P<3;++P){for(var M=S.length/3|0,E=0;E<b[P].length;++E){var D=+b[P][E].x;S.push(D,0,1,D,1,1,D,0,-1,D,0,-1,D,1,1,D,1,-1)}var N=S.length/3|0;w[P]=M,T[P]=N-M;for(var M=S.length/3|0,O=0;O<b[P].length;++O){var D=+b[P][O].x;S.push(D,0,1,D,1,1,D,0,-1,D,0,-1,D,1,1,D,1,-1)}var N=S.length/3|0;_[P]=M,v[P]=N-M}var I=t(x,new Float32Array(S)),F=n(x,[{buffer:I,type:x.FLOAT,size:3,stride:0,offset:0}]),V=a(x);return V.attributes.position.location=0,new y(x,I,F,V,T,w,v,_)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(o,c,p){var t=o("glslify"),n=o("gl-shader"),a=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),i=t([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);p.line=function(h){return n(h,a,i,null,[{name:"position",type:"vec3"}])};var r=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),f=t([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);p.text=function(h){return n(h,r,f,null,[{name:"position",type:"vec3"}])};var u=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),s=t([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);p.bg=function(h){return n(h,u,s,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(o,c,p){(function(t){(function(){c.exports=g;var n=o("gl-buffer"),a=o("gl-vao"),i=o("vectorize-text"),r=o("./shaders").text,f=window||t.global||{},u=f.__TEXT_CACHE||{};f.__TEXT_CACHE={};var s=3;function h(x,A,b,S){this.gl=x,this.shader=A,this.buffer=b,this.vao=S,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var d=h.prototype,y=[0,0];d.bind=function(x,A,b,S){this.vao.bind(),this.shader.bind();var w=this.shader.uniforms;w.model=x,w.view=A,w.projection=b,w.pixelScale=S,y[0]=this.gl.drawingBufferWidth,y[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=y},d.unbind=function(){this.vao.unbind()},d.update=function(x,A,b,S,w){var T=[];function _(F,V,U,j,Z,te){var re=u[U];re||(re=u[U]={});var W=re[V];W||(W=re[V]=m(V,{triangles:!0,font:U,textAlign:"center",textBaseline:"middle",lineSpacing:Z,styletags:te}));for(var J=(j||12)/12,le=W.positions,ue=W.cells,se=0,G=ue.length;se<G;++se)for(var Y=ue[se],ee=2;ee>=0;--ee){var $=le[Y[ee]];T.push(J*$[0],-J*$[1],F)}}for(var v=[0,0,0],P=[0,0,0],M=[0,0,0],E=[0,0,0],D=1.25,N={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},O=0;O<3;++O){M[O]=T.length/s|0,_(.5*(x[0][O]+x[1][O]),A[O],b[O],12,D,N),E[O]=(T.length/s|0)-M[O],v[O]=T.length/s|0;for(var I=0;I<S[O].length;++I)!S[O][I].text||_(S[O][I].x,S[O][I].text,S[O][I].font||w,S[O][I].fontSize||12,D,N);P[O]=(T.length/s|0)-v[O]}this.buffer.update(T),this.tickOffset=v,this.tickCount=P,this.labelOffset=M,this.labelCount=E},d.drawTicks=function(x,A,b,S,w,T,_,v){!this.tickCount[x]||(this.shader.uniforms.axis=T,this.shader.uniforms.color=w,this.shader.uniforms.angle=b,this.shader.uniforms.scale=A,this.shader.uniforms.offset=S,this.shader.uniforms.alignDir=_,this.shader.uniforms.alignOpt=v,this.vao.draw(this.gl.TRIANGLES,this.tickCount[x],this.tickOffset[x]))},d.drawLabel=function(x,A,b,S,w,T,_,v){!this.labelCount[x]||(this.shader.uniforms.axis=T,this.shader.uniforms.color=w,this.shader.uniforms.angle=b,this.shader.uniforms.scale=A,this.shader.uniforms.offset=S,this.shader.uniforms.alignDir=_,this.shader.uniforms.alignOpt=v,this.vao.draw(this.gl.TRIANGLES,this.labelCount[x],this.labelOffset[x]))},d.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function m(x,A){try{return i(x,A)}catch(b){return console.warn('error vectorizing text:"'+x+'" error:',b),{cells:[],positions:[]}}}function g(x,A,b,S,w,T){var _=n(x),v=a(x,[{buffer:_,size:3}]),P=r(x);P.attributes.position.location=0;var M=new h(x,P,_,v);return M.update(A,b,S,w,T),M}}).call(this)}).call(this,o("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(o,c,p){p.create=n,p.equal=a;function t(i,r){var f=i+"",u=f.indexOf("."),s=0;u>=0&&(s=f.length-u-1);var h=Math.pow(10,s),d=Math.round(i*r*h),y=d+"";if(y.indexOf("e")>=0)return y;var m=d/h,g=d%h;d<0?(m=-Math.ceil(m)|0,g=-g|0):(m=Math.floor(m)|0,g=g|0);var x=""+m;if(d<0&&(x="-"+x),s){for(var A=""+g;A.length<s;)A="0"+A;return x+"."+A}else return x}function n(i,r){for(var f=[],u=0;u<3;++u){var s=[];.5*(i[0][u]+i[1][u]);for(var h=0;h*r[u]<=i[1][u];++h)s.push({x:h*r[u],text:t(r[u],h)});for(var h=-1;h*r[u]>=i[0][u];--h)s.push({x:h*r[u],text:t(r[u],h)});f.push(s)}return f}function a(i,r){for(var f=0;f<3;++f){if(i[f].length!==r[f].length)return!1;for(var u=0;u<i[f].length;++u){var s=i[f][u],h=r[f][u];if(s.x!==h.x||s.text!==h.text||s.font!==h.font||s.fontColor!==h.fontColor||s.fontSize!==h.fontSize||s.dx!==h.dx||s.dy!==h.dy)return!1}}return!0}},{}],77:[function(o,c,p){c.exports=A;var t=o("extract-frustum-planes"),n=o("split-polygon"),a=o("./lib/cube.js"),i=o("gl-mat4/multiply"),r=o("gl-mat4/transpose"),f=o("gl-vec4/transformMat4"),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),s=new Float32Array(16);function h(b,S,w){this.lo=b,this.hi=S,this.pixelsPerDataUnit=w}var d=[0,0,0,1],y=[0,0,0,1];function m(b,S,w,T,_){for(var v=0;v<3;++v){for(var P=d,M=y,E=0;E<3;++E)M[E]=P[E]=w[E];M[3]=P[3]=1,M[v]+=1,f(M,M,S),M[3]<0&&(b[v]=1/0),P[v]-=1,f(P,P,S),P[3]<0&&(b[v]=1/0);var D=(P[0]/P[3]-M[0]/M[3])*T,N=(P[1]/P[3]-M[1]/M[3])*_;b[v]=.25*Math.sqrt(D*D+N*N)}return b}var g=[new h(1/0,-1/0,1/0),new h(1/0,-1/0,1/0),new h(1/0,-1/0,1/0)],x=[0,0,0];function A(b,S,w,T,_){var v=S.model||u,P=S.view||u,M=S.projection||u,E=S._ortho||!1,D=b.bounds,_=_||a(v,P,M,D,E),N=_.axis;i(s,P,v),i(s,M,s);for(var O=g,I=0;I<3;++I)O[I].lo=1/0,O[I].hi=-1/0,O[I].pixelsPerDataUnit=1/0;var F=t(r(s,s));r(s,s);for(var V=0;V<3;++V){var U=(V+1)%3,j=(V+2)%3,Z=x;e:for(var I=0;I<2;++I){var te=[];if(N[V]<0!=!!I){Z[V]=D[I][V];for(var re=0;re<2;++re){Z[U]=D[re^I][U];for(var W=0;W<2;++W)Z[j]=D[W^re^I][j],te.push(Z.slice())}for(var J=E?5:4,re=J;re===J;++re){if(te.length===0)continue e;te=n.positive(te,F[re])}for(var re=0;re<te.length;++re)for(var j=te[re],le=m(x,s,j,w,T),W=0;W<3;++W)O[W].lo=Math.min(O[W].lo,j[W]),O[W].hi=Math.max(O[W].hi,j[W]),W!==V&&(O[W].pixelsPerDataUnit=Math.min(O[W].pixelsPerDataUnit,Math.abs(le[W])))}}}return O}},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(o,c,p){var t=o("typedarray-pool"),n=o("ndarray-ops"),a=o("ndarray"),i=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function r(y,m,g,x,A){this.gl=y,this.type=m,this.handle=g,this.length=x,this.usage=A}var f=r.prototype;f.bind=function(){this.gl.bindBuffer(this.type,this.handle)},f.unbind=function(){this.gl.bindBuffer(this.type,null)},f.dispose=function(){this.gl.deleteBuffer(this.handle)};function u(y,m,g,x,A,b){var S=A.length*A.BYTES_PER_ELEMENT;if(b<0)return y.bufferData(m,A,x),S;if(S+b>g)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return y.bufferSubData(m,b,A),g}function s(y,m){for(var g=t.malloc(y.length,m),x=y.length,A=0;A<x;++A)g[A]=y[A];return g}function h(y,m){for(var g=1,x=m.length-1;x>=0;--x){if(m[x]!==g)return!1;g*=y[x]}return!0}f.update=function(y,m){if(typeof m!="number"&&(m=-1),this.bind(),typeof y=="object"&&typeof y.shape!="undefined"){var g=y.dtype;if(i.indexOf(g)<0&&(g="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var x=gl.getExtension("OES_element_index_uint");x&&g!=="uint16"?g="uint32":g="uint16"}if(g===y.dtype&&h(y.shape,y.stride))y.offset===0&&y.data.length===y.shape[0]?this.length=u(this.gl,this.type,this.length,this.usage,y.data,m):this.length=u(this.gl,this.type,this.length,this.usage,y.data.subarray(y.offset,y.shape[0]),m);else{var A=t.malloc(y.size,g),b=a(A,y.shape);n.assign(b,y),m<0?this.length=u(this.gl,this.type,this.length,this.usage,A,m):this.length=u(this.gl,this.type,this.length,this.usage,A.subarray(0,y.size),m),t.free(A)}}else if(Array.isArray(y)){var S;this.type===this.gl.ELEMENT_ARRAY_BUFFER?S=s(y,"uint16"):S=s(y,"float32"),m<0?this.length=u(this.gl,this.type,this.length,this.usage,S,m):this.length=u(this.gl,this.type,this.length,this.usage,S.subarray(0,y.length),m),t.free(S)}else if(typeof y=="object"&&typeof y.length=="number")this.length=u(this.gl,this.type,this.length,this.usage,y,m);else if(typeof y=="number"||y===void 0){if(m>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");y=y|0,y<=0&&(y=1),this.gl.bufferData(this.type,y|0,this.usage),this.length=y}else throw new Error("gl-buffer: Invalid data type")};function d(y,m,g,x){if(g=g||y.ARRAY_BUFFER,x=x||y.DYNAMIC_DRAW,g!==y.ARRAY_BUFFER&&g!==y.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(x!==y.DYNAMIC_DRAW&&x!==y.STATIC_DRAW&&x!==y.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var A=y.createBuffer(),b=new r(y,g,A,0,x);return b.update(m),b}c.exports=d},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(o,c,p){var t=o("gl-vec3");c.exports=function(a,i){var r=a.positions,f=a.vectors,u={positions:[],vertexIntensity:[],vertexIntensityBounds:a.vertexIntensityBounds,vectors:[],cells:[],coneOffset:a.coneOffset,colormap:a.colormap};if(a.positions.length===0)return i&&(i[0]=[0,0,0],i[1]=[0,0,0]),u;for(var s=0,h=1/0,d=-1/0,y=1/0,m=-1/0,g=1/0,x=-1/0,A=null,b=null,S=[],w=1/0,T=!1,_=0;_<r.length;_++){var v=r[_];h=Math.min(v[0],h),d=Math.max(v[0],d),y=Math.min(v[1],y),m=Math.max(v[1],m),g=Math.min(v[2],g),x=Math.max(v[2],x);var P=f[_];if(t.length(P)>s&&(s=t.length(P)),_){var M=2*t.distance(A,v)/(t.length(b)+t.length(P));M?(w=Math.min(w,M),T=!1):T=!0}T||(A=v,b=P),S.push(P)}var E=[h,y,g],D=[d,m,x];i&&(i[0]=E,i[1]=D),s===0&&(s=1);var N=1/s;isFinite(w)||(w=1),u.vectorScale=w;var O=a.coneSize||.5;a.absoluteConeSize&&(O=a.absoluteConeSize*N),u.coneScale=O;for(var _=0,I=0;_<r.length;_++)for(var v=r[_],F=v[0],V=v[1],U=v[2],j=S[_],Z=t.length(j)*N,te=0,re=8;te<re;te++){u.positions.push([F,V,U,I++]),u.positions.push([F,V,U,I++]),u.positions.push([F,V,U,I++]),u.positions.push([F,V,U,I++]),u.positions.push([F,V,U,I++]),u.positions.push([F,V,U,I++]),u.vectors.push(j),u.vectors.push(j),u.vectors.push(j),u.vectors.push(j),u.vectors.push(j),u.vectors.push(j),u.vertexIntensity.push(Z,Z,Z),u.vertexIntensity.push(Z,Z,Z);var W=u.positions.length;u.cells.push([W-6,W-5,W-4],[W-3,W-2,W-1])}return u};var n=o("./lib/shaders");c.exports.createMesh=o("./create_mesh"),c.exports.createConeMesh=function(a,i){return c.exports.createMesh(a,i,{shaders:n,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(o,c,p){var t=o("gl-shader"),n=o("gl-buffer"),a=o("gl-vao"),i=o("gl-texture2d"),r=o("gl-mat4/multiply"),f=o("gl-mat4/invert"),u=o("ndarray"),s=o("colormap"),h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(S,w,T,_,v,P,M,E,D,N,O){this.gl=S,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=w,this.dirty=!0,this.triShader=T,this.pickShader=_,this.trianglePositions=v,this.triangleVectors=P,this.triangleColors=E,this.triangleUVs=D,this.triangleIds=M,this.triangleVAO=N,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=O,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=h,this._view=h,this._projection=h,this._resolution=[1,1]}var y=d.prototype;y.isOpaque=function(){return this.opacity>=1},y.isTransparent=function(){return this.opacity<1},y.pickSlots=1,y.setPickBase=function(S){this.pickId=S};function m(S){for(var w=s({colormap:S,nshades:256,format:"rgba"}),T=new Uint8Array(256*4),_=0;_<256;++_){for(var v=w[_],P=0;P<3;++P)T[4*_+P]=v[P];T[4*_+3]=v[3]*255}return u(T,[256,256,4],[4,0,1])}function g(S){for(var w=S.length,T=new Array(w),_=0;_<w;++_)T[_]=S[_][2];return T}y.update=function(S){S=S||{};var w=this.gl;this.dirty=!0,"lightPosition"in S&&(this.lightPosition=S.lightPosition),"opacity"in S&&(this.opacity=S.opacity),"ambient"in S&&(this.ambientLight=S.ambient),"diffuse"in S&&(this.diffuseLight=S.diffuse),"specular"in S&&(this.specularLight=S.specular),"roughness"in S&&(this.roughness=S.roughness),"fresnel"in S&&(this.fresnel=S.fresnel),S.tubeScale!==void 0&&(this.tubeScale=S.tubeScale),S.vectorScale!==void 0&&(this.vectorScale=S.vectorScale),S.coneScale!==void 0&&(this.coneScale=S.coneScale),S.coneOffset!==void 0&&(this.coneOffset=S.coneOffset),S.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=w.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=w.LINEAR,this.texture.setPixels(m(S.colormap)),this.texture.generateMipmap());var T=S.cells,_=S.positions,v=S.vectors;if(!_||!T||!v)return;var P=[],M=[],E=[],D=[],N=[];this.cells=T,this.positions=_,this.vectors=v;var O=S.meshColor||[1,1,1,1],I=S.vertexIntensity,F=1/0,V=-1/0;if(I)if(S.vertexIntensityBounds)F=+S.vertexIntensityBounds[0],V=+S.vertexIntensityBounds[1];else for(var U=0;U<I.length;++U){var j=I[U];F=Math.min(F,j),V=Math.max(V,j)}else for(var U=0;U<_.length;++U){var j=_[U][2];F=Math.min(F,j),V=Math.max(V,j)}I?this.intensity=I:this.intensity=g(_),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var U=0;U<_.length;++U)for(var Z=_[U],te=0;te<3;++te)isNaN(Z[te])||!isFinite(Z[te])||(this.bounds[0][te]=Math.min(this.bounds[0][te],Z[te]),this.bounds[1][te]=Math.max(this.bounds[1][te],Z[te]));var re=0;e:for(var U=0;U<T.length;++U){var W=T[U];switch(W.length){case 3:for(var te=0;te<3;++te)for(var J=W[te],Z=_[J],le=0;le<3;++le)if(isNaN(Z[le])||!isFinite(Z[le]))continue e;for(var te=0;te<3;++te){var J=W[2-te],Z=_[J];P.push(Z[0],Z[1],Z[2],Z[3]);var ue=v[J];M.push(ue[0],ue[1],ue[2],ue[3]||0);var se=O;se.length===3?E.push(se[0],se[1],se[2],1):E.push(se[0],se[1],se[2],se[3]);var G;I?G=[(I[J]-F)/(V-F),0]:G=[(Z[2]-F)/(V-F),0],D.push(G[0],G[1]),N.push(U)}re+=1;break}}this.triangleCount=re,this.trianglePositions.update(P),this.triangleVectors.update(M),this.triangleColors.update(E),this.triangleUVs.update(D),this.triangleIds.update(new Uint32Array(N))},y.drawTransparent=y.draw=function(S){S=S||{};for(var w=this.gl,T=S.model||h,_=S.view||h,v=S.projection||h,P=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],M=0;M<3;++M)P[0][M]=Math.max(P[0][M],this.clipBounds[0][M]),P[1][M]=Math.min(P[1][M],this.clipBounds[1][M]);var E={model:T,view:_,projection:v,inverseModel:h.slice(),clipBounds:P,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};E.inverseModel=f(E.inverseModel,E.model),w.disable(w.CULL_FACE),this.texture.bind(0);var D=new Array(16);r(D,E.view,E.model),r(D,E.projection,D),f(D,D);for(var M=0;M<3;++M)E.eyePosition[M]=D[12+M]/D[15];for(var N=D[15],M=0;M<3;++M)N+=this.lightPosition[M]*D[4*M+3];for(var M=0;M<3;++M){for(var O=D[12+M],I=0;I<3;++I)O+=D[4*I+M]*this.lightPosition[I];E.lightPosition[M]=O/N}if(this.triangleCount>0){var F=this.triShader;F.bind(),F.uniforms=E,this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},y.drawPick=function(S){S=S||{};for(var w=this.gl,T=S.model||h,_=S.view||h,v=S.projection||h,P=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],M=0;M<3;++M)P[0][M]=Math.max(P[0][M],this.clipBounds[0][M]),P[1][M]=Math.min(P[1][M],this.clipBounds[1][M]);this._model=[].slice.call(T),this._view=[].slice.call(_),this._projection=[].slice.call(v),this._resolution=[w.drawingBufferWidth,w.drawingBufferHeight];var E={model:T,view:_,projection:v,clipBounds:P,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},D=this.pickShader;D.bind(),D.uniforms=E,this.triangleCount>0&&(this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},y.pick=function(S){if(!S||S.id!==this.pickId)return null;var w=S.value[0]+256*S.value[1]+65536*S.value[2],T=this.cells[w],_=this.positions[T[1]].slice(0,3),v={position:_,dataCoordinate:_,index:Math.floor(T[1]/48)};return this.traceType==="cone"?v.index=Math.floor(T[1]/48):this.traceType==="streamtube"&&(v.intensity=this.intensity[T[1]],v.velocity=this.vectors[T[1]].slice(0,3),v.divergence=this.vectors[T[1]][3],v.index=w),v},y.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function x(S,w){var T=t(S,w.meshShader.vertex,w.meshShader.fragment,null,w.meshShader.attributes);return T.attributes.position.location=0,T.attributes.color.location=2,T.attributes.uv.location=3,T.attributes.vector.location=4,T}function A(S,w){var T=t(S,w.pickShader.vertex,w.pickShader.fragment,null,w.pickShader.attributes);return T.attributes.position.location=0,T.attributes.id.location=1,T.attributes.vector.location=4,T}function b(S,w,T){var _=T.shaders;arguments.length===1&&(w=S,S=w.gl);var v=x(S,_),P=A(S,_),M=i(S,u(new Uint8Array([255,255,255,255]),[1,1,4]));M.generateMipmap(),M.minFilter=S.LINEAR_MIPMAP_LINEAR,M.magFilter=S.LINEAR;var E=n(S),D=n(S),N=n(S),O=n(S),I=n(S),F=a(S,[{buffer:E,type:S.FLOAT,size:4},{buffer:I,type:S.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:N,type:S.FLOAT,size:4},{buffer:O,type:S.FLOAT,size:2},{buffer:D,type:S.FLOAT,size:4}]),V=new d(S,M,v,P,E,D,I,N,O,F,T.traceType||"cone");return V.update(w),V}c.exports=b},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(o,c,p){var t=o("glslify"),n=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),a=t([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),i=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),r=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);p.meshShader={vertex:n,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},p.pickShader={vertex:i,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(o,c,p){c.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(o,c,p){var t=o("./1.0/numbers");c.exports=function(a){return t[a]}},{"./1.0/numbers":82}],84:[function(o,c,p){c.exports=d;var t=o("gl-buffer"),n=o("gl-vao"),a=o("./shaders/index"),i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(y,m,g,x){this.gl=y,this.shader=x,this.buffer=m,this.vao=g,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var f=r.prototype;f.isOpaque=function(){return!this.hasAlpha},f.isTransparent=function(){return this.hasAlpha},f.drawTransparent=f.draw=function(y){var m=this.gl,g=this.shader.uniforms;this.shader.bind();var x=g.view=y.view||i,A=g.projection=y.projection||i;g.model=y.model||i,g.clipBounds=this.clipBounds,g.opacity=this.opacity;var b=x[12],S=x[13],w=x[14],T=x[15],_=y._ortho||!1,v=_?2:1,P=v*this.pixelRatio*(A[3]*b+A[7]*S+A[11]*w+A[15]*T)/m.drawingBufferHeight;this.vao.bind();for(var M=0;M<3;++M)m.lineWidth(this.lineWidth[M]*this.pixelRatio),g.capSize=this.capSize[M]*P,this.lineCount[M]&&m.drawArrays(m.LINES,this.lineOffset[M],this.lineCount[M]);this.vao.unbind()};function u(y,m){for(var g=0;g<3;++g)y[0][g]=Math.min(y[0][g],m[g]),y[1][g]=Math.max(y[1][g],m[g])}var s=function(){for(var y=new Array(3),m=0;m<3;++m){for(var g=[],x=1;x<=2;++x)for(var A=-1;A<=1;A+=2){var b=(x+m)%3,S=[0,0,0];S[b]=A,g.push(S)}y[m]=g}return y}();function h(y,m,g,x){for(var A=s[x],b=0;b<A.length;++b){var S=A[b];y.push(m[0],m[1],m[2],g[0],g[1],g[2],g[3],S[0],S[1],S[2])}return A.length}f.update=function(y){y=y||{},"lineWidth"in y&&(this.lineWidth=y.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in y&&(this.capSize=y.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in y&&(this.opacity=+y.opacity,this.opacity<1&&(this.hasAlpha=!0));var m=y.color||[[0,0,0],[0,0,0],[0,0,0]],g=y.position,x=y.error;if(Array.isArray(m[0])||(m=[m,m,m]),g&&x){var A=[],b=g.length,S=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var w=0;w<3;++w){this.lineOffset[w]=S;e:for(var T=0;T<b;++T){for(var _=g[T],v=0;v<3;++v)if(isNaN(_[v])||!isFinite(_[v]))continue e;var P=x[T],M=m[w];if(Array.isArray(M[0])&&(M=m[T]),M.length===3?M=[M[0],M[1],M[2],1]:M.length===4&&(M=[M[0],M[1],M[2],M[3]],!this.hasAlpha&&M[3]<1&&(this.hasAlpha=!0)),!(isNaN(P[0][w])||isNaN(P[1][w]))){if(P[0][w]<0){var E=_.slice();E[w]+=P[0][w],A.push(_[0],_[1],_[2],M[0],M[1],M[2],M[3],0,0,0,E[0],E[1],E[2],M[0],M[1],M[2],M[3],0,0,0),u(this.bounds,E),S+=2+h(A,E,M,w)}if(P[1][w]>0){var E=_.slice();E[w]+=P[1][w],A.push(_[0],_[1],_[2],M[0],M[1],M[2],M[3],0,0,0,E[0],E[1],E[2],M[0],M[1],M[2],M[3],0,0,0),u(this.bounds,E),S+=2+h(A,E,M,w)}}}this.lineCount[w]=S-this.lineOffset[w]}this.buffer.update(A)}},f.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function d(y){var m=y.gl,g=t(m),x=n(m,[{buffer:g,type:m.FLOAT,size:3,offset:0,stride:40},{buffer:g,type:m.FLOAT,size:4,offset:12,stride:40},{buffer:g,type:m.FLOAT,size:3,offset:28,stride:40}]),A=a(m);A.attributes.position.location=0,A.attributes.color.location=1,A.attributes.offset.location=2;var b=new r(m,g,x,A);return b.update(y),b}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(o,c,p){var t=o("glslify"),n=o("gl-shader"),a=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),i=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);c.exports=function(r){return n(r,a,i,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(o,c,p){var t=o("gl-texture2d");c.exports=S;var n=null,a,i,r,f;function u(w){var T=w.getParameter(w.FRAMEBUFFER_BINDING),_=w.getParameter(w.RENDERBUFFER_BINDING),v=w.getParameter(w.TEXTURE_BINDING_2D);return[T,_,v]}function s(w,T){w.bindFramebuffer(w.FRAMEBUFFER,T[0]),w.bindRenderbuffer(w.RENDERBUFFER,T[1]),w.bindTexture(w.TEXTURE_2D,T[2])}function h(w,T){var _=w.getParameter(T.MAX_COLOR_ATTACHMENTS_WEBGL);n=new Array(_+1);for(var v=0;v<=_;++v){for(var P=new Array(_),M=0;M<v;++M)P[M]=w.COLOR_ATTACHMENT0+M;for(var M=v;M<_;++M)P[M]=w.NONE;n[v]=P}}function d(w){switch(w){case a:throw new Error("gl-fbo: Framebuffer unsupported");case i:throw new Error("gl-fbo: Framebuffer incomplete attachment");case r:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case f:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function y(w,T,_,v,P,M){if(!v)return null;var E=t(w,T,_,P,v);return E.magFilter=w.NEAREST,E.minFilter=w.NEAREST,E.mipSamples=1,E.bind(),w.framebufferTexture2D(w.FRAMEBUFFER,M,w.TEXTURE_2D,E.handle,0),E}function m(w,T,_,v,P){var M=w.createRenderbuffer();return w.bindRenderbuffer(w.RENDERBUFFER,M),w.renderbufferStorage(w.RENDERBUFFER,v,T,_),w.framebufferRenderbuffer(w.FRAMEBUFFER,P,w.RENDERBUFFER,M),M}function g(w){var T=u(w.gl),_=w.gl,v=w.handle=_.createFramebuffer(),P=w._shape[0],M=w._shape[1],E=w.color.length,D=w._ext,N=w._useStencil,O=w._useDepth,I=w._colorType;_.bindFramebuffer(_.FRAMEBUFFER,v);for(var F=0;F<E;++F)w.color[F]=y(_,P,M,I,_.RGBA,_.COLOR_ATTACHMENT0+F);E===0?(w._color_rb=m(_,P,M,_.RGBA4,_.COLOR_ATTACHMENT0),D&&D.drawBuffersWEBGL(n[0])):E>1&&D.drawBuffersWEBGL(n[E]);var V=_.getExtension("WEBGL_depth_texture");V?N?w.depth=y(_,P,M,V.UNSIGNED_INT_24_8_WEBGL,_.DEPTH_STENCIL,_.DEPTH_STENCIL_ATTACHMENT):O&&(w.depth=y(_,P,M,_.UNSIGNED_SHORT,_.DEPTH_COMPONENT,_.DEPTH_ATTACHMENT)):O&&N?w._depth_rb=m(_,P,M,_.DEPTH_STENCIL,_.DEPTH_STENCIL_ATTACHMENT):O?w._depth_rb=m(_,P,M,_.DEPTH_COMPONENT16,_.DEPTH_ATTACHMENT):N&&(w._depth_rb=m(_,P,M,_.STENCIL_INDEX,_.STENCIL_ATTACHMENT));var U=_.checkFramebufferStatus(_.FRAMEBUFFER);if(U!==_.FRAMEBUFFER_COMPLETE){w._destroyed=!0,_.bindFramebuffer(_.FRAMEBUFFER,null),_.deleteFramebuffer(w.handle),w.handle=null,w.depth&&(w.depth.dispose(),w.depth=null),w._depth_rb&&(_.deleteRenderbuffer(w._depth_rb),w._depth_rb=null);for(var F=0;F<w.color.length;++F)w.color[F].dispose(),w.color[F]=null;w._color_rb&&(_.deleteRenderbuffer(w._color_rb),w._color_rb=null),s(_,T),d(U)}s(_,T)}function x(w,T,_,v,P,M,E,D){this.gl=w,this._shape=[T|0,_|0],this._destroyed=!1,this._ext=D,this.color=new Array(P);for(var N=0;N<P;++N)this.color[N]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=v,this._useDepth=M,this._useStencil=E;var O=this,I=[T|0,_|0];Object.defineProperties(I,{0:{get:function(){return O._shape[0]},set:function(F){return O.width=F}},1:{get:function(){return O._shape[1]},set:function(F){return O.height=F}}}),this._shapeVector=I,g(this)}var A=x.prototype;function b(w,T,_){if(w._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(w._shape[0]===T&&w._shape[1]===_)){var v=w.gl,P=v.getParameter(v.MAX_RENDERBUFFER_SIZE);if(T<0||T>P||_<0||_>P)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");w._shape[0]=T,w._shape[1]=_;for(var M=u(v),E=0;E<w.color.length;++E)w.color[E].shape=w._shape;w._color_rb&&(v.bindRenderbuffer(v.RENDERBUFFER,w._color_rb),v.renderbufferStorage(v.RENDERBUFFER,v.RGBA4,w._shape[0],w._shape[1])),w.depth&&(w.depth.shape=w._shape),w._depth_rb&&(v.bindRenderbuffer(v.RENDERBUFFER,w._depth_rb),w._useDepth&&w._useStencil?v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH_STENCIL,w._shape[0],w._shape[1]):w._useDepth?v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH_COMPONENT16,w._shape[0],w._shape[1]):w._useStencil&&v.renderbufferStorage(v.RENDERBUFFER,v.STENCIL_INDEX,w._shape[0],w._shape[1])),v.bindFramebuffer(v.FRAMEBUFFER,w.handle);var D=v.checkFramebufferStatus(v.FRAMEBUFFER);D!==v.FRAMEBUFFER_COMPLETE&&(w.dispose(),s(v,M),d(D)),s(v,M)}}Object.defineProperties(A,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(w){if(Array.isArray(w)||(w=[w|0,w|0]),w.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var T=w[0]|0,_=w[1]|0;return b(this,T,_),[T,_]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(w){return w=w|0,b(this,w,this._shape[1]),w},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(w){return w=w|0,b(this,this._shape[0],w),w},enumerable:!1}}),A.bind=function(){if(!this._destroyed){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,this.handle),w.viewport(0,0,this._shape[0],this._shape[1])}},A.dispose=function(){if(!this._destroyed){this._destroyed=!0;var w=this.gl;w.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(w.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var T=0;T<this.color.length;++T)this.color[T].dispose(),this.color[T]=null;this._color_rb&&(w.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function S(w,T,_,v){a||(a=w.FRAMEBUFFER_UNSUPPORTED,i=w.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,r=w.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,f=w.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var P=w.getExtension("WEBGL_draw_buffers");if(!n&&P&&h(w,P),Array.isArray(T)&&(v=_,_=T[1]|0,T=T[0]|0),typeof T!="number")throw new Error("gl-fbo: Missing shape parameter");var M=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(T<0||T>M||_<0||_>M)throw new Error("gl-fbo: Parameters are too large for FBO");v=v||{};var E=1;if("color"in v){if(E=Math.max(v.color|0,0),E<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(E>1)if(P){if(E>w.getParameter(P.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+E+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var D=w.UNSIGNED_BYTE,N=w.getExtension("OES_texture_float");if(v.float&&E>0){if(!N)throw new Error("gl-fbo: Context does not support floating point textures");D=w.FLOAT}else v.preferFloat&&E>0&&N&&(D=w.FLOAT);var O=!0;"depth"in v&&(O=!!v.depth);var I=!1;return"stencil"in v&&(I=!!v.stencil),new x(w,T,_,D,E,O,I,P)}},{"gl-texture2d":146}],87:[function(o,c,p){var t=o("sprintf-js").sprintf,n=o("gl-constants/lookup"),a=o("glsl-shader-name"),i=o("add-line-numbers");c.exports=r;function r(f,u,s){var h=a(u)||"of unknown name (see npm glsl-shader-name)",d="unknown type";s!==void 0&&(d=s===n.FRAGMENT_SHADER?"fragment":"vertex");for(var y=t(`Error compiling %s shader %s:
`,d,h),m=t("%s%s",y,f),g=f.split(`
`),x={},A=0;A<g.length;A++){var b=g[A];if(!(b===""||b==="\0")){var S=parseInt(b.split(":")[2]);if(isNaN(S))throw new Error(t("Could not parse error: %s",b));x[S]=b}}for(var w=i(u).split(`
`),A=0;A<w.length;A++)if(!(!x[A+3]&&!x[A+2]&&!x[A+1])){var T=w[A];if(y+=T+`
`,x[A+1]){var _=x[A+1];_=_.substr(_.split(":",3).join(":").length+1).trim(),y+=t(`^^^ %s

`,_)}}return{long:y.trim(),short:m.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(o,c,p){c.exports=d;var t=o("binary-search-bounds"),n=o("iota-array"),a=o("typedarray-pool"),i=o("gl-shader"),r=o("gl-buffer"),f=o("./lib/shaders");function u(y,m,g,x,A,b,S){this.plot=y,this.shader=m,this.pickShader=g,this.positionBuffer=x,this.weightBuffer=A,this.colorBuffer=b,this.idBuffer=S,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var s=u.prototype,h=[0,0,1,0,0,1,1,0,1,1,0,1];s.draw=function(){var y=[1,0,0,0,1,0,0,0,1];return function(){var m=this.plot,g=this.shader,x=this.bounds,A=this.numVertices;if(!(A<=0)){var b=m.gl,S=m.dataBox,w=x[2]-x[0],T=x[3]-x[1],_=S[2]-S[0],v=S[3]-S[1];y[0]=2*w/_,y[4]=2*T/v,y[6]=2*(x[0]-S[0])/_-1,y[7]=2*(x[1]-S[1])/v-1,g.bind();var P=g.uniforms;P.viewTransform=y,P.shape=this.shape;var M=g.attributes;this.positionBuffer.bind(),M.position.pointer(),this.weightBuffer.bind(),M.weight.pointer(b.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),M.color.pointer(b.UNSIGNED_BYTE,!0),b.drawArrays(b.TRIANGLES,0,A)}}}(),s.drawPick=function(){var y=[1,0,0,0,1,0,0,0,1],m=[0,0,0,0];return function(g){var x=this.plot,A=this.pickShader,b=this.bounds,S=this.numVertices;if(!(S<=0)){var w=x.gl,T=x.dataBox,_=b[2]-b[0],v=b[3]-b[1],P=T[2]-T[0],M=T[3]-T[1];y[0]=2*_/P,y[4]=2*v/M,y[6]=2*(b[0]-T[0])/P-1,y[7]=2*(b[1]-T[1])/M-1;for(var E=0;E<4;++E)m[E]=g>>E*8&255;this.pickOffset=g,A.bind();var D=A.uniforms;D.viewTransform=y,D.pickOffset=m,D.shape=this.shape;var N=A.attributes;return this.positionBuffer.bind(),N.position.pointer(),this.weightBuffer.bind(),N.weight.pointer(w.UNSIGNED_BYTE,!1),this.idBuffer.bind(),N.pickId.pointer(w.UNSIGNED_BYTE,!1),w.drawArrays(w.TRIANGLES,0,S),g+this.shape[0]*this.shape[1]}}}(),s.pick=function(y,m,g){var x=this.pickOffset,A=this.shape[0]*this.shape[1];if(g<x||g>=x+A)return null;var b=g-x,S=this.xData,w=this.yData;return{object:this,pointId:b,dataCoord:[S[b%this.shape[0]],w[b/this.shape[0]|0]]}},s.update=function(y){y=y||{};var m=y.shape||[0,0],g=y.x||n(m[0]),x=y.y||n(m[1]),A=y.z||new Float32Array(m[0]*m[1]),b=y.zsmooth!==!1;this.xData=g,this.yData=x;var S=y.colorLevels||[0],w=y.colorValues||[0,0,0,1],T=S.length,_=this.bounds,v,P,M,E;b?(v=_[0]=g[0],P=_[1]=x[0],M=_[2]=g[g.length-1],E=_[3]=x[x.length-1]):(v=_[0]=g[0]+(g[1]-g[0])/2,P=_[1]=x[0]+(x[1]-x[0])/2,M=_[2]=g[g.length-1]+(g[g.length-1]-g[g.length-2])/2,E=_[3]=x[x.length-1]+(x[x.length-1]-x[x.length-2])/2);var D=1/(M-v),N=1/(E-P),O=m[0],I=m[1];this.shape=[O,I];var F=(b?(O-1)*(I-1):O*I)*(h.length>>>1);this.numVertices=F;for(var V=a.mallocUint8(F*4),U=a.mallocFloat32(F*2),j=a.mallocUint8(F*2),Z=a.mallocUint32(F),te=0,re=b?O-1:O,W=b?I-1:I,J=0;J<W;++J){var le,ue;b?(le=N*(x[J]-P),ue=N*(x[J+1]-P)):(le=J<I-1?N*(x[J]-(x[J+1]-x[J])/2-P):N*(x[J]-(x[J]-x[J-1])/2-P),ue=J<I-1?N*(x[J]+(x[J+1]-x[J])/2-P):N*(x[J]+(x[J]-x[J-1])/2-P));for(var se=0;se<re;++se){var G,Y;b?(G=D*(g[se]-v),Y=D*(g[se+1]-v)):(G=se<O-1?D*(g[se]-(g[se+1]-g[se])/2-v):D*(g[se]-(g[se]-g[se-1])/2-v),Y=se<O-1?D*(g[se]+(g[se+1]-g[se])/2-v):D*(g[se]+(g[se]-g[se-1])/2-v));for(var ee=0;ee<h.length;ee+=2){var $=h[ee],K=h[ee+1],Q=b?(J+K)*O+(se+$):J*O+se,ae=A[Q],ie=t.le(S,ae),oe,fe,ye,ce;if(ie<0)oe=w[0],fe=w[1],ye=w[2],ce=w[3];else if(ie===T-1)oe=w[4*T-4],fe=w[4*T-3],ye=w[4*T-2],ce=w[4*T-1];else{var me=(ae-S[ie])/(S[ie+1]-S[ie]),xe=1-me,ke=4*ie,Ae=4*(ie+1);oe=xe*w[ke]+me*w[Ae],fe=xe*w[ke+1]+me*w[Ae+1],ye=xe*w[ke+2]+me*w[Ae+2],ce=xe*w[ke+3]+me*w[Ae+3]}V[4*te]=255*oe,V[4*te+1]=255*fe,V[4*te+2]=255*ye,V[4*te+3]=255*ce,U[2*te]=G*.5+Y*.5,U[2*te+1]=le*.5+ue*.5,j[2*te]=$,j[2*te+1]=K,Z[te]=J*O+se,te+=1}}}this.positionBuffer.update(U),this.weightBuffer.update(j),this.colorBuffer.update(V),this.idBuffer.update(Z),a.free(U),a.free(V),a.free(j),a.free(Z)},s.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function d(y,m){var g=y.gl,x=i(g,f.vertex,f.fragment),A=i(g,f.pickVertex,f.pickFragment),b=r(g),S=r(g),w=r(g),T=r(g),_=new u(y,x,A,b,S,w,T);return _.update(m),y.addObject(_),_}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(o,c,p){var t=o("glslify");c.exports={fragment:t([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:t([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:231}],90:[function(o,c,p){var t=o("glslify"),n=o("gl-shader"),a=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),i=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),r=t([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),f=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];p.createShader=function(u){return n(u,a,i,null,f)},p.createPickShader=function(u){return n(u,a,r,null,f)}},{"gl-shader":132,glslify:231}],91:[function(o,c,p){c.exports=w;var t=o("gl-buffer"),n=o("gl-vao"),a=o("gl-texture2d"),i=new Uint8Array(4),r=new Float32Array(i.buffer);function f(T,_,v,P){return i[0]=P,i[1]=v,i[2]=_,i[3]=T,r[0]}var u=o("binary-search-bounds"),s=o("ndarray"),h=o("./lib/shaders"),d=h.createShader,y=h.createPickShader,m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(T,_){for(var v=0,P=0;P<3;++P){var M=T[P]-_[P];v+=M*M}return Math.sqrt(v)}function x(T){for(var _=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],v=0;v<3;++v)_[0][v]=Math.max(T[0][v],_[0][v]),_[1][v]=Math.min(T[1][v],_[1][v]);return _}function A(T,_,v,P){this.arcLength=T,this.position=_,this.index=v,this.dataCoordinate=P}function b(T,_,v,P,M,E){this.gl=T,this.shader=_,this.pickShader=v,this.buffer=P,this.vao=M,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=E,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var S=b.prototype;S.isTransparent=function(){return this.hasAlpha},S.isOpaque=function(){return!this.hasAlpha},S.pickSlots=1,S.setPickBase=function(T){this.pickId=T},S.drawTransparent=S.draw=function(T){if(!!this.vertexCount){var _=this.gl,v=this.shader,P=this.vao;v.bind(),v.uniforms={model:T.model||m,view:T.view||m,projection:T.projection||m,clipBounds:x(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(_.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},S.drawPick=function(T){if(!!this.vertexCount){var _=this.gl,v=this.pickShader,P=this.vao;v.bind(),v.uniforms={model:T.model||m,view:T.view||m,projection:T.projection||m,pickId:this.pickId,clipBounds:x(this.clipBounds),screenShape:[_.drawingBufferWidth,_.drawingBufferHeight],pixelRatio:this.pixelRatio},P.bind(),P.draw(_.TRIANGLE_STRIP,this.vertexCount),P.unbind()}},S.update=function(T){var _,v;this.dirty=!0;var P=!!T.connectGaps;"dashScale"in T&&(this.dashScale=T.dashScale),this.hasAlpha=!1,"opacity"in T&&(this.opacity=+T.opacity,this.opacity<1&&(this.hasAlpha=!0));var M=[],E=[],D=[],N=0,O=0,I=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],F=T.position||T.positions;if(F){var V=T.color||T.colors||[0,0,0,1],U=T.lineWidth||1,j=!1;e:for(_=1;_<F.length;++_){var Z=F[_-1],te=F[_];for(E.push(N),D.push(Z.slice()),v=0;v<3;++v){if(isNaN(Z[v])||isNaN(te[v])||!isFinite(Z[v])||!isFinite(te[v])){if(!P&&M.length>0){for(var re=0;re<24;++re)M.push(M[M.length-12]);O+=2,j=!0}continue e}I[0][v]=Math.min(I[0][v],Z[v],te[v]),I[1][v]=Math.max(I[1][v],Z[v],te[v])}var W,J;Array.isArray(V[0])?(W=V.length>_-1?V[_-1]:V.length>0?V[V.length-1]:[0,0,0,1],J=V.length>_?V[_]:V.length>0?V[V.length-1]:[0,0,0,1]):W=J=V,W.length===3&&(W=[W[0],W[1],W[2],1]),J.length===3&&(J=[J[0],J[1],J[2],1]),!this.hasAlpha&&W[3]<1&&(this.hasAlpha=!0);var le;Array.isArray(U)?le=U.length>_-1?U[_-1]:U.length>0?U[U.length-1]:[0,0,0,1]:le=U;var ue=N;if(N+=g(Z,te),j){for(v=0;v<2;++v)M.push(Z[0],Z[1],Z[2],te[0],te[1],te[2],ue,le,W[0],W[1],W[2],W[3]);O+=2,j=!1}M.push(Z[0],Z[1],Z[2],te[0],te[1],te[2],ue,le,W[0],W[1],W[2],W[3],Z[0],Z[1],Z[2],te[0],te[1],te[2],ue,-le,W[0],W[1],W[2],W[3],te[0],te[1],te[2],Z[0],Z[1],Z[2],N,-le,J[0],J[1],J[2],J[3],te[0],te[1],te[2],Z[0],Z[1],Z[2],N,le,J[0],J[1],J[2],J[3]),O+=4}}if(this.buffer.update(M),E.push(N),D.push(F[F.length-1].slice()),this.bounds=I,this.vertexCount=O,this.points=D,this.arcLength=E,"dashes"in T){var se=T.dashes,G=se.slice();for(G.unshift(0),_=1;_<G.length;++_)G[_]=G[_-1]+G[_];var Y=s(new Array(256*4),[256,1,4]);for(_=0;_<256;++_){for(v=0;v<4;++v)Y.set(_,0,v,0);u.le(G,G[G.length-1]*_/255)&1?Y.set(_,0,0,0):Y.set(_,0,0,255)}this.texture.setPixels(Y)}},S.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},S.pick=function(T){if(!T||T.id!==this.pickId)return null;var _=f(T.value[0],T.value[1],T.value[2],0),v=u.le(this.arcLength,_);if(v<0)return null;if(v===this.arcLength.length-1)return new A(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),v);for(var P=this.points[v],M=this.points[Math.min(v+1,this.points.length-1)],E=(_-this.arcLength[v])/(this.arcLength[v+1]-this.arcLength[v]),D=1-E,N=[0,0,0],O=0;O<3;++O)N[O]=D*P[O]+E*M[O];var I=Math.min(E<.5?v:v+1,this.points.length-1);return new A(_,N,I,this.points[I])};function w(T){var _=T.gl||T.scene&&T.scene.gl,v=d(_);v.attributes.position.location=0,v.attributes.nextPosition.location=1,v.attributes.arcLength.location=2,v.attributes.lineWidth.location=3,v.attributes.color.location=4;var P=y(_);P.attributes.position.location=0,P.attributes.nextPosition.location=1,P.attributes.arcLength.location=2,P.attributes.lineWidth.location=3,P.attributes.color.location=4;for(var M=t(_),E=n(_,[{buffer:M,size:3,offset:0,stride:48},{buffer:M,size:3,offset:12,stride:48},{buffer:M,size:1,offset:24,stride:48},{buffer:M,size:1,offset:28,stride:48},{buffer:M,size:4,offset:32,stride:48}]),D=s(new Array(256*4),[256,1,4]),N=0;N<256*4;++N)D.data[N]=255;var O=a(_,D);O.wrap=_.REPEAT;var I=new b(_,v,P,M,E,O);return I.update(T),I}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(o,c,p){c.exports=t;function t(n){var a=new Float32Array(16);return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a}},{}],93:[function(o,c,p){c.exports=t;function t(){var n=new Float32Array(16);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}},{}],94:[function(o,c,p){c.exports=t;function t(n){var a=n[0],i=n[1],r=n[2],f=n[3],u=n[4],s=n[5],h=n[6],d=n[7],y=n[8],m=n[9],g=n[10],x=n[11],A=n[12],b=n[13],S=n[14],w=n[15],T=a*s-i*u,_=a*h-r*u,v=a*d-f*u,P=i*h-r*s,M=i*d-f*s,E=r*d-f*h,D=y*b-m*A,N=y*S-g*A,O=y*w-x*A,I=m*S-g*b,F=m*w-x*b,V=g*w-x*S;return T*V-_*F+v*I+P*O-M*N+E*D}},{}],95:[function(o,c,p){c.exports=t;function t(n,a){var i=a[0],r=a[1],f=a[2],u=a[3],s=i+i,h=r+r,d=f+f,y=i*s,m=r*s,g=r*h,x=f*s,A=f*h,b=f*d,S=u*s,w=u*h,T=u*d;return n[0]=1-g-b,n[1]=m+T,n[2]=x-w,n[3]=0,n[4]=m-T,n[5]=1-y-b,n[6]=A+S,n[7]=0,n[8]=x+w,n[9]=A-S,n[10]=1-y-g,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}},{}],96:[function(o,c,p){c.exports=t;function t(n,a,i){var r=a[0],f=a[1],u=a[2],s=a[3],h=r+r,d=f+f,y=u+u,m=r*h,g=r*d,x=r*y,A=f*d,b=f*y,S=u*y,w=s*h,T=s*d,_=s*y;return n[0]=1-(A+S),n[1]=g+_,n[2]=x-T,n[3]=0,n[4]=g-_,n[5]=1-(m+S),n[6]=b+w,n[7]=0,n[8]=x+T,n[9]=b-w,n[10]=1-(m+A),n[11]=0,n[12]=i[0],n[13]=i[1],n[14]=i[2],n[15]=1,n}},{}],97:[function(o,c,p){c.exports=t;function t(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}},{}],98:[function(o,c,p){c.exports=t;function t(n,a){var i=a[0],r=a[1],f=a[2],u=a[3],s=a[4],h=a[5],d=a[6],y=a[7],m=a[8],g=a[9],x=a[10],A=a[11],b=a[12],S=a[13],w=a[14],T=a[15],_=i*h-r*s,v=i*d-f*s,P=i*y-u*s,M=r*d-f*h,E=r*y-u*h,D=f*y-u*d,N=m*S-g*b,O=m*w-x*b,I=m*T-A*b,F=g*w-x*S,V=g*T-A*S,U=x*T-A*w,j=_*U-v*V+P*F+M*I-E*O+D*N;return j?(j=1/j,n[0]=(h*U-d*V+y*F)*j,n[1]=(f*V-r*U-u*F)*j,n[2]=(S*D-w*E+T*M)*j,n[3]=(x*E-g*D-A*M)*j,n[4]=(d*I-s*U-y*O)*j,n[5]=(i*U-f*I+u*O)*j,n[6]=(w*P-b*D-T*v)*j,n[7]=(m*D-x*P+A*v)*j,n[8]=(s*V-h*I+y*N)*j,n[9]=(r*I-i*V-u*N)*j,n[10]=(b*E-S*P+T*_)*j,n[11]=(g*P-m*E-A*_)*j,n[12]=(h*O-s*F-d*N)*j,n[13]=(i*F-r*O+f*N)*j,n[14]=(S*v-b*M-w*_)*j,n[15]=(m*M-g*v+x*_)*j,n):null}},{}],99:[function(o,c,p){var t=o("./identity");c.exports=n;function n(a,i,r,f){var u,s,h,d,y,m,g,x,A,b,S=i[0],w=i[1],T=i[2],_=f[0],v=f[1],P=f[2],M=r[0],E=r[1],D=r[2];return Math.abs(S-M)<1e-6&&Math.abs(w-E)<1e-6&&Math.abs(T-D)<1e-6?t(a):(g=S-M,x=w-E,A=T-D,b=1/Math.sqrt(g*g+x*x+A*A),g*=b,x*=b,A*=b,u=v*A-P*x,s=P*g-_*A,h=_*x-v*g,b=Math.sqrt(u*u+s*s+h*h),b?(b=1/b,u*=b,s*=b,h*=b):(u=0,s=0,h=0),d=x*h-A*s,y=A*u-g*h,m=g*s-x*u,b=Math.sqrt(d*d+y*y+m*m),b?(b=1/b,d*=b,y*=b,m*=b):(d=0,y=0,m=0),a[0]=u,a[1]=d,a[2]=g,a[3]=0,a[4]=s,a[5]=y,a[6]=x,a[7]=0,a[8]=h,a[9]=m,a[10]=A,a[11]=0,a[12]=-(u*S+s*w+h*T),a[13]=-(d*S+y*w+m*T),a[14]=-(g*S+x*w+A*T),a[15]=1,a)}},{"./identity":97}],100:[function(o,c,p){c.exports=t;function t(n,a,i){var r=a[0],f=a[1],u=a[2],s=a[3],h=a[4],d=a[5],y=a[6],m=a[7],g=a[8],x=a[9],A=a[10],b=a[11],S=a[12],w=a[13],T=a[14],_=a[15],v=i[0],P=i[1],M=i[2],E=i[3];return n[0]=v*r+P*h+M*g+E*S,n[1]=v*f+P*d+M*x+E*w,n[2]=v*u+P*y+M*A+E*T,n[3]=v*s+P*m+M*b+E*_,v=i[4],P=i[5],M=i[6],E=i[7],n[4]=v*r+P*h+M*g+E*S,n[5]=v*f+P*d+M*x+E*w,n[6]=v*u+P*y+M*A+E*T,n[7]=v*s+P*m+M*b+E*_,v=i[8],P=i[9],M=i[10],E=i[11],n[8]=v*r+P*h+M*g+E*S,n[9]=v*f+P*d+M*x+E*w,n[10]=v*u+P*y+M*A+E*T,n[11]=v*s+P*m+M*b+E*_,v=i[12],P=i[13],M=i[14],E=i[15],n[12]=v*r+P*h+M*g+E*S,n[13]=v*f+P*d+M*x+E*w,n[14]=v*u+P*y+M*A+E*T,n[15]=v*s+P*m+M*b+E*_,n}},{}],101:[function(o,c,p){c.exports=t;function t(n,a,i,r,f,u,s){var h=1/(a-i),d=1/(r-f),y=1/(u-s);return n[0]=-2*h,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*d,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*y,n[11]=0,n[12]=(a+i)*h,n[13]=(f+r)*d,n[14]=(s+u)*y,n[15]=1,n}},{}],102:[function(o,c,p){c.exports=t;function t(n,a,i,r,f){var u=1/Math.tan(a/2),s=1/(r-f);return n[0]=u/i,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=u,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(f+r)*s,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*f*r*s,n[15]=0,n}},{}],103:[function(o,c,p){c.exports=t;function t(n,a,i,r){var f=r[0],u=r[1],s=r[2],h=Math.sqrt(f*f+u*u+s*s),d,y,m,g,x,A,b,S,w,T,_,v,P,M,E,D,N,O,I,F,V,U,j,Z;return Math.abs(h)<1e-6?null:(h=1/h,f*=h,u*=h,s*=h,d=Math.sin(i),y=Math.cos(i),m=1-y,g=a[0],x=a[1],A=a[2],b=a[3],S=a[4],w=a[5],T=a[6],_=a[7],v=a[8],P=a[9],M=a[10],E=a[11],D=f*f*m+y,N=u*f*m+s*d,O=s*f*m-u*d,I=f*u*m-s*d,F=u*u*m+y,V=s*u*m+f*d,U=f*s*m+u*d,j=u*s*m-f*d,Z=s*s*m+y,n[0]=g*D+S*N+v*O,n[1]=x*D+w*N+P*O,n[2]=A*D+T*N+M*O,n[3]=b*D+_*N+E*O,n[4]=g*I+S*F+v*V,n[5]=x*I+w*F+P*V,n[6]=A*I+T*F+M*V,n[7]=b*I+_*F+E*V,n[8]=g*U+S*j+v*Z,n[9]=x*U+w*j+P*Z,n[10]=A*U+T*j+M*Z,n[11]=b*U+_*j+E*Z,a!==n&&(n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15]),n)}},{}],104:[function(o,c,p){c.exports=t;function t(n,a,i){var r=Math.sin(i),f=Math.cos(i),u=a[4],s=a[5],h=a[6],d=a[7],y=a[8],m=a[9],g=a[10],x=a[11];return a!==n&&(n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15]),n[4]=u*f+y*r,n[5]=s*f+m*r,n[6]=h*f+g*r,n[7]=d*f+x*r,n[8]=y*f-u*r,n[9]=m*f-s*r,n[10]=g*f-h*r,n[11]=x*f-d*r,n}},{}],105:[function(o,c,p){c.exports=t;function t(n,a,i){var r=Math.sin(i),f=Math.cos(i),u=a[0],s=a[1],h=a[2],d=a[3],y=a[8],m=a[9],g=a[10],x=a[11];return a!==n&&(n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15]),n[0]=u*f-y*r,n[1]=s*f-m*r,n[2]=h*f-g*r,n[3]=d*f-x*r,n[8]=u*r+y*f,n[9]=s*r+m*f,n[10]=h*r+g*f,n[11]=d*r+x*f,n}},{}],106:[function(o,c,p){c.exports=t;function t(n,a,i){var r=Math.sin(i),f=Math.cos(i),u=a[0],s=a[1],h=a[2],d=a[3],y=a[4],m=a[5],g=a[6],x=a[7];return a!==n&&(n[8]=a[8],n[9]=a[9],n[10]=a[10],n[11]=a[11],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15]),n[0]=u*f+y*r,n[1]=s*f+m*r,n[2]=h*f+g*r,n[3]=d*f+x*r,n[4]=y*f-u*r,n[5]=m*f-s*r,n[6]=g*f-h*r,n[7]=x*f-d*r,n}},{}],107:[function(o,c,p){c.exports=t;function t(n,a,i){var r=i[0],f=i[1],u=i[2];return n[0]=a[0]*r,n[1]=a[1]*r,n[2]=a[2]*r,n[3]=a[3]*r,n[4]=a[4]*f,n[5]=a[5]*f,n[6]=a[6]*f,n[7]=a[7]*f,n[8]=a[8]*u,n[9]=a[9]*u,n[10]=a[10]*u,n[11]=a[11]*u,n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15],n}},{}],108:[function(o,c,p){c.exports=t;function t(n,a,i){var r=i[0],f=i[1],u=i[2],s,h,d,y,m,g,x,A,b,S,w,T;return a===n?(n[12]=a[0]*r+a[4]*f+a[8]*u+a[12],n[13]=a[1]*r+a[5]*f+a[9]*u+a[13],n[14]=a[2]*r+a[6]*f+a[10]*u+a[14],n[15]=a[3]*r+a[7]*f+a[11]*u+a[15]):(s=a[0],h=a[1],d=a[2],y=a[3],m=a[4],g=a[5],x=a[6],A=a[7],b=a[8],S=a[9],w=a[10],T=a[11],n[0]=s,n[1]=h,n[2]=d,n[3]=y,n[4]=m,n[5]=g,n[6]=x,n[7]=A,n[8]=b,n[9]=S,n[10]=w,n[11]=T,n[12]=s*r+m*f+b*u+a[12],n[13]=h*r+g*f+S*u+a[13],n[14]=d*r+x*f+w*u+a[14],n[15]=y*r+A*f+T*u+a[15]),n}},{}],109:[function(o,c,p){c.exports=t;function t(n,a){if(n===a){var i=a[1],r=a[2],f=a[3],u=a[6],s=a[7],h=a[11];n[1]=a[4],n[2]=a[8],n[3]=a[12],n[4]=i,n[6]=a[9],n[7]=a[13],n[8]=r,n[9]=u,n[11]=a[14],n[12]=f,n[13]=s,n[14]=h}else n[0]=a[0],n[1]=a[4],n[2]=a[8],n[3]=a[12],n[4]=a[1],n[5]=a[5],n[6]=a[9],n[7]=a[13],n[8]=a[2],n[9]=a[6],n[10]=a[10],n[11]=a[14],n[12]=a[3],n[13]=a[7],n[14]=a[11],n[15]=a[15];return n}},{}],110:[function(o,c,p){var t=o("barycentric"),n=o("polytope-closest-point/lib/closest_point_2d.js");c.exports=u;function a(s,h){for(var d=[0,0,0,0],y=0;y<4;++y)for(var m=0;m<4;++m)d[m]+=s[4*y+m]*h[y];return d}function i(s,h,d,y,m){for(var g=a(y,a(d,a(h,[s[0],s[1],s[2],1]))),x=0;x<3;++x)g[x]/=g[3];return[.5*m[0]*(1+g[0]),.5*m[1]*(1-g[1])]}function r(s,h){if(s.length===2){for(var d=0,y=0,m=0;m<2;++m)d+=Math.pow(h[m]-s[0][m],2),y+=Math.pow(h[m]-s[1][m],2);return d=Math.sqrt(d),y=Math.sqrt(y),d+y<1e-6?[1,0]:[y/(d+y),d/(y+d)]}else if(s.length===3){var g=[0,0];return n(s[0],s[1],s[2],h,g),t(s,g)}return[]}function f(s,h){for(var d=[0,0,0],y=0;y<s.length;++y)for(var m=s[y],g=h[y],x=0;x<3;++x)d[x]+=g*m[x];return d}function u(s,h,d,y,m,g){if(s.length===1)return[0,s[0].slice()];for(var x=new Array(s.length),A=0;A<s.length;++A)x[A]=i(s[A],d,y,m,g);for(var b=0,S=1/0,A=0;A<x.length;++A){for(var w=0,T=0;T<2;++T)w+=Math.pow(x[A][T]-h[T],2);w<S&&(S=w,b=A)}for(var _=r(x,h),v=0,A=0;A<3;++A){if(_[A]<-.001||_[A]>1.0001)return null;v+=_[A]}return Math.abs(v-1)>.001?null:[b,f(s,_),_]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(o,c,p){var t=o("glslify"),n=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),a=t([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),i=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),r=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),f=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),u=t([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),s=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),h=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),d=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),y=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),m=t([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);p.meshShader={vertex:n,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},p.wireShader={vertex:i,fragment:r,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},p.pointShader={vertex:f,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},p.pickShader={vertex:s,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},p.pointPickShader={vertex:d,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},p.contourShader={vertex:y,fragment:m,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(o,c,p){var t=1e-6,n=1e-6,a=o("gl-shader"),i=o("gl-buffer"),r=o("gl-vao"),f=o("gl-texture2d"),u=o("normals"),s=o("gl-mat4/multiply"),h=o("gl-mat4/invert"),d=o("ndarray"),y=o("colormap"),m=o("simplicial-complex-contour"),g=o("typedarray-pool"),x=o("./lib/shaders"),A=o("./lib/closest-point"),b=x.meshShader,S=x.wireShader,w=x.pointShader,T=x.pickShader,_=x.pointPickShader,v=x.contourShader,P=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function M(re,W,J,le,ue,se,G,Y,ee,$,K,Q,ae,ie,oe,fe,ye,ce,me,xe,ke,Ae,Oe,He,Ge,_e,Ie){this.gl=re,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=W,this.dirty=!0,this.triShader=J,this.lineShader=le,this.pointShader=ue,this.pickShader=se,this.pointPickShader=G,this.contourShader=Y,this.trianglePositions=ee,this.triangleColors=K,this.triangleNormals=ae,this.triangleUVs=Q,this.triangleIds=$,this.triangleVAO=ie,this.triangleCount=0,this.lineWidth=1,this.edgePositions=oe,this.edgeColors=ye,this.edgeUVs=ce,this.edgeIds=fe,this.edgeVAO=me,this.edgeCount=0,this.pointPositions=xe,this.pointColors=Ae,this.pointUVs=Oe,this.pointSizes=He,this.pointIds=ke,this.pointVAO=Ge,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=_e,this.contourVAO=Ie,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=P,this._view=P,this._projection=P,this._resolution=[1,1]}var E=M.prototype;E.isOpaque=function(){return!this.hasAlpha},E.isTransparent=function(){return this.hasAlpha},E.pickSlots=1,E.setPickBase=function(re){this.pickId=re};function D(re,W){if(!W||!W.length)return 1;for(var J=0;J<W.length;++J){if(W.length<2)return 1;if(W[J][0]===re)return W[J][1];if(W[J][0]>re&&J>0){var le=(W[J][0]-re)/(W[J][0]-W[J-1][0]);return W[J][1]*(1-le)+le*W[J-1][1]}}return 1}function N(re,W){for(var J=y({colormap:re,nshades:256,format:"rgba"}),le=new Uint8Array(256*4),ue=0;ue<256;++ue){for(var se=J[ue],G=0;G<3;++G)le[4*ue+G]=se[G];W?le[4*ue+3]=255*D(ue/255,W):le[4*ue+3]=255*se[3]}return d(le,[256,256,4],[4,0,1])}function O(re){for(var W=re.length,J=new Array(W),le=0;le<W;++le)J[le]=re[le][2];return J}E.highlight=function(re){if(!re||!this.contourEnable){this.contourCount=0;return}for(var W=m(this.cells,this.intensity,re.intensity),J=W.cells,le=W.vertexIds,ue=W.vertexWeights,se=J.length,G=g.mallocFloat32(2*3*se),Y=0,ee=0;ee<se;++ee)for(var $=J[ee],K=0;K<2;++K){var Q=$[0];$.length===2&&(Q=$[K]);for(var ae=le[Q][0],ie=le[Q][1],oe=ue[Q],fe=1-oe,ye=this.positions[ae],ce=this.positions[ie],me=0;me<3;++me)G[Y++]=oe*ye[me]+fe*ce[me]}this.contourCount=Y/3|0,this.contourPositions.update(G.subarray(0,Y)),g.free(G)},E.update=function(re){re=re||{};var W=this.gl;this.dirty=!0,"contourEnable"in re&&(this.contourEnable=re.contourEnable),"contourColor"in re&&(this.contourColor=re.contourColor),"lineWidth"in re&&(this.lineWidth=re.lineWidth),"lightPosition"in re&&(this.lightPosition=re.lightPosition),this.hasAlpha=!1,"opacity"in re&&(this.opacity=re.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in re&&(this.opacityscale=re.opacityscale,this.hasAlpha=!0),"ambient"in re&&(this.ambientLight=re.ambient),"diffuse"in re&&(this.diffuseLight=re.diffuse),"specular"in re&&(this.specularLight=re.specular),"roughness"in re&&(this.roughness=re.roughness),"fresnel"in re&&(this.fresnel=re.fresnel),re.texture?(this.texture.dispose(),this.texture=f(W,re.texture)):re.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=W.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=W.LINEAR,this.texture.setPixels(N(re.colormap,this.opacityscale)),this.texture.generateMipmap());var J=re.cells,le=re.positions;if(!le||!J)return;var ue=[],se=[],G=[],Y=[],ee=[],$=[],K=[],Q=[],ae=[],ie=[],oe=[],fe=[],ye=[],ce=[];this.cells=J,this.positions=le;var me=re.vertexNormals,xe=re.cellNormals,ke=re.vertexNormalsEpsilon===void 0?t:re.vertexNormalsEpsilon,Ae=re.faceNormalsEpsilon===void 0?n:re.faceNormalsEpsilon;re.useFacetNormals&&!xe&&(xe=u.faceNormals(J,le,Ae)),!xe&&!me&&(me=u.vertexNormals(J,le,ke));var Oe=re.vertexColors,He=re.cellColors,Ge=re.meshColor||[1,1,1,1],_e=re.vertexUVs,Ie=re.vertexIntensity,We=re.cellUVs,et=re.cellIntensity,Ne=1/0,De=-1/0;if(!_e&&!We)if(Ie)if(re.vertexIntensityBounds)Ne=+re.vertexIntensityBounds[0],De=+re.vertexIntensityBounds[1];else for(var Ve=0;Ve<Ie.length;++Ve){var dt=Ie[Ve];Ne=Math.min(Ne,dt),De=Math.max(De,dt)}else if(et)if(re.cellIntensityBounds)Ne=+re.cellIntensityBounds[0],De=+re.cellIntensityBounds[1];else for(var Ve=0;Ve<et.length;++Ve){var dt=et[Ve];Ne=Math.min(Ne,dt),De=Math.max(De,dt)}else for(var Ve=0;Ve<le.length;++Ve){var dt=le[Ve][2];Ne=Math.min(Ne,dt),De=Math.max(De,dt)}Ie?this.intensity=Ie:et?this.intensity=et:this.intensity=O(le),this.pickVertex=!(et||He);var Dt=re.pointSizes,Gt=re.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var Ve=0;Ve<le.length;++Ve)for(var Mt=le[Ve],zt=0;zt<3;++zt)isNaN(Mt[zt])||!isFinite(Mt[zt])||(this.bounds[0][zt]=Math.min(this.bounds[0][zt],Mt[zt]),this.bounds[1][zt]=Math.max(this.bounds[1][zt],Mt[zt]));var Nt=0,Et=0,At=0;e:for(var Ve=0;Ve<J.length;++Ve){var it=J[Ve];switch(it.length){case 1:for(var ht=it[0],Mt=le[ht],zt=0;zt<3;++zt)if(isNaN(Mt[zt])||!isFinite(Mt[zt]))continue e;ie.push(Mt[0],Mt[1],Mt[2]);var $e;Oe?$e=Oe[ht]:He?$e=He[Ve]:$e=Ge,this.opacityscale&&Ie?se.push($e[0],$e[1],$e[2],this.opacity*D((Ie[ht]-Ne)/(De-Ne),this.opacityscale)):$e.length===3?oe.push($e[0],$e[1],$e[2],this.opacity):(oe.push($e[0],$e[1],$e[2],$e[3]*this.opacity),$e[3]<1&&(this.hasAlpha=!0));var Ee;_e?Ee=_e[ht]:Ie?Ee=[(Ie[ht]-Ne)/(De-Ne),0]:We?Ee=We[Ve]:et?Ee=[(et[Ve]-Ne)/(De-Ne),0]:Ee=[(Mt[2]-Ne)/(De-Ne),0],fe.push(Ee[0],Ee[1]),Dt?ye.push(Dt[ht]):ye.push(Gt),ce.push(Ve),At+=1;break;case 2:for(var zt=0;zt<2;++zt)for(var ht=it[zt],Mt=le[ht],Xe=0;Xe<3;++Xe)if(isNaN(Mt[Xe])||!isFinite(Mt[Xe]))continue e;for(var zt=0;zt<2;++zt){var ht=it[zt],Mt=le[ht];$.push(Mt[0],Mt[1],Mt[2]);var $e;Oe?$e=Oe[ht]:He?$e=He[Ve]:$e=Ge,this.opacityscale&&Ie?se.push($e[0],$e[1],$e[2],this.opacity*D((Ie[ht]-Ne)/(De-Ne),this.opacityscale)):$e.length===3?K.push($e[0],$e[1],$e[2],this.opacity):(K.push($e[0],$e[1],$e[2],$e[3]*this.opacity),$e[3]<1&&(this.hasAlpha=!0));var Ee;_e?Ee=_e[ht]:Ie?Ee=[(Ie[ht]-Ne)/(De-Ne),0]:We?Ee=We[Ve]:et?Ee=[(et[Ve]-Ne)/(De-Ne),0]:Ee=[(Mt[2]-Ne)/(De-Ne),0],Q.push(Ee[0],Ee[1]),ae.push(Ve)}Et+=1;break;case 3:for(var zt=0;zt<3;++zt)for(var ht=it[zt],Mt=le[ht],Xe=0;Xe<3;++Xe)if(isNaN(Mt[Xe])||!isFinite(Mt[Xe]))continue e;for(var zt=0;zt<3;++zt){var ht=it[2-zt],Mt=le[ht];ue.push(Mt[0],Mt[1],Mt[2]);var $e;Oe?$e=Oe[ht]:He?$e=He[Ve]:$e=Ge,$e?this.opacityscale&&Ie?se.push($e[0],$e[1],$e[2],this.opacity*D((Ie[ht]-Ne)/(De-Ne),this.opacityscale)):$e.length===3?se.push($e[0],$e[1],$e[2],this.opacity):(se.push($e[0],$e[1],$e[2],$e[3]*this.opacity),$e[3]<1&&(this.hasAlpha=!0)):se.push(.5,.5,.5,1);var Ee;_e?Ee=_e[ht]:Ie?Ee=[(Ie[ht]-Ne)/(De-Ne),0]:We?Ee=We[Ve]:et?Ee=[(et[Ve]-Ne)/(De-Ne),0]:Ee=[(Mt[2]-Ne)/(De-Ne),0],Y.push(Ee[0],Ee[1]);var rt;me?rt=me[ht]:rt=xe[Ve],G.push(rt[0],rt[1],rt[2]),ee.push(Ve)}Nt+=1;break}}this.pointCount=At,this.edgeCount=Et,this.triangleCount=Nt,this.pointPositions.update(ie),this.pointColors.update(oe),this.pointUVs.update(fe),this.pointSizes.update(ye),this.pointIds.update(new Uint32Array(ce)),this.edgePositions.update($),this.edgeColors.update(K),this.edgeUVs.update(Q),this.edgeIds.update(new Uint32Array(ae)),this.trianglePositions.update(ue),this.triangleColors.update(se),this.triangleUVs.update(Y),this.triangleNormals.update(G),this.triangleIds.update(new Uint32Array(ee))},E.drawTransparent=E.draw=function(re){re=re||{};for(var W=this.gl,J=re.model||P,le=re.view||P,ue=re.projection||P,se=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],G=0;G<3;++G)se[0][G]=Math.max(se[0][G],this.clipBounds[0][G]),se[1][G]=Math.min(se[1][G],this.clipBounds[1][G]);var Y={model:J,view:le,projection:ue,inverseModel:P.slice(),clipBounds:se,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};Y.inverseModel=h(Y.inverseModel,Y.model),W.disable(W.CULL_FACE),this.texture.bind(0);var ee=new Array(16);s(ee,Y.view,Y.model),s(ee,Y.projection,ee),h(ee,ee);for(var G=0;G<3;++G)Y.eyePosition[G]=ee[12+G]/ee[15];for(var $=ee[15],G=0;G<3;++G)$+=this.lightPosition[G]*ee[4*G+3];for(var G=0;G<3;++G){for(var K=ee[12+G],Q=0;Q<3;++Q)K+=ee[4*Q+G]*this.lightPosition[Q];Y.lightPosition[G]=K/$}if(this.triangleCount>0){var ae=this.triShader;ae.bind(),ae.uniforms=Y,this.triangleVAO.bind(),W.drawArrays(W.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var ae=this.lineShader;ae.bind(),ae.uniforms=Y,this.edgeVAO.bind(),W.lineWidth(this.lineWidth*this.pixelRatio),W.drawArrays(W.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var ae=this.pointShader;ae.bind(),ae.uniforms=Y,this.pointVAO.bind(),W.drawArrays(W.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var ae=this.contourShader;ae.bind(),ae.uniforms=Y,this.contourVAO.bind(),W.drawArrays(W.LINES,0,this.contourCount),this.contourVAO.unbind()}},E.drawPick=function(re){re=re||{};for(var W=this.gl,J=re.model||P,le=re.view||P,ue=re.projection||P,se=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],G=0;G<3;++G)se[0][G]=Math.max(se[0][G],this.clipBounds[0][G]),se[1][G]=Math.min(se[1][G],this.clipBounds[1][G]);this._model=[].slice.call(J),this._view=[].slice.call(le),this._projection=[].slice.call(ue),this._resolution=[W.drawingBufferWidth,W.drawingBufferHeight];var Y={model:J,view:le,projection:ue,clipBounds:se,pickId:this.pickId/255},ee=this.pickShader;if(ee.bind(),ee.uniforms=Y,this.triangleCount>0&&(this.triangleVAO.bind(),W.drawArrays(W.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),W.lineWidth(this.lineWidth*this.pixelRatio),W.drawArrays(W.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var ee=this.pointPickShader;ee.bind(),ee.uniforms=Y,this.pointVAO.bind(),W.drawArrays(W.POINTS,0,this.pointCount),this.pointVAO.unbind()}},E.pick=function(re){if(!re||re.id!==this.pickId)return null;for(var W=re.value[0]+256*re.value[1]+65536*re.value[2],J=this.cells[W],le=this.positions,ue=new Array(J.length),se=0;se<J.length;++se)ue[se]=le[J[se]];var G=re.coord[0],Y=re.coord[1];if(!this.pickVertex){var ee=this.positions[J[0]],$=this.positions[J[1]],K=this.positions[J[2]],Q=[(ee[0]+$[0]+K[0])/3,(ee[1]+$[1]+K[1])/3,(ee[2]+$[2]+K[2])/3];return{_cellCenter:!0,position:[G,Y],index:W,cell:J,cellId:W,intensity:this.intensity[W],dataCoordinate:Q}}var ae=A(ue,[G*this.pixelRatio,this._resolution[1]-Y*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ae)return null;for(var ie=ae[2],oe=0,se=0;se<J.length;++se)oe+=ie[se]*this.intensity[J[se]];return{position:ae[1],index:J[ae[0]],cell:J,cellId:W,intensity:oe,dataCoordinate:this.positions[J[ae[0]]]}},E.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function I(re){var W=a(re,b.vertex,b.fragment);return W.attributes.position.location=0,W.attributes.color.location=2,W.attributes.uv.location=3,W.attributes.normal.location=4,W}function F(re){var W=a(re,S.vertex,S.fragment);return W.attributes.position.location=0,W.attributes.color.location=2,W.attributes.uv.location=3,W}function V(re){var W=a(re,w.vertex,w.fragment);return W.attributes.position.location=0,W.attributes.color.location=2,W.attributes.uv.location=3,W.attributes.pointSize.location=4,W}function U(re){var W=a(re,T.vertex,T.fragment);return W.attributes.position.location=0,W.attributes.id.location=1,W}function j(re){var W=a(re,_.vertex,_.fragment);return W.attributes.position.location=0,W.attributes.id.location=1,W.attributes.pointSize.location=4,W}function Z(re){var W=a(re,v.vertex,v.fragment);return W.attributes.position.location=0,W}function te(re,W){arguments.length===1&&(W=re,re=W.gl);var J=re.getExtension("OES_standard_derivatives")||re.getExtension("MOZ_OES_standard_derivatives")||re.getExtension("WEBKIT_OES_standard_derivatives");if(!J)throw new Error("derivatives not supported");var le=I(re),ue=F(re),se=V(re),G=U(re),Y=j(re),ee=Z(re),$=f(re,d(new Uint8Array([255,255,255,255]),[1,1,4]));$.generateMipmap(),$.minFilter=re.LINEAR_MIPMAP_LINEAR,$.magFilter=re.LINEAR;var K=i(re),Q=i(re),ae=i(re),ie=i(re),oe=i(re),fe=r(re,[{buffer:K,type:re.FLOAT,size:3},{buffer:oe,type:re.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Q,type:re.FLOAT,size:4},{buffer:ae,type:re.FLOAT,size:2},{buffer:ie,type:re.FLOAT,size:3}]),ye=i(re),ce=i(re),me=i(re),xe=i(re),ke=r(re,[{buffer:ye,type:re.FLOAT,size:3},{buffer:xe,type:re.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ce,type:re.FLOAT,size:4},{buffer:me,type:re.FLOAT,size:2}]),Ae=i(re),Oe=i(re),He=i(re),Ge=i(re),_e=i(re),Ie=r(re,[{buffer:Ae,type:re.FLOAT,size:3},{buffer:_e,type:re.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Oe,type:re.FLOAT,size:4},{buffer:He,type:re.FLOAT,size:2},{buffer:Ge,type:re.FLOAT,size:1}]),We=i(re),et=r(re,[{buffer:We,type:re.FLOAT,size:3}]),Ne=new M(re,$,le,ue,se,G,Y,ee,K,oe,Q,ae,ie,fe,ye,xe,ce,me,ke,Ae,_e,Oe,He,Ge,Ie,We,et);return Ne.update(W),Ne}c.exports=te},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(o,c,p){c.exports=f;var t=o("gl-buffer"),n=o("gl-shader"),a=o("./shaders");function i(u,s,h){this.plot=u,this.vbo=s,this.shader=h}var r=i.prototype;r.bind=function(){var u=this.shader;this.vbo.bind(),this.shader.bind(),u.attributes.coord.pointer(),u.uniforms.screenBox=this.plot.screenBox},r.drawBox=function(){var u=[0,0],s=[0,0];return function(h,d,y,m,g){var x=this.plot,A=this.shader,b=x.gl;u[0]=h,u[1]=d,s[0]=y,s[1]=m,A.uniforms.lo=u,A.uniforms.hi=s,A.uniforms.color=g,b.drawArrays(b.TRIANGLE_STRIP,0,4)}}(),r.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function f(u){var s=u.gl,h=t(s,[0,0,0,1,1,0,1,1]),d=n(s,a.boxVert,a.lineFrag);return new i(u,h,d)}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(o,c,p){c.exports=s;var t=o("gl-buffer"),n=o("gl-shader"),a=o("binary-search-bounds"),i=o("./shaders");function r(h,d,y,m){this.plot=h,this.vbo=d,this.shader=y,this.tickShader=m,this.ticks=[[],[]]}function f(h,d){return h-d}var u=r.prototype;u.draw=function(){var h=[0,0],d=[0,0],y=[0,0];return function(){for(var m=this.plot,g=this.vbo,x=this.shader,A=this.ticks,b=m.gl,S=m._tickBounds,w=m.dataBox,T=m.viewBox,_=m.gridLineWidth,v=m.gridLineColor,P=m.gridLineEnable,M=m.pixelRatio,E=0;E<2;++E){var D=S[E],N=S[E+2],O=N-D,I=.5*(w[E+2]+w[E]),F=w[E+2]-w[E];d[E]=2*O/F,h[E]=2*(D-I)/F}x.bind(),g.bind(),x.attributes.dataCoord.pointer(),x.uniforms.dataShift=h,x.uniforms.dataScale=d;for(var V=0,E=0;E<2;++E){y[0]=y[1]=0,y[E]=1,x.uniforms.dataAxis=y,x.uniforms.lineWidth=_[E]/(T[E+2]-T[E])*M,x.uniforms.color=v[E];var U=A[E].length*6;P[E]&&U&&b.drawArrays(b.TRIANGLES,V,U),V+=U}}}(),u.drawTickMarks=function(){var h=[0,0],d=[0,0],y=[1,0],m=[0,1],g=[0,0],x=[0,0];return function(){for(var A=this.plot,b=this.vbo,S=this.tickShader,w=this.ticks,T=A.gl,_=A._tickBounds,v=A.dataBox,P=A.viewBox,M=A.pixelRatio,E=A.screenBox,D=E[2]-E[0],N=E[3]-E[1],O=P[2]-P[0],I=P[3]-P[1],F=0;F<2;++F){var V=_[F],U=_[F+2],j=U-V,Z=.5*(v[F+2]+v[F]),te=v[F+2]-v[F];d[F]=2*j/te,h[F]=2*(V-Z)/te}d[0]*=O/D,h[0]*=O/D,d[1]*=I/N,h[1]*=I/N,S.bind(),b.bind(),S.attributes.dataCoord.pointer();var re=S.uniforms;re.dataShift=h,re.dataScale=d;var W=A.tickMarkLength,J=A.tickMarkWidth,le=A.tickMarkColor,ue=0,se=w[0].length*6,G=Math.min(a.ge(w[0],(v[0]-_[0])/(_[2]-_[0]),f),w[0].length),Y=Math.min(a.gt(w[0],(v[2]-_[0])/(_[2]-_[0]),f),w[0].length),ee=ue+6*G,$=6*Math.max(0,Y-G),K=Math.min(a.ge(w[1],(v[1]-_[1])/(_[3]-_[1]),f),w[1].length),Q=Math.min(a.gt(w[1],(v[3]-_[1])/(_[3]-_[1]),f),w[1].length),ae=se+6*K,ie=6*Math.max(0,Q-K);g[0]=2*(P[0]-W[1])/D-1,g[1]=(P[3]+P[1])/N-1,x[0]=W[1]*M/D,x[1]=J[1]*M/N,ie&&(re.color=le[1],re.tickScale=x,re.dataAxis=m,re.screenOffset=g,T.drawArrays(T.TRIANGLES,ae,ie)),g[0]=(P[2]+P[0])/D-1,g[1]=2*(P[1]-W[0])/N-1,x[0]=J[0]*M/D,x[1]=W[0]*M/N,$&&(re.color=le[0],re.tickScale=x,re.dataAxis=y,re.screenOffset=g,T.drawArrays(T.TRIANGLES,ee,$)),g[0]=2*(P[2]+W[3])/D-1,g[1]=(P[3]+P[1])/N-1,x[0]=W[3]*M/D,x[1]=J[3]*M/N,ie&&(re.color=le[3],re.tickScale=x,re.dataAxis=m,re.screenOffset=g,T.drawArrays(T.TRIANGLES,ae,ie)),g[0]=(P[2]+P[0])/D-1,g[1]=2*(P[3]+W[2])/N-1,x[0]=J[2]*M/D,x[1]=W[2]*M/N,$&&(re.color=le[2],re.tickScale=x,re.dataAxis=y,re.screenOffset=g,T.drawArrays(T.TRIANGLES,ee,$))}}(),u.update=function(){var h=[1,1,-1,-1,1,-1],d=[1,-1,1,1,-1,-1];return function(y){var m=y.ticks,g=y.bounds,x=new Float32Array(6*3*(m[0].length+m[1].length));this.plot.zeroLineEnable;for(var A=0,b=[[],[]],S=0;S<2;++S)for(var w=b[S],T=m[S],_=g[S],v=g[S+2],P=0;P<T.length;++P){var M=(T[P].x-_)/(v-_);w.push(M);for(var E=0;E<6;++E)x[A++]=M,x[A++]=h[E],x[A++]=d[E]}this.ticks=b,this.vbo.update(x)}}(),u.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function s(h){var d=h.gl,y=t(d),m=n(d,i.gridVert,i.gridFrag),g=n(d,i.tickVert,i.gridFrag),x=new r(h,y,m,g);return x}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(o,c,p){c.exports=f;var t=o("gl-buffer"),n=o("gl-shader"),a=o("./shaders");function i(u,s,h){this.plot=u,this.vbo=s,this.shader=h}var r=i.prototype;r.bind=function(){var u=this.shader;this.vbo.bind(),this.shader.bind(),u.attributes.coord.pointer(),u.uniforms.screenBox=this.plot.screenBox},r.drawLine=function(){var u=[0,0],s=[0,0];return function(h,d,y,m,g,x){var A=this.plot,b=this.shader,S=A.gl;u[0]=h,u[1]=d,s[0]=y,s[1]=m,b.uniforms.start=u,b.uniforms.end=s,b.uniforms.width=g*A.pixelRatio,b.uniforms.color=x,S.drawArrays(S.TRIANGLE_STRIP,0,4)}}(),r.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function f(u){var s=u.gl,h=t(s,[-1,-1,-1,1,1,-1,1,1]),d=n(s,a.lineVert,a.lineFrag),y=new i(u,h,d);return y}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(o,c,p){var t=o("glslify"),n=t([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);c.exports={lineVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:n,textVert:t([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:n,gridVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:n,boxVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:231}],117:[function(o,c,p){c.exports=s;var t=o("gl-buffer"),n=o("gl-shader"),a=o("text-cache"),i=o("binary-search-bounds"),r=o("./shaders");function f(h,d,y){this.plot=h,this.vbo=d,this.shader=y,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var u=f.prototype;u.drawTicks=function(){var h=[0,0],d=[0,0],y=[0,0];return function(m){var g=this.plot,x=this.shader,A=this.tickX[m],b=this.tickOffset[m],S=g.gl,w=g.viewBox,T=g.dataBox,_=g.screenBox,v=g.pixelRatio,P=g.tickEnable,M=g.tickPad,E=g.tickColor,D=g.tickAngle,N=g.labelEnable,O=g.labelPad,I=g.labelColor,F=g.labelAngle,V=this.labelOffset[m],U=this.labelCount[m],j=i.lt(A,T[m]),Z=i.le(A,T[m+2]);h[0]=h[1]=0,h[m]=1,d[m]=(w[2+m]+w[m])/(_[2+m]-_[m])-1;var te=2/_[2+(m^1)]-_[m^1];d[m^1]=te*w[m^1]-1,P[m]&&(d[m^1]-=te*v*M[m],j<Z&&b[Z]>b[j]&&(x.uniforms.dataAxis=h,x.uniforms.screenOffset=d,x.uniforms.color=E[m],x.uniforms.angle=D[m],S.drawArrays(S.TRIANGLES,b[j],b[Z]-b[j]))),N[m]&&U&&(d[m^1]-=te*v*O[m],x.uniforms.dataAxis=y,x.uniforms.screenOffset=d,x.uniforms.color=I[m],x.uniforms.angle=F[m],S.drawArrays(S.TRIANGLES,V,U)),d[m^1]=te*w[2+(m^1)]-1,P[m+2]&&(d[m^1]+=te*v*M[m+2],j<Z&&b[Z]>b[j]&&(x.uniforms.dataAxis=h,x.uniforms.screenOffset=d,x.uniforms.color=E[m+2],x.uniforms.angle=D[m+2],S.drawArrays(S.TRIANGLES,b[j],b[Z]-b[j]))),N[m+2]&&U&&(d[m^1]+=te*v*O[m+2],x.uniforms.dataAxis=y,x.uniforms.screenOffset=d,x.uniforms.color=I[m+2],x.uniforms.angle=F[m+2],S.drawArrays(S.TRIANGLES,V,U))}}(),u.drawTitle=function(){var h=[0,0],d=[0,0];return function(){var y=this.plot,m=this.shader,g=y.gl,x=y.screenBox,A=y.titleCenter,b=y.titleAngle,S=y.titleColor,w=y.pixelRatio;if(!!this.titleCount){for(var T=0;T<2;++T)d[T]=2*(A[T]*w-x[T])/(x[2+T]-x[T])-1;m.bind(),m.uniforms.dataAxis=h,m.uniforms.screenOffset=d,m.uniforms.angle=b,m.uniforms.color=S,g.drawArrays(g.TRIANGLES,this.titleOffset,this.titleCount)}}}(),u.bind=function(){var h=[0,0],d=[0,0],y=[0,0];return function(){var m=this.plot,g=this.shader,x=m._tickBounds,A=m.dataBox,b=m.screenBox,S=m.viewBox;g.bind();for(var w=0;w<2;++w){var T=x[w],_=x[w+2],v=_-T,P=.5*(A[w+2]+A[w]),M=A[w+2]-A[w],E=S[w],D=S[w+2],N=D-E,O=b[w],I=b[w+2],F=I-O;d[w]=2*v/M*N/F,h[w]=2*(T-P)/M*N/F}y[1]=2*m.pixelRatio/(b[3]-b[1]),y[0]=y[1]*(b[3]-b[1])/(b[2]-b[0]),g.uniforms.dataScale=d,g.uniforms.dataShift=h,g.uniforms.textScale=y,this.vbo.bind(),g.attributes.textCoordinate.pointer()}}(),u.update=function(h){var d=[],y=h.ticks,m=h.bounds,g,x,A,b,S;for(S=0;S<2;++S){var w=[Math.floor(d.length/3)],T=[-1/0],_=y[S];for(g=0;g<_.length;++g){var v=_[g],P=v.x,M=v.text,E=v.font||"sans-serif";b=v.fontSize||12;for(var D=1/(m[S+2]-m[S]),N=m[S],O=M.split(`
`),I=0;I<O.length;I++)for(A=a(E,O[I]).data,x=0;x<A.length;x+=2)d.push(A[x]*b,-A[x+1]*b-I*b*1.2,(P-N)*D);w.push(Math.floor(d.length/3)),T.push(P)}this.tickOffset[S]=w,this.tickX[S]=T}for(S=0;S<2;++S){for(this.labelOffset[S]=Math.floor(d.length/3),A=a(h.labelFont[S],h.labels[S],{textAlign:"center"}).data,b=h.labelSize[S],g=0;g<A.length;g+=2)d.push(A[g]*b,-A[g+1]*b,0);this.labelCount[S]=Math.floor(d.length/3)-this.labelOffset[S]}for(this.titleOffset=Math.floor(d.length/3),A=a(h.titleFont,h.title).data,b=h.titleSize,g=0;g<A.length;g+=2)d.push(A[g]*b,-A[g+1]*b,0);this.titleCount=Math.floor(d.length/3)-this.titleOffset,this.vbo.update(d)},u.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function s(h){var d=h.gl,y=t(d),m=n(d,r.textVert,r.textFrag),g=new f(h,y,m);return g}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(o,c,p){c.exports=d;var t=o("gl-select-static"),n=o("./lib/grid"),a=o("./lib/text"),i=o("./lib/line"),r=o("./lib/box");function f(y,m){this.gl=y,this.pickBuffer=m,this.screenBox=[0,0,y.drawingBufferWidth,y.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var u=f.prototype;u.setDirty=function(){this.dirty=this.pickDirty=!0},u.setOverlayDirty=function(){this.dirty=!0},u.nextDepthValue=function(){return this._depthCounter++/65536},u.draw=function(){return function(){var y=this.gl,m=this.screenBox,g=this.viewBox,x=this.dataBox,A=this.pixelRatio,b=this.grid,S=this.line,w=this.text,T=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,y.bindFramebuffer(y.FRAMEBUFFER,null),y.enable(y.SCISSOR_TEST),y.disable(y.DEPTH_TEST),y.depthFunc(y.LESS),y.depthMask(!1),y.enable(y.BLEND),y.blendEquation(y.FUNC_ADD,y.FUNC_ADD),y.blendFunc(y.ONE,y.ONE_MINUS_SRC_ALPHA),this.borderColor){y.scissor(m[0],m[1],m[2]-m[0],m[3]-m[1]);var _=this.borderColor;y.clearColor(_[0]*_[3],_[1]*_[3],_[2]*_[3],_[3]),y.clear(y.COLOR_BUFFER_BIT|y.DEPTH_BUFFER_BIT)}y.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]),y.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]);var v=this.backgroundColor;y.clearColor(v[0]*v[3],v[1]*v[3],v[2]*v[3],v[3]),y.clear(y.COLOR_BUFFER_BIT),b.draw();var P=this.zeroLineEnable,M=this.zeroLineColor,E=this.zeroLineWidth;if(P[0]||P[1]){S.bind();for(var D=0;D<2;++D)if(!(!P[D]||!(x[D]<=0&&x[D+2]>=0))){var N=m[D]-x[D]*(m[D+2]-m[D])/(x[D+2]-x[D]);D===0?S.drawLine(N,m[1],N,m[3],E[D],M[D]):S.drawLine(m[0],N,m[2],N,E[D],M[D])}}for(var D=0;D<T.length;++D)T[D].draw();y.viewport(m[0],m[1],m[2]-m[0],m[3]-m[1]),y.scissor(m[0],m[1],m[2]-m[0],m[3]-m[1]),this.grid.drawTickMarks(),S.bind();var O=this.borderLineEnable,I=this.borderLineWidth,F=this.borderLineColor;O[1]&&S.drawLine(g[0],g[1]-.5*I[1]*A,g[0],g[3]+.5*I[3]*A,I[1],F[1]),O[0]&&S.drawLine(g[0]-.5*I[0]*A,g[1],g[2]+.5*I[2]*A,g[1],I[0],F[0]),O[3]&&S.drawLine(g[2],g[1]-.5*I[1]*A,g[2],g[3]+.5*I[3]*A,I[3],F[3]),O[2]&&S.drawLine(g[0]-.5*I[0]*A,g[3],g[2]+.5*I[2]*A,g[3],I[2],F[2]),w.bind();for(var D=0;D<2;++D)w.drawTicks(D);this.titleEnable&&w.drawTitle();for(var V=this.overlays,D=0;D<V.length;++D)V[D].draw();y.disable(y.SCISSOR_TEST),y.disable(y.BLEND),y.depthMask(!0)}}}(),u.drawPick=function(){return function(){if(!this.static){var y=this.pickBuffer;this.gl,this._pickTimeout=null,y.begin();for(var m=1,g=this.objects,x=0;x<g.length;++x)m=g[x].drawPick(m);y.end()}}}(),u.pick=function(){return function(y,m){if(!this.static){var g=this.pixelRatio,x=this.pickPixelRatio,A=this.viewBox,b=Math.round((y-A[0]/g)*x)|0,S=Math.round((m-A[1]/g)*x)|0,w=this.pickBuffer.query(b,S,this.pickRadius);if(!w)return null;for(var T=w.id+(w.value[0]<<8)+(w.value[1]<<16)+(w.value[2]<<24),_=this.objects,v=0;v<_.length;++v){var P=_[v].pick(b,S,T);if(P)return P}return null}}}();function s(y){for(var m=y.slice(),g=0;g<m.length;++g)m[g]=m[g].slice();return m}function h(y,m){return y.x-m.x}u.setScreenBox=function(y){var m=this.screenBox,g=this.pixelRatio;m[0]=Math.round(y[0]*g)|0,m[1]=Math.round(y[1]*g)|0,m[2]=Math.round(y[2]*g)|0,m[3]=Math.round(y[3]*g)|0,this.setDirty()},u.setDataBox=function(y){var m=this.dataBox,g=m[0]!==y[0]||m[1]!==y[1]||m[2]!==y[2]||m[3]!==y[3];g&&(m[0]=y[0],m[1]=y[1],m[2]=y[2],m[3]=y[3],this.setDirty())},u.setViewBox=function(y){var m=this.pixelRatio,g=this.viewBox;g[0]=Math.round(y[0]*m)|0,g[1]=Math.round(y[1]*m)|0,g[2]=Math.round(y[2]*m)|0,g[3]=Math.round(y[3]*m)|0;var x=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((y[2]-y[0])*x)|0,Math.round((y[3]-y[1])*x)|0],this.setDirty()},u.update=function(y){y=y||{};var m=this.gl;this.pixelRatio=y.pixelRatio||1;var g=this.pixelRatio;this.pickPixelRatio=Math.max(g,1),this.setScreenBox(y.screenBox||[0,0,m.drawingBufferWidth/g,m.drawingBufferHeight/g]),this.screenBox,this.setViewBox(y.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/g,.125*(this.screenBox[3]-this.screenBox[1])/g,.875*(this.screenBox[2]-this.screenBox[0])/g,.875*(this.screenBox[3]-this.screenBox[1])/g]);var x=this.viewBox,A=(x[2]-x[0])/(x[3]-x[1]);this.setDataBox(y.dataBox||[-10,-10/A,10,10/A]),this.borderColor=y.borderColor!==!1?(y.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(y.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(y.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(y.gridLineWidth||[1,1]).slice(),this.gridLineColor=s(y.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(y.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(y.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=s(y.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(y.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(y.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=s(y.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(y.titleCenter||[.5*(x[0]+x[2])/g,(x[3]+120)/g]).slice(),this.titleEnable=!("titleEnable"in y)||!!y.titleEnable,this.titleAngle=y.titleAngle||0,this.titleColor=(y.titleColor||[0,0,0,1]).slice(),this.labelPad=(y.labelPad||[15,15,15,15]).slice(),this.labelAngle=(y.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(y.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=s(y.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(y.tickPad||[15,15,15,15]).slice(),this.tickAngle=(y.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(y.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=s(y.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(y.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(y.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=s(y.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var b=y.ticks||[[],[]],S=this._tickBounds;S[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(var w=0;w<2;++w){var T=b[w].slice(0);T.length!==0&&(T.sort(h),S[w]=Math.min(S[w],T[0].x),S[w+2]=Math.max(S[w+2],T[T.length-1].x))}this.grid.update({bounds:S,ticks:b}),this.text.update({bounds:S,ticks:b,labels:y.labels||["x","y"],labelSize:y.labelSize||[12,12],labelFont:y.labelFont||["sans-serif","sans-serif"],title:y.title||"",titleSize:y.titleSize||18,titleFont:y.titleFont||"sans-serif"}),this.static=!!y.static,this.setDirty()},u.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var y=this.objects.length-1;y>=0;--y)this.objects[y].dispose();this.objects.length=0;for(var y=this.overlays.length-1;y>=0;--y)this.overlays[y].dispose();this.overlays.length=0,this.gl=null},u.addObject=function(y){this.objects.indexOf(y)<0&&(this.objects.push(y),this.setDirty())},u.removeObject=function(y){for(var m=this.objects,g=0;g<m.length;++g)if(m[g]===y){m.splice(g,1),this.setDirty();break}},u.addOverlay=function(y){this.overlays.indexOf(y)<0&&(this.overlays.push(y),this.setOverlayDirty())},u.removeOverlay=function(y){for(var m=this.overlays,g=0;g<m.length;++g)if(m[g]===y){m.splice(g,1),this.setOverlayDirty();break}};function d(y){var m=y.gl,g=t(m,[m.drawingBufferWidth,m.drawingBufferHeight]),x=new f(m,g);return x.grid=n(x),x.text=a(x),x.line=i(x),x.box=r(x),x.update(y),x}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(o,c,p){c.exports=u;var t=o("right-now"),n=o("3d-view"),a=o("mouse-change"),i=o("mouse-wheel"),r=o("mouse-event-offset"),f=o("has-passive-events");function u(s,h){s=s||document.body,h=h||{};var d=[.01,1/0];"distanceLimits"in h&&(d[0]=h.distanceLimits[0],d[1]=h.distanceLimits[1]),"zoomMin"in h&&(d[0]=h.zoomMin),"zoomMax"in h&&(d[1]=h.zoomMax);var y=n({center:h.center||[0,0,0],up:h.up||[0,1,0],eye:h.eye||[0,0,10],mode:h.mode||"orbit",distanceLimits:d}),m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g=0,x=s.clientWidth,A=s.clientHeight,b={keyBindingMode:"rotate",enableWheel:!0,view:y,element:s,delay:h.delay||16,rotateSpeed:h.rotateSpeed||1,zoomSpeed:h.zoomSpeed||1,translateSpeed:h.translateSpeed||1,flipX:!!h.flipX,flipY:!!h.flipY,modes:y.modes,_ortho:h._ortho||h.projection&&h.projection.type==="orthographic"||!1,tick:function(){var S=t(),w=this.delay,T=S-2*w;y.idle(S-w),y.recalcMatrix(T),y.flush(S-(100+w*2));for(var _=!0,v=y.computedMatrix,P=0;P<16;++P)_=_&&m[P]===v[P],m[P]=v[P];var M=s.clientWidth===x&&s.clientHeight===A;return x=s.clientWidth,A=s.clientHeight,_?!M:(g=Math.exp(y.computedRadius[0]),!0)},lookAt:function(S,w,T){y.lookAt(y.lastT(),S,w,T)},rotate:function(S,w,T){y.rotate(y.lastT(),S,w,T)},pan:function(S,w,T){y.pan(y.lastT(),S,w,T)},translate:function(S,w,T){y.translate(y.lastT(),S,w,T)}};return Object.defineProperties(b,{matrix:{get:function(){return y.computedMatrix},set:function(S){return y.setMatrix(y.lastT(),S),y.computedMatrix},enumerable:!0},mode:{get:function(){return y.getMode()},set:function(S){var w=y.computedUp.slice(),T=y.computedEye.slice(),_=y.computedCenter.slice();if(y.setMode(S),S==="turntable"){var v=t();y._active.lookAt(v,T,_,w),y._active.lookAt(v+500,T,_,[0,0,1]),y._active.flush(v)}return y.getMode()},enumerable:!0},center:{get:function(){return y.computedCenter},set:function(S){return y.lookAt(y.lastT(),null,S),y.computedCenter},enumerable:!0},eye:{get:function(){return y.computedEye},set:function(S){return y.lookAt(y.lastT(),S),y.computedEye},enumerable:!0},up:{get:function(){return y.computedUp},set:function(S){return y.lookAt(y.lastT(),null,null,S),y.computedUp},enumerable:!0},distance:{get:function(){return g},set:function(S){return y.setDistance(y.lastT(),S),S},enumerable:!0},distanceLimits:{get:function(){return y.getDistanceLimits(d)},set:function(S){return y.setDistanceLimits(S),S},enumerable:!0}}),s.addEventListener("contextmenu",function(S){return S.preventDefault(),!1}),b._lastX=-1,b._lastY=-1,b._lastMods={shift:!1,control:!1,alt:!1,meta:!1},b.enableMouseListeners=function(){b.mouseListener=a(s,S),s.addEventListener("touchstart",function(w){var T=r(w.changedTouches[0],s);S(0,T[0],T[1],b._lastMods),S(1,T[0],T[1],b._lastMods)},f?{passive:!0}:!1),s.addEventListener("touchmove",function(w){var T=r(w.changedTouches[0],s);S(1,T[0],T[1],b._lastMods),w.preventDefault()},f?{passive:!1}:!1),s.addEventListener("touchend",function(w){S(0,b._lastX,b._lastY,b._lastMods)},f?{passive:!0}:!1);function S(w,T,_,v){var P=b.keyBindingMode;if(P!==!1){var M=P==="rotate",E=P==="pan",D=P==="zoom",N=!!v.control,O=!!v.alt,I=!!v.shift,F=!!(w&1),V=!!(w&2),U=!!(w&4),j=1/s.clientHeight,Z=j*(T-b._lastX),te=j*(_-b._lastY),re=b.flipX?1:-1,W=b.flipY?1:-1,J=Math.PI*b.rotateSpeed,le=t();if(b._lastX!==-1&&b._lastY!==-1&&((M&&F&&!N&&!O&&!I||F&&!N&&!O&&I)&&y.rotate(le,re*J*Z,-W*J*te,0),(E&&F&&!N&&!O&&!I||V||F&&N&&!O&&!I)&&y.pan(le,-b.translateSpeed*Z*g,b.translateSpeed*te*g,0),D&&F&&!N&&!O&&!I||U||F&&!N&&O&&!I)){var ue=-b.zoomSpeed*te/window.innerHeight*(le-y.lastT())*100;y.pan(le,0,0,g*(Math.exp(ue)-1))}return b._lastX=T,b._lastY=_,b._lastMods=v,!0}}b.wheelListener=i(s,function(w,T){if(b.keyBindingMode!==!1&&!!b.enableWheel){var _=b.flipX?1:-1,v=b.flipY?1:-1,P=t();if(Math.abs(w)>Math.abs(T))y.rotate(P,0,0,-w*_*Math.PI*b.rotateSpeed/window.innerWidth);else if(!b._ortho){var M=-b.zoomSpeed*v*T/window.innerHeight*(P-y.lastT())/20;y.pan(P,0,0,g*(Math.exp(M)-1))}}},!0)},b.enableMouseListeners(),b}},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(o,c,p){var t=o("glslify"),n=o("gl-shader"),a=t([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),i=t([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);c.exports=function(r){return n(r,a,i,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(o,c,p){var t=o("./camera.js"),n=o("gl-axes3d"),a=o("gl-axes3d/properties"),i=o("gl-spikes3d"),r=o("gl-select-static"),f=o("gl-fbo"),u=o("a-big-triangle"),s=o("mouse-change"),h=o("gl-mat4/perspective"),d=o("gl-mat4/ortho"),y=o("./lib/shader"),m=o("is-mobile")({tablet:!0,featureDetect:!0});c.exports={createScene:S,createCamera:t};function g(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function x(T,_){var v=null;try{v=T.getContext("webgl",_),v||(v=T.getContext("experimental-webgl",_))}catch{return null}return v}function A(T){var _=Math.round(Math.log(Math.abs(T))/Math.log(10));if(_<0){var v=Math.round(Math.pow(10,-_));return Math.ceil(T*v)/v}else if(_>0){var v=Math.round(Math.pow(10,_));return Math.ceil(T/v)*v}return Math.ceil(T)}function b(T){return typeof T=="boolean"?T:!0}function S(T){T=T||{},T.camera=T.camera||{};var _=T.canvas;if(!_)if(_=document.createElement("canvas"),T.container){var v=T.container;v.appendChild(_)}else document.body.appendChild(_);var P=T.gl;if(P||(T.glOptions&&(m=!!T.glOptions.preserveDrawingBuffer),P=x(_,T.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:m})),!P)throw new Error("webgl not supported");var M=T.bounds||[[-10,-10,-10],[10,10,10]],E=new g,D=f(P,P.drawingBufferWidth,P.drawingBufferHeight,{preferFloat:!m}),N=y(P),O=T.cameraObject&&T.cameraObject._ortho===!0||T.camera.projection&&T.camera.projection.type==="orthographic"||!1,I={eye:T.camera.eye||[2,0,0],center:T.camera.center||[0,0,0],up:T.camera.up||[0,1,0],zoomMin:T.camera.zoomMax||.1,zoomMax:T.camera.zoomMin||100,mode:T.camera.mode||"turntable",_ortho:O},F=T.axes||{},V=n(P,F);V.enable=!F.disable;var U=T.spikes||{},j=i(P,U),Z=[],te=[],re=[],W=[],J=!0,le=!0,ue=new Array(16),se=new Array(16),G={view:null,projection:ue,model:se,_ortho:!1},le=!0,Y=[P.drawingBufferWidth,P.drawingBufferHeight],ee=T.cameraObject||t(_,I),$={gl:P,contextLost:!1,pixelRatio:T.pixelRatio||1,canvas:_,selection:E,camera:ee,axes:V,axesPixels:null,spikes:j,bounds:M,objects:Z,shape:Y,aspect:T.aspectRatio||[1,1,1],pickRadius:T.pickRadius||10,zNear:T.zNear||.01,zFar:T.zFar||1e3,fovy:T.fovy||Math.PI/4,clearColor:T.clearColor||[0,0,0,0],autoResize:b(T.autoResize),autoBounds:b(T.autoBounds),autoScale:!!T.autoScale,autoCenter:b(T.autoCenter),clipToBounds:b(T.clipToBounds),snapToData:!!T.snapToData,onselect:T.onselect||null,onrender:T.onrender||null,onclick:T.onclick||null,cameraParams:G,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(xe){this.aspect[0]=xe.x,this.aspect[1]=xe.y,this.aspect[2]=xe.z,le=!0},setBounds:function(xe,ke){this.bounds[0][xe]=ke.min,this.bounds[1][xe]=ke.max},setClearColor:function(xe){this.clearColor=xe},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},K=[P.drawingBufferWidth/$.pixelRatio|0,P.drawingBufferHeight/$.pixelRatio|0];function Q(){if(!$._stopped&&!!$.autoResize){var xe=_.parentNode,ke=1,Ae=1;xe&&xe!==document.body?(ke=xe.clientWidth,Ae=xe.clientHeight):(ke=window.innerWidth,Ae=window.innerHeight);var Oe=Math.ceil(ke*$.pixelRatio)|0,He=Math.ceil(Ae*$.pixelRatio)|0;if(Oe!==_.width||He!==_.height){_.width=Oe,_.height=He;var Ge=_.style;Ge.position=Ge.position||"absolute",Ge.left="0px",Ge.top="0px",Ge.width=ke+"px",Ge.height=Ae+"px",J=!0}}}$.autoResize&&Q(),window.addEventListener("resize",Q);function ae(){for(var xe=Z.length,ke=W.length,Ae=0;Ae<ke;++Ae)re[Ae]=0;e:for(var Ae=0;Ae<xe;++Ae){var Oe=Z[Ae],He=Oe.pickSlots;if(!He){te[Ae]=-1;continue}for(var Ge=0;Ge<ke;++Ge)if(re[Ge]+He<255){te[Ae]=Ge,Oe.setPickBase(re[Ge]+1),re[Ge]+=He;continue e}var _e=r(P,Y);te[Ae]=ke,W.push(_e),re.push(He),Oe.setPickBase(1),ke+=1}for(;ke>0&&re[ke-1]===0;)re.pop(),W.pop().dispose()}$.update=function(xe){$._stopped||(J=!0,le=!0)},$.add=function(xe){$._stopped||(xe.axes=V,Z.push(xe),te.push(-1),J=!0,le=!0,ae())},$.remove=function(xe){if(!$._stopped){var ke=Z.indexOf(xe);ke<0||(Z.splice(ke,1),te.pop(),J=!0,le=!0,ae())}},$.dispose=function(){if(!$._stopped&&($._stopped=!0,window.removeEventListener("resize",Q),_.removeEventListener("webglcontextlost",ie),$.mouseListener.enabled=!1,!$.contextLost)){V.dispose(),j.dispose();for(var xe=0;xe<Z.length;++xe)Z[xe].dispose();D.dispose();for(var xe=0;xe<W.length;++xe)W[xe].dispose();N.dispose(),P=null,V=null,j=null,Z=[]}},$._mouseRotating=!1,$._prevButtons=0,$.enableMouseListeners=function(){$.mouseListener=s(_,function(xe,ke,Ae){if(!$._stopped){var Oe=W.length,He=Z.length,Ge=E.object;E.distance=1/0,E.mouse[0]=ke,E.mouse[1]=Ae,E.object=null,E.screen=null,E.dataCoordinate=E.dataPosition=null;var _e=!1;if(xe&&$._prevButtons)$._mouseRotating=!0;else{$._mouseRotating&&(le=!0),$._mouseRotating=!1;for(var Ie=0;Ie<Oe;++Ie){var We=W[Ie].query(ke,K[1]-Ae-1,$.pickRadius);if(We){if(We.distance>E.distance)continue;for(var et=0;et<He;++et){var Ne=Z[et];if(te[et]===Ie){var De=Ne.pick(We);De&&(E.buttons=xe,E.screen=We.coord,E.distance=We.distance,E.object=Ne,E.index=De.distance,E.dataPosition=De.position,E.dataCoordinate=De.dataCoordinate,E.data=De,_e=!0)}}}}}Ge&&Ge!==E.object&&(Ge.highlight&&Ge.highlight(null),J=!0),E.object&&(E.object.highlight&&E.object.highlight(E.data),J=!0),_e=_e||E.object!==Ge,_e&&$.onselect&&$.onselect(E),xe&1&&!($._prevButtons&1)&&$.onclick&&$.onclick(E),$._prevButtons=xe}})};function ie(){if($.contextLost)return!0;P.isContextLost()&&($.contextLost=!0,$.mouseListener.enabled=!1,$.selection.object=null,$.oncontextloss&&$.oncontextloss())}_.addEventListener("webglcontextlost",ie);function oe(){if(!ie()){P.colorMask(!0,!0,!0,!0),P.depthMask(!0),P.disable(P.BLEND),P.enable(P.DEPTH_TEST),P.depthFunc(P.LEQUAL);for(var xe=Z.length,ke=W.length,Ae=0;Ae<ke;++Ae){var Oe=W[Ae];Oe.shape=K,Oe.begin();for(var He=0;He<xe;++He)if(te[He]===Ae){var Ge=Z[He];Ge.drawPick&&(Ge.pixelRatio=1,Ge.drawPick(G))}Oe.end()}}}var fe=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],ye=[fe[0].slice(),fe[1].slice()];function ce(){if(!ie()){Q();var xe=$.camera.tick();G.view=$.camera.matrix,J=J||xe,le=le||xe,V.pixelRatio=$.pixelRatio,j.pixelRatio=$.pixelRatio;var ke=Z.length,Ae=fe[0],Oe=fe[1];Ae[0]=Ae[1]=Ae[2]=1/0,Oe[0]=Oe[1]=Oe[2]=-1/0;for(var He=0;He<ke;++He){var Ge=Z[He];Ge.pixelRatio=$.pixelRatio,Ge.axes=$.axes,J=J||!!Ge.dirty,le=le||!!Ge.dirty;var _e=Ge.bounds;if(_e)for(var Ie=_e[0],We=_e[1],et=0;et<3;++et)Ae[et]=Math.min(Ae[et],Ie[et]),Oe[et]=Math.max(Oe[et],We[et])}var Ne=$.bounds;if($.autoBounds)for(var et=0;et<3;++et){if(Oe[et]<Ae[et])Ae[et]=-1,Oe[et]=1;else{Ae[et]===Oe[et]&&(Ae[et]-=1,Oe[et]+=1);var De=.05*(Oe[et]-Ae[et]);Ae[et]=Ae[et]-De,Oe[et]=Oe[et]+De}Ne[0][et]=Ae[et],Ne[1][et]=Oe[et]}for(var Ve=!1,et=0;et<3;++et)Ve=Ve||ye[0][et]!==Ne[0][et]||ye[1][et]!==Ne[1][et],ye[0][et]=Ne[0][et],ye[1][et]=Ne[1][et];if(le=le||Ve,J=J||Ve,!!J){if(Ve){for(var dt=[0,0,0],He=0;He<3;++He)dt[He]=A((Ne[1][He]-Ne[0][He])/10);V.autoTicks?V.update({bounds:Ne,tickSpacing:dt}):V.update({bounds:Ne})}var Dt=P.drawingBufferWidth,Gt=P.drawingBufferHeight;Y[0]=Dt,Y[1]=Gt,K[0]=Math.max(Dt/$.pixelRatio,1)|0,K[1]=Math.max(Gt/$.pixelRatio,1)|0,w($,O);for(var He=0;He<ke;++He){var Ge=Z[He];Ge.axesBounds=Ne,$.clipToBounds&&(Ge.clipBounds=Ne)}E.object&&($.snapToData?j.position=E.dataCoordinate:j.position=E.dataPosition,j.bounds=Ne),le&&(le=!1,oe()),$.axesPixels=a($.axes,G,Dt,Gt),$.onrender&&$.onrender(),P.bindFramebuffer(P.FRAMEBUFFER,null),P.viewport(0,0,Dt,Gt),$.clearRGBA(),P.depthMask(!0),P.colorMask(!0,!0,!0,!0),P.enable(P.DEPTH_TEST),P.depthFunc(P.LEQUAL),P.disable(P.BLEND),P.disable(P.CULL_FACE);var Mt=!1;V.enable&&(Mt=Mt||V.isTransparent(),V.draw(G)),j.axes=V,E.object&&j.draw(G),P.disable(P.CULL_FACE);for(var He=0;He<ke;++He){var Ge=Z[He];Ge.axes=V,Ge.pixelRatio=$.pixelRatio,Ge.isOpaque&&Ge.isOpaque()&&Ge.draw(G),Ge.isTransparent&&Ge.isTransparent()&&(Mt=!0)}if(Mt){D.shape=Y,D.bind(),P.clear(P.DEPTH_BUFFER_BIT),P.colorMask(!1,!1,!1,!1),P.depthMask(!0),P.depthFunc(P.LESS),V.enable&&V.isTransparent()&&V.drawTransparent(G);for(var He=0;He<ke;++He){var Ge=Z[He];Ge.isOpaque&&Ge.isOpaque()&&Ge.draw(G)}P.enable(P.BLEND),P.blendEquation(P.FUNC_ADD),P.blendFunc(P.ONE,P.ONE_MINUS_SRC_ALPHA),P.colorMask(!0,!0,!0,!0),P.depthMask(!1),P.clearColor(0,0,0,0),P.clear(P.COLOR_BUFFER_BIT),V.isTransparent()&&V.drawTransparent(G);for(var He=0;He<ke;++He){var Ge=Z[He];Ge.isTransparent&&Ge.isTransparent()&&Ge.drawTransparent(G)}P.bindFramebuffer(P.FRAMEBUFFER,null),P.blendFunc(P.ONE,P.ONE_MINUS_SRC_ALPHA),P.disable(P.DEPTH_TEST),N.bind(),D.color[0].bind(0),N.uniforms.accumBuffer=0,u(P),P.disable(P.BLEND)}J=!1;for(var He=0;He<ke;++He)Z[He].dirty=!1}}}function me(){$._stopped||$.contextLost||(ce(),requestAnimationFrame(me))}return $.enableMouseListeners(),me(),$.redraw=function(){$._stopped||(J=!0,ce())},$}function w(T,_){var v=T.bounds,P=T.cameraParams,M=P.projection,E=P.model,D=T.gl.drawingBufferWidth,N=T.gl.drawingBufferHeight,O=T.zNear,I=T.zFar,F=T.fovy,V=D/N;_?(d(M,-V,V,-1,1,O,I),P._ortho=!0):(h(M,F,V,O,I),P._ortho=!1);for(var U=0;U<16;++U)E[U]=0;E[15]=1;for(var j=0,U=0;U<3;++U)j=Math.max(j,v[1][U]-v[0][U]);for(var U=0;U<3;++U)T.autoScale?E[5*U]=T.aspect[U]/(v[1][U]-v[0][U]):E[5*U]=1/j,T.autoCenter&&(E[12+U]=-E[5*U]*.5*(v[0][U]+v[1][U]))}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(o,c,p){var t=o("glslify");p.pointVertex=t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),p.pointFragment=t([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),p.pickVertex=t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),p.pickFragment=t([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:231}],123:[function(o,c,p){var t=o("gl-shader"),n=o("gl-buffer"),a=o("typedarray-pool"),i=o("./lib/shader");c.exports=s;function r(h,d,y,m,g){this.plot=h,this.offsetBuffer=d,this.pickBuffer=y,this.shader=m,this.pickShader=g,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var f=r.prototype;f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},f.update=function(h){var d;h=h||{};function y(w,T){return w in h?h[w]:T}this.sizeMin=y("sizeMin",.5),this.sizeMax=y("sizeMax",20),this.color=y("color",[1,0,0,1]).slice(),this.areaRatio=y("areaRatio",1),this.borderColor=y("borderColor",[0,0,0,1]).slice(),this.blend=y("blend",!1);var m=h.positions.length>>>1,g=h.positions instanceof Float32Array,x=h.idToIndex instanceof Int32Array&&h.idToIndex.length>=m,A=h.positions,b=g?A:a.mallocFloat32(A.length),S=x?h.idToIndex:a.mallocInt32(m);if(g||b.set(A),!x)for(b.set(A),d=0;d<m;d++)S[d]=d;this.points=A,this.offsetBuffer.update(b),this.pickBuffer.update(S),g||a.free(b),x||a.free(S),this.pointCount=m,this.pickOffset=0};function u(h,d){var y=0,m=h.length>>>1,g;for(g=0;g<m;g++){var x=h[g*2],A=h[g*2+1];x>=d[0]&&x<=d[2]&&A>=d[1]&&A<=d[3]&&y++}return y}f.unifiedDraw=function(){var h=[1,0,0,0,1,0,0,0,1],d=[0,0,0,0];return function(y){var m=y!==void 0,g=m?this.pickShader:this.shader,x=this.plot.gl,A=this.plot.dataBox;if(this.pointCount===0)return y;var b=A[2]-A[0],S=A[3]-A[1],w=u(this.points,A),T=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(w,.33333)));h[0]=2/b,h[4]=2/S,h[6]=-2*A[0]/b-1,h[7]=-2*A[1]/S-1,this.offsetBuffer.bind(),g.bind(),g.attributes.position.pointer(),g.uniforms.matrix=h,g.uniforms.color=this.color,g.uniforms.borderColor=this.borderColor,g.uniforms.pointCloud=T<5,g.uniforms.pointSize=T,g.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),m&&(d[0]=y&255,d[1]=y>>8&255,d[2]=y>>16&255,d[3]=y>>24&255,this.pickBuffer.bind(),g.attributes.pickId.pointer(x.UNSIGNED_BYTE),g.uniforms.pickOffset=d,this.pickOffset=y);var _=x.getParameter(x.BLEND),v=x.getParameter(x.DITHER);return _&&!this.blend&&x.disable(x.BLEND),v&&x.disable(x.DITHER),x.drawArrays(x.POINTS,0,this.pointCount),_&&!this.blend&&x.enable(x.BLEND),v&&x.enable(x.DITHER),y+this.pointCount}}(),f.draw=f.unifiedDraw,f.drawPick=f.unifiedDraw,f.pick=function(h,d,y){var m=this.pickOffset,g=this.pointCount;if(y<m||y>=m+g)return null;var x=y-m,A=this.points;return{object:this,pointId:x,dataCoord:[A[2*x],A[2*x+1]]}};function s(h,d){var y=h.gl,m=n(y),g=n(y),x=t(y,i.pointVertex,i.pointFragment),A=t(y,i.pickVertex,i.pickFragment),b=new r(h,m,g,x,A);return b.update(d),h.addObject(b),b}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(o,c,p){c.exports=t;function t(n,a,i,r){var f=a[0],u=a[1],s=a[2],h=a[3],d=i[0],y=i[1],m=i[2],g=i[3],x,A,b,S,w;return A=f*d+u*y+s*m+h*g,A<0&&(A=-A,d=-d,y=-y,m=-m,g=-g),1-A>1e-6?(x=Math.acos(A),b=Math.sin(x),S=Math.sin((1-r)*x)/b,w=Math.sin(r*x)/b):(S=1-r,w=r),n[0]=S*f+w*d,n[1]=S*u+w*y,n[2]=S*s+w*m,n[3]=S*h+w*g,n}},{}],125:[function(o,c,p){c.exports=function(t){return!t&&t!==0?"":t.toString()}},{}],126:[function(o,c,p){var t=o("vectorize-text");c.exports=a;var n={};function a(i,r,f){var u=n[r];if(u||(u=n[r]={}),i in u)return u[i];var s={textAlign:"center",textBaseline:"middle",lineHeight:1,font:r,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};s.triangles=!0;var h=t(i,s);s.triangles=!1;var d=t(i,s),y,m;if(f&&f!==1){for(y=0;y<h.positions.length;++y)for(m=0;m<h.positions[y].length;++m)h.positions[y][m]/=f;for(y=0;y<d.positions.length;++y)for(m=0;m<d.positions[y].length;++m)d.positions[y][m]/=f}var g=[[1/0,1/0],[-1/0,-1/0]],x=d.positions.length;for(y=0;y<x;++y){var A=d.positions[y];for(m=0;m<2;++m)g[0][m]=Math.min(g[0][m],A[m]),g[1][m]=Math.max(g[1][m],A[m])}return u[i]=[h,d,g]}},{"vectorize-text":311}],127:[function(o,c,p){var t=o("gl-shader"),n=o("glslify"),a=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),i=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),r=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),f=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),u=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),s=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],h={vertex:a,fragment:f,attributes:s},d={vertex:i,fragment:f,attributes:s},y={vertex:r,fragment:f,attributes:s},m={vertex:a,fragment:u,attributes:s},g={vertex:i,fragment:u,attributes:s},x={vertex:r,fragment:u,attributes:s};function A(b,S){var w=t(b,S),T=w.attributes;return T.position.location=0,T.color.location=1,T.glyph.location=2,T.id.location=3,w}p.createPerspective=function(b){return A(b,h)},p.createOrtho=function(b){return A(b,d)},p.createProject=function(b){return A(b,y)},p.createPickPerspective=function(b){return A(b,m)},p.createPickOrtho=function(b){return A(b,g)},p.createPickProject=function(b){return A(b,x)}},{"gl-shader":132,glslify:231}],128:[function(o,c,p){var t=o("is-string-blank"),n=o("gl-buffer"),a=o("gl-vao"),i=o("typedarray-pool"),r=o("gl-mat4/multiply"),f=o("./lib/shaders"),u=o("./lib/glyphs"),s=o("./lib/get-simple-string"),h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];c.exports=te;function d(re,W){var J=re[0],le=re[1],ue=re[2],se=re[3];return re[0]=W[0]*J+W[4]*le+W[8]*ue+W[12]*se,re[1]=W[1]*J+W[5]*le+W[9]*ue+W[13]*se,re[2]=W[2]*J+W[6]*le+W[10]*ue+W[14]*se,re[3]=W[3]*J+W[7]*le+W[11]*ue+W[15]*se,re}function y(re,W,J,le){return d(le,le),d(le,le),d(le,le)}function m(re,W){this.index=re,this.dataCoordinate=this.position=W}function g(re){return re===!0||re>1?1:re}function x(re,W,J,le,ue,se,G,Y,ee,$,K,Q){this.gl=re,this.pixelRatio=1,this.shader=W,this.orthoShader=J,this.projectShader=le,this.pointBuffer=ue,this.colorBuffer=se,this.glyphBuffer=G,this.idBuffer=Y,this.vao=ee,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=$,this.pickOrthoShader=K,this.pickProjectShader=Q,this.points=[],this._selectResult=new m(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var A=x.prototype;A.pickSlots=1,A.setPickBase=function(re){this.pickId=re},A.isTransparent=function(){if(this.hasAlpha)return!0;for(var re=0;re<3;++re)if(this.axesProject[re]&&this.projectHasAlpha)return!0;return!1},A.isOpaque=function(){if(!this.hasAlpha)return!0;for(var re=0;re<3;++re)if(this.axesProject[re]&&!this.projectHasAlpha)return!0;return!1};var b=[0,0],S=[0,0,0],w=[0,0,0],T=[0,0,0,1],_=[0,0,0,1],v=h.slice(),P=[0,0,0],M=[[0,0,0],[0,0,0]];function E(re){return re[0]=re[1]=re[2]=0,re}function D(re,W){return re[0]=W[0],re[1]=W[1],re[2]=W[2],re[3]=1,re}function N(re,W,J,le){return re[0]=W[0],re[1]=W[1],re[2]=W[2],re[J]=le,re}function O(re){for(var W=M,J=0;J<2;++J)for(var le=0;le<3;++le)W[J][le]=Math.max(Math.min(re[J][le],1e8),-1e8);return W}function I(re,W,J,le){var ue=W.axesProject,se=W.gl,G=re.uniforms,Y=J.model||h,ee=J.view||h,$=J.projection||h,K=W.axesBounds,Q=O(W.clipBounds),ae;W.axes&&W.axes.lastCubeProps?ae=W.axes.lastCubeProps.axis:ae=[1,1,1],b[0]=2/se.drawingBufferWidth,b[1]=2/se.drawingBufferHeight,re.bind(),G.view=ee,G.projection=$,G.screenSize=b,G.highlightId=W.highlightId,G.highlightScale=W.highlightScale,G.clipBounds=Q,G.pickGroup=W.pickId/255,G.pixelRatio=le;for(var ie=0;ie<3;++ie)if(!!ue[ie]){G.scale=W.projectScale[ie],G.opacity=W.projectOpacity[ie];for(var oe=v,fe=0;fe<16;++fe)oe[fe]=0;for(var fe=0;fe<4;++fe)oe[5*fe]=1;oe[5*ie]=0,ae[ie]<0?oe[12+ie]=K[0][ie]:oe[12+ie]=K[1][ie],r(oe,Y,oe),G.model=oe;var ye=(ie+1)%3,ce=(ie+2)%3,me=E(S),xe=E(w);me[ye]=1,xe[ce]=1;var ke=y($,ee,Y,D(T,me)),Ae=y($,ee,Y,D(_,xe));if(Math.abs(ke[1])>Math.abs(Ae[1])){var Oe=ke;ke=Ae,Ae=Oe,Oe=me,me=xe,xe=Oe;var He=ye;ye=ce,ce=He}ke[0]<0&&(me[ye]=-1),Ae[1]>0&&(xe[ce]=-1);for(var Ge=0,_e=0,fe=0;fe<4;++fe)Ge+=Math.pow(Y[4*ye+fe],2),_e+=Math.pow(Y[4*ce+fe],2);me[ye]/=Math.sqrt(Ge),xe[ce]/=Math.sqrt(_e),G.axes[0]=me,G.axes[1]=xe,G.fragClipBounds[0]=N(P,Q[0],ie,-1e8),G.fragClipBounds[1]=N(P,Q[1],ie,1e8),W.vao.bind(),W.vao.draw(se.TRIANGLES,W.vertexCount),W.lineWidth>0&&(se.lineWidth(W.lineWidth*le),W.vao.draw(se.LINES,W.lineVertexCount,W.vertexCount)),W.vao.unbind()}}var F=[-1e8,-1e8,-1e8],V=[1e8,1e8,1e8],U=[F,V];function j(re,W,J,le,ue,se,G){var Y=J.gl;if((se===J.projectHasAlpha||G)&&I(W,J,le,ue),se===J.hasAlpha||G){re.bind();var ee=re.uniforms;ee.model=le.model||h,ee.view=le.view||h,ee.projection=le.projection||h,b[0]=2/Y.drawingBufferWidth,b[1]=2/Y.drawingBufferHeight,ee.screenSize=b,ee.highlightId=J.highlightId,ee.highlightScale=J.highlightScale,ee.fragClipBounds=U,ee.clipBounds=J.axes.bounds,ee.opacity=J.opacity,ee.pickGroup=J.pickId/255,ee.pixelRatio=ue,J.vao.bind(),J.vao.draw(Y.TRIANGLES,J.vertexCount),J.lineWidth>0&&(Y.lineWidth(J.lineWidth*ue),J.vao.draw(Y.LINES,J.lineVertexCount,J.vertexCount)),J.vao.unbind()}}A.draw=function(re){var W=this.useOrtho?this.orthoShader:this.shader;j(W,this.projectShader,this,re,this.pixelRatio,!1,!1)},A.drawTransparent=function(re){var W=this.useOrtho?this.orthoShader:this.shader;j(W,this.projectShader,this,re,this.pixelRatio,!0,!1)},A.drawPick=function(re){var W=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;j(W,this.pickProjectShader,this,re,1,!0,!0)},A.pick=function(re){if(!re||re.id!==this.pickId)return null;var W=re.value[2]+(re.value[1]<<8)+(re.value[0]<<16);if(W>=this.pointCount||W<0)return null;var J=this.points[W],le=this._selectResult;le.index=W;for(var ue=0;ue<3;++ue)le.position[ue]=le.dataCoordinate[ue]=J[ue];return le},A.highlight=function(re){if(!re)this.highlightId=[1,1,1,1];else{var W=re.index,J=W&255,le=W>>8&255,ue=W>>16&255;this.highlightId=[J/255,le/255,ue/255,0]}};function Z(re,W,J,le){var ue;Array.isArray(re)?W<re.length?ue=re[W]:ue=void 0:ue=re,ue=s(ue);var se=!0;t(ue)&&(ue="\u25BC",se=!1);var G=u(ue,J,le);return{mesh:G[0],lines:G[1],bounds:G[2],visible:se}}A.update=function(re){if(re=re||{},"perspective"in re&&(this.useOrtho=!re.perspective),"orthographic"in re&&(this.useOrtho=!!re.orthographic),"lineWidth"in re&&(this.lineWidth=re.lineWidth),"project"in re)if(Array.isArray(re.project))this.axesProject=re.project;else{var W=!!re.project;this.axesProject=[W,W,W]}if("projectScale"in re)if(Array.isArray(re.projectScale))this.projectScale=re.projectScale.slice();else{var J=+re.projectScale;this.projectScale=[J,J,J]}if(this.projectHasAlpha=!1,"projectOpacity"in re){if(Array.isArray(re.projectOpacity))this.projectOpacity=re.projectOpacity.slice();else{var J=+re.projectOpacity;this.projectOpacity=[J,J,J]}for(var le=0;le<3;++le)this.projectOpacity[le]=g(this.projectOpacity[le]),this.projectOpacity[le]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in re&&(this.opacity=g(re.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var ue=re.position,se=re.font||"normal",G=re.alignment||[0,0],Y,ee;if(G.length===2)Y=G[0],ee=G[1];else{Y=[],ee=[];for(var le=0;le<G.length;++le)Y[le]=G[le][0],ee[le]=G[le][1]}var $=[1/0,1/0,1/0],K=[-1/0,-1/0,-1/0],Q=re.glyph,ae=re.color,ie=re.size,oe=re.angle,fe=re.lineColor,ye=-1,ce=0,me=0,xe=0;if(ue.length){xe=ue.length;e:for(var le=0;le<xe;++le){for(var ke=ue[le],Ae=0;Ae<3;++Ae)if(isNaN(ke[Ae])||!isFinite(ke[Ae]))continue e;var Oe=Z(Q,le,se,this.pixelRatio),He=Oe.mesh,Ge=Oe.lines,_e=Oe.bounds;ce+=He.cells.length*3,me+=Ge.edges.length*2}}var Ie=ce+me,We=i.mallocFloat(3*Ie),et=i.mallocFloat(4*Ie),Ne=i.mallocFloat(2*Ie),De=i.mallocUint32(Ie);if(Ie>0){var Ve=0,dt=ce,Dt=[0,0,0,1],Gt=[0,0,0,1],Mt=Array.isArray(ae)&&Array.isArray(ae[0]),zt=Array.isArray(fe)&&Array.isArray(fe[0]);e:for(var le=0;le<xe;++le){ye+=1;for(var ke=ue[le],Ae=0;Ae<3;++Ae){if(isNaN(ke[Ae])||!isFinite(ke[Ae]))continue e;K[Ae]=Math.max(K[Ae],ke[Ae]),$[Ae]=Math.min($[Ae],ke[Ae])}var Oe=Z(Q,le,se,this.pixelRatio),He=Oe.mesh,Ge=Oe.lines,_e=Oe.bounds,Nt=Oe.visible;if(!Nt)Dt=[1,1,1,0];else if(Array.isArray(ae)){var Et;if(Mt?le<ae.length?Et=ae[le]:Et=[0,0,0,0]:Et=ae,Et.length===3){for(var Ae=0;Ae<3;++Ae)Dt[Ae]=Et[Ae];Dt[3]=1}else if(Et.length===4){for(var Ae=0;Ae<4;++Ae)Dt[Ae]=Et[Ae];!this.hasAlpha&&Et[3]<1&&(this.hasAlpha=!0)}}else Dt[0]=Dt[1]=Dt[2]=0,Dt[3]=1;if(!Nt)Gt=[1,1,1,0];else if(Array.isArray(fe)){var Et;if(zt?le<fe.length?Et=fe[le]:Et=[0,0,0,0]:Et=fe,Et.length===3){for(var Ae=0;Ae<3;++Ae)Gt[Ae]=Et[Ae];Gt[Ae]=1}else if(Et.length===4){for(var Ae=0;Ae<4;++Ae)Gt[Ae]=Et[Ae];!this.hasAlpha&&Et[3]<1&&(this.hasAlpha=!0)}}else Gt[0]=Gt[1]=Gt[2]=0,Gt[3]=1;var At=.5;Nt?Array.isArray(ie)?le<ie.length?At=+ie[le]:At=12:ie?At=+ie:this.useOrtho&&(At=12):At=0;var it=0;Array.isArray(oe)?le<oe.length?it=+oe[le]:it=0:oe&&(it=+oe);for(var ht=Math.cos(it),$e=Math.sin(it),ke=ue[le],Ae=0;Ae<3;++Ae)K[Ae]=Math.max(K[Ae],ke[Ae]),$[Ae]=Math.min($[Ae],ke[Ae]);var Ee=Y,Xe=ee,Ee=0;Array.isArray(Y)?le<Y.length?Ee=Y[le]:Ee=0:Y&&(Ee=Y);var Xe=0;Array.isArray(ee)?le<ee.length?Xe=ee[le]:Xe=0:ee&&(Xe=ee),Ee*=Ee>0?1-_e[0][0]:Ee<0?1+_e[1][0]:1,Xe*=Xe>0?1-_e[0][1]:Xe<0?1+_e[1][1]:1;for(var rt=[Ee,Xe],ut=He.cells||[],Pt=He.positions||[],Ae=0;Ae<ut.length;++Ae)for(var kt=ut[Ae],Bt=0;Bt<3;++Bt){for(var Xt=0;Xt<3;++Xt)We[3*Ve+Xt]=ke[Xt];for(var Xt=0;Xt<4;++Xt)et[4*Ve+Xt]=Dt[Xt];De[Ve]=ye;var Ut=Pt[kt[Bt]];Ne[2*Ve]=At*(ht*Ut[0]-$e*Ut[1]+rt[0]),Ne[2*Ve+1]=At*($e*Ut[0]+ht*Ut[1]+rt[1]),Ve+=1}for(var ut=Ge.edges,Pt=Ge.positions,Ae=0;Ae<ut.length;++Ae)for(var kt=ut[Ae],Bt=0;Bt<2;++Bt){for(var Xt=0;Xt<3;++Xt)We[3*dt+Xt]=ke[Xt];for(var Xt=0;Xt<4;++Xt)et[4*dt+Xt]=Gt[Xt];De[dt]=ye;var Ut=Pt[kt[Bt]];Ne[2*dt]=At*(ht*Ut[0]-$e*Ut[1]+rt[0]),Ne[2*dt+1]=At*($e*Ut[0]+ht*Ut[1]+rt[1]),dt+=1}}}this.bounds=[$,K],this.points=ue,this.pointCount=ue.length,this.vertexCount=ce,this.lineVertexCount=me,this.pointBuffer.update(We),this.colorBuffer.update(et),this.glyphBuffer.update(Ne),this.idBuffer.update(De),i.free(We),i.free(et),i.free(Ne),i.free(De)},A.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function te(re){var W=re.gl,J=f.createPerspective(W),le=f.createOrtho(W),ue=f.createProject(W),se=f.createPickPerspective(W),G=f.createPickOrtho(W),Y=f.createPickProject(W),ee=n(W),$=n(W),K=n(W),Q=n(W),ae=a(W,[{buffer:ee,size:3,type:W.FLOAT},{buffer:$,size:4,type:W.FLOAT},{buffer:K,size:2,type:W.FLOAT},{buffer:Q,size:4,type:W.UNSIGNED_BYTE,normalized:!0}]),ie=new x(W,J,le,ue,ee,$,K,Q,ae,se,G,Y);return ie.update(re),ie}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(o,c,p){var t=o("glslify");p.boxVertex=t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),p.boxFragment=t([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:231}],130:[function(o,c,p){var t=o("gl-shader"),n=o("gl-buffer"),a=o("./lib/shaders");c.exports=f;function i(u,s,h){this.plot=u,this.boxBuffer=s,this.boxShader=h,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var r=i.prototype;r.draw=function(){if(!!this.enabled){var u=this.plot,s=this.selectBox,h=this.borderWidth;this.innerFill;var d=this.innerColor;this.outerFill;var y=this.outerColor,m=this.borderColor,g=u.box,x=u.screenBox,A=u.dataBox,b=u.viewBox,S=u.pixelRatio,w=(s[0]-A[0])*(b[2]-b[0])/(A[2]-A[0])+b[0],T=(s[1]-A[1])*(b[3]-b[1])/(A[3]-A[1])+b[1],_=(s[2]-A[0])*(b[2]-b[0])/(A[2]-A[0])+b[0],v=(s[3]-A[1])*(b[3]-b[1])/(A[3]-A[1])+b[1];if(w=Math.max(w,b[0]),T=Math.max(T,b[1]),_=Math.min(_,b[2]),v=Math.min(v,b[3]),!(_<w||v<T)){g.bind();var P=x[2]-x[0],M=x[3]-x[1];if(this.outerFill&&(g.drawBox(0,0,P,T,y),g.drawBox(0,T,w,v,y),g.drawBox(0,v,P,M,y),g.drawBox(_,T,P,v,y)),this.innerFill&&g.drawBox(w,T,_,v,d),h>0){var E=h*S;g.drawBox(w-E,T-E,_+E,T+E,m),g.drawBox(w-E,v-E,_+E,v+E,m),g.drawBox(w-E,T-E,w+E,v+E,m),g.drawBox(_-E,T-E,_+E,v+E,m)}}}},r.update=function(u){u=u||{},this.innerFill=!!u.innerFill,this.outerFill=!!u.outerFill,this.innerColor=(u.innerColor||[0,0,0,.5]).slice(),this.outerColor=(u.outerColor||[0,0,0,.5]).slice(),this.borderColor=(u.borderColor||[0,0,0,1]).slice(),this.borderWidth=u.borderWidth||0,this.selectBox=(u.selectBox||this.selectBox).slice()},r.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function f(u,s){var h=u.gl,d=n(h,[0,0,0,1,1,0,1,1]),y=t(h,a.boxVertex,a.boxFragment),m=new i(u,d,y);return m.update(s),u.addOverlay(m),m}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(o,c,p){c.exports=h;var t=o("gl-fbo"),n=o("typedarray-pool"),a=o("ndarray"),i=o("bit-twiddle").nextPow2,r=function(d,y,m){for(var g=1e8,x=-1,A=-1,b=d.shape[0],S=d.shape[1],w=0;w<b;w++)for(var T=0;T<S;T++){var _=d.get(w,T,0),v=d.get(w,T,1),P=d.get(w,T,2),M=d.get(w,T,3);if(_<255||v<255||P<255||M<255){var E=y-w,D=m-T,N=E*E+D*D;N<g&&(g=N,x=w,A=T)}}return[x,A,g]};function f(d,y,m,g,x){this.coord=[d,y],this.id=m,this.value=g,this.distance=x}function u(d,y,m){this.gl=d,this.fbo=y,this.buffer=m,this._readTimeout=null;var g=this;this._readCallback=function(){!g.gl||(y.bind(),d.readPixels(0,0,y.shape[0],y.shape[1],d.RGBA,d.UNSIGNED_BYTE,g.buffer),g._readTimeout=null)}}var s=u.prototype;Object.defineProperty(s,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(d){if(!!this.gl){this.fbo.shape=d;var y=this.fbo.shape[0],m=this.fbo.shape[1];if(m*y*4>this.buffer.length){n.free(this.buffer);for(var g=this.buffer=n.mallocUint8(i(m*y*4)),x=0;x<m*y*4;++x)g[x]=255}return d}}}),s.begin=function(){var d=this.gl;this.shape,!!d&&(this.fbo.bind(),d.clearColor(1,1,1,1),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT))},s.end=function(){var d=this.gl;!d||(d.bindFramebuffer(d.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},s.query=function(d,y,m){if(!this.gl)return null;var g=this.fbo.shape.slice();d=d|0,y=y|0,typeof m!="number"&&(m=1);var x=Math.min(Math.max(d-m,0),g[0])|0,A=Math.min(Math.max(d+m,0),g[0])|0,b=Math.min(Math.max(y-m,0),g[1])|0,S=Math.min(Math.max(y+m,0),g[1])|0;if(A<=x||S<=b)return null;var w=[A-x,S-b],T=a(this.buffer,[w[0],w[1],4],[4,g[0]*4,1],4*(x+g[0]*b)),_=r(T.hi(w[0],w[1],1),m,m),v=_[0],P=_[1];if(v<0||Math.pow(this.radius,2)<_[2])return null;var M=T.get(v,P,0),E=T.get(v,P,1),D=T.get(v,P,2),N=T.get(v,P,3);return new f(v+x|0,P+b|0,M,[E,D,N],Math.sqrt(_[2]))},s.dispose=function(){!this.gl||(this.fbo.dispose(),n.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function h(d,y){var m=y[0],g=y[1],x={},A=t(d,m,g,x),b=n.mallocUint8(m*g*4);return new u(d,A,b)}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(o,c,p){var t=o("./lib/create-uniforms"),n=o("./lib/create-attributes"),a=o("./lib/reflect"),i=o("./lib/shader-cache"),r=o("./lib/runtime-reflect"),f=o("./lib/GLError");function u(y){this.gl=y,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var s=u.prototype;s.bind=function(){this.program||this._relink();var y,m=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),g=this.gl.lastAttribCount;if(m>g)for(y=g;y<m;y++)this.gl.enableVertexAttribArray(y);else if(g>m)for(y=m;y<g;y++)this.gl.disableVertexAttribArray(y);this.gl.lastAttribCount=m,this.gl.useProgram(this.program)},s.dispose=function(){for(var y=this.gl.lastAttribCount,m=0;m<y;m++)this.gl.disableVertexAttribArray(m);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function h(y,m){return y.name<m.name?-1:1}s.update=function(y,m,g,x){if(!m||arguments.length===1){var A=y;y=A.vertex,m=A.fragment,g=A.uniforms,x=A.attributes}var b=this,S=b.gl,w=b._vref;b._vref=i.shader(S,S.VERTEX_SHADER,y),w&&w.dispose(),b.vertShader=b._vref.shader;var T=this._fref;if(b._fref=i.shader(S,S.FRAGMENT_SHADER,m),T&&T.dispose(),b.fragShader=b._fref.shader,!g||!x){var _=S.createProgram();if(S.attachShader(_,b.fragShader),S.attachShader(_,b.vertShader),S.linkProgram(_),!S.getProgramParameter(_,S.LINK_STATUS)){var v=S.getProgramInfoLog(_);throw new f(v,"Error linking program:"+v)}g=g||r.uniforms(S,_),x=x||r.attributes(S,_),S.deleteProgram(_)}x=x.slice(),x.sort(h);var P=[],M=[],E=[],D;for(D=0;D<x.length;++D){var N=x[D];if(N.type.indexOf("mat")>=0){for(var O=N.type.charAt(N.type.length-1)|0,I=new Array(O),F=0;F<O;++F)I[F]=E.length,M.push(N.name+"["+F+"]"),typeof N.location=="number"?E.push(N.location+F):Array.isArray(N.location)&&N.location.length===O&&typeof N.location[F]=="number"?E.push(N.location[F]|0):E.push(-1);P.push({name:N.name,type:N.type,locations:I})}else P.push({name:N.name,type:N.type,locations:[E.length]}),M.push(N.name),typeof N.location=="number"?E.push(N.location|0):E.push(-1)}var V=0;for(D=0;D<E.length;++D)if(E[D]<0){for(;E.indexOf(V)>=0;)V+=1;E[D]=V}var U=new Array(g.length);function j(){b.program=i.program(S,b._vref,b._fref,M,E);for(var Z=0;Z<g.length;++Z)U[Z]=S.getUniformLocation(b.program,g[Z].name)}j(),b._relink=j,b.types={uniforms:a(g),attributes:a(x)},b.attributes=n(S,b,P,E),Object.defineProperty(b,"uniforms",t(S,b,g,U))};function d(y,m,g,x,A){var b=new u(y);return b.update(m,g,x,A),b}c.exports=d},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(o,c,p){function t(n,a,i){this.shortMessage=a||"",this.longMessage=i||"",this.rawError=n||"",this.message="gl-shader: "+(a||n||"")+(i?`
`+i:""),this.stack=new Error().stack}t.prototype=new Error,t.prototype.name="GLError",t.prototype.constructor=t,c.exports=t},{}],134:[function(o,c,p){c.exports=u;var t=o("./GLError");function n(s,h,d,y,m,g){this._gl=s,this._wrapper=h,this._index=d,this._locations=y,this._dimension=m,this._constFunc=g}var a=n.prototype;a.pointer=function(h,d,y,m){var g=this,x=g._gl,A=g._locations[g._index];x.vertexAttribPointer(A,g._dimension,h||x.FLOAT,!!d,y||0,m||0),x.enableVertexAttribArray(A)},a.set=function(s,h,d,y){return this._constFunc(this._locations[this._index],s,h,d,y)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(s){return s!==this._locations[this._index]&&(this._locations[this._index]=s|0,this._wrapper.program=null),s|0}});var i=[function(s,h,d){return d.length===void 0?s.vertexAttrib1f(h,d):s.vertexAttrib1fv(h,d)},function(s,h,d,y){return d.length===void 0?s.vertexAttrib2f(h,d,y):s.vertexAttrib2fv(h,d)},function(s,h,d,y,m){return d.length===void 0?s.vertexAttrib3f(h,d,y,m):s.vertexAttrib3fv(h,d)},function(s,h,d,y,m,g){return d.length===void 0?s.vertexAttrib4f(h,d,y,m,g):s.vertexAttrib4fv(h,d)}];function r(s,h,d,y,m,g,x){var A=i[m],b=new n(s,h,d,y,m,A);Object.defineProperty(g,x,{set:function(S){return s.disableVertexAttribArray(y[d]),A(s,y[d],S),S},get:function(){return b},enumerable:!0})}function f(s,h,d,y,m,g,x){for(var A=new Array(m),b=new Array(m),S=0;S<m;++S)r(s,h,d[S],y,m,A,S),b[S]=A[S];Object.defineProperty(A,"location",{set:function(_){if(Array.isArray(_))for(var v=0;v<m;++v)b[v].location=_[v];else for(var v=0;v<m;++v)b[v].location=_+v;return _},get:function(){for(var _=new Array(m),v=0;v<m;++v)_[v]=y[d[v]];return _},enumerable:!0}),A.pointer=function(_,v,P,M){_=_||s.FLOAT,v=!!v,P=P||m*m,M=M||0;for(var E=0;E<m;++E){var D=y[d[E]];s.vertexAttribPointer(D,m,_,v,P,M+E*m),s.enableVertexAttribArray(D)}};var w=new Array(m),T=s["vertexAttrib"+m+"fv"];Object.defineProperty(g,x,{set:function(_){for(var v=0;v<m;++v){var P=y[d[v]];if(s.disableVertexAttribArray(P),Array.isArray(_[0]))T.call(s,P,_[v]);else{for(var M=0;M<m;++M)w[M]=_[m*v+M];T.call(s,P,w)}}return _},get:function(){return A},enumerable:!0})}function u(s,h,d,y){for(var m={},g=0,x=d.length;g<x;++g){var A=d[g],b=A.name,S=A.type,w=A.locations;switch(S){case"bool":case"int":case"float":r(s,h,w[0],y,1,m,b);break;default:if(S.indexOf("vec")>=0){var T=S.charCodeAt(S.length-1)-48;if(T<2||T>4)throw new t("","Invalid data type for attribute "+b+": "+S);r(s,h,w[0],y,T,m,b)}else if(S.indexOf("mat")>=0){var T=S.charCodeAt(S.length-1)-48;if(T<2||T>4)throw new t("","Invalid data type for attribute "+b+": "+S);f(s,h,w,y,T,m,b)}else throw new t("","Unknown data type for attribute "+b+": "+S);break}}return m}},{"./GLError":133}],135:[function(o,c,p){var t=o("./reflect"),n=o("./GLError");c.exports=r;function a(f){return function(){return f}}function i(f,u){for(var s=new Array(f),h=0;h<f;++h)s[h]=u;return s}function r(f,u,s,h){function d(S){return function(w,T,_){return w.getUniform(T.program,_[S])}}function y(S){return function(T){for(var _=m("",S),v=0;v<_.length;++v){var P=_[v],M=P[0],E=P[1];if(h[E]){var D=T;if(typeof M=="string"&&(M.indexOf(".")===0||M.indexOf("[")===0)){var N=M;if(M.indexOf(".")===0&&(N=M.slice(1)),N.indexOf("]")===N.length-1){var O=N.indexOf("["),I=N.slice(0,O),F=N.slice(O+1,N.length-1);D=I?T[I][F]:T[F]}else D=T[N]}var V=s[E].type,U;switch(V){case"bool":case"int":case"sampler2D":case"samplerCube":f.uniform1i(h[E],D);break;case"float":f.uniform1f(h[E],D);break;default:var j=V.indexOf("vec");if(0<=j&&j<=1&&V.length===4+j){if(U=V.charCodeAt(V.length-1)-48,U<2||U>4)throw new n("","Invalid data type");switch(V.charAt(0)){case"b":case"i":f["uniform"+U+"iv"](h[E],D);break;case"v":f["uniform"+U+"fv"](h[E],D);break;default:throw new n("","Unrecognized data type for vector "+name+": "+V)}}else if(V.indexOf("mat")===0&&V.length===4){if(U=V.charCodeAt(V.length-1)-48,U<2||U>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+V);f["uniformMatrix"+U+"fv"](h[E],!1,D);break}else throw new n("","Unknown uniform data type for "+name+": "+V)}}}}}function m(S,w){if(typeof w!="object")return[[S,w]];var T=[];for(var _ in w){var v=w[_],P=S;parseInt(_)+""===_?P+="["+_+"]":P+="."+_,typeof v=="object"?T.push.apply(T,m(P,v)):T.push([P,v])}return T}function g(S){switch(S){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var w=S.indexOf("vec");if(0<=w&&w<=1&&S.length===4+w){var T=S.charCodeAt(S.length-1)-48;if(T<2||T>4)throw new n("","Invalid data type");return S.charAt(0)==="b"?i(T,!1):i(T,0)}else if(S.indexOf("mat")===0&&S.length===4){var T=S.charCodeAt(S.length-1)-48;if(T<2||T>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+S);return i(T*T,0)}else throw new n("","Unknown uniform data type for "+name+": "+S)}}function x(S,w,T){if(typeof T=="object"){var _=A(T);Object.defineProperty(S,w,{get:a(_),set:y(T),enumerable:!0,configurable:!1})}else h[T]?Object.defineProperty(S,w,{get:d(T),set:y(T),enumerable:!0,configurable:!1}):S[w]=g(s[T].type)}function A(S){var w;if(Array.isArray(S)){w=new Array(S.length);for(var T=0;T<S.length;++T)x(w,T,S[T])}else{w={};for(var _ in S)x(w,_,S[_])}return w}var b=t(s,!0);return{get:a(A(b)),set:y(b),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(o,c,p){c.exports=t;function t(n,a){for(var i={},r=0;r<n.length;++r)for(var f=n[r].name,u=f.split("."),s=i,h=0;h<u.length;++h){var d=u[h].split("[");if(d.length>1){d[0]in s||(s[d[0]]=[]),s=s[d[0]];for(var y=1;y<d.length;++y){var m=parseInt(d[y]);y<d.length-1||h<u.length-1?(m in s||(y<d.length-1?s[m]=[]:s[m]={}),s=s[m]):a?s[m]=r:s[m]=n[r].type}}else h<u.length-1?(d[0]in s||(s[d[0]]={}),s=s[d[0]]):a?s[d[0]]=r:s[d[0]]=n[r].type}return i}},{}],137:[function(o,c,p){p.uniforms=i,p.attributes=r;var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},n=null;function a(f,u){if(!n){var s=Object.keys(t);n={};for(var h=0;h<s.length;++h){var d=s[h];n[f[d]]=t[d]}}return n[u]}function i(f,u){for(var s=f.getProgramParameter(u,f.ACTIVE_UNIFORMS),h=[],d=0;d<s;++d){var y=f.getActiveUniform(u,d);if(y){var m=a(f,y.type);if(y.size>1)for(var g=0;g<y.size;++g)h.push({name:y.name.replace("[0]","["+g+"]"),type:m});else h.push({name:y.name,type:m})}}return h}function r(f,u){for(var s=f.getProgramParameter(u,f.ACTIVE_ATTRIBUTES),h=[],d=0;d<s;++d){var y=f.getActiveAttrib(u,d);y&&h.push({name:y.name,type:a(f,y.type)})}return h}},{}],138:[function(o,c,p){p.shader=m,p.program=g;var t=o("./GLError"),n=o("gl-format-compiler-error"),a=typeof WeakMap=="undefined"?o("weakmap-shim"):WeakMap,i=new a,r=0;function f(x,A,b,S,w,T,_){this.id=x,this.src=A,this.type=b,this.shader=S,this.count=T,this.programs=[],this.cache=_}f.prototype.dispose=function(){if(--this.count==0){for(var x=this.cache,A=x.gl,b=this.programs,S=0,w=b.length;S<w;++S){var T=x.programs[b[S]];T&&(delete x.programs[S],A.deleteProgram(T))}A.deleteShader(this.shader),delete x.shaders[this.type===A.FRAGMENT_SHADER|0][this.src]}};function u(x){this.gl=x,this.shaders=[{},{}],this.programs={}}var s=u.prototype;function h(x,A,b){var S=x.createShader(A);if(x.shaderSource(S,b),x.compileShader(S),!x.getShaderParameter(S,x.COMPILE_STATUS)){var w=x.getShaderInfoLog(S);try{var T=n(w,b,A)}catch(_){throw console.warn("Failed to format compiler error: "+_),new t(w,`Error compiling shader:
`+w)}throw new t(w,T.short,T.long)}return S}s.getShaderReference=function(x,A){var b=this.gl,S=this.shaders[x===b.FRAGMENT_SHADER|0],w=S[A];if(!w||!b.isShader(w.shader)){var T=h(b,x,A);w=S[A]=new f(r++,A,x,T,[],1,this)}else w.count+=1;return w};function d(x,A,b,S,w){var T=x.createProgram();x.attachShader(T,A),x.attachShader(T,b);for(var _=0;_<S.length;++_)x.bindAttribLocation(T,w[_],S[_]);if(x.linkProgram(T),!x.getProgramParameter(T,x.LINK_STATUS)){var v=x.getProgramInfoLog(T);throw new t(v,"Error linking program: "+v)}return T}s.getProgram=function(x,A,b,S){var w=[x.id,A.id,b.join(":"),S.join(":")].join("@"),T=this.programs[w];return(!T||!this.gl.isProgram(T))&&(this.programs[w]=T=d(this.gl,x.shader,A.shader,b,S),x.programs.push(w),A.programs.push(w)),T};function y(x){var A=i.get(x);return A||(A=new u(x),i.set(x,A)),A}function m(x,A,b){return y(x).getShaderReference(A,b)}function g(x,A,b,S,w){return y(x).getProgram(A,b,S,w)}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(o,c,p){c.exports=a;function t(i){this.plot=i,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var n=t.prototype;n.update=function(i){i=i||{},this.enable=(i.enable||[!0,!0,!1,!1]).slice(),this.width=(i.width||[1,1,1,1]).slice(),this.color=(i.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(r){return r.slice()}),this.center=(i.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},n.draw=function(){var i=this.enable,r=this.width,f=this.color,u=this.center,s=this.plot,h=s.line,d=s.dataBox,y=s.viewBox;if(h.bind(),d[0]<=u[0]&&u[0]<=d[2]&&d[1]<=u[1]&&u[1]<=d[3]){var m=y[0]+(u[0]-d[0])/(d[2]-d[0])*(y[2]-y[0]),g=y[1]+(u[1]-d[1])/(d[3]-d[1])*(y[3]-y[1]);i[0]&&h.drawLine(m,g,y[0],g,r[0],f[0]),i[1]&&h.drawLine(m,g,m,y[1],r[1],f[1]),i[2]&&h.drawLine(m,g,y[2],g,r[2],f[2]),i[3]&&h.drawLine(m,g,m,y[3],r[3],f[3])}},n.dispose=function(){this.plot.removeOverlay(this)};function a(i,r){var f=new t(i);return f.update(r),i.addOverlay(f),f}},{}],140:[function(o,c,p){var t=o("glslify"),n=o("gl-shader"),a=t([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),i=t([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);c.exports=function(r){return n(r,a,i,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(o,c,p){var t=o("gl-buffer"),n=o("gl-vao"),a=o("./shaders/index");c.exports=d;var i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function r(y,m,g,x){this.gl=y,this.buffer=m,this.vao=g,this.shader=x,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var f=r.prototype,u=[0,0,0],s=[0,0,0],h=[0,0];f.isTransparent=function(){return!1},f.drawTransparent=function(y){},f.draw=function(y){var m=this.gl,g=this.vao,x=this.shader;g.bind(),x.bind();var A=y.model||i,b=y.view||i,S=y.projection||i,w;this.axes&&(w=this.axes.lastCubeProps.axis);for(var T=u,_=s,v=0;v<3;++v)w&&w[v]<0?(T[v]=this.bounds[0][v],_[v]=this.bounds[1][v]):(T[v]=this.bounds[1][v],_[v]=this.bounds[0][v]);h[0]=m.drawingBufferWidth,h[1]=m.drawingBufferHeight,x.uniforms.model=A,x.uniforms.view=b,x.uniforms.projection=S,x.uniforms.coordinates=[this.position,T,_],x.uniforms.colors=this.colors,x.uniforms.screenShape=h;for(var v=0;v<3;++v)x.uniforms.lineWidth=this.lineWidth[v]*this.pixelRatio,this.enabled[v]&&(g.draw(m.TRIANGLES,6,6*v),this.drawSides[v]&&g.draw(m.TRIANGLES,12,18+12*v));g.unbind()},f.update=function(y){!y||("bounds"in y&&(this.bounds=y.bounds),"position"in y&&(this.position=y.position),"lineWidth"in y&&(this.lineWidth=y.lineWidth),"colors"in y&&(this.colors=y.colors),"enabled"in y&&(this.enabled=y.enabled),"drawSides"in y&&(this.drawSides=y.drawSides))},f.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function d(y,m){var g=[];function x(T,_,v,P,M,E){var D=[T,_,v,0,0,0,1];D[P+3]=1,D[P]=M,g.push.apply(g,D),D[6]=-1,g.push.apply(g,D),D[P]=E,g.push.apply(g,D),g.push.apply(g,D),D[6]=1,g.push.apply(g,D),D[P]=M,g.push.apply(g,D)}x(0,0,0,0,0,1),x(0,0,0,1,0,1),x(0,0,0,2,0,1),x(1,0,0,1,-1,1),x(1,0,0,2,-1,1),x(0,1,0,0,-1,1),x(0,1,0,2,-1,1),x(0,0,1,0,-1,1),x(0,0,1,1,-1,1);var A=t(y,g),b=n(y,[{type:y.FLOAT,buffer:A,size:3,offset:0,stride:28},{type:y.FLOAT,buffer:A,size:3,offset:12,stride:28},{type:y.FLOAT,buffer:A,size:1,offset:24,stride:28}]),S=a(y);S.attributes.position.location=0,S.attributes.color.location=1,S.attributes.weight.location=2;var w=new r(y,A,b,S);return w.update(m),w}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(o,c,p){var t=o("glslify"),n=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),a=t([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),i=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),r=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);p.meshShader={vertex:n,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},p.pickShader={vertex:i,fragment:r,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(o,c,p){var t=o("gl-vec3"),n=o("gl-vec4"),a=["xyz","xzy","yxz","yzx","zxy","zyx"],i=function(g,x,A,b){for(var S=g.points,w=g.velocities,T=g.divergences,_=[],v=[],P=[],M=[],E=[],D=[],N=0,O=0,I=n.create(),F=n.create(),V=8,U=0;U<S.length;U++){var j=S[U],Z=w[U],te=T[U];x===0&&(te=A*.05),O=t.length(Z)/b,I=n.create(),t.copy(I,Z),I[3]=te;for(var re=0;re<V;re++)E[re]=[j[0],j[1],j[2],re];if(M.length>0)for(var re=0;re<V;re++){var W=(re+1)%V;_.push(M[re],E[re],E[W],E[W],M[W],M[re]),P.push(F,I,I,I,F,F),D.push(N,O,O,O,N,N);var J=_.length;v.push([J-6,J-5,J-4],[J-3,J-2,J-1])}var le=M;M=E,E=le;var ue=F;F=I,I=ue;var se=N;N=O,O=se}return{positions:_,cells:v,vectors:P,vertexIntensity:D}},r=function(g,x,A,b){for(var S=0,w=0;w<g.length;w++)for(var T=g[w].velocities,_=0;_<T.length;_++)S=Math.max(S,t.length(T[_]));for(var v=g.map(function(U){return i(U,A,b,S)}),P=[],M=[],E=[],D=[],w=0;w<v.length;w++){var N=v[w],O=P.length;P=P.concat(N.positions),E=E.concat(N.vectors),D=D.concat(N.vertexIntensity);for(var _=0;_<N.cells.length;_++){var I=N.cells[_],F=[];M.push(F);for(var V=0;V<I.length;V++)F.push(I[V]+O)}}return{positions:P,cells:M,vectors:E,vertexIntensity:D,colormap:x}},f=function(g,x){var A=g.length,b;for(b=0;b<A;b++){var S=g[b];if(S===x)return b;if(S>x)return b-1}return b},u=function(g,x,A){return g<x?x:g>A?A:g},s=function(g,x,A){var b=x.vectors,S=x.meshgrid,w=g[0],T=g[1],_=g[2],v=S[0].length,P=S[1].length,M=S[2].length,E=f(S[0],w),D=f(S[1],T),N=f(S[2],_),O=E+1,I=D+1,F=N+1;if(E=u(E,0,v-1),O=u(O,0,v-1),D=u(D,0,P-1),I=u(I,0,P-1),N=u(N,0,M-1),F=u(F,0,M-1),E<0||D<0||N<0||O>v-1||I>P-1||F>M-1)return t.create();var V=S[0][E],U=S[0][O],j=S[1][D],Z=S[1][I],te=S[2][N],re=S[2][F],W=(w-V)/(U-V),J=(T-j)/(Z-j),le=(_-te)/(re-te);isFinite(W)||(W=.5),isFinite(J)||(J=.5),isFinite(le)||(le=.5);var ue,se,G,Y,ee,$;switch(A.reversedX&&(E=v-1-E,O=v-1-O),A.reversedY&&(D=P-1-D,I=P-1-I),A.reversedZ&&(N=M-1-N,F=M-1-F),A.filled){case 5:ee=N,$=F,G=D*M,Y=I*M,ue=E*M*P,se=O*M*P;break;case 4:ee=N,$=F,ue=E*M,se=O*M,G=D*M*v,Y=I*M*v;break;case 3:G=D,Y=I,ee=N*P,$=F*P,ue=E*P*M,se=O*P*M;break;case 2:G=D,Y=I,ue=E*P,se=O*P,ee=N*P*v,$=F*P*v;break;case 1:ue=E,se=O,ee=N*v,$=F*v,G=D*v*M,Y=I*v*M;break;default:ue=E,se=O,G=D*v,Y=I*v,ee=N*v*P,$=F*v*P;break}var K=b[ue+G+ee],Q=b[ue+G+$],ae=b[ue+Y+ee],ie=b[ue+Y+$],oe=b[se+G+ee],fe=b[se+G+$],ye=b[se+Y+ee],ce=b[se+Y+$],me=t.create(),xe=t.create(),ke=t.create(),Ae=t.create();t.lerp(me,K,oe,W),t.lerp(xe,Q,fe,W),t.lerp(ke,ae,ye,W),t.lerp(Ae,ie,ce,W);var Oe=t.create(),He=t.create();t.lerp(Oe,me,ke,J),t.lerp(He,xe,Ae,J);var Ge=t.create();return t.lerp(Ge,Oe,He,le),Ge},h=function(g){var x=1/0;g.sort(function(w,T){return w-T});for(var A=g.length,b=1;b<A;b++){var S=Math.abs(g[b]-g[b-1]);S<x&&(x=S)}return x},d=function(g){for(var x=[],A=[],b=[],S={},w={},T={},_=g.length,v=0;v<_;v++){var P=g[v],M=P[0],E=P[1],D=P[2];S[M]||(x.push(M),S[M]=!0),w[E]||(A.push(E),w[E]=!0),T[D]||(b.push(D),T[D]=!0)}var N=h(x),O=h(A),I=h(b),F=Math.min(N,O,I);return isFinite(F)?F:1};c.exports=function(g,x){var A=g.startingPositions,b=g.maxLength||1e3,S=g.tubeSize||1,w=g.absoluteTubeSize,T=g.gridFill||"+x+y+z",_={};T.indexOf("-x")!==-1&&(_.reversedX=!0),T.indexOf("-y")!==-1&&(_.reversedY=!0),T.indexOf("-z")!==-1&&(_.reversedZ=!0),_.filled=a.indexOf(T.replace(/-/g,"").replace(/\+/g,""));var v=g.getVelocity||function(fe){return s(fe,g,_)},P=g.getDivergence||function(fe,ye){var ce=t.create(),me=1e-4;t.add(ce,fe,[me,0,0]);var xe=v(ce);t.subtract(xe,xe,ye),t.scale(xe,xe,1/me),t.add(ce,fe,[0,me,0]);var ke=v(ce);t.subtract(ke,ke,ye),t.scale(ke,ke,1/me),t.add(ce,fe,[0,0,me]);var Ae=v(ce);return t.subtract(Ae,Ae,ye),t.scale(Ae,Ae,1/me),t.add(ce,xe,ke),t.add(ce,ce,Ae),ce},M=[],E=x[0][0],D=x[0][1],N=x[0][2],O=x[1][0],I=x[1][1],F=x[1][2],V=function(fe){var ye=fe[0],ce=fe[1],me=fe[2];return!(ye<E||ye>O||ce<D||ce>I||me<N||me>F)},U=t.distance(x[0],x[1]),j=10*U/b,Z=j*j,te=1,re=0,W=A.length;W>1&&(te=d(A));for(var J=0;J<W;J++){var le=t.create();t.copy(le,A[J]);var ue=[le],se=[],G=v(le),Y=le;se.push(G);var ee=[],$=P(le,G),K=t.length($);isFinite(K)&&K>re&&(re=K),ee.push(K),M.push({points:ue,velocities:se,divergences:ee});for(var Q=0;Q<b*100&&ue.length<b&&V(le);){Q++;var ae=t.clone(G),ie=t.squaredLength(ae);if(ie===0)break;if(ie>Z&&t.scale(ae,ae,j/Math.sqrt(ie)),t.add(ae,ae,le),G=v(ae),t.squaredDistance(Y,ae)-Z>-1e-4*Z){ue.push(ae),Y=ae,se.push(G);var $=P(ae,G),K=t.length($);isFinite(K)&&K>re&&(re=K),ee.push(K)}le=ae}}var oe=r(M,g.colormap,re,te);return w?oe.tubeScale=w:(re===0&&(re=1),oe.tubeScale=S*.5*te/re),oe};var y=o("./lib/shaders"),m=o("gl-cone3d").createMesh;c.exports.createTubeMesh=function(g,x){return m(g,x,{shaders:y,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(o,c,p){var t=o("gl-shader"),n=o("glslify"),a=n([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),i=n([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),r=n([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),f=n([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);p.createShader=function(u){var s=t(u,a,i,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s.attributes.normal.location=2,s},p.createPickShader=function(u){var s=t(u,a,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s.attributes.normal.location=2,s},p.createContourShader=function(u){var s=t(u,r,i,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s},p.createPickContourShader=function(u){var s=t(u,r,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s}},{"gl-shader":132,glslify:231}],145:[function(o,c,p){c.exports=se;var t=o("bit-twiddle"),n=o("gl-buffer"),a=o("gl-vao"),i=o("gl-texture2d"),r=o("typedarray-pool"),f=o("colormap"),u=o("ndarray-ops"),s=o("ndarray-pack"),h=o("ndarray"),d=o("surface-nets"),y=o("gl-mat4/multiply"),m=o("gl-mat4/invert"),g=o("binary-search-bounds"),x=o("ndarray-gradient"),A=o("./lib/shaders"),b=A.createShader,S=A.createContourShader,w=A.createPickShader,T=A.createPickContourShader,_=4*(4+3+3),v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],P=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],M=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var G=0;G<3;++G){var Y=M[G],ee=(G+1)%3,$=(G+2)%3;Y[ee+0]=1,Y[$+3]=1,Y[G+6]=1}})();function E(G,Y,ee,$,K){this.position=G,this.index=Y,this.uv=ee,this.level=$,this.dataCoordinate=K}var D=256;function N(G,Y,ee,$,K,Q,ae,ie,oe,fe,ye,ce,me,xe,ke){this.gl=G,this.shape=Y,this.bounds=ee,this.objectOffset=ke,this.intensityBounds=[],this._shader=$,this._pickShader=K,this._coordinateBuffer=Q,this._vao=ae,this._colorMap=ie,this._contourShader=oe,this._contourPickShader=fe,this._contourBuffer=ye,this._contourVAO=ce,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new E([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=me,this._dynamicVAO=xe,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[h(r.mallocFloat(1024),[0,0]),h(r.mallocFloat(1024),[0,0]),h(r.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var O=N.prototype;O.genColormap=function(G,Y){var ee=!1,$=s([f({colormap:G,nshades:D,format:"rgba"}).map(function(K,Q){var ae=Y?I(Q/255,Y):K[3];return ae<1&&(ee=!0),[K[0],K[1],K[2],255*ae]})]);return u.divseq($,255),this.hasAlphaScale=ee,$},O.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},O.isOpaque=function(){return!this.isTransparent()},O.pickSlots=1,O.setPickBase=function(G){this.pickId=G};function I(G,Y){if(!Y||!Y.length)return 1;for(var ee=0;ee<Y.length;++ee){if(Y.length<2)return 1;if(Y[ee][0]===G)return Y[ee][1];if(Y[ee][0]>G&&ee>0){var $=(Y[ee][0]-G)/(Y[ee][0]-Y[ee-1][0]);return Y[ee][1]*(1-$)+$*Y[ee-1][1]}}return 1}var F=[0,0,0],V={showSurface:!1,showContour:!1,projections:[v.slice(),v.slice(),v.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function U(G,Y){var ee,$,K,Q=Y.axes&&Y.axes.lastCubeProps.axis||F,ae=Y.showSurface,ie=Y.showContour;for(ee=0;ee<3;++ee)for(ae=ae||Y.surfaceProject[ee],$=0;$<3;++$)ie=ie||Y.contourProject[ee][$];for(ee=0;ee<3;++ee){var oe=V.projections[ee];for($=0;$<16;++$)oe[$]=0;for($=0;$<4;++$)oe[5*$]=1;oe[5*ee]=0,oe[12+ee]=Y.axesBounds[+(Q[ee]>0)][ee],y(oe,G.model,oe);var fe=V.clipBounds[ee];for(K=0;K<2;++K)for($=0;$<3;++$)fe[K][$]=G.clipBounds[K][$];fe[0][ee]=-1e8,fe[1][ee]=1e8}return V.showSurface=ae,V.showContour=ie,V}var j={model:v,view:v,projection:v,inverseModel:v.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},Z=v.slice(),te=[1,0,0,0,1,0,0,0,1];function re(G,Y){G=G||{};var ee=this.gl;ee.disable(ee.CULL_FACE),this._colorMap.bind(0);var $=j;$.model=G.model||v,$.view=G.view||v,$.projection=G.projection||v,$.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],$.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],$.objectOffset=this.objectOffset,$.contourColor=this.contourColor[0],$.inverseModel=m($.inverseModel,$.model);for(var K=0;K<2;++K)for(var Q=$.clipBounds[K],ae=0;ae<3;++ae)Q[ae]=Math.min(Math.max(this.clipBounds[K][ae],-1e8),1e8);$.kambient=this.ambientLight,$.kdiffuse=this.diffuseLight,$.kspecular=this.specularLight,$.roughness=this.roughness,$.fresnel=this.fresnel,$.opacity=this.opacity,$.height=0,$.permutation=te,$.vertexColor=this.vertexColor;var ie=Z;for(y(ie,$.view,$.model),y(ie,$.projection,ie),m(ie,ie),K=0;K<3;++K)$.eyePosition[K]=ie[12+K]/ie[15];var oe=ie[15];for(K=0;K<3;++K)oe+=this.lightPosition[K]*ie[4*K+3];for(K=0;K<3;++K){var fe=ie[12+K];for(ae=0;ae<3;++ae)fe+=ie[4*ae+K]*this.lightPosition[ae];$.lightPosition[K]=fe/oe}var ye=U($,this);if(ye.showSurface){for(this._shader.bind(),this._shader.uniforms=$,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ee.TRIANGLES,this._vertexCount),K=0;K<3;++K)!this.surfaceProject[K]||!this.vertexCount||(this._shader.uniforms.model=ye.projections[K],this._shader.uniforms.clipBounds=ye.clipBounds[K],this._vao.draw(ee.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ye.showContour){var ce=this._contourShader;$.kambient=1,$.kdiffuse=0,$.kspecular=0,$.opacity=1,ce.bind(),ce.uniforms=$;var me=this._contourVAO;for(me.bind(),K=0;K<3;++K)for(ce.uniforms.permutation=M[K],ee.lineWidth(this.contourWidth[K]*this.pixelRatio),ae=0;ae<this.contourLevels[K].length;++ae)ae===this.highlightLevel[K]?(ce.uniforms.contourColor=this.highlightColor[K],ce.uniforms.contourTint=this.highlightTint[K]):(ae===0||ae-1===this.highlightLevel[K])&&(ce.uniforms.contourColor=this.contourColor[K],ce.uniforms.contourTint=this.contourTint[K]),!!this._contourCounts[K][ae]&&(ce.uniforms.height=this.contourLevels[K][ae],me.draw(ee.LINES,this._contourCounts[K][ae],this._contourOffsets[K][ae]));for(K=0;K<3;++K)for(ce.uniforms.model=ye.projections[K],ce.uniforms.clipBounds=ye.clipBounds[K],ae=0;ae<3;++ae)if(!!this.contourProject[K][ae]){ce.uniforms.permutation=M[ae],ee.lineWidth(this.contourWidth[ae]*this.pixelRatio);for(var xe=0;xe<this.contourLevels[ae].length;++xe)xe===this.highlightLevel[ae]?(ce.uniforms.contourColor=this.highlightColor[ae],ce.uniforms.contourTint=this.highlightTint[ae]):(xe===0||xe-1===this.highlightLevel[ae])&&(ce.uniforms.contourColor=this.contourColor[ae],ce.uniforms.contourTint=this.contourTint[ae]),!!this._contourCounts[ae][xe]&&(ce.uniforms.height=this.contourLevels[ae][xe],me.draw(ee.LINES,this._contourCounts[ae][xe],this._contourOffsets[ae][xe]))}for(me.unbind(),me=this._dynamicVAO,me.bind(),K=0;K<3;++K)if(this._dynamicCounts[K]!==0)for(ce.uniforms.model=$.model,ce.uniforms.clipBounds=$.clipBounds,ce.uniforms.permutation=M[K],ee.lineWidth(this.dynamicWidth[K]*this.pixelRatio),ce.uniforms.contourColor=this.dynamicColor[K],ce.uniforms.contourTint=this.dynamicTint[K],ce.uniforms.height=this.dynamicLevel[K],me.draw(ee.LINES,this._dynamicCounts[K],this._dynamicOffsets[K]),ae=0;ae<3;++ae)!this.contourProject[ae][K]||(ce.uniforms.model=ye.projections[ae],ce.uniforms.clipBounds=ye.clipBounds[ae],me.draw(ee.LINES,this._dynamicCounts[K],this._dynamicOffsets[K]));me.unbind()}}O.draw=function(G){return re.call(this,G,!1)},O.drawTransparent=function(G){return re.call(this,G,!0)};var W={model:v,view:v,projection:v,inverseModel:v,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};O.drawPick=function(G){G=G||{};var Y=this.gl;Y.disable(Y.CULL_FACE);var ee=W;ee.model=G.model||v,ee.view=G.view||v,ee.projection=G.projection||v,ee.shape=this._field[2].shape,ee.pickId=this.pickId/255,ee.lowerBound=this.bounds[0],ee.upperBound=this.bounds[1],ee.objectOffset=this.objectOffset,ee.permutation=te;for(var $=0;$<2;++$)for(var K=ee.clipBounds[$],Q=0;Q<3;++Q)K[Q]=Math.min(Math.max(this.clipBounds[$][Q],-1e8),1e8);var ae=U(ee,this);if(ae.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ee,this._vao.bind(),this._vao.draw(Y.TRIANGLES,this._vertexCount),$=0;$<3;++$)!this.surfaceProject[$]||(this._pickShader.uniforms.model=ae.projections[$],this._pickShader.uniforms.clipBounds=ae.clipBounds[$],this._vao.draw(Y.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ae.showContour){var ie=this._contourPickShader;ie.bind(),ie.uniforms=ee;var oe=this._contourVAO;for(oe.bind(),Q=0;Q<3;++Q)for(Y.lineWidth(this.contourWidth[Q]*this.pixelRatio),ie.uniforms.permutation=M[Q],$=0;$<this.contourLevels[Q].length;++$)this._contourCounts[Q][$]&&(ie.uniforms.height=this.contourLevels[Q][$],oe.draw(Y.LINES,this._contourCounts[Q][$],this._contourOffsets[Q][$]));for($=0;$<3;++$)for(ie.uniforms.model=ae.projections[$],ie.uniforms.clipBounds=ae.clipBounds[$],Q=0;Q<3;++Q)if(!!this.contourProject[$][Q]){ie.uniforms.permutation=M[Q],Y.lineWidth(this.contourWidth[Q]*this.pixelRatio);for(var fe=0;fe<this.contourLevels[Q].length;++fe)this._contourCounts[Q][fe]&&(ie.uniforms.height=this.contourLevels[Q][fe],oe.draw(Y.LINES,this._contourCounts[Q][fe],this._contourOffsets[Q][fe]))}oe.unbind()}},O.pick=function(G){if(!G||G.id!==this.pickId)return null;var Y=this._field[2].shape,ee=this._pickResult,$=Y[0]*(G.value[0]+(G.value[2]>>4)/16)/255,K=Math.floor($),Q=$-K,ae=Y[1]*(G.value[1]+(G.value[2]&15)/16)/255,ie=Math.floor(ae),oe=ae-ie;K+=1,ie+=1;var fe=ee.position;fe[0]=fe[1]=fe[2]=0;for(var ye=0;ye<2;++ye)for(var ce=ye?Q:1-Q,me=0;me<2;++me)for(var xe=me?oe:1-oe,ke=K+ye,Ae=ie+me,Oe=ce*xe,He=0;He<3;++He)fe[He]+=this._field[He].get(ke,Ae)*Oe;for(var Ge=this._pickResult.level,_e=0;_e<3;++_e)if(Ge[_e]=g.le(this.contourLevels[_e],fe[_e]),Ge[_e]<0)this.contourLevels[_e].length>0&&(Ge[_e]=0);else if(Ge[_e]<this.contourLevels[_e].length-1){var Ie=this.contourLevels[_e][Ge[_e]],We=this.contourLevels[_e][Ge[_e]+1];Math.abs(Ie-fe[_e])>Math.abs(We-fe[_e])&&(Ge[_e]+=1)}for(ee.index[0]=Q<.5?K:K+1,ee.index[1]=oe<.5?ie:ie+1,ee.uv[0]=$/Y[0],ee.uv[1]=ae/Y[1],He=0;He<3;++He)ee.dataCoordinate[He]=this._field[He].get(ee.index[0],ee.index[1]);return ee},O.padField=function(G,Y){var ee=Y.shape.slice(),$=G.shape.slice();u.assign(G.lo(1,1).hi(ee[0],ee[1]),Y),u.assign(G.lo(1).hi(ee[0],1),Y.hi(ee[0],1)),u.assign(G.lo(1,$[1]-1).hi(ee[0],1),Y.lo(0,ee[1]-1).hi(ee[0],1)),u.assign(G.lo(0,1).hi(1,ee[1]),Y.hi(1)),u.assign(G.lo($[0]-1,1).hi(1,ee[1]),Y.lo(ee[0]-1)),G.set(0,0,Y.get(0,0)),G.set(0,$[1]-1,Y.get(0,ee[1]-1)),G.set($[0]-1,0,Y.get(ee[0]-1,0)),G.set($[0]-1,$[1]-1,Y.get(ee[0]-1,ee[1]-1))};function J(G,Y){return Array.isArray(G)?[Y(G[0]),Y(G[1]),Y(G[2])]:[Y(G),Y(G),Y(G)]}function le(G){return Array.isArray(G)?G.length===3?[G[0],G[1],G[2],1]:[G[0],G[1],G[2],G[3]]:[0,0,0,1]}function ue(G){if(Array.isArray(G)){if(Array.isArray(G))return[le(G[0]),le(G[1]),le(G[2])];var Y=le(G);return[Y.slice(),Y.slice(),Y.slice()]}}O.update=function(G){G=G||{},this.objectOffset=G.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in G&&(this.contourWidth=J(G.contourWidth,Number)),"showContour"in G&&(this.showContour=J(G.showContour,Boolean)),"showSurface"in G&&(this.showSurface=!!G.showSurface),"contourTint"in G&&(this.contourTint=J(G.contourTint,Boolean)),"contourColor"in G&&(this.contourColor=ue(G.contourColor)),"contourProject"in G&&(this.contourProject=J(G.contourProject,function(wt){return J(wt,Boolean)})),"surfaceProject"in G&&(this.surfaceProject=G.surfaceProject),"dynamicColor"in G&&(this.dynamicColor=ue(G.dynamicColor)),"dynamicTint"in G&&(this.dynamicTint=J(G.dynamicTint,Number)),"dynamicWidth"in G&&(this.dynamicWidth=J(G.dynamicWidth,Number)),"opacity"in G&&(this.opacity=G.opacity),"opacityscale"in G&&(this.opacityscale=G.opacityscale),"colorBounds"in G&&(this.colorBounds=G.colorBounds),"vertexColor"in G&&(this.vertexColor=G.vertexColor?1:0),"colormap"in G&&this._colorMap.setPixels(this.genColormap(G.colormap,this.opacityscale));var Y=G.field||G.coords&&G.coords[2]||null,ee=!1;if(Y||(this._field[2].shape[0]||this._field[2].shape[2]?Y=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):Y=this._field[2].hi(0,0)),"field"in G||"coords"in G){var $=(Y.shape[0]+2)*(Y.shape[1]+2);$>this._field[2].data.length&&(r.freeFloat(this._field[2].data),this._field[2].data=r.mallocFloat(t.nextPow2($))),this._field[2]=h(this._field[2].data,[Y.shape[0]+2,Y.shape[1]+2]),this.padField(this._field[2],Y),this.shape=Y.shape.slice();for(var K=this.shape,Q=0;Q<2;++Q)this._field[2].size>this._field[Q].data.length&&(r.freeFloat(this._field[Q].data),this._field[Q].data=r.mallocFloat(this._field[2].size)),this._field[Q]=h(this._field[Q].data,[K[0]+2,K[1]+2]);if(G.coords){var ae=G.coords;if(!Array.isArray(ae)||ae.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(Q=0;Q<2;++Q){var ie=ae[Q];for(me=0;me<2;++me)if(ie.shape[me]!==K[me])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[Q],ie)}}else if(G.ticks){var oe=G.ticks;if(!Array.isArray(oe)||oe.length!==2)throw new Error("gl-surface: invalid ticks");for(Q=0;Q<2;++Q){var fe=oe[Q];if((Array.isArray(fe)||fe.length)&&(fe=h(fe)),fe.shape[0]!==K[Q])throw new Error("gl-surface: invalid tick length");var ye=h(fe.data,K);ye.stride[Q]=fe.stride[0],ye.stride[Q^1]=0,this.padField(this._field[Q],ye)}}else{for(Q=0;Q<2;++Q){var ce=[0,0];ce[Q]=1,this._field[Q]=h(this._field[Q].data,[K[0]+2,K[1]+2],ce,0)}this._field[0].set(0,0,0);for(var me=0;me<K[0];++me)this._field[0].set(me+1,0,me);for(this._field[0].set(K[0]+1,0,K[0]-1),this._field[1].set(0,0,0),me=0;me<K[1];++me)this._field[1].set(0,me+1,me);this._field[1].set(0,K[1]+1,K[1]-1)}var xe=this._field,ke=h(r.mallocFloat(xe[2].size*3*2),[3,K[0]+2,K[1]+2,2]);for(Q=0;Q<3;++Q)x(ke.pick(Q),xe[Q],"mirror");var Ae=h(r.mallocFloat(xe[2].size*3),[K[0]+2,K[1]+2,3]);for(Q=0;Q<K[0]+2;++Q)for(me=0;me<K[1]+2;++me){var Oe=ke.get(0,Q,me,0),He=ke.get(0,Q,me,1),Ge=ke.get(1,Q,me,0),_e=ke.get(1,Q,me,1),Ie=ke.get(2,Q,me,0),We=ke.get(2,Q,me,1),et=Ge*We-_e*Ie,Ne=Ie*He-We*Oe,De=Oe*_e-He*Ge,Ve=Math.sqrt(et*et+Ne*Ne+De*De);Ve<1e-8?(Ve=Math.max(Math.abs(et),Math.abs(Ne),Math.abs(De)),Ve<1e-8?(De=1,Ne=et=0,Ve=1):Ve=1/Ve):Ve=1/Math.sqrt(Ve),Ae.set(Q,me,0,et*Ve),Ae.set(Q,me,1,Ne*Ve),Ae.set(Q,me,2,De*Ve)}r.free(ke.data);var dt=[1/0,1/0,1/0],Dt=[-1/0,-1/0,-1/0],Gt=1/0,Mt=-1/0,zt=(K[0]-1)*(K[1]-1)*6,Nt=r.mallocFloat(t.nextPow2(10*zt)),Et=0,At=0;for(Q=0;Q<K[0]-1;++Q){e:for(me=0;me<K[1]-1;++me){for(var it=0;it<2;++it)for(var ht=0;ht<2;++ht)for(var $e=0;$e<3;++$e){var Ee=this._field[$e].get(1+Q+it,1+me+ht);if(isNaN(Ee)||!isFinite(Ee))continue e}for($e=0;$e<6;++$e){var Xe=Q+P[$e][0],rt=me+P[$e][1],ut=this._field[0].get(Xe+1,rt+1),Pt=this._field[1].get(Xe+1,rt+1);Ee=this._field[2].get(Xe+1,rt+1),et=Ae.get(Xe+1,rt+1,0),Ne=Ae.get(Xe+1,rt+1,1),De=Ae.get(Xe+1,rt+1,2),G.intensity&&(kt=G.intensity.get(Xe,rt));var kt=G.intensity?G.intensity.get(Xe,rt):Ee+this.objectOffset[2];Nt[Et++]=Xe,Nt[Et++]=rt,Nt[Et++]=ut,Nt[Et++]=Pt,Nt[Et++]=Ee,Nt[Et++]=0,Nt[Et++]=kt,Nt[Et++]=et,Nt[Et++]=Ne,Nt[Et++]=De,dt[0]=Math.min(dt[0],ut+this.objectOffset[0]),dt[1]=Math.min(dt[1],Pt+this.objectOffset[1]),dt[2]=Math.min(dt[2],Ee+this.objectOffset[2]),Gt=Math.min(Gt,kt),Dt[0]=Math.max(Dt[0],ut+this.objectOffset[0]),Dt[1]=Math.max(Dt[1],Pt+this.objectOffset[1]),Dt[2]=Math.max(Dt[2],Ee+this.objectOffset[2]),Mt=Math.max(Mt,kt),At+=1}}}for(G.intensityBounds&&(Gt=+G.intensityBounds[0],Mt=+G.intensityBounds[1]),Q=6;Q<Et;Q+=10)Nt[Q]=(Nt[Q]-Gt)/(Mt-Gt);this._vertexCount=At,this._coordinateBuffer.update(Nt.subarray(0,Et)),r.freeFloat(Nt),r.free(Ae.data),this.bounds=[dt,Dt],this.intensity=G.intensity||this._field[2],(this.intensityBounds[0]!==Gt||this.intensityBounds[1]!==Mt)&&(ee=!0),this.intensityBounds=[Gt,Mt]}if("levels"in G){var Bt=G.levels;for(Array.isArray(Bt[0])?Bt=Bt.slice():Bt=[[],[],Bt],Q=0;Q<3;++Q)Bt[Q]=Bt[Q].slice(),Bt[Q].sort(function(wt,Yt){return wt-Yt});for(Q=0;Q<3;++Q)for(me=0;me<Bt[Q].length;++me)Bt[Q][me]-=this.objectOffset[Q];e:for(Q=0;Q<3;++Q){if(Bt[Q].length!==this.contourLevels[Q].length){ee=!0;break}for(me=0;me<Bt[Q].length;++me)if(Bt[Q][me]!==this.contourLevels[Q][me]){ee=!0;break e}}this.contourLevels=Bt}if(ee){xe=this._field,K=this.shape;for(var Xt=[],Ut=0;Ut<3;++Ut){var Jt=this.contourLevels[Ut],Je=[],gt=[],Ct=[0,0,0];for(Q=0;Q<Jt.length;++Q){var or=d(this._field[Ut],Jt[Q]);Je.push(Xt.length/5|0),At=0;e:for(me=0;me<or.cells.length;++me){var gr=or.cells[me];for($e=0;$e<2;++$e){var lr=or.positions[gr[$e]],mr=lr[0],Fr=Math.floor(mr)|0,Rr=mr-Fr,ir=lr[1],Vr=Math.floor(ir)|0,qe=ir-Vr,we=!1;t:for(var Me=0;Me<3;++Me){Ct[Me]=0;var Re=(Ut+Me+1)%3;for(it=0;it<2;++it){var Ye=it?Rr:1-Rr;for(Xe=Math.min(Math.max(Fr+it,0),K[0])|0,ht=0;ht<2;++ht){var Qe=ht?qe:1-qe;if(rt=Math.min(Math.max(Vr+ht,0),K[1])|0,Me<2?Ee=this._field[Re].get(Xe,rt):Ee=(this.intensity.get(Xe,rt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Ee)||isNaN(Ee)){we=!0;break t}var ot=Ye*Qe;Ct[Me]+=ot*Ee}}}if(!we)Xt.push(Ct[0],Ct[1],lr[0],lr[1],Ct[2]),At+=1;else{if($e>0){for(var st=0;st<5;++st)Xt.pop();At-=1}continue e}}}gt.push(At)}this._contourOffsets[Ut]=Je,this._contourCounts[Ut]=gt}var pt=r.mallocFloat(Xt.length);for(Q=0;Q<Xt.length;++Q)pt[Q]=Xt[Q];this._contourBuffer.update(pt),r.freeFloat(pt)}},O.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var G=0;G<3;++G)r.freeFloat(this._field[G].data)},O.highlight=function(G){var Y;if(!G){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(Y=0;Y<3;++Y)this.enableHighlight[Y]?this.highlightLevel[Y]=G.level[Y]:this.highlightLevel[Y]=-1;var ee;for(this.snapToData?ee=G.dataCoordinate:ee=G.position,Y=0;Y<3;++Y)ee[Y]-=this.objectOffset[Y];if(!((!this.enableDynamic[0]||ee[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||ee[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||ee[2]===this.dynamicLevel[2]))){for(var $=0,K=this.shape,Q=r.mallocFloat(12*K[0]*K[1]),ae=0;ae<3;++ae){if(!this.enableDynamic[ae]){this.dynamicLevel[ae]=NaN,this._dynamicCounts[ae]=0;continue}this.dynamicLevel[ae]=ee[ae];var ie=(ae+1)%3,oe=(ae+2)%3,fe=this._field[ae],ye=this._field[ie],ce=this._field[oe],me=d(fe,ee[ae]),xe=me.cells,ke=me.positions;for(this._dynamicOffsets[ae]=$,Y=0;Y<xe.length;++Y)for(var Ae=xe[Y],Oe=0;Oe<2;++Oe){var He=ke[Ae[Oe]],Ge=+He[0],_e=Ge|0,Ie=Math.min(_e+1,K[0])|0,We=Ge-_e,et=1-We,Ne=+He[1],De=Ne|0,Ve=Math.min(De+1,K[1])|0,dt=Ne-De,Dt=1-dt,Gt=et*Dt,Mt=et*dt,zt=We*Dt,Nt=We*dt,Et=Gt*ye.get(_e,De)+Mt*ye.get(_e,Ve)+zt*ye.get(Ie,De)+Nt*ye.get(Ie,Ve),At=Gt*ce.get(_e,De)+Mt*ce.get(_e,Ve)+zt*ce.get(Ie,De)+Nt*ce.get(Ie,Ve);if(isNaN(Et)||isNaN(At)){Oe&&($-=1);break}Q[2*$+0]=Et,Q[2*$+1]=At,$+=1}this._dynamicCounts[ae]=$-this._dynamicOffsets[ae]}this._dynamicBuffer.update(Q.subarray(0,2*$)),r.freeFloat(Q)}};function se(G){var Y=G.gl,ee=b(Y),$=w(Y),K=S(Y),Q=T(Y),ae=n(Y),ie=a(Y,[{buffer:ae,size:4,stride:_,offset:0},{buffer:ae,size:3,stride:_,offset:16},{buffer:ae,size:3,stride:_,offset:28}]),oe=n(Y),fe=a(Y,[{buffer:oe,size:4,stride:20,offset:0},{buffer:oe,size:1,stride:20,offset:16}]),ye=n(Y),ce=a(Y,[{buffer:ye,size:2,type:Y.FLOAT}]),me=i(Y,1,D,Y.RGBA,Y.UNSIGNED_BYTE);me.minFilter=Y.LINEAR,me.magFilter=Y.LINEAR;var xe=new N(Y,[0,0],[[0,0,0],[0,0,0]],ee,$,ae,ie,me,K,Q,oe,fe,ye,ce,[0,0,0]),ke={levels:[[],[],[]]};for(var Ae in G)ke[Ae]=G[Ae];return ke.colormap=ke.colormap||"jet",xe.update(ke),xe}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(o,c,p){var t=o("ndarray"),n=o("ndarray-ops"),a=o("typedarray-pool");c.exports=T;var i=null,r=null,f=null;function u(_){i=[_.LINEAR,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_NEAREST],r=[_.NEAREST,_.LINEAR,_.NEAREST_MIPMAP_NEAREST,_.NEAREST_MIPMAP_LINEAR,_.LINEAR_MIPMAP_NEAREST,_.LINEAR_MIPMAP_LINEAR],f=[_.REPEAT,_.CLAMP_TO_EDGE,_.MIRRORED_REPEAT]}function s(_){return typeof HTMLCanvasElement!="undefined"&&_ instanceof HTMLCanvasElement||typeof HTMLImageElement!="undefined"&&_ instanceof HTMLImageElement||typeof HTMLVideoElement!="undefined"&&_ instanceof HTMLVideoElement||typeof ImageData!="undefined"&&_ instanceof ImageData}var h=function(_,v){n.muls(_,v,255)};function d(_,v,P){var M=_.gl,E=M.getParameter(M.MAX_TEXTURE_SIZE);if(v<0||v>E||P<0||P>E)throw new Error("gl-texture2d: Invalid texture size");return _._shape=[v,P],_.bind(),M.texImage2D(M.TEXTURE_2D,0,_.format,v,P,0,_.format,_.type,null),_._mipLevels=[0],_}function y(_,v,P,M,E,D){this.gl=_,this.handle=v,this.format=E,this.type=D,this._shape=[P,M],this._mipLevels=[0],this._magFilter=_.NEAREST,this._minFilter=_.NEAREST,this._wrapS=_.CLAMP_TO_EDGE,this._wrapT=_.CLAMP_TO_EDGE,this._anisoSamples=1;var N=this,O=[this._wrapS,this._wrapT];Object.defineProperties(O,[{get:function(){return N._wrapS},set:function(F){return N.wrapS=F}},{get:function(){return N._wrapT},set:function(F){return N.wrapT=F}}]),this._wrapVector=O;var I=[this._shape[0],this._shape[1]];Object.defineProperties(I,[{get:function(){return N._shape[0]},set:function(F){return N.width=F}},{get:function(){return N._shape[1]},set:function(F){return N.height=F}}]),this._shapeVector=I}var m=y.prototype;Object.defineProperties(m,{minFilter:{get:function(){return this._minFilter},set:function(_){this.bind();var v=this.gl;if(this.type===v.FLOAT&&i.indexOf(_)>=0&&(v.getExtension("OES_texture_float_linear")||(_=v.NEAREST)),r.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,_),this._minFilter=_}},magFilter:{get:function(){return this._magFilter},set:function(_){this.bind();var v=this.gl;if(this.type===v.FLOAT&&i.indexOf(_)>=0&&(v.getExtension("OES_texture_float_linear")||(_=v.NEAREST)),r.indexOf(_)<0)throw new Error("gl-texture2d: Unknown filter mode "+_);return v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,_),this._magFilter=_}},mipSamples:{get:function(){return this._anisoSamples},set:function(_){var v=this._anisoSamples;if(this._anisoSamples=Math.max(_,1)|0,v!==this._anisoSamples){var P=this.gl.getExtension("EXT_texture_filter_anisotropic");P&&this.gl.texParameterf(this.gl.TEXTURE_2D,P.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(_){if(this.bind(),f.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,_),this._wrapS=_}},wrapT:{get:function(){return this._wrapT},set:function(_){if(this.bind(),f.indexOf(_)<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,_),this._wrapT=_}},wrap:{get:function(){return this._wrapVector},set:function(_){if(Array.isArray(_)||(_=[_,_]),_.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var v=0;v<2;++v)if(f.indexOf(_[v])<0)throw new Error("gl-texture2d: Unknown wrap mode "+_);this._wrapS=_[0],this._wrapT=_[1];var P=this.gl;return this.bind(),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_S,this._wrapS),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_T,this._wrapT),_}},shape:{get:function(){return this._shapeVector},set:function(_){if(!Array.isArray(_))_=[_|0,_|0];else if(_.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return d(this,_[0]|0,_[1]|0),[_[0]|0,_[1]|0]}},width:{get:function(){return this._shape[0]},set:function(_){return _=_|0,d(this,_,this._shape[1]),_}},height:{get:function(){return this._shape[1]},set:function(_){return _=_|0,d(this,this._shape[0],_),_}}}),m.bind=function(_){var v=this.gl;return _!==void 0&&v.activeTexture(v.TEXTURE0+(_|0)),v.bindTexture(v.TEXTURE_2D,this.handle),_!==void 0?_|0:v.getParameter(v.ACTIVE_TEXTURE)-v.TEXTURE0},m.dispose=function(){this.gl.deleteTexture(this.handle)},m.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var _=Math.min(this._shape[0],this._shape[1]),v=0;_>0;++v,_>>>=1)this._mipLevels.indexOf(v)<0&&this._mipLevels.push(v)},m.setPixels=function(_,v,P,M){var E=this.gl;this.bind(),Array.isArray(v)?(M=P,P=v[1]|0,v=v[0]|0):(v=v||0,P=P||0),M=M||0;var D=s(_)?_:_.raw;if(D){var N=this._mipLevels.indexOf(M)<0;N?(E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,this.type,D),this._mipLevels.push(M)):E.texSubImage2D(E.TEXTURE_2D,M,v,P,this.format,this.type,D)}else if(_.shape&&_.stride&&_.data){if(_.shape.length<2||v+_.shape[1]>this._shape[1]>>>M||P+_.shape[0]>this._shape[0]>>>M||v<0||P<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");x(E,v,P,M,this.format,this.type,this._mipLevels,_)}else throw new Error("gl-texture2d: Unsupported data type")};function g(_,v){return _.length===3?v[2]===1&&v[1]===_[0]*_[2]&&v[0]===_[2]:v[0]===1&&v[1]===_[0]}function x(_,v,P,M,E,D,N,O){var I=O.dtype,F=O.shape.slice();if(F.length<2||F.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var V=0,U=0,j=g(F,O.stride.slice());if(I==="float32"?V=_.FLOAT:I==="float64"?(V=_.FLOAT,j=!1,I="float32"):I==="uint8"?V=_.UNSIGNED_BYTE:(V=_.UNSIGNED_BYTE,j=!1,I="uint8"),F.length===2)U=_.LUMINANCE,F=[F[0],F[1],1],O=t(O.data,F,[O.stride[0],O.stride[1],1],O.offset);else if(F.length===3)if(F[2]===1)U=_.ALPHA;else if(F[2]===2)U=_.LUMINANCE_ALPHA;else if(F[2]===3)U=_.RGB;else if(F[2]===4)U=_.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");if((U===_.LUMINANCE||U===_.ALPHA)&&(E===_.LUMINANCE||E===_.ALPHA)&&(U=E),U!==E)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var Z=O.size,te=N.indexOf(M)<0;if(te&&N.push(M),V===D&&j)O.offset===0&&O.data.length===Z?te?_.texImage2D(_.TEXTURE_2D,M,E,F[0],F[1],0,E,D,O.data):_.texSubImage2D(_.TEXTURE_2D,M,v,P,F[0],F[1],E,D,O.data):te?_.texImage2D(_.TEXTURE_2D,M,E,F[0],F[1],0,E,D,O.data.subarray(O.offset,O.offset+Z)):_.texSubImage2D(_.TEXTURE_2D,M,v,P,F[0],F[1],E,D,O.data.subarray(O.offset,O.offset+Z));else{var re;D===_.FLOAT?re=a.mallocFloat32(Z):re=a.mallocUint8(Z);var W=t(re,F,[F[2],F[2]*F[0],1]);V===_.FLOAT&&D===_.UNSIGNED_BYTE?h(W,O):n.assign(W,O),te?_.texImage2D(_.TEXTURE_2D,M,E,F[0],F[1],0,E,D,re.subarray(0,Z)):_.texSubImage2D(_.TEXTURE_2D,M,v,P,F[0],F[1],E,D,re.subarray(0,Z)),D===_.FLOAT?a.freeFloat32(re):a.freeUint8(re)}}function A(_){var v=_.createTexture();return _.bindTexture(_.TEXTURE_2D,v),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.NEAREST),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),v}function b(_,v,P,M,E){var D=_.getParameter(_.MAX_TEXTURE_SIZE);if(v<0||v>D||P<0||P>D)throw new Error("gl-texture2d: Invalid texture shape");if(E===_.FLOAT&&!_.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var N=A(_);return _.texImage2D(_.TEXTURE_2D,0,M,v,P,0,M,E,null),new y(_,N,v,P,M,E)}function S(_,v,P,M,E,D){var N=A(_);return _.texImage2D(_.TEXTURE_2D,0,E,E,D,v),new y(_,N,P,M,E,D)}function w(_,v){var P=v.dtype,M=v.shape.slice(),E=_.getParameter(_.MAX_TEXTURE_SIZE);if(M[0]<0||M[0]>E||M[1]<0||M[1]>E)throw new Error("gl-texture2d: Invalid texture size");var D=g(M,v.stride.slice()),N=0;P==="float32"?N=_.FLOAT:P==="float64"?(N=_.FLOAT,D=!1,P="float32"):P==="uint8"?N=_.UNSIGNED_BYTE:(N=_.UNSIGNED_BYTE,D=!1,P="uint8");var O=0;if(M.length===2)O=_.LUMINANCE,M=[M[0],M[1],1],v=t(v.data,M,[v.stride[0],v.stride[1],1],v.offset);else if(M.length===3)if(M[2]===1)O=_.ALPHA;else if(M[2]===2)O=_.LUMINANCE_ALPHA;else if(M[2]===3)O=_.RGB;else if(M[2]===4)O=_.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");N===_.FLOAT&&!_.getExtension("OES_texture_float")&&(N=_.UNSIGNED_BYTE,D=!1);var I,F,V=v.size;if(D)v.offset===0&&v.data.length===V?I=v.data:I=v.data.subarray(v.offset,v.offset+V);else{var U=[M[2],M[2]*M[0],1];F=a.malloc(V,P);var j=t(F,M,U,0);(P==="float32"||P==="float64")&&N===_.UNSIGNED_BYTE?h(j,v):n.assign(j,v),I=F.subarray(0,V)}var Z=A(_);return _.texImage2D(_.TEXTURE_2D,0,O,M[0],M[1],0,O,N,I),D||a.free(F),new y(_,Z,M[0],M[1],O,N)}function T(_){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(i||u(_),typeof arguments[1]=="number")return b(_,arguments[1],arguments[2],arguments[3]||_.RGBA,arguments[4]||_.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return b(_,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var v=arguments[1],P=s(v)?v:v.raw;if(P)return S(_,P,v.width|0,v.height|0,arguments[2]||_.RGBA,arguments[3]||_.UNSIGNED_BYTE);if(v.shape&&v.data&&v.stride)return w(_,v)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(o,c,p){function t(n,a,i){a?a.bind():n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null);var r=n.getParameter(n.MAX_VERTEX_ATTRIBS)|0;if(i){if(i.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var f=0;f<i.length;++f){var u=i[f];if(u.buffer){var s=u.buffer,h=u.size||4,d=u.type||n.FLOAT,y=!!u.normalized,m=u.stride||0,g=u.offset||0;s.bind(),n.enableVertexAttribArray(f),n.vertexAttribPointer(f,h,d,y,m,g)}else{if(typeof u=="number")n.vertexAttrib1f(f,u);else if(u.length===1)n.vertexAttrib1f(f,u[0]);else if(u.length===2)n.vertexAttrib2f(f,u[0],u[1]);else if(u.length===3)n.vertexAttrib3f(f,u[0],u[1],u[2]);else if(u.length===4)n.vertexAttrib4f(f,u[0],u[1],u[2],u[3]);else throw new Error("gl-vao: Invalid vertex attribute");n.disableVertexAttribArray(f)}}for(;f<r;++f)n.disableVertexAttribArray(f)}else{n.bindBuffer(n.ARRAY_BUFFER,null);for(var f=0;f<r;++f)n.disableVertexAttribArray(f)}}c.exports=t},{}],148:[function(o,c,p){var t=o("./do-bind.js");function n(i){this.gl=i,this._elements=null,this._attributes=null,this._elementsType=i.UNSIGNED_SHORT}n.prototype.bind=function(){t(this.gl,this._elements,this._attributes)},n.prototype.update=function(i,r,f){this._elements=r,this._attributes=i,this._elementsType=f||this.gl.UNSIGNED_SHORT},n.prototype.dispose=function(){},n.prototype.unbind=function(){},n.prototype.draw=function(i,r,f){f=f||0;var u=this.gl;this._elements?u.drawElements(i,r,this._elementsType,f):u.drawArrays(i,f,r)};function a(i){return new n(i)}c.exports=a},{"./do-bind.js":147}],149:[function(o,c,p){var t=o("./do-bind.js");function n(r,f,u,s,h,d){this.location=r,this.dimension=f,this.a=u,this.b=s,this.c=h,this.d=d}n.prototype.bind=function(r){switch(this.dimension){case 1:r.vertexAttrib1f(this.location,this.a);break;case 2:r.vertexAttrib2f(this.location,this.a,this.b);break;case 3:r.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:r.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function a(r,f,u){this.gl=r,this._ext=f,this.handle=u,this._attribs=[],this._useElements=!1,this._elementsType=r.UNSIGNED_SHORT}a.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var r=0;r<this._attribs.length;++r)this._attribs[r].bind(this.gl)},a.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},a.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},a.prototype.update=function(r,f,u){if(this.bind(),t(this.gl,f,r),this.unbind(),this._attribs.length=0,r)for(var s=0;s<r.length;++s){var h=r[s];typeof h=="number"?this._attribs.push(new n(s,1,h)):Array.isArray(h)&&this._attribs.push(new n(s,h.length,h[0],h[1],h[2],h[3]))}this._useElements=!!f,this._elementsType=u||this.gl.UNSIGNED_SHORT},a.prototype.draw=function(r,f,u){u=u||0;var s=this.gl;this._useElements?s.drawElements(r,f,this._elementsType,u):s.drawArrays(r,u,f)};function i(r,f){return new a(r,f,f.createVertexArrayOES())}c.exports=i},{"./do-bind.js":147}],150:[function(o,c,p){var t=o("./lib/vao-native.js"),n=o("./lib/vao-emulated.js");function a(r){this.bindVertexArrayOES=r.bindVertexArray.bind(r),this.createVertexArrayOES=r.createVertexArray.bind(r),this.deleteVertexArrayOES=r.deleteVertexArray.bind(r)}function i(r,f,u,s){var h=r.createVertexArray?new a(r):r.getExtension("OES_vertex_array_object"),d;return h?d=t(r,h):d=n(r),d.update(f,u,s),d}c.exports=i},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(o,c,p){c.exports=t;function t(n,a,i){return n[0]=a[0]+i[0],n[1]=a[1]+i[1],n[2]=a[2]+i[2],n}},{}],152:[function(o,c,p){c.exports=i;var t=o("./fromValues"),n=o("./normalize"),a=o("./dot");function i(r,f){var u=t(r[0],r[1],r[2]),s=t(f[0],f[1],f[2]);n(u,u),n(s,s);var h=a(u,s);return h>1?0:Math.acos(h)}},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(o,c,p){c.exports=t;function t(n,a){return n[0]=Math.ceil(a[0]),n[1]=Math.ceil(a[1]),n[2]=Math.ceil(a[2]),n}},{}],154:[function(o,c,p){c.exports=t;function t(n){var a=new Float32Array(3);return a[0]=n[0],a[1]=n[1],a[2]=n[2],a}},{}],155:[function(o,c,p){c.exports=t;function t(n,a){return n[0]=a[0],n[1]=a[1],n[2]=a[2],n}},{}],156:[function(o,c,p){c.exports=t;function t(){var n=new Float32Array(3);return n[0]=0,n[1]=0,n[2]=0,n}},{}],157:[function(o,c,p){c.exports=t;function t(n,a,i){var r=a[0],f=a[1],u=a[2],s=i[0],h=i[1],d=i[2];return n[0]=f*d-u*h,n[1]=u*s-r*d,n[2]=r*h-f*s,n}},{}],158:[function(o,c,p){c.exports=o("./distance")},{"./distance":159}],159:[function(o,c,p){c.exports=t;function t(n,a){var i=a[0]-n[0],r=a[1]-n[1],f=a[2]-n[2];return Math.sqrt(i*i+r*r+f*f)}},{}],160:[function(o,c,p){c.exports=o("./divide")},{"./divide":161}],161:[function(o,c,p){c.exports=t;function t(n,a,i){return n[0]=a[0]/i[0],n[1]=a[1]/i[1],n[2]=a[2]/i[2],n}},{}],162:[function(o,c,p){c.exports=t;function t(n,a){return n[0]*a[0]+n[1]*a[1]+n[2]*a[2]}},{}],163:[function(o,c,p){c.exports=1e-6},{}],164:[function(o,c,p){c.exports=n;var t=o("./epsilon");function n(a,i){var r=a[0],f=a[1],u=a[2],s=i[0],h=i[1],d=i[2];return Math.abs(r-s)<=t*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(f-h)<=t*Math.max(1,Math.abs(f),Math.abs(h))&&Math.abs(u-d)<=t*Math.max(1,Math.abs(u),Math.abs(d))}},{"./epsilon":163}],165:[function(o,c,p){c.exports=t;function t(n,a){return n[0]===a[0]&&n[1]===a[1]&&n[2]===a[2]}},{}],166:[function(o,c,p){c.exports=t;function t(n,a){return n[0]=Math.floor(a[0]),n[1]=Math.floor(a[1]),n[2]=Math.floor(a[2]),n}},{}],167:[function(o,c,p){c.exports=n;var t=o("./create")();function n(a,i,r,f,u,s){var h,d;for(i||(i=3),r||(r=0),f?d=Math.min(f*i+r,a.length):d=a.length,h=r;h<d;h+=i)t[0]=a[h],t[1]=a[h+1],t[2]=a[h+2],u(t,t,s),a[h]=t[0],a[h+1]=t[1],a[h+2]=t[2];return a}},{"./create":156}],168:[function(o,c,p){c.exports=t;function t(n,a,i){var r=new Float32Array(3);return r[0]=n,r[1]=a,r[2]=i,r}},{}],169:[function(o,c,p){c.exports={EPSILON:o("./epsilon"),create:o("./create"),clone:o("./clone"),angle:o("./angle"),fromValues:o("./fromValues"),copy:o("./copy"),set:o("./set"),equals:o("./equals"),exactEquals:o("./exactEquals"),add:o("./add"),subtract:o("./subtract"),sub:o("./sub"),multiply:o("./multiply"),mul:o("./mul"),divide:o("./divide"),div:o("./div"),min:o("./min"),max:o("./max"),floor:o("./floor"),ceil:o("./ceil"),round:o("./round"),scale:o("./scale"),scaleAndAdd:o("./scaleAndAdd"),distance:o("./distance"),dist:o("./dist"),squaredDistance:o("./squaredDistance"),sqrDist:o("./sqrDist"),length:o("./length"),len:o("./len"),squaredLength:o("./squaredLength"),sqrLen:o("./sqrLen"),negate:o("./negate"),inverse:o("./inverse"),normalize:o("./normalize"),dot:o("./dot"),cross:o("./cross"),lerp:o("./lerp"),random:o("./random"),transformMat4:o("./transformMat4"),transformMat3:o("./transformMat3"),transformQuat:o("./transformQuat"),rotateX:o("./rotateX"),rotateY:o("./rotateY"),rotateZ:o("./rotateZ"),forEach:o("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(o,c,p){c.exports=t;function t(n,a){return n[0]=1/a[0],n[1]=1/a[1],n[2]=1/a[2],n}},{}],171:[function(o,c,p){c.exports=o("./length")},{"./length":172}],172:[function(o,c,p){c.exports=t;function t(n){var a=n[0],i=n[1],r=n[2];return Math.sqrt(a*a+i*i+r*r)}},{}],173:[function(o,c,p){c.exports=t;function t(n,a,i,r){var f=a[0],u=a[1],s=a[2];return n[0]=f+r*(i[0]-f),n[1]=u+r*(i[1]-u),n[2]=s+r*(i[2]-s),n}},{}],174:[function(o,c,p){c.exports=t;function t(n,a,i){return n[0]=Math.max(a[0],i[0]),n[1]=Math.max(a[1],i[1]),n[2]=Math.max(a[2],i[2]),n}},{}],175:[function(o,c,p){c.exports=t;function t(n,a,i){return n[0]=Math.min(a[0],i[0]),n[1]=Math.min(a[1],i[1]),n[2]=Math.min(a[2],i[2]),n}},{}],176:[function(o,c,p){c.exports=o("./multiply")},{"./multiply":177}],177:[function(o,c,p){c.exports=t;function t(n,a,i){return n[0]=a[0]*i[0],n[1]=a[1]*i[1],n[2]=a[2]*i[2],n}},{}],178:[function(o,c,p){c.exports=t;function t(n,a){return n[0]=-a[0],n[1]=-a[1],n[2]=-a[2],n}},{}],179:[function(o,c,p){c.exports=t;function t(n,a){var i=a[0],r=a[1],f=a[2],u=i*i+r*r+f*f;return u>0&&(u=1/Math.sqrt(u),n[0]=a[0]*u,n[1]=a[1]*u,n[2]=a[2]*u),n}},{}],180:[function(o,c,p){c.exports=t;function t(n,a){a=a||1;var i=Math.random()*2*Math.PI,r=Math.random()*2-1,f=Math.sqrt(1-r*r)*a;return n[0]=Math.cos(i)*f,n[1]=Math.sin(i)*f,n[2]=r*a,n}},{}],181:[function(o,c,p){c.exports=t;function t(n,a,i,r){var f=i[1],u=i[2],s=a[1]-f,h=a[2]-u,d=Math.sin(r),y=Math.cos(r);return n[0]=a[0],n[1]=f+s*y-h*d,n[2]=u+s*d+h*y,n}},{}],182:[function(o,c,p){c.exports=t;function t(n,a,i,r){var f=i[0],u=i[2],s=a[0]-f,h=a[2]-u,d=Math.sin(r),y=Math.cos(r);return n[0]=f+h*d+s*y,n[1]=a[1],n[2]=u+h*y-s*d,n}},{}],183:[function(o,c,p){c.exports=t;function t(n,a,i,r){var f=i[0],u=i[1],s=a[0]-f,h=a[1]-u,d=Math.sin(r),y=Math.cos(r);return n[0]=f+s*y-h*d,n[1]=u+s*d+h*y,n[2]=a[2],n}},{}],184:[function(o,c,p){c.exports=t;function t(n,a){return n[0]=Math.round(a[0]),n[1]=Math.round(a[1]),n[2]=Math.round(a[2]),n}},{}],185:[function(o,c,p){c.exports=t;function t(n,a,i){return n[0]=a[0]*i,n[1]=a[1]*i,n[2]=a[2]*i,n}},{}],186:[function(o,c,p){c.exports=t;function t(n,a,i,r){return n[0]=a[0]+i[0]*r,n[1]=a[1]+i[1]*r,n[2]=a[2]+i[2]*r,n}},{}],187:[function(o,c,p){c.exports=t;function t(n,a,i,r){return n[0]=a,n[1]=i,n[2]=r,n}},{}],188:[function(o,c,p){c.exports=o("./squaredDistance")},{"./squaredDistance":190}],189:[function(o,c,p){c.exports=o("./squaredLength")},{"./squaredLength":191}],190:[function(o,c,p){c.exports=t;function t(n,a){var i=a[0]-n[0],r=a[1]-n[1],f=a[2]-n[2];return i*i+r*r+f*f}},{}],191:[function(o,c,p){c.exports=t;function t(n){var a=n[0],i=n[1],r=n[2];return a*a+i*i+r*r}},{}],192:[function(o,c,p){c.exports=o("./subtract")},{"./subtract":193}],193:[function(o,c,p){c.exports=t;function t(n,a,i){return n[0]=a[0]-i[0],n[1]=a[1]-i[1],n[2]=a[2]-i[2],n}},{}],194:[function(o,c,p){c.exports=t;function t(n,a,i){var r=a[0],f=a[1],u=a[2];return n[0]=r*i[0]+f*i[3]+u*i[6],n[1]=r*i[1]+f*i[4]+u*i[7],n[2]=r*i[2]+f*i[5]+u*i[8],n}},{}],195:[function(o,c,p){c.exports=t;function t(n,a,i){var r=a[0],f=a[1],u=a[2],s=i[3]*r+i[7]*f+i[11]*u+i[15];return s=s||1,n[0]=(i[0]*r+i[4]*f+i[8]*u+i[12])/s,n[1]=(i[1]*r+i[5]*f+i[9]*u+i[13])/s,n[2]=(i[2]*r+i[6]*f+i[10]*u+i[14])/s,n}},{}],196:[function(o,c,p){c.exports=t;function t(n,a,i){var r=a[0],f=a[1],u=a[2],s=i[0],h=i[1],d=i[2],y=i[3],m=y*r+h*u-d*f,g=y*f+d*r-s*u,x=y*u+s*f-h*r,A=-s*r-h*f-d*u;return n[0]=m*y+A*-s+g*-d-x*-h,n[1]=g*y+A*-h+x*-s-m*-d,n[2]=x*y+A*-d+m*-h-g*-s,n}},{}],197:[function(o,c,p){c.exports=t;function t(n,a,i){return n[0]=a[0]+i[0],n[1]=a[1]+i[1],n[2]=a[2]+i[2],n[3]=a[3]+i[3],n}},{}],198:[function(o,c,p){c.exports=t;function t(n){var a=new Float32Array(4);return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a}},{}],199:[function(o,c,p){c.exports=t;function t(n,a){return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n}},{}],200:[function(o,c,p){c.exports=t;function t(){var n=new Float32Array(4);return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n}},{}],201:[function(o,c,p){c.exports=t;function t(n,a){var i=a[0]-n[0],r=a[1]-n[1],f=a[2]-n[2],u=a[3]-n[3];return Math.sqrt(i*i+r*r+f*f+u*u)}},{}],202:[function(o,c,p){c.exports=t;function t(n,a,i){return n[0]=a[0]/i[0],n[1]=a[1]/i[1],n[2]=a[2]/i[2],n[3]=a[3]/i[3],n}},{}],203:[function(o,c,p){c.exports=t;function t(n,a){return n[0]*a[0]+n[1]*a[1]+n[2]*a[2]+n[3]*a[3]}},{}],204:[function(o,c,p){c.exports=t;function t(n,a,i,r){var f=new Float32Array(4);return f[0]=n,f[1]=a,f[2]=i,f[3]=r,f}},{}],205:[function(o,c,p){c.exports={create:o("./create"),clone:o("./clone"),fromValues:o("./fromValues"),copy:o("./copy"),set:o("./set"),add:o("./add"),subtract:o("./subtract"),multiply:o("./multiply"),divide:o("./divide"),min:o("./min"),max:o("./max"),scale:o("./scale"),scaleAndAdd:o("./scaleAndAdd"),distance:o("./distance"),squaredDistance:o("./squaredDistance"),length:o("./length"),squaredLength:o("./squaredLength"),negate:o("./negate"),inverse:o("./inverse"),normalize:o("./normalize"),dot:o("./dot"),lerp:o("./lerp"),random:o("./random"),transformMat4:o("./transformMat4"),transformQuat:o("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(o,c,p){c.exports=t;function t(n,a){return n[0]=1/a[0],n[1]=1/a[1],n[2]=1/a[2],n[3]=1/a[3],n}},{}],207:[function(o,c,p){c.exports=t;function t(n){var a=n[0],i=n[1],r=n[2],f=n[3];return Math.sqrt(a*a+i*i+r*r+f*f)}},{}],208:[function(o,c,p){c.exports=t;function t(n,a,i,r){var f=a[0],u=a[1],s=a[2],h=a[3];return n[0]=f+r*(i[0]-f),n[1]=u+r*(i[1]-u),n[2]=s+r*(i[2]-s),n[3]=h+r*(i[3]-h),n}},{}],209:[function(o,c,p){c.exports=t;function t(n,a,i){return n[0]=Math.max(a[0],i[0]),n[1]=Math.max(a[1],i[1]),n[2]=Math.max(a[2],i[2]),n[3]=Math.max(a[3],i[3]),n}},{}],210:[function(o,c,p){c.exports=t;function t(n,a,i){return n[0]=Math.min(a[0],i[0]),n[1]=Math.min(a[1],i[1]),n[2]=Math.min(a[2],i[2]),n[3]=Math.min(a[3],i[3]),n}},{}],211:[function(o,c,p){c.exports=t;function t(n,a,i){return n[0]=a[0]*i[0],n[1]=a[1]*i[1],n[2]=a[2]*i[2],n[3]=a[3]*i[3],n}},{}],212:[function(o,c,p){c.exports=t;function t(n,a){return n[0]=-a[0],n[1]=-a[1],n[2]=-a[2],n[3]=-a[3],n}},{}],213:[function(o,c,p){c.exports=t;function t(n,a){var i=a[0],r=a[1],f=a[2],u=a[3],s=i*i+r*r+f*f+u*u;return s>0&&(s=1/Math.sqrt(s),n[0]=i*s,n[1]=r*s,n[2]=f*s,n[3]=u*s),n}},{}],214:[function(o,c,p){var t=o("./normalize"),n=o("./scale");c.exports=a;function a(i,r){return r=r||1,i[0]=Math.random(),i[1]=Math.random(),i[2]=Math.random(),i[3]=Math.random(),t(i,i),n(i,i,r),i}},{"./normalize":213,"./scale":215}],215:[function(o,c,p){c.exports=t;function t(n,a,i){return n[0]=a[0]*i,n[1]=a[1]*i,n[2]=a[2]*i,n[3]=a[3]*i,n}},{}],216:[function(o,c,p){c.exports=t;function t(n,a,i,r){return n[0]=a[0]+i[0]*r,n[1]=a[1]+i[1]*r,n[2]=a[2]+i[2]*r,n[3]=a[3]+i[3]*r,n}},{}],217:[function(o,c,p){c.exports=t;function t(n,a,i,r,f){return n[0]=a,n[1]=i,n[2]=r,n[3]=f,n}},{}],218:[function(o,c,p){c.exports=t;function t(n,a){var i=a[0]-n[0],r=a[1]-n[1],f=a[2]-n[2],u=a[3]-n[3];return i*i+r*r+f*f+u*u}},{}],219:[function(o,c,p){c.exports=t;function t(n){var a=n[0],i=n[1],r=n[2],f=n[3];return a*a+i*i+r*r+f*f}},{}],220:[function(o,c,p){c.exports=t;function t(n,a,i){return n[0]=a[0]-i[0],n[1]=a[1]-i[1],n[2]=a[2]-i[2],n[3]=a[3]-i[3],n}},{}],221:[function(o,c,p){c.exports=t;function t(n,a,i){var r=a[0],f=a[1],u=a[2],s=a[3];return n[0]=i[0]*r+i[4]*f+i[8]*u+i[12]*s,n[1]=i[1]*r+i[5]*f+i[9]*u+i[13]*s,n[2]=i[2]*r+i[6]*f+i[10]*u+i[14]*s,n[3]=i[3]*r+i[7]*f+i[11]*u+i[15]*s,n}},{}],222:[function(o,c,p){c.exports=t;function t(n,a,i){var r=a[0],f=a[1],u=a[2],s=i[0],h=i[1],d=i[2],y=i[3],m=y*r+h*u-d*f,g=y*f+d*r-s*u,x=y*u+s*f-h*r,A=-s*r-h*f-d*u;return n[0]=m*y+A*-s+g*-d-x*-h,n[1]=g*y+A*-h+x*-s-m*-d,n[2]=x*y+A*-d+m*-h-g*-s,n[3]=a[3],n}},{}],223:[function(o,c,p){var t=o("glsl-tokenizer"),n=o("atob-lite");c.exports=a;function a(i){for(var r=Array.isArray(i)?i:t(i),f=0;f<r.length;f++){var u=r[f];if(u.type==="preprocessor"){var s=u.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!!s&&!!s[2]){var h=s[1],d=s[2];return(h?n(d):d).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(o,c,p){c.exports=v;var t=o("./lib/literals"),n=o("./lib/operators"),a=o("./lib/builtins"),i=o("./lib/literals-300es"),r=o("./lib/builtins-300es"),f=999,u=9999,s=0,h=1,d=2,y=3,m=4,g=5,x=6,A=7,b=8,S=9,w=10,T=11,_=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function v(P){var M=0,E=0,D=f,N,O,I=[],F=[],V=1,U=0,j=0,Z=!1,te=!1,re="",W;P=P||{};var J=a,le=t;P.version==="300 es"&&(J=r,le=i);for(var ue={},se={},M=0;M<J.length;M++)ue[J[M]]=!0;for(var M=0;M<le.length;M++)se[le[M]]=!0;return function(ke){return F=[],ke!==null?Y(ke):ee()};function G(ke){ke.length&&F.push({type:_[D],data:ke,position:j,line:V,column:U})}function Y(ke){M=0,ke.toString&&(ke=ke.toString()),re+=ke.replace(/\r\n/g,`
`),W=re.length;for(var Ae;N=re[M],M<W;){switch(Ae=M,D){case s:M=ie();break;case h:M=ae();break;case d:M=Q();break;case y:M=oe();break;case m:M=ce();break;case T:M=ye();break;case g:M=me();break;case u:M=xe();break;case S:M=K();break;case f:M=$();break}if(Ae!==M)switch(re[Ae]){case`
`:U=0,++V;break;default:++U;break}}return E+=M,re=re.slice(M),F}function ee(ke){return I.length&&G(I.join("")),D=w,G("(eof)"),F}function $(){return I=I.length?[]:I,O==="/"&&N==="*"?(j=E+M-1,D=s,O=N,M+1):O==="/"&&N==="/"?(j=E+M-1,D=h,O=N,M+1):N==="#"?(D=d,j=E+M,M):/\s/.test(N)?(D=S,j=E+M,M):(Z=/\d/.test(N),te=/[^\w_]/.test(N),j=E+M,D=Z?m:te?y:u,M)}function K(){return/[^\s]/g.test(N)?(G(I.join("")),D=f,M):(I.push(N),O=N,M+1)}function Q(){return(N==="\r"||N===`
`)&&O!=="\\"?(G(I.join("")),D=f,M):(I.push(N),O=N,M+1)}function ae(){return Q()}function ie(){return N==="/"&&O==="*"?(I.push(N),G(I.join("")),D=f,M+1):(I.push(N),O=N,M+1)}function oe(){if(O==="."&&/\d/.test(N))return D=g,M;if(O==="/"&&N==="*")return D=s,M;if(O==="/"&&N==="/")return D=h,M;if(N==="."&&I.length){for(;fe(I););return D=g,M}if(N===";"||N===")"||N==="("){if(I.length)for(;fe(I););return G(N),D=f,M+1}var ke=I.length===2&&N!=="=";if(/[\w_\d\s]/.test(N)||ke){for(;fe(I););return D=f,M}return I.push(N),O=N,M+1}function fe(ke){var Ae=0,Oe,He;do{if(Oe=n.indexOf(ke.slice(0,ke.length+Ae).join("")),He=n[Oe],Oe===-1){if(Ae--+ke.length>0)continue;He=ke.slice(0,1).join("")}return G(He),j+=He.length,I=I.slice(He.length),I.length}while(1)}function ye(){return/[^a-fA-F0-9]/.test(N)?(G(I.join("")),D=f,M):(I.push(N),O=N,M+1)}function ce(){return N==="."||/[eE]/.test(N)?(I.push(N),D=g,O=N,M+1):N==="x"&&I.length===1&&I[0]==="0"?(D=T,I.push(N),O=N,M+1):/[^\d]/.test(N)?(G(I.join("")),D=f,M):(I.push(N),O=N,M+1)}function me(){return N==="f"&&(I.push(N),O=N,M+=1),/[eE]/.test(N)||(N==="-"||N==="+")&&/[eE]/.test(O)?(I.push(N),O=N,M+1):/[^\d]/.test(N)?(G(I.join("")),D=f,M):(I.push(N),O=N,M+1)}function xe(){if(/[^\d\w_]/.test(N)){var ke=I.join("");return se[ke]?D=b:ue[ke]?D=A:D=x,G(I.join("")),D=f,M}return I.push(N),O=N,M+1}}},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(o,c,p){var t=o("./builtins");t=t.slice().filter(function(n){return!/^(gl\_|texture)/.test(n)}),c.exports=t.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(o,c,p){c.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(o,c,p){var t=o("./literals");c.exports=t.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(o,c,p){c.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(o,c,p){c.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(o,c,p){var t=o("./index");c.exports=n;function n(a,i){var r=t(i),f=[];return f=f.concat(r(a)),f=f.concat(r(null)),f}},{"./index":224}],231:[function(o,c,p){c.exports=function(t){typeof t=="string"&&(t=[t]);for(var n=[].slice.call(arguments,1),a=[],i=0;i<t.length-1;i++)a.push(t[i],n[i]||"");return a.push(t[i]),a.join("")}},{}],232:[function(o,c,p){var t=o("is-browser");function n(){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,i),window.removeEventListener("test",null,i)}catch{a=!1}return a}c.exports=t&&n()},{"is-browser":236}],233:[function(o,c,p){c.exports=y;var t=o("robust-orientation"),n=o("simplicial-complex").compareCells;function a(m,g,x){this.vertices=m,this.adjacent=g,this.boundary=x,this.lastVisited=-1}a.prototype.flip=function(){var m=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=m;var g=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=g};function i(m,g,x){this.vertices=m,this.cell=g,this.index=x}function r(m,g){return n(m.vertices,g.vertices)}function f(m){return function(){var g=this.tuple;return m.apply(this,g)}}function u(m){var g=t[m+1];return g||(g=t),f(g)}var s=[];function h(m,g,x){this.dimension=m,this.vertices=g,this.simplices=x,this.interior=x.filter(function(S){return!S.boundary}),this.tuple=new Array(m+1);for(var A=0;A<=m;++A)this.tuple[A]=this.vertices[A];var b=s[m];b||(b=s[m]=u(m)),this.orient=b}var d=h.prototype;d.handleBoundaryDegeneracy=function(m,g){var x=this.dimension,A=this.vertices.length-1,b=this.tuple,S=this.vertices,w=[m];for(m.lastVisited=-A;w.length>0;){m=w.pop();for(var T=m.adjacent,_=0;_<=x;++_){var v=T[_];if(!(!v.boundary||v.lastVisited<=-A)){for(var P=v.vertices,M=0;M<=x;++M){var E=P[M];E<0?b[M]=g:b[M]=S[E]}var D=this.orient();if(D>0)return v;v.lastVisited=-A,D===0&&w.push(v)}}}return null},d.walk=function(m,g){var x=this.vertices.length-1,A=this.dimension,b=this.vertices,S=this.tuple,w=g?this.interior.length*Math.random()|0:this.interior.length-1,T=this.interior[w];e:for(;!T.boundary;){for(var _=T.vertices,v=T.adjacent,P=0;P<=A;++P)S[P]=b[_[P]];T.lastVisited=x;for(var P=0;P<=A;++P){var M=v[P];if(!(M.lastVisited>=x)){var E=S[P];S[P]=m;var D=this.orient();if(S[P]=E,D<0){T=M;continue e}else M.boundary?M.lastVisited=-x:M.lastVisited=x}}return}return T},d.addPeaks=function(m,g){var x=this.vertices.length-1,A=this.dimension,b=this.vertices,S=this.tuple,w=this.interior,T=this.simplices,_=[g];g.lastVisited=x,g.vertices[g.vertices.indexOf(-1)]=x,g.boundary=!1,w.push(g);for(var v=[];_.length>0;){var g=_.pop(),P=g.vertices,M=g.adjacent,E=P.indexOf(x);if(!(E<0)){for(var D=0;D<=A;++D)if(D!==E){var N=M[D];if(!(!N.boundary||N.lastVisited>=x)){var O=N.vertices;if(N.lastVisited!==-x){for(var I=0,F=0;F<=A;++F)O[F]<0?(I=F,S[F]=m):S[F]=b[O[F]];var V=this.orient();if(V>0){O[I]=x,N.boundary=!1,w.push(N),_.push(N),N.lastVisited=x;continue}else N.lastVisited=-x}var U=N.adjacent,j=P.slice(),Z=M.slice(),te=new a(j,Z,!0);T.push(te);var re=U.indexOf(g);if(!(re<0)){U[re]=te,Z[E]=N,j[D]=-1,Z[D]=g,M[D]=te,te.flip();for(var F=0;F<=A;++F){var W=j[F];if(!(W<0||W===x)){for(var J=new Array(A-1),le=0,ue=0;ue<=A;++ue){var se=j[ue];se<0||ue===F||(J[le++]=se)}v.push(new i(J,te,F))}}}}}}}v.sort(r);for(var D=0;D+1<v.length;D+=2){var G=v[D],Y=v[D+1],ee=G.index,$=Y.index;ee<0||$<0||(G.cell.adjacent[G.index]=Y.cell,Y.cell.adjacent[Y.index]=G.cell)}},d.insert=function(m,g){var x=this.vertices;x.push(m);var A=this.walk(m,g);if(!!A){for(var b=this.dimension,S=this.tuple,w=0;w<=b;++w){var T=A.vertices[w];T<0?S[w]=m:S[w]=x[T]}var _=this.orient(S);_<0||_===0&&(A=this.handleBoundaryDegeneracy(A,m),!A)||this.addPeaks(m,A)}},d.boundary=function(){for(var m=this.dimension,g=[],x=this.simplices,A=x.length,b=0;b<A;++b){var S=x[b];if(S.boundary){for(var w=new Array(m),T=S.vertices,_=0,v=0,P=0;P<=m;++P)T[P]>=0?w[_++]=T[P]:v=P&1;if(v===(m&1)){var M=w[0];w[0]=w[1],w[1]=M}g.push(w)}}return g};function y(m,g){var x=m.length;if(x===0)throw new Error("Must have at least d+1 points");var A=m[0].length;if(x<=A)throw new Error("Must input at least d+1 points");var b=m.slice(0,A+1),S=t.apply(void 0,b);if(S===0)throw new Error("Input not in general position");for(var w=new Array(A+1),T=0;T<=A;++T)w[T]=T;S<0&&(w[0]=1,w[1]=0);for(var _=new a(w,new Array(A+1),!1),v=_.adjacent,P=new Array(A+2),T=0;T<=A;++T){for(var M=w.slice(),E=0;E<=A;++E)E===T&&(M[E]=-1);var D=M[0];M[0]=M[1],M[1]=D;var N=new a(M,new Array(A+1),!0);v[T]=N,P[T]=N}P[A+1]=_;for(var T=0;T<=A;++T)for(var M=v[T].vertices,O=v[T].adjacent,E=0;E<=A;++E){var I=M[E];if(I<0){O[E]=_;continue}for(var F=0;F<=A;++F)v[F].vertices.indexOf(I)<0&&(O[E]=v[F])}for(var V=new h(A,b,P),U=!!g,T=A+1;T<x;++T)V.insert(m[T],U);return V.boundary()}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(o,c,p){var t=o("binary-search-bounds"),n=0,a=1,i=2;c.exports=_;function r(v,P,M,E,D){this.mid=v,this.left=P,this.right=M,this.leftPoints=E,this.rightPoints=D,this.count=(P?P.count:0)+(M?M.count:0)+E.length}var f=r.prototype;function u(v,P){v.mid=P.mid,v.left=P.left,v.right=P.right,v.leftPoints=P.leftPoints,v.rightPoints=P.rightPoints,v.count=P.count}function s(v,P){var M=S(P);v.mid=M.mid,v.left=M.left,v.right=M.right,v.leftPoints=M.leftPoints,v.rightPoints=M.rightPoints,v.count=M.count}function h(v,P){var M=v.intervals([]);M.push(P),s(v,M)}function d(v,P){var M=v.intervals([]),E=M.indexOf(P);return E<0?n:(M.splice(E,1),s(v,M),a)}f.intervals=function(v){return v.push.apply(v,this.leftPoints),this.left&&this.left.intervals(v),this.right&&this.right.intervals(v),v},f.insert=function(v){var P=this.count-this.leftPoints.length;if(this.count+=1,v[1]<this.mid)this.left?4*(this.left.count+1)>3*(P+1)?h(this,v):this.left.insert(v):this.left=S([v]);else if(v[0]>this.mid)this.right?4*(this.right.count+1)>3*(P+1)?h(this,v):this.right.insert(v):this.right=S([v]);else{var M=t.ge(this.leftPoints,v,A),E=t.ge(this.rightPoints,v,b);this.leftPoints.splice(M,0,v),this.rightPoints.splice(E,0,v)}},f.remove=function(v){var P=this.count-this.leftPoints;if(v[1]<this.mid){if(!this.left)return n;var M=this.right?this.right.count:0;if(4*M>3*(P-1))return d(this,v);var E=this.left.remove(v);return E===i?(this.left=null,this.count-=1,a):(E===a&&(this.count-=1),E)}else if(v[0]>this.mid){if(!this.right)return n;var D=this.left?this.left.count:0;if(4*D>3*(P-1))return d(this,v);var E=this.right.remove(v);return E===i?(this.right=null,this.count-=1,a):(E===a&&(this.count-=1),E)}else{if(this.count===1)return this.leftPoints[0]===v?i:n;if(this.leftPoints.length===1&&this.leftPoints[0]===v){if(this.left&&this.right){for(var N=this,O=this.left;O.right;)N=O,O=O.right;if(N===this)O.right=this.right;else{var I=this.left,E=this.right;N.count-=O.count,N.right=O.left,O.left=I,O.right=E}u(this,O),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?u(this,this.left):u(this,this.right);return a}for(var I=t.ge(this.leftPoints,v,A);I<this.leftPoints.length&&this.leftPoints[I][0]===v[0];++I)if(this.leftPoints[I]===v){this.count-=1,this.leftPoints.splice(I,1);for(var E=t.ge(this.rightPoints,v,b);E<this.rightPoints.length&&this.rightPoints[E][1]===v[1];++E)if(this.rightPoints[E]===v)return this.rightPoints.splice(E,1),a}return n}};function y(v,P,M){for(var E=0;E<v.length&&v[E][0]<=P;++E){var D=M(v[E]);if(D)return D}}function m(v,P,M){for(var E=v.length-1;E>=0&&v[E][1]>=P;--E){var D=M(v[E]);if(D)return D}}function g(v,P){for(var M=0;M<v.length;++M){var E=P(v[M]);if(E)return E}}f.queryPoint=function(v,P){if(v<this.mid){if(this.left){var M=this.left.queryPoint(v,P);if(M)return M}return y(this.leftPoints,v,P)}else if(v>this.mid){if(this.right){var M=this.right.queryPoint(v,P);if(M)return M}return m(this.rightPoints,v,P)}else return g(this.leftPoints,P)},f.queryInterval=function(v,P,M){if(v<this.mid&&this.left){var E=this.left.queryInterval(v,P,M);if(E)return E}if(P>this.mid&&this.right){var E=this.right.queryInterval(v,P,M);if(E)return E}return P<this.mid?y(this.leftPoints,P,M):v>this.mid?m(this.rightPoints,v,M):g(this.leftPoints,M)};function x(v,P){return v-P}function A(v,P){var M=v[0]-P[0];return M||v[1]-P[1]}function b(v,P){var M=v[1]-P[1];return M||v[0]-P[0]}function S(v){if(v.length===0)return null;for(var P=[],M=0;M<v.length;++M)P.push(v[M][0],v[M][1]);P.sort(x);for(var E=P[P.length>>1],D=[],N=[],O=[],M=0;M<v.length;++M){var I=v[M];I[1]<E?D.push(I):E<I[0]?N.push(I):O.push(I)}var F=O,V=O.slice();return F.sort(A),V.sort(b),new r(E,S(D),S(N),F,V)}function w(v){this.root=v}var T=w.prototype;T.insert=function(v){this.root?this.root.insert(v):this.root=new r(v[0],null,null,[v],[v])},T.remove=function(v){if(this.root){var P=this.root.remove(v);return P===i&&(this.root=null),P!==n}return!1},T.queryPoint=function(v,P){if(this.root)return this.root.queryPoint(v,P)},T.queryInterval=function(v,P,M){if(v<=P&&this.root)return this.root.queryInterval(v,P,M)},Object.defineProperty(T,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(T,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function _(v){return!v||v.length===0?new w(null):new w(S(v))}},{"binary-search-bounds":31}],235:[function(o,c,p){function t(n){for(var a=new Array(n),i=0;i<n;++i)a[i]=i;return a}c.exports=t},{}],236:[function(o,c,p){c.exports=!0},{}],237:[function(o,c,p){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */c.exports=function(a){return a!=null&&(t(a)||n(a)||!!a._isBuffer)};function t(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function n(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&t(a.slice(0,0))}},{}],238:[function(o,c,p){c.exports=a,c.exports.isMobile=a,c.exports.default=a;var t=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function a(i){i||(i={});var r=i.ua;if(!r&&typeof navigator!="undefined"&&(r=navigator.userAgent),r&&r.headers&&typeof r.headers["user-agent"]=="string"&&(r=r.headers["user-agent"]),typeof r!="string")return!1;var f=i.tablet?n.test(r):t.test(r);return!f&&i.tablet&&i.featureDetect&&navigator&&navigator.maxTouchPoints>1&&r.indexOf("Macintosh")!==-1&&r.indexOf("Safari")!==-1&&(f=!0),f}},{}],239:[function(o,c,p){c.exports=function(t){for(var n=t.length,a,i=0;i<n;i++)if(a=t.charCodeAt(i),(a<9||a>13)&&a!==32&&a!==133&&a!==160&&a!==5760&&a!==6158&&(a<8192||a>8205)&&a!==8232&&a!==8233&&a!==8239&&a!==8287&&a!==8288&&a!==12288&&a!==65279)return!1;return!0}},{}],240:[function(o,c,p){function t(n,a,i){return n*(1-i)+a*i}c.exports=t},{}],241:[function(o,c,p){var t=o("./normalize"),n=o("gl-mat4/create"),a=o("gl-mat4/clone"),i=o("gl-mat4/determinant"),r=o("gl-mat4/invert"),f=o("gl-mat4/transpose"),u={length:o("gl-vec3/length"),normalize:o("gl-vec3/normalize"),dot:o("gl-vec3/dot"),cross:o("gl-vec3/cross")},s=n(),h=n(),d=[0,0,0,0],y=[[0,0,0],[0,0,0],[0,0,0]],m=[0,0,0];c.exports=function(S,w,T,_,v,P){if(w||(w=[0,0,0]),T||(T=[0,0,0]),_||(_=[0,0,0]),v||(v=[0,0,0,1]),P||(P=[0,0,0,1]),!t(s,S)||(a(h,s),h[3]=0,h[7]=0,h[11]=0,h[15]=1,Math.abs(i(h)<1e-8)))return!1;var M=s[3],E=s[7],D=s[11],N=s[12],O=s[13],I=s[14],F=s[15];if(M!==0||E!==0||D!==0){d[0]=M,d[1]=E,d[2]=D,d[3]=F;var V=r(h,h);if(!V)return!1;f(h,h),g(v,d,h)}else v[0]=v[1]=v[2]=0,v[3]=1;if(w[0]=N,w[1]=O,w[2]=I,x(y,s),T[0]=u.length(y[0]),u.normalize(y[0],y[0]),_[0]=u.dot(y[0],y[1]),A(y[1],y[1],y[0],1,-_[0]),T[1]=u.length(y[1]),u.normalize(y[1],y[1]),_[0]/=T[1],_[1]=u.dot(y[0],y[2]),A(y[2],y[2],y[0],1,-_[1]),_[2]=u.dot(y[1],y[2]),A(y[2],y[2],y[1],1,-_[2]),T[2]=u.length(y[2]),u.normalize(y[2],y[2]),_[1]/=T[2],_[2]/=T[2],u.cross(m,y[1],y[2]),u.dot(y[0],m)<0)for(var U=0;U<3;U++)T[U]*=-1,y[U][0]*=-1,y[U][1]*=-1,y[U][2]*=-1;return P[0]=.5*Math.sqrt(Math.max(1+y[0][0]-y[1][1]-y[2][2],0)),P[1]=.5*Math.sqrt(Math.max(1-y[0][0]+y[1][1]-y[2][2],0)),P[2]=.5*Math.sqrt(Math.max(1-y[0][0]-y[1][1]+y[2][2],0)),P[3]=.5*Math.sqrt(Math.max(1+y[0][0]+y[1][1]+y[2][2],0)),y[2][1]>y[1][2]&&(P[0]=-P[0]),y[0][2]>y[2][0]&&(P[1]=-P[1]),y[1][0]>y[0][1]&&(P[2]=-P[2]),!0};function g(b,S,w){var T=S[0],_=S[1],v=S[2],P=S[3];return b[0]=w[0]*T+w[4]*_+w[8]*v+w[12]*P,b[1]=w[1]*T+w[5]*_+w[9]*v+w[13]*P,b[2]=w[2]*T+w[6]*_+w[10]*v+w[14]*P,b[3]=w[3]*T+w[7]*_+w[11]*v+w[15]*P,b}function x(b,S){b[0][0]=S[0],b[0][1]=S[1],b[0][2]=S[2],b[1][0]=S[4],b[1][1]=S[5],b[1][2]=S[6],b[2][0]=S[8],b[2][1]=S[9],b[2][2]=S[10]}function A(b,S,w,T,_){b[0]=S[0]*T+w[0]*_,b[1]=S[1]*T+w[1]*_,b[2]=S[2]*T+w[2]*_}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(o,c,p){c.exports=function(n,a){var i=a[15];if(i===0)return!1;for(var r=1/i,f=0;f<16;f++)n[f]=a[f]*r;return!0}},{}],243:[function(o,c,p){var t=o("gl-vec3/lerp"),n=o("mat4-recompose"),a=o("mat4-decompose"),i=o("gl-mat4/determinant"),r=o("quat-slerp"),f=d(),u=d(),s=d();c.exports=h;function h(g,x,A,b){if(i(x)===0||i(A)===0)return!1;var S=a(x,f.translate,f.scale,f.skew,f.perspective,f.quaternion),w=a(A,u.translate,u.scale,u.skew,u.perspective,u.quaternion);return!S||!w?!1:(t(s.translate,f.translate,u.translate,b),t(s.skew,f.skew,u.skew,b),t(s.scale,f.scale,u.scale,b),t(s.perspective,f.perspective,u.perspective,b),r(s.quaternion,f.quaternion,u.quaternion,b),n(g,s.translate,s.scale,s.skew,s.perspective,s.quaternion),!0)}function d(){return{translate:y(),scale:y(1),skew:y(),perspective:m(),quaternion:m()}}function y(g){return[g||0,g||0,g||0]}function m(){return[0,0,0,1]}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(o,c,p){var t={identity:o("gl-mat4/identity"),translate:o("gl-mat4/translate"),multiply:o("gl-mat4/multiply"),create:o("gl-mat4/create"),scale:o("gl-mat4/scale"),fromRotationTranslation:o("gl-mat4/fromRotationTranslation")};t.create();var n=t.create();c.exports=function(i,r,f,u,s,h){return t.identity(i),t.fromRotationTranslation(i,h,r),i[3]=s[0],i[7]=s[1],i[11]=s[2],i[15]=s[3],t.identity(n),u[2]!==0&&(n[9]=u[2],t.multiply(i,i,n)),u[1]!==0&&(n[9]=0,n[8]=u[1],t.multiply(i,i,n)),u[0]!==0&&(n[8]=0,n[4]=u[0],t.multiply(i,i,n)),t.scale(i,i,f),i}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(o,c,p){var t=o("binary-search-bounds"),n=o("mat4-interpolate"),a=o("gl-mat4/invert"),i=o("gl-mat4/rotateX"),r=o("gl-mat4/rotateY"),f=o("gl-mat4/rotateZ"),u=o("gl-mat4/lookAt"),s=o("gl-mat4/translate");o("gl-mat4/scale");var h=o("gl-vec3/normalize"),d=[0,0,0];c.exports=x;function y(A){this._components=A.slice(),this._time=[0],this.prevMatrix=A.slice(),this.nextMatrix=A.slice(),this.computedMatrix=A.slice(),this.computedInverse=A.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var m=y.prototype;m.recalcMatrix=function(A){var b=this._time,S=t.le(b,A),w=this.computedMatrix;if(!(S<0)){var T=this._components;if(S===b.length-1)for(var _=16*S,v=0;v<16;++v)w[v]=T[_++];else{for(var P=b[S+1]-b[S],_=16*S,M=this.prevMatrix,E=!0,v=0;v<16;++v)M[v]=T[_++];for(var D=this.nextMatrix,v=0;v<16;++v)D[v]=T[_++],E=E&&M[v]===D[v];if(P<1e-6||E)for(var v=0;v<16;++v)w[v]=M[v];else n(w,M,D,(A-b[S])/P)}var N=this.computedUp;N[0]=w[1],N[1]=w[5],N[2]=w[9],h(N,N);var O=this.computedInverse;a(O,w);var I=this.computedEye,F=O[15];I[0]=O[12]/F,I[1]=O[13]/F,I[2]=O[14]/F;for(var V=this.computedCenter,U=Math.exp(this.computedRadius[0]),v=0;v<3;++v)V[v]=I[v]-w[2+4*v]*U}},m.idle=function(A){if(!(A<this.lastT())){for(var b=this._components,S=b.length-16,w=0;w<16;++w)b.push(b[S++]);this._time.push(A)}},m.flush=function(A){var b=t.gt(this._time,A)-2;b<0||(this._time.splice(0,b),this._components.splice(0,16*b))},m.lastT=function(){return this._time[this._time.length-1]},m.lookAt=function(A,b,S,w){this.recalcMatrix(A),b=b||this.computedEye,S=S||d,w=w||this.computedUp,this.setMatrix(A,u(this.computedMatrix,b,S,w));for(var T=0,_=0;_<3;++_)T+=Math.pow(S[_]-b[_],2);T=Math.log(Math.sqrt(T)),this.computedRadius[0]=T},m.rotate=function(A,b,S,w){this.recalcMatrix(A);var T=this.computedInverse;b&&r(T,T,b),S&&i(T,T,S),w&&f(T,T,w),this.setMatrix(A,a(this.computedMatrix,T))};var g=[0,0,0];m.pan=function(A,b,S,w){g[0]=-(b||0),g[1]=-(S||0),g[2]=-(w||0),this.recalcMatrix(A);var T=this.computedInverse;s(T,T,g),this.setMatrix(A,a(T,T))},m.translate=function(A,b,S,w){g[0]=b||0,g[1]=S||0,g[2]=w||0,this.recalcMatrix(A);var T=this.computedMatrix;s(T,T,g),this.setMatrix(A,T)},m.setMatrix=function(A,b){if(!(A<this.lastT())){this._time.push(A);for(var S=0;S<16;++S)this._components.push(b[S])}},m.setDistance=function(A,b){this.computedRadius[0]=b},m.setDistanceLimits=function(A,b){var S=this._limits;S[0]=A,S[1]=b},m.getDistanceLimits=function(A){var b=this._limits;return A?(A[0]=b[0],A[1]=b[1],A):b};function x(A){A=A||{};var b=A.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new y(b)}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(o,c,p){c.exports=n;var t=o("robust-orientation")[3];function n(a){var i=a.length;if(i<3){for(var m=new Array(i),r=0;r<i;++r)m[r]=r;return i===2&&a[0][0]===a[1][0]&&a[0][1]===a[1][1]?[0]:m}for(var f=new Array(i),r=0;r<i;++r)f[r]=r;f.sort(function(b,S){var w=a[b][0]-a[S][0];return w||a[b][1]-a[S][1]});for(var u=[f[0],f[1]],s=[f[0],f[1]],r=2;r<i;++r){for(var h=f[r],d=a[h],y=u.length;y>1&&t(a[u[y-2]],a[u[y-1]],d)<=0;)y-=1,u.pop();for(u.push(h),y=s.length;y>1&&t(a[s[y-2]],a[s[y-1]],d)>=0;)y-=1,s.pop();s.push(h)}for(var m=new Array(s.length+u.length-2),g=0,r=0,x=u.length;r<x;++r)m[g++]=u[r];for(var A=s.length-2;A>0;--A)m[g++]=s[A];return m}},{"robust-orientation":284}],247:[function(o,c,p){c.exports=n;var t=o("mouse-event");function n(a,i){i||(i=a,a=window);var r=0,f=0,u=0,s={shift:!1,alt:!1,control:!1,meta:!1},h=!1;function d(v){var P=!1;return"altKey"in v&&(P=P||v.altKey!==s.alt,s.alt=!!v.altKey),"shiftKey"in v&&(P=P||v.shiftKey!==s.shift,s.shift=!!v.shiftKey),"ctrlKey"in v&&(P=P||v.ctrlKey!==s.control,s.control=!!v.ctrlKey),"metaKey"in v&&(P=P||v.metaKey!==s.meta,s.meta=!!v.metaKey),P}function y(v,P){var M=t.x(P),E=t.y(P);"buttons"in P&&(v=P.buttons|0),(v!==r||M!==f||E!==u||d(P))&&(r=v|0,f=M||0,u=E||0,i&&i(r,f,u,s))}function m(v){y(0,v)}function g(){(r||f||u||s.shift||s.alt||s.meta||s.control)&&(f=u=0,r=0,s.shift=s.alt=s.control=s.meta=!1,i&&i(0,0,0,s))}function x(v){d(v)&&i&&i(r,f,u,s)}function A(v){t.buttons(v)===0?y(0,v):y(r,v)}function b(v){y(r|t.buttons(v),v)}function S(v){y(r&~t.buttons(v),v)}function w(){h||(h=!0,a.addEventListener("mousemove",A),a.addEventListener("mousedown",b),a.addEventListener("mouseup",S),a.addEventListener("mouseleave",m),a.addEventListener("mouseenter",m),a.addEventListener("mouseout",m),a.addEventListener("mouseover",m),a.addEventListener("blur",g),a.addEventListener("keyup",x),a.addEventListener("keydown",x),a.addEventListener("keypress",x),a!==window&&(window.addEventListener("blur",g),window.addEventListener("keyup",x),window.addEventListener("keydown",x),window.addEventListener("keypress",x)))}function T(){!h||(h=!1,a.removeEventListener("mousemove",A),a.removeEventListener("mousedown",b),a.removeEventListener("mouseup",S),a.removeEventListener("mouseleave",m),a.removeEventListener("mouseenter",m),a.removeEventListener("mouseout",m),a.removeEventListener("mouseover",m),a.removeEventListener("blur",g),a.removeEventListener("keyup",x),a.removeEventListener("keydown",x),a.removeEventListener("keypress",x),a!==window&&(window.removeEventListener("blur",g),window.removeEventListener("keyup",x),window.removeEventListener("keydown",x),window.removeEventListener("keypress",x)))}w();var _={element:a};return Object.defineProperties(_,{enabled:{get:function(){return h},set:function(v){v?w():T()},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return f},enumerable:!0},y:{get:function(){return u},enumerable:!0},mods:{get:function(){return s},enumerable:!0}}),_}},{"mouse-event":249}],248:[function(o,c,p){var t={left:0,top:0};c.exports=n;function n(i,r,f){r=r||i.currentTarget||i.srcElement,Array.isArray(f)||(f=[0,0]);var u=i.clientX||0,s=i.clientY||0,h=a(r);return f[0]=u-h.left,f[1]=s-h.top,f}function a(i){return i===window||i===document||i===document.body?t:i.getBoundingClientRect()}},{}],249:[function(o,c,p){function t(r){if(typeof r=="object"){if("buttons"in r)return r.buttons;if("which"in r){var f=r.which;if(f===2)return 4;if(f===3)return 2;if(f>0)return 1<<f-1}else if("button"in r){var f=r.button;if(f===1)return 4;if(f===2)return 2;if(f>=0)return 1<<f}}return 0}p.buttons=t;function n(r){return r.target||r.srcElement||window}p.element=n;function a(r){if(typeof r=="object"){if("offsetX"in r)return r.offsetX;var f=n(r),u=f.getBoundingClientRect();return r.clientX-u.left}return 0}p.x=a;function i(r){if(typeof r=="object"){if("offsetY"in r)return r.offsetY;var f=n(r),u=f.getBoundingClientRect();return r.clientY-u.top}return 0}p.y=i},{}],250:[function(o,c,p){var t=o("to-px");c.exports=n;function n(a,i,r){typeof a=="function"&&(r=!!i,i=a,a=window);var f=t("ex",a),u=function(s){r&&s.preventDefault();var h=s.deltaX||0,d=s.deltaY||0,y=s.deltaZ||0,m=s.deltaMode,g=1;switch(m){case 1:g=f;break;case 2:g=window.innerHeight;break}if(h*=g,d*=g,y*=g,h||d||y)return i(h,d,y,s)};return a.addEventListener("wheel",u),u}},{"to-px":304}],251:[function(o,c,p){var t=o("typedarray-pool");c.exports=i;var n={"false,0,1":function(f,u,s,h,d){return function(m,g,x,A){var b=m.shape[0]|0,S=m.shape[1]|0,w=m.data,T=m.offset|0,_=m.stride[0]|0,v=m.stride[1]|0,P=T,M,E=-_|0,D=0,N=-v|0,O=0,I=-_-v|0,F=0,V=_|0,U=v-_*b|0,j=0,Z=0,te=0,re=2*b|0,W=h(re),J=h(re),le=0,ue=0,se=-1|0,G=-1|0,Y=0,ee=-b|0,$=b|0,K=0,Q=-b-1|0,ae=b-1|0,ie=0,oe=0,fe=0;for(j=0;j<b;++j)W[le++]=s(w[P],g,x,A),P+=V;if(P+=U,S>0){if(Z=1,W[le++]=s(w[P],g,x,A),P+=V,b>0)for(j=1,M=w[P],ue=W[le]=s(M,g,x,A),Y=W[le+se],K=W[le+ee],ie=W[le+Q],(ue!==Y||ue!==K||ue!==ie)&&(D=w[P+E],O=w[P+N],F=w[P+I],f(j,Z,M,D,O,F,ue,Y,K,ie,g,x,A),oe=J[le]=te++),le+=1,P+=V,j=2;j<b;++j)M=w[P],ue=W[le]=s(M,g,x,A),Y=W[le+se],K=W[le+ee],ie=W[le+Q],(ue!==Y||ue!==K||ue!==ie)&&(D=w[P+E],O=w[P+N],F=w[P+I],f(j,Z,M,D,O,F,ue,Y,K,ie,g,x,A),oe=J[le]=te++,ie!==Y&&u(J[le+se],oe,F,D,ie,Y,g,x,A)),le+=1,P+=V;for(P+=U,le=0,fe=se,se=G,G=fe,fe=ee,ee=$,$=fe,fe=Q,Q=ae,ae=fe,Z=2;Z<S;++Z){if(W[le++]=s(w[P],g,x,A),P+=V,b>0)for(j=1,M=w[P],ue=W[le]=s(M,g,x,A),Y=W[le+se],K=W[le+ee],ie=W[le+Q],(ue!==Y||ue!==K||ue!==ie)&&(D=w[P+E],O=w[P+N],F=w[P+I],f(j,Z,M,D,O,F,ue,Y,K,ie,g,x,A),oe=J[le]=te++,ie!==K&&u(J[le+ee],oe,O,F,K,ie,g,x,A)),le+=1,P+=V,j=2;j<b;++j)M=w[P],ue=W[le]=s(M,g,x,A),Y=W[le+se],K=W[le+ee],ie=W[le+Q],(ue!==Y||ue!==K||ue!==ie)&&(D=w[P+E],O=w[P+N],F=w[P+I],f(j,Z,M,D,O,F,ue,Y,K,ie,g,x,A),oe=J[le]=te++,ie!==K&&u(J[le+ee],oe,O,F,K,ie,g,x,A),ie!==Y&&u(J[le+se],oe,F,D,ie,Y,g,x,A)),le+=1,P+=V;Z&1&&(le=0),fe=se,se=G,G=fe,fe=ee,ee=$,$=fe,fe=Q,Q=ae,ae=fe,P+=U}}d(J),d(W)}},"false,1,0":function(f,u,s,h,d){return function(m,g,x,A){var b=m.shape[0]|0,S=m.shape[1]|0,w=m.data,T=m.offset|0,_=m.stride[0]|0,v=m.stride[1]|0,P=T,M,E=-_|0,D=0,N=-v|0,O=0,I=-_-v|0,F=0,V=v|0,U=_-v*S|0,j=0,Z=0,te=0,re=2*S|0,W=h(re),J=h(re),le=0,ue=0,se=-1|0,G=-1|0,Y=0,ee=-S|0,$=S|0,K=0,Q=-S-1|0,ae=S-1|0,ie=0,oe=0,fe=0;for(Z=0;Z<S;++Z)W[le++]=s(w[P],g,x,A),P+=V;if(P+=U,b>0){if(j=1,W[le++]=s(w[P],g,x,A),P+=V,S>0)for(Z=1,M=w[P],ue=W[le]=s(M,g,x,A),K=W[le+ee],Y=W[le+se],ie=W[le+Q],(ue!==K||ue!==Y||ue!==ie)&&(D=w[P+E],O=w[P+N],F=w[P+I],f(j,Z,M,D,O,F,ue,K,Y,ie,g,x,A),oe=J[le]=te++),le+=1,P+=V,Z=2;Z<S;++Z)M=w[P],ue=W[le]=s(M,g,x,A),K=W[le+ee],Y=W[le+se],ie=W[le+Q],(ue!==K||ue!==Y||ue!==ie)&&(D=w[P+E],O=w[P+N],F=w[P+I],f(j,Z,M,D,O,F,ue,K,Y,ie,g,x,A),oe=J[le]=te++,ie!==Y&&u(J[le+se],oe,O,F,Y,ie,g,x,A)),le+=1,P+=V;for(P+=U,le=0,fe=ee,ee=$,$=fe,fe=se,se=G,G=fe,fe=Q,Q=ae,ae=fe,j=2;j<b;++j){if(W[le++]=s(w[P],g,x,A),P+=V,S>0)for(Z=1,M=w[P],ue=W[le]=s(M,g,x,A),K=W[le+ee],Y=W[le+se],ie=W[le+Q],(ue!==K||ue!==Y||ue!==ie)&&(D=w[P+E],O=w[P+N],F=w[P+I],f(j,Z,M,D,O,F,ue,K,Y,ie,g,x,A),oe=J[le]=te++,ie!==K&&u(J[le+ee],oe,F,D,ie,K,g,x,A)),le+=1,P+=V,Z=2;Z<S;++Z)M=w[P],ue=W[le]=s(M,g,x,A),K=W[le+ee],Y=W[le+se],ie=W[le+Q],(ue!==K||ue!==Y||ue!==ie)&&(D=w[P+E],O=w[P+N],F=w[P+I],f(j,Z,M,D,O,F,ue,K,Y,ie,g,x,A),oe=J[le]=te++,ie!==Y&&u(J[le+se],oe,O,F,Y,ie,g,x,A),ie!==K&&u(J[le+ee],oe,F,D,ie,K,g,x,A)),le+=1,P+=V;j&1&&(le=0),fe=ee,ee=$,$=fe,fe=se,se=G,G=fe,fe=Q,Q=ae,ae=fe,P+=U}}d(J),d(W)}}};function a(r,f,u,s,h,d){var y=[d,h].join(","),m=n[y];return m(r,f,u,t.mallocUint32,t.freeUint32)}function i(r){function f(g){throw new Error("ndarray-extract-contour: "+g)}typeof r!="object"&&f("Must specify arguments");var u=r.order;Array.isArray(u)||f("Must specify order");var s=r.arrayArguments||1;s<1&&f("Must have at least one array argument");var h=r.scalarArguments||0;h<0&&f("Scalar arg count must be > 0"),typeof r.vertex!="function"&&f("Must specify vertex creation function"),typeof r.cell!="function"&&f("Must specify cell creation function"),typeof r.phase!="function"&&f("Must specify phase function");for(var d=r.getters||[],y=new Array(s),m=0;m<s;++m)d.indexOf(m)>=0?y[m]=!0:y[m]=!1;return a(r.vertex,r.cell,r.phase,h,u,y)}},{"typedarray-pool":308}],252:[function(o,c,p){var t=o("dup"),n={zero:function(x,A,b,S){var w=x[0],T=b[0];S|=0;var _=0,v=T;for(_=0;_<w;++_)A[S]=0,S+=v},fdTemplate1:function(x,A,b,S,w,T,_){var v=x[0],P=b[0],M=T[0],E=-1*P,D=P;S|=0,_|=0;var N=0,O=P,I=M;for(N=0;N<v;++N)w[_]=.5*(A[S+E]-A[S+D]),S+=O,_+=I},fdTemplate2:function(x,A,b,S,w,T,_,v,P,M){var E=x[0],D=x[1],N=b[0],O=b[1],I=T[0],F=T[1],V=P[0],U=P[1],j=-1*N,Z=N,te=-1*O,re=O;S|=0,_|=0,M|=0;var W=0,J=0,le=O,ue=N-D*O,se=F,G=I-D*F,Y=U,ee=V-D*U;for(J=0;J<E;++J){for(W=0;W<D;++W)w[_]=.5*(A[S+j]-A[S+Z]),v[M]=.5*(A[S+te]-A[S+re]),S+=le,_+=se,M+=Y;S+=ue,_+=G,M+=ee}}},a={cdiff:function(x){var A={};return function(S,w,T){var _=S.dtype,v=S.order,P=w.dtype,M=w.order,E=T.dtype,D=T.order,N=[_,v.join(),P,M.join(),E,D.join()].join(),O=A[N];return O||(A[N]=O=x([_,v,P,M,E,D])),O(S.shape.slice(0),S.data,S.stride,S.offset|0,w.data,w.stride,w.offset|0,T.data,T.stride,T.offset|0)}},zero:function(x){var A={};return function(S){var w=S.dtype,T=S.order,_=[w,T.join()].join(),v=A[_];return v||(A[_]=v=x([w,T])),v(S.shape.slice(0),S.data,S.stride,S.offset|0)}},fdTemplate1:function(x){var A={};return function(S,w){var T=S.dtype,_=S.order,v=w.dtype,P=w.order,M=[T,_.join(),v,P.join()].join(),E=A[M];return E||(A[M]=E=x([T,_,v,P])),E(S.shape.slice(0),S.data,S.stride,S.offset|0,w.data,w.stride,w.offset|0)}},fdTemplate2:function(x){var A={};return function(S,w,T){var _=S.dtype,v=S.order,P=w.dtype,M=w.order,E=T.dtype,D=T.order,N=[_,v.join(),P,M.join(),E,D.join()].join(),O=A[N];return O||(A[N]=O=x([_,v,P,M,E,D])),O(S.shape.slice(0),S.data,S.stride,S.offset|0,w.data,w.stride,w.offset|0,T.data,T.stride,T.offset|0)}}};function i(x){var A=a[x.funcName];return A(r.bind(void 0,x))}function r(x){return n[x.funcName]}function f(x){return i({funcName:x.funcName})}var u={},s={},h=f({funcName:"cdiff"}),d=f({funcName:"zero"});function y(x){return x in u?u[x]:u[x]=f({funcName:"fdTemplate"+x})}function m(x,A,b,S){return function(w,T){var _=T.shape.slice();return _[0]>2&&_[1]>2&&S(T.pick(-1,-1).lo(1,1).hi(_[0]-2,_[1]-2),w.pick(-1,-1,0).lo(1,1).hi(_[0]-2,_[1]-2),w.pick(-1,-1,1).lo(1,1).hi(_[0]-2,_[1]-2)),_[1]>2&&(b(T.pick(0,-1).lo(1).hi(_[1]-2),w.pick(0,-1,1).lo(1).hi(_[1]-2)),A(w.pick(0,-1,0).lo(1).hi(_[1]-2))),_[1]>2&&(b(T.pick(_[0]-1,-1).lo(1).hi(_[1]-2),w.pick(_[0]-1,-1,1).lo(1).hi(_[1]-2)),A(w.pick(_[0]-1,-1,0).lo(1).hi(_[1]-2))),_[0]>2&&(b(T.pick(-1,0).lo(1).hi(_[0]-2),w.pick(-1,0,0).lo(1).hi(_[0]-2)),A(w.pick(-1,0,1).lo(1).hi(_[0]-2))),_[0]>2&&(b(T.pick(-1,_[1]-1).lo(1).hi(_[0]-2),w.pick(-1,_[1]-1,0).lo(1).hi(_[0]-2)),A(w.pick(-1,_[1]-1,1).lo(1).hi(_[0]-2))),w.set(0,0,0,0),w.set(0,0,1,0),w.set(_[0]-1,0,0,0),w.set(_[0]-1,0,1,0),w.set(0,_[1]-1,0,0),w.set(0,_[1]-1,1,0),w.set(_[0]-1,_[1]-1,0,0),w.set(_[0]-1,_[1]-1,1,0),w}}function g(x){var A=x.join(),b=s[A];if(b)return b;for(var S=x.length,w=[h,d],T=1;T<=S;++T)w.push(y(T));var _=m,b=_.apply(void 0,w);return s[A]=b,b}c.exports=function(A,b,S){if(Array.isArray(S)||(typeof S=="string"?S=t(b.dimension,S):S=t(b.dimension,"clamp")),b.size===0)return A;if(b.dimension===0)return A.set(0),A;var w=g(S);return w(A,b)}},{dup:65}],253:[function(o,c,p){function t(f,u){var s=Math.floor(u),h=u-s,d=0<=s&&s<f.shape[0],y=0<=s+1&&s+1<f.shape[0],m=d?+f.get(s):0,g=y?+f.get(s+1):0;return(1-h)*m+h*g}function n(f,u,s){var h=Math.floor(u),d=u-h,y=0<=h&&h<f.shape[0],m=0<=h+1&&h+1<f.shape[0],g=Math.floor(s),x=s-g,A=0<=g&&g<f.shape[1],b=0<=g+1&&g+1<f.shape[1],S=y&&A?f.get(h,g):0,w=y&&b?f.get(h,g+1):0,T=m&&A?f.get(h+1,g):0,_=m&&b?f.get(h+1,g+1):0;return(1-x)*((1-d)*S+d*T)+x*((1-d)*w+d*_)}function a(f,u,s,h){var d=Math.floor(u),y=u-d,m=0<=d&&d<f.shape[0],g=0<=d+1&&d+1<f.shape[0],x=Math.floor(s),A=s-x,b=0<=x&&x<f.shape[1],S=0<=x+1&&x+1<f.shape[1],w=Math.floor(h),T=h-w,_=0<=w&&w<f.shape[2],v=0<=w+1&&w+1<f.shape[2],P=m&&b&&_?f.get(d,x,w):0,M=m&&S&&_?f.get(d,x+1,w):0,E=g&&b&&_?f.get(d+1,x,w):0,D=g&&S&&_?f.get(d+1,x+1,w):0,N=m&&b&&v?f.get(d,x,w+1):0,O=m&&S&&v?f.get(d,x+1,w+1):0,I=g&&b&&v?f.get(d+1,x,w+1):0,F=g&&S&&v?f.get(d+1,x+1,w+1):0;return(1-T)*((1-A)*((1-y)*P+y*E)+A*((1-y)*M+y*D))+T*((1-A)*((1-y)*N+y*I)+A*((1-y)*O+y*F))}function i(f){var u=f.shape.length|0,s=new Array(u),h=new Array(u),d=new Array(u),y=new Array(u),m,g;for(m=0;m<u;++m)g=+arguments[m+1],s[m]=Math.floor(g),h[m]=g-s[m],d[m]=0<=s[m]&&s[m]<f.shape[m],y[m]=0<=s[m]+1&&s[m]+1<f.shape[m];var x=0,A,b,S;e:for(m=0;m<1<<u;++m){for(b=1,S=f.offset,A=0;A<u;++A)if(m&1<<A){if(!y[A])continue e;b*=h[A],S+=f.stride[A]*(s[A]+1)}else{if(!d[A])continue e;b*=1-h[A],S+=f.stride[A]*s[A]}x+=b*f.data[S]}return x}function r(f,u,s,h){switch(f.shape.length){case 0:return 0;case 1:return t(f,u);case 2:return n(f,u,s);case 3:return a(f,u,s,h);default:return i.apply(void 0,arguments)}}c.exports=r,c.exports.d1=t,c.exports.d2=n,c.exports.d3=a},{}],254:[function(o,c,p){var t={"float64,2,1,0":function(){return function(h,d,y,m,g){var x=h[0],A=h[1],b=h[2],S=y[0],w=y[1],T=y[2];m|=0;var _=0,v=0,P=0,M=T,E=w-b*T,D=S-A*w;for(P=0;P<x;++P){for(v=0;v<A;++v){for(_=0;_<b;++_)d[m]/=g,m+=M;m+=E}m+=D}}},"uint8,2,0,1,float64,2,1,0":function(){return function(h,d,y,m,g,x,A,b){var S=h[0],w=h[1],T=h[2],_=y[0],v=y[1],P=y[2],M=x[0],E=x[1],D=x[2];m|=0,A|=0;for(var N=m,O=A,I=h[0]|0;I>0;){I<64?(S=I,I=0):(S=64,I-=64);for(var F=h[1]|0;F>0;){F<64?(w=F,F=0):(w=64,F-=64),m=N+I*_+F*v,A=O+I*M+F*E;var V=0,U=0,j=0,Z=P,te=_-T*P,re=v-S*_,W=D,J=M-T*D,le=E-S*M;for(j=0;j<w;++j){for(U=0;U<S;++U){for(V=0;V<T;++V)d[m]=g[A]*b,m+=Z,A+=W;m+=te,A+=J}m+=re,A+=le}}}}},"float32,1,0,float32,1,0":function(){return function(h,d,y,m,g,x,A){var b=h[0],S=h[1],w=y[0],T=y[1],_=x[0],v=x[1];m|=0,A|=0;var P=0,M=0,E=T,D=w-S*T,N=v,O=_-S*v;for(M=0;M<b;++M){for(P=0;P<S;++P)d[m]=g[A],m+=E,A+=N;m+=D,A+=O}}},"float32,1,0,float32,0,1":function(){return function(h,d,y,m,g,x,A){var b=h[0],S=h[1],w=y[0],T=y[1],_=x[0],v=x[1];m|=0,A|=0;for(var P=m,M=A,E=h[1]|0;E>0;){E<64?(S=E,E=0):(S=64,E-=64);for(var D=h[0]|0;D>0;){D<64?(b=D,D=0):(b=64,D-=64),m=P+E*T+D*w,A=M+E*v+D*_;var N=0,O=0,I=T,F=w-S*T,V=v,U=_-S*v;for(O=0;O<b;++O){for(N=0;N<S;++N)d[m]=g[A],m+=I,A+=V;m+=F,A+=U}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(h,d,y,m,g,x,A){var b=h[0],S=h[1],w=h[2],T=y[0],_=y[1],v=y[2],P=x[0],M=x[1],E=x[2];m|=0,A|=0;for(var D=m,N=A,O=h[2]|0;O>0;){O<64?(w=O,O=0):(w=64,O-=64);for(var I=h[0]|0;I>0;){I<64?(b=I,I=0):(b=64,I-=64);for(var F=h[1]|0;F>0;){F<64?(S=F,F=0):(S=64,F-=64),m=D+O*v+I*T+F*_,A=N+O*E+I*P+F*M;var V=0,U=0,j=0,Z=v,te=T-w*v,re=_-b*T,W=E,J=P-w*E,le=M-b*P;for(j=0;j<S;++j){for(U=0;U<b;++U){for(V=0;V<w;++V)d[m]=g[A],m+=Z,A+=W;m+=te,A+=J}m+=re,A+=le}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(h,d,y,m,g,x,A){var b=h[0],S=h[1],w=h[2],T=y[0],_=y[1],v=y[2],P=x[0],M=x[1],E=x[2];m|=0,A|=0;var D=0,N=0,O=0,I=v,F=T-w*v,V=_-b*T,U=E,j=P-w*E,Z=M-b*P;for(O=0;O<S;++O){for(N=0;N<b;++N){for(D=0;D<w;++D)d[m]=g[A],m+=I,A+=U;m+=F,A+=j}m+=V,A+=Z}}}};function n(s,h){var d=h.join(","),y=t[d];return y()}var a=n,i={mul:function(s){var h={};return function(y,m,g){var x=y.dtype,A=y.order,b=m.dtype,S=m.order,w=g.dtype,T=g.order,_=[x,A.join(),b,S.join(),w,T.join()].join(),v=h[_];return v||(h[_]=v=s([x,A,b,S,w,T])),v(y.shape.slice(0),y.data,y.stride,y.offset|0,m.data,m.stride,m.offset|0,g.data,g.stride,g.offset|0)}},muls:function(s){var h={};return function(y,m,g){var x=y.dtype,A=y.order,b=m.dtype,S=m.order,w=[x,A.join(),b,S.join()].join(),T=h[w];return T||(h[w]=T=s([x,A,b,S])),T(y.shape.slice(0),y.data,y.stride,y.offset|0,m.data,m.stride,m.offset|0,g)}},mulseq:function(s){var h={};return function(y,m){var g=y.dtype,x=y.order,A=[g,x.join()].join(),b=h[A];return b||(h[A]=b=s([g,x])),b(y.shape.slice(0),y.data,y.stride,y.offset|0,m)}},div:function(s){var h={};return function(y,m,g){var x=y.dtype,A=y.order,b=m.dtype,S=m.order,w=g.dtype,T=g.order,_=[x,A.join(),b,S.join(),w,T.join()].join(),v=h[_];return v||(h[_]=v=s([x,A,b,S,w,T])),v(y.shape.slice(0),y.data,y.stride,y.offset|0,m.data,m.stride,m.offset|0,g.data,g.stride,g.offset|0)}},divs:function(s){var h={};return function(y,m,g){var x=y.dtype,A=y.order,b=m.dtype,S=m.order,w=[x,A.join(),b,S.join()].join(),T=h[w];return T||(h[w]=T=s([x,A,b,S])),T(y.shape.slice(0),y.data,y.stride,y.offset|0,m.data,m.stride,m.offset|0,g)}},divseq:function(s){var h={};return function(y,m){var g=y.dtype,x=y.order,A=[g,x.join()].join(),b=h[A];return b||(h[A]=b=s([g,x])),b(y.shape.slice(0),y.data,y.stride,y.offset|0,m)}},assign:function(s){var h={};return function(y,m){var g=y.dtype,x=y.order,A=m.dtype,b=m.order,S=[g,x.join(),A,b.join()].join(),w=h[S];return w||(h[S]=w=s([g,x,A,b])),w(y.shape.slice(0),y.data,y.stride,y.offset|0,m.data,m.stride,m.offset|0)}}};function r(s){var h=i[s.funcName];return h(a.bind(void 0,s))}function f(s){return r({funcName:s.funcName})}var u={mul:"*",div:"/"};(function(){for(var s in u)p[s]=f({funcName:s}),p[s+"s"]=f({funcName:s+"s"}),p[s+"seq"]=f({funcName:s+"seq"})})(),p.assign=f({funcName:"assign"})},{}],255:[function(o,c,p){var t=o("ndarray"),n=o("./doConvert.js");c.exports=function(i,r){for(var f=[],u=i,s=1;Array.isArray(u);)f.push(u.length),s*=u.length,u=u[0];return f.length===0?t():(r||(r=t(new Float64Array(s),f)),n(r,i),r)}},{"./doConvert.js":256,ndarray:259}],256:[function(o,c,p){function t(){return function(u,s,h,d,y){var m=u[0],g=u[1],x=u[2],A=h[0],b=h[1],S=h[2],w=[0,0,0];d|=0;var T=0,_=0,v=0,P=S,M=b-x*S,E=A-g*b;for(v=0;v<m;++v){for(_=0;_<g;++_){for(T=0;T<x;++T){{var D=y,N;for(N=0;N<w.length-1;++N)D=D[w[N]];s[d]=D[w[w.length-1]]}d+=P,++w[2]}d+=M,w[2]-=x,++w[1]}d+=E,w[1]-=g,++w[0]}}}function n(){return t()}var a=n;function i(u){var s={};return function(d,y){var m=d.dtype,g=d.order,x=[m,g.join()].join(),A=s[x];return A||(s[x]=A=u([m,g])),A(d.shape.slice(0),d.data,d.stride,d.offset|0,y)}}function r(u){return i(a.bind(void 0,u))}function f(u){return r({funcName:u.funcName})}c.exports=f({funcName:"convert"})},{}],257:[function(o,c,p){var t=o("typedarray-pool");function n(h){switch(h){case"uint32":return[t.mallocUint32,t.freeUint32];default:return null}}var a={"uint32,1,0":function(h,d){return function(m,g,x,A,b,S,w,T,_,v,P){var M,E,D,N=m*b+A,O,I=h(T),F,V,U,j;for(M=m+1;M<=g;++M){for(E=M,N+=b,D=N,F=0,V=N,O=0;O<T;++O)I[F++]=x[V],V+=_;e:for(;E-- >m;){F=0,V=D-b;t:for(O=0;O<T;++O){if(U=x[V],j=I[F],U<j)break e;if(U>j)break t;V+=v,F+=P}for(F=D,V=D-b,O=0;O<T;++O)x[F]=x[V],F+=_,V+=_;D-=b}for(F=D,V=0,O=0;O<T;++O)x[F]=I[V++],F+=_}d(I)}}};function i(h,d){var y=n(d),m=[d,h].join(","),g=a[m];return y?g(y[0],y[1]):g()}var r={"uint32,1,0":function(h,d,y){return function m(g,x,A,b,S,w,T,_,v,P,M){var E=(x-g+1)/6|0,D=g+E,N=x-E,O=g+x>>1,I=O-E,F=O+E,V=D,U=I,j=O,Z=F,te=N,re=g+1,W=x-1,J=!0,le,ue,se,G,Y,ee,$,K,Q,ae=0,ie=0,oe=0,fe,ye,ce,me,xe,ke,Ae,Oe,He,Ge,_e,Ie,We,et,Ne,De,Ve=_,dt=d(Ve),Dt=d(Ve);ye=S*V,ce=S*U,De=b;e:for(fe=0;fe<_;++fe){if($=ye+De,K=ce+De,oe=A[$]-A[K],oe>0){ue=V,V=U,U=ue;break e}if(oe<0)break e;De+=P}ye=S*Z,ce=S*te,De=b;e:for(fe=0;fe<_;++fe){if($=ye+De,K=ce+De,oe=A[$]-A[K],oe>0){ue=Z,Z=te,te=ue;break e}if(oe<0)break e;De+=P}ye=S*V,ce=S*j,De=b;e:for(fe=0;fe<_;++fe){if($=ye+De,K=ce+De,oe=A[$]-A[K],oe>0){ue=V,V=j,j=ue;break e}if(oe<0)break e;De+=P}ye=S*U,ce=S*j,De=b;e:for(fe=0;fe<_;++fe){if($=ye+De,K=ce+De,oe=A[$]-A[K],oe>0){ue=U,U=j,j=ue;break e}if(oe<0)break e;De+=P}ye=S*V,ce=S*Z,De=b;e:for(fe=0;fe<_;++fe){if($=ye+De,K=ce+De,oe=A[$]-A[K],oe>0){ue=V,V=Z,Z=ue;break e}if(oe<0)break e;De+=P}ye=S*j,ce=S*Z,De=b;e:for(fe=0;fe<_;++fe){if($=ye+De,K=ce+De,oe=A[$]-A[K],oe>0){ue=j,j=Z,Z=ue;break e}if(oe<0)break e;De+=P}ye=S*U,ce=S*te,De=b;e:for(fe=0;fe<_;++fe){if($=ye+De,K=ce+De,oe=A[$]-A[K],oe>0){ue=U,U=te,te=ue;break e}if(oe<0)break e;De+=P}ye=S*U,ce=S*j,De=b;e:for(fe=0;fe<_;++fe){if($=ye+De,K=ce+De,oe=A[$]-A[K],oe>0){ue=U,U=j,j=ue;break e}if(oe<0)break e;De+=P}ye=S*Z,ce=S*te,De=b;e:for(fe=0;fe<_;++fe){if($=ye+De,K=ce+De,oe=A[$]-A[K],oe>0){ue=Z,Z=te,te=ue;break e}if(oe<0)break e;De+=P}for(ye=S*V,ce=S*U,me=S*j,xe=S*Z,ke=S*te,Ae=S*D,Oe=S*O,He=S*N,Ne=0,De=b,fe=0;fe<_;++fe)$=ye+De,K=ce+De,Q=me+De,Ge=xe+De,_e=ke+De,Ie=Ae+De,We=Oe+De,et=He+De,dt[Ne]=A[K],Dt[Ne]=A[Ge],J=J&&dt[Ne]===Dt[Ne],se=A[$],G=A[Q],Y=A[_e],A[Ie]=se,A[We]=G,A[et]=Y,++Ne,De+=v;for(ye=S*I,ce=S*g,De=b,fe=0;fe<_;++fe)$=ye+De,K=ce+De,A[$]=A[K],De+=v;for(ye=S*F,ce=S*x,De=b,fe=0;fe<_;++fe)$=ye+De,K=ce+De,A[$]=A[K],De+=v;if(J)for(ee=re;ee<=W;++ee){$=b+ee*S,Ne=0;e:for(fe=0;fe<_;++fe){if(oe=A[$]-dt[Ne],oe!==0)break e;Ne+=M,$+=P}if(oe!==0)if(oe<0){if(ee!==re)for(ye=S*ee,ce=S*re,De=b,fe=0;fe<_;++fe)$=ye+De,K=ce+De,le=A[$],A[$]=A[K],A[K]=le,De+=v;++re}else for(;;){$=b+W*S,Ne=0;e:for(fe=0;fe<_;++fe){if(oe=A[$]-dt[Ne],oe!==0)break e;Ne+=M,$+=P}if(oe>0)W--;else if(oe<0){for(ye=S*ee,ce=S*re,me=S*W,De=b,fe=0;fe<_;++fe)$=ye+De,K=ce+De,Q=me+De,le=A[$],A[$]=A[K],A[K]=A[Q],A[Q]=le,De+=v;++re,--W;break}else{for(ye=S*ee,ce=S*W,De=b,fe=0;fe<_;++fe)$=ye+De,K=ce+De,le=A[$],A[$]=A[K],A[K]=le,De+=v;--W;break}}}else for(ee=re;ee<=W;++ee){$=b+ee*S,Ne=0;e:for(fe=0;fe<_;++fe){if(ae=A[$]-dt[Ne],ae!==0)break e;Ne+=M,$+=P}if(ae<0){if(ee!==re)for(ye=S*ee,ce=S*re,De=b,fe=0;fe<_;++fe)$=ye+De,K=ce+De,le=A[$],A[$]=A[K],A[K]=le,De+=v;++re}else{$=b+ee*S,Ne=0;e:for(fe=0;fe<_;++fe){if(ie=A[$]-Dt[Ne],ie!==0)break e;Ne+=M,$+=P}if(ie>0)for(;;){$=b+W*S,Ne=0;e:for(fe=0;fe<_;++fe){if(oe=A[$]-Dt[Ne],oe!==0)break e;Ne+=M,$+=P}if(oe>0){if(--W<ee)break;continue}else{$=b+W*S,Ne=0;e:for(fe=0;fe<_;++fe){if(oe=A[$]-dt[Ne],oe!==0)break e;Ne+=M,$+=P}if(oe<0){for(ye=S*ee,ce=S*re,me=S*W,De=b,fe=0;fe<_;++fe)$=ye+De,K=ce+De,Q=me+De,le=A[$],A[$]=A[K],A[K]=A[Q],A[Q]=le,De+=v;++re,--W}else{for(ye=S*ee,ce=S*W,De=b,fe=0;fe<_;++fe)$=ye+De,K=ce+De,le=A[$],A[$]=A[K],A[K]=le,De+=v;--W}break}}}}for(ye=S*g,ce=S*(re-1),Ne=0,De=b,fe=0;fe<_;++fe)$=ye+De,K=ce+De,A[$]=A[K],A[K]=dt[Ne],++Ne,De+=v;for(ye=S*x,ce=S*(W+1),Ne=0,De=b,fe=0;fe<_;++fe)$=ye+De,K=ce+De,A[$]=A[K],A[K]=Dt[Ne],++Ne,De+=v;if(re-2-g<=32?h(g,re-2,A,b,S,w,T,_,v,P,M):m(g,re-2,A,b,S,w,T,_,v,P,M),x-(W+2)<=32?h(W+2,x,A,b,S,w,T,_,v,P,M):m(W+2,x,A,b,S,w,T,_,v,P,M),J){y(dt),y(Dt);return}if(re<D&&W>N){e:for(;;){for($=b+re*S,Ne=0,De=b,fe=0;fe<_;++fe){if(A[$]!==dt[Ne])break e;++Ne,$+=v}++re}e:for(;;){for($=b+W*S,Ne=0,De=b,fe=0;fe<_;++fe){if(A[$]!==Dt[Ne])break e;++Ne,$+=v}--W}for(ee=re;ee<=W;++ee){$=b+ee*S,Ne=0;e:for(fe=0;fe<_;++fe){if(ae=A[$]-dt[Ne],ae!==0)break e;Ne+=M,$+=P}if(ae===0){if(ee!==re)for(ye=S*ee,ce=S*re,De=b,fe=0;fe<_;++fe)$=ye+De,K=ce+De,le=A[$],A[$]=A[K],A[K]=le,De+=v;++re}else{$=b+ee*S,Ne=0;e:for(fe=0;fe<_;++fe){if(ie=A[$]-Dt[Ne],ie!==0)break e;Ne+=M,$+=P}if(ie===0)for(;;){$=b+W*S,Ne=0;e:for(fe=0;fe<_;++fe){if(oe=A[$]-Dt[Ne],oe!==0)break e;Ne+=M,$+=P}if(oe===0){if(--W<ee)break;continue}else{$=b+W*S,Ne=0;e:for(fe=0;fe<_;++fe){if(oe=A[$]-dt[Ne],oe!==0)break e;Ne+=M,$+=P}if(oe<0){for(ye=S*ee,ce=S*re,me=S*W,De=b,fe=0;fe<_;++fe)$=ye+De,K=ce+De,Q=me+De,le=A[$],A[$]=A[K],A[K]=A[Q],A[Q]=le,De+=v;++re,--W}else{for(ye=S*ee,ce=S*W,De=b,fe=0;fe<_;++fe)$=ye+De,K=ce+De,le=A[$],A[$]=A[K],A[K]=le,De+=v;--W}break}}}}}y(dt),y(Dt),W-re<=32?h(re,W,A,b,S,w,T,_,v,P,M):m(re,W,A,b,S,w,T,_,v,P,M)}}};function f(h,d,y){var m=n(d),g=[d,h].join(","),x=r[g];return h.length>1&&m?x(y,m[0],m[1]):x(y)}var u={"uint32,1,0":function(h,d){return function(y){var m=y.data,g=y.offset|0,x=y.shape,A=y.stride,b=A[0]|0,S=x[0]|0,w=A[1]|0,T=x[1]|0,_=w,v=w,P=1;S<=32?h(0,S-1,m,g,b,w,S,T,_,v,P):d(0,S-1,m,g,b,w,S,T,_,v,P)}}};function s(h,d){var y=[d,h].join(","),m=u[y],g=i(h,d),x=f(h,d,g);return m(g,x)}c.exports=s},{"typedarray-pool":308}],258:[function(o,c,p){var t=o("./lib/compile_sort.js"),n={};function a(i){var r=i.order,f=i.dtype,u=[r,f],s=u.join(":"),h=n[s];return h||(n[s]=h=t(r,f)),h(i),i}c.exports=a},{"./lib/compile_sort.js":257}],259:[function(o,c,p){var t=o("is-buffer"),n=typeof Float64Array!="undefined";function a(d,y){return d[0]-y[0]}function i(){var d=this.stride,y=new Array(d.length),m;for(m=0;m<y.length;++m)y[m]=[Math.abs(d[m]),m];y.sort(a);var g=new Array(y.length);for(m=0;m<g.length;++m)g[m]=y[m][1];return g}var r={T:function(d){function y(g){this.data=g}var m=y.prototype;return m.dtype=d,m.index=function(){return-1},m.size=0,m.dimension=-1,m.shape=m.stride=m.order=[],m.lo=m.hi=m.transpose=m.step=function(){return new y(this.data)},m.get=m.set=function(){},m.pick=function(){return null},function(x){return new y(x)}},0:function(d,y){function m(x,A){this.data=x,this.offset=A}var g=m.prototype;return g.dtype=d,g.index=function(){return this.offset},g.dimension=0,g.size=1,g.shape=g.stride=g.order=[],g.lo=g.hi=g.transpose=g.step=function(){return new m(this.data,this.offset)},g.pick=function(){return y(this.data)},g.valueOf=g.get=function(){return d==="generic"?this.data.get(this.offset):this.data[this.offset]},g.set=function(A){return d==="generic"?this.data.set(this.offset,A):this.data[this.offset]=A},function(A,b,S,w){return new m(A,w)}},1:function(d,y,m){function g(A,b,S,w){this.data=A,this.shape=[b],this.stride=[S],this.offset=w|0}var x=g.prototype;return x.dtype=d,x.dimension=1,Object.defineProperty(x,"size",{get:function(){return this.shape[0]}}),x.order=[0],x.set=function(b,S){return d==="generic"?this.data.set(this.offset+this.stride[0]*b,S):this.data[this.offset+this.stride[0]*b]=S},x.get=function(b){return d==="generic"?this.data.get(this.offset+this.stride[0]*b):this.data[this.offset+this.stride[0]*b]},x.index=function(b){return this.offset+this.stride[0]*b},x.hi=function(b){return new g(this.data,typeof b!="number"||b<0?this.shape[0]:b|0,this.stride[0],this.offset)},x.lo=function(b){var S=this.offset,w=0,T=this.shape[0],_=this.stride[0];return typeof b=="number"&&b>=0&&(w=b|0,S+=_*w,T-=w),new g(this.data,T,_,S)},x.step=function(b){var S=this.shape[0],w=this.stride[0],T=this.offset,_=0,v=Math.ceil;return typeof b=="number"&&(_=b|0,_<0?(T+=w*(S-1),S=v(-S/_)):S=v(S/_),w*=_),new g(this.data,S,w,T)},x.transpose=function(b){b=b===void 0?0:b|0;var S=this.shape,w=this.stride;return new g(this.data,S[b],w[b],this.offset)},x.pick=function(b){var S=[],w=[],T=this.offset;typeof b=="number"&&b>=0?T=T+this.stride[0]*b|0:(S.push(this.shape[0]),w.push(this.stride[0]));var _=y[S.length+1];return _(this.data,S,w,T)},function(b,S,w,T){return new g(b,S[0],w[0],T)}},2:function(d,y,m){function g(A,b,S,w,T,_){this.data=A,this.shape=[b,S],this.stride=[w,T],this.offset=_|0}var x=g.prototype;return x.dtype=d,x.dimension=2,Object.defineProperty(x,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(x,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),x.set=function(b,S,w){return d==="generic"?this.data.set(this.offset+this.stride[0]*b+this.stride[1]*S,w):this.data[this.offset+this.stride[0]*b+this.stride[1]*S]=w},x.get=function(b,S){return d==="generic"?this.data.get(this.offset+this.stride[0]*b+this.stride[1]*S):this.data[this.offset+this.stride[0]*b+this.stride[1]*S]},x.index=function(b,S){return this.offset+this.stride[0]*b+this.stride[1]*S},x.hi=function(b,S){return new g(this.data,typeof b!="number"||b<0?this.shape[0]:b|0,typeof S!="number"||S<0?this.shape[1]:S|0,this.stride[0],this.stride[1],this.offset)},x.lo=function(b,S){var w=this.offset,T=0,_=this.shape[0],v=this.shape[1],P=this.stride[0],M=this.stride[1];return typeof b=="number"&&b>=0&&(T=b|0,w+=P*T,_-=T),typeof S=="number"&&S>=0&&(T=S|0,w+=M*T,v-=T),new g(this.data,_,v,P,M,w)},x.step=function(b,S){var w=this.shape[0],T=this.shape[1],_=this.stride[0],v=this.stride[1],P=this.offset,M=0,E=Math.ceil;return typeof b=="number"&&(M=b|0,M<0?(P+=_*(w-1),w=E(-w/M)):w=E(w/M),_*=M),typeof S=="number"&&(M=S|0,M<0?(P+=v*(T-1),T=E(-T/M)):T=E(T/M),v*=M),new g(this.data,w,T,_,v,P)},x.transpose=function(b,S){b=b===void 0?0:b|0,S=S===void 0?1:S|0;var w=this.shape,T=this.stride;return new g(this.data,w[b],w[S],T[b],T[S],this.offset)},x.pick=function(b,S){var w=[],T=[],_=this.offset;typeof b=="number"&&b>=0?_=_+this.stride[0]*b|0:(w.push(this.shape[0]),T.push(this.stride[0])),typeof S=="number"&&S>=0?_=_+this.stride[1]*S|0:(w.push(this.shape[1]),T.push(this.stride[1]));var v=y[w.length+1];return v(this.data,w,T,_)},function(b,S,w,T){return new g(b,S[0],S[1],w[0],w[1],T)}},3:function(d,y,m){function g(A,b,S,w,T,_,v,P){this.data=A,this.shape=[b,S,w],this.stride=[T,_,v],this.offset=P|0}var x=g.prototype;return x.dtype=d,x.dimension=3,Object.defineProperty(x,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(x,"order",{get:function(){var b=Math.abs(this.stride[0]),S=Math.abs(this.stride[1]),w=Math.abs(this.stride[2]);return b>S?S>w?[2,1,0]:b>w?[1,2,0]:[1,0,2]:b>w?[2,0,1]:w>S?[0,1,2]:[0,2,1]}}),x.set=function(b,S,w,T){return d==="generic"?this.data.set(this.offset+this.stride[0]*b+this.stride[1]*S+this.stride[2]*w,T):this.data[this.offset+this.stride[0]*b+this.stride[1]*S+this.stride[2]*w]=T},x.get=function(b,S,w){return d==="generic"?this.data.get(this.offset+this.stride[0]*b+this.stride[1]*S+this.stride[2]*w):this.data[this.offset+this.stride[0]*b+this.stride[1]*S+this.stride[2]*w]},x.index=function(b,S,w){return this.offset+this.stride[0]*b+this.stride[1]*S+this.stride[2]*w},x.hi=function(b,S,w){return new g(this.data,typeof b!="number"||b<0?this.shape[0]:b|0,typeof S!="number"||S<0?this.shape[1]:S|0,typeof w!="number"||w<0?this.shape[2]:w|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},x.lo=function(b,S,w){var T=this.offset,_=0,v=this.shape[0],P=this.shape[1],M=this.shape[2],E=this.stride[0],D=this.stride[1],N=this.stride[2];return typeof b=="number"&&b>=0&&(_=b|0,T+=E*_,v-=_),typeof S=="number"&&S>=0&&(_=S|0,T+=D*_,P-=_),typeof w=="number"&&w>=0&&(_=w|0,T+=N*_,M-=_),new g(this.data,v,P,M,E,D,N,T)},x.step=function(b,S,w){var T=this.shape[0],_=this.shape[1],v=this.shape[2],P=this.stride[0],M=this.stride[1],E=this.stride[2],D=this.offset,N=0,O=Math.ceil;return typeof b=="number"&&(N=b|0,N<0?(D+=P*(T-1),T=O(-T/N)):T=O(T/N),P*=N),typeof S=="number"&&(N=S|0,N<0?(D+=M*(_-1),_=O(-_/N)):_=O(_/N),M*=N),typeof w=="number"&&(N=w|0,N<0?(D+=E*(v-1),v=O(-v/N)):v=O(v/N),E*=N),new g(this.data,T,_,v,P,M,E,D)},x.transpose=function(b,S,w){b=b===void 0?0:b|0,S=S===void 0?1:S|0,w=w===void 0?2:w|0;var T=this.shape,_=this.stride;return new g(this.data,T[b],T[S],T[w],_[b],_[S],_[w],this.offset)},x.pick=function(b,S,w){var T=[],_=[],v=this.offset;typeof b=="number"&&b>=0?v=v+this.stride[0]*b|0:(T.push(this.shape[0]),_.push(this.stride[0])),typeof S=="number"&&S>=0?v=v+this.stride[1]*S|0:(T.push(this.shape[1]),_.push(this.stride[1])),typeof w=="number"&&w>=0?v=v+this.stride[2]*w|0:(T.push(this.shape[2]),_.push(this.stride[2]));var P=y[T.length+1];return P(this.data,T,_,v)},function(b,S,w,T){return new g(b,S[0],S[1],S[2],w[0],w[1],w[2],T)}},4:function(d,y,m){function g(A,b,S,w,T,_,v,P,M,E){this.data=A,this.shape=[b,S,w,T],this.stride=[_,v,P,M],this.offset=E|0}var x=g.prototype;return x.dtype=d,x.dimension=4,Object.defineProperty(x,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(x,"order",{get:m}),x.set=function(b,S,w,T,_){return d==="generic"?this.data.set(this.offset+this.stride[0]*b+this.stride[1]*S+this.stride[2]*w+this.stride[3]*T,_):this.data[this.offset+this.stride[0]*b+this.stride[1]*S+this.stride[2]*w+this.stride[3]*T]=_},x.get=function(b,S,w,T){return d==="generic"?this.data.get(this.offset+this.stride[0]*b+this.stride[1]*S+this.stride[2]*w+this.stride[3]*T):this.data[this.offset+this.stride[0]*b+this.stride[1]*S+this.stride[2]*w+this.stride[3]*T]},x.index=function(b,S,w,T){return this.offset+this.stride[0]*b+this.stride[1]*S+this.stride[2]*w+this.stride[3]*T},x.hi=function(b,S,w,T){return new g(this.data,typeof b!="number"||b<0?this.shape[0]:b|0,typeof S!="number"||S<0?this.shape[1]:S|0,typeof w!="number"||w<0?this.shape[2]:w|0,typeof T!="number"||T<0?this.shape[3]:T|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},x.lo=function(b,S,w,T){var _=this.offset,v=0,P=this.shape[0],M=this.shape[1],E=this.shape[2],D=this.shape[3],N=this.stride[0],O=this.stride[1],I=this.stride[2],F=this.stride[3];return typeof b=="number"&&b>=0&&(v=b|0,_+=N*v,P-=v),typeof S=="number"&&S>=0&&(v=S|0,_+=O*v,M-=v),typeof w=="number"&&w>=0&&(v=w|0,_+=I*v,E-=v),typeof T=="number"&&T>=0&&(v=T|0,_+=F*v,D-=v),new g(this.data,P,M,E,D,N,O,I,F,_)},x.step=function(b,S,w,T){var _=this.shape[0],v=this.shape[1],P=this.shape[2],M=this.shape[3],E=this.stride[0],D=this.stride[1],N=this.stride[2],O=this.stride[3],I=this.offset,F=0,V=Math.ceil;return typeof b=="number"&&(F=b|0,F<0?(I+=E*(_-1),_=V(-_/F)):_=V(_/F),E*=F),typeof S=="number"&&(F=S|0,F<0?(I+=D*(v-1),v=V(-v/F)):v=V(v/F),D*=F),typeof w=="number"&&(F=w|0,F<0?(I+=N*(P-1),P=V(-P/F)):P=V(P/F),N*=F),typeof T=="number"&&(F=T|0,F<0?(I+=O*(M-1),M=V(-M/F)):M=V(M/F),O*=F),new g(this.data,_,v,P,M,E,D,N,O,I)},x.transpose=function(b,S,w,T){b=b===void 0?0:b|0,S=S===void 0?1:S|0,w=w===void 0?2:w|0,T=T===void 0?3:T|0;var _=this.shape,v=this.stride;return new g(this.data,_[b],_[S],_[w],_[T],v[b],v[S],v[w],v[T],this.offset)},x.pick=function(b,S,w,T){var _=[],v=[],P=this.offset;typeof b=="number"&&b>=0?P=P+this.stride[0]*b|0:(_.push(this.shape[0]),v.push(this.stride[0])),typeof S=="number"&&S>=0?P=P+this.stride[1]*S|0:(_.push(this.shape[1]),v.push(this.stride[1])),typeof w=="number"&&w>=0?P=P+this.stride[2]*w|0:(_.push(this.shape[2]),v.push(this.stride[2])),typeof T=="number"&&T>=0?P=P+this.stride[3]*T|0:(_.push(this.shape[3]),v.push(this.stride[3]));var M=y[_.length+1];return M(this.data,_,v,P)},function(b,S,w,T){return new g(b,S[0],S[1],S[2],S[3],w[0],w[1],w[2],w[3],T)}},5:function(y,m,g){function x(b,S,w,T,_,v,P,M,E,D,N,O){this.data=b,this.shape=[S,w,T,_,v],this.stride=[P,M,E,D,N],this.offset=O|0}var A=x.prototype;return A.dtype=y,A.dimension=5,Object.defineProperty(A,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(A,"order",{get:g}),A.set=function(S,w,T,_,v,P){return y==="generic"?this.data.set(this.offset+this.stride[0]*S+this.stride[1]*w+this.stride[2]*T+this.stride[3]*_+this.stride[4]*v,P):this.data[this.offset+this.stride[0]*S+this.stride[1]*w+this.stride[2]*T+this.stride[3]*_+this.stride[4]*v]=P},A.get=function(S,w,T,_,v){return y==="generic"?this.data.get(this.offset+this.stride[0]*S+this.stride[1]*w+this.stride[2]*T+this.stride[3]*_+this.stride[4]*v):this.data[this.offset+this.stride[0]*S+this.stride[1]*w+this.stride[2]*T+this.stride[3]*_+this.stride[4]*v]},A.index=function(S,w,T,_,v){return this.offset+this.stride[0]*S+this.stride[1]*w+this.stride[2]*T+this.stride[3]*_+this.stride[4]*v},A.hi=function(S,w,T,_,v){return new x(this.data,typeof S!="number"||S<0?this.shape[0]:S|0,typeof w!="number"||w<0?this.shape[1]:w|0,typeof T!="number"||T<0?this.shape[2]:T|0,typeof _!="number"||_<0?this.shape[3]:_|0,typeof v!="number"||v<0?this.shape[4]:v|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},A.lo=function(S,w,T,_,v){var P=this.offset,M=0,E=this.shape[0],D=this.shape[1],N=this.shape[2],O=this.shape[3],I=this.shape[4],F=this.stride[0],V=this.stride[1],U=this.stride[2],j=this.stride[3],Z=this.stride[4];return typeof S=="number"&&S>=0&&(M=S|0,P+=F*M,E-=M),typeof w=="number"&&w>=0&&(M=w|0,P+=V*M,D-=M),typeof T=="number"&&T>=0&&(M=T|0,P+=U*M,N-=M),typeof _=="number"&&_>=0&&(M=_|0,P+=j*M,O-=M),typeof v=="number"&&v>=0&&(M=v|0,P+=Z*M,I-=M),new x(this.data,E,D,N,O,I,F,V,U,j,Z,P)},A.step=function(S,w,T,_,v){var P=this.shape[0],M=this.shape[1],E=this.shape[2],D=this.shape[3],N=this.shape[4],O=this.stride[0],I=this.stride[1],F=this.stride[2],V=this.stride[3],U=this.stride[4],j=this.offset,Z=0,te=Math.ceil;return typeof S=="number"&&(Z=S|0,Z<0?(j+=O*(P-1),P=te(-P/Z)):P=te(P/Z),O*=Z),typeof w=="number"&&(Z=w|0,Z<0?(j+=I*(M-1),M=te(-M/Z)):M=te(M/Z),I*=Z),typeof T=="number"&&(Z=T|0,Z<0?(j+=F*(E-1),E=te(-E/Z)):E=te(E/Z),F*=Z),typeof _=="number"&&(Z=_|0,Z<0?(j+=V*(D-1),D=te(-D/Z)):D=te(D/Z),V*=Z),typeof v=="number"&&(Z=v|0,Z<0?(j+=U*(N-1),N=te(-N/Z)):N=te(N/Z),U*=Z),new x(this.data,P,M,E,D,N,O,I,F,V,U,j)},A.transpose=function(S,w,T,_,v){S=S===void 0?0:S|0,w=w===void 0?1:w|0,T=T===void 0?2:T|0,_=_===void 0?3:_|0,v=v===void 0?4:v|0;var P=this.shape,M=this.stride;return new x(this.data,P[S],P[w],P[T],P[_],P[v],M[S],M[w],M[T],M[_],M[v],this.offset)},A.pick=function(S,w,T,_,v){var P=[],M=[],E=this.offset;typeof S=="number"&&S>=0?E=E+this.stride[0]*S|0:(P.push(this.shape[0]),M.push(this.stride[0])),typeof w=="number"&&w>=0?E=E+this.stride[1]*w|0:(P.push(this.shape[1]),M.push(this.stride[1])),typeof T=="number"&&T>=0?E=E+this.stride[2]*T|0:(P.push(this.shape[2]),M.push(this.stride[2])),typeof _=="number"&&_>=0?E=E+this.stride[3]*_|0:(P.push(this.shape[3]),M.push(this.stride[3])),typeof v=="number"&&v>=0?E=E+this.stride[4]*v|0:(P.push(this.shape[4]),M.push(this.stride[4]));var D=m[P.length+1];return D(this.data,P,M,E)},function(S,w,T,_){return new x(S,w[0],w[1],w[2],w[3],w[4],T[0],T[1],T[2],T[3],T[4],_)}}};function f(d,y){var m=y===-1?"T":String(y),g=r[m];return y===-1?g(d):y===0?g(d,s[d][0]):g(d,s[d],i)}function u(d){if(t(d))return"buffer";if(n)switch(Object.prototype.toString.call(d)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(d)?"array":"generic"}var s={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function h(d,y,m,g){if(d===void 0){var T=s.array[0];return T([])}else typeof d=="number"&&(d=[d]);y===void 0&&(y=[d.length]);var x=y.length;if(m===void 0){m=new Array(x);for(var A=x-1,b=1;A>=0;--A)m[A]=b,b*=y[A]}if(g===void 0){g=0;for(var A=0;A<x;++A)m[A]<0&&(g-=(y[A]-1)*m[A])}for(var S=u(d),w=s[S];w.length<=x+1;)w.push(f(S,w.length-1));var T=w[x+1];return T(d,y,m,g)}c.exports=h},{"is-buffer":237}],260:[function(o,c,p){var t=o("double-bits"),n=Math.pow(2,-1074),a=-1>>>0;c.exports=i;function i(r,f){if(isNaN(r)||isNaN(f))return NaN;if(r===f)return r;if(r===0)return f<0?-n:n;var u=t.hi(r),s=t.lo(r);return f>r==r>0?s===a?(u+=1,s=0):s+=1:s===0?(s=a,u-=1):s-=1,t.pack(s,u)}},{"double-bits":64}],261:[function(o,c,p){var t=1e-6,n=1e-6;p.vertexNormals=function(a,i,r){for(var f=i.length,u=new Array(f),s=r===void 0?t:r,h=0;h<f;++h)u[h]=[0,0,0];for(var h=0;h<a.length;++h)for(var d=a[h],y=0,m=d[d.length-1],g=d[0],x=0;x<d.length;++x){y=m,m=g,g=d[(x+1)%d.length];for(var A=i[y],b=i[m],S=i[g],w=new Array(3),T=0,_=new Array(3),v=0,P=0;P<3;++P)w[P]=A[P]-b[P],T+=w[P]*w[P],_[P]=S[P]-b[P],v+=_[P]*_[P];if(T*v>s)for(var M=u[m],E=1/Math.sqrt(T*v),P=0;P<3;++P){var D=(P+1)%3,N=(P+2)%3;M[P]+=E*(_[D]*w[N]-_[N]*w[D])}}for(var h=0;h<f;++h){for(var M=u[h],O=0,P=0;P<3;++P)O+=M[P]*M[P];if(O>s)for(var E=1/Math.sqrt(O),P=0;P<3;++P)M[P]*=E;else for(var P=0;P<3;++P)M[P]=0}return u},p.faceNormals=function(a,i,r){for(var f=a.length,u=new Array(f),s=r===void 0?n:r,h=0;h<f;++h){for(var d=a[h],y=new Array(3),m=0;m<3;++m)y[m]=i[d[m]];for(var g=new Array(3),x=new Array(3),m=0;m<3;++m)g[m]=y[1][m]-y[0][m],x[m]=y[2][m]-y[0][m];for(var A=new Array(3),b=0,m=0;m<3;++m){var S=(m+1)%3,w=(m+2)%3;A[m]=g[S]*x[w]-g[w]*x[S],b+=A[m]*A[m]}b>s?b=1/Math.sqrt(b):b=0;for(var m=0;m<3;++m)A[m]*=b;u[h]=A}return u}},{}],262:[function(o,c,p){c.exports=t;function t(n,a,i,r,f,u,s,h,d,y){var m=a+u+y;if(g>0){var g=Math.sqrt(m+1);n[0]=.5*(s-d)/g,n[1]=.5*(h-r)/g,n[2]=.5*(i-u)/g,n[3]=.5*g}else{var x=Math.max(a,u,y),g=Math.sqrt(2*x-m+1);a>=x?(n[0]=.5*g,n[1]=.5*(f+i)/g,n[2]=.5*(h+r)/g,n[3]=.5*(s-d)/g):u>=x?(n[0]=.5*(i+f)/g,n[1]=.5*g,n[2]=.5*(d+s)/g,n[3]=.5*(h-r)/g):(n[0]=.5*(r+h)/g,n[1]=.5*(s+d)/g,n[2]=.5*g,n[3]=.5*(i-f)/g)}return n}},{}],263:[function(o,c,p){c.exports=y;var t=o("filtered-vector"),n=o("gl-mat4/lookAt"),a=o("gl-mat4/fromQuat"),i=o("gl-mat4/invert"),r=o("./lib/quatFromFrame");function f(m,g,x){return Math.sqrt(Math.pow(m,2)+Math.pow(g,2)+Math.pow(x,2))}function u(m,g,x,A){return Math.sqrt(Math.pow(m,2)+Math.pow(g,2)+Math.pow(x,2)+Math.pow(A,2))}function s(m,g){var x=g[0],A=g[1],b=g[2],S=g[3],w=u(x,A,b,S);w>1e-6?(m[0]=x/w,m[1]=A/w,m[2]=b/w,m[3]=S/w):(m[0]=m[1]=m[2]=0,m[3]=1)}function h(m,g,x){this.radius=t([x]),this.center=t(g),this.rotation=t(m),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var d=h.prototype;d.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},d.recalcMatrix=function(m){this.radius.curve(m),this.center.curve(m),this.rotation.curve(m);var g=this.computedRotation;s(g,g);var x=this.computedMatrix;a(x,g);var A=this.computedCenter,b=this.computedEye,S=this.computedUp,w=Math.exp(this.computedRadius[0]);b[0]=A[0]+w*x[2],b[1]=A[1]+w*x[6],b[2]=A[2]+w*x[10],S[0]=x[1],S[1]=x[5],S[2]=x[9];for(var T=0;T<3;++T){for(var _=0,v=0;v<3;++v)_+=x[T+4*v]*b[v];x[12+T]=-_}},d.getMatrix=function(m,g){this.recalcMatrix(m);var x=this.computedMatrix;if(g){for(var A=0;A<16;++A)g[A]=x[A];return g}return x},d.idle=function(m){this.center.idle(m),this.radius.idle(m),this.rotation.idle(m)},d.flush=function(m){this.center.flush(m),this.radius.flush(m),this.rotation.flush(m)},d.pan=function(m,g,x,A){g=g||0,x=x||0,A=A||0,this.recalcMatrix(m);var b=this.computedMatrix,S=b[1],w=b[5],T=b[9],_=f(S,w,T);S/=_,w/=_,T/=_;var v=b[0],P=b[4],M=b[8],E=v*S+P*w+M*T;v-=S*E,P-=w*E,M-=T*E;var D=f(v,P,M);v/=D,P/=D,M/=D,b[2],b[6],b[10];var N=v*g+S*x,O=P*g+w*x,I=M*g+T*x;this.center.move(m,N,O,I);var F=Math.exp(this.computedRadius[0]);F=Math.max(1e-4,F+A),this.radius.set(m,Math.log(F))},d.rotate=function(m,g,x,A){this.recalcMatrix(m),g=g||0,x=x||0;var b=this.computedMatrix,S=b[0],w=b[4],T=b[8],_=b[1],v=b[5],P=b[9],M=b[2],E=b[6],D=b[10],N=g*S+x*_,O=g*w+x*v,I=g*T+x*P,F=-(E*I-D*O),V=-(D*N-M*I),U=-(M*O-E*N),j=Math.sqrt(Math.max(0,1-Math.pow(F,2)-Math.pow(V,2)-Math.pow(U,2))),Z=u(F,V,U,j);Z>1e-6?(F/=Z,V/=Z,U/=Z,j/=Z):(F=V=U=0,j=1);var te=this.computedRotation,re=te[0],W=te[1],J=te[2],le=te[3],ue=re*j+le*F+W*U-J*V,se=W*j+le*V+J*F-re*U,G=J*j+le*U+re*V-W*F,Y=le*j-re*F-W*V-J*U;if(A){F=M,V=E,U=D;var ee=Math.sin(A)/f(F,V,U);F*=ee,V*=ee,U*=ee,j=Math.cos(g),ue=ue*j+Y*F+se*U-G*V,se=se*j+Y*V+G*F-ue*U,G=G*j+Y*U+ue*V-se*F,Y=Y*j-ue*F-se*V-G*U}var $=u(ue,se,G,Y);$>1e-6?(ue/=$,se/=$,G/=$,Y/=$):(ue=se=G=0,Y=1),this.rotation.set(m,ue,se,G,Y)},d.lookAt=function(m,g,x,A){this.recalcMatrix(m),x=x||this.computedCenter,g=g||this.computedEye,A=A||this.computedUp;var b=this.computedMatrix;n(b,g,x,A);var S=this.computedRotation;r(S,b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]),s(S,S),this.rotation.set(m,S[0],S[1],S[2],S[3]);for(var w=0,T=0;T<3;++T)w+=Math.pow(x[T]-g[T],2);this.radius.set(m,.5*Math.log(Math.max(w,1e-6))),this.center.set(m,x[0],x[1],x[2])},d.translate=function(m,g,x,A){this.center.move(m,g||0,x||0,A||0)},d.setMatrix=function(m,g){var x=this.computedRotation;r(x,g[0],g[1],g[2],g[4],g[5],g[6],g[8],g[9],g[10]),s(x,x),this.rotation.set(m,x[0],x[1],x[2],x[3]);var A=this.computedMatrix;i(A,g);var b=A[15];if(Math.abs(b)>1e-6){var S=A[12]/b,w=A[13]/b,T=A[14]/b;this.recalcMatrix(m);var _=Math.exp(this.computedRadius[0]);this.center.set(m,S-A[2]*_,w-A[6]*_,T-A[10]*_),this.radius.idle(m)}else this.center.idle(m),this.radius.idle(m)},d.setDistance=function(m,g){g>0&&this.radius.set(m,Math.log(g))},d.setDistanceLimits=function(m,g){m>0?m=Math.log(m):m=-1/0,g>0?g=Math.log(g):g=1/0,g=Math.max(g,m),this.radius.bounds[0][0]=m,this.radius.bounds[1][0]=g},d.getDistanceLimits=function(m){var g=this.radius.bounds;return m?(m[0]=Math.exp(g[0][0]),m[1]=Math.exp(g[1][0]),m):[Math.exp(g[0][0]),Math.exp(g[1][0])]},d.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},d.fromJSON=function(m){var g=this.lastT(),x=m.center;x&&this.center.set(g,x[0],x[1],x[2]);var A=m.rotation;A&&this.rotation.set(g,A[0],A[1],A[2],A[3]);var b=m.distance;b&&b>0&&this.radius.set(g,Math.log(b)),this.setDistanceLimits(m.zoomMin,m.zoomMax)};function y(m){m=m||{};var g=m.center||[0,0,0],x=m.rotation||[0,0,0,1],A=m.radius||1;g=[].slice.call(g,0,3),x=[].slice.call(x,0,4),s(x,x);var b=new h(x,g,Math.log(A));return b.setDistanceLimits(m.zoomMin,m.zoomMax),("eye"in m||"up"in m)&&b.lookAt(0,m.eye,m.center,m.up),b}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(o,c,p){var t=o("repeat-string");c.exports=function(a,i,r){return r=typeof r!="undefined"?r+"":" ",t(r,i)+a}},{"repeat-string":277}],265:[function(o,c,p){c.exports=function(n,a){a||(a=[0,""]),n=String(n);var i=parseFloat(n,10);return a[0]=i,a[1]=n.match(/[\d.\-\+]*\s*(.*)/)[1]||"",a}},{}],266:[function(o,c,p){c.exports=n;var t=o("compare-angle");function n(a,i){for(var r=i.length|0,f=a.length,u=[new Array(r),new Array(r)],s=0;s<r;++s)u[0][s]=[],u[1][s]=[];for(var s=0;s<f;++s){var h=a[s];u[0][h[0]].push(h),u[1][h[1]].push(h)}for(var d=[],s=0;s<r;++s)u[0][s].length+u[1][s].length===0&&d.push([s]);function y(w,T){var _=u[T][w[T]];_.splice(_.indexOf(w),1)}function m(w,T,_){for(var v,P,M,E=0;E<2;++E)if(u[E][T].length>0){v=u[E][T][0],M=E;break}P=v[M^1];for(var D=0;D<2;++D)for(var N=u[D][T],O=0;O<N.length;++O){var I=N[O],F=I[D^1],V=t(i[w],i[T],i[P],i[F]);V>0&&(v=I,P=F,M=D)}return _||v&&y(v,M),P}function g(w,T){var _=u[T][w][0],v=[w];y(_,T);for(var P=_[T^1];;){for(;P!==w;)v.push(P),P=m(v[v.length-2],P,!1);if(u[0][w].length+u[1][w].length===0)break;var M=v[v.length-1],E=w,D=v[1],N=m(M,E,!0);if(t(i[M],i[E],i[D],i[N])<0)break;v.push(w),P=m(M,E)}return v}function x(w,T){return T[1]===T[T.length-1]}for(var s=0;s<r;++s)for(var A=0;A<2;++A){for(var b=[];u[A][s].length>0;){u[0][s].length;var S=g(s,A);x(b,S)?b.push.apply(b,S):(b.length>0&&d.push(b),b=S)}b.length>0&&d.push(b)}return d}},{"compare-angle":54}],267:[function(o,c,p){c.exports=n;var t=o("edges-to-adjacency-list");function n(a,i){for(var r=t(a,i.length),f=new Array(i.length),u=new Array(i.length),s=[],h=0;h<i.length;++h){var d=r[h].length;u[h]=d,f[h]=!0,d<=1&&s.push(h)}for(;s.length>0;){var y=s.pop();f[y]=!1;for(var m=r[y],h=0;h<m.length;++h){var g=m[h];--u[g]==0&&s.push(g)}}for(var x=new Array(i.length),A=[],h=0;h<i.length;++h)if(f[h]){var y=A.length;x[h]=y,A.push(i[h])}else x[h]=-1;for(var b=[],h=0;h<a.length;++h){var S=a[h];f[S[0]]&&f[S[1]]&&b.push([x[S[0]],x[S[1]]])}return[b,A]}},{"edges-to-adjacency-list":66}],268:[function(o,c,p){c.exports=d;var t=o("edges-to-adjacency-list"),n=o("planar-dual"),a=o("point-in-big-polygon"),i=o("two-product"),r=o("robust-sum"),f=o("uniq"),u=o("./lib/trim-leaves");function s(y,m){for(var g=new Array(y),x=0;x<y;++x)g[x]=m;return g}function h(y){for(var m=new Array(y),g=0;g<y;++g)m[g]=[];return m}function d(y,m){var g=u(y,m);y=g[0],m=g[1];var x=m.length;y.length;for(var A=t(y,m.length),b=0;b<x;++b)if(A[b].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var S=n(y,m);function w(oe){for(var fe=oe.length,ye=[0],ce=0;ce<fe;++ce){var me=m[oe[ce]],xe=m[oe[(ce+1)%fe]],ke=i(-me[0],me[1]),Ae=i(-me[0],xe[1]),Oe=i(xe[0],me[1]),He=i(xe[0],xe[1]);ye=r(ye,r(r(ke,Ae),r(Oe,He)))}return ye[ye.length-1]>0}S=S.filter(w);for(var T=S.length,_=new Array(T),v=new Array(T),b=0;b<T;++b){_[b]=b;var P=new Array(T),M=S[b].map(function(fe){return m[fe]}),E=a([M]),D=0;e:for(var N=0;N<T;++N)if(P[N]=0,b!==N){for(var O=S[N],I=O.length,F=0;F<I;++F){var V=E(m[O[F]]);if(V!==0){V<0&&(P[N]=1,D+=1);continue e}}P[N]=1,D+=1}v[b]=[D,b,P]}v.sort(function(oe,fe){return fe[0]-oe[0]});for(var b=0;b<T;++b)for(var P=v[b],U=P[1],j=P[2],N=0;N<T;++N)j[N]&&(_[N]=U);for(var Z=h(T),b=0;b<T;++b)Z[b].push(_[b]),Z[_[b]].push(b);for(var te={},re=s(x,!1),b=0;b<T;++b)for(var O=S[b],I=O.length,N=0;N<I;++N){var W=O[N],J=O[(N+1)%I],le=Math.min(W,J)+":"+Math.max(W,J);if(le in te){var ue=te[le];Z[ue].push(b),Z[b].push(ue),re[W]=re[J]=!0}else te[le]=b}function se(oe){for(var fe=oe.length,ye=0;ye<fe;++ye)if(!re[oe[ye]])return!1;return!0}for(var G=[],Y=s(T,-1),b=0;b<T;++b)_[b]===b&&!se(S[b])?(G.push(b),Y[b]=0):Y[b]=-1;for(var g=[];G.length>0;){var ee=G.pop(),$=Z[ee];f($,function(oe,fe){return oe-fe});var K=$.length,Q=Y[ee],ae;if(Q===0){var O=S[ee];ae=[O]}for(var b=0;b<K;++b){var ie=$[b];if(!(Y[ie]>=0)&&(Y[ie]=Q^1,G.push(ie),Q===0)){var O=S[ie];se(O)||(O.reverse(),ae.push(O))}}Q===0&&g.push(ae)}return g}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(o,c,p){c.exports=m;var t=o("robust-orientation")[3],n=o("slab-decomposition"),a=o("interval-tree-1d"),i=o("binary-search-bounds");function r(){return!0}function f(g){return function(x,A){var b=g[x];return b?!!b.queryPoint(A,r):!1}}function u(g){for(var x={},A=0;A<g.length;++A){var b=g[A],S=b[0][0],w=b[0][1],T=b[1][1],_=[Math.min(w,T),Math.max(w,T)];S in x?x[S].push(_):x[S]=[_]}for(var v={},P=Object.keys(x),A=0;A<P.length;++A){var M=x[P[A]];v[P[A]]=a(M)}return f(v)}function s(g,x){return function(A){var b=i.le(x,A[0]);if(b<0)return 1;var S=g[b];if(!S)if(b>0&&x[b]===A[0])S=g[b-1];else return 1;for(var w=1;S;){var T=S.key,_=t(A,T[0],T[1]);if(T[0][0]<T[1][0])if(_<0)S=S.left;else if(_>0)w=-1,S=S.right;else return 0;else if(_>0)S=S.left;else if(_<0)w=1,S=S.right;else return 0}return w}}function h(g){return 1}function d(g){return function(A){return g(A[0],A[1])?0:1}}function y(g,x){return function(b){return g(b[0],b[1])?0:x(b)}}function m(g){for(var x=g.length,A=[],b=[],S=0;S<x;++S)for(var w=g[S],T=w.length,_=T-1,v=0;v<T;_=v++){var P=w[_],M=w[v];P[0]===M[0]?b.push([P,M]):A.push([P,M])}if(A.length===0)return b.length===0?h:d(u(b));var E=n(A),D=s(E.slabs,E.coordinates);return b.length===0?D:y(u(b),D)}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(o,c,p){var t=new Float64Array(4),n=new Float64Array(4),a=new Float64Array(4);function i(r,f,u,s,h){t.length<s.length&&(t=new Float64Array(s.length),n=new Float64Array(s.length),a=new Float64Array(s.length));for(var d=0;d<s.length;++d)t[d]=r[d]-s[d],n[d]=f[d]-r[d],a[d]=u[d]-r[d];for(var y=0,m=0,g=0,x=0,A=0,b=0,d=0;d<s.length;++d){var S=n[d],w=a[d],T=t[d];y+=S*S,m+=S*w,g+=w*w,x+=T*S,A+=T*w,b+=T*T}var _=Math.abs(y*g-m*m),v=m*A-g*x,P=m*x-y*A,M;if(v+P<=_)if(v<0)P<0&&x<0?(P=0,-x>=y?(v=1,M=y+2*x+b):(v=-x/y,M=x*v+b)):(v=0,A>=0?(P=0,M=b):-A>=g?(P=1,M=g+2*A+b):(P=-A/g,M=A*P+b));else if(P<0)P=0,x>=0?(v=0,M=b):-x>=y?(v=1,M=y+2*x+b):(v=-x/y,M=x*v+b);else{var E=1/_;v*=E,P*=E,M=v*(y*v+m*P+2*x)+P*(m*v+g*P+2*A)+b}else{var D,N,O,I;v<0?(D=m+x,N=g+A,N>D?(O=N-D,I=y-2*m+g,O>=I?(v=1,P=0,M=y+2*x+b):(v=O/I,P=1-v,M=v*(y*v+m*P+2*x)+P*(m*v+g*P+2*A)+b)):(v=0,N<=0?(P=1,M=g+2*A+b):A>=0?(P=0,M=b):(P=-A/g,M=A*P+b))):P<0?(D=m+A,N=y+x,N>D?(O=N-D,I=y-2*m+g,O>=I?(P=1,v=0,M=g+2*A+b):(P=O/I,v=1-P,M=v*(y*v+m*P+2*x)+P*(m*v+g*P+2*A)+b)):(P=0,N<=0?(v=1,M=y+2*x+b):x>=0?(v=0,M=b):(v=-x/y,M=x*v+b))):(O=g+A-m-x,O<=0?(v=0,P=1,M=g+2*A+b):(I=y-2*m+g,O>=I?(v=1,P=0,M=y+2*x+b):(v=O/I,P=1-v,M=v*(y*v+m*P+2*x)+P*(m*v+g*P+2*A)+b)))}for(var F=1-v-P,d=0;d<s.length;++d)h[d]=F*r[d]+v*f[d]+P*u[d];return M<0?0:M}c.exports=i},{}],271:[function(o,c,p){c.exports=o("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(o,c,p){var t=o("big-rat/add");c.exports=n;function n(a,i){for(var r=a.length,f=new Array(r),u=0;u<r;++u)f[u]=t(a[u],i[u]);return f}},{"big-rat/add":15}],273:[function(o,c,p){c.exports=n;var t=o("big-rat");function n(a){for(var i=new Array(a.length),r=0;r<a.length;++r)i[r]=t(a[r]);return i}},{"big-rat":18}],274:[function(o,c,p){var t=o("big-rat"),n=o("big-rat/mul");c.exports=a;function a(i,r){for(var f=t(r),u=i.length,s=new Array(u),h=0;h<u;++h)s[h]=n(i[h],f);return s}},{"big-rat":18,"big-rat/mul":27}],275:[function(o,c,p){var t=o("big-rat/sub");c.exports=n;function n(a,i){for(var r=a.length,f=new Array(r),u=0;u<r;++u)f[u]=t(a[u],i[u]);return f}},{"big-rat/sub":29}],276:[function(o,c,p){var t=o("compare-cell"),n=o("compare-oriented-cell"),a=o("cell-orientation");c.exports=i;function i(r){r.sort(n);for(var f=r.length,u=0,s=0;s<f;++s){var h=r[s],d=a(h);if(d!==0){if(u>0){var y=r[u-1];if(t(h,y)===0&&a(y)!==d){u-=1;continue}}r[u++]=h}}return r.length=u,r}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(o,c,p){var t="",n;c.exports=a;function a(i,r){if(typeof i!="string")throw new TypeError("expected a string");if(r===1)return i;if(r===2)return i+i;var f=i.length*r;if(n!==i||typeof n=="undefined")n=i,t="";else if(t.length>=f)return t.substr(0,f);for(;f>t.length&&r>1;)r&1&&(t+=i),r>>=1,i+=i;return t+=i,t=t.substr(0,f),t}},{}],278:[function(o,c,p){(function(t){(function(){c.exports=t.performance&&t.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,typeof l!="undefined"?l:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],279:[function(o,c,p){c.exports=t;function t(n){for(var a=n.length,i=n[n.length-1],r=a,f=a-2;f>=0;--f){var u=i,s=n[f];i=u+s;var h=i-u,d=s-h;d&&(n[--r]=i,i=d)}for(var y=0,f=r;f<a;++f){var u=n[f],s=i;i=u+s;var h=i-u,d=s-h;d&&(n[y++]=d)}return n[y++]=i,n.length=y,n}},{}],280:[function(o,c,p){var t=o("two-product"),n=o("robust-sum"),a=o("robust-scale"),i=o("robust-compress"),r=4;function f(m,g,x,A){return function(S){return A(m(x(S[0][0],S[1][1]),x(-S[0][1],S[1][0])))}}function u(m,g,x,A){return function(S){return A(m(g(m(x(S[1][1],S[2][2]),x(-S[1][2],S[2][1])),S[0][0]),m(g(m(x(S[1][0],S[2][2]),x(-S[1][2],S[2][0])),-S[0][1]),g(m(x(S[1][0],S[2][1]),x(-S[1][1],S[2][0])),S[0][2]))))}}function s(m){var g=m===2?f:m===3?u:void 0;return g(n,a,t,i)}var h=[function(){return[0]},function(g){return[g[0][0]]}];function d(m,g,x,A,b,S){return function(T){switch(T.length){case 0:return m(T);case 1:return g(T);case 2:return x(T);case 3:return A(T)}var _=b[T.length];return _||(_=b[T.length]=S(T.length)),_(T)}}function y(){for(;h.length<r;)h.push(s(h.length));c.exports=d.apply(void 0,h.concat([h,s]));for(var m=0;m<h.length;++m)c.exports[m]=h[m]}y()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(o,c,p){var t=o("two-product"),n=o("robust-sum");c.exports=a;function a(i,r){for(var f=t(i[0],r[0]),u=1;u<i.length;++u)f=n(f,t(i[u],r[u]));return f}},{"robust-sum":289,"two-product":306}],282:[function(o,c,p){var t=o("two-product"),n=o("robust-sum"),a=o("robust-subtract"),i=o("robust-scale"),r=6;function f(w){var T=w===3?d:w===4?y:w===5?m:g;return T(n,a,t,i)}function u(){return 0}function s(){return 0}function h(){return 0}function d(w,T,_,v){function P(M,E,D){var N=_(M[0],M[0]),O=v(N,E[0]),I=v(N,D[0]),F=_(E[0],E[0]),V=v(F,M[0]),U=v(F,D[0]),j=_(D[0],D[0]),Z=v(j,M[0]),te=v(j,E[0]),re=w(T(te,U),T(V,O)),W=T(Z,I),J=T(re,W);return J[J.length-1]}return P}function y(w,T,_,v){function P(M,E,D,N){var O=w(_(M[0],M[0]),_(M[1],M[1])),I=v(O,E[0]),F=v(O,D[0]),V=v(O,N[0]),U=w(_(E[0],E[0]),_(E[1],E[1])),j=v(U,M[0]),Z=v(U,D[0]),te=v(U,N[0]),re=w(_(D[0],D[0]),_(D[1],D[1])),W=v(re,M[0]),J=v(re,E[0]),le=v(re,N[0]),ue=w(_(N[0],N[0]),_(N[1],N[1])),se=v(ue,M[0]),G=v(ue,E[0]),Y=v(ue,D[0]),ee=w(w(v(T(Y,le),E[1]),w(v(T(G,te),-D[1]),v(T(J,Z),N[1]))),w(v(T(G,te),M[1]),w(v(T(se,V),-E[1]),v(T(j,I),N[1])))),$=w(w(v(T(Y,le),M[1]),w(v(T(se,V),-D[1]),v(T(W,F),N[1]))),w(v(T(J,Z),M[1]),w(v(T(W,F),-E[1]),v(T(j,I),D[1])))),K=T(ee,$);return K[K.length-1]}return P}function m(w,T,_,v){function P(M,E,D,N,O){var I=w(_(M[0],M[0]),w(_(M[1],M[1]),_(M[2],M[2]))),F=v(I,E[0]),V=v(I,D[0]),U=v(I,N[0]),j=v(I,O[0]),Z=w(_(E[0],E[0]),w(_(E[1],E[1]),_(E[2],E[2]))),te=v(Z,M[0]),re=v(Z,D[0]),W=v(Z,N[0]),J=v(Z,O[0]),le=w(_(D[0],D[0]),w(_(D[1],D[1]),_(D[2],D[2]))),ue=v(le,M[0]),se=v(le,E[0]),G=v(le,N[0]),Y=v(le,O[0]),ee=w(_(N[0],N[0]),w(_(N[1],N[1]),_(N[2],N[2]))),$=v(ee,M[0]),K=v(ee,E[0]),Q=v(ee,D[0]),ae=v(ee,O[0]),ie=w(_(O[0],O[0]),w(_(O[1],O[1]),_(O[2],O[2]))),oe=v(ie,M[0]),fe=v(ie,E[0]),ye=v(ie,D[0]),ce=v(ie,N[0]),me=w(w(w(v(w(v(T(ce,ae),D[1]),w(v(T(ye,Y),-N[1]),v(T(Q,G),O[1]))),E[2]),w(v(w(v(T(ce,ae),E[1]),w(v(T(fe,J),-N[1]),v(T(K,W),O[1]))),-D[2]),v(w(v(T(ye,Y),E[1]),w(v(T(fe,J),-D[1]),v(T(se,re),O[1]))),N[2]))),w(v(w(v(T(Q,G),E[1]),w(v(T(K,W),-D[1]),v(T(se,re),N[1]))),-O[2]),w(v(w(v(T(ce,ae),E[1]),w(v(T(fe,J),-N[1]),v(T(K,W),O[1]))),M[2]),v(w(v(T(ce,ae),M[1]),w(v(T(oe,j),-N[1]),v(T($,U),O[1]))),-E[2])))),w(w(v(w(v(T(fe,J),M[1]),w(v(T(oe,j),-E[1]),v(T(te,F),O[1]))),N[2]),w(v(w(v(T(K,W),M[1]),w(v(T($,U),-E[1]),v(T(te,F),N[1]))),-O[2]),v(w(v(T(Q,G),E[1]),w(v(T(K,W),-D[1]),v(T(se,re),N[1]))),M[2]))),w(v(w(v(T(Q,G),M[1]),w(v(T($,U),-D[1]),v(T(ue,V),N[1]))),-E[2]),w(v(w(v(T(K,W),M[1]),w(v(T($,U),-E[1]),v(T(te,F),N[1]))),D[2]),v(w(v(T(se,re),M[1]),w(v(T(ue,V),-E[1]),v(T(te,F),D[1]))),-N[2]))))),xe=w(w(w(v(w(v(T(ce,ae),D[1]),w(v(T(ye,Y),-N[1]),v(T(Q,G),O[1]))),M[2]),v(w(v(T(ce,ae),M[1]),w(v(T(oe,j),-N[1]),v(T($,U),O[1]))),-D[2])),w(v(w(v(T(ye,Y),M[1]),w(v(T(oe,j),-D[1]),v(T(ue,V),O[1]))),N[2]),v(w(v(T(Q,G),M[1]),w(v(T($,U),-D[1]),v(T(ue,V),N[1]))),-O[2]))),w(w(v(w(v(T(ye,Y),E[1]),w(v(T(fe,J),-D[1]),v(T(se,re),O[1]))),M[2]),v(w(v(T(ye,Y),M[1]),w(v(T(oe,j),-D[1]),v(T(ue,V),O[1]))),-E[2])),w(v(w(v(T(fe,J),M[1]),w(v(T(oe,j),-E[1]),v(T(te,F),O[1]))),D[2]),v(w(v(T(se,re),M[1]),w(v(T(ue,V),-E[1]),v(T(te,F),D[1]))),-O[2])))),ke=T(me,xe);return ke[ke.length-1]}return P}function g(w,T,_,v){function P(M,E,D,N,O,I){var F=w(w(_(M[0],M[0]),_(M[1],M[1])),w(_(M[2],M[2]),_(M[3],M[3]))),V=v(F,E[0]),U=v(F,D[0]),j=v(F,N[0]),Z=v(F,O[0]),te=v(F,I[0]),re=w(w(_(E[0],E[0]),_(E[1],E[1])),w(_(E[2],E[2]),_(E[3],E[3]))),W=v(re,M[0]),J=v(re,D[0]),le=v(re,N[0]),ue=v(re,O[0]),se=v(re,I[0]),G=w(w(_(D[0],D[0]),_(D[1],D[1])),w(_(D[2],D[2]),_(D[3],D[3]))),Y=v(G,M[0]),ee=v(G,E[0]),$=v(G,N[0]),K=v(G,O[0]),Q=v(G,I[0]),ae=w(w(_(N[0],N[0]),_(N[1],N[1])),w(_(N[2],N[2]),_(N[3],N[3]))),ie=v(ae,M[0]),oe=v(ae,E[0]),fe=v(ae,D[0]),ye=v(ae,O[0]),ce=v(ae,I[0]),me=w(w(_(O[0],O[0]),_(O[1],O[1])),w(_(O[2],O[2]),_(O[3],O[3]))),xe=v(me,M[0]),ke=v(me,E[0]),Ae=v(me,D[0]),Oe=v(me,N[0]),He=v(me,I[0]),Ge=w(w(_(I[0],I[0]),_(I[1],I[1])),w(_(I[2],I[2]),_(I[3],I[3]))),_e=v(Ge,M[0]),Ie=v(Ge,E[0]),We=v(Ge,D[0]),et=v(Ge,N[0]),Ne=v(Ge,O[0]),De=w(w(w(v(w(w(v(w(v(T(Ne,He),N[1]),w(v(T(et,ce),-O[1]),v(T(Oe,ye),I[1]))),D[2]),v(w(v(T(Ne,He),D[1]),w(v(T(We,Q),-O[1]),v(T(Ae,K),I[1]))),-N[2])),w(v(w(v(T(et,ce),D[1]),w(v(T(We,Q),-N[1]),v(T(fe,$),I[1]))),O[2]),v(w(v(T(Oe,ye),D[1]),w(v(T(Ae,K),-N[1]),v(T(fe,$),O[1]))),-I[2]))),E[3]),w(v(w(w(v(w(v(T(Ne,He),N[1]),w(v(T(et,ce),-O[1]),v(T(Oe,ye),I[1]))),E[2]),v(w(v(T(Ne,He),E[1]),w(v(T(Ie,se),-O[1]),v(T(ke,ue),I[1]))),-N[2])),w(v(w(v(T(et,ce),E[1]),w(v(T(Ie,se),-N[1]),v(T(oe,le),I[1]))),O[2]),v(w(v(T(Oe,ye),E[1]),w(v(T(ke,ue),-N[1]),v(T(oe,le),O[1]))),-I[2]))),-D[3]),v(w(w(v(w(v(T(Ne,He),D[1]),w(v(T(We,Q),-O[1]),v(T(Ae,K),I[1]))),E[2]),v(w(v(T(Ne,He),E[1]),w(v(T(Ie,se),-O[1]),v(T(ke,ue),I[1]))),-D[2])),w(v(w(v(T(We,Q),E[1]),w(v(T(Ie,se),-D[1]),v(T(ee,J),I[1]))),O[2]),v(w(v(T(Ae,K),E[1]),w(v(T(ke,ue),-D[1]),v(T(ee,J),O[1]))),-I[2]))),N[3]))),w(w(v(w(w(v(w(v(T(et,ce),D[1]),w(v(T(We,Q),-N[1]),v(T(fe,$),I[1]))),E[2]),v(w(v(T(et,ce),E[1]),w(v(T(Ie,se),-N[1]),v(T(oe,le),I[1]))),-D[2])),w(v(w(v(T(We,Q),E[1]),w(v(T(Ie,se),-D[1]),v(T(ee,J),I[1]))),N[2]),v(w(v(T(fe,$),E[1]),w(v(T(oe,le),-D[1]),v(T(ee,J),N[1]))),-I[2]))),-O[3]),v(w(w(v(w(v(T(Oe,ye),D[1]),w(v(T(Ae,K),-N[1]),v(T(fe,$),O[1]))),E[2]),v(w(v(T(Oe,ye),E[1]),w(v(T(ke,ue),-N[1]),v(T(oe,le),O[1]))),-D[2])),w(v(w(v(T(Ae,K),E[1]),w(v(T(ke,ue),-D[1]),v(T(ee,J),O[1]))),N[2]),v(w(v(T(fe,$),E[1]),w(v(T(oe,le),-D[1]),v(T(ee,J),N[1]))),-O[2]))),I[3])),w(v(w(w(v(w(v(T(Ne,He),N[1]),w(v(T(et,ce),-O[1]),v(T(Oe,ye),I[1]))),E[2]),v(w(v(T(Ne,He),E[1]),w(v(T(Ie,se),-O[1]),v(T(ke,ue),I[1]))),-N[2])),w(v(w(v(T(et,ce),E[1]),w(v(T(Ie,se),-N[1]),v(T(oe,le),I[1]))),O[2]),v(w(v(T(Oe,ye),E[1]),w(v(T(ke,ue),-N[1]),v(T(oe,le),O[1]))),-I[2]))),M[3]),v(w(w(v(w(v(T(Ne,He),N[1]),w(v(T(et,ce),-O[1]),v(T(Oe,ye),I[1]))),M[2]),v(w(v(T(Ne,He),M[1]),w(v(T(_e,te),-O[1]),v(T(xe,Z),I[1]))),-N[2])),w(v(w(v(T(et,ce),M[1]),w(v(T(_e,te),-N[1]),v(T(ie,j),I[1]))),O[2]),v(w(v(T(Oe,ye),M[1]),w(v(T(xe,Z),-N[1]),v(T(ie,j),O[1]))),-I[2]))),-E[3])))),w(w(w(v(w(w(v(w(v(T(Ne,He),E[1]),w(v(T(Ie,se),-O[1]),v(T(ke,ue),I[1]))),M[2]),v(w(v(T(Ne,He),M[1]),w(v(T(_e,te),-O[1]),v(T(xe,Z),I[1]))),-E[2])),w(v(w(v(T(Ie,se),M[1]),w(v(T(_e,te),-E[1]),v(T(W,V),I[1]))),O[2]),v(w(v(T(ke,ue),M[1]),w(v(T(xe,Z),-E[1]),v(T(W,V),O[1]))),-I[2]))),N[3]),v(w(w(v(w(v(T(et,ce),E[1]),w(v(T(Ie,se),-N[1]),v(T(oe,le),I[1]))),M[2]),v(w(v(T(et,ce),M[1]),w(v(T(_e,te),-N[1]),v(T(ie,j),I[1]))),-E[2])),w(v(w(v(T(Ie,se),M[1]),w(v(T(_e,te),-E[1]),v(T(W,V),I[1]))),N[2]),v(w(v(T(oe,le),M[1]),w(v(T(ie,j),-E[1]),v(T(W,V),N[1]))),-I[2]))),-O[3])),w(v(w(w(v(w(v(T(Oe,ye),E[1]),w(v(T(ke,ue),-N[1]),v(T(oe,le),O[1]))),M[2]),v(w(v(T(Oe,ye),M[1]),w(v(T(xe,Z),-N[1]),v(T(ie,j),O[1]))),-E[2])),w(v(w(v(T(ke,ue),M[1]),w(v(T(xe,Z),-E[1]),v(T(W,V),O[1]))),N[2]),v(w(v(T(oe,le),M[1]),w(v(T(ie,j),-E[1]),v(T(W,V),N[1]))),-O[2]))),I[3]),v(w(w(v(w(v(T(et,ce),D[1]),w(v(T(We,Q),-N[1]),v(T(fe,$),I[1]))),E[2]),v(w(v(T(et,ce),E[1]),w(v(T(Ie,se),-N[1]),v(T(oe,le),I[1]))),-D[2])),w(v(w(v(T(We,Q),E[1]),w(v(T(Ie,se),-D[1]),v(T(ee,J),I[1]))),N[2]),v(w(v(T(fe,$),E[1]),w(v(T(oe,le),-D[1]),v(T(ee,J),N[1]))),-I[2]))),M[3]))),w(w(v(w(w(v(w(v(T(et,ce),D[1]),w(v(T(We,Q),-N[1]),v(T(fe,$),I[1]))),M[2]),v(w(v(T(et,ce),M[1]),w(v(T(_e,te),-N[1]),v(T(ie,j),I[1]))),-D[2])),w(v(w(v(T(We,Q),M[1]),w(v(T(_e,te),-D[1]),v(T(Y,U),I[1]))),N[2]),v(w(v(T(fe,$),M[1]),w(v(T(ie,j),-D[1]),v(T(Y,U),N[1]))),-I[2]))),-E[3]),v(w(w(v(w(v(T(et,ce),E[1]),w(v(T(Ie,se),-N[1]),v(T(oe,le),I[1]))),M[2]),v(w(v(T(et,ce),M[1]),w(v(T(_e,te),-N[1]),v(T(ie,j),I[1]))),-E[2])),w(v(w(v(T(Ie,se),M[1]),w(v(T(_e,te),-E[1]),v(T(W,V),I[1]))),N[2]),v(w(v(T(oe,le),M[1]),w(v(T(ie,j),-E[1]),v(T(W,V),N[1]))),-I[2]))),D[3])),w(v(w(w(v(w(v(T(We,Q),E[1]),w(v(T(Ie,se),-D[1]),v(T(ee,J),I[1]))),M[2]),v(w(v(T(We,Q),M[1]),w(v(T(_e,te),-D[1]),v(T(Y,U),I[1]))),-E[2])),w(v(w(v(T(Ie,se),M[1]),w(v(T(_e,te),-E[1]),v(T(W,V),I[1]))),D[2]),v(w(v(T(ee,J),M[1]),w(v(T(Y,U),-E[1]),v(T(W,V),D[1]))),-I[2]))),-N[3]),v(w(w(v(w(v(T(fe,$),E[1]),w(v(T(oe,le),-D[1]),v(T(ee,J),N[1]))),M[2]),v(w(v(T(fe,$),M[1]),w(v(T(ie,j),-D[1]),v(T(Y,U),N[1]))),-E[2])),w(v(w(v(T(oe,le),M[1]),w(v(T(ie,j),-E[1]),v(T(W,V),N[1]))),D[2]),v(w(v(T(ee,J),M[1]),w(v(T(Y,U),-E[1]),v(T(W,V),D[1]))),-N[2]))),I[3]))))),Ve=w(w(w(v(w(w(v(w(v(T(Ne,He),N[1]),w(v(T(et,ce),-O[1]),v(T(Oe,ye),I[1]))),D[2]),v(w(v(T(Ne,He),D[1]),w(v(T(We,Q),-O[1]),v(T(Ae,K),I[1]))),-N[2])),w(v(w(v(T(et,ce),D[1]),w(v(T(We,Q),-N[1]),v(T(fe,$),I[1]))),O[2]),v(w(v(T(Oe,ye),D[1]),w(v(T(Ae,K),-N[1]),v(T(fe,$),O[1]))),-I[2]))),M[3]),w(v(w(w(v(w(v(T(Ne,He),N[1]),w(v(T(et,ce),-O[1]),v(T(Oe,ye),I[1]))),M[2]),v(w(v(T(Ne,He),M[1]),w(v(T(_e,te),-O[1]),v(T(xe,Z),I[1]))),-N[2])),w(v(w(v(T(et,ce),M[1]),w(v(T(_e,te),-N[1]),v(T(ie,j),I[1]))),O[2]),v(w(v(T(Oe,ye),M[1]),w(v(T(xe,Z),-N[1]),v(T(ie,j),O[1]))),-I[2]))),-D[3]),v(w(w(v(w(v(T(Ne,He),D[1]),w(v(T(We,Q),-O[1]),v(T(Ae,K),I[1]))),M[2]),v(w(v(T(Ne,He),M[1]),w(v(T(_e,te),-O[1]),v(T(xe,Z),I[1]))),-D[2])),w(v(w(v(T(We,Q),M[1]),w(v(T(_e,te),-D[1]),v(T(Y,U),I[1]))),O[2]),v(w(v(T(Ae,K),M[1]),w(v(T(xe,Z),-D[1]),v(T(Y,U),O[1]))),-I[2]))),N[3]))),w(w(v(w(w(v(w(v(T(et,ce),D[1]),w(v(T(We,Q),-N[1]),v(T(fe,$),I[1]))),M[2]),v(w(v(T(et,ce),M[1]),w(v(T(_e,te),-N[1]),v(T(ie,j),I[1]))),-D[2])),w(v(w(v(T(We,Q),M[1]),w(v(T(_e,te),-D[1]),v(T(Y,U),I[1]))),N[2]),v(w(v(T(fe,$),M[1]),w(v(T(ie,j),-D[1]),v(T(Y,U),N[1]))),-I[2]))),-O[3]),v(w(w(v(w(v(T(Oe,ye),D[1]),w(v(T(Ae,K),-N[1]),v(T(fe,$),O[1]))),M[2]),v(w(v(T(Oe,ye),M[1]),w(v(T(xe,Z),-N[1]),v(T(ie,j),O[1]))),-D[2])),w(v(w(v(T(Ae,K),M[1]),w(v(T(xe,Z),-D[1]),v(T(Y,U),O[1]))),N[2]),v(w(v(T(fe,$),M[1]),w(v(T(ie,j),-D[1]),v(T(Y,U),N[1]))),-O[2]))),I[3])),w(v(w(w(v(w(v(T(Ne,He),D[1]),w(v(T(We,Q),-O[1]),v(T(Ae,K),I[1]))),E[2]),v(w(v(T(Ne,He),E[1]),w(v(T(Ie,se),-O[1]),v(T(ke,ue),I[1]))),-D[2])),w(v(w(v(T(We,Q),E[1]),w(v(T(Ie,se),-D[1]),v(T(ee,J),I[1]))),O[2]),v(w(v(T(Ae,K),E[1]),w(v(T(ke,ue),-D[1]),v(T(ee,J),O[1]))),-I[2]))),M[3]),v(w(w(v(w(v(T(Ne,He),D[1]),w(v(T(We,Q),-O[1]),v(T(Ae,K),I[1]))),M[2]),v(w(v(T(Ne,He),M[1]),w(v(T(_e,te),-O[1]),v(T(xe,Z),I[1]))),-D[2])),w(v(w(v(T(We,Q),M[1]),w(v(T(_e,te),-D[1]),v(T(Y,U),I[1]))),O[2]),v(w(v(T(Ae,K),M[1]),w(v(T(xe,Z),-D[1]),v(T(Y,U),O[1]))),-I[2]))),-E[3])))),w(w(w(v(w(w(v(w(v(T(Ne,He),E[1]),w(v(T(Ie,se),-O[1]),v(T(ke,ue),I[1]))),M[2]),v(w(v(T(Ne,He),M[1]),w(v(T(_e,te),-O[1]),v(T(xe,Z),I[1]))),-E[2])),w(v(w(v(T(Ie,se),M[1]),w(v(T(_e,te),-E[1]),v(T(W,V),I[1]))),O[2]),v(w(v(T(ke,ue),M[1]),w(v(T(xe,Z),-E[1]),v(T(W,V),O[1]))),-I[2]))),D[3]),v(w(w(v(w(v(T(We,Q),E[1]),w(v(T(Ie,se),-D[1]),v(T(ee,J),I[1]))),M[2]),v(w(v(T(We,Q),M[1]),w(v(T(_e,te),-D[1]),v(T(Y,U),I[1]))),-E[2])),w(v(w(v(T(Ie,se),M[1]),w(v(T(_e,te),-E[1]),v(T(W,V),I[1]))),D[2]),v(w(v(T(ee,J),M[1]),w(v(T(Y,U),-E[1]),v(T(W,V),D[1]))),-I[2]))),-O[3])),w(v(w(w(v(w(v(T(Ae,K),E[1]),w(v(T(ke,ue),-D[1]),v(T(ee,J),O[1]))),M[2]),v(w(v(T(Ae,K),M[1]),w(v(T(xe,Z),-D[1]),v(T(Y,U),O[1]))),-E[2])),w(v(w(v(T(ke,ue),M[1]),w(v(T(xe,Z),-E[1]),v(T(W,V),O[1]))),D[2]),v(w(v(T(ee,J),M[1]),w(v(T(Y,U),-E[1]),v(T(W,V),D[1]))),-O[2]))),I[3]),v(w(w(v(w(v(T(Oe,ye),D[1]),w(v(T(Ae,K),-N[1]),v(T(fe,$),O[1]))),E[2]),v(w(v(T(Oe,ye),E[1]),w(v(T(ke,ue),-N[1]),v(T(oe,le),O[1]))),-D[2])),w(v(w(v(T(Ae,K),E[1]),w(v(T(ke,ue),-D[1]),v(T(ee,J),O[1]))),N[2]),v(w(v(T(fe,$),E[1]),w(v(T(oe,le),-D[1]),v(T(ee,J),N[1]))),-O[2]))),M[3]))),w(w(v(w(w(v(w(v(T(Oe,ye),D[1]),w(v(T(Ae,K),-N[1]),v(T(fe,$),O[1]))),M[2]),v(w(v(T(Oe,ye),M[1]),w(v(T(xe,Z),-N[1]),v(T(ie,j),O[1]))),-D[2])),w(v(w(v(T(Ae,K),M[1]),w(v(T(xe,Z),-D[1]),v(T(Y,U),O[1]))),N[2]),v(w(v(T(fe,$),M[1]),w(v(T(ie,j),-D[1]),v(T(Y,U),N[1]))),-O[2]))),-E[3]),v(w(w(v(w(v(T(Oe,ye),E[1]),w(v(T(ke,ue),-N[1]),v(T(oe,le),O[1]))),M[2]),v(w(v(T(Oe,ye),M[1]),w(v(T(xe,Z),-N[1]),v(T(ie,j),O[1]))),-E[2])),w(v(w(v(T(ke,ue),M[1]),w(v(T(xe,Z),-E[1]),v(T(W,V),O[1]))),N[2]),v(w(v(T(oe,le),M[1]),w(v(T(ie,j),-E[1]),v(T(W,V),N[1]))),-O[2]))),D[3])),w(v(w(w(v(w(v(T(Ae,K),E[1]),w(v(T(ke,ue),-D[1]),v(T(ee,J),O[1]))),M[2]),v(w(v(T(Ae,K),M[1]),w(v(T(xe,Z),-D[1]),v(T(Y,U),O[1]))),-E[2])),w(v(w(v(T(ke,ue),M[1]),w(v(T(xe,Z),-E[1]),v(T(W,V),O[1]))),D[2]),v(w(v(T(ee,J),M[1]),w(v(T(Y,U),-E[1]),v(T(W,V),D[1]))),-O[2]))),-N[3]),v(w(w(v(w(v(T(fe,$),E[1]),w(v(T(oe,le),-D[1]),v(T(ee,J),N[1]))),M[2]),v(w(v(T(fe,$),M[1]),w(v(T(ie,j),-D[1]),v(T(Y,U),N[1]))),-E[2])),w(v(w(v(T(oe,le),M[1]),w(v(T(ie,j),-E[1]),v(T(W,V),N[1]))),D[2]),v(w(v(T(ee,J),M[1]),w(v(T(Y,U),-E[1]),v(T(W,V),D[1]))),-N[2]))),O[3]))))),dt=T(De,Ve);return dt[dt.length-1]}return P}var x=[u,s,h];function A(w){var T=x[w.length];return T||(T=x[w.length]=f(w.length)),T.apply(void 0,w)}function b(w,T,_,v,P,M,E,D){function N(O,I,F,V,U,j){switch(arguments.length){case 0:case 1:return 0;case 2:return v(O,I);case 3:return P(O,I,F);case 4:return M(O,I,F,V);case 5:return E(O,I,F,V,U);case 6:return D(O,I,F,V,U,j)}for(var Z=new Array(arguments.length),te=0;te<arguments.length;++te)Z[te]=arguments[te];return w(Z)}return N}function S(){for(;x.length<=r;)x.push(f(x.length));c.exports=b.apply(void 0,[A].concat(x));for(var w=0;w<=r;++w)c.exports[w]=x[w]}S()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(o,c,p){var t=o("robust-determinant"),n=3;function a(y){var m=y===2?f:u;return y<n?m(t[y]):m(t)}function i(){return[[0]]}function r(y,m){return[[m[0]],[y[0][0]]]}function f(y){return function(g,x){return[y([[+x[0],+g[0][1]],[+x[1],+g[1][1]]]),y([[+g[0][0],+x[0]],[+g[1][0],+x[1]]]),y(g)]}}function u(y){return function(g,x){return[y([[+x[0],+g[0][1],+g[0][2]],[+x[1],+g[1][1],+g[1][2]],[+x[2],+g[2][1],+g[2][2]]]),y([[+g[0][0],+x[0],+g[0][2]],[+g[1][0],+x[1],+g[1][2]],[+g[2][0],+x[2],+g[2][2]]]),y([[+g[0][0],+g[0][1],+x[0]],[+g[1][0],+g[1][1],+x[1]],[+g[2][0],+g[2][1],+x[2]]]),y(g)]}}var s=[i,r];function h(y,m,g,x,A,b){return function(w,T){switch(w.length){case 0:return y(w,T);case 1:return m(w,T);case 2:return g(w,T);case 3:return x(w,T)}var _=A[w.length];return _||(_=A[w.length]=b(w.length)),_(w,T)}}function d(){for(;s.length<=n;)s.push(a(s.length));c.exports=h.apply(void 0,s.concat([s,a]));for(var y=0;y<n;++y)c.exports[y]=s[y]}d()},{"robust-determinant":280}],284:[function(o,c,p){var t=o("two-product"),n=o("robust-sum"),a=o("robust-scale"),i=o("robust-subtract"),r=5,f=11102230246251565e-32,u=(3+16*f)*f,s=(7+56*f)*f;function h(T,_,v,P){return function(E,D,N){var O=T(T(_(D[1],N[0]),_(-N[1],D[0])),T(_(E[1],D[0]),_(-D[1],E[0]))),I=T(_(E[1],N[0]),_(-N[1],E[0])),F=P(O,I);return F[F.length-1]}}function d(T,_,v,P){return function(E,D,N,O){var I=T(T(v(T(_(N[1],O[0]),_(-O[1],N[0])),D[2]),T(v(T(_(D[1],O[0]),_(-O[1],D[0])),-N[2]),v(T(_(D[1],N[0]),_(-N[1],D[0])),O[2]))),T(v(T(_(D[1],O[0]),_(-O[1],D[0])),E[2]),T(v(T(_(E[1],O[0]),_(-O[1],E[0])),-D[2]),v(T(_(E[1],D[0]),_(-D[1],E[0])),O[2])))),F=T(T(v(T(_(N[1],O[0]),_(-O[1],N[0])),E[2]),T(v(T(_(E[1],O[0]),_(-O[1],E[0])),-N[2]),v(T(_(E[1],N[0]),_(-N[1],E[0])),O[2]))),T(v(T(_(D[1],N[0]),_(-N[1],D[0])),E[2]),T(v(T(_(E[1],N[0]),_(-N[1],E[0])),-D[2]),v(T(_(E[1],D[0]),_(-D[1],E[0])),N[2])))),V=P(I,F);return V[V.length-1]}}function y(T,_,v,P){return function(E,D,N,O,I){var F=T(T(T(v(T(v(T(_(O[1],I[0]),_(-I[1],O[0])),N[2]),T(v(T(_(N[1],I[0]),_(-I[1],N[0])),-O[2]),v(T(_(N[1],O[0]),_(-O[1],N[0])),I[2]))),D[3]),T(v(T(v(T(_(O[1],I[0]),_(-I[1],O[0])),D[2]),T(v(T(_(D[1],I[0]),_(-I[1],D[0])),-O[2]),v(T(_(D[1],O[0]),_(-O[1],D[0])),I[2]))),-N[3]),v(T(v(T(_(N[1],I[0]),_(-I[1],N[0])),D[2]),T(v(T(_(D[1],I[0]),_(-I[1],D[0])),-N[2]),v(T(_(D[1],N[0]),_(-N[1],D[0])),I[2]))),O[3]))),T(v(T(v(T(_(N[1],O[0]),_(-O[1],N[0])),D[2]),T(v(T(_(D[1],O[0]),_(-O[1],D[0])),-N[2]),v(T(_(D[1],N[0]),_(-N[1],D[0])),O[2]))),-I[3]),T(v(T(v(T(_(O[1],I[0]),_(-I[1],O[0])),D[2]),T(v(T(_(D[1],I[0]),_(-I[1],D[0])),-O[2]),v(T(_(D[1],O[0]),_(-O[1],D[0])),I[2]))),E[3]),v(T(v(T(_(O[1],I[0]),_(-I[1],O[0])),E[2]),T(v(T(_(E[1],I[0]),_(-I[1],E[0])),-O[2]),v(T(_(E[1],O[0]),_(-O[1],E[0])),I[2]))),-D[3])))),T(T(v(T(v(T(_(D[1],I[0]),_(-I[1],D[0])),E[2]),T(v(T(_(E[1],I[0]),_(-I[1],E[0])),-D[2]),v(T(_(E[1],D[0]),_(-D[1],E[0])),I[2]))),O[3]),T(v(T(v(T(_(D[1],O[0]),_(-O[1],D[0])),E[2]),T(v(T(_(E[1],O[0]),_(-O[1],E[0])),-D[2]),v(T(_(E[1],D[0]),_(-D[1],E[0])),O[2]))),-I[3]),v(T(v(T(_(N[1],O[0]),_(-O[1],N[0])),D[2]),T(v(T(_(D[1],O[0]),_(-O[1],D[0])),-N[2]),v(T(_(D[1],N[0]),_(-N[1],D[0])),O[2]))),E[3]))),T(v(T(v(T(_(N[1],O[0]),_(-O[1],N[0])),E[2]),T(v(T(_(E[1],O[0]),_(-O[1],E[0])),-N[2]),v(T(_(E[1],N[0]),_(-N[1],E[0])),O[2]))),-D[3]),T(v(T(v(T(_(D[1],O[0]),_(-O[1],D[0])),E[2]),T(v(T(_(E[1],O[0]),_(-O[1],E[0])),-D[2]),v(T(_(E[1],D[0]),_(-D[1],E[0])),O[2]))),N[3]),v(T(v(T(_(D[1],N[0]),_(-N[1],D[0])),E[2]),T(v(T(_(E[1],N[0]),_(-N[1],E[0])),-D[2]),v(T(_(E[1],D[0]),_(-D[1],E[0])),N[2]))),-O[3]))))),V=T(T(T(v(T(v(T(_(O[1],I[0]),_(-I[1],O[0])),N[2]),T(v(T(_(N[1],I[0]),_(-I[1],N[0])),-O[2]),v(T(_(N[1],O[0]),_(-O[1],N[0])),I[2]))),E[3]),v(T(v(T(_(O[1],I[0]),_(-I[1],O[0])),E[2]),T(v(T(_(E[1],I[0]),_(-I[1],E[0])),-O[2]),v(T(_(E[1],O[0]),_(-O[1],E[0])),I[2]))),-N[3])),T(v(T(v(T(_(N[1],I[0]),_(-I[1],N[0])),E[2]),T(v(T(_(E[1],I[0]),_(-I[1],E[0])),-N[2]),v(T(_(E[1],N[0]),_(-N[1],E[0])),I[2]))),O[3]),v(T(v(T(_(N[1],O[0]),_(-O[1],N[0])),E[2]),T(v(T(_(E[1],O[0]),_(-O[1],E[0])),-N[2]),v(T(_(E[1],N[0]),_(-N[1],E[0])),O[2]))),-I[3]))),T(T(v(T(v(T(_(N[1],I[0]),_(-I[1],N[0])),D[2]),T(v(T(_(D[1],I[0]),_(-I[1],D[0])),-N[2]),v(T(_(D[1],N[0]),_(-N[1],D[0])),I[2]))),E[3]),v(T(v(T(_(N[1],I[0]),_(-I[1],N[0])),E[2]),T(v(T(_(E[1],I[0]),_(-I[1],E[0])),-N[2]),v(T(_(E[1],N[0]),_(-N[1],E[0])),I[2]))),-D[3])),T(v(T(v(T(_(D[1],I[0]),_(-I[1],D[0])),E[2]),T(v(T(_(E[1],I[0]),_(-I[1],E[0])),-D[2]),v(T(_(E[1],D[0]),_(-D[1],E[0])),I[2]))),N[3]),v(T(v(T(_(D[1],N[0]),_(-N[1],D[0])),E[2]),T(v(T(_(E[1],N[0]),_(-N[1],E[0])),-D[2]),v(T(_(E[1],D[0]),_(-D[1],E[0])),N[2]))),-I[3])))),U=P(F,V);return U[U.length-1]}}function m(T){var _=T===3?h:T===4?d:y;return _(n,t,a,i)}var g=m(3),x=m(4),A=[function(){return 0},function(){return 0},function(_,v){return v[0]-_[0]},function(_,v,P){var M=(_[1]-P[1])*(v[0]-P[0]),E=(_[0]-P[0])*(v[1]-P[1]),D=M-E,N;if(M>0){if(E<=0)return D;N=M+E}else if(M<0){if(E>=0)return D;N=-(M+E)}else return D;var O=u*N;return D>=O||D<=-O?D:g(_,v,P)},function(_,v,P,M){var E=_[0]-M[0],D=v[0]-M[0],N=P[0]-M[0],O=_[1]-M[1],I=v[1]-M[1],F=P[1]-M[1],V=_[2]-M[2],U=v[2]-M[2],j=P[2]-M[2],Z=D*F,te=N*I,re=N*O,W=E*F,J=E*I,le=D*O,ue=V*(Z-te)+U*(re-W)+j*(J-le),se=(Math.abs(Z)+Math.abs(te))*Math.abs(V)+(Math.abs(re)+Math.abs(W))*Math.abs(U)+(Math.abs(J)+Math.abs(le))*Math.abs(j),G=s*se;return ue>G||-ue>G?ue:x(_,v,P,M)}];function b(T){var _=A[T.length];return _||(_=A[T.length]=m(T.length)),_.apply(void 0,T)}function S(T,_,v,P,M,E,D){return function(O,I,F,V,U){switch(arguments.length){case 0:case 1:return 0;case 2:return P(O,I);case 3:return M(O,I,F);case 4:return E(O,I,F,V);case 5:return D(O,I,F,V,U)}for(var j=new Array(arguments.length),Z=0;Z<arguments.length;++Z)j[Z]=arguments[Z];return T(j)}}function w(){for(;A.length<=r;)A.push(m(A.length));c.exports=S.apply(void 0,[b].concat(A));for(var T=0;T<=r;++T)c.exports[T]=A[T]}w()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(o,c,p){var t=o("robust-sum"),n=o("robust-scale");c.exports=a;function a(i,r){if(i.length===1)return n(r,i[0]);if(r.length===1)return n(i,r[0]);if(i.length===0||r.length===0)return[0];var f=[0];if(i.length<r.length)for(var u=0;u<i.length;++u)f=t(f,n(r,i[u]));else for(var u=0;u<r.length;++u)f=t(f,n(i,r[u]));return f}},{"robust-scale":286,"robust-sum":289}],286:[function(o,c,p){var t=o("two-product"),n=o("two-sum");c.exports=a;function a(i,r){var f=i.length;if(f===1){var u=t(i[0],r);return u[0]?u:[u[1]]}var s=new Array(2*f),h=[.1,.1],d=[.1,.1],y=0;t(i[0],r,h),h[0]&&(s[y++]=h[0]);for(var m=1;m<f;++m){t(i[m],r,d);var g=h[1];n(g,d[0],h),h[0]&&(s[y++]=h[0]);var x=d[1],A=h[1],b=x+A,S=b-x,w=A-S;h[1]=b,w&&(s[y++]=w)}return h[1]&&(s[y++]=h[1]),y===0&&(s[y++]=0),s.length=y,s}},{"two-product":306,"two-sum":307}],287:[function(o,c,p){c.exports=a;var t=o("robust-orientation")[3];function n(i,r,f,u){for(var s=0;s<2;++s){var h=i[s],d=r[s],y=Math.min(h,d),m=Math.max(h,d),g=f[s],x=u[s],A=Math.min(g,x),b=Math.max(g,x);if(b<y||m<A)return!1}return!0}function a(i,r,f,u){var s=t(i,f,u),h=t(r,f,u);if(s>0&&h>0||s<0&&h<0)return!1;var d=t(f,i,r),y=t(u,i,r);return d>0&&y>0||d<0&&y<0?!1:s===0&&h===0&&d===0&&y===0?n(i,r,f,u):!0}},{"robust-orientation":284}],288:[function(o,c,p){c.exports=n;function t(a,i){var r=a+i,f=r-a,u=r-f,s=i-f,h=a-u,d=h+s;return d?[d,r]:[r]}function n(a,i){var r=a.length|0,f=i.length|0;if(r===1&&f===1)return t(a[0],-i[0]);var u=r+f,s=new Array(u),h=0,d=0,y=0,m=Math.abs,g=a[d],x=m(g),A=-i[y],b=m(A),S,w;x<b?(w=g,d+=1,d<r&&(g=a[d],x=m(g))):(w=A,y+=1,y<f&&(A=-i[y],b=m(A))),d<r&&x<b||y>=f?(S=g,d+=1,d<r&&(g=a[d],x=m(g))):(S=A,y+=1,y<f&&(A=-i[y],b=m(A)));for(var T=S+w,_=T-S,v=w-_,P=v,M=T,E,D,N,O,I;d<r&&y<f;)x<b?(S=g,d+=1,d<r&&(g=a[d],x=m(g))):(S=A,y+=1,y<f&&(A=-i[y],b=m(A))),w=P,T=S+w,_=T-S,v=w-_,v&&(s[h++]=v),E=M+T,D=E-M,N=E-D,O=T-D,I=M-N,P=I+O,M=E;for(;d<r;)S=g,w=P,T=S+w,_=T-S,v=w-_,v&&(s[h++]=v),E=M+T,D=E-M,N=E-D,O=T-D,I=M-N,P=I+O,M=E,d+=1,d<r&&(g=a[d]);for(;y<f;)S=A,w=P,T=S+w,_=T-S,v=w-_,v&&(s[h++]=v),E=M+T,D=E-M,N=E-D,O=T-D,I=M-N,P=I+O,M=E,y+=1,y<f&&(A=-i[y]);return P&&(s[h++]=P),M&&(s[h++]=M),h||(s[h++]=0),s.length=h,s}},{}],289:[function(o,c,p){c.exports=n;function t(a,i){var r=a+i,f=r-a,u=r-f,s=i-f,h=a-u,d=h+s;return d?[d,r]:[r]}function n(a,i){var r=a.length|0,f=i.length|0;if(r===1&&f===1)return t(a[0],i[0]);var u=r+f,s=new Array(u),h=0,d=0,y=0,m=Math.abs,g=a[d],x=m(g),A=i[y],b=m(A),S,w;x<b?(w=g,d+=1,d<r&&(g=a[d],x=m(g))):(w=A,y+=1,y<f&&(A=i[y],b=m(A))),d<r&&x<b||y>=f?(S=g,d+=1,d<r&&(g=a[d],x=m(g))):(S=A,y+=1,y<f&&(A=i[y],b=m(A)));for(var T=S+w,_=T-S,v=w-_,P=v,M=T,E,D,N,O,I;d<r&&y<f;)x<b?(S=g,d+=1,d<r&&(g=a[d],x=m(g))):(S=A,y+=1,y<f&&(A=i[y],b=m(A))),w=P,T=S+w,_=T-S,v=w-_,v&&(s[h++]=v),E=M+T,D=E-M,N=E-D,O=T-D,I=M-N,P=I+O,M=E;for(;d<r;)S=g,w=P,T=S+w,_=T-S,v=w-_,v&&(s[h++]=v),E=M+T,D=E-M,N=E-D,O=T-D,I=M-N,P=I+O,M=E,d+=1,d<r&&(g=a[d]);for(;y<f;)S=A,w=P,T=S+w,_=T-S,v=w-_,v&&(s[h++]=v),E=M+T,D=E-M,N=E-D,O=T-D,I=M-N,P=I+O,M=E,y+=1,y<f&&(A=i[y]);return P&&(s[h++]=P),M&&(s[h++]=M),h||(s[h++]=0),s.length=h,s}},{}],290:[function(o,c,p){c.exports=a;var t=o("boundary-cells"),n=o("reduce-simplicial-complex");function a(i){return n(t(i))}},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(o,c,p){c.exports=y;var t=o("ndarray"),n=o("typedarray-pool"),a=o("ndarray-sort"),i=o("./lib/codegen");function r(m){for(var g=m.length,x=0,A=0;A<g;++A)x=Math.max(x,m[A].length)|0;return x-1}function f(m,g){for(var x=m.length,A=n.mallocUint8(x),b=0;b<x;++b)A[b]=m[b]<g|0;return A}function u(m,g){for(var x=m.length,A=g*(g+1)/2*x|0,b=n.mallocUint32(A*2),S=0,w=0;w<x;++w)for(var T=m[w],g=T.length,_=0;_<g;++_)for(var v=0;v<_;++v){var P=T[v],M=T[_];b[S++]=Math.min(P,M)|0,b[S++]=Math.max(P,M)|0}var E=S/2|0;a(t(b,[E,2]));for(var D=2,w=2;w<S;w+=2)b[w-2]===b[w]&&b[w-1]===b[w+1]||(b[D++]=b[w],b[D++]=b[w+1]);return t(b,[D/2|0,2])}function s(m,g,x,A){for(var b=m.data,S=m.shape[0],w=n.mallocDouble(S),T=0,_=0;_<S;++_){var v=b[2*_],P=b[2*_+1];if(x[v]!==x[P]){var M=g[v],E=g[P];b[2*T]=v,b[2*T+1]=P,w[T++]=(E-A)/(E-M)}}return m.shape[0]=T,t(w,[T])}function h(m,g){var x=n.mallocInt32(g*2),A=m.shape[0],b=m.data;x[0]=0;for(var S=0,w=0;w<A;++w){var T=b[2*w];if(T!==S){for(x[2*S+1]=w;++S<T;)x[2*S]=w,x[2*S+1]=w;x[2*S]=w}}for(x[2*S+1]=A;++S<g;)x[2*S]=x[2*S+1]=A;return x}function d(m){for(var g=m.shape[0]|0,x=m.data,A=new Array(g),b=0;b<g;++b)A[b]=[x[2*b],x[2*b+1]];return A}function y(m,g,x,A){x=x||0,typeof A=="undefined"&&(A=r(m));var b=m.length;if(b===0||A<1)return{cells:[],vertexIds:[],vertexWeights:[]};var S=f(g,+x),w=u(m,A),T=s(w,g,S,+x),_=h(w,g.length|0),v=i(A)(m,w.data,_,S),P=d(w),M=[].slice.call(T.data,0,T.shape[0]);return n.free(S),n.free(w.data),n.free(T.data),n.free(_),{cells:v,vertexIds:P,vertexWeights:M}}},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(o,c,p){c.exports=n;var t=[function(){function i(r,f,u,s){for(var h=r.length,d=[],y=0;y<h;++y){var m=r[y];m.length}return d}return i},function(){function i(f,u,s,h){for(var d=Math.min(s,h)|0,y=Math.max(s,h)|0,m=f[2*d],g=f[2*d+1];m<g;){var x=m+g>>1,A=u[2*x+1];if(A===y)return x;y<A?g=x:m=x+1}return m}function r(f,u,s,h){for(var d=f.length,y=[],m=0;m<d;++m){var g=f[m],x=g.length;if(x===2){var A=(h[g[0]]<<0)+(h[g[1]]<<1);if(A===0||A===3)continue;switch(A){case 0:break;case 1:y.push([i(s,u,g[0],g[1])]);break;case 2:y.push([i(s,u,g[1],g[0])]);break}}}return y}return r},function(){function i(f,u,s,h){for(var d=Math.min(s,h)|0,y=Math.max(s,h)|0,m=f[2*d],g=f[2*d+1];m<g;){var x=m+g>>1,A=u[2*x+1];if(A===y)return x;y<A?g=x:m=x+1}return m}function r(f,u,s,h){for(var d=f.length,y=[],m=0;m<d;++m){var g=f[m],x=g.length;if(x===3){var A=(h[g[0]]<<0)+(h[g[1]]<<1)+(h[g[2]]<<2);if(A===0||A===7)continue;switch(A){case 0:break;case 1:y.push([i(s,u,g[0],g[2]),i(s,u,g[0],g[1])]);break;case 2:y.push([i(s,u,g[1],g[0]),i(s,u,g[1],g[2])]);break;case 3:y.push([i(s,u,g[0],g[2]),i(s,u,g[1],g[2])]);break;case 4:y.push([i(s,u,g[2],g[1]),i(s,u,g[2],g[0])]);break;case 5:y.push([i(s,u,g[2],g[1]),i(s,u,g[0],g[1])]);break;case 6:y.push([i(s,u,g[1],g[0]),i(s,u,g[2],g[0])]);break}}else if(x===2){var A=(h[g[0]]<<0)+(h[g[1]]<<1);if(A===0||A===3)continue;switch(A){case 0:break;case 1:y.push([i(s,u,g[0],g[1])]);break;case 2:y.push([i(s,u,g[1],g[0])]);break}}}return y}return r},function(){function i(f,u,s,h){for(var d=Math.min(s,h)|0,y=Math.max(s,h)|0,m=f[2*d],g=f[2*d+1];m<g;){var x=m+g>>1,A=u[2*x+1];if(A===y)return x;y<A?g=x:m=x+1}return m}function r(f,u,s,h){for(var d=f.length,y=[],m=0;m<d;++m){var g=f[m],x=g.length;if(x===4){var A=(h[g[0]]<<0)+(h[g[1]]<<1)+(h[g[2]]<<2)+(h[g[3]]<<3);if(A===0||A===15)continue;switch(A){case 0:break;case 1:y.push([i(s,u,g[0],g[1]),i(s,u,g[0],g[2]),i(s,u,g[0],g[3])]);break;case 2:y.push([i(s,u,g[1],g[2]),i(s,u,g[1],g[0]),i(s,u,g[1],g[3])]);break;case 3:y.push([i(s,u,g[1],g[2]),i(s,u,g[0],g[2]),i(s,u,g[0],g[3])],[i(s,u,g[1],g[3]),i(s,u,g[1],g[2]),i(s,u,g[0],g[3])]);break;case 4:y.push([i(s,u,g[2],g[0]),i(s,u,g[2],g[1]),i(s,u,g[2],g[3])]);break;case 5:y.push([i(s,u,g[0],g[1]),i(s,u,g[2],g[1]),i(s,u,g[0],g[3])],[i(s,u,g[2],g[1]),i(s,u,g[2],g[3]),i(s,u,g[0],g[3])]);break;case 6:y.push([i(s,u,g[2],g[0]),i(s,u,g[1],g[0]),i(s,u,g[1],g[3])],[i(s,u,g[2],g[3]),i(s,u,g[2],g[0]),i(s,u,g[1],g[3])]);break;case 7:y.push([i(s,u,g[0],g[3]),i(s,u,g[1],g[3]),i(s,u,g[2],g[3])]);break;case 8:y.push([i(s,u,g[3],g[1]),i(s,u,g[3],g[0]),i(s,u,g[3],g[2])]);break;case 9:y.push([i(s,u,g[3],g[1]),i(s,u,g[0],g[1]),i(s,u,g[0],g[2])],[i(s,u,g[3],g[2]),i(s,u,g[3],g[1]),i(s,u,g[0],g[2])]);break;case 10:y.push([i(s,u,g[1],g[0]),i(s,u,g[3],g[0]),i(s,u,g[1],g[2])],[i(s,u,g[3],g[0]),i(s,u,g[3],g[2]),i(s,u,g[1],g[2])]);break;case 11:y.push([i(s,u,g[1],g[2]),i(s,u,g[0],g[2]),i(s,u,g[3],g[2])]);break;case 12:y.push([i(s,u,g[3],g[0]),i(s,u,g[2],g[0]),i(s,u,g[2],g[1])],[i(s,u,g[3],g[1]),i(s,u,g[3],g[0]),i(s,u,g[2],g[1])]);break;case 13:y.push([i(s,u,g[0],g[1]),i(s,u,g[2],g[1]),i(s,u,g[3],g[1])]);break;case 14:y.push([i(s,u,g[2],g[0]),i(s,u,g[1],g[0]),i(s,u,g[3],g[0])]);break}}else if(x===3){var A=(h[g[0]]<<0)+(h[g[1]]<<1)+(h[g[2]]<<2);if(A===0||A===7)continue;switch(A){case 0:break;case 1:y.push([i(s,u,g[0],g[2]),i(s,u,g[0],g[1])]);break;case 2:y.push([i(s,u,g[1],g[0]),i(s,u,g[1],g[2])]);break;case 3:y.push([i(s,u,g[0],g[2]),i(s,u,g[1],g[2])]);break;case 4:y.push([i(s,u,g[2],g[1]),i(s,u,g[2],g[0])]);break;case 5:y.push([i(s,u,g[2],g[1]),i(s,u,g[0],g[1])]);break;case 6:y.push([i(s,u,g[1],g[0]),i(s,u,g[2],g[0])]);break}}else if(x===2){var A=(h[g[0]]<<0)+(h[g[1]]<<1);if(A===0||A===3)continue;switch(A){case 0:break;case 1:y.push([i(s,u,g[0],g[1])]);break;case 2:y.push([i(s,u,g[1],g[0])]);break}}}return y}return r}];function n(a){return t[a]()}},{}],293:[function(o,c,p){var t=o("bit-twiddle"),n=o("union-find");function a(T){for(var _=0,v=Math.max,P=0,M=T.length;P<M;++P)_=v(_,T[P].length);return _-1}p.dimension=a;function i(T){for(var _=-1,v=Math.max,P=0,M=T.length;P<M;++P)for(var E=T[P],D=0,N=E.length;D<N;++D)_=v(_,E[D]);return _+1}p.countVertices=i;function r(T){for(var _=new Array(T.length),v=0,P=T.length;v<P;++v)_[v]=T[v].slice(0);return _}p.cloneCells=r;function f(T,_){var v=T.length,P=T.length-_.length,M=Math.min;if(P)return P;switch(v){case 0:return 0;case 1:return T[0]-_[0];case 2:var E=T[0]+T[1]-_[0]-_[1];return E||M(T[0],T[1])-M(_[0],_[1]);case 3:var D=T[0]+T[1],N=_[0]+_[1];if(E=D+T[2]-(N+_[2]),E)return E;var O=M(T[0],T[1]),I=M(_[0],_[1]),E=M(O,T[2])-M(I,_[2]);return E||M(O+T[2],D)-M(I+_[2],N);default:var F=T.slice(0);F.sort();var V=_.slice(0);V.sort();for(var U=0;U<v;++U)if(P=F[U]-V[U],P)return P;return 0}}p.compareCells=f;function u(T,_){return f(T[0],_[0])}function s(T,_){if(_){for(var v=T.length,P=new Array(v),M=0;M<v;++M)P[M]=[T[M],_[M]];P.sort(u);for(var M=0;M<v;++M)T[M]=P[M][0],_[M]=P[M][1];return T}else return T.sort(f),T}p.normalize=s;function h(T){if(T.length===0)return[];for(var _=1,v=T.length,P=1;P<v;++P){var M=T[P];if(f(M,T[P-1])){if(P===_){_++;continue}T[_++]=M}}return T.length=_,T}p.unique=h;function d(T,_){for(var v=0,P=T.length-1,M=-1;v<=P;){var E=v+P>>1,D=f(T[E],_);D<=0?(D===0&&(M=E),v=E+1):D>0&&(P=E-1)}return M}p.findCell=d;function y(T,_){for(var v=new Array(T.length),P=0,M=v.length;P<M;++P)v[P]=[];for(var E=[],P=0,D=_.length;P<D;++P)for(var N=_[P],O=N.length,I=1,F=1<<O;I<F;++I){E.length=t.popCount(I);for(var V=0,U=0;U<O;++U)I&1<<U&&(E[V++]=N[U]);var j=d(T,E);if(!(j<0))for(;v[j++].push(P),!(j>=T.length||f(T[j],E)!==0););}return v}p.incidence=y;function m(T,_){if(!_)return y(h(x(T,0)),T);for(var v=new Array(_),P=0;P<_;++P)v[P]=[];for(var P=0,M=T.length;P<M;++P)for(var E=T[P],D=0,N=E.length;D<N;++D)v[E[D]].push(P);return v}p.dual=m;function g(T){for(var _=[],v=0,P=T.length;v<P;++v)for(var M=T[v],E=M.length|0,D=1,N=1<<E;D<N;++D){for(var O=[],I=0;I<E;++I)D>>>I&1&&O.push(M[I]);_.push(O)}return s(_)}p.explode=g;function x(T,_){if(_<0)return[];for(var v=[],P=(1<<_+1)-1,M=0;M<T.length;++M)for(var E=T[M],D=P;D<1<<E.length;D=t.nextCombination(D)){for(var N=new Array(_+1),O=0,I=0;I<E.length;++I)D&1<<I&&(N[O++]=E[I]);v.push(N)}return s(v)}p.skeleton=x;function A(T){for(var _=[],v=0,P=T.length;v<P;++v)for(var M=T[v],E=0,D=M.length;E<D;++E){for(var N=new Array(M.length-1),O=0,I=0;O<D;++O)O!==E&&(N[I++]=M[O]);_.push(N)}return s(_)}p.boundary=A;function b(T,_){for(var v=new n(_),P=0;P<T.length;++P)for(var M=T[P],E=0;E<M.length;++E)for(var D=E+1;D<M.length;++D)v.link(M[E],M[D]);for(var N=[],O=v.ranks,P=0;P<O.length;++P)O[P]=-1;for(var P=0;P<T.length;++P){var I=v.find(T[P][0]);O[I]<0?(O[I]=N.length,N.push([T[P].slice(0)])):N[O[I]].push(T[P].slice(0))}return N}function S(T){for(var _=h(s(x(T,0))),v=new n(_.length),P=0;P<T.length;++P)for(var M=T[P],E=0;E<M.length;++E)for(var D=d(_,[M[E]]),N=E+1;N<M.length;++N)v.link(D,d(_,[M[N]]));for(var O=[],I=v.ranks,P=0;P<I.length;++P)I[P]=-1;for(var P=0;P<T.length;++P){var F=v.find(d(_,[T[P][0]]));I[F]<0?(I[F]=O.length,O.push([T[P].slice(0)])):O[I[F]].push(T[P].slice(0))}return O}function w(T,_){return _?b(T,_):S(T)}p.connectedComponents=w},{"bit-twiddle":32,"union-find":309}],294:[function(o,c,p){arguments[4][32][0].apply(p,arguments)},{dup:32}],295:[function(o,c,p){arguments[4][293][0].apply(p,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(o,c,p){c.exports=t;function t(n){this.roots=new Array(n),this.ranks=new Array(n);for(var a=0;a<n;++a)this.roots[a]=a,this.ranks[a]=0}t.prototype.length=function(){return this.roots.length},t.prototype.makeSet=function(){var n=this.roots.length;return this.roots.push(n),this.ranks.push(0),n},t.prototype.find=function(n){for(var a=this.roots;a[n]!==n;){var i=a[n];a[n]=a[i],n=i}return n},t.prototype.link=function(n,a){var i=this.find(n),r=this.find(a);if(i!==r){var f=this.ranks,u=this.roots,s=f[i],h=f[r];s<h?u[i]=r:h<s?u[r]=i:(u[r]=i,++f[i])}}},{}],297:[function(o,c,p){c.exports=i;var t=o("robust-orientation"),n=o("simplicial-complex");function a(r,f,u){var s=Math.abs(t(r,f,u)),h=Math.sqrt(Math.pow(f[0]-u[0],2)+Math.pow(f[1]-u[1],2));return s/h}function i(r,f,u){for(var s=f.length,h=r.length,d=new Array(s),y=new Array(s),m=new Array(s),g=new Array(s),x=0;x<s;++x)d[x]=y[x]=-1,m[x]=1/0,g[x]=!1;for(var x=0;x<h;++x){var A=r[x];if(A.length!==2)throw new Error("Input must be a graph");var b=A[1],S=A[0];y[S]!==-1?y[S]=-2:y[S]=b,d[b]!==-1?d[b]=-2:d[b]=S}function w(re){if(g[re])return 1/0;var W=d[re],J=y[re];return W<0||J<0?1/0:a(f[re],f[W],f[J])}function T(re,W){var J=O[re],le=O[W];O[re]=le,O[W]=J,I[J]=W,I[le]=re}function _(re){return m[O[re]]}function v(re){return re&1?re-1>>1:(re>>1)-1}function P(re){for(var W=_(re);;){var J=W,le=2*re+1,ue=2*(re+1),se=re;if(le<V){var G=_(le);G<J&&(se=le,J=G)}if(ue<V){var Y=_(ue);Y<J&&(se=ue)}if(se===re)return re;T(re,se),re=se}}function M(re){for(var W=_(re);re>0;){var J=v(re);if(J>=0){var le=_(J);if(W<le){T(re,J),re=J;continue}}return re}}function E(){if(V>0){var re=O[0];return T(0,V-1),V-=1,P(0),re}return-1}function D(re,W){var J=O[re];return m[J]===W?re:(m[J]=-1/0,M(re),E(),m[J]=W,V+=1,M(V-1))}function N(re){if(!g[re]){g[re]=!0;var W=d[re],J=y[re];d[J]>=0&&(d[J]=W),y[W]>=0&&(y[W]=J),I[W]>=0&&D(I[W],w(W)),I[J]>=0&&D(I[J],w(J))}}for(var O=[],I=new Array(s),x=0;x<s;++x){var F=m[x]=w(x);F<1/0?(I[x]=O.length,O.push(x)):I[x]=-1}for(var V=O.length,x=V>>1;x>=0;--x)P(x);for(;;){var U=E();if(U<0||m[U]>u)break;N(U)}for(var j=[],x=0;x<s;++x)g[x]||(I[x]=j.length,j.push(f[x].slice()));j.length;function Z(re,W){if(re[W]<0)return W;var J=W,le=W;do{var ue=re[le];if(!g[le]||ue<0||ue===le||(le=ue,ue=re[le],!g[le]||ue<0||ue===le))break;le=ue,J=re[J]}while(J!==le);for(var se=W;se!==le;se=re[se])re[se]=le;return le}var te=[];return r.forEach(function(re){var W=Z(d,re[0]),J=Z(y,re[1]);if(W>=0&&J>=0&&W!==J){var le=I[W],ue=I[J];le!==ue&&te.push([le,ue])}}),n.unique(n.normalize(te)),{positions:j,edges:te}}},{"robust-orientation":284,"simplicial-complex":295}],298:[function(o,c,p){c.exports=a;var t=o("robust-orientation");function n(i,r){var f,u;if(r[0][0]<r[1][0])f=r[0],u=r[1];else if(r[0][0]>r[1][0])f=r[1],u=r[0];else{var s=Math.min(i[0][1],i[1][1]),h=Math.max(i[0][1],i[1][1]),d=Math.min(r[0][1],r[1][1]),y=Math.max(r[0][1],r[1][1]);return h<d?h-d:s>y?s-y:h-y}var m,g;i[0][1]<i[1][1]?(m=i[0],g=i[1]):(m=i[1],g=i[0]);var x=t(u,f,m);return x||(x=t(u,f,g),x)?x:g-u}function a(i,r){var f,u;if(r[0][0]<r[1][0])f=r[0],u=r[1];else if(r[0][0]>r[1][0])f=r[1],u=r[0];else return n(r,i);var s,h;if(i[0][0]<i[1][0])s=i[0],h=i[1];else if(i[0][0]>i[1][0])s=i[1],h=i[0];else return-n(i,r);var d=t(f,u,h),y=t(f,u,s);if(d<0){if(y<=0)return d}else if(d>0){if(y>=0)return d}else if(y)return y;if(d=t(h,s,u),y=t(h,s,f),d<0){if(y<=0)return d}else if(d>0){if(y>=0)return d}else if(y)return y;return u[0]-h[0]}},{"robust-orientation":284}],299:[function(o,c,p){c.exports=y;var t=o("binary-search-bounds"),n=o("functional-red-black-tree"),a=o("robust-orientation"),i=o("./lib/order-segments");function r(m,g,x){this.slabs=m,this.coordinates=g,this.horizontal=x}var f=r.prototype;function u(m,g){return m.y-g}function s(m,g){for(var x=null;m;){var A=m.key,b,S;A[0][0]<A[1][0]?(b=A[0],S=A[1]):(b=A[1],S=A[0]);var w=a(b,S,g);if(w<0)m=m.left;else if(w>0)if(g[0]!==A[1][0])x=m,m=m.right;else{var T=s(m.right,g);if(T)return T;m=m.left}else{if(g[0]!==A[1][0])return m;var T=s(m.right,g);if(T)return T;m=m.left}}return x}f.castUp=function(m){var g=t.le(this.coordinates,m[0]);if(g<0)return-1;this.slabs[g];var x=s(this.slabs[g],m),A=-1;if(x&&(A=x.value),this.coordinates[g]===m[0]){var b=null;if(x&&(b=x.key),g>0){var S=s(this.slabs[g-1],m);S&&(b?i(S.key,b)>0&&(b=S.key,A=S.value):(A=S.value,b=S.key))}var w=this.horizontal[g];if(w.length>0){var T=t.ge(w,m[1],u);if(T<w.length){var _=w[T];if(m[1]===_.y){if(_.closed)return _.index;for(;T<w.length-1&&w[T+1].y===m[1];)if(T=T+1,_=w[T],_.closed)return _.index;if(_.y===m[1]&&!_.start){if(T=T+1,T>=w.length)return A;_=w[T]}}if(_.start)if(b){var v=a(b[0],b[1],[m[0],_.y]);b[0][0]>b[1][0]&&(v=-v),v>0&&(A=_.index)}else A=_.index;else _.y!==m[1]&&(A=_.index)}}}return A};function h(m,g,x,A){this.y=m,this.index=g,this.start=x,this.closed=A}function d(m,g,x,A){this.x=m,this.segment=g,this.create=x,this.index=A}function y(m){for(var g=m.length,x=2*g,A=new Array(x),b=0;b<g;++b){var S=m[b],w=S[0][0]<S[1][0];A[2*b]=new d(S[0][0],S,w,b),A[2*b+1]=new d(S[1][0],S,!w,b)}A.sort(function(N,O){var I=N.x-O.x;return I||(I=N.create-O.create,I)?I:Math.min(N.segment[0][1],N.segment[1][1])-Math.min(O.segment[0][1],O.segment[1][1])});for(var T=n(i),_=[],v=[],P=[],b=0;b<x;){for(var M=A[b].x,E=[];b<x;){var D=A[b];if(D.x!==M)break;b+=1,D.segment[0][0]===D.x&&D.segment[1][0]===D.x?D.create&&(D.segment[0][1]<D.segment[1][1]?(E.push(new h(D.segment[0][1],D.index,!0,!0)),E.push(new h(D.segment[1][1],D.index,!1,!1))):(E.push(new h(D.segment[1][1],D.index,!0,!1)),E.push(new h(D.segment[0][1],D.index,!1,!0)))):D.create?T=T.insert(D.segment,D.index):T=T.remove(D.segment)}_.push(T.root),v.push(M),P.push(E)}return new r(_,v,P)}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(o,c,p){var t=o("robust-dot-product"),n=o("robust-sum");c.exports=r,c.exports.positive=f,c.exports.negative=u;function a(s,h){var d=n(t(s,h),[h[h.length-1]]);return d[d.length-1]}function i(s,h,d,y){var m=y-h,g=-h/m;g<0?g=0:g>1&&(g=1);for(var x=1-g,A=s.length,b=new Array(A),S=0;S<A;++S)b[S]=g*s[S]+x*d[S];return b}function r(s,h){for(var d=[],y=[],m=a(s[s.length-1],h),g=s[s.length-1],x=s[0],A=0;A<s.length;++A,g=x){x=s[A];var b=a(x,h);if(m<0&&b>0||m>0&&b<0){var S=i(g,b,x,m);d.push(S),y.push(S.slice())}b<0?y.push(x.slice()):b>0?d.push(x.slice()):(d.push(x.slice()),y.push(x.slice())),m=b}return{positive:d,negative:y}}function f(s,h){for(var d=[],y=a(s[s.length-1],h),m=s[s.length-1],g=s[0],x=0;x<s.length;++x,m=g){g=s[x];var A=a(g,h);(y<0&&A>0||y>0&&A<0)&&d.push(i(m,A,g,y)),A>=0&&d.push(g.slice()),y=A}return d}function u(s,h){for(var d=[],y=a(s[s.length-1],h),m=s[s.length-1],g=s[0],x=0;x<s.length;++x,m=g){g=s[x];var A=a(g,h);(y<0&&A>0||y>0&&A<0)&&d.push(i(m,A,g,y)),A<=0&&d.push(g.slice()),y=A}return d}},{"robust-dot-product":281,"robust-sum":289}],301:[function(o,c,p){(function(){var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(u){return i(f(u),arguments)}function a(u,s){return n.apply(null,[u].concat(s||[]))}function i(u,s){var h=1,d=u.length,y,m="",g,x,A,b,S,w,T,_;for(g=0;g<d;g++)if(typeof u[g]=="string")m+=u[g];else if(typeof u[g]=="object"){if(A=u[g],A.keys)for(y=s[h],x=0;x<A.keys.length;x++){if(y==null)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',A.keys[x],A.keys[x-1]));y=y[A.keys[x]]}else A.param_no?y=s[A.param_no]:y=s[h++];if(t.not_type.test(A.type)&&t.not_primitive.test(A.type)&&y instanceof Function&&(y=y()),t.numeric_arg.test(A.type)&&typeof y!="number"&&isNaN(y))throw new TypeError(n("[sprintf] expecting number but found %T",y));switch(t.number.test(A.type)&&(T=y>=0),A.type){case"b":y=parseInt(y,10).toString(2);break;case"c":y=String.fromCharCode(parseInt(y,10));break;case"d":case"i":y=parseInt(y,10);break;case"j":y=JSON.stringify(y,null,A.width?parseInt(A.width):0);break;case"e":y=A.precision?parseFloat(y).toExponential(A.precision):parseFloat(y).toExponential();break;case"f":y=A.precision?parseFloat(y).toFixed(A.precision):parseFloat(y);break;case"g":y=A.precision?String(Number(y.toPrecision(A.precision))):parseFloat(y);break;case"o":y=(parseInt(y,10)>>>0).toString(8);break;case"s":y=String(y),y=A.precision?y.substring(0,A.precision):y;break;case"t":y=String(!!y),y=A.precision?y.substring(0,A.precision):y;break;case"T":y=Object.prototype.toString.call(y).slice(8,-1).toLowerCase(),y=A.precision?y.substring(0,A.precision):y;break;case"u":y=parseInt(y,10)>>>0;break;case"v":y=y.valueOf(),y=A.precision?y.substring(0,A.precision):y;break;case"x":y=(parseInt(y,10)>>>0).toString(16);break;case"X":y=(parseInt(y,10)>>>0).toString(16).toUpperCase();break}t.json.test(A.type)?m+=y:(t.number.test(A.type)&&(!T||A.sign)?(_=T?"+":"-",y=y.toString().replace(t.sign,"")):_="",S=A.pad_char?A.pad_char==="0"?"0":A.pad_char.charAt(1):" ",w=A.width-(_+y).length,b=A.width&&w>0?S.repeat(w):"",m+=A.align?_+y+b:S==="0"?_+b+y:b+_+y)}return m}var r=Object.create(null);function f(u){if(r[u])return r[u];for(var s=u,h,d=[],y=0;s;){if((h=t.text.exec(s))!==null)d.push(h[0]);else if((h=t.modulo.exec(s))!==null)d.push("%");else if((h=t.placeholder.exec(s))!==null){if(h[2]){y|=1;var m=[],g=h[2],x=[];if((x=t.key.exec(g))!==null)for(m.push(x[1]);(g=g.substring(x[0].length))!=="";)if((x=t.key_access.exec(g))!==null)m.push(x[1]);else if((x=t.index_access.exec(g))!==null)m.push(x[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");h[2]=m}else y|=2;if(y===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d.push({placeholder:h[0],param_no:h[1],keys:h[2],sign:h[3],pad_char:h[4],align:h[5],width:h[6],precision:h[7],type:h[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");s=s.substring(h[0].length)}return r[u]=d}typeof p!="undefined"&&(p.sprintf=n,p.vsprintf=a),typeof window!="undefined"&&(window.sprintf=n,window.vsprintf=a)})()},{}],302:[function(o,c,p){c.exports=u;var t=o("ndarray-extract-contour"),n=o("zero-crossings"),a={"2d":function(s,h,d){var y=s({order:h,scalarArguments:3,getters:d==="generic"?[0]:void 0,phase:function(g,x,A,b){return g>b|0},vertex:function(g,x,A,b,S,w,T,_,v,P,M,E,D){var N=(T<<0)+(_<<1)+(v<<2)+(P<<3)|0;if(!(N===0||N===15))switch(N){case 0:M.push([g-.5,x-.5]);break;case 1:M.push([g-.25-.25*(b+A-2*D)/(A-b),x-.25-.25*(S+A-2*D)/(A-S)]);break;case 2:M.push([g-.75-.25*(-b-A+2*D)/(b-A),x-.25-.25*(w+b-2*D)/(b-w)]);break;case 3:M.push([g-.5,x-.5-.5*(S+A+w+b-4*D)/(A-S+b-w)]);break;case 4:M.push([g-.25-.25*(w+S-2*D)/(S-w),x-.75-.25*(-S-A+2*D)/(S-A)]);break;case 5:M.push([g-.5-.5*(b+A+w+S-4*D)/(A-b+S-w),x-.5]);break;case 6:M.push([g-.5-.25*(-b-A+w+S)/(b-A+S-w),x-.5-.25*(-S-A+w+b)/(S-A+b-w)]);break;case 7:M.push([g-.75-.25*(w+S-2*D)/(S-w),x-.75-.25*(w+b-2*D)/(b-w)]);break;case 8:M.push([g-.75-.25*(-w-S+2*D)/(w-S),x-.75-.25*(-w-b+2*D)/(w-b)]);break;case 9:M.push([g-.5-.25*(b+A+-w-S)/(A-b+w-S),x-.5-.25*(S+A+-w-b)/(A-S+w-b)]);break;case 10:M.push([g-.5-.5*(-b-A+-w-S+4*D)/(b-A+w-S),x-.5]);break;case 11:M.push([g-.25-.25*(-w-S+2*D)/(w-S),x-.75-.25*(S+A-2*D)/(A-S)]);break;case 12:M.push([g-.5,x-.5-.5*(-S-A+-w-b+4*D)/(S-A+w-b)]);break;case 13:M.push([g-.75-.25*(b+A-2*D)/(A-b),x-.25-.25*(-w-b+2*D)/(w-b)]);break;case 14:M.push([g-.25-.25*(-b-A+2*D)/(b-A),x-.25-.25*(-S-A+2*D)/(S-A)]);break;case 15:M.push([g-.5,x-.5]);break}},cell:function(g,x,A,b,S,w,T,_,v){S?_.push([g,x]):_.push([x,g])}});return function(m,g){var x=[],A=[];return y(m,x,A,g),{positions:x,cells:A}}}};function i(s,h){var d=s.length+"d",y=a[d];if(y)return y(t,s,h)}function r(s,h){for(var d=n(s,h),y=d.length,m=new Array(y),g=new Array(y),x=0;x<y;++x)m[x]=[d[x]],g[x]=[x];return{positions:m,cells:g}}var f={};function u(s,h){if(s.dimension<=0)return{positions:[],cells:[]};if(s.dimension===1)return r(s,h);var d=s.order.join()+"-"+s.dtype,y=f[d],h=+h||0;return y||(y=f[d]=i(s.order,s.dtype)),y(s,h)}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(o,c,p){(function(t){(function(){c.exports=f;var n=o("vectorize-text"),a=window||t.global||{},i=a.__TEXT_CACHE||{};a.__TEXT_CACHE={};function r(u){for(var s=u.cells,h=u.positions,d=new Float32Array(s.length*6),y=0,m=0,g=0;g<s.length;++g)for(var x=s[g],A=0;A<3;++A){var b=h[x[A]];d[y++]=b[0],d[y++]=b[1]+1.4,m=Math.max(b[0],m)}return{data:d,shape:m}}function f(u,s,h){var h=h||{},d=i[u];d||(d=i[u]={" ":{data:new Float32Array(0),shape:.2}});var y=d[s];if(!y)if(s.length<=1||!/\d/.test(s))y=d[s]=r(n(s,{triangles:!0,font:u,textAlign:h.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var m=s.split(/(\d|\s)/),g=new Array(m.length),x=0,A=0,b=0;b<m.length;++b)g[b]=f(u,m[b]),x+=g[b].data.length,A+=g[b].shape,b>0&&(A+=.02);for(var S=new Float32Array(x),w=0,T=-.5*A,b=0;b<g.length;++b){for(var _=g[b].data,v=0;v<_.length;v+=2)S[w++]=_[v]+T,S[w++]=_[v+1];T+=g[b].shape+.02}y=d[s]={data:S,shape:A}}return y}}).call(this)}).call(this,o("_process"))},{_process:5,"vectorize-text":311}],304:[function(o,c,p){var t=o("parse-unit");c.exports=r;var n=96;function a(f,u){var s=t(getComputedStyle(f).getPropertyValue(u));return s[0]*r(s[1],f)}function i(f,u){var s=document.createElement("div");s.style["font-size"]="128"+f,u.appendChild(s);var h=a(s,"font-size")/128;return u.removeChild(s),h}function r(f,u){switch(u=u||document.body,f=(f||"px").trim().toLowerCase(),(u===window||u===document)&&(u=document.body),f){case"%":return u.clientHeight/100;case"ch":case"ex":return i(f,u);case"em":return a(u,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return n;case"cm":return n/2.54;case"mm":return n/25.4;case"pt":return n/72;case"pc":return n/6}return 1}},{"parse-unit":265}],305:[function(o,c,p){c.exports=g;var t=o("filtered-vector"),n=o("gl-mat4/invert"),a=o("gl-mat4/rotate"),i=o("gl-vec3/cross"),r=o("gl-vec3/normalize"),f=o("gl-vec3/dot");function u(x,A,b){return Math.sqrt(Math.pow(x,2)+Math.pow(A,2)+Math.pow(b,2))}function s(x){return Math.min(1,Math.max(-1,x))}function h(x){var A=Math.abs(x[0]),b=Math.abs(x[1]),S=Math.abs(x[2]),w=[0,0,0];A>Math.max(b,S)?w[2]=1:b>Math.max(A,S)?w[0]=1:w[1]=1;for(var T=0,_=0,v=0;v<3;++v)T+=x[v]*x[v],_+=w[v]*x[v];for(var v=0;v<3;++v)w[v]-=_/T*x[v];return r(w,w),w}function d(x,A,b,S,w,T,_,v){this.center=t(b),this.up=t(S),this.right=t(w),this.radius=t([T]),this.angle=t([_,v]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(x,A),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var P=0;P<16;++P)this.computedMatrix[P]=.5;this.recalcMatrix(0)}var y=d.prototype;y.setDistanceLimits=function(x,A){x>0?x=Math.log(x):x=-1/0,A>0?A=Math.log(A):A=1/0,A=Math.max(A,x),this.radius.bounds[0][0]=x,this.radius.bounds[1][0]=A},y.getDistanceLimits=function(x){var A=this.radius.bounds[0];return x?(x[0]=Math.exp(A[0][0]),x[1]=Math.exp(A[1][0]),x):[Math.exp(A[0][0]),Math.exp(A[1][0])]},y.recalcMatrix=function(x){this.center.curve(x),this.up.curve(x),this.right.curve(x),this.radius.curve(x),this.angle.curve(x);for(var A=this.computedUp,b=this.computedRight,S=0,w=0,T=0;T<3;++T)w+=A[T]*b[T],S+=A[T]*A[T];for(var _=Math.sqrt(S),v=0,T=0;T<3;++T)b[T]-=A[T]*w/S,v+=b[T]*b[T],A[T]/=_;for(var P=Math.sqrt(v),T=0;T<3;++T)b[T]/=P;var M=this.computedToward;i(M,A,b),r(M,M);for(var E=Math.exp(this.computedRadius[0]),D=this.computedAngle[0],N=this.computedAngle[1],O=Math.cos(D),I=Math.sin(D),F=Math.cos(N),V=Math.sin(N),U=this.computedCenter,j=O*F,Z=I*F,te=V,re=-O*V,W=-I*V,J=F,le=this.computedEye,ue=this.computedMatrix,T=0;T<3;++T){var se=j*b[T]+Z*M[T]+te*A[T];ue[4*T+1]=re*b[T]+W*M[T]+J*A[T],ue[4*T+2]=se,ue[4*T+3]=0}var G=ue[1],Y=ue[5],ee=ue[9],$=ue[2],K=ue[6],Q=ue[10],ae=Y*Q-ee*K,ie=ee*$-G*Q,oe=G*K-Y*$,fe=u(ae,ie,oe);ae/=fe,ie/=fe,oe/=fe,ue[0]=ae,ue[4]=ie,ue[8]=oe;for(var T=0;T<3;++T)le[T]=U[T]+ue[2+4*T]*E;for(var T=0;T<3;++T){for(var v=0,ye=0;ye<3;++ye)v+=ue[T+4*ye]*le[ye];ue[12+T]=-v}ue[15]=1},y.getMatrix=function(x,A){this.recalcMatrix(x);var b=this.computedMatrix;if(A){for(var S=0;S<16;++S)A[S]=b[S];return A}return b};var m=[0,0,0];y.rotate=function(x,A,b,S){if(this.angle.move(x,A,b),S){this.recalcMatrix(x);var w=this.computedMatrix;m[0]=w[2],m[1]=w[6],m[2]=w[10];for(var T=this.computedUp,_=this.computedRight,v=this.computedToward,P=0;P<3;++P)w[4*P]=T[P],w[4*P+1]=_[P],w[4*P+2]=v[P];a(w,w,S,m);for(var P=0;P<3;++P)T[P]=w[4*P],_[P]=w[4*P+1];this.up.set(x,T[0],T[1],T[2]),this.right.set(x,_[0],_[1],_[2])}},y.pan=function(x,A,b,S){A=A||0,b=b||0,S=S||0,this.recalcMatrix(x);var w=this.computedMatrix;Math.exp(this.computedRadius[0]);var T=w[1],_=w[5],v=w[9],P=u(T,_,v);T/=P,_/=P,v/=P;var M=w[0],E=w[4],D=w[8],N=M*T+E*_+D*v;M-=T*N,E-=_*N,D-=v*N;var O=u(M,E,D);M/=O,E/=O,D/=O;var I=M*A+T*b,F=E*A+_*b,V=D*A+v*b;this.center.move(x,I,F,V);var U=Math.exp(this.computedRadius[0]);U=Math.max(1e-4,U+S),this.radius.set(x,Math.log(U))},y.translate=function(x,A,b,S){this.center.move(x,A||0,b||0,S||0)},y.setMatrix=function(x,A,b,S){var w=1;typeof b=="number"&&(w=b|0),(w<0||w>3)&&(w=1);var T=(w+2)%3;A||(this.recalcMatrix(x),A=this.computedMatrix);var _=A[w],v=A[w+4],P=A[w+8];if(S){var E=Math.abs(_),D=Math.abs(v),N=Math.abs(P),O=Math.max(E,D,N);E===O?(_=_<0?-1:1,v=P=0):N===O?(P=P<0?-1:1,_=v=0):(v=v<0?-1:1,_=P=0)}else{var M=u(_,v,P);_/=M,v/=M,P/=M}var I=A[T],F=A[T+4],V=A[T+8],U=I*_+F*v+V*P;I-=_*U,F-=v*U,V-=P*U;var j=u(I,F,V);I/=j,F/=j,V/=j;var Z=v*V-P*F,te=P*I-_*V,re=_*F-v*I,W=u(Z,te,re);Z/=W,te/=W,re/=W,this.center.jump(x,ke,Ae,Oe),this.radius.idle(x),this.up.jump(x,_,v,P),this.right.jump(x,I,F,V);var J,le;if(w===2){var ue=A[1],se=A[5],G=A[9],Y=ue*I+se*F+G*V,ee=ue*Z+se*te+G*re;ae<0?J=-Math.PI/2:J=Math.PI/2,le=Math.atan2(ee,Y)}else{var $=A[2],K=A[6],Q=A[10],ae=$*_+K*v+Q*P,ie=$*I+K*F+Q*V,oe=$*Z+K*te+Q*re;J=Math.asin(s(ae)),le=Math.atan2(oe,ie)}this.angle.jump(x,le,J),this.recalcMatrix(x);var fe=A[2],ye=A[6],ce=A[10],me=this.computedMatrix;n(me,A);var xe=me[15],ke=me[12]/xe,Ae=me[13]/xe,Oe=me[14]/xe,He=Math.exp(this.computedRadius[0]);this.center.jump(x,ke-fe*He,Ae-ye*He,Oe-ce*He)},y.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},y.idle=function(x){this.center.idle(x),this.up.idle(x),this.right.idle(x),this.radius.idle(x),this.angle.idle(x)},y.flush=function(x){this.center.flush(x),this.up.flush(x),this.right.flush(x),this.radius.flush(x),this.angle.flush(x)},y.setDistance=function(x,A){A>0&&this.radius.set(x,Math.log(A))},y.lookAt=function(x,A,b,S){this.recalcMatrix(x),A=A||this.computedEye,b=b||this.computedCenter,S=S||this.computedUp;var w=S[0],T=S[1],_=S[2],v=u(w,T,_);if(!(v<1e-6)){w/=v,T/=v,_/=v;var P=A[0]-b[0],M=A[1]-b[1],E=A[2]-b[2],D=u(P,M,E);if(!(D<1e-6)){P/=D,M/=D,E/=D;var N=this.computedRight,O=N[0],I=N[1],F=N[2],V=w*O+T*I+_*F;O-=V*w,I-=V*T,F-=V*_;var U=u(O,I,F);if(!(U<.01&&(O=T*E-_*M,I=_*P-w*E,F=w*M-T*P,U=u(O,I,F),U<1e-6))){O/=U,I/=U,F/=U,this.up.set(x,w,T,_),this.right.set(x,O,I,F),this.center.set(x,b[0],b[1],b[2]),this.radius.set(x,Math.log(D));var j=T*F-_*I,Z=_*O-w*F,te=w*I-T*O,re=u(j,Z,te);j/=re,Z/=re,te/=re;var W=w*P+T*M+_*E,J=O*P+I*M+F*E,le=j*P+Z*M+te*E,ue=Math.asin(s(W)),se=Math.atan2(le,J),G=this.angle._state,Y=G[G.length-1],ee=G[G.length-2];Y=Y%(2*Math.PI);var $=Math.abs(Y+2*Math.PI-se),K=Math.abs(Y-se),Q=Math.abs(Y-2*Math.PI-se);$<K&&(Y+=2*Math.PI),Q<K&&(Y-=2*Math.PI),this.angle.jump(this.angle.lastT(),Y,ee),this.angle.set(x,se,ue)}}}};function g(x){x=x||{};var A=x.center||[0,0,0],b=x.up||[0,1,0],S=x.right||h(b),w=x.radius||1,T=x.theta||0,_=x.phi||0;if(A=[].slice.call(A,0,3),b=[].slice.call(b,0,3),r(b,b),S=[].slice.call(S,0,3),r(S,S),"eye"in x){var v=x.eye,P=[v[0]-A[0],v[1]-A[1],v[2]-A[2]];i(S,P,b),u(S[0],S[1],S[2])<1e-6?S=h(b):r(S,S),w=u(P[0],P[1],P[2]);var M=f(b,P)/w,E=f(S,P)/w;_=Math.acos(M),T=Math.acos(E)}return w=Math.log(w),new d(x.zoomMin,x.zoomMax,A,b,S,w,T,_)}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(o,c,p){c.exports=n;var t=+(Math.pow(2,27)+1);function n(a,i,r){var f=a*i,u=t*a,s=u-a,h=u-s,d=a-h,y=t*i,m=y-i,g=y-m,x=i-g,A=f-h*g,b=A-d*g,S=b-h*x,w=d*x-S;return r?(r[0]=w,r[1]=f,r):[w,f]}},{}],307:[function(o,c,p){c.exports=t;function t(n,a,i){var r=n+a,f=r-n,u=r-f,s=a-f,h=n-u;return i?(i[0]=h+s,i[1]=r,i):[h+s,r]}},{}],308:[function(o,c,p){(function(t){(function(){var n=o("bit-twiddle"),a=o("dup"),i=o("buffer").Buffer;t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:a([32,0]),UINT16:a([32,0]),UINT32:a([32,0]),BIGUINT64:a([32,0]),INT8:a([32,0]),INT16:a([32,0]),INT32:a([32,0]),BIGINT64:a([32,0]),FLOAT:a([32,0]),DOUBLE:a([32,0]),DATA:a([32,0]),UINT8C:a([32,0]),BUFFER:a([32,0])});var r=typeof Uint8ClampedArray!="undefined",f=typeof BigUint64Array!="undefined",u=typeof BigInt64Array!="undefined",s=t.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=a([32,0])),s.BIGUINT64||(s.BIGUINT64=a([32,0])),s.BIGINT64||(s.BIGINT64=a([32,0])),s.BUFFER||(s.BUFFER=a([32,0]));var h=s.DATA,d=s.BUFFER;p.free=function(I){if(i.isBuffer(I))d[n.log2(I.length)].push(I);else{if(Object.prototype.toString.call(I)!=="[object ArrayBuffer]"&&(I=I.buffer),!I)return;var F=I.length||I.byteLength,V=n.log2(F)|0;h[V].push(I)}};function y(O){if(!!O){var I=O.length||O.byteLength,F=n.log2(I);h[F].push(O)}}function m(O){y(O.buffer)}p.freeUint8=p.freeUint16=p.freeUint32=p.freeBigUint64=p.freeInt8=p.freeInt16=p.freeInt32=p.freeBigInt64=p.freeFloat32=p.freeFloat=p.freeFloat64=p.freeDouble=p.freeUint8Clamped=p.freeDataView=m,p.freeArrayBuffer=y,p.freeBuffer=function(I){d[n.log2(I.length)].push(I)},p.malloc=function(I,F){if(F===void 0||F==="arraybuffer")return g(I);switch(F){case"uint8":return x(I);case"uint16":return A(I);case"uint32":return b(I);case"int8":return S(I);case"int16":return w(I);case"int32":return T(I);case"float":case"float32":return _(I);case"double":case"float64":return v(I);case"uint8_clamped":return P(I);case"bigint64":return E(I);case"biguint64":return M(I);case"buffer":return N(I);case"data":case"dataview":return D(I);default:return null}return null};function g(O){var O=n.nextPow2(O),I=n.log2(O),F=h[I];return F.length>0?F.pop():new ArrayBuffer(O)}p.mallocArrayBuffer=g;function x(O){return new Uint8Array(g(O),0,O)}p.mallocUint8=x;function A(O){return new Uint16Array(g(2*O),0,O)}p.mallocUint16=A;function b(O){return new Uint32Array(g(4*O),0,O)}p.mallocUint32=b;function S(O){return new Int8Array(g(O),0,O)}p.mallocInt8=S;function w(O){return new Int16Array(g(2*O),0,O)}p.mallocInt16=w;function T(O){return new Int32Array(g(4*O),0,O)}p.mallocInt32=T;function _(O){return new Float32Array(g(4*O),0,O)}p.mallocFloat32=p.mallocFloat=_;function v(O){return new Float64Array(g(8*O),0,O)}p.mallocFloat64=p.mallocDouble=v;function P(O){return r?new Uint8ClampedArray(g(O),0,O):x(O)}p.mallocUint8Clamped=P;function M(O){return f?new BigUint64Array(g(8*O),0,O):null}p.mallocBigUint64=M;function E(O){return u?new BigInt64Array(g(8*O),0,O):null}p.mallocBigInt64=E;function D(O){return new DataView(g(O),0,O)}p.mallocDataView=D;function N(O){O=n.nextPow2(O);var I=n.log2(O),F=d[I];return F.length>0?F.pop():new i(O)}p.mallocBuffer=N,p.clearCache=function(){for(var I=0;I<32;++I)s.UINT8[I].length=0,s.UINT16[I].length=0,s.UINT32[I].length=0,s.INT8[I].length=0,s.INT16[I].length=0,s.INT32[I].length=0,s.FLOAT[I].length=0,s.DOUBLE[I].length=0,s.BIGUINT64[I].length=0,s.BIGINT64[I].length=0,s.UINT8C[I].length=0,h[I].length=0,d[I].length=0}}).call(this)}).call(this,typeof l!="undefined"?l:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(o,c,p){c.exports=t;function t(a){this.roots=new Array(a),this.ranks=new Array(a);for(var i=0;i<a;++i)this.roots[i]=i,this.ranks[i]=0}var n=t.prototype;Object.defineProperty(n,"length",{get:function(){return this.roots.length}}),n.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},n.find=function(a){for(var i=a,r=this.roots;r[a]!==a;)a=r[a];for(;r[i]!==a;){var f=r[i];r[i]=a,i=f}return a},n.link=function(a,i){var r=this.find(a),f=this.find(i);if(r!==f){var u=this.ranks,s=this.roots,h=u[r],d=u[f];h<d?s[r]=f:d<h?s[f]=r:(s[f]=r,++u[r])}}},{}],310:[function(o,c,p){function t(i,r){for(var f=1,u=i.length,s=i[0],h=i[0],d=1;d<u;++d)if(h=s,s=i[d],r(s,h)){if(d===f){f++;continue}i[f++]=s}return i.length=f,i}function n(i){for(var r=1,f=i.length,u=i[0],s=i[0],h=1;h<f;++h,s=u)if(s=u,u=i[h],u!==s){if(h===r){r++;continue}i[r++]=u}return i.length=r,i}function a(i,r,f){return i.length===0?i:r?(f||i.sort(r),t(i,r)):(f||i.sort(),n(i))}c.exports=a},{}],311:[function(o,c,p){c.exports=i;var t=o("./lib/vtext"),n=null,a=null;typeof document!="undefined"&&(n=document.createElement("canvas"),n.width=8192,n.height=1024,a=n.getContext("2d"));function i(r,f){return(typeof f!="object"||f===null)&&(f={}),t(r,f.canvas||n,f.context||a,f)}},{"./lib/vtext":312}],312:[function(o,c,p){c.exports=M,c.exports.processPixels=P;var t=o("surface-nets"),n=o("ndarray"),a=o("simplify-planar-graph"),i=o("clean-pslg"),r=o("cdt2d"),f=o("planar-graph-to-polyline"),u="b",s="b|",h="i",d="i|",y="sup",m="+",g="+1",x="sub",A="-",b="-1";function S(E,D,N,O){for(var I="<"+E+">",F="</"+E+">",V=I.length,U=F.length,j=D[0]===m||D[0]===A,Z=0,te=-U;Z>-1&&(Z=N.indexOf(I,Z),!(Z===-1||(te=N.indexOf(F,Z+V),te===-1)||te<=Z));){for(var re=Z;re<te+U;++re)if(re<Z+V||re>=te)O[re]=null,N=N.substr(0,re)+" "+N.substr(re+1);else if(O[re]!==null){var W=O[re].indexOf(D[0]);W===-1?O[re]+=D:j&&(O[re]=O[re].substr(0,W+1)+(1+parseInt(O[re][W+1]))+O[re].substr(W+2))}var J=Z+V,le=N.substr(J,te-J),ue=le.indexOf(I);ue!==-1?Z=ue:Z=te+U}return O}function w(E,D,N){for(var O=D.textAlign||"start",I=D.textBaseline||"alphabetic",F=[1<<30,1<<30],V=[0,0],U=E.length,j=0;j<U;++j)for(var Z=E[j],te=0;te<2;++te)F[te]=Math.min(F[te],Z[te])|0,V[te]=Math.max(V[te],Z[te])|0;var re=0;switch(O){case"center":re=-.5*(F[0]+V[0]);break;case"right":case"end":re=-V[0];break;case"left":case"start":re=-F[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+O+"'")}var W=0;switch(I){case"hanging":case"top":W=-F[1];break;case"middle":W=-.5*(F[1]+V[1]);break;case"alphabetic":case"ideographic":W=-3*N;break;case"bottom":W=-V[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+I+"'")}var J=1/N;return"lineHeight"in D?J*=+D.lineHeight:"width"in D?J=D.width/(V[0]-F[0]):"height"in D&&(J=D.height/(V[1]-F[1])),E.map(function(le){return[J*(le[0]+re),J*(le[1]+W)]})}function T(E,D,N,O,I,F){N=N.replace(/\n/g,""),F.breaklines===!0?N=N.replace(/\<br\>/g,`
`):N=N.replace(/\<br\>/g," ");var V="",U=[];for(Y=0;Y<N.length;++Y)U[Y]=V;F.bolds===!0&&(U=S(u,s,N,U)),F.italics===!0&&(U=S(h,d,N,U)),F.superscripts===!0&&(U=S(y,g,N,U)),F.subscripts===!0&&(U=S(x,b,N,U));var j=[],Z="";for(Y=0;Y<N.length;++Y)U[Y]!==null&&(Z+=N[Y],j.push(U[Y]));var te=Z.split(`
`),re=te.length,W=Math.round(I*O),J=O,le=O*2,ue=0,se=re*W+le;E.height<se&&(E.height=se),D.fillStyle="#000",D.fillRect(0,0,E.width,E.height),D.fillStyle="#fff";var G,Y,ee,$,K,Q=0,ae="";function ie(){if(ae!==""){var Oe=D.measureText(ae).width;D.fillText(ae,J+ee,le+$),ee+=Oe}}function oe(){return""+Math.round(K)+"px "}function fe(Oe,He){var Ge=""+D.font;if(F.subscripts===!0){var _e=Oe.indexOf(A),Ie=He.indexOf(A),We=_e>-1?parseInt(Oe[1+_e]):0,et=Ie>-1?parseInt(He[1+Ie]):0;We!==et&&(Ge=Ge.replace(oe(),"?px "),K*=Math.pow(.75,et-We),Ge=Ge.replace("?px ",oe())),$+=.25*W*(et-We)}if(F.superscripts===!0){var Ne=Oe.indexOf(m),De=He.indexOf(m),Ve=Ne>-1?parseInt(Oe[1+Ne]):0,dt=De>-1?parseInt(He[1+De]):0;Ve!==dt&&(Ge=Ge.replace(oe(),"?px "),K*=Math.pow(.75,dt-Ve),Ge=Ge.replace("?px ",oe())),$-=.25*W*(dt-Ve)}if(F.bolds===!0){var Dt=Oe.indexOf(s)>-1,Gt=He.indexOf(s)>-1;!Dt&&Gt&&(Mt?Ge=Ge.replace("italic ","italic bold "):Ge="bold "+Ge),Dt&&!Gt&&(Ge=Ge.replace("bold ",""))}if(F.italics===!0){var Mt=Oe.indexOf(d)>-1,zt=He.indexOf(d)>-1;!Mt&&zt&&(Ge="italic "+Ge),Mt&&!zt&&(Ge=Ge.replace("italic ",""))}D.font=Ge}for(G=0;G<re;++G){var ye=te[G]+`
`;for(ee=0,$=G*W,K=O,ae="",Y=0;Y<ye.length;++Y){var ce=Y+Q<j.length?j[Y+Q]:j[j.length-1];V===ce?ae+=ye[Y]:(ie(),ae=ye[Y],ce!==void 0&&(fe(V,ce),V=ce))}ie(),Q+=ye.length;var me=Math.round(ee+2*J)|0;ue<me&&(ue=me)}var xe=ue,ke=le+W*re,Ae=n(D.getImageData(0,0,xe,ke).data,[ke,xe,4]);return Ae.pick(-1,-1,0).transpose(1,0)}function _(E,D){var N=t(E,128);return D?a(N.cells,N.positions,.25):{edges:N.cells,positions:N.positions}}function v(E,D,N,O){var I=_(E,O),F=w(I.positions,D,N),V=I.edges,U=D.orientation==="ccw";if(i(F,V),D.polygons||D.polygon||D.polyline){for(var j=f(V,F),Z=new Array(j.length),te=0;te<j.length;++te){for(var re=j[te],W=new Array(re.length),J=0;J<re.length;++J){for(var le=re[J],ue=new Array(le.length),se=0;se<le.length;++se)ue[se]=F[le[se]].slice();U&&ue.reverse(),W[J]=ue}Z[te]=W}return Z}else return D.triangles||D.triangulate||D.triangle?{cells:r(F,V,{delaunay:!1,exterior:!1,interior:!0}),positions:F}:{edges:V,positions:F}}function P(E,D,N){try{return v(E,D,N,!0)}catch{}try{return v(E,D,N,!1)}catch{}return D.polygons||D.polyline||D.polygon?[]:D.triangles||D.triangulate||D.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function M(E,D,N,O){var I=64,F=1.25,V={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};O&&(O.size&&O.size>0&&(I=O.size),O.lineSpacing&&O.lineSpacing>0&&(F=O.lineSpacing),O.styletags&&O.styletags.breaklines&&(V.breaklines=!!O.styletags.breaklines),O.styletags&&O.styletags.bolds&&(V.bolds=!!O.styletags.bolds),O.styletags&&O.styletags.italics&&(V.italics=!!O.styletags.italics),O.styletags&&O.styletags.subscripts&&(V.subscripts=!!O.styletags.subscripts),O.styletags&&O.styletags.superscripts&&(V.superscripts=!!O.styletags.superscripts)),N.font=[O.fontStyle,O.fontVariant,O.fontWeight,I+"px",O.font].filter(function(j){return j}).join(" "),N.textAlign="start",N.textBaseline="alphabetic",N.direction="ltr";var U=T(D,N,E,I,F,V);return P(U,O,I)}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(o,c,p){(function(){if(typeof ses!="undefined"&&ses.ok&&!ses.ok())return;function n(P){P.permitHostObjects___&&P.permitHostObjects___(n)}typeof ses!="undefined"&&(ses.weakMapPermitHostObjects=n);var a=!1;if(typeof WeakMap=="function"){var i=WeakMap;if(!(typeof navigator!="undefined"&&/Firefox/.test(navigator.userAgent))){var r=new i,f=Object.freeze({});if(r.set(f,1),r.get(f)!==1)a=!0;else{c.exports=WeakMap;return}}}var u=Object.getOwnPropertyNames,s=Object.defineProperty,h=Object.isExtensible,d="weakmap:",y=d+"ident:"+Math.random()+"___";if(typeof crypto!="undefined"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var m=new ArrayBuffer(25),g=new Uint8Array(m);crypto.getRandomValues(g),y=d+"rand:"+Array.prototype.map.call(g,function(P){return(P%36).toString(36)}).join("")+"___"}function x(P){return!(P.substr(0,d.length)==d&&P.substr(P.length-3)==="___")}if(s(Object,"getOwnPropertyNames",{value:function(M){return u(M).filter(x)}}),"getPropertyNames"in Object){var A=Object.getPropertyNames;s(Object,"getPropertyNames",{value:function(M){return A(M).filter(x)}})}function b(P){if(P!==Object(P))throw new TypeError("Not an object: "+P);var M=P[y];if(M&&M.key===P)return M;if(!!h(P)){M={key:P};try{return s(P,y,{value:M,writable:!1,enumerable:!1,configurable:!1}),M}catch{return}}}(function(){var P=Object.freeze;s(Object,"freeze",{value:function(N){return b(N),P(N)}});var M=Object.seal;s(Object,"seal",{value:function(N){return b(N),M(N)}});var E=Object.preventExtensions;s(Object,"preventExtensions",{value:function(N){return b(N),E(N)}})})();function S(P){return P.prototype=null,Object.freeze(P)}var w=!1;function T(){!w&&typeof console!="undefined"&&(w=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var _=0,v=function(){this instanceof v||T();var P=[],M=[],E=_++;function D(F,V){var U,j=b(F);return j?E in j?j[E]:V:(U=P.indexOf(F),U>=0?M[U]:V)}function N(F){var V=b(F);return V?E in V:P.indexOf(F)>=0}function O(F,V){var U,j=b(F);return j?j[E]=V:(U=P.indexOf(F),U>=0?M[U]=V:(U=P.length,M[U]=V,P[U]=F)),this}function I(F){var V=b(F),U,j;return V?E in V&&delete V[E]:(U=P.indexOf(F),U<0?!1:(j=P.length-1,P[U]=void 0,M[U]=M[j],P[U]=P[j],P.length=j,M.length=j,!0))}return Object.create(v.prototype,{get___:{value:S(D)},has___:{value:S(N)},set___:{value:S(O)},delete___:{value:S(I)}})};v.prototype=Object.create(Object.prototype,{get:{value:function(M,E){return this.get___(M,E)},writable:!0,configurable:!0},has:{value:function(M){return this.has___(M)},writable:!0,configurable:!0},set:{value:function(M,E){return this.set___(M,E)},writable:!0,configurable:!0},delete:{value:function(M){return this.delete___(M)},writable:!0,configurable:!0}}),typeof i=="function"?function(){a&&typeof Proxy!="undefined"&&(Proxy=void 0);function P(){this instanceof v||T();var M=new i,E=void 0,D=!1;function N(V,U){return E?M.has(V)?M.get(V):E.get___(V,U):M.get(V,U)}function O(V){return M.has(V)||(E?E.has___(V):!1)}var I;a?I=function(V,U){return M.set(V,U),M.has(V)||(E||(E=new v),E.set(V,U)),this}:I=function(V,U){if(D)try{M.set(V,U)}catch{E||(E=new v),E.set___(V,U)}else M.set(V,U);return this};function F(V){var U=!!M.delete(V);return E&&E.delete___(V)||U}return Object.create(v.prototype,{get___:{value:S(N)},has___:{value:S(O)},set___:{value:S(I)},delete___:{value:S(F)},permitHostObjects___:{value:S(function(V){if(V===n)D=!0;else throw new Error("bogus call to permitHostObjects___")})}})}P.prototype=v.prototype,c.exports=P,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy!="undefined"&&(Proxy=void 0),c.exports=v)})()},{}],314:[function(o,c,p){var t=o("./hidden-store.js");c.exports=n;function n(){var a={};return function(i){if((typeof i!="object"||i===null)&&typeof i!="function")throw new Error("Weakmap-shim: Key must be object");var r=i.valueOf(a);return r&&r.identity===a?r:t(i,a)}}},{"./hidden-store.js":315}],315:[function(o,c,p){c.exports=t;function t(n,a){var i={identity:a},r=n.valueOf;return Object.defineProperty(n,"valueOf",{value:function(f){return f!==a?r.apply(this,arguments):i},writable:!0}),i}},{}],316:[function(o,c,p){var t=o("./create-store.js");c.exports=n;function n(){var a=t();return{get:function(i,r){var f=a(i);return f.hasOwnProperty("value")?f.value:r},set:function(i,r){return a(i).value=r,this},has:function(i){return"value"in a(i)},delete:function(i){return delete a(i).value}}}},{"./create-store.js":314}],317:[function(o,c,p){function t(){return function(u,s,h,d,y,m){var g=u[0],x=h[0],A=[0],b=x;d|=0;var S=0,w=x;for(S=0;S<g;++S){{var T=s[d]-m,_=s[d+b]-m;T>=0!=_>=0&&y.push(A[0]+.5+.5*(T+_)/(T-_))}d+=w,++A[0]}}}function n(){return t()}var a=n;function i(u){var s={};return function(d,y,m){var g=d.dtype,x=d.order,A=[g,x.join()].join(),b=s[A];return b||(s[A]=b=u([g,x])),b(d.shape.slice(0),d.data,d.stride,d.offset|0,y,m)}}function r(u){return i(a.bind(void 0,u))}function f(u){return r({funcName:u.funcName})}c.exports=f({funcName:"zeroCrossings"})},{}],318:[function(o,c,p){c.exports=n;var t=o("./lib/zc-core");function n(a,i){var r=[];return i=+i||0,t(a.hi(a.shape[0]-1),r,i),r}},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,typeof lo!="undefined"?lo:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[27])(27)})})(E5);(function(C){Object.defineProperty(C,"__esModule",{value:!0}),C.default=void 0;var B=k(C5),e=k(E5.exports);function k(o){return o&&o.__esModule?o:{default:o}}var z=(0,B.default)(e.default),l=z;C.default=l})(k5);var XB=GM(k5),RB=Hb(kM),DB,IB,FB,F1=RB,zB=0;function L5(C,B,e,k,z){var l,o,c={};for(o in B)o=="ref"?l=B[o]:c[o]=B[o];var p={type:C,props:c,key:e,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--zB,__source:k,__self:z};if(typeof C=="function"&&(l=C.defaultProps))for(o in l)c[o]===void 0&&(c[o]=l[o]);return F1.options.vnode&&F1.options.vnode(p),p}FB=F1.Fragment,IB=L5,DB=L5;var ZB=iI({d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm0,19a1.5,1.5,0,1,1,1.5-1.5A1.5,1.5,0,0,1,12,19Zm1.6-6.08a1,1,0,0,0-.6.917,1,1,0,1,1-2,0,3,3,0,0,1,1.8-2.75A2,2,0,1,0,10,9.255a1,1,0,1,1-2,0,4,4,0,1,1,5.6,3.666Z",displayName:"QuestionIcon"});export{nI as C,YB as D,OB as E,FB as F,VB as I,HB as M,XB as P,ZB as Q,jh as S,BB as T,DB as a,Oo as b,jB as c,WB as d,GB as e,NB as f,g4 as i,IB as j,Us as l,_o as y};
//# sourceMappingURL=vendor.c3ee88e4.js.map
